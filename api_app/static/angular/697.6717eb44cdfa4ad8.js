(self.webpackChunkcom_br_easycontroller=self.webpackChunkcom_br_easycontroller||[]).push([[697],{4697:(vd,v,ae)=>{"use strict";ae.r(v),ae.d(v,{TimeControllerDomainModule:()=>xy});var ie=ae(6895),p=ae(4166);class g{constructor(Q){this.lines=1,this.cols=1,this.values=Array.from(Array(this.lines),()=>new Array(this.cols)),this.label=Q}}var b=ae(2228),y=ae.n(b),e=ae(1571);function r(Y,Q,I,re,Me,Ge,Ht){try{var yn=Y[Ge](Ht),An=yn.value}catch(zn){return void I(zn)}yn.done?Q(An):Promise.resolve(An).then(re,Me)}function t(Y){return function(){var Q=this,I=arguments;return new Promise(function(re,Me){var Ge=Y.apply(Q,I);function Ht(An){r(Ge,re,Me,Ht,yn,"next",An)}function yn(An){r(Ge,re,Me,Ht,yn,"throw",An)}Ht(void 0)})}}var o=ae(6805),n=ae(930);function m(Y,Q){const I="object"==typeof Q;return new Promise((re,Me)=>{const Ge=new n.Hp({next:Ht=>{re(Ht),Ge.unsubscribe()},error:Me,complete:()=>{I?re(Q.defaultValue):Me(new o.K)}});Y.subscribe(Ge)})}var l=ae(529);let i=(()=>{class Y{constructor(I){this.http=I}calcStep(I){var re=this;return t(function*(){return yield m(re.http.post("http://almir.pythonanywhere.com/appview/easy-controller/",I,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"}}))})()}calc_lqr(I){var re=this;return t(function*(){return yield m(re.http.post("http://almir.pythonanywhere.com/appview/easy-controller/lqr",I,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"}}))})()}calc_lqi(I){var re=this;return t(function*(){return yield m(re.http.post("http://almir.pythonanywhere.com/appview/easy-controller/lqi",I,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"}}))})()}calc_lqg(I){var re=this;return t(function*(){return yield m(re.http.post("http://almir.pythonanywhere.com/appview/easy-controller/lqg",I,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"}}))})()}calc_lqgi(I){var re=this;return t(function*(){return yield m(re.http.post("http://almir.pythonanywhere.com/appview/easy-controller/lqgi",I,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"*"}}))})()}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(l.eN))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac}),Y})();var f=ae(2076),u=ae(9751),s=ae(4742),d=ae(8421),h=ae(3269),a=ae(5403),_=ae(3268),c=ae(1810),x=ae(4004);let w=(()=>{class Y{constructor(I,re){this._renderer=I,this._elementRef=re,this.onChange=Me=>{},this.onTouched=()=>{}}setProperty(I,re){this._renderer.setProperty(this._elementRef.nativeElement,I,re)}registerOnTouched(I){this.onTouched=I}registerOnChange(I){this.onChange=I}setDisabledState(I){this.setProperty("disabled",I)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.Qsj),e.Y36(e.SBq))},Y.\u0275dir=e.lG2({type:Y}),Y})(),M=(()=>{class Y extends w{}return Y.\u0275fac=function(){let Q;return function(re){return(Q||(Q=e.n5z(Y)))(re||Y)}}(),Y.\u0275dir=e.lG2({type:Y,features:[e.qOj]}),Y})();const D=new e.OlP("NgValueAccessor"),L={provide:D,useExisting:(0,e.Gpc)(()=>N),multi:!0},E=new e.OlP("CompositionEventMode");let N=(()=>{class Y extends w{constructor(I,re,Me){super(I,re),this._compositionMode=Me,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function S(){const Y=(0,ie.q)()?(0,ie.q)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(I){this.setProperty("value",I??"")}_handleInput(I){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(I)}_compositionStart(){this._composing=!0}_compositionEnd(I){this._composing=!1,this._compositionMode&&this.onChange(I)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(E,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(I,re){1&I&&e.NdJ("input",function(Ge){return re._handleInput(Ge.target.value)})("blur",function(){return re.onTouched()})("compositionstart",function(){return re._compositionStart()})("compositionend",function(Ge){return re._compositionEnd(Ge.target.value)})},features:[e._Bn([L]),e.qOj]}),Y})();function q(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}function G(Y){return null!=Y&&"number"==typeof Y.length}const K=new e.OlP("NgValidators"),ne=new e.OlP("NgAsyncValidators"),X=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class J{static min(Q){return function se(Y){return Q=>{if(q(Q.value)||q(Y))return null;const I=parseFloat(Q.value);return!isNaN(I)&&I<Y?{min:{min:Y,actual:Q.value}}:null}}(Q)}static max(Q){return function V(Y){return Q=>{if(q(Q.value)||q(Y))return null;const I=parseFloat(Q.value);return!isNaN(I)&&I>Y?{max:{max:Y,actual:Q.value}}:null}}(Q)}static required(Q){return function j(Y){return q(Y.value)?{required:!0}:null}(Q)}static requiredTrue(Q){return function H(Y){return!0===Y.value?null:{required:!0}}(Q)}static email(Q){return function oe(Y){return q(Y.value)||X.test(Y.value)?null:{email:!0}}(Q)}static minLength(Q){return function U(Y){return Q=>q(Q.value)||!G(Q.value)?null:Q.value.length<Y?{minlength:{requiredLength:Y,actualLength:Q.value.length}}:null}(Q)}static maxLength(Q){return function te(Y){return Q=>G(Q.value)&&Q.value.length>Y?{maxlength:{requiredLength:Y,actualLength:Q.value.length}}:null}(Q)}static pattern(Q){return function ee(Y){if(!Y)return le;let Q,I;return"string"==typeof Y?(I="","^"!==Y.charAt(0)&&(I+="^"),I+=Y,"$"!==Y.charAt(Y.length-1)&&(I+="$"),Q=new RegExp(I)):(I=Y.toString(),Q=Y),re=>{if(q(re.value))return null;const Me=re.value;return Q.test(Me)?null:{pattern:{requiredPattern:I,actualValue:Me}}}}(Q)}static nullValidator(Q){return null}static compose(Q){return De(Q)}static composeAsync(Q){return ke(Q)}}function le(Y){return null}function ce(Y){return null!=Y}function pe(Y){return(0,e.QGY)(Y)?(0,f.D)(Y):Y}function de(Y){let Q={};return Y.forEach(I=>{Q=null!=I?{...Q,...I}:Q}),0===Object.keys(Q).length?null:Q}function be(Y,Q){return Q.map(I=>I(Y))}function xe(Y){return Y.map(Q=>function he(Y){return!Y.validate}(Q)?Q:I=>Q.validate(I))}function De(Y){if(!Y)return null;const Q=Y.filter(ce);return 0==Q.length?null:function(I){return de(be(I,Q))}}function Se(Y){return null!=Y?De(xe(Y)):null}function ke(Y){if(!Y)return null;const Q=Y.filter(ce);return 0==Q.length?null:function(I){return function T(...Y){const Q=(0,h.jO)(Y),{args:I,keys:re}=(0,s.D)(Y),Me=new u.y(Ge=>{const{length:Ht}=I;if(!Ht)return void Ge.complete();const yn=new Array(Ht);let An=Ht,zn=Ht;for(let lr=0;lr<Ht;lr++){let fi=!1;(0,d.Xf)(I[lr]).subscribe((0,a.x)(Ge,vi=>{fi||(fi=!0,zn--),yn[lr]=vi},()=>An--,void 0,()=>{(!An||!fi)&&(zn||Ge.next(re?(0,c.n)(re,yn):yn),Ge.complete())}))}});return Q?Me.pipe((0,_.Z)(Q)):Me}(be(I,Q).map(pe)).pipe((0,x.U)(de))}}function Fe(Y){return null!=Y?ke(xe(Y)):null}function ve(Y,Q){return null===Y?[Q]:Array.isArray(Y)?[...Y,Q]:[Y,Q]}function Te(Y){return Y._rawValidators}function Le(Y){return Y._rawAsyncValidators}function Oe(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function Ne(Y,Q){return Array.isArray(Y)?Y.includes(Q):Y===Q}function Be(Y,Q){const I=Oe(Q);return Oe(Y).forEach(Me=>{Ne(I,Me)||I.push(Me)}),I}function He(Y,Q){return Oe(Q).filter(I=>!Ne(Y,I))}class Ve{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Q){this._rawValidators=Q||[],this._composedValidatorFn=Se(this._rawValidators)}_setAsyncValidators(Q){this._rawAsyncValidators=Q||[],this._composedAsyncValidatorFn=Fe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Q){this._onDestroyCallbacks.push(Q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Q=>Q()),this._onDestroyCallbacks=[]}reset(Q){this.control&&this.control.reset(Q)}hasError(Q,I){return!!this.control&&this.control.hasError(Q,I)}getError(Q,I){return this.control?this.control.getError(Q,I):null}}class it extends Ve{get formDirective(){return null}get path(){return null}}class ze extends Ve{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let ct=(()=>{class Y extends class je{constructor(Q){this._cd=Q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(I){super(I)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(ze,2))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(I,re){2&I&&e.ekj("ng-untouched",re.isUntouched)("ng-touched",re.isTouched)("ng-pristine",re.isPristine)("ng-dirty",re.isDirty)("ng-valid",re.isValid)("ng-invalid",re.isInvalid)("ng-pending",re.isPending)},features:[e.qOj]}),Y})();const rt="VALID",Ke="INVALID",gt="PENDING",mt="DISABLED";function Lt(Y){return(Yt(Y)?Y.validators:Y)||null}function Vt(Y){return Array.isArray(Y)?Se(Y):Y||null}function dt(Y,Q){return(Yt(Q)?Q.asyncValidators:Y)||null}function bt(Y){return Array.isArray(Y)?Fe(Y):Y||null}function Yt(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}class Ie{constructor(Q,I){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Q,this._rawAsyncValidators=I,this._composedValidatorFn=Vt(this._rawValidators),this._composedAsyncValidatorFn=bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Q){this._rawValidators=this._composedValidatorFn=Q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Q){this._rawAsyncValidators=this._composedAsyncValidatorFn=Q}get parent(){return this._parent}get valid(){return this.status===rt}get invalid(){return this.status===Ke}get pending(){return this.status==gt}get disabled(){return this.status===mt}get enabled(){return this.status!==mt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Q){this._rawValidators=Q,this._composedValidatorFn=Vt(Q)}setAsyncValidators(Q){this._rawAsyncValidators=Q,this._composedAsyncValidatorFn=bt(Q)}addValidators(Q){this.setValidators(Be(Q,this._rawValidators))}addAsyncValidators(Q){this.setAsyncValidators(Be(Q,this._rawAsyncValidators))}removeValidators(Q){this.setValidators(He(Q,this._rawValidators))}removeAsyncValidators(Q){this.setAsyncValidators(He(Q,this._rawAsyncValidators))}hasValidator(Q){return Ne(this._rawValidators,Q)}hasAsyncValidator(Q){return Ne(this._rawAsyncValidators,Q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Q={}){this.touched=!0,this._parent&&!Q.onlySelf&&this._parent.markAsTouched(Q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Q=>Q.markAllAsTouched())}markAsUntouched(Q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(I=>{I.markAsUntouched({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}markAsDirty(Q={}){this.pristine=!1,this._parent&&!Q.onlySelf&&this._parent.markAsDirty(Q)}markAsPristine(Q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(I=>{I.markAsPristine({onlySelf:!0})}),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}markAsPending(Q={}){this.status=gt,!1!==Q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Q.onlySelf&&this._parent.markAsPending(Q)}disable(Q={}){const I=this._parentMarkedDirty(Q.onlySelf);this.status=mt,this.errors=null,this._forEachChild(re=>{re.disable({...Q,onlySelf:!0})}),this._updateValue(),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Q,skipPristineCheck:I}),this._onDisabledChange.forEach(re=>re(!0))}enable(Q={}){const I=this._parentMarkedDirty(Q.onlySelf);this.status=rt,this._forEachChild(re=>{re.enable({...Q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent}),this._updateAncestors({...Q,skipPristineCheck:I}),this._onDisabledChange.forEach(re=>re(!1))}_updateAncestors(Q){this._parent&&!Q.onlySelf&&(this._parent.updateValueAndValidity(Q),Q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Q){this._parent=Q}getRawValue(){return this.value}updateValueAndValidity(Q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rt||this.status===gt)&&this._runAsyncValidator(Q.emitEvent)),!1!==Q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Q.onlySelf&&this._parent.updateValueAndValidity(Q)}_updateTreeValidity(Q={emitEvent:!0}){this._forEachChild(I=>I._updateTreeValidity(Q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mt:rt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Q){if(this.asyncValidator){this.status=gt,this._hasOwnPendingAsyncValidator=!0;const I=pe(this.asyncValidator(this));this._asyncValidationSubscription=I.subscribe(re=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(re,{emitEvent:Q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Q,I={}){this.errors=Q,this._updateControlsErrors(!1!==I.emitEvent)}get(Q){let I=Q;return null==I||(Array.isArray(I)||(I=I.split(".")),0===I.length)?null:I.reduce((re,Me)=>re&&re._find(Me),this)}getError(Q,I){const re=I?this.get(I):this;return re&&re.errors?re.errors[Q]:null}hasError(Q,I){return!!this.getError(Q,I)}get root(){let Q=this;for(;Q._parent;)Q=Q._parent;return Q}_updateControlsErrors(Q){this.status=this._calculateStatus(),Q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Q)}_initObservables(){this.valueChanges=new e.vpe,this.statusChanges=new e.vpe}_calculateStatus(){return this._allControlsDisabled()?mt:this.errors?Ke:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gt)?gt:this._anyControlsHaveStatus(Ke)?Ke:rt}_anyControlsHaveStatus(Q){return this._anyControls(I=>I.status===Q)}_anyControlsDirty(){return this._anyControls(Q=>Q.dirty)}_anyControlsTouched(){return this._anyControls(Q=>Q.touched)}_updatePristine(Q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Q.onlySelf&&this._parent._updatePristine(Q)}_updateTouched(Q={}){this.touched=this._anyControlsTouched(),this._parent&&!Q.onlySelf&&this._parent._updateTouched(Q)}_registerOnCollectionChange(Q){this._onCollectionChange=Q}_setUpdateStrategy(Q){Yt(Q)&&null!=Q.updateOn&&(this._updateOn=Q.updateOn)}_parentMarkedDirty(Q){return!Q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Q){return null}}class et extends Ie{constructor(Q,I,re){super(Lt(I),dt(re,I)),this.controls=Q,this._initObservables(),this._setUpdateStrategy(I),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Q,I){return this.controls[Q]?this.controls[Q]:(this.controls[Q]=I,I.setParent(this),I._registerOnCollectionChange(this._onCollectionChange),I)}addControl(Q,I,re={}){this.registerControl(Q,I),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}removeControl(Q,I={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],this.updateValueAndValidity({emitEvent:I.emitEvent}),this._onCollectionChange()}setControl(Q,I,re={}){this.controls[Q]&&this.controls[Q]._registerOnCollectionChange(()=>{}),delete this.controls[Q],I&&this.registerControl(Q,I),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}contains(Q){return this.controls.hasOwnProperty(Q)&&this.controls[Q].enabled}setValue(Q,I={}){(function jt(Y,Q,I){Y._forEachChild((re,Me)=>{if(void 0===I[Me])throw new e.vHH(1002,"")})})(this,0,Q),Object.keys(Q).forEach(re=>{(function It(Y,Q,I){const re=Y.controls;if(!(Q?Object.keys(re):re).length)throw new e.vHH(1e3,"");if(!re[I])throw new e.vHH(1001,"")})(this,!0,re),this.controls[re].setValue(Q[re],{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I)}patchValue(Q,I={}){null!=Q&&(Object.keys(Q).forEach(re=>{const Me=this.controls[re];Me&&Me.patchValue(Q[re],{onlySelf:!0,emitEvent:I.emitEvent})}),this.updateValueAndValidity(I))}reset(Q={},I={}){this._forEachChild((re,Me)=>{re.reset(Q[Me],{onlySelf:!0,emitEvent:I.emitEvent})}),this._updatePristine(I),this._updateTouched(I),this.updateValueAndValidity(I)}getRawValue(){return this._reduceChildren({},(Q,I,re)=>(Q[re]=I.getRawValue(),Q))}_syncPendingControls(){let Q=this._reduceChildren(!1,(I,re)=>!!re._syncPendingControls()||I);return Q&&this.updateValueAndValidity({onlySelf:!0}),Q}_forEachChild(Q){Object.keys(this.controls).forEach(I=>{const re=this.controls[I];re&&Q(re,I)})}_setUpControls(){this._forEachChild(Q=>{Q.setParent(this),Q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Q){for(const[I,re]of Object.entries(this.controls))if(this.contains(I)&&Q(re))return!0;return!1}_reduceValue(){return this._reduceChildren({},(I,re,Me)=>((re.enabled||this.disabled)&&(I[Me]=re.value),I))}_reduceChildren(Q,I){let re=Q;return this._forEachChild((Me,Ge)=>{re=I(re,Me,Ge)}),re}_allControlsDisabled(){for(const Q of Object.keys(this.controls))if(this.controls[Q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Q){return this.controls.hasOwnProperty(Q)?this.controls[Q]:null}}function Kt(Y,Q){sn(Y,Q),Q.valueAccessor.writeValue(Y.value),Y.disabled&&Q.valueAccessor.setDisabledState?.(!0),function dn(Y,Q){Q.valueAccessor.registerOnChange(I=>{Y._pendingValue=I,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&En(Y,Q)})}(Y,Q),function jn(Y,Q){const I=(re,Me)=>{Q.valueAccessor.writeValue(re),Me&&Q.viewToModelUpdate(re)};Y.registerOnChange(I),Q._registerOnDestroy(()=>{Y._unregisterOnChange(I)})}(Y,Q),function Mn(Y,Q){Q.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&En(Y,Q),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,Q),function Tn(Y,Q){if(Q.valueAccessor.setDisabledState){const I=re=>{Q.valueAccessor.setDisabledState(re)};Y.registerOnDisabledChange(I),Q._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(I)})}}(Y,Q)}function kn(Y,Q,I=!0){const re=()=>{};Q.valueAccessor&&(Q.valueAccessor.registerOnChange(re),Q.valueAccessor.registerOnTouched(re)),fn(Y,Q),Y&&(Q._invokeOnDestroyCallbacks(),Y._registerOnCollectionChange(()=>{}))}function Vn(Y,Q){Y.forEach(I=>{I.registerOnValidatorChange&&I.registerOnValidatorChange(Q)})}function sn(Y,Q){const I=Te(Y);null!==Q.validator?Y.setValidators(ve(I,Q.validator)):"function"==typeof I&&Y.setValidators([I]);const re=Le(Y);null!==Q.asyncValidator?Y.setAsyncValidators(ve(re,Q.asyncValidator)):"function"==typeof re&&Y.setAsyncValidators([re]);const Me=()=>Y.updateValueAndValidity();Vn(Q._rawValidators,Me),Vn(Q._rawAsyncValidators,Me)}function fn(Y,Q){let I=!1;if(null!==Y){if(null!==Q.validator){const Me=Te(Y);if(Array.isArray(Me)&&Me.length>0){const Ge=Me.filter(Ht=>Ht!==Q.validator);Ge.length!==Me.length&&(I=!0,Y.setValidators(Ge))}}if(null!==Q.asyncValidator){const Me=Le(Y);if(Array.isArray(Me)&&Me.length>0){const Ge=Me.filter(Ht=>Ht!==Q.asyncValidator);Ge.length!==Me.length&&(I=!0,Y.setAsyncValidators(Ge))}}}const re=()=>{};return Vn(Q._rawValidators,re),Vn(Q._rawAsyncValidators,re),I}function En(Y,Q){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),Q.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}function er(Y,Q){sn(Y,Q)}function Hr(Y,Q){Y._syncPendingControls(),Q.forEach(I=>{const re=I.control;"submit"===re.updateOn&&re._pendingChange&&(I.viewToModelUpdate(re._pendingValue),re._pendingChange=!1)})}const Tr={provide:it,useExisting:(0,e.Gpc)(()=>Jr)},ar=(()=>Promise.resolve(null))();let Jr=(()=>{class Y extends it{constructor(I,re){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new e.vpe,this.form=new et({},Se(I),Fe(re))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(I){ar.then(()=>{const re=this._findContainer(I.path);I.control=re.registerControl(I.name,I.control),Kt(I.control,I),I.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(I)})}getControl(I){return this.form.get(I.path)}removeControl(I){ar.then(()=>{const re=this._findContainer(I.path);re&&re.removeControl(I.name),this._directives.delete(I)})}addFormGroup(I){ar.then(()=>{const re=this._findContainer(I.path),Me=new et({});er(Me,I),re.registerControl(I.name,Me),Me.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(I){ar.then(()=>{const re=this._findContainer(I.path);re&&re.removeControl(I.name)})}getFormGroup(I){return this.form.get(I.path)}updateModel(I,re){ar.then(()=>{this.form.get(I.path).setValue(re)})}setValue(I){this.control.setValue(I)}onSubmit(I){return this.submitted=!0,Hr(this.form,this._directives),this.ngSubmit.emit(I),!1}onReset(){this.resetForm()}resetForm(I){this.form.reset(I),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(I){return I.pop(),I.length?this.form.get(I):this.form}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(K,10),e.Y36(ne,10))},Y.\u0275dir=e.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(I,re){1&I&&e.NdJ("submit",function(Ge){return re.onSubmit(Ge)})("reset",function(){return re.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[e._Bn([Tr]),e.qOj]}),Y})();function ri(Y,Q){const I=Y.indexOf(Q);I>-1&&Y.splice(I,1)}function Rr(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}const Yr=class extends Ie{constructor(Q=null,I,re){super(Lt(I),dt(re,I)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Q),this._setUpdateStrategy(I),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yt(I)&&(I.nonNullable||I.initialValueIsDefault)&&(this.defaultValue=Rr(Q)?Q.value:Q)}setValue(Q,I={}){this.value=this._pendingValue=Q,this._onChange.length&&!1!==I.emitModelToViewChange&&this._onChange.forEach(re=>re(this.value,!1!==I.emitViewToModelChange)),this.updateValueAndValidity(I)}patchValue(Q,I={}){this.setValue(Q,I)}reset(Q=this.defaultValue,I={}){this._applyFormState(Q),this.markAsPristine(I),this.markAsUntouched(I),this.setValue(this.value,I),this._pendingChange=!1}_updateValue(){}_anyControls(Q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Q){this._onChange.push(Q)}_unregisterOnChange(Q){ri(this._onChange,Q)}registerOnDisabledChange(Q){this._onDisabledChange.push(Q)}_unregisterOnDisabledChange(Q){ri(this._onDisabledChange,Q)}_forEachChild(Q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Q){Rr(Q)?(this.value=this._pendingValue=Q.value,Q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Q}},Un={provide:ze,useExisting:(0,e.Gpc)(()=>Pn)},In=(()=>Promise.resolve(null))();let Pn=(()=>{class Y extends ze{constructor(I,re,Me,Ge,Ht){super(),this._changeDetectorRef=Ht,this.control=new Yr,this._registered=!1,this.update=new e.vpe,this._parent=I,this._setValidators(re),this._setAsyncValidators(Me),this.valueAccessor=function oi(Y,Q){if(!Q)return null;let I,re,Me;return Array.isArray(Q),Q.forEach(Ge=>{Ge.constructor===N?I=Ge:function Or(Y){return Object.getPrototypeOf(Y.constructor)===M}(Ge)?re=Ge:Me=Ge}),Me||re||I||null}(0,Ge)}ngOnChanges(I){if(this._checkForErrors(),!this._registered||"name"in I){if(this._registered&&(this._checkName(),this.formDirective)){const re=I.name.previousValue;this.formDirective.removeControl({name:re,path:this._getPath(re)})}this._setUpControl()}"isDisabled"in I&&this._updateDisabled(I),function kr(Y,Q){if(!Y.hasOwnProperty("model"))return!1;const I=Y.model;return!!I.isFirstChange()||!Object.is(Q,I.currentValue)}(I,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(I){this.viewModel=I,this.update.emit(I)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(I){In.then(()=>{this.control.setValue(I,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(I){const re=I.isDisabled.currentValue,Me=0!==re&&(0,e.D6c)(re);In.then(()=>{Me&&!this.control.disabled?this.control.disable():!Me&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(I){return this._parent?function tn(Y,Q){return[...Q.path,Y]}(I,this._parent):[I]}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(it,9),e.Y36(K,10),e.Y36(ne,10),e.Y36(D,10),e.Y36(e.sBO,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[e._Bn([Un]),e.qOj,e.TTD]}),Y})();const Gn={provide:D,useExisting:(0,e.Gpc)(()=>or),multi:!0};let or=(()=>{class Y extends M{writeValue(I){this.setProperty("value",I??"")}registerOnChange(I){this.onChange=re=>{I(""==re?null:parseFloat(re))}}}return Y.\u0275fac=function(){let Q;return function(re){return(Q||(Q=e.n5z(Y)))(re||Y)}}(),Y.\u0275dir=e.lG2({type:Y,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(I,re){1&I&&e.NdJ("input",function(Ge){return re.onChange(Ge.target.value)})("blur",function(){return re.onTouched()})},features:[e._Bn([Gn]),e.qOj]}),Y})(),_r=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();const Hi={provide:it,useExisting:(0,e.Gpc)(()=>jr)};let jr=(()=>{class Y extends it{constructor(I,re){super(),this.validators=I,this.asyncValidators=re,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new e.vpe,this._setValidators(I),this._setAsyncValidators(re)}ngOnChanges(I){this._checkFormPresent(),I.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(I){const re=this.form.get(I.path);return Kt(re,I),re.updateValueAndValidity({emitEvent:!1}),this.directives.push(I),re}getControl(I){return this.form.get(I.path)}removeControl(I){kn(I.control||null,I,!1),function Qn(Y,Q){const I=Y.indexOf(Q);I>-1&&Y.splice(I,1)}(this.directives,I)}addFormGroup(I){this._setUpFormContainer(I)}removeFormGroup(I){this._cleanUpFormContainer(I)}getFormGroup(I){return this.form.get(I.path)}addFormArray(I){this._setUpFormContainer(I)}removeFormArray(I){this._cleanUpFormContainer(I)}getFormArray(I){return this.form.get(I.path)}updateModel(I,re){this.form.get(I.path).setValue(re)}onSubmit(I){return this.submitted=!0,Hr(this.form,this.directives),this.ngSubmit.emit(I),!1}onReset(){this.resetForm()}resetForm(I){this.form.reset(I),this.submitted=!1}_updateDomValue(){this.directives.forEach(I=>{const re=I.control,Me=this.form.get(I.path);re!==Me&&(kn(re||null,I),(Y=>Y instanceof Yr)(Me)&&(Kt(Me,I),I.control=Me))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(I){const re=this.form.get(I.path);er(re,I),re.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(I){if(this.form){const re=this.form.get(I.path);re&&function nr(Y,Q){return fn(Y,Q)}(re,I)&&re.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){sn(this.form,this),this._oldForm&&fn(this._oldForm,this)}_checkFormPresent(){}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(K,10),e.Y36(ne,10))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","formGroup",""]],hostBindings:function(I,re){1&I&&e.NdJ("submit",function(Ge){return re.onSubmit(Ge)})("reset",function(){return re.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[e._Bn([Hi]),e.qOj,e.TTD]}),Y})(),oa=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[_r]}),Y})(),We=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[oa]}),Y})(),Zr=(()=>{class Y{constructor(){this._listeners=[]}notify(I,re){for(let Me of this._listeners)Me(I,re)}listen(I){return this._listeners.push(I),()=>{this._listeners=this._listeners.filter(re=>I!==re)}}ngOnDestroy(){this._listeners=[]}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function Kr(Y){return null!=Y&&"false"!=`${Y}`}function $r(Y,Q=0){return function Li(Y){return!isNaN(parseFloat(Y))&&!isNaN(Number(Y))}(Y)?Number(Y):Q}function Gi(Y){return Array.isArray(Y)?Y:[Y]}function Wi(Y){return Y instanceof e.SBq?Y.nativeElement:Y}var Pa=ae(727);const ya=new e.OlP("CdkAccordion");let Na=0,ro=(()=>{class Y{constructor(I,re,Me){this.accordion=I,this._changeDetectorRef=re,this._expansionDispatcher=Me,this._openCloseAllSubscription=Pa.w0.EMPTY,this.closed=new e.vpe,this.opened=new e.vpe,this.destroyed=new e.vpe,this.expandedChange=new e.vpe,this.id="cdk-accordion-child-"+Na++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=Me.listen((Ge,Ht)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===Ht&&this.id!==Ge&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(I){I=Kr(I),this._expanded!==I&&(this._expanded=I,this.expandedChange.emit(I),I?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(I){this._disabled=Kr(I)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(I=>{this.disabled||(this.expanded=I)})}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(ya,12),e.Y36(e.sBO),e.Y36(Zr))},Y.\u0275dir=e.lG2({type:Y,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[e._Bn([{provide:ya,useValue:void 0}])]}),Y})(),wo=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();class bn{attach(Q){return this._attachedHost=Q,Q.attach(this)}detach(){let Q=this._attachedHost;null!=Q&&(this._attachedHost=null,Q.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Q){this._attachedHost=Q}}class Qt extends bn{constructor(Q,I,re,Me){super(),this.component=Q,this.viewContainerRef=I,this.injector=re,this.componentFactoryResolver=Me}}class wn extends bn{constructor(Q,I,re,Me){super(),this.templateRef=Q,this.viewContainerRef=I,this.context=re,this.injector=Me}get origin(){return this.templateRef.elementRef}attach(Q,I=this.context){return this.context=I,super.attach(Q)}detach(){return this.context=void 0,super.detach()}}class qn extends bn{constructor(Q){super(),this.element=Q instanceof e.SBq?Q.nativeElement:Q}}let yi,Mr=(()=>{class Y extends class tr{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Q){return Q instanceof Qt?(this._attachedPortal=Q,this.attachComponentPortal(Q)):Q instanceof wn?(this._attachedPortal=Q,this.attachTemplatePortal(Q)):this.attachDomPortal&&Q instanceof qn?(this._attachedPortal=Q,this.attachDomPortal(Q)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Q){this._disposeFn=Q}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(I,re,Me){super(),this._componentFactoryResolver=I,this._viewContainerRef=re,this._isInitialized=!1,this.attached=new e.vpe,this.attachDomPortal=Ge=>{const Ht=Ge.element,yn=this._document.createComment("dom-portal");Ge.setAttachedHost(this),Ht.parentNode.insertBefore(yn,Ht),this._getRootNode().appendChild(Ht),this._attachedPortal=Ge,super.setDisposeFn(()=>{yn.parentNode&&yn.parentNode.replaceChild(Ht,yn)})},this._document=Me}get portal(){return this._attachedPortal}set portal(I){this.hasAttached()&&!I&&!this._isInitialized||(this.hasAttached()&&super.detach(),I&&super.attach(I),this._attachedPortal=I||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(I){I.setAttachedHost(this);const re=null!=I.viewContainerRef?I.viewContainerRef:this._viewContainerRef,Ge=(I.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(I.component),Ht=re.createComponent(Ge,re.length,I.injector||re.injector);return re!==this._viewContainerRef&&this._getRootNode().appendChild(Ht.hostView.rootNodes[0]),super.setDisposeFn(()=>Ht.destroy()),this._attachedPortal=I,this._attachedRef=Ht,this.attached.emit(Ht),Ht}attachTemplatePortal(I){I.setAttachedHost(this);const re=this._viewContainerRef.createEmbeddedView(I.templateRef,I.context,{injector:I.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=I,this._attachedRef=re,this.attached.emit(re),re}_getRootNode(){const I=this._viewContainerRef.element.nativeElement;return I.nodeType===I.ELEMENT_NODE?I:I.parentNode}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e._Vd),e.Y36(e.s_b),e.Y36(ie.K0))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[e.qOj]}),Y})(),ei=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();try{yi=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yi=!1}let Je,fr=(()=>{class Y{constructor(I){this._platformId=I,this.isBrowser=this._platformId?(0,ie.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yi)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(e.Lbi))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const at=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Bt(){if(Je)return Je;if("object"!=typeof document||!document)return Je=new Set(at),Je;let Y=document.createElement("input");return Je=new Set(at.filter(Q=>(Y.setAttribute("type",Q),Y.type===Q))),Je}let Cn,Bi;function cr(Y){return function dr(){if(null==Cn&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Cn=!0}))}finally{Cn=Cn||!1}return Cn}()?Y:!!Y.capture}function $a(Y){return Y.composedPath?Y.composedPath()[0]:Y.target}var To=ae(1135),ca=ae(7579),Fi=ae(9646),gs=ae(9300);function Mf(Y){return(0,gs.h)((Q,I)=>Y<=I)}var bd=ae(4671),jc=ae(4482);function Vc(Y,Q=bd.y){return Y=Y??kf,(0,jc.e)((I,re)=>{let Me,Ge=!0;I.subscribe((0,a.x)(re,Ht=>{const yn=Q(Ht);(Ge||!Y(Me,yn))&&(Ge=!1,Me=yn,re.next(Ht))}))})}function kf(Y,Q){return Y===Q}var fu=ae(5032);function _o(Y){return(0,jc.e)((Q,I)=>{(0,d.Xf)(Y).subscribe((0,a.x)(I,()=>I.complete(),fu.Z)),!I.closed&&Q.subscribe(I)})}var jl=ae(9841),vs=ae(7272),qs=ae(5698);class xd extends Pa.w0{constructor(Q,I){super()}schedule(Q,I=0){return this}}const Wu={setInterval(Y,Q,...I){const{delegate:re}=Wu;return re?.setInterval?re.setInterval(Y,Q,...I):setInterval(Y,Q,...I)},clearInterval(Y){const{delegate:Q}=Wu;return(Q?.clearInterval||clearInterval)(Y)},delegate:void 0};var Lh=ae(8737);const Af={now:()=>(Af.delegate||Date).now(),delegate:void 0};class vc{constructor(Q,I=vc.now){this.schedulerActionCtor=Q,this.now=I}schedule(Q,I=0,re){return new this.schedulerActionCtor(this,Q).schedule(re,I)}}vc.now=Af.now;const Uc=new class Ph extends vc{constructor(Q,I=vc.now){super(Q,I),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Q){const{actions:I}=this;if(this._active)return void I.push(Q);let re;this._active=!0;do{if(re=Q.execute(Q.state,Q.delay))break}while(Q=I.shift());if(this._active=!1,re){for(;Q=I.shift();)Q.unsubscribe();throw re}}}(class Ih extends xd{constructor(Q,I){super(Q,I),this.scheduler=Q,this.work=I,this.pending=!1}schedule(Q,I=0){if(this.closed)return this;this.state=Q;const re=this.id,Me=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(Me,re,I)),this.pending=!0,this.delay=I,this.id=this.id||this.requestAsyncId(Me,this.id,I),this}requestAsyncId(Q,I,re=0){return Wu.setInterval(Q.flush.bind(Q,this),re)}recycleAsyncId(Q,I,re=0){if(null!=re&&this.delay===re&&!1===this.pending)return I;Wu.clearInterval(I)}execute(Q,I){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const re=this._execute(Q,I);if(re)return re;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Q,I){let Me,re=!1;try{this.work(Q)}catch(Ge){re=!0,Me=Ge||new Error("Scheduled action threw falsy error")}if(re)return this.unsubscribe(),Me}unsubscribe(){if(!this.closed){const{id:Q,scheduler:I}=this,{actions:re}=I;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Lh.P)(re,this),null!=Q&&(this.id=this.recycleAsyncId(I,Q,null)),this.delay=null,super.unsubscribe()}}}),wd=Uc;function Vl(Y,Q=Uc){return(0,jc.e)((I,re)=>{let Me=null,Ge=null,Ht=null;const yn=()=>{if(Me){Me.unsubscribe(),Me=null;const zn=Ge;Ge=null,re.next(zn)}};function An(){const zn=Ht+Y,lr=Q.now();if(lr<zn)return Me=this.schedule(void 0,zn-lr),void re.add(Me);yn()}I.subscribe((0,a.x)(re,zn=>{Ge=zn,Ht=Q.now(),Me||(Me=Q.schedule(An,Y),re.add(Me))},()=>{yn(),re.complete()},void 0,()=>{Ge=Me=null}))})}var hl=ae(8675);const Td=new Set;let Hc,Rh=(()=>{class Y{constructor(I){this._platform=I,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Fh}matchMedia(I){return(this._platform.WEBKIT||this._platform.BLINK)&&function Nh(Y){if(!Td.has(Y))try{Hc||(Hc=document.createElement("style"),Hc.setAttribute("type","text/css"),document.head.appendChild(Hc)),Hc.sheet&&(Hc.sheet.insertRule(`@media ${Y} {body{ }}`,0),Td.add(Y))}catch(Q){console.error(Q)}}(I),this._matchMedia(I)}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(fr))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function Fh(Y){return{matches:"all"===Y||""===Y,media:Y,addListener:()=>{},removeListener:()=>{}}}let zh=(()=>{class Y{constructor(I,re){this._mediaMatcher=I,this._zone=re,this._queries=new Map,this._destroySubject=new ca.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(I){return Xu(Gi(I)).some(Me=>this._registerQuery(Me).mql.matches)}observe(I){const Me=Xu(Gi(I)).map(Ht=>this._registerQuery(Ht).observable);let Ge=(0,jl.a)(Me);return Ge=(0,vs.z)(Ge.pipe((0,qs.q)(1)),Ge.pipe(Mf(1),Vl(0))),Ge.pipe((0,x.U)(Ht=>{const yn={matches:!1,breakpoints:{}};return Ht.forEach(({matches:An,query:zn})=>{yn.matches=yn.matches||An,yn.breakpoints[zn]=An}),yn}))}_registerQuery(I){if(this._queries.has(I))return this._queries.get(I);const re=this._mediaMatcher.matchMedia(I),Ge={observable:new u.y(Ht=>{const yn=An=>this._zone.run(()=>Ht.next(An));return re.addListener(yn),()=>{re.removeListener(yn)}}).pipe((0,hl.O)(re),(0,x.U)(({matches:Ht})=>({query:I,matches:Ht})),_o(this._destroySubject)),mql:re};return this._queries.set(I,Ge),Ge}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(Rh),e.LFG(e.R0b))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function Xu(Y){return Y.map(Q=>Q.split(",")).reduce((Q,I)=>Q.concat(I)).map(Q=>Q.trim())}function Gc(Y){return 0===Y.buttons||0===Y.offsetX&&0===Y.offsetY}function pl(Y){const Q=Y.touches&&Y.touches[0]||Y.changedTouches&&Y.changedTouches[0];return!(!Q||-1!==Q.identifier||null!=Q.radiusX&&1!==Q.radiusX||null!=Q.radiusY&&1!==Q.radiusY)}const Wh=new e.OlP("cdk-input-modality-detector-options"),Xh={ignoreKeys:[18,17,224,91,16]},qc=cr({passive:!0,capture:!0});let gu=(()=>{class Y{constructor(I,re,Me,Ge){this._platform=I,this._mostRecentTarget=null,this._modality=new To.X(null),this._lastTouchMs=0,this._onKeydown=Ht=>{this._options?.ignoreKeys?.some(yn=>yn===Ht.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=$a(Ht))},this._onMousedown=Ht=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Gc(Ht)?"keyboard":"mouse"),this._mostRecentTarget=$a(Ht))},this._onTouchstart=Ht=>{pl(Ht)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=$a(Ht))},this._options={...Xh,...Ge},this.modalityDetected=this._modality.pipe(Mf(1)),this.modalityChanged=this.modalityDetected.pipe(Vc()),I.isBrowser&&re.runOutsideAngular(()=>{Me.addEventListener("keydown",this._onKeydown,qc),Me.addEventListener("mousedown",this._onMousedown,qc),Me.addEventListener("touchstart",this._onTouchstart,qc)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,qc),document.removeEventListener("mousedown",this._onMousedown,qc),document.removeEventListener("touchstart",this._onTouchstart,qc))}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(fr),e.LFG(e.R0b),e.LFG(ie.K0),e.LFG(Wh,8))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const Ns=new e.OlP("cdk-focus-monitor-default-options"),Qu=cr({passive:!0,capture:!0});let Df=(()=>{class Y{constructor(I,re,Me,Ge,Ht){this._ngZone=I,this._platform=re,this._inputModalityDetector=Me,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ca.x,this._rootNodeFocusAndBlurListener=yn=>{for(let zn=$a(yn);zn;zn=zn.parentElement)"focus"===yn.type?this._onFocus(yn,zn):this._onBlur(yn,zn)},this._document=Ge,this._detectionMode=Ht?.detectionMode||0}monitor(I,re=!1){const Me=Wi(I);if(!this._platform.isBrowser||1!==Me.nodeType)return(0,Fi.of)(null);const Ge=function xi(Y){if(function Ta(){if(null==Bi){const Y=typeof document<"u"?document.head:null;Bi=!(!Y||!Y.createShadowRoot&&!Y.attachShadow)}return Bi}()){const Q=Y.getRootNode?Y.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&Q instanceof ShadowRoot)return Q}return null}(Me)||this._getDocument(),Ht=this._elementInfo.get(Me);if(Ht)return re&&(Ht.checkChildren=!0),Ht.subject;const yn={checkChildren:re,subject:new ca.x,rootNode:Ge};return this._elementInfo.set(Me,yn),this._registerGlobalListeners(yn),yn.subject}stopMonitoring(I){const re=Wi(I),Me=this._elementInfo.get(re);Me&&(Me.subject.complete(),this._setClasses(re),this._elementInfo.delete(re),this._removeGlobalListeners(Me))}focusVia(I,re,Me){const Ge=Wi(I);Ge===this._getDocument().activeElement?this._getClosestElementsInfo(Ge).forEach(([yn,An])=>this._originChanged(yn,re,An)):(this._setOrigin(re),"function"==typeof Ge.focus&&Ge.focus(Me))}ngOnDestroy(){this._elementInfo.forEach((I,re)=>this.stopMonitoring(re))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(I){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(I)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:I&&this._isLastInteractionFromInputLabel(I)?"mouse":"program"}_shouldBeAttributedToTouch(I){return 1===this._detectionMode||!!I?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(I,re){I.classList.toggle("cdk-focused",!!re),I.classList.toggle("cdk-touch-focused","touch"===re),I.classList.toggle("cdk-keyboard-focused","keyboard"===re),I.classList.toggle("cdk-mouse-focused","mouse"===re),I.classList.toggle("cdk-program-focused","program"===re)}_setOrigin(I,re=!1){this._ngZone.runOutsideAngular(()=>{this._origin=I,this._originFromTouchInteraction="touch"===I&&re,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(I,re){const Me=this._elementInfo.get(re),Ge=$a(I);!Me||!Me.checkChildren&&re!==Ge||this._originChanged(re,this._getFocusOrigin(Ge),Me)}_onBlur(I,re){const Me=this._elementInfo.get(re);!Me||Me.checkChildren&&I.relatedTarget instanceof Node&&re.contains(I.relatedTarget)||(this._setClasses(re),this._emitOrigin(Me,null))}_emitOrigin(I,re){I.subject.observers.length&&this._ngZone.run(()=>I.subject.next(re))}_registerGlobalListeners(I){if(!this._platform.isBrowser)return;const re=I.rootNode,Me=this._rootNodeFocusListenerCount.get(re)||0;Me||this._ngZone.runOutsideAngular(()=>{re.addEventListener("focus",this._rootNodeFocusAndBlurListener,Qu),re.addEventListener("blur",this._rootNodeFocusAndBlurListener,Qu)}),this._rootNodeFocusListenerCount.set(re,Me+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(_o(this._stopInputModalityDetector)).subscribe(Ge=>{this._setOrigin(Ge,!0)}))}_removeGlobalListeners(I){const re=I.rootNode;if(this._rootNodeFocusListenerCount.has(re)){const Me=this._rootNodeFocusListenerCount.get(re);Me>1?this._rootNodeFocusListenerCount.set(re,Me-1):(re.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Qu),re.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Qu),this._rootNodeFocusListenerCount.delete(re))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(I,re,Me){this._setClasses(I,re),this._emitOrigin(Me,re),this._lastFocusOrigin=re}_getClosestElementsInfo(I){const re=[];return this._elementInfo.forEach((Me,Ge)=>{(Ge===I||Me.checkChildren&&Ge.contains(I))&&re.push([Ge,Me])}),re}_isLastInteractionFromInputLabel(I){const{_mostRecentTarget:re,mostRecentModality:Me}=this._inputModalityDetector;if("mouse"!==Me||!re||re===I||"INPUT"!==I.nodeName&&"TEXTAREA"!==I.nodeName||I.disabled)return!1;const Ge=I.labels;if(Ge)for(let Ht=0;Ht<Ge.length;Ht++)if(Ge[Ht].contains(re))return!0;return!1}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(e.R0b),e.LFG(fr),e.LFG(gu),e.LFG(ie.K0,8),e.LFG(Ns,8))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const Od="cdk-high-contrast-black-on-white",Of="cdk-high-contrast-white-on-black",vu="cdk-high-contrast-active";let Qh=(()=>{class Y{constructor(I,re){this._platform=I,this._document=re,this._breakpointSubscription=(0,e.f3M)(zh).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const I=this._document.createElement("div");I.style.backgroundColor="rgb(1,2,3)",I.style.position="absolute",this._document.body.appendChild(I);const re=this._document.defaultView||window,Me=re&&re.getComputedStyle?re.getComputedStyle(I):null,Ge=(Me&&Me.backgroundColor||"").replace(/ /g,"");switch(I.remove(),Ge){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const I=this._document.body.classList;I.remove(vu,Od,Of),this._hasCheckedHighContrastMode=!0;const re=this.getHighContrastMode();1===re?I.add(vu,Od):2===re&&I.add(vu,Of)}}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(fr),e.LFG(ie.K0))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const Ld=new e.OlP("cdk-dir-doc",{providedIn:"root",factory:function ep(){return(0,e.f3M)(ie.K0)}}),tp=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Id=(()=>{class Y{constructor(I){if(this.value="ltr",this.change=new e.vpe,I){const Me=I.documentElement?I.documentElement.dir:null;this.value=function yu(Y){const Q=Y?.toLowerCase()||"";return"auto"===Q&&typeof navigator<"u"&&navigator?.language?tp.test(navigator.language)?"rtl":"ltr":"rtl"===Q?"rtl":"ltr"}((I.body?I.body.dir:null)||Me||"ltr")}}ngOnDestroy(){this.change.complete()}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(Ld,8))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),_u=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();const op=new e.OlP("mat-sanity-checks",{providedIn:"root",factory:function ap(){return!0}});let tc=(()=>{class Y{constructor(I,re,Me){this._sanityChecks=re,this._document=Me,this._hasDoneGlobalChecks=!1,I._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(I){return!function Ps(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[I])}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(Qh),e.LFG(op,8),e.LFG(ie.K0))},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[_u,_u]}),Y})();function Yc(Y){return class extends Y{constructor(...Q){super(...Q),this._disabled=!1}get disabled(){return this._disabled}set disabled(Q){this._disabled=Kr(Q)}}}function If(Y,Q){return class extends Y{constructor(...I){super(...I),this.defaultColor=Q,this.color=Q}get color(){return this._color}set color(I){const re=I||this.defaultColor;re!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),re&&this._elementRef.nativeElement.classList.add(`mat-${re}`),this._color=re)}}}function sp(Y){return class extends Y{constructor(...Q){super(...Q),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Q){this._disableRipple=Kr(Q)}}}function lp(Y,Q=0){return class extends Y{constructor(...I){super(...I),this._tabIndex=Q,this.defaultTabIndex=Q}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(I){this._tabIndex=null!=I?$r(I):this.defaultTabIndex}}}function cp(Y){return class extends Y{constructor(...Q){super(...Q),this.errorState=!1}updateErrorState(){const Q=this.errorState,Ge=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);Ge!==Q&&(this.errorState=Ge,this.stateChanges.next())}}}let Rd=(()=>{class Y{isErrorState(I,re){return!!(I&&I.invalid&&(I.touched||re&&re.submitted))}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();class Fd{constructor(Q,I,re,Me=!1){this._renderer=Q,this.element=I,this.config=re,this._animationForciblyDisabledThroughCss=Me,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const bc={enterDuration:225,exitDuration:150},tf=cr({passive:!0}),zf=["mousedown","touchstart"],zd=["mouseup","mouseleave","touchend","touchcancel"];class Bd{constructor(Q,I,re,Me){this._target=Q,this._ngZone=I,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,Me.isBrowser&&(this._containerElement=Wi(re))}fadeInRipple(Q,I,re={}){const Me=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),Ge={...bc,...re.animation};re.centered&&(Q=Me.left+Me.width/2,I=Me.top+Me.height/2);const Ht=re.radius||function jd(Y,Q,I){const re=Math.max(Math.abs(Y-I.left),Math.abs(Y-I.right)),Me=Math.max(Math.abs(Q-I.top),Math.abs(Q-I.bottom));return Math.sqrt(re*re+Me*Me)}(Q,I,Me),yn=Q-Me.left,An=I-Me.top,zn=Ge.enterDuration,lr=document.createElement("div");lr.classList.add("mat-ripple-element"),lr.style.left=yn-Ht+"px",lr.style.top=An-Ht+"px",lr.style.height=2*Ht+"px",lr.style.width=2*Ht+"px",null!=re.color&&(lr.style.backgroundColor=re.color),lr.style.transitionDuration=`${zn}ms`,this._containerElement.appendChild(lr);const fi=window.getComputedStyle(lr),Ni=fi.transitionDuration,ua="none"===fi.transitionProperty||"0s"===Ni||"0s, 0s"===Ni,Ri=new Fd(this,lr,re,ua);lr.style.transform="scale3d(1, 1, 1)",Ri.state=0,re.persistent||(this._mostRecentTransientRipple=Ri);let ha=null;return!ua&&(zn||Ge.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Da=()=>this._finishRippleTransition(Ri),ka=()=>this._destroyRipple(Ri);lr.addEventListener("transitionend",Da),lr.addEventListener("transitioncancel",ka),ha={onTransitionEnd:Da,onTransitionCancel:ka}}),this._activeRipples.set(Ri,ha),(ua||!zn)&&this._finishRippleTransition(Ri),Ri}fadeOutRipple(Q){if(2===Q.state||3===Q.state)return;const I=Q.element,re={...bc,...Q.config.animation};I.style.transitionDuration=`${re.exitDuration}ms`,I.style.opacity="0",Q.state=2,(Q._animationForciblyDisabledThroughCss||!re.exitDuration)&&this._finishRippleTransition(Q)}fadeOutAll(){this._getActiveRipples().forEach(Q=>Q.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(Q=>{Q.config.persistent||Q.fadeOut()})}setupTriggerEvents(Q){const I=Wi(Q);!I||I===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=I,this._registerEvents(zf))}handleEvent(Q){"mousedown"===Q.type?this._onMousedown(Q):"touchstart"===Q.type?this._onTouchStart(Q):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zd),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(Q){0===Q.state?this._startFadeOutTransition(Q):2===Q.state&&this._destroyRipple(Q)}_startFadeOutTransition(Q){const I=Q===this._mostRecentTransientRipple,{persistent:re}=Q.config;Q.state=1,!re&&(!I||!this._isPointerDown)&&Q.fadeOut()}_destroyRipple(Q){const I=this._activeRipples.get(Q)??null;this._activeRipples.delete(Q),this._activeRipples.size||(this._containerRect=null),Q===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),Q.state=3,null!==I&&(Q.element.removeEventListener("transitionend",I.onTransitionEnd),Q.element.removeEventListener("transitioncancel",I.onTransitionCancel)),Q.element.remove()}_onMousedown(Q){const I=Gc(Q),re=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!I&&!re&&(this._isPointerDown=!0,this.fadeInRipple(Q.clientX,Q.clientY,this._target.rippleConfig))}_onTouchStart(Q){if(!this._target.rippleDisabled&&!pl(Q)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const I=Q.changedTouches;for(let re=0;re<I.length;re++)this.fadeInRipple(I[re].clientX,I[re].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(Q=>{!Q.config.persistent&&(1===Q.state||Q.config.terminateOnPointerUp&&0===Q.state)&&Q.fadeOut()}))}_registerEvents(Q){this._ngZone.runOutsideAngular(()=>{Q.forEach(I=>{this._triggerElement.addEventListener(I,this,tf)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(zf.forEach(Q=>{this._triggerElement.removeEventListener(Q,this,tf)}),this._pointerUpEventsRegistered&&zd.forEach(Q=>{this._triggerElement.removeEventListener(Q,this,tf)}))}}const Vd=new e.OlP("mat-ripple-global-options");let Bf=(()=>{class Y{constructor(I,re,Me,Ge,Ht){this._elementRef=I,this._animationMode=Ht,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=Ge||{},this._rippleRenderer=new Bd(this,re,I,Me)}get disabled(){return this._disabled}set disabled(I){I&&this.fadeOutAllNonPersistent(),this._disabled=I,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(I){this._trigger=I,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(I,re=0,Me){return"number"==typeof I?this._rippleRenderer.fadeInRipple(I,re,{...this.rippleConfig,...Me}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...I})}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(fr),e.Y36(Vd,8),e.Y36(e.QbO,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(I,re){2&I&&e.ekj("mat-ripple-unbounded",re.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Y})(),pp=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[tc,tc]}),Y})();var Zc=ae(515),Gf=ae(6451),Qo=ae(7340);const _p=["body"];function bp(Y,Q){}const xp=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],nf=["mat-expansion-panel-header","*","mat-action-row"];function qf(Y,Q){if(1&Y&&e._UZ(0,"span",2),2&Y){const I=e.oxw();e.Q6J("@indicatorRotate",I._getExpandedState())}}const wp=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Wc=["mat-panel-title","mat-panel-description","*"],Xc=new e.OlP("MAT_ACCORDION"),Oa="225ms cubic-bezier(0.4,0.0,0.2,1)",Hd={indicatorRotate:(0,Qo.X$)("indicatorRotate",[(0,Qo.SB)("collapsed, void",(0,Qo.oB)({transform:"rotate(0deg)"})),(0,Qo.SB)("expanded",(0,Qo.oB)({transform:"rotate(180deg)"})),(0,Qo.eR)("expanded <=> collapsed, void => collapsed",(0,Qo.jt)(Oa))]),bodyExpansion:(0,Qo.X$)("bodyExpansion",[(0,Qo.SB)("collapsed, void",(0,Qo.oB)({height:"0px",visibility:"hidden"})),(0,Qo.SB)("expanded",(0,Qo.oB)({height:"*",visibility:"visible"})),(0,Qo.eR)("expanded <=> collapsed, void => collapsed",(0,Qo.jt)(Oa))])},rf=new e.OlP("MAT_EXPANSION_PANEL");let $c=(()=>{class Y{constructor(I,re){this._template=I,this._expansionPanel=re}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.Rgc),e.Y36(rf,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["ng-template","matExpansionPanelContent",""]]}),Y})(),Tp=0;const Gd=new e.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let qd=(()=>{class Y extends ro{constructor(I,re,Me,Ge,Ht,yn,An){super(I,re,Me),this._viewContainerRef=Ge,this._animationMode=yn,this._hideToggle=!1,this.afterExpand=new e.vpe,this.afterCollapse=new e.vpe,this._inputChanges=new ca.x,this._headerId="mat-expansion-panel-header-"+Tp++,this._bodyAnimationDone=new ca.x,this.accordion=I,this._document=Ht,this._bodyAnimationDone.pipe(Vc((zn,lr)=>zn.fromState===lr.fromState&&zn.toState===lr.toState)).subscribe(zn=>{"void"!==zn.fromState&&("expanded"===zn.toState?this.afterExpand.emit():"collapsed"===zn.toState&&this.afterCollapse.emit())}),An&&(this.hideToggle=An.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(I){this._hideToggle=Kr(I)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(I){this._togglePosition=I}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe((0,hl.O)(null),(0,gs.h)(()=>this.expanded&&!this._portal),(0,qs.q)(1)).subscribe(()=>{this._portal=new wn(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(I){this._inputChanges.next(I)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const I=this._document.activeElement,re=this._body.nativeElement;return I===re||re.contains(I)}return!1}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(Xc,12),e.Y36(e.sBO),e.Y36(Zr),e.Y36(e.s_b),e.Y36(ie.K0),e.Y36(e.QbO,8),e.Y36(Gd,8))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["mat-expansion-panel"]],contentQueries:function(I,re,Me){if(1&I&&e.Suo(Me,$c,5),2&I){let Ge;e.iGM(Ge=e.CRH())&&(re._lazyContent=Ge.first)}},viewQuery:function(I,re){if(1&I&&e.Gf(_p,5),2&I){let Me;e.iGM(Me=e.CRH())&&(re._body=Me.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(I,re){2&I&&e.ekj("mat-expanded",re.expanded)("_mat-animation-noopable","NoopAnimations"===re._animationMode)("mat-expansion-panel-spacing",re._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[e._Bn([{provide:Xc,useValue:void 0},{provide:rf,useExisting:Y}]),e.qOj,e.TTD],ngContentSelectors:nf,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(I,re){1&I&&(e.F$t(xp),e.Hsn(0),e.TgZ(1,"div",0,1),e.NdJ("@bodyExpansion.done",function(Ge){return re._bodyAnimationDone.next(Ge)}),e.TgZ(3,"div",2),e.Hsn(4,1),e.YNc(5,bp,0,0,"ng-template",3),e.qZA(),e.Hsn(6,2),e.qZA()),2&I&&(e.xp6(1),e.Q6J("@bodyExpansion",re._getExpandedState())("id",re.id),e.uIk("aria-labelledby",re._headerId),e.xp6(4),e.Q6J("cdkPortalOutlet",re._portal))},dependencies:[Mr],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[Hd.bodyExpansion]},changeDetection:0}),Y})();class Mp{}const kp=lp(Mp);let Ap=(()=>{class Y extends kp{constructor(I,re,Me,Ge,Ht,yn,An){super(),this.panel=I,this._element=re,this._focusMonitor=Me,this._changeDetectorRef=Ge,this._animationMode=yn,this._parentChangeSubscription=Pa.w0.EMPTY;const zn=I.accordion?I.accordion._stateChanges.pipe((0,gs.h)(lr=>!(!lr.hideToggle&&!lr.togglePosition))):Zc.E;this.tabIndex=parseInt(An||"")||0,this._parentChangeSubscription=(0,Gf.T)(I.opened,I.closed,zn,I._inputChanges.pipe((0,gs.h)(lr=>!!(lr.hideToggle||lr.disabled||lr.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),I.closed.pipe((0,gs.h)(()=>I._containsFocus())).subscribe(()=>Me.focusVia(re,"program")),Ht&&(this.expandedHeight=Ht.expandedHeight,this.collapsedHeight=Ht.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const I=this._isExpanded();return I&&this.expandedHeight?this.expandedHeight:!I&&this.collapsedHeight?this.collapsedHeight:null}_keydown(I){switch(I.keyCode){case 32:case 13:(function Tf(Y,...Q){return Q.length?Q.some(I=>Y[I]):Y.altKey||Y.shiftKey||Y.ctrlKey||Y.metaKey})(I)||(I.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(I))}}focus(I,re){I?this._focusMonitor.focusVia(this._element,I,re):this._element.nativeElement.focus(re)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(I=>{I&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(qd,1),e.Y36(e.SBq),e.Y36(Df),e.Y36(e.sBO),e.Y36(Gd,8),e.Y36(e.QbO,8),e.$8M("tabindex"))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(I,re){1&I&&e.NdJ("click",function(){return re._toggle()})("keydown",function(Ge){return re._keydown(Ge)}),2&I&&(e.uIk("id",re.panel._headerId)("tabindex",re.tabIndex)("aria-controls",re._getPanelId())("aria-expanded",re._isExpanded())("aria-disabled",re.panel.disabled),e.Udp("height",re._getHeaderHeight()),e.ekj("mat-expanded",re._isExpanded())("mat-expansion-toggle-indicator-after","after"===re._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===re._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===re._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[e.qOj],ngContentSelectors:Wc,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(I,re){1&I&&(e.F$t(wp),e.TgZ(0,"span",0),e.Hsn(1),e.Hsn(2,1),e.Hsn(3,2),e.qZA(),e.YNc(4,qf,1,1,"span",1)),2&I&&(e.ekj("mat-content-hide-toggle",!re._showToggle()),e.xp6(4),e.Q6J("ngIf",re._showToggle()))},dependencies:[ie.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[Hd.indicatorRotate]},changeDetection:0}),Y})(),Yd=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275dir=e.lG2({type:Y,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),Y})(),Zd=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez,tc,wo,ei]}),Y})(),ku=(()=>{class Y{create(I){return typeof MutationObserver>"u"?null:new MutationObserver(I)}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),xc=(()=>{class Y{constructor(I){this._mutationObserverFactory=I,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((I,re)=>this._cleanupObserver(re))}observe(I){const re=Wi(I);return new u.y(Me=>{const Ht=this._observeElement(re).subscribe(Me);return()=>{Ht.unsubscribe(),this._unobserveElement(re)}})}_observeElement(I){if(this._observedElements.has(I))this._observedElements.get(I).count++;else{const re=new ca.x,Me=this._mutationObserverFactory.create(Ge=>re.next(Ge));Me&&Me.observe(I,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(I,{observer:Me,stream:re,count:1})}return this._observedElements.get(I).stream}_unobserveElement(I){this._observedElements.has(I)&&(this._observedElements.get(I).count--,this._observedElements.get(I).count||this._cleanupObserver(I))}_cleanupObserver(I){if(this._observedElements.has(I)){const{observer:re,stream:Me}=this._observedElements.get(I);re&&re.disconnect(),Me.complete(),this._observedElements.delete(I)}}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(ku))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Yf=(()=>{class Y{constructor(I,re,Me){this._contentObserver=I,this._elementRef=re,this._ngZone=Me,this.event=new e.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(I){this._disabled=Kr(I),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(I){this._debounce=$r(I),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const I=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?I.pipe(Vl(this.debounce)):I).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(xc),e.Y36(e.SBq),e.Y36(e.R0b))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Y})(),Jc=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[ku]}),Y})();var Zf=ae(5577),No=ae(1144),La=ae(576);const Wd=["addListener","removeListener"],Xd=["addEventListener","removeEventListener"],$d=["on","off"];function As(Y,Q,I,re){if((0,La.m)(I)&&(re=I,I=void 0),re)return As(Y,Q,I).pipe((0,_.Z)(re));const[Me,Ge]=function Tc(Y){return(0,La.m)(Y.addEventListener)&&(0,La.m)(Y.removeEventListener)}(Y)?Xd.map(Ht=>yn=>Y[Ht](Q,yn,I)):function Xf(Y){return(0,La.m)(Y.addListener)&&(0,La.m)(Y.removeListener)}(Y)?Wd.map(Wf(Y,Q)):function wc(Y){return(0,La.m)(Y.on)&&(0,La.m)(Y.off)}(Y)?$d.map(Wf(Y,Q)):[];if(!Me&&(0,No.z)(Y))return(0,Zf.z)(Ht=>As(Ht,Q,I))((0,d.Xf)(Y));if(!Me)throw new TypeError("Invalid event target");return new u.y(Ht=>{const yn=(...An)=>Ht.next(1<An.length?An:An[0]);return Me(yn),()=>Ge(yn)})}function Wf(Y,Q){return I=>re=>Y[I](Q,re)}const Jd=["connectionContainer"],Fo=["inputContainer"],Au=["label"];function Ul(Y,Q){1&Y&&(e.ynx(0),e.TgZ(1,"div",14),e._UZ(2,"div",15)(3,"div",16)(4,"div",17),e.qZA(),e.TgZ(5,"div",18),e._UZ(6,"div",15)(7,"div",16)(8,"div",17),e.qZA(),e.BQk())}function af(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div",19),e.NdJ("cdkObserveContent",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.updateOutlineGap())}),e.Hsn(1,1),e.qZA()}if(2&Y){const I=e.oxw();e.Q6J("cdkObserveContentDisabled","outline"!=I.appearance)}}function sf(Y,Q){if(1&Y&&(e.ynx(0),e.Hsn(1,2),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&Y){const I=e.oxw(2);e.xp6(3),e.Oqu(I._control.placeholder)}}function $f(Y,Q){1&Y&&e.Hsn(0,3,["*ngSwitchCase","true"])}function Kc(Y,Q){1&Y&&(e.TgZ(0,"span",23),e._uU(1," *"),e.qZA())}function Hl(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"label",20,21),e.NdJ("cdkObserveContent",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.updateOutlineGap())}),e.YNc(2,sf,4,1,"ng-container",12),e.YNc(3,$f,1,0,"ng-content",12),e.YNc(4,Kc,2,0,"span",22),e.qZA()}if(2&Y){const I=e.oxw();e.ekj("mat-empty",I._control.empty&&!I._shouldAlwaysFloat())("mat-form-field-empty",I._control.empty&&!I._shouldAlwaysFloat())("mat-accent","accent"==I.color)("mat-warn","warn"==I.color),e.Q6J("cdkObserveContentDisabled","outline"!=I.appearance)("id",I._labelId)("ngSwitch",I._hasLabel()),e.uIk("for",I._control.id)("aria-owns",I._control.id),e.xp6(2),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngIf",!I.hideRequiredMarker&&I._control.required&&!I._control.disabled)}}function Kd(Y,Q){1&Y&&(e.TgZ(0,"div",24),e.Hsn(1,4),e.qZA())}function Qd(Y,Q){if(1&Y&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA()),2&Y){const I=e.oxw();e.xp6(1),e.ekj("mat-accent","accent"==I.color)("mat-warn","warn"==I.color)}}function Ep(Y,Q){if(1&Y&&(e.TgZ(0,"div"),e.Hsn(1,5),e.qZA()),2&Y){const I=e.oxw();e.Q6J("@transitionMessages",I._subscriptAnimationState)}}function es(Y,Q){if(1&Y&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&Y){const I=e.oxw(2);e.Q6J("id",I._hintLabelId),e.xp6(1),e.Oqu(I.hintLabel)}}function nc(Y,Q){if(1&Y&&(e.TgZ(0,"div",27),e.YNc(1,es,2,2,"div",28),e.Hsn(2,6),e._UZ(3,"div",29),e.Hsn(4,7),e.qZA()),2&Y){const I=e.oxw();e.Q6J("@transitionMessages",I._subscriptAnimationState),e.xp6(1),e.Q6J("ngIf",I.hintLabel)}}const eh=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],k=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],$=new e.OlP("MatError"),_e={transitionMessages:(0,Qo.X$)("transitionMessages",[(0,Qo.SB)("enter",(0,Qo.oB)({opacity:1,transform:"translateY(0%)"})),(0,Qo.eR)("void => enter",[(0,Qo.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Qo.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Ae=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275dir=e.lG2({type:Y}),Y})();const At=new e.OlP("MatHint");let on=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275dir=e.lG2({type:Y,selectors:[["mat-label"]]}),Y})(),en=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275dir=e.lG2({type:Y,selectors:[["mat-placeholder"]]}),Y})();const _n=new e.OlP("MatPrefix"),Zn=new e.OlP("MatSuffix");let rr=0;const Er=If(class{constructor(Y){this._elementRef=Y}},"primary"),zr=new e.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ni=new e.OlP("MatFormField");let ti=(()=>{class Y extends Er{constructor(I,re,Me,Ge,Ht,yn,An){super(I),this._changeDetectorRef=re,this._dir=Me,this._defaults=Ge,this._platform=Ht,this._ngZone=yn,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ca.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+rr++,this._labelId="mat-form-field-label-"+rr++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==An,this.appearance=Ge?.appearance||"legacy",Ge&&(this._hideRequiredMarker=Boolean(Ge.hideRequiredMarker),Ge.color&&(this.color=this.defaultColor=Ge.color))}get appearance(){return this._appearance}set appearance(I){const re=this._appearance;this._appearance=I||this._defaults?.appearance||"legacy","outline"===this._appearance&&re!==I&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(I){this._hideRequiredMarker=Kr(I)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(I){this._hintLabel=I,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(I){I!==this._floatLabel&&(this._floatLabel=I||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(I){this._explicitFormFieldControl=I}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const I=this._control;I.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${I.controlType}`),I.stateChanges.pipe((0,hl.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),I.ngControl&&I.ngControl.valueChanges&&I.ngControl.valueChanges.pipe(_o(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(_o(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Gf.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,hl.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,hl.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(_o(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(I){const re=this._control?this._control.ngControl:null;return re&&re[I]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,As(this._label.nativeElement,"transitionend").pipe((0,qs.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let I=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&I.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const re=this._hintChildren?this._hintChildren.find(Ge=>"start"===Ge.align):null,Me=this._hintChildren?this._hintChildren.find(Ge=>"end"===Ge.align):null;re?I.push(re.id):this._hintLabel&&I.push(this._hintLabelId),Me&&I.push(Me.id)}else this._errorChildren&&I.push(...this._errorChildren.map(re=>re.id));this._control.setDescribedByIds(I)}}_validateControlChild(){}updateOutlineGap(){const I=this._label?this._label.nativeElement:null,re=this._connectionContainerRef.nativeElement,Me=".mat-form-field-outline-start",Ge=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!I||!I.children.length||!I.textContent.trim()){const lr=re.querySelectorAll(`${Me}, ${Ge}`);for(let fi=0;fi<lr.length;fi++)lr[fi].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let Ht=0,yn=0;const An=re.querySelectorAll(Me),zn=re.querySelectorAll(Ge);if(this._label&&this._label.nativeElement.children.length){const lr=re.getBoundingClientRect();if(0===lr.width&&0===lr.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const fi=this._getStartEnd(lr),vi=I.children,Ni=this._getStartEnd(vi[0].getBoundingClientRect());let ua=0;for(let Ri=0;Ri<vi.length;Ri++)ua+=vi[Ri].offsetWidth;Ht=Math.abs(Ni-fi)-5,yn=ua>0?.75*ua+10:0}for(let lr=0;lr<An.length;lr++)An[lr].style.width=`${Ht}px`;for(let lr=0;lr<zn.length;lr++)zn[lr].style.width=`${yn}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(I){return this._dir&&"rtl"===this._dir.value?I.right:I.left}_isAttachedToDOM(){const I=this._elementRef.nativeElement;if(I.getRootNode){const re=I.getRootNode();return re&&re!==I}return document.documentElement.contains(I)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Id,8),e.Y36(zr,8),e.Y36(fr),e.Y36(e.R0b),e.Y36(e.QbO,8))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["mat-form-field"]],contentQueries:function(I,re,Me){if(1&I&&(e.Suo(Me,Ae,5),e.Suo(Me,Ae,7),e.Suo(Me,on,5),e.Suo(Me,on,7),e.Suo(Me,en,5),e.Suo(Me,$,5),e.Suo(Me,At,5),e.Suo(Me,_n,5),e.Suo(Me,Zn,5)),2&I){let Ge;e.iGM(Ge=e.CRH())&&(re._controlNonStatic=Ge.first),e.iGM(Ge=e.CRH())&&(re._controlStatic=Ge.first),e.iGM(Ge=e.CRH())&&(re._labelChildNonStatic=Ge.first),e.iGM(Ge=e.CRH())&&(re._labelChildStatic=Ge.first),e.iGM(Ge=e.CRH())&&(re._placeholderChild=Ge.first),e.iGM(Ge=e.CRH())&&(re._errorChildren=Ge),e.iGM(Ge=e.CRH())&&(re._hintChildren=Ge),e.iGM(Ge=e.CRH())&&(re._prefixChildren=Ge),e.iGM(Ge=e.CRH())&&(re._suffixChildren=Ge)}},viewQuery:function(I,re){if(1&I&&(e.Gf(Jd,7),e.Gf(Fo,5),e.Gf(Au,5)),2&I){let Me;e.iGM(Me=e.CRH())&&(re._connectionContainerRef=Me.first),e.iGM(Me=e.CRH())&&(re._inputContainerRef=Me.first),e.iGM(Me=e.CRH())&&(re._label=Me.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(I,re){2&I&&e.ekj("mat-form-field-appearance-standard","standard"==re.appearance)("mat-form-field-appearance-fill","fill"==re.appearance)("mat-form-field-appearance-outline","outline"==re.appearance)("mat-form-field-appearance-legacy","legacy"==re.appearance)("mat-form-field-invalid",re._control.errorState)("mat-form-field-can-float",re._canLabelFloat())("mat-form-field-should-float",re._shouldLabelFloat())("mat-form-field-has-label",re._hasFloatingLabel())("mat-form-field-hide-placeholder",re._hideControlPlaceholder())("mat-form-field-disabled",re._control.disabled)("mat-form-field-autofilled",re._control.autofilled)("mat-focused",re._control.focused)("ng-untouched",re._shouldForward("untouched"))("ng-touched",re._shouldForward("touched"))("ng-pristine",re._shouldForward("pristine"))("ng-dirty",re._shouldForward("dirty"))("ng-valid",re._shouldForward("valid"))("ng-invalid",re._shouldForward("invalid"))("ng-pending",re._shouldForward("pending"))("_mat-animation-noopable",!re._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[e._Bn([{provide:ni,useExisting:Y}]),e.qOj],ngContentSelectors:k,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(I,re){1&I&&(e.F$t(eh),e.TgZ(0,"div",0)(1,"div",1,2),e.NdJ("click",function(Ge){return re._control.onContainerClick&&re._control.onContainerClick(Ge)}),e.YNc(3,Ul,9,0,"ng-container",3),e.YNc(4,af,2,1,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.TgZ(8,"span",7),e.YNc(9,Hl,5,16,"label",8),e.qZA()(),e.YNc(10,Kd,2,0,"div",9),e.qZA(),e.YNc(11,Qd,2,4,"div",10),e.TgZ(12,"div",11),e.YNc(13,Ep,2,1,"div",12),e.YNc(14,nc,5,2,"div",13),e.qZA()()),2&I&&(e.xp6(3),e.Q6J("ngIf","outline"==re.appearance),e.xp6(1),e.Q6J("ngIf",re._prefixChildren.length),e.xp6(5),e.Q6J("ngIf",re._hasFloatingLabel()),e.xp6(1),e.Q6J("ngIf",re._suffixChildren.length),e.xp6(1),e.Q6J("ngIf","outline"!=re.appearance),e.xp6(1),e.Q6J("ngSwitch",re._getDisplayedMessages()),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","hint"))},dependencies:[ie.O5,ie.RF,ie.n9,Yf],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[_e.transitionMessages]},changeDetection:0}),Y})(),li=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez,tc,Jc,tc]}),Y})();const Ti=cr({passive:!0});let Mi=(()=>{class Y{constructor(I,re){this._platform=I,this._ngZone=re,this._monitoredElements=new Map}monitor(I){if(!this._platform.isBrowser)return Zc.E;const re=Wi(I),Me=this._monitoredElements.get(re);if(Me)return Me.subject;const Ge=new ca.x,Ht="cdk-text-field-autofilled",yn=An=>{"cdk-text-field-autofill-start"!==An.animationName||re.classList.contains(Ht)?"cdk-text-field-autofill-end"===An.animationName&&re.classList.contains(Ht)&&(re.classList.remove(Ht),this._ngZone.run(()=>Ge.next({target:An.target,isAutofilled:!1}))):(re.classList.add(Ht),this._ngZone.run(()=>Ge.next({target:An.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{re.addEventListener("animationstart",yn,Ti),re.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(re,{subject:Ge,unlisten:()=>{re.removeEventListener("animationstart",yn,Ti)}}),Ge}stopMonitoring(I){const re=Wi(I),Me=this._monitoredElements.get(re);Me&&(Me.unlisten(),Me.subject.complete(),re.classList.remove("cdk-text-field-autofill-monitored"),re.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(re))}ngOnDestroy(){this._monitoredElements.forEach((I,re)=>this.stopMonitoring(re))}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(fr),e.LFG(e.R0b))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Ei=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();const ga=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),da=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Ma=0;const Vi=cp(class{constructor(Y,Q,I,re){this._defaultErrorStateMatcher=Y,this._parentForm=Q,this._parentFormGroup=I,this.ngControl=re,this.stateChanges=new ca.x}});let pa=(()=>{class Y extends Vi{constructor(I,re,Me,Ge,Ht,yn,An,zn,lr,fi){super(yn,Ge,Ht,Me),this._elementRef=I,this._platform=re,this._autofillMonitor=zn,this._formField=fi,this._uid="mat-input-"+Ma++,this.focused=!1,this.stateChanges=new ca.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(ua=>Bt().has(ua)),this._iOSKeyupListener=ua=>{const Ri=ua.target;!Ri.value&&0===Ri.selectionStart&&0===Ri.selectionEnd&&(Ri.setSelectionRange(1,1),Ri.setSelectionRange(0,0))};const vi=this._elementRef.nativeElement,Ni=vi.nodeName.toLowerCase();this._inputValueAccessor=An||vi,this._previousNativeValue=this.value,this.id=this.id,re.IOS&&lr.runOutsideAngular(()=>{I.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===Ni,this._isTextarea="textarea"===Ni,this._isInFormField=!!fi,this._isNativeSelect&&(this.controlType=vi.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(I){this._disabled=Kr(I),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(I){this._id=I||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(J.required)??!1}set required(I){this._required=Kr(I)}get type(){return this._type}set type(I){this._type=I||"text",this._validateType(),!this._isTextarea&&Bt().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(I){I!==this.value&&(this._inputValueAccessor.value=I,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(I){this._readonly=Kr(I)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(I=>{this.autofilled=I.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(I){this._elementRef.nativeElement.focus(I)}_focusChanged(I){I!==this.focused&&(this.focused=I,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const I=this._formField,re=I&&"legacy"===I.appearance&&!I._hasLabel?.()?null:this.placeholder;if(re!==this._previousPlaceholder){const Me=this._elementRef.nativeElement;this._previousPlaceholder=re,re?Me.setAttribute("placeholder",re):Me.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const I=this._elementRef.nativeElement.value;this._previousNativeValue!==I&&(this._previousNativeValue=I,this.stateChanges.next())}_validateType(){da.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let I=this._elementRef.nativeElement.validity;return I&&I.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const I=this._elementRef.nativeElement,re=I.options[0];return this.focused||I.multiple||!this.empty||!!(I.selectedIndex>-1&&re&&re.label)}return this.focused||!this.empty}setDescribedByIds(I){I.length?this._elementRef.nativeElement.setAttribute("aria-describedby",I.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const I=this._elementRef.nativeElement;return this._isNativeSelect&&(I.multiple||I.size>1)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq),e.Y36(fr),e.Y36(ze,10),e.Y36(Jr,8),e.Y36(jr,8),e.Y36(Rd),e.Y36(ga,10),e.Y36(Mi),e.Y36(e.R0b),e.Y36(ni,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(I,re){1&I&&e.NdJ("focus",function(){return re._focusChanged(!0)})("blur",function(){return re._focusChanged(!1)})("input",function(){return re._onInput()}),2&I&&(e.Ikx("disabled",re.disabled)("required",re.required),e.uIk("id",re.id)("data-placeholder",re.placeholder)("name",re.name||null)("readonly",re.readonly&&!re._isNativeSelect||null)("aria-invalid",re.empty&&re.required?null:re.errorState)("aria-required",re.required),e.ekj("mat-input-server",re._isServer)("mat-native-select-inline",re._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:Ae,useExisting:Y}]),e.qOj,e.TTD]}),Y})(),Ga=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[Rd],imports:[Ei,li,tc,Ei,li]}),Y})();const Ba=["mat-button",""],Qa=["*"],eo=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],ls=If(Yc(sp(class{constructor(Y){this._elementRef=Y}})));let ts=(()=>{class Y extends ls{constructor(I,re,Me){super(I),this._focusMonitor=re,this._animationMode=Me,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Ge of eo)this._hasHostAttributes(Ge)&&this._getHostElement().classList.add(Ge);I.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(I,re){I?this._focusMonitor.focusVia(this._getHostElement(),I,re):this._getHostElement().focus(re)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...I){return I.some(re=>this._getHostElement().hasAttribute(re))}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq),e.Y36(Df),e.Y36(e.QbO,8))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(I,re){if(1&I&&e.Gf(Bf,5),2&I){let Me;e.iGM(Me=e.CRH())&&(re.ripple=Me.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(I,re){2&I&&(e.uIk("disabled",re.disabled||null),e.ekj("_mat-animation-noopable","NoopAnimations"===re._animationMode)("mat-button-disabled",re.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[e.qOj],attrs:Ba,ngContentSelectors:Qa,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(I,re){1&I&&(e.F$t(),e.TgZ(0,"span",0),e.Hsn(1),e.qZA(),e._UZ(2,"span",1)(3,"span",2)),2&I&&(e.xp6(2),e.ekj("mat-button-ripple-round",re.isRoundButton||re.isIconButton),e.Q6J("matRippleDisabled",re._isRippleDisabled())("matRippleCentered",re.isIconButton)("matRippleTrigger",re._getHostElement()))},dependencies:[Bf],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),Y})(),Cs=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[pp,tc,tc]}),Y})();var us=ae(655);const Bo=["plot"],ss=["*"];class Zi{static setModuleName(Q){Zi.moduleName=Q}static getModuleName(){return Zi.moduleName}static setPlotly(Q){if("object"==typeof Q&&"function"!=typeof Q.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");Zi.plotly=Q}static insert(Q){return-1===Zi.instances.indexOf(Q)&&Zi.instances.push(Q),Q}static remove(Q){const I=Zi.instances.indexOf(Q);I>=0&&(Zi.instances.splice(I,1),Zi.plotly.purge(Q))}getInstanceByDivId(Q){for(const I of Zi.instances)if(I&&I.id===Q)return I}getPlotly(){return(0,us.mG)(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(typeof Zi.plotly>"u")throw new Error("ViaCDN"===Zi.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return Zi.plotly}waitFor(Q){return new Promise(I=>{const re=()=>{Q()?I():setTimeout(re,10)};re()})}newPlot(Q,I,re,Me,Ge){return(0,us.mG)(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),Ge){const Ht={data:I,layout:re,config:Me,frames:Ge};return this._getPlotly().newPlot(Q,Ht).then(()=>Zi.insert(Q))}return this._getPlotly().newPlot(Q,I,re,Me).then(()=>Zi.insert(Q))})}plot(Q,I,re,Me,Ge){if(Ge){const Ht={data:I,layout:re,config:Me,frames:Ge};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Q,Ht):this._getPlotly().newPlot(Q,Ht)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(Q,I,re,Me):this._getPlotly().newPlot(Q,I,re,Me)}update(Q,I,re,Me,Ge){if(Ge){const Ht={data:I,layout:re,config:Me,frames:Ge};return this._getPlotly().react(Q,Ht)}return this._getPlotly().react(Q,I,re,Me)}resize(Q){return this._getPlotly().Plots.resize(Q)}}Zi.\u0275fac=function(Q){return new(Q||Zi)},Zi.instances=[],Zi.plotly=void 0,Zi.moduleName=void 0,Zi.\u0275prov=e.Yz7({factory:function(){return new Zi},token:Zi,providedIn:"root"});let Yo=(()=>{class Y{constructor(I,re,Me){this.plotly=I,this.iterableDiffers=re,this.keyValueDiffers=Me,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new e.vpe,this.update=new e.vpe,this.purge=new e.vpe,this.error=new e.vpe,this.afterExport=new e.vpe,this.afterPlot=new e.vpe,this.animated=new e.vpe,this.animatingFrame=new e.vpe,this.animationInterrupted=new e.vpe,this.autoSize=new e.vpe,this.beforeExport=new e.vpe,this.buttonClicked=new e.vpe,this.click=new e.vpe,this.plotlyClick=new e.vpe,this.clickAnnotation=new e.vpe,this.deselect=new e.vpe,this.doubleClick=new e.vpe,this.framework=new e.vpe,this.hover=new e.vpe,this.legendClick=new e.vpe,this.legendDoubleClick=new e.vpe,this.react=new e.vpe,this.relayout=new e.vpe,this.restyle=new e.vpe,this.redraw=new e.vpe,this.selected=new e.vpe,this.selecting=new e.vpe,this.sliderChange=new e.vpe,this.sliderEnd=new e.vpe,this.sliderStart=new e.vpe,this.transitioning=new e.vpe,this.transitionInterrupted=new e.vpe,this.unhover=new e.vpe,this.relayouting=new e.vpe,this.treemapclick=new e.vpe,this.sunburstclick=new e.vpe,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const I=this.createFigure();this.initialized.emit(I)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const I=this.createFigure();this.purge.emit(I),Zi.remove(this.plotlyInstance)}ngOnChanges(I){let re=!1;const Me=I.revision;Me&&!Me.isFirstChange()&&(re=!0);const Ge=I.debug;Ge&&!Ge.isFirstChange()&&(re=!0),re&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let I=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(I=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(I=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),I&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let I=[this.defaultClassName];return Array.isArray(this.className)?I=I.concat(this.className):this.className&&I.push(this.className),I.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(I=>{this.plotlyInstance=I,this.getWindow().gd=this.debug?I:void 0,this.eventNames.forEach(re=>{const Me=`plotly_${re.toLowerCase()}`;I.on(Me,Ge=>this[re].emit(Ge))}),I.on("plotly_click",re=>{this.click.emit(re),this.plotlyClick.emit(re)}),this.updateWindowResizeHandler()},I=>{console.error("Error while plotting:",I),this.error.emit(I)})}createFigure(){const I=this.plotlyInstance;return{data:I.data,layout:I.layout,frames:I._transitionData?I._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const re=new Error("Plotly component wasn't initialized");throw this.error.emit(re),re}const I=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,I,this.config,this.frames).then(()=>{const re=this.createFigure();this.update.emit(re)},re=>{console.error("Error while updating plot:",re),this.error.emit(re)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(I,re){const Me=Object.assign({},re,{uid:""});return JSON.stringify(Me)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(Zi),e.Y36(e.ZZ4),e.Y36(e.aQg))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["plotly-plot"]],viewQuery:function(I,re){if(1&I&&e.Gf(Bo,7),2&I){let Me;e.iGM(Me=e.CRH())&&(re.plotEl=Me.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[e._Bn([Zi]),e.TTD],ngContentSelectors:ss,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(I,re){1&I&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&I&&(e.Q6J("ngClass",re.getClassName())("ngStyle",re.style),e.uIk("id",re.divId))},dependencies:[ie.mk,ie.PC],encapsulation:2}),Y})(),Ji=(()=>{class Y{constructor(){}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[Zi],imports:[ie.ez]}),Y})(),va=(()=>{class Y{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");Zi.setPlotly(Y.plotlyjs)}isValid(){return void 0!==Y.plotlyjs&&("function"==typeof Y.plotlyjs.plot||"function"==typeof Y.plotlyjs.newPlot)}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[Zi],imports:[ie.ez,Ji,Ji]}),Y.plotlyjs={},Y})();var ho=ae(3532);function wa(Y=0,Q,I=wd){let re=-1;return null!=Q&&((0,ho.K)(Q)?I=Q:re=Q),new u.y(Me=>{let Ge=function to(Y){return Y instanceof Date&&!isNaN(Y)}(Y)?+Y-I.now():Y;Ge<0&&(Ge=0);let Ht=0;return I.schedule(function(){Me.closed||(Me.next(Ht++),0<=re?this.schedule(void 0,re):Me.complete())},Ge)})}const{isArray:bo}=Array;function ys(Y){return 1===Y.length&&bo(Y[0])?Y[0]:Y}function Fs(...Y){return 1===(Y=ys(Y)).length?(0,d.Xf)(Y[0]):new u.y(function _s(Y){return Q=>{let I=[];for(let re=0;I&&!Q.closed&&re<Y.length;re++)I.push((0,d.Xf)(Y[re]).subscribe((0,a.x)(Q,Me=>{if(I){for(let Ge=0;Ge<I.length;Ge++)Ge!==re&&I[Ge].unsubscribe();I=null}Q.next(Me)})))}}(Y))}function Lo(...Y){const Q=(0,h.jO)(Y),I=ys(Y);return I.length?new u.y(re=>{let Me=I.map(()=>[]),Ge=I.map(()=>!1);re.add(()=>{Me=Ge=null});for(let Ht=0;!re.closed&&Ht<I.length;Ht++)(0,d.Xf)(I[Ht]).subscribe((0,a.x)(re,yn=>{if(Me[Ht].push(yn),Me.every(An=>An.length)){const An=Me.map(zn=>zn.shift());re.next(Q?Q(...An):An),Me.some((zn,lr)=>!zn.length&&Ge[lr])&&re.complete()}},()=>{Ge[Ht]=!0,!Me[Ht].length&&re.complete()}));return()=>{Me=Ge=null}}):Zc.E}new u.y(fu.Z);var vl=ae(3900),yl=ae(8505);function Cu(...Y){const Q=(0,h.jO)(Y);return(0,jc.e)((I,re)=>{const Me=Y.length,Ge=new Array(Me);let Ht=Y.map(()=>!1),yn=!1;for(let An=0;An<Me;An++)(0,d.Xf)(Y[An]).subscribe((0,a.x)(re,zn=>{Ge[An]=zn,!yn&&!Ht[An]&&(Ht[An]=!0,(yn=Ht.every(bd.y))&&(Ht=null))},fu.Z));I.subscribe((0,a.x)(re,An=>{if(yn){const zn=[An,...Ge];re.next(Q?Q(...zn):zn)}}))})}var lf=ae(9718);function ic(Y,Q){return Q?I=>(0,vs.z)(Q.pipe((0,qs.q)(1),function Qc(){return(0,jc.e)((Y,Q)=>{Y.subscribe((0,a.x)(Q,fu.Z))})}()),I.pipe(ic(Y))):(0,Zf.z)((I,re)=>Y(I,re).pipe((0,qs.q)(1),(0,lf.h)(I)))}var uf={left:"right",right:"left",bottom:"top",top:"bottom"};function Mc(Y){return Y.replace(/left|right|bottom|top/g,function(Q){return uf[Q]})}function il(Y){return Y.split("-")[0]}var ac={start:"end",end:"start"};function kc(Y){return Y.replace(/start|end/g,function(Q){return ac[Q]})}var zs="top",Bs="bottom",bs="right",Ss="left",eu="auto",oc=[zs,Bs,bs,Ss],Gl="start",ql="end",tu="viewport",sc="popper",Eu=oc.reduce(function(Y,Q){return Y.concat([Q+"-"+Gl,Q+"-"+ql])},[]),Ac=[].concat(oc,[eu]).reduce(function(Y,Q){return Y.concat([Q,Q+"-"+Gl,Q+"-"+ql])},[]),nh=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function _l(Y){if(null==Y)return window;if("[object Window]"!==Y.toString()){var Q=Y.ownerDocument;return Q&&Q.defaultView||window}return Y}function Yl(Y){return Y instanceof _l(Y).Element||Y instanceof Element}function al(Y){return Y instanceof _l(Y).HTMLElement||Y instanceof HTMLElement}function Ou(Y){return!(typeof ShadowRoot>"u")&&(Y instanceof _l(Y).ShadowRoot||Y instanceof ShadowRoot)}function lc(Y){return((Yl(Y)?Y.ownerDocument:Y.document)||window.document).documentElement}var kl=Math.max,so=Math.min,js=Math.round;function Qf(){var Y=navigator.userAgentData;return null!=Y&&Y.brands?Y.brands.map(function(Q){return Q.brand+"/"+Q.version}).join(" "):navigator.userAgent}function Zl(){return!/^((?!chrome|android).)*safari/i.test(Qf())}function cc(Y,Q,I){void 0===Q&&(Q=!1),void 0===I&&(I=!1);var re=Y.getBoundingClientRect(),Me=1,Ge=1;Q&&al(Y)&&(Me=Y.offsetWidth>0&&js(re.width)/Y.offsetWidth||1,Ge=Y.offsetHeight>0&&js(re.height)/Y.offsetHeight||1);var yn=(Yl(Y)?_l(Y):window).visualViewport,An=!Zl()&&I,zn=(re.left+(An&&yn?yn.offsetLeft:0))/Me,lr=(re.top+(An&&yn?yn.offsetTop:0))/Ge,fi=re.width/Me,vi=re.height/Ge;return{width:fi,height:vi,top:lr,right:zn+fi,bottom:lr+vi,left:zn,x:zn,y:lr}}function hf(Y){var Q=_l(Y);return{scrollLeft:Q.pageXOffset,scrollTop:Q.pageYOffset}}function ou(Y){return cc(lc(Y)).left+hf(Y).scrollLeft}function bl(Y){return _l(Y).getComputedStyle(Y)}function ol(Y){return Y?(Y.nodeName||"").toLowerCase():null}function Cc(Y){return"html"===ol(Y)?Y:Y.assignedSlot||Y.parentNode||(Ou(Y)?Y.host:null)||lc(Y)}function Iu(Y){var Q=bl(Y);return/auto|scroll|overlay|hidden/.test(Q.overflow+Q.overflowY+Q.overflowX)}function ed(Y){return["html","body","#document"].indexOf(ol(Y))>=0?Y.ownerDocument.body:al(Y)&&Iu(Y)?Y:ed(Cc(Y))}function Wl(Y,Q){var I;void 0===Q&&(Q=[]);var re=ed(Y),Me=re===(null==(I=Y.ownerDocument)?void 0:I.body),Ge=_l(re),Ht=Me?[Ge].concat(Ge.visualViewport||[],Iu(re)?re:[]):re,yn=Q.concat(Ht);return Me?yn:yn.concat(Wl(Cc(Ht)))}function rh(Y){return["table","td","th"].indexOf(ol(Y))>=0}function td(Y){return al(Y)&&"fixed"!==bl(Y).position?Y.offsetParent:null}function su(Y){for(var Q=_l(Y),I=td(Y);I&&rh(I)&&"static"===bl(I).position;)I=td(I);return I&&("html"===ol(I)||"body"===ol(I)&&"static"===bl(I).position)?Q:I||function ih(Y){var Q=/firefox/i.test(Qf());if(/Trident/i.test(Qf())&&al(Y)&&"fixed"===bl(Y).position)return null;var Me=Cc(Y);for(Ou(Me)&&(Me=Me.host);al(Me)&&["html","body"].indexOf(ol(Me))<0;){var Ge=bl(Me);if("none"!==Ge.transform||"none"!==Ge.perspective||"paint"===Ge.contain||-1!==["transform","perspective"].indexOf(Ge.willChange)||Q&&"filter"===Ge.willChange||Q&&Ge.filter&&"none"!==Ge.filter)return Me;Me=Me.parentNode}return null}(Y)||Q}function nd(Y,Q){var I=Q.getRootNode&&Q.getRootNode();if(Y.contains(Q))return!0;if(I&&Ou(I)){var re=Q;do{if(re&&Y.isSameNode(re))return!0;re=re.parentNode||re.host}while(re)}return!1}function Vs(Y){return Object.assign({},Y,{left:Y.x,top:Y.y,right:Y.x+Y.width,bottom:Y.y+Y.height})}function rd(Y,Q,I){return Q===tu?Vs(function Ll(Y,Q){var I=_l(Y),re=lc(Y),Me=I.visualViewport,Ge=re.clientWidth,Ht=re.clientHeight,yn=0,An=0;if(Me){Ge=Me.width,Ht=Me.height;var zn=Zl();(zn||!zn&&"fixed"===Q)&&(yn=Me.offsetLeft,An=Me.offsetTop)}return{width:Ge,height:Ht,x:yn+ou(Y),y:An}}(Y,I)):Yl(Q)?function pf(Y,Q){var I=cc(Y,!1,"fixed"===Q);return I.top=I.top+Y.clientTop,I.left=I.left+Y.clientLeft,I.bottom=I.top+Y.clientHeight,I.right=I.left+Y.clientWidth,I.width=Y.clientWidth,I.height=Y.clientHeight,I.x=I.left,I.y=I.top,I}(Q,I):Vs(function Lu(Y){var Q,I=lc(Y),re=hf(Y),Me=null==(Q=Y.ownerDocument)?void 0:Q.body,Ge=kl(I.scrollWidth,I.clientWidth,Me?Me.scrollWidth:0,Me?Me.clientWidth:0),Ht=kl(I.scrollHeight,I.clientHeight,Me?Me.scrollHeight:0,Me?Me.clientHeight:0),yn=-re.scrollLeft+ou(Y),An=-re.scrollTop;return"rtl"===bl(Me||I).direction&&(yn+=kl(I.clientWidth,Me?Me.clientWidth:0)-Ge),{width:Ge,height:Ht,x:yn,y:An}}(lc(Y)))}function uc(Y){return Y.split("-")[1]}function Xl(Y){return["top","bottom"].indexOf(Y)>=0?"x":"y"}function Sc(Y){var An,Q=Y.reference,I=Y.element,re=Y.placement,Me=re?il(re):null,Ge=re?uc(re):null,Ht=Q.x+Q.width/2-I.width/2,yn=Q.y+Q.height/2-I.height/2;switch(Me){case zs:An={x:Ht,y:Q.y-I.height};break;case Bs:An={x:Ht,y:Q.y+Q.height};break;case bs:An={x:Q.x+Q.width,y:yn};break;case Ss:An={x:Q.x-I.width,y:yn};break;default:An={x:Q.x,y:Q.y}}var zn=Me?Xl(Me):null;if(null!=zn){var lr="y"===zn?"height":"width";switch(Ge){case Gl:An[zn]=An[zn]-(Q[lr]/2-I[lr]/2);break;case ql:An[zn]=An[zn]+(Q[lr]/2-I[lr]/2)}}return An}function Dc(Y){return Object.assign({},{top:0,right:0,bottom:0,left:0},Y)}function Oc(Y,Q){return Q.reduce(function(I,re){return I[re]=Y,I},{})}function mf(Y,Q){void 0===Q&&(Q={});var re=Q.placement,Me=void 0===re?Y.placement:re,Ge=Q.strategy,Ht=void 0===Ge?Y.strategy:Ge,yn=Q.boundary,An=void 0===yn?"clippingParents":yn,zn=Q.rootBoundary,lr=void 0===zn?tu:zn,fi=Q.elementContext,vi=void 0===fi?sc:fi,Ni=Q.altBoundary,ua=void 0!==Ni&&Ni,Ri=Q.padding,ha=void 0===Ri?0:Ri,Da=Dc("number"!=typeof ha?ha:Oc(ha,oc)),jo=Y.rects.popper,ja=Y.elements[ua?vi===sc?"reference":sc:vi],Ra=function Dp(Y,Q,I,re){var Me="clippingParents"===Q?function Il(Y){var Q=Wl(Cc(Y)),re=["absolute","fixed"].indexOf(bl(Y).position)>=0&&al(Y)?su(Y):Y;return Yl(re)?Q.filter(function(Me){return Yl(Me)&&nd(Me,re)&&"body"!==ol(Me)}):[]}(Y):[].concat(Q),Ge=[].concat(Me,[I]),yn=Ge.reduce(function(An,zn){var lr=rd(Y,zn,re);return An.top=kl(lr.top,An.top),An.right=so(lr.right,An.right),An.bottom=so(lr.bottom,An.bottom),An.left=kl(lr.left,An.left),An},rd(Y,Ge[0],re));return yn.width=yn.right-yn.left,yn.height=yn.bottom-yn.top,yn.x=yn.left,yn.y=yn.top,yn}(Yl(ja)?ja:ja.contextElement||lc(Y.elements.popper),An,lr,Ht),Ya=cc(Y.elements.reference),Io=Sc({reference:Ya,element:jo,strategy:"absolute",placement:Me}),xo=Vs(Object.assign({},jo,Io)),Ds=vi===sc?xo:Ya,Os={top:Ra.top-Ds.top+Da.top,bottom:Ds.bottom-Ra.bottom+Da.bottom,left:Ra.left-Ds.left+Da.left,right:Ds.right-Ra.right+Da.right},fs=Y.modifiersData.offset;if(vi===sc&&fs){var Jl=fs[Me];Object.keys(Os).forEach(function(cl){var Uu=[bs,Bs].indexOf(cl)>=0?1:-1,Hu=[zs,Bs].indexOf(cl)>=0?"y":"x";Os[cl]+=Jl[Hu]*Uu})}return Os}const id={name:"flip",enabled:!0,phase:"main",fn:function sh(Y){var Q=Y.state,I=Y.options,re=Y.name;if(!Q.modifiersData[re]._skip){for(var Me=I.mainAxis,Ge=void 0===Me||Me,Ht=I.altAxis,yn=void 0===Ht||Ht,An=I.fallbackPlacements,zn=I.padding,lr=I.boundary,fi=I.rootBoundary,vi=I.altBoundary,Ni=I.flipVariations,ua=void 0===Ni||Ni,Ri=I.allowedAutoPlacements,ha=Q.options.placement,Da=il(ha),jo=An||(Da!==ha&&ua?function oh(Y){if(il(Y)===eu)return[];var Q=Mc(Y);return[kc(Y),Q,kc(Q)]}(ha):[Mc(ha)]),ja=[ha].concat(jo).reduce(function(xf,cu){return xf.concat(il(cu)===eu?function ah(Y,Q){void 0===Q&&(Q={});var Me=Q.boundary,Ge=Q.rootBoundary,Ht=Q.padding,yn=Q.flipVariations,An=Q.allowedAutoPlacements,zn=void 0===An?Ac:An,lr=uc(Q.placement),fi=lr?yn?Eu:Eu.filter(function(ua){return uc(ua)===lr}):oc,vi=fi.filter(function(ua){return zn.indexOf(ua)>=0});0===vi.length&&(vi=fi);var Ni=vi.reduce(function(ua,Ri){return ua[Ri]=mf(Y,{placement:Ri,boundary:Me,rootBoundary:Ge,padding:Ht})[il(Ri)],ua},{});return Object.keys(Ni).sort(function(ua,Ri){return Ni[ua]-Ni[Ri]})}(Q,{placement:cu,boundary:lr,rootBoundary:fi,padding:zn,flipVariations:ua,allowedAutoPlacements:Ri}):cu)},[]),Ra=Q.rects.reference,Ya=Q.rects.popper,Io=new Map,xo=!0,Ds=ja[0],Os=0;Os<ja.length;Os++){var fs=ja[Os],Jl=il(fs),cl=uc(fs)===Gl,Uu=[zs,Bs].indexOf(Jl)>=0,Hu=Uu?"width":"height",Al=mf(Q,{placement:fs,boundary:lr,rootBoundary:fi,altBoundary:vi,padding:zn}),Kl=Uu?cl?bs:Ss:cl?Bs:zs;Ra[Hu]>Ya[Hu]&&(Kl=Mc(Kl));var Ch=Mc(Kl),Gu=[];if(Ge&&Gu.push(Al[Jl]<=0),yn&&Gu.push(Al[Kl]<=0,Al[Ch]<=0),Gu.every(function(xf){return xf})){Ds=fs,xo=!1;break}Io.set(fs,Gu)}if(xo)for(var Xp=function(cu){var gd=ja.find(function(Dh){var qu=Io.get(Dh);if(qu)return qu.slice(0,cu).every(function($p){return $p})});if(gd)return Ds=gd,"break"},md=ua?3:1;md>0&&"break"!==Xp(md);md--);Q.placement!==Ds&&(Q.modifiersData[re]._skip=!0,Q.placement=Ds,Q.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function sl(Y,Q,I){return kl(Y,so(Q,I))}function Pu(Y){var Q=cc(Y),I=Y.offsetWidth,re=Y.offsetHeight;return Math.abs(Q.width-I)<=1&&(I=Q.width),Math.abs(Q.height-re)<=1&&(re=Q.height),{x:Y.offsetLeft,y:Y.offsetTop,width:I,height:re}}const ch={name:"preventOverflow",enabled:!0,phase:"main",fn:function od(Y){var Q=Y.state,I=Y.options,re=Y.name,Me=I.mainAxis,Ge=void 0===Me||Me,Ht=I.altAxis,yn=void 0!==Ht&&Ht,vi=I.tether,Ni=void 0===vi||vi,ua=I.tetherOffset,Ri=void 0===ua?0:ua,ha=mf(Q,{boundary:I.boundary,rootBoundary:I.rootBoundary,padding:I.padding,altBoundary:I.altBoundary}),Da=il(Q.placement),ka=uc(Q.placement),jo=!ka,ja=Xl(Da),Ra=function ad(Y){return"x"===Y?"y":"x"}(ja),Ya=Q.modifiersData.popperOffsets,Io=Q.rects.reference,xo=Q.rects.popper,Ds="function"==typeof Ri?Ri(Object.assign({},Q.rects,{placement:Q.placement})):Ri,Os="number"==typeof Ds?{mainAxis:Ds,altAxis:Ds}:Object.assign({mainAxis:0,altAxis:0},Ds),fs=Q.modifiersData.offset?Q.modifiersData.offset[Q.placement]:null,Jl={x:0,y:0};if(Ya){if(Ge){var cl,Uu="y"===ja?zs:Ss,Hu="y"===ja?Bs:bs,Al="y"===ja?"height":"width",Kl=Ya[ja],Ch=Kl+ha[Uu],Gu=Kl-ha[Hu],Sh=Ni?-xo[Al]/2:0,Xp=ka===Gl?Io[Al]:xo[Al],md=ka===Gl?-xo[Al]:-Io[Al],Eh=Q.elements.arrow,xf=Ni&&Eh?Pu(Eh):{width:0,height:0},cu=Q.modifiersData["arrow#persistent"]?Q.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},gd=cu[Uu],Dh=cu[Hu],qu=sl(0,Io[Al],xf[Al]),$p=jo?Io[Al]/2-Sh-qu-gd-Os.mainAxis:Xp-qu-gd-Os.mainAxis,wy=jo?-Io[Al]/2+Sh+qu+Dh+Os.mainAxis:md+qu+Dh+Os.mainAxis,Jp=Q.elements.arrow&&su(Q.elements.arrow),Mm=null!=(cl=fs?.[ja])?cl:0,ky=Kl+wy-Mm,km=sl(Ni?so(Ch,Kl+$p-Mm-(Jp?"y"===ja?Jp.clientTop||0:Jp.clientLeft||0:0)):Ch,Kl,Ni?kl(Gu,ky):Gu);Ya[ja]=km,Jl[ja]=km-Kl}if(yn){var Am,Yu=Ya[Ra],Oh="y"===Ra?"height":"width",Cm=Yu+ha["x"===ja?zs:Ss],Sm=Yu-ha["x"===ja?Bs:bs],Kp=-1!==[zs,Ss].indexOf(Da),Em=null!=(Am=fs?.[Ra])?Am:0,Dm=Kp?Cm:Yu-Io[Oh]-xo[Oh]-Em+Os.altAxis,Om=Kp?Yu+Io[Oh]+xo[Oh]-Em-Os.altAxis:Sm,Lm=Ni&&Kp?function lh(Y,Q,I){var re=sl(Y,Q,I);return re>I?I:re}(Dm,Yu,Om):sl(Ni?Dm:Cm,Yu,Ni?Om:Sm);Ya[Ra]=Lm,Jl[Ra]=Lm-Yu}Q.modifiersData[re]=Jl}},requiresIfExists:["offset"]},fh={name:"arrow",enabled:!0,phase:"main",fn:function sd(Y){var Q,I=Y.state,re=Y.name,Me=Y.options,Ge=I.elements.arrow,Ht=I.modifiersData.popperOffsets,yn=il(I.placement),An=Xl(yn),lr=[Ss,bs].indexOf(yn)>=0?"height":"width";if(Ge&&Ht){var fi=function(Q,I){return Dc("number"!=typeof(Q="function"==typeof Q?Q(Object.assign({},I.rects,{placement:I.placement})):Q)?Q:Oc(Q,oc))}(Me.padding,I),vi=Pu(Ge),Ni="y"===An?zs:Ss,ua="y"===An?Bs:bs,Ri=I.rects.reference[lr]+I.rects.reference[An]-Ht[An]-I.rects.popper[lr],ha=Ht[An]-I.rects.reference[An],Da=su(Ge),ka=Da?"y"===An?Da.clientHeight||0:Da.clientWidth||0:0,Ya=ka/2-vi[lr]/2+(Ri/2-ha/2),Io=sl(fi[Ni],Ya,ka-vi[lr]-fi[ua]);I.modifiersData[re]=((Q={})[An]=Io,Q.centerOffset=Io-Ya,Q)}},effect:function uh(Y){var Q=Y.state,re=Y.options.element,Me=void 0===re?"[data-popper-arrow]":re;null!=Me&&("string"==typeof Me&&!(Me=Q.elements.popper.querySelector(Me))||!nd(Q.elements.popper,Me)||(Q.elements.arrow=Me))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hh(Y,Q,I){void 0===I&&(I=!1);var re=al(Q),Me=al(Q)&&function Ru(Y){var Q=Y.getBoundingClientRect(),I=js(Q.width)/Y.offsetWidth||1,re=js(Q.height)/Y.offsetHeight||1;return 1!==I||1!==re}(Q),Ge=lc(Q),Ht=cc(Y,Me,I),yn={scrollLeft:0,scrollTop:0},An={x:0,y:0};return(re||!re&&!I)&&(("body"!==ol(Q)||Iu(Ge))&&(yn=function dh(Y){return Y!==_l(Y)&&al(Y)?function ld(Y){return{scrollLeft:Y.scrollLeft,scrollTop:Y.scrollTop}}(Y):hf(Y)}(Q)),al(Q)?((An=cc(Q,!0)).x+=Q.clientLeft,An.y+=Q.clientTop):Ge&&(An.x=ou(Ge))),{x:Ht.left+yn.scrollLeft-An.x,y:Ht.top+yn.scrollTop-An.y,width:Ht.width,height:Ht.height}}function gf(Y){var Q=new Map,I=new Set,re=[];function Me(Ge){I.add(Ge.name),[].concat(Ge.requires||[],Ge.requiresIfExists||[]).forEach(function(yn){if(!I.has(yn)){var An=Q.get(yn);An&&Me(An)}}),re.push(Ge)}return Y.forEach(function(Ge){Q.set(Ge.name,Ge)}),Y.forEach(function(Ge){I.has(Ge.name)||Me(Ge)}),re}function ph(Y){var Q;return function(){return Q||(Q=new Promise(function(I){Promise.resolve().then(function(){Q=void 0,I(Y())})})),Q}}var mh={placement:"bottom",modifiers:[],strategy:"absolute"};function gh(){for(var Y=arguments.length,Q=new Array(Y),I=0;I<Y;I++)Q[I]=arguments[I];return!Q.some(function(re){return!(re&&"function"==typeof re.getBoundingClientRect)})}function Pp(Y){void 0===Y&&(Y={});var I=Y.defaultModifiers,re=void 0===I?[]:I,Me=Y.defaultOptions,Ge=void 0===Me?mh:Me;return function(yn,An,zn){void 0===zn&&(zn=Ge);var lr={placement:"bottom",orderedModifiers:[],options:Object.assign({},mh,Ge),modifiersData:{},elements:{reference:yn,popper:An},attributes:{},styles:{}},fi=[],vi=!1,Ni={state:lr,setOptions:function(Da){var ka="function"==typeof Da?Da(lr.options):Da;Ri(),lr.options=Object.assign({},Ge,lr.options,ka),lr.scrollParents={reference:Yl(yn)?Wl(yn):yn.contextElement?Wl(yn.contextElement):[],popper:Wl(An)};var jo=function Lp(Y){var Q=gf(Y);return nh.reduce(function(I,re){return I.concat(Q.filter(function(Me){return Me.phase===re}))},[])}(function Ip(Y){var Q=Y.reduce(function(I,re){var Me=I[re.name];return I[re.name]=Me?Object.assign({},Me,re,{options:Object.assign({},Me.options,re.options),data:Object.assign({},Me.data,re.data)}):re,I},{});return Object.keys(Q).map(function(I){return Q[I]})}([].concat(re,lr.options.modifiers)));return lr.orderedModifiers=jo.filter(function(fs){return fs.enabled}),function ua(){lr.orderedModifiers.forEach(function(ha){var ka=ha.options,ja=ha.effect;if("function"==typeof ja){var Ra=ja({state:lr,name:ha.name,instance:Ni,options:void 0===ka?{}:ka});fi.push(Ra||function(){})}})}(),Ni.update()},forceUpdate:function(){if(!vi){var Da=lr.elements,ka=Da.reference,jo=Da.popper;if(gh(ka,jo)){lr.rects={reference:hh(ka,su(jo),"fixed"===lr.options.strategy),popper:Pu(jo)},lr.reset=!1,lr.placement=lr.options.placement,lr.orderedModifiers.forEach(function(fs){return lr.modifiersData[fs.name]=Object.assign({},fs.data)});for(var Ra=0;Ra<lr.orderedModifiers.length;Ra++)if(!0!==lr.reset){var Ya=lr.orderedModifiers[Ra],Io=Ya.fn,xo=Ya.options;"function"==typeof Io&&(lr=Io({state:lr,options:void 0===xo?{}:xo,name:Ya.name,instance:Ni})||lr)}else lr.reset=!1,Ra=-1}}},update:ph(function(){return new Promise(function(ha){Ni.forceUpdate(),ha(lr)})}),destroy:function(){Ri(),vi=!0}};if(!gh(yn,An))return Ni;function Ri(){fi.forEach(function(ha){return ha()}),fi=[]}return Ni.setOptions(zn).then(function(ha){!vi&&zn.onFirstUpdate&&zn.onFirstUpdate(ha)}),Ni}}var vf={passive:!0},yh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function S0(Y){var Q,I=Y.popper,re=Y.popperRect,Me=Y.placement,Ge=Y.variation,Ht=Y.offsets,yn=Y.position,An=Y.gpuAcceleration,zn=Y.adaptive,lr=Y.roundOffsets,fi=Y.isFixed,vi=Ht.x,Ni=void 0===vi?0:vi,ua=Ht.y,Ri=void 0===ua?0:ua,ha="function"==typeof lr?lr({x:Ni,y:Ri}):{x:Ni,y:Ri};Ni=ha.x,Ri=ha.y;var Da=Ht.hasOwnProperty("x"),ka=Ht.hasOwnProperty("y"),jo=Ss,ja=zs,Ra=window;if(zn){var Ya=su(I),Io="clientHeight",xo="clientWidth";Ya===_l(I)&&"static"!==bl(Ya=lc(I)).position&&"absolute"===yn&&(Io="scrollHeight",xo="scrollWidth"),(Me===zs||(Me===Ss||Me===bs)&&Ge===ql)&&(ja=Bs,Ri-=(fi&&Ya===Ra&&Ra.visualViewport?Ra.visualViewport.height:Ya[Io])-re.height,Ri*=An?1:-1),Me!==Ss&&(Me!==zs&&Me!==Bs||Ge!==ql)||(jo=bs,Ni-=(fi&&Ya===Ra&&Ra.visualViewport?Ra.visualViewport.width:Ya[xo])-re.width,Ni*=An?1:-1)}var cl,fs=Object.assign({position:yn},zn&&yh),Jl=!0===lr?function Im(Y){var I=Y.y,Me=window.devicePixelRatio||1;return{x:js(Y.x*Me)/Me||0,y:js(I*Me)/Me||0}}({x:Ni,y:Ri}):{x:Ni,y:Ri};return Ni=Jl.x,Ri=Jl.y,Object.assign({},fs,An?((cl={})[ja]=ka?"0":"",cl[jo]=Da?"0":"",cl.transform=(Ra.devicePixelRatio||1)<=1?"translate("+Ni+"px, "+Ri+"px)":"translate3d("+Ni+"px, "+Ri+"px, 0)",cl):((Q={})[ja]=ka?Ri+"px":"",Q[jo]=Da?Ni+"px":"",Q.transform="",Q))}var Bm=Pp({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function Pl(Y){var Q=Y.state,I=Y.instance,re=Y.options,Me=re.scroll,Ge=void 0===Me||Me,Ht=re.resize,yn=void 0===Ht||Ht,An=_l(Q.elements.popper),zn=[].concat(Q.scrollParents.reference,Q.scrollParents.popper);return Ge&&zn.forEach(function(lr){lr.addEventListener("scroll",I.update,vf)}),yn&&An.addEventListener("resize",I.update,vf),function(){Ge&&zn.forEach(function(lr){lr.removeEventListener("scroll",I.update,vf)}),yn&&An.removeEventListener("resize",I.update,vf)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function vh(Y){var Q=Y.state;Q.modifiersData[Y.name]=Sc({reference:Q.rects.reference,element:Q.rects.popper,strategy:"absolute",placement:Q.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function Pm(Y){var Q=Y.state,I=Y.options,re=I.gpuAcceleration,Me=void 0===re||re,Ge=I.adaptive,Ht=void 0===Ge||Ge,yn=I.roundOffsets,An=void 0===yn||yn,lr={placement:il(Q.placement),variation:uc(Q.placement),popper:Q.elements.popper,popperRect:Q.rects.popper,gpuAcceleration:Me,isFixed:"fixed"===Q.options.strategy};null!=Q.modifiersData.popperOffsets&&(Q.styles.popper=Object.assign({},Q.styles.popper,S0(Object.assign({},lr,{offsets:Q.modifiersData.popperOffsets,position:Q.options.strategy,adaptive:Ht,roundOffsets:An})))),null!=Q.modifiersData.arrow&&(Q.styles.arrow=Object.assign({},Q.styles.arrow,S0(Object.assign({},lr,{offsets:Q.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:An})))),Q.attributes.popper=Object.assign({},Q.attributes.popper,{"data-popper-placement":Q.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function Nm(Y){var Q=Y.state;Object.keys(Q.elements).forEach(function(I){var re=Q.styles[I]||{},Me=Q.attributes[I]||{},Ge=Q.elements[I];!al(Ge)||!ol(Ge)||(Object.assign(Ge.style,re),Object.keys(Me).forEach(function(Ht){var yn=Me[Ht];!1===yn?Ge.removeAttribute(Ht):Ge.setAttribute(Ht,!0===yn?"":yn)}))})},effect:function Fm(Y){var Q=Y.state,I={popper:{position:Q.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(Q.elements.popper.style,I.popper),Q.styles=I,Q.elements.arrow&&Object.assign(Q.elements.arrow.style,I.arrow),function(){Object.keys(Q.elements).forEach(function(re){var Me=Q.elements[re],Ge=Q.attributes[re]||{},yn=Object.keys(Q.styles.hasOwnProperty(re)?Q.styles[re]:I[re]).reduce(function(An,zn){return An[zn]="",An},{});!al(Me)||!ol(Me)||(Object.assign(Me.style,yn),Object.keys(Ge).forEach(function(An){Me.removeAttribute(An)}))})}},requires:["computeStyles"]}]});const Um={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function Vm(Y){var Q=Y.state,re=Y.name,Me=Y.options.offset,Ge=void 0===Me?[0,0]:Me,Ht=Ac.reduce(function(lr,fi){return lr[fi]=function jm(Y,Q,I){var re=il(Y),Me=[Ss,zs].indexOf(re)>=0?-1:1,Ge="function"==typeof I?I(Object.assign({},Q,{placement:Y})):I,Ht=Ge[0],yn=Ge[1];return Ht=Ht||0,yn=(yn||0)*Me,[Ss,bs].indexOf(re)>=0?{x:yn,y:Ht}:{x:Ht,y:yn}}(fi,Q.rects,Ge),lr},{}),yn=Ht[Q.placement],zn=yn.y;null!=Q.modifiersData.popperOffsets&&(Q.modifiersData.popperOffsets.x+=yn.x,Q.modifiersData.popperOffsets.y+=zn),Q.modifiersData[re]=Ht}},$m=["*"],pg=["dialog"];function Np(Y){return"string"==typeof Y}function Fu(Y){return null!=Y}function _f(Y){return(Y||document.body).getBoundingClientRect()}const D0={animation:!0,transitionTimerDelayMs:5},c1=()=>{},{transitionTimerDelayMs:u1}=D0,cd=new Map,ll=(Y,Q,I,re)=>{let Me=re.context||{};const Ge=cd.get(Q);if(Ge)switch(re.runningTransition){case"continue":return Zc.E;case"stop":Y.run(()=>Ge.transition$.complete()),Me=Object.assign(Ge.context,Me),cd.delete(Q)}const Ht=I(Q,re.animation,Me)||c1;if(!re.animation||"none"===window.getComputedStyle(Q).transitionProperty)return Y.run(()=>Ht()),(0,Fi.of)(void 0).pipe(function s1(Y){return Q=>new u.y(I=>Q.subscribe({next:Ht=>Y.run(()=>I.next(Ht)),error:Ht=>Y.run(()=>I.error(Ht)),complete:()=>Y.run(()=>I.complete())}))}(Y));const yn=new ca.x,An=new ca.x,zn=yn.pipe(function Ml(...Y){return Q=>(0,vs.z)(Q,(0,Fi.of)(...Y))}(!0));cd.set(Q,{transition$:yn,complete:()=>{An.next(),An.complete()},context:Me});const lr=function l1(Y){const{transitionDelay:Q,transitionDuration:I}=window.getComputedStyle(Y);return 1e3*(parseFloat(Q)+parseFloat(I))}(Q);return Y.runOutsideAngular(()=>{const fi=As(Q,"transitionend").pipe(_o(zn),(0,gs.h)(({target:Ni})=>Ni===Q));Fs(wa(lr+u1).pipe(_o(zn)),fi,An).pipe(_o(zn)).subscribe(()=>{cd.delete(Q),Y.run(()=>{Ht(),yn.next(),yn.complete()})})}),yn.asObservable()};let bh=(()=>{class Y{constructor(){this.animation=D0.animation}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),N0=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),F0=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),j0=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),V0=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();var Es=(()=>{return(Y=Es||(Es={}))[Y.Tab=9]="Tab",Y[Y.Enter=13]="Enter",Y[Y.Escape=27]="Escape",Y[Y.Space=32]="Space",Y[Y.PageUp=33]="PageUp",Y[Y.PageDown=34]="PageDown",Y[Y.End=35]="End",Y[Y.Home=36]="Home",Y[Y.ArrowLeft=37]="ArrowLeft",Y[Y.ArrowUp=38]="ArrowUp",Y[Y.ArrowRight=39]="ArrowRight",Y[Y.ArrowDown=40]="ArrowDown",Es;var Y})();const wh=(Y,Q)=>!!Q&&Q.some(I=>I.contains(Y)),U0=(Y,Q)=>!Q||null!=function o1(Y,Q){return!Q||typeof Y.closest>"u"?null:Y.closest(Q)}(Y,Q),C1=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function E1(Y,Q,I,re,Me,Ge,Ht,yn){I&&Y.runOutsideAngular((Y=>C1?()=>setTimeout(()=>Y(),100):Y)(()=>{const zn=As(Q,"keydown").pipe(_o(Me),(0,gs.h)(vi=>vi.which===Es.Escape),(0,yl.b)(vi=>vi.preventDefault())),lr=As(Q,"mousedown").pipe((0,x.U)(vi=>{const Ni=vi.target;return 2!==vi.button&&!wh(Ni,Ht)&&("inside"===I?wh(Ni,Ge)&&U0(Ni,yn):"outside"===I?!wh(Ni,Ge):U0(Ni,yn)||!wh(Ni,Ge))}),_o(Me)),fi=As(Q,"mouseup").pipe(Cu(lr),(0,gs.h)(([vi,Ni])=>Ni),function cf(Y,Q=Uc){const I=wa(Y,Q);return ic(()=>I)}(0),_o(Me));Fs([zn.pipe((0,x.U)(vi=>0)),fi.pipe((0,x.U)(vi=>1))]).subscribe(vi=>Y.run(()=>re(vi)))}))}const H0=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function G0(Y){const Q=Array.from(Y.querySelectorAll(H0)).filter(I=>-1!==I.tabIndex);return[Q[0],Q[Q.length-1]]}const O1=/\s+/,L1=/  +/gi,I1=/^start/,P1=/^end/,R1=/-(top|left)$/,N1=/-(bottom|right)$/,z1=/^left/,B1=/^right/,j1=/^start/,V1=/^end/;function q0({placement:Y,baseClass:Q}){let I=Array.isArray(Y)?Y:Y.split(O1),Me=I.findIndex(An=>"auto"===An);Me>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(An){null==I.find(zn=>-1!==zn.search("^"+An))&&I.splice(Me++,1,An)});const Ge=I.map(An=>function F1(Y){return Y.replace(I1,"left").replace(P1,"right").replace(R1,"-start").replace(N1,"-end")}(An));return{placement:Ge.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!Q,phase:"write",fn({state:An}){const zn=new RegExp(Q+"(-[a-z]+)*","gi"),lr=An.elements.popper,fi=An.placement;let vi=lr.className;vi=vi.replace(zn,""),vi+=` ${function U1(Y,Q){let[I,re]=Q.split("-");const Me=I.replace(z1,"start").replace(B1,"end");let Ge=[Me];if(re){let Ht=re;("left"===I||"right"===I)&&(Ht=Ht.replace(j1,"top").replace(V1,"bottom")),Ge.push(`${Me}-${Ht}`)}return Y&&(Ge=Ge.map(Ht=>`${Y}-${Ht}`)),Ge.join(" ")}(Q,fi)}`,vi=vi.trim().replace(L1," "),lr.className=vi}},id,ch,fh,{enabled:!0,name:"flip",options:{fallbackPlacements:Ge}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Y0(Y){return Y}function G1(Y){return Q=>(Q.modifiers.push(Um,{name:"offset",options:{offset:()=>Y}}),Q)}new Date(1882,10,12),new Date(2174,10,25);let K0=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez,We]}),Y})(),Q1=(()=>{class Y{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),Q0=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275dir=e.lG2({type:Y,selectors:[["",8,"navbar"]]}),Y})(),Hp=(()=>{class Y{constructor(I,re){this.elementRef=I,this._renderer=re,this._disabled=!1}set disabled(I){this._disabled=""===I||!0===I,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq),e.Y36(e.Qsj))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(I,re){2&I&&(e.Ikx("tabIndex",re.disabled?-1:0),e.ekj("disabled",re.disabled))},inputs:{disabled:"disabled"}}),Y})(),Gp=(()=>{class Y{constructor(I,re){this.dropdown=I,this.placement="bottom",this.isOpen=!1,this.nativeElement=re.nativeElement}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36((0,e.Gpc)(()=>hd)),e.Y36(e.SBq))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(I,re,Me){if(1&I&&e.Suo(Me,Hp,4),2&I){let Ge;e.iGM(Ge=e.CRH())&&(re.menuItems=Ge)}},hostVars:4,hostBindings:function(I,re){1&I&&e.NdJ("keydown.ArrowUp",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.ArrowDown",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Home",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.End",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Enter",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Space",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Tab",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Shift.Tab",function(Ge){return re.dropdown.onKeyDown(Ge)}),2&I&&e.ekj("dropdown-menu",!0)("show",re.dropdown.isOpen())}}),Y})(),Ah=(()=>{class Y{constructor(I,re){this.dropdown=I,this.nativeElement=re.nativeElement}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36((0,e.Gpc)(()=>hd)),e.Y36(e.SBq))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(I,re){2&I&&e.uIk("aria-expanded",re.dropdown.isOpen())}}),Y})(),em=(()=>{class Y extends Ah{constructor(I,re){super(I,re)}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36((0,e.Gpc)(()=>hd)),e.Y36(e.SBq))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(I,re){1&I&&e.NdJ("click",function(){return re.dropdown.toggle()})("keydown.ArrowUp",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.ArrowDown",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Home",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.End",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Tab",function(Ge){return re.dropdown.onKeyDown(Ge)})("keydown.Shift.Tab",function(Ge){return re.dropdown.onKeyDown(Ge)}),2&I&&e.uIk("aria-expanded",re.dropdown.isOpen())},features:[e._Bn([{provide:Ah,useExisting:(0,e.Gpc)(()=>Y)}]),e.qOj]}),Y})(),hd=(()=>{class Y{constructor(I,re,Me,Ge,Ht,yn,An){this._changeDetector=I,this._document=Me,this._ngZone=Ge,this._elementRef=Ht,this._renderer=yn,this._destroyCloseHandlers$=new ca.x,this._bodyContainer=null,this._positioning=function H1(){let Y=null;return{createPopper(Q){if(!Y){let re=(Q.updatePopperOptions||Y0)(q0(Q));Y=Bm(Q.hostElement,Q.targetElement,re)}},update(){Y&&Y.update()},setOptions(Q){if(Y){let re=(Q.updatePopperOptions||Y0)(q0(Q));Y.setOptions(re)}},destroy(){Y&&(Y.destroy(),Y=null)}}}(),this._open=!1,this.openChange=new e.vpe,this.placement=re.placement,this.container=re.container,this.autoClose=re.autoClose,this.display=An?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe((0,qs.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(I){if(I.container&&this._open&&this._applyContainer(this.container),I.placement&&!I.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),I.dropdownClass){const{currentValue:re,previousValue:Me}=I.dropdownClass;this._applyCustomDropdownClass(re,Me)}I.autoClose&&this._open&&(this.autoClose=I.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:G1([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),E1(this._ngZone,this._document,this.autoClose,I=>{this.close(),0===I&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(I){const re=I.which,Me=this._getMenuElements();let Ge=-1,Ht=null;const yn=this._isEventFromToggle(I);if(!yn&&Me.length&&Me.forEach((An,zn)=>{An.contains(I.target)&&(Ht=An),An===this._document.activeElement&&(Ge=zn)}),re!==Es.Space&&re!==Es.Enter){if(re!==Es.Tab){if(yn||Ht){if(this.open(),Me.length){switch(re){case Es.ArrowDown:Ge=Math.min(Ge+1,Me.length-1);break;case Es.ArrowUp:if(this._isDropup()&&-1===Ge){Ge=Me.length-1;break}Ge=Math.max(Ge-1,0);break;case Es.Home:Ge=0;break;case Es.End:Ge=Me.length-1}Me[Ge].focus()}I.preventDefault()}}else if(I.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===I.target)return void("body"!==this.container||I.shiftKey?I.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const An=this._menu.nativeElement.querySelectorAll(H0);I.shiftKey&&I.target===An[0]?(this._anchor.nativeElement.focus(),I.preventDefault()):!I.shiftKey&&I.target===An[An.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else As(I.target,"focusout").pipe((0,qs.q)(1)).subscribe(({relatedTarget:An})=>{this._elementRef.nativeElement.contains(An)||this.close()})}}else Ht&&(!0===this.autoClose||"inside"===this.autoClose)&&As(Ht,"click").pipe((0,qs.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(I){return this._anchor.nativeElement.contains(I.target)}_getMenuElements(){const I=this._menu;return null==I?[]:I.menuItems.filter(re=>!re.disabled).map(re=>re.elementRef.nativeElement)}_positionMenu(){const I=this._menu;this.isOpen()&&I&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(I){return Array.isArray(I)?I[0]:I.split(" ")[0]}_resetContainer(){const I=this._renderer;this._menu&&I.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(I.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(I=null){if(this._resetContainer(),"body"===I){const re=this._renderer,Me=this._menu.nativeElement,Ge=this._bodyContainer=this._bodyContainer||re.createElement("div");re.setStyle(Ge,"position","absolute"),re.setStyle(Me,"position","static"),re.setStyle(Ge,"z-index","1055"),re.appendChild(Ge,Me),re.appendChild(this._document.body,Ge)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(I,re){const Me="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;Me&&(re&&this._renderer.removeClass(Me,re),I&&this._renderer.addClass(Me,I))}_applyPlacementClasses(I){const re=this._menu;if(re){I||(I=this._getFirstPlacement(this.placement));const Me=this._renderer,Ge=this._elementRef.nativeElement;Me.removeClass(Ge,"dropup"),Me.removeClass(Ge,"dropdown");const{nativeElement:Ht}=re;"static"===this.display?(re.placement=null,Me.setAttribute(Ht,"data-bs-popper","static")):(re.placement=I,Me.removeAttribute(Ht,"data-bs-popper"));const yn=-1!==I.search("^top")?"dropup":"dropdown";Me.addClass(Ge,yn);const An=this._bodyContainer;An&&(Me.removeClass(An,"dropup"),Me.removeClass(An,"dropdown"),Me.addClass(An,yn))}}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.sBO),e.Y36(Q1),e.Y36(ie.K0),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(Q0,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","ngbDropdown",""]],contentQueries:function(I,re,Me){if(1&I&&(e.Suo(Me,Gp,5),e.Suo(Me,Ah,5)),2&I){let Ge;e.iGM(Ge=e.CRH())&&(re._menu=Ge.first),e.iGM(Ge=e.CRH())&&(re._anchor=Ge.first)}},hostVars:2,hostBindings:function(I,re){2&I&&e.ekj("show",re.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[e.TTD]}),Y})(),qp=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();class Vu{constructor(Q,I,re){this.nodes=Q,this.viewRef=I,this.componentRef=re}}let ev=(()=>{class Y{constructor(I,re){this._el=I,this._zone=re}ngOnInit(){this._zone.onStable.asObservable().pipe((0,qs.q)(1)).subscribe(()=>{ll(this._zone,this._el.nativeElement,(I,re)=>{re&&_f(I),I.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ll(this._zone,this._el.nativeElement,({classList:I})=>I.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq),e.Y36(e.R0b))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(I,re){2&I&&(e.Tol("modal-backdrop"+(re.backdropClass?" "+re.backdropClass:"")),e.ekj("show",!re.animation)("fade",re.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(I,re){},encapsulation:2}),Y})();class tm{close(Q){}dismiss(Q){}}class tv{constructor(Q,I,re,Me){this._windowCmptRef=Q,this._contentRef=I,this._backdropCmptRef=re,this._beforeDismiss=Me,this._closed=new ca.x,this._dismissed=new ca.x,this._hidden=new ca.x,Q.instance.dismissEvent.subscribe(Ge=>{this.dismiss(Ge)}),this.result=new Promise((Ge,Ht)=>{this._resolve=Ge,this._reject=Ht}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(_o(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(_o(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(Q){this._windowCmptRef&&(this._closed.next(Q),this._resolve(Q),this._removeModalElements())}_dismiss(Q){this._dismissed.next(Q),this._reject(Q),this._removeModalElements()}dismiss(Q){if(this._windowCmptRef)if(this._beforeDismiss){const I=this._beforeDismiss();!function E0(Y){return Y&&Y.then}(I)?!1!==I&&this._dismiss(Q):I.then(re=>{!1!==re&&this._dismiss(Q)},()=>{})}else this._dismiss(Q)}_removeModalElements(){const Q=this._windowCmptRef.instance.hide(),I=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Fi.of)(void 0);Q.subscribe(()=>{const{nativeElement:re}=this._windowCmptRef.location;re.parentNode.removeChild(re),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),I.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:re}=this._backdropCmptRef.location;re.parentNode.removeChild(re),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Lo(Q,I).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var pd=(()=>{return(Y=pd||(pd={}))[Y.BACKDROP_CLICK=0]="BACKDROP_CLICK",Y[Y.ESC=1]="ESC",pd;var Y})();let nv=(()=>{class Y{constructor(I,re,Me){this._document=I,this._elRef=re,this._zone=Me,this._closed$=new ca.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new e.vpe,this.shown=new ca.x,this.hidden=new ca.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Np(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(I){this.dismissEvent.emit(I)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,qs.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:I}=this._elRef,re={animation:this.animation,runningTransition:"stop"},Ht=Lo(ll(this._zone,I,()=>I.classList.remove("show"),re),ll(this._zone,this._dialogEl.nativeElement,()=>{},re));return Ht.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Ht}_show(){const I={animation:this.animation,runningTransition:"continue"};Lo(ll(this._zone,this._elRef.nativeElement,(Ge,Ht)=>{Ht&&_f(Ge),Ge.classList.add("show")},I),ll(this._zone,this._dialogEl.nativeElement,()=>{},I)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:I}=this._elRef;this._zone.runOutsideAngular(()=>{As(I,"keydown").pipe(_o(this._closed$),(0,gs.h)(Me=>Me.which===Es.Escape)).subscribe(Me=>{this.keyboard?requestAnimationFrame(()=>{Me.defaultPrevented||this._zone.run(()=>this.dismiss(pd.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let re=!1;As(this._dialogEl.nativeElement,"mousedown").pipe(_o(this._closed$),(0,yl.b)(()=>re=!1),(0,vl.w)(()=>As(I,"mouseup").pipe(_o(this._closed$),(0,qs.q)(1))),(0,gs.h)(({target:Me})=>I===Me)).subscribe(()=>{re=!0}),As(I,"click").pipe(_o(this._closed$)).subscribe(({target:Me})=>{I===Me&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!re&&this._zone.run(()=>this.dismiss(pd.BACKDROP_CLICK))),re=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:I}=this._elRef;if(!I.contains(document.activeElement)){const re=I.querySelector("[ngbAutofocus]"),Me=G0(I)[0];(re||Me||I).focus()}}_restoreFocus(){const I=this._document.body,re=this._elWithFocus;let Me;Me=re&&re.focus&&I.contains(re)?re:I,this._zone.runOutsideAngular(()=>{setTimeout(()=>Me.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ll(this._zone,this._elRef.nativeElement,({classList:I})=>(I.add("modal-static"),()=>I.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(ie.K0),e.Y36(e.SBq),e.Y36(e.R0b))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["ngb-modal-window"]],viewQuery:function(I,re){if(1&I&&e.Gf(pg,7),2&I){let Me;e.iGM(Me=e.CRH())&&(re._dialogEl=Me.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(I,re){2&I&&(e.uIk("aria-modal",!0)("aria-labelledby",re.ariaLabelledBy)("aria-describedby",re.ariaDescribedBy),e.Tol("modal d-block"+(re.windowClass?" "+re.windowClass:"")),e.ekj("fade",re.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:$m,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(I,re){1&I&&(e.F$t(),e.TgZ(0,"div",0,1)(2,"div",2),e.Hsn(3),e.qZA()()),2&I&&e.Tol("modal-dialog"+(re.size?" modal-"+re.size:"")+(re.centered?" modal-dialog-centered":"")+re.fullscreenClass+(re.scrollable?" modal-dialog-scrollable":"")+(re.modalDialogClass?" "+re.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),Y})(),rv=(()=>{class Y{constructor(I){this._document=I}hide(){const I=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),re=this._document.body,Me=re.style,{overflow:Ge,paddingRight:Ht}=Me;if(I>0){const yn=parseFloat(window.getComputedStyle(re).paddingRight);Me.paddingRight=`${yn+I}px`}return Me.overflow="hidden",()=>{I>0&&(Me.paddingRight=Ht),Me.overflow=Ge}}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(ie.K0))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),iv=(()=>{class Y{constructor(I,re,Me,Ge,Ht,yn){this._applicationRef=I,this._injector=re,this._document=Me,this._scrollBar=Ge,this._rendererFactory=Ht,this._ngZone=yn,this._activeWindowCmptHasChanged=new ca.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new e.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const An=this._windowCmpts[this._windowCmpts.length-1];((Y,Q,I,re=!1)=>{this._ngZone.runOutsideAngular(()=>{const Me=As(Q,"focusin").pipe(_o(I),(0,x.U)(Ge=>Ge.target));As(Q,"keydown").pipe(_o(I),(0,gs.h)(Ge=>Ge.which===Es.Tab),Cu(Me)).subscribe(([Ge,Ht])=>{const[yn,An]=G0(Q);(Ht===yn||Ht===Q)&&Ge.shiftKey&&(An.focus(),Ge.preventDefault()),Ht===An&&!Ge.shiftKey&&(yn.focus(),Ge.preventDefault())}),re&&As(Q,"click").pipe(_o(I),Cu(Me),(0,x.U)(Ge=>Ge[1])).subscribe(Ge=>Ge.focus())})})(0,An.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(An.location.nativeElement)}})}_restoreScrollBar(){const I=this._scrollBarRestoreFn;I&&(this._scrollBarRestoreFn=null,I())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(I,re,Me){const Ge=Me.container instanceof HTMLElement?Me.container:Fu(Me.container)?this._document.querySelector(Me.container):this._document.body,Ht=this._rendererFactory.createRenderer(null,null);if(!Ge)throw new Error(`The specified modal container "${Me.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const yn=new tm,An=this._getContentRef(Me.injector||I,re,yn,Me);let zn=!1!==Me.backdrop?this._attachBackdrop(Ge):void 0,lr=this._attachWindowComponent(Ge,An.nodes),fi=new tv(lr,An,zn,Me.beforeDismiss);return this._registerModalRef(fi),this._registerWindowCmpt(lr),fi.hidden.pipe((0,qs.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(Ht.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),yn.close=vi=>{fi.close(vi)},yn.dismiss=vi=>{fi.dismiss(vi)},this._applyWindowOptions(lr.instance,Me),1===this._modalRefs.length&&Ht.addClass(this._document.body,"modal-open"),zn&&zn.instance&&(this._applyBackdropOptions(zn.instance,Me),zn.changeDetectorRef.detectChanges()),lr.changeDetectorRef.detectChanges(),fi}get activeInstances(){return this._activeInstances}dismissAll(I){this._modalRefs.forEach(re=>re.dismiss(I))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(I){let re=(0,e.LMc)(ev,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(re.hostView),I.appendChild(re.location.nativeElement),re}_attachWindowComponent(I,re){let Me=(0,e.LMc)(nv,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:re});return this._applicationRef.attachView(Me.hostView),I.appendChild(Me.location.nativeElement),Me}_applyWindowOptions(I,re){this._windowAttributes.forEach(Me=>{Fu(re[Me])&&(I[Me]=re[Me])})}_applyBackdropOptions(I,re){this._backdropAttributes.forEach(Me=>{Fu(re[Me])&&(I[Me]=re[Me])})}_getContentRef(I,re,Me,Ge){return re?re instanceof e.Rgc?this._createFromTemplateRef(re,Me):Np(re)?this._createFromString(re):this._createFromComponent(I,re,Me,Ge):new Vu([])}_createFromTemplateRef(I,re){const Ge=I.createEmbeddedView({$implicit:re,close(Ht){re.close(Ht)},dismiss(Ht){re.dismiss(Ht)}});return this._applicationRef.attachView(Ge),new Vu([Ge.rootNodes],Ge)}_createFromString(I){const re=this._document.createTextNode(`${I}`);return new Vu([[re]])}_createFromComponent(I,re,Me,Ge){const Ht=e.zs3.create({providers:[{provide:tm,useValue:Me}],parent:I}),yn=(0,e.LMc)(re,{environmentInjector:this._applicationRef.injector,elementInjector:Ht}),An=yn.location.nativeElement;return Ge.scrollable&&An.classList.add("component-host-scrollable"),this._applicationRef.attachView(yn.hostView),new Vu([[An]],yn.hostView,yn)}_setAriaHidden(I){const re=I.parentElement;re&&I!==this._document.body&&(Array.from(re.children).forEach(Me=>{Me!==I&&"SCRIPT"!==Me.nodeName&&(this._ariaHiddenValues.set(Me,Me.getAttribute("aria-hidden")),Me.setAttribute("aria-hidden","true"))}),this._setAriaHidden(re))}_revertAriaHidden(){this._ariaHiddenValues.forEach((I,re)=>{I?re.setAttribute("aria-hidden",I):re.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(I){const re=()=>{const Me=this._modalRefs.indexOf(I);Me>-1&&(this._modalRefs.splice(Me,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(I),this._activeInstances.emit(this._modalRefs),I.result.then(re,re)}_registerWindowCmpt(I){this._windowCmpts.push(I),this._activeWindowCmptHasChanged.next(),I.onDestroy(()=>{const re=this._windowCmpts.indexOf(I);re>-1&&(this._windowCmpts.splice(re,1),this._activeWindowCmptHasChanged.next())})}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(e.z2F),e.LFG(e.zs3),e.LFG(ie.K0),e.LFG(rv),e.LFG(e.FYo),e.LFG(e.R0b))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),av=(()=>{class Y{constructor(I){this._ngbConfig=I,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(I){this._animation=I}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(bh))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),ov=(()=>{class Y{constructor(I,re,Me){this._injector=I,this._modalStack=re,this._config=Me}open(I,re={}){const Me={...this._config,animation:this._config.animation,...re};return this._modalStack.open(this._injector,I,Me)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(I){this._modalStack.dismissAll(I)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(e.zs3),e.LFG(iv),e.LFG(av))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})(),nm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[ov]}),Y})(),om=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),pm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),gm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),vm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),ym=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),_m=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),bm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),xm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();new e.OlP("live announcer delay",{providedIn:"root",factory:function _v(){return 100}});let wm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[ie.ez]}),Y})(),Tm=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})();const bv=[N0,F0,j0,V0,K0,qp,nm,om,Tm,pm,gm,vm,ym,_m,bm,xm,wm];let xv=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[bv,N0,F0,j0,V0,K0,qp,nm,om,Tm,pm,gm,vm,ym,_m,bm,xm,wm]}),Y})();class wv{constructor(Q,I){this._document=I;const re=this._textarea=this._document.createElement("textarea"),Me=re.style;Me.position="fixed",Me.top=Me.opacity="0",Me.left="-999em",re.setAttribute("aria-hidden","true"),re.value=Q,re.readOnly=!0,this._document.body.appendChild(re)}copy(){const Q=this._textarea;let I=!1;try{if(Q){const re=this._document.activeElement;Q.select(),Q.setSelectionRange(0,Q.value.length),I=this._document.execCommand("copy"),re&&re.focus()}}catch{}return I}destroy(){const Q=this._textarea;Q&&(Q.remove(),this._textarea=void 0)}}let Tv=(()=>{class Y{constructor(I){this._document=I}copy(I){const re=this.beginCopy(I),Me=re.copy();return re.destroy(),Me}beginCopy(I){return new wv(I,this._document)}}return Y.\u0275fac=function(I){return new(I||Y)(e.LFG(ie.K0))},Y.\u0275prov=e.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();const Mv=new e.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");let kv=(()=>{class Y{constructor(I,re,Me){this._clipboard=I,this._ngZone=re,this.text="",this.attempts=1,this.copied=new e.vpe,this._pending=new Set,Me&&null!=Me.attempts&&(this.attempts=Me.attempts)}copy(I=this.attempts){if(I>1){let re=I;const Me=this._clipboard.beginCopy(this.text);this._pending.add(Me);const Ge=()=>{const Ht=Me.copy();Ht||!--re||this._destroyed?(this._currentTimeout=null,this._pending.delete(Me),Me.destroy(),this.copied.emit(Ht)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(Ge,1))};Ge()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(I=>I.destroy()),this._pending.clear(),this._destroyed=!0}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(Tv),e.Y36(e.R0b),e.Y36(Mv,8))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(I,re){1&I&&e.NdJ("click",function(){return re.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),Y})(),Av=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({}),Y})(),Cv=(()=>{class Y{constructor(I){this.el=I,this.regex=new RegExp(/^\-?\d*\.?\d*$/g),this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(I){if(console.log(this.el.nativeElement.value),-1!==this.specialKeys.indexOf(I.key))return;let re=this.el.nativeElement.value;const Me=this.el.nativeElement.selectionStart,Ge=[re.slice(0,Me),"Decimal"==I.key?"-":I.key,re.slice(Me)].join("");Ge&&!String(Ge).match(this.regex)&&I.preventDefault()}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(e.SBq))},Y.\u0275dir=e.lG2({type:Y,selectors:[["","appDecimalNumber",""]],hostBindings:function(I,re){1&I&&e.NdJ("keydown",function(Ge){return re.onKeyDown(Ge)})}}),Y})();function Sv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",11),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw();return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Ev(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,Sv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function Dv(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Ev,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij("Matriz ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function Ov(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Controlabilidade e Observabilidade "),e.qZA()(),e.TgZ(5,"h3"),e._uU(6),e.qZA(),e.TgZ(7,"h3"),e._uU(8),e.qZA()(),e.TgZ(9,"mat-expansion-panel",6)(10,"mat-expansion-panel-header")(11,"mat-panel-title"),e._uU(12," Din\xe2mica da planta "),e.qZA()(),e.TgZ(13,"mat-expansion-panel",6)(14,"mat-expansion-panel-header")(15,"mat-panel-title"),e._uU(16," Sa\xeddas "),e.qZA()(),e._UZ(17,"plotly-plot",12),e.qZA()(),e.TgZ(18,"mat-expansion-panel",13)(19,"mat-expansion-panel-header")(20,"mat-panel-title"),e._uU(21," Escolha do Controlador "),e.qZA()(),e.TgZ(22,"div",14)(23,"div",15)(24,"div",16)(25,"button",17),e._uU(26,"Escolha o controlador"),e.qZA(),e.TgZ(27,"div",18)(28,"button",19),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.costMatrixLqr())}),e._uU(29,"LQR"),e.qZA(),e.TgZ(30,"button",19),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.costMatrixLqi())}),e._uU(31,"LQR + Integrador"),e.qZA(),e.TgZ(32,"button",19),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.costMatrixLqg())}),e._uU(33,"LQG"),e.qZA(),e.TgZ(34,"button",19),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.costMatrixLqgi())}),e._uU(35,"LQG + Integrador"),e.qZA()()()()()()()}if(2&Y){const I=e.oxw();e.xp6(6),e.Oqu(I.control_rank),e.xp6(2),e.Oqu(I.obsv_rank),e.xp6(9),e.Q6J("data",I.stepMA[0])("layout",I.graph.layout)}}function Lv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Iv(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,Lv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function Pv(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Condi\xe7\xf5es Iniciais"),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Iv,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(4),e.Q6J("ngForOf",I.values)}}function Rv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Nv(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,Rv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function Fv(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Nv,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij("Matriz ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function zv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Resposta para controlador LQR "),e.qZA()(),e.TgZ(5,"mat-expansion-panel",6)(6,"mat-expansion-panel-header")(7,"mat-panel-title"),e._uU(8," Sa\xedda "),e.qZA()(),e._UZ(9,"plotly-plot",12),e.qZA(),e.TgZ(10,"mat-expansion-panel",6)(11,"mat-expansion-panel-header")(12,"mat-panel-title"),e._uU(13," Sinal de Controle "),e.qZA()(),e._UZ(14,"plotly-plot",12),e.qZA(),e.TgZ(15,"mat-expansion-panel",21)(16,"mat-expansion-panel-header")(17,"mat-panel-title"),e._uU(18," Exibir C\xf3digo "),e.qZA()(),e.TgZ(19,"code",22),e._uU(20),e.qZA(),e.TgZ(21,"button",23),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw(2);return e.KtG(Me.codeCopied())}),e._uU(22,"Copiar c\xf3digo"),e.qZA()()()()}if(2&Y){const I=e.oxw(2);e.xp6(9),e.Q6J("data",I.yLQR[0])("layout",I.graphCI.layout),e.xp6(5),e.Q6J("data",I.uLQR[0])("layout",I.graphCI.layout),e.xp6(6),e.Oqu(I.codes.lqr),e.xp6(1),e.Q6J("cdkCopyToClipboard",I.codes.lqr)}}function Bv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Definir Matrizes de Custo "),e.qZA()(),e.YNc(5,Pv,5,1,"div",7),e.YNc(6,Fv,5,2,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.calc_lqr())}),e._uU(8,"Calcular"),e.qZA()(),e.YNc(9,zv,23,6,"div",9),e.qZA()}if(2&Y){const I=e.oxw();e.xp6(5),e.Q6J("ngForOf",I.initialCond),e.xp6(1),e.Q6J("ngForOf",I.matriz_custo),e.xp6(3),e.Q6J("ngIf",I.panelCalc_lqr)}}function jv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Vv(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,jv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function Uv(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Condi\xe7\xf5es Iniciais"),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Vv,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(4),e.Q6J("ngForOf",I.values)}}function Hv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Gv(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,Hv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function qv(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Gv,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij("Matriz ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function Yv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Resposta para controlador LQI "),e.qZA()(),e.TgZ(5,"mat-expansion-panel",6)(6,"mat-expansion-panel-header")(7,"mat-panel-title"),e._uU(8," Sa\xedda "),e.qZA()(),e._UZ(9,"plotly-plot",12),e.qZA(),e.TgZ(10,"mat-expansion-panel",6)(11,"mat-expansion-panel-header")(12,"mat-panel-title"),e._uU(13," Sinal de Controle "),e.qZA()(),e._UZ(14,"plotly-plot",12),e.qZA(),e.TgZ(15,"mat-expansion-panel",21)(16,"mat-expansion-panel-header")(17,"mat-panel-title"),e._uU(18," Exibir C\xf3digo "),e.qZA()(),e.TgZ(19,"code",22),e._uU(20),e.qZA(),e.TgZ(21,"button",23),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw(2);return e.KtG(Me.codeCopied())}),e._uU(22,"Copiar c\xf3digo"),e.qZA()()()()}if(2&Y){const I=e.oxw(2);e.xp6(9),e.Q6J("data",I.yLQI[0])("layout",I.graphCI.layout),e.xp6(5),e.Q6J("data",I.uLQI[0])("layout",I.graphCI.layout),e.xp6(6),e.Oqu(I.codes.lqi),e.xp6(1),e.Q6J("cdkCopyToClipboard",I.codes.lqi)}}function Zv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Definir Matrizes de Custo "),e.qZA()(),e.YNc(5,Uv,5,1,"div",7),e.YNc(6,qv,5,2,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.calc_lqi())}),e._uU(8,"Calcular"),e.qZA()(),e.YNc(9,Yv,23,6,"div",9),e.qZA()}if(2&Y){const I=e.oxw();e.xp6(5),e.Q6J("ngForOf",I.initialCond),e.xp6(1),e.Q6J("ngForOf",I.matriz_custo),e.xp6(3),e.Q6J("ngIf",I.panelCalc_lqi)}}function Wv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Xv(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,Wv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function $v(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Condi\xe7\xf5es Iniciais"),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Xv,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(4),e.Q6J("ngForOf",I.values)}}function Jv(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function Kv(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,Jv,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function Qv(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,Kv,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij("Matriz ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function ey(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function ty(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,ey,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function ny(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,ty,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij(" ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function ry(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Resposta para controlador LQG "),e.qZA()(),e.TgZ(5,"mat-expansion-panel",6)(6,"mat-expansion-panel-header")(7,"mat-panel-title"),e._uU(8," Sa\xedda "),e.qZA()(),e._UZ(9,"plotly-plot",12),e.qZA(),e.TgZ(10,"mat-expansion-panel",6)(11,"mat-expansion-panel-header")(12,"mat-panel-title"),e._uU(13," Sinal de Controle "),e.qZA()(),e._UZ(14,"plotly-plot",12),e.qZA(),e.TgZ(15,"mat-expansion-panel",21)(16,"mat-expansion-panel-header")(17,"mat-panel-title"),e._uU(18," Exibir C\xf3digo "),e.qZA()(),e.TgZ(19,"code",22),e._uU(20),e.qZA(),e.TgZ(21,"button",23),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw(2);return e.KtG(Me.codeCopied())}),e._uU(22,"Copiar c\xf3digo"),e.qZA()()()()}if(2&Y){const I=e.oxw(2);e.xp6(9),e.Q6J("data",I.yLQG[0])("layout",I.graphCI.layout),e.xp6(5),e.Q6J("data",I.uLQG[0])("layout",I.graphCI.layout),e.xp6(6),e.Oqu(I.codes.lqg),e.xp6(1),e.Q6J("cdkCopyToClipboard",I.codes.lqg)}}function iy(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Definir Matrizes de Custo e Condi\xe7\xf5es Iniciais "),e.qZA()(),e.YNc(5,$v,5,1,"div",7),e.YNc(6,Qv,5,2,"div",7),e.YNc(7,ny,5,2,"div",7),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.calc_lqg())}),e._uU(9,"Calcular"),e.qZA()(),e.YNc(10,ry,23,6,"div",9),e.qZA()}if(2&Y){const I=e.oxw();e.xp6(5),e.Q6J("ngForOf",I.initialCond),e.xp6(1),e.Q6J("ngForOf",I.matriz_custo),e.xp6(1),e.Q6J("ngForOf",I.matriz_kalman),e.xp6(3),e.Q6J("ngIf",I.panelCalc_lqg)}}function ay(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function oy(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,ay,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function sy(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Condi\xe7\xf5es Iniciais"),e.qZA(),e.TgZ(3,"table"),e.YNc(4,oy,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(4),e.Q6J("ngForOf",I.values)}}function ly(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit;return e.oxw(2).matrizVaueChange(An,yn,Ht,Me),e.KtG(Me.stopImmediatePropagation())}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function cy(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,ly,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function uy(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,cy,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij("Matriz ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function fy(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"td")(1,"input",20),e.NdJ("blur",function(Me){const Ht=e.CHM(I).index,yn=e.oxw().index,An=e.oxw().$implicit,zn=e.oxw(2);return e.KtG(zn.matrizVaueChange(An,yn,Ht,Me))}),e.qZA()()}if(2&Y){const I=Q.$implicit,re=Q.index,Me=e.oxw().index;e.xp6(1),e.hYB("id","cell_",Me,"_",re,""),e.s9C("value",I)}}function dy(Y,Q){if(1&Y&&(e.TgZ(0,"tr"),e.YNc(1,fy,2,3,"td",10),e.qZA()),2&Y){const I=Q.$implicit,re=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",I)("ngForTrackBy",re.trackByFilter)}}function hy(Y,Q){if(1&Y&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"table"),e.YNc(4,dy,2,2,"tr",7),e.qZA()()),2&Y){const I=Q.$implicit;e.xp6(2),e.hij(" ",I.label,""),e.xp6(2),e.Q6J("ngForOf",I.values)}}function py(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Resposta para controlador LQG com integrador "),e.qZA()(),e.TgZ(5,"mat-expansion-panel",6)(6,"mat-expansion-panel-header")(7,"mat-panel-title"),e._uU(8," Sa\xedda "),e.qZA()(),e._UZ(9,"plotly-plot",12),e.qZA(),e.TgZ(10,"mat-expansion-panel",6)(11,"mat-expansion-panel-header")(12,"mat-panel-title"),e._uU(13," Sinal de Controle "),e.qZA()(),e._UZ(14,"plotly-plot",12),e.qZA(),e.TgZ(15,"mat-expansion-panel",21)(16,"mat-expansion-panel-header")(17,"mat-panel-title"),e._uU(18," Exibir C\xf3digo "),e.qZA()(),e.TgZ(19,"code",22),e._uU(20),e.qZA(),e.TgZ(21,"button",23),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw(2);return e.KtG(Me.codeCopied())}),e._uU(22,"Copiar c\xf3digo"),e.qZA()()()()}if(2&Y){const I=e.oxw(2);e.xp6(9),e.Q6J("data",I.yLQGI[0])("layout",I.graphCI.layout),e.xp6(5),e.Q6J("data",I.uLQGI[0])("layout",I.graphCI.layout),e.xp6(6),e.Oqu(I.codes.lqgi),e.xp6(1),e.Q6J("cdkCopyToClipboard",I.codes.lqgi)}}function my(Y,Q){if(1&Y){const I=e.EpF();e.TgZ(0,"div")(1,"mat-expansion-panel",6)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Definir Matrizes de Custo e Condi\xe7\xf5es Iniciais "),e.qZA()(),e.YNc(5,sy,5,1,"div",7),e.YNc(6,uy,5,2,"div",7),e.YNc(7,hy,5,2,"div",7),e.TgZ(8,"button",8),e.NdJ("click",function(){e.CHM(I);const Me=e.oxw();return e.KtG(Me.calc_lqgi())}),e._uU(9,"Calcular"),e.qZA()(),e.YNc(10,py,23,6,"div",9),e.qZA()}if(2&Y){const I=e.oxw();e.xp6(5),e.Q6J("ngForOf",I.initialCond),e.xp6(1),e.Q6J("ngForOf",I.matriz_custo),e.xp6(1),e.Q6J("ngForOf",I.matriz_kalman),e.xp6(3),e.Q6J("ngIf",I.panelCalc_lqgi)}}let gy=(()=>{class Y{constructor(I,re){this.timeControllerDomainService=I,this.http=re,this.Nstates=1,this.quadN=2,this.inL=1,this.outM=1,this.matrizes=[new g("A"),new g("B"),new g("C")],this.matriz_custo=[new g("Q"),new g("R")],this.matriz_kalman=[new g("QN"),new g("RN")],this.initialCond=[new g("CI")],this.graphData=[],this.graph={data:this.graphData,layout:this.layout()},this.graphCI={data:this.graphData,layout:this.layout_CI()},this.control_rank="",this.obsv_rank="",this.vY=[],this.yLQR=[],this.yLQI=[],this.yLQG=[],this.yLQGI=[],this.y_lqr=[],this.y_lqi=[],this.y_lqg=[],this.y_lqgi=[],this.y_enc=[],this.u_enc=[],this.uLQR=[],this.uLQI=[],this.uLQG=[],this.uLQGI=[],this.u_lqr=[],this.u_lqi=[],this.u_lqg=[],this.u_lqgi=[],this.stepMA=[],this.panelMA=!1,this.panelCostMatrixLQR=!1,this.panelCostMatrixLQI=!1,this.panelCostMatrixLQG=!1,this.panelCostMatrixLQGI=!1,this.panelCalc_lqr=!1,this.panelCalc_lqi=!1,this.panelCalc_lqg=!1,this.panelCalc_lqgi=!1,this.lineNameIndex=0,this.codes={},this.Nx=0,this.Ny=0,this.Nu=0,this.T=0,this.K=[],this.Ki=[],this.L=[],this.createTables()}ngOnInit(){console.log("Loading app - time-controller-domain")}createTables(){this.quadN<2&&(this.quadN=2),this.inL<1&&(this.inL=1),this.outM<1&&(this.outM=1);for(let I=0;I<this.matrizes.length;I++){const re=this.matrizes[I];"A"===re.label&&(re.lines=this.quadN,re.cols=this.quadN),"B"===re.label&&(re.lines=this.quadN,re.cols=this.inL),"C"===re.label&&(re.lines=this.outM,re.cols=this.quadN),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz.values",re.values)}}matrizVaueChange(I,re,Me,Ge){I.values[re][Me]=Ge.target.value,console.log("matyz.values",I.values)}trackByFilter(I,re){return re.id}calc_lqr(){this.panelCalc_lqr=!0,this.panelCalc_lqi=!1,this.panelCalc_lqg=!1,this.panelCalc_lqgi=!1;const I={A:this.matrizes[0].values,B:this.matrizes[1].values,C:this.matrizes[2].values,Q:this.matriz_custo[0].values,R:this.matriz_custo[1].values,CI:this.initialCond[0].values};console.log("Matriz_custo_lqr:",I),this.timeControllerDomainService.calc_lqr(I).then(re=>{console.log(re),this.Nx=JSON.parse(re.Nx),this.Ny=JSON.parse(re.Ny),this.Nu=JSON.parse(re.Nu),this.T=JSON.parse(re.T),this.K=JSON.parse(re.K),this.yLQR=[],this.uLQR=[],this.u_enc=re.Uhat,this.u_lqr=JSON.parse(this.u_enc),this.y_enc=re.Yout,this.y_lqr=JSON.parse(this.y_enc);const Me=re.time;var Ge=[];for(let zn=0;zn<this.u_lqr.length;zn++)Ge.push({x:Me,y:this.u_lqr[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`u${zn+1}`});this.graphCI={data:Ge,layout:this.layout_CI()},this.uLQR.push(this.graphCI.data),console.log("uLQR",this.uLQR),console.log("graph.data",this.graphCI.data);var yn=[];for(let zn=0;zn<this.y_lqr.length;zn++)yn.push({x:Me,y:this.y_lqr[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`y${zn+1}`});this.graphCI={data:yn,layout:this.layout_CI()},this.yLQR.push(this.graphCI.data),console.log("yLQR",this.yLQR),console.log("graph.data",this.graphCI.data),this.codes.lqr=this.getCodeLQR(I,re)})}calc_lqi(){this.panelCalc_lqi=!0,this.panelCalc_lqr=!1,this.panelCalc_lqg=!1,this.panelCalc_lqgi=!1;const I={A:this.matrizes[0].values,B:this.matrizes[1].values,C:this.matrizes[2].values,Q:this.matriz_custo[0].values,R:this.matriz_custo[1].values,CI:this.initialCond[0].values};console.log("Matriz_custo_lqi:",I),this.timeControllerDomainService.calc_lqi(I).then(re=>{console.log(re),this.Nx=JSON.parse(re.Nx),this.Ny=JSON.parse(re.Ny),this.Nu=JSON.parse(re.Nu),this.T=JSON.parse(re.T),this.K=JSON.parse(re.K),this.Ki=JSON.parse(re.Ki),this.yLQI=[],this.uLQI=[],this.u_enc=re.Uhat,this.u_lqi=JSON.parse(this.u_enc),console.log("u_lqi",this.u_lqi),this.y_enc=re.Yout,this.y_lqi=JSON.parse(this.y_enc),console.log("y_lqi:",this.y_lqi);const Me=re.time;var Ge=[];for(let zn=0;zn<this.u_lqi.length;zn++)Ge.push({x:Me,y:this.u_lqi[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`u${zn+1}`});this.graphCI={data:Ge,layout:this.layout_CI()},this.uLQI.push(this.graphCI.data),console.log("uLQI",this.uLQI);var yn=[];for(let zn=0;zn<this.y_lqi.length;zn++)yn.push({x:Me,y:this.y_lqi[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`y${zn+1}`});this.graphCI={data:yn,layout:this.layout_CI()},this.yLQI.push(this.graphCI.data),console.log("yLQI",this.yLQI),this.codes.lqi=this.getCodeLQI(I,re)})}calc_lqg(){this.panelCalc_lqg=!0,this.panelCalc_lqr=!1,this.panelCalc_lqi=!1,this.panelCalc_lqgi=!1;const I={A:this.matrizes[0].values,B:this.matrizes[1].values,C:this.matrizes[2].values,CI:this.initialCond[0].values,Q:this.matriz_custo[0].values,R:this.matriz_custo[1].values,QN:this.matriz_kalman[0].values,RN:this.matriz_kalman[1].values};console.log("Matriz_custo_lqg:",I),this.timeControllerDomainService.calc_lqg(I).then(re=>{console.log(re),this.Nx=JSON.parse(re.Nx),this.Ny=JSON.parse(re.Ny),this.Nu=JSON.parse(re.Nu),this.T=JSON.parse(re.T),this.K=JSON.parse(re.K),this.L=JSON.parse(re.L),this.yLQG=[],this.uLQG=[],this.u_enc=re.Uhat,this.u_lqg=JSON.parse(this.u_enc),console.log("u_lqg",this.u_lqg),this.y_enc=re.Yout,this.y_lqg=JSON.parse(this.y_enc),console.log("y_lqg:",this.y_lqg);const Me=re.time;var Ge=[];for(let zn=0;zn<this.y_lqg.length;zn++)Ge.push({x:Me,y:this.y_lqg[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`y${zn+1}`});this.graphCI={data:Ge,layout:this.layout_CI()},this.yLQG.push(this.graphCI.data),console.log("yLQG",this.yLQG);var yn=[];for(let zn=0;zn<this.u_lqg.length;zn++)yn.push({x:Me,y:this.u_lqg[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`u${zn+1}`});this.graphCI={data:yn,layout:this.layout_CI()},this.uLQG.push(this.graphCI.data),console.log("uLQG",this.uLQG),this.codes.lqg=this.getCodeLQG(I,re)})}calc_lqgi(){this.panelCalc_lqgi=!0,this.panelCalc_lqr=!1,this.panelCalc_lqi=!1,this.panelCalc_lqg=!1;const I={A:this.matrizes[0].values,B:this.matrizes[1].values,C:this.matrizes[2].values,CI:this.initialCond[0].values,Q:this.matriz_custo[0].values,R:this.matriz_custo[1].values,QN:this.matriz_kalman[0].values,RN:this.matriz_kalman[1].values};console.log("Matriz_custo_lqgi:",I),this.timeControllerDomainService.calc_lqgi(I).then(re=>{console.log(re),this.Nx=JSON.parse(re.Nx),this.Ny=JSON.parse(re.Ny),this.Nu=JSON.parse(re.Nu),this.T=JSON.parse(re.T),this.K=JSON.parse(re.K),this.Ki=JSON.parse(re.Ki),this.L=JSON.parse(re.L),this.yLQGI=[],this.uLQGI=[],this.u_enc=re.Uhat,this.u_lqgi=JSON.parse(this.u_enc),console.log("u_lqgi",this.u_lqgi),this.y_enc=re.Yout,this.y_lqgi=JSON.parse(this.y_enc),console.log("y_lqgi:",this.y_lqgi);const Me=re.time;var Ge=[];for(let zn=0;zn<this.y_lqgi.length;zn++)Ge.push({x:Me,y:this.y_lqgi[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`y${zn+1}`});this.graphCI={data:Ge,layout:this.layout_CI()},this.yLQGI.push(this.graphCI.data),console.log("yLQGI",this.yLQGI);var yn=[];for(let zn=0;zn<this.u_lqgi.length;zn++)yn.push({x:Me,y:this.u_lqgi[zn],mode:"lines",type:"scatter",connectgaps:!0,name:`u${zn+1}`});this.graphCI={data:yn,layout:this.layout_CI()},this.uLQGI.push(this.graphCI.data),console.log("uLQGI",this.uLQGI),this.codes.lqgi=this.getCodeLQGI(I,re),console.log("codes: ",this.codes)},re=>{console.log(re),y().fire({title:"Algoritmo n\xe3o converge",text:"Resintonizar as matrizes Q e/ou R!",icon:"warning"})})}calc(){this.panelMA=!0;for(let re=0;re<this.matrizes.length;re++)console.log("Calcular matrix ",this.matrizes[re].label,this.matrizes[re].values);const I={A:this.matrizes[0].values,B:this.matrizes[1].values,C:this.matrizes[2].values};console.log("Input :: ",I),this.timeControllerDomainService.calcStep(I).then(re=>{console.log(re),this.control_rank=re.control_rank,this.obsv_rank=re.obsv_rank,console.log(this.obsv_rank),this.stepMA=[],this.vY=re.outY_total,console.log("vY:",this.vY);const Me=re.time;var Ge=[];this.lineNameIndex=0;let Ht=0;for(let An=0;An<this.vY.length;An++){var yn={x:Me,y:this.vY[An],mode:"lines",type:"scatter",connectgaps:!0,name:this.getLineName(An+1,Ht)};Ge.push(yn),this.lineNameIndex==this.outM&&(this.lineNameIndex=0,this.outM>this.inL&&(Ht+=this.outM-this.inL),1==this.outM?Ht=0:Ht++)}this.graph={data:Ge,layout:this.layout()},this.stepMA.push(this.graph.data),console.log("graph.data",this.graph.data)},re=>{console.log(re),y().fire("Algoritmo n\xe3o converge. \nResintonizar as matrizes Q e/ou R!")})}getLineName(I,re){return`De u${I-this.lineNameIndex-re} para y${++this.lineNameIndex}`}layout(){return this.layout_title("Resposta ao degrau unit\xe1rio")}layout_title(I){return{title:I,titlefont:{family:"Arial, sans-serif",size:12,color:"black"},xaxis:{title:"Tempo",titlefont:{family:"Arial, sans-serif",size:12,color:"black"},showticklabels:!0,tickangle:"auto",tickfont:{family:"Old Standard TT, serif",size:12,color:"black"}},yaxis:{title:"Amplitude",titlefont:{family:"Arial, sans-serif",size:12,color:"black"},showticklabels:!0,tickangle:45,tickfont:{family:"Old Standard TT, serif",size:12,color:"black"},exponentformat:"e",showexponent:"all"}}}layout_CI(){return this.layout_title_CI("Resposta \xe0 condi\xe7\xe3o inicial")}layout_title_CI(I){return{title:I,titlefont:{family:"Arial, sans-serif",size:12,color:"black"},xaxis:{title:"Tempo",titlefont:{family:"Arial, sans-serif",size:12,color:"black"},showticklabels:!0,tickangle:"auto",tickfont:{family:"Old Standard TT, serif",size:12,color:"black"}},yaxis:{title:"Amplitude",titlefont:{family:"Arial, sans-serif",size:12,color:"black"},showticklabels:!0,tickangle:45,tickfont:{family:"Old Standard TT, serif",size:12,color:"black"},exponentformat:"e",showexponent:"all"}}}costMatrixLqr(){this.panelCostMatrixLQR=!0,this.panelCostMatrixLQI=!1,this.panelCostMatrixLQG=!1,this.panelCostMatrixLQGI=!1;for(let I=0;I<this.initialCond.length;I++){const re=this.initialCond[I];"CI"===re.label&&(re.lines=1,re.cols=this.quadN);for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0}for(let I=0;I<this.matriz_custo.length;I++){const re=this.matriz_custo[I];"CI"===re.label&&(re.lines=1,re.cols=this.quadN),"Q"===re.label&&(re.lines=this.quadN,re.cols=this.quadN),"R"===re.label&&(re.lines=this.inL,re.cols=this.inL),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz_custo:",this.matriz_custo),console.log("myLQR:",re)}}costMatrixLqi(){this.panelCostMatrixLQI=!0,this.panelCostMatrixLQR=!1,this.panelCostMatrixLQG=!1,this.panelCostMatrixLQGI=!1;for(let I=0;I<this.initialCond.length;I++){const re=this.initialCond[I];"CI"===re.label&&(re.lines=1,re.cols=this.quadN);for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0}for(let I=0;I<this.matriz_custo.length;I++){const re=this.matriz_custo[I];"CI"===re.label&&(re.lines=1,re.cols=this.quadN),"Q"===re.label&&(this.inL===this.outM?(re.lines=this.quadN+this.inL,re.cols=this.quadN+this.inL):this.inL<this.outM?(re.lines=this.quadN+this.outM,re.cols=this.quadN+this.outM):(re.lines=this.quadN+1,re.cols=this.quadN+1)),"R"===re.label&&(re.lines=this.inL,re.cols=this.inL),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz_custo:",this.matriz_custo),console.log("myLQI:",re)}}costMatrixLqg(){this.panelCostMatrixLQG=!0,this.panelCostMatrixLQR=!1,this.panelCostMatrixLQI=!1,this.panelCostMatrixLQGI=!1;for(let I=0;I<this.initialCond.length;I++){const re=this.initialCond[I];"CI"===re.label&&(re.lines=1,re.cols=this.quadN);for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0}for(let I=0;I<this.matriz_custo.length;I++){const re=this.matriz_custo[I];"Q"===re.label&&(re.lines=this.quadN,re.cols=this.quadN),"R"===re.label&&(re.lines=this.inL,re.cols=this.inL),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz_custo:",this.matriz_custo),console.log("myLQG:",re)}for(let I=0;I<this.matriz_kalman.length;I++){const re=this.matriz_kalman[I];"QN"===re.label&&(re.lines=this.inL,re.cols=this.inL),"RN"===re.label&&(re.lines=this.outM,re.cols=this.outM),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz_kalman:",this.matriz_kalman),console.log("myLQG:",re)}}costMatrixLqgi(){this.panelCostMatrixLQGI=!0,this.panelCostMatrixLQR=!1,this.panelCostMatrixLQI=!1,this.panelCostMatrixLQG=!1;for(let I=0;I<this.initialCond.length;I++){const re=this.initialCond[I];"CI"===re.label&&(re.lines=1,re.cols=this.quadN);for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0}for(let I=0;I<this.matriz_custo.length;I++){const re=this.matriz_custo[I];"Q"===re.label&&(this.inL===this.outM?(re.lines=this.quadN+this.inL,re.cols=this.quadN+this.inL):this.inL<this.outM?(re.lines=this.quadN+this.outM,re.cols=this.quadN+this.outM):(re.lines=this.quadN+1,re.cols=this.quadN+1)),"R"===re.label&&(re.lines=this.inL,re.cols=this.inL),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz_custo:",this.matriz_custo),console.log("myLQGI:",re)}for(let I=0;I<this.matriz_kalman.length;I++){const re=this.matriz_kalman[I];"QN"===re.label&&(re.lines=this.inL,re.cols=this.inL),"RN"===re.label&&(re.lines=this.outM,re.cols=this.outM),re.values=Array.from(Array(re.lines),()=>new Array(re.cols));for(let Me=0;Me<re.lines;Me++)for(let Ge=0;Ge<re.cols;Ge++)re.values[Me][Ge]=0;console.log("matriz_kalman:",this.matriz_kalman),console.log("myLQG:",re)}}codeCopied(){y().fire({position:"center",icon:"success",text:"Seu c\xf3digo foi copiado!",showConfirmButton:!1,timer:1500})}getCodeLQR(I,re){return`\n// *********************************************** //\n//   C\xf3digo gerado por EasyController for Arduino  //\n//              www.easycontroller.com             //\n// Usar com Arduinos baseados em processadores AVR //\n// *********************************************** //\n\n#include <TimerOne.h>\n#include <BasicLinearAlgebra.h>\n\nusing namespace BLA;\n\n\n// Declara\xe7\xe3o das vari\xe1veis de leitura\n#define Nx ${this.Nx}        // Ordem da planta\n#define Nu ${this.Nu}        // N\xfamero de sinais de controle\n#define T  ${this.T}         // Per\xedodo de amostragem [s]\n\n// Inicializa\xe7\xe3o dos vetores e matrizes\n  // Matriz de ganhos (modificar aqui)\n    BLA::Matrix<Nu, Nx> K = {${this.K}};\n  // Vetor de estados (modificar condi\xe7\xf5es inicias, se necess\xe1rio)\n    BLA::Matrix<Nx> x = {${I.CI}};\n  // Vetor de sinais de controle\n    BLA::Matrix<Nu> u;\n  // Vetor de PWM dos sinais de controle\n    BLA::Matrix<Nu> u_pwm;\n  // Satura\xe7\xe3o superior do sinal de controle (modificar aqui)\n    BLA::Matrix<Nu> lim_sup = {1 , 1};\n  // Satura\xe7\xe3o inferior do sinal de controle (modificar aqui)\n    BLA::Matrix<Nu> lim_inf = {0 , 0};\n  // Valor m\xe1ximo do PWM (modificar aqui)\n    BLA::Matrix<Nu> maxPWM = {255 , 255};\n  // Valor m\xednimo do PWM (modificar aqui)\n    BLA::Matrix<Nu> minPWM = {0 , 0};\n  // Pinos de sa\xedda PWM (modificar aqui)\n    BLA::Matrix<Nu> PWM_pins = {5 , 6};\n\n\n// Inicializa\xe7\xf5es de programa\nint i=0, j=0, k=0;\n\n\ndouble mapf(double val,double in_min,double in_max,double out_min,double out_max) {\n  return (val-in_min)*(out_max-out_min)/(in_max-in_min)+out_min;\n}\n\n// Setup\nvoid setup()\n{\n  Timer1.initialize(1000000*T);      // Inicializa Timer1 com per\xedodo de amostragem (em us)\n  Timer1.attachInterrupt(controle);  // Define a interrup\xe7\xe3o de tempo\n}\n\n\n// Interrup\xe7\xe3o de tempo\nvoid controle() {\n\n  u = -K * x;\n\n  // Calcula os sinais de controle saturados\n  for (i = 0; i < Nu; i++) {\n    if (u(i) > lim_sup(i)){\n      u(i) = lim_sup(i);\n    } else if (u(i) < lim_inf(i)) {\n      u(i) = lim_inf(i);\n    }\n  }\n}\n\n\nvoid loop() {\n\n  // Escrever aqui as leituras, convers\xf5es de sinal, etc.\n  x(0) = analogRead(A0)*5/1023 -2;\n  x(1) = analogRead(A1)*16/1023 -8;\n  //x(2) = ...\n\n\n  // Mapeamento (float) dos sinais de controle para as sa\xeddas PWM\n  for (j = 0; j < Nu; j++) {\n    u_pwm(j) = mapf(u(j),lim_inf(j),lim_sup(j),minPWM(j),maxPWM(j));\n  }\n\n  // Atualiza\xe7\xe3od dos PWM\n  for (k = 0; k < Nu; k++) {\n    analogWrite(PWM_pins(k),u_pwm(k));\n  }\n  `}getCodeLQI(I,re){return`\n// *********************************************** //\n//   C\xf3digo gerado por EasyController for Arduino  //\n//              www.easycontroller.com             //\n// Usar com Arduinos baseados em processadores AVR //\n// *********************************************** //\n\n#include <TimerOne.h>\n#include <BasicLinearAlgebra.h>\n\nusing namespace BLA;\n\n\n// Declara\xe7\xe3o das vari\xe1veis de leitura\n#define Nx ${this.Nx}        // Ordem da planta\n#define Nu ${this.Nu}        // N\xfamero de sinais de controle\n#define Ny ${this.Ny}        // N\xfamero de sa\xeddas\n#define T  ${this.T}         // Per\xedodo de amostragem [s]\n\n// Inicializa\xe7\xe3o dos vetores e matrizes\n  // Matriz de sa\xeddas;\n    BLA::Matrix<Ny, Nx> C = {${I.C}};\n  // Matriz de ganhos (modificar aqui)\n    BLA::Matrix<Nu, Nx> K = {${this.K}};\n    BLA::Matrix<Nu, Nx> Ki = {${this.Ki}};\n    // Vetor de estados (modificar condi\xe7\xf5es inicias, se necess\xe1rio)\n    BLA::Matrix<Nx> x = {${I.CI}};\n  // Vetor de sinais de controle\n    BLA::Matrix<Nu> u;\n  // Vetores para o integrador\n    BLA::Matrix<Ny> y;\n    BLA::Matrix<Ny> Ref;\n    BLA::Matrix<Ny> int_e;\n    BLA::Matrix<Ny> e;\n  // Vetor de PWM dos sinais de controle\n    BLA::Matrix<Nu> u_pwm;\n  // Satura\xe7\xe3o superior do sinal de controle (modificar aqui)\n    BLA::Matrix<Nu> lim_sup = {1 , 1};\n  // Satura\xe7\xe3o inferior do sinal de controle (modificar aqui)\n    BLA::Matrix<Nu> lim_inf = {0 , 0};\n  // Valor m\xe1ximo do PWM (modificar aqui)\n    BLA::Matrix<Nu> maxPWM = {255 , 255};\n  // Valor m\xednimo do PWM (modificar aqui)\n    BLA::Matrix<Nu> minPWM = {0 , 0};\n  // Pinos de sa\xedda PWM (modificar aqui)\n    BLA::Matrix<Nu> PWM_pins = {5 , 6};\n\n\n// Inicializa\xe7\xf5es de programa\nint i=0, j=0, k=0;\n\n\ndouble mapf(double val,double in_min,double in_max,double out_min,double out_max) {\n  return (val-in_min)*(out_max-out_min)/(in_max-in_min)+out_min;\n}\n\n// Setup\nvoid setup()\n{\n  Timer1.initialize(1000000*T);      // Inicializa Timer1 com per\xedodo de amostragem (em us)\n  Timer1.attachInterrupt(controle);  // Define a interrup\xe7\xe3o de tempo\n}\n\n\n// Interrup\xe7\xe3o de tempo\nvoid controle() {\n\n  y = C * x;\n  e = Ref - y;\n  int_e = int_e + e * T;\n  u = -K * x - Ki * int_e;\n\n  // Calcula os sinais de controle saturados\n  for (i = 0; i < Nu; i++) {\n    if (u(i) > lim_sup(i)){\n      u(i) = lim_sup(i);\n    } else if (u(i) < lim_inf(i)) {\n      u(i) = lim_inf(i);\n    }\n  }\n}\n\n\nvoid loop() {\n\n  // Escrever aqui as leituras, convers\xf5es de sinal, etc.\n  x(0) = analogRead(A0)*5/1023 -2;\n  x(1) = analogRead(A1)*16/1023 -8;\n  //x(2) = ...\n\n\n  // Mapeamento (float) dos sinais de controle para as sa\xeddas PWM\n  for (j = 0; j < Nu; j++) {\n    u_pwm(j) = mapf(u(j),lim_inf(j),lim_sup(j),minPWM(j),maxPWM(j));\n  }\n\n  // Atualiza\xe7\xe3od dos PWM\n  for (k = 0; k < Nu; k++) {\n    analogWrite(PWM_pins(k),u_pwm(k));\n  }\n  `}getCodeLQG(I,re){return`\n// *********************************************** //\n//   C\xf3digo gerado por EasyController for Arduino  //\n//              www.easycontroller.com             //\n// Usar com Arduinos baseados em processadores AVR //\n// *********************************************** //\n\n#include <TimerOne.h>\n#include <BasicLinearAlgebra.h>\n\nusing namespace BLA;\n\n\n// Declara\xe7\xe3o das vari\xe1veis de leitura\n#define Nx ${this.Nx}        // Ordem da planta\n#define Nu ${this.Nu}        // N\xfamero de sinais de controle\n#define Ny ${this.Ny}        // N\xfamero de sa\xeddas\n#define T  ${this.T}     // Per\xedodo de amostragem [s]\n\n// Inicializa\xe7\xe3o dos vetores e matrizes\n  // Matriz de estados\n    BLA::Matrix<Nx, Nx> A = {${I.A}};\n  // Matrix de entradas\n    BLA::Matrix<Nx, Nu> B = {${I.B}};\n  // Matrix de sa\xeddas\n    BLA::Matrix<Ny, Nx> C = {${I.C}};\n  // Matriz de ganhos (modificar aqui)\n    BLA::Matrix<Nu, Nx> K = {${this.K}};\n  // Matrix de ganhos de Kalman\n    BLA::Matrix<Nx, Nx> L = {${this.L}};\n  // Vetor de estados (modificar condi\xe7\xf5es inicias, se necess\xe1rio)\n    BLA::Matrix<Nx, Nx> x = {${I.CI}};\n  // Vetor de sinais de controle\n    BLA::Matrix<Nu, Nu> u;\n  // Vetor  de sa\xeddas\n    BLA::Matrix<Ny, Ny> y;\n  // Vetor de estados estimados\n    BLA::Matrix<Nx, Nx> xhat;\n  // Vetor de PWM dos sinais de controle\n    BLA::Matrix<Nu> u_pwm;\n  // Satura\xe7\xe3o superior do sinal de controle (modificar aqui)\n    BLA::Matrix<Nu> lim_sup = {1 , 1};\n  // Satura\xe7\xe3o inferior do sinal de controle (modificar aqui)\n    BLA::Matrix<Nu> lim_inf = {0 , 0};\n  // Valor m\xe1ximo do PWM (modificar aqui)\n    BLA::Matrix<Nu> maxPWM = {255 , 255};\n  // Valor m\xednimo do PWM (modificar aqui)\n    BLA::Matrix<Nu> minPWM = {0 , 0};\n  // Pinos de sa\xedda PWM (modificar aqui)\n    BLA::Matrix<Nu> PWM_pins = {5 , 6};\n\n\n// Inicializa\xe7\xf5es de programa\nint i=0, j=0, k=0;\n\n\ndouble mapf(double val,double in_min,double in_max,double out_min,double out_max) {\n  return (val-in_min)*(out_max-out_min)/(in_max-in_min)+out_min;\n}\n\n// Setup\nvoid setup()\n{\n  Timer1.initialize(1000000*T);      // Inicializa Timer1 com per\xedodo de amostragem (em us)\n  Timer1.attachInterrupt(controle);  // Define a interrup\xe7\xe3o de tempo\n}\n\n\n// Interrup\xe7\xe3o de tempo\nvoid controle() {\n\n  y = C * x;\n  xhat = xhat + ((A - L * C) * xhat + (B * u) + (L * y)) * T;\n  u = -K * xhat;\n\n  // Calcula os sinais de controle saturados\n  for (i = 0; i < Nu; i++) {\n    if (u(i) > lim_sup(i)){\n      u(i) = lim_sup(i);\n    } else if (u(i) < lim_inf(i)) {\n      u(i) = lim_inf(i);\n    }\n  }\n}\n\n\nvoid loop() {\n\n  // Escrever aqui as leituras, convers\xf5es de sinal, etc.\n  x(0) = analogRead(A0)*5/1023 -2;\n  x(1) = analogRead(A1)*16/1023 -8;\n  //x(2) = ...\n\n\n  // Mapeamento (float) dos sinais de controle para as sa\xeddas PWM\n  for (j = 0; j < Nu; j++) {\n    u_pwm(j) = mapf(u(j),lim_inf(j),lim_sup(j),minPWM(j),maxPWM(j));\n  }\n\n  // Atualiza\xe7\xe3od dos PWM\n  for (k = 0; k < Nu; k++) {\n    analogWrite(PWM_pins(k),u_pwm(k));\n  }\n  `}getCodeLQGI(I,re){return`\n\n  // *********************************************** //\n  //   C\xf3digo gerado por EasyController for Arduino  //\n  //              www.easycontroller.com             //\n  // Usar com Arduinos baseados em processadores AVR //\n  // *********************************************** //\n\n  #include <TimerOne.h>\n  #include <BasicLinearAlgebra.h>\n\n  using namespace BLA;\n\n\n  // Declara\xe7\xe3o das vari\xe1veis de leitura\n  #define Nx ${this.Nx}        // Ordem da planta\n  #define Nu ${this.Nu}        // N\xfamero de sinais de controle\n  #define Ny ${this.Ny}        // N\xfamero de sa\xeddas\n  #define T  ${this.T}         // Per\xedodo de amostragem [s]\n\n  // Inicializa\xe7\xe3o dos vetores e matrizes\n    // Matriz de estados\n      BLA::Matrix<Nx, Nx> A = {${I.A}};\n    // Matriz de entradas\n      BLA::Matrix<Nx, Nu> B = {${I.B}};\n    // Matriz de sa\xeddas\n      BLA::Matrix<Ny, Nx> C = {${I.C}};\n    // Matriz de ganhos (modificar aqui)\n      BLA::Matrix<Nu, Nx> K = {${this.K}};\n    // Matriz de ganhos do integrador\n      BLA::Matrix<Nu, Ny> Ki = {${this.Ki}};\n    // Matriz de ganhos de Kalman\n      BLA::Matrix<Nx, Nx> L = {${this.L}};\n    // Vetor de estados (modificar condi\xe7\xf5es inicias, se necess\xe1rio)\n      BLA::Matrix<Nx, Nx> x = {${I.CI}};\n    // Vetor de sinais de controle\n      BLA::Matrix<Nu, Nu> u;\n    // Vetor  de sa\xeddas\n      BLA::Matrix<Ny, Ny> y;\n    // Vetores para o integrador\n      BLA::Matrix<Ny, Ny> Ref;\n      BLA::Matrix<Ny, Ny> int_e;\n      BLA::Matrix<Ny, Ny> e;\n    // Vetor de estados estimados\n      BLA::Matrix<Nx, Nx> xhat;\n    // Vetor de PWM dos sinais de controle\n      BLA::Matrix<Nu> u_pwm;\n    // Satura\xe7\xe3o superior do sinal de controle (modificar aqui)\n      BLA::Matrix<Nu> lim_sup = {1 , 1};\n    // Satura\xe7\xe3o inferior do sinal de controle (modificar aqui)\n      BLA::Matrix<Nu> lim_inf = {0 , 0};\n    // Valor m\xe1ximo do PWM (modificar aqui)\n      BLA::Matrix<Nu> maxPWM = {255 , 255};\n    // Valor m\xednimo do PWM (modificar aqui)\n      BLA::Matrix<Nu> minPWM = {0 , 0};\n    // Pinos de sa\xedda PWM (modificar aqui)\n      BLA::Matrix<Nu> PWM_pins = {5 , 6};\n\n\n  // Inicializa\xe7\xf5es de programa\n  int i=0, j=0, k=0;\n\n  double mapf(double val,double in_min,double in_max,double out_min,double out_max) {\n    return (val-in_min)*(out_max-out_min)/(in_max-in_min)+out_min;\n  }\n\n  // Setup\n  void setup()\n  {\n    Timer1.initialize(1000000*T);      // Inicializa Timer1 com per\xedodo de amostragem (em us)\n    Timer1.attachInterrupt(controle);  // Define a interrup\xe7\xe3o de tempo\n  }\n\n\n  // Interrup\xe7\xe3o de tempo\n  void controle() {\n\n    y = C * x;\n    e = Ref - y;\n    int_e = int_e + e * T;\n    xhat = xhat + ((A - L * C) * xhat + (B * u) + (L * y)) * T;\n    u = -K * xhat - Ki * int_e;\n\n    // Calcula os sinais de controle saturados\n    for (i = 0; i < Nu; i++) {\n      if (u(i) > lim_sup(i)){\n        u(i) = lim_sup(i);\n      } else if (u(i) < lim_inf(i)) {\n        u(i) = lim_inf(i);\n      }\n    }\n  }\n\n\n  void loop() {\n\n    // Escrever aqui as leituras, convers\xf5es de sinal, etc.\n    x(0) = analogRead(A0)*5/1023 -2;\n    x(1) = analogRead(A1)*16/1023 -8;\n    //x(2) = ...\n\n\n    // Mapeamento (float) dos sinais de controle para as sa\xeddas PWM\n    for (j = 0; j < Nu; j++) {\n      u_pwm(j) = mapf(u(j),lim_inf(j),lim_sup(j),minPWM(j),maxPWM(j));\n    }\n\n    // Atualiza\xe7\xe3o dos PWM\n    for (k = 0; k < Nu; k++) {\n      analogWrite(PWM_pins(k),u_pwm(k));\n    };`}}return Y.\u0275fac=function(I){return new(I||Y)(e.Y36(i),e.Y36(l.eN))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-root"]],decls:31,vars:9,consts:[[1,"navbar-container"],["expanded",""],["appearance","fill",1,"example-full-width",2,"margin","10px"],["type","number","matInput","","placeholder","Estado da Matriz",3,"ngModel","ngModelChange","change"],["type","number","matInput","","placeholder","N\xfamero de Entradas",3,"ngModel","ngModelChange","change"],["type","number","matInput","","placeholder","N\xfamero de Sa\xeddas",3,"ngModel","ngModelChange","change"],["expanded","",2,"margin-top","10px"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",2,"margin","10px",3,"click"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","text","appDecimalNumber","","cdkTextAreaAutosize","","resizeToFitContent","","matInput","","placeholder","0",2,"width","60px",3,"id","value","blur"],[3,"data","layout"],["expanded","",2,"margin-top","10px","height","250px"],[1,"row"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1",1,"dropdown-menu"],["ngbDropdownItem","",3,"click"],["type","text","appDecimalNumber","","matInput","","placeholder","valor",2,"width","60px",3,"id","value","blur"],[2,"margin-top","10px"],[2,"display","block","white-space","pre-wrap"],["mat-raised-button","","color","basic",3,"cdkCopyToClipboard","click"]],template:function(I,re){1&I&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Controlador no dom\xednio do tempo"),e.qZA(),e.TgZ(3,"mat-expansion-panel",1)(4,"mat-expansion-panel-header")(5,"mat-panel-title"),e._uU(6," Par\xe2metros das matrizes "),e.qZA()(),e.TgZ(7,"mat-form-field",2)(8,"mat-label"),e._uU(9,"Ordem do Sistema"),e.qZA(),e.TgZ(10,"input",3),e.NdJ("ngModelChange",function(Ge){return re.quadN=Ge})("change",function(){return re.createTables()}),e.qZA()(),e.TgZ(11,"mat-form-field",2)(12,"mat-label"),e._uU(13,"N\xfamero de Entradas"),e.qZA(),e.TgZ(14,"input",4),e.NdJ("ngModelChange",function(Ge){return re.inL=Ge})("change",function(){return re.createTables()}),e.qZA()(),e.TgZ(15,"mat-form-field",2)(16,"mat-label"),e._uU(17,"N\xfamero de Sa\xeddas"),e.qZA(),e.TgZ(18,"input",5),e.NdJ("ngModelChange",function(Ge){return re.outM=Ge})("change",function(){return re.createTables()}),e.qZA()()(),e.TgZ(19,"mat-expansion-panel",6)(20,"mat-expansion-panel-header")(21,"mat-panel-title"),e._uU(22," Preenchimento das matrizes "),e.qZA()(),e.YNc(23,Dv,5,2,"div",7),e.qZA(),e.TgZ(24,"button",8),e.NdJ("click",function(){return re.calc()}),e._uU(25,"Calcular"),e.qZA(),e.YNc(26,Ov,36,4,"div",9),e.YNc(27,Bv,10,3,"div",9),e.YNc(28,Zv,10,3,"div",9),e.YNc(29,iy,11,4,"div",9),e.YNc(30,my,11,4,"div",9),e.qZA()),2&I&&(e.xp6(10),e.Q6J("ngModel",re.quadN),e.xp6(4),e.Q6J("ngModel",re.inL),e.xp6(4),e.Q6J("ngModel",re.outM),e.xp6(5),e.Q6J("ngForOf",re.matrizes),e.xp6(3),e.Q6J("ngIf",re.panelMA),e.xp6(1),e.Q6J("ngIf",re.panelCostMatrixLQR),e.xp6(1),e.Q6J("ngIf",re.panelCostMatrixLQI),e.xp6(1),e.Q6J("ngIf",re.panelCostMatrixLQG),e.xp6(1),e.Q6J("ngIf",re.panelCostMatrixLQGI))},dependencies:[N,or,ct,Pn,qd,Ap,Yd,ie.sg,ie.O5,ti,on,pa,ts,Yo,hd,em,Gp,Hp,kv,Cv],styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}.cdk-high-contrast-active .cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}#snackbar{visibility:hidden;color:#fff;background-color:#333;min-width:250px;margin-left:-125px;border-radius:2px;padding:16px;text-align:center;left:50%;bottom:30px;z-index:1;position:fixed}#snackbar.show{visibility:visible;animation:fadein .5s,fadeout .5s 2.5s}\n"],encapsulation:2}),Y})();const yy=[{path:"",component:ae(5041).y,children:[{path:"",component:gy}]}];let _y=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({imports:[p.Bz.forChild(yy),p.Bz]}),Y})();var by=ae(9102);va.plotlyjs=by;let xy=(()=>{class Y{}return Y.\u0275fac=function(I){return new(I||Y)},Y.\u0275mod=e.oAB({type:Y}),Y.\u0275inj=e.cJS({providers:[i],imports:[We,Zd,ie.ez,_y,Ga,Cs,va,xv,qp,l.JF,Av]}),Y})()},9102:vd=>{vd.exports=function v(ae,ie,p){function g(e,r){if(!ie[e]){if(!ae[e]){if(b)return b(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=ie[e]={exports:{}};ae[e][0].call(n.exports,function(m){return g(ae[e][1][m]||m)},n,n.exports,v,ae,ie,p)}return ie[e].exports}for(var b=void 0,y=0;y<p.length;y++)g(p[y]);return g}({1:[function(v,ae,ie){"use strict";var p=v("../src/lib"),g={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in g){var y=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");p.addStyleRule(y,g[b])}},{"../src/lib":515}],2:[function(v,ae,ie){"use strict";ae.exports=v("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/box")},{"../src/traces/box":688}],6:[function(v,ae,ie){"use strict";ae.exports=v("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(v,ae,ie){"use strict";ae.exports=v("../src/core")},{"../src/core":493}],15:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(v,ae,ie){"use strict";ae.exports=v("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(v,ae,ie){"use strict";ae.exports=v("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/image")},{"../src/traces/image":861}],27:[function(v,ae,ie){"use strict";var p=v("./core");p.register([v("./bar"),v("./box"),v("./heatmap"),v("./histogram"),v("./histogram2d"),v("./histogram2dcontour"),v("./contour"),v("./scatterternary"),v("./violin"),v("./funnel"),v("./waterfall"),v("./image"),v("./pie"),v("./sunburst"),v("./treemap"),v("./icicle"),v("./funnelarea"),v("./scatter3d"),v("./surface"),v("./isosurface"),v("./volume"),v("./mesh3d"),v("./cone"),v("./streamtube"),v("./scattergeo"),v("./choropleth"),v("./scattergl"),v("./splom"),v("./pointcloud"),v("./heatmapgl"),v("./parcoords"),v("./parcats"),v("./scattermapbox"),v("./choroplethmapbox"),v("./densitymapbox"),v("./sankey"),v("./indicator"),v("./table"),v("./carpet"),v("./scattercarpet"),v("./contourcarpet"),v("./ohlc"),v("./candlestick"),v("./scatterpolar"),v("./scatterpolargl"),v("./barpolar"),v("./scattersmith"),v("./aggregate"),v("./filter"),v("./groupby"),v("./sort"),v("./calendars")]),ae.exports=p},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(v,ae,ie){"use strict";ae.exports=v("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/table")},{"../src/traces/table":1082}],52:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(v,ae,ie){"use strict";ae.exports=v("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(v,ae,ie){var p,g;p=this,g=function(p,g,b,y,e){"use strict";function r(le){return le.target.depth}function t(le,ce){return le.sourceLinks.length?le.depth:ce-1}function o(le){return function(){return le}}e=e&&e.hasOwnProperty("default")?e.default:e;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function m(le,ce){return i(le.source,ce.source)||le.index-ce.index}function l(le,ce){return i(le.target,ce.target)||le.index-ce.index}function i(le,ce){return le.partOfCycle===ce.partOfCycle?le.y0-ce.y0:"top"===le.circularLinkType||"bottom"===ce.circularLinkType?-1:1}function f(le){return le.value}function u(le){return(le.y0+le.y1)/2}function s(le){return u(le.source)}function d(le){return u(le.target)}function h(le){return le.index}function a(le){return le.nodes}function _(le){return le.links}function c(le,ce){var pe=le.get(ce);if(!pe)throw new Error("missing: "+ce);return pe}function T(le,ce){return ce(le)}function x(le,ce,pe){var de=0;if(null===pe){for(var be=[],he=0;he<le.links.length;he++){var xe=le.links[he],De=xe.source.index,Se=xe.target.index;be[De]||(be[De]=[]),be[Se]||(be[Se]=[]),-1===be[De].indexOf(Se)&&be[De].push(Se)}var ke=e(be);ke.sort(function(Te,Le){return Te.length-Le.length});var Fe={};for(he=0;he<ke.length;he++){var ve=ke[he].slice(-2);Fe[ve[0]]||(Fe[ve[0]]={}),Fe[ve[0]][ve[1]]=!0}le.links.forEach(function(Te){var Le=Te.target.index,Oe=Te.source.index;Le===Oe||Fe[Oe]&&Fe[Oe][Le]?(Te.circular=!0,Te.circularLinkID=de,de+=1):Te.circular=!1})}else le.links.forEach(function(Te){Te.source[pe]<Te.target[pe]?Te.circular=!1:(Te.circular=!0,Te.circularLinkID=de,de+=1)})}function w(le,ce){var pe=0,de=0;le.links.forEach(function(be){be.circular&&(be.circularLinkType=be.source.circularLinkType||be.target.circularLinkType?be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:pe<de?"top":"bottom","top"==be.circularLinkType?pe+=1:de+=1,le.nodes.forEach(function(he){T(he,ce)!=T(be.source,ce)&&T(he,ce)!=T(be.target,ce)||(he.circularLinkType=be.circularLinkType)}))}),le.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),te(be,ce)&&(be.circularLinkType=be.source.circularLinkType))})}function M(le){var ce=Math.abs(le.y1-le.y0),pe=Math.abs(le.target.x0-le.source.x1);return Math.atan(pe/ce)}function D(le,ce){var pe=0;le.sourceLinks.forEach(function(be){pe=be.circular&&!te(be,ce)?pe+1:pe});var de=0;return le.targetLinks.forEach(function(be){de=be.circular&&!te(be,ce)?de+1:de}),pe+de}function C(le){var pe=0;le.source.sourceLinks.forEach(function(he){pe=he.circular?pe+1:pe});var be=0;return le.target.targetLinks.forEach(function(he){be=he.circular?be+1:be}),!(pe>1||be>1)}function P(le,ce,pe){return le.sort(S),le.forEach(function(de,be){var he,xe,De=0;if(te(de,pe)&&C(de))de.circularPathData.verticalBuffer=De+de.width/2;else{for(var Se=0;Se<be;Se++)if(!((he=le[be]).source.column<(xe=le[Se]).target.column||he.target.column>xe.source.column)){var ke=le[Se].circularPathData.verticalBuffer+le[Se].width/2+ce;De=ke>De?ke:De}de.circularPathData.verticalBuffer=De+de.width/2}}),le}function L(le,ce,pe,de){var be=g.min(le.links,function(he){return he.source.y0});le.links.forEach(function(he){he.circular&&(he.circularPathData={})}),P(le.links.filter(function(he){return"top"==he.circularLinkType}),ce,de),P(le.links.filter(function(he){return"bottom"==he.circularLinkType}),ce,de),le.links.forEach(function(he){if(he.circular){if(he.circularPathData.arcRadius=he.width+10,he.circularPathData.leftNodeBuffer=5,he.circularPathData.rightNodeBuffer=5,he.circularPathData.sourceWidth=he.source.x1-he.source.x0,he.circularPathData.sourceX=he.source.x0+he.circularPathData.sourceWidth,he.circularPathData.targetX=he.target.x0,he.circularPathData.sourceY=he.y0,he.circularPathData.targetY=he.y1,te(he,de)&&C(he))he.circularPathData.leftSmallArcRadius=10+he.width/2,he.circularPathData.leftLargeArcRadius=10+he.width/2,he.circularPathData.rightSmallArcRadius=10+he.width/2,he.circularPathData.rightLargeArcRadius=10+he.width/2,"bottom"==he.circularLinkType?(he.circularPathData.verticalFullExtent=he.source.y1+25+he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.rightLargeArcRadius):(he.circularPathData.verticalFullExtent=he.source.y0-25-he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.rightLargeArcRadius);else{var xe=he.source.column,De=he.circularLinkType,Se=le.links.filter(function(ve){return ve.source.column==xe&&ve.circularLinkType==De});Se.sort("bottom"==he.circularLinkType?N:E);var ke=0;Se.forEach(function(ve,Te){ve.circularLinkID==he.circularLinkID&&(he.circularPathData.leftSmallArcRadius=10+he.width/2+ke,he.circularPathData.leftLargeArcRadius=10+he.width/2+Te*ce+ke),ke+=ve.width}),xe=he.target.column,(Se=le.links.filter(function(ve){return ve.target.column==xe&&ve.circularLinkType==De})).sort("bottom"==he.circularLinkType?q:z),ke=0,Se.forEach(function(ve,Te){ve.circularLinkID==he.circularLinkID&&(he.circularPathData.rightSmallArcRadius=10+he.width/2+ke,he.circularPathData.rightLargeArcRadius=10+he.width/2+Te*ce+ke),ke+=ve.width}),"bottom"==he.circularLinkType?(he.circularPathData.verticalFullExtent=Math.max(pe,he.source.y1,he.target.y1)+25+he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.rightLargeArcRadius):(he.circularPathData.verticalFullExtent=be-25-he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.rightLargeArcRadius)}he.circularPathData.leftInnerExtent=he.circularPathData.sourceX+he.circularPathData.leftNodeBuffer,he.circularPathData.rightInnerExtent=he.circularPathData.targetX-he.circularPathData.rightNodeBuffer,he.circularPathData.leftFullExtent=he.circularPathData.sourceX+he.circularPathData.leftLargeArcRadius+he.circularPathData.leftNodeBuffer,he.circularPathData.rightFullExtent=he.circularPathData.targetX-he.circularPathData.rightLargeArcRadius-he.circularPathData.rightNodeBuffer}if(he.circular)he.path="top"==(ve=he).circularLinkType?"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 0 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY-ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 0 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 0 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY-ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 0 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY:"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 1 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY+ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 1 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 1 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY+ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 1 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY;else{var Fe=y.linkHorizontal().source(function(ve){return[ve.source.x0+(ve.source.x1-ve.source.x0),ve.y0]}).target(function(ve){return[ve.target.x0,ve.y1]});he.path=Fe(he)}var ve})}function S(le,ce){return G(le)==G(ce)?"bottom"==le.circularLinkType?N(le,ce):E(le,ce):G(ce)-G(le)}function E(le,ce){return le.y0-ce.y0}function N(le,ce){return ce.y0-le.y0}function z(le,ce){return le.y1-ce.y1}function q(le,ce){return ce.y1-le.y1}function G(le){return le.target.column-le.source.column}function K(le){return le.target.x0-le.source.x1}function ne(le,ce){var pe=M(le),de=K(ce)/Math.tan(pe);return"up"==U(le)?le.y1+de:le.y1-de}function X(le,ce){var pe=M(le),de=K(ce)/Math.tan(pe);return"up"==U(le)?le.y1-de:le.y1+de}function J(le,ce,pe,de){le.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var he=be.source.column+1,xe=be.target.column-1,De=1,Se=xe-he+1;for(De=1;he<=xe;he++,De++)le.nodes.forEach(function(ke){if(ke.column==he){var Fe,ve=De/(Se+1),Te=Math.pow(1-ve,3),Le=3*ve*Math.pow(1-ve,2),Oe=3*Math.pow(ve,2)*(1-ve),Ne=Math.pow(ve,3),Be=Te*be.y0+Le*be.y0+Oe*be.y1+Ne*be.y1,He=Be-be.width/2,Ve=Be+be.width/2;He>ke.y0&&He<ke.y1?(Fe=ke.y1-He+10,ke=V(ke,Fe="bottom"==ke.circularLinkType?Fe:-Fe,ce,pe),le.nodes.forEach(function(it){T(it,de)!=T(ke,de)&&it.column==ke.column&&se(ke,it)&&V(it,Fe,ce,pe)})):(Ve>ke.y0&&Ve<ke.y1||He<ke.y0&&Ve>ke.y1)&&(ke=V(ke,Fe=Ve-ke.y0+10,ce,pe),le.nodes.forEach(function(it){T(it,de)!=T(ke,de)&&it.column==ke.column&&it.y0<ke.y1&&it.y1>ke.y1&&V(it,Fe,ce,pe)}))}})}})}function se(le,ce){return le.y0>ce.y0&&le.y0<ce.y1||le.y1>ce.y0&&le.y1<ce.y1||le.y0<ce.y0&&le.y1>ce.y1}function V(le,ce,pe,de){return le.y0+ce>=pe&&le.y1+ce<=de&&(le.y0=le.y0+ce,le.y1=le.y1+ce,le.targetLinks.forEach(function(be){be.y1=be.y1+ce}),le.sourceLinks.forEach(function(be){be.y0=be.y0+ce})),le}function j(le,ce,pe,de){le.nodes.forEach(function(be){de&&be.y+(be.y1-be.y0)>ce&&(be.y=be.y-(be.y+(be.y1-be.y0)-ce));var he=le.links.filter(function(Se){return T(Se.source,pe)==T(be,pe)}),xe=he.length;xe>1&&he.sort(function(Se,ke){if(!Se.circular&&!ke.circular){if(Se.target.column==ke.target.column||!oe(Se,ke))return Se.y1-ke.y1;if(Se.target.column>ke.target.column){var Fe=X(ke,Se);return Se.y1-Fe}if(ke.target.column>Se.target.column)return X(Se,ke)-ke.y1}return Se.circular&&!ke.circular?"top"==Se.circularLinkType?-1:1:ke.circular&&!Se.circular?"top"==ke.circularLinkType?1:-1:Se.circular&&ke.circular?Se.circularLinkType===ke.circularLinkType&&"top"==Se.circularLinkType?Se.target.column===ke.target.column?Se.target.y1-ke.target.y1:ke.target.column-Se.target.column:Se.circularLinkType===ke.circularLinkType&&"bottom"==Se.circularLinkType?Se.target.column===ke.target.column?ke.target.y1-Se.target.y1:Se.target.column-ke.target.column:"top"==Se.circularLinkType?-1:1:void 0});var De=be.y0;he.forEach(function(Se){Se.y0=De+Se.width/2,De+=Se.width}),he.forEach(function(Se,ke){if("bottom"==Se.circularLinkType){for(var Fe=ke+1,ve=0;Fe<xe;Fe++)ve+=he[Fe].width;Se.y0=be.y1-ve-Se.width/2}})})}function H(le,ce,pe){le.nodes.forEach(function(de){var be=le.links.filter(function(De){return T(De.target,pe)==T(de,pe)}),he=be.length;he>1&&be.sort(function(De,Se){if(!De.circular&&!Se.circular){if(De.source.column==Se.source.column||!oe(De,Se))return De.y0-Se.y0;if(Se.source.column<De.source.column){var ke=ne(Se,De);return De.y0-ke}if(De.source.column<Se.source.column)return ne(De,Se)-Se.y0}return De.circular&&!Se.circular?"top"==De.circularLinkType?-1:1:Se.circular&&!De.circular?"top"==Se.circularLinkType?1:-1:De.circular&&Se.circular?De.circularLinkType===Se.circularLinkType&&"top"==De.circularLinkType?De.source.column===Se.source.column?De.source.y1-Se.source.y1:De.source.column-Se.source.column:De.circularLinkType===Se.circularLinkType&&"bottom"==De.circularLinkType?De.source.column===Se.source.column?De.source.y1-Se.source.y1:Se.source.column-De.source.column:"top"==De.circularLinkType?-1:1:void 0});var xe=de.y0;be.forEach(function(De){De.y1=xe+De.width/2,xe+=De.width}),be.forEach(function(De,Se){if("bottom"==De.circularLinkType){for(var ke=Se+1,Fe=0;ke<he;ke++)Fe+=be[ke].width;De.y1=de.y1-Fe-De.width/2}})})}function oe(le,ce){return U(le)==U(ce)}function U(le){return le.y0-le.y1>0?"up":"down"}function te(le,ce){return T(le.source,ce)==T(le.target,ce)}function ee(le,ce,pe){var de=le.nodes,be=le.links,he=!1,xe=!1;if(be.forEach(function(ke){"top"==ke.circularLinkType?he=!0:"bottom"==ke.circularLinkType&&(xe=!0)}),0==he||0==xe){var De=g.min(de,function(ke){return ke.y0}),Se=(pe-ce)/(g.max(de,function(ke){return ke.y1})-De);de.forEach(function(ke){var Fe=(ke.y1-ke.y0)*Se;ke.y0=(ke.y0-De)*Se,ke.y1=ke.y0+Fe}),be.forEach(function(ke){ke.y0=(ke.y0-De)*Se,ke.y1=(ke.y1-De)*Se,ke.width=ke.width*Se})}}p.sankeyCircular=function(){var le,ce,pe=0,de=0,be=1,he=1,xe=24,De=h,Se=t,ke=a,Fe=_,ve=32,Te=2,Le=null;function Oe(){var ze={nodes:ke.apply(null,arguments),links:Fe.apply(null,arguments)};Ne(ze),x(ze,0,Le),Be(ze),He(ze),w(ze,De),Ve(ze,ve,De),it(ze);for(var je=4,qe=0;qe<je;qe++)j(ze,he,De),H(ze,0,De),J(ze,de,he,De),j(ze,he,De),H(ze,0,De);return ee(ze,de,he),L(ze,Te,he,De),ze}function Ne(ze){ze.nodes.forEach(function(qe,Ye){qe.index=Ye,qe.sourceLinks=[],qe.targetLinks=[]});var je=b.map(ze.nodes,De);return ze.links.forEach(function(qe,Ye){qe.index=Ye;var ct=qe.source,vt=qe.target;"object"!==(void 0===ct?"undefined":n(ct))&&(ct=qe.source=c(je,ct)),"object"!==(void 0===vt?"undefined":n(vt))&&(vt=qe.target=c(je,vt)),ct.sourceLinks.push(qe),vt.targetLinks.push(qe)}),ze}function Be(ze){ze.nodes.forEach(function(je){je.partOfCycle=!1,je.value=Math.max(g.sum(je.sourceLinks,f),g.sum(je.targetLinks,f)),je.sourceLinks.forEach(function(qe){qe.circular&&(je.partOfCycle=!0,je.circularLinkType=qe.circularLinkType)}),je.targetLinks.forEach(function(qe){qe.circular&&(je.partOfCycle=!0,je.circularLinkType=qe.circularLinkType)})})}function He(ze){var je,qe,Ye;for(je=ze.nodes,qe=[],Ye=0;je.length;++Ye,je=qe,qe=[])je.forEach(function(ct){ct.depth=Ye,ct.sourceLinks.forEach(function(vt){qe.indexOf(vt.target)<0&&!vt.circular&&qe.push(vt.target)})});for(je=ze.nodes,qe=[],Ye=0;je.length;++Ye,je=qe,qe=[])je.forEach(function(ct){ct.height=Ye,ct.targetLinks.forEach(function(vt){qe.indexOf(vt.source)<0&&!vt.circular&&qe.push(vt.source)})});ze.nodes.forEach(function(ct){ct.column=Math.floor(Se.call(null,ct,Ye))})}function Ve(ze,je,qe){var Ye=b.nest().key(function(St){return St.column}).sortKeys(g.ascending).entries(ze.nodes).map(function(St){return St.values});(function(St){if(ce){var ft=1/0;Ye.forEach(function(rn){var hn=he*ce/(rn.length+1);ft=hn<ft?hn:ft}),le=ft}var st=g.min(Ye,function(rn){return(he-de-(rn.length-1)*le)/g.sum(rn,f)});st*=.3,ze.links.forEach(function(rn){rn.width=rn.value*st});var rn,hn,cn,mn,nn,Xe,Ct=(hn=0,cn=0,mn=0,nn=0,Xe=g.max((rn=ze).nodes,function(nt){return nt.column}),rn.links.forEach(function(nt){nt.circular&&("top"==nt.circularLinkType?hn+=nt.width:cn+=nt.width,0==nt.target.column&&(nn+=nt.width),nt.source.column==Xe&&(mn+=nt.width))}),{top:hn=hn>0?hn+25+10:hn,bottom:cn=cn>0?cn+25+10:cn,left:nn=nn>0?nn+25+10:nn,right:mn=mn>0?mn+25+10:mn}),$t=function(rn,hn){var cn=g.max(rn.nodes,function(ye){return ye.column}),mn=be-pe,nn=he-de,Xe=mn/(mn+hn.right+hn.left),nt=nn/(nn+hn.top+hn.bottom);return pe=pe*Xe+hn.left,be=0==hn.right?be:be*Xe,de=de*nt+hn.top,he*=nt,rn.nodes.forEach(function(ye){ye.x0=pe+ye.column*((be-pe-xe)/cn),ye.x1=ye.x0+xe}),nt}(ze,Ct);st*=$t,ze.links.forEach(function(rn){rn.width=rn.value*st}),Ye.forEach(function(rn){var hn=rn.length;rn.forEach(function(cn,mn){cn.depth==Ye.length-1&&1==hn||0==cn.depth&&1==hn?(cn.y0=he/2-cn.value*st,cn.y1=cn.y0+cn.value*st):cn.partOfCycle?0==D(cn,St)?(cn.y0=he/2+mn,cn.y1=cn.y0+cn.value*st):"top"==cn.circularLinkType?(cn.y0=de+mn,cn.y1=cn.y0+cn.value*st):(cn.y0=he-cn.value*st-mn,cn.y1=cn.y0+cn.value*st):0==Ct.top||0==Ct.bottom?(cn.y0=(he-de)/hn*mn,cn.y1=cn.y0+cn.value*st):(cn.y0=(he-de)/2-hn/2+mn,cn.y1=cn.y0+cn.value*st)})})})(qe),Ot();for(var ct=1,vt=je;vt>0;--vt)wt(ct*=.99,qe),Ot();function wt(St,ft){var st=Ye.length;Ye.forEach(function(Ct){var $t=Ct.length,rn=Ct[0].depth;Ct.forEach(function(hn){var cn;if((hn.sourceLinks.length||hn.targetLinks.length)&&!(hn.partOfCycle&&D(hn,ft)>0))if(0==rn&&1==$t)hn.y0=he/2-(cn=hn.y1-hn.y0)/2,hn.y1=he/2+cn/2;else if(rn==st-1&&1==$t)hn.y0=he/2-(cn=hn.y1-hn.y0)/2,hn.y1=he/2+cn/2;else{var mn=g.mean(hn.sourceLinks,d),nn=g.mean(hn.targetLinks,s),Xe=((mn&&nn?(mn+nn)/2:mn||nn)-u(hn))*St;hn.y0+=Xe,hn.y1+=Xe}})})}function Ot(){Ye.forEach(function(St){var ft,st,Ct,$t=de,rn=St.length;for(St.sort(i),Ct=0;Ct<rn;++Ct)(st=$t-(ft=St[Ct]).y0)>0&&(ft.y0+=st,ft.y1+=st),$t=ft.y1+le;if((st=$t-le-he)>0)for($t=ft.y0-=st,ft.y1-=st,Ct=rn-2;Ct>=0;--Ct)(st=(ft=St[Ct]).y1+le-$t)>0&&(ft.y0-=st,ft.y1-=st),$t=ft.y0})}}function it(ze){ze.nodes.forEach(function(je){je.sourceLinks.sort(l),je.targetLinks.sort(m)}),ze.nodes.forEach(function(je){var qe=je.y0,Ye=qe,ct=je.y1,vt=ct;je.sourceLinks.forEach(function(wt){wt.circular?(wt.y0=ct-wt.width/2,ct-=wt.width):(wt.y0=qe+wt.width/2,qe+=wt.width)}),je.targetLinks.forEach(function(wt){wt.circular?(wt.y1=vt-wt.width/2,vt-=wt.width):(wt.y1=Ye+wt.width/2,Ye+=wt.width)})})}return Oe.nodeId=function(ze){return arguments.length?(De="function"==typeof ze?ze:o(ze),Oe):De},Oe.nodeAlign=function(ze){return arguments.length?(Se="function"==typeof ze?ze:o(ze),Oe):Se},Oe.nodeWidth=function(ze){return arguments.length?(xe=+ze,Oe):xe},Oe.nodePadding=function(ze){return arguments.length?(le=+ze,Oe):le},Oe.nodes=function(ze){return arguments.length?(ke="function"==typeof ze?ze:o(ze),Oe):ke},Oe.links=function(ze){return arguments.length?(Fe="function"==typeof ze?ze:o(ze),Oe):Fe},Oe.size=function(ze){return arguments.length?(pe=de=0,be=+ze[0],he=+ze[1],Oe):[be-pe,he-de]},Oe.extent=function(ze){return arguments.length?(pe=+ze[0][0],be=+ze[1][0],de=+ze[0][1],he=+ze[1][1],Oe):[[pe,de],[be,he]]},Oe.iterations=function(ze){return arguments.length?(ve=+ze,Oe):ve},Oe.circularLinkGap=function(ze){return arguments.length?(Te=+ze,Oe):Te},Oe.nodePaddingRatio=function(ze){return arguments.length?(ce=+ze,Oe):ce},Oe.sortNodes=function(ze){return arguments.length?(Le=ze,Oe):Le},Oe.update=function(ze){return w(ze,De),it(ze),ze.links.forEach(function(je){je.circular&&(je.circularLinkType=je.y0+je.y1<he?"top":"bottom",je.source.circularLinkType=je.circularLinkType,je.target.circularLinkType=je.circularLinkType)}),j(ze,he,De,!1),H(ze,0,De),L(ze,Te,he,De),ze},Oe},p.sankeyCenter=function(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?g.min(le.sourceLinks,r)-1:0},p.sankeyLeft=function(le){return le.depth},p.sankeyRight=function(le,ce){return ce-1-le.height},p.sankeyJustify=t,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-array"),v("d3-collection"),v("d3-shape"),v("elementary-circuits-directed-graph")):g(p.d3=p.d3||{},p.d3,p.d3,p.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(v,ae,ie){var p,g;p=this,g=function(p,g,b,y){"use strict";function e(T){return T.target.depth}function r(T,x){return T.sourceLinks.length?T.depth:x-1}function t(T){return function(){return T}}function o(T,x){return m(T.source,x.source)||T.index-x.index}function n(T,x){return m(T.target,x.target)||T.index-x.index}function m(T,x){return T.y0-x.y0}function l(T){return T.value}function i(T){return(T.y0+T.y1)/2}function f(T){return i(T.source)*T.value}function u(T){return i(T.target)*T.value}function s(T){return T.index}function d(T){return T.nodes}function h(T){return T.links}function a(T,x){var w=T.get(x);if(!w)throw new Error("missing: "+x);return w}function _(T){return[T.source.x1,T.y0]}function c(T){return[T.target.x0,T.y1]}p.sankey=function(){var T=0,x=0,w=1,M=1,D=24,C=8,P=s,L=r,S=d,E=h,N=32;function z(){var J={nodes:S.apply(null,arguments),links:E.apply(null,arguments)};return q(J),G(J),K(J),ne(J),X(J),J}function q(J){J.nodes.forEach(function(V,j){V.index=j,V.sourceLinks=[],V.targetLinks=[]});var se=b.map(J.nodes,P);J.links.forEach(function(V,j){V.index=j;var H=V.source,oe=V.target;"object"!=typeof H&&(H=V.source=a(se,H)),"object"!=typeof oe&&(oe=V.target=a(se,oe)),H.sourceLinks.push(V),oe.targetLinks.push(V)})}function G(J){J.nodes.forEach(function(se){se.value=Math.max(g.sum(se.sourceLinks,l),g.sum(se.targetLinks,l))})}function K(J){var se,V,j;for(se=J.nodes,V=[],j=0;se.length;++j,se=V,V=[])se.forEach(function(oe){oe.depth=j,oe.sourceLinks.forEach(function(U){V.indexOf(U.target)<0&&V.push(U.target)})});for(se=J.nodes,V=[],j=0;se.length;++j,se=V,V=[])se.forEach(function(oe){oe.height=j,oe.targetLinks.forEach(function(U){V.indexOf(U.source)<0&&V.push(U.source)})});var H=(w-T-D)/(j-1);J.nodes.forEach(function(oe){oe.x1=(oe.x0=T+Math.max(0,Math.min(j-1,Math.floor(L.call(null,oe,j))))*H)+D})}function ne(J){var se=b.nest().key(function(te){return te.x0}).sortKeys(g.ascending).entries(J.nodes).map(function(te){return te.values});(function(){var te=g.max(se,function(ce){return ce.length}),ee=2/3*(M-x)/(te-1);C>ee&&(C=ee);var le=g.min(se,function(ce){return(M-x-(ce.length-1)*C)/g.sum(ce,l)});se.forEach(function(ce){ce.forEach(function(pe,de){pe.y1=(pe.y0=de)+pe.value*le})}),J.links.forEach(function(ce){ce.width=ce.value*le})})(),U();for(var V=1,j=N;j>0;--j)oe(V*=.99),U(),H(V),U();function H(te){se.forEach(function(ee){ee.forEach(function(le){if(le.targetLinks.length){var ce=(g.sum(le.targetLinks,f)/g.sum(le.targetLinks,l)-i(le))*te;le.y0+=ce,le.y1+=ce}})})}function oe(te){se.slice().reverse().forEach(function(ee){ee.forEach(function(le){if(le.sourceLinks.length){var ce=(g.sum(le.sourceLinks,u)/g.sum(le.sourceLinks,l)-i(le))*te;le.y0+=ce,le.y1+=ce}})})}function U(){se.forEach(function(te){var ee,le,ce,pe=x,de=te.length;for(te.sort(m),ce=0;ce<de;++ce)(le=pe-(ee=te[ce]).y0)>0&&(ee.y0+=le,ee.y1+=le),pe=ee.y1+C;if((le=pe-C-M)>0)for(pe=ee.y0-=le,ee.y1-=le,ce=de-2;ce>=0;--ce)(le=(ee=te[ce]).y1+C-pe)>0&&(ee.y0-=le,ee.y1-=le),pe=ee.y0})}}function X(J){J.nodes.forEach(function(se){se.sourceLinks.sort(n),se.targetLinks.sort(o)}),J.nodes.forEach(function(se){var V=se.y0,j=V;se.sourceLinks.forEach(function(H){H.y0=V+H.width/2,V+=H.width}),se.targetLinks.forEach(function(H){H.y1=j+H.width/2,j+=H.width})})}return z.update=function(J){return X(J),J},z.nodeId=function(J){return arguments.length?(P="function"==typeof J?J:t(J),z):P},z.nodeAlign=function(J){return arguments.length?(L="function"==typeof J?J:t(J),z):L},z.nodeWidth=function(J){return arguments.length?(D=+J,z):D},z.nodePadding=function(J){return arguments.length?(C=+J,z):C},z.nodes=function(J){return arguments.length?(S="function"==typeof J?J:t(J),z):S},z.links=function(J){return arguments.length?(E="function"==typeof J?J:t(J),z):E},z.size=function(J){return arguments.length?(T=x=0,w=+J[0],M=+J[1],z):[w-T,M-x]},z.extent=function(J){return arguments.length?(T=+J[0][0],w=+J[1][0],x=+J[0][1],M=+J[1][1],z):[[T,x],[w,M]]},z.iterations=function(J){return arguments.length?(N=+J,z):N},z},p.sankeyCenter=function(T){return T.targetLinks.length?T.depth:T.sourceLinks.length?g.min(T.sourceLinks,e)-1:0},p.sankeyLeft=function(T){return T.depth},p.sankeyRight=function(T,x){return x-1-T.height},p.sankeyJustify=r,p.sankeyLinkHorizontal=function(){return y.linkHorizontal().source(_).target(c)},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-array"),v("d3-collection"),v("d3-shape")):g(p.d3=p.d3||{},p.d3,p.d3,p.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(v,ae,ie){(function(){var p={version:"3.8.0"},g=[].slice,b=function(me){return g.call(me)},y=self.document;function e(me){return me&&(me.ownerDocument||me.document||me).documentElement}function r(me){return me&&(me.ownerDocument&&me.ownerDocument.defaultView||me.document&&me||me.defaultView)}if(y)try{b(y.documentElement.childNodes)}catch{b=function(O){for(var F=O.length,B=new Array(F);F--;)B[F]=O[F];return B}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch{var t=this.Element.prototype,o=t.setAttribute,n=t.setAttributeNS,m=this.CSSStyleDeclaration.prototype,l=m.setProperty;t.setAttribute=function(O,F){o.call(this,O,F+"")},t.setAttributeNS=function(O,F,B){n.call(this,O,F,B+"")},m.setProperty=function(O,F,B){l.call(this,O,F+"",B)}}function i(me,O){return me<O?-1:me>O?1:me>=O?0:NaN}function f(me){return null===me?NaN:+me}function u(me){return!isNaN(me)}function s(me){return{left:function(O,F,B,W){for(arguments.length<3&&(B=0),arguments.length<4&&(W=O.length);B<W;){var fe=B+W>>>1;me(O[fe],F)<0?B=fe+1:W=fe}return B},right:function(O,F,B,W){for(arguments.length<3&&(B=0),arguments.length<4&&(W=O.length);B<W;){var fe=B+W>>>1;me(O[fe],F)>0?W=fe:B=fe+1}return B}}}p.ascending=i,p.descending=function(me,O){return O<me?-1:O>me?1:O>=me?0:NaN},p.min=function(me,O){var F,B,W=-1,fe=me.length;if(1===arguments.length){for(;++W<fe;)if(null!=(B=me[W])&&B>=B){F=B;break}for(;++W<fe;)null!=(B=me[W])&&F>B&&(F=B)}else{for(;++W<fe;)if(null!=(B=O.call(me,me[W],W))&&B>=B){F=B;break}for(;++W<fe;)null!=(B=O.call(me,me[W],W))&&F>B&&(F=B)}return F},p.max=function(me,O){var F,B,W=-1,fe=me.length;if(1===arguments.length){for(;++W<fe;)if(null!=(B=me[W])&&B>=B){F=B;break}for(;++W<fe;)null!=(B=me[W])&&B>F&&(F=B)}else{for(;++W<fe;)if(null!=(B=O.call(me,me[W],W))&&B>=B){F=B;break}for(;++W<fe;)null!=(B=O.call(me,me[W],W))&&B>F&&(F=B)}return F},p.extent=function(me,O){var F,B,W,fe=-1,ge=me.length;if(1===arguments.length){for(;++fe<ge;)if(null!=(B=me[fe])&&B>=B){F=W=B;break}for(;++fe<ge;)null!=(B=me[fe])&&(F>B&&(F=B),W<B&&(W=B))}else{for(;++fe<ge;)if(null!=(B=O.call(me,me[fe],fe))&&B>=B){F=W=B;break}for(;++fe<ge;)null!=(B=O.call(me,me[fe],fe))&&(F>B&&(F=B),W<B&&(W=B))}return[F,W]},p.sum=function(me,O){var F,B=0,W=me.length,fe=-1;if(1===arguments.length)for(;++fe<W;)u(F=+me[fe])&&(B+=F);else for(;++fe<W;)u(F=+O.call(me,me[fe],fe))&&(B+=F);return B},p.mean=function(me,O){var F,B=0,W=me.length,fe=-1,ge=W;if(1===arguments.length)for(;++fe<W;)u(F=f(me[fe]))?B+=F:--ge;else for(;++fe<W;)u(F=f(O.call(me,me[fe],fe)))?B+=F:--ge;if(ge)return B/ge},p.quantile=function(me,O){var F=(me.length-1)*O+1,B=Math.floor(F),W=+me[B-1],fe=F-B;return fe?W+fe*(me[B]-W):W},p.median=function(me,O){var F,B=[],W=me.length,fe=-1;if(1===arguments.length)for(;++fe<W;)u(F=f(me[fe]))&&B.push(F);else for(;++fe<W;)u(F=f(O.call(me,me[fe],fe)))&&B.push(F);if(B.length)return p.quantile(B.sort(i),.5)},p.variance=function(me,O){var F,B,W=me.length,fe=0,ge=0,we=-1,Ee=0;if(1===arguments.length)for(;++we<W;)u(F=f(me[we]))&&(ge+=(B=F-fe)*(F-(fe+=B/++Ee)));else for(;++we<W;)u(F=f(O.call(me,me[we],we)))&&(ge+=(B=F-fe)*(F-(fe+=B/++Ee)));if(Ee>1)return ge/(Ee-1)},p.deviation=function(){var me=p.variance.apply(this,arguments);return me&&Math.sqrt(me)};var d=s(i);function h(me){return me.length}p.bisectLeft=d.left,p.bisect=p.bisectRight=d.right,p.bisector=function(me){return s(1===me.length?function(O,F){return i(me(O),F)}:me)},p.shuffle=function(me,O,F){(fe=arguments.length)<3&&(F=me.length,fe<2&&(O=0));for(var B,W,fe=F-O;fe;)W=Math.random()*fe--|0,B=me[fe+O],me[fe+O]=me[W+O],me[W+O]=B;return me},p.permute=function(me,O){for(var F=O.length,B=new Array(F);F--;)B[F]=me[O[F]];return B},p.pairs=function(me){for(var O=0,F=me.length-1,B=me[0],W=new Array(F<0?0:F);O<F;)W[O]=[B,B=me[++O]];return W},p.transpose=function(me){if(!(W=me.length))return[];for(var O=-1,F=p.min(me,h),B=new Array(F);++O<F;)for(var W,fe=-1,ge=B[O]=new Array(W);++fe<W;)ge[fe]=me[fe][O];return B},p.zip=function(){return p.transpose(arguments)},p.keys=function(me){var O=[];for(var F in me)O.push(F);return O},p.values=function(me){var O=[];for(var F in me)O.push(me[F]);return O},p.entries=function(me){var O=[];for(var F in me)O.push({key:F,value:me[F]});return O},p.merge=function(me){for(var O,F,B,W=me.length,fe=-1,ge=0;++fe<W;)ge+=me[fe].length;for(F=new Array(ge);--W>=0;)for(O=(B=me[W]).length;--O>=0;)F[--ge]=B[O];return F};var a=Math.abs;function _(me){for(var O=1;me*O%1;)O*=10;return O}function c(me,O){for(var F in O)Object.defineProperty(me.prototype,F,{value:O[F],enumerable:!1})}function T(){this._=Object.create(null)}function x(me){return"__proto__"==(me+="")||"\0"===me[0]?"\0"+me:me}function w(me){return"\0"===(me+="")[0]?me.slice(1):me}function M(me){return x(me)in this._}function D(me){return(me=x(me))in this._&&delete this._[me]}function C(){var me=[];for(var O in this._)me.push(w(O));return me}function P(){var me=0;for(var O in this._)++me;return me}function L(){for(var me in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(me){return me}function N(me,O,F){return function(){var B=F.apply(O,arguments);return B===O?me:B}}function z(me,O){if(O in me)return O;O=O.charAt(0).toUpperCase()+O.slice(1);for(var F=0,B=q.length;F<B;++F){var W=q[F]+O;if(W in me)return W}}p.range=function(me,O,F){if(arguments.length<3&&(F=1,arguments.length<2&&(O=me,me=0)),(O-me)/F==1/0)throw new Error("infinite range");var B,W=[],fe=_(a(F)),ge=-1;if(me*=fe,O*=fe,(F*=fe)<0)for(;(B=me+F*++ge)>O;)W.push(B/fe);else for(;(B=me+F*++ge)<O;)W.push(B/fe);return W},p.map=function(me,O){var F=new T;if(me instanceof T)me.forEach(function(we,Ee){F.set(we,Ee)});else if(Array.isArray(me)){var B,W=-1,fe=me.length;if(1===arguments.length)for(;++W<fe;)F.set(W,me[W]);else for(;++W<fe;)F.set(O.call(me,B=me[W],W),B)}else for(var ge in me)F.set(ge,me[ge]);return F},c(T,{has:M,get:function(me){return this._[x(me)]},set:function(me,O){return this._[x(me)]=O},remove:D,keys:C,values:function(){var me=[];for(var O in this._)me.push(this._[O]);return me},entries:function(){var me=[];for(var O in this._)me.push({key:w(O),value:this._[O]});return me},size:P,empty:L,forEach:function(me){for(var O in this._)me.call(this,w(O),this._[O])}}),p.nest=function(){var me,O,F={},B=[],W=[];function fe(ge,we,Ee){if(Ee>=B.length)return O?O.call(F,we):me?we.sort(me):we;for(var Pe,$e,ot,pt,Dt=-1,zt=we.length,Pt=B[Ee++],Nt=new T;++Dt<zt;)(pt=Nt.get(Pe=Pt($e=we[Dt])))?pt.push($e):Nt.set(Pe,[$e]);return ge?($e=ge(),ot=function(Et,Zt){$e.set(Et,fe(ge,Zt,Ee))}):($e={},ot=function(Et,Zt){$e[Et]=fe(ge,Zt,Ee)}),Nt.forEach(ot),$e}return F.map=function(ge,we){return fe(we,ge,0)},F.entries=function(ge){return function we(Ee,Pe){if(Pe>=B.length)return Ee;var $e=[],ot=W[Pe++];return Ee.forEach(function(pt,Dt){$e.push({key:pt,values:we(Dt,Pe)})}),ot?$e.sort(function(pt,Dt){return ot(pt.key,Dt.key)}):$e}(fe(p.map,ge,0),0)},F.key=function(ge){return B.push(ge),F},F.sortKeys=function(ge){return W[B.length-1]=ge,F},F.sortValues=function(ge){return me=ge,F},F.rollup=function(ge){return O=ge,F},F},p.set=function(me){var O=new S;if(me)for(var F=0,B=me.length;F<B;++F)O.add(me[F]);return O},c(S,{has:M,add:function(me){return this._[x(me+="")]=!0,me},remove:D,values:C,size:P,empty:L,forEach:function(me){for(var O in this._)me.call(this,w(O))}}),p.behavior={},p.rebind=function(me,O){for(var F,B=1,W=arguments.length;++B<W;)me[F=arguments[B]]=N(me,O,O[F]);return me};var q=["webkit","ms","moz","Moz","o","O"];function G(){}function K(){}function ne(me){var O=[],F=new T;function B(){for(var W,fe=O,ge=-1,we=fe.length;++ge<we;)(W=fe[ge].on)&&W.apply(this,arguments);return me}return B.on=function(W,fe){var ge,we=F.get(W);return arguments.length<2?we&&we.on:(we&&(we.on=null,O=O.slice(0,ge=O.indexOf(we)).concat(O.slice(ge+1)),F.remove(W)),fe&&O.push(F.set(W,{on:fe})),me)},B}function X(){p.event.preventDefault()}function J(){for(var me,O=p.event;me=O.sourceEvent;)O=me;return O}function se(me){for(var O=new K,F=0,B=arguments.length;++F<B;)O[arguments[F]]=ne(O);return O.of=function(W,fe){return function(ge){try{var we=ge.sourceEvent=p.event;ge.target=me,p.event=ge,O[ge.type].apply(W,fe)}finally{p.event=we}}},O}p.dispatch=function(){for(var me=new K,O=-1,F=arguments.length;++O<F;)me[arguments[O]]=ne(me);return me},K.prototype.on=function(me,O){var F=me.indexOf("."),B="";if(F>=0&&(B=me.slice(F+1),me=me.slice(0,F)),me)return arguments.length<2?this[me].on(B):this[me].on(B,O);if(2===arguments.length){if(null==O)for(me in this)this.hasOwnProperty(me)&&this[me].on(B,null);return this}},p.event=null,p.requote=function(me){return me.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,j={}.__proto__?function(me,O){me.__proto__=O}:function(me,O){for(var F in O)me[F]=O[F]};function H(me){return j(me,ee),me}var oe=function(me,O){return O.querySelector(me)},U=function(me,O){return O.querySelectorAll(me)},te=function(me,O){var F=me.matches||me[z(me,"matchesSelector")];return(te=function(B,W){return F.call(B,W)})(me,O)};"function"==typeof Sizzle&&(oe=function(me,O){return Sizzle(me,O)[0]||null},U=Sizzle,te=Sizzle.matchesSelector),p.selection=function(){return p.select(y.documentElement)};var ee=p.selection.prototype=[];function le(me){return"function"==typeof me?me:function(){return oe(me,this)}}function ce(me){return"function"==typeof me?me:function(){return U(me,this)}}ee.select=function(me){var O,F,B,W,fe=[];me=le(me);for(var ge=-1,we=this.length;++ge<we;){fe.push(O=[]),O.parentNode=(B=this[ge]).parentNode;for(var Ee=-1,Pe=B.length;++Ee<Pe;)(W=B[Ee])?(O.push(F=me.call(W,W.__data__,Ee,ge)),F&&"__data__"in W&&(F.__data__=W.__data__)):O.push(null)}return H(fe)},ee.selectAll=function(me){var O,F,B=[];me=ce(me);for(var W=-1,fe=this.length;++W<fe;)for(var ge=this[W],we=-1,Ee=ge.length;++we<Ee;)(F=ge[we])&&(B.push(O=b(me.call(F,F.__data__,we,W))),O.parentNode=F);return H(B)};var pe="http://www.w3.org/1999/xhtml",de={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function be(me,O){return me=p.ns.qualify(me),null==O?me.local?function(){this.removeAttributeNS(me.space,me.local)}:function(){this.removeAttribute(me)}:"function"==typeof O?me.local?function(){var F=O.apply(this,arguments);null==F?this.removeAttributeNS(me.space,me.local):this.setAttributeNS(me.space,me.local,F)}:function(){var F=O.apply(this,arguments);null==F?this.removeAttribute(me):this.setAttribute(me,F)}:me.local?function(){this.setAttributeNS(me.space,me.local,O)}:function(){this.setAttribute(me,O)}}function he(me){return me.trim().replace(/\s+/g," ")}function xe(me){return new RegExp("(?:^|\\s+)"+p.requote(me)+"(?:\\s+|$)","g")}function De(me){return(me+"").trim().split(/^|\s+/)}function Se(me,O){var F=(me=De(me).map(ke)).length;return"function"==typeof O?function(){for(var B=-1,W=O.apply(this,arguments);++B<F;)me[B](this,W)}:function(){for(var B=-1;++B<F;)me[B](this,O)}}function ke(me){var O=xe(me);return function(F,B){if(W=F.classList)return B?W.add(me):W.remove(me);var W=F.getAttribute("class")||"";B?(O.lastIndex=0,O.test(W)||F.setAttribute("class",he(W+" "+me))):F.setAttribute("class",he(W.replace(O," ")))}}function Fe(me,O,F){return null==O?function(){this.style.removeProperty(me)}:"function"==typeof O?function(){var B=O.apply(this,arguments);null==B?this.style.removeProperty(me):this.style.setProperty(me,B,F)}:function(){this.style.setProperty(me,O,F)}}function ve(me,O){return null==O?function(){delete this[me]}:"function"==typeof O?function(){var F=O.apply(this,arguments);null==F?delete this[me]:this[me]=F}:function(){this[me]=O}}function Te(me){return"function"==typeof me?me:(me=p.ns.qualify(me)).local?function(){return this.ownerDocument.createElementNS(me.space,me.local)}:function(){var O=this.ownerDocument,F=this.namespaceURI;return F===pe&&O.documentElement.namespaceURI===pe?O.createElement(me):O.createElementNS(F,me)}}function Le(){var me=this.parentNode;me&&me.removeChild(this)}function Oe(me){return{__data__:me}}function Ne(me){return function(){return te(this,me)}}function Be(me){return arguments.length||(me=i),function(O,F){return O&&F?me(O.__data__,F.__data__):!O-!F}}function He(me,O){for(var F=0,B=me.length;F<B;F++)for(var W,fe=me[F],ge=0,we=fe.length;ge<we;ge++)(W=fe[ge])&&O(W,ge,F);return me}function Ve(me){return j(me,it),me}p.ns={prefix:de,qualify:function(me){var O=me.indexOf(":"),F=me;return O>=0&&"xmlns"!==(F=me.slice(0,O))&&(me=me.slice(O+1)),de.hasOwnProperty(F)?{space:de[F],local:me}:me}},ee.attr=function(me,O){if(arguments.length<2){if("string"==typeof me){var F=this.node();return(me=p.ns.qualify(me)).local?F.getAttributeNS(me.space,me.local):F.getAttribute(me)}for(O in me)this.each(be(O,me[O]));return this}return this.each(be(me,O))},ee.classed=function(me,O){if(arguments.length<2){if("string"==typeof me){var F=this.node(),B=(me=De(me)).length,W=-1;if(O=F.classList){for(;++W<B;)if(!O.contains(me[W]))return!1}else for(O=F.getAttribute("class");++W<B;)if(!xe(me[W]).test(O))return!1;return!0}for(O in me)this.each(Se(O,me[O]));return this}return this.each(Se(me,O))},ee.style=function(me,O,F){var B=arguments.length;if(B<3){if("string"!=typeof me){for(F in B<2&&(O=""),me)this.each(Fe(F,me[F],O));return this}if(B<2){var W=this.node();return r(W).getComputedStyle(W,null).getPropertyValue(me)}F=""}return this.each(Fe(me,O,F))},ee.property=function(me,O){if(arguments.length<2){if("string"==typeof me)return this.node()[me];for(O in me)this.each(ve(O,me[O]));return this}return this.each(ve(me,O))},ee.text=function(me){return arguments.length?this.each("function"==typeof me?function(){var O=me.apply(this,arguments);this.textContent=O??""}:null==me?function(){this.textContent=""}:function(){this.textContent=me}):this.node().textContent},ee.html=function(me){return arguments.length?this.each("function"==typeof me?function(){var O=me.apply(this,arguments);this.innerHTML=O??""}:null==me?function(){this.innerHTML=""}:function(){this.innerHTML=me}):this.node().innerHTML},ee.append=function(me){return me=Te(me),this.select(function(){return this.appendChild(me.apply(this,arguments))})},ee.insert=function(me,O){return me=Te(me),O=le(O),this.select(function(){return this.insertBefore(me.apply(this,arguments),O.apply(this,arguments)||null)})},ee.remove=function(){return this.each(Le)},ee.data=function(me,O){var F,B,W=-1,fe=this.length;if(!arguments.length){for(me=new Array(fe=(F=this[0]).length);++W<fe;)(B=F[W])&&(me[W]=B.__data__);return me}function ge($e,ot){var pt,Dt,zt,Pt=$e.length,Nt=ot.length,Et=Math.min(Pt,Nt),Zt=new Array(Nt),qt=new Array(Nt),Jt=new Array(Pt);if(O){var gn,On=new T,Yn=new Array(Pt);for(pt=-1;++pt<Pt;)(Dt=$e[pt])&&(On.has(gn=O.call(Dt,Dt.__data__,pt))?Jt[pt]=Dt:On.set(gn,Dt),Yn[pt]=gn);for(pt=-1;++pt<Nt;)(Dt=On.get(gn=O.call(ot,zt=ot[pt],pt)))?!0!==Dt&&(Zt[pt]=Dt,Dt.__data__=zt):qt[pt]=Oe(zt),On.set(gn,!0);for(pt=-1;++pt<Pt;)pt in Yn&&!0!==On.get(Yn[pt])&&(Jt[pt]=$e[pt])}else{for(pt=-1;++pt<Et;)zt=ot[pt],(Dt=$e[pt])?(Dt.__data__=zt,Zt[pt]=Dt):qt[pt]=Oe(zt);for(;pt<Nt;++pt)qt[pt]=Oe(ot[pt]);for(;pt<Pt;++pt)Jt[pt]=$e[pt]}qt.update=Zt,qt.parentNode=Zt.parentNode=Jt.parentNode=$e.parentNode,we.push(qt),Ee.push(Zt),Pe.push(Jt)}var we=Ve([]),Ee=H([]),Pe=H([]);if("function"==typeof me)for(;++W<fe;)ge(F=this[W],me.call(F,F.parentNode.__data__,W));else for(;++W<fe;)ge(F=this[W],me);return Ee.enter=function(){return we},Ee.exit=function(){return Pe},Ee},ee.datum=function(me){return arguments.length?this.property("__data__",me):this.property("__data__")},ee.filter=function(me){var O,F,B,W=[];"function"!=typeof me&&(me=Ne(me));for(var fe=0,ge=this.length;fe<ge;fe++){W.push(O=[]),O.parentNode=(F=this[fe]).parentNode;for(var we=0,Ee=F.length;we<Ee;we++)(B=F[we])&&me.call(B,B.__data__,we,fe)&&O.push(B)}return H(W)},ee.order=function(){for(var me=-1,O=this.length;++me<O;)for(var F,B=this[me],W=B.length-1,fe=B[W];--W>=0;)(F=B[W])&&(fe&&fe!==F.nextSibling&&fe.parentNode.insertBefore(F,fe),fe=F);return this},ee.sort=function(me){me=Be.apply(this,arguments);for(var O=-1,F=this.length;++O<F;)this[O].sort(me);return this.order()},ee.each=function(me){return He(this,function(O,F,B){me.call(O,O.__data__,F,B)})},ee.call=function(me){var O=b(arguments);return me.apply(O[0]=this,O),this},ee.empty=function(){return!this.node()},ee.node=function(){for(var me=0,O=this.length;me<O;me++)for(var F=this[me],B=0,W=F.length;B<W;B++){var fe=F[B];if(fe)return fe}return null},ee.size=function(){var me=0;return He(this,function(){++me}),me};var it=[];function ze(me){var O,F;return function(B,W,fe){var ge,we=me[fe].update,Ee=we.length;for(fe!=F&&(F=fe,O=0),W>=O&&(O=W+1);!(ge=we[O])&&++O<Ee;);return ge}}function je(me,O,F){var B="__on"+me,W=me.indexOf("."),fe=Ye;W>0&&(me=me.slice(0,W));var ge=qe.get(me);function we(){var Ee=this[B];Ee&&(this.removeEventListener(me,Ee,Ee.$),delete this[B])}return ge&&(me=ge,fe=ct),W?O?function(){var Ee=fe(O,b(arguments));we.call(this),this.addEventListener(me,this[B]=Ee,Ee.$=F),Ee._=O}:we:O?G:function(){var Ee,Pe=new RegExp("^__on([^.]+)"+p.requote(me)+"$");for(var $e in this)if(Ee=$e.match(Pe)){var ot=this[$e];this.removeEventListener(Ee[1],ot,ot.$),delete this[$e]}}}p.selection.enter=Ve,p.selection.enter.prototype=it,it.append=ee.append,it.empty=ee.empty,it.node=ee.node,it.call=ee.call,it.size=ee.size,it.select=function(me){for(var O,F,B,W,fe,ge=[],we=-1,Ee=this.length;++we<Ee;){B=(W=this[we]).update,ge.push(O=[]),O.parentNode=W.parentNode;for(var Pe=-1,$e=W.length;++Pe<$e;)(fe=W[Pe])?(O.push(B[Pe]=F=me.call(W.parentNode,fe.__data__,Pe,we)),F.__data__=fe.__data__):O.push(null)}return H(ge)},it.insert=function(me,O){return arguments.length<2&&(O=ze(this)),ee.insert.call(this,me,O)},p.select=function(me){var O;return"string"==typeof me?(O=[oe(me,y)]).parentNode=y.documentElement:(O=[me]).parentNode=e(me),H([O])},p.selectAll=function(me){var O;return"string"==typeof me?(O=b(U(me,y))).parentNode=y.documentElement:(O=b(me)).parentNode=null,H([O])},ee.on=function(me,O,F){var B=arguments.length;if(B<3){if("string"!=typeof me){for(F in B<2&&(O=!1),me)this.each(je(F,me[F],O));return this}if(B<2)return(B=this.node()["__on"+me])&&B._;F=!1}return this.each(je(me,O,F))};var qe=p.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ye(me,O){return function(F){var B=p.event;p.event=F,O[0]=this.__data__;try{me.apply(this,O)}finally{p.event=B}}}function ct(me,O){var F=Ye(me,O);return function(B){var W=B.relatedTarget;W&&(W===this||8&W.compareDocumentPosition(this))||F.call(this,B)}}y&&qe.forEach(function(me){"on"+me in y&&qe.remove(me)});var vt,wt=0;function Ot(me){var O=".dragsuppress-"+ ++wt,F="click"+O,B=p.select(r(me)).on("touchmove"+O,X).on("dragstart"+O,X).on("selectstart"+O,X);if(null==vt&&(vt=!("onselectstart"in me)&&z(me.style,"userSelect")),vt){var W=e(me).style,fe=W[vt];W[vt]="none"}return function(ge){if(B.on(O,null),vt&&(W[vt]=fe),ge){var we=function(){B.on(F,null)};B.on(F,function(){X(),we()},!0),setTimeout(we,0)}}}p.mouse=function(me){return ft(me,J())};var St=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ft(me,O){O.changedTouches&&(O=O.changedTouches[0]);var F=me.ownerSVGElement||me;if(F.createSVGPoint){var B=F.createSVGPoint();if(St<0){var W=r(me);if(W.scrollX||W.scrollY){var fe=(F=p.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();St=!(fe.f||fe.e),F.remove()}}return St?(B.x=O.pageX,B.y=O.pageY):(B.x=O.clientX,B.y=O.clientY),[(B=B.matrixTransform(me.getScreenCTM().inverse())).x,B.y]}var ge=me.getBoundingClientRect();return[O.clientX-ge.left-me.clientLeft,O.clientY-ge.top-me.clientTop]}function st(){return p.event.changedTouches[0].identifier}p.touch=function(me,O,F){if(arguments.length<3&&(F=O,O=J().changedTouches),O)for(var B,W=0,fe=O.length;W<fe;++W)if((B=O[W]).identifier===F)return ft(me,B)},p.behavior.drag=function(){var me=se(W,"drag","dragstart","dragend"),O=null,F=fe(G,p.mouse,r,"mousemove","mouseup"),B=fe(st,p.touch,E,"touchmove","touchend");function W(){this.on("mousedown.drag",F).on("touchstart.drag",B)}function fe(ge,we,Ee,Pe,$e){return function(){var ot,pt=this,Dt=p.event.target.correspondingElement||p.event.target,zt=pt.parentNode,Pt=me.of(pt,arguments),Nt=0,Et=ge(),Zt=".drag"+(null==Et?"":"-"+Et),qt=p.select(Ee(Dt)).on(Pe+Zt,On).on($e+Zt,Yn),Jt=Ot(Dt),gn=we(zt,Et);function On(){var Hn,vr,gr=we(zt,Et);gr&&(Nt|=(Hn=gr[0]-gn[0])|(vr=gr[1]-gn[1]),gn=gr,Pt({type:"drag",x:gr[0]+ot[0],y:gr[1]+ot[1],dx:Hn,dy:vr}))}function Yn(){we(zt,Et)&&(qt.on(Pe+Zt,null).on($e+Zt,null),Jt(Nt),Pt({type:"dragend"}))}ot=O?[(ot=O.apply(pt,arguments)).x-gn[0],ot.y-gn[1]]:[0,0],Pt({type:"dragstart"})}}return W.origin=function(ge){return arguments.length?(O=ge,W):O},p.rebind(W,me,"on")},p.touches=function(me,O){return arguments.length<2&&(O=J().touches),O?b(O).map(function(F){var B=ft(me,F);return B.identifier=F.identifier,B}):[]};var Ct=1e-6,$t=Math.PI,rn=2*$t,hn=rn-Ct,cn=$t/2,mn=$t/180,nn=180/$t;function Xe(me){return me>1?cn:me<-1?-cn:Math.asin(me)}function nt(me){return((me=Math.exp(me))+1/me)/2}var ye=Math.SQRT2;p.interpolateZoom=function(me,O){var F,B,W=me[0],fe=me[1],ge=me[2],Pe=O[2],$e=O[0]-W,ot=O[1]-fe,pt=$e*$e+ot*ot;if(pt<1e-12)B=Math.log(Pe/ge)/ye,F=function(Zt){return[W+Zt*$e,fe+Zt*ot,ge*Math.exp(ye*Zt*B)]};else{var Dt=Math.sqrt(pt),zt=(Pe*Pe-ge*ge+4*pt)/(2*ge*2*Dt),Pt=(Pe*Pe-ge*ge-4*pt)/(2*Pe*2*Dt),Nt=Math.log(Math.sqrt(zt*zt+1)-zt),Et=Math.log(Math.sqrt(Pt*Pt+1)-Pt);B=(Et-Nt)/ye,F=function(Zt){var qt,Yn,Jt=Zt*B,gn=nt(Nt),On=ge/(2*Dt)*(gn*(qt=ye*Jt+Nt,((qt=Math.exp(2*qt))-1)/(qt+1))-(Yn=Nt,((Yn=Math.exp(Yn))-1/Yn)/2));return[W+On*$e,fe+On*ot,ge*gn/nt(ye*Jt+Nt)]}}return F.duration=1e3*B,F},p.behavior.zoom=function(){var me,O,F,B,W,fe,ge,we,Ee,Pe={x:0,y:0,k:1},$e=[960,500],ot=Qe,pt=250,Dt=0,zt="mousedown.zoom",Pt="mousemove.zoom",Nt="mouseup.zoom",Et="touchstart.zoom",Zt=se(qt,"zoomstart","zoom","zoomend");function qt(ur){ur.on(zt,Cr).on(Ue+".zoom",di).on("dblclick.zoom",Oi).on(Et,ii)}function Jt(ur){return[(ur[0]-Pe.x)/Pe.k,(ur[1]-Pe.y)/Pe.k]}function gn(ur){Pe.k=Math.max(ot[0],Math.min(ot[1],ur))}function On(ur,Gr){var hi;Pe.x+=ur[0]-(Gr=[(hi=Gr)[0]*Pe.k+Pe.x,hi[1]*Pe.k+Pe.y])[0],Pe.y+=ur[1]-Gr[1]}function Yn(ur,Gr,hi,si){ur.__chart__={x:Pe.x,y:Pe.y,k:Pe.k},gn(Math.pow(2,si)),On(O=Gr,hi),ur=p.select(ur),pt>0&&(ur=ur.transition().duration(pt)),ur.call(qt.event)}function Hn(){ge&&ge.domain(fe.range().map(function(ur){return(ur-Pe.x)/Pe.k}).map(fe.invert)),Ee&&Ee.domain(we.range().map(function(ur){return(ur-Pe.y)/Pe.k}).map(we.invert))}function vr(ur){Dt++||ur({type:"zoomstart"})}function gr(ur){Hn(),ur({type:"zoom",scale:Pe.k,translate:[Pe.x,Pe.y]})}function Pr(ur){--Dt||(ur({type:"zoomend"}),O=null)}function Cr(){var ur=this,Gr=Zt.of(ur,arguments),hi=0,si=p.select(r(ur)).on(Pt,Xi).on(Nt,bi),wi=Jt(p.mouse(ur)),Ii=Ot(ur);function Xi(){hi=1,On(p.mouse(ur),wi),gr(Gr)}function bi(){si.on(Pt,null).on(Nt,null),Ii(hi),Pr(Gr)}Sl.call(ur),vr(Gr)}function ii(){var ur,Gr=this,hi=Zt.of(Gr,arguments),si={},wi=0,Ii=".zoom-"+p.event.changedTouches[0].identifier,Xi="touchmove"+Ii,bi="touchend"+Ii,qi=[],zi=p.select(Gr),ta=Ot(Gr);function Yi(){var uo=p.touches(Gr);return ur=Pe.k,uo.forEach(function(fo){fo.identifier in si&&(si[fo.identifier]=Jt(fo))}),uo}function na(){var uo=p.event.target;p.select(uo).on(Xi,fa).on(bi,Ha),qi.push(uo);for(var fo=p.event.changedTouches,Fa=0,ao=fo.length;Fa<ao;++Fa)si[fo[Fa].identifier]=null;var Ka=Yi(),as=Date.now();if(1===Ka.length){if(as-W<500){var Oo=Ka[0];Yn(Gr,Oo,si[Oo.identifier],Math.floor(Math.log(Pe.k)/Math.LN2)+1),X()}W=as}else if(Ka.length>1){var Ms=Ka[1],wl=(Oo=Ka[0])[0]-Ms[0],zl=Oo[1]-Ms[1];wi=wl*wl+zl*zl}}function fa(){var uo,fo,Fa,ao,Ka=p.touches(Gr);Sl.call(Gr);for(var as=0,Oo=Ka.length;as<Oo;++as,ao=null)if(ao=si[(Fa=Ka[as]).identifier]){if(fo)break;uo=Fa,fo=ao}if(ao){var Ms=(Ms=Fa[0]-uo[0])*Ms+(Ms=Fa[1]-uo[1])*Ms,wl=wi&&Math.sqrt(Ms/wi);uo=[(uo[0]+Fa[0])/2,(uo[1]+Fa[1])/2],fo=[(fo[0]+ao[0])/2,(fo[1]+ao[1])/2],gn(wl*ur)}W=null,On(uo,fo),gr(hi)}function Ha(){if(p.event.touches.length){for(var uo=p.event.changedTouches,fo=0,Fa=uo.length;fo<Fa;++fo)delete si[uo[fo].identifier];for(var ao in si)return void Yi()}p.selectAll(qi).on(Ii,null),zi.on(zt,Cr).on(Et,ii),ta(),Pr(hi)}na(),vr(hi),zi.on(zt,null).on(Et,na)}function di(){var ur=Zt.of(this,arguments);B?clearTimeout(B):(Sl.call(this),me=Jt(O=F||p.mouse(this)),vr(ur)),B=setTimeout(function(){B=null,Pr(ur)},50),X(),gn(Math.pow(2,.002*Ce())*Pe.k),On(O,me),gr(ur)}function Oi(){var ur=p.mouse(this),Gr=Math.log(Pe.k)/Math.LN2;Yn(this,ur,Jt(ur),p.event.shiftKey?Math.ceil(Gr)-1:Math.floor(Gr)+1)}return Ue||(Ue="onwheel"in y?(Ce=function(){return-p.event.deltaY*(p.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(Ce=function(){return p.event.wheelDelta},"mousewheel"):(Ce=function(){return-p.event.detail},"MozMousePixelScroll")),qt.event=function(ur){ur.each(function(){var Gr=Zt.of(this,arguments),hi=Pe;ul?p.select(this).transition().each("start.zoom",function(){Pe=this.__chart__||{x:0,y:0,k:1},vr(Gr)}).tween("zoom:zoom",function(){var si=$e[0],Ii=O?O[0]:si/2,Xi=O?O[1]:$e[1]/2,bi=p.interpolateZoom([(Ii-Pe.x)/Pe.k,(Xi-Pe.y)/Pe.k,si/Pe.k],[(Ii-hi.x)/hi.k,(Xi-hi.y)/hi.k,si/hi.k]);return function(qi){var zi=bi(qi),ta=si/zi[2];this.__chart__=Pe={x:Ii-zi[0]*ta,y:Xi-zi[1]*ta,k:ta},gr(Gr)}}).each("interrupt.zoom",function(){Pr(Gr)}).each("end.zoom",function(){Pr(Gr)}):(this.__chart__=Pe,vr(Gr),gr(Gr),Pr(Gr))})},qt.translate=function(ur){return arguments.length?(Pe={x:+ur[0],y:+ur[1],k:Pe.k},Hn(),qt):[Pe.x,Pe.y]},qt.scale=function(ur){return arguments.length?(Pe={x:Pe.x,y:Pe.y,k:null},gn(+ur),Hn(),qt):Pe.k},qt.scaleExtent=function(ur){return arguments.length?(ot=null==ur?Qe:[+ur[0],+ur[1]],qt):ot},qt.center=function(ur){return arguments.length?(F=ur&&[+ur[0],+ur[1]],qt):F},qt.size=function(ur){return arguments.length?($e=ur&&[+ur[0],+ur[1]],qt):$e},qt.duration=function(ur){return arguments.length?(pt=+ur,qt):pt},qt.x=function(ur){return arguments.length?(ge=ur,fe=ur.copy(),Pe={x:0,y:0,k:1},qt):ge},qt.y=function(ur){return arguments.length?(Ee=ur,we=ur.copy(),Pe={x:0,y:0,k:1},qt):Ee},p.rebind(qt,Zt,"on")};var Ce,Ue,Qe=[0,1/0];function rt(){}function Ke(me,O,F){return this instanceof Ke?(this.h=+me,this.s=+O,void(this.l=+F)):arguments.length<2?me instanceof Ke?new Ke(me.h,me.s,me.l):Vn(""+me,Tn,Ke):new Ke(me,O,F)}p.color=rt,rt.prototype.toString=function(){return this.rgb()+""},p.hsl=Ke;var gt=Ke.prototype=new rt;function mt(me,O,F){var B,W;function fe(ge){return Math.round(255*((we=ge)>360?we-=360:we<0&&(we+=360),we<60?B+(W-B)*we/60:we<180?W:we<240?B+(W-B)*(240-we)/60:B));var we}return me=isNaN(me)?0:(me%=360)<0?me+360:me,O=isNaN(O)||O<0?0:O>1?1:O,B=2*(F=F<0?0:F>1?1:F)-(W=F<=.5?F*(1+O):F+O-F*O),new Rt(fe(me+120),fe(me),fe(me-120))}function Lt(me,O,F){return this instanceof Lt?(this.h=+me,this.c=+O,void(this.l=+F)):arguments.length<2?me instanceof Lt?new Lt(me.h,me.c,me.l):Ie(me instanceof bt?me.l:(me=sn((me=p.rgb(me)).r,me.g,me.b)).l,me.a,me.b):new Lt(me,O,F)}gt.brighter=function(me){return me=Math.pow(.7,arguments.length?me:1),new Ke(this.h,this.s,this.l/me)},gt.darker=function(me){return me=Math.pow(.7,arguments.length?me:1),new Ke(this.h,this.s,me*this.l)},gt.rgb=function(){return mt(this.h,this.s,this.l)},p.hcl=Lt;var Vt=Lt.prototype=new rt;function dt(me,O,F){return isNaN(me)&&(me=0),isNaN(O)&&(O=0),new bt(F,Math.cos(me*=mn)*O,Math.sin(me)*O)}function bt(me,O,F){return this instanceof bt?(this.l=+me,this.a=+O,void(this.b=+F)):arguments.length<2?me instanceof bt?new bt(me.l,me.a,me.b):me instanceof Lt?dt(me.h,me.c,me.l):sn((me=Rt(me)).r,me.g,me.b):new bt(me,O,F)}Vt.brighter=function(me){return new Lt(this.h,this.c,Math.min(100,this.l+Yt*(arguments.length?me:1)))},Vt.darker=function(me){return new Lt(this.h,this.c,Math.max(0,this.l-Yt*(arguments.length?me:1)))},Vt.rgb=function(){return dt(this.h,this.c,this.l).rgb()},p.lab=bt;var Yt=18,It=bt.prototype=new rt;function jt(me,O,F){var B=(me+16)/116,W=B+O/500,fe=B-F/200;return new Rt(xt(3.2404542*(W=.95047*et(W))-1.5371385*(B=1*et(B))-.4985314*(fe=1.08883*et(fe))),xt(-.969266*W+1.8760108*B+.041556*fe),xt(.0556434*W-.2040259*B+1.0572252*fe))}function Ie(me,O,F){return me>0?new Lt(Math.atan2(F,O)*nn,Math.sqrt(O*O+F*F),me):new Lt(NaN,NaN,me)}function et(me){return me>.206893034?me*me*me:(me-4/29)/7.787037}function ht(me){return me>.008856?Math.pow(me,1/3):7.787037*me+4/29}function xt(me){return Math.round(255*(me<=.00304?12.92*me:1.055*Math.pow(me,1/2.4)-.055))}function Rt(me,O,F){return this instanceof Rt?(this.r=~~me,this.g=~~O,void(this.b=~~F)):arguments.length<2?me instanceof Rt?new Rt(me.r,me.g,me.b):Vn(""+me,Rt,mt):new Rt(me,O,F)}function Xt(me){return new Rt(me>>16,me>>8&255,255&me)}function tn(me){return Xt(me)+""}It.brighter=function(me){return new bt(Math.min(100,this.l+Yt*(arguments.length?me:1)),this.a,this.b)},It.darker=function(me){return new bt(Math.max(0,this.l-Yt*(arguments.length?me:1)),this.a,this.b)},It.rgb=function(){return jt(this.l,this.a,this.b)},p.rgb=Rt;var Kt=Rt.prototype=new rt;function kn(me){return me<16?"0"+Math.max(0,me).toString(16):Math.min(255,me).toString(16)}function Vn(me,O,F){var B,W,fe,ge=0,we=0,Ee=0;if(B=/([a-z]+)\((.*)\)/.exec(me=me.toLowerCase()))switch(W=B[2].split(","),B[1]){case"hsl":return F(parseFloat(W[0]),parseFloat(W[1])/100,parseFloat(W[2])/100);case"rgb":return O(dn(W[0]),dn(W[1]),dn(W[2]))}return(fe=Mn.get(me))?O(fe.r,fe.g,fe.b):(null==me||"#"!==me.charAt(0)||isNaN(fe=parseInt(me.slice(1),16))||(4===me.length?(ge=(3840&fe)>>4,ge|=ge>>4,we=240&fe,we|=we>>4,Ee=15&fe,Ee|=Ee<<4):7===me.length&&(ge=(16711680&fe)>>16,we=(65280&fe)>>8,Ee=255&fe)),O(ge,we,Ee))}function Tn(me,O,F){var B,W,fe=Math.min(me/=255,O/=255,F/=255),ge=Math.max(me,O,F),we=ge-fe,Ee=(ge+fe)/2;return we?(W=Ee<.5?we/(ge+fe):we/(2-ge-fe),B=me==ge?(O-F)/we+(O<F?6:0):O==ge?(F-me)/we+2:(me-O)/we+4,B*=60):(B=NaN,W=Ee>0&&Ee<1?0:B),new Ke(B,W,Ee)}function sn(me,O,F){var B=ht((.4124564*(me=fn(me))+.3575761*(O=fn(O))+.1804375*(F=fn(F)))/.95047),W=ht((.2126729*me+.7151522*O+.072175*F)/1);return bt(116*W-16,500*(B-W),200*(W-ht((.0193339*me+.119192*O+.9503041*F)/1.08883)))}function fn(me){return(me/=255)<=.04045?me/12.92:Math.pow((me+.055)/1.055,2.4)}function dn(me){var O=parseFloat(me);return"%"===me.charAt(me.length-1)?Math.round(2.55*O):O}Kt.brighter=function(me){me=Math.pow(.7,arguments.length?me:1);var O=this.r,F=this.g,B=this.b,W=30;return O||F||B?(O&&O<W&&(O=W),F&&F<W&&(F=W),B&&B<W&&(B=W),new Rt(Math.min(255,O/me),Math.min(255,F/me),Math.min(255,B/me))):new Rt(W,W,W)},Kt.darker=function(me){return new Rt((me=Math.pow(.7,arguments.length?me:1))*this.r,me*this.g,me*this.b)},Kt.hsl=function(){return Tn(this.r,this.g,this.b)},Kt.toString=function(){return"#"+kn(this.r)+kn(this.g)+kn(this.b)};var Mn=p.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function En(me){return"function"==typeof me?me:function(){return me}}function jn(me){return function(O,F,B){return 2===arguments.length&&"function"==typeof F&&(B=F,F=null),er(O,F,me,B)}}function er(me,O,F,B){var $e,W={},fe=p.dispatch("beforesend","progress","load","error"),ge={},we=new XMLHttpRequest,Ee=null;function Pe(){var $e,pt,Dt,ot=we.status;if(!ot&&((Dt=(pt=we).responseType)&&"text"!==Dt?pt.response:pt.responseText)||ot>=200&&ot<300||304===ot){try{$e=F.call(W,we)}catch(pt){return void fe.error.call(W,pt)}fe.load.call(W,$e)}else fe.error.call(W,we)}return self.XDomainRequest&&!("withCredentials"in we)&&/^(http(s)?:)?\/\//.test(me)&&(we=new XDomainRequest),"onload"in we?we.onload=we.onerror=Pe:we.onreadystatechange=function(){we.readyState>3&&Pe()},we.onprogress=function($e){var ot=p.event;p.event=$e;try{fe.progress.call(W,we)}finally{p.event=ot}},W.header=function($e,ot){return $e=($e+"").toLowerCase(),arguments.length<2?ge[$e]:(null==ot?delete ge[$e]:ge[$e]=ot+"",W)},W.mimeType=function($e){return arguments.length?(O=null==$e?null:$e+"",W):O},W.responseType=function($e){return arguments.length?(Ee=$e,W):Ee},W.response=function($e){return F=$e,W},["get","post"].forEach(function($e){W[$e]=function(){return W.send.apply(W,[$e].concat(b(arguments)))}}),W.send=function($e,ot,pt){if(2===arguments.length&&"function"==typeof ot&&(pt=ot,ot=null),we.open($e,me,!0),null==O||"accept"in ge||(ge.accept=O+",*/*"),we.setRequestHeader)for(var Dt in ge)we.setRequestHeader(Dt,ge[Dt]);return null!=O&&we.overrideMimeType&&we.overrideMimeType(O),null!=Ee&&(we.responseType=Ee),null!=pt&&W.on("error",pt).on("load",function(zt){pt(null,zt)}),fe.beforesend.call(W,we),we.send(ot??null),W},W.abort=function(){return we.abort(),W},p.rebind(W,fe,"on"),null==B?W:W.get(1===($e=B).length?function(ot,pt){$e(null==ot?pt:null)}:$e)}Mn.forEach(function(me,O){Mn.set(me,Xt(O))}),p.functor=En,p.xhr=jn(E),p.dsv=function(me,O){var F=new RegExp('["'+me+"\n]"),B=me.charCodeAt(0);function W(Pe,$e,ot){arguments.length<3&&(ot=$e,$e=null);var pt=er(Pe,O,null==$e?fe:ge($e),ot);return pt.row=function(Dt){return arguments.length?pt.response(null==($e=Dt)?fe:ge(Dt)):$e},pt}function fe(Pe){return W.parse(Pe.responseText)}function ge(Pe){return function($e){return W.parse($e.responseText,Pe)}}function we(Pe){return Pe.map(Ee).join(me)}function Ee(Pe){return F.test(Pe)?'"'+Pe.replace(/\"/g,'""')+'"':Pe}return W.parse=function(Pe,$e){var ot;return W.parseRows(Pe,function(pt,Dt){if(ot)return ot(pt,Dt-1);var zt=function(Pt){for(var Nt={},Et=pt.length,Zt=0;Zt<Et;++Zt)Nt[pt[Zt]]=Pt[Zt];return Nt};ot=$e?function(Pt,Nt){return $e(zt(Pt),Nt)}:zt})},W.parseRows=function(Pe,$e){var ot,pt,Dt={},zt={},Pt=[],Nt=Pe.length,Et=0,Zt=0;function qt(){if(Et>=Nt)return zt;if(pt)return pt=!1,Dt;var gn=Et;if(34===Pe.charCodeAt(gn)){for(var On=gn;On++<Nt;)if(34===Pe.charCodeAt(On)){if(34!==Pe.charCodeAt(On+1))break;++On}return Et=On+2,13===(Yn=Pe.charCodeAt(On+1))?(pt=!0,10===Pe.charCodeAt(On+2)&&++Et):10===Yn&&(pt=!0),Pe.slice(gn+1,On).replace(/""/g,'"')}for(;Et<Nt;){var Yn,Hn=1;if(10===(Yn=Pe.charCodeAt(Et++)))pt=!0;else if(13===Yn)pt=!0,10===Pe.charCodeAt(Et)&&(++Et,++Hn);else if(Yn!==B)continue;return Pe.slice(gn,Et-Hn)}return Pe.slice(gn)}for(;(ot=qt())!==zt;){for(var Jt=[];ot!==Dt&&ot!==zt;)Jt.push(ot),ot=qt();$e&&null==(Jt=$e(Jt,Zt++))||Pt.push(Jt)}return Pt},W.format=function(Pe){if(Array.isArray(Pe[0]))return W.formatRows(Pe);var $e=new S,ot=[];return Pe.forEach(function(pt){for(var Dt in pt)$e.has(Dt)||ot.push($e.add(Dt))}),[ot.map(Ee).join(me)].concat(Pe.map(function(pt){return ot.map(function(Dt){return Ee(pt[Dt])}).join(me)})).join("\n")},W.formatRows=function(Pe){return Pe.map(we).join("\n")},W},p.csv=p.dsv(",","text/csv"),p.tsv=p.dsv("\t","text/tab-separated-values");var nr,mr,Dr,yr,Wr=this[z(this,"requestAnimationFrame")]||function(me){setTimeout(me,17)};function kr(me,O,F){var B=arguments.length;B<2&&(O=0),B<3&&(F=Date.now());var fe={c:me,t:F+O,n:null};return mr?mr.n=fe:nr=fe,mr=fe,Dr||(yr=clearTimeout(yr),Dr=1,Wr(Or)),fe}function Or(){var me=Hr(),O=oi()-me;O>24?(isFinite(O)&&(clearTimeout(yr),yr=setTimeout(Or,O)),Dr=0):(Dr=1,Wr(Or))}function Hr(){for(var me=Date.now(),O=nr;O;)me>=O.t&&O.c(me-O.t)&&(O.c=null),O=O.n;return me}function oi(){for(var me,O=nr,F=1/0;O;)O.c?(O.t<F&&(F=O.t),O=(me=O).n):O=me?me.n=O.n:nr=O.n;return mr=me,F}function Qn(me){return me[0]}function Ir(me){return me[1]}function Tr(me){for(var O,F,B,W=me.length,fe=[0,1],ge=2,we=2;we<W;we++){for(;ge>1&&((F=me[fe[ge-1]])[0]-(O=me[fe[ge-2]])[0])*((B=me[we])[1]-O[1])-(F[1]-O[1])*(B[0]-O[0])<=0;)--ge;fe[ge++]=we}return fe.slice(0,ge)}function ar(me,O){return me[0]-O[0]||me[1]-O[1]}p.timer=function(){kr.apply(this,arguments)},p.timer.flush=function(){Hr(),oi()},p.round=function(me,O){return O?Math.round(me*(O=Math.pow(10,O)))/O:Math.round(me)},p.geom={},p.geom.hull=function(me){var O=Qn,F=Ir;if(arguments.length)return B(me);function B(W){if(W.length<3)return[];var fe,ge=En(O),we=En(F),Ee=W.length,Pe=[],$e=[];for(fe=0;fe<Ee;fe++)Pe.push([+ge.call(this,W[fe],fe),+we.call(this,W[fe],fe),fe]);for(Pe.sort(ar),fe=0;fe<Ee;fe++)$e.push([Pe[fe][0],-Pe[fe][1]]);var ot=Tr(Pe),pt=Tr($e),Dt=pt[0]===ot[0],zt=pt[pt.length-1]===ot[ot.length-1],Pt=[];for(fe=ot.length-1;fe>=0;--fe)Pt.push(W[Pe[ot[fe]][2]]);for(fe=+Dt;fe<pt.length-zt;++fe)Pt.push(W[Pe[pt[fe]][2]]);return Pt}return B.x=function(W){return arguments.length?(O=W,B):O},B.y=function(W){return arguments.length?(F=W,B):F},B},p.geom.polygon=function(me){return j(me,Jr),me};var Jr=p.geom.polygon.prototype=[];function ri(me,O,F){return(F[0]-O[0])*(me[1]-O[1])<(F[1]-O[1])*(me[0]-O[0])}function Rr(me,O,F,B){var W=me[0],fe=F[0],ge=O[0]-W,we=B[0]-fe,Ee=me[1],Pe=F[1],$e=O[1]-Ee,ot=B[1]-Pe,pt=(we*(Ee-Pe)-ot*(W-fe))/(ot*ge-we*$e);return[W+pt*ge,Ee+pt*$e]}function Yr(me){var O=me[0],F=me[me.length-1];return!(O[0]-F[0]||O[1]-F[1])}Jr.area=function(){for(var me,O=-1,F=this.length,B=this[F-1],W=0;++O<F;)W+=(me=B)[1]*(B=this[O])[0]-me[0]*B[1];return.5*W},Jr.centroid=function(me){var O,F,B=-1,W=this.length,fe=0,ge=0,we=this[W-1];for(arguments.length||(me=-1/(6*this.area()));++B<W;)fe+=((O=we)[0]+(we=this[B])[0])*(F=O[0]*we[1]-we[0]*O[1]),ge+=(O[1]+we[1])*F;return[fe*me,ge*me]},Jr.clip=function(me){for(var O,F,B,W,fe,ge,we=Yr(me),Ee=-1,Pe=this.length-Yr(this),$e=this[Pe-1];++Ee<Pe;){for(O=me.slice(),me.length=0,W=this[Ee],fe=O[(B=O.length-we)-1],F=-1;++F<B;)ri(ge=O[F],$e,W)?(ri(fe,$e,W)||me.push(Rr(fe,ge,$e,W)),me.push(ge)):ri(fe,$e,W)&&me.push(Rr(fe,ge,$e,W)),fe=ge;we&&me.push(me[0]),$e=W}return me};var Ci,pn,Ln,Ut,xn,Sn=[],Kn=[];function Jn(){jr(this),this.edge=this.site=this.circle=null}function Xn(me){var O=Sn.pop()||new Jn;return O.site=me,O}function Un(me){Nr(me),Ln.remove(me),Sn.push(me),jr(me)}function In(me){var O=me.circle,F=O.x,B=O.cy,W={x:F,y:B},fe=me.P,ge=me.N,we=[me];Un(me);for(var Ee=fe;Ee.circle&&a(F-Ee.circle.x)<Ct&&a(B-Ee.circle.cy)<Ct;)fe=Ee.P,we.unshift(Ee),Un(Ee),Ee=fe;we.unshift(Ee),Nr(Ee);for(var Pe=ge;Pe.circle&&a(F-Pe.circle.x)<Ct&&a(B-Pe.circle.cy)<Ct;)ge=Pe.N,we.push(Pe),Un(Pe),Pe=ge;we.push(Pe),Nr(Pe);var $e,ot=we.length;for($e=1;$e<ot;++$e)ci((Pe=we[$e]).edge,(Ee=we[$e-1]).site,Pe.site,W);(Pe=we[ot-1]).edge=qr((Ee=we[0]).site,Pe.site,null,W),_r(Ee),_r(Pe)}function Pn(me){for(var O,F,B,W,fe=me.x,ge=me.y,we=Ln._;we;)if((B=Bn(we,ge)-fe)>Ct)we=we.L;else{if(!((W=fe-Gn(we,ge))>Ct)){B>-Ct?(O=we.P,F=we):W>-Ct?(O=we,F=we.N):O=F=we;break}if(!we.R){O=we;break}we=we.R}var Ee=Xn(me);if(Ln.insert(O,Ee),O||F){if(O===F)return Nr(O),F=Xn(O.site),Ln.insert(Ee,F),Ee.edge=F.edge=qr(O.site,Ee.site),_r(O),void _r(F);if(F){Nr(O),Nr(F);var Pe=O.site,$e=Pe.x,ot=Pe.y,pt=me.x-$e,Dt=me.y-ot,zt=F.site,Pt=zt.x-$e,Nt=zt.y-ot,Et=2*(pt*Nt-Dt*Pt),Zt=pt*pt+Dt*Dt,qt=Pt*Pt+Nt*Nt,Jt={x:(Nt*Zt-Dt*qt)/Et+$e,y:(pt*qt-Pt*Zt)/Et+ot};ci(F.edge,Pe,zt,Jt),Ee.edge=qr(Pe,me,null,Jt),F.edge=qr(me,zt,null,Jt),_r(O),_r(F)}else Ee.edge=qr(O.site,Ee.site)}}function Bn(me,O){var F=me.site,B=F.x,W=F.y,fe=W-O;if(!fe)return B;var ge=me.P;if(!ge)return-1/0;var we=(F=ge.site).x,Ee=F.y,Pe=Ee-O;if(!Pe)return we;var $e=we-B,ot=1/fe-1/Pe,pt=$e/Pe;return ot?(-pt+Math.sqrt(pt*pt-2*ot*($e*$e/(-2*Pe)-Ee+Pe/2+W-fe/2)))/ot+B:(B+we)/2}function Gn(me,O){var F=me.N;if(F)return Bn(F,O);var B=me.site;return B.y===O?B.x:1/0}function or(me){this.site=me,this.edges=[]}function sr(me,O){return O.angle-me.angle}function xr(){jr(this),this.x=this.y=this.arc=this.site=this.cy=null}function _r(me){var O=me.P,F=me.N;if(O&&F){var B=O.site,W=me.site,fe=F.site;if(B!==fe){var ge=W.x,we=W.y,Ee=B.x-ge,Pe=B.y-we,$e=fe.x-ge,ot=2*(Ee*(Nt=fe.y-we)-Pe*$e);if(!(ot>=-1e-12)){var pt=Ee*Ee+Pe*Pe,Dt=$e*$e+Nt*Nt,zt=(Nt*pt-Pe*Dt)/ot,Pt=(Ee*Dt-$e*pt)/ot,Nt=Pt+we,Et=Kn.pop()||new xr;Et.arc=me,Et.site=W,Et.x=zt+ge,Et.y=Nt+Math.sqrt(zt*zt+Pt*Pt),Et.cy=Nt,me.circle=Et;for(var Zt=null,qt=xn._;qt;)if(Et.y<qt.y||Et.y===qt.y&&Et.x<=qt.x){if(!qt.L){Zt=qt.P;break}qt=qt.L}else{if(!qt.R){Zt=qt;break}qt=qt.R}xn.insert(Zt,Et),Zt||(Ut=Et)}}}}function Nr(me){var O=me.circle;O&&(O.P||(Ut=O.N),xn.remove(O),Kn.push(O),jr(O),me.circle=null)}function Fr(me,O){var F=me.b;if(F)return!0;var B,W,fe=me.a,ge=O[0][0],we=O[1][0],Ee=O[0][1],Pe=O[1][1],$e=me.l,ot=me.r,pt=$e.x,Dt=$e.y,zt=ot.x,Pt=ot.y,Nt=(pt+zt)/2;if(Pt===Dt){if(Nt<ge||Nt>=we)return;if(pt>zt){if(fe){if(fe.y>=Pe)return}else fe={x:Nt,y:Ee};F={x:Nt,y:Pe}}else{if(fe){if(fe.y<Ee)return}else fe={x:Nt,y:Pe};F={x:Nt,y:Ee}}}else if(W=(Dt+Pt)/2-(B=(pt-zt)/(Pt-Dt))*Nt,B<-1||B>1)if(pt>zt){if(fe){if(fe.y>=Pe)return}else fe={x:(Ee-W)/B,y:Ee};F={x:(Pe-W)/B,y:Pe}}else{if(fe){if(fe.y<Ee)return}else fe={x:(Pe-W)/B,y:Pe};F={x:(Ee-W)/B,y:Ee}}else if(Dt<Pt){if(fe){if(fe.x>=we)return}else fe={x:ge,y:B*ge+W};F={x:we,y:B*we+W}}else{if(fe){if(fe.x<ge)return}else fe={x:we,y:B*we+W};F={x:ge,y:B*ge+W}}return me.a=fe,me.b=F,!0}function Br(me,O){this.l=me,this.r=O,this.a=this.b=null}function qr(me,O,F,B){var W=new Br(me,O);return Ci.push(W),F&&ci(W,me,O,F),B&&ci(W,O,me,B),pn[me.i].edges.push(new Ui(W,me,O)),pn[O.i].edges.push(new Ui(W,O,me)),W}function Xr(me,O,F){var B=new Br(me,null);return B.a=O,B.b=F,Ci.push(B),B}function ci(me,O,F,B){me.a||me.b?me.l===F?me.b=B:me.a=B:(me.a=B,me.l=O,me.r=F)}function Ui(me,O,F){var B=me.a,W=me.b;this.edge=me,this.site=O,this.angle=F?Math.atan2(F.y-O.y,F.x-O.x):me.l===O?Math.atan2(W.x-B.x,B.y-W.y):Math.atan2(B.x-W.x,W.y-B.y)}function Hi(){this._=null}function jr(me){me.U=me.C=me.L=me.R=me.P=me.N=null}function pi(me,O){var F=O,B=O.R,W=F.U;W?W.L===F?W.L=B:W.R=B:me._=B,B.U=W,F.U=B,F.R=B.L,F.R&&(F.R.U=F),B.L=F}function ui(me,O){var F=O,B=O.L,W=F.U;W?W.L===F?W.L=B:W.R=B:me._=B,B.U=W,F.U=B,F.L=B.R,F.L&&(F.L.U=F),B.R=F}function Qi(me){for(;me.L;)me=me.L;return me}function ma(me,O){var F,B,W,fe=me.sort(Za).pop();for(Ci=[],pn=new Array(me.length),Ln=new Hi,xn=new Hi;;)if(W=Ut,fe&&(!W||fe.y<W.y||fe.y===W.y&&fe.x<W.x))fe.x===F&&fe.y===B||(pn[fe.i]=new or(fe),Pn(fe),F=fe.x,B=fe.y),fe=me.pop();else{if(!W)break;In(W.arc)}O&&(function(we){for(var Ee,Pe,$e,ot,pt,Dt=Ci,zt=(Pe=we[0][0],$e=we[0][1],ot=we[1][0],pt=we[1][1],function(Nt){var Et,Zt=Nt.a,qt=Nt.b,Jt=Zt.x,gn=Zt.y,On=0,Yn=1,Hn=qt.x-Jt,vr=qt.y-gn;if(Et=Pe-Jt,Hn||!(Et>0)){if(Et/=Hn,Hn<0){if(Et<On)return;Et<Yn&&(Yn=Et)}else if(Hn>0){if(Et>Yn)return;Et>On&&(On=Et)}if(Et=ot-Jt,Hn||!(Et<0)){if(Et/=Hn,Hn<0){if(Et>Yn)return;Et>On&&(On=Et)}else if(Hn>0){if(Et<On)return;Et<Yn&&(Yn=Et)}if(Et=$e-gn,vr||!(Et>0)){if(Et/=vr,vr<0){if(Et<On)return;Et<Yn&&(Yn=Et)}else if(vr>0){if(Et>Yn)return;Et>On&&(On=Et)}if(Et=pt-gn,vr||!(Et<0)){if(Et/=vr,vr<0){if(Et>Yn)return;Et>On&&(On=Et)}else if(vr>0){if(Et<On)return;Et<Yn&&(Yn=Et)}return On>0&&(Nt.a={x:Jt+On*Hn,y:gn+On*vr}),Yn<1&&(Nt.b={x:Jt+Yn*Hn,y:gn+Yn*vr}),Nt}}}}}),Pt=Dt.length;Pt--;)(!Fr(Ee=Dt[Pt],we)||!zt(Ee)||a(Ee.a.x-Ee.b.x)<Ct&&a(Ee.a.y-Ee.b.y)<Ct)&&(Ee.a=Ee.b=null,Dt.splice(Pt,1))}(O),function(we){for(var Ee,Pe,$e,ot,pt,Dt,zt,Pt,Nt,Et,Zt=we[0][0],qt=we[1][0],Jt=we[0][1],gn=we[1][1],On=pn,Yn=On.length;Yn--;)if((pt=On[Yn])&&pt.prepare())for(Pt=(zt=pt.edges).length,Dt=0;Dt<Pt;)$e=(Et=zt[Dt].end()).x,ot=Et.y,Ee=(Nt=zt[++Dt%Pt].start()).x,Pe=Nt.y,(a($e-Ee)>Ct||a(ot-Pe)>Ct)&&(zt.splice(Dt,0,new Ui(Xr(pt.site,Et,a($e-Zt)<Ct&&gn-ot>Ct?{x:Zt,y:a(Ee-Zt)<Ct?Pe:gn}:a(ot-gn)<Ct&&qt-$e>Ct?{x:a(Pe-gn)<Ct?Ee:qt,y:gn}:a($e-qt)<Ct&&ot-Jt>Ct?{x:qt,y:a(Ee-qt)<Ct?Pe:Jt}:a(ot-Jt)<Ct&&$e-Zt>Ct?{x:a(Pe-Jt)<Ct?Ee:Zt,y:Jt}:null),pt.site,null)),++Pt)}(O));var ge={cells:pn,edges:Ci};return Ln=xn=Ci=pn=null,ge}function Za(me,O){return O.y-me.y||O.x-me.x}or.prototype.prepare=function(){for(var me,O=this.edges,F=O.length;F--;)(me=O[F].edge).b&&me.a||O.splice(F,1);return O.sort(sr),O.length},Ui.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Hi.prototype={insert:function(me,O){var F,B,W;if(me){if(O.P=me,O.N=me.N,me.N&&(me.N.P=O),me.N=O,me.R){for(me=me.R;me.L;)me=me.L;me.L=O}else me.R=O;F=me}else this._?(me=Qi(this._),O.P=null,O.N=me,me.P=me.L=O,F=me):(O.P=O.N=null,this._=O,F=null);for(O.L=O.R=null,O.U=F,O.C=!0,me=O;F&&F.C;)F===(B=F.U).L?(W=B.R)&&W.C?(F.C=W.C=!1,B.C=!0,me=B):(me===F.R&&(pi(this,F),F=(me=F).U),F.C=!1,B.C=!0,ui(this,B)):(W=B.L)&&W.C?(F.C=W.C=!1,B.C=!0,me=B):(me===F.L&&(ui(this,F),F=(me=F).U),F.C=!1,B.C=!0,pi(this,B)),F=me.U;this._.C=!1},remove:function(me){me.N&&(me.N.P=me.P),me.P&&(me.P.N=me.N),me.N=me.P=null;var O,F,B,W=me.U,fe=me.L,ge=me.R;if(F=fe?ge?Qi(ge):fe:ge,W?W.L===me?W.L=F:W.R=F:this._=F,fe&&ge?(B=F.C,F.C=me.C,F.L=fe,fe.U=F,F!==ge?(W=F.U,F.U=me.U,W.L=me=F.R,F.R=ge,ge.U=F):(F.U=W,W=F,me=F.R)):(B=me.C,me=F),me&&(me.U=W),!B)if(me&&me.C)me.C=!1;else{do{if(me===this._)break;if(me===W.L){if((O=W.R).C&&(O.C=!1,W.C=!0,pi(this,W),O=W.R),O.L&&O.L.C||O.R&&O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,ui(this,O),O=W.R),O.C=W.C,W.C=O.R.C=!1,pi(this,W),me=this._;break}}else if((O=W.L).C&&(O.C=!1,W.C=!0,ui(this,W),O=W.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,pi(this,O),O=W.L),O.C=W.C,W.C=O.L.C=!1,ui(this,W),me=this._;break}O.C=!0,me=W,W=W.U}while(!me.C);me&&(me.C=!1)}}},p.geom.voronoi=function(me){var O=Qn,F=Ir,B=O,W=F,fe=Co;if(me)return ge(me);function ge(Ee){var Pe=new Array(Ee.length),$e=fe[0][0],ot=fe[0][1],pt=fe[1][0],Dt=fe[1][1];return ma(we(Ee),fe).cells.forEach(function(zt,Pt){var Nt=zt.edges,Et=zt.site;(Pe[Pt]=Nt.length?Nt.map(function(Zt){var qt=Zt.start();return[qt.x,qt.y]}):Et.x>=$e&&Et.x<=pt&&Et.y>=ot&&Et.y<=Dt?[[$e,Dt],[pt,Dt],[pt,ot],[$e,ot]]:[]).point=Ee[Pt]}),Pe}function we(Ee){return Ee.map(function(Pe,$e){return{x:Math.round(B(Pe,$e)/Ct)*Ct,y:Math.round(W(Pe,$e)/Ct)*Ct,i:$e}})}return ge.links=function(Ee){return ma(we(Ee)).edges.filter(function(Pe){return Pe.l&&Pe.r}).map(function(Pe){return{source:Ee[Pe.l.i],target:Ee[Pe.r.i]}})},ge.triangles=function(Ee){var Pe=[];return ma(we(Ee)).cells.forEach(function($e,ot){for(var pt,Dt,zt,Pt,Nt=$e.site,Et=$e.edges.sort(sr),Zt=-1,qt=Et.length,Jt=Et[qt-1].edge,gn=Jt.l===Nt?Jt.r:Jt.l;++Zt<qt;)pt=gn,gn=(Jt=Et[Zt].edge).l===Nt?Jt.r:Jt.l,ot<pt.i&&ot<gn.i&&((Dt=Nt).x-(Pt=gn).x)*((zt=pt).y-Dt.y)-(Dt.x-zt.x)*(Pt.y-Dt.y)<0&&Pe.push([Ee[ot],Ee[pt.i],Ee[gn.i]])}),Pe},ge.x=function(Ee){return arguments.length?(B=En(O=Ee),ge):O},ge.y=function(Ee){return arguments.length?(W=En(F=Ee),ge):F},ge.clipExtent=function(Ee){return arguments.length?(fe=Ee??Co,ge):fe===Co?null:fe},ge.size=function(Ee){return arguments.length?ge.clipExtent(Ee&&[[0,0],Ee]):fe===Co?null:fe&&fe[1]},ge};var Co=[[-1e6,-1e6],[1e6,1e6]];function sa(me){return me.x}function la(me){return me.y}function lo(me,O,F,B,W,fe){if(!me(O,F,B,W,fe)){var ge=.5*(F+W),we=.5*(B+fe),Ee=O.nodes;Ee[0]&&lo(me,Ee[0],F,B,ge,we),Ee[1]&&lo(me,Ee[1],ge,B,W,we),Ee[2]&&lo(me,Ee[2],F,we,ge,fe),Ee[3]&&lo(me,Ee[3],ge,we,W,fe)}}function Ki(me,O,F,B,W,fe,ge){var we,Ee=1/0;return function Pe($e,ot,pt,Dt,zt){if(!(ot>fe||pt>ge||Dt<B||zt<W)){if(Pt=$e.point){var Pt,Nt=O-$e.x,Et=F-$e.y,Zt=Nt*Nt+Et*Et;if(Zt<Ee){var qt=Math.sqrt(Ee=Zt);B=O-qt,W=F-qt,fe=O+qt,ge=F+qt,we=Pt}}for(var Jt=$e.nodes,gn=.5*(ot+Dt),On=.5*(pt+zt),Yn=(F>=On)<<1|O>=gn,Hn=Yn+4;Yn<Hn;++Yn)if($e=Jt[3&Yn])switch(3&Yn){case 0:Pe($e,ot,pt,gn,On);break;case 1:Pe($e,gn,pt,Dt,On);break;case 2:Pe($e,ot,On,gn,zt);break;case 3:Pe($e,gn,On,Dt,zt)}}}(me,B,W,fe,ge),we}function po(me,O){me=p.rgb(me),O=p.rgb(O);var F=me.r,B=me.g,W=me.b,fe=O.r-F,ge=O.g-B,we=O.b-W;return function(Ee){return"#"+kn(Math.round(F+fe*Ee))+kn(Math.round(B+ge*Ee))+kn(Math.round(W+we*Ee))}}function Po(me,O){var F,B={},W={};for(F in me)F in O?B[F]=Wa(me[F],O[F]):W[F]=me[F];for(F in O)F in me||(W[F]=O[F]);return function(fe){for(F in B)W[F]=B[F](fe);return W}}function Va(me,O){return me=+me,O=+O,function(F){return me*(1-F)+O*F}}function mo(me,O){var F,B,W,fe=Ro.lastIndex=Wo.lastIndex=0,ge=-1,we=[],Ee=[];for(me+="",O+="";(F=Ro.exec(me))&&(B=Wo.exec(O));)(W=B.index)>fe&&(W=O.slice(fe,W),we[ge]?we[ge]+=W:we[++ge]=W),(F=F[0])===(B=B[0])?we[ge]?we[ge]+=B:we[++ge]=B:(we[++ge]=null,Ee.push({i:ge,x:Va(F,B)})),fe=Wo.lastIndex;return fe<O.length&&(W=O.slice(fe),we[ge]?we[ge]+=W:we[++ge]=W),we.length<2?Ee[0]?(O=Ee[0].x,function(Pe){return O(Pe)+""}):function(){return O}:(O=Ee.length,function(Pe){for(var $e,ot=0;ot<O;++ot)we[($e=Ee[ot]).i]=$e.x(Pe);return we.join("")})}p.geom.delaunay=function(me){return p.geom.voronoi().triangles(me)},p.geom.quadtree=function(me,O,F,B,W){var fe,ge=Qn,we=Ir;if(fe=arguments.length)return ge=sa,we=la,3===fe&&(W=F,B=O,F=O=0),Ee(me);function Ee(Pe){var $e,ot,pt,Dt,zt,Pt,Nt,Et,Zt,qt=En(ge),Jt=En(we);if(null!=O)Pt=O,Nt=F,Et=B,Zt=W;else if(Et=Zt=-(Pt=Nt=1/0),ot=[],pt=[],zt=Pe.length,fe)for(Dt=0;Dt<zt;++Dt)($e=Pe[Dt]).x<Pt&&(Pt=$e.x),$e.y<Nt&&(Nt=$e.y),$e.x>Et&&(Et=$e.x),$e.y>Zt&&(Zt=$e.y),ot.push($e.x),pt.push($e.y);else for(Dt=0;Dt<zt;++Dt){var gn=+qt($e=Pe[Dt],Dt),On=+Jt($e,Dt);gn<Pt&&(Pt=gn),On<Nt&&(Nt=On),gn>Et&&(Et=gn),On>Zt&&(Zt=On),ot.push(gn),pt.push(On)}var Yn=Et-Pt,Hn=Zt-Nt;function vr(Cr,ii,di,Oi,ur,Gr,hi,si){if(!isNaN(di)&&!isNaN(Oi))if(Cr.leaf){var wi=Cr.x,Ii=Cr.y;if(null!=wi)if(a(wi-di)+a(Ii-Oi)<.01)gr(Cr,ii,di,Oi,ur,Gr,hi,si);else{var Xi=Cr.point;Cr.x=Cr.y=Cr.point=null,gr(Cr,Xi,wi,Ii,ur,Gr,hi,si),gr(Cr,ii,di,Oi,ur,Gr,hi,si)}else Cr.x=di,Cr.y=Oi,Cr.point=ii}else gr(Cr,ii,di,Oi,ur,Gr,hi,si)}function gr(Cr,ii,di,Oi,ur,Gr,hi,si){var wi=.5*(ur+hi),Ii=.5*(Gr+si),Xi=di>=wi,bi=Oi>=Ii,qi=bi<<1|Xi;Cr.leaf=!1,Xi?ur=wi:hi=wi,bi?Gr=Ii:si=Ii,vr(Cr=Cr.nodes[qi]||(Cr.nodes[qi]={leaf:!0,nodes:[],point:null,x:null,y:null}),ii,di,Oi,ur,Gr,hi,si)}Yn>Hn?Zt=Nt+Yn:Et=Pt+Hn;var Pr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Cr){vr(Pr,Cr,+qt(Cr,++Dt),+Jt(Cr,Dt),Pt,Nt,Et,Zt)},visit:function(Cr){lo(Cr,Pr,Pt,Nt,Et,Zt)},find:function(Cr){return Ki(Pr,Cr[0],Cr[1],Pt,Nt,Et,Zt)}};if(Dt=-1,null==O){for(;++Dt<zt;)vr(Pr,Pe[Dt],ot[Dt],pt[Dt],Pt,Nt,Et,Zt);--Dt}else Pe.forEach(Pr.add);return ot=pt=Pe=$e=null,Pr}return Ee.x=function(Pe){return arguments.length?(ge=Pe,Ee):ge},Ee.y=function(Pe){return arguments.length?(we=Pe,Ee):we},Ee.extent=function(Pe){return arguments.length?(null==Pe?O=F=B=W=null:(O=+Pe[0][0],F=+Pe[0][1],B=+Pe[1][0],W=+Pe[1][1]),Ee):null==O?null:[[O,F],[B,W]]},Ee.size=function(Pe){return arguments.length?(null==Pe?O=F=B=W=null:(O=F=0,B=+Pe[0],W=+Pe[1]),Ee):null==O?null:[B-O,W-F]},Ee},p.interpolateRgb=po,p.interpolateObject=Po,p.interpolateNumber=Va,p.interpolateString=mo;var Ro=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wo=new RegExp(Ro.source,"g");function Wa(me,O){for(var F,B=p.interpolators.length;--B>=0&&!(F=p.interpolators[B](me,O)););return F}function Ia(me,O){var F,B=[],W=[],fe=me.length,ge=O.length,we=Math.min(me.length,O.length);for(F=0;F<we;++F)B.push(Wa(me[F],O[F]));for(;F<fe;++F)W[F]=me[F];for(;F<ge;++F)W[F]=O[F];return function(Ee){for(F=0;F<we;++F)W[F]=B[F](Ee);return W}}p.interpolate=Wa,p.interpolators=[function(me,O){var F=typeof O;return("string"===F?Mn.has(O.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(O)?po:mo:O instanceof rt?po:Array.isArray(O)?Ia:"object"===F&&isNaN(O)?Po:Va)(me,O)}],p.interpolateArray=Ia;var no=function(){return E},xs=p.map({linear:no,poly:function(me){return function(O){return Math.pow(O,me)}},quad:function(){return Ys},cubic:function(){return Qs},sin:function(){return Us},exp:function(){return Vo},circle:function(){return Xo},elastic:function(me,O){var F;return arguments.length<2&&(O=.45),arguments.length?F=O/rn*Math.asin(1/me):(me=1,F=O/4),function(B){return 1+me*Math.pow(2,-10*B)*Math.sin((B-F)*rn/O)}},back:function(me){return me||(me=1.70158),function(O){return O*O*((me+1)*O-me)}},bounce:function(){return rs}}),ns=p.map({in:E,out:Ls,"in-out":ws,"out-in":function(me){return ws(Ls(me))}});function ra(me){return function(O){return O<=0?0:O>=1?1:me(O)}}function Ls(me){return function(O){return 1-me(1-O)}}function ws(me){return function(O){return.5*(O<.5?me(2*O):2-me(2-2*O))}}function Ys(me){return me*me}function Qs(me){return me*me*me}function Zs(me){if(me<=0)return 0;if(me>=1)return 1;var O=me*me,F=O*me;return 4*(me<.5?F:3*(me-O)+F-.75)}function Us(me){return 1-Math.cos(me*cn)}function Vo(me){return Math.pow(2,10*(me-1))}function Xo(me){return 1-Math.sqrt(1-me*me)}function rs(me){return me<1/2.75?7.5625*me*me:me<2/2.75?7.5625*(me-=1.5/2.75)*me+.75:me<2.5/2.75?7.5625*(me-=2.25/2.75)*me+.9375:7.5625*(me-=2.625/2.75)*me+.984375}function $o(me,O){return O-=me,function(F){return Math.round(me+O*F)}}function Jo(me){var O,F,B,W=[me.a,me.b],fe=[me.c,me.d],ge=So(W),we=Ts(W,fe),Ee=So(((O=fe)[0]+=(B=-we)*(F=W)[0],O[1]+=B*F[1],O))||0;W[0]*fe[1]<fe[0]*W[1]&&(W[0]*=-1,W[1]*=-1,ge*=-1,we*=-1),this.rotate=(ge?Math.atan2(W[1],W[0]):Math.atan2(-fe[0],fe[1]))*nn,this.translate=[me.e,me.f],this.scale=[ge,Ee],this.skew=Ee?Math.atan2(we,Ee)*nn:0}function Ts(me,O){return me[0]*O[0]+me[1]*O[1]}function So(me){var O=Math.sqrt(Ts(me,me));return O&&(me[0]/=O,me[1]/=O),O}p.ease=function(me){var O=me.indexOf("-"),F=O>=0?me.slice(0,O):me,B=O>=0?me.slice(O+1):"in";return F=xs.get(F)||no,ra((B=ns.get(B)||E)(F.apply(null,g.call(arguments,1))))},p.interpolateHcl=function(me,O){me=p.hcl(me),O=p.hcl(O);var F=me.h,B=me.c,W=me.l,fe=O.h-F,ge=O.c-B,we=O.l-W;return isNaN(ge)&&(ge=0,B=isNaN(B)?O.c:B),isNaN(fe)?(fe=0,F=isNaN(F)?O.h:F):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ee){return dt(F+fe*Ee,B+ge*Ee,W+we*Ee)+""}},p.interpolateHsl=function(me,O){me=p.hsl(me),O=p.hsl(O);var F=me.h,B=me.s,W=me.l,fe=O.h-F,ge=O.s-B,we=O.l-W;return isNaN(ge)&&(ge=0,B=isNaN(B)?O.s:B),isNaN(fe)?(fe=0,F=isNaN(F)?O.h:F):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ee){return mt(F+fe*Ee,B+ge*Ee,W+we*Ee)+""}},p.interpolateLab=function(me,O){me=p.lab(me),O=p.lab(O);var F=me.l,B=me.a,W=me.b,fe=O.l-F,ge=O.a-B,we=O.b-W;return function(Ee){return jt(F+fe*Ee,B+ge*Ee,W+we*Ee)+""}},p.interpolateRound=$o,p.transform=function(me){var O=y.createElementNS(p.ns.prefix.svg,"g");return(p.transform=function(F){if(null!=F){O.setAttribute("transform",F);var B=O.transform.baseVal.consolidate()}return new Jo(B?B.matrix:Hs)})(me)},Jo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Hs={a:1,b:0,c:0,d:1,e:0,f:0};function go(me){return me.length?me.pop()+",":""}function ds(me,O){var W,fe,ge,F=[],B=[];return me=p.transform(me),O=p.transform(O),function(W,fe,ge,we){if(W[0]!==fe[0]||W[1]!==fe[1]){var Ee=ge.push("translate(",null,",",null,")");we.push({i:Ee-4,x:Va(W[0],fe[0])},{i:Ee-2,x:Va(W[1],fe[1])})}else(fe[0]||fe[1])&&ge.push("translate("+fe+")")}(me.translate,O.translate,F,B),ge=F,(W=me.rotate)!==(fe=O.rotate)?(W-fe>180?fe+=360:fe-W>180&&(W+=360),B.push({i:ge.push(go(ge)+"rotate(",null,")")-2,x:Va(W,fe)})):fe&&ge.push(go(ge)+"rotate("+fe+")"),function(W,fe,ge,we){W!==fe?we.push({i:ge.push(go(ge)+"skewX(",null,")")-2,x:Va(W,fe)}):fe&&ge.push(go(ge)+"skewX("+fe+")")}(me.skew,O.skew,F,B),function(W,fe,ge,we){if(W[0]!==fe[0]||W[1]!==fe[1]){var Ee=ge.push(go(ge)+"scale(",null,",",null,")");we.push({i:Ee-4,x:Va(W[0],fe[0])},{i:Ee-2,x:Va(W[1],fe[1])})}else 1===fe[0]&&1===fe[1]||ge.push(go(ge)+"scale("+fe+")")}(me.scale,O.scale,F,B),me=O=null,function(W){for(var fe,ge=-1,we=B.length;++ge<we;)F[(fe=B[ge]).i]=fe.x(W);return F.join("")}}function Is(me,O){return O=(O-=me=+me)||1/O,function(F){return(F-me)/O}}function Ko(me,O){return O=(O-=me=+me)||1/O,function(F){return Math.max(0,Math.min(1,(F-me)/O))}}function oa(me){for(var O=me.source,F=me.target,B=function(ge,we){if(ge===we)return ge;for(var Ee=We(ge),Pe=We(we),$e=Ee.pop(),ot=Pe.pop(),pt=null;$e===ot;)pt=$e,$e=Ee.pop(),ot=Pe.pop();return pt}(O,F),W=[O];O!==B;)W.push(O=O.parent);for(var fe=W.length;F!==B;)W.splice(fe,0,F),F=F.parent;return W}function We(me){for(var O=[],F=me.parent;null!=F;)O.push(me),me=F,F=F.parent;return O.push(me),O}function tt(me){me.fixed|=2}function ut(me){me.fixed&=-7}function yt(me){me.fixed|=4,me.px=me.x,me.py=me.y}function kt(me){me.fixed&=-5}p.interpolateTransform=ds,p.layout={},p.layout.bundle=function(){return function(me){for(var O=[],F=-1,B=me.length;++F<B;)O.push(oa(me[F]));return O}},p.layout.chord=function(){var me,O,F,B,W,fe,ge,we={},Ee=0;function Pe(){var ot,pt,Dt,zt,Pt,Nt={},Et=[],Zt=p.range(B),qt=[];for(me=[],O=[],ot=0,zt=-1;++zt<B;){for(pt=0,Pt=-1;++Pt<B;)pt+=F[zt][Pt];Et.push(pt),qt.push(p.range(B)),ot+=pt}for(W&&Zt.sort(function(Pr,Cr){return W(Et[Pr],Et[Cr])}),fe&&qt.forEach(function(Pr,Cr){Pr.sort(function(ii,di){return fe(F[Cr][ii],F[Cr][di])})}),ot=(rn-Ee*B)/ot,pt=0,zt=-1;++zt<B;){for(Dt=pt,Pt=-1;++Pt<B;){var Jt=Zt[zt],gn=qt[Jt][Pt],On=F[Jt][gn],Yn=pt,Hn=pt+=On*ot;Nt[Jt+"-"+gn]={index:Jt,subindex:gn,startAngle:Yn,endAngle:Hn,value:On}}O[Jt]={index:Jt,startAngle:Dt,endAngle:pt,value:Et[Jt]},pt+=Ee}for(zt=-1;++zt<B;)for(Pt=zt-1;++Pt<B;){var vr=Nt[zt+"-"+Pt],gr=Nt[Pt+"-"+zt];(vr.value||gr.value)&&me.push(vr.value<gr.value?{source:gr,target:vr}:{source:vr,target:gr})}ge&&$e()}function $e(){me.sort(function(ot,pt){return ge((ot.source.value+ot.target.value)/2,(pt.source.value+pt.target.value)/2)})}return we.matrix=function(ot){return arguments.length?(B=(F=ot)&&F.length,me=O=null,we):F},we.padding=function(ot){return arguments.length?(Ee=ot,me=O=null,we):Ee},we.sortGroups=function(ot){return arguments.length?(W=ot,me=O=null,we):W},we.sortSubgroups=function(ot){return arguments.length?(fe=ot,me=null,we):fe},we.sortChords=function(ot){return arguments.length?(ge=ot,me&&$e(),we):ge},we.chords=function(){return me||Pe(),me},we.groups=function(){return O||Pe(),O},we},p.layout.force=function(){var me,O,F,B,W,fe,ge={},we=p.dispatch("start","tick","end"),Ee=[1,1],Pe=.9,$e=Mt,ot=Ft,pt=-30,Dt=ln,zt=.1,Pt=.64,Nt=[],Et=[];function Zt(Jt){return function(gn,On,Yn,Hn){if(gn.point!==Jt){var vr=gn.cx-Jt.x,gr=gn.cy-Jt.y,Pr=Hn-On,Cr=vr*vr+gr*gr;if(Pr*Pr/Pt<Cr){if(Cr<Dt){var ii=gn.charge/Cr;Jt.px-=vr*ii,Jt.py-=gr*ii}return!0}gn.point&&Cr&&Cr<Dt&&(Jt.px-=vr*(ii=gn.pointCharge/Cr),Jt.py-=gr*ii)}return!gn.charge}}function qt(Jt){Jt.px=p.event.x,Jt.py=p.event.y,ge.resume()}return ge.tick=function(){if((F*=.99)<.005)return me=null,we.end({type:"end",alpha:F=0}),!0;var Jt,gn,On,Yn,Hn,vr,gr,Pr,Cr,ii=Nt.length,di=Et.length;for(gn=0;gn<di;++gn)Yn=(On=Et[gn]).source,(vr=(Pr=(Hn=On.target).x-Yn.x)*Pr+(Cr=Hn.y-Yn.y)*Cr)&&(Pr*=vr=F*W[gn]*((vr=Math.sqrt(vr))-B[gn])/vr,Cr*=vr,Hn.x-=Pr*(gr=Yn.weight+Hn.weight?Yn.weight/(Yn.weight+Hn.weight):.5),Hn.y-=Cr*gr,Yn.x+=Pr*(gr=1-gr),Yn.y+=Cr*gr);if((gr=F*zt)&&(Pr=Ee[0]/2,Cr=Ee[1]/2,gn=-1,gr))for(;++gn<ii;)(On=Nt[gn]).x+=(Pr-On.x)*gr,On.y+=(Cr-On.y)*gr;if(pt)for(function Oi(ur,Gr,hi){var si=0,wi=0;if(ur.charge=0,!ur.leaf)for(var Ii,Xi=ur.nodes,bi=Xi.length,qi=-1;++qi<bi;)null!=(Ii=Xi[qi])&&(Oi(Ii,Gr,hi),ur.charge+=Ii.charge,si+=Ii.charge*Ii.cx,wi+=Ii.charge*Ii.cy);if(ur.point){ur.leaf||(ur.point.x+=Math.random()-.5,ur.point.y+=Math.random()-.5);var zi=Gr*hi[ur.point.index];ur.charge+=ur.pointCharge=zi,si+=zi*ur.point.x,wi+=zi*ur.point.y}ur.cx=si/ur.charge,ur.cy=wi/ur.charge}(Jt=p.geom.quadtree(Nt),F,fe),gn=-1;++gn<ii;)(On=Nt[gn]).fixed||Jt.visit(Zt(On));for(gn=-1;++gn<ii;)(On=Nt[gn]).fixed?(On.x=On.px,On.y=On.py):(On.x-=(On.px-(On.px=On.x))*Pe,On.y-=(On.py-(On.py=On.y))*Pe);we.tick({type:"tick",alpha:F})},ge.nodes=function(Jt){return arguments.length?(Nt=Jt,ge):Nt},ge.links=function(Jt){return arguments.length?(Et=Jt,ge):Et},ge.size=function(Jt){return arguments.length?(Ee=Jt,ge):Ee},ge.linkDistance=function(Jt){return arguments.length?($e="function"==typeof Jt?Jt:+Jt,ge):$e},ge.distance=ge.linkDistance,ge.linkStrength=function(Jt){return arguments.length?(ot="function"==typeof Jt?Jt:+Jt,ge):ot},ge.friction=function(Jt){return arguments.length?(Pe=+Jt,ge):Pe},ge.charge=function(Jt){return arguments.length?(pt="function"==typeof Jt?Jt:+Jt,ge):pt},ge.chargeDistance=function(Jt){return arguments.length?(Dt=Jt*Jt,ge):Math.sqrt(Dt)},ge.gravity=function(Jt){return arguments.length?(zt=+Jt,ge):zt},ge.theta=function(Jt){return arguments.length?(Pt=Jt*Jt,ge):Math.sqrt(Pt)},ge.alpha=function(Jt){return arguments.length?(Jt=+Jt,F?Jt>0?F=Jt:(me.c=null,me.t=NaN,me=null,we.end({type:"end",alpha:F=0})):Jt>0&&(we.start({type:"start",alpha:F=Jt}),me=kr(ge.tick)),ge):F},ge.start=function(){var Jt,gn,On,Yn=Nt.length,Hn=Et.length,vr=Ee[0],gr=Ee[1];for(Jt=0;Jt<Yn;++Jt)(On=Nt[Jt]).index=Jt,On.weight=0;for(Jt=0;Jt<Hn;++Jt)"number"==typeof(On=Et[Jt]).source&&(On.source=Nt[On.source]),"number"==typeof On.target&&(On.target=Nt[On.target]),++On.source.weight,++On.target.weight;for(Jt=0;Jt<Yn;++Jt)On=Nt[Jt],isNaN(On.x)&&(On.x=Pr("x",vr)),isNaN(On.y)&&(On.y=Pr("y",gr)),isNaN(On.px)&&(On.px=On.x),isNaN(On.py)&&(On.py=On.y);if(B=[],"function"==typeof $e)for(Jt=0;Jt<Hn;++Jt)B[Jt]=+$e.call(this,Et[Jt],Jt);else for(Jt=0;Jt<Hn;++Jt)B[Jt]=$e;if(W=[],"function"==typeof ot)for(Jt=0;Jt<Hn;++Jt)W[Jt]=+ot.call(this,Et[Jt],Jt);else for(Jt=0;Jt<Hn;++Jt)W[Jt]=ot;if(fe=[],"function"==typeof pt)for(Jt=0;Jt<Yn;++Jt)fe[Jt]=+pt.call(this,Nt[Jt],Jt);else for(Jt=0;Jt<Yn;++Jt)fe[Jt]=pt;function Pr(Cr,ii){if(!gn){for(gn=new Array(Yn),Gr=0;Gr<Yn;++Gr)gn[Gr]=[];for(Gr=0;Gr<Hn;++Gr){var di=Et[Gr];gn[di.source.index].push(di.target),gn[di.target.index].push(di.source)}}for(var Oi,ur=gn[Jt],Gr=-1,hi=ur.length;++Gr<hi;)if(!isNaN(Oi=ur[Gr][Cr]))return Oi;return Math.random()*ii}return ge.resume()},ge.resume=function(){return ge.alpha(.1)},ge.stop=function(){return ge.alpha(0)},ge.drag=function(){if(O||(O=p.behavior.drag().origin(E).on("dragstart.force",tt).on("drag.force",qt).on("dragend.force",ut)),!arguments.length)return O;this.on("mouseover.force",yt).on("mouseout.force",kt).call(O)},p.rebind(ge,we,"on")};var Mt=20,Ft=1,ln=1/0;function un(me,O){return p.rebind(me,O,"sort","children","value"),me.nodes=me,me.links=$n,me}function an(me,O){for(var F=[me];null!=(me=F.pop());)if(O(me),(W=me.children)&&(B=W.length))for(var B,W;--B>=0;)F.push(W[B])}function vn(me,O){for(var F=[me],B=[];null!=(me=F.pop());)if(B.push(me),(fe=me.children)&&(W=fe.length))for(var W,fe,ge=-1;++ge<W;)F.push(fe[ge]);for(;null!=(me=B.pop());)O(me)}function Dn(me){return me.children}function Nn(me){return me.value}function Fn(me,O){return O.value-me.value}function $n(me){return p.merge(me.map(function(O){return(O.children||[]).map(function(F){return{source:O,target:F}})}))}p.layout.hierarchy=function(){var me=Fn,O=Dn,F=Nn;function B(W){var fe,ge=[W],we=[];for(W.depth=0;null!=(fe=ge.pop());)if(we.push(fe),(Pe=O.call(B,fe,fe.depth))&&(Ee=Pe.length)){for(var Ee,Pe,$e;--Ee>=0;)ge.push($e=Pe[Ee]),$e.parent=fe,$e.depth=fe.depth+1;F&&(fe.value=0),fe.children=Pe}else F&&(fe.value=+F.call(B,fe,fe.depth)||0),delete fe.children;return vn(W,function(ot){var pt,Dt;me&&(pt=ot.children)&&pt.sort(me),F&&(Dt=ot.parent)&&(Dt.value+=ot.value)}),we}return B.sort=function(W){return arguments.length?(me=W,B):me},B.children=function(W){return arguments.length?(O=W,B):O},B.value=function(W){return arguments.length?(F=W,B):F},B.revalue=function(W){return F&&(an(W,function(fe){fe.children&&(fe.value=0)}),vn(W,function(fe){var ge;fe.children||(fe.value=+F.call(B,fe,fe.depth)||0),(ge=fe.parent)&&(ge.value+=fe.value)})),W},B},p.layout.partition=function(){var me=p.layout.hierarchy(),O=[1,1];function F(B,W){var fe=me.call(this,B,W);return function ge(we,Ee,Pe,$e){var ot=we.children;if(we.x=Ee,we.y=we.depth*$e,we.dx=Pe,we.dy=$e,ot&&(pt=ot.length)){var pt,Dt,zt,Pt=-1;for(Pe=we.value?Pe/we.value:0;++Pt<pt;)ge(Dt=ot[Pt],Ee,zt=Dt.value*Pe,$e),Ee+=zt}}(fe[0],0,O[0],O[1]/function ge(we){var Ee=we.children,Pe=0;if(Ee&&($e=Ee.length))for(var $e,ot=-1;++ot<$e;)Pe=Math.max(Pe,ge(Ee[ot]));return 1+Pe}(fe[0])),fe}return F.size=function(B){return arguments.length?(O=B,F):O},un(F,me)},p.layout.pie=function(){var me=Number,O=wr,F=0,B=rn,W=0;function fe(ge){var we,Ee=ge.length,Pe=ge.map(function(Zt,qt){return+me.call(fe,Zt,qt)}),$e=+("function"==typeof F?F.apply(this,arguments):F),ot=("function"==typeof B?B.apply(this,arguments):B)-$e,pt=Math.min(Math.abs(ot)/Ee,+("function"==typeof W?W.apply(this,arguments):W)),Dt=pt*(ot<0?-1:1),zt=p.sum(Pe),Pt=zt?(ot-Ee*Dt)/zt:0,Nt=p.range(Ee),Et=[];return null!=O&&Nt.sort(O===wr?function(Zt,qt){return Pe[qt]-Pe[Zt]}:function(Zt,qt){return O(ge[Zt],ge[qt])}),Nt.forEach(function(Zt){Et[Zt]={data:ge[Zt],value:we=Pe[Zt],startAngle:$e,endAngle:$e+=we*Pt+Dt,padAngle:pt}}),Et}return fe.value=function(ge){return arguments.length?(me=ge,fe):me},fe.sort=function(ge){return arguments.length?(O=ge,fe):O},fe.startAngle=function(ge){return arguments.length?(F=ge,fe):F},fe.endAngle=function(ge){return arguments.length?(B=ge,fe):B},fe.padAngle=function(ge){return arguments.length?(W=ge,fe):W},fe};var wr={};function Lr(me){return me.x}function Zr(me){return me.y}function Qr(me,O,F){me.y0=O,me.y=F}p.layout.stack=function(){var me=E,O=Li,F=Gi,B=Qr,W=Lr,fe=Zr;function ge(we,Ee){if(!(pt=we.length))return we;var Pe=we.map(function(Zt,qt){return me.call(ge,Zt,qt)}),$e=Pe.map(function(Zt){return Zt.map(function(qt,Jt){return[W.call(ge,qt,Jt),fe.call(ge,qt,Jt)]})}),ot=O.call(ge,$e,Ee);Pe=p.permute(Pe,ot),$e=p.permute($e,ot);var pt,Dt,zt,Pt,Nt=F.call(ge,$e,Ee),Et=Pe[0].length;for(zt=0;zt<Et;++zt)for(B.call(ge,Pe[0][zt],Pt=Nt[zt],$e[0][zt][1]),Dt=1;Dt<pt;++Dt)B.call(ge,Pe[Dt][zt],Pt+=$e[Dt-1][zt][1],$e[Dt][zt][1]);return we}return ge.values=function(we){return arguments.length?(me=we,ge):me},ge.order=function(we){return arguments.length?(O="function"==typeof we?we:Kr.get(we)||Li,ge):O},ge.offset=function(we){return arguments.length?(F="function"==typeof we?we:$r.get(we)||Gi,ge):F},ge.x=function(we){return arguments.length?(W=we,ge):W},ge.y=function(we){return arguments.length?(fe=we,ge):fe},ge.out=function(we){return arguments.length?(B=we,ge):B},ge};var Kr=p.map({"inside-out":function(me){var O,F,B=me.length,W=me.map(ia),fe=me.map(Wi),ge=p.range(B).sort(function(ot,pt){return W[ot]-W[pt]}),we=0,Ee=0,Pe=[],$e=[];for(O=0;O<B;++O)F=ge[O],we<Ee?(we+=fe[F],Pe.push(F)):(Ee+=fe[F],$e.push(F));return $e.reverse().concat(Pe)},reverse:function(me){return p.range(me.length).reverse()},default:Li}),$r=p.map({silhouette:function(me){var O,F,B,W=me.length,fe=me[0].length,ge=[],we=0,Ee=[];for(F=0;F<fe;++F){for(O=0,B=0;O<W;O++)B+=me[O][F][1];B>we&&(we=B),ge.push(B)}for(F=0;F<fe;++F)Ee[F]=(we-ge[F])/2;return Ee},wiggle:function(me){var O,F,B,W,fe,ge,we,Ee,Pe,$e=me.length,ot=me[0],pt=ot.length,Dt=[];for(Dt[0]=Ee=Pe=0,F=1;F<pt;++F){for(O=0,W=0;O<$e;++O)W+=me[O][F][1];for(O=0,fe=0,we=ot[F][0]-ot[F-1][0];O<$e;++O){for(B=0,ge=(me[O][F][1]-me[O][F-1][1])/(2*we);B<O;++B)ge+=(me[B][F][1]-me[B][F-1][1])/we;fe+=ge*me[O][F][1]}Dt[F]=Ee-=W?fe/W*we:0,Ee<Pe&&(Pe=Ee)}for(F=0;F<pt;++F)Dt[F]-=Pe;return Dt},expand:function(me){var O,F,B,W=me.length,fe=me[0].length,ge=1/W,we=[];for(F=0;F<fe;++F){for(O=0,B=0;O<W;O++)B+=me[O][F][1];if(B)for(O=0;O<W;O++)me[O][F][1]/=B;else for(O=0;O<W;O++)me[O][F][1]=ge}for(F=0;F<fe;++F)we[F]=0;return we},zero:Gi});function Li(me){return p.range(me.length)}function Gi(me){for(var O=-1,F=me[0].length,B=[];++O<F;)B[O]=0;return B}function ia(me){for(var O,F=1,B=0,W=me[0][1],fe=me.length;F<fe;++F)(O=me[F][1])>W&&(B=F,W=O);return B}function Wi(me){return me.reduce(aa,0)}function aa(me,O){return me+O[1]}function Pa(me,O){return Ua(me,Math.ceil(Math.log(O.length)/Math.LN2+1))}function Ua(me,O){for(var F=-1,B=+me[0],W=(me[1]-B)/O,fe=[];++F<=O;)fe[F]=W*F+B;return fe}function ya(me){return[p.min(me),p.max(me)]}function Aa(me,O){return me.value-O.value}function Na(me,O){var F=me._pack_next;me._pack_next=O,O._pack_prev=me,O._pack_next=F,F._pack_prev=O}function ro(me,O){me._pack_next=O,O._pack_prev=me}function wo(me,O){var F=O.x-me.x,B=O.y-me.y,W=me.r+O.r;return.999*W*W>F*F+B*B}function Eo(me){if((O=me.children)&&(Ee=O.length)){var O,F,B,W,fe,ge,we,Ee,Pe=1/0,$e=-1/0,ot=1/0,pt=-1/0;if(O.forEach(Do),(F=O[0]).x=-F.r,F.y=0,qt(F),Ee>1&&((B=O[1]).x=B.r,B.y=0,qt(B),Ee>2))for(ea(F,B,W=O[2]),qt(W),Na(F,W),F._pack_prev=W,Na(W,B),B=F._pack_next,fe=3;fe<Ee;fe++){ea(F,B,W=O[fe]);var Dt=0,zt=1,Pt=1;for(ge=B._pack_next;ge!==B;ge=ge._pack_next,zt++)if(wo(ge,W)){Dt=1;break}if(1==Dt)for(we=F._pack_prev;we!==ge._pack_prev&&!wo(we,W);we=we._pack_prev,Pt++);Dt?(zt<Pt||zt==Pt&&B.r<F.r?ro(F,B=ge):ro(F=we,B),fe--):(Na(F,W),B=W,qt(W))}var Nt=(Pe+$e)/2,Et=(ot+pt)/2,Zt=0;for(fe=0;fe<Ee;fe++)(W=O[fe]).x-=Nt,W.y-=Et,Zt=Math.max(Zt,W.r+Math.sqrt(W.x*W.x+W.y*W.y));me.r=Zt,O.forEach(Xa)}function qt(Jt){Pe=Math.min(Jt.x-Jt.r,Pe),$e=Math.max(Jt.x+Jt.r,$e),ot=Math.min(Jt.y-Jt.r,ot),pt=Math.max(Jt.y+Jt.r,pt)}}function Do(me){me._pack_next=me._pack_prev=me}function Xa(me){delete me._pack_next,delete me._pack_prev}function ea(me,O,F){var B=me.r+F.r,W=O.x-me.x,fe=O.y-me.y;if(B&&(W||fe)){var ge=O.r+F.r,we=W*W+fe*fe,Ee=.5+((B*=B)-(ge*=ge))/(2*we),Pe=Math.sqrt(Math.max(0,2*ge*(B+we)-(B-=we)*B-ge*ge))/(2*we);F.x=me.x+Ee*W+Pe*fe,F.y=me.y+Ee*fe-Pe*W}else F.x=me.x+B,F.y=me.y}function Tt(me,O){return me.parent==O.parent?1:2}function Gt(me){var O=me.children;return O.length?O[0]:me.t}function bn(me){var O,F=me.children;return(O=F.length)?F[O-1]:me.t}function Qt(me,O,F){var B=F/(O.i-me.i);O.c-=B,O.s+=F,me.c+=B,O.z+=F,O.m+=F}function wn(me,O,F){return me.a.parent===O.parent?me.a:F}function qn(me){return{x:me.x,y:me.y,dx:me.dx,dy:me.dy}}function tr(me,O){var F=me.x+O[3],B=me.y+O[0],W=me.dx-O[1]-O[3],fe=me.dy-O[0]-O[2];return W<0&&(F+=W/2,W=0),fe<0&&(B+=fe/2,fe=0),{x:F,y:B,dx:W,dy:fe}}function pr(me){var O=me[0],F=me[me.length-1];return O<F?[O,F]:[F,O]}function Ar(me){return me.rangeExtent?me.rangeExtent():pr(me.range())}function br(me,O,F,B){var W=F(me[0],me[1]),fe=B(O[0],O[1]);return function(ge){return fe(W(ge))}}function Sr(me,O){var F,B=0,W=me.length-1,fe=me[B],ge=me[W];return ge<fe&&(F=B,B=W,W=F,F=fe,fe=ge,ge=F),me[B]=O.floor(fe),me[W]=O.ceil(ge),me}function Vr(me){return me?{floor:function(O){return Math.floor(O/me)*me},ceil:function(O){return Math.ceil(O/me)*me}}:Mr}p.layout.histogram=function(){var me=!0,O=Number,F=ya,B=Pa;function W(fe,ge){for(var we,Ee,Pe=[],$e=fe.map(O,this),ot=F.call(this,$e,ge),pt=B.call(this,ot,$e,ge),Dt=(ge=-1,$e.length),zt=pt.length-1,Pt=me?1:1/Dt;++ge<zt;)(we=Pe[ge]=[]).dx=pt[ge+1]-(we.x=pt[ge]),we.y=0;if(zt>0)for(ge=-1;++ge<Dt;)(Ee=$e[ge])>=ot[0]&&Ee<=ot[1]&&((we=Pe[p.bisect(pt,Ee,1,zt)-1]).y+=Pt,we.push(fe[ge]));return Pe}return W.value=function(fe){return arguments.length?(O=fe,W):O},W.range=function(fe){return arguments.length?(F=En(fe),W):F},W.bins=function(fe){return arguments.length?(B="number"==typeof fe?function(ge){return Ua(ge,fe)}:En(fe),W):B},W.frequency=function(fe){return arguments.length?(me=!!fe,W):me},W},p.layout.pack=function(){var me,O=p.layout.hierarchy().sort(Aa),F=0,B=[1,1];function W(fe,ge){var we=O.call(this,fe,ge),Ee=we[0],Pe=B[0],$e=B[1],ot=null==me?Math.sqrt:"function"==typeof me?me:function(){return me};if(Ee.x=Ee.y=0,vn(Ee,function(Dt){Dt.r=+ot(Dt.value)}),vn(Ee,Eo),F){var pt=F*(me?1:Math.max(2*Ee.r/Pe,2*Ee.r/$e))/2;vn(Ee,function(Dt){Dt.r+=pt}),vn(Ee,Eo),vn(Ee,function(Dt){Dt.r-=pt})}return function Dt(zt,Pt,Nt,Et){var Zt=zt.children;if(zt.x=Pt+=Et*zt.x,zt.y=Nt+=Et*zt.y,zt.r*=Et,Zt)for(var qt=-1,Jt=Zt.length;++qt<Jt;)Dt(Zt[qt],Pt,Nt,Et)}(Ee,Pe/2,$e/2,me?1:1/Math.max(2*Ee.r/Pe,2*Ee.r/$e)),we}return W.size=function(fe){return arguments.length?(B=fe,W):B},W.radius=function(fe){return arguments.length?(me=null==fe||"function"==typeof fe?fe:+fe,W):me},W.padding=function(fe){return arguments.length?(F=+fe,W):F},un(W,O)},p.layout.tree=function(){var me=p.layout.hierarchy().sort(null).value(null),O=Tt,F=[1,1],B=null;function W(Ee,Pe){var $e=me.call(this,Ee,Pe),ot=$e[0],pt=function(qt){for(var Jt,gn={A:null,children:[qt]},On=[gn];null!=(Jt=On.pop());)for(var Yn,Hn=Jt.children,vr=0,gr=Hn.length;vr<gr;++vr)On.push((Hn[vr]=Yn={_:Hn[vr],parent:Jt,children:(Yn=Hn[vr].children)&&Yn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:vr}).a=Yn);return gn.children[0]}(ot);if(vn(pt,fe),pt.parent.m=-pt.z,an(pt,ge),B)an(ot,we);else{var Dt=ot,zt=ot,Pt=ot;an(ot,function(qt){qt.x<Dt.x&&(Dt=qt),qt.x>zt.x&&(zt=qt),qt.depth>Pt.depth&&(Pt=qt)});var Nt=O(Dt,zt)/2-Dt.x,Et=F[0]/(zt.x+O(zt,Dt)/2+Nt),Zt=F[1]/(Pt.depth||1);an(ot,function(qt){qt.x=(qt.x+Nt)*Et,qt.y=qt.depth*Zt})}return $e}function fe(Ee){var Pe=Ee.children,$e=Ee.parent.children,ot=Ee.i?$e[Ee.i-1]:null;if(Pe.length){!function(Dt){for(var zt,Pt=0,Nt=0,Et=Dt.children,Zt=Et.length;--Zt>=0;)(zt=Et[Zt]).z+=Pt,zt.m+=Pt,Pt+=zt.s+(Nt+=zt.c)}(Ee);var pt=(Pe[0].z+Pe[Pe.length-1].z)/2;ot?(Ee.z=ot.z+O(Ee._,ot._),Ee.m=Ee.z-pt):Ee.z=pt}else ot&&(Ee.z=ot.z+O(Ee._,ot._));Ee.parent.A=function(Dt,zt,Pt){if(zt){for(var Nt,Et=Dt,Zt=Dt,qt=zt,Jt=Et.parent.children[0],gn=Et.m,On=Zt.m,Yn=qt.m,Hn=Jt.m;qt=bn(qt),Et=Gt(Et),qt&&Et;)Jt=Gt(Jt),(Zt=bn(Zt)).a=Dt,(Nt=qt.z+Yn-Et.z-gn+O(qt._,Et._))>0&&(Qt(wn(qt,Dt,Pt),Dt,Nt),gn+=Nt,On+=Nt),Yn+=qt.m,gn+=Et.m,Hn+=Jt.m,On+=Zt.m;qt&&!bn(Zt)&&(Zt.t=qt,Zt.m+=Yn-On),Et&&!Gt(Jt)&&(Jt.t=Et,Jt.m+=gn-Hn,Pt=Dt)}return Pt}(Ee,ot,Ee.parent.A||$e[0])}function ge(Ee){Ee._.x=Ee.z+Ee.parent.m,Ee.m+=Ee.parent.m}function we(Ee){Ee.x*=F[0],Ee.y=Ee.depth*F[1]}return W.separation=function(Ee){return arguments.length?(O=Ee,W):O},W.size=function(Ee){return arguments.length?(B=null==(F=Ee)?we:null,W):B?null:F},W.nodeSize=function(Ee){return arguments.length?(B=null==(F=Ee)?null:we,W):B?F:null},un(W,me)},p.layout.cluster=function(){var me=p.layout.hierarchy().sort(null).value(null),O=Tt,F=[1,1],B=!1;function W(fe,ge){var we,Ee=me.call(this,fe,ge),Pe=Ee[0],$e=0;vn(Pe,function(Pt){var Et,Nt=Pt.children;Nt&&Nt.length?(Pt.x=(Et=Nt).reduce(function(Zt,qt){return Zt+qt.x},0)/Et.length,Pt.y=function(Et){return 1+p.max(Et,function(Zt){return Zt.y})}(Nt)):(Pt.x=we?$e+=O(Pt,we):0,Pt.y=0,we=Pt)});var ot=function Pt(Nt){var Et=Nt.children;return Et&&Et.length?Pt(Et[0]):Nt}(Pe),pt=function Pt(Nt){var Et,Zt=Nt.children;return Zt&&(Et=Zt.length)?Pt(Zt[Et-1]):Nt}(Pe),Dt=ot.x-O(ot,pt)/2,zt=pt.x+O(pt,ot)/2;return vn(Pe,B?function(Pt){Pt.x=(Pt.x-Pe.x)*F[0],Pt.y=(Pe.y-Pt.y)*F[1]}:function(Pt){Pt.x=(Pt.x-Dt)/(zt-Dt)*F[0],Pt.y=(1-(Pe.y?Pt.y/Pe.y:1))*F[1]}),Ee}return W.separation=function(fe){return arguments.length?(O=fe,W):O},W.size=function(fe){return arguments.length?(B=null==(F=fe),W):B?null:F},W.nodeSize=function(fe){return arguments.length?(B=null!=(F=fe),W):B?F:null},un(W,me)},p.layout.treemap=function(){var me,O=p.layout.hierarchy(),F=Math.round,B=[1,1],W=null,fe=qn,ge=!1,we="squarify",Ee=.5*(1+Math.sqrt(5));function Pe(Pt,Nt){for(var Et,Zt,qt=-1,Jt=Pt.length;++qt<Jt;)Zt=(Et=Pt[qt]).value*(Nt<0?0:Nt),Et.area=isNaN(Zt)||Zt<=0?0:Zt}function $e(Pt){var Nt=Pt.children;if(Nt&&Nt.length){var Et,Zt,qt,Jt=fe(Pt),gn=[],On=Nt.slice(),Yn=1/0,Hn="slice"===we?Jt.dx:"dice"===we?Jt.dy:"slice-dice"===we?1&Pt.depth?Jt.dy:Jt.dx:Math.min(Jt.dx,Jt.dy);for(Pe(On,Jt.dx*Jt.dy/Pt.value),gn.area=0;(qt=On.length)>0;)gn.push(Et=On[qt-1]),gn.area+=Et.area,"squarify"!==we||(Zt=pt(gn,Hn))<=Yn?(On.pop(),Yn=Zt):(gn.area-=gn.pop().area,Dt(gn,Hn,Jt,!1),Hn=Math.min(Jt.dx,Jt.dy),gn.length=gn.area=0,Yn=1/0);gn.length&&(Dt(gn,Hn,Jt,!0),gn.length=gn.area=0),Nt.forEach($e)}}function ot(Pt){var Nt=Pt.children;if(Nt&&Nt.length){var Et,Zt=fe(Pt),qt=Nt.slice(),Jt=[];for(Pe(qt,Zt.dx*Zt.dy/Pt.value),Jt.area=0;Et=qt.pop();)Jt.push(Et),Jt.area+=Et.area,null!=Et.z&&(Dt(Jt,Et.z?Zt.dx:Zt.dy,Zt,!qt.length),Jt.length=Jt.area=0);Nt.forEach(ot)}}function pt(Pt,Nt){for(var Et,Zt=Pt.area,qt=0,Jt=1/0,gn=-1,On=Pt.length;++gn<On;)(Et=Pt[gn].area)&&(Et<Jt&&(Jt=Et),Et>qt&&(qt=Et));return Nt*=Nt,(Zt*=Zt)?Math.max(Nt*qt*Ee/Zt,Zt/(Nt*Jt*Ee)):1/0}function Dt(Pt,Nt,Et,Zt){var qt,Jt=-1,gn=Pt.length,On=Et.x,Yn=Et.y,Hn=Nt?F(Pt.area/Nt):0;if(Nt==Et.dx){for((Zt||Hn>Et.dy)&&(Hn=Et.dy);++Jt<gn;)(qt=Pt[Jt]).x=On,qt.y=Yn,qt.dy=Hn,On+=qt.dx=Math.min(Et.x+Et.dx-On,Hn?F(qt.area/Hn):0);qt.z=!0,qt.dx+=Et.x+Et.dx-On,Et.y+=Hn,Et.dy-=Hn}else{for((Zt||Hn>Et.dx)&&(Hn=Et.dx);++Jt<gn;)(qt=Pt[Jt]).x=On,qt.y=Yn,qt.dx=Hn,Yn+=qt.dy=Math.min(Et.y+Et.dy-Yn,Hn?F(qt.area/Hn):0);qt.z=!1,qt.dy+=Et.y+Et.dy-Yn,Et.x+=Hn,Et.dx-=Hn}}function zt(Pt){var Nt=me||O(Pt),Et=Nt[0];return Et.x=Et.y=0,Et.value?(Et.dx=B[0],Et.dy=B[1]):Et.dx=Et.dy=0,me&&O.revalue(Et),Pe([Et],Et.dx*Et.dy/Et.value),(me?ot:$e)(Et),ge&&(me=Nt),Nt}return zt.size=function(Pt){return arguments.length?(B=Pt,zt):B},zt.padding=function(Pt){if(!arguments.length)return W;function Nt(qt){var Jt=Pt.call(zt,qt,qt.depth);return null==Jt?qn(qt):tr(qt,"number"==typeof Jt?[Jt,Jt,Jt,Jt]:Jt)}function Et(qt){return tr(qt,Pt)}var Zt;return fe=null==(W=Pt)?qn:"function"==(Zt=typeof Pt)?Nt:("number"===Zt&&(Pt=[Pt,Pt,Pt,Pt]),Et),zt},zt.round=function(Pt){return arguments.length?(F=Pt?Math.round:Number,zt):F!=Number},zt.sticky=function(Pt){return arguments.length?(ge=Pt,me=null,zt):ge},zt.ratio=function(Pt){return arguments.length?(Ee=Pt,zt):Ee},zt.mode=function(Pt){return arguments.length?(we=Pt+"",zt):we},un(zt,O)},p.random={normal:function(me,O){var F=arguments.length;return F<2&&(O=1),F<1&&(me=0),function(){var B,W,fe;do{fe=(B=2*Math.random()-1)*B+(W=2*Math.random()-1)*W}while(!fe||fe>1);return me+O*B*Math.sqrt(-2*Math.log(fe)/fe)}},logNormal:function(){var me=p.random.normal.apply(p,arguments);return function(){return Math.exp(me())}},bates:function(me){var O=p.random.irwinHall(me);return function(){return O()/me}},irwinHall:function(me){return function(){for(var O=0,F=0;F<me;F++)O+=Math.random();return O}}},p.scale={};var Mr={floor:E,ceil:E};function Ur(me,O,F,B){var W=[],fe=[],ge=0,we=Math.min(me.length,O.length)-1;for(me[we]<me[0]&&(me=me.slice().reverse(),O=O.slice().reverse());++ge<=we;)W.push(F(me[ge-1],me[ge])),fe.push(B(O[ge-1],O[ge]));return function(Ee){var Pe=p.bisect(me,Ee,1,we)-1;return fe[Pe](W[Pe](Ee))}}function ei(me,O){return p.rebind(me,O,"range","rangeRound","interpolate","clamp")}function ai(me,O){return Sr(me,Vr(yi(me,O)[2])),Sr(me,Vr(yi(me,O)[2])),me}function yi(me,O){null==O&&(O=10);var F=pr(me),B=F[1]-F[0],W=Math.pow(10,Math.floor(Math.log(B/O)/Math.LN10)),fe=O/B*W;return fe<=.15?W*=10:fe<=.35?W*=5:fe<=.75&&(W*=2),F[0]=Math.ceil(F[0]/W)*W,F[1]=Math.floor(F[1]/W)*W+.5*W,F[2]=W,F}function fr(me,O){return p.range.apply(p,yi(me,O))}p.scale.linear=function(){return function me(O,F,B,W){var fe,ge;function we(){var Pe=Math.min(O.length,F.length)>2?Ur:br,$e=W?Ko:Is;return fe=Pe(O,F,$e,B),ge=Pe(F,O,$e,Wa),Ee}function Ee(Pe){return fe(Pe)}return Ee.invert=function(Pe){return ge(Pe)},Ee.domain=function(Pe){return arguments.length?(O=Pe.map(Number),we()):O},Ee.range=function(Pe){return arguments.length?(F=Pe,we()):F},Ee.rangeRound=function(Pe){return Ee.range(Pe).interpolate($o)},Ee.clamp=function(Pe){return arguments.length?(W=Pe,we()):W},Ee.interpolate=function(Pe){return arguments.length?(B=Pe,we()):B},Ee.ticks=function(Pe){return fr(O,Pe)},Ee.tickFormat=function(Pe,$e){return d3_scale_linearTickFormat(O,Pe,$e)},Ee.nice=function(Pe){return ai(O,Pe),we()},Ee.copy=function(){return me(O,F,B,W)},we()}([0,1],[0,1],Wa,!1)},p.scale.log=function(){return function me(O,F,B,W){function fe(Ee){return(B?Math.log(Ee<0?0:Ee):-Math.log(Ee>0?0:-Ee))/Math.log(F)}function ge(Ee){return B?Math.pow(F,Ee):-Math.pow(F,-Ee)}function we(Ee){return O(fe(Ee))}return we.invert=function(Ee){return ge(O.invert(Ee))},we.domain=function(Ee){return arguments.length?(B=Ee[0]>=0,O.domain((W=Ee.map(Number)).map(fe)),we):W},we.base=function(Ee){return arguments.length?(F=+Ee,O.domain(W.map(fe)),we):F},we.nice=function(){var Ee=Sr(W.map(fe),B?Math:gi);return O.domain(Ee),W=Ee.map(ge),we},we.ticks=function(){var Ee=pr(W),Pe=[],$e=Ee[0],ot=Ee[1],pt=Math.floor(fe($e)),Dt=Math.ceil(fe(ot)),zt=F%1?2:F;if(isFinite(Dt-pt)){if(B){for(;pt<Dt;pt++)for(var Pt=1;Pt<zt;Pt++)Pe.push(ge(pt)*Pt);Pe.push(ge(pt))}else for(Pe.push(ge(pt));pt++<Dt;)for(Pt=zt-1;Pt>0;Pt--)Pe.push(ge(pt)*Pt);for(pt=0;Pe[pt]<$e;pt++);for(Dt=Pe.length;Pe[Dt-1]>ot;Dt--);Pe=Pe.slice(pt,Dt)}return Pe},we.copy=function(){return me(O.copy(),F,B,W)},ei(we,O)}(p.scale.linear().domain([0,1]),10,!0,[1,10])};var gi={floor:function(me){return-Math.ceil(-me)},ceil:function(me){return-Math.floor(-me)}};function Je(me){return function(O){return O<0?-Math.pow(-O,me):Math.pow(O,me)}}p.scale.pow=function(){return function me(O,F,B){var W=Je(F),fe=Je(1/F);function ge(we){return O(W(we))}return ge.invert=function(we){return fe(O.invert(we))},ge.domain=function(we){return arguments.length?(O.domain((B=we.map(Number)).map(W)),ge):B},ge.ticks=function(we){return fr(B,we)},ge.tickFormat=function(we,Ee){return d3_scale_linearTickFormat(B,we,Ee)},ge.nice=function(we){return ge.domain(ai(B,we))},ge.exponent=function(we){return arguments.length?(W=Je(F=we),fe=Je(1/F),O.domain(B.map(W)),ge):F},ge.copy=function(){return me(O.copy(),F,B)},ei(ge,O)}(p.scale.linear(),1,[0,1])},p.scale.sqrt=function(){return p.scale.pow().exponent(.5)},p.scale.ordinal=function(){return function me(O,F){var B,W,fe;function ge(Ee){return W[((B.get(Ee)||("range"===F.t?B.set(Ee,O.push(Ee)):NaN))-1)%W.length]}function we(Ee,Pe){return p.range(O.length).map(function($e){return Ee+Pe*$e})}return ge.domain=function(Ee){if(!arguments.length)return O;O=[],B=new T;for(var Pe,$e=-1,ot=Ee.length;++$e<ot;)B.has(Pe=Ee[$e])||B.set(Pe,O.push(Pe));return ge[F.t].apply(ge,F.a)},ge.range=function(Ee){return arguments.length?(W=Ee,fe=0,F={t:"range",a:arguments},ge):W},ge.rangePoints=function(Ee,Pe){arguments.length<2&&(Pe=0);var $e=Ee[0],ot=Ee[1],pt=O.length<2?($e=($e+ot)/2,0):(ot-$e)/(O.length-1+Pe);return W=we($e+pt*Pe/2,pt),fe=0,F={t:"rangePoints",a:arguments},ge},ge.rangeRoundPoints=function(Ee,Pe){arguments.length<2&&(Pe=0);var $e=Ee[0],ot=Ee[1],pt=O.length<2?($e=ot=Math.round(($e+ot)/2),0):(ot-$e)/(O.length-1+Pe)|0;return W=we($e+Math.round(pt*Pe/2+(ot-$e-(O.length-1+Pe)*pt)/2),pt),fe=0,F={t:"rangeRoundPoints",a:arguments},ge},ge.rangeBands=function(Ee,Pe,$e){arguments.length<2&&(Pe=0),arguments.length<3&&($e=Pe);var ot=Ee[1]<Ee[0],pt=Ee[ot-0],zt=(Ee[1-ot]-pt)/(O.length-Pe+2*$e);return W=we(pt+zt*$e,zt),ot&&W.reverse(),fe=zt*(1-Pe),F={t:"rangeBands",a:arguments},ge},ge.rangeRoundBands=function(Ee,Pe,$e){arguments.length<2&&(Pe=0),arguments.length<3&&($e=Pe);var ot=Ee[1]<Ee[0],pt=Ee[ot-0],Dt=Ee[1-ot],zt=Math.floor((Dt-pt)/(O.length-Pe+2*$e));return W=we(pt+Math.round((Dt-pt-(O.length-Pe)*zt)/2),zt),ot&&W.reverse(),fe=Math.round(zt*(1-Pe)),F={t:"rangeRoundBands",a:arguments},ge},ge.rangeBand=function(){return fe},ge.rangeExtent=function(){return pr(F.a[0])},ge.copy=function(){return me(O,F)},ge.domain(O)}([],{t:"range",a:[[]]})},p.scale.category10=function(){return p.scale.ordinal().range(at)},p.scale.category20=function(){return p.scale.ordinal().range(Bt)},p.scale.category20b=function(){return p.scale.ordinal().range(Cn)},p.scale.category20c=function(){return p.scale.ordinal().range(dr)};var at=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tn),Bt=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tn),Cn=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tn),dr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tn);function cr(){return 0}p.scale.quantile=function(){return function me(O,F){var B;function W(){var ge=0,we=F.length;for(B=[];++ge<we;)B[ge-1]=p.quantile(O,ge/we);return fe}function fe(ge){if(!isNaN(ge=+ge))return F[p.bisect(B,ge)]}return fe.domain=function(ge){return arguments.length?(O=ge.map(f).filter(u).sort(i),W()):O},fe.range=function(ge){return arguments.length?(F=ge,W()):F},fe.quantiles=function(){return B},fe.invertExtent=function(ge){return(ge=F.indexOf(ge))<0?[NaN,NaN]:[ge>0?B[ge-1]:O[0],ge<B.length?B[ge]:O[O.length-1]]},fe.copy=function(){return me(O,F)},W()}([],[])},p.scale.quantize=function(){return function me(O,F,B){var W,fe;function ge(Ee){return B[Math.max(0,Math.min(fe,Math.floor(W*(Ee-O))))]}function we(){return W=B.length/(F-O),fe=B.length-1,ge}return ge.domain=function(Ee){return arguments.length?(O=+Ee[0],F=+Ee[Ee.length-1],we()):[O,F]},ge.range=function(Ee){return arguments.length?(B=Ee,we()):B},ge.invertExtent=function(Ee){return[Ee=(Ee=B.indexOf(Ee))<0?NaN:Ee/W+O,Ee+1/W]},ge.copy=function(){return me(O,F,B)},we()}(0,1,[0,1])},p.scale.threshold=function(){return function me(O,F){function B(W){if(W<=W)return F[p.bisect(O,W)]}return B.domain=function(W){return arguments.length?(O=W,B):O},B.range=function(W){return arguments.length?(F=W,B):F},B.invertExtent=function(W){return W=F.indexOf(W),[O[W-1],O[W]]},B.copy=function(){return me(O,F)},B}([.5],[0,1])},p.scale.identity=function(){return function me(O){function F(B){return+B}return F.invert=F,F.domain=F.range=function(B){return arguments.length?(O=B.map(F),F):O},F.ticks=function(B){return fr(O,B)},F.tickFormat=function(B,W){return d3_scale_linearTickFormat(O,B,W)},F.copy=function(){return me(O)},F}([0,1])},p.svg={},p.svg.arc=function(){var me=Di,O=_i,F=cr,B=ki,W=$i,fe=Bi,ge=Ta;function we(){var Pe=Math.max(0,+me.apply(this,arguments)),$e=Math.max(0,+O.apply(this,arguments)),ot=W.apply(this,arguments)-cn,pt=fe.apply(this,arguments)-cn,Dt=Math.abs(pt-ot),zt=ot>pt?0:1;if($e<Pe&&(Pt=$e,$e=Pe,Pe=Pt),Dt>=hn)return Ee($e,zt)+(Pe?Ee(Pe,1-zt):"")+"Z";var Pt,Nt,Et,Zt,qt,Jt,gn,On,Yn,Hn,vr,gr,Pr=0,Cr=0,ii=[];if((Zt=(+ge.apply(this,arguments)||0)/2)&&(Et=B===ki?Math.sqrt(Pe*Pe+$e*$e):+B.apply(this,arguments),zt||(Cr*=-1),$e&&(Cr=Xe(Et/$e*Math.sin(Zt))),Pe&&(Pr=Xe(Et/Pe*Math.sin(Zt)))),$e){qt=$e*Math.cos(ot+Cr),Jt=$e*Math.sin(ot+Cr),gn=$e*Math.cos(pt-Cr),On=$e*Math.sin(pt-Cr);var di=Math.abs(pt-ot-2*Cr)<=$t?0:1;if(Cr&&xi(qt,Jt,gn,On)===zt^di){var Oi=(ot+pt)/2;qt=$e*Math.cos(Oi),Jt=$e*Math.sin(Oi),gn=On=null}}else qt=Jt=0;if(Pe){Yn=Pe*Math.cos(pt-Pr),Hn=Pe*Math.sin(pt-Pr),vr=Pe*Math.cos(ot+Pr),gr=Pe*Math.sin(ot+Pr);var ur=Math.abs(ot-pt+2*Pr)<=$t?0:1;if(Pr&&xi(Yn,Hn,vr,gr)===1-zt^ur){var Gr=(ot+pt)/2;Yn=Pe*Math.cos(Gr),Hn=Pe*Math.sin(Gr),vr=gr=null}}else Yn=Hn=0;if(Dt>Ct&&(Pt=Math.min(Math.abs($e-Pe)/2,+F.apply(this,arguments)))>.001){Nt=Pe<$e^zt?0:1;var hi=Pt,si=Pt;if(Dt<$t){var wi=null==vr?[Yn,Hn]:null==gn?[qt,Jt]:Rr([qt,Jt],[vr,gr],[gn,On],[Yn,Hn]),Ii=qt-wi[0],Xi=Jt-wi[1],bi=gn-wi[0],qi=On-wi[1],zi=1/Math.sin(Math.acos((Ii*bi+Xi*qi)/(Math.sqrt(Ii*Ii+Xi*Xi)*Math.sqrt(bi*bi+qi*qi)))/2),ta=Math.sqrt(wi[0]*wi[0]+wi[1]*wi[1]);si=Math.min(Pt,(Pe-ta)/(zi-1)),hi=Math.min(Pt,($e-ta)/(zi+1))}if(null!=gn){var Yi=_a(null==vr?[Yn,Hn]:[vr,gr],[qt,Jt],$e,hi,zt),na=_a([gn,On],[Yn,Hn],$e,hi,zt);Pt===hi?ii.push("M",Yi[0],"A",hi,",",hi," 0 0,",Nt," ",Yi[1],"A",$e,",",$e," 0 ",1-zt^xi(Yi[1][0],Yi[1][1],na[1][0],na[1][1]),",",zt," ",na[1],"A",hi,",",hi," 0 0,",Nt," ",na[0]):ii.push("M",Yi[0],"A",hi,",",hi," 0 1,",Nt," ",na[0])}else ii.push("M",qt,",",Jt);if(null!=vr){var fa=_a([qt,Jt],[vr,gr],Pe,-si,zt),Ha=_a([Yn,Hn],null==gn?[qt,Jt]:[gn,On],Pe,-si,zt);Pt===si?ii.push("L",Ha[0],"A",si,",",si," 0 0,",Nt," ",Ha[1],"A",Pe,",",Pe," 0 ",zt^xi(Ha[1][0],Ha[1][1],fa[1][0],fa[1][1]),",",1-zt," ",fa[1],"A",si,",",si," 0 0,",Nt," ",fa[0]):ii.push("L",Ha[0],"A",si,",",si," 0 0,",Nt," ",fa[0])}else ii.push("L",Yn,",",Hn)}else ii.push("M",qt,",",Jt),null!=gn&&ii.push("A",$e,",",$e," 0 ",di,",",zt," ",gn,",",On),ii.push("L",Yn,",",Hn),null!=vr&&ii.push("A",Pe,",",Pe," 0 ",ur,",",1-zt," ",vr,",",gr);return ii.push("Z"),ii.join("")}function Ee(Pe,$e){return"M0,"+Pe+"A"+Pe+","+Pe+" 0 1,"+$e+" 0,"+-Pe+"A"+Pe+","+Pe+" 0 1,"+$e+" 0,"+Pe}return we.innerRadius=function(Pe){return arguments.length?(me=En(Pe),we):me},we.outerRadius=function(Pe){return arguments.length?(O=En(Pe),we):O},we.cornerRadius=function(Pe){return arguments.length?(F=En(Pe),we):F},we.padRadius=function(Pe){return arguments.length?(B=Pe==ki?ki:En(Pe),we):B},we.startAngle=function(Pe){return arguments.length?(W=En(Pe),we):W},we.endAngle=function(Pe){return arguments.length?(fe=En(Pe),we):fe},we.padAngle=function(Pe){return arguments.length?(ge=En(Pe),we):ge},we.centroid=function(){var Pe=(+me.apply(this,arguments)+ +O.apply(this,arguments))/2,$e=(+W.apply(this,arguments)+ +fe.apply(this,arguments))/2-cn;return[Math.cos($e)*Pe,Math.sin($e)*Pe]},we};var ki="auto";function Di(me){return me.innerRadius}function _i(me){return me.outerRadius}function $i(me){return me.startAngle}function Bi(me){return me.endAngle}function Ta(me){return me&&me.padAngle}function xi(me,O,F,B){return(me-F)*O-(O-B)*me>0?0:1}function _a(me,O,F,B,W){var fe=me[0]-O[0],ge=me[1]-O[1],we=(W?B:-B)/Math.sqrt(fe*fe+ge*ge),Ee=we*ge,Pe=-we*fe,$e=me[0]+Ee,ot=me[1]+Pe,pt=O[0]+Ee,Dt=O[1]+Pe,zt=($e+pt)/2,Pt=(ot+Dt)/2,Nt=pt-$e,Et=Dt-ot,Zt=Nt*Nt+Et*Et,qt=F-B,Jt=$e*Dt-pt*ot,gn=(Et<0?-1:1)*Math.sqrt(Math.max(0,qt*qt*Zt-Jt*Jt)),On=(Jt*Et-Nt*gn)/Zt,Yn=(-Jt*Nt-Et*gn)/Zt,Hn=(Jt*Et+Nt*gn)/Zt,vr=(-Jt*Nt+Et*gn)/Zt,gr=On-zt,Pr=Yn-Pt,Cr=Hn-zt,ii=vr-Pt;return gr*gr+Pr*Pr>Cr*Cr+ii*ii&&(On=Hn,Yn=vr),[[On-Ee,Yn-Pe],[On*F/qt,Yn*F/qt]]}function $a(){return!0}function Ps(me){var O=Qn,F=Ir,B=$a,W=ca,fe=W.key,ge=.7;function we(Ee){var Pe,$e=[],ot=[],pt=-1,Dt=Ee.length,zt=En(O),Pt=En(F);function Nt(){$e.push("M",W(me(ot),ge))}for(;++pt<Dt;)B.call(this,Pe=Ee[pt],pt)?ot.push([+zt.call(this,Pe,pt),+Pt.call(this,Pe,pt)]):ot.length&&(Nt(),ot=[]);return ot.length&&Nt(),$e.length?$e.join(""):null}return we.x=function(Ee){return arguments.length?(O=Ee,we):O},we.y=function(Ee){return arguments.length?(F=Ee,we):F},we.defined=function(Ee){return arguments.length?(B=Ee,we):B},we.interpolate=function(Ee){return arguments.length?(fe="function"==typeof Ee?W=Ee:(W=To.get(Ee)||ca).key,we):fe},we.tension=function(Ee){return arguments.length?(ge=Ee,we):ge},we}p.svg.line=function(){return Ps(E)};var To=p.map({linear:ca,"linear-closed":Fi,step:function(me){for(var O=0,F=me.length,B=me[0],W=[B[0],",",B[1]];++O<F;)W.push("H",(B[0]+(B=me[O])[0])/2,"V",B[1]);return F>1&&W.push("H",B[0]),W.join("")},"step-before":Ja,"step-after":is,basis:Mo,"basis-open":function(me){if(me.length<4)return ca(me);for(var O,F=[],B=-1,W=me.length,fe=[0],ge=[0];++B<3;)fe.push((O=me[B])[0]),ge.push(O[1]);for(F.push(Ca(Ho,fe)+","+Ca(Ho,ge)),--B;++B<W;)O=me[B],fe.shift(),fe.push(O[0]),ge.shift(),ge.push(O[1]),el(F,fe,ge);return F.join("")},"basis-closed":function(me){for(var O,F,B=-1,W=me.length,fe=W+4,ge=[],we=[];++B<4;)ge.push((F=me[B%W])[0]),we.push(F[1]);for(O=[Ca(Ho,ge),",",Ca(Ho,we)],--B;++B<fe;)F=me[B%W],ge.shift(),ge.push(F[0]),we.shift(),we.push(F[1]),el(O,ge,we);return O.join("")},bundle:function(me,O){var F=me.length-1;if(F)for(var B,W,fe=me[0][0],ge=me[0][1],we=me[F][0]-fe,Ee=me[F][1]-ge,Pe=-1;++Pe<=F;)(B=me[Pe])[0]=O*B[0]+(1-O)*(fe+(W=Pe/F)*we),B[1]=O*B[1]+(1-O)*(ge+W*Ee);return Mo(me)},cardinal:function(me,O){return me.length<3?ca(me):me[0]+ba(me,io(me,O))},"cardinal-open":function(me,O){return me.length<4?ca(me):me[1]+ba(me.slice(1,-1),io(me,O))},"cardinal-closed":function(me,O){return me.length<3?Fi(me):me[0]+ba((me.push(me[0]),me),io([me[me.length-2]].concat(me,[me[1]]),O))},monotone:function(me){return me.length<3?ca(me):me[0]+ba(me,function(O){for(var F,B,W,fe,ge=[],we=function($e){for(var ot=0,pt=$e.length-1,Dt=[],zt=$e[0],Pt=$e[1],Nt=Dt[0]=Ws(zt,Pt);++ot<pt;)Dt[ot]=(Nt+(Nt=Ws(zt=Pt,Pt=$e[ot+1])))/2;return Dt[ot]=Nt,Dt}(O),Ee=-1,Pe=O.length-1;++Ee<Pe;)F=Ws(O[Ee],O[Ee+1]),a(F)<Ct?we[Ee]=we[Ee+1]=0:(fe=(B=we[Ee]/F)*B+(W=we[Ee+1]/F)*W)>9&&(fe=3*F/Math.sqrt(fe),we[Ee]=fe*B,we[Ee+1]=fe*W);for(Ee=-1;++Ee<=Pe;)fe=(O[Math.min(Pe,Ee+1)][0]-O[Math.max(0,Ee-1)][0])/(6*(1+we[Ee]*we[Ee])),ge.push([fe||0,we[Ee]*fe||0]);return ge}(me))}});function ca(me){return me.length>1?me.join("L"):me+"Z"}function Fi(me){return me.join("L")+"Z"}function Ja(me){for(var O=0,F=me.length,B=me[0],W=[B[0],",",B[1]];++O<F;)W.push("V",(B=me[O])[1],"H",B[0]);return W.join("")}function is(me){for(var O=0,F=me.length,B=me[0],W=[B[0],",",B[1]];++O<F;)W.push("H",(B=me[O])[0],"V",B[1]);return W.join("")}function ba(me,O){if(O.length<1||me.length!=O.length&&me.length!=O.length+2)return ca(me);var F=me.length!=O.length,B="",W=me[0],fe=me[1],ge=O[0],we=ge,Ee=1;if(F&&(B+="Q"+(fe[0]-2*ge[0]/3)+","+(fe[1]-2*ge[1]/3)+","+fe[0]+","+fe[1],W=me[1],Ee=2),O.length>1){fe=me[Ee],Ee++,B+="C"+(W[0]+ge[0])+","+(W[1]+ge[1])+","+(fe[0]-(we=O[1])[0])+","+(fe[1]-we[1])+","+fe[0]+","+fe[1];for(var Pe=2;Pe<O.length;Pe++,Ee++)B+="S"+((fe=me[Ee])[0]-(we=O[Pe])[0])+","+(fe[1]-we[1])+","+fe[0]+","+fe[1]}if(F){var $e=me[Ee];B+="Q"+(fe[0]+2*we[0]/3)+","+(fe[1]+2*we[1]/3)+","+$e[0]+","+$e[1]}return B}function io(me,O){for(var F,B=[],W=(1-O)/2,fe=me[0],ge=me[1],we=1,Ee=me.length;++we<Ee;)F=fe,fe=ge,B.push([W*((ge=me[we])[0]-F[0]),W*(ge[1]-F[1])]);return B}function Mo(me){if(me.length<3)return ca(me);var O=1,F=me.length,B=me[0],W=B[0],fe=B[1],ge=[W,W,W,(B=me[1])[0]],we=[fe,fe,fe,B[1]],Ee=[W,",",fe,"L",Ca(Ho,ge),",",Ca(Ho,we)];for(me.push(me[F-1]);++O<=F;)B=me[O],ge.shift(),ge.push(B[0]),we.shift(),we.push(B[1]),el(Ee,ge,we);return me.pop(),Ee.push("L",B),Ee.join("")}function Ca(me,O){return me[0]*O[0]+me[1]*O[1]+me[2]*O[2]+me[3]*O[3]}To.forEach(function(me,O){O.key=me,O.closed=/-closed$/.test(me)});var Uo=[0,2/3,1/3,0],Sa=[0,1/3,2/3,0],Ho=[0,1/6,2/3,1/6];function el(me,O,F){me.push("C",Ca(Uo,O),",",Ca(Uo,F),",",Ca(Sa,O),",",Ca(Sa,F),",",Ca(Ho,O),",",Ca(Ho,F))}function Ws(me,O){return(O[1]-me[1])/(O[0]-me[0])}function Cl(me){for(var O,F,B,W=-1,fe=me.length;++W<fe;)F=(O=me[W])[0],B=O[1]-cn,O[0]=F*Math.cos(B),O[1]=F*Math.sin(B);return me}function vo(me){var O=Qn,F=Qn,B=0,W=Ir,fe=$a,ge=ca,we=ge.key,Ee=ge,Pe="L",$e=.7;function ot(pt){var Dt,zt,Pt,Nt=[],Et=[],Zt=[],qt=-1,Jt=pt.length,gn=En(O),On=En(B),Yn=O===F?function(){return zt}:En(F),Hn=B===W?function(){return Pt}:En(W);function vr(){Nt.push("M",ge(me(Zt),$e),Pe,Ee(me(Et.reverse()),$e),"Z")}for(;++qt<Jt;)fe.call(this,Dt=pt[qt],qt)?(Et.push([zt=+gn.call(this,Dt,qt),Pt=+On.call(this,Dt,qt)]),Zt.push([+Yn.call(this,Dt,qt),+Hn.call(this,Dt,qt)])):Et.length&&(vr(),Et=[],Zt=[]);return Et.length&&vr(),Nt.length?Nt.join(""):null}return ot.x=function(pt){return arguments.length?(O=F=pt,ot):F},ot.x0=function(pt){return arguments.length?(O=pt,ot):O},ot.x1=function(pt){return arguments.length?(F=pt,ot):F},ot.y=function(pt){return arguments.length?(B=W=pt,ot):W},ot.y0=function(pt){return arguments.length?(B=pt,ot):B},ot.y1=function(pt){return arguments.length?(W=pt,ot):W},ot.defined=function(pt){return arguments.length?(fe=pt,ot):fe},ot.interpolate=function(pt){return arguments.length?(we="function"==typeof pt?ge=pt:(ge=To.get(pt)||ca).key,Ee=ge.reverse||ge,Pe=ge.closed?"M":"L",ot):we},ot.tension=function(pt){return arguments.length?($e=pt,ot):$e},ot}function Rl(me){return me.source}function yo(me){return me.target}function Xs(me){return me.radius}function Si(me){return[me.x,me.y]}function ji(me){return function(){var O=me.apply(this,arguments),F=O[0],B=O[1]-cn;return[F*Math.cos(B),F*Math.sin(B)]}}function Nl(){return 64}function Fl(){return"circle"}function $s(me){var O=Math.sqrt(me/$t);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}p.svg.line.radial=function(){var me=Ps(Cl);return me.radius=me.x,delete me.x,me.angle=me.y,delete me.y,me},Ja.reverse=is,is.reverse=Ja,p.svg.area=function(){return vo(E)},p.svg.area.radial=function(){var me=vo(Cl);return me.radius=me.x,delete me.x,me.innerRadius=me.x0,delete me.x0,me.outerRadius=me.x1,delete me.x1,me.angle=me.y,delete me.y,me.startAngle=me.y0,delete me.y0,me.endAngle=me.y1,delete me.y1,me},p.svg.chord=function(){var me=Rl,O=yo,F=Xs,B=$i,W=Bi;function fe(Pe,$e){var ot,pt,Dt=ge(this,me,Pe,$e),zt=ge(this,O,Pe,$e);return"M"+Dt.p0+we(Dt.r,Dt.p1,Dt.a1-Dt.a0)+((ot=Dt).a0==(pt=zt).a0&&ot.a1==pt.a1?Ee(0,0,0,Dt.p0):Ee(0,0,0,zt.p0)+we(zt.r,zt.p1,zt.a1-zt.a0)+Ee(0,0,0,Dt.p0))+"Z"}function ge(Pe,$e,ot,pt){var Dt=$e.call(Pe,ot,pt),zt=F.call(Pe,Dt,pt),Pt=B.call(Pe,Dt,pt)-cn,Nt=W.call(Pe,Dt,pt)-cn;return{r:zt,a0:Pt,a1:Nt,p0:[zt*Math.cos(Pt),zt*Math.sin(Pt)],p1:[zt*Math.cos(Nt),zt*Math.sin(Nt)]}}function we(Pe,$e,ot){return"A"+Pe+","+Pe+" 0 "+ +(ot>$t)+",1 "+$e}function Ee(Pe,$e,ot,pt){return"Q 0,0 "+pt}return fe.radius=function(Pe){return arguments.length?(F=En(Pe),fe):F},fe.source=function(Pe){return arguments.length?(me=En(Pe),fe):me},fe.target=function(Pe){return arguments.length?(O=En(Pe),fe):O},fe.startAngle=function(Pe){return arguments.length?(B=En(Pe),fe):B},fe.endAngle=function(Pe){return arguments.length?(W=En(Pe),fe):W},fe},p.svg.diagonal=function(){var me=Rl,O=yo,F=Si;function B(W,fe){var ge=me.call(this,W,fe),we=O.call(this,W,fe),Ee=(ge.y+we.y)/2,Pe=[ge,{x:ge.x,y:Ee},{x:we.x,y:Ee},we];return"M"+(Pe=Pe.map(F))[0]+"C"+Pe[1]+" "+Pe[2]+" "+Pe[3]}return B.source=function(W){return arguments.length?(me=En(W),B):me},B.target=function(W){return arguments.length?(O=En(W),B):O},B.projection=function(W){return arguments.length?(F=W,B):F},B},p.svg.diagonal.radial=function(){var me=p.svg.diagonal(),O=Si,F=me.projection;return me.projection=function(B){return arguments.length?F(ji(O=B)):O},me},p.svg.symbol=function(){var me=Fl,O=Nl;function F(B,W){return(hs.get(me.call(this,B,W))||$s)(O.call(this,B,W))}return F.type=function(B){return arguments.length?(me=En(B),F):me},F.size=function(B){return arguments.length?(O=En(B),F):O},F};var hs=p.map({circle:$s,cross:function(me){var O=Math.sqrt(me/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(me){var O=Math.sqrt(me/(2*dc)),F=O*dc;return"M0,"+-O+"L"+F+",0 0,"+O+" "+-F+",0Z"},square:function(me){var O=Math.sqrt(me)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(me){var O=Math.sqrt(me/Rs),F=O*Rs/2;return"M0,"+F+"L"+O+","+-F+" "+-O+","+-F+"Z"},"triangle-up":function(me){var O=Math.sqrt(me/Rs),F=O*Rs/2;return"M0,"+-F+"L"+O+","+F+" "+-O+","+F+"Z"}});p.svg.symbolTypes=hs.keys();var Rs=Math.sqrt(3),dc=Math.tan(30*mn);ee.transition=function(me){for(var O,F,B=ul||++fl,W=Dl(me),fe=[],ge=tl||{time:Date.now(),ease:Zs,delay:0,duration:250},we=-1,Ee=this.length;++we<Ee;){fe.push(O=[]);for(var Pe=this[we],$e=-1,ot=Pe.length;++$e<ot;)(F=Pe[$e])&&nl(F,$e,W,B,ge),O.push(F)}return Ea(fe,W,B)},ee.interrupt=function(me){return this.each(null==me?Sl:xa(Dl(me)))};var Sl=xa(Dl());function xa(me){return function(){var O,F,B;(O=this[me])&&(B=O[F=O.active])&&(B.timer.c=null,B.timer.t=NaN,--O.count?delete O[F]:delete this[me],O.active+=.5,B.event&&B.event.interrupt.call(this,this.__data__,B.index))}}function Ea(me,O,F){return j(me,co),me.namespace=O,me.id=F,me}var ul,tl,co=[],fl=0;function El(me,O,F,B){var W=me.id,fe=me.namespace;return He(me,"function"==typeof F?function(ge,we,Ee){ge[fe][W].tween.set(O,B(F.call(ge,ge.__data__,we,Ee)))}:(F=B(F),function(ge){ge[fe][W].tween.set(O,F)}))}function xl(me){return null==me&&(me=""),function(){this.textContent=me}}function Dl(me){return null==me?"__transition__":"__transition_"+me+"__"}function nl(me,O,F,B,W){var fe,ge,we,Ee,Pe,$e=me[F]||(me[F]={active:0,count:0}),ot=$e[B];function pt(zt){var Pt=$e.active,Nt=$e[Pt];for(var Et in Nt&&(Nt.timer.c=null,Nt.timer.t=NaN,--$e.count,delete $e[Pt],Nt.event&&Nt.event.interrupt.call(me,me.__data__,Nt.index)),$e)if(+Et<B){var Zt=$e[Et];Zt.timer.c=null,Zt.timer.t=NaN,--$e.count,delete $e[Et]}ge.c=Dt,kr(function(){return ge.c&&Dt(zt||1)&&(ge.c=null,ge.t=NaN),1},0,fe),$e.active=B,ot.event&&ot.event.start.call(me,me.__data__,O),Pe=[],ot.tween.forEach(function(qt,Jt){(Jt=Jt.call(me,me.__data__,O))&&Pe.push(Jt)}),Ee=ot.ease,we=ot.duration}function Dt(zt){for(var Pt=zt/we,Nt=Ee(Pt),Et=Pe.length;Et>0;)Pe[--Et].call(me,Nt);if(Pt>=1)return ot.event&&ot.event.end.call(me,me.__data__,O),--$e.count?delete $e[B]:delete me[F],1}ot||(ge=kr(function(zt){var Pt=ot.delay;if(ge.t=Pt+fe,Pt<=zt)return pt(zt-Pt);ge.c=pt},0,fe=W.time),ot=$e[B]={tween:new T,time:fe,timer:ge,delay:W.delay,duration:W.duration,ease:W.ease,index:O},W=null,++$e.count)}co.call=ee.call,co.empty=ee.empty,co.node=ee.node,co.size=ee.size,p.transition=function(me,O){return me&&me.transition?ul?me.transition(O):me:p.selection().transition(me)},p.transition.prototype=co,co.select=function(me){var O,F,B,W=this.id,fe=this.namespace,ge=[];me=le(me);for(var we=-1,Ee=this.length;++we<Ee;){ge.push(O=[]);for(var Pe=this[we],$e=-1,ot=Pe.length;++$e<ot;)(B=Pe[$e])&&(F=me.call(B,B.__data__,$e,we))?("__data__"in B&&(F.__data__=B.__data__),nl(F,$e,fe,W,B[fe][W]),O.push(F)):O.push(null)}return Ea(ge,fe,W)},co.selectAll=function(me){var O,F,B,W,fe,ge=this.id,we=this.namespace,Ee=[];me=ce(me);for(var Pe=-1,$e=this.length;++Pe<$e;)for(var ot=this[Pe],pt=-1,Dt=ot.length;++pt<Dt;)if(B=ot[pt]){fe=B[we][ge],F=me.call(B,B.__data__,pt,Pe),Ee.push(O=[]);for(var zt=-1,Pt=F.length;++zt<Pt;)(W=F[zt])&&nl(W,zt,we,ge,fe),O.push(W)}return Ea(Ee,we,ge)},co.filter=function(me){var O,F,B=[];"function"!=typeof me&&(me=Ne(me));for(var W=0,fe=this.length;W<fe;W++){B.push(O=[]);for(var ge,we=0,Ee=(ge=this[W]).length;we<Ee;we++)(F=ge[we])&&me.call(F,F.__data__,we,W)&&O.push(F)}return Ea(B,this.namespace,this.id)},co.tween=function(me,O){var F=this.id,B=this.namespace;return arguments.length<2?this.node()[B][F].tween.get(me):He(this,null==O?function(W){W[B][F].tween.remove(me)}:function(W){W[B][F].tween.set(me,O)})},co.attr=function(me,O){if(arguments.length<2){for(O in me)this.attr(O,me[O]);return this}var F="transform"==me?ds:Wa,B=p.ns.qualify(me);function W(){this.removeAttribute(B)}function fe(){this.removeAttributeNS(B.space,B.local)}function ge(Ee){return null==Ee?W:(Ee+="",function(){var Pe,$e=this.getAttribute(B);return $e!==Ee&&(Pe=F($e,Ee),function(ot){this.setAttribute(B,Pe(ot))})})}function we(Ee){return null==Ee?fe:(Ee+="",function(){var Pe,$e=this.getAttributeNS(B.space,B.local);return $e!==Ee&&(Pe=F($e,Ee),function(ot){this.setAttributeNS(B.space,B.local,Pe(ot))})})}return El(this,"attr."+me,O,B.local?we:ge)},co.attrTween=function(me,O){var F=p.ns.qualify(me);return this.tween("attr."+me,F.local?function(B,W){var fe=O.call(this,B,W,this.getAttributeNS(F.space,F.local));return fe&&function(ge){this.setAttributeNS(F.space,F.local,fe(ge))}}:function(B,W){var fe=O.call(this,B,W,this.getAttribute(F));return fe&&function(ge){this.setAttribute(F,fe(ge))}})},co.style=function(me,O,F){var B=arguments.length;if(B<3){if("string"!=typeof me){for(F in B<2&&(O=""),me)this.style(F,me[F],O);return this}F=""}function W(){this.style.removeProperty(me)}function fe(ge){return null==ge?W:(ge+="",function(){var we,Ee=r(this).getComputedStyle(this,null).getPropertyValue(me);return Ee!==ge&&(we=Wa(Ee,ge),function(Pe){this.style.setProperty(me,we(Pe),F)})})}return El(this,"style."+me,O,fe)},co.styleTween=function(me,O,F){function B(W,fe){var ge=O.call(this,W,fe,r(this).getComputedStyle(this,null).getPropertyValue(me));return ge&&function(we){this.style.setProperty(me,ge(we),F)}}return arguments.length<3&&(F=""),this.tween("style."+me,B)},co.text=function(me){return El(this,"text",me,xl)},co.remove=function(){var me=this.namespace;return this.each("end.transition",function(){var O;this[me].count<2&&(O=this.parentNode)&&O.removeChild(this)})},co.ease=function(me){var O=this.id,F=this.namespace;return arguments.length<1?this.node()[F][O].ease:("function"!=typeof me&&(me=p.ease.apply(p,arguments)),He(this,function(B){B[F][O].ease=me}))},co.delay=function(me){var O=this.id,F=this.namespace;return arguments.length<1?this.node()[F][O].delay:He(this,"function"==typeof me?function(B,W,fe){B[F][O].delay=+me.call(B,B.__data__,W,fe)}:(me=+me,function(B){B[F][O].delay=me}))},co.duration=function(me){var O=this.id,F=this.namespace;return arguments.length<1?this.node()[F][O].duration:He(this,"function"==typeof me?function(B,W,fe){B[F][O].duration=Math.max(1,me.call(B,B.__data__,W,fe))}:(me=Math.max(1,me),function(B){B[F][O].duration=me}))},co.each=function(me,O){var F=this.id,B=this.namespace;if(arguments.length<2){var W=tl,fe=ul;try{ul=F,He(this,function(ge,we,Ee){tl=ge[B][F],me.call(ge,ge.__data__,we,Ee)})}finally{tl=W,ul=fe}}else He(this,function(ge){var we=ge[B][F];(we.event||(we.event=p.dispatch("start","end","interrupt"))).on(me,O)});return this},co.transition=function(){for(var me,O,F,B=this.id,W=++fl,fe=this.namespace,ge=[],we=0,Ee=this.length;we<Ee;we++){ge.push(me=[]);for(var Pe,$e=0,ot=(Pe=this[we]).length;$e<ot;$e++)(O=Pe[$e])&&nl(O,$e,fe,W,{time:(F=O[fe][B]).time,ease:F.ease,delay:F.delay+F.duration,duration:F.duration}),me.push(O)}return Ea(ge,fe,W)},p.svg.axis=function(){var me,O=p.scale.linear(),F=hc,B=6,W=6,fe=3,ge=[10],we=null;function Ee(Pe){Pe.each(function(){var $e,ot=p.select(this),pt=this.__chart__||O,Dt=this.__chart__=O.copy(),zt=we??(Dt.ticks?Dt.ticks.apply(Dt,ge):Dt.domain()),Pt=me??(Dt.tickFormat?Dt.tickFormat.apply(Dt,ge):E),Nt=ot.selectAll(".tick").data(zt,Dt),Et=Nt.enter().insert("g",".domain").attr("class","tick").style("opacity",Ct),Zt=p.transition(Nt.exit()).style("opacity",Ct).remove(),qt=p.transition(Nt.order()).style("opacity",1),Jt=Math.max(B,0)+fe,gn=Ar(Dt),On=ot.selectAll(".domain").data([0]),Yn=(On.enter().append("path").attr("class","domain"),p.transition(On));Et.append("line"),Et.append("text");var Hn,vr,gr,Pr,Cr=Et.select("line"),ii=qt.select("line"),di=Nt.select("text").text(Pt),Oi=Et.select("text"),ur=qt.select("text"),Gr="top"===F||"left"===F?-1:1;if("bottom"===F||"top"===F?($e=dl,Hn="x",gr="y",vr="x2",Pr="y2",di.attr("dy",Gr<0?"0em":".71em").style("text-anchor","middle"),Yn.attr("d","M"+gn[0]+","+Gr*W+"V0H"+gn[1]+"V"+Gr*W)):($e=pc,Hn="y",gr="x",vr="y2",Pr="x2",di.attr("dy",".32em").style("text-anchor",Gr<0?"end":"start"),Yn.attr("d","M"+Gr*W+","+gn[0]+"H0V"+gn[1]+"H"+Gr*W)),Cr.attr(Pr,Gr*B),Oi.attr(gr,Gr*Jt),ii.attr(vr,0).attr(Pr,Gr*B),ur.attr(Hn,0).attr(gr,Gr*Jt),Dt.rangeBand){var hi=Dt,si=hi.rangeBand()/2;pt=Dt=function(wi){return hi(wi)+si}}else pt.rangeBand?pt=Dt:Zt.call($e,Dt,pt);Et.call($e,pt,Dt),qt.call($e,Dt,Dt)})}return Ee.scale=function(Pe){return arguments.length?(O=Pe,Ee):O},Ee.orient=function(Pe){return arguments.length?(F=Pe in Ic?Pe+"":hc,Ee):F},Ee.ticks=function(){return arguments.length?(ge=b(arguments),Ee):ge},Ee.tickValues=function(Pe){return arguments.length?(we=Pe,Ee):we},Ee.tickFormat=function(Pe){return arguments.length?(me=Pe,Ee):me},Ee.tickSize=function(Pe){var $e=arguments.length;return $e?(B=+Pe,W=+arguments[$e-1],Ee):B},Ee.innerTickSize=function(Pe){return arguments.length?(B=+Pe,Ee):B},Ee.outerTickSize=function(Pe){return arguments.length?(W=+Pe,Ee):W},Ee.tickPadding=function(Pe){return arguments.length?(fe=+Pe,Ee):fe},Ee.tickSubdivide=function(){return arguments.length&&Ee},Ee};var hc="bottom",Ic={top:1,right:1,bottom:1,left:1};function dl(me,O,F){me.attr("transform",function(B){var W=O(B);return"translate("+(isFinite(W)?W:F(B))+",0)"})}function pc(me,O,F){me.attr("transform",function(B){var W=O(B);return"translate(0,"+(isFinite(W)?W:F(B))+")"})}p.svg.brush=function(){var me,O,F=se($e,"brushstart","brush","brushend"),B=null,W=null,fe=[0,0],ge=[0,0],we=!0,Ee=!0,Pe=Go[0];function $e(Pt){Pt.each(function(){var Nt=p.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",zt).on("touchstart.brush",zt),Et=Nt.selectAll(".background").data([0]);Et.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Nt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Zt=Nt.selectAll(".resize").data(Pe,E);Zt.exit().remove(),Zt.enter().append("g").attr("class",function(On){return"resize "+On}).style("cursor",function(On){return Ol[On]}).append("rect").attr("x",function(On){return/[ew]$/.test(On)?-3:null}).attr("y",function(On){return/^[ns]/.test(On)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Zt.style("display",$e.empty()?"none":null);var qt,Jt=p.transition(Nt),gn=p.transition(Et);B&&(qt=Ar(B),gn.attr("x",qt[0]).attr("width",qt[1]-qt[0]),pt(Jt)),W&&(qt=Ar(W),gn.attr("y",qt[0]).attr("height",qt[1]-qt[0]),Dt(Jt)),ot(Jt)})}function ot(Pt){Pt.selectAll(".resize").attr("transform",function(Nt){return"translate("+fe[+/e$/.test(Nt)]+","+ge[+/^s/.test(Nt)]+")"})}function pt(Pt){Pt.select(".extent").attr("x",fe[0]),Pt.selectAll(".extent,.n>rect,.s>rect").attr("width",fe[1]-fe[0])}function Dt(Pt){Pt.select(".extent").attr("y",ge[0]),Pt.selectAll(".extent,.e>rect,.w>rect").attr("height",ge[1]-ge[0])}function zt(){var Pt,Nt,Et=this,Zt=p.select(p.event.target),qt=F.of(Et,arguments),Jt=p.select(Et),gn=Zt.datum(),On=!/^(n|s)$/.test(gn)&&B,Yn=!/^(e|w)$/.test(gn)&&W,Hn=Zt.classed("extent"),vr=Ot(Et),gr=p.mouse(Et),Pr=p.select(r(Et)).on("keydown.brush",di).on("keyup.brush",Oi);if(p.event.changedTouches?Pr.on("touchmove.brush",ur).on("touchend.brush",hi):Pr.on("mousemove.brush",ur).on("mouseup.brush",hi),Jt.interrupt().selectAll("*").interrupt(),Hn)gr[0]=fe[0]-gr[0],gr[1]=ge[0]-gr[1];else if(gn){var Cr=+/w$/.test(gn),ii=+/^n/.test(gn);Nt=[fe[1-Cr]-gr[0],ge[1-ii]-gr[1]],gr[0]=fe[Cr],gr[1]=ge[ii]}else p.event.altKey&&(Pt=gr.slice());function di(){32==p.event.keyCode&&(Hn||(Pt=null,gr[0]-=fe[1],gr[1]-=ge[1],Hn=2),X())}function Oi(){32==p.event.keyCode&&2==Hn&&(gr[0]+=fe[1],gr[1]+=ge[1],Hn=0,X())}function ur(){var si=p.mouse(Et),wi=!1;Nt&&(si[0]+=Nt[0],si[1]+=Nt[1]),Hn||(p.event.altKey?(Pt||(Pt=[(fe[0]+fe[1])/2,(ge[0]+ge[1])/2]),gr[0]=fe[+(si[0]<Pt[0])],gr[1]=ge[+(si[1]<Pt[1])]):Pt=null),On&&Gr(si,B,0)&&(pt(Jt),wi=!0),Yn&&Gr(si,W,1)&&(Dt(Jt),wi=!0),wi&&(ot(Jt),qt({type:"brush",mode:Hn?"move":"resize"}))}function Gr(si,wi,Ii){var Xi,bi,qi=Ar(wi),zi=qi[0],ta=qi[1],Yi=gr[Ii],na=Ii?ge:fe,fa=na[1]-na[0];if(Hn&&(zi-=Yi,ta-=fa+Yi),Xi=(Ii?Ee:we)?Math.max(zi,Math.min(ta,si[Ii])):si[Ii],Hn?bi=(Xi+=Yi)+fa:(Pt&&(Yi=Math.max(zi,Math.min(ta,2*Pt[Ii]-Xi))),Yi<Xi?(bi=Xi,Xi=Yi):bi=Yi),na[0]!=Xi||na[1]!=bi)return Ii?O=null:me=null,na[0]=Xi,na[1]=bi,!0}function hi(){ur(),Jt.style("pointer-events","all").selectAll(".resize").style("display",$e.empty()?"none":null),p.select("body").style("cursor",null),Pr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),vr(),qt({type:"brushend"})}Jt.style("pointer-events","none").selectAll(".resize").style("display",null),p.select("body").style("cursor",Zt.style("cursor")),qt({type:"brushstart"}),ur()}return $e.event=function(Pt){Pt.each(function(){var Nt=F.of(this,arguments),Et={x:fe,y:ge,i:me,j:O},Zt=this.__chart__||Et;this.__chart__=Et,ul?p.select(this).transition().each("start.brush",function(){me=Zt.i,O=Zt.j,fe=Zt.x,ge=Zt.y,Nt({type:"brushstart"})}).tween("brush:brush",function(){var qt=Ia(fe,Et.x),Jt=Ia(ge,Et.y);return me=O=null,function(gn){fe=Et.x=qt(gn),ge=Et.y=Jt(gn),Nt({type:"brush",mode:"resize"})}}).each("end.brush",function(){me=Et.i,O=Et.j,Nt({type:"brush",mode:"resize"}),Nt({type:"brushend"})}):(Nt({type:"brushstart"}),Nt({type:"brush",mode:"resize"}),Nt({type:"brushend"}))})},$e.x=function(Pt){return arguments.length?(Pe=Go[!(B=Pt)<<1|!W],$e):B},$e.y=function(Pt){return arguments.length?(Pe=Go[!B<<1|!(W=Pt)],$e):W},$e.clamp=function(Pt){return arguments.length?(B&&W?(we=!!Pt[0],Ee=!!Pt[1]):B?we=!!Pt:W&&(Ee=!!Pt),$e):B&&W?[we,Ee]:B?we:W?Ee:null},$e.extent=function(Pt){var Nt,Et,Zt,qt,Jt;return arguments.length?(B&&(Nt=Pt[0],Et=Pt[1],W&&(Nt=Nt[0],Et=Et[0]),me=[Nt,Et],B.invert&&(Nt=B(Nt),Et=B(Et)),Et<Nt&&(Jt=Nt,Nt=Et,Et=Jt),Nt==fe[0]&&Et==fe[1]||(fe=[Nt,Et])),W&&(Zt=Pt[0],qt=Pt[1],B&&(Zt=Zt[1],qt=qt[1]),O=[Zt,qt],W.invert&&(Zt=W(Zt),qt=W(qt)),qt<Zt&&(Jt=Zt,Zt=qt,qt=Jt),Zt==ge[0]&&qt==ge[1]||(ge=[Zt,qt])),$e):(B&&(me?(Nt=me[0],Et=me[1]):(Nt=fe[0],Et=fe[1],B.invert&&(Nt=B.invert(Nt),Et=B.invert(Et)),Et<Nt&&(Jt=Nt,Nt=Et,Et=Jt))),W&&(O?(Zt=O[0],qt=O[1]):(Zt=ge[0],qt=ge[1],W.invert&&(Zt=W.invert(Zt),qt=W.invert(qt)),qt<Zt&&(Jt=Zt,Zt=qt,qt=Jt))),B&&W?[[Nt,Zt],[Et,qt]]:B?[Nt,Et]:W&&[Zt,qt])},$e.clear=function(){return $e.empty()||(fe=[0,0],ge=[0,0],me=O=null),$e},$e.empty=function(){return!!B&&fe[0]==fe[1]||!!W&&ge[0]==ge[1]},p.rebind($e,F,"on")};var Ol={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Go=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Pc(me){return JSON.parse(me.responseText)}function Rc(me){var O=y.createRange();return O.selectNode(y.body),O.createContextualFragment(me.responseText)}p.text=jn(function(me){return me.responseText}),p.json=function(me,O){return er(me,"application/json",Pc,O)},p.html=function(me,O){return er(me,"text/html",Rc,O)},p.xml=jn(function(me){return me.responseXML}),"object"==typeof ae&&ae.exports?ae.exports=p:this.d3=p}).apply(self)},{}],59:[function(v,ae,ie){"use strict";ae.exports=v("./quad")},{"./quad":60}],60:[function(v,ae,ie){"use strict";var p=v("binary-search-bounds"),g=v("clamp"),b=v("parse-rect"),y=v("array-bounds"),e=v("pick-by-alias"),r=v("defined"),t=v("flatten-vertex-data"),o=v("is-obj"),n=v("dtype"),m=v("math-log2");function l(i,f){for(var u=f[0],s=f[1],d=1/(f[2]-u),h=1/(f[3]-s),a=new Array(i.length),_=0,c=i.length/2;_<c;_++)a[2*_]=g((i[2*_]-u)*d,0,1),a[2*_+1]=g((i[2*_+1]-s)*h,0,1);return a}ae.exports=function(i,f){f||(f={}),i=t(i,"float64"),f=e(f,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=r(f.maxDepth,255),s=r(f.bounds,y(i,2));s[0]===s[2]&&s[2]++,s[1]===s[3]&&s[3]++;var d,h=l(i,s),a=i.length>>>1;f.dtype||(f.dtype="array"),"string"==typeof f.dtype?d=new(n(f.dtype))(a):f.dtype&&(d=f.dtype,Array.isArray(d)&&(d.length=a));for(var _=0;_<a;++_)d[_]=_;var c=[],T=[],x=[],w=[];!function z(q,G,K,ne,X,J){if(!ne.length)return null;var se=c[X]||(c[X]=[]),V=x[X]||(x[X]=[]),j=T[X]||(T[X]=[]),H=se.length;if(++X>u||J>1073741824){for(var oe=0;oe<ne.length;oe++)se.push(ne[oe]),V.push(J),j.push(null,null,null,null);return H}if(se.push(ne[0]),V.push(J),ne.length<=1)return j.push(null,null,null,null),H;for(var U=.5*K,te=q+U,ee=G+U,le=[],ce=[],pe=[],de=[],be=1,he=ne.length;be<he;be++){var xe=ne[be],Se=h[2*xe+1];h[2*xe]<te?Se<ee?le.push(xe):ce.push(xe):Se<ee?pe.push(xe):de.push(xe)}return j.push(z(q,G,U,le,X,J<<=2),z(q,ee,U,ce,X,J+1),z(te,G,U,pe,X,J+2),z(te,ee,U,de,X,J+3)),H}(0,0,1,d,0,1);for(var M=0,D=0;D<c.length;D++){var C=c[D];if(d.set)d.set(C,M);else for(var P=0,L=C.length;P<L;P++)d[P+M]=C[P];var S=M+c[D].length;w[D]=[M,S],M=S}return d.range=function(){for(var z,q=[],G=arguments.length;G--;)q[G]=arguments[G];if(o(q[q.length-1])){var K=q.pop();q.length||null==K.x&&null==K.l&&null==K.left||(q=[K],z={}),z=e(K,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};q.length||(q=s);var ce,ne=b.apply(void 0,q),X=[Math.min(ne.x,ne.x+ne.width),Math.min(ne.y,ne.y+ne.height),Math.max(ne.x,ne.x+ne.width),Math.max(ne.y,ne.y+ne.height)],J=X[0],se=X[1],V=X[2],j=X[3],H=l([J,se,V,j],s),oe=H[0],U=H[1],te=H[2],ee=H[3],le=r(z.level,c.length);if(null!=z.d&&("number"==typeof z.d?ce=[z.d,z.d]:z.d.length&&(ce=z.d),le=Math.min(Math.max(Math.ceil(-m(Math.abs(ce[0])/(s[2]-s[0]))),Math.ceil(-m(Math.abs(ce[1])/(s[3]-s[1])))),le)),le=Math.min(le,c.length),z.lod)return E(oe,U,te,ee,le);var pe=[];function de(he,xe,De,Se,ke,Fe){if(null!==ke&&null!==Fe&&!(oe>he+De||U>xe+De||te<he||ee<xe||Se>=le||ke===Fe)){var ve=c[Se];void 0===Fe&&(Fe=ve.length);for(var Te=ke;Te<Fe;Te++){var Le=ve[Te],Oe=i[2*Le],Ne=i[2*Le+1];Oe>=J&&Oe<=V&&Ne>=se&&Ne<=j&&pe.push(Le)}var Be=T[Se],He=Be[4*ke+0],Ve=Be[4*ke+1],it=Be[4*ke+2],ze=Be[4*ke+3],je=be(Be,ke+1),qe=.5*De,Ye=Se+1;de(he,xe,qe,Ye,He,Ve||it||ze||je),de(he,xe+qe,qe,Ye,Ve,it||ze||je),de(he+qe,xe,qe,Ye,it,ze||je),de(he+qe,xe+qe,qe,Ye,ze,je)}}function be(he,xe){for(var De=null,Se=0;null===De;)if(De=he[4*xe+Se],++Se>he.length)return null;return De}return de(0,0,1,0,0,1),pe},d;function E(z,q,G,K,ne){for(var X=[],J=0;J<ne;J++){var se=x[J],V=w[J][0],j=N(z,q,J),H=N(G,K,J),oe=p.ge(se,j),U=p.gt(se,H,oe,se.length-1);X[J]=[oe+V,U+V]}return X}function N(z,q,G){for(var K=1,ne=.5,X=.5,J=.5,se=0;se<G;se++)K<<=2,K+=z<ne?q<X?0:1:q<X?2:3,J*=.5,ne+=z<ne?-J:J,X+=q<X?-J:J;return K}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(v,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var p=v("@turf/meta");function g(e){var r=0;if(e&&e.length>0){r+=Math.abs(b(e[0]));for(var t=1;t<e.length;t++)r-=Math.abs(b(e[t]))}return r}function b(e){var r,t,o,n,m,l,i=0,f=e.length;if(f>2){for(l=0;l<f;l++)l===f-2?(o=f-2,n=f-1,m=0):l===f-1?(o=f-1,n=0,m=1):(o=l,n=l+1,m=l+2),r=e[o],t=e[n],i+=(y(e[m][0])-y(r[0]))*Math.sin(y(t[1]));i=6378137*i*6378137/2}return i}function y(e){return e*Math.PI/180}ie.default=function(e){return p.geomReduce(e,function(r,t){return r+function(o){var n,m=0;switch(o.type){case"Polygon":return g(o.coordinates);case"MultiPolygon":for(n=0;n<o.coordinates.length;n++)m+=g(o.coordinates[n]);return m;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},{"@turf/meta":63}],62:[function(v,ae,ie){"use strict";function p(f,u,s){void 0===s&&(s={});var d={type:"Feature"};return(0===s.id||s.id)&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.properties=u||{},d.geometry=f,d}function g(f,u,s){if(void 0===s&&(s={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(f[0])||!i(f[1]))throw new Error("coordinates must contain numbers");return p({type:"Point",coordinates:f},u,s)}function b(f,u,s){void 0===s&&(s={});for(var d=0,h=f;d<h.length;d++){var a=h[d];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var _=0;_<a[a.length-1].length;_++)if(a[a.length-1][_]!==a[0][_])throw new Error("First and last Position are not equivalent.")}return p({type:"Polygon",coordinates:f},u,s)}function y(f,u,s){if(void 0===s&&(s={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:f},u,s)}function e(f,u){void 0===u&&(u={});var s={type:"FeatureCollection"};return u.id&&(s.id=u.id),u.bbox&&(s.bbox=u.bbox),s.features=f,s}function r(f,u,s){return void 0===s&&(s={}),p({type:"MultiLineString",coordinates:f},u,s)}function t(f,u,s){return void 0===s&&(s={}),p({type:"MultiPoint",coordinates:f},u,s)}function o(f,u,s){return void 0===s&&(s={}),p({type:"MultiPolygon",coordinates:f},u,s)}function n(f,u){void 0===u&&(u="kilometers");var s=ie.factors[u];if(!s)throw new Error(u+" units is invalid");return f*s}function m(f,u){void 0===u&&(u="kilometers");var s=ie.factors[u];if(!s)throw new Error(u+" units is invalid");return f/s}function l(f){return f%(2*Math.PI)*180/Math.PI}function i(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)}Object.defineProperty(ie,"__esModule",{value:!0}),ie.earthRadius=6371008.8,ie.factors={centimeters:100*ie.earthRadius,centimetres:100*ie.earthRadius,degrees:ie.earthRadius/111325,feet:3.28084*ie.earthRadius,inches:39.37*ie.earthRadius,kilometers:ie.earthRadius/1e3,kilometres:ie.earthRadius/1e3,meters:ie.earthRadius,metres:ie.earthRadius,miles:ie.earthRadius/1609.344,millimeters:1e3*ie.earthRadius,millimetres:1e3*ie.earthRadius,nauticalmiles:ie.earthRadius/1852,radians:1,yards:1.0936*ie.earthRadius},ie.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ie.earthRadius,yards:1.0936133},ie.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ie.feature=p,ie.geometry=function(f,u,s){switch(void 0===s&&(s={}),f){case"Point":return g(u).geometry;case"LineString":return y(u).geometry;case"Polygon":return b(u).geometry;case"MultiPoint":return t(u).geometry;case"MultiLineString":return r(u).geometry;case"MultiPolygon":return o(u).geometry;default:throw new Error(f+" is invalid")}},ie.point=g,ie.points=function(f,u,s){return void 0===s&&(s={}),e(f.map(function(d){return g(d,u)}),s)},ie.polygon=b,ie.polygons=function(f,u,s){return void 0===s&&(s={}),e(f.map(function(d){return b(d,u)}),s)},ie.lineString=y,ie.lineStrings=function(f,u,s){return void 0===s&&(s={}),e(f.map(function(d){return y(d,u)}),s)},ie.featureCollection=e,ie.multiLineString=r,ie.multiPoint=t,ie.multiPolygon=o,ie.geometryCollection=function(f,u,s){return void 0===s&&(s={}),p({type:"GeometryCollection",geometries:f},u,s)},ie.round=function(f,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var s=Math.pow(10,u||0);return Math.round(f*s)/s},ie.radiansToLength=n,ie.lengthToRadians=m,ie.lengthToDegrees=function(f,u){return l(m(f,u))},ie.bearingToAzimuth=function(f){var u=f%360;return u<0&&(u+=360),u},ie.radiansToDegrees=l,ie.degreesToRadians=function(f){return f%360*Math.PI/180},ie.convertLength=function(f,u,s){if(void 0===u&&(u="kilometers"),void 0===s&&(s="kilometers"),!(f>=0))throw new Error("length must be a positive number");return n(m(f,u),s)},ie.convertArea=function(f,u,s){if(void 0===u&&(u="meters"),void 0===s&&(s="kilometers"),!(f>=0))throw new Error("area must be a positive number");var d=ie.areaFactors[u];if(!d)throw new Error("invalid original units");var h=ie.areaFactors[s];if(!h)throw new Error("invalid final units");return f/d*h},ie.isNumber=i,ie.isObject=function(f){return!!f&&f.constructor===Object},ie.validateBBox=function(f){if(!f)throw new Error("bbox is required");if(!Array.isArray(f))throw new Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw new Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},ie.validateId=function(f){if(!f)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof f))throw new Error("id must be a number or a string")}},{}],63:[function(v,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var p=v("@turf/helpers");function g(n,m,l){if(null!==n)for(var i,f,u,s,d,h,a,_,c=0,T=0,x=n.type,w="FeatureCollection"===x,M="Feature"===x,D=w?n.features.length:1,C=0;C<D;C++){d=(_=!!(a=w?n.features[C].geometry:M?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1;for(var P=0;P<d;P++){var L=0,S=0;if(null!==(s=_?a.geometries[P]:a)){h=s.coordinates;var E=s.type;switch(c=!l||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===m(h,T,C,L,S))return!1;T++,L++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===m(h[i],T,C,L,S))return!1;T++,"MultiPoint"===E&&L++}"LineString"===E&&L++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(f=0;f<h[i].length-c;f++){if(!1===m(h[i][f],T,C,L,S))return!1;T++}"MultiLineString"===E&&L++,"Polygon"===E&&S++}"Polygon"===E&&L++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(S=0,f=0;f<h[i].length;f++){for(u=0;u<h[i][f].length-c;u++){if(!1===m(h[i][f][u],T,C,L,S))return!1;T++}S++}L++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===g(s.geometries[i],m,l))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(n,m){var l;switch(n.type){case"FeatureCollection":for(l=0;l<n.features.length&&!1!==m(n.features[l].properties,l);l++);break;case"Feature":m(n.properties,0)}}function y(n,m){if("Feature"===n.type)m(n,0);else if("FeatureCollection"===n.type)for(var l=0;l<n.features.length&&!1!==m(n.features[l],l);l++);}function e(n,m){var l,i,f,u,s,d,h,a,_,c,T=0,x="FeatureCollection"===n.type,w="Feature"===n.type,M=x?n.features.length:1;for(l=0;l<M;l++){for(a=x?n.features[l].properties:w?n.properties:{},_=x?n.features[l].bbox:w?n.bbox:void 0,c=x?n.features[l].id:w?n.id:void 0,s=(h=!!(d=x?n.features[l].geometry:w?n.geometry:n)&&"GeometryCollection"===d.type)?d.geometries.length:1,f=0;f<s;f++)if(null!==(u=h?d.geometries[f]:d))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===m(u,T,a,_,c))return!1;break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(!1===m(u.geometries[i],T,a,_,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===m(null,T,a,_,c))return!1;T++}}function r(n,m){e(n,function(l,i,f,u,s){var d,h=null===l?null:l.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return!1!==m(p.feature(l,f,{bbox:u,id:s}),i,0)&&void 0}switch(h){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon"}for(var a=0;a<l.coordinates.length;a++)if(!1===m(p.feature({type:d,coordinates:l.coordinates[a]},f),i,a))return!1})}function t(n,m){r(n,function(l,i,f){var u=0;if(l.geometry){var s=l.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var d,h=0,a=0,_=0;return!1!==g(l,function(c,T,x,w,M){if(void 0===d||i>h||w>a||M>_)return d=c,h=i,a=w,_=M,void(u=0);var D=p.lineString([d,c],l.properties);if(!1===m(D,i,f,M,u))return!1;u++,d=c})&&void 0}}})}function o(n,m){if(!n)throw new Error("geojson is required");r(n,function(l,i,f){if(null!==l.geometry){var s=l.geometry.coordinates;switch(l.geometry.type){case"LineString":if(!1===m(l,i,f,0,0))return!1;break;case"Polygon":for(var d=0;d<s.length;d++)if(!1===m(p.lineString(s[d],l.properties),i,f,d))return!1}}})}ie.coordEach=g,ie.coordReduce=function(n,m,l,i){var f=l;return g(n,function(u,s,d,h,a){f=0===s&&void 0===l?u:m(f,u,s,d,h,a)},i),f},ie.propEach=b,ie.propReduce=function(n,m,l){var i=l;return b(n,function(f,u){i=0===u&&void 0===l?f:m(i,f,u)}),i},ie.featureEach=y,ie.featureReduce=function(n,m,l){var i=l;return y(n,function(f,u){i=0===u&&void 0===l?f:m(i,f,u)}),i},ie.coordAll=function(n){var m=[];return g(n,function(l){m.push(l)}),m},ie.geomEach=e,ie.geomReduce=function(n,m,l){var i=l;return e(n,function(f,u,s,d,h){i=0===u&&void 0===l?f:m(i,f,u,s,d,h)}),i},ie.flattenEach=r,ie.flattenReduce=function(n,m,l){var i=l;return r(n,function(f,u,s){i=0===u&&0===s&&void 0===l?f:m(i,f,u,s)}),i},ie.segmentEach=t,ie.segmentReduce=function(n,m,l){var i=l,f=!1;return t(n,function(u,s,d,h,a){i=!1===f&&void 0===l?u:m(i,u,s,d,h,a),f=!0}),i},ie.lineEach=o,ie.lineReduce=function(n,m,l){var i=l;return o(n,function(f,u,s,d){i=0===u&&void 0===l?f:m(i,f,u,s,d)}),i},ie.findSegment=function(n,m){if(!p.isObject(m=m||{}))throw new Error("options is invalid");var l,i=m.featureIndex||0,f=m.multiFeatureIndex||0,u=m.geometryIndex||0,s=m.segmentIndex||0,d=m.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),d=d||n.features[i].properties,l=n.features[i].geometry;break;case"Feature":d=d||n.properties,l=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=n;break;default:throw new Error("geojson is invalid")}if(null===l)return null;var h=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),p.lineString([h[s],h[s+1]],d,m);case"Polygon":return u<0&&(u=h.length+u),s<0&&(s=h[u].length+s-1),p.lineString([h[u][s],h[u][s+1]],d,m);case"MultiLineString":return f<0&&(f=h.length+f),s<0&&(s=h[f].length+s-1),p.lineString([h[f][s],h[f][s+1]],d,m);case"MultiPolygon":return f<0&&(f=h.length+f),u<0&&(u=h[f].length+u),s<0&&(s=h[f][u].length-s-1),p.lineString([h[f][u][s],h[f][u][s+1]],d,m)}throw new Error("geojson is invalid")},ie.findPoint=function(n,m){if(!p.isObject(m=m||{}))throw new Error("options is invalid");var l,i=m.featureIndex||0,f=m.multiFeatureIndex||0,u=m.geometryIndex||0,s=m.coordIndex||0,d=m.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),d=d||n.features[i].properties,l=n.features[i].geometry;break;case"Feature":d=d||n.properties,l=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=n;break;default:throw new Error("geojson is invalid")}if(null===l)return null;var h=l.coordinates;switch(l.type){case"Point":return p.point(h,d,m);case"MultiPoint":return f<0&&(f=h.length+f),p.point(h[f],d,m);case"LineString":return s<0&&(s=h.length+s),p.point(h[s],d,m);case"Polygon":return u<0&&(u=h.length+u),s<0&&(s=h[u].length+s),p.point(h[u][s],d,m);case"MultiLineString":return f<0&&(f=h.length+f),s<0&&(s=h[f].length+s),p.point(h[f][s],d,m);case"MultiPolygon":return f<0&&(f=h.length+f),u<0&&(u=h[f].length+u),s<0&&(s=h[f][u].length-s),p.point(h[f][u][s],d,m)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(v,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var p=v("@turf/meta");function g(b){var y=[1/0,1/0,-1/0,-1/0];return p.coordEach(b,function(e){y[0]>e[0]&&(y[0]=e[0]),y[1]>e[1]&&(y[1]=e[1]),y[2]<e[0]&&(y[2]=e[0]),y[3]<e[1]&&(y[3]=e[1])}),y}g.default=g,ie.default=g},{"@turf/meta":66}],65:[function(v,ae,ie){arguments[4][62][0].apply(ie,arguments)},{dup:62}],66:[function(v,ae,ie){arguments[4][63][0].apply(ie,arguments)},{"@turf/helpers":65,dup:63}],67:[function(v,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var p=v("@turf/meta"),g=v("@turf/helpers");ie.default=function(b,y){void 0===y&&(y={});var e=0,r=0,t=0;return p.coordEach(b,function(o){e+=o[0],r+=o[1],t++}),g.point([e/t,r/t],y.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(v,ae,ie){"use strict";function p(f,u,s){void 0===s&&(s={});var d={type:"Feature"};return(0===s.id||s.id)&&(d.id=s.id),s.bbox&&(d.bbox=s.bbox),d.properties=u||{},d.geometry=f,d}function g(f,u,s){return void 0===s&&(s={}),p({type:"Point",coordinates:f},u,s)}function b(f,u,s){void 0===s&&(s={});for(var d=0,h=f;d<h.length;d++){var a=h[d];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var _=0;_<a[a.length-1].length;_++)if(a[a.length-1][_]!==a[0][_])throw new Error("First and last Position are not equivalent.")}return p({type:"Polygon",coordinates:f},u,s)}function y(f,u,s){if(void 0===s&&(s={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:f},u,s)}function e(f,u){void 0===u&&(u={});var s={type:"FeatureCollection"};return u.id&&(s.id=u.id),u.bbox&&(s.bbox=u.bbox),s.features=f,s}function r(f,u,s){return void 0===s&&(s={}),p({type:"MultiLineString",coordinates:f},u,s)}function t(f,u,s){return void 0===s&&(s={}),p({type:"MultiPoint",coordinates:f},u,s)}function o(f,u,s){return void 0===s&&(s={}),p({type:"MultiPolygon",coordinates:f},u,s)}function n(f,u){void 0===u&&(u="kilometers");var s=ie.factors[u];if(!s)throw new Error(u+" units is invalid");return f*s}function m(f,u){void 0===u&&(u="kilometers");var s=ie.factors[u];if(!s)throw new Error(u+" units is invalid");return f/s}function l(f){return f%(2*Math.PI)*180/Math.PI}function i(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)&&!/^\s*$/.test(f)}Object.defineProperty(ie,"__esModule",{value:!0}),ie.earthRadius=6371008.8,ie.factors={centimeters:100*ie.earthRadius,centimetres:100*ie.earthRadius,degrees:ie.earthRadius/111325,feet:3.28084*ie.earthRadius,inches:39.37*ie.earthRadius,kilometers:ie.earthRadius/1e3,kilometres:ie.earthRadius/1e3,meters:ie.earthRadius,metres:ie.earthRadius,miles:ie.earthRadius/1609.344,millimeters:1e3*ie.earthRadius,millimetres:1e3*ie.earthRadius,nauticalmiles:ie.earthRadius/1852,radians:1,yards:ie.earthRadius/1.0936},ie.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ie.earthRadius,yards:1/1.0936},ie.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ie.feature=p,ie.geometry=function(f,u,s){switch(void 0===s&&(s={}),f){case"Point":return g(u).geometry;case"LineString":return y(u).geometry;case"Polygon":return b(u).geometry;case"MultiPoint":return t(u).geometry;case"MultiLineString":return r(u).geometry;case"MultiPolygon":return o(u).geometry;default:throw new Error(f+" is invalid")}},ie.point=g,ie.points=function(f,u,s){return void 0===s&&(s={}),e(f.map(function(d){return g(d,u)}),s)},ie.polygon=b,ie.polygons=function(f,u,s){return void 0===s&&(s={}),e(f.map(function(d){return b(d,u)}),s)},ie.lineString=y,ie.lineStrings=function(f,u,s){return void 0===s&&(s={}),e(f.map(function(d){return y(d,u)}),s)},ie.featureCollection=e,ie.multiLineString=r,ie.multiPoint=t,ie.multiPolygon=o,ie.geometryCollection=function(f,u,s){return void 0===s&&(s={}),p({type:"GeometryCollection",geometries:f},u,s)},ie.round=function(f,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var s=Math.pow(10,u||0);return Math.round(f*s)/s},ie.radiansToLength=n,ie.lengthToRadians=m,ie.lengthToDegrees=function(f,u){return l(m(f,u))},ie.bearingToAzimuth=function(f){var u=f%360;return u<0&&(u+=360),u},ie.radiansToDegrees=l,ie.degreesToRadians=function(f){return f%360*Math.PI/180},ie.convertLength=function(f,u,s){if(void 0===u&&(u="kilometers"),void 0===s&&(s="kilometers"),!(f>=0))throw new Error("length must be a positive number");return n(m(f,u),s)},ie.convertArea=function(f,u,s){if(void 0===u&&(u="meters"),void 0===s&&(s="kilometers"),!(f>=0))throw new Error("area must be a positive number");var d=ie.areaFactors[u];if(!d)throw new Error("invalid original units");var h=ie.areaFactors[s];if(!h)throw new Error("invalid final units");return f/d*h},ie.isNumber=i,ie.isObject=function(f){return!!f&&f.constructor===Object},ie.validateBBox=function(f){if(!f)throw new Error("bbox is required");if(!Array.isArray(f))throw new Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw new Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(u){if(!i(u))throw new Error("bbox must only contain numbers")})},ie.validateId=function(f){if(!f)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof f))throw new Error("id must be a number or a string")},ie.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ie.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ie.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ie.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ie.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ie.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ie.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(v,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var p=v("@turf/helpers");function g(n,m,l){if(null!==n)for(var i,f,u,s,d,h,a,_,c=0,T=0,x=n.type,w="FeatureCollection"===x,M="Feature"===x,D=w?n.features.length:1,C=0;C<D;C++){d=(_=!!(a=w?n.features[C].geometry:M?n.geometry:n)&&"GeometryCollection"===a.type)?a.geometries.length:1;for(var P=0;P<d;P++){var L=0,S=0;if(null!==(s=_?a.geometries[P]:a)){h=s.coordinates;var E=s.type;switch(c=!l||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===m(h,T,C,L,S))return!1;T++,L++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===m(h[i],T,C,L,S))return!1;T++,"MultiPoint"===E&&L++}"LineString"===E&&L++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(f=0;f<h[i].length-c;f++){if(!1===m(h[i][f],T,C,L,S))return!1;T++}"MultiLineString"===E&&L++,"Polygon"===E&&S++}"Polygon"===E&&L++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(S=0,f=0;f<h[i].length;f++){for(u=0;u<h[i][f].length-c;u++){if(!1===m(h[i][f][u],T,C,L,S))return!1;T++}S++}L++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===g(s.geometries[i],m,l))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(n,m){var l;switch(n.type){case"FeatureCollection":for(l=0;l<n.features.length&&!1!==m(n.features[l].properties,l);l++);break;case"Feature":m(n.properties,0)}}function y(n,m){if("Feature"===n.type)m(n,0);else if("FeatureCollection"===n.type)for(var l=0;l<n.features.length&&!1!==m(n.features[l],l);l++);}function e(n,m){var l,i,f,u,s,d,h,a,_,c,T=0,x="FeatureCollection"===n.type,w="Feature"===n.type,M=x?n.features.length:1;for(l=0;l<M;l++){for(a=x?n.features[l].properties:w?n.properties:{},_=x?n.features[l].bbox:w?n.bbox:void 0,c=x?n.features[l].id:w?n.id:void 0,s=(h=!!(d=x?n.features[l].geometry:w?n.geometry:n)&&"GeometryCollection"===d.type)?d.geometries.length:1,f=0;f<s;f++)if(null!==(u=h?d.geometries[f]:d))switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===m(u,T,a,_,c))return!1;break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(!1===m(u.geometries[i],T,a,_,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===m(null,T,a,_,c))return!1;T++}}function r(n,m){e(n,function(l,i,f,u,s){var d,h=null===l?null:l.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return!1!==m(p.feature(l,f,{bbox:u,id:s}),i,0)&&void 0}switch(h){case"MultiPoint":d="Point";break;case"MultiLineString":d="LineString";break;case"MultiPolygon":d="Polygon"}for(var a=0;a<l.coordinates.length;a++)if(!1===m(p.feature({type:d,coordinates:l.coordinates[a]},f),i,a))return!1})}function t(n,m){r(n,function(l,i,f){var u=0;if(l.geometry){var s=l.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var d,h=0,a=0,_=0;return!1!==g(l,function(c,T,x,w,M){if(void 0===d||i>h||w>a||M>_)return d=c,h=i,a=w,_=M,void(u=0);var D=p.lineString([d,c],l.properties);if(!1===m(D,i,f,M,u))return!1;u++,d=c})&&void 0}}})}function o(n,m){if(!n)throw new Error("geojson is required");r(n,function(l,i,f){if(null!==l.geometry){var s=l.geometry.coordinates;switch(l.geometry.type){case"LineString":if(!1===m(l,i,f,0,0))return!1;break;case"Polygon":for(var d=0;d<s.length;d++)if(!1===m(p.lineString(s[d],l.properties),i,f,d))return!1}}})}ie.coordEach=g,ie.coordReduce=function(n,m,l,i){var f=l;return g(n,function(u,s,d,h,a){f=0===s&&void 0===l?u:m(f,u,s,d,h,a)},i),f},ie.propEach=b,ie.propReduce=function(n,m,l){var i=l;return b(n,function(f,u){i=0===u&&void 0===l?f:m(i,f,u)}),i},ie.featureEach=y,ie.featureReduce=function(n,m,l){var i=l;return y(n,function(f,u){i=0===u&&void 0===l?f:m(i,f,u)}),i},ie.coordAll=function(n){var m=[];return g(n,function(l){m.push(l)}),m},ie.geomEach=e,ie.geomReduce=function(n,m,l){var i=l;return e(n,function(f,u,s,d,h){i=0===u&&void 0===l?f:m(i,f,u,s,d,h)}),i},ie.flattenEach=r,ie.flattenReduce=function(n,m,l){var i=l;return r(n,function(f,u,s){i=0===u&&0===s&&void 0===l?f:m(i,f,u,s)}),i},ie.segmentEach=t,ie.segmentReduce=function(n,m,l){var i=l,f=!1;return t(n,function(u,s,d,h,a){i=!1===f&&void 0===l?u:m(i,u,s,d,h,a),f=!0}),i},ie.lineEach=o,ie.lineReduce=function(n,m,l){var i=l;return o(n,function(f,u,s,d){i=0===u&&void 0===l?f:m(i,f,u,s,d)}),i},ie.findSegment=function(n,m){if(!p.isObject(m=m||{}))throw new Error("options is invalid");var l,i=m.featureIndex||0,f=m.multiFeatureIndex||0,u=m.geometryIndex||0,s=m.segmentIndex||0,d=m.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),d=d||n.features[i].properties,l=n.features[i].geometry;break;case"Feature":d=d||n.properties,l=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=n;break;default:throw new Error("geojson is invalid")}if(null===l)return null;var h=l.coordinates;switch(l.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=h.length+s-1),p.lineString([h[s],h[s+1]],d,m);case"Polygon":return u<0&&(u=h.length+u),s<0&&(s=h[u].length+s-1),p.lineString([h[u][s],h[u][s+1]],d,m);case"MultiLineString":return f<0&&(f=h.length+f),s<0&&(s=h[f].length+s-1),p.lineString([h[f][s],h[f][s+1]],d,m);case"MultiPolygon":return f<0&&(f=h.length+f),u<0&&(u=h[f].length+u),s<0&&(s=h[f][u].length-s-1),p.lineString([h[f][u][s],h[f][u][s+1]],d,m)}throw new Error("geojson is invalid")},ie.findPoint=function(n,m){if(!p.isObject(m=m||{}))throw new Error("options is invalid");var l,i=m.featureIndex||0,f=m.multiFeatureIndex||0,u=m.geometryIndex||0,s=m.coordIndex||0,d=m.properties;switch(n.type){case"FeatureCollection":i<0&&(i=n.features.length+i),d=d||n.features[i].properties,l=n.features[i].geometry;break;case"Feature":d=d||n.properties,l=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":l=n;break;default:throw new Error("geojson is invalid")}if(null===l)return null;var h=l.coordinates;switch(l.type){case"Point":return p.point(h,d,m);case"MultiPoint":return f<0&&(f=h.length+f),p.point(h[f],d,m);case"LineString":return s<0&&(s=h.length+s),p.point(h[s],d,m);case"Polygon":return u<0&&(u=h.length+u),s<0&&(s=h[u].length+s),p.point(h[u][s],d,m);case"MultiLineString":return f<0&&(f=h.length+f),s<0&&(s=h[f].length+s),p.point(h[f][s],d,m);case"MultiPolygon":return f<0&&(f=h.length+f),u<0&&(u=h[f].length+u),s<0&&(s=h[f][u].length-s),p.point(h[f][u][s],d,m)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(v,ae,ie){ae.exports=function(p){var g=0,b=0,y=0,e=0;return p.map(function(r){var t=(r=r.slice())[0],o=t.toUpperCase();if(t!=o)switch(r[0]=o,t){case"a":r[6]+=y,r[7]+=e;break;case"v":r[1]+=e;break;case"h":r[1]+=y;break;default:for(var n=1;n<r.length;)r[n++]+=y,r[n++]+=e}switch(o){case"Z":y=g,e=b;break;case"H":y=r[1];break;case"V":e=r[1];break;case"M":y=g=r[1],e=b=r[2];break;default:y=r[r.length-2],e=r[r.length-1]}return r})}},{}],71:[function(v,ae,ie){"use strict";ae.exports=function(p,g){if(!p||null==p.length)throw Error("Argument should be an array");g=null==g?1:Math.floor(g);for(var b=Array(2*g),y=0;y<g;y++){for(var e=-1/0,r=1/0,t=y,o=p.length;t<o;t+=g)p[t]>e&&(e=p[t]),p[t]<r&&(r=p[t]);b[y]=r,b[g+y]=e}return b}},{}],72:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){if("function"==typeof Array.prototype.findIndex)return p.findIndex(g,b);if("function"!=typeof g)throw new TypeError("predicate must be a function");var y=Object(p),e=y.length;if(0===e)return-1;for(var r=0;r<e;r++)if(g.call(b,y[r],r,y))return r;return-1}},{}],73:[function(v,ae,ie){"use strict";var p=v("array-bounds");ae.exports=function(g,b,y){if(!g||null==g.length)throw Error("Argument should be an array");null==b&&(b=1),null==y&&(y=p(g,b));for(var e=0;e<b;e++){var r=y[b+e],t=y[e],o=e,n=g.length;if(r===1/0&&t===-1/0)for(o=e;o<n;o+=b)g[o]=g[o]===r?1:g[o]===t?0:.5;else if(r===1/0)for(o=e;o<n;o+=b)g[o]=g[o]===r?1:0;else if(t===-1/0)for(o=e;o<n;o+=b)g[o]=g[o]===t?0:1;else{var m=r-t;for(o=e;o<n;o+=b)isNaN(g[o])||(g[o]=0===m?.5:(g[o]-t)/m)}}return g}},{"array-bounds":71}],74:[function(v,ae,ie){ae.exports=function(p,g){var b="number"==typeof p,y="number"==typeof g;b&&!y?(g=p,p=0):b||y||(p=0,g=0);var e=(g|=0)-(p|=0);if(e<0)throw new Error("array length must be positive");for(var r=new Array(e),t=0,o=p;t<e;t++,o++)r[t]=o;return r}},{}],75:[function(v,ae,ie){(function(p){(function(){"use strict";var g=v("object-assign");function b(w,M){if(w===M)return 0;for(var D=w.length,C=M.length,P=0,L=Math.min(D,C);P<L;++P)if(w[P]!==M[P]){D=w[P],C=M[P];break}return D<C?-1:C<D?1:0}function y(w){return p.Buffer&&"function"==typeof p.Buffer.isBuffer?p.Buffer.isBuffer(w):!(null==w||!w._isBuffer)}var e=v("util/"),r=Object.prototype.hasOwnProperty,t=Array.prototype.slice,o="foo"===function(){}.name;function n(w){return Object.prototype.toString.call(w)}function m(w){return!y(w)&&"function"==typeof p.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(w):!!w&&(w instanceof DataView||!!(w.buffer&&w.buffer instanceof ArrayBuffer)))}var l=ae.exports=h,i=/\s*function\s+([^\(\s]*)\s*/;function f(w){if(e.isFunction(w)){if(o)return w.name;var M=w.toString().match(i);return M&&M[1]}}function u(w,M){return"string"==typeof w?w.length<M?w:w.slice(0,M):w}function s(w){if(o||!e.isFunction(w))return e.inspect(w);var M=f(w);return"[Function"+(M?": "+M:"")+"]"}function d(w,M,D,C,P){throw new l.AssertionError({message:D,actual:w,expected:M,operator:C,stackStartFunction:P})}function h(w,M){w||d(w,!0,M,"==",l.ok)}function a(w,M,D,C){if(w===M)return!0;if(y(w)&&y(M))return 0===b(w,M);if(e.isDate(w)&&e.isDate(M))return w.getTime()===M.getTime();if(e.isRegExp(w)&&e.isRegExp(M))return w.source===M.source&&w.global===M.global&&w.multiline===M.multiline&&w.lastIndex===M.lastIndex&&w.ignoreCase===M.ignoreCase;if(null!==w&&"object"==typeof w||null!==M&&"object"==typeof M){if(m(w)&&m(M)&&n(w)===n(M)&&!(w instanceof Float32Array||w instanceof Float64Array))return 0===b(new Uint8Array(w.buffer),new Uint8Array(M.buffer));if(y(w)!==y(M))return!1;var P=(C=C||{actual:[],expected:[]}).actual.indexOf(w);return-1!==P&&P===C.expected.indexOf(M)||(C.actual.push(w),C.expected.push(M),function(L,S,E,N){if(null==L||null==S)return!1;if(e.isPrimitive(L)||e.isPrimitive(S))return L===S;if(E&&Object.getPrototypeOf(L)!==Object.getPrototypeOf(S))return!1;var z=_(L),q=_(S);if(z&&!q||!z&&q)return!1;if(z)return a(L=t.call(L),S=t.call(S),E);var G,K,ne=x(L),X=x(S);if(ne.length!==X.length)return!1;for(ne.sort(),X.sort(),K=ne.length-1;K>=0;K--)if(ne[K]!==X[K])return!1;for(K=ne.length-1;K>=0;K--)if(!a(L[G=ne[K]],S[G],E,N))return!1;return!0}(w,M,D,C))}return D?w===M:w==M}function _(w){return"[object Arguments]"==Object.prototype.toString.call(w)}function c(w,M){if(!w||!M)return!1;if("[object RegExp]"==Object.prototype.toString.call(M))return M.test(w);try{if(w instanceof M)return!0}catch{}return!Error.isPrototypeOf(M)&&!0===M.call({},w)}function T(w,M,D,C){var P;if("function"!=typeof M)throw new TypeError('"block" argument must be a function');"string"==typeof D&&(C=D,D=null),P=function(E){var N;try{E()}catch(z){N=z}return N}(M),C=(D&&D.name?" ("+D.name+").":".")+(C?" "+C:"."),w&&!P&&d(P,D,"Missing expected exception"+C);var L="string"==typeof C,S=!w&&P&&!D;if((!w&&e.isError(P)&&L&&c(P,D)||S)&&d(P,D,"Got unwanted exception"+C),w&&P&&D&&!c(P,D)||!w&&P)throw P}l.AssertionError=function(w){this.name="AssertionError",this.actual=w.actual,this.expected=w.expected,this.operator=w.operator,w.message?(this.message=w.message,this.generatedMessage=!1):(this.message=u(s(this.actual),128)+" "+this.operator+" "+u(s(this.expected),128),this.generatedMessage=!0);var M=w.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var D=new Error;if(D.stack){var C=D.stack,P=f(M),L=C.indexOf("\n"+P);if(L>=0){var S=C.indexOf("\n",L+1);C=C.substring(S+1)}this.stack=C}}},e.inherits(l.AssertionError,Error),l.fail=d,l.ok=h,l.equal=function(w,M,D){w!=M&&d(w,M,D,"==",l.equal)},l.notEqual=function(w,M,D){w==M&&d(w,M,D,"!=",l.notEqual)},l.deepEqual=function(w,M,D){a(w,M,!1)||d(w,M,D,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(w,M,D){a(w,M,!0)||d(w,M,D,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(w,M,D){a(w,M,!1)&&d(w,M,D,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function w(M,D,C){a(M,D,!0)&&d(M,D,C,"notDeepStrictEqual",w)},l.strictEqual=function(w,M,D){w!==M&&d(w,M,D,"===",l.strictEqual)},l.notStrictEqual=function(w,M,D){w===M&&d(w,M,D,"!==",l.notStrictEqual)},l.throws=function(w,M,D){T(!0,w,M,D)},l.doesNotThrow=function(w,M,D){T(!1,w,M,D)},l.ifError=function(w){if(w)throw w},l.strict=g(function w(M,D){M||d(M,!0,D,"==",w)},l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var x=Object.keys||function(w){var M=[];for(var D in w)r.call(w,D)&&M.push(D);return M}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(v,ae,ie){ae.exports="function"==typeof Object.create?function(p,g){p.super_=g,p.prototype=Object.create(g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:function(p,g){p.super_=g;var b=function(){};b.prototype=g.prototype,p.prototype=new b,p.prototype.constructor=p}},{}],77:[function(v,ae,ie){ae.exports=function(p){return p&&"object"==typeof p&&"function"==typeof p.copy&&"function"==typeof p.fill&&"function"==typeof p.readUInt8}},{}],78:[function(v,ae,ie){(function(p,g){(function(){var b=/%[sdj%]/g;ie.format=function(L){if(!d(L)){for(var S=[],E=0;E<arguments.length;E++)S.push(r(arguments[E]));return S.join(" ")}E=1;for(var N=arguments,z=N.length,q=String(L).replace(b,function(K){if("%%"===K)return"%";if(E>=z)return K;switch(K){case"%s":return String(N[E++]);case"%d":return Number(N[E++]);case"%j":try{return JSON.stringify(N[E++])}catch{return"[Circular]"}default:return K}}),G=N[E];E<z;G=N[++E])u(G)||!_(G)?q+=" "+G:q+=" "+r(G);return q},ie.deprecate=function(L,S){if(h(g.process))return function(){return ie.deprecate(L,S).apply(this,arguments)};if(!0===p.noDeprecation)return L;var E=!1;return function(){if(!E){if(p.throwDeprecation)throw new Error(S);p.traceDeprecation?console.trace(S):console.error(S),E=!0}return L.apply(this,arguments)}};var y,e={};function r(L,S){var E={seen:[],stylize:o};return arguments.length>=3&&(E.depth=arguments[2]),arguments.length>=4&&(E.colors=arguments[3]),f(S)?E.showHidden=S:S&&ie._extend(E,S),h(E.showHidden)&&(E.showHidden=!1),h(E.depth)&&(E.depth=2),h(E.colors)&&(E.colors=!1),h(E.customInspect)&&(E.customInspect=!0),E.colors&&(E.stylize=t),n(E,L,E.depth)}function t(L,S){var E=r.styles[S];return E?"\x1b["+r.colors[E][0]+"m"+L+"\x1b["+r.colors[E][1]+"m":L}function o(L,S){return L}function n(L,S,E){if(L.customInspect&&S&&x(S.inspect)&&S.inspect!==ie.inspect&&(!S.constructor||S.constructor.prototype!==S)){var N=S.inspect(E,L);return d(N)||(N=n(L,N,E)),N}var z=function(V,j){if(h(j))return V.stylize("undefined","undefined");if(d(j)){var H="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return V.stylize(H,"string")}return s(j)?V.stylize(""+j,"number"):f(j)?V.stylize(""+j,"boolean"):u(j)?V.stylize("null","null"):void 0}(L,S);if(z)return z;var j,q=Object.keys(S),G=(j={},q.forEach(function(H,oe){j[H]=!0}),j);if(L.showHidden&&(q=Object.getOwnPropertyNames(S)),T(S)&&(q.indexOf("message")>=0||q.indexOf("description")>=0))return m(S);if(0===q.length){if(x(S))return L.stylize("[Function"+(S.name?": "+S.name:"")+"]","special");if(a(S))return L.stylize(RegExp.prototype.toString.call(S),"regexp");if(c(S))return L.stylize(Date.prototype.toString.call(S),"date");if(T(S))return m(S)}var ne,X="",J=!1,se=["{","}"];return i(S)&&(J=!0,se=["[","]"]),x(S)&&(X=" [Function"+(S.name?": "+S.name:"")+"]"),a(S)&&(X=" "+RegExp.prototype.toString.call(S)),c(S)&&(X=" "+Date.prototype.toUTCString.call(S)),T(S)&&(X=" "+m(S)),0!==q.length||J&&0!=S.length?E<0?a(S)?L.stylize(RegExp.prototype.toString.call(S),"regexp"):L.stylize("[Object]","special"):(L.seen.push(S),ne=J?function(V,j,H,oe,U){for(var te=[],ee=0,le=j.length;ee<le;++ee)P(j,String(ee))?te.push(l(V,j,H,oe,String(ee),!0)):te.push("");return U.forEach(function(ce){ce.match(/^\d+$/)||te.push(l(V,j,H,oe,ce,!0))}),te}(L,S,E,G,q):q.map(function(V){return l(L,S,E,G,V,J)}),L.seen.pop(),function(V,j,H){return V.reduce(function(oe,U){return U.indexOf("\n"),oe+U.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?H[0]+(""===j?"":j+"\n ")+" "+V.join(",\n  ")+" "+H[1]:H[0]+j+" "+V.join(", ")+" "+H[1]}(ne,X,se)):se[0]+X+se[1]}function m(L){return"["+Error.prototype.toString.call(L)+"]"}function l(L,S,E,N,z,q){var G,K,ne;if((ne=Object.getOwnPropertyDescriptor(S,z)||{value:S[z]}).get?K=L.stylize(ne.set?"[Getter/Setter]":"[Getter]","special"):ne.set&&(K=L.stylize("[Setter]","special")),P(N,z)||(G="["+z+"]"),K||(L.seen.indexOf(ne.value)<0?(K=u(E)?n(L,ne.value,null):n(L,ne.value,E-1)).indexOf("\n")>-1&&(K=q?K.split("\n").map(function(X){return"  "+X}).join("\n").substr(2):"\n"+K.split("\n").map(function(X){return"   "+X}).join("\n")):K=L.stylize("[Circular]","special")),h(G)){if(q&&z.match(/^\d+$/))return K;(G=JSON.stringify(""+z)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(G=G.substr(1,G.length-2),G=L.stylize(G,"name")):(G=G.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),G=L.stylize(G,"string"))}return G+": "+K}function i(L){return Array.isArray(L)}function f(L){return"boolean"==typeof L}function u(L){return null===L}function s(L){return"number"==typeof L}function d(L){return"string"==typeof L}function h(L){return void 0===L}function a(L){return _(L)&&"[object RegExp]"===w(L)}function _(L){return"object"==typeof L&&null!==L}function c(L){return _(L)&&"[object Date]"===w(L)}function T(L){return _(L)&&("[object Error]"===w(L)||L instanceof Error)}function x(L){return"function"==typeof L}function w(L){return Object.prototype.toString.call(L)}function M(L){return L<10?"0"+L.toString(10):L.toString(10)}ie.debuglog=function(L){if(h(y)&&(y=p.env.NODE_DEBUG||""),L=L.toUpperCase(),!e[L])if(new RegExp("\\b"+L+"\\b","i").test(y)){var S=p.pid;e[L]=function(){var E=ie.format.apply(ie,arguments);console.error("%s %d: %s",L,S,E)}}else e[L]=function(){};return e[L]},ie.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ie.isArray=i,ie.isBoolean=f,ie.isNull=u,ie.isNullOrUndefined=function(L){return null==L},ie.isNumber=s,ie.isString=d,ie.isSymbol=function(L){return"symbol"==typeof L},ie.isUndefined=h,ie.isRegExp=a,ie.isObject=_,ie.isDate=c,ie.isError=T,ie.isFunction=x,ie.isPrimitive=function(L){return null===L||"boolean"==typeof L||"number"==typeof L||"string"==typeof L||"symbol"==typeof L||void 0===L},ie.isBuffer=v("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var L=new Date,S=[M(L.getHours()),M(L.getMinutes()),M(L.getSeconds())].join(":");return[L.getDate(),D[L.getMonth()],S].join(" ")}function P(L,S){return Object.prototype.hasOwnProperty.call(L,S)}ie.log=function(){console.log("%s - %s",C(),ie.format.apply(ie,arguments))},ie.inherits=v("inherits"),ie._extend=function(L,S){if(!S||!_(S))return L;for(var E=Object.keys(S),N=E.length;N--;)L[E[N]]=S[E[N]];return L}}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(v,ae,ie){"use strict";ie.byteLength=function(n){var m=t(n),i=m[1];return 3*(m[0]+i)/4-i},ie.toByteArray=function(n){var m,l,c,i=t(n),f=i[0],u=i[1],s=new b(3*(f+(c=u))/4-c),d=0,h=u>0?f-4:f;for(l=0;l<h;l+=4)m=g[n.charCodeAt(l)]<<18|g[n.charCodeAt(l+1)]<<12|g[n.charCodeAt(l+2)]<<6|g[n.charCodeAt(l+3)],s[d++]=m>>16&255,s[d++]=m>>8&255,s[d++]=255&m;return 2===u&&(m=g[n.charCodeAt(l)]<<2|g[n.charCodeAt(l+1)]>>4,s[d++]=255&m),1===u&&(m=g[n.charCodeAt(l)]<<10|g[n.charCodeAt(l+1)]<<4|g[n.charCodeAt(l+2)]>>2,s[d++]=m>>8&255,s[d++]=255&m),s},ie.fromByteArray=function(n){for(var m,l=n.length,i=l%3,f=[],u=0,s=l-i;u<s;u+=16383)f.push(o(n,u,u+16383>s?s:u+16383));return 1===i?f.push(p[(m=n[l-1])>>2]+p[m<<4&63]+"=="):2===i&&f.push(p[(m=(n[l-2]<<8)+n[l-1])>>10]+p[m>>4&63]+p[m<<2&63]+"="),f.join("")};for(var p=[],g=[],b=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=y.length;e<r;++e)p[e]=y[e],g[y.charCodeAt(e)]=e;function t(n){var m=n.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=n.indexOf("=");return-1===l&&(l=m),[l,l===m?0:4-l%4]}function o(n,m,l){for(var f,u=[],s=m;s<l;s+=3)u.push(p[(f=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(255&n[s+2]))>>18&63]+p[f>>12&63]+p[f>>6&63]+p[63&f]);return u.join("")}g["-".charCodeAt(0)]=62,g["_".charCodeAt(0)]=63},{}],80:[function(v,ae,ie){"use strict";function p(t,o,n,m,l){for(var i=l+1;m<=l;){var f=m+l>>>1,u=t[f];(void 0!==n?n(u,o):u-o)>=0?(i=f,l=f-1):m=f+1}return i}function g(t,o,n,m,l){for(var i=l+1;m<=l;){var f=m+l>>>1,u=t[f];(void 0!==n?n(u,o):u-o)>0?(i=f,l=f-1):m=f+1}return i}function b(t,o,n,m,l){for(var i=m-1;m<=l;){var f=m+l>>>1,u=t[f];(void 0!==n?n(u,o):u-o)<0?(i=f,m=f+1):l=f-1}return i}function y(t,o,n,m,l){for(var i=m-1;m<=l;){var f=m+l>>>1,u=t[f];(void 0!==n?n(u,o):u-o)<=0?(i=f,m=f+1):l=f-1}return i}function e(t,o,n,m,l){for(;m<=l;){var i=m+l>>>1,f=t[i],u=void 0!==n?n(f,o):f-o;if(0===u)return i;u<=0?m=i+1:l=i-1}return-1}function r(t,o,n,m,l,i){return"function"==typeof n?i(t,o,n,void 0===m?0:0|m,void 0===l?t.length-1:0|l):i(t,o,void 0,void 0===n?0:0|n,void 0===m?t.length-1:0|m)}ae.exports={ge:function(t,o,n,m,l){return r(t,o,n,m,l,p)},gt:function(t,o,n,m,l){return r(t,o,n,m,l,g)},lt:function(t,o,n,m,l){return r(t,o,n,m,l,b)},le:function(t,o,n,m,l){return r(t,o,n,m,l,y)},eq:function(t,o,n,m,l){return r(t,o,n,m,l,e)}}},{}],81:[function(v,ae,ie){"use strict";function p(b){var y=32;return(b&=-b)&&y--,65535&b&&(y-=16),16711935&b&&(y-=8),252645135&b&&(y-=4),858993459&b&&(y-=2),1431655765&b&&(y-=1),y}ie.INT_BITS=32,ie.INT_MAX=2147483647,ie.INT_MIN=-1<<31,ie.sign=function(b){return(b>0)-(b<0)},ie.abs=function(b){var y=b>>31;return(b^y)-y},ie.min=function(b,y){return y^(b^y)&-(b<y)},ie.max=function(b,y){return b^(b^y)&-(b<y)},ie.isPow2=function(b){return!(b&b-1||!b)},ie.log2=function(b){var y,e;return y=(b>65535)<<4,y|=e=((b>>>=y)>255)<<3,y|=e=((b>>>=e)>15)<<2,(y|=e=((b>>>=e)>3)<<1)|(b>>>=e)>>1},ie.log10=function(b){return b>=1e9?9:b>=1e8?8:b>=1e7?7:b>=1e6?6:b>=1e5?5:b>=1e4?4:b>=1e3?3:b>=100?2:b>=10?1:0},ie.popCount=function(b){return 16843009*((b=(858993459&(b-=b>>>1&1431655765))+(b>>>2&858993459))+(b>>>4)&252645135)>>>24},ie.countTrailingZeros=p,ie.nextPow2=function(b){return b+=0===b,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,1+((b|=b>>>8)|b>>>16)},ie.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,(b|=b>>>16)-(b>>>1)},ie.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,27030>>>(b&=15)&1};var g=new Array(256);(function(b){for(var y=0;y<256;++y){var e=y,r=y,t=7;for(e>>>=1;e;e>>>=1)r<<=1,r|=1&e,--t;b[y]=r<<t&255}})(g),ie.reverse=function(b){return g[255&b]<<24|g[b>>>8&255]<<16|g[b>>>16&255]<<8|g[b>>>24&255]},ie.interleave2=function(b,y){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y&=65535)|y<<8))|y<<4))|y<<2))|y<<1))<<1},ie.deinterleave2=function(b,y){return(b=65535&((b=16711935&((b=252645135&((b=858993459&((b=b>>>y&1431655765)|b>>>1))|b>>>2))|b>>>4))|b>>>16))<<16>>16},ie.interleave3=function(b,y,e){return b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2),(b|=(y=1227133513&((y=3272356035&((y=251719695&((y=4278190335&((y&=1023)|y<<16))|y<<8))|y<<4))|y<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ie.deinterleave3=function(b,y){return(b=1023&((b=4278190335&((b=251719695&((b=3272356035&((b=b>>>y&1227133513)|b>>>2))|b>>>4))|b>>>8))|b>>>16))<<22>>22},ie.nextCombination=function(b){var y=b|b-1;return y+1|(~y&-~y)-1>>>p(b)+1}},{}],82:[function(v,ae,ie){"use strict";var p=v("clamp");ae.exports=function(e,r){r||(r={});var t,o,n,m,l,i,u,d,h,a=r.cutoff??.25,_=r.radius??8,c=r.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");t=r.width,o=r.height,m=e,i=r.stride?r.stride:Math.floor(e.length/t/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(m=(u=e).getContext("2d").getImageData(0,0,t=u.width,o=u.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(m=e.getImageData(0,0,t=(u=e.canvas).width,o=u.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(t=e.width,o=e.height,m=e.data,i=4);if(n=Math.max(t,o),window.Uint8ClampedArray&&m instanceof window.Uint8ClampedArray||window.Uint8Array&&m instanceof window.Uint8Array)for(l=m,m=Array(t*o),d=0,h=l.length;d<h;d++)m[d]=l[d*i+c]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var T=Array(t*o),x=Array(t*o),w=Array(n),M=Array(n),D=Array(n+1),C=Array(n);for(d=0,h=t*o;d<h;d++){var P=m[d];T[d]=1===P?0:0===P?g:Math.pow(Math.max(0,.5-P),2),x[d]=1===P?g:0===P?0:Math.pow(Math.max(0,P-.5),2)}b(T,t,o,w,M,C,D),b(x,t,o,w,M,C,D);var L=window.Float32Array?new Float32Array(t*o):new Array(t*o);for(d=0,h=t*o;d<h;d++)L[d]=p(1-((T[d]-x[d])/_+a),0,1);return L};var g=1e20;function b(e,r,t,o,n,m,l){for(var i=0;i<r;i++){for(var f=0;f<t;f++)o[f]=e[f*r+i];for(y(o,n,m,l,t),f=0;f<t;f++)e[f*r+i]=n[f]}for(f=0;f<t;f++){for(i=0;i<r;i++)o[i]=e[f*r+i];for(y(o,n,m,l,r),i=0;i<r;i++)e[f*r+i]=Math.sqrt(n[i])}}function y(e,r,t,o,n){t[0]=0,o[0]=-g,o[1]=+g;for(var m=1,l=0;m<n;m++){for(var i=(e[m]+m*m-(e[t[l]]+t[l]*t[l]))/(2*m-2*t[l]);i<=o[l];)l--,i=(e[m]+m*m-(e[t[l]]+t[l]*t[l]))/(2*m-2*t[l]);t[++l]=m,o[l]=i,o[l+1]=+g}for(m=0,l=0;m<n;m++){for(;o[l+1]<m;)l++;r[m]=(m-t[l])*(m-t[l])+e[t[l]]}}},{clamp:86}],83:[function(v,ae,ie){},{}],84:[function(v,ae,ie){"use strict";var p,g="object"==typeof Reflect?Reflect:null,b=g&&"function"==typeof g.apply?g.apply:function(s,d,h){return Function.prototype.apply.call(s,d,h)};p=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:function(s){return Object.getOwnPropertyNames(s)};var y=Number.isNaN||function(s){return s!=s};function e(){e.init.call(this)}ae.exports=e,ae.exports.once=function(s,d){return new Promise(function(h,a){function _(){void 0!==c&&s.removeListener("error",c),h([].slice.call(arguments))}var c;"error"!==d&&(c=function(T){s.removeListener(d,_),a(T)},s.once("error",c)),s.once(d,_)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function t(s){if("function"!=typeof s)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof s)}function o(s){return void 0===s._maxListeners?e.defaultMaxListeners:s._maxListeners}function n(s,d,h,a){var _,c,T;if(t(h),void 0===(c=s._events)?(c=s._events=Object.create(null),s._eventsCount=0):(void 0!==c.newListener&&(s.emit("newListener",d,h.listener?h.listener:h),c=s._events),T=c[d]),void 0===T)T=c[d]=h,++s._eventsCount;else if("function"==typeof T?T=c[d]=a?[h,T]:[T,h]:a?T.unshift(h):T.push(h),(_=o(s))>0&&T.length>_&&!T.warned){T.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=s,w.type=d,w.count=T.length,console&&console.warn&&console.warn(w)}return s}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(s,d,h){var a={fired:!1,wrapFn:void 0,target:s,type:d,listener:h},_=m.bind(a);return _.listener=h,a.wrapFn=_,_}function i(s,d,h){var a=s._events;if(void 0===a)return[];var _=a[d];return void 0===_?[]:"function"==typeof _?h?[_.listener||_]:[_]:h?function(c){for(var T=new Array(c.length),x=0;x<T.length;++x)T[x]=c[x].listener||c[x];return T}(_):u(_,_.length)}function f(s){var d=this._events;if(void 0!==d){var h=d[s];if("function"==typeof h)return 1;if(void 0!==h)return h.length}return 0}function u(s,d){for(var h=new Array(d),a=0;a<d;++a)h[a]=s[a];return h}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(s){if("number"!=typeof s||s<0||y(s))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+s+".");r=s}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(s){if("number"!=typeof s||s<0||y(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this},e.prototype.getMaxListeners=function(){return o(this)},e.prototype.emit=function(s){for(var d=[],h=1;h<arguments.length;h++)d.push(arguments[h]);var a="error"===s,_=this._events;if(void 0!==_)a=a&&void 0===_.error;else if(!a)return!1;if(a){var c;if(d.length>0&&(c=d[0]),c instanceof Error)throw c;var T=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw T.context=c,T}var x=_[s];if(void 0===x)return!1;if("function"==typeof x)b(x,this,d);else{var w=x.length,M=u(x,w);for(h=0;h<w;++h)b(M[h],this,d)}return!0},e.prototype.on=e.prototype.addListener=function(s,d){return n(this,s,d,!1)},e.prototype.prependListener=function(s,d){return n(this,s,d,!0)},e.prototype.once=function(s,d){return t(d),this.on(s,l(this,s,d)),this},e.prototype.prependOnceListener=function(s,d){return t(d),this.prependListener(s,l(this,s,d)),this},e.prototype.off=e.prototype.removeListener=function(s,d){var h,a,_,c,T;if(t(d),void 0===(a=this._events))return this;if(void 0===(h=a[s]))return this;if(h===d||h.listener===d)0==--this._eventsCount?this._events=Object.create(null):(delete a[s],a.removeListener&&this.emit("removeListener",s,h.listener||d));else if("function"!=typeof h){for(_=-1,c=h.length-1;c>=0;c--)if(h[c]===d||h[c].listener===d){T=h[c].listener,_=c;break}if(_<0)return this;0===_?h.shift():function(x,w){for(;w+1<x.length;w++)x[w]=x[w+1];x.pop()}(h,_),1===h.length&&(a[s]=h[0]),void 0!==a.removeListener&&this.emit("removeListener",s,T||d)}return this},e.prototype.removeAllListeners=function(s){var d,h,a;if(void 0===(h=this._events))return this;if(void 0===h.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==h[s]&&(0==--this._eventsCount?this._events=Object.create(null):delete h[s]),this;if(0===arguments.length){var _,c=Object.keys(h);for(a=0;a<c.length;++a)"removeListener"!==(_=c[a])&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(d=h[s]))this.removeListener(s,d);else if(void 0!==d)for(a=d.length-1;a>=0;a--)this.removeListener(s,d[a]);return this},e.prototype.listeners=function(s){return i(this,s,!0)},e.prototype.rawListeners=function(s){return i(this,s,!1)},e.listenerCount=function(s,d){return"function"==typeof s.listenerCount?s.listenerCount(d):f.call(s,d)},e.prototype.listenerCount=f,e.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},{}],85:[function(v,ae,ie){(function(p){(function(){"use strict";var g=v("base64-js"),b=v("ieee754");function y(V){if(V>2147483647)throw new RangeError('The value "'+V+'" is invalid for option "size"');var j=new Uint8Array(V);return j.__proto__=e.prototype,j}function e(V,j,H){if("number"==typeof V){if("string"==typeof j)throw new TypeError('The "string" argument must be of type string. Received type number');return o(V)}return r(V,j,H)}function r(V,j,H){if("string"==typeof V)return function(te,ee){if("string"==typeof ee&&""!==ee||(ee="utf8"),!e.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);var le=0|l(te,ee),ce=y(le),pe=ce.write(te,ee);return pe!==le&&(ce=ce.slice(0,pe)),ce}(V,j);if(ArrayBuffer.isView(V))return n(V);if(null==V)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(J(V,ArrayBuffer)||V&&J(V.buffer,ArrayBuffer))return function(te,ee,le){if(ee<0||te.byteLength<ee)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<ee+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ce;return(ce=void 0===ee&&void 0===le?new Uint8Array(te):void 0===le?new Uint8Array(te,ee):new Uint8Array(te,ee,le)).__proto__=e.prototype,ce}(V,j,H);if("number"==typeof V)throw new TypeError('The "value" argument must not be of type number. Received type number');var oe=V.valueOf&&V.valueOf();if(null!=oe&&oe!==V)return e.from(oe,j,H);var U=function(te){if(e.isBuffer(te)){var ee=0|m(te.length),le=y(ee);return 0===le.length||te.copy(le,0,0,ee),le}return void 0!==te.length?"number"!=typeof te.length||se(te.length)?y(0):n(te):"Buffer"===te.type&&Array.isArray(te.data)?n(te.data):void 0}(V);if(U)return U;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof V[Symbol.toPrimitive])return e.from(V[Symbol.toPrimitive]("string"),j,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}function t(V){if("number"!=typeof V)throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function o(V){return t(V),y(V<0?0:0|m(V))}function n(V){for(var j=V.length<0?0:0|m(V.length),H=y(j),oe=0;oe<j;oe+=1)H[oe]=255&V[oe];return H}function m(V){if(V>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|V}function l(V,j){if(e.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||J(V,ArrayBuffer))return V.byteLength;if("string"!=typeof V)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);var H=V.length,oe=arguments.length>2&&!0===arguments[2];if(!oe&&0===H)return 0;for(var U=!1;;)switch(j){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return K(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*H;case"hex":return H>>>1;case"base64":return ne(V).length;default:if(U)return oe?-1:K(V).length;j=(""+j).toLowerCase(),U=!0}}function i(V,j,H){var oe=!1;if((void 0===j||j<0)&&(j=0),j>this.length||((void 0===H||H>this.length)&&(H=this.length),H<=0)||(H>>>=0)<=(j>>>=0))return"";for(V||(V="utf8");;)switch(V){case"hex":return C(this,j,H);case"utf8":case"utf-8":return w(this,j,H);case"ascii":return M(this,j,H);case"latin1":case"binary":return D(this,j,H);case"base64":return x(this,j,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,j,H);default:if(oe)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),oe=!0}}function f(V,j,H){var oe=V[j];V[j]=V[H],V[H]=oe}function u(V,j,H,oe,U){if(0===V.length)return-1;if("string"==typeof H?(oe=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),se(H=+H)&&(H=U?0:V.length-1),H<0&&(H=V.length+H),H>=V.length){if(U)return-1;H=V.length-1}else if(H<0){if(!U)return-1;H=0}if("string"==typeof j&&(j=e.from(j,oe)),e.isBuffer(j))return 0===j.length?-1:s(V,j,H,oe,U);if("number"==typeof j)return j&=255,"function"==typeof Uint8Array.prototype.indexOf?U?Uint8Array.prototype.indexOf.call(V,j,H):Uint8Array.prototype.lastIndexOf.call(V,j,H):s(V,[j],H,oe,U);throw new TypeError("val must be string, number or Buffer")}function s(V,j,H,oe,U){var te,ee=1,le=V.length,ce=j.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(V.length<2||j.length<2)return-1;ee=2,le/=2,ce/=2,H/=2}function pe(xe,De){return 1===ee?xe[De]:xe.readUInt16BE(De*ee)}if(U){var de=-1;for(te=H;te<le;te++)if(pe(V,te)===pe(j,-1===de?0:te-de)){if(-1===de&&(de=te),te-de+1===ce)return de*ee}else-1!==de&&(te-=te-de),de=-1}else for(H+ce>le&&(H=le-ce),te=H;te>=0;te--){for(var be=!0,he=0;he<ce;he++)if(pe(V,te+he)!==pe(j,he)){be=!1;break}if(be)return te}return-1}function d(V,j,H,oe){H=Number(H)||0;var U=V.length-H;oe?(oe=Number(oe))>U&&(oe=U):oe=U;var te=j.length;oe>te/2&&(oe=te/2);for(var ee=0;ee<oe;++ee){var le=parseInt(j.substr(2*ee,2),16);if(se(le))return ee;V[H+ee]=le}return ee}function h(V,j,H,oe){return X(K(j,V.length-H),V,H,oe)}function a(V,j,H,oe){return X(function(U){for(var te=[],ee=0;ee<U.length;++ee)te.push(255&U.charCodeAt(ee));return te}(j),V,H,oe)}function _(V,j,H,oe){return a(V,j,H,oe)}function c(V,j,H,oe){return X(ne(j),V,H,oe)}function T(V,j,H,oe){return X(function(U,te){for(var ee,le,pe=[],de=0;de<U.length&&!((te-=2)<0);++de)le=(ee=U.charCodeAt(de))>>8,pe.push(ee%256),pe.push(le);return pe}(j,V.length-H),V,H,oe)}function x(V,j,H){return g.fromByteArray(0===j&&H===V.length?V:V.slice(j,H))}function w(V,j,H){H=Math.min(V.length,H);for(var oe=[],U=j;U<H;){var te,ee,le,ce,pe=V[U],de=null,be=pe>239?4:pe>223?3:pe>191?2:1;if(U+be<=H)switch(be){case 1:pe<128&&(de=pe);break;case 2:128==(192&(te=V[U+1]))&&(ce=(31&pe)<<6|63&te)>127&&(de=ce);break;case 3:ee=V[U+2],128==(192&(te=V[U+1]))&&128==(192&ee)&&(ce=(15&pe)<<12|(63&te)<<6|63&ee)>2047&&(ce<55296||ce>57343)&&(de=ce);break;case 4:ee=V[U+2],le=V[U+3],128==(192&(te=V[U+1]))&&128==(192&ee)&&128==(192&le)&&(ce=(15&pe)<<18|(63&te)<<12|(63&ee)<<6|63&le)>65535&&ce<1114112&&(de=ce)}null===de?(de=65533,be=1):de>65535&&(oe.push((de-=65536)>>>10&1023|55296),de=56320|1023&de),oe.push(de),U+=be}return function(he){var xe=he.length;if(xe<=4096)return String.fromCharCode.apply(String,he);for(var De="",Se=0;Se<xe;)De+=String.fromCharCode.apply(String,he.slice(Se,Se+=4096));return De}(oe)}function M(V,j,H){var oe="";H=Math.min(V.length,H);for(var U=j;U<H;++U)oe+=String.fromCharCode(127&V[U]);return oe}function D(V,j,H){var oe="";H=Math.min(V.length,H);for(var U=j;U<H;++U)oe+=String.fromCharCode(V[U]);return oe}function C(V,j,H){var oe=V.length;(!j||j<0)&&(j=0),(!H||H<0||H>oe)&&(H=oe);for(var U="",te=j;te<H;++te)U+=G(V[te]);return U}function P(V,j,H){for(var oe=V.slice(j,H),U="",te=0;te<oe.length;te+=2)U+=String.fromCharCode(oe[te]+256*oe[te+1]);return U}function L(V,j,H){if(V%1!=0||V<0)throw new RangeError("offset is not uint");if(V+j>H)throw new RangeError("Trying to access beyond buffer length")}function S(V,j,H,oe,U,te){if(!e.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(j>U||j<te)throw new RangeError('"value" argument is out of bounds');if(H+oe>V.length)throw new RangeError("Index out of range")}function E(V,j,H,oe,U,te){if(H+oe>V.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function N(V,j,H,oe,U){return j=+j,H>>>=0,U||E(V,0,H,4),b.write(V,j,H,oe,23,4),H+4}function z(V,j,H,oe,U){return j=+j,H>>>=0,U||E(V,0,H,8),b.write(V,j,H,oe,52,8),H+8}ie.Buffer=e,ie.SlowBuffer=function(V){return+V!=V&&(V=0),e.alloc(+V)},ie.INSPECT_MAX_BYTES=50,ie.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var V=new Uint8Array(1);return V.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===V.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(V,j,H){return r(V,j,H)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(V,j,H){return U=j,te=H,t(oe=V),oe<=0?y(oe):void 0!==U?"string"==typeof te?y(oe).fill(U,te):y(oe).fill(U):y(oe);var oe,U,te},e.allocUnsafe=function(V){return o(V)},e.allocUnsafeSlow=function(V){return o(V)},e.isBuffer=function(V){return null!=V&&!0===V._isBuffer&&V!==e.prototype},e.compare=function(V,j){if(J(V,Uint8Array)&&(V=e.from(V,V.offset,V.byteLength)),J(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),!e.isBuffer(V)||!e.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===j)return 0;for(var H=V.length,oe=j.length,U=0,te=Math.min(H,oe);U<te;++U)if(V[U]!==j[U]){H=V[U],oe=j[U];break}return H<oe?-1:oe<H?1:0},e.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(V,j){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(0===V.length)return e.alloc(0);var H;if(void 0===j)for(j=0,H=0;H<V.length;++H)j+=V[H].length;var oe=e.allocUnsafe(j),U=0;for(H=0;H<V.length;++H){var te=V[H];if(J(te,Uint8Array)&&(te=e.from(te)),!e.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(oe,U),U+=te.length}return oe},e.byteLength=l,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var V=this.length;if(V%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var j=0;j<V;j+=2)f(this,j,j+1);return this},e.prototype.swap32=function(){var V=this.length;if(V%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var j=0;j<V;j+=4)f(this,j,j+3),f(this,j+1,j+2);return this},e.prototype.swap64=function(){var V=this.length;if(V%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var j=0;j<V;j+=8)f(this,j,j+7),f(this,j+1,j+6),f(this,j+2,j+5),f(this,j+3,j+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var V=this.length;return 0===V?"":0===arguments.length?w(this,0,V):i.apply(this,arguments)},e.prototype.equals=function(V){if(!e.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V||0===e.compare(this,V)},e.prototype.inspect=function(){var V="",j=ie.INSPECT_MAX_BYTES;return V=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(V+=" ... "),"<Buffer "+V+">"},e.prototype.compare=function(V,j,H,oe,U){if(J(V,Uint8Array)&&(V=e.from(V,V.offset,V.byteLength)),!e.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(void 0===j&&(j=0),void 0===H&&(H=V?V.length:0),void 0===oe&&(oe=0),void 0===U&&(U=this.length),j<0||H>V.length||oe<0||U>this.length)throw new RangeError("out of range index");if(oe>=U&&j>=H)return 0;if(oe>=U)return-1;if(j>=H)return 1;if(this===V)return 0;for(var te=(U>>>=0)-(oe>>>=0),ee=(H>>>=0)-(j>>>=0),le=Math.min(te,ee),ce=this.slice(oe,U),pe=V.slice(j,H),de=0;de<le;++de)if(ce[de]!==pe[de]){te=ce[de],ee=pe[de];break}return te<ee?-1:ee<te?1:0},e.prototype.includes=function(V,j,H){return-1!==this.indexOf(V,j,H)},e.prototype.indexOf=function(V,j,H){return u(this,V,j,H,!0)},e.prototype.lastIndexOf=function(V,j,H){return u(this,V,j,H,!1)},e.prototype.write=function(V,j,H,oe){if(void 0===j)oe="utf8",H=this.length,j=0;else if(void 0===H&&"string"==typeof j)oe=j,H=this.length,j=0;else{if(!isFinite(j))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");j>>>=0,isFinite(H)?(H>>>=0,void 0===oe&&(oe="utf8")):(oe=H,H=void 0)}var U=this.length-j;if((void 0===H||H>U)&&(H=U),V.length>0&&(H<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");for(var te=!1;;)switch(oe){case"hex":return d(this,V,j,H);case"utf8":case"utf-8":return h(this,V,j,H);case"ascii":return a(this,V,j,H);case"latin1":case"binary":return _(this,V,j,H);case"base64":return c(this,V,j,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,V,j,H);default:if(te)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),te=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(V,j){var H=this.length;(V=~~V)<0?(V+=H)<0&&(V=0):V>H&&(V=H),(j=void 0===j?H:~~j)<0?(j+=H)<0&&(j=0):j>H&&(j=H),j<V&&(j=V);var oe=this.subarray(V,j);return oe.__proto__=e.prototype,oe},e.prototype.readUIntLE=function(V,j,H){V>>>=0,j>>>=0,H||L(V,j,this.length);for(var oe=this[V],U=1,te=0;++te<j&&(U*=256);)oe+=this[V+te]*U;return oe},e.prototype.readUIntBE=function(V,j,H){V>>>=0,j>>>=0,H||L(V,j,this.length);for(var oe=this[V+--j],U=1;j>0&&(U*=256);)oe+=this[V+--j]*U;return oe},e.prototype.readUInt8=function(V,j){return V>>>=0,j||L(V,1,this.length),this[V]},e.prototype.readUInt16LE=function(V,j){return V>>>=0,j||L(V,2,this.length),this[V]|this[V+1]<<8},e.prototype.readUInt16BE=function(V,j){return V>>>=0,j||L(V,2,this.length),this[V]<<8|this[V+1]},e.prototype.readUInt32LE=function(V,j){return V>>>=0,j||L(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+16777216*this[V+3]},e.prototype.readUInt32BE=function(V,j){return V>>>=0,j||L(V,4,this.length),16777216*this[V]+(this[V+1]<<16|this[V+2]<<8|this[V+3])},e.prototype.readIntLE=function(V,j,H){V>>>=0,j>>>=0,H||L(V,j,this.length);for(var oe=this[V],U=1,te=0;++te<j&&(U*=256);)oe+=this[V+te]*U;return oe>=(U*=128)&&(oe-=Math.pow(2,8*j)),oe},e.prototype.readIntBE=function(V,j,H){V>>>=0,j>>>=0,H||L(V,j,this.length);for(var oe=j,U=1,te=this[V+--oe];oe>0&&(U*=256);)te+=this[V+--oe]*U;return te>=(U*=128)&&(te-=Math.pow(2,8*j)),te},e.prototype.readInt8=function(V,j){return V>>>=0,j||L(V,1,this.length),128&this[V]?-1*(255-this[V]+1):this[V]},e.prototype.readInt16LE=function(V,j){V>>>=0,j||L(V,2,this.length);var H=this[V]|this[V+1]<<8;return 32768&H?4294901760|H:H},e.prototype.readInt16BE=function(V,j){V>>>=0,j||L(V,2,this.length);var H=this[V+1]|this[V]<<8;return 32768&H?4294901760|H:H},e.prototype.readInt32LE=function(V,j){return V>>>=0,j||L(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},e.prototype.readInt32BE=function(V,j){return V>>>=0,j||L(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},e.prototype.readFloatLE=function(V,j){return V>>>=0,j||L(V,4,this.length),b.read(this,V,!0,23,4)},e.prototype.readFloatBE=function(V,j){return V>>>=0,j||L(V,4,this.length),b.read(this,V,!1,23,4)},e.prototype.readDoubleLE=function(V,j){return V>>>=0,j||L(V,8,this.length),b.read(this,V,!0,52,8)},e.prototype.readDoubleBE=function(V,j){return V>>>=0,j||L(V,8,this.length),b.read(this,V,!1,52,8)},e.prototype.writeUIntLE=function(V,j,H,oe){V=+V,j>>>=0,H>>>=0,oe||S(this,V,j,H,Math.pow(2,8*H)-1,0);var U=1,te=0;for(this[j]=255&V;++te<H&&(U*=256);)this[j+te]=V/U&255;return j+H},e.prototype.writeUIntBE=function(V,j,H,oe){V=+V,j>>>=0,H>>>=0,oe||S(this,V,j,H,Math.pow(2,8*H)-1,0);var U=H-1,te=1;for(this[j+U]=255&V;--U>=0&&(te*=256);)this[j+U]=V/te&255;return j+H},e.prototype.writeUInt8=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,1,255,0),this[j]=255&V,j+1},e.prototype.writeUInt16LE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,2,65535,0),this[j]=255&V,this[j+1]=V>>>8,j+2},e.prototype.writeUInt16BE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,2,65535,0),this[j]=V>>>8,this[j+1]=255&V,j+2},e.prototype.writeUInt32LE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,4,4294967295,0),this[j+3]=V>>>24,this[j+2]=V>>>16,this[j+1]=V>>>8,this[j]=255&V,j+4},e.prototype.writeUInt32BE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,4,4294967295,0),this[j]=V>>>24,this[j+1]=V>>>16,this[j+2]=V>>>8,this[j+3]=255&V,j+4},e.prototype.writeIntLE=function(V,j,H,oe){if(V=+V,j>>>=0,!oe){var U=Math.pow(2,8*H-1);S(this,V,j,H,U-1,-U)}var te=0,ee=1,le=0;for(this[j]=255&V;++te<H&&(ee*=256);)V<0&&0===le&&0!==this[j+te-1]&&(le=1),this[j+te]=(V/ee>>0)-le&255;return j+H},e.prototype.writeIntBE=function(V,j,H,oe){if(V=+V,j>>>=0,!oe){var U=Math.pow(2,8*H-1);S(this,V,j,H,U-1,-U)}var te=H-1,ee=1,le=0;for(this[j+te]=255&V;--te>=0&&(ee*=256);)V<0&&0===le&&0!==this[j+te+1]&&(le=1),this[j+te]=(V/ee>>0)-le&255;return j+H},e.prototype.writeInt8=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,1,127,-128),V<0&&(V=255+V+1),this[j]=255&V,j+1},e.prototype.writeInt16LE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,2,32767,-32768),this[j]=255&V,this[j+1]=V>>>8,j+2},e.prototype.writeInt16BE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,2,32767,-32768),this[j]=V>>>8,this[j+1]=255&V,j+2},e.prototype.writeInt32LE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,4,2147483647,-2147483648),this[j]=255&V,this[j+1]=V>>>8,this[j+2]=V>>>16,this[j+3]=V>>>24,j+4},e.prototype.writeInt32BE=function(V,j,H){return V=+V,j>>>=0,H||S(this,V,j,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[j]=V>>>24,this[j+1]=V>>>16,this[j+2]=V>>>8,this[j+3]=255&V,j+4},e.prototype.writeFloatLE=function(V,j,H){return N(this,V,j,!0,H)},e.prototype.writeFloatBE=function(V,j,H){return N(this,V,j,!1,H)},e.prototype.writeDoubleLE=function(V,j,H){return z(this,V,j,!0,H)},e.prototype.writeDoubleBE=function(V,j,H){return z(this,V,j,!1,H)},e.prototype.copy=function(V,j,H,oe){if(!e.isBuffer(V))throw new TypeError("argument should be a Buffer");if(H||(H=0),oe||0===oe||(oe=this.length),j>=V.length&&(j=V.length),j||(j=0),oe>0&&oe<H&&(oe=H),oe===H||0===V.length||0===this.length)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),V.length-j<oe-H&&(oe=V.length-j+H);var U=oe-H;if(this===V&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(j,H,oe);else if(this===V&&H<j&&j<oe)for(var te=U-1;te>=0;--te)V[te+j]=this[te+H];else Uint8Array.prototype.set.call(V,this.subarray(H,oe),j);return U},e.prototype.fill=function(V,j,H,oe){if("string"==typeof V){if("string"==typeof j?(oe=j,j=0,H=this.length):"string"==typeof H&&(oe=H,H=this.length),void 0!==oe&&"string"!=typeof oe)throw new TypeError("encoding must be a string");if("string"==typeof oe&&!e.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(1===V.length){var U=V.charCodeAt(0);("utf8"===oe&&U<128||"latin1"===oe)&&(V=U)}}else"number"==typeof V&&(V&=255);if(j<0||this.length<j||this.length<H)throw new RangeError("Out of range index");if(H<=j)return this;var te;if(j>>>=0,H=void 0===H?this.length:H>>>0,V||(V=0),"number"==typeof V)for(te=j;te<H;++te)this[te]=V;else{var ee=e.isBuffer(V)?V:e.from(V,oe),le=ee.length;if(0===le)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(te=0;te<H-j;++te)this[te+j]=ee[te%le]}return this};var q=/[^+/0-9A-Za-z-_]/g;function G(V){return V<16?"0"+V.toString(16):V.toString(16)}function K(V,j){var H;j=j||1/0;for(var oe=V.length,U=null,te=[],ee=0;ee<oe;++ee){if((H=V.charCodeAt(ee))>55295&&H<57344){if(!U){if(H>56319){(j-=3)>-1&&te.push(239,191,189);continue}if(ee+1===oe){(j-=3)>-1&&te.push(239,191,189);continue}U=H;continue}if(H<56320){(j-=3)>-1&&te.push(239,191,189),U=H;continue}H=65536+(U-55296<<10|H-56320)}else U&&(j-=3)>-1&&te.push(239,191,189);if(U=null,H<128){if((j-=1)<0)break;te.push(H)}else if(H<2048){if((j-=2)<0)break;te.push(H>>6|192,63&H|128)}else if(H<65536){if((j-=3)<0)break;te.push(H>>12|224,H>>6&63|128,63&H|128)}else{if(!(H<1114112))throw new Error("Invalid code point");if((j-=4)<0)break;te.push(H>>18|240,H>>12&63|128,H>>6&63|128,63&H|128)}}return te}function ne(V){return g.toByteArray(function(j){if((j=(j=j.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;j.length%4!=0;)j+="=";return j}(V))}function X(V,j,H,oe){for(var U=0;U<oe&&!(U+H>=j.length||U>=V.length);++U)j[U+H]=V[U];return U}function J(V,j){return V instanceof j||null!=V&&null!=V.constructor&&null!=V.constructor.name&&V.constructor.name===j.name}function se(V){return V!=V}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(v,ae,ie){ae.exports=function(p,g,b){return g<b?p<g?g:p>b?b:p:p<b?b:p>g?g:p}},{}],87:[function(v,ae,ie){"use strict";var p=v("clamp");function g(b,y){null==y&&(y=!0);var e=b[0],r=b[1],t=b[2],o=b[3];return null==o&&(o=y?1:255),y&&(e*=255,r*=255,t*=255,o*=255),16777216*(e=255&p(e,0,255))+((r=255&p(r,0,255))<<16)+((t=255&p(t,0,255))<<8)+(255&p(o,0,255))}ae.exports=g,ae.exports.to=g,ae.exports.from=function(b,y){var e=(b=+b)>>>24,r=(16711680&b)>>>16,t=(65280&b)>>>8,o=255&b;return!1===y?[e,r,t,o]:[e/255,r/255,t/255,o/255]}},{clamp:86}],88:[function(v,ae,ie){"use strict";ae.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(v,ae,ie){"use strict";var p=v("color-rgba"),g=v("clamp"),b=v("dtype");ae.exports=function(y,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var o,r=new(b(e))(4),t="uint8"!==e&&"uint8_clamped"!==e;return y.length&&"string"!=typeof y||((y=p(y))[0]/=255,y[1]/=255,y[2]/=255),(o=y)instanceof Uint8Array||o instanceof Uint8ClampedArray||Array.isArray(o)&&(o[0]>1||0===o[0])&&(o[1]>1||0===o[1])&&(o[2]>1||0===o[2])&&(!o[3]||o[3]>1)?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=null!=y[3]?y[3]:255,t&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(t?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=null!=y[3]?y[3]:1):(r[0]=g(Math.floor(255*y[0]),0,255),r[1]=g(Math.floor(255*y[1]),0,255),r[2]=g(Math.floor(255*y[2]),0,255),r[3]=null==y[3]?255:g(Math.floor(255*y[3]),0,255)),r)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(v,ae,ie){(function(p){(function(){"use strict";var g=v("color-name"),b=v("is-plain-obj"),y=v("defined");ae.exports=function(r){var t,o,n=[],m=1;if("string"==typeof r)if(g[r])n=g[r].slice(),o="rgb";else if("transparent"===r)m=0,o="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var l=(u=r.slice(1)).length;m=1,l<=4?(n=[parseInt(u[0]+u[0],16),parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16)],4===l&&(m=parseInt(u[3]+u[3],16)/255)):(n=[parseInt(u[0]+u[1],16),parseInt(u[2]+u[3],16),parseInt(u[4]+u[5],16)],8===l&&(m=parseInt(u[6]+u[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),o="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var i=t[1],f="rgb"===i,u=i.replace(/a$/,"");o=u,l="cmyk"===u?4:"gray"===u?1:3,n=t[2].trim().split(/\s*,\s*/).map(function(d,h){if(/%$/.test(d))return h===l?parseFloat(d)/100:"rgb"===u?255*parseFloat(d)/100:parseFloat(d);if("h"===u[h]){if(/deg$/.test(d))return parseFloat(d);if(void 0!==e[d])return e[d]}return parseFloat(d)}),i===u&&n.push(1),m=f||void 0===n[l]?1:n[l],n=n.slice(0,l)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(n=r.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),o=r.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(r))if(b(r)){var s=y(r.r,r.red,r.R,null);null!==s?(o="rgb",n=[s,y(r.g,r.green,r.G),y(r.b,r.blue,r.B)]):(o="hsl",n=[y(r.h,r.hue,r.H),y(r.s,r.saturation,r.S),y(r.l,r.lightness,r.L,r.b,r.brightness)]),m=y(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(m/=100)}else(Array.isArray(r)||p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(n=[r[0],r[1],r[2]],o="rgb",m=4===r.length?r[3]:1);else o="rgb",n=[r>>>16,(65280&r)>>>8,255&r];return{space:o,values:n,alpha:m}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(v,ae,ie){"use strict";var p=v("color-parse"),g=v("color-space/hsl"),b=v("clamp");ae.exports=function(y){var e,r=p(y);return r.space?((e=Array(3))[0]=b(r.values[0],0,255),e[1]=b(r.values[1],0,255),e[2]=b(r.values[2],0,255),"h"===r.space[0]&&(e=g.rgb(e)),e.push(b(r.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(v,ae,ie){"use strict";var p=v("./rgb");ae.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(g){var b,y,e,r,t,o=g[0]/360,n=g[1]/100,m=g[2]/100;if(0===n)return[t=255*m,t,t];b=2*m-(y=m<.5?m*(1+n):m+n-m*n),r=[0,0,0];for(var l=0;l<3;l++)(e=o+1/3*-(l-1))<0?e++:e>1&&e--,r[l]=255*(t=6*e<1?b+6*(y-b)*e:2*e<1?y:3*e<2?b+(y-b)*(2/3-e)*6:b);return r}},p.hsl=function(g){var b,y,e=g[0]/255,r=g[1]/255,t=g[2]/255,o=Math.min(e,r,t),n=Math.max(e,r,t),m=n-o;return n===o?b=0:e===n?b=(r-t)/m:r===n?b=2+(t-e)/m:t===n&&(b=4+(e-r)/m),(b=Math.min(60*b,360))<0&&(b+=360),y=(o+n)/2,[b,100*(n===o?0:y<=.5?m/(n+o):m/(2-n-o)),100*y]}},{"./rgb":93}],93:[function(v,ae,ie){"use strict";ae.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(v,ae,ie){ae.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(v,ae,ie){ae.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(v,ae,ie){ae.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(v,ae,ie){ae.exports=["normal","italic","oblique"]},{}],98:[function(v,ae,ie){ae.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(v,ae,ie){"use strict";ae.exports={parse:v("./parse"),stringify:v("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(v,ae,ie){"use strict";var p=v("css-font-size-keywords");ae.exports={isSize:function(g){return/^[\d\.]/.test(g)||-1!==g.indexOf("/")||-1!==p.indexOf(g)}}},{"css-font-size-keywords":95}],101:[function(v,ae,ie){"use strict";var p=v("unquote"),g=v("css-global-keywords"),b=v("css-system-font-keywords"),y=v("css-font-weight-keywords"),e=v("css-font-style-keywords"),r=v("css-font-stretch-keywords"),t=v("string-split-by"),o=v("./lib/util").isSize;ae.exports=m;var n=m.cache={};function m(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(n[i])return n[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==b.indexOf(i))return n[i]={system:i};for(var f,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},s=t(i,/\s+/);f=s.shift();){if(-1!==g.indexOf(f))return["style","variant","weight","stretch"].forEach(function(h){u[h]=f}),n[i]=u;if(-1===e.indexOf(f))if("normal"!==f&&"small-caps"!==f)if(-1===r.indexOf(f)){if(-1===y.indexOf(f)){if(o(f)){var d=t(f,"/");if(u.size=d[0],null!=d[1]?u.lineHeight=l(d[1]):"/"===s[0]&&(s.shift(),u.lineHeight=l(s.shift())),!s.length)throw new Error("Missing required font-family.");return u.family=t(s.join(" "),/\s*,\s*/).map(p),n[i]=u}throw new Error("Unknown or unsupported font token: "+f)}u.weight=f}else u.stretch=f;else u.variant=f;else u.style=f}throw new Error("Missing required font-size.")}function l(i){var f=parseFloat(i);return f.toString()===i?f:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(v,ae,ie){"use strict";var p=v("pick-by-alias"),g=v("./lib/util").isSize,b=f(v("css-global-keywords")),y=f(v("css-system-font-keywords")),e=f(v("css-font-weight-keywords")),r=f(v("css-font-style-keywords")),t=f(v("css-font-stretch-keywords")),o={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},l="serif";function i(u,s){if(u&&!s[u]&&!b[u])throw Error("Unknown keyword `"+u+"`");return u}function f(u){for(var s={},d=0;d<u.length;d++)s[u[d]]=1;return s}ae.exports=function(u){if((u=p(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return u.system&&i(u.system,y),u.system;if(i(u.style,r),i(u.variant,o),i(u.weight,e),i(u.stretch,t),null==u.size&&(u.size="1rem"),"number"==typeof u.size&&(u.size+="px"),!g)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=l),Array.isArray(u.family)&&(u.family.length||(u.family=[l]),u.family=u.family.map(function(d){return n[d]?d:'"'+d+'"'}).join(", "));var s=[];return s.push(u.style),u.variant!==u.style&&s.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&s.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&s.push(u.stretch),s.push(u.size+(null==u.lineHeight||"normal"===u.lineHeight||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),s.push(u.family),s.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(v,ae,ie){ae.exports=["inherit","initial","unset"]},{}],104:[function(v,ae,ie){ae.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(v,ae,ie){"use strict";var p,g=v("type/value/is"),b=v("type/value/ensure"),y=v("type/plain-function/ensure"),e=v("es5-ext/object/copy"),r=v("es5-ext/object/normalize-options"),t=v("es5-ext/object/map"),o=Function.prototype.bind,n=Object.defineProperty,m=Object.prototype.hasOwnProperty;p=function(l,i,f){var u,s=b(i)&&y(i.value);return delete(u=e(i)).writable,delete u.value,u.get=function(){return!f.overwriteDefinition&&m.call(this,l)?s:(i.value=o.call(s,f.resolveContext?f.resolveContext(this):this),n(this,l,i),this[l])},u},ae.exports=function(l){var i=r(arguments[1]);return g(i.resolveContext)&&y(i.resolveContext),t(l,function(f,u){return p(u,f,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(v,ae,ie){"use strict";var p=v("type/value/is"),g=v("type/plain-function/is"),b=v("es5-ext/object/assign"),y=v("es5-ext/object/normalize-options"),e=v("es5-ext/string/#/contains");(ae.exports=function(r,t){var o,n,m,l,i;return arguments.length<2||"string"!=typeof r?(l=t,t=r,r=null):l=arguments[2],p(r)?(o=e.call(r,"c"),n=e.call(r,"e"),m=e.call(r,"w")):(o=m=!0,n=!1),i={value:t,configurable:o,enumerable:n,writable:m},l?b(y(l),i):i}).gs=function(r,t,o){var n,m,l,i;return"string"!=typeof r?(l=o,o=t,t=r,r=null):l=arguments[3],p(t)?g(t)?p(o)?g(o)||(l=o,o=void 0):o=void 0:(l=t,t=o=void 0):t=void 0,p(r)?(n=e.call(r,"c"),m=e.call(r,"e")):(n=!0,m=!1),i={get:t,set:o,configurable:n,enumerable:m},l?b(y(l),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(v,ae,ie){var g;g=function(p){"use strict";function g(L,S){return L<S?-1:L>S?1:L>=S?0:NaN}function b(L){var S;return 1===L.length&&(S=L,L=function(E,N){return g(S(E),N)}),{left:function(E,N,z,q){for(null==z&&(z=0),null==q&&(q=E.length);z<q;){var G=z+q>>>1;L(E[G],N)<0?z=G+1:q=G}return z},right:function(E,N,z,q){for(null==z&&(z=0),null==q&&(q=E.length);z<q;){var G=z+q>>>1;L(E[G],N)>0?q=G:z=G+1}return z}}}var y=b(g),e=y.right,r=y.left;function t(L,S){return[L,S]}function o(L){return null===L?NaN:+L}function n(L,S){var E,N,z=L.length,q=0,G=-1,K=0,ne=0;if(null==S)for(;++G<z;)isNaN(E=o(L[G]))||(ne+=(N=E-K)*(E-(K+=N/++q)));else for(;++G<z;)isNaN(E=o(S(L[G],G,L)))||(ne+=(N=E-K)*(E-(K+=N/++q)));if(q>1)return ne/(q-1)}function m(L,S){var E=n(L,S);return E&&Math.sqrt(E)}function l(L,S){var E,N,z,q=L.length,G=-1;if(null==S){for(;++G<q;)if(null!=(E=L[G])&&E>=E)for(N=z=E;++G<q;)null!=(E=L[G])&&(N>E&&(N=E),z<E&&(z=E))}else for(;++G<q;)if(null!=(E=S(L[G],G,L))&&E>=E)for(N=z=E;++G<q;)null!=(E=S(L[G],G,L))&&(N>E&&(N=E),z<E&&(z=E));return[N,z]}var i=Array.prototype,f=i.slice,u=i.map;function s(L){return function(){return L}}function d(L){return L}function h(L,S,E){L=+L,S=+S,E=(z=arguments.length)<2?(S=L,L=0,1):z<3?1:+E;for(var N=-1,z=0|Math.max(0,Math.ceil((S-L)/E)),q=new Array(z);++N<z;)q[N]=L+N*E;return q}var a=Math.sqrt(50),_=Math.sqrt(10),c=Math.sqrt(2);function T(L,S,E){var N=(S-L)/Math.max(0,E),z=Math.floor(Math.log(N)/Math.LN10),q=N/Math.pow(10,z);return z>=0?(q>=a?10:q>=_?5:q>=c?2:1)*Math.pow(10,z):-Math.pow(10,-z)/(q>=a?10:q>=_?5:q>=c?2:1)}function x(L,S,E){var N=Math.abs(S-L)/Math.max(0,E),z=Math.pow(10,Math.floor(Math.log(N)/Math.LN10)),q=N/z;return q>=a?z*=10:q>=_?z*=5:q>=c&&(z*=2),S<L?-z:z}function w(L){return Math.ceil(Math.log(L.length)/Math.LN2)+1}function M(L,S,E){if(null==E&&(E=o),N=L.length){if((S=+S)<=0||N<2)return+E(L[0],0,L);if(S>=1)return+E(L[N-1],N-1,L);var N,z=(N-1)*S,q=Math.floor(z),G=+E(L[q],q,L);return G+(+E(L[q+1],q+1,L)-G)*(z-q)}}function D(L,S){var E,N,z=L.length,q=-1;if(null==S){for(;++q<z;)if(null!=(E=L[q])&&E>=E)for(N=E;++q<z;)null!=(E=L[q])&&N>E&&(N=E)}else for(;++q<z;)if(null!=(E=S(L[q],q,L))&&E>=E)for(N=E;++q<z;)null!=(E=S(L[q],q,L))&&N>E&&(N=E);return N}function C(L){if(!(z=L.length))return[];for(var S=-1,E=D(L,P),N=new Array(E);++S<E;)for(var z,q=-1,G=N[S]=new Array(z);++q<z;)G[q]=L[q][S];return N}function P(L){return L.length}p.bisect=e,p.bisectRight=e,p.bisectLeft=r,p.ascending=g,p.bisector=b,p.cross=function(L,S,E){var N,z,q,G,K=L.length,ne=S.length,X=new Array(K*ne);for(null==E&&(E=t),N=q=0;N<K;++N)for(G=L[N],z=0;z<ne;++z,++q)X[q]=E(G,S[z]);return X},p.descending=function(L,S){return S<L?-1:S>L?1:S>=L?0:NaN},p.deviation=m,p.extent=l,p.histogram=function(){var L=d,S=l,E=w;function N(z){var q,G,K=z.length,ne=new Array(K);for(q=0;q<K;++q)ne[q]=L(z[q],q,z);var X=S(ne),J=X[0],se=X[1],V=E(ne,J,se);Array.isArray(V)||(V=x(J,se,V),V=h(Math.ceil(J/V)*V,se,V));for(var j=V.length;V[0]<=J;)V.shift(),--j;for(;V[j-1]>se;)V.pop(),--j;var H,oe=new Array(j+1);for(q=0;q<=j;++q)(H=oe[q]=[]).x0=q>0?V[q-1]:J,H.x1=q<j?V[q]:se;for(q=0;q<K;++q)J<=(G=ne[q])&&G<=se&&oe[e(V,G,0,j)].push(z[q]);return oe}return N.value=function(z){return arguments.length?(L="function"==typeof z?z:s(z),N):L},N.domain=function(z){return arguments.length?(S="function"==typeof z?z:s([z[0],z[1]]),N):S},N.thresholds=function(z){return arguments.length?(E="function"==typeof z?z:Array.isArray(z)?s(f.call(z)):s(z),N):E},N},p.thresholdFreedmanDiaconis=function(L,S,E){return L=u.call(L,o).sort(g),Math.ceil((E-S)/(2*(M(L,.75)-M(L,.25))*Math.pow(L.length,-1/3)))},p.thresholdScott=function(L,S,E){return Math.ceil((E-S)/(3.5*m(L)*Math.pow(L.length,-1/3)))},p.thresholdSturges=w,p.max=function(L,S){var E,N,z=L.length,q=-1;if(null==S){for(;++q<z;)if(null!=(E=L[q])&&E>=E)for(N=E;++q<z;)null!=(E=L[q])&&E>N&&(N=E)}else for(;++q<z;)if(null!=(E=S(L[q],q,L))&&E>=E)for(N=E;++q<z;)null!=(E=S(L[q],q,L))&&E>N&&(N=E);return N},p.mean=function(L,S){var E,N=L.length,z=N,q=-1,G=0;if(null==S)for(;++q<N;)isNaN(E=o(L[q]))?--z:G+=E;else for(;++q<N;)isNaN(E=o(S(L[q],q,L)))?--z:G+=E;if(z)return G/z},p.median=function(L,S){var E,N=L.length,z=-1,q=[];if(null==S)for(;++z<N;)isNaN(E=o(L[z]))||q.push(E);else for(;++z<N;)isNaN(E=o(S(L[z],z,L)))||q.push(E);return M(q.sort(g),.5)},p.merge=function(L){for(var S,E,N,z=L.length,q=-1,G=0;++q<z;)G+=L[q].length;for(E=new Array(G);--z>=0;)for(S=(N=L[z]).length;--S>=0;)E[--G]=N[S];return E},p.min=D,p.pairs=function(L,S){null==S&&(S=t);for(var E=0,N=L.length-1,z=L[0],q=new Array(N<0?0:N);E<N;)q[E]=S(z,z=L[++E]);return q},p.permute=function(L,S){for(var E=S.length,N=new Array(E);E--;)N[E]=L[S[E]];return N},p.quantile=M,p.range=h,p.scan=function(L,S){if(E=L.length){var E,N,z=0,q=0,G=L[q];for(null==S&&(S=g);++z<E;)(S(N=L[z],G)<0||0!==S(G,G))&&(G=N,q=z);return 0===S(G,G)?q:void 0}},p.shuffle=function(L,S,E){for(var N,z,q=(E??L.length)-(S=null==S?0:+S);q;)z=Math.random()*q--|0,N=L[q+S],L[q+S]=L[z+S],L[z+S]=N;return L},p.sum=function(L,S){var E,N=L.length,z=-1,q=0;if(null==S)for(;++z<N;)(E=+L[z])&&(q+=E);else for(;++z<N;)(E=+S(L[z],z,L))&&(q+=E);return q},p.ticks=function(L,S,E){var N,z,q,G,K=-1;if(E=+E,(L=+L)==(S=+S)&&E>0)return[L];if((N=S<L)&&(z=L,L=S,S=z),0===(G=T(L,S,E))||!isFinite(G))return[];if(G>0)for(L=Math.ceil(L/G),S=Math.floor(S/G),q=new Array(z=Math.ceil(S-L+1));++K<z;)q[K]=(L+K)*G;else for(L=Math.floor(L*G),S=Math.ceil(S*G),q=new Array(z=Math.ceil(L-S+1));++K<z;)q[K]=(L-K)/G;return N&&q.reverse(),q},p.tickIncrement=T,p.tickStep=x,p.transpose=C,p.variance=n,p.zip=function(){return C(arguments)},Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:this.d3=this.d3||{})},{}],108:[function(v,ae,ie){var g;g=function(p){"use strict";function g(){}function b(l,i){var f=new g;if(l instanceof g)l.each(function(a,_){f.set(_,a)});else if(Array.isArray(l)){var u,s=-1,d=l.length;if(null==i)for(;++s<d;)f.set(s,l[s]);else for(;++s<d;)f.set(i(u=l[s],s,l),u)}else if(l)for(var h in l)f.set(h,l[h]);return f}function y(){return{}}function e(l,i,f){l[i]=f}function r(){return b()}function t(l,i,f){l.set(i,f)}function o(){}g.prototype=b.prototype={constructor:g,has:function(l){return"$"+l in this},get:function(l){return this["$"+l]},set:function(l,i){return this["$"+l]=i,this},remove:function(l){var i="$"+l;return i in this&&delete this[i]},clear:function(){for(var l in this)"$"===l[0]&&delete this[l]},keys:function(){var l=[];for(var i in this)"$"===i[0]&&l.push(i.slice(1));return l},values:function(){var l=[];for(var i in this)"$"===i[0]&&l.push(this[i]);return l},entries:function(){var l=[];for(var i in this)"$"===i[0]&&l.push({key:i.slice(1),value:this[i]});return l},size:function(){var l=0;for(var i in this)"$"===i[0]&&++l;return l},empty:function(){for(var l in this)if("$"===l[0])return!1;return!0},each:function(l){for(var i in this)"$"===i[0]&&l(this[i],i.slice(1),this)}};var n=b.prototype;function m(l,i){var f=new o;if(l instanceof o)l.each(function(d){f.add(d)});else if(l){var u=-1,s=l.length;if(null==i)for(;++u<s;)f.add(l[u]);else for(;++u<s;)f.add(i(l[u],u,l))}return f}o.prototype=m.prototype={constructor:o,has:n.has,add:function(l){return this["$"+(l+="")]=l,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each},p.nest=function(){var l,i,f,u=[],s=[];function d(h,a,_,c){if(a>=u.length)return null!=l&&h.sort(l),null!=i?i(h):h;for(var T,x,w,M=-1,D=h.length,C=u[a++],P=b(),L=_();++M<D;)(w=P.get(T=C(x=h[M])+""))?w.push(x):P.set(T,[x]);return P.each(function(S,E){c(L,E,d(S,a,_,c))}),L}return f={object:function(h){return d(h,0,y,e)},map:function(h){return d(h,0,r,t)},entries:function(h){return function a(_,c){if(++c>u.length)return _;var T,x=s[c-1];return null!=i&&c>=u.length?T=_.entries():(T=[],_.each(function(w,M){T.push({key:M,values:a(w,c)})})),null!=x?T.sort(function(w,M){return x(w.key,M.key)}):T}(d(h,0,r,t),0)},key:function(h){return u.push(h),f},sortKeys:function(h){return s[u.length-1]=h,f},sortValues:function(h){return l=h,f},rollup:function(h){return i=h,f}}},p.set=m,p.map=b,p.keys=function(l){var i=[];for(var f in l)i.push(f);return i},p.values=function(l){var i=[];for(var f in l)i.push(l[f]);return i},p.entries=function(l){var i=[];for(var f in l)i.push({key:f,value:l[f]});return i},Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:this.d3=this.d3||{})},{}],109:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";function g(ve,Te,Le){ve.prototype=Te.prototype=Le,Le.constructor=ve}function b(ve,Te){var Le=Object.create(ve.prototype);for(var Oe in Te)Le[Oe]=Te[Oe];return Le}function y(){}var e="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o=/^#([0-9a-f]{3,8})$/,n=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),m=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),l=new RegExp("^rgba\\("+[e,e,e,r]+"\\)$"),i=new RegExp("^rgba\\("+[t,t,t,r]+"\\)$"),f=new RegExp("^hsl\\("+[r,t,t]+"\\)$"),u=new RegExp("^hsla\\("+[r,t,t,r]+"\\)$"),s={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function d(){return this.rgb().formatHex()}function h(){return this.rgb().formatRgb()}function a(ve){var Te,Le;return ve=(ve+"").trim().toLowerCase(),(Te=o.exec(ve))?(Le=Te[1].length,Te=parseInt(Te[1],16),6===Le?_(Te):3===Le?new w(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===Le?c(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===Le?c(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=n.exec(ve))?new w(Te[1],Te[2],Te[3],1):(Te=m.exec(ve))?new w(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=l.exec(ve))?c(Te[1],Te[2],Te[3],Te[4]):(Te=i.exec(ve))?c(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=f.exec(ve))?P(Te[1],Te[2]/100,Te[3]/100,1):(Te=u.exec(ve))?P(Te[1],Te[2]/100,Te[3]/100,Te[4]):s.hasOwnProperty(ve)?_(s[ve]):"transparent"===ve?new w(NaN,NaN,NaN,0):null}function _(ve){return new w(ve>>16&255,ve>>8&255,255&ve,1)}function c(ve,Te,Le,Oe){return Oe<=0&&(ve=Te=Le=NaN),new w(ve,Te,Le,Oe)}function T(ve){return ve instanceof y||(ve=a(ve)),ve?new w((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new w}function x(ve,Te,Le,Oe){return 1===arguments.length?T(ve):new w(ve,Te,Le,Oe??1)}function w(ve,Te,Le,Oe){this.r=+ve,this.g=+Te,this.b=+Le,this.opacity=+Oe}function M(){return"#"+C(this.r)+C(this.g)+C(this.b)}function D(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ve?")":", "+ve+")")}function C(ve){return((ve=Math.max(0,Math.min(255,Math.round(ve)||0)))<16?"0":"")+ve.toString(16)}function P(ve,Te,Le,Oe){return Oe<=0?ve=Te=Le=NaN:Le<=0||Le>=1?ve=Te=NaN:Te<=0&&(ve=NaN),new E(ve,Te,Le,Oe)}function L(ve){if(ve instanceof E)return new E(ve.h,ve.s,ve.l,ve.opacity);if(ve instanceof y||(ve=a(ve)),!ve)return new E;if(ve instanceof E)return ve;var Te=(ve=ve.rgb()).r/255,Le=ve.g/255,Oe=ve.b/255,Ne=Math.min(Te,Le,Oe),Be=Math.max(Te,Le,Oe),He=NaN,Ve=Be-Ne,it=(Be+Ne)/2;return Ve?(He=Te===Be?(Le-Oe)/Ve+6*(Le<Oe):Le===Be?(Oe-Te)/Ve+2:(Te-Le)/Ve+4,Ve/=it<.5?Be+Ne:2-Be-Ne,He*=60):Ve=it>0&&it<1?0:He,new E(He,Ve,it,ve.opacity)}function S(ve,Te,Le,Oe){return 1===arguments.length?L(ve):new E(ve,Te,Le,Oe??1)}function E(ve,Te,Le,Oe){this.h=+ve,this.s=+Te,this.l=+Le,this.opacity=+Oe}function N(ve,Te,Le){return 255*(ve<60?Te+(Le-Te)*ve/60:ve<180?Le:ve<240?Te+(Le-Te)*(240-ve)/60:Te)}g(y,a,{copy:function(ve){return Object.assign(new this.constructor,this,ve)},displayable:function(){return this.rgb().displayable()},hex:d,formatHex:d,formatHsl:function(){return L(this).formatHsl()},formatRgb:h,toString:h}),g(w,x,b(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new w(this.r*ve,this.g*ve,this.b*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new w(this.r*ve,this.g*ve,this.b*ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:D,toString:D})),g(E,S,b(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new E(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new E(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=this.h%360+360*(this.h<0),Te=isNaN(ve)||isNaN(this.s)?0:this.s,Le=this.l,Oe=Le+(Le<.5?Le:1-Le)*Te,Ne=2*Le-Oe;return new w(N(ve>=240?ve-240:ve+120,Ne,Oe),N(ve,Ne,Oe),N(ve<120?ve+240:ve-120,Ne,Oe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ve?")":", "+ve+")")}}));var z=Math.PI/180,q=180/Math.PI,G=6/29,K=3*G*G;function ne(ve){if(ve instanceof J)return new J(ve.l,ve.a,ve.b,ve.opacity);if(ve instanceof te)return ee(ve);ve instanceof w||(ve=T(ve));var Te,Le,Oe=H(ve.r),Ne=H(ve.g),Be=H(ve.b),He=se((.2225045*Oe+.7168786*Ne+.0606169*Be)/1);return Oe===Ne&&Ne===Be?Te=Le=He:(Te=se((.4360747*Oe+.3850649*Ne+.1430804*Be)/.96422),Le=se((.0139322*Oe+.0971045*Ne+.7141733*Be)/.82521)),new J(116*He-16,500*(Te-He),200*(He-Le),ve.opacity)}function X(ve,Te,Le,Oe){return 1===arguments.length?ne(ve):new J(ve,Te,Le,Oe??1)}function J(ve,Te,Le,Oe){this.l=+ve,this.a=+Te,this.b=+Le,this.opacity=+Oe}function se(ve){return ve>.008856451679035631?Math.pow(ve,1/3):ve/K+4/29}function V(ve){return ve>G?ve*ve*ve:K*(ve-4/29)}function j(ve){return 255*(ve<=.0031308?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055)}function H(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function oe(ve){if(ve instanceof te)return new te(ve.h,ve.c,ve.l,ve.opacity);if(ve instanceof J||(ve=ne(ve)),0===ve.a&&0===ve.b)return new te(NaN,0<ve.l&&ve.l<100?0:NaN,ve.l,ve.opacity);var Te=Math.atan2(ve.b,ve.a)*q;return new te(Te<0?Te+360:Te,Math.sqrt(ve.a*ve.a+ve.b*ve.b),ve.l,ve.opacity)}function U(ve,Te,Le,Oe){return 1===arguments.length?oe(ve):new te(ve,Te,Le,Oe??1)}function te(ve,Te,Le,Oe){this.h=+ve,this.c=+Te,this.l=+Le,this.opacity=+Oe}function ee(ve){if(isNaN(ve.h))return new J(ve.l,0,0,ve.opacity);var Te=ve.h*z;return new J(ve.l,Math.cos(Te)*ve.c,Math.sin(Te)*ve.c,ve.opacity)}g(J,X,b(y,{brighter:function(ve){return new J(this.l+18*(ve??1),this.a,this.b,this.opacity)},darker:function(ve){return new J(this.l-18*(ve??1),this.a,this.b,this.opacity)},rgb:function(){var ve=(this.l+16)/116,Te=isNaN(this.a)?ve:ve+this.a/500,Le=isNaN(this.b)?ve:ve-this.b/200;return new w(j(3.1338561*(Te=.96422*V(Te))-1.6168667*(ve=1*V(ve))-.4906146*(Le=.82521*V(Le))),j(-.9787684*Te+1.9161415*ve+.033454*Le),j(.0719453*Te-.2289914*ve+1.4052427*Le),this.opacity)}})),g(te,U,b(y,{brighter:function(ve){return new te(this.h,this.c,this.l+18*(ve??1),this.opacity)},darker:function(ve){return new te(this.h,this.c,this.l-18*(ve??1),this.opacity)},rgb:function(){return ee(this).rgb()}}));var ce=1.78277,pe=-.29227,de=-.90649,be=1.97294,he=be*de,xe=be*ce,De=ce*pe- -.14861*de;function Se(ve){if(ve instanceof Fe)return new Fe(ve.h,ve.s,ve.l,ve.opacity);ve instanceof w||(ve=T(ve));var Le=ve.g/255,Oe=ve.b/255,Ne=(De*Oe+he*(ve.r/255)-xe*Le)/(De+he-xe),Be=Oe-Ne,He=(be*(Le-Ne)-pe*Be)/de,Ve=Math.sqrt(He*He+Be*Be)/(be*Ne*(1-Ne)),it=Ve?Math.atan2(He,Be)*q-120:NaN;return new Fe(it<0?it+360:it,Ve,Ne,ve.opacity)}function ke(ve,Te,Le,Oe){return 1===arguments.length?Se(ve):new Fe(ve,Te,Le,Oe??1)}function Fe(ve,Te,Le,Oe){this.h=+ve,this.s=+Te,this.l=+Le,this.opacity=+Oe}g(Fe,ke,b(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new Fe(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new Fe(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=isNaN(this.h)?0:(this.h+120)*z,Te=+this.l,Le=isNaN(this.s)?0:this.s*Te*(1-Te),Oe=Math.cos(ve),Ne=Math.sin(ve);return new w(255*(Te+Le*(-.14861*Oe+ce*Ne)),255*(Te+Le*(pe*Oe+de*Ne)),255*(Te+Le*(be*Oe)),this.opacity)}})),p.color=a,p.cubehelix=ke,p.gray=function(ve,Te){return new J(ve,0,0,Te??1)},p.hcl=U,p.hsl=S,p.lab=X,p.lch=function(ve,Te,Le,Oe){return 1===arguments.length?oe(ve):new te(Le,Te,ve,Oe??1)},p.rgb=x,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],110:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";var g={value:function(){}};function b(){for(var o,n=0,m=arguments.length,l={};n<m;++n){if(!(o=arguments[n]+"")||o in l||/[\s.]/.test(o))throw new Error("illegal type: "+o);l[o]=[]}return new y(l)}function y(o){this._=o}function e(o,n){return o.trim().split(/^|\s+/).map(function(m){var l="",i=m.indexOf(".");if(i>=0&&(l=m.slice(i+1),m=m.slice(0,i)),m&&!n.hasOwnProperty(m))throw new Error("unknown type: "+m);return{type:m,name:l}})}function r(o,n){for(var m,l=0,i=o.length;l<i;++l)if((m=o[l]).name===n)return m.value}function t(o,n,m){for(var l=0,i=o.length;l<i;++l)if(o[l].name===n){o[l]=g,o=o.slice(0,l).concat(o.slice(l+1));break}return null!=m&&o.push({name:n,value:m}),o}y.prototype=b.prototype={constructor:y,on:function(o,n){var m,l=this._,i=e(o+"",l),f=-1,u=i.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++f<u;)if(m=(o=i[f]).type)l[m]=t(l[m],o.name,n);else if(null==n)for(m in l)l[m]=t(l[m],o.name,null);return this}for(;++f<u;)if((m=(o=i[f]).type)&&(m=r(l[m],o.name)))return m},copy:function(){var o={},n=this._;for(var m in n)o[m]=n[m].slice();return new y(o)},call:function(o,n){if((m=arguments.length-2)>0)for(var m,l,i=new Array(m),f=0;f<m;++f)i[f]=arguments[f+2];if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(f=0,m=(l=this._[o]).length;f<m;++f)l[f].value.apply(n,i)},apply:function(o,n,m){if(!this._.hasOwnProperty(o))throw new Error("unknown type: "+o);for(var l=this._[o],i=0,f=l.length;i<f;++i)l[i].value.apply(n,m)}},p.dispatch=b,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],111:[function(v,ae,ie){var p,g;p=this,g=function(p,g,b,y,e){"use strict";function r(s){return function(){return s}}function t(){return 1e-6*(Math.random()-.5)}function o(s){return s.x+s.vx}function n(s){return s.y+s.vy}function m(s){return s.index}function l(s,d){var h=s.get(d);if(!h)throw new Error("missing: "+d);return h}function i(s){return s.x}function f(s){return s.y}var u=Math.PI*(3-Math.sqrt(5));p.forceCenter=function(s,d){var h;function a(){var _,c,T=h.length,x=0,w=0;for(_=0;_<T;++_)x+=(c=h[_]).x,w+=c.y;for(x=x/T-s,w=w/T-d,_=0;_<T;++_)(c=h[_]).x-=x,c.y-=w}return null==s&&(s=0),null==d&&(d=0),a.initialize=function(_){h=_},a.x=function(_){return arguments.length?(s=+_,a):s},a.y=function(_){return arguments.length?(d=+_,a):d},a},p.forceCollide=function(s){var d,h,a=1,_=1;function c(){for(var w,M,D,C,P,L,S,E=d.length,N=0;N<_;++N)for(M=g.quadtree(d,o,n).visitAfter(T),w=0;w<E;++w)S=(L=h[(D=d[w]).index])*L,C=D.x+D.vx,P=D.y+D.vy,M.visit(z);function z(q,G,K,ne,X){var J=q.data,se=q.r,V=L+se;if(!J)return G>C+V||ne<C-V||K>P+V||X<P-V;if(J.index>D.index){var j=C-J.x-J.vx,H=P-J.y-J.vy,oe=j*j+H*H;oe<V*V&&(0===j&&(oe+=(j=t())*j),0===H&&(oe+=(H=t())*H),oe=(V-(oe=Math.sqrt(oe)))/oe*a,D.vx+=(j*=oe)*(V=(se*=se)/(S+se)),D.vy+=(H*=oe)*V,J.vx-=j*(V=1-V),J.vy-=H*V)}}}function T(w){if(w.data)return w.r=h[w.data.index];for(var M=w.r=0;M<4;++M)w[M]&&w[M].r>w.r&&(w.r=w[M].r)}function x(){if(d){var w,M,D=d.length;for(h=new Array(D),w=0;w<D;++w)h[(M=d[w]).index]=+s(M,w,d)}}return"function"!=typeof s&&(s=r(null==s?1:+s)),c.initialize=function(w){d=w,x()},c.iterations=function(w){return arguments.length?(_=+w,c):_},c.strength=function(w){return arguments.length?(a=+w,c):a},c.radius=function(w){return arguments.length?(s="function"==typeof w?w:r(+w),x(),c):s},c},p.forceLink=function(s){var d,h,a,_,c,T=m,x=function(S){return 1/Math.min(_[S.source.index],_[S.target.index])},w=r(30),M=1;function D(S){for(var E=0,N=s.length;E<M;++E)for(var z,q,G,K,ne,X,J,se=0;se<N;++se)q=(z=s[se]).source,K=(G=z.target).x+G.vx-q.x-q.vx||t(),ne=G.y+G.vy-q.y-q.vy||t(),K*=X=((X=Math.sqrt(K*K+ne*ne))-h[se])/X*S*d[se],ne*=X,G.vx-=K*(J=c[se]),G.vy-=ne*J,q.vx+=K*(J=1-J),q.vy+=ne*J}function C(){if(a){var S,E,N=a.length,z=s.length,q=b.map(a,T);for(S=0,_=new Array(N);S<z;++S)(E=s[S]).index=S,"object"!=typeof E.source&&(E.source=l(q,E.source)),"object"!=typeof E.target&&(E.target=l(q,E.target)),_[E.source.index]=(_[E.source.index]||0)+1,_[E.target.index]=(_[E.target.index]||0)+1;for(S=0,c=new Array(z);S<z;++S)c[S]=_[(E=s[S]).source.index]/(_[E.source.index]+_[E.target.index]);d=new Array(z),P(),h=new Array(z),L()}}function P(){if(a)for(var S=0,E=s.length;S<E;++S)d[S]=+x(s[S],S,s)}function L(){if(a)for(var S=0,E=s.length;S<E;++S)h[S]=+w(s[S],S,s)}return null==s&&(s=[]),D.initialize=function(S){a=S,C()},D.links=function(S){return arguments.length?(s=S,C(),D):s},D.id=function(S){return arguments.length?(T=S,D):T},D.iterations=function(S){return arguments.length?(M=+S,D):M},D.strength=function(S){return arguments.length?(x="function"==typeof S?S:r(+S),P(),D):x},D.distance=function(S){return arguments.length?(w="function"==typeof S?S:r(+S),L(),D):w},D},p.forceManyBody=function(){var s,d,h,a,_=r(-30),c=1,T=1/0,x=.81;function w(P){var L,S=s.length,E=g.quadtree(s,i,f).visitAfter(D);for(h=P,L=0;L<S;++L)d=s[L],E.visit(C)}function M(){if(s){var P,L,S=s.length;for(a=new Array(S),P=0;P<S;++P)a[(L=s[P]).index]=+_(L,P,s)}}function D(P){var L,S,E,N,z,q=0,G=0;if(P.length){for(E=N=z=0;z<4;++z)(L=P[z])&&(S=Math.abs(L.value))&&(q+=L.value,G+=S,E+=S*L.x,N+=S*L.y);P.x=E/G,P.y=N/G}else{(L=P).x=L.data.x,L.y=L.data.y;do{q+=a[L.data.index]}while(L=L.next)}P.value=q}function C(P,L,S,E){if(!P.value)return!0;var N=P.x-d.x,z=P.y-d.y,q=E-L,G=N*N+z*z;if(q*q/x<G)return G<T&&(0===N&&(G+=(N=t())*N),0===z&&(G+=(z=t())*z),G<c&&(G=Math.sqrt(c*G)),d.vx+=N*P.value*h/G,d.vy+=z*P.value*h/G),!0;if(!(P.length||G>=T)){(P.data!==d||P.next)&&(0===N&&(G+=(N=t())*N),0===z&&(G+=(z=t())*z),G<c&&(G=Math.sqrt(c*G)));do{P.data!==d&&(d.vx+=N*(q=a[P.data.index]*h/G),d.vy+=z*q)}while(P=P.next)}}return w.initialize=function(P){s=P,M()},w.strength=function(P){return arguments.length?(_="function"==typeof P?P:r(+P),M(),w):_},w.distanceMin=function(P){return arguments.length?(c=P*P,w):Math.sqrt(c)},w.distanceMax=function(P){return arguments.length?(T=P*P,w):Math.sqrt(T)},w.theta=function(P){return arguments.length?(x=P*P,w):Math.sqrt(x)},w},p.forceRadial=function(s,d,h){var a,_,c,T=r(.1);function x(M){for(var D=0,C=a.length;D<C;++D){var P=a[D],L=P.x-d||1e-6,S=P.y-h||1e-6,E=Math.sqrt(L*L+S*S),N=(c[D]-E)*_[D]*M/E;P.vx+=L*N,P.vy+=S*N}}function w(){if(a){var M,D=a.length;for(_=new Array(D),c=new Array(D),M=0;M<D;++M)c[M]=+s(a[M],M,a),_[M]=isNaN(c[M])?0:+T(a[M],M,a)}}return"function"!=typeof s&&(s=r(+s)),null==d&&(d=0),null==h&&(h=0),x.initialize=function(M){a=M,w()},x.strength=function(M){return arguments.length?(T="function"==typeof M?M:r(+M),w(),x):T},x.radius=function(M){return arguments.length?(s="function"==typeof M?M:r(+M),w(),x):s},x.x=function(M){return arguments.length?(d=+M,x):d},x.y=function(M){return arguments.length?(h=+M,x):h},x},p.forceSimulation=function(s){var d,h=1,a=.001,_=1-Math.pow(a,1/300),c=0,T=.6,x=b.map(),w=e.timer(D),M=y.dispatch("tick","end");function D(){C(),M.call("tick",d),h<a&&(w.stop(),M.call("end",d))}function C(S){var E,N,z=s.length;void 0===S&&(S=1);for(var q=0;q<S;++q)for(h+=(c-h)*_,x.each(function(G){G(h)}),E=0;E<z;++E)null==(N=s[E]).fx?N.x+=N.vx*=T:(N.x=N.fx,N.vx=0),null==N.fy?N.y+=N.vy*=T:(N.y=N.fy,N.vy=0);return d}function P(){for(var S,E=0,N=s.length;E<N;++E){if((S=s[E]).index=E,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var z=10*Math.sqrt(E),q=E*u;S.x=z*Math.cos(q),S.y=z*Math.sin(q)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function L(S){return S.initialize&&S.initialize(s),S}return null==s&&(s=[]),P(),d={tick:C,restart:function(){return w.restart(D),d},stop:function(){return w.stop(),d},nodes:function(S){return arguments.length?(s=S,P(),x.each(L),d):s},alpha:function(S){return arguments.length?(h=+S,d):h},alphaMin:function(S){return arguments.length?(a=+S,d):a},alphaDecay:function(S){return arguments.length?(_=+S,d):+_},alphaTarget:function(S){return arguments.length?(c=+S,d):c},velocityDecay:function(S){return arguments.length?(T=1-S,d):1-T},force:function(S,E){return arguments.length>1?(null==E?x.remove(S):x.set(S,L(E)),d):x.get(S)},find:function(S,E,N){var z,q,G,K,ne,X=0,J=s.length;for(null==N?N=1/0:N*=N,X=0;X<J;++X)(G=(z=S-(K=s[X]).x)*z+(q=E-K.y)*q)<N&&(ne=K,N=G);return ne},on:function(S,E){return arguments.length>1?(M.on(S,E),d):M.on(S)}}},p.forceX=function(s){var d,h,a,_=r(.1);function c(x){for(var w,M=0,D=d.length;M<D;++M)(w=d[M]).vx+=(a[M]-w.x)*h[M]*x}function T(){if(d){var x,w=d.length;for(h=new Array(w),a=new Array(w),x=0;x<w;++x)h[x]=isNaN(a[x]=+s(d[x],x,d))?0:+_(d[x],x,d)}}return"function"!=typeof s&&(s=r(null==s?0:+s)),c.initialize=function(x){d=x,T()},c.strength=function(x){return arguments.length?(_="function"==typeof x?x:r(+x),T(),c):_},c.x=function(x){return arguments.length?(s="function"==typeof x?x:r(+x),T(),c):s},c},p.forceY=function(s){var d,h,a,_=r(.1);function c(x){for(var w,M=0,D=d.length;M<D;++M)(w=d[M]).vy+=(a[M]-w.y)*h[M]*x}function T(){if(d){var x,w=d.length;for(h=new Array(w),a=new Array(w),x=0;x<w;++x)h[x]=isNaN(a[x]=+s(d[x],x,d))?0:+_(d[x],x,d)}}return"function"!=typeof s&&(s=r(null==s?0:+s)),c.initialize=function(x){d=x,T()},c.strength=function(x){return arguments.length?(_="function"==typeof x?x:r(+x),T(),c):_},c.y=function(x){return arguments.length?(s="function"==typeof x?x:r(+x),T(),c):s},c},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-quadtree"),v("d3-collection"),v("d3-dispatch"),v("d3-timer")):g(p.d3=p.d3||{},p.d3,p.d3,p.d3,p.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";function g(d,h){if((a=(d=h?d.toExponential(h-1):d.toExponential()).indexOf("e"))<0)return null;var a,_=d.slice(0,a);return[_.length>1?_[0]+_.slice(2):_,+d.slice(a+1)]}function b(d){return(d=g(Math.abs(d)))?d[1]:NaN}var y,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(d){if(!(h=e.exec(d)))throw new Error("invalid format: "+d);var h;return new t({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function t(d){this.fill=void 0===d.fill?" ":d.fill+"",this.align=void 0===d.align?">":d.align+"",this.sign=void 0===d.sign?"-":d.sign+"",this.symbol=void 0===d.symbol?"":d.symbol+"",this.zero=!!d.zero,this.width=void 0===d.width?void 0:+d.width,this.comma=!!d.comma,this.precision=void 0===d.precision?void 0:+d.precision,this.trim=!!d.trim,this.type=void 0===d.type?"":d.type+""}function o(d,h){var a=g(d,h);if(!a)return d+"";var _=a[0],c=a[1];return c<0?"0."+new Array(-c).join("0")+_:_.length>c+1?_.slice(0,c+1)+"."+_.slice(c+1):_+new Array(c-_.length+2).join("0")}r.prototype=t.prototype,t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var n={"%":function(d,h){return(100*d).toFixed(h)},b:function(d){return Math.round(d).toString(2)},c:function(d){return d+""},d:function(d){return Math.abs(d=Math.round(d))>=1e21?d.toLocaleString("en").replace(/,/g,""):d.toString(10)},e:function(d,h){return d.toExponential(h)},f:function(d,h){return d.toFixed(h)},g:function(d,h){return d.toPrecision(h)},o:function(d){return Math.round(d).toString(8)},p:function(d,h){return o(100*d,h)},r:o,s:function(d,h){var a=g(d,h);if(!a)return d+"";var _=a[0],c=a[1],T=c-(y=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1,x=_.length;return T===x?_:T>x?_+new Array(T-x+1).join("0"):T>0?_.slice(0,T)+"."+_.slice(T):"0."+new Array(1-T).join("0")+g(d,Math.max(0,h+T-1))[0]},X:function(d){return Math.round(d).toString(16).toUpperCase()},x:function(d){return Math.round(d).toString(16)}};function m(d){return d}var l,i=Array.prototype.map,f=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function u(d){var h,a,L,_=void 0===d.grouping||void 0===d.thousands?m:(h=i.call(d.grouping,Number),a=d.thousands+"",function(L,S){for(var E=L.length,N=[],z=0,q=h[0],G=0;E>0&&q>0&&(G+q+1>S&&(q=Math.max(1,S-G)),N.push(L.substring(E-=q,E+q)),!((G+=q+1)>S));)q=h[z=(z+1)%h.length];return N.reverse().join(a)}),c=void 0===d.currency?"":d.currency[0]+"",T=void 0===d.currency?"":d.currency[1]+"",x=void 0===d.decimal?".":d.decimal+"",w=void 0===d.numerals?m:(L=i.call(d.numerals,String),function(S){return S.replace(/[0-9]/g,function(E){return L[+E]})}),M=void 0===d.percent?"%":d.percent+"",D=void 0===d.minus?"-":d.minus+"",C=void 0===d.nan?"NaN":d.nan+"";function P(L){var S=(L=r(L)).fill,E=L.align,N=L.sign,z=L.symbol,q=L.zero,G=L.width,K=L.comma,ne=L.precision,X=L.trim,J=L.type;"n"===J?(K=!0,J="g"):n[J]||(void 0===ne&&(ne=12),X=!0,J="g"),(q||"0"===S&&"="===E)&&(q=!0,S="0",E="=");var se="$"===z?c:"#"===z&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",V="$"===z?T:/[%p]/.test(J)?M:"",j=n[J],H=/[defgprs%]/.test(J);function oe(U){var te,ee,le,ce=se,pe=V;if("c"===J)pe=j(U)+pe,U="";else{var de=(U=+U)<0||1/U<0;if(U=isNaN(U)?C:j(Math.abs(U),ne),X&&(U=function(xe){e:for(var De,Se=xe.length,ke=1,Fe=-1;ke<Se;++ke)switch(xe[ke]){case".":Fe=De=ke;break;case"0":0===Fe&&(Fe=ke),De=ke;break;default:if(!+xe[ke])break e;Fe>0&&(Fe=0)}return Fe>0?xe.slice(0,Fe)+xe.slice(De+1):xe}(U)),de&&0==+U&&"+"!==N&&(de=!1),ce=(de?"("===N?N:D:"-"===N||"("===N?"":N)+ce,pe=("s"===J?f[8+y/3]:"")+pe+(de&&"("===N?")":""),H)for(te=-1,ee=U.length;++te<ee;)if(48>(le=U.charCodeAt(te))||le>57){pe=(46===le?x+U.slice(te+1):U.slice(te))+pe,U=U.slice(0,te);break}}K&&!q&&(U=_(U,1/0));var be=ce.length+U.length+pe.length,he=be<G?new Array(G-be+1).join(S):"";switch(K&&q&&(U=_(he+U,he.length?G-pe.length:1/0),he=""),E){case"<":U=ce+U+pe+he;break;case"=":U=ce+he+U+pe;break;case"^":U=he.slice(0,be=he.length>>1)+ce+U+pe+he.slice(be);break;default:U=he+ce+U+pe}return w(U)}return ne=void 0===ne?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne)),oe.toString=function(){return L+""},oe}return{format:P,formatPrefix:function(L,S){var E=P(((L=r(L)).type="f",L)),N=3*Math.max(-8,Math.min(8,Math.floor(b(S)/3))),z=Math.pow(10,-N),q=f[8+N/3];return function(G){return E(z*G)+q}}}}function s(d){return l=u(d),p.format=l.format,p.formatPrefix=l.formatPrefix,l}s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),p.FormatSpecifier=t,p.formatDefaultLocale=s,p.formatLocale=u,p.formatSpecifier=r,p.precisionFixed=function(d){return Math.max(0,-b(Math.abs(d)))},p.precisionPrefix=function(d,h){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(b(h)/3)))-b(Math.abs(d)))},p.precisionRound=function(d,h){return d=Math.abs(d),h=Math.abs(h)-d,Math.max(0,b(h)-b(d))+1},Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=typeof globalThis<"u"?globalThis:p||self).d3=p.d3||{})},{}],113:[function(v,ae,ie){var p,g;p=this,g=function(p,g,b){"use strict";var y=Math.abs,e=Math.atan,r=Math.atan2,t=Math.cos,o=Math.exp,n=Math.floor,m=Math.log,l=Math.max,i=Math.min,f=Math.pow,u=Math.round,s=Math.sign||function(We){return We>0?1:We<0?-1:0},d=Math.sin,h=Math.tan,a=1e-6,_=Math.PI,c=_/2,T=_/4,x=Math.SQRT1_2,w=E(2),M=E(_),D=2*_,C=180/_,P=_/180;function L(We){return We>1?c:We<-1?-c:Math.asin(We)}function S(We){return We>1?0:We<-1?_:Math.acos(We)}function E(We){return We>0?Math.sqrt(We):0}function N(We){return(o(We)-o(-We))/2}function z(We){return(o(We)+o(-We))/2}function q(We){var tt=h(We/2),ut=2*m(t(We/2))/(tt*tt);function yt(kt,Mt){var Ft=t(kt),ln=t(Mt),un=d(Mt),an=ln*Ft,vn=-((1-an?m((1+an)/2)/(1-an):-.5)+ut/(1+an));return[vn*ln*d(kt),vn*un]}return yt.invert=function(kt,Mt){var Ft,ln=E(kt*kt+Mt*Mt),un=-We/2,an=50;if(!ln)return[0,0];do{var vn=un/2,Dn=t(vn),Nn=d(vn),Fn=Nn/Dn,$n=-m(y(Dn));un-=Ft=(2/Fn*$n-ut*Fn-ln)/(-$n/(Nn*Nn)+1-ut/(2*Dn*Dn))*(Dn<0?.7:1)}while(y(Ft)>a&&--an>0);var wr=d(un);return[r(kt*wr,ln*t(un)),L(Mt*wr/ln)]},yt}function G(We,tt){var kt,ut=t(tt),yt=(kt=S(ut*t(We/=2)))?kt/Math.sin(kt):1;return[2*ut*d(We)*yt,d(tt)*yt]}function K(We){var tt=d(We),ut=t(We),yt=We>=0?1:-1,kt=h(yt*We),Mt=(1+tt-ut)/2;function Ft(ln,un){var an=t(un),vn=t(ln/=2);return[(1+an)*d(ln),(yt*un>-r(vn,kt)-.001?0:10*-yt)+Mt+d(un)*ut-(1+an)*tt*vn]}return Ft.invert=function(ln,un){var an=0,vn=0,Dn=50;do{var Nn=t(an),Fn=d(an),$n=t(vn),wr=d(vn),Lr=1+$n,Zr=Lr*Fn-ln,Qr=Mt+wr*ut-Lr*tt*Nn-un,Kr=Lr*Nn/2,$r=-Fn*wr,Li=tt*Lr*Fn/2,Gi=ut*$n+tt*Nn*wr,ia=$r*Li-Gi*Kr,Wi=(Qr*$r-Zr*Gi)/ia/2,aa=(Zr*Li-Qr*Kr)/ia;y(aa)>2&&(aa/=2),an-=Wi,vn-=aa}while((y(Wi)>a||y(aa)>a)&&--Dn>0);return yt*vn>-r(t(an),kt)-.001?[2*an,vn]:null},Ft}function ne(We,tt){var ut=h(tt/2),yt=E(1-ut*ut),kt=1+yt*t(We/=2),Mt=d(We)*yt/kt,Ft=ut/kt,ln=Mt*Mt,un=Ft*Ft;return[4/3*Mt*(3+ln-3*un),4/3*Ft*(3+3*ln-un)]}G.invert=function(We,tt){if(!(We*We+4*tt*tt>_*_+a)){var ut=We,yt=tt,kt=25;do{var Mt,Ft=d(ut),ln=d(ut/2),un=t(ut/2),an=d(yt),vn=t(yt),Dn=d(2*yt),Nn=an*an,Fn=vn*vn,$n=ln*ln,wr=1-Fn*un*un,Lr=wr?S(vn*un)*E(Mt=1/wr):Mt=0,Zr=2*Lr*vn*ln-We,Qr=Lr*an-tt,Kr=Mt*(Fn*$n+Lr*vn*un*Nn),$r=Mt*(.5*Ft*Dn-2*Lr*an*ln),Li=.25*Mt*(Dn*ln-Lr*an*Fn*Ft),Gi=Mt*(Nn*un+Lr*$n*vn),ia=$r*Li-Gi*Kr;if(!ia)break;var Wi=(Qr*$r-Zr*Gi)/ia,aa=(Zr*Li-Qr*Kr)/ia;ut-=Wi,yt-=aa}while((y(Wi)>a||y(aa)>a)&&--kt>0);return[ut,yt]}},ne.invert=function(We,tt){if(tt*=3/8,!(We*=3/8)&&y(tt)>1)return null;var an,ut=1+We*We+tt*tt,yt=E((ut-E(ut*ut-4*tt*tt))/2),kt=L(yt)/3,Mt=yt?(an=y(tt/yt),m(an+E(an*an-1))/3):function(an){return m(an+E(an*an+1))}(y(We))/3,Ft=t(kt),ln=z(Mt),un=ln*ln-Ft*Ft;return[2*s(We)*r(N(Mt)*Ft,.25-un),2*s(tt)*r(ln*d(kt),.25+un)]};var X=E(8),J=m(1+w);function se(We,tt){var ut=y(tt);return ut<T?[We,m(h(T+tt/2))]:[We*t(ut)*(2*w-1/d(ut)),s(tt)*(2*w*(ut-T)-m(h(ut/2)))]}function V(We){var tt=2*_/We;function ut(yt,kt){var Mt=g.geoAzimuthalEquidistantRaw(yt,kt);if(y(yt)>c){var Ft=r(Mt[1],Mt[0]),ln=E(Mt[0]*Mt[0]+Mt[1]*Mt[1]),un=tt*u((Ft-c)/tt)+c,an=r(d(Ft-=un),2-t(Ft));Ft=un+L(_/ln*d(an))-an,Mt[0]=ln*t(Ft),Mt[1]=ln*d(Ft)}return Mt}return ut.invert=function(yt,kt){var Mt=E(yt*yt+kt*kt);if(Mt>c){var Ft=r(kt,yt),ln=tt*u((Ft-c)/tt)+c,un=Ft>ln?-1:1,an=Mt*t(ln-Ft),vn=1/h(un*S((an-_)/E(_*(_-2*an)+Mt*Mt)));Ft=ln+2*e((vn+un*E(vn*vn-3))/3),yt=Mt*t(Ft),kt=Mt*d(Ft)}return g.geoAzimuthalEquidistantRaw.invert(yt,kt)},ut}function j(We,tt){if(arguments.length<2&&(tt=We),1===tt)return g.geoAzimuthalEqualAreaRaw;if(tt===1/0)return H;function ut(yt,kt){var Mt=g.geoAzimuthalEqualAreaRaw(yt/tt,kt);return Mt[0]*=We,Mt}return ut.invert=function(yt,kt){var Mt=g.geoAzimuthalEqualAreaRaw.invert(yt/We,kt);return Mt[0]*=tt,Mt},ut}function H(We,tt){return[We*t(tt)/t(tt/=2),2*d(tt)]}function oe(We,tt,ut){var yt,kt,Mt,Ft=100;ut=void 0===ut?0:+ut,tt=+tt;do{(kt=We(ut))===(Mt=We(ut+a))&&(Mt=kt+a),ut-=yt=-1*a*(kt-tt)/(kt-Mt)}while(Ft-- >0&&y(yt)>a);return Ft<0?NaN:ut}function U(We,tt,ut){return void 0===tt&&(tt=40),void 0===ut&&(ut=1e-12),function(yt,kt,Mt,Ft){var ln,un,an;Mt=void 0===Mt?0:+Mt,Ft=void 0===Ft?0:+Ft;for(var vn=0;vn<tt;vn++){var Dn=We(Mt,Ft),Nn=Dn[0]-yt,Fn=Dn[1]-kt;if(y(Nn)<ut&&y(Fn)<ut)break;var $n=Nn*Nn+Fn*Fn;if($n>ln)Mt-=un/=2,Ft-=an/=2;else{ln=$n;var wr=(Mt>0?-1:1)*ut,Lr=(Ft>0?-1:1)*ut,Zr=We(Mt+wr,Ft),Qr=We(Mt,Ft+Lr),Kr=(Zr[0]-Dn[0])/wr,$r=(Zr[1]-Dn[1])/wr,Li=(Qr[0]-Dn[0])/Lr,Gi=(Qr[1]-Dn[1])/Lr,ia=Gi*Kr-$r*Li,Wi=(y(ia)<.5?.5:1)/ia;if(Mt+=un=(Fn*Li-Nn*Gi)*Wi,Ft+=an=(Nn*$r-Fn*Kr)*Wi,y(un)<ut&&y(an)<ut)break}}return[Mt,Ft]}}function te(){var We=j(1.68,2);function tt(ut,yt){if(ut+yt<-1.4){var kt=(ut-yt+1.6)*(ut+yt+1.4)/8;ut+=kt,yt-=.8*kt*d(yt+_/2)}var Mt=We(ut,yt),Ft=(1-t(ut*yt))/12;return Mt[1]<0&&(Mt[0]*=1+Ft),Mt[1]>0&&(Mt[1]*=1+Ft/1.5*Mt[0]*Mt[0]),Mt}return tt.invert=U(tt),tt}function ee(We,tt){var ut,yt=We*d(tt),kt=30;do{tt-=ut=(tt+d(tt)-yt)/(1+t(tt))}while(y(ut)>a&&--kt>0);return tt/2}function le(We,tt,ut){function yt(kt,Mt){return[We*kt*t(Mt=ee(ut,Mt)),tt*d(Mt)]}return yt.invert=function(kt,Mt){return Mt=L(Mt/tt),[kt/(We*t(Mt)),L((2*Mt+d(2*Mt))/ut)]},yt}se.invert=function(We,tt){if((yt=y(tt))<J)return[We,2*e(o(tt))-c];var ut,yt,kt=T,Mt=25;do{var Ft=t(kt/2),ln=h(kt/2);kt-=ut=(X*(kt-T)-m(ln)-yt)/(X-Ft*Ft/(2*ln))}while(y(ut)>1e-12&&--Mt>0);return[We/(t(kt)*(X-1/d(kt))),s(tt)*kt]},H.invert=function(We,tt){var ut=2*L(tt/2);return[We*t(ut/2)/t(ut),ut]};var ce=le(w/c,w,_),pe=2.00276;function be(We,tt){var ut=ee(_,tt);return[pe*We/(1/t(tt)+1.11072/t(ut)),(tt+w*d(ut))/pe]}function he(We){var tt=0,ut=g.geoProjectionMutator(We),yt=ut(tt);return yt.parallel=function(kt){return arguments.length?ut(tt=kt*P):tt*C},yt}function xe(We,tt){return[We*t(tt),tt]}function De(We){if(!We)return xe;var tt=1/h(We);function ut(yt,kt){var Mt=tt+We-kt,Ft=Mt&&yt*t(kt)/Mt;return[Mt*d(Ft),tt-Mt*t(Ft)]}return ut.invert=function(yt,kt){var Mt=E(yt*yt+(kt=tt-kt)*kt),Ft=tt+We-Mt;return[Mt/t(Ft)*r(yt,kt),Ft]},ut}function Se(We){function tt(ut,yt){var kt=c-yt,Mt=kt&&ut*We*d(kt)/kt;return[kt*d(Mt)/We,c-kt*t(Mt)]}return tt.invert=function(ut,yt){var kt=ut*We,Mt=c-yt,Ft=E(kt*kt+Mt*Mt),ln=r(kt,Mt);return[(Ft?Ft/d(Ft):1)*ln/We,c-Ft]},tt}be.invert=function(We,tt){var ut,yt,kt=pe*tt,Mt=tt<0?-T:T,Ft=25;do{yt=kt-w*d(Mt),Mt-=ut=(d(2*Mt)+2*Mt-_*d(yt))/(2*t(2*Mt)+2+_*t(yt)*w*t(Mt))}while(y(ut)>a&&--Ft>0);return yt=kt-w*d(Mt),[We*(1/t(yt)+1.11072/t(Mt))/pe,yt]},xe.invert=function(We,tt){return[We/t(tt),tt]};var ke=le(1,4/_,_);function Fe(We,tt,ut,yt,kt,Mt){var Ft,ln=t(Mt);if(y(We)>1||y(Mt)>1)Ft=S(ut*kt+tt*yt*ln);else{var un=d(We/2),an=d(Mt/2);Ft=2*L(E(un*un+tt*yt*an*an))}return y(Ft)>a?[Ft,r(yt*d(Mt),tt*kt-ut*yt*ln)]:[0,0]}function ve(We,tt,ut){return S((We*We+tt*tt-ut*ut)/(2*We*tt))}function Te(We){return We-2*_*n((We+_)/(2*_))}function Le(We,tt,ut){for(var yt,kt=[[We[0],We[1],d(We[1]),t(We[1])],[tt[0],tt[1],d(tt[1]),t(tt[1])],[ut[0],ut[1],d(ut[1]),t(ut[1])]],Mt=kt[2],Ft=0;Ft<3;++Ft,Mt=yt)Mt.v=Fe((yt=kt[Ft])[1]-Mt[1],Mt[3],Mt[2],yt[3],yt[2],yt[0]-Mt[0]),Mt.point=[0,0];var ln=ve(kt[0].v[0],kt[2].v[0],kt[1].v[0]),un=ve(kt[0].v[0],kt[1].v[0],kt[2].v[0]),an=_-ln;kt[2].point[1]=0,kt[0].point[0]=-(kt[1].point[0]=kt[0].v[0]/2);var vn=[kt[2].point[0]=kt[0].point[0]+kt[2].v[0]*t(ln),2*(kt[0].point[1]=kt[1].point[1]=kt[2].v[0]*d(ln))];return function(Dn,Nn){var Fn,$n=d(Nn),wr=t(Nn),Lr=new Array(3);for(Fn=0;Fn<3;++Fn){var Zr=kt[Fn];if(Lr[Fn]=Fe(Nn-Zr[1],Zr[3],Zr[2],wr,$n,Dn-Zr[0]),!Lr[Fn][0])return Zr.point;Lr[Fn][1]=Te(Lr[Fn][1]-Zr.v[1])}var Qr=vn.slice();for(Fn=0;Fn<3;++Fn){var $r=ve(kt[Fn].v[0],Lr[Fn][0],Lr[2==Fn?0:Fn+1][0]);Lr[Fn][1]<0&&($r=-$r),Fn?1==Fn?(Qr[0]-=Lr[Fn][0]*t($r=un-$r),Qr[1]-=Lr[Fn][0]*d($r)):(Qr[0]+=Lr[Fn][0]*t($r=an-$r),Qr[1]+=Lr[Fn][0]*d($r)):(Qr[0]+=Lr[Fn][0]*t($r),Qr[1]-=Lr[Fn][0]*d($r))}return Qr[0]/=3,Qr[1]/=3,Qr}}function Oe(We){return We[0]*=P,We[1]*=P,We}function Ne(We,tt,ut){var yt=g.geoCentroid({type:"MultiPoint",coordinates:[We,tt,ut]}),kt=[-yt[0],-yt[1]],Mt=g.geoRotation(kt),Ft=Le(Oe(Mt(We)),Oe(Mt(tt)),Oe(Mt(ut)));Ft.invert=U(Ft);var ln=g.geoProjection(Ft).rotate(kt),un=ln.center;return delete ln.rotate,ln.center=function(an){return arguments.length?un(Mt(an)):Mt.invert(un())},ln.clipAngle(90)}function Be(We,tt){var ut=E(1-d(tt));return[2/M*We*ut,M*(1-ut)]}function He(We){var tt=h(We);function ut(yt,kt){return[yt,(yt?yt/d(yt):1)*(d(kt)*t(yt)-tt*t(kt))]}return ut.invert=tt?function(yt,kt){yt&&(kt*=d(yt)/yt);var Mt=t(yt);return[yt,2*r(E(Mt*Mt+tt*tt-kt*kt)-Mt,tt-kt)]}:function(yt,kt){return[yt,L(yt?kt*h(yt)/yt:kt)]},ut}Be.invert=function(We,tt){var ut=(ut=tt/M-1)*ut;return[ut>0?We*E(_/ut)/2:0,L(1-ut)]};var Ve=E(3);function it(We,tt){return[Ve*We*(2*t(2*tt/3)-1)/M,Ve*M*d(tt/3)]}function ze(We){var tt=t(We);function ut(yt,kt){return[yt*tt,d(kt)/tt]}return ut.invert=function(yt,kt){return[yt/tt,L(kt*tt)]},ut}function je(We){var tt=t(We);function ut(yt,kt){return[yt*tt,(1+tt)*h(kt/2)]}return ut.invert=function(yt,kt){return[yt/tt,2*e(kt/(1+tt))]},ut}function qe(We,tt){var ut=E(8/(3*_));return[ut*We*(1-y(tt)/_),ut*tt]}function Ye(We,tt){var ut=E(4-3*d(y(tt)));return[2/E(6*_)*We*ut,s(tt)*E(2*_/3)*(2-ut)]}function ct(We,tt){var ut=E(_*(4+_));return[2/ut*We*(1+E(1-4*tt*tt/(_*_))),4/ut*tt]}function vt(We,tt){var ut=(2+c)*d(tt);tt/=2;for(var yt=0,kt=1/0;yt<10&&y(kt)>a;yt++){var Mt=t(tt);tt-=kt=(tt+d(tt)*(Mt+2)-ut)/(2*Mt*(1+Mt))}return[2/E(_*(4+_))*We*(1+t(tt)),2*E(_/(4+_))*d(tt)]}function wt(We,tt){return[We*(1+t(tt))/E(2+_),2*tt/E(2+_)]}function Ot(We,tt){for(var ut=(1+c)*d(tt),yt=0,kt=1/0;yt<10&&y(kt)>a;yt++)tt-=kt=(tt+d(tt)-ut)/(1+t(tt));return ut=E(2+_),[We*(1+t(tt))/ut,2*tt/ut]}it.invert=function(We,tt){var ut=3*L(tt/(Ve*M));return[M*We/(Ve*(2*t(2*ut/3)-1)),ut]},qe.invert=function(We,tt){var ut=E(8/(3*_)),yt=tt/ut;return[We/(ut*(1-y(yt)/_)),yt]},Ye.invert=function(We,tt){var ut=2-y(tt)/E(2*_/3);return[We*E(6*_)/(2*ut),s(tt)*L((4-ut*ut)/3)]},ct.invert=function(We,tt){var ut=E(_*(4+_))/2;return[We*ut/(1+E(1-tt*tt*(4+_)/(4*_))),tt*ut/2]},vt.invert=function(We,tt){var ut=tt*E((4+_)/_)/2,yt=L(ut),kt=t(yt);return[We/(2/E(_*(4+_))*(1+kt)),L((yt+ut*(kt+2))/(2+c))]},wt.invert=function(We,tt){var ut=E(2+_),yt=tt*ut/2;return[ut*We/(1+t(yt)),yt]},Ot.invert=function(We,tt){var ut=1+c,yt=E(ut/2);return[2*We*yt/(1+t(tt*=yt)),L((tt+d(tt))/ut)]};var St=3+2*w;function ft(We,tt){var ut=d(We/=2),yt=t(We),kt=E(t(tt)),Mt=t(tt/=2),Ft=d(tt)/(Mt+w*yt*kt),ln=E(2/(1+Ft*Ft)),un=E((w*Mt+(yt+ut)*kt)/(w*Mt+(yt-ut)*kt));return[St*(ln*(un-1/un)-2*m(un)),St*(ln*Ft*(un+1/un)-2*e(Ft))]}ft.invert=function(We,tt){if(!(ut=ne.invert(We/1.2,1.065*tt)))return null;var ut,yt=ut[0],kt=ut[1],Mt=20;We/=St,tt/=St;do{var Ft=yt/2,ln=kt/2,un=d(Ft),an=t(Ft),vn=d(ln),Dn=t(ln),Nn=t(kt),Fn=E(Nn),$n=vn/(Dn+w*an*Fn),wr=$n*$n,Lr=E(2/(1+wr)),Zr=(w*Dn+(an+un)*Fn)/(w*Dn+(an-un)*Fn),Qr=E(Zr),Kr=Qr-1/Qr,$r=Qr+1/Qr,Li=Lr*Kr-2*m(Qr)-We,Gi=Lr*$n*$r-2*e($n)-tt,ia=vn&&x*Fn*un*wr/vn,Wi=(w*an*Dn+Fn)/(2*(Dn+w*an*Fn)*(Dn+w*an*Fn)*Fn),aa=-.5*$n*Lr*Lr*Lr,Pa=aa*ia,Ua=aa*Wi,ya=(ya=2*Dn+w*Fn*(an-un))*ya*Qr,Aa=(w*an*Dn*Fn+Nn)/ya,Na=-w*un*vn/(Fn*ya),ro=Kr*Pa-2*Aa/Qr+Lr*(Aa+Aa/Zr),wo=Kr*Ua-2*Na/Qr+Lr*(Na+Na/Zr),Eo=$n*$r*Pa-2*ia/(1+wr)+Lr*$r*ia+Lr*$n*(Aa-Aa/Zr),Do=$n*$r*Ua-2*Wi/(1+wr)+Lr*$r*Wi+Lr*$n*(Na-Na/Zr),Xa=wo*Eo-Do*ro;if(!Xa)break;var ea=(Gi*wo-Li*Do)/Xa,Tt=(Li*Eo-Gi*ro)/Xa;yt-=ea,kt=l(-c,i(c,kt-Tt))}while((y(ea)>a||y(Tt)>a)&&--Mt>0);return y(y(kt)-c)<a?[0,kt]:Mt&&[yt,kt]};var st=t(35*P);function Ct(We,tt){var ut=h(tt/2);return[We*st*E(1-ut*ut),(1+st)*ut]}function $t(We,tt){var ut=tt/2,yt=t(ut);return[2*We/M*t(tt)*yt*yt,M*h(ut)]}function rn(We){var tt=1-We,ut=kt(_,0)[0]-kt(-_,0)[0],yt=E(2*(kt(0,c)[1]-kt(0,-c)[1])/ut);function kt(ln,un){var an=t(un),vn=d(un);return[an/(tt+We*an)*ln,tt*un+We*vn]}function Mt(ln,un){var an=kt(ln,un);return[an[0]*yt,an[1]/yt]}function Ft(ln){return Mt(0,ln)[1]}return Mt.invert=function(ln,un){var an=oe(Ft,un);return[ln/yt*(We+tt/t(an)),an]},Mt}function hn(We){return[We[0]/2,L(h(We[1]/2*P))*C]}function cn(We){return[2*We[0],2*e(d(We[1]*P))*C]}function mn(We,tt){var ut=2*_/tt,yt=We*We;function kt(Mt,Ft){var ln=g.geoAzimuthalEquidistantRaw(Mt,Ft),un=ln[0],an=ln[1],vn=un*un+an*an;if(vn>yt){var Dn=E(vn),Nn=r(an,un),Fn=ut*u(Nn/ut),$n=Nn-Fn,wr=We*t($n),Lr=(We*d($n)-$n*d(wr))/(c-wr),Zr=nn($n,Lr),Qr=(_-We)/Xe(Zr,wr,_);un=Dn;var Kr,$r=50;do{un-=Kr=(We+Xe(Zr,wr,un)*Qr-Dn)/(Zr(un)*Qr)}while(y(Kr)>a&&--$r>0);an=$n*d(un),un<c&&(an-=Lr*(un-c));var Li=d(Fn),Gi=t(Fn);ln[0]=un*Gi-an*Li,ln[1]=un*Li+an*Gi}return ln}return kt.invert=function(Mt,Ft){var ln=Mt*Mt+Ft*Ft;if(ln>yt){var un=E(ln),an=r(Ft,Mt),vn=ut*u(an/ut),Dn=an-vn;Mt=un*t(Dn),Ft=un*d(Dn);for(var Nn=Mt-c,Fn=d(Mt),$n=Ft/Fn,wr=Mt<c?1/0:0,Lr=10;;){var Zr=We*d($n),Qr=We*t($n),Kr=d(Qr),$r=c-Qr,Li=(Zr-$n*Kr)/$r,Gi=nn($n,Li);if(y(wr)<1e-12||!--Lr)break;$n-=wr=($n*Fn-Li*Nn-Ft)/(Fn-2*Nn*($r*(Qr+$n*Zr*t(Qr)-Kr)-Zr*(Zr-$n*Kr))/($r*$r))}Mt=(un=We+Xe(Gi,Qr,Mt)*(_-We)/Xe(Gi,Qr,_))*t(an=vn+$n),Ft=un*d(an)}return g.geoAzimuthalEquidistantRaw.invert(Mt,Ft)},kt}function nn(We,tt){return function(ut){var yt=We*t(ut);return ut<c&&(yt-=tt),E(1+yt*yt)}}function Xe(We,tt,ut){for(var yt=(ut-tt)/50,kt=We(tt)+We(ut),Mt=1,Ft=tt;Mt<50;++Mt)kt+=2*We(Ft+=yt);return.5*kt*yt}function nt(We,tt,ut,yt,kt,Mt,Ft,ln){function un(an,vn){if(!vn)return[We*an/_,0];var Dn=vn*vn,Nn=We+Dn*(tt+Dn*(ut+Dn*yt)),Fn=vn*(kt-1+Dn*(Mt-ln+Dn*Ft)),$n=(Nn*Nn+Fn*Fn)/(2*Fn),wr=an*L(Nn/$n)/_;return[$n*d(wr),vn*(1+Dn*ln)+$n*(1-t(wr))]}return arguments.length<8&&(ln=0),un.invert=function(an,vn){var Dn,Nn,Fn=_*an/We,$n=vn,wr=50;do{var Lr=$n*$n,Zr=We+Lr*(tt+Lr*(ut+Lr*yt)),Qr=$n*(kt-1+Lr*(Mt-ln+Lr*Ft)),Kr=Zr*Zr+Qr*Qr,$r=2*Qr,Li=Kr/$r,Gi=Li*Li,ia=L(Zr/Li)/_,Wi=Fn*ia,aa=Zr*Zr,Pa=(2*tt+Lr*(4*ut+6*Lr*yt))*$n,Ua=kt+Lr*(3*Mt+5*Lr*Ft),ya=(2*(Zr*Pa+Qr*(Ua-1))*$r-Kr*(2*(Ua-1)))/($r*$r),Aa=t(Wi),Na=d(Wi),ro=Li*Aa,wo=Li*Na,Eo=Fn/_*(1/E(1-aa/Gi))*(Pa*Li-Zr*ya)/Gi,Do=wo-an,Xa=$n*(1+Lr*ln)+Li-ro-vn,ea=ya*Na+ro*Eo,Tt=ro*ia,Gt=1+ya-(ya*Aa-wo*Eo),bn=wo*ia,Qt=ea*bn-Gt*Tt;if(!Qt)break;Fn-=Dn=(Xa*ea-Do*Gt)/Qt,$n-=Nn=(Do*bn-Xa*Tt)/Qt}while((y(Dn)>a||y(Nn)>a)&&--wr>0);return[Fn,$n]},un}Ct.invert=function(We,tt){var ut=tt/(1+st);return[We&&We/(st*E(1-ut*ut)),2*e(ut)]},$t.invert=function(We,tt){var ut=e(tt/M),yt=t(ut),kt=2*ut;return[We*M/2/(t(kt)*yt*yt),kt]};var ye=nt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ce=nt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ue=nt(5/6*_,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Qe(We,tt){var ut=We*We,yt=tt*tt;return[We*(1-.162388*yt)*(.87-952426e-9*ut*ut),tt*(1+yt/12)]}Qe.invert=function(We,tt){var ut,yt=We,kt=tt,Mt=50;do{var Ft=kt*kt;kt-=ut=(kt*(1+Ft/12)-tt)/(1+Ft/4)}while(y(ut)>a&&--Mt>0);Mt=50,We/=1-.162388*Ft;do{var ln=(ln=yt*yt)*ln;yt-=ut=(yt*(.87-952426e-9*ln)-We)/(.87-.00476213*ln)}while(y(ut)>a&&--Mt>0);return[yt,kt]};var rt=nt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ke(We){var tt=We(c,0)[0]-We(-c,0)[0];function ut(yt,kt){var Mt=yt>0?-.5:.5,Ft=We(yt+Mt*_,kt);return Ft[0]-=Mt*tt,Ft}return We.invert&&(ut.invert=function(yt,kt){var Mt=yt>0?-.5:.5,Ft=We.invert(yt+Mt*tt,kt),ln=Ft[0]-Mt*_;return ln<-_?ln+=2*_:ln>_&&(ln-=2*_),Ft[0]=ln,Ft}),ut}function gt(We,tt){var ut=s(We),yt=s(tt),kt=t(tt),Mt=t(We)*kt,Ft=d(We)*kt,ln=d(yt*tt);We=y(r(Ft,ln)),tt=L(Mt),y(We-c)>a&&(We%=c);var un=function(an,vn){if(vn===c)return[0,0];var Dn,Nn,Fn=d(vn),$n=Fn*Fn,wr=$n*$n,Lr=1+wr,Zr=1+3*wr,Qr=1-wr,Kr=L(1/E(Lr)),$r=Qr+$n*Lr*Kr,Li=(1-Fn)/$r,Gi=E(Li),ia=Li*Lr,Wi=E(ia),aa=Gi*Qr;if(0===an)return[0,-(aa+$n*Wi)];var Pa,Ua=t(vn),ya=1/Ua,Aa=2*Fn*Ua,Na=(-$r*Ua-(-3*$n+Kr*Zr)*Aa*(1-Fn))/($r*$r),ro=-ya*Aa,wo=-ya*($n*Lr*Na+Li*Zr*Aa),Eo=-2*ya*(Qr*(.5*Na/Gi)-2*$n*Gi*Aa),Do=4*an/_;if(an>.222*_||vn<_/4&&an>.175*_){if(Dn=(aa+$n*E(ia*(1+wr)-aa*aa))/(1+wr),an>_/4)return[Dn,Dn];var Xa=Dn,ea=.5*Dn;Dn=.5*(ea+Xa),Nn=50;do{var Gt=Dn*(Eo+ro*E(ia-Dn*Dn))+wo*L(Dn/Wi)-Do;if(!Gt)break;Gt<0?ea=Dn:Xa=Dn,Dn=.5*(ea+Xa)}while(y(Xa-ea)>a&&--Nn>0)}else{Dn=a,Nn=25;do{var bn=Dn*Dn,Qt=E(ia-bn),wn=Eo+ro*Qt,qn=Dn*wn+wo*L(Dn/Wi)-Do;Dn-=Pa=Qt?qn/(wn+(wo-ro*bn)/Qt):0}while(y(Pa)>a&&--Nn>0)}return[Dn,-aa-$n*E(ia-Dn*Dn)]}(We>_/4?c-We:We,tt);return We>_/4&&(ln=un[0],un[0]=-un[1],un[1]=-ln),un[0]*=ut,un[1]*=-yt,un}function mt(We,tt){var ut,yt,kt,Mt,Ft,ln;if(tt<a)return[(Mt=d(We))-(ut=tt*(We-Mt*(yt=t(We)))/4)*yt,yt+ut*Mt,1-tt*Mt*Mt/2,We-ut];if(tt>=1-a)return ut=(1-tt)/4,kt=1/(yt=z(We)),[(Mt=((ln=o(2*(ln=We)))-1)/(ln+1))+ut*((Ft=yt*N(We))-We)/(yt*yt),kt-ut*Mt*kt*(Ft-We),kt+ut*Mt*kt*(Ft+We),2*e(o(We))-c+ut*(Ft-We)/yt];var un=[1,0,0,0,0,0,0,0,0],an=[E(tt),0,0,0,0,0,0,0,0],vn=0;for(yt=E(1-tt),Ft=1;y(an[vn]/un[vn])>a&&vn<8;)ut=un[vn++],an[vn]=(ut-yt)/2,un[vn]=(ut+yt)/2,yt=E(ut*yt),Ft*=2;kt=Ft*un[vn]*We;do{kt=(L(Mt=an[vn]*d(yt=kt)/un[vn])+kt)/2}while(--vn);return[d(kt),Mt=t(kt),Mt/t(kt-yt),kt]}function Lt(We,tt){if(!tt)return We;if(1===tt)return m(h(We/2+T));for(var ut=1,yt=E(1-tt),kt=E(tt),Mt=0;y(kt)>a;Mt++){if(We%_){var Ft=e(yt*h(We)/ut);Ft<0&&(Ft+=_),We+=Ft+~~(We/_)*_}else We+=We;kt=(ut+yt)/2,yt=E(ut*yt),kt=((ut=kt)-yt)/2}return We/(f(2,Mt)*ut)}function Vt(We,tt){var an,vn,Dn,Nn,Fn,ut=(w-1)/(w+1),yt=E(1-ut*ut),kt=Lt(c,yt*yt),Mt=m(h(_/4+y(tt)/2)),Ft=o(-1*Mt)/E(ut),ln=(an=Ft*t(-1*We),Nn=(vn=Ft*d(-1*We))+1,[.5*((an>=0?c:-c)-r(Fn=1-(Dn=an*an)-vn*vn,2*an)),-.25*m(Fn*Fn+4*Dn)+.5*m(Nn*Nn+Dn)]),un=function(an,vn,Dn){var Nn=y(an),Fn=N(y(vn));if(Nn){var $n=1/d(Nn),wr=1/(h(Nn)*h(Nn)),Lr=-(wr+Dn*(Fn*Fn*$n*$n)-1+Dn),Zr=(-Lr+E(Lr*Lr-(Dn-1)*wr*4))/2;return[Lt(e(1/E(Zr)),Dn)*s(an),Lt(e(E((Zr/wr-1)/Dn)),1-Dn)*s(vn)]}return[0,Lt(e(Fn),1-Dn)*s(vn)]}(ln[0],ln[1],yt*yt);return[-un[1],(tt>=0?1:-1)*(.5*kt-un[0])]}function dt(We){var tt=d(We),ut=t(We),yt=bt(We);function kt(Mt,Ft){var ln=yt(Mt,Ft);Mt=ln[0];var un=d(Ft=ln[1]),an=t(Ft),vn=t(Mt),Dn=S(tt*un+ut*an*vn),Nn=d(Dn),Fn=y(Nn)>a?Dn/Nn:1;return[Fn*ut*d(Mt),(y(Mt)>c?Fn:-Fn)*(tt*an-ut*un*vn)]}return yt.invert=bt(-We),kt.invert=function(Mt,Ft){var ln=E(Mt*Mt+Ft*Ft),un=-d(ln),an=t(ln),vn=ln*an,Dn=-Ft*un,Nn=ln*tt,Fn=E(vn*vn+Dn*Dn-Nn*Nn),$n=r(vn*Nn+Dn*Fn,Dn*Nn-vn*Fn),wr=(ln>c?-1:1)*r(Mt*un,ln*t($n)*an+Ft*d($n)*un);return yt.invert(wr,$n)},kt}function bt(We){var tt=d(We),ut=t(We);return function(yt,kt){var Mt=t(kt),Ft=t(yt)*Mt,ln=d(yt)*Mt,un=d(kt);return[r(ln,Ft*ut-un*tt),L(un*ut+Ft*tt)]}}gt.invert=function(We,tt){y(We)>1&&(We=2*s(We)-We),y(tt)>1&&(tt=2*s(tt)-tt);var ut=s(We),yt=s(tt),kt=-ut*We,Mt=-yt*tt,Ft=Mt/kt<1,ln=function(Dn,Nn){for(var Fn=0,$n=1,wr=.5,Lr=50;;){var Zr=wr*wr,Qr=E(wr),Kr=L(1/E(1+Zr)),$r=1-Zr+wr*(1+Zr)*Kr,Li=(1-Qr)/$r,Gi=E(Li),ia=Li*(1+Zr),Wi=Gi*(1-Zr),aa=E(ia-Dn*Dn),Pa=Nn+Wi+wr*aa;if(y($n-Fn)<1e-12||0==--Lr||0===Pa)break;Pa>0?Fn=wr:$n=wr,wr=.5*(Fn+$n)}if(!Lr)return null;var Ua=L(Qr),ya=t(Ua),Aa=1/ya,Na=2*Qr*ya,ro=(-$r*ya-(-3*wr+Kr*(1+3*Zr))*Na*(1-Qr))/($r*$r);return[_/4*(Dn*(-2*Aa*(.5*ro/Gi*(1-Zr)-2*wr*Gi*Na)+-Aa*Na*aa)+-Aa*(wr*(1+Zr)*ro+Li*(1+3*Zr)*Na)*L(Dn/E(ia))),Ua]}(Ft?Mt:kt,Ft?kt:Mt),un=ln[0],an=ln[1],vn=t(an);return Ft&&(un=-c-un),[ut*(r(d(un)*vn,-d(an))+_),yt*L(t(un)*vn)]},Vt.invert=function(We,tt){var ut,yt,kt,Mt,Ft,ln,Fn,$n,wr,un=(w-1)/(w+1),an=E(1-un*un),Dn=(yt=-We,kt=an*an,(ut=.5*Lt(c,an*an)-tt)?(Mt=mt(ut,kt),yt?(ln=(Ft=mt(yt,1-kt))[1]*Ft[1]+kt*Mt[0]*Mt[0]*Ft[0]*Ft[0],[[Mt[0]*Ft[2]/ln,Mt[1]*Mt[2]*Ft[0]*Ft[1]/ln],[Mt[1]*Ft[1]/ln,-Mt[0]*Mt[2]*Ft[0]*Ft[2]/ln],[Mt[2]*Ft[1]*Ft[2]/ln,-kt*Mt[0]*Mt[1]*Ft[0]/ln]]):[[Mt[0],0],[Mt[1],0],[Mt[2],0]]):[[0,(Ft=mt(yt,1-kt))[0]/Ft[1]],[1/Ft[1],0],[Ft[2]/Ft[1],0]]),Nn=[((Fn=Dn[0])[0]*($n=Dn[1])[0]+Fn[1]*$n[1])/(wr=$n[0]*$n[0]+$n[1]*$n[1]),(Fn[1]*$n[0]-Fn[0]*$n[1])/wr];return[r(Nn[1],Nn[0])/-1,2*e(o(-.5*m(un*Nn[0]*Nn[0]+un*Nn[1]*Nn[1])))-c]};var Yt=L(1-1/3)*C,It=ze(0);function jt(We){var tt=Yt*P,ut=Be(_,tt)[0]-Be(-_,tt)[0],yt=It(0,tt)[1],kt=Be(0,tt)[1],Mt=M-kt,Ft=D/We,ln=4/D,un=yt+Mt*Mt*4/D;function an(vn,Dn){var Nn,Fn=y(Dn);if(Fn>tt){var $n=i(We-1,l(0,n((vn+_)/Ft)));(Nn=Be(vn+=_*(We-1)/We-$n*Ft,Fn))[0]=Nn[0]*D/ut-D*(We-1)/(2*We)+$n*D/We,Nn[1]=yt+4*(Nn[1]-kt)*Mt/D,Dn<0&&(Nn[1]=-Nn[1])}else Nn=It(vn,Dn);return Nn[0]*=ln,Nn[1]/=un,Nn}return an.invert=function(vn,Dn){vn/=ln;var Nn=y(Dn*=un);if(Nn>yt){var Fn=i(We-1,l(0,n((vn+_)/Ft))),$n=Be.invert(vn=(vn+_*(We-1)/We-Fn*Ft)*ut/D,.25*(Nn-yt)*D/Mt+kt);return $n[0]-=_*(We-1)/We-Fn*Ft,Dn<0&&($n[1]=-$n[1]),$n}return It.invert(vn,Dn)},an}function Ie(We,tt){return[We,1&tt?90-a:Yt]}function et(We,tt){return[We,1&tt?-90+a:-Yt]}function ht(We){return[We[0]*(1-a),We[1]]}function xt(We){var tt,ut=1+We,yt=L(d(1/ut)),kt=2*E(_/(tt=_+4*yt*ut)),Mt=.5*kt*(ut+E(We*(2+We))),Ft=We*We,ln=ut*ut;function un(an,vn){var Dn,Nn,Fn=1-d(vn);if(Fn&&Fn<2){var $n,wr=c-vn,Lr=25;do{var Zr=d(wr),Qr=t(wr),Kr=yt+r(Zr,ut-Qr),$r=1+ln-2*ut*Qr;wr-=$n=(wr-Ft*yt-ut*Zr+$r*Kr-.5*Fn*tt)/(2*ut*Zr*Kr)}while(y($n)>1e-12&&--Lr>0);Dn=kt*E($r),Nn=an*Kr/_}else Dn=kt*(We+Fn),Nn=an*yt/_;return[Dn*d(Nn),Mt-Dn*t(Nn)]}return un.invert=function(an,vn){var Dn=an*an+(vn-=Mt)*vn,Nn=(1+ln-Dn/(kt*kt))/(2*ut),Fn=S(Nn),$n=d(Fn),wr=yt+r($n,ut-Nn);return[L(an/E(Dn))*_/wr,L(1-2*(Fn-Ft*yt-ut*$n+(1+ln-2*ut*Nn)*wr)/tt)]},un}function Rt(We,tt){return tt>-.7109889596207567?((We=ce(We,tt))[1]+=.0528035274542,We):xe(We,tt)}function Xt(We,tt){return y(tt)>.7109889596207567?((We=ce(We,tt))[1]-=tt>0?.0528035274542:-.0528035274542,We):xe(We,tt)}function tn(We,tt,ut,yt){var kt=E(4*_/(2*ut+(1+We-tt/2)*d(2*ut)+(We+tt)/2*d(4*ut)+tt/2*d(6*ut))),Mt=E(yt*d(ut)*E((1+We*t(2*ut)+tt*t(4*ut))/(1+We+tt))),Ft=ut*un(1);function ln(Dn){return E(1+We*t(2*Dn)+tt*t(4*Dn))}function un(Dn){var Nn=Dn*ut;return(2*Nn+(1+We-tt/2)*d(2*Nn)+(We+tt)/2*d(4*Nn)+tt/2*d(6*Nn))/ut}function an(Dn){return ln(Dn)*d(Dn)}var vn=function(Dn,Nn){var Fn=ut*oe(un,Ft*d(Nn)/ut,Nn/_);isNaN(Fn)&&(Fn=ut*s(Nn));var $n=kt*ln(Fn);return[$n*Mt*Dn/_*t(Fn),$n/Mt*d(Fn)]};return vn.invert=function(Dn,Nn){var Fn=oe(an,Nn*Mt/kt);return[Dn*_/(t(Fn)*kt*Mt*ln(Fn)),L(ut*un(Fn/ut)/Ft)]},0===ut&&(kt=E(yt/_),(vn=function(Dn,Nn){return[Dn*kt,d(Nn)/kt]}).invert=function(Dn,Nn){return[Dn/kt,L(Nn*kt)]}),vn}function kn(We,tt,ut){function yt(Fn){return We+(1-We)*f(1-f(Fn,tt),1/tt)}function kt(Fn){return function Kt(We,tt,ut,yt,kt){void 0===yt&&(yt=1e-8),void 0===kt&&(kt=20);var Mt=We(tt),Ft=We(.5*(tt+ut)),ln=We(ut);return function un(an,vn,Dn,Nn,Fn,$n,wr,Lr,Zr,Qr,Kr){if(Kr.nanEncountered)return NaN;var $r,Li,Gi,ia,Wi,aa,Pa,Ua,ya,Aa;if(Li=an(vn+.25*($r=Dn-vn)),Gi=an(Dn-.25*$r),isNaN(Li))Kr.nanEncountered=!0;else{if(!isNaN(Gi))return Aa=((aa=(ia=$r*(Nn+4*Li+Fn)/12)+(Wi=$r*(Fn+4*Gi+$n)/12))-wr)/15,Qr>Zr?(Kr.maxDepthCount++,aa+Aa):Math.abs(Aa)<Lr?aa+Aa:(Ua=un(an,vn,Pa=vn+.5*$r,Nn,Li,Fn,ia,.5*Lr,Zr,Qr+1,Kr),isNaN(Ua)?(Kr.nanEncountered=!0,NaN):(ya=un(an,Pa,Dn,Fn,Gi,$n,Wi,.5*Lr,Zr,Qr+1,Kr),isNaN(ya)?(Kr.nanEncountered=!0,NaN):Ua+ya));Kr.nanEncountered=!0}}(We,tt,ut,Mt,Ft,ln,(Mt+4*Ft+ln)*(ut-tt)/6,yt,kt,1,{maxDepthCount:0,nanEncountered:!1})}(yt,0,Fn,1e-4)}for(var Mt=1/kt(1),ln=(1+1e-8)*Mt,un=[],an=0;an<=1e3;an++)un.push(kt(an/1e3)*ln);function vn(Fn){var $n=0,wr=1e3,Lr=500;do{un[Lr]>Fn?wr=Lr:$n=Lr,Lr=$n+wr>>1}while(Lr>$n);var Zr=un[Lr+1]-un[Lr];return Zr&&(Zr=(Fn-un[Lr+1])/Zr),(Lr+1+Zr)/1e3}var Dn=2*vn(1)/_*Mt/ut,Nn=function(Fn,$n){var wr=vn(y(d($n))),Lr=yt(wr)*Fn;return wr/=Dn,[Lr,$n>=0?wr:-wr]};return Nn.invert=function(Fn,$n){var wr;return y($n*=Dn)<1&&(wr=s($n)*L(kt(y($n))*Mt)),[Fn/yt(y($n)),wr]},Nn}function Vn(We,tt){return y(We[0]-tt[0])<a&&y(We[1]-tt[1])<a}function Tn(We,tt){for(var ut,yt,kt,Mt=-1,Ft=We.length,ln=We[0],un=[];++Mt<Ft;){yt=((ut=We[Mt])[0]-ln[0])/tt,kt=(ut[1]-ln[1])/tt;for(var an=0;an<tt;++an)un.push([ln[0]+an*yt,ln[1]+an*kt]);ln=ut}return un.push(ut),un}function sn(We){var tt,ut,kt,Mt,ln,un=[],an=We[0].length;for(ln=0;ln<an;++ln)ut=(tt=We[0][ln])[0][0],un.push(Tn([[ut+a,tt[0][1]+a],[ut+a,(kt=tt[1][1])-a],[(Mt=tt[2][0])-a,kt-a],[Mt-a,tt[2][1]+a]],30));for(ln=We[1].length-1;ln>=0;--ln)ut=(tt=We[1][ln])[0][0],un.push(Tn([[(Mt=tt[2][0])-a,tt[2][1]-a],[Mt-a,(kt=tt[1][1])+a],[ut+a,kt+a],[ut+a,tt[0][1]-a]],30));return{type:"Polygon",coordinates:[b.merge(un)]}}function fn(We,tt,ut){var yt,kt;function Mt(un,an){for(var vn=an<0?-1:1,Dn=tt[+(an<0)],Nn=0,Fn=Dn.length-1;Nn<Fn&&un>Dn[Nn][2][0];++Nn);var $n=We(un-Dn[Nn][1][0],an);return $n[0]+=We(Dn[Nn][1][0],vn*an>vn*Dn[Nn][0][1]?Dn[Nn][0][1]:an)[0],$n}ut?Mt.invert=ut(Mt):We.invert&&(Mt.invert=function(un,an){for(var vn=kt[+(an<0)],Dn=tt[+(an<0)],Nn=0,Fn=vn.length;Nn<Fn;++Nn){var $n=vn[Nn];if($n[0][0]<=un&&un<$n[1][0]&&$n[0][1]<=an&&an<$n[1][1]){var wr=We.invert(un-We(Dn[Nn][1][0],0)[0],an);return wr[0]+=Dn[Nn][1][0],Vn(Mt(wr[0],wr[1]),[un,an])?wr:null}}});var Ft=g.geoProjection(Mt),ln=Ft.stream;return Ft.stream=function(un){var an=Ft.rotate(),vn=ln(un),Dn=(Ft.rotate([0,0]),ln(un));return Ft.rotate(an),vn.sphere=function(){g.geoStream(yt,Dn)},vn},Ft.lobes=function(un){return arguments.length?(yt=sn(un),tt=un.map(function(an){return an.map(function(vn){return[[vn[0][0]*P,vn[0][1]*P],[vn[1][0]*P,vn[1][1]*P],[vn[2][0]*P,vn[2][1]*P]]})}),kt=tt.map(function(an){return an.map(function(vn){var Dn,Nn=We(vn[0][0],vn[0][1])[0],Fn=We(vn[2][0],vn[2][1])[0],$n=We(vn[1][0],vn[0][1])[1],wr=We(vn[1][0],vn[1][1])[1];return $n>wr&&(Dn=$n,$n=wr,wr=Dn),[[Nn,$n],[Fn,wr]]})}),Ft):tt.map(function(an){return an.map(function(vn){return[[vn[0][0]*C,vn[0][1]*C],[vn[1][0]*C,vn[1][1]*C],[vn[2][0]*C,vn[2][1]*C]]})})},null!=tt&&Ft.lobes(tt),Ft}Rt.invert=function(We,tt){return tt>-.7109889596207567?ce.invert(We,tt-.0528035274542):xe.invert(We,tt)},Xt.invert=function(We,tt){return y(tt)>.7109889596207567?ce.invert(We,tt+(tt>0?.0528035274542:-.0528035274542)):xe.invert(We,tt)};var dn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Mn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],En=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],jn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],er=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],nr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function mr(We,tt){return[3/D*We*E(_*_/3-tt*tt),tt]}function Dr(We){function tt(ut,yt){if(y(y(yt)-c)<a)return[0,yt<0?-2:2];var kt=d(yt),Mt=f((1+kt)/(1-kt),We/2),Ft=.5*(Mt+1/Mt)+t(ut*=We);return[2*d(ut)/Ft,(Mt-1/Mt)/Ft]}return tt.invert=function(ut,yt){var kt=y(yt);if(y(kt-2)<a)return ut?null:[0,s(yt)*c];if(kt>2)return null;var Mt=(ut/=2)*ut,Ft=(yt/=2)*yt,ln=2*yt/(1+Mt+Ft);return ln=f((1+ln)/(1-ln),1/We),[r(2*ut,1-Mt-Ft)/We,L((ln-1)/(ln+1))]},tt}mr.invert=function(We,tt){return[D/3*We/E(_*_/3-tt*tt),tt]};var yr=_/w;function Wr(We,tt){return[We*(1+E(t(tt)))/2,tt/(t(tt/2)*t(We/6))]}function kr(We,tt){var ut=We*We,yt=tt*tt;return[We*(.975534+yt*(-.0143059*ut-.119161+-.0547009*yt)),tt*(1.00384+ut*(.0802894+-.02855*yt+199025e-9*ut)+yt*(.0998909+-.0491032*yt))]}function Or(We,tt){return[d(We)/t(tt),h(tt)*t(We)]}function Hr(We){var tt=t(We),ut=h(T+We/2);function yt(kt,Mt){var Ft=Mt-We,ln=y(Ft)<a?kt*tt:y(ln=T+Mt/2)<a||y(y(ln)-c)<a?0:kt*Ft/m(h(ln)/ut);return[ln,Ft]}return yt.invert=function(kt,Mt){var Ft,ln=Mt+We;return[y(Mt)<a?kt/tt:y(Ft=T+ln/2)<a||y(y(Ft)-c)<a?0:kt*m(h(Ft)/ut)/Mt,ln]},yt}function oi(We,tt){return[We,1.25*m(h(T+.4*tt))]}function Qn(We){var tt=We.length-1;function ut(yt,kt){for(var Mt,Ft=t(kt),ln=2/(1+Ft*t(yt)),un=ln*Ft*d(yt),an=ln*d(kt),vn=tt,Dn=We[vn],Nn=Dn[0],Fn=Dn[1];--vn>=0;)Nn=(Dn=We[vn])[0]+un*(Mt=Nn)-an*Fn,Fn=Dn[1]+un*Fn+an*Mt;return[Nn=un*(Mt=Nn)-an*Fn,Fn=un*Fn+an*Mt]}return ut.invert=function(yt,kt){var Mt=20,Ft=yt,ln=kt;do{for(var un,an=tt,vn=We[an],Dn=vn[0],Nn=vn[1],Fn=0,$n=0;--an>=0;)Fn=Dn+Ft*(un=Fn)-ln*$n,$n=Nn+Ft*$n+ln*un,Dn=(vn=We[an])[0]+Ft*(un=Dn)-ln*Nn,Nn=vn[1]+Ft*Nn+ln*un;var wr,Lr,Zr=(Fn=Dn+Ft*(un=Fn)-ln*$n)*Fn+($n=Nn+Ft*$n+ln*un)*$n;Ft-=wr=((Dn=Ft*(un=Dn)-ln*Nn-yt)*Fn+(Nn=Ft*Nn+ln*un-kt)*$n)/Zr,ln-=Lr=(Nn*Fn-Dn*$n)/Zr}while(y(wr)+y(Lr)>1e-12&&--Mt>0);if(Mt){var Qr=E(Ft*Ft+ln*ln),Kr=2*e(.5*Qr),$r=d(Kr);return[r(Ft*$r,Qr*t(Kr)),Qr?L(ln*$r/Qr):0]}},ut}Wr.invert=function(We,tt){var ut=y(We),yt=y(tt),kt=a,Mt=c;yt<yr?Mt*=yt/yr:kt+=6*S(yr/yt);for(var Ft=0;Ft<25;Ft++){var ln=d(Mt),un=E(t(Mt)),an=d(Mt/2),vn=t(Mt/2),Dn=d(kt/6),Nn=t(kt/6),Fn=.5*kt*(1+un)-ut,$n=Mt/(vn*Nn)-yt,wr=un?-.25*kt*ln/un:0,Lr=.5*(1+un),Zr=(1+.5*Mt*an/vn)/(vn*Nn),Qr=Mt/vn*(Dn/6)/(Nn*Nn),Kr=wr*Qr-Zr*Lr,$r=(Fn*Qr-$n*Lr)/Kr,Li=($n*wr-Fn*Zr)/Kr;if(Mt-=$r,kt-=Li,y($r)<a&&y(Li)<a)break}return[We<0?-kt:kt,tt<0?-Mt:Mt]},kr.invert=function(We,tt){var ut=s(We)*_,yt=tt/2,kt=50;do{var Mt=ut*ut,Ft=yt*yt,ln=ut*yt,un=ut*(.975534+Ft*(-.0143059*Mt-.119161+-.0547009*Ft))-We,an=yt*(1.00384+Mt*(.0802894+-.02855*Ft+199025e-9*Mt)+Ft*(.0998909+-.0491032*Ft))-tt,vn=.975534-Ft*(.119161+3*Mt*.0143059+.0547009*Ft),Dn=-ln*(.238322+.2188036*Ft+.0286118*Mt),Nn=ln*(.1605788+7961e-7*Mt+-.0571*Ft),Fn=1.00384+Mt*(.0802894+199025e-9*Mt)+Ft*(3*(.0998909-.02855*Mt)-.245516*Ft),$n=Dn*Nn-Fn*vn,wr=(an*Dn-un*Fn)/$n,Lr=(un*Nn-an*vn)/$n;ut-=wr,yt-=Lr}while((y(wr)>a||y(Lr)>a)&&--kt>0);return kt&&[ut,yt]},Or.invert=function(We,tt){var ut=We*We,yt=tt*tt+1,kt=ut+yt,Mt=We?x*E((kt-E(kt*kt-4*ut))/ut):1/E(yt);return[L(We*Mt),s(tt)*S(Mt)]},oi.invert=function(We,tt){return[We,2.5*e(o(.8*tt))-.625*_]};var Ir=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Tr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ar=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Jr=[[.9245,0],[0,0],[.01943,0]],ri=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Rr(We,tt){var ut=g.geoProjection(Qn(We)).rotate(tt).clipAngle(90),yt=g.geoRotation(tt),kt=ut.center;return delete ut.rotate,ut.center=function(Mt){return arguments.length?kt(yt(Mt)):yt.invert(kt())},ut}var Yr=E(6),Ci=E(7);function pn(We,tt){var ut=L(7*d(tt)/(3*Yr));return[Yr*We*(2*t(2*ut/3)-1)/Ci,9*d(ut/3)/Ci]}function Ln(We,tt){for(var ut,yt=(1+x)*d(tt),kt=tt,Mt=0;Mt<25&&(kt-=ut=(d(kt/2)+d(kt)-yt)/(.5*t(kt/2)+t(kt)),!(y(ut)<a));Mt++);return[We*(1+2*t(kt)/t(kt/2))/(3*w),2*E(3)*d(kt/2)/E(2+w)]}function Ut(We,tt){for(var ut,yt=E(6/(4+_)),kt=(1+_/4)*d(tt),Mt=tt/2,Ft=0;Ft<25&&(Mt-=ut=(Mt/2+d(Mt)-kt)/(.5+t(Mt)),!(y(ut)<a));Ft++);return[yt*(.5+t(Mt))*We/1.5,yt*Mt]}function xn(We,tt){var ut=tt*tt,yt=ut*ut,kt=ut*yt;return[We*(.84719-.13063*ut+kt*kt*(.05494*ut-.04515-.02326*yt+.00331*kt)),tt*(1.01183+yt*yt*(.01926*ut-.02625-.00396*yt))]}function Sn(We,tt){return[We*(1+t(tt))/2,2*(tt-h(tt/2))]}pn.invert=function(We,tt){var ut=3*L(tt*Ci/9);return[We*Ci/(Yr*(2*t(2*ut/3)-1)),L(3*d(ut)*Yr/7)]},Ln.invert=function(We,tt){var ut=tt*E(2+w)/(2*E(3)),yt=2*L(ut);return[3*w*We/(1+2*t(yt)/t(yt/2)),L((ut+d(yt))/(1+x))]},Ut.invert=function(We,tt){var ut=E(6/(4+_)),yt=tt/ut;return y(y(yt)-c)<a&&(yt=yt<0?-c:c),[1.5*We/(ut*(.5+t(yt))),L((yt/2+d(yt))/(1+_/4))]},xn.invert=function(We,tt){var ut,yt,kt,Mt,Ft=tt,ln=25;do{Ft-=ut=(Ft*(1.01183+(kt=(yt=Ft*Ft)*yt)*kt*(.01926*yt-.02625-.00396*kt))-tt)/(1.01183+kt*kt*(.21186*yt-.23625+-.05148*kt))}while(y(ut)>1e-12&&--ln>0);return[We/(.84719-.13063*(yt=Ft*Ft)+(Mt=yt*(kt=yt*yt))*Mt*(.05494*yt-.04515-.02326*kt+.00331*Mt)),Ft]},Sn.invert=function(We,tt){for(var ut=tt/2,yt=0,kt=1/0;yt<10&&y(kt)>a;++yt){var Mt=t(tt/2);tt-=kt=(tt-h(tt/2)-ut)/(1-.5/(Mt*Mt))}return[2*We/(1+t(tt)),tt]};var Kn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Jn(We,tt){var ut=d(tt),yt=t(tt),kt=s(We);if(0===We||y(tt)===c)return[0,tt];if(0===tt)return[We,0];if(y(We)===c)return[We*yt,c*ut];var Mt=_/(2*We)-2*We/_,Ft=2*tt/_,ln=(1-Ft*Ft)/(ut-Ft),un=Mt*Mt,an=ln*ln,vn=1+un/an,Dn=1+an/un,Nn=(Mt*ut/ln-Mt/2)/vn,Fn=(an*ut/un+ln/2)/Dn,$n=Fn*Fn-(an*ut*ut/un+ln*ut-1)/Dn;return[c*(Nn+E(Nn*Nn+yt*yt/vn)*kt),c*(Fn+E($n<0?0:$n)*s(-tt*Mt)*kt)]}function Xn(We,tt){var ut=tt*tt;return[We,tt*(1.0148+ut*ut*(.23185+ut*(.02406*ut-.14499)))]}function Un(We,tt){if(y(tt)<a)return[We,0];var ut=h(tt),yt=We*d(tt);return[d(yt)/ut,tt+(1-t(yt))/ut]}function Pn(We,tt){return[We[0]*tt[0]+We[1]*tt[3],We[0]*tt[1]+We[1]*tt[4],We[0]*tt[2]+We[1]*tt[5]+We[2],We[3]*tt[0]+We[4]*tt[3],We[3]*tt[1]+We[4]*tt[4],We[3]*tt[2]+We[4]*tt[5]+We[5]]}function Bn(We,tt){return[We[0]-tt[0],We[1]-tt[1]]}function Gn(We){return E(We[0]*We[0]+We[1]*We[1])}function or(We,tt,ut){function yt(Ft,ln){var un,an=tt(Ft,ln),vn=an.project([Ft*C,ln*C]);return(un=an.transform)?[un[0]*vn[0]+un[1]*vn[1]+un[2],-(un[3]*vn[0]+un[4]*vn[1]+un[5])]:(vn[1]=-vn[1],vn)}(function Ft(ln,un){if(ln.edges=function($n){for(var wr=$n.length,Lr=[],Zr=$n[wr-1],Qr=0;Qr<wr;++Qr)Lr.push([Zr,Zr=$n[Qr]]);return Lr}(ln.face),un.face){var an=ln.shared=function($n,wr){for(var Lr,Zr,Qr=$n.length,Kr=null,$r=0;$r<Qr;++$r){Lr=$n[$r];for(var Li=wr.length;--Li>=0;)if(Lr[0]===(Zr=wr[Li])[0]&&Lr[1]===Zr[1]){if(Kr)return[Kr,Lr];Kr=Lr}}}(ln.face,un.face),vn=function In(We,tt){var Ft,ln,ut=Bn(We[1],We[0]),yt=Bn(tt[1],tt[0]),kt=r((Ft=ut)[0]*(ln=yt)[1]-Ft[1]*ln[0],Ft[0]*ln[0]+Ft[1]*ln[1]),Mt=Gn(ut)/Gn(yt);return Pn([1,0,We[0][0],0,1,We[0][1]],Pn([Mt,0,0,0,Mt,0],Pn([t(kt),d(kt),0,-d(kt),t(kt),0],[1,0,-tt[0][0],0,1,-tt[0][1]])))}(an.map(un.project),an.map(ln.project));ln.transform=un.transform?Pn(un.transform,vn):vn;for(var Dn=un.edges,Nn=0,Fn=Dn.length;Nn<Fn;++Nn)sr(an[0],Dn[Nn][1])&&sr(an[1],Dn[Nn][0])&&(Dn[Nn]=ln),sr(an[0],Dn[Nn][0])&&sr(an[1],Dn[Nn][1])&&(Dn[Nn]=ln);for(Nn=0,Fn=(Dn=ln.edges).length;Nn<Fn;++Nn)sr(an[0],Dn[Nn][0])&&sr(an[1],Dn[Nn][1])&&(Dn[Nn]=un),sr(an[0],Dn[Nn][1])&&sr(an[1],Dn[Nn][0])&&(Dn[Nn]=un)}else ln.transform=un.transform;return ln.children&&ln.children.forEach(function($n){Ft($n,ln)}),ln})(We,{transform:null}),xr(We)&&(yt.invert=function(Ft,ln){var un=function an(vn,Dn){var Kr,$r,Nn=vn.project.invert,Fn=vn.transform,$n=Dn;if(Fn&&($n=[(Fn=[($r=1/((Kr=Fn)[0]*Kr[4]-Kr[1]*Kr[3]))*Kr[4],-$r*Kr[1],$r*(Kr[1]*Kr[5]-Kr[2]*Kr[4]),-$r*Kr[3],$r*Kr[0],$r*(Kr[2]*Kr[3]-Kr[0]*Kr[5])])[0]*$n[0]+Fn[1]*$n[1]+Fn[2],Fn[3]*$n[0]+Fn[4]*$n[1]+Fn[5]]),Nn&&vn===function(Kr){return tt(Kr[0]*P,Kr[1]*P)}(wr=Nn($n)))return wr;for(var wr,Lr=vn.children,Zr=0,Qr=Lr&&Lr.length;Zr<Qr;++Zr)if(wr=an(Lr[Zr],Dn))return wr}(We,[Ft,-ln]);return un&&(un[0]*=P,un[1]*=P,un)});var kt=g.geoProjection(yt),Mt=kt.stream;return kt.stream=function(Ft){var ln=kt.rotate(),un=Mt(Ft),an=(kt.rotate([0,0]),Mt(Ft));return kt.rotate(ln),un.sphere=function(){an.polygonStart(),an.lineStart(),function vn(Dn,Nn,Fn){var $n,wr,Lr=Nn.edges,Zr=Lr.length,Qr={type:"MultiPoint",coordinates:Nn.face},Kr=Nn.face.filter(function(Pa){return 90!==y(Pa[1])}),$r=g.geoBounds({type:"MultiPoint",coordinates:Kr}),Li=!1,Gi=-1,ia=$r[1][0]-$r[0][0],Wi=180===ia||360===ia?[($r[0][0]+$r[1][0])/2,($r[0][1]+$r[1][1])/2]:g.geoCentroid(Qr);if(Fn)for(;++Gi<Zr&&Lr[Gi]!==Fn;);++Gi;for(var aa=0;aa<Zr;++aa)wr=Lr[(aa+Gi)%Zr],Array.isArray(wr)?(Li||(Dn.point(($n=g.geoInterpolate(wr[0],Wi)(a))[0],$n[1]),Li=!0),Dn.point(($n=g.geoInterpolate(wr[1],Wi)(a))[0],$n[1])):(Li=!1,wr!==Fn&&vn(Dn,wr,Nn))}(an,We),an.lineEnd(),an.polygonEnd()},un},kt.angle(null==ut?-30:ut*C)}function sr(We,tt){return We&&tt&&We[0]===tt[0]&&We[1]===tt[1]}function xr(We){return We.project.invert||We.children&&We.children.some(xr)}Jn.invert=function(We,tt){var ut=(We/=c)*We,yt=ut+(tt/=c)*tt,kt=_*_;return[We?(yt-1+E((1-yt)*(1-yt)+4*ut))/(2*We)*c:0,oe(function(Mt){return yt*(_*d(Mt)-2*Mt)*_+4*Mt*Mt*(tt-d(Mt))+2*_*Mt-kt*tt},0)]},Xn.invert=function(We,tt){tt>1.790857183?tt=1.790857183:tt<-1.790857183&&(tt=-1.790857183);var ut,yt=tt;do{var kt=yt*yt;yt-=ut=(yt*(1.0148+kt*kt*(.23185+kt*(.02406*kt-.14499)))-tt)/(1.0148+kt*kt*(5*.23185+kt*(.21654*kt-1.01493)))}while(y(ut)>a);return[We,yt]},Un.invert=function(We,tt){if(y(tt)<a)return[We,0];var ut,yt=We*We+tt*tt,kt=.5*tt,Mt=10;do{var Ft=h(kt),ln=1/t(kt),un=yt-2*tt*kt+kt*kt;kt-=ut=(Ft*un+2*(kt-tt))/(2+un*ln*ln+2*(kt-tt)*Ft)}while(y(ut)>a&&--Mt>0);return Ft=h(kt),[(y(tt)<y(kt+1/Ft)?L(We*Ft):s(tt)*s(We)*(S(y(We*Ft))+c))/d(kt),kt]};var _r=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Nr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(We){return We.map(function(tt){return _r[tt]})}),Fr=2/E(3);function Br(We,tt){var ut=Be(We,tt);return[ut[0]*Fr,ut[1]]}function qr(We,tt){for(var ut=0,yt=We.length,kt=0;ut<yt;++ut)kt+=We[ut]*tt[ut];return kt}function Xr(We){return[r(We[1],We[0])*C,L(l(-1,i(1,We[2])))*C]}function ci(We){var tt=We[0]*P,ut=We[1]*P,yt=t(ut);return[yt*t(tt),yt*d(tt),d(ut)]}function Ui(){}function Hi(We,tt){return{type:"FeatureCollection",features:We.features.map(function(ut){return jr(ut,tt)})}}function jr(We,tt){return{type:"Feature",id:We.id,properties:We.properties,geometry:pi(We.geometry,tt)}}function pi(We,tt){if(!We)return null;if("GeometryCollection"===We.type)return kt=tt,{type:"GeometryCollection",geometries:We.geometries.map(function(Mt){return pi(Mt,kt)})};var kt,ut;switch(We.type){case"Point":case"MultiPoint":ut=ma;break;case"LineString":case"MultiLineString":ut=Za;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=Co;break;default:return null}return g.geoStream(We,tt(ut)),ut.result()}Br.invert=function(We,tt){return Be.invert(We/Fr,tt)};var ui=[],Qi=[],ma={point:function(We,tt){ui.push([We,tt])},result:function(){var We=ui.length?ui.length<2?{type:"Point",coordinates:ui[0]}:{type:"MultiPoint",coordinates:ui}:null;return ui=[],We}},Za={lineStart:Ui,point:function(We,tt){ui.push([We,tt])},lineEnd:function(){ui.length&&(Qi.push(ui),ui=[])},result:function(){var We=Qi.length?Qi.length<2?{type:"LineString",coordinates:Qi[0]}:{type:"MultiLineString",coordinates:Qi}:null;return Qi=[],We}},Co={polygonStart:Ui,lineStart:Ui,point:function(We,tt){ui.push([We,tt])},lineEnd:function(){var We=ui.length;if(We){do{ui.push(ui[0].slice())}while(++We<4);Qi.push(ui),ui=[]}},polygonEnd:Ui,result:function(){if(!Qi.length)return null;var We=[],tt=[];return Qi.forEach(function(ut){!function(yt){if((kt=yt.length)<4)return!1;for(var kt,Mt=0,Ft=yt[kt-1][1]*yt[0][0]-yt[kt-1][0]*yt[0][1];++Mt<kt;)Ft+=yt[Mt-1][1]*yt[Mt][0]-yt[Mt-1][0]*yt[Mt][1];return Ft<=0}(ut)?tt.push(ut):We.push([ut])}),tt.forEach(function(ut){var yt=ut[0];We.some(function(kt){if(function(Mt,Ft){for(var ln=Ft[0],un=Ft[1],an=!1,vn=0,Dn=Mt.length,Nn=Dn-1;vn<Dn;Nn=vn++){var Fn=Mt[vn],$n=Fn[0],wr=Fn[1],Lr=Mt[Nn],Qr=Lr[1];wr>un^Qr>un&&ln<(Lr[0]-$n)*(un-wr)/(Qr-wr)+$n&&(an=!an)}return an}(kt[0],yt))return kt.push(ut),!0})||We.push([ut])}),Qi=[],We.length?We.length>1?{type:"MultiPolygon",coordinates:We}:{type:"Polygon",coordinates:We[0]}:null}};function sa(We){var tt=We(c,0)[0]-We(-c,0)[0];function ut(yt,kt){var Mt=y(yt)<c,Ft=We(Mt?yt:yt>0?yt-_:yt+_,kt),ln=(Ft[0]-Ft[1])*x,un=(Ft[0]+Ft[1])*x;if(Mt)return[ln,un];var an=tt*x,vn=ln>0^un>0?-1:1;return[vn*ln-s(un)*an,vn*un-s(ln)*an]}return We.invert&&(ut.invert=function(yt,kt){var Mt=(yt+kt)*x,Ft=(kt-yt)*x,ln=y(Mt)<.5*tt&&y(Ft)<.5*tt;if(!ln){var un=tt*x,an=Mt>0^Ft>0?-1:1,vn=-an*yt+(Ft>0?1:-1)*un,Dn=-an*kt+(Mt>0?1:-1)*un;Mt=(-vn-Dn)*x,Ft=(vn-Dn)*x}var Nn=We.invert(Mt,Ft);return ln||(Nn[0]+=Mt>0?_:-_),Nn}),g.geoProjection(ut).rotate([-90,-90,45]).clipAngle(179.999)}function la(){return sa(Vt).scale(111.48)}function lo(We){var tt=d(We);function ut(yt,kt){var Mt=tt?h(yt*tt/2)/tt:yt/2;if(!kt)return[2*Mt,-We];var Ft=2*e(Mt*d(kt)),ln=1/h(kt);return[d(Ft)*ln,kt+(1-t(Ft))*ln-We]}return ut.invert=function(yt,kt){if(y(kt+=We)<a)return[tt?2*e(tt*yt/2)/tt:yt,0];var Mt,Ft=yt*yt+kt*kt,ln=0,un=10;do{var an=h(ln),vn=1/t(ln),Dn=Ft-2*kt*ln+ln*ln;ln-=Mt=(an*Dn+2*(ln-kt))/(2+Dn*vn*vn+2*(ln-kt)*an)}while(y(Mt)>a&&--un>0);var Nn=yt*(an=h(ln)),Fn=h(y(kt)<y(ln+1/an)?.5*L(Nn):.5*S(Nn)+_/4)/d(ln);return[tt?2*e(tt*Fn)/tt:2*Fn,ln]},ut}var Ki=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function po(We,tt){var ut,yt=i(18,36*y(tt)/_),kt=n(yt),Mt=yt-kt,Ft=(ut=Ki[kt])[0],ln=ut[1],un=(ut=Ki[++kt])[0],an=ut[1],vn=(ut=Ki[i(19,++kt)])[0],Dn=ut[1];return[We*(un+Mt*(vn-Ft)/2+Mt*Mt*(vn-2*un+Ft)/2),(tt>0?c:-c)*(an+Mt*(Dn-ln)/2+Mt*Mt*(Dn-2*an+ln)/2)]}function Po(We,tt){var ut=function(Ft){function ln(un,an){var vn=t(an),Dn=(Ft-1)/(Ft-vn*t(un));return[Dn*vn*d(un),Dn*d(an)]}return ln.invert=function(un,an){var vn=un*un+an*an,Dn=E(vn),Nn=(Ft-E(1-vn*(Ft+1)/(Ft-1)))/((Ft-1)/Dn+Dn/(Ft-1));return[r(un*Nn,Dn*E(1-Nn*Nn)),Dn?L(an*Nn/Dn):0]},ln}(We);if(!tt)return ut;var yt=t(tt),kt=d(tt);function Mt(Ft,ln){var un=ut(Ft,ln),an=un[1],vn=an*kt/(We-1)+yt;return[un[0]*yt/vn,an/vn]}return Mt.invert=function(Ft,ln){var un=(We-1)/(We-1-ln*kt);return ut.invert(un*Ft,un*ln*yt)},Mt}Ki.forEach(function(We){We[1]*=1.0144}),po.invert=function(We,tt){var ut=tt/c,yt=90*ut,kt=i(18,y(yt/5)),Mt=l(0,n(kt));do{var Ft=Ki[Mt][1],ln=Ki[Mt+1][1],un=Ki[i(19,Mt+2)][1],an=un-Ft,vn=un-2*ln+Ft,Dn=2*(y(ut)-ln)/an,Nn=vn/an,Fn=Dn*(1-Nn*Dn*(1-2*Nn*Dn));if(Fn>=0||1===Mt){yt=(tt>=0?5:-5)*(Fn+kt);var $n,wr=50;do{Fn=(kt=i(18,y(yt)/5))-(Mt=n(kt)),Ft=Ki[Mt][1],ln=Ki[Mt+1][1],un=Ki[i(19,Mt+2)][1],yt-=($n=(tt>=0?c:-c)*(ln+Fn*(un-Ft)/2+Fn*Fn*(un-2*ln+Ft)/2)-tt)*C}while(y($n)>1e-12&&--wr>0);break}}while(--Mt>=0);var Lr=Ki[Mt][0],Zr=Ki[Mt+1][0],Qr=Ki[i(19,Mt+2)][0];return[We/(Zr+Fn*(Qr-Lr)/2+Fn*Fn*(Qr-2*Zr+Lr)/2),yt*P]};var Va=-179.9999,mo=179.9999,Ro=-89.9999;function Wo(We){return We.length>0}function Wa(We){return-90===We||90===We?[0,We]:[-180,(tt=We,Math.floor(1e4*tt)/1e4)];var tt}function Ia(We){var tt=We[0],ut=We[1],yt=!1;return tt<=Va?(tt=-180,yt=!0):tt>=mo&&(tt=180,yt=!0),ut<=Ro?(ut=-90,yt=!0):ut>=89.9999&&(ut=90,yt=!0),yt?[tt,ut]:We}function no(We){return We.map(Ia)}function xs(We,tt,ut){for(var yt=0,kt=We.length;yt<kt;++yt){var Mt=We[yt].slice();ut.push({index:-1,polygon:tt,ring:Mt});for(var Ft=0,ln=Mt.length;Ft<ln;++Ft){var un=Mt[Ft],an=un[0],vn=un[1];if(an<=Va||an>=mo||vn<=Ro||vn>=89.9999){Mt[Ft]=Ia(un);for(var Dn=Ft+1;Dn<ln;++Dn){var Nn=Mt[Dn],Fn=Nn[0],$n=Nn[1];if(Fn>Va&&Fn<mo&&$n>Ro&&$n<89.9999)break}if(Dn===Ft+1)continue;if(Ft){var wr={index:-1,polygon:tt,ring:Mt.slice(0,Ft+1)};wr.ring[wr.ring.length-1]=Wa(vn),ut[ut.length-1]=wr}else ut.pop();if(Dn>=ln)break;ut.push({index:-1,polygon:tt,ring:Mt=Mt.slice(Dn-1)}),Mt[0]=Wa(Mt[0][1]),Ft=-1,ln=Mt.length}}}}function ns(We){var tt,ut,yt,kt,Mt,Ft,ln=We.length,un={},an={};for(tt=0;tt<ln;++tt)(yt=(ut=We[tt]).ring[0])[0]!==(Mt=ut.ring[ut.ring.length-1])[0]||yt[1]!==Mt[1]?(ut.index=tt,un[yt]=an[Mt]=ut):(ut.polygon.push(ut.ring),We[tt]=null);for(tt=0;tt<ln;++tt)if(ut=We[tt]){if(kt=an[yt=ut.ring[0]],Ft=un[Mt=ut.ring[ut.ring.length-1]],delete un[yt],delete an[Mt],yt[0]===Mt[0]&&yt[1]===Mt[1]){ut.polygon.push(ut.ring);continue}kt?(delete an[yt],delete un[kt.ring[0]],kt.ring.pop(),We[kt.index]=null,ut={index:-1,polygon:kt.polygon,ring:kt.ring.concat(ut.ring)},kt===Ft?ut.polygon.push(ut.ring):(ut.index=ln++,We.push(un[ut.ring[0]]=an[ut.ring[ut.ring.length-1]]=ut))):Ft?(delete un[Mt],delete an[Ft.ring[Ft.ring.length-1]],ut.ring.pop(),ut={index:ln++,polygon:Ft.polygon,ring:ut.ring.concat(Ft.ring)},We[Ft.index]=null,We.push(un[ut.ring[0]]=an[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function ra(We){var tt={type:"Feature",geometry:Ls(We.geometry)};return null!=We.id&&(tt.id=We.id),null!=We.bbox&&(tt.bbox=We.bbox),null!=We.properties&&(tt.properties=We.properties),tt}function Ls(We){if(null==We)return We;var tt,ut,yt,kt;switch(We.type){case"GeometryCollection":tt={type:"GeometryCollection",geometries:We.geometries.map(Ls)};break;case"Point":tt={type:"Point",coordinates:Ia(We.coordinates)};break;case"MultiPoint":case"LineString":tt={type:We.type,coordinates:no(We.coordinates)};break;case"MultiLineString":tt={type:"MultiLineString",coordinates:We.coordinates.map(no)};break;case"Polygon":var Mt=[];xs(We.coordinates,Mt,ut=[]),ns(ut),tt={type:"Polygon",coordinates:Mt};break;case"MultiPolygon":ut=[],yt=-1,kt=We.coordinates.length;for(var Ft=new Array(kt);++yt<kt;)xs(We.coordinates[yt],Ft[yt]=[],ut);ns(ut),tt={type:"MultiPolygon",coordinates:Ft.filter(Wo)};break;default:return We}return null!=We.bbox&&(tt.bbox=We.bbox),tt}function ws(We,tt){var ut=h(tt/2),yt=d(T*ut);return[We*(.74482-.34588*yt*yt),1.70711*ut]}function Ys(We,tt,ut){var yt=g.geoInterpolate(tt,ut),kt=yt(.5),Mt=g.geoRotation([-kt[0],-kt[1]])(tt),Ft=yt.distance/2,ln=-L(d(Mt[1]*P)/d(Ft)),un=[-kt[0],-kt[1],-(Mt[0]>0?_-ln:ln)*C],an=g.geoProjection(We(Ft)).rotate(un),vn=g.geoRotation(un),Dn=an.center;return delete an.rotate,an.center=function(Nn){return arguments.length?Dn(vn(Nn)):vn.invert(Dn())},an.clipAngle(90)}function Qs(We){var tt=t(We);function ut(yt,kt){var Mt=g.geoGnomonicRaw(yt,kt);return Mt[0]*=tt,Mt}return ut.invert=function(yt,kt){return g.geoGnomonicRaw.invert(yt/tt,kt)},ut}function Zs(We,tt){return Ys(Qs,We,tt)}function Us(We){if(!(We*=2))return g.geoAzimuthalEquidistantRaw;var tt=-We/2,ut=-tt,yt=We*We,kt=h(ut),Mt=.5/d(ut);function Ft(ln,un){var an=S(t(un)*t(ln-tt)),vn=S(t(un)*t(ln-ut));return[((an*=an)-(vn*=vn))/(2*We),(un<0?-1:1)*E(4*yt*vn-(yt-an+vn)*(yt-an+vn))/(2*We)]}return Ft.invert=function(ln,un){var an,vn,Dn=un*un,Nn=t(E(Dn+(an=ln+tt)*an)),Fn=t(E(Dn+(an=ln+ut)*an));return[r(vn=Nn-Fn,an=(Nn+Fn)*kt),(un<0?-1:1)*S(E(an*an+vn*vn)*Mt)]},Ft}function Vo(We,tt){return Ys(Us,We,tt)}function Xo(We,tt){if(y(tt)<a)return[We,0];var ut=y(tt/c),yt=L(ut);if(y(We)<a||y(y(tt)-c)<a)return[0,s(tt)*_*h(yt/2)];var kt=t(yt),Mt=y(_/We-We/_)/2,Ft=Mt*Mt,ln=kt/(ut+kt-1),un=ln*(2/ut-1),an=un*un,vn=an+Ft,Dn=ln-an,Nn=Ft+ln;return[s(We)*_*(Mt*Dn+E(Ft*Dn*Dn-vn*(ln*ln-an)))/vn,s(tt)*_*(un*Nn-Mt*E((Ft+1)*vn-Nn*Nn))/vn]}function rs(We,tt){if(y(tt)<a)return[We,0];var ut=y(tt/c),yt=L(ut);if(y(We)<a||y(y(tt)-c)<a)return[0,s(tt)*_*h(yt/2)];var kt=t(yt),Mt=y(_/We-We/_)/2,Ft=Mt*Mt,ln=kt*(E(1+Ft)-Mt*kt)/(1+Ft*ut*ut);return[s(We)*_*ln,s(tt)*_*E(1-ln*(2*Mt+ln))]}function $o(We,tt){if(y(tt)<a)return[We,0];var ut=tt/c,yt=L(ut);if(y(We)<a||y(y(tt)-c)<a)return[0,_*h(yt/2)];var kt=(_/We-We/_)/2,Mt=ut/(1+t(yt));return[_*(s(We)*E(kt*kt+1-Mt*Mt)-kt),_*Mt]}function Jo(We,tt){if(!tt)return[We,0];var ut=y(tt);if(!We||ut===c)return[0,tt];var yt=ut/c,kt=yt*yt,Mt=(8*yt-kt*(kt+2)-5)/(2*kt*(yt-1)),Ft=Mt*Mt,ln=yt*Mt,un=kt+Ft+2*ln,an=yt+3*Mt,vn=We/c,Dn=vn+1/vn,Nn=s(y(We)-c)*E(Dn*Dn-4),Fn=Nn*Nn,$n=(Nn*(un+Ft-1)+2*E(un*(kt+Ft*Fn-1)+(1-kt)*(kt*(an*an+4*Ft)+12*ln*Ft+4*Ft*Ft)))/(4*un+Fn);return[s(We)*c*$n,s(tt)*c*E(1+Nn*y($n)-$n*$n)]}function Ts(We,tt,ut,yt){var kt=_/3;We=l(We,a),tt=l(tt,a),We=i(We,c),tt=i(tt,_-a),ut=l(ut,0),ut=i(ut,100-a);var Mt=(yt=l(yt,a))/100,Ft=S((ut/100+1)*t(kt))/kt,ln=d(We)/d(Ft*c),un=tt/_,an=E(Mt*d(We/2)/d(tt/2));return function(vn,Dn,Nn,Fn,$n){function wr(Lr,Zr){var Qr=Nn*d(Fn*Zr),Kr=E(1-Qr*Qr),$r=E(2/(1+Kr*t(Lr*=$n)));return[vn*Kr*$r*d(Lr),Dn*Qr*$r]}return wr.invert=function(Lr,Zr){var Qr=Lr/vn,Kr=Zr/Dn,$r=E(Qr*Qr+Kr*Kr),Li=2*L($r/2);return[r(Lr*h(Li),vn*$r)/$n,$r&&L(Zr*d(Li)/(Dn*Nn*$r))/Fn]},wr}(an/E(un*ln*Ft),1/(an*E(un*ln*Ft)),ln,Ft,un)}function So(){var We=65*P,tt=60*P,ut=20,yt=200,kt=g.geoProjectionMutator(Ts),Mt=kt(We,tt,ut,yt);return Mt.poleline=function(Ft){return arguments.length?kt(We=+Ft*P,tt,ut,yt):We*C},Mt.parallels=function(Ft){return arguments.length?kt(We,tt=+Ft*P,ut,yt):tt*C},Mt.inflation=function(Ft){return arguments.length?kt(We,tt,ut=+Ft,yt):ut},Mt.ratio=function(Ft){return arguments.length?kt(We,tt,ut,yt=+Ft):yt},Mt.scale(163.775)}ws.invert=function(We,tt){var ut=tt/1.70711,yt=d(T*ut);return[We/(.74482-.34588*yt*yt),2*e(ut)]},Xo.invert=function(We,tt){if(y(tt)<a)return[We,0];if(y(We)<a)return[0,c*d(2*e(tt/_))];var ut=(We/=_)*We,yt=(tt/=_)*tt,kt=ut+yt,Mt=kt*kt,Ft=-y(tt)*(1+kt),ln=Ft-2*yt+ut,un=-2*Ft+1+2*yt+Mt,an=yt/un+(2*ln*ln*ln/(un*un*un)-9*Ft*ln/(un*un))/27,vn=(Ft-ln*ln/(3*un))/un,Dn=2*E(-vn/3),Nn=S(3*an/(vn*Dn))/3;return[_*(kt-1+E(1+2*(ut-yt)+Mt))/(2*We),s(tt)*_*(-Dn*t(Nn+_/3)-ln/(3*un))]},rs.invert=function(We,tt){if(!We)return[0,c*d(2*e(tt/_))];var ut=y(We/_),yt=(1-ut*ut-(tt/=_)*tt)/(2*ut),kt=E(yt*yt+1);return[s(We)*_*(kt-yt),s(tt)*c*d(2*r(E((1-2*yt*ut)*(yt+kt)-ut),E(kt+yt+ut)))]},$o.invert=function(We,tt){if(!tt)return[We,0];var ut=tt/_,yt=(_*_*(1-ut*ut)-We*We)/(2*_*We);return[We?_*(s(We)*E(yt*yt+1)-yt):0,c*d(2*e(ut))]},Jo.invert=function(We,tt){var ut;if(!We||!tt)return[We,tt];tt/=_;var yt=s(We)*We/c,kt=(yt*yt-1+4*tt*tt)/y(yt),Mt=kt*kt,Ft=2*tt,ln=50;do{var un=Ft*Ft,an=(8*Ft-un*(un+2)-5)/(2*un*(Ft-1)),vn=(3*Ft-un*Ft-10)/(2*un*Ft),Dn=an*an,Nn=Ft*an,Fn=Ft+an,$n=Fn*Fn,wr=Ft+3*an,Lr=-2*Fn*(4*Nn*Dn+(1-4*un+3*un*un)*(1+vn)+Dn*(14*un-6-Mt+(8*un-8-2*Mt)*vn)+Nn*(12*un-8+(10*un-10-Mt)*vn)),Zr=E($n*(un+Dn*Mt-1)+(1-un)*(un*(wr*wr+4*Dn)+Dn*(12*Nn+4*Dn)));Ft-=ut=(kt*($n+Dn-1)+2*Zr-yt*(4*$n+Mt))/(kt*(2*an*vn+2*Fn*(1+vn))+Lr/Zr-8*Fn*(kt*(-1+Dn+$n)+2*Zr)*(1+vn)/(Mt+4*$n))}while(ut>a&&--ln>0);return[s(We)*(E(kt*kt+4)+kt)*_/4,c*Ft]};var Hs=4*_+3*E(3),go=2*E(2*_*E(3)/Hs),ds=le(go*E(3)/_,go,Hs/6);function Is(We,tt){return[We*E(1-3*tt*tt/(_*_)),tt]}function Ko(We,tt){var ut=t(tt),yt=t(We)*ut,kt=1-yt,Mt=t(We=r(d(We)*ut,-d(tt))),Ft=d(We);return[Ft*(ut=E(1-yt*yt))-Mt*kt,-Mt*ut-Ft*kt]}function oa(We,tt){var ut=G(We,tt);return[(ut[0]+We/c)/2,(ut[1]+tt)/2]}Is.invert=function(We,tt){return[We/E(1-3*tt*tt/(_*_)),tt]},Ko.invert=function(We,tt){var ut=(We*We+tt*tt)/-2,yt=E(-ut*(2+ut)),kt=tt*ut+We*yt,Mt=We*ut-tt*yt,Ft=E(Mt*Mt+kt*kt);return[r(yt*kt,Ft*(1+ut)),Ft?-L(yt*Mt/Ft):0]},oa.invert=function(We,tt){var ut=We,yt=tt,kt=25;do{var Mt,Ft=t(yt),ln=d(yt),un=d(2*yt),an=ln*ln,vn=Ft*Ft,Dn=d(ut),Nn=t(ut/2),Fn=d(ut/2),$n=Fn*Fn,wr=1-vn*Nn*Nn,Lr=wr?S(Ft*Nn)*E(Mt=1/wr):Mt=0,Zr=.5*(2*Lr*Ft*Fn+ut/c)-We,Qr=.5*(Lr*ln+yt)-tt,Kr=.5*Mt*(vn*$n+Lr*Ft*Nn*an)+.5/c,$r=Mt*(Dn*un/4-Lr*ln*Fn),Li=.125*Mt*(un*Fn-Lr*ln*vn*Dn),Gi=.5*Mt*(an*Nn+Lr*$n*Ft)+.5,ia=$r*Li-Gi*Kr,Wi=(Qr*$r-Zr*Gi)/ia,aa=(Zr*Li-Qr*Kr)/ia;ut-=Wi,yt-=aa}while((y(Wi)>a||y(aa)>a)&&--kt>0);return[ut,yt]},p.geoNaturalEarth=g.geoNaturalEarth1,p.geoNaturalEarthRaw=g.geoNaturalEarth1Raw,p.geoAiry=function(){var We=c,tt=g.geoProjectionMutator(q),ut=tt(We);return ut.radius=function(yt){return arguments.length?tt(We=yt*P):We*C},ut.scale(179.976).clipAngle(147)},p.geoAiryRaw=q,p.geoAitoff=function(){return g.geoProjection(G).scale(152.63)},p.geoAitoffRaw=G,p.geoArmadillo=function(){var We=20*P,tt=We>=0?1:-1,ut=h(tt*We),yt=g.geoProjectionMutator(K),kt=yt(We),Mt=kt.stream;return kt.parallel=function(Ft){return arguments.length?(ut=h((tt=(We=Ft*P)>=0?1:-1)*We),yt(We)):We*C},kt.stream=function(Ft){var ln=kt.rotate(),un=Mt(Ft),an=(kt.rotate([0,0]),Mt(Ft)),vn=kt.precision();return kt.rotate(ln),un.sphere=function(){an.polygonStart(),an.lineStart();for(var Dn=-180*tt;tt*Dn<180;Dn+=90*tt)an.point(Dn,90*tt);if(We)for(;tt*(Dn-=3*tt*vn)>=-180;)an.point(Dn,tt*-r(t(Dn*P/2),ut)*C);an.lineEnd(),an.polygonEnd()},un},kt.scale(218.695).center([0,28.0974])},p.geoArmadilloRaw=K,p.geoAugust=function(){return g.geoProjection(ne).scale(66.1603)},p.geoAugustRaw=ne,p.geoBaker=function(){return g.geoProjection(se).scale(112.314)},p.geoBakerRaw=se,p.geoBerghaus=function(){var We=5,tt=g.geoProjectionMutator(V),ut=tt(We),yt=ut.stream,kt=-t(.01*P),Mt=d(.01*P);return ut.lobes=function(Ft){return arguments.length?tt(We=+Ft):We},ut.stream=function(Ft){var ln=ut.rotate(),un=yt(Ft),an=(ut.rotate([0,0]),yt(Ft));return ut.rotate(ln),un.sphere=function(){an.polygonStart(),an.lineStart();for(var vn=0,Dn=360/We,Nn=2*_/We,Fn=90-180/We,$n=c;vn<We;++vn,Fn-=Dn,$n-=Nn)an.point(r(Mt*t($n),kt)*C,L(Mt*d($n))*C),Fn<-90?(an.point(-90,-180-Fn-.01),an.point(-90,-180-Fn+.01)):(an.point(90,Fn+.01),an.point(90,Fn-.01));an.lineEnd(),an.polygonEnd()},un},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},p.geoBerghausRaw=V,p.geoBertin1953=function(){return g.geoProjection(te()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},p.geoBertin1953Raw=te,p.geoBoggs=function(){return g.geoProjection(be).scale(160.857)},p.geoBoggsRaw=be,p.geoBonne=function(){return he(De).scale(123.082).center([0,26.1441]).parallel(45)},p.geoBonneRaw=De,p.geoBottomley=function(){var We=.5,tt=g.geoProjectionMutator(Se),ut=tt(We);return ut.fraction=function(yt){return arguments.length?tt(We=+yt):We},ut.scale(158.837)},p.geoBottomleyRaw=Se,p.geoBromley=function(){return g.geoProjection(ke).scale(152.63)},p.geoBromleyRaw=ke,p.geoChamberlin=Ne,p.geoChamberlinRaw=Le,p.geoChamberlinAfrica=function(){return Ne([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},p.geoCollignon=function(){return g.geoProjection(Be).scale(95.6464).center([0,30])},p.geoCollignonRaw=Be,p.geoCraig=function(){return he(He).scale(249.828).clipAngle(90)},p.geoCraigRaw=He,p.geoCraster=function(){return g.geoProjection(it).scale(156.19)},p.geoCrasterRaw=it,p.geoCylindricalEqualArea=function(){return he(ze).parallel(38.58).scale(195.044)},p.geoCylindricalEqualAreaRaw=ze,p.geoCylindricalStereographic=function(){return he(je).scale(124.75)},p.geoCylindricalStereographicRaw=je,p.geoEckert1=function(){return g.geoProjection(qe).scale(165.664)},p.geoEckert1Raw=qe,p.geoEckert2=function(){return g.geoProjection(Ye).scale(165.664)},p.geoEckert2Raw=Ye,p.geoEckert3=function(){return g.geoProjection(ct).scale(180.739)},p.geoEckert3Raw=ct,p.geoEckert4=function(){return g.geoProjection(vt).scale(180.739)},p.geoEckert4Raw=vt,p.geoEckert5=function(){return g.geoProjection(wt).scale(173.044)},p.geoEckert5Raw=wt,p.geoEckert6=function(){return g.geoProjection(Ot).scale(173.044)},p.geoEckert6Raw=Ot,p.geoEisenlohr=function(){return g.geoProjection(ft).scale(62.5271)},p.geoEisenlohrRaw=ft,p.geoFahey=function(){return g.geoProjection(Ct).scale(137.152)},p.geoFaheyRaw=Ct,p.geoFoucaut=function(){return g.geoProjection($t).scale(135.264)},p.geoFoucautRaw=$t,p.geoFoucautSinusoidal=function(){var We=.5,tt=g.geoProjectionMutator(rn),ut=tt(We);return ut.alpha=function(yt){return arguments.length?tt(We=+yt):We},ut.scale(168.725)},p.geoFoucautSinusoidalRaw=rn,p.geoGilbert=function(We){null==We&&(We=g.geoOrthographic);var tt=We(),ut=g.geoEquirectangular().scale(C).precision(0).clipAngle(null).translate([0,0]);function yt(Mt){return tt(hn(Mt))}function kt(Mt){yt[Mt]=function(){return arguments.length?(tt[Mt].apply(tt,arguments),yt):tt[Mt]()}}return tt.invert&&(yt.invert=function(Mt){return cn(tt.invert(Mt))}),yt.stream=function(Mt){var Ft=tt.stream(Mt),ln=ut.stream({point:function(un,an){Ft.point(un/2,L(h(-an/2*P))*C)},lineStart:function(){Ft.lineStart()},lineEnd:function(){Ft.lineEnd()},polygonStart:function(){Ft.polygonStart()},polygonEnd:function(){Ft.polygonEnd()}});return ln.sphere=Ft.sphere,ln},yt.rotate=function(Mt){return arguments.length?(ut.rotate(Mt),yt):ut.rotate()},yt.center=function(Mt){return arguments.length?(tt.center(hn(Mt)),yt):cn(tt.center())},kt("angle"),kt("clipAngle"),kt("clipExtent"),kt("fitExtent"),kt("fitHeight"),kt("fitSize"),kt("fitWidth"),kt("scale"),kt("translate"),kt("precision"),yt.scale(249.5)},p.geoGingery=function(){var We=6,tt=30*P,ut=t(tt),yt=d(tt),kt=g.geoProjectionMutator(mn),Mt=kt(tt,We),Ft=Mt.stream,ln=-t(.01*P),un=d(.01*P);return Mt.radius=function(an){return arguments.length?(ut=t(tt=an*P),yt=d(tt),kt(tt,We)):tt*C},Mt.lobes=function(an){return arguments.length?kt(tt,We=+an):We},Mt.stream=function(an){var vn=Mt.rotate(),Dn=Ft(an),Nn=(Mt.rotate([0,0]),Ft(an));return Mt.rotate(vn),Dn.sphere=function(){Nn.polygonStart(),Nn.lineStart();for(var Fn=0,$n=2*_/We,wr=0;Fn<We;++Fn,wr-=$n)Nn.point(r(un*t(wr),ln)*C,L(un*d(wr))*C),Nn.point(r(yt*t(wr-$n/2),ut)*C,L(yt*d(wr-$n/2))*C);Nn.lineEnd(),Nn.polygonEnd()},Dn},Mt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},p.geoGingeryRaw=mn,p.geoGinzburg4=function(){return g.geoProjection(ye).scale(149.995)},p.geoGinzburg4Raw=ye,p.geoGinzburg5=function(){return g.geoProjection(Ce).scale(153.93)},p.geoGinzburg5Raw=Ce,p.geoGinzburg6=function(){return g.geoProjection(Ue).scale(130.945)},p.geoGinzburg6Raw=Ue,p.geoGinzburg8=function(){return g.geoProjection(Qe).scale(131.747)},p.geoGinzburg8Raw=Qe,p.geoGinzburg9=function(){return g.geoProjection(rt).scale(131.087)},p.geoGinzburg9Raw=rt,p.geoGringorten=function(){return g.geoProjection(Ke(gt)).scale(239.75)},p.geoGringortenRaw=gt,p.geoGuyou=function(){return g.geoProjection(Ke(Vt)).scale(151.496)},p.geoGuyouRaw=Vt,p.geoHammer=function(){var We=2,tt=g.geoProjectionMutator(j),ut=tt(We);return ut.coefficient=function(yt){return arguments.length?tt(We=+yt):We},ut.scale(169.529)},p.geoHammerRaw=j,p.geoHammerRetroazimuthal=function(){var We=0,tt=g.geoProjectionMutator(dt),ut=tt(We),yt=ut.rotate,kt=ut.stream,Mt=g.geoCircle();return ut.parallel=function(Ft){if(!arguments.length)return We*C;var ln=ut.rotate();return tt(We=Ft*P).rotate(ln)},ut.rotate=function(Ft){return arguments.length?(yt.call(ut,[Ft[0],Ft[1]-We*C]),Mt.center([-Ft[0],-Ft[1]]),ut):((Ft=yt.call(ut))[1]+=We*C,Ft)},ut.stream=function(Ft){return(Ft=kt(Ft)).sphere=function(){Ft.polygonStart();var ln,un=Mt.radius(89.99)().coordinates[0],an=un.length-1,vn=-1;for(Ft.lineStart();++vn<an;)Ft.point((ln=un[vn])[0],ln[1]);for(Ft.lineEnd(),an=(un=Mt.radius(90.01)().coordinates[0]).length-1,Ft.lineStart();--vn>=0;)Ft.point((ln=un[vn])[0],ln[1]);Ft.lineEnd(),Ft.polygonEnd()},Ft},ut.scale(79.4187).parallel(45).clipAngle(179.999)},p.geoHammerRetroazimuthalRaw=dt,p.geoHealpix=function(){var We=4,tt=g.geoProjectionMutator(jt),ut=tt(We),yt=ut.stream;return ut.lobes=function(kt){return arguments.length?tt(We=+kt):We},ut.stream=function(kt){var Mt=ut.rotate(),Ft=yt(kt),ln=(ut.rotate([0,0]),yt(kt));return ut.rotate(Mt),Ft.sphere=function(){var un,an;g.geoStream((an=[].concat(b.range(-180,180+(un=180/We)/2,un).map(Ie),b.range(180,-180-un/2,-un).map(et)),{type:"Polygon",coordinates:[180===un?an.map(ht):an]}),ln)},Ft},ut.scale(239.75)},p.geoHealpixRaw=jt,p.geoHill=function(){var We=1,tt=g.geoProjectionMutator(xt),ut=tt(We);return ut.ratio=function(yt){return arguments.length?tt(We=+yt):We},ut.scale(167.774).center([0,18.67])},p.geoHillRaw=xt,p.geoHomolosine=function(){return g.geoProjection(Xt).scale(152.63)},p.geoHomolosineRaw=Xt,p.geoHufnagel=function(){var We=1,tt=0,ut=45*P,yt=2,kt=g.geoProjectionMutator(tn),Mt=kt(We,tt,ut,yt);return Mt.a=function(Ft){return arguments.length?kt(We=+Ft,tt,ut,yt):We},Mt.b=function(Ft){return arguments.length?kt(We,tt=+Ft,ut,yt):tt},Mt.psiMax=function(Ft){return arguments.length?kt(We,tt,ut=+Ft*P,yt):ut*C},Mt.ratio=function(Ft){return arguments.length?kt(We,tt,ut,yt=+Ft):yt},Mt.scale(180.739)},p.geoHufnagelRaw=tn,p.geoHyperelliptical=function(){var We=0,tt=2.5,ut=1.183136,yt=g.geoProjectionMutator(kn),kt=yt(We,tt,ut);return kt.alpha=function(Mt){return arguments.length?yt(We=+Mt,tt,ut):We},kt.k=function(Mt){return arguments.length?yt(We,tt=+Mt,ut):tt},kt.gamma=function(Mt){return arguments.length?yt(We,tt,ut=+Mt):ut},kt.scale(152.63)},p.geoHyperellipticalRaw=kn,p.geoInterrupt=fn,p.geoInterruptedBoggs=function(){return fn(be,dn).scale(160.857)},p.geoInterruptedHomolosine=function(){return fn(Xt,Mn).scale(152.63)},p.geoInterruptedMollweide=function(){return fn(ce,En).scale(169.529)},p.geoInterruptedMollweideHemispheres=function(){return fn(ce,jn).scale(169.529).rotate([20,0])},p.geoInterruptedSinuMollweide=function(){return fn(Rt,er,U).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},p.geoInterruptedSinusoidal=function(){return fn(xe,nr).scale(152.63).rotate([-20,0])},p.geoKavrayskiy7=function(){return g.geoProjection(mr).scale(158.837)},p.geoKavrayskiy7Raw=mr,p.geoLagrange=function(){var We=.5,tt=g.geoProjectionMutator(Dr),ut=tt(We);return ut.spacing=function(yt){return arguments.length?tt(We=+yt):We},ut.scale(124.75)},p.geoLagrangeRaw=Dr,p.geoLarrivee=function(){return g.geoProjection(Wr).scale(97.2672)},p.geoLarriveeRaw=Wr,p.geoLaskowski=function(){return g.geoProjection(kr).scale(139.98)},p.geoLaskowskiRaw=kr,p.geoLittrow=function(){return g.geoProjection(Or).scale(144.049).clipAngle(89.999)},p.geoLittrowRaw=Or,p.geoLoximuthal=function(){return he(Hr).parallel(40).scale(158.837)},p.geoLoximuthalRaw=Hr,p.geoMiller=function(){return g.geoProjection(oi).scale(108.318)},p.geoMillerRaw=oi,p.geoModifiedStereographic=Rr,p.geoModifiedStereographicRaw=Qn,p.geoModifiedStereographicAlaska=function(){return Rr(Ir,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},p.geoModifiedStereographicGs48=function(){return Rr(Tr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},p.geoModifiedStereographicGs50=function(){return Rr(ar,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},p.geoModifiedStereographicMiller=function(){return Rr(Jr,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},p.geoModifiedStereographicLee=function(){return Rr(ri,[165,10]).scale(250).clipAngle(130).center([-165,-10])},p.geoMollweide=function(){return g.geoProjection(ce).scale(169.529)},p.geoMollweideRaw=ce,p.geoMtFlatPolarParabolic=function(){return g.geoProjection(pn).scale(164.859)},p.geoMtFlatPolarParabolicRaw=pn,p.geoMtFlatPolarQuartic=function(){return g.geoProjection(Ln).scale(188.209)},p.geoMtFlatPolarQuarticRaw=Ln,p.geoMtFlatPolarSinusoidal=function(){return g.geoProjection(Ut).scale(166.518)},p.geoMtFlatPolarSinusoidalRaw=Ut,p.geoNaturalEarth2=function(){return g.geoProjection(xn).scale(175.295)},p.geoNaturalEarth2Raw=xn,p.geoNellHammer=function(){return g.geoProjection(Sn).scale(152.63)},p.geoNellHammerRaw=Sn,p.geoInterruptedQuarticAuthalic=function(){return fn(j(1/0),Kn).rotate([20,0]).scale(152.63)},p.geoNicolosi=function(){return g.geoProjection(Jn).scale(127.267)},p.geoNicolosiRaw=Jn,p.geoPatterson=function(){return g.geoProjection(Xn).scale(139.319)},p.geoPattersonRaw=Xn,p.geoPolyconic=function(){return g.geoProjection(Un).scale(103.74)},p.geoPolyconicRaw=Un,p.geoPolyhedral=or,p.geoPolyhedralButterfly=function(We){We=We||function(ut){var yt=g.geoCentroid({type:"MultiPoint",coordinates:ut});return g.geoGnomonic().scale(1).translate([0,0]).rotate([-yt[0],-yt[1]])};var tt=Nr.map(function(ut){return{face:ut,project:We(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,yt){var kt=tt[ut];kt&&(kt.children||(kt.children=[])).push(tt[yt])}),or(tt[0],function(ut,yt){return tt[ut<-_/2?yt<0?6:4:ut<0?yt<0?2:0:ut<_/2?yt<0?3:1:yt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},p.geoPolyhedralCollignon=function(We){We=We||function(ut){var yt=g.geoCentroid({type:"MultiPoint",coordinates:ut});return g.geoProjection(Br).translate([0,0]).scale(1).rotate(yt[1]>0?[-yt[0],0]:[180-yt[0],180])};var tt=Nr.map(function(ut){return{face:ut,project:We(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,yt){var kt=tt[ut];kt&&(kt.children||(kt.children=[])).push(tt[yt])}),or(tt[0],function(ut,yt){return tt[ut<-_/2?yt<0?6:4:ut<0?yt<0?2:0:ut<_/2?yt<0?3:1:yt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},p.geoPolyhedralWaterman=function(We){We=We||function(Mt){var Ft=6===Mt.length?g.geoCentroid({type:"MultiPoint",coordinates:Mt}):Mt[0];return g.geoGnomonic().scale(1).translate([0,0]).rotate([-Ft[0],-Ft[1]])};var tt=Nr.map(function(Mt){for(var Ft,ln=Mt.map(ci),un=ln.length,an=ln[un-1],vn=[],Dn=0;Dn<un;++Dn)vn.push(Xr([.9486832980505138*an[0]+.31622776601683794*(Ft=ln[Dn])[0],.9486832980505138*an[1]+.31622776601683794*Ft[1],.9486832980505138*an[2]+.31622776601683794*Ft[2]]),Xr([.9486832980505138*Ft[0]+.31622776601683794*an[0],.9486832980505138*Ft[1]+.31622776601683794*an[1],.9486832980505138*Ft[2]+.31622776601683794*an[2]])),an=Ft;return vn}),ut=[],yt=[-1,0,0,1,0,1,4,5];tt.forEach(function(Mt,Ft){for(var ln,un,an=Nr[Ft],vn=an.length,Dn=ut[Ft]=[],Nn=0;Nn<vn;++Nn)tt.push([an[Nn],Mt[(2*Nn+2)%(2*vn)],Mt[(2*Nn+1)%(2*vn)]]),yt.push(Ft),Dn.push((ln=ci(Mt[(2*Nn+2)%(2*vn)]),un=ci(Mt[(2*Nn+1)%(2*vn)]),[ln[1]*un[2]-ln[2]*un[1],ln[2]*un[0]-ln[0]*un[2],ln[0]*un[1]-ln[1]*un[0]]))});var kt=tt.map(function(Mt){return{project:We(Mt),face:Mt}});return yt.forEach(function(Mt,Ft){var ln=kt[Mt];ln&&(ln.children||(ln.children=[])).push(kt[Ft])}),or(kt[0],function(Mt,Ft){var ln=t(Ft),un=[ln*t(Mt),ln*d(Mt),d(Ft)],an=Mt<-_/2?Ft<0?6:4:Mt<0?Ft<0?2:0:Mt<_/2?Ft<0?3:1:Ft<0?7:5,vn=ut[an];return kt[qr(vn[0],un)<0?8+3*an:qr(vn[1],un)<0?8+3*an+1:qr(vn[2],un)<0?8+3*an+2:an]}).angle(-30).scale(110.625).center([0,45])},p.geoProject=function(We,tt){var ut,yt=tt.stream;if(!yt)throw new Error("invalid projection");switch(We&&We.type){case"Feature":ut=jr;break;case"FeatureCollection":ut=Hi;break;default:ut=pi}return ut(We,yt)},p.geoGringortenQuincuncial=function(){return sa(gt).scale(176.423)},p.geoPeirceQuincuncial=la,p.geoPierceQuincuncial=la,p.geoQuantize=function(We,tt){if(!(0<=(tt=+tt)&&tt<=20))throw new Error("invalid digits");function ut(an){var vn=an.length,Dn=2,Nn=new Array(vn);for(Nn[0]=+an[0].toFixed(tt),Nn[1]=+an[1].toFixed(tt);Dn<vn;)Nn[Dn]=an[Dn],++Dn;return Nn}function yt(an){return an.map(ut)}function kt(an){for(var vn=ut(an[0]),Dn=[vn],Nn=1;Nn<an.length;Nn++){var Fn=ut(an[Nn]);(Fn.length>2||Fn[0]!=vn[0]||Fn[1]!=vn[1])&&(Dn.push(Fn),vn=Fn)}return 1===Dn.length&&an.length>1&&Dn.push(ut(an[an.length-1])),Dn}function Mt(an){return an.map(kt)}function Ft(an){if(null==an)return an;var vn;switch(an.type){case"GeometryCollection":vn={type:"GeometryCollection",geometries:an.geometries.map(Ft)};break;case"Point":vn={type:"Point",coordinates:ut(an.coordinates)};break;case"MultiPoint":vn={type:an.type,coordinates:yt(an.coordinates)};break;case"LineString":vn={type:an.type,coordinates:kt(an.coordinates)};break;case"MultiLineString":case"Polygon":vn={type:an.type,coordinates:Mt(an.coordinates)};break;case"MultiPolygon":vn={type:"MultiPolygon",coordinates:an.coordinates.map(Mt)};break;default:return an}return null!=an.bbox&&(vn.bbox=an.bbox),vn}function ln(an){var vn={type:"Feature",properties:an.properties,geometry:Ft(an.geometry)};return null!=an.id&&(vn.id=an.id),null!=an.bbox&&(vn.bbox=an.bbox),vn}if(null!=We)switch(We.type){case"Feature":return ln(We);case"FeatureCollection":var un={type:"FeatureCollection",features:We.features.map(ln)};return null!=We.bbox&&(un.bbox=We.bbox),un;default:return Ft(We)}return We},p.geoQuincuncial=sa,p.geoRectangularPolyconic=function(){return he(lo).scale(131.215)},p.geoRectangularPolyconicRaw=lo,p.geoRobinson=function(){return g.geoProjection(po).scale(152.63)},p.geoRobinsonRaw=po,p.geoSatellite=function(){var We=2,tt=0,ut=g.geoProjectionMutator(Po),yt=ut(We,tt);return yt.distance=function(kt){return arguments.length?ut(We=+kt,tt):We},yt.tilt=function(kt){return arguments.length?ut(We,tt=kt*P):tt*C},yt.scale(432.147).clipAngle(S(1/We)*C-1e-6)},p.geoSatelliteRaw=Po,p.geoSinuMollweide=function(){return g.geoProjection(Rt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},p.geoSinuMollweideRaw=Rt,p.geoSinusoidal=function(){return g.geoProjection(xe).scale(152.63)},p.geoSinusoidalRaw=xe,p.geoStitch=function(We){if(null==We)return We;switch(We.type){case"Feature":return ra(We);case"FeatureCollection":var tt={type:"FeatureCollection",features:We.features.map(ra)};return null!=We.bbox&&(tt.bbox=We.bbox),tt;default:return Ls(We)}},p.geoTimes=function(){return g.geoProjection(ws).scale(146.153)},p.geoTimesRaw=ws,p.geoTwoPointAzimuthal=Zs,p.geoTwoPointAzimuthalRaw=Qs,p.geoTwoPointAzimuthalUsa=function(){return Zs([-158,21.5],[-77,39]).clipAngle(60).scale(400)},p.geoTwoPointEquidistant=Vo,p.geoTwoPointEquidistantRaw=Us,p.geoTwoPointEquidistantUsa=function(){return Vo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},p.geoVanDerGrinten=function(){return g.geoProjection(Xo).scale(79.4183)},p.geoVanDerGrintenRaw=Xo,p.geoVanDerGrinten2=function(){return g.geoProjection(rs).scale(79.4183)},p.geoVanDerGrinten2Raw=rs,p.geoVanDerGrinten3=function(){return g.geoProjection($o).scale(79.4183)},p.geoVanDerGrinten3Raw=$o,p.geoVanDerGrinten4=function(){return g.geoProjection(Jo).scale(127.16)},p.geoVanDerGrinten4Raw=Jo,p.geoWagner=So,p.geoWagner7=function(){return So().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},p.geoWagnerRaw=Ts,p.geoWagner4=function(){return g.geoProjection(ds).scale(176.84)},p.geoWagner4Raw=ds,p.geoWagner6=function(){return g.geoProjection(Is).scale(152.63)},p.geoWagner6Raw=Is,p.geoWiechel=function(){return g.geoProjection(Ko).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},p.geoWiechelRaw=Ko,p.geoWinkel3=function(){return g.geoProjection(oa).scale(158.837)},p.geoWinkel3Raw=oa,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-geo"),v("d3-array")):g(p.d3=p.d3||{},p.d3,p.d3)},{"d3-array":107,"d3-geo":114}],114:[function(v,ae,ie){var p,g;p=this,g=function(p,g){"use strict";function b(){return new y}function y(){this.reset()}y.prototype={constructor:y,reset:function(){this.s=this.t=0},add:function(Tt){r(e,Tt,this.t),r(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new y;function r(Tt,Gt,bn){var Qt=Tt.s=Gt+bn,wn=Qt-Gt;Tt.t=Gt-(Qt-wn)+(bn-wn)}var t=1e-6,o=Math.PI,n=o/2,m=o/4,l=2*o,i=180/o,f=o/180,u=Math.abs,s=Math.atan,d=Math.atan2,h=Math.cos,a=Math.ceil,_=Math.exp,c=Math.log,T=Math.pow,x=Math.sin,w=Math.sign||function(Tt){return Tt>0?1:Tt<0?-1:0},M=Math.sqrt,D=Math.tan;function C(Tt){return Tt>1?0:Tt<-1?o:Math.acos(Tt)}function P(Tt){return Tt>1?n:Tt<-1?-n:Math.asin(Tt)}function L(Tt){return(Tt=x(Tt/2))*Tt}function S(){}function E(Tt,Gt){Tt&&z.hasOwnProperty(Tt.type)&&z[Tt.type](Tt,Gt)}var N={Feature:function(Tt,Gt){E(Tt.geometry,Gt)},FeatureCollection:function(Tt,Gt){for(var bn=Tt.features,Qt=-1,wn=bn.length;++Qt<wn;)E(bn[Qt].geometry,Gt)}},z={Sphere:function(Tt,Gt){Gt.sphere()},Point:function(Tt,Gt){Gt.point((Tt=Tt.coordinates)[0],Tt[1],Tt[2])},MultiPoint:function(Tt,Gt){for(var bn=Tt.coordinates,Qt=-1,wn=bn.length;++Qt<wn;)Gt.point((Tt=bn[Qt])[0],Tt[1],Tt[2])},LineString:function(Tt,Gt){q(Tt.coordinates,Gt,0)},MultiLineString:function(Tt,Gt){for(var bn=Tt.coordinates,Qt=-1,wn=bn.length;++Qt<wn;)q(bn[Qt],Gt,0)},Polygon:function(Tt,Gt){G(Tt.coordinates,Gt)},MultiPolygon:function(Tt,Gt){for(var bn=Tt.coordinates,Qt=-1,wn=bn.length;++Qt<wn;)G(bn[Qt],Gt)},GeometryCollection:function(Tt,Gt){for(var bn=Tt.geometries,Qt=-1,wn=bn.length;++Qt<wn;)E(bn[Qt],Gt)}};function q(Tt,Gt,bn){var Qt,wn=-1,qn=Tt.length-bn;for(Gt.lineStart();++wn<qn;)Gt.point((Qt=Tt[wn])[0],Qt[1],Qt[2]);Gt.lineEnd()}function G(Tt,Gt){var bn=-1,Qt=Tt.length;for(Gt.polygonStart();++bn<Qt;)q(Tt[bn],Gt,1);Gt.polygonEnd()}function K(Tt,Gt){Tt&&N.hasOwnProperty(Tt.type)?N[Tt.type](Tt,Gt):E(Tt,Gt)}var ne,X,J,se,V,j=b(),H=b(),oe={point:S,lineStart:S,lineEnd:S,polygonStart:function(){j.reset(),oe.lineStart=U,oe.lineEnd=te},polygonEnd:function(){var Tt=+j;H.add(Tt<0?l+Tt:Tt),this.lineStart=this.lineEnd=this.point=S},sphere:function(){H.add(l)}};function U(){oe.point=ee}function te(){le(ne,X)}function ee(Tt,Gt){oe.point=le,ne=Tt,X=Gt,J=Tt*=f,se=h(Gt=(Gt*=f)/2+m),V=x(Gt)}function le(Tt,Gt){var bn=(Tt*=f)-J,Qt=bn>=0?1:-1,wn=Qt*bn,qn=h(Gt=(Gt*=f)/2+m),tr=x(Gt),pr=V*tr,Ar=se*qn+pr*h(wn),br=pr*Qt*x(wn);j.add(d(br,Ar)),J=Tt,se=qn,V=tr}function ce(Tt){return[d(Tt[1],Tt[0]),P(Tt[2])]}function pe(Tt){var Gt=Tt[0],bn=Tt[1],Qt=h(bn);return[Qt*h(Gt),Qt*x(Gt),x(bn)]}function de(Tt,Gt){return Tt[0]*Gt[0]+Tt[1]*Gt[1]+Tt[2]*Gt[2]}function be(Tt,Gt){return[Tt[1]*Gt[2]-Tt[2]*Gt[1],Tt[2]*Gt[0]-Tt[0]*Gt[2],Tt[0]*Gt[1]-Tt[1]*Gt[0]]}function he(Tt,Gt){Tt[0]+=Gt[0],Tt[1]+=Gt[1],Tt[2]+=Gt[2]}function xe(Tt,Gt){return[Tt[0]*Gt,Tt[1]*Gt,Tt[2]*Gt]}function De(Tt){var Gt=M(Tt[0]*Tt[0]+Tt[1]*Tt[1]+Tt[2]*Tt[2]);Tt[0]/=Gt,Tt[1]/=Gt,Tt[2]/=Gt}var Se,ke,Fe,ve,Te,Le,Oe,Ne,Be,He,Ve,it,ze,je,qe,Ye,ct,vt,wt,Ot,St,ft,st,Ct,$t,rn,hn=b(),cn={point:mn,lineStart:Xe,lineEnd:nt,polygonStart:function(){cn.point=ye,cn.lineStart=Ce,cn.lineEnd=Ue,hn.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),cn.point=mn,cn.lineStart=Xe,cn.lineEnd=nt,j<0?(Se=-(Fe=180),ke=-(ve=90)):hn>t?ve=90:hn<-t&&(ke=-90),He[0]=Se,He[1]=Fe},sphere:function(){Se=-(Fe=180),ke=-(ve=90)}};function mn(Tt,Gt){Be.push(He=[Se=Tt,Fe=Tt]),Gt<ke&&(ke=Gt),Gt>ve&&(ve=Gt)}function nn(Tt,Gt){var bn=pe([Tt*f,Gt*f]);if(Ne){var Qt=be(Ne,bn),wn=be([Qt[1],-Qt[0],0],Qt);De(wn),wn=ce(wn);var qn,tr=Tt-Te,pr=tr>0?1:-1,Ar=wn[0]*i*pr,br=u(tr)>180;br^(pr*Te<Ar&&Ar<pr*Tt)?(qn=wn[1]*i)>ve&&(ve=qn):br^(pr*Te<(Ar=(Ar+360)%360-180)&&Ar<pr*Tt)?(qn=-wn[1]*i)<ke&&(ke=qn):(Gt<ke&&(ke=Gt),Gt>ve&&(ve=Gt)),br?Tt<Te?Qe(Se,Tt)>Qe(Se,Fe)&&(Fe=Tt):Qe(Tt,Fe)>Qe(Se,Fe)&&(Se=Tt):Fe>=Se?(Tt<Se&&(Se=Tt),Tt>Fe&&(Fe=Tt)):Tt>Te?Qe(Se,Tt)>Qe(Se,Fe)&&(Fe=Tt):Qe(Tt,Fe)>Qe(Se,Fe)&&(Se=Tt)}else Be.push(He=[Se=Tt,Fe=Tt]);Gt<ke&&(ke=Gt),Gt>ve&&(ve=Gt),Ne=bn,Te=Tt}function Xe(){cn.point=nn}function nt(){He[0]=Se,He[1]=Fe,cn.point=mn,Ne=null}function ye(Tt,Gt){if(Ne){var bn=Tt-Te;hn.add(u(bn)>180?bn+(bn>0?360:-360):bn)}else Le=Tt,Oe=Gt;oe.point(Tt,Gt),nn(Tt,Gt)}function Ce(){oe.lineStart()}function Ue(){ye(Le,Oe),oe.lineEnd(),u(hn)>t&&(Se=-(Fe=180)),He[0]=Se,He[1]=Fe,Ne=null}function Qe(Tt,Gt){return(Gt-=Tt)<0?Gt+360:Gt}function rt(Tt,Gt){return Tt[0]-Gt[0]}function Ke(Tt,Gt){return Tt[0]<=Tt[1]?Tt[0]<=Gt&&Gt<=Tt[1]:Gt<Tt[0]||Tt[1]<Gt}var gt={sphere:S,point:mt,lineStart:Vt,lineEnd:Yt,polygonStart:function(){gt.lineStart=It,gt.lineEnd=jt},polygonEnd:function(){gt.lineStart=Vt,gt.lineEnd=Yt}};function mt(Tt,Gt){Tt*=f;var bn=h(Gt*=f);Lt(bn*h(Tt),bn*x(Tt),x(Gt))}function Lt(Tt,Gt,bn){++Ve,ze+=(Tt-ze)/Ve,je+=(Gt-je)/Ve,qe+=(bn-qe)/Ve}function Vt(){gt.point=dt}function dt(Tt,Gt){Tt*=f;var bn=h(Gt*=f);Ct=bn*h(Tt),$t=bn*x(Tt),rn=x(Gt),gt.point=bt,Lt(Ct,$t,rn)}function bt(Tt,Gt){Tt*=f;var bn=h(Gt*=f),Qt=bn*h(Tt),wn=bn*x(Tt),qn=x(Gt),tr=d(M((tr=$t*qn-rn*wn)*tr+(tr=rn*Qt-Ct*qn)*tr+(tr=Ct*wn-$t*Qt)*tr),Ct*Qt+$t*wn+rn*qn);it+=tr,Ye+=tr*(Ct+(Ct=Qt)),ct+=tr*($t+($t=wn)),vt+=tr*(rn+(rn=qn)),Lt(Ct,$t,rn)}function Yt(){gt.point=mt}function It(){gt.point=Ie}function jt(){et(ft,st),gt.point=mt}function Ie(Tt,Gt){ft=Tt,st=Gt,Tt*=f,Gt*=f,gt.point=et;var bn=h(Gt);Ct=bn*h(Tt),$t=bn*x(Tt),rn=x(Gt),Lt(Ct,$t,rn)}function et(Tt,Gt){Tt*=f;var bn=h(Gt*=f),Qt=bn*h(Tt),wn=bn*x(Tt),qn=x(Gt),tr=$t*qn-rn*wn,pr=rn*Qt-Ct*qn,Ar=Ct*wn-$t*Qt,br=M(tr*tr+pr*pr+Ar*Ar),Sr=P(br),Vr=br&&-Sr/br;wt+=Vr*tr,Ot+=Vr*pr,St+=Vr*Ar,it+=Sr,Ye+=Sr*(Ct+(Ct=Qt)),ct+=Sr*($t+($t=wn)),vt+=Sr*(rn+(rn=qn)),Lt(Ct,$t,rn)}function ht(Tt){return function(){return Tt}}function xt(Tt,Gt){function bn(Qt,wn){return Qt=Tt(Qt,wn),Gt(Qt[0],Qt[1])}return Tt.invert&&Gt.invert&&(bn.invert=function(Qt,wn){return(Qt=Gt.invert(Qt,wn))&&Tt.invert(Qt[0],Qt[1])}),bn}function Rt(Tt,Gt){return[u(Tt)>o?Tt+Math.round(-Tt/l)*l:Tt,Gt]}function Xt(Tt,Gt,bn){return(Tt%=l)?Gt||bn?xt(Kt(Tt),kn(Gt,bn)):Kt(Tt):Gt||bn?kn(Gt,bn):Rt}function tn(Tt){return function(Gt,bn){return[(Gt+=Tt)>o?Gt-l:Gt<-o?Gt+l:Gt,bn]}}function Kt(Tt){var Gt=tn(Tt);return Gt.invert=tn(-Tt),Gt}function kn(Tt,Gt){var bn=h(Tt),Qt=x(Tt),wn=h(Gt),qn=x(Gt);function tr(pr,Ar){var br=h(Ar),Sr=h(pr)*br,Vr=x(pr)*br,Mr=x(Ar),Ur=Mr*bn+Sr*Qt;return[d(Vr*wn-Ur*qn,Sr*bn-Mr*Qt),P(Ur*wn+Vr*qn)]}return tr.invert=function(pr,Ar){var br=h(Ar),Sr=h(pr)*br,Vr=x(pr)*br,Mr=x(Ar),Ur=Mr*wn-Vr*qn;return[d(Vr*wn+Mr*qn,Sr*bn+Ur*Qt),P(Ur*bn-Sr*Qt)]},tr}function Vn(Tt){function Gt(bn){return(bn=Tt(bn[0]*f,bn[1]*f))[0]*=i,bn[1]*=i,bn}return Tt=Xt(Tt[0]*f,Tt[1]*f,Tt.length>2?Tt[2]*f:0),Gt.invert=function(bn){return(bn=Tt.invert(bn[0]*f,bn[1]*f))[0]*=i,bn[1]*=i,bn},Gt}function Tn(Tt,Gt,bn,Qt,wn,qn){if(bn){var tr=h(Gt),pr=x(Gt),Ar=Qt*bn;null==wn?(wn=Gt+Qt*l,qn=Gt-Ar/2):(wn=sn(tr,wn),qn=sn(tr,qn),(Qt>0?wn<qn:wn>qn)&&(wn+=Qt*l));for(var br,Sr=wn;Qt>0?Sr>qn:Sr<qn;Sr-=Ar)br=ce([tr,-pr*h(Sr),-pr*x(Sr)]),Tt.point(br[0],br[1])}}function sn(Tt,Gt){(Gt=pe(Gt))[0]-=Tt,De(Gt);var bn=C(-Gt[1]);return((-Gt[2]<0?-bn:bn)+l-t)%l}function fn(){var Tt,Gt=[];return{point:function(bn,Qt,wn){Tt.push([bn,Qt,wn])},lineStart:function(){Gt.push(Tt=[])},lineEnd:S,rejoin:function(){Gt.length>1&&Gt.push(Gt.pop().concat(Gt.shift()))},result:function(){var bn=Gt;return Gt=[],Tt=null,bn}}}function dn(Tt,Gt){return u(Tt[0]-Gt[0])<t&&u(Tt[1]-Gt[1])<t}function Mn(Tt,Gt,bn,Qt){this.x=Tt,this.z=Gt,this.o=bn,this.e=Qt,this.v=!1,this.n=this.p=null}function En(Tt,Gt,bn,Qt,wn){var qn,tr,pr=[],Ar=[];if(Tt.forEach(function(ei){if(!((ai=ei.length-1)<=0)){var ai,yi,fr=ei[0],gi=ei[ai];if(dn(fr,gi)){if(!fr[2]&&!gi[2]){for(wn.lineStart(),qn=0;qn<ai;++qn)wn.point((fr=ei[qn])[0],fr[1]);return void wn.lineEnd()}gi[0]+=2*t}pr.push(yi=new Mn(fr,ei,null,!0)),Ar.push(yi.o=new Mn(fr,null,yi,!1)),pr.push(yi=new Mn(gi,ei,null,!1)),Ar.push(yi.o=new Mn(gi,null,yi,!0))}}),pr.length){for(Ar.sort(Gt),jn(pr),jn(Ar),qn=0,tr=Ar.length;qn<tr;++qn)Ar[qn].e=bn=!bn;for(var br,Sr,Vr=pr[0];;){for(var Mr=Vr,Ur=!0;Mr.v;)if((Mr=Mr.n)===Vr)return;br=Mr.z,wn.lineStart();do{if(Mr.v=Mr.o.v=!0,Mr.e){if(Ur)for(qn=0,tr=br.length;qn<tr;++qn)wn.point((Sr=br[qn])[0],Sr[1]);else Qt(Mr.x,Mr.n.x,1,wn);Mr=Mr.n}else{if(Ur)for(qn=(br=Mr.p.z).length-1;qn>=0;--qn)wn.point((Sr=br[qn])[0],Sr[1]);else Qt(Mr.x,Mr.p.x,-1,wn);Mr=Mr.p}br=(Mr=Mr.o).z,Ur=!Ur}while(!Mr.v);wn.lineEnd()}}}function jn(Tt){if(Gt=Tt.length){for(var Gt,bn,Qt=0,wn=Tt[0];++Qt<Gt;)wn.n=bn=Tt[Qt],bn.p=wn,wn=bn;wn.n=bn=Tt[0],bn.p=wn}}Rt.invert=Rt;var er=b();function nr(Tt){return u(Tt[0])<=o?Tt[0]:w(Tt[0])*((u(Tt[0])+o)%l-o)}function mr(Tt,Gt){var bn=nr(Gt),Qt=Gt[1],wn=x(Qt),qn=[x(bn),-h(bn),0],tr=0,pr=0;er.reset(),1===wn?Qt=n+t:-1===wn&&(Qt=-n-t);for(var Ar=0,br=Tt.length;Ar<br;++Ar)if(Vr=(Sr=Tt[Ar]).length)for(var Sr,Vr,Mr=Sr[Vr-1],Ur=nr(Mr),ei=Mr[1]/2+m,ai=x(ei),yi=h(ei),fr=0;fr<Vr;++fr,Ur=Je,ai=Bt,yi=Cn,Mr=gi){var gi=Sr[fr],Je=nr(gi),at=gi[1]/2+m,Bt=x(at),Cn=h(at),dr=Je-Ur,cr=dr>=0?1:-1,ki=cr*dr,Di=ki>o,_i=ai*Bt;if(er.add(d(_i*cr*x(ki),yi*Cn+_i*h(ki))),tr+=Di?dr+cr*l:dr,Di^Ur>=bn^Je>=bn){var $i=be(pe(Mr),pe(gi));De($i);var Bi=be(qn,$i);De(Bi);var Ta=(Di^dr>=0?-1:1)*P(Bi[2]);(Qt>Ta||Qt===Ta&&($i[0]||$i[1]))&&(pr+=Di^dr>=0?1:-1)}}return(tr<-t||tr<t&&er<-t)^1&pr}function Dr(Tt,Gt,bn,Qt){return function(wn){var qn,tr,pr,Ar=Gt(wn),br=fn(),Sr=Gt(br),Vr=!1,Mr={point:Ur,lineStart:ai,lineEnd:yi,polygonStart:function(){Mr.point=fr,Mr.lineStart=gi,Mr.lineEnd=Je,tr=[],qn=[]},polygonEnd:function(){Mr.point=Ur,Mr.lineStart=ai,Mr.lineEnd=yi,tr=g.merge(tr);var at=mr(qn,Qt);tr.length?(Vr||(wn.polygonStart(),Vr=!0),En(tr,Wr,at,bn,wn)):at&&(Vr||(wn.polygonStart(),Vr=!0),wn.lineStart(),bn(null,null,1,wn),wn.lineEnd()),Vr&&(wn.polygonEnd(),Vr=!1),tr=qn=null},sphere:function(){wn.polygonStart(),wn.lineStart(),bn(null,null,1,wn),wn.lineEnd(),wn.polygonEnd()}};function Ur(at,Bt){Tt(at,Bt)&&wn.point(at,Bt)}function ei(at,Bt){Ar.point(at,Bt)}function ai(){Mr.point=ei,Ar.lineStart()}function yi(){Mr.point=Ur,Ar.lineEnd()}function fr(at,Bt){pr.push([at,Bt]),Sr.point(at,Bt)}function gi(){Sr.lineStart(),pr=[]}function Je(){fr(pr[0][0],pr[0][1]),Sr.lineEnd();var at,Bt,Cn,dr,cr=Sr.clean(),ki=br.result(),Di=ki.length;if(pr.pop(),qn.push(pr),pr=null,Di)if(1&cr){if((Bt=(Cn=ki[0]).length-1)>0){for(Vr||(wn.polygonStart(),Vr=!0),wn.lineStart(),at=0;at<Bt;++at)wn.point((dr=Cn[at])[0],dr[1]);wn.lineEnd()}}else Di>1&&2&cr&&ki.push(ki.pop().concat(ki.shift())),tr.push(ki.filter(yr))}return Mr}}function yr(Tt){return Tt.length>1}function Wr(Tt,Gt){return((Tt=Tt.x)[0]<0?Tt[1]-n-t:n-Tt[1])-((Gt=Gt.x)[0]<0?Gt[1]-n-t:n-Gt[1])}var kr=Dr(function(){return!0},function(Tt){var Gt,bn=NaN,Qt=NaN,wn=NaN;return{lineStart:function(){Tt.lineStart(),Gt=1},point:function(qn,tr){var br,Sr,Vr,Mr,Ur,ei,ai,pr=qn>0?o:-o,Ar=u(qn-bn);u(Ar-o)<t?(Tt.point(bn,Qt=(Qt+tr)/2>0?n:-n),Tt.point(wn,Qt),Tt.lineEnd(),Tt.lineStart(),Tt.point(pr,Qt),Tt.point(qn,Qt),Gt=0):wn!==pr&&Ar>=o&&(u(bn-wn)<t&&(bn-=wn*t),u(qn-pr)<t&&(qn-=pr*t),Sr=Qt,Mr=tr,ai=x((br=bn)-(Vr=qn)),Qt=u(ai)>t?s((x(Sr)*(ei=h(Mr))*x(Vr)-x(Mr)*(Ur=h(Sr))*x(br))/(Ur*ei*ai)):(Sr+Mr)/2,Tt.point(wn,Qt),Tt.lineEnd(),Tt.lineStart(),Tt.point(pr,Qt),Gt=0),Tt.point(bn=qn,Qt=tr),wn=pr},lineEnd:function(){Tt.lineEnd(),bn=Qt=NaN},clean:function(){return 2-Gt}}},function(Tt,Gt,bn,Qt){var wn;if(null==Tt)Qt.point(-o,wn=bn*n),Qt.point(0,wn),Qt.point(o,wn),Qt.point(o,0),Qt.point(o,-wn),Qt.point(0,-wn),Qt.point(-o,-wn),Qt.point(-o,0),Qt.point(-o,wn);else if(u(Tt[0]-Gt[0])>t){var qn=Tt[0]<Gt[0]?o:-o;Qt.point(-qn,wn=bn*qn/2),Qt.point(0,wn),Qt.point(qn,wn)}else Qt.point(Gt[0],Gt[1])},[-o,-n]);function Or(Tt){var Gt=h(Tt),bn=6*f,Qt=Gt>0,wn=u(Gt)>t;function qn(Ar,br){return h(Ar)*h(br)>Gt}function tr(Ar,br,Sr){var Vr=[1,0,0],Mr=be(pe(Ar),pe(br)),Ur=de(Mr,Mr),ei=Mr[0],ai=Ur-ei*ei;if(!ai)return!Sr&&Ar;var yi=Gt*Ur/ai,fr=-Gt*ei/ai,gi=be(Vr,Mr),Je=xe(Vr,yi);he(Je,xe(Mr,fr));var at=gi,Bt=de(Je,at),Cn=de(at,at),dr=Bt*Bt-Cn*(de(Je,Je)-1);if(!(dr<0)){var cr=M(dr),ki=xe(at,(-Bt-cr)/Cn);if(he(ki,Je),ki=ce(ki),!Sr)return ki;var Di,_i=Ar[0],$i=br[0],Bi=Ar[1],Ta=br[1];$i<_i&&(Di=_i,_i=$i,$i=Di);var xi=$i-_i,_a=u(xi-o)<t;if(!_a&&Ta<Bi&&(Di=Bi,Bi=Ta,Ta=Di),_a||xi<t?_a?Bi+Ta>0^ki[1]<(u(ki[0]-_i)<t?Bi:Ta):Bi<=ki[1]&&ki[1]<=Ta:xi>o^(_i<=ki[0]&&ki[0]<=$i)){var $a=xe(at,(-Bt+cr)/Cn);return he($a,Je),[ki,ce($a)]}}}function pr(Ar,br){var Sr=Qt?Tt:o-Tt,Vr=0;return Ar<-Sr?Vr|=1:Ar>Sr&&(Vr|=2),br<-Sr?Vr|=4:br>Sr&&(Vr|=8),Vr}return Dr(qn,function(Ar){var br,Sr,Vr,Mr,Ur;return{lineStart:function(){Mr=Vr=!1,Ur=1},point:function(ei,ai){var yi,fr=[ei,ai],gi=qn(ei,ai),Je=Qt?gi?0:pr(ei,ai):gi?pr(ei+(ei<0?o:-o),ai):0;if(!br&&(Mr=Vr=gi)&&Ar.lineStart(),gi!==Vr&&(!(yi=tr(br,fr))||dn(br,yi)||dn(fr,yi))&&(fr[2]=1),gi!==Vr)Ur=0,gi?(Ar.lineStart(),yi=tr(fr,br),Ar.point(yi[0],yi[1])):(yi=tr(br,fr),Ar.point(yi[0],yi[1],2),Ar.lineEnd()),br=yi;else if(wn&&br&&Qt^gi){var at;Je&Sr||!(at=tr(fr,br,!0))||(Ur=0,Qt?(Ar.lineStart(),Ar.point(at[0][0],at[0][1]),Ar.point(at[1][0],at[1][1]),Ar.lineEnd()):(Ar.point(at[1][0],at[1][1]),Ar.lineEnd(),Ar.lineStart(),Ar.point(at[0][0],at[0][1],3)))}!gi||br&&dn(br,fr)||Ar.point(fr[0],fr[1]),br=fr,Vr=gi,Sr=Je},lineEnd:function(){Vr&&Ar.lineEnd(),br=null},clean:function(){return Ur|(Mr&&Vr)<<1}}},function(Ar,br,Sr,Vr){Tn(Vr,Tt,bn,Sr,Ar,br)},Qt?[0,-Tt]:[-o,Tt-o])}function Hr(Tt,Gt,bn,Qt){function wn(br,Sr){return Tt<=br&&br<=bn&&Gt<=Sr&&Sr<=Qt}function qn(br,Sr,Vr,Mr){var Ur=0,ei=0;if(null==br||(Ur=tr(br,Vr))!==(ei=tr(Sr,Vr))||Ar(br,Sr)<0^Vr>0)do{Mr.point(0===Ur||3===Ur?Tt:bn,Ur>1?Qt:Gt)}while((Ur=(Ur+Vr+4)%4)!==ei);else Mr.point(Sr[0],Sr[1])}function tr(br,Sr){return u(br[0]-Tt)<t?Sr>0?0:3:u(br[0]-bn)<t?Sr>0?2:1:u(br[1]-Gt)<t?Sr>0?1:0:Sr>0?3:2}function pr(br,Sr){return Ar(br.x,Sr.x)}function Ar(br,Sr){var Vr=tr(br,1),Mr=tr(Sr,1);return Vr!==Mr?Vr-Mr:0===Vr?Sr[1]-br[1]:1===Vr?br[0]-Sr[0]:2===Vr?br[1]-Sr[1]:Sr[0]-br[0]}return function(br){var Sr,Vr,Mr,Ur,ei,ai,yi,fr,gi,Je,at,Bt=br,Cn=fn(),dr={point:cr,lineStart:function(){dr.point=ki,Vr&&Vr.push(Mr=[]),Je=!0,gi=!1,yi=fr=NaN},lineEnd:function(){Sr&&(ki(Ur,ei),ai&&gi&&Cn.rejoin(),Sr.push(Cn.result())),dr.point=cr,gi&&Bt.lineEnd()},polygonStart:function(){Bt=Cn,Sr=[],Vr=[],at=!0},polygonEnd:function(){var Di=function(){for(var Bi=0,Ta=0,xi=Vr.length;Ta<xi;++Ta)for(var _a,$a,Ps=Vr[Ta],To=1,ca=Ps.length,Fi=Ps[0],Ja=Fi[0],is=Fi[1];To<ca;++To)_a=Ja,$a=is,Ja=(Fi=Ps[To])[0],is=Fi[1],$a<=Qt?is>Qt&&(Ja-_a)*(Qt-$a)>(is-$a)*(Tt-_a)&&++Bi:is<=Qt&&(Ja-_a)*(Qt-$a)<(is-$a)*(Tt-_a)&&--Bi;return Bi}(),_i=at&&Di,$i=(Sr=g.merge(Sr)).length;(_i||$i)&&(br.polygonStart(),_i&&(br.lineStart(),qn(null,null,1,br),br.lineEnd()),$i&&En(Sr,pr,Di,qn,br),br.polygonEnd()),Bt=br,Sr=Vr=Mr=null}};function cr(Di,_i){wn(Di,_i)&&Bt.point(Di,_i)}function ki(Di,_i){var $i=wn(Di,_i);if(Vr&&Mr.push([Di,_i]),Je)Ur=Di,ei=_i,ai=$i,Je=!1,$i&&(Bt.lineStart(),Bt.point(Di,_i));else if($i&&gi)Bt.point(Di,_i);else{var Bi=[yi=Math.max(-1e9,Math.min(1e9,yi)),fr=Math.max(-1e9,Math.min(1e9,fr))],Ta=[Di=Math.max(-1e9,Math.min(1e9,Di)),_i=Math.max(-1e9,Math.min(1e9,_i))];!function(xi,_a,$a,Ps,To,ca){var Fi,Ja=xi[0],is=xi[1],ba=0,io=1,Mo=_a[0]-Ja,Ca=_a[1]-is;if(Fi=$a-Ja,Mo||!(Fi>0)){if(Fi/=Mo,Mo<0){if(Fi<ba)return;Fi<io&&(io=Fi)}else if(Mo>0){if(Fi>io)return;Fi>ba&&(ba=Fi)}if(Fi=To-Ja,Mo||!(Fi<0)){if(Fi/=Mo,Mo<0){if(Fi>io)return;Fi>ba&&(ba=Fi)}else if(Mo>0){if(Fi<ba)return;Fi<io&&(io=Fi)}if(Fi=Ps-is,Ca||!(Fi>0)){if(Fi/=Ca,Ca<0){if(Fi<ba)return;Fi<io&&(io=Fi)}else if(Ca>0){if(Fi>io)return;Fi>ba&&(ba=Fi)}if(Fi=ca-is,Ca||!(Fi<0)){if(Fi/=Ca,Ca<0){if(Fi>io)return;Fi>ba&&(ba=Fi)}else if(Ca>0){if(Fi<ba)return;Fi<io&&(io=Fi)}return ba>0&&(xi[0]=Ja+ba*Mo,xi[1]=is+ba*Ca),io<1&&(_a[0]=Ja+io*Mo,_a[1]=is+io*Ca),!0}}}}}(Bi,Ta,Tt,Gt,bn,Qt)?$i&&(Bt.lineStart(),Bt.point(Di,_i),at=!1):(gi||(Bt.lineStart(),Bt.point(Bi[0],Bi[1])),Bt.point(Ta[0],Ta[1]),$i||Bt.lineEnd(),at=!1)}yi=Di,fr=_i,gi=$i}return dr}}var oi,Qn,Ir,Tr=b(),ar={sphere:S,point:S,lineStart:function(){ar.point=ri,ar.lineEnd=Jr},lineEnd:S,polygonStart:S,polygonEnd:S};function Jr(){ar.point=ar.lineEnd=S}function ri(Tt,Gt){oi=Tt*=f,Qn=x(Gt*=f),Ir=h(Gt),ar.point=Rr}function Rr(Tt,Gt){Tt*=f;var bn=x(Gt*=f),Qt=h(Gt),wn=u(Tt-oi),qn=h(wn),tr=Qt*x(wn),pr=Ir*bn-Qn*Qt*qn,Ar=Qn*bn+Ir*Qt*qn;Tr.add(d(M(tr*tr+pr*pr),Ar)),oi=Tt,Qn=bn,Ir=Qt}function Yr(Tt){return Tr.reset(),K(Tt,ar),+Tr}var Ci=[null,null],pn={type:"LineString",coordinates:Ci};function Ln(Tt,Gt){return Ci[0]=Tt,Ci[1]=Gt,Yr(pn)}var Ut={Feature:function(Tt,Gt){return Sn(Tt.geometry,Gt)},FeatureCollection:function(Tt,Gt){for(var bn=Tt.features,Qt=-1,wn=bn.length;++Qt<wn;)if(Sn(bn[Qt].geometry,Gt))return!0;return!1}},xn={Sphere:function(){return!0},Point:function(Tt,Gt){return Kn(Tt.coordinates,Gt)},MultiPoint:function(Tt,Gt){for(var bn=Tt.coordinates,Qt=-1,wn=bn.length;++Qt<wn;)if(Kn(bn[Qt],Gt))return!0;return!1},LineString:function(Tt,Gt){return Jn(Tt.coordinates,Gt)},MultiLineString:function(Tt,Gt){for(var bn=Tt.coordinates,Qt=-1,wn=bn.length;++Qt<wn;)if(Jn(bn[Qt],Gt))return!0;return!1},Polygon:function(Tt,Gt){return Xn(Tt.coordinates,Gt)},MultiPolygon:function(Tt,Gt){for(var bn=Tt.coordinates,Qt=-1,wn=bn.length;++Qt<wn;)if(Xn(bn[Qt],Gt))return!0;return!1},GeometryCollection:function(Tt,Gt){for(var bn=Tt.geometries,Qt=-1,wn=bn.length;++Qt<wn;)if(Sn(bn[Qt],Gt))return!0;return!1}};function Sn(Tt,Gt){return!(!Tt||!xn.hasOwnProperty(Tt.type))&&xn[Tt.type](Tt,Gt)}function Kn(Tt,Gt){return 0===Ln(Tt,Gt)}function Jn(Tt,Gt){for(var bn,Qt,wn,qn=0,tr=Tt.length;qn<tr;qn++){if(0===(Qt=Ln(Tt[qn],Gt))||qn>0&&(wn=Ln(Tt[qn],Tt[qn-1]))>0&&bn<=wn&&Qt<=wn&&(bn+Qt-wn)*(1-Math.pow((bn-Qt)/wn,2))<1e-12*wn)return!0;bn=Qt}return!1}function Xn(Tt,Gt){return!!mr(Tt.map(Un),In(Gt))}function Un(Tt){return(Tt=Tt.map(In)).pop(),Tt}function In(Tt){return[Tt[0]*f,Tt[1]*f]}function Pn(Tt,Gt,bn){var Qt=g.range(Tt,Gt-t,bn).concat(Gt);return function(wn){return Qt.map(function(qn){return[wn,qn]})}}function Bn(Tt,Gt,bn){var Qt=g.range(Tt,Gt-t,bn).concat(Gt);return function(wn){return Qt.map(function(qn){return[qn,wn]})}}function Gn(){var Tt,Gt,bn,Qt,wn,qn,tr,pr,Ar,br,Sr,Vr,Mr=10,Ur=Mr,ei=90,ai=360,yi=2.5;function fr(){return{type:"MultiLineString",coordinates:gi()}}function gi(){return g.range(a(Qt/ei)*ei,bn,ei).map(Sr).concat(g.range(a(pr/ai)*ai,tr,ai).map(Vr)).concat(g.range(a(Gt/Mr)*Mr,Tt,Mr).filter(function(Je){return u(Je%ei)>t}).map(Ar)).concat(g.range(a(qn/Ur)*Ur,wn,Ur).filter(function(Je){return u(Je%ai)>t}).map(br))}return fr.lines=function(){return gi().map(function(Je){return{type:"LineString",coordinates:Je}})},fr.outline=function(){return{type:"Polygon",coordinates:[Sr(Qt).concat(Vr(tr).slice(1),Sr(bn).reverse().slice(1),Vr(pr).reverse().slice(1))]}},fr.extent=function(Je){return arguments.length?fr.extentMajor(Je).extentMinor(Je):fr.extentMinor()},fr.extentMajor=function(Je){return arguments.length?(pr=+Je[0][1],tr=+Je[1][1],(Qt=+Je[0][0])>(bn=+Je[1][0])&&(Je=Qt,Qt=bn,bn=Je),pr>tr&&(Je=pr,pr=tr,tr=Je),fr.precision(yi)):[[Qt,pr],[bn,tr]]},fr.extentMinor=function(Je){return arguments.length?(qn=+Je[0][1],wn=+Je[1][1],(Gt=+Je[0][0])>(Tt=+Je[1][0])&&(Je=Gt,Gt=Tt,Tt=Je),qn>wn&&(Je=qn,qn=wn,wn=Je),fr.precision(yi)):[[Gt,qn],[Tt,wn]]},fr.step=function(Je){return arguments.length?fr.stepMajor(Je).stepMinor(Je):fr.stepMinor()},fr.stepMajor=function(Je){return arguments.length?(ei=+Je[0],ai=+Je[1],fr):[ei,ai]},fr.stepMinor=function(Je){return arguments.length?(Mr=+Je[0],Ur=+Je[1],fr):[Mr,Ur]},fr.precision=function(Je){return arguments.length?(yi=+Je,Ar=Pn(qn,wn,90),br=Bn(Gt,Tt,yi),Sr=Pn(pr,tr,90),Vr=Bn(Qt,bn,yi),fr):yi},fr.extentMajor([[-180,-90+t],[180,90-t]]).extentMinor([[-180,-80-t],[180,80+t]])}function or(Tt){return Tt}var sr,xr,_r,Nr,Fr=b(),Br=b(),qr={point:S,lineStart:S,lineEnd:S,polygonStart:function(){qr.lineStart=Xr,qr.lineEnd=Hi},polygonEnd:function(){qr.lineStart=qr.lineEnd=qr.point=S,Fr.add(u(Br)),Br.reset()},result:function(){var Tt=Fr/2;return Fr.reset(),Tt}};function Xr(){qr.point=ci}function ci(Tt,Gt){qr.point=Ui,sr=_r=Tt,xr=Nr=Gt}function Ui(Tt,Gt){Br.add(Nr*Tt-_r*Gt),_r=Tt,Nr=Gt}function Hi(){Ui(sr,xr)}var Za,Co,sa,la,jr=1/0,pi=jr,ui=-jr,Qi=ui,ma={point:function(Tt,Gt){Tt<jr&&(jr=Tt),Tt>ui&&(ui=Tt),Gt<pi&&(pi=Gt),Gt>Qi&&(Qi=Gt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var Tt=[[jr,pi],[ui,Qi]];return ui=Qi=-(pi=jr=1/0),Tt}},lo=0,Ki=0,po=0,Po=0,Va=0,mo=0,Ro=0,Wo=0,Wa=0,Ia={point:no,lineStart:xs,lineEnd:Ls,polygonStart:function(){Ia.lineStart=ws,Ia.lineEnd=Ys},polygonEnd:function(){Ia.point=no,Ia.lineStart=xs,Ia.lineEnd=Ls},result:function(){var Tt=Wa?[Ro/Wa,Wo/Wa]:mo?[Po/mo,Va/mo]:po?[lo/po,Ki/po]:[NaN,NaN];return lo=Ki=po=Po=Va=mo=Ro=Wo=Wa=0,Tt}};function no(Tt,Gt){lo+=Tt,Ki+=Gt,++po}function xs(){Ia.point=ns}function ns(Tt,Gt){Ia.point=ra,no(sa=Tt,la=Gt)}function ra(Tt,Gt){var bn=Tt-sa,Qt=Gt-la,wn=M(bn*bn+Qt*Qt);Po+=wn*(sa+Tt)/2,Va+=wn*(la+Gt)/2,mo+=wn,no(sa=Tt,la=Gt)}function Ls(){Ia.point=no}function ws(){Ia.point=Qs}function Ys(){Zs(Za,Co)}function Qs(Tt,Gt){Ia.point=Zs,no(Za=sa=Tt,Co=la=Gt)}function Zs(Tt,Gt){var bn=Tt-sa,Qt=Gt-la,wn=M(bn*bn+Qt*Qt);Po+=wn*(sa+Tt)/2,Va+=wn*(la+Gt)/2,mo+=wn,Ro+=(wn=la*Tt-sa*Gt)*(sa+Tt),Wo+=wn*(la+Gt),Wa+=3*wn,no(sa=Tt,la=Gt)}function Us(Tt){this._context=Tt}Us.prototype={_radius:4.5,pointRadius:function(Tt){return this._radius=Tt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(Tt,Gt){switch(this._point){case 0:this._context.moveTo(Tt,Gt),this._point=1;break;case 1:this._context.lineTo(Tt,Gt);break;default:this._context.moveTo(Tt+this._radius,Gt),this._context.arc(Tt,Gt,this._radius,0,l)}},result:S};var Vo,Xo,rs,$o,Jo,Ts=b(),So={point:S,lineStart:function(){So.point=Hs},lineEnd:function(){Vo&&go(Xo,rs),So.point=S},polygonStart:function(){Vo=!0},polygonEnd:function(){Vo=null},result:function(){var Tt=+Ts;return Ts.reset(),Tt}};function Hs(Tt,Gt){So.point=go,Xo=$o=Tt,rs=Jo=Gt}function go(Tt,Gt){Ts.add(M(($o-=Tt)*$o+(Jo-=Gt)*Jo)),$o=Tt,Jo=Gt}function ds(){this._string=[]}function Is(Tt){return"m0,"+Tt+"a"+Tt+","+Tt+" 0 1,1 0,"+-2*Tt+"a"+Tt+","+Tt+" 0 1,1 0,"+2*Tt+"z"}function Ko(Tt){return function(Gt){var bn=new oa;for(var Qt in Tt)bn[Qt]=Tt[Qt];return bn.stream=Gt,bn}}function oa(){}function We(Tt,Gt,bn){var Qt=Tt.clipExtent&&Tt.clipExtent();return Tt.scale(150).translate([0,0]),null!=Qt&&Tt.clipExtent(null),K(bn,Tt.stream(ma)),Gt(ma.result()),null!=Qt&&Tt.clipExtent(Qt),Tt}function tt(Tt,Gt,bn){return We(Tt,function(Qt){var wn=Gt[1][0]-Gt[0][0],qn=Gt[1][1]-Gt[0][1],tr=Math.min(wn/(Qt[1][0]-Qt[0][0]),qn/(Qt[1][1]-Qt[0][1])),pr=+Gt[0][0]+(wn-tr*(Qt[1][0]+Qt[0][0]))/2,Ar=+Gt[0][1]+(qn-tr*(Qt[1][1]+Qt[0][1]))/2;Tt.scale(150*tr).translate([pr,Ar])},bn)}function ut(Tt,Gt,bn){return tt(Tt,[[0,0],Gt],bn)}function yt(Tt,Gt,bn){return We(Tt,function(Qt){var wn=+Gt,qn=wn/(Qt[1][0]-Qt[0][0]),tr=(wn-qn*(Qt[1][0]+Qt[0][0]))/2,pr=-qn*Qt[0][1];Tt.scale(150*qn).translate([tr,pr])},bn)}function kt(Tt,Gt,bn){return We(Tt,function(Qt){var wn=+Gt,qn=wn/(Qt[1][1]-Qt[0][1]),tr=-qn*Qt[0][0],pr=(wn-qn*(Qt[1][1]+Qt[0][1]))/2;Tt.scale(150*qn).translate([tr,pr])},bn)}ds.prototype={_radius:4.5,_circle:Is(4.5),pointRadius:function(Tt){return(Tt=+Tt)!==this._radius&&(this._radius=Tt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(Tt,Gt){switch(this._point){case 0:this._string.push("M",Tt,",",Gt),this._point=1;break;case 1:this._string.push("L",Tt,",",Gt);break;default:null==this._circle&&(this._circle=Is(this._radius)),this._string.push("M",Tt,",",Gt,this._circle)}},result:function(){if(this._string.length){var Tt=this._string.join("");return this._string=[],Tt}return null}},oa.prototype={constructor:oa,point:function(Tt,Gt){this.stream.point(Tt,Gt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Mt=h(30*f);function Ft(Tt,Gt){return+Gt?function(bn,Qt){function wn(qn,tr,pr,Ar,br,Sr,Vr,Mr,Ur,ei,ai,yi,fr,gi){var Je=Vr-qn,at=Mr-tr,Bt=Je*Je+at*at;if(Bt>4*Qt&&fr--){var Cn=Ar+ei,dr=br+ai,cr=Sr+yi,ki=M(Cn*Cn+dr*dr+cr*cr),Di=P(cr/=ki),_i=u(u(cr)-1)<t||u(pr-Ur)<t?(pr+Ur)/2:d(dr,Cn),$i=bn(_i,Di),Bi=$i[0],Ta=$i[1],xi=Bi-qn,_a=Ta-tr,$a=at*xi-Je*_a;($a*$a/Bt>Qt||u((Je*xi+at*_a)/Bt-.5)>.3||Ar*ei+br*ai+Sr*yi<Mt)&&(wn(qn,tr,pr,Ar,br,Sr,Bi,Ta,_i,Cn/=ki,dr/=ki,cr,fr,gi),gi.point(Bi,Ta),wn(Bi,Ta,_i,Cn,dr,cr,Vr,Mr,Ur,ei,ai,yi,fr,gi))}}return function(qn){var tr,pr,Ar,br,Sr,Vr,Mr,Ur,ei,ai,yi,fr,gi={point:Je,lineStart:at,lineEnd:Cn,polygonStart:function(){qn.polygonStart(),gi.lineStart=dr},polygonEnd:function(){qn.polygonEnd(),gi.lineStart=at}};function Je(Di,_i){Di=bn(Di,_i),qn.point(Di[0],Di[1])}function at(){Ur=NaN,gi.point=Bt,qn.lineStart()}function Bt(Di,_i){var $i=pe([Di,_i]),Bi=bn(Di,_i);wn(Ur,ei,Mr,ai,yi,fr,Ur=Bi[0],ei=Bi[1],Mr=Di,ai=$i[0],yi=$i[1],fr=$i[2],16,qn),qn.point(Ur,ei)}function Cn(){gi.point=Je,qn.lineEnd()}function dr(){at(),gi.point=cr,gi.lineEnd=ki}function cr(Di,_i){Bt(tr=Di,_i),pr=Ur,Ar=ei,br=ai,Sr=yi,Vr=fr,gi.point=Bt}function ki(){wn(Ur,ei,Mr,ai,yi,fr,pr,Ar,tr,br,Sr,Vr,16,qn),gi.lineEnd=Cn,Cn()}return gi}}(Tt,Gt):(bn=Tt,Ko({point:function(Qt,wn){Qt=bn(Qt,wn),this.stream.point(Qt[0],Qt[1])}}));var bn}var ln=Ko({point:function(Tt,Gt){this.stream.point(Tt*f,Gt*f)}});function un(Tt,Gt,bn,Qt,wn){function qn(tr,pr){return[Gt+Tt*(tr*=Qt),bn-Tt*(pr*=wn)]}return qn.invert=function(tr,pr){return[(tr-Gt)/Tt*Qt,(bn-pr)/Tt*wn]},qn}function an(Tt,Gt,bn,Qt,wn,qn){var tr=h(qn),pr=x(qn),Ar=tr*Tt,br=pr*Tt,Sr=tr/Tt,Vr=pr/Tt,Mr=(pr*bn-tr*Gt)/Tt,Ur=(pr*Gt+tr*bn)/Tt;function ei(ai,yi){return[Ar*(ai*=Qt)-br*(yi*=wn)+Gt,bn-br*ai-Ar*yi]}return ei.invert=function(ai,yi){return[Qt*(Sr*ai-Vr*yi+Mr),wn*(Ur-Vr*ai-Sr*yi)]},ei}function vn(Tt){return Dn(function(){return Tt})()}function Dn(Tt){var Gt,bn,Qt,wn,qn,tr,pr,Ar,br,Sr,Vr=150,Mr=480,Ur=250,ei=0,ai=0,yi=0,fr=0,gi=0,Je=0,at=1,Bt=1,Cn=null,dr=kr,cr=null,ki=or,Di=.5;function _i(xi){return Ar(xi[0]*f,xi[1]*f)}function $i(xi){return(xi=Ar.invert(xi[0],xi[1]))&&[xi[0]*i,xi[1]*i]}function Bi(){var xi=an(Vr,0,0,at,Bt,Je).apply(null,Gt(ei,ai)),_a=(Je?an:un)(Vr,Mr-xi[0],Ur-xi[1],at,Bt,Je);return bn=Xt(yi,fr,gi),pr=xt(Gt,_a),Ar=xt(bn,pr),tr=Ft(pr,Di),Ta()}function Ta(){return br=Sr=null,_i}return _i.stream=function(xi){return br&&Sr===xi?br:br=ln((_a=bn,Ko({point:function($a,Ps){var To=_a($a,Ps);return this.stream.point(To[0],To[1])}}))(dr(tr(ki(Sr=xi)))));var _a},_i.preclip=function(xi){return arguments.length?(dr=xi,Cn=void 0,Ta()):dr},_i.postclip=function(xi){return arguments.length?(ki=xi,cr=Qt=wn=qn=null,Ta()):ki},_i.clipAngle=function(xi){return arguments.length?(dr=+xi?Or(Cn=xi*f):(Cn=null,kr),Ta()):Cn*i},_i.clipExtent=function(xi){return arguments.length?(ki=null==xi?(cr=Qt=wn=qn=null,or):Hr(cr=+xi[0][0],Qt=+xi[0][1],wn=+xi[1][0],qn=+xi[1][1]),Ta()):null==cr?null:[[cr,Qt],[wn,qn]]},_i.scale=function(xi){return arguments.length?(Vr=+xi,Bi()):Vr},_i.translate=function(xi){return arguments.length?(Mr=+xi[0],Ur=+xi[1],Bi()):[Mr,Ur]},_i.center=function(xi){return arguments.length?(ei=xi[0]%360*f,ai=xi[1]%360*f,Bi()):[ei*i,ai*i]},_i.rotate=function(xi){return arguments.length?(yi=xi[0]%360*f,fr=xi[1]%360*f,gi=xi.length>2?xi[2]%360*f:0,Bi()):[yi*i,fr*i,gi*i]},_i.angle=function(xi){return arguments.length?(Je=xi%360*f,Bi()):Je*i},_i.reflectX=function(xi){return arguments.length?(at=xi?-1:1,Bi()):at<0},_i.reflectY=function(xi){return arguments.length?(Bt=xi?-1:1,Bi()):Bt<0},_i.precision=function(xi){return arguments.length?(tr=Ft(pr,Di=xi*xi),Ta()):M(Di)},_i.fitExtent=function(xi,_a){return tt(_i,xi,_a)},_i.fitSize=function(xi,_a){return ut(_i,xi,_a)},_i.fitWidth=function(xi,_a){return yt(_i,xi,_a)},_i.fitHeight=function(xi,_a){return kt(_i,xi,_a)},function(){return Gt=Tt.apply(this,arguments),_i.invert=Gt.invert&&$i,Bi()}}function Nn(Tt){var Gt=0,bn=o/3,Qt=Dn(Tt),wn=Qt(Gt,bn);return wn.parallels=function(qn){return arguments.length?Qt(Gt=qn[0]*f,bn=qn[1]*f):[Gt*i,bn*i]},wn}function Fn(Tt,Gt){var bn=x(Tt),Qt=(bn+x(Gt))/2;if(u(Qt)<t)return function(pr){var Ar=h(pr);function br(Sr,Vr){return[Sr*Ar,x(Vr)/Ar]}return br.invert=function(Sr,Vr){return[Sr/Ar,P(Vr*Ar)]},br}(Tt);var wn=1+bn*(2*Qt-bn),qn=M(wn)/Qt;function tr(pr,Ar){var br=M(wn-2*Qt*x(Ar))/Qt;return[br*x(pr*=Qt),qn-br*h(pr)]}return tr.invert=function(pr,Ar){var br=qn-Ar,Sr=d(pr,u(br))*w(br);return br*Qt<0&&(Sr-=o*w(pr)*w(br)),[Sr/Qt,P((wn-(pr*pr+br*br)*Qt*Qt)/(2*Qt))]},tr}function $n(){return Nn(Fn).scale(155.424).center([0,33.6442])}function wr(){return $n().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Lr(Tt){return function(Gt,bn){var Qt=h(Gt),wn=h(bn),qn=Tt(Qt*wn);return[qn*wn*x(Gt),qn*x(bn)]}}function Zr(Tt){return function(Gt,bn){var Qt=M(Gt*Gt+bn*bn),wn=Tt(Qt),qn=x(wn),tr=h(wn);return[d(Gt*qn,Qt*tr),P(Qt&&bn*qn/Qt)]}}var Qr=Lr(function(Tt){return M(2/(1+Tt))});Qr.invert=Zr(function(Tt){return 2*P(Tt/2)});var Kr=Lr(function(Tt){return(Tt=C(Tt))&&Tt/x(Tt)});function $r(Tt,Gt){return[Tt,c(D((n+Gt)/2))]}function Li(Tt){var Gt,bn,Qt,wn=vn(Tt),qn=wn.center,tr=wn.scale,pr=wn.translate,Ar=wn.clipExtent,br=null;function Sr(){var Vr=o*tr(),Mr=wn(Vn(wn.rotate()).invert([0,0]));return Ar(null==br?[[Mr[0]-Vr,Mr[1]-Vr],[Mr[0]+Vr,Mr[1]+Vr]]:Tt===$r?[[Math.max(Mr[0]-Vr,br),Gt],[Math.min(Mr[0]+Vr,bn),Qt]]:[[br,Math.max(Mr[1]-Vr,Gt)],[bn,Math.min(Mr[1]+Vr,Qt)]])}return wn.scale=function(Vr){return arguments.length?(tr(Vr),Sr()):tr()},wn.translate=function(Vr){return arguments.length?(pr(Vr),Sr()):pr()},wn.center=function(Vr){return arguments.length?(qn(Vr),Sr()):qn()},wn.clipExtent=function(Vr){return arguments.length?(null==Vr?br=Gt=bn=Qt=null:(br=+Vr[0][0],Gt=+Vr[0][1],bn=+Vr[1][0],Qt=+Vr[1][1]),Sr()):null==br?null:[[br,Gt],[bn,Qt]]},Sr()}function Gi(Tt){return D((n+Tt)/2)}function ia(Tt,Gt){var bn=h(Tt),Qt=Tt===Gt?x(Tt):c(bn/h(Gt))/c(Gi(Gt)/Gi(Tt)),wn=bn*T(Gi(Tt),Qt)/Qt;if(!Qt)return $r;function qn(tr,pr){wn>0?pr<-n+t&&(pr=-n+t):pr>n-t&&(pr=n-t);var Ar=wn/T(Gi(pr),Qt);return[Ar*x(Qt*tr),wn-Ar*h(Qt*tr)]}return qn.invert=function(tr,pr){var Ar=wn-pr,br=w(Qt)*M(tr*tr+Ar*Ar),Sr=d(tr,u(Ar))*w(Ar);return Ar*Qt<0&&(Sr-=o*w(tr)*w(Ar)),[Sr/Qt,2*s(T(wn/br,1/Qt))-n]},qn}function Wi(Tt,Gt){return[Tt,Gt]}function aa(Tt,Gt){var bn=h(Tt),Qt=Tt===Gt?x(Tt):(bn-h(Gt))/(Gt-Tt),wn=bn/Qt+Tt;if(u(Qt)<t)return Wi;function qn(tr,pr){var Ar=wn-pr,br=Qt*tr;return[Ar*x(br),wn-Ar*h(br)]}return qn.invert=function(tr,pr){var Ar=wn-pr,br=d(tr,u(Ar))*w(Ar);return Ar*Qt<0&&(br-=o*w(tr)*w(Ar)),[br/Qt,wn-w(Qt)*M(tr*tr+Ar*Ar)]},qn}Kr.invert=Zr(function(Tt){return Tt}),$r.invert=function(Tt,Gt){return[Tt,2*s(_(Gt))-n]},Wi.invert=Wi;var Pa=1.340264,Ua=-.081106,ya=893e-6,Aa=.003796,Na=M(3)/2;function ro(Tt,Gt){var bn=P(Na*x(Gt)),Qt=bn*bn,wn=Qt*Qt*Qt;return[Tt*h(bn)/(Na*(Pa+3*Ua*Qt+wn*(7*ya+9*Aa*Qt))),bn*(Pa+Ua*Qt+wn*(ya+Aa*Qt))]}function wo(Tt,Gt){var bn=h(Gt),Qt=h(Tt)*bn;return[bn*x(Tt)/Qt,x(Gt)/Qt]}function Eo(Tt,Gt){var bn=Gt*Gt,Qt=bn*bn;return[Tt*(.8707-.131979*bn+Qt*(Qt*(.003971*bn-.001529*Qt)-.013791)),Gt*(1.007226+bn*(.015085+Qt*(.028874*bn-.044475-.005916*Qt)))]}function Do(Tt,Gt){return[h(Gt)*x(Tt),x(Gt)]}function Xa(Tt,Gt){var bn=h(Gt),Qt=1+h(Tt)*bn;return[bn*x(Tt)/Qt,x(Gt)/Qt]}function ea(Tt,Gt){return[c(D((n+Gt)/2)),-Tt]}ro.invert=function(Tt,Gt){for(var bn,Qt=Gt,wn=Qt*Qt,qn=wn*wn*wn,tr=0;tr<12&&(qn=(wn=(Qt-=bn=(Qt*(Pa+Ua*wn+qn*(ya+Aa*wn))-Gt)/(Pa+3*Ua*wn+qn*(7*ya+9*Aa*wn)))*Qt)*wn*wn,!(u(bn)<1e-12));++tr);return[Na*Tt*(Pa+3*Ua*wn+qn*(7*ya+9*Aa*wn))/h(Qt),P(x(Qt)/Na)]},wo.invert=Zr(s),Eo.invert=function(Tt,Gt){var bn,Qt=Gt,wn=25;do{var qn=Qt*Qt,tr=qn*qn;Qt-=bn=(Qt*(1.007226+qn*(.015085+tr*(.028874*qn-.044475-.005916*tr)))-Gt)/(1.007226+qn*(.045255+tr*(.259866*qn-.311325-.005916*11*tr)))}while(u(bn)>t&&--wn>0);return[Tt/(.8707+(qn=Qt*Qt)*(qn*(qn*qn*qn*(.003971-.001529*qn)-.013791)-.131979)),Qt]},Do.invert=Zr(P),Xa.invert=Zr(function(Tt){return 2*s(Tt)}),ea.invert=function(Tt,Gt){return[-Gt,2*s(_(Tt))-n]},p.geoAlbers=wr,p.geoAlbersUsa=function(){var Tt,Gt,bn,Qt,wn,qn,tr=wr(),pr=$n().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ar=$n().rotate([157,0]).center([-3,19.9]).parallels([8,18]),br={point:function(Mr,Ur){qn=[Mr,Ur]}};function Sr(Mr){var Ur=Mr[0],ei=Mr[1];return qn=null,bn.point(Ur,ei),qn||(Qt.point(Ur,ei),qn)||(wn.point(Ur,ei),qn)}function Vr(){return Tt=Gt=null,Sr}return Sr.invert=function(Mr){var Ur=tr.scale(),ei=tr.translate(),ai=(Mr[0]-ei[0])/Ur,yi=(Mr[1]-ei[1])/Ur;return(yi>=.12&&yi<.234&&ai>=-.425&&ai<-.214?pr:yi>=.166&&yi<.234&&ai>=-.214&&ai<-.115?Ar:tr).invert(Mr)},Sr.stream=function(Mr){return Tt&&Gt===Mr?Tt:(Ur=[tr.stream(Gt=Mr),pr.stream(Mr),Ar.stream(Mr)],ei=Ur.length,Tt={point:function(ai,yi){for(var fr=-1;++fr<ei;)Ur[fr].point(ai,yi)},sphere:function(){for(var ai=-1;++ai<ei;)Ur[ai].sphere()},lineStart:function(){for(var ai=-1;++ai<ei;)Ur[ai].lineStart()},lineEnd:function(){for(var ai=-1;++ai<ei;)Ur[ai].lineEnd()},polygonStart:function(){for(var ai=-1;++ai<ei;)Ur[ai].polygonStart()},polygonEnd:function(){for(var ai=-1;++ai<ei;)Ur[ai].polygonEnd()}});var Ur,ei},Sr.precision=function(Mr){return arguments.length?(tr.precision(Mr),pr.precision(Mr),Ar.precision(Mr),Vr()):tr.precision()},Sr.scale=function(Mr){return arguments.length?(tr.scale(Mr),pr.scale(.35*Mr),Ar.scale(Mr),Sr.translate(tr.translate())):tr.scale()},Sr.translate=function(Mr){if(!arguments.length)return tr.translate();var Ur=tr.scale(),ei=+Mr[0],ai=+Mr[1];return bn=tr.translate(Mr).clipExtent([[ei-.455*Ur,ai-.238*Ur],[ei+.455*Ur,ai+.238*Ur]]).stream(br),Qt=pr.translate([ei-.307*Ur,ai+.201*Ur]).clipExtent([[ei-.425*Ur+t,ai+.12*Ur+t],[ei-.214*Ur-t,ai+.234*Ur-t]]).stream(br),wn=Ar.translate([ei-.205*Ur,ai+.212*Ur]).clipExtent([[ei-.214*Ur+t,ai+.166*Ur+t],[ei-.115*Ur-t,ai+.234*Ur-t]]).stream(br),Vr()},Sr.fitExtent=function(Mr,Ur){return tt(Sr,Mr,Ur)},Sr.fitSize=function(Mr,Ur){return ut(Sr,Mr,Ur)},Sr.fitWidth=function(Mr,Ur){return yt(Sr,Mr,Ur)},Sr.fitHeight=function(Mr,Ur){return kt(Sr,Mr,Ur)},Sr.scale(1070)},p.geoArea=function(Tt){return H.reset(),K(Tt,oe),2*H},p.geoAzimuthalEqualArea=function(){return vn(Qr).scale(124.75).clipAngle(179.999)},p.geoAzimuthalEqualAreaRaw=Qr,p.geoAzimuthalEquidistant=function(){return vn(Kr).scale(79.4188).clipAngle(179.999)},p.geoAzimuthalEquidistantRaw=Kr,p.geoBounds=function(Tt){var Gt,bn,Qt,wn,qn,tr,pr;if(ve=Fe=-(Se=ke=1/0),Be=[],K(Tt,cn),bn=Be.length){for(Be.sort(rt),Gt=1,qn=[Qt=Be[0]];Gt<bn;++Gt)Ke(Qt,(wn=Be[Gt])[0])||Ke(Qt,wn[1])?(Qe(Qt[0],wn[1])>Qe(Qt[0],Qt[1])&&(Qt[1]=wn[1]),Qe(wn[0],Qt[1])>Qe(Qt[0],Qt[1])&&(Qt[0]=wn[0])):qn.push(Qt=wn);for(tr=-1/0,Gt=0,Qt=qn[bn=qn.length-1];Gt<=bn;Qt=wn,++Gt)(pr=Qe(Qt[1],(wn=qn[Gt])[0]))>tr&&(tr=pr,Se=wn[0],Fe=Qt[1])}return Be=He=null,Se===1/0||ke===1/0?[[NaN,NaN],[NaN,NaN]]:[[Se,ke],[Fe,ve]]},p.geoCentroid=function(Tt){Ve=it=ze=je=qe=Ye=ct=vt=wt=Ot=St=0,K(Tt,gt);var Gt=wt,bn=Ot,Qt=St,wn=Gt*Gt+bn*bn+Qt*Qt;return wn<1e-12&&(Gt=Ye,bn=ct,Qt=vt,it<t&&(Gt=ze,bn=je,Qt=qe),(wn=Gt*Gt+bn*bn+Qt*Qt)<1e-12)?[NaN,NaN]:[d(bn,Gt)*i,P(Qt/M(wn))*i]},p.geoCircle=function(){var Tt,Gt,bn=ht([0,0]),Qt=ht(90),wn=ht(6),qn={point:function(pr,Ar){Tt.push(pr=Gt(pr,Ar)),pr[0]*=i,pr[1]*=i}};function tr(){var pr=bn.apply(this,arguments),Ar=Qt.apply(this,arguments)*f,br=wn.apply(this,arguments)*f;return Tt=[],Gt=Xt(-pr[0]*f,-pr[1]*f,0).invert,Tn(qn,Ar,br,1),pr={type:"Polygon",coordinates:[Tt]},Tt=Gt=null,pr}return tr.center=function(pr){return arguments.length?(bn="function"==typeof pr?pr:ht([+pr[0],+pr[1]]),tr):bn},tr.radius=function(pr){return arguments.length?(Qt="function"==typeof pr?pr:ht(+pr),tr):Qt},tr.precision=function(pr){return arguments.length?(wn="function"==typeof pr?pr:ht(+pr),tr):wn},tr},p.geoClipAntimeridian=kr,p.geoClipCircle=Or,p.geoClipExtent=function(){var Tt,Gt,bn,Qt=0,wn=0,qn=960,tr=500;return bn={stream:function(pr){return Tt&&Gt===pr?Tt:Tt=Hr(Qt,wn,qn,tr)(Gt=pr)},extent:function(pr){return arguments.length?(Qt=+pr[0][0],wn=+pr[0][1],qn=+pr[1][0],tr=+pr[1][1],Tt=Gt=null,bn):[[Qt,wn],[qn,tr]]}}},p.geoClipRectangle=Hr,p.geoConicConformal=function(){return Nn(ia).scale(109.5).parallels([30,30])},p.geoConicConformalRaw=ia,p.geoConicEqualArea=$n,p.geoConicEqualAreaRaw=Fn,p.geoConicEquidistant=function(){return Nn(aa).scale(131.154).center([0,13.9389])},p.geoConicEquidistantRaw=aa,p.geoContains=function(Tt,Gt){return(Tt&&Ut.hasOwnProperty(Tt.type)?Ut[Tt.type]:Sn)(Tt,Gt)},p.geoDistance=Ln,p.geoEqualEarth=function(){return vn(ro).scale(177.158)},p.geoEqualEarthRaw=ro,p.geoEquirectangular=function(){return vn(Wi).scale(152.63)},p.geoEquirectangularRaw=Wi,p.geoGnomonic=function(){return vn(wo).scale(144.049).clipAngle(60)},p.geoGnomonicRaw=wo,p.geoGraticule=Gn,p.geoGraticule10=function(){return Gn()()},p.geoIdentity=function(){var Tt,Gt,bn,Qt,wn,qn,tr,pr=1,Ar=0,br=0,Sr=1,Vr=1,Mr=0,Ur=null,ei=1,ai=1,yi=Ko({point:function(at,Bt){var Cn=Je([at,Bt]);this.stream.point(Cn[0],Cn[1])}}),fr=or;function gi(){return ei=pr*Sr,ai=pr*Vr,qn=tr=null,Je}function Je(at){var Bt=at[0]*ei,Cn=at[1]*ai;if(Mr){var dr=Cn*Tt-Bt*Gt;Bt=Bt*Tt+Cn*Gt,Cn=dr}return[Bt+Ar,Cn+br]}return Je.invert=function(at){var Bt=at[0]-Ar,Cn=at[1]-br;if(Mr){var dr=Cn*Tt+Bt*Gt;Bt=Bt*Tt-Cn*Gt,Cn=dr}return[Bt/ei,Cn/ai]},Je.stream=function(at){return qn&&tr===at?qn:qn=yi(fr(tr=at))},Je.postclip=function(at){return arguments.length?(fr=at,Ur=bn=Qt=wn=null,gi()):fr},Je.clipExtent=function(at){return arguments.length?(fr=null==at?(Ur=bn=Qt=wn=null,or):Hr(Ur=+at[0][0],bn=+at[0][1],Qt=+at[1][0],wn=+at[1][1]),gi()):null==Ur?null:[[Ur,bn],[Qt,wn]]},Je.scale=function(at){return arguments.length?(pr=+at,gi()):pr},Je.translate=function(at){return arguments.length?(Ar=+at[0],br=+at[1],gi()):[Ar,br]},Je.angle=function(at){return arguments.length?(Gt=x(Mr=at%360*f),Tt=h(Mr),gi()):Mr*i},Je.reflectX=function(at){return arguments.length?(Sr=at?-1:1,gi()):Sr<0},Je.reflectY=function(at){return arguments.length?(Vr=at?-1:1,gi()):Vr<0},Je.fitExtent=function(at,Bt){return tt(Je,at,Bt)},Je.fitSize=function(at,Bt){return ut(Je,at,Bt)},Je.fitWidth=function(at,Bt){return yt(Je,at,Bt)},Je.fitHeight=function(at,Bt){return kt(Je,at,Bt)},Je},p.geoInterpolate=function(Tt,Gt){var bn=Tt[0]*f,Qt=Tt[1]*f,wn=Gt[0]*f,qn=Gt[1]*f,tr=h(Qt),pr=x(Qt),Ar=h(qn),br=x(qn),Sr=tr*h(bn),Vr=tr*x(bn),Mr=Ar*h(wn),Ur=Ar*x(wn),ei=2*P(M(L(qn-Qt)+tr*Ar*L(wn-bn))),ai=x(ei),yi=ei?function(fr){var gi=x(fr*=ei)/ai,Je=x(ei-fr)/ai,at=Je*Sr+gi*Mr,Bt=Je*Vr+gi*Ur,Cn=Je*pr+gi*br;return[d(Bt,at)*i,d(Cn,M(at*at+Bt*Bt))*i]}:function(){return[bn*i,Qt*i]};return yi.distance=ei,yi},p.geoLength=Yr,p.geoMercator=function(){return Li($r).scale(961/l)},p.geoMercatorRaw=$r,p.geoNaturalEarth1=function(){return vn(Eo).scale(175.295)},p.geoNaturalEarth1Raw=Eo,p.geoOrthographic=function(){return vn(Do).scale(249.5).clipAngle(90+t)},p.geoOrthographicRaw=Do,p.geoPath=function(Tt,Gt){var bn,Qt,wn=4.5;function qn(tr){return tr&&("function"==typeof wn&&Qt.pointRadius(+wn.apply(this,arguments)),K(tr,bn(Qt))),Qt.result()}return qn.area=function(tr){return K(tr,bn(qr)),qr.result()},qn.measure=function(tr){return K(tr,bn(So)),So.result()},qn.bounds=function(tr){return K(tr,bn(ma)),ma.result()},qn.centroid=function(tr){return K(tr,bn(Ia)),Ia.result()},qn.projection=function(tr){return arguments.length?(bn=null==tr?(Tt=null,or):(Tt=tr).stream,qn):Tt},qn.context=function(tr){return arguments.length?(Qt=null==tr?(Gt=null,new ds):new Us(Gt=tr),"function"!=typeof wn&&Qt.pointRadius(wn),qn):Gt},qn.pointRadius=function(tr){return arguments.length?(wn="function"==typeof tr?tr:(Qt.pointRadius(+tr),+tr),qn):wn},qn.projection(Tt).context(Gt)},p.geoProjection=vn,p.geoProjectionMutator=Dn,p.geoRotation=Vn,p.geoStereographic=function(){return vn(Xa).scale(250).clipAngle(142)},p.geoStereographicRaw=Xa,p.geoStream=K,p.geoTransform=function(Tt){return{stream:Ko(Tt)}},p.geoTransverseMercator=function(){var Tt=Li(ea),Gt=Tt.center,bn=Tt.rotate;return Tt.center=function(Qt){return arguments.length?Gt([-Qt[1],Qt[0]]):[(Qt=Gt())[1],-Qt[0]]},Tt.rotate=function(Qt){return arguments.length?bn([Qt[0],Qt[1],Qt.length>2?Qt[2]+90:90]):[(Qt=bn())[0],Qt[1],Qt[2]-90]},bn([0,0,90]).scale(159.155)},p.geoTransverseMercatorRaw=ea,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-array")):g((p=p||self).d3=p.d3||{},p.d3)},{"d3-array":107}],115:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";function g(de,be){return de.parent===be.parent?1:2}function b(de,be){return de+be.x}function y(de,be){return Math.max(de,be.y)}function e(de){var be=0,he=de.children,xe=he&&he.length;if(xe)for(;--xe>=0;)be+=he[xe].value;else be=1;de.value=be}function r(de,be){var he,xe,De,Se,ke,Fe=new m(de),ve=+de.value&&(Fe.value=de.value),Te=[Fe];for(null==be&&(be=t);he=Te.pop();)if(ve&&(he.value=+he.data.value),(De=be(he.data))&&(ke=De.length))for(he.children=new Array(ke),Se=ke-1;Se>=0;--Se)Te.push(xe=he.children[Se]=new m(De[Se])),xe.parent=he,xe.depth=he.depth+1;return Fe.eachBefore(n)}function t(de){return de.children}function o(de){de.data=de.data.data}function n(de){var be=0;do{de.height=be}while((de=de.parent)&&de.height<++be)}function m(de){this.data=de,this.depth=this.height=0,this.parent=null}m.prototype=r.prototype={constructor:m,count:function(){return this.eachAfter(e)},each:function(de){var be,he,xe,De,Se=this,ke=[Se];do{for(be=ke.reverse(),ke=[];Se=be.pop();)if(de(Se),he=Se.children)for(xe=0,De=he.length;xe<De;++xe)ke.push(he[xe])}while(ke.length);return this},eachAfter:function(de){for(var be,he,xe,De=this,Se=[De],ke=[];De=Se.pop();)if(ke.push(De),be=De.children)for(he=0,xe=be.length;he<xe;++he)Se.push(be[he]);for(;De=ke.pop();)de(De);return this},eachBefore:function(de){for(var be,he,xe=this,De=[xe];xe=De.pop();)if(de(xe),be=xe.children)for(he=be.length-1;he>=0;--he)De.push(be[he]);return this},sum:function(de){return this.eachAfter(function(be){for(var he=+de(be.data)||0,xe=be.children,De=xe&&xe.length;--De>=0;)he+=xe[De].value;be.value=he})},sort:function(de){return this.eachBefore(function(be){be.children&&be.children.sort(de)})},path:function(de){for(var be=this,he=function(Se,ke){if(Se===ke)return Se;var Fe=Se.ancestors(),ve=ke.ancestors(),Te=null;for(Se=Fe.pop(),ke=ve.pop();Se===ke;)Te=Se,Se=Fe.pop(),ke=ve.pop();return Te}(be,de),xe=[be];be!==he;)xe.push(be=be.parent);for(var De=xe.length;de!==he;)xe.splice(De,0,de),de=de.parent;return xe},ancestors:function(){for(var de=this,be=[de];de=de.parent;)be.push(de);return be},descendants:function(){var de=[];return this.each(function(be){de.push(be)}),de},leaves:function(){var de=[];return this.eachBefore(function(be){be.children||de.push(be)}),de},links:function(){var de=this,be=[];return de.each(function(he){he!==de&&be.push({source:he.parent,target:he})}),be},copy:function(){return r(this).eachBefore(o)}};var l=Array.prototype.slice;function i(de){for(var be,he,xe=0,De=(de=function(ke){for(var Fe,ve,Te=ke.length;Te;)ve=Math.random()*Te--|0,Fe=ke[Te],ke[Te]=ke[ve],ke[ve]=Fe;return ke}(l.call(de))).length,Se=[];xe<De;)be=de[xe],he&&s(he,be)?++xe:(he=h(Se=f(Se,be)),xe=0);return he}function f(de,be){var he,xe;if(d(be,de))return[be];for(he=0;he<de.length;++he)if(u(be,de[he])&&d(a(de[he],be),de))return[de[he],be];for(he=0;he<de.length-1;++he)for(xe=he+1;xe<de.length;++xe)if(u(a(de[he],de[xe]),be)&&u(a(de[he],be),de[xe])&&u(a(de[xe],be),de[he])&&d(_(de[he],de[xe],be),de))return[de[he],de[xe],be];throw new Error}function u(de,be){var he=de.r-be.r,xe=be.x-de.x,De=be.y-de.y;return he<0||he*he<xe*xe+De*De}function s(de,be){var he=de.r-be.r+1e-6,xe=be.x-de.x,De=be.y-de.y;return he>0&&he*he>xe*xe+De*De}function d(de,be){for(var he=0;he<be.length;++he)if(!s(de,be[he]))return!1;return!0}function h(de){switch(de.length){case 1:return{x:(be=de[0]).x,y:be.y,r:be.r};case 2:return a(de[0],de[1]);case 3:return _(de[0],de[1],de[2])}var be}function a(de,be){var he=de.x,xe=de.y,De=de.r,Se=be.x,ke=be.y,Fe=be.r,ve=Se-he,Te=ke-xe,Le=Fe-De,Oe=Math.sqrt(ve*ve+Te*Te);return{x:(he+Se+ve/Oe*Le)/2,y:(xe+ke+Te/Oe*Le)/2,r:(Oe+De+Fe)/2}}function _(de,be,he){var xe=de.x,De=de.y,Se=de.r,ke=be.x,Fe=be.y,ve=be.r,Te=he.x,Le=he.y,Oe=he.r,Ne=xe-ke,Be=xe-Te,He=De-Fe,Ve=De-Le,it=ve-Se,ze=Oe-Se,je=xe*xe+De*De-Se*Se,qe=je-ke*ke-Fe*Fe+ve*ve,Ye=je-Te*Te-Le*Le+Oe*Oe,ct=Be*He-Ne*Ve,vt=(He*Ye-Ve*qe)/(2*ct)-xe,wt=(Ve*it-He*ze)/ct,Ot=(Be*qe-Ne*Ye)/(2*ct)-De,St=(Ne*ze-Be*it)/ct,ft=wt*wt+St*St-1,st=2*(Se+vt*wt+Ot*St),Ct=vt*vt+Ot*Ot-Se*Se,$t=-(ft?(st+Math.sqrt(st*st-4*ft*Ct))/(2*ft):Ct/st);return{x:xe+vt+wt*$t,y:De+Ot+St*$t,r:$t}}function c(de,be,he){var xe,De,Se,ke,Fe=de.x-be.x,ve=de.y-be.y,Te=Fe*Fe+ve*ve;Te?(De=be.r+he.r,ke=de.r+he.r,(De*=De)>(ke*=ke)?(xe=(Te+ke-De)/(2*Te),Se=Math.sqrt(Math.max(0,ke/Te-xe*xe)),he.x=de.x-xe*Fe-Se*ve,he.y=de.y-xe*ve+Se*Fe):(xe=(Te+De-ke)/(2*Te),Se=Math.sqrt(Math.max(0,De/Te-xe*xe)),he.x=be.x+xe*Fe-Se*ve,he.y=be.y+xe*ve+Se*Fe)):(he.x=be.x+he.r,he.y=be.y)}function T(de,be){var he=de.r+be.r-1e-6,xe=be.x-de.x,De=be.y-de.y;return he>0&&he*he>xe*xe+De*De}function x(de){var be=de._,he=de.next._,xe=be.r+he.r,De=(be.x*he.r+he.x*be.r)/xe,Se=(be.y*he.r+he.y*be.r)/xe;return De*De+Se*Se}function w(de){this._=de,this.next=null,this.previous=null}function M(de){if(!(De=de.length))return 0;var be,he,xe,De,Se,ke,Fe,ve,Te,Le,Oe;if((be=de[0]).x=0,be.y=0,!(De>1))return be.r;if(be.x=-(he=de[1]).r,he.x=be.r,he.y=0,!(De>2))return be.r+he.r;c(he,be,xe=de[2]),be=new w(be),he=new w(he),xe=new w(xe),be.next=xe.previous=he,he.next=be.previous=xe,xe.next=he.previous=be;e:for(Fe=3;Fe<De;++Fe){c(be._,he._,xe=de[Fe]),xe=new w(xe),ve=he.next,Te=be.previous,Le=he._.r,Oe=be._.r;do{if(Le<=Oe){if(T(ve._,xe._)){be.next=he=ve,he.previous=be,--Fe;continue e}Le+=ve._.r,ve=ve.next}else{if(T(Te._,xe._)){(be=Te).next=he,he.previous=be,--Fe;continue e}Oe+=Te._.r,Te=Te.previous}}while(ve!==Te.next);for(xe.previous=be,xe.next=he,be.next=he.previous=he=xe,Se=x(be);(xe=xe.next)!==he;)(ke=x(xe))<Se&&(be=xe,Se=ke);he=be.next}for(be=[he._],xe=he;(xe=xe.next)!==he;)be.push(xe._);for(xe=i(be),Fe=0;Fe<De;++Fe)(be=de[Fe]).x-=xe.x,be.y-=xe.y;return xe.r}function D(de){return null==de?null:C(de)}function C(de){if("function"!=typeof de)throw new Error;return de}function P(){return 0}function L(de){return function(){return de}}function S(de){return Math.sqrt(de.value)}function E(de){return function(be){be.children||(be.r=Math.max(0,+de(be)||0))}}function N(de,be){return function(he){if(xe=he.children){var xe,De,Se,ke=xe.length,Fe=de(he)*be||0;if(Fe)for(De=0;De<ke;++De)xe[De].r+=Fe;if(Se=M(xe),Fe)for(De=0;De<ke;++De)xe[De].r-=Fe;he.r=Se+Fe}}}function z(de){return function(be){var he=be.parent;be.r*=de,he&&(be.x=he.x+de*be.x,be.y=he.y+de*be.y)}}function q(de){de.x0=Math.round(de.x0),de.y0=Math.round(de.y0),de.x1=Math.round(de.x1),de.y1=Math.round(de.y1)}function G(de,be,he,xe,De){for(var Se,ke=de.children,Fe=-1,ve=ke.length,Te=de.value&&(xe-be)/de.value;++Fe<ve;)(Se=ke[Fe]).y0=he,Se.y1=De,Se.x0=be,Se.x1=be+=Se.value*Te}var K={depth:-1},ne={};function X(de){return de.id}function J(de){return de.parentId}function se(de,be){return de.parent===be.parent?1:2}function V(de){var be=de.children;return be?be[0]:de.t}function j(de){var be=de.children;return be?be[be.length-1]:de.t}function H(de,be,he){var xe=he/(be.i-de.i);be.c-=xe,be.s+=he,de.c+=xe,be.z+=he,be.m+=he}function oe(de,be,he){return de.a.parent===be.parent?de.a:he}function U(de,be){this._=de,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=be}function te(de,be,he,xe,De){for(var Se,ke=de.children,Fe=-1,ve=ke.length,Te=de.value&&(De-he)/de.value;++Fe<ve;)(Se=ke[Fe]).x0=be,Se.x1=xe,Se.y0=he,Se.y1=he+=Se.value*Te}U.prototype=Object.create(m.prototype);var ee=(1+Math.sqrt(5))/2;function le(de,be,he,xe,De,Se){for(var ke,Fe,ve,Te,Le,Oe,Ne,Be,He,Ve,it,ze=[],je=be.children,qe=0,Ye=0,ct=je.length,vt=be.value;qe<ct;){ve=De-he,Te=Se-xe;do{Le=je[Ye++].value}while(!Le&&Ye<ct);for(Oe=Ne=Le,it=Le*Le*(Ve=Math.max(Te/ve,ve/Te)/(vt*de)),He=Math.max(Ne/it,it/Oe);Ye<ct;++Ye){if(Le+=Fe=je[Ye].value,Fe<Oe&&(Oe=Fe),Fe>Ne&&(Ne=Fe),it=Le*Le*Ve,(Be=Math.max(Ne/it,it/Oe))>He){Le-=Fe;break}He=Be}ze.push(ke={value:Le,dice:ve<Te,children:je.slice(qe,Ye)}),ke.dice?G(ke,he,xe,De,vt?xe+=Te*Le/vt:Se):te(ke,he,xe,vt?he+=ve*Le/vt:De,Se),vt-=Le,qe=Ye}return ze}var ce=function de(be){function he(xe,De,Se,ke,Fe){le(be,xe,De,Se,ke,Fe)}return he.ratio=function(xe){return de((xe=+xe)>1?xe:1)},he}(ee),pe=function de(be){function he(xe,De,Se,ke,Fe){if((ve=xe._squarify)&&ve.ratio===be)for(var ve,Te,Le,Oe,Ne,Be=-1,He=ve.length,Ve=xe.value;++Be<He;){for(Le=(Te=ve[Be]).children,Oe=Te.value=0,Ne=Le.length;Oe<Ne;++Oe)Te.value+=Le[Oe].value;Te.dice?G(Te,De,Se,ke,Se+=(Fe-Se)*Te.value/Ve):te(Te,De,Se,De+=(ke-De)*Te.value/Ve,Fe),Ve-=Te.value}else xe._squarify=ve=le(be,xe,De,Se,ke,Fe),ve.ratio=be}return he.ratio=function(xe){return de((xe=+xe)>1?xe:1)},he}(ee);p.cluster=function(){var de=g,be=1,he=1,xe=!1;function De(Se){var ke,Fe=0;Se.eachAfter(function(Ne){var He,Be=Ne.children;Be?(Ne.x=(He=Be).reduce(b,0)/He.length,Ne.y=function(He){return 1+He.reduce(y,0)}(Be)):(Ne.x=ke?Fe+=de(Ne,ke):0,Ne.y=0,ke=Ne)});var ve=function(Ne){for(var Be;Be=Ne.children;)Ne=Be[0];return Ne}(Se),Te=function(Ne){for(var Be;Be=Ne.children;)Ne=Be[Be.length-1];return Ne}(Se),Le=ve.x-de(ve,Te)/2,Oe=Te.x+de(Te,ve)/2;return Se.eachAfter(xe?function(Ne){Ne.x=(Ne.x-Se.x)*be,Ne.y=(Se.y-Ne.y)*he}:function(Ne){Ne.x=(Ne.x-Le)/(Oe-Le)*be,Ne.y=(1-(Se.y?Ne.y/Se.y:1))*he})}return De.separation=function(Se){return arguments.length?(de=Se,De):de},De.size=function(Se){return arguments.length?(xe=!1,be=+Se[0],he=+Se[1],De):xe?null:[be,he]},De.nodeSize=function(Se){return arguments.length?(xe=!0,be=+Se[0],he=+Se[1],De):xe?[be,he]:null},De},p.hierarchy=r,p.pack=function(){var de=null,be=1,he=1,xe=P;function De(Se){return Se.x=be/2,Se.y=he/2,de?Se.eachBefore(E(de)).eachAfter(N(xe,.5)).eachBefore(z(1)):Se.eachBefore(E(S)).eachAfter(N(P,1)).eachAfter(N(xe,Se.r/Math.min(be,he))).eachBefore(z(Math.min(be,he)/(2*Se.r))),Se}return De.radius=function(Se){return arguments.length?(de=D(Se),De):de},De.size=function(Se){return arguments.length?(be=+Se[0],he=+Se[1],De):[be,he]},De.padding=function(Se){return arguments.length?(xe="function"==typeof Se?Se:L(+Se),De):xe},De},p.packEnclose=i,p.packSiblings=function(de){return M(de),de},p.partition=function(){var de=1,be=1,he=0,xe=!1;function De(Se){var Fe,ve,ke=Se.height+1;return Se.x0=Se.y0=he,Se.x1=de,Se.y1=be/ke,Se.eachBefore((Fe=be,ve=ke,function(Te){Te.children&&G(Te,Te.x0,Fe*(Te.depth+1)/ve,Te.x1,Fe*(Te.depth+2)/ve);var Le=Te.x0,Oe=Te.y0,Ne=Te.x1-he,Be=Te.y1-he;Ne<Le&&(Le=Ne=(Le+Ne)/2),Be<Oe&&(Oe=Be=(Oe+Be)/2),Te.x0=Le,Te.y0=Oe,Te.x1=Ne,Te.y1=Be})),xe&&Se.eachBefore(q),Se}return De.round=function(Se){return arguments.length?(xe=!!Se,De):xe},De.size=function(Se){return arguments.length?(de=+Se[0],be=+Se[1],De):[de,be]},De.padding=function(Se){return arguments.length?(he=+Se,De):he},De},p.stratify=function(){var de=X,be=J;function he(xe){var De,Se,ke,Fe,ve,Te,Le,Oe=xe.length,Ne=new Array(Oe),Be={};for(Se=0;Se<Oe;++Se)ve=Ne[Se]=new m(De=xe[Se]),null!=(Te=de(De,Se,xe))&&(Te+="")&&(Be[Le="$"+(ve.id=Te)]=Le in Be?ne:ve);for(Se=0;Se<Oe;++Se)if(ve=Ne[Se],null!=(Te=be(xe[Se],Se,xe))&&(Te+="")){if(!(Fe=Be["$"+Te]))throw new Error("missing: "+Te);if(Fe===ne)throw new Error("ambiguous: "+Te);Fe.children?Fe.children.push(ve):Fe.children=[ve],ve.parent=Fe}else{if(ke)throw new Error("multiple roots");ke=ve}if(!ke)throw new Error("no root");if(ke.parent=K,ke.eachBefore(function(He){He.depth=He.parent.depth+1,--Oe}).eachBefore(n),ke.parent=null,Oe>0)throw new Error("cycle");return ke}return he.id=function(xe){return arguments.length?(de=C(xe),he):de},he.parentId=function(xe){return arguments.length?(be=C(xe),he):be},he},p.tree=function(){var de=se,be=1,he=1,xe=null;function De(ve){var Te=function(ze){for(var je,qe,Ye,ct,vt,wt=new U(ze,0),Ot=[wt];je=Ot.pop();)if(Ye=je._.children)for(je.children=new Array(vt=Ye.length),ct=vt-1;ct>=0;--ct)Ot.push(qe=je.children[ct]=new U(Ye[ct],ct)),qe.parent=je;return(wt.parent=new U(null,0)).children=[wt],wt}(ve);if(Te.eachAfter(Se),Te.parent.m=-Te.z,Te.eachBefore(ke),xe)ve.eachBefore(Fe);else{var Le=ve,Oe=ve,Ne=ve;ve.eachBefore(function(ze){ze.x<Le.x&&(Le=ze),ze.x>Oe.x&&(Oe=ze),ze.depth>Ne.depth&&(Ne=ze)});var Be=Le===Oe?1:de(Le,Oe)/2,He=Be-Le.x,Ve=be/(Oe.x+Be+He),it=he/(Ne.depth||1);ve.eachBefore(function(ze){ze.x=(ze.x+He)*Ve,ze.y=ze.depth*it})}return ve}function Se(ve){var Te=ve.children,Le=ve.parent.children,Oe=ve.i?Le[ve.i-1]:null;if(Te){!function(Be){for(var He,Ve=0,it=0,ze=Be.children,je=ze.length;--je>=0;)(He=ze[je]).z+=Ve,He.m+=Ve,Ve+=He.s+(it+=He.c)}(ve);var Ne=(Te[0].z+Te[Te.length-1].z)/2;Oe?(ve.z=Oe.z+de(ve._,Oe._),ve.m=ve.z-Ne):ve.z=Ne}else Oe&&(ve.z=Oe.z+de(ve._,Oe._));ve.parent.A=function(Be,He,Ve){if(He){for(var it,ze=Be,je=Be,qe=He,Ye=ze.parent.children[0],ct=ze.m,vt=je.m,wt=qe.m,Ot=Ye.m;qe=j(qe),ze=V(ze),qe&&ze;)Ye=V(Ye),(je=j(je)).a=Be,(it=qe.z+wt-ze.z-ct+de(qe._,ze._))>0&&(H(oe(qe,Be,Ve),Be,it),ct+=it,vt+=it),wt+=qe.m,ct+=ze.m,Ot+=Ye.m,vt+=je.m;qe&&!j(je)&&(je.t=qe,je.m+=wt-vt),ze&&!V(Ye)&&(Ye.t=ze,Ye.m+=ct-Ot,Ve=Be)}return Ve}(ve,Oe,ve.parent.A||Le[0])}function ke(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function Fe(ve){ve.x*=be,ve.y=ve.depth*he}return De.separation=function(ve){return arguments.length?(de=ve,De):de},De.size=function(ve){return arguments.length?(xe=!1,be=+ve[0],he=+ve[1],De):xe?null:[be,he]},De.nodeSize=function(ve){return arguments.length?(xe=!0,be=+ve[0],he=+ve[1],De):xe?[be,he]:null},De},p.treemap=function(){var de=ce,be=!1,he=1,xe=1,De=[0],Se=P,ke=P,Fe=P,ve=P,Te=P;function Le(Ne){return Ne.x0=Ne.y0=0,Ne.x1=he,Ne.y1=xe,Ne.eachBefore(Oe),De=[0],be&&Ne.eachBefore(q),Ne}function Oe(Ne){var Be=De[Ne.depth],He=Ne.x0+Be,Ve=Ne.y0+Be,it=Ne.x1-Be,ze=Ne.y1-Be;it<He&&(He=it=(He+it)/2),ze<Ve&&(Ve=ze=(Ve+ze)/2),Ne.x0=He,Ne.y0=Ve,Ne.x1=it,Ne.y1=ze,Ne.children&&(Be=De[Ne.depth+1]=Se(Ne)/2,He+=Te(Ne)-Be,Ve+=ke(Ne)-Be,(it-=Fe(Ne)-Be)<He&&(He=it=(He+it)/2),(ze-=ve(Ne)-Be)<Ve&&(Ve=ze=(Ve+ze)/2),de(Ne,He,Ve,it,ze))}return Le.round=function(Ne){return arguments.length?(be=!!Ne,Le):be},Le.size=function(Ne){return arguments.length?(he=+Ne[0],xe=+Ne[1],Le):[he,xe]},Le.tile=function(Ne){return arguments.length?(de=C(Ne),Le):de},Le.padding=function(Ne){return arguments.length?Le.paddingInner(Ne).paddingOuter(Ne):Le.paddingInner()},Le.paddingInner=function(Ne){return arguments.length?(Se="function"==typeof Ne?Ne:L(+Ne),Le):Se},Le.paddingOuter=function(Ne){return arguments.length?Le.paddingTop(Ne).paddingRight(Ne).paddingBottom(Ne).paddingLeft(Ne):Le.paddingTop()},Le.paddingTop=function(Ne){return arguments.length?(ke="function"==typeof Ne?Ne:L(+Ne),Le):ke},Le.paddingRight=function(Ne){return arguments.length?(Fe="function"==typeof Ne?Ne:L(+Ne),Le):Fe},Le.paddingBottom=function(Ne){return arguments.length?(ve="function"==typeof Ne?Ne:L(+Ne),Le):ve},Le.paddingLeft=function(Ne){return arguments.length?(Te="function"==typeof Ne?Ne:L(+Ne),Le):Te},Le},p.treemapBinary=function(de,be,he,xe,De){var Se,ke,Fe=de.children,ve=Fe.length,Te=new Array(ve+1);for(Te[0]=ke=Se=0;Se<ve;++Se)Te[Se+1]=ke+=Fe[Se].value;!function Le(Oe,Ne,Be,He,Ve,it,ze){if(Oe>=Ne-1){var je=Fe[Oe];return je.x0=He,je.y0=Ve,je.x1=it,void(je.y1=ze)}for(var qe=Te[Oe],Ye=Be/2+qe,ct=Oe+1,vt=Ne-1;ct<vt;){var wt=ct+vt>>>1;Te[wt]<Ye?ct=wt+1:vt=wt}Ye-Te[ct-1]<Te[ct]-Ye&&Oe+1<ct&&--ct;var Ot=Te[ct]-qe,St=Be-Ot;if(it-He>ze-Ve){var ft=(He*St+it*Ot)/Be;Le(Oe,ct,Ot,He,Ve,ft,ze),Le(ct,Ne,St,ft,Ve,it,ze)}else{var st=(Ve*St+ze*Ot)/Be;Le(Oe,ct,Ot,He,Ve,it,st),Le(ct,Ne,St,He,st,it,ze)}}(0,ve,de.value,be,he,xe,De)},p.treemapDice=G,p.treemapResquarify=pe,p.treemapSlice=te,p.treemapSliceDice=function(de,be,he,xe,De){(1&de.depth?te:G)(de,be,he,xe,De)},p.treemapSquarify=ce,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],116:[function(v,ae,ie){var p,g;p=this,g=function(p,g){"use strict";function b(ee,le,ce,pe,de){var be=ee*ee,he=be*ee;return((1-3*ee+3*be-he)*le+(4-6*be+3*he)*ce+(1+3*ee+3*be-3*he)*pe+he*de)/6}function y(ee){var le=ee.length-1;return function(ce){var pe=ce<=0?ce=0:ce>=1?(ce=1,le-1):Math.floor(ce*le),de=ee[pe],be=ee[pe+1];return b((ce-pe/le)*le,pe>0?ee[pe-1]:2*de-be,de,be,pe<le-1?ee[pe+2]:2*be-de)}}function e(ee){var le=ee.length;return function(ce){var pe=Math.floor(((ce%=1)<0?++ce:ce)*le);return b((ce-pe/le)*le,ee[(pe+le-1)%le],ee[pe%le],ee[(pe+1)%le],ee[(pe+2)%le])}}function r(ee){return function(){return ee}}function t(ee,le){return function(ce){return ee+ce*le}}function o(ee,le){var ce=le-ee;return ce?t(ee,ce>180||ce<-180?ce-360*Math.round(ce/360):ce):r(isNaN(ee)?le:ee)}function m(ee,le){var ce=le-ee;return ce?t(ee,ce):r(isNaN(ee)?le:ee)}var l=function ee(le){var ce=function n(ee){return 1==(ee=+ee)?m:function(le,ce){return ce-le?(pe=le,de=ce,be=ee,pe=Math.pow(pe,be),de=Math.pow(de,be)-pe,be=1/be,function(he){return Math.pow(pe+he*de,be)}):r(isNaN(le)?ce:le);var pe,de,be}}(le);function pe(de,be){var he=ce((de=g.rgb(de)).r,(be=g.rgb(be)).r),xe=ce(de.g,be.g),De=ce(de.b,be.b),Se=m(de.opacity,be.opacity);return function(ke){return de.r=he(ke),de.g=xe(ke),de.b=De(ke),de.opacity=Se(ke),de+""}}return pe.gamma=ee,pe}(1);function i(ee){return function(le){var ce,pe,de=le.length,be=new Array(de),he=new Array(de),xe=new Array(de);for(ce=0;ce<de;++ce)pe=g.rgb(le[ce]),be[ce]=pe.r||0,he[ce]=pe.g||0,xe[ce]=pe.b||0;return be=ee(be),he=ee(he),xe=ee(xe),pe.opacity=1,function(De){return pe.r=be(De),pe.g=he(De),pe.b=xe(De),pe+""}}}var f=i(y),u=i(e);function s(ee,le){le||(le=[]);var ce,pe=ee?Math.min(le.length,ee.length):0,de=le.slice();return function(be){for(ce=0;ce<pe;++ce)de[ce]=ee[ce]*(1-be)+le[ce]*be;return de}}function d(ee){return ArrayBuffer.isView(ee)&&!(ee instanceof DataView)}function h(ee,le){var ce,pe=le?le.length:0,de=ee?Math.min(pe,ee.length):0,be=new Array(de),he=new Array(pe);for(ce=0;ce<de;++ce)be[ce]=M(ee[ce],le[ce]);for(;ce<pe;++ce)he[ce]=le[ce];return function(xe){for(ce=0;ce<de;++ce)he[ce]=be[ce](xe);return he}}function a(ee,le){var ce=new Date;return ee=+ee,le=+le,function(pe){return ce.setTime(ee*(1-pe)+le*pe),ce}}function _(ee,le){return ee=+ee,le=+le,function(ce){return ee*(1-ce)+le*ce}}function c(ee,le){var ce,pe={},de={};for(ce in null!==ee&&"object"==typeof ee||(ee={}),null!==le&&"object"==typeof le||(le={}),le)ce in ee?pe[ce]=M(ee[ce],le[ce]):de[ce]=le[ce];return function(be){for(ce in pe)de[ce]=pe[ce](be);return de}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(T.source,"g");function w(ee,le){var ce,pe,de,Se,be=T.lastIndex=x.lastIndex=0,he=-1,xe=[],De=[];for(ee+="",le+="";(ce=T.exec(ee))&&(pe=x.exec(le));)(de=pe.index)>be&&(de=le.slice(be,de),xe[he]?xe[he]+=de:xe[++he]=de),(ce=ce[0])===(pe=pe[0])?xe[he]?xe[he]+=pe:xe[++he]=pe:(xe[++he]=null,De.push({i:he,x:_(ce,pe)})),be=x.lastIndex;return be<le.length&&(de=le.slice(be),xe[he]?xe[he]+=de:xe[++he]=de),xe.length<2?De[0]?(Se=De[0].x,function(ke){return Se(ke)+""}):function(Se){return function(){return Se}}(le):(le=De.length,function(Se){for(var ke,Fe=0;Fe<le;++Fe)xe[(ke=De[Fe]).i]=ke.x(Se);return xe.join("")})}function M(ee,le){var ce,pe=typeof le;return null==le||"boolean"===pe?r(le):("number"===pe?_:"string"===pe?(ce=g.color(le))?(le=ce,l):w:le instanceof g.color?l:le instanceof Date?a:d(le)?s:Array.isArray(le)?h:"function"!=typeof le.valueOf&&"function"!=typeof le.toString||isNaN(le)?c:_)(ee,le)}var D,C,P,L,S=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N(ee,le,ce,pe,de,be){var he,xe,De;return(he=Math.sqrt(ee*ee+le*le))&&(ee/=he,le/=he),(De=ee*ce+le*pe)&&(ce-=ee*De,pe-=le*De),(xe=Math.sqrt(ce*ce+pe*pe))&&(ce/=xe,pe/=xe,De/=xe),ee*pe<le*ce&&(ee=-ee,le=-le,De=-De,he=-he),{translateX:de,translateY:be,rotate:Math.atan2(le,ee)*S,skewX:Math.atan(De)*S,scaleX:he,scaleY:xe}}function z(ee,le,ce,pe){function de(be){return be.length?be.pop()+" ":""}return function(be,he){var Se,ke,Fe,xe=[],De=[];return be=ee(be),he=ee(he),function(Se,ke,Fe,ve,Te,Le){if(Se!==Fe||ke!==ve){var Oe=Te.push("translate(",null,le,null,ce);Le.push({i:Oe-4,x:_(Se,Fe)},{i:Oe-2,x:_(ke,ve)})}else(Fe||ve)&&Te.push("translate("+Fe+le+ve+ce)}(be.translateX,be.translateY,he.translateX,he.translateY,xe,De),Fe=xe,(Se=be.rotate)!==(ke=he.rotate)?(Se-ke>180?ke+=360:ke-Se>180&&(Se+=360),De.push({i:Fe.push(de(Fe)+"rotate(",null,pe)-2,x:_(Se,ke)})):ke&&Fe.push(de(Fe)+"rotate("+ke+pe),function(Se,ke,Fe,ve){Se!==ke?ve.push({i:Fe.push(de(Fe)+"skewX(",null,pe)-2,x:_(Se,ke)}):ke&&Fe.push(de(Fe)+"skewX("+ke+pe)}(be.skewX,he.skewX,xe,De),function(Se,ke,Fe,ve,Te,Le){if(Se!==Fe||ke!==ve){var Oe=Te.push(de(Te)+"scale(",null,",",null,")");Le.push({i:Oe-4,x:_(Se,Fe)},{i:Oe-2,x:_(ke,ve)})}else 1===Fe&&1===ve||Te.push(de(Te)+"scale("+Fe+","+ve+")")}(be.scaleX,be.scaleY,he.scaleX,he.scaleY,xe,De),be=he=null,function(Se){for(var ke,Fe=-1,ve=De.length;++Fe<ve;)xe[(ke=De[Fe]).i]=ke.x(Se);return xe.join("")}}}var q=z(function(ee){return"none"===ee?E:(D||(D=document.createElement("DIV"),C=document.documentElement,P=document.defaultView),D.style.transform=ee,ee=P.getComputedStyle(C.appendChild(D),null).getPropertyValue("transform"),C.removeChild(D),N(+(ee=ee.slice(7,-1).split(","))[0],+ee[1],+ee[2],+ee[3],+ee[4],+ee[5]))},"px, ","px)","deg)"),G=z(function(ee){return null==ee?E:(L||(L=document.createElementNS("http://www.w3.org/2000/svg","g")),L.setAttribute("transform",ee),(ee=L.transform.baseVal.consolidate())?N((ee=ee.matrix).a,ee.b,ee.c,ee.d,ee.e,ee.f):E)},", ",")",")"),K=Math.SQRT2;function ne(ee){return((ee=Math.exp(ee))+1/ee)/2}function X(ee){return function(le,ce){var pe=ee((le=g.hsl(le)).h,(ce=g.hsl(ce)).h),de=m(le.s,ce.s),be=m(le.l,ce.l),he=m(le.opacity,ce.opacity);return function(xe){return le.h=pe(xe),le.s=de(xe),le.l=be(xe),le.opacity=he(xe),le+""}}}var J=X(o),se=X(m);function V(ee){return function(le,ce){var pe=ee((le=g.hcl(le)).h,(ce=g.hcl(ce)).h),de=m(le.c,ce.c),be=m(le.l,ce.l),he=m(le.opacity,ce.opacity);return function(xe){return le.h=pe(xe),le.c=de(xe),le.l=be(xe),le.opacity=he(xe),le+""}}}var j=V(o),H=V(m);function oe(ee){return function le(ce){function pe(de,be){var he=ee((de=g.cubehelix(de)).h,(be=g.cubehelix(be)).h),xe=m(de.s,be.s),De=m(de.l,be.l),Se=m(de.opacity,be.opacity);return function(ke){return de.h=he(ke),de.s=xe(ke),de.l=De(Math.pow(ke,ce)),de.opacity=Se(ke),de+""}}return ce=+ce,pe.gamma=le,pe}(1)}var U=oe(o),te=oe(m);p.interpolate=M,p.interpolateArray=function(ee,le){return(d(le)?s:h)(ee,le)},p.interpolateBasis=y,p.interpolateBasisClosed=e,p.interpolateCubehelix=U,p.interpolateCubehelixLong=te,p.interpolateDate=a,p.interpolateDiscrete=function(ee){var le=ee.length;return function(ce){return ee[Math.max(0,Math.min(le-1,Math.floor(ce*le)))]}},p.interpolateHcl=j,p.interpolateHclLong=H,p.interpolateHsl=J,p.interpolateHslLong=se,p.interpolateHue=function(ee,le){var ce=o(+ee,+le);return function(pe){var de=ce(pe);return de-360*Math.floor(de/360)}},p.interpolateLab=function(ee,le){var ce=m((ee=g.lab(ee)).l,(le=g.lab(le)).l),pe=m(ee.a,le.a),de=m(ee.b,le.b),be=m(ee.opacity,le.opacity);return function(he){return ee.l=ce(he),ee.a=pe(he),ee.b=de(he),ee.opacity=be(he),ee+""}},p.interpolateNumber=_,p.interpolateNumberArray=s,p.interpolateObject=c,p.interpolateRgb=l,p.interpolateRgbBasis=f,p.interpolateRgbBasisClosed=u,p.interpolateRound=function(ee,le){return ee=+ee,le=+le,function(ce){return Math.round(ee*(1-ce)+le*ce)}},p.interpolateString=w,p.interpolateTransformCss=q,p.interpolateTransformSvg=G,p.interpolateZoom=function(ee,le){var ce,pe,de=ee[0],be=ee[1],he=ee[2],Se=le[2],ke=le[0]-de,Fe=le[1]-be,ve=ke*ke+Fe*Fe;if(ve<1e-12)pe=Math.log(Se/he)/K,ce=function(He){return[de+He*ke,be+He*Fe,he*Math.exp(K*He*pe)]};else{var Te=Math.sqrt(ve),Le=(Se*Se-he*he+4*ve)/(2*he*2*Te),Oe=(Se*Se-he*he-4*ve)/(2*Se*2*Te),Ne=Math.log(Math.sqrt(Le*Le+1)-Le),Be=Math.log(Math.sqrt(Oe*Oe+1)-Oe);pe=(Be-Ne)/K,ce=function(He){var Ve,qe,it=He*pe,ze=ne(Ne),je=he/(2*Te)*(ze*(Ve=K*it+Ne,((Ve=Math.exp(2*Ve))-1)/(Ve+1))-(qe=Ne,((qe=Math.exp(qe))-1/qe)/2));return[de+je*ke,be+je*Fe,he*ze/ne(K*it+Ne)]}}return ce.duration=1e3*pe,ce},p.piecewise=function(ee,le){for(var ce=0,pe=le.length-1,de=le[0],be=new Array(pe<0?0:pe);ce<pe;)be[ce]=ee(de,de=le[++ce]);return function(he){var xe=Math.max(0,Math.min(pe-1,Math.floor(he*=pe)));return be[xe](he-xe)}},p.quantize=function(ee,le){for(var ce=new Array(le),pe=0;pe<le;++pe)ce[pe]=ee(pe/(le-1));return ce},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-color")):g((p=p||self).d3=p.d3||{},p.d3)},{"d3-color":109}],117:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";var g=Math.PI,b=2*g,y=b-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function r(){return new e}e.prototype=r.prototype={constructor:e,moveTo:function(t,o){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,o){this._+="L"+(this._x1=+t)+","+(this._y1=+o)},quadraticCurveTo:function(t,o,n,m){this._+="Q"+ +t+","+ +o+","+(this._x1=+n)+","+(this._y1=+m)},bezierCurveTo:function(t,o,n,m,l,i){this._+="C"+ +t+","+ +o+","+ +n+","+ +m+","+(this._x1=+l)+","+(this._y1=+i)},arcTo:function(t,o,n,m,l){var i=this._x1,f=this._y1,u=(n=+n)-(t=+t),s=(m=+m)-(o=+o),d=i-t,h=f-o,a=d*d+h*h;if((l=+l)<0)throw new Error("negative radius: "+l);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=o);else if(a>1e-6)if(Math.abs(h*u-s*d)>1e-6&&l){var _=n-i,c=m-f,T=u*u+s*s,x=_*_+c*c,w=Math.sqrt(T),M=Math.sqrt(a),D=l*Math.tan((g-Math.acos((T+a-x)/(2*w*M)))/2),C=D/M,P=D/w;Math.abs(C-1)>1e-6&&(this._+="L"+(t+C*d)+","+(o+C*h)),this._+="A"+l+","+l+",0,0,"+ +(h*_>d*c)+","+(this._x1=t+P*u)+","+(this._y1=o+P*s)}else this._+="L"+(this._x1=t)+","+(this._y1=o)},arc:function(t,o,n,m,l,i){t=+t,o=+o,i=!!i;var f=(n=+n)*Math.cos(m),u=n*Math.sin(m),s=t+f,d=o+u,h=1^i,a=i?m-l:l-m;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+d:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-d)>1e-6)&&(this._+="L"+s+","+d),n&&(a<0&&(a=a%b+b),a>y?this._+="A"+n+","+n+",0,1,"+h+","+(t-f)+","+(o-u)+"A"+n+","+n+",0,1,"+h+","+(this._x1=s)+","+(this._y1=d):a>1e-6&&(this._+="A"+n+","+n+",0,"+ +(a>=g)+","+h+","+(this._x1=t+n*Math.cos(l))+","+(this._y1=o+n*Math.sin(l))))},rect:function(t,o,n,m){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+o)+"h"+ +n+"v"+ +m+"h"+-n+"Z"},toString:function(){return this._}},p.path=r,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],118:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";function g(m,l,i,f){if(isNaN(l)||isNaN(i))return m;var u,s,d,h,a,_,c,T,x,w=m._root,M={data:f},D=m._x0,C=m._y0,P=m._x1,L=m._y1;if(!w)return m._root=M,m;for(;w.length;)if((_=l>=(s=(D+P)/2))?D=s:P=s,(c=i>=(d=(C+L)/2))?C=d:L=d,u=w,!(w=w[T=c<<1|_]))return u[T]=M,m;if(h=+m._x.call(null,w.data),a=+m._y.call(null,w.data),l===h&&i===a)return M.next=w,u?u[T]=M:m._root=M,m;do{u=u?u[T]=new Array(4):m._root=new Array(4),(_=l>=(s=(D+P)/2))?D=s:P=s,(c=i>=(d=(C+L)/2))?C=d:L=d}while((T=c<<1|_)==(x=(a>=d)<<1|h>=s));return u[x]=w,u[T]=M,m}function b(m,l,i,f,u){this.node=m,this.x0=l,this.y0=i,this.x1=f,this.y1=u}function y(m){return m[0]}function e(m){return m[1]}function r(m,l,i){var f=new t(l??y,i??e,NaN,NaN,NaN,NaN);return null==m?f:f.addAll(m)}function t(m,l,i,f,u,s){this._x=m,this._y=l,this._x0=i,this._y0=f,this._x1=u,this._y1=s,this._root=void 0}function o(m){for(var l={data:m.data},i=l;m=m.next;)i=i.next={data:m.data};return l}var n=r.prototype=t.prototype;n.copy=function(){var m,l,i=new t(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root;if(!f)return i;if(!f.length)return i._root=o(f),i;for(m=[{source:f,target:i._root=new Array(4)}];f=m.pop();)for(var u=0;u<4;++u)(l=f.source[u])&&(l.length?m.push({source:l,target:f.target[u]=new Array(4)}):f.target[u]=o(l));return i},n.add=function(m){var l=+this._x.call(null,m),i=+this._y.call(null,m);return g(this.cover(l,i),l,i,m)},n.addAll=function(m){var l,i,f,u,s=m.length,d=new Array(s),h=new Array(s),a=1/0,_=1/0,c=-1/0,T=-1/0;for(i=0;i<s;++i)isNaN(f=+this._x.call(null,l=m[i]))||isNaN(u=+this._y.call(null,l))||(d[i]=f,h[i]=u,f<a&&(a=f),f>c&&(c=f),u<_&&(_=u),u>T&&(T=u));if(a>c||_>T)return this;for(this.cover(a,_).cover(c,T),i=0;i<s;++i)g(this,d[i],h[i],m[i]);return this},n.cover=function(m,l){if(isNaN(m=+m)||isNaN(l=+l))return this;var i=this._x0,f=this._y0,u=this._x1,s=this._y1;if(isNaN(i))u=(i=Math.floor(m))+1,s=(f=Math.floor(l))+1;else{for(var d,h,a=u-i,_=this._root;i>m||m>=u||f>l||l>=s;)switch(h=(l<f)<<1|m<i,(d=new Array(4))[h]=_,_=d,a*=2,h){case 0:u=i+a,s=f+a;break;case 1:i=u-a,s=f+a;break;case 2:u=i+a,f=s-a;break;case 3:i=u-a,f=s-a}this._root&&this._root.length&&(this._root=_)}return this._x0=i,this._y0=f,this._x1=u,this._y1=s,this},n.data=function(){var m=[];return this.visit(function(l){if(!l.length)do{m.push(l.data)}while(l=l.next)}),m},n.extent=function(m){return arguments.length?this.cover(+m[0][0],+m[0][1]).cover(+m[1][0],+m[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(m,l,i){var f,u,s,d,h,a,_,c=this._x0,T=this._y0,x=this._x1,w=this._y1,M=[],D=this._root;for(D&&M.push(new b(D,c,T,x,w)),null==i?i=1/0:(c=m-i,T=l-i,x=m+i,w=l+i,i*=i);a=M.pop();)if(!(!(D=a.node)||(u=a.x0)>x||(s=a.y0)>w||(d=a.x1)<c||(h=a.y1)<T))if(D.length){var C=(u+d)/2,P=(s+h)/2;M.push(new b(D[3],C,P,d,h),new b(D[2],u,P,C,h),new b(D[1],C,s,d,P),new b(D[0],u,s,C,P)),(_=(l>=P)<<1|m>=C)&&(a=M[M.length-1],M[M.length-1]=M[M.length-1-_],M[M.length-1-_]=a)}else{var L=m-+this._x.call(null,D.data),S=l-+this._y.call(null,D.data),E=L*L+S*S;if(E<i){var N=Math.sqrt(i=E);c=m-N,T=l-N,x=m+N,w=l+N,f=D.data}}return f},n.remove=function(m){if(isNaN(s=+this._x.call(null,m))||isNaN(d=+this._y.call(null,m)))return this;var l,i,f,u,s,d,h,a,_,c,T,x,w=this._root,M=this._x0,D=this._y0,C=this._x1,P=this._y1;if(!w)return this;if(w.length)for(;;){if((_=s>=(h=(M+C)/2))?M=h:C=h,(c=d>=(a=(D+P)/2))?D=a:P=a,l=w,!(w=w[T=c<<1|_]))return this;if(!w.length)break;(l[T+1&3]||l[T+2&3]||l[T+3&3])&&(i=l,x=T)}for(;w.data!==m;)if(f=w,!(w=w.next))return this;return(u=w.next)&&delete w.next,f?(u?f.next=u:delete f.next,this):l?(u?l[T]=u:delete l[T],(w=l[0]||l[1]||l[2]||l[3])&&w===(l[3]||l[2]||l[1]||l[0])&&!w.length&&(i?i[x]=w:this._root=w),this):(this._root=u,this)},n.removeAll=function(m){for(var l=0,i=m.length;l<i;++l)this.remove(m[l]);return this},n.root=function(){return this._root},n.size=function(){var m=0;return this.visit(function(l){if(!l.length)do{++m}while(l=l.next)}),m},n.visit=function(m){var l,i,f,u,s,d,h=[],a=this._root;for(a&&h.push(new b(a,this._x0,this._y0,this._x1,this._y1));l=h.pop();)if(!m(a=l.node,f=l.x0,u=l.y0,s=l.x1,d=l.y1)&&a.length){var _=(f+s)/2,c=(u+d)/2;(i=a[3])&&h.push(new b(i,_,c,s,d)),(i=a[2])&&h.push(new b(i,f,c,_,d)),(i=a[1])&&h.push(new b(i,_,u,s,c)),(i=a[0])&&h.push(new b(i,f,u,_,c))}return this},n.visitAfter=function(m){var l,i=[],f=[];for(this._root&&i.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));l=i.pop();){var u=l.node;if(u.length){var s,d=l.x0,h=l.y0,a=l.x1,_=l.y1,c=(d+a)/2,T=(h+_)/2;(s=u[0])&&i.push(new b(s,d,h,c,T)),(s=u[1])&&i.push(new b(s,c,h,a,T)),(s=u[2])&&i.push(new b(s,d,T,c,_)),(s=u[3])&&i.push(new b(s,c,T,a,_))}f.push(l)}for(;l=f.pop();)m(l.node,l.x0,l.y0,l.x1,l.y1);return this},n.x=function(m){return arguments.length?(this._x=m,this):this._x},n.y=function(m){return arguments.length?(this._y=m,this):this._y},p.quadtree=r,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],119:[function(v,ae,ie){var p,g;p=this,g=function(p,g){"use strict";function b(Ie){return function(){return Ie}}var y=Math.abs,e=Math.atan2,r=Math.cos,t=Math.max,o=Math.min,n=Math.sin,m=Math.sqrt,l=Math.PI,i=l/2,f=2*l;function u(Ie){return Ie>1?0:Ie<-1?l:Math.acos(Ie)}function s(Ie){return Ie>=1?i:Ie<=-1?-i:Math.asin(Ie)}function d(Ie){return Ie.innerRadius}function h(Ie){return Ie.outerRadius}function a(Ie){return Ie.startAngle}function _(Ie){return Ie.endAngle}function c(Ie){return Ie&&Ie.padAngle}function T(Ie,et,ht,xt,Rt,Xt,tn,Kt){var kn=ht-Ie,Vn=xt-et,Tn=tn-Rt,sn=Kt-Xt,fn=sn*kn-Tn*Vn;if(!(fn*fn<1e-12))return[Ie+(fn=(Tn*(et-Xt)-sn*(Ie-Rt))/fn)*kn,et+fn*Vn]}function x(Ie,et,ht,xt,Rt,Xt,tn){var Kt=Ie-ht,kn=et-xt,Vn=(tn?Xt:-Xt)/m(Kt*Kt+kn*kn),Tn=Vn*kn,sn=-Vn*Kt,fn=Ie+Tn,dn=et+sn,Mn=ht+Tn,En=xt+sn,jn=(fn+Mn)/2,er=(dn+En)/2,nr=Mn-fn,mr=En-dn,Dr=nr*nr+mr*mr,yr=Rt-Xt,Wr=fn*En-Mn*dn,kr=(mr<0?-1:1)*m(t(0,yr*yr*Dr-Wr*Wr)),Or=(Wr*mr-nr*kr)/Dr,Hr=(-Wr*nr-mr*kr)/Dr,oi=(Wr*mr+nr*kr)/Dr,Qn=(-Wr*nr+mr*kr)/Dr,Ir=Or-jn,Tr=Hr-er,ar=oi-jn,Jr=Qn-er;return Ir*Ir+Tr*Tr>ar*ar+Jr*Jr&&(Or=oi,Hr=Qn),{cx:Or,cy:Hr,x01:-Tn,y01:-sn,x11:Or*(Rt/yr-1),y11:Hr*(Rt/yr-1)}}function w(Ie){this._context=Ie}function M(Ie){return new w(Ie)}function D(Ie){return Ie[0]}function C(Ie){return Ie[1]}function P(){var Ie=D,et=C,ht=b(!0),xt=null,Rt=M,Xt=null;function tn(Kt){var kn,Vn,Tn,sn=Kt.length,fn=!1;for(null==xt&&(Xt=Rt(Tn=g.path())),kn=0;kn<=sn;++kn)!(kn<sn&&ht(Vn=Kt[kn],kn,Kt))===fn&&((fn=!fn)?Xt.lineStart():Xt.lineEnd()),fn&&Xt.point(+Ie(Vn,kn,Kt),+et(Vn,kn,Kt));if(Tn)return Xt=null,Tn+""||null}return tn.x=function(Kt){return arguments.length?(Ie="function"==typeof Kt?Kt:b(+Kt),tn):Ie},tn.y=function(Kt){return arguments.length?(et="function"==typeof Kt?Kt:b(+Kt),tn):et},tn.defined=function(Kt){return arguments.length?(ht="function"==typeof Kt?Kt:b(!!Kt),tn):ht},tn.curve=function(Kt){return arguments.length?(Rt=Kt,null!=xt&&(Xt=Rt(xt)),tn):Rt},tn.context=function(Kt){return arguments.length?(null==Kt?xt=Xt=null:Xt=Rt(xt=Kt),tn):xt},tn}function L(){var Ie=D,et=null,ht=b(0),xt=C,Rt=b(!0),Xt=null,tn=M,Kt=null;function kn(Tn){var sn,fn,dn,Mn,En,jn=Tn.length,er=!1,nr=new Array(jn),mr=new Array(jn);for(null==Xt&&(Kt=tn(En=g.path())),sn=0;sn<=jn;++sn){if(!(sn<jn&&Rt(Mn=Tn[sn],sn,Tn))===er)if(er=!er)fn=sn,Kt.areaStart(),Kt.lineStart();else{for(Kt.lineEnd(),Kt.lineStart(),dn=sn-1;dn>=fn;--dn)Kt.point(nr[dn],mr[dn]);Kt.lineEnd(),Kt.areaEnd()}er&&(nr[sn]=+Ie(Mn,sn,Tn),mr[sn]=+ht(Mn,sn,Tn),Kt.point(et?+et(Mn,sn,Tn):nr[sn],xt?+xt(Mn,sn,Tn):mr[sn]))}if(En)return Kt=null,En+""||null}function Vn(){return P().defined(Rt).curve(tn).context(Xt)}return kn.x=function(Tn){return arguments.length?(Ie="function"==typeof Tn?Tn:b(+Tn),et=null,kn):Ie},kn.x0=function(Tn){return arguments.length?(Ie="function"==typeof Tn?Tn:b(+Tn),kn):Ie},kn.x1=function(Tn){return arguments.length?(et=null==Tn?null:"function"==typeof Tn?Tn:b(+Tn),kn):et},kn.y=function(Tn){return arguments.length?(ht="function"==typeof Tn?Tn:b(+Tn),xt=null,kn):ht},kn.y0=function(Tn){return arguments.length?(ht="function"==typeof Tn?Tn:b(+Tn),kn):ht},kn.y1=function(Tn){return arguments.length?(xt=null==Tn?null:"function"==typeof Tn?Tn:b(+Tn),kn):xt},kn.lineX0=kn.lineY0=function(){return Vn().x(Ie).y(ht)},kn.lineY1=function(){return Vn().x(Ie).y(xt)},kn.lineX1=function(){return Vn().x(et).y(ht)},kn.defined=function(Tn){return arguments.length?(Rt="function"==typeof Tn?Tn:b(!!Tn),kn):Rt},kn.curve=function(Tn){return arguments.length?(tn=Tn,null!=Xt&&(Kt=tn(Xt)),kn):tn},kn.context=function(Tn){return arguments.length?(null==Tn?Xt=Kt=null:Kt=tn(Xt=Tn),kn):Xt},kn}function S(Ie,et){return et<Ie?-1:et>Ie?1:et>=Ie?0:NaN}function E(Ie){return Ie}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ie,et):this._context.moveTo(Ie,et);break;case 1:this._point=2;default:this._context.lineTo(Ie,et)}}};var N=q(M);function z(Ie){this._curve=Ie}function q(Ie){function et(ht){return new z(Ie(ht))}return et._curve=Ie,et}function G(Ie){var et=Ie.curve;return Ie.angle=Ie.x,delete Ie.x,Ie.radius=Ie.y,delete Ie.y,Ie.curve=function(ht){return arguments.length?et(q(ht)):et()._curve},Ie}function K(){return G(P().curve(N))}function ne(){var Ie=L().curve(N),et=Ie.curve,ht=Ie.lineX0,xt=Ie.lineX1,Rt=Ie.lineY0,Xt=Ie.lineY1;return Ie.angle=Ie.x,delete Ie.x,Ie.startAngle=Ie.x0,delete Ie.x0,Ie.endAngle=Ie.x1,delete Ie.x1,Ie.radius=Ie.y,delete Ie.y,Ie.innerRadius=Ie.y0,delete Ie.y0,Ie.outerRadius=Ie.y1,delete Ie.y1,Ie.lineStartAngle=function(){return G(ht())},delete Ie.lineX0,Ie.lineEndAngle=function(){return G(xt())},delete Ie.lineX1,Ie.lineInnerRadius=function(){return G(Rt())},delete Ie.lineY0,Ie.lineOuterRadius=function(){return G(Xt())},delete Ie.lineY1,Ie.curve=function(tn){return arguments.length?et(q(tn)):et()._curve},Ie}function X(Ie,et){return[(et=+et)*Math.cos(Ie-=Math.PI/2),et*Math.sin(Ie)]}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Ie,et){this._curve.point(et*Math.sin(Ie),et*-Math.cos(Ie))}};var J=Array.prototype.slice;function se(Ie){return Ie.source}function V(Ie){return Ie.target}function j(Ie){var et=se,ht=V,xt=D,Rt=C,Xt=null;function tn(){var Kt,kn=J.call(arguments),Vn=et.apply(this,kn),Tn=ht.apply(this,kn);if(Xt||(Xt=Kt=g.path()),Ie(Xt,+xt.apply(this,(kn[0]=Vn,kn)),+Rt.apply(this,kn),+xt.apply(this,(kn[0]=Tn,kn)),+Rt.apply(this,kn)),Kt)return Xt=null,Kt+""||null}return tn.source=function(Kt){return arguments.length?(et=Kt,tn):et},tn.target=function(Kt){return arguments.length?(ht=Kt,tn):ht},tn.x=function(Kt){return arguments.length?(xt="function"==typeof Kt?Kt:b(+Kt),tn):xt},tn.y=function(Kt){return arguments.length?(Rt="function"==typeof Kt?Kt:b(+Kt),tn):Rt},tn.context=function(Kt){return arguments.length?(Xt=Kt??null,tn):Xt},tn}function H(Ie,et,ht,xt,Rt){Ie.moveTo(et,ht),Ie.bezierCurveTo(et=(et+xt)/2,ht,et,Rt,xt,Rt)}function oe(Ie,et,ht,xt,Rt){Ie.moveTo(et,ht),Ie.bezierCurveTo(et,ht=(ht+Rt)/2,xt,ht,xt,Rt)}function U(Ie,et,ht,xt,Rt){var Xt=X(et,ht),tn=X(et,ht=(ht+Rt)/2),Kt=X(xt,ht),kn=X(xt,Rt);Ie.moveTo(Xt[0],Xt[1]),Ie.bezierCurveTo(tn[0],tn[1],Kt[0],Kt[1],kn[0],kn[1])}var te={draw:function(Ie,et){var ht=Math.sqrt(et/l);Ie.moveTo(ht,0),Ie.arc(0,0,ht,0,f)}},ee={draw:function(Ie,et){var ht=Math.sqrt(et/5)/2;Ie.moveTo(-3*ht,-ht),Ie.lineTo(-ht,-ht),Ie.lineTo(-ht,-3*ht),Ie.lineTo(ht,-3*ht),Ie.lineTo(ht,-ht),Ie.lineTo(3*ht,-ht),Ie.lineTo(3*ht,ht),Ie.lineTo(ht,ht),Ie.lineTo(ht,3*ht),Ie.lineTo(-ht,3*ht),Ie.lineTo(-ht,ht),Ie.lineTo(-3*ht,ht),Ie.closePath()}},le=Math.sqrt(1/3),ce=2*le,pe={draw:function(Ie,et){var ht=Math.sqrt(et/ce),xt=ht*le;Ie.moveTo(0,-ht),Ie.lineTo(xt,0),Ie.lineTo(0,ht),Ie.lineTo(-xt,0),Ie.closePath()}},de=Math.sin(l/10)/Math.sin(7*l/10),be=Math.sin(f/10)*de,he=-Math.cos(f/10)*de,xe={draw:function(Ie,et){var ht=Math.sqrt(.8908130915292852*et),xt=be*ht,Rt=he*ht;Ie.moveTo(0,-ht),Ie.lineTo(xt,Rt);for(var Xt=1;Xt<5;++Xt){var tn=f*Xt/5,Kt=Math.cos(tn),kn=Math.sin(tn);Ie.lineTo(kn*ht,-Kt*ht),Ie.lineTo(Kt*xt-kn*Rt,kn*xt+Kt*Rt)}Ie.closePath()}},De={draw:function(Ie,et){var ht=Math.sqrt(et),xt=-ht/2;Ie.rect(xt,xt,ht,ht)}},Se=Math.sqrt(3),ke={draw:function(Ie,et){var ht=-Math.sqrt(et/(3*Se));Ie.moveTo(0,2*ht),Ie.lineTo(-Se*ht,-ht),Ie.lineTo(Se*ht,-ht),Ie.closePath()}},Fe=-.5,ve=Math.sqrt(3)/2,Te=1/Math.sqrt(12),Le=3*(Te/2+1),Oe={draw:function(Ie,et){var ht=Math.sqrt(et/Le),xt=ht/2,Rt=ht*Te,Xt=xt,tn=ht*Te+ht,Kt=-Xt,kn=tn;Ie.moveTo(xt,Rt),Ie.lineTo(Xt,tn),Ie.lineTo(Kt,kn),Ie.lineTo(Fe*xt-ve*Rt,ve*xt+Fe*Rt),Ie.lineTo(Fe*Xt-ve*tn,ve*Xt+Fe*tn),Ie.lineTo(Fe*Kt-ve*kn,ve*Kt+Fe*kn),Ie.lineTo(Fe*xt+ve*Rt,Fe*Rt-ve*xt),Ie.lineTo(Fe*Xt+ve*tn,Fe*tn-ve*Xt),Ie.lineTo(Fe*Kt+ve*kn,Fe*kn-ve*Kt),Ie.closePath()}},Ne=[te,ee,pe,De,xe,ke,Oe];function Be(){}function He(Ie,et,ht){Ie._context.bezierCurveTo((2*Ie._x0+Ie._x1)/3,(2*Ie._y0+Ie._y1)/3,(Ie._x0+2*Ie._x1)/3,(Ie._y0+2*Ie._y1)/3,(Ie._x0+4*Ie._x1+et)/6,(Ie._y0+4*Ie._y1+ht)/6)}function Ve(Ie){this._context=Ie}function it(Ie){this._context=Ie}function ze(Ie){this._context=Ie}function je(Ie,et){this._basis=new Ve(Ie),this._beta=et}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:He(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ie,et):this._context.moveTo(Ie,et);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:He(this,Ie,et)}this._x0=this._x1,this._x1=Ie,this._y0=this._y1,this._y1=et}},it.prototype={areaStart:Be,areaEnd:Be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1,this._x2=Ie,this._y2=et;break;case 1:this._point=2,this._x3=Ie,this._y3=et;break;case 2:this._point=3,this._x4=Ie,this._y4=et,this._context.moveTo((this._x0+4*this._x1+Ie)/6,(this._y0+4*this._y1+et)/6);break;default:He(this,Ie,et)}this._x0=this._x1,this._x1=Ie,this._y0=this._y1,this._y1=et}},ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ht=(this._x0+4*this._x1+Ie)/6,xt=(this._y0+4*this._y1+et)/6;this._line?this._context.lineTo(ht,xt):this._context.moveTo(ht,xt);break;case 3:this._point=4;default:He(this,Ie,et)}this._x0=this._x1,this._x1=Ie,this._y0=this._y1,this._y1=et}},je.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Ie=this._x,et=this._y,ht=Ie.length-1;if(ht>0)for(var xt,Rt=Ie[0],Xt=et[0],tn=Ie[ht]-Rt,Kt=et[ht]-Xt,kn=-1;++kn<=ht;)this._basis.point(this._beta*Ie[kn]+(1-this._beta)*(Rt+(xt=kn/ht)*tn),this._beta*et[kn]+(1-this._beta)*(Xt+xt*Kt));this._x=this._y=null,this._basis.lineEnd()},point:function(Ie,et){this._x.push(+Ie),this._y.push(+et)}};var qe=function Ie(et){function ht(xt){return 1===et?new Ve(xt):new je(xt,et)}return ht.beta=function(xt){return Ie(+xt)},ht}(.85);function Ye(Ie,et,ht){Ie._context.bezierCurveTo(Ie._x1+Ie._k*(Ie._x2-Ie._x0),Ie._y1+Ie._k*(Ie._y2-Ie._y0),Ie._x2+Ie._k*(Ie._x1-et),Ie._y2+Ie._k*(Ie._y1-ht),Ie._x2,Ie._y2)}function ct(Ie,et){this._context=Ie,this._k=(1-et)/6}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ye(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ie,et):this._context.moveTo(Ie,et);break;case 1:this._point=2,this._x1=Ie,this._y1=et;break;case 2:this._point=3;default:Ye(this,Ie,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Ie,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var vt=function Ie(et){function ht(xt){return new ct(xt,et)}return ht.tension=function(xt){return Ie(+xt)},ht}(0);function wt(Ie,et){this._context=Ie,this._k=(1-et)/6}wt.prototype={areaStart:Be,areaEnd:Be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1,this._x3=Ie,this._y3=et;break;case 1:this._point=2,this._context.moveTo(this._x4=Ie,this._y4=et);break;case 2:this._point=3,this._x5=Ie,this._y5=et;break;default:Ye(this,Ie,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Ie,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var Ot=function Ie(et){function ht(xt){return new wt(xt,et)}return ht.tension=function(xt){return Ie(+xt)},ht}(0);function St(Ie,et){this._context=Ie,this._k=(1-et)/6}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,Ie,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Ie,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var ft=function Ie(et){function ht(xt){return new St(xt,et)}return ht.tension=function(xt){return Ie(+xt)},ht}(0);function st(Ie,et,ht){var xt=Ie._x1,Rt=Ie._y1,Xt=Ie._x2,tn=Ie._y2;if(Ie._l01_a>1e-12){var Kt=2*Ie._l01_2a+3*Ie._l01_a*Ie._l12_a+Ie._l12_2a,kn=3*Ie._l01_a*(Ie._l01_a+Ie._l12_a);xt=(xt*Kt-Ie._x0*Ie._l12_2a+Ie._x2*Ie._l01_2a)/kn,Rt=(Rt*Kt-Ie._y0*Ie._l12_2a+Ie._y2*Ie._l01_2a)/kn}if(Ie._l23_a>1e-12){var Vn=2*Ie._l23_2a+3*Ie._l23_a*Ie._l12_a+Ie._l12_2a,Tn=3*Ie._l23_a*(Ie._l23_a+Ie._l12_a);Xt=(Xt*Vn+Ie._x1*Ie._l23_2a-et*Ie._l12_2a)/Tn,tn=(tn*Vn+Ie._y1*Ie._l23_2a-ht*Ie._l12_2a)/Tn}Ie._context.bezierCurveTo(xt,Rt,Xt,tn,Ie._x2,Ie._y2)}function Ct(Ie,et){this._context=Ie,this._alpha=et}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){if(Ie=+Ie,et=+et,this._point){var ht=this._x2-Ie,xt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ht*ht+xt*xt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ie,et):this._context.moveTo(Ie,et);break;case 1:this._point=2;break;case 2:this._point=3;default:st(this,Ie,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ie,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var $t=function Ie(et){function ht(xt){return et?new Ct(xt,et):new ct(xt,0)}return ht.alpha=function(xt){return Ie(+xt)},ht}(.5);function rn(Ie,et){this._context=Ie,this._alpha=et}rn.prototype={areaStart:Be,areaEnd:Be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Ie,et){if(Ie=+Ie,et=+et,this._point){var ht=this._x2-Ie,xt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ht*ht+xt*xt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Ie,this._y3=et;break;case 1:this._point=2,this._context.moveTo(this._x4=Ie,this._y4=et);break;case 2:this._point=3,this._x5=Ie,this._y5=et;break;default:st(this,Ie,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ie,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var hn=function Ie(et){function ht(xt){return et?new rn(xt,et):new wt(xt,0)}return ht.alpha=function(xt){return Ie(+xt)},ht}(.5);function cn(Ie,et){this._context=Ie,this._alpha=et}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){if(Ie=+Ie,et=+et,this._point){var ht=this._x2-Ie,xt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ht*ht+xt*xt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:st(this,Ie,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Ie,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var mn=function Ie(et){function ht(xt){return et?new cn(xt,et):new St(xt,0)}return ht.alpha=function(xt){return Ie(+xt)},ht}(.5);function nn(Ie){this._context=Ie}function Xe(Ie){return Ie<0?-1:1}function nt(Ie,et,ht){var xt=Ie._x1-Ie._x0,Rt=et-Ie._x1,Xt=(Ie._y1-Ie._y0)/(xt||Rt<0&&-0),tn=(ht-Ie._y1)/(Rt||xt<0&&-0),Kt=(Xt*Rt+tn*xt)/(xt+Rt);return(Xe(Xt)+Xe(tn))*Math.min(Math.abs(Xt),Math.abs(tn),.5*Math.abs(Kt))||0}function ye(Ie,et){var ht=Ie._x1-Ie._x0;return ht?(3*(Ie._y1-Ie._y0)/ht-et)/2:et}function Ce(Ie,et,ht){var xt=Ie._x0,Xt=Ie._x1,tn=Ie._y1,Kt=(Xt-xt)/3;Ie._context.bezierCurveTo(xt+Kt,Ie._y0+Kt*et,Xt-Kt,tn-Kt*ht,Xt,tn)}function Ue(Ie){this._context=Ie}function Qe(Ie){this._context=new rt(Ie)}function rt(Ie){this._context=Ie}function Ke(Ie){this._context=Ie}function gt(Ie){var et,ht,xt=Ie.length-1,Rt=new Array(xt),Xt=new Array(xt),tn=new Array(xt);for(Rt[0]=0,Xt[0]=2,tn[0]=Ie[0]+2*Ie[1],et=1;et<xt-1;++et)Rt[et]=1,Xt[et]=4,tn[et]=4*Ie[et]+2*Ie[et+1];for(Rt[xt-1]=2,Xt[xt-1]=7,tn[xt-1]=8*Ie[xt-1]+Ie[xt],et=1;et<xt;++et)Xt[et]-=ht=Rt[et]/Xt[et-1],tn[et]-=ht*tn[et-1];for(Rt[xt-1]=tn[xt-1]/Xt[xt-1],et=xt-2;et>=0;--et)Rt[et]=(tn[et]-Rt[et+1])/Xt[et];for(Xt[xt-1]=(Ie[xt]+Rt[xt-1])/2,et=0;et<xt-1;++et)Xt[et]=2*Ie[et+1]-Rt[et+1];return[Rt,Xt]}function mt(Ie,et){this._context=Ie,this._t=et}function Lt(Ie,et){if((Rt=Ie.length)>1)for(var ht,xt,Rt,Xt=1,tn=Ie[et[0]],Kt=tn.length;Xt<Rt;++Xt)for(xt=tn,tn=Ie[et[Xt]],ht=0;ht<Kt;++ht)tn[ht][1]+=tn[ht][0]=isNaN(xt[ht][1])?xt[ht][0]:xt[ht][1]}function Vt(Ie){for(var et=Ie.length,ht=new Array(et);--et>=0;)ht[et]=et;return ht}function dt(Ie,et){return Ie[et]}function bt(Ie){var et=Ie.map(Yt);return Vt(Ie).sort(function(ht,xt){return et[ht]-et[xt]})}function Yt(Ie){for(var et,ht=-1,xt=0,Rt=Ie.length,Xt=-1/0;++ht<Rt;)(et=+Ie[ht][1])>Xt&&(Xt=et,xt=ht);return xt}function It(Ie){var et=Ie.map(jt);return Vt(Ie).sort(function(ht,xt){return et[ht]-et[xt]})}function jt(Ie){for(var et,ht=0,xt=-1,Rt=Ie.length;++xt<Rt;)(et=+Ie[xt][1])&&(ht+=et);return ht}nn.prototype={areaStart:Be,areaEnd:Be,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Ie,et){Ie=+Ie,et=+et,this._point?this._context.lineTo(Ie,et):(this._point=1,this._context.moveTo(Ie,et))}},Ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ce(this,this._t0,ye(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Ie,et){var ht=NaN;if(et=+et,(Ie=+Ie)!==this._x1||et!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Ie,et):this._context.moveTo(Ie,et);break;case 1:this._point=2;break;case 2:this._point=3,Ce(this,ye(this,ht=nt(this,Ie,et)),ht);break;default:Ce(this,this._t0,ht=nt(this,Ie,et))}this._x0=this._x1,this._x1=Ie,this._y0=this._y1,this._y1=et,this._t0=ht}}},(Qe.prototype=Object.create(Ue.prototype)).point=function(Ie,et){Ue.prototype.point.call(this,et,Ie)},rt.prototype={moveTo:function(Ie,et){this._context.moveTo(et,Ie)},closePath:function(){this._context.closePath()},lineTo:function(Ie,et){this._context.lineTo(et,Ie)},bezierCurveTo:function(Ie,et,ht,xt,Rt,Xt){this._context.bezierCurveTo(et,Ie,xt,ht,Xt,Rt)}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Ie=this._x,et=this._y,ht=Ie.length;if(ht)if(this._line?this._context.lineTo(Ie[0],et[0]):this._context.moveTo(Ie[0],et[0]),2===ht)this._context.lineTo(Ie[1],et[1]);else for(var xt=gt(Ie),Rt=gt(et),Xt=0,tn=1;tn<ht;++Xt,++tn)this._context.bezierCurveTo(xt[0][Xt],Rt[0][Xt],xt[1][Xt],Rt[1][Xt],Ie[tn],et[tn]);(this._line||0!==this._line&&1===ht)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Ie,et){this._x.push(+Ie),this._y.push(+et)}},mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Ie,et){switch(Ie=+Ie,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Ie,et):this._context.moveTo(Ie,et);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,et),this._context.lineTo(Ie,et);else{var ht=this._x*(1-this._t)+Ie*this._t;this._context.lineTo(ht,this._y),this._context.lineTo(ht,et)}}this._x=Ie,this._y=et}},p.arc=function(){var Ie=d,et=h,ht=b(0),xt=null,Rt=a,Xt=_,tn=c,Kt=null;function kn(){var Vn,Tn,sn=+Ie.apply(this,arguments),fn=+et.apply(this,arguments),dn=Rt.apply(this,arguments)-i,Mn=Xt.apply(this,arguments)-i,En=y(Mn-dn),jn=Mn>dn;if(Kt||(Kt=Vn=g.path()),fn<sn&&(Tn=fn,fn=sn,sn=Tn),fn>1e-12)if(En>f-1e-12)Kt.moveTo(fn*r(dn),fn*n(dn)),Kt.arc(0,0,fn,dn,Mn,!jn),sn>1e-12&&(Kt.moveTo(sn*r(Mn),sn*n(Mn)),Kt.arc(0,0,sn,Mn,dn,jn));else{var er,nr,mr=dn,Dr=Mn,yr=dn,Wr=Mn,kr=En,Or=En,Hr=tn.apply(this,arguments)/2,oi=Hr>1e-12&&(xt?+xt.apply(this,arguments):m(sn*sn+fn*fn)),Qn=o(y(fn-sn)/2,+ht.apply(this,arguments)),Ir=Qn,Tr=Qn;if(oi>1e-12){var ar=s(oi/sn*n(Hr)),Jr=s(oi/fn*n(Hr));(kr-=2*ar)>1e-12?(yr+=ar*=jn?1:-1,Wr-=ar):(kr=0,yr=Wr=(dn+Mn)/2),(Or-=2*Jr)>1e-12?(mr+=Jr*=jn?1:-1,Dr-=Jr):(Or=0,mr=Dr=(dn+Mn)/2)}var ri=fn*r(mr),Rr=fn*n(mr),Yr=sn*r(Wr),Ci=sn*n(Wr);if(Qn>1e-12){var pn,Ln=fn*r(Dr),Ut=fn*n(Dr),xn=sn*r(yr),Sn=sn*n(yr);if(En<l&&(pn=T(ri,Rr,xn,Sn,Ln,Ut,Yr,Ci))){var Kn=ri-pn[0],Jn=Rr-pn[1],Xn=Ln-pn[0],Un=Ut-pn[1],In=1/n(u((Kn*Xn+Jn*Un)/(m(Kn*Kn+Jn*Jn)*m(Xn*Xn+Un*Un)))/2),Pn=m(pn[0]*pn[0]+pn[1]*pn[1]);Ir=o(Qn,(sn-Pn)/(In-1)),Tr=o(Qn,(fn-Pn)/(In+1))}}Or>1e-12?Tr>1e-12?(er=x(xn,Sn,ri,Rr,fn,Tr,jn),nr=x(Ln,Ut,Yr,Ci,fn,Tr,jn),Kt.moveTo(er.cx+er.x01,er.cy+er.y01),Tr<Qn?Kt.arc(er.cx,er.cy,Tr,e(er.y01,er.x01),e(nr.y01,nr.x01),!jn):(Kt.arc(er.cx,er.cy,Tr,e(er.y01,er.x01),e(er.y11,er.x11),!jn),Kt.arc(0,0,fn,e(er.cy+er.y11,er.cx+er.x11),e(nr.cy+nr.y11,nr.cx+nr.x11),!jn),Kt.arc(nr.cx,nr.cy,Tr,e(nr.y11,nr.x11),e(nr.y01,nr.x01),!jn))):(Kt.moveTo(ri,Rr),Kt.arc(0,0,fn,mr,Dr,!jn)):Kt.moveTo(ri,Rr),sn>1e-12&&kr>1e-12?Ir>1e-12?(er=x(Yr,Ci,Ln,Ut,sn,-Ir,jn),nr=x(ri,Rr,xn,Sn,sn,-Ir,jn),Kt.lineTo(er.cx+er.x01,er.cy+er.y01),Ir<Qn?Kt.arc(er.cx,er.cy,Ir,e(er.y01,er.x01),e(nr.y01,nr.x01),!jn):(Kt.arc(er.cx,er.cy,Ir,e(er.y01,er.x01),e(er.y11,er.x11),!jn),Kt.arc(0,0,sn,e(er.cy+er.y11,er.cx+er.x11),e(nr.cy+nr.y11,nr.cx+nr.x11),jn),Kt.arc(nr.cx,nr.cy,Ir,e(nr.y11,nr.x11),e(nr.y01,nr.x01),!jn))):Kt.arc(0,0,sn,Wr,yr,jn):Kt.lineTo(Yr,Ci)}else Kt.moveTo(0,0);if(Kt.closePath(),Vn)return Kt=null,Vn+""||null}return kn.centroid=function(){var Vn=(+Ie.apply(this,arguments)+ +et.apply(this,arguments))/2,Tn=(+Rt.apply(this,arguments)+ +Xt.apply(this,arguments))/2-l/2;return[r(Tn)*Vn,n(Tn)*Vn]},kn.innerRadius=function(Vn){return arguments.length?(Ie="function"==typeof Vn?Vn:b(+Vn),kn):Ie},kn.outerRadius=function(Vn){return arguments.length?(et="function"==typeof Vn?Vn:b(+Vn),kn):et},kn.cornerRadius=function(Vn){return arguments.length?(ht="function"==typeof Vn?Vn:b(+Vn),kn):ht},kn.padRadius=function(Vn){return arguments.length?(xt=null==Vn?null:"function"==typeof Vn?Vn:b(+Vn),kn):xt},kn.startAngle=function(Vn){return arguments.length?(Rt="function"==typeof Vn?Vn:b(+Vn),kn):Rt},kn.endAngle=function(Vn){return arguments.length?(Xt="function"==typeof Vn?Vn:b(+Vn),kn):Xt},kn.padAngle=function(Vn){return arguments.length?(tn="function"==typeof Vn?Vn:b(+Vn),kn):tn},kn.context=function(Vn){return arguments.length?(Kt=Vn??null,kn):Kt},kn},p.area=L,p.areaRadial=ne,p.curveBasis=function(Ie){return new Ve(Ie)},p.curveBasisClosed=function(Ie){return new it(Ie)},p.curveBasisOpen=function(Ie){return new ze(Ie)},p.curveBundle=qe,p.curveCardinal=vt,p.curveCardinalClosed=Ot,p.curveCardinalOpen=ft,p.curveCatmullRom=$t,p.curveCatmullRomClosed=hn,p.curveCatmullRomOpen=mn,p.curveLinear=M,p.curveLinearClosed=function(Ie){return new nn(Ie)},p.curveMonotoneX=function(Ie){return new Ue(Ie)},p.curveMonotoneY=function(Ie){return new Qe(Ie)},p.curveNatural=function(Ie){return new Ke(Ie)},p.curveStep=function(Ie){return new mt(Ie,.5)},p.curveStepAfter=function(Ie){return new mt(Ie,1)},p.curveStepBefore=function(Ie){return new mt(Ie,0)},p.line=P,p.lineRadial=K,p.linkHorizontal=function(){return j(H)},p.linkRadial=function(){var Ie=j(U);return Ie.angle=Ie.x,delete Ie.x,Ie.radius=Ie.y,delete Ie.y,Ie},p.linkVertical=function(){return j(oe)},p.pie=function(){var Ie=E,et=S,ht=null,xt=b(0),Rt=b(f),Xt=b(0);function tn(Kt){var kn,Vn,Tn,sn,fn,dn=Kt.length,Mn=0,En=new Array(dn),jn=new Array(dn),er=+xt.apply(this,arguments),nr=Math.min(f,Math.max(-f,Rt.apply(this,arguments)-er)),mr=Math.min(Math.abs(nr)/dn,Xt.apply(this,arguments)),Dr=mr*(nr<0?-1:1);for(kn=0;kn<dn;++kn)(fn=jn[En[kn]=kn]=+Ie(Kt[kn],kn,Kt))>0&&(Mn+=fn);for(null!=et?En.sort(function(yr,Wr){return et(jn[yr],jn[Wr])}):null!=ht&&En.sort(function(yr,Wr){return ht(Kt[yr],Kt[Wr])}),kn=0,Tn=Mn?(nr-dn*Dr)/Mn:0;kn<dn;++kn,er=sn)sn=er+((fn=jn[Vn=En[kn]])>0?fn*Tn:0)+Dr,jn[Vn]={data:Kt[Vn],index:kn,value:fn,startAngle:er,endAngle:sn,padAngle:mr};return jn}return tn.value=function(Kt){return arguments.length?(Ie="function"==typeof Kt?Kt:b(+Kt),tn):Ie},tn.sortValues=function(Kt){return arguments.length?(et=Kt,ht=null,tn):et},tn.sort=function(Kt){return arguments.length?(ht=Kt,et=null,tn):ht},tn.startAngle=function(Kt){return arguments.length?(xt="function"==typeof Kt?Kt:b(+Kt),tn):xt},tn.endAngle=function(Kt){return arguments.length?(Rt="function"==typeof Kt?Kt:b(+Kt),tn):Rt},tn.padAngle=function(Kt){return arguments.length?(Xt="function"==typeof Kt?Kt:b(+Kt),tn):Xt},tn},p.pointRadial=X,p.radialArea=ne,p.radialLine=K,p.stack=function(){var Ie=b([]),et=Vt,ht=Lt,xt=dt;function Rt(Xt){var tn,Kt,kn=Ie.apply(this,arguments),Vn=Xt.length,Tn=kn.length,sn=new Array(Tn);for(tn=0;tn<Tn;++tn){for(var fn,dn=kn[tn],Mn=sn[tn]=new Array(Vn),En=0;En<Vn;++En)Mn[En]=fn=[0,+xt(Xt[En],dn,En,Xt)],fn.data=Xt[En];Mn.key=dn}for(tn=0,Kt=et(sn);tn<Tn;++tn)sn[Kt[tn]].index=tn;return ht(sn,Kt),sn}return Rt.keys=function(Xt){return arguments.length?(Ie="function"==typeof Xt?Xt:b(J.call(Xt)),Rt):Ie},Rt.value=function(Xt){return arguments.length?(xt="function"==typeof Xt?Xt:b(+Xt),Rt):xt},Rt.order=function(Xt){return arguments.length?(et=null==Xt?Vt:"function"==typeof Xt?Xt:b(J.call(Xt)),Rt):et},Rt.offset=function(Xt){return arguments.length?(ht=Xt??Lt,Rt):ht},Rt},p.stackOffsetDiverging=function(Ie,et){if((Kt=Ie.length)>0)for(var ht,xt,Rt,Xt,tn,Kt,kn=0,Vn=Ie[et[0]].length;kn<Vn;++kn)for(Xt=tn=0,ht=0;ht<Kt;++ht)(Rt=(xt=Ie[et[ht]][kn])[1]-xt[0])>0?(xt[0]=Xt,xt[1]=Xt+=Rt):Rt<0?(xt[1]=tn,xt[0]=tn+=Rt):(xt[0]=0,xt[1]=Rt)},p.stackOffsetExpand=function(Ie,et){if((xt=Ie.length)>0){for(var ht,xt,Rt,Xt=0,tn=Ie[0].length;Xt<tn;++Xt){for(Rt=ht=0;ht<xt;++ht)Rt+=Ie[ht][Xt][1]||0;if(Rt)for(ht=0;ht<xt;++ht)Ie[ht][Xt][1]/=Rt}Lt(Ie,et)}},p.stackOffsetNone=Lt,p.stackOffsetSilhouette=function(Ie,et){if((ht=Ie.length)>0){for(var ht,xt=0,Rt=Ie[et[0]],Xt=Rt.length;xt<Xt;++xt){for(var tn=0,Kt=0;tn<ht;++tn)Kt+=Ie[tn][xt][1]||0;Rt[xt][1]+=Rt[xt][0]=-Kt/2}Lt(Ie,et)}},p.stackOffsetWiggle=function(Ie,et){if((Rt=Ie.length)>0&&(xt=(ht=Ie[et[0]]).length)>0){for(var ht,xt,Rt,Xt=0,tn=1;tn<xt;++tn){for(var Kt=0,kn=0,Vn=0;Kt<Rt;++Kt){for(var Tn=Ie[et[Kt]],sn=Tn[tn][1]||0,fn=(sn-(Tn[tn-1][1]||0))/2,dn=0;dn<Kt;++dn){var Mn=Ie[et[dn]];fn+=(Mn[tn][1]||0)-(Mn[tn-1][1]||0)}kn+=sn,Vn+=fn*sn}ht[tn-1][1]+=ht[tn-1][0]=Xt,kn&&(Xt-=Vn/kn)}ht[tn-1][1]+=ht[tn-1][0]=Xt,Lt(Ie,et)}},p.stackOrderAppearance=bt,p.stackOrderAscending=It,p.stackOrderDescending=function(Ie){return It(Ie).reverse()},p.stackOrderInsideOut=function(Ie){var et,ht,xt=Ie.length,Rt=Ie.map(jt),Xt=bt(Ie),tn=0,Kt=0,kn=[],Vn=[];for(et=0;et<xt;++et)ht=Xt[et],tn<Kt?(tn+=Rt[ht],kn.push(ht)):(Kt+=Rt[ht],Vn.push(ht));return Vn.reverse().concat(kn)},p.stackOrderNone=Vt,p.stackOrderReverse=function(Ie){return Vt(Ie).reverse()},p.symbol=function(){var Ie=b(te),et=b(64),ht=null;function xt(){var Rt;if(ht||(ht=Rt=g.path()),Ie.apply(this,arguments).draw(ht,+et.apply(this,arguments)),Rt)return ht=null,Rt+""||null}return xt.type=function(Rt){return arguments.length?(Ie="function"==typeof Rt?Rt:b(Rt),xt):Ie},xt.size=function(Rt){return arguments.length?(et="function"==typeof Rt?Rt:b(+Rt),xt):et},xt.context=function(Rt){return arguments.length?(ht=Rt??null,xt):ht},xt},p.symbolCircle=te,p.symbolCross=ee,p.symbolDiamond=pe,p.symbolSquare=De,p.symbolStar=xe,p.symbolTriangle=ke,p.symbolWye=Oe,p.symbols=Ne,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-path")):g((p=p||self).d3=p.d3||{},p.d3)},{"d3-path":117}],120:[function(v,ae,ie){var p,g;p=this,g=function(p,g){"use strict";function b(ft){if(0<=ft.y&&ft.y<100){var st=new Date(-1,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L);return st.setFullYear(ft.y),st}return new Date(ft.y,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L)}function y(ft){if(0<=ft.y&&ft.y<100){var st=new Date(Date.UTC(-1,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L));return st.setUTCFullYear(ft.y),st}return new Date(Date.UTC(ft.y,ft.m,ft.d,ft.H,ft.M,ft.S,ft.L))}function e(ft,st,Ct){return{y:ft,m:st,d:Ct,H:0,M:0,S:0,L:0}}function r(ft){var st=ft.dateTime,Ct=ft.date,$t=ft.time,rn=ft.periods,hn=ft.days,cn=ft.shortDays,mn=ft.months,nn=ft.shortMonths,Xe=u(rn),nt=s(rn),ye=u(hn),Ce=s(hn),Ue=u(cn),Qe=s(cn),rt=u(mn),Ke=s(mn),gt=u(nn),mt=s(nn),Lt={a:function(jt){return cn[jt.getDay()]},A:function(jt){return hn[jt.getDay()]},b:function(jt){return nn[jt.getMonth()]},B:function(jt){return mn[jt.getMonth()]},c:null,d:ne,e:ne,f:j,H:X,I:J,j:se,L:V,m:H,M:oe,p:function(jt){return rn[+(jt.getHours()>=12)]},q:function(jt){return 1+~~(jt.getMonth()/3)},Q:ct,s:vt,S:U,u:te,U:ee,V:le,w:ce,W:pe,x:null,X:null,y:de,Y:be,Z:he,"%":Ye},Vt={a:function(jt){return cn[jt.getUTCDay()]},A:function(jt){return hn[jt.getUTCDay()]},b:function(jt){return nn[jt.getUTCMonth()]},B:function(jt){return mn[jt.getUTCMonth()]},c:null,d:xe,e:xe,f:ve,H:De,I:Se,j:ke,L:Fe,m:Te,M:Le,p:function(jt){return rn[+(jt.getUTCHours()>=12)]},q:function(jt){return 1+~~(jt.getUTCMonth()/3)},Q:ct,s:vt,S:Oe,u:Ne,U:Be,V:He,w:Ve,W:it,x:null,X:null,y:ze,Y:je,Z:qe,"%":Ye},dt={a:function(jt,Ie,et){var ht=Ue.exec(Ie.slice(et));return ht?(jt.w=Qe[ht[0].toLowerCase()],et+ht[0].length):-1},A:function(jt,Ie,et){var ht=ye.exec(Ie.slice(et));return ht?(jt.w=Ce[ht[0].toLowerCase()],et+ht[0].length):-1},b:function(jt,Ie,et){var ht=gt.exec(Ie.slice(et));return ht?(jt.m=mt[ht[0].toLowerCase()],et+ht[0].length):-1},B:function(jt,Ie,et){var ht=rt.exec(Ie.slice(et));return ht?(jt.m=Ke[ht[0].toLowerCase()],et+ht[0].length):-1},c:function(jt,Ie,et){return It(jt,st,Ie,et)},d:C,e:C,f:z,H:L,I:L,j:P,L:N,m:D,M:S,p:function(jt,Ie,et){var ht=Xe.exec(Ie.slice(et));return ht?(jt.p=nt[ht[0].toLowerCase()],et+ht[0].length):-1},q:M,Q:G,s:K,S:E,u:h,U:a,V:_,w:d,W:c,x:function(jt,Ie,et){return It(jt,Ct,Ie,et)},X:function(jt,Ie,et){return It(jt,$t,Ie,et)},y:x,Y:T,Z:w,"%":q};function bt(jt,Ie){return function(et){var ht,xt,Rt,Xt=[],tn=-1,Kt=0,kn=jt.length;for(et instanceof Date||(et=new Date(+et));++tn<kn;)37===jt.charCodeAt(tn)&&(Xt.push(jt.slice(Kt,tn)),null!=(xt=o[ht=jt.charAt(++tn)])?ht=jt.charAt(++tn):xt="e"===ht?" ":"0",(Rt=Ie[ht])&&(ht=Rt(et,xt)),Xt.push(ht),Kt=tn+1);return Xt.push(jt.slice(Kt,tn)),Xt.join("")}}function Yt(jt,Ie){return function(et){var ht,xt,Rt=e(1900,void 0,1);if(It(Rt,jt,et+="",0)!=et.length)return null;if("Q"in Rt)return new Date(Rt.Q);if("s"in Rt)return new Date(1e3*Rt.s+("L"in Rt?Rt.L:0));if(Ie&&!("Z"in Rt)&&(Rt.Z=0),"p"in Rt&&(Rt.H=Rt.H%12+12*Rt.p),void 0===Rt.m&&(Rt.m="q"in Rt?Rt.q:0),"V"in Rt){if(Rt.V<1||Rt.V>53)return null;"w"in Rt||(Rt.w=1),"Z"in Rt?(xt=(ht=y(e(Rt.y,0,1))).getUTCDay(),ht=xt>4||0===xt?g.utcMonday.ceil(ht):g.utcMonday(ht),ht=g.utcDay.offset(ht,7*(Rt.V-1)),Rt.y=ht.getUTCFullYear(),Rt.m=ht.getUTCMonth(),Rt.d=ht.getUTCDate()+(Rt.w+6)%7):(xt=(ht=b(e(Rt.y,0,1))).getDay(),ht=xt>4||0===xt?g.timeMonday.ceil(ht):g.timeMonday(ht),ht=g.timeDay.offset(ht,7*(Rt.V-1)),Rt.y=ht.getFullYear(),Rt.m=ht.getMonth(),Rt.d=ht.getDate()+(Rt.w+6)%7)}else("W"in Rt||"U"in Rt)&&("w"in Rt||(Rt.w="u"in Rt?Rt.u%7:"W"in Rt?1:0),xt="Z"in Rt?y(e(Rt.y,0,1)).getUTCDay():b(e(Rt.y,0,1)).getDay(),Rt.m=0,Rt.d="W"in Rt?(Rt.w+6)%7+7*Rt.W-(xt+5)%7:Rt.w+7*Rt.U-(xt+6)%7);return"Z"in Rt?(Rt.H+=Rt.Z/100|0,Rt.M+=Rt.Z%100,y(Rt)):b(Rt)}}function It(jt,Ie,et,ht){for(var xt,Rt,Xt=0,tn=Ie.length,Kt=et.length;Xt<tn;){if(ht>=Kt)return-1;if(37===(xt=Ie.charCodeAt(Xt++))){if(xt=Ie.charAt(Xt++),!(Rt=dt[xt in o?Ie.charAt(Xt++):xt])||(ht=Rt(jt,et,ht))<0)return-1}else if(xt!=et.charCodeAt(ht++))return-1}return ht}return Lt.x=bt(Ct,Lt),Lt.X=bt($t,Lt),Lt.c=bt(st,Lt),Vt.x=bt(Ct,Vt),Vt.X=bt($t,Vt),Vt.c=bt(st,Vt),{format:function(jt){var Ie=bt(jt+="",Lt);return Ie.toString=function(){return jt},Ie},parse:function(jt){var Ie=Yt(jt+="",!1);return Ie.toString=function(){return jt},Ie},utcFormat:function(jt){var Ie=bt(jt+="",Vt);return Ie.toString=function(){return jt},Ie},utcParse:function(jt){var Ie=Yt(jt+="",!0);return Ie.toString=function(){return jt},Ie}}}var t,o={"-":"",_:" ",0:"0"},n=/^\s*\d+/,m=/^%/,l=/[\\^$*+?|[\]().{}]/g;function i(ft,st,Ct){var $t=ft<0?"-":"",rn=($t?-ft:ft)+"",hn=rn.length;return $t+(hn<Ct?new Array(Ct-hn+1).join(st)+rn:rn)}function f(ft){return ft.replace(l,"\\$&")}function u(ft){return new RegExp("^(?:"+ft.map(f).join("|")+")","i")}function s(ft){for(var st={},Ct=-1,$t=ft.length;++Ct<$t;)st[ft[Ct].toLowerCase()]=Ct;return st}function d(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+1));return $t?(ft.w=+$t[0],Ct+$t[0].length):-1}function h(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+1));return $t?(ft.u=+$t[0],Ct+$t[0].length):-1}function a(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.U=+$t[0],Ct+$t[0].length):-1}function _(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.V=+$t[0],Ct+$t[0].length):-1}function c(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.W=+$t[0],Ct+$t[0].length):-1}function T(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+4));return $t?(ft.y=+$t[0],Ct+$t[0].length):-1}function x(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.y=+$t[0]+(+$t[0]>68?1900:2e3),Ct+$t[0].length):-1}function w(ft,st,Ct){var $t=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(st.slice(Ct,Ct+6));return $t?(ft.Z=$t[1]?0:-($t[2]+($t[3]||"00")),Ct+$t[0].length):-1}function M(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+1));return $t?(ft.q=3*$t[0]-3,Ct+$t[0].length):-1}function D(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.m=$t[0]-1,Ct+$t[0].length):-1}function C(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.d=+$t[0],Ct+$t[0].length):-1}function P(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+3));return $t?(ft.m=0,ft.d=+$t[0],Ct+$t[0].length):-1}function L(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.H=+$t[0],Ct+$t[0].length):-1}function S(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.M=+$t[0],Ct+$t[0].length):-1}function E(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+2));return $t?(ft.S=+$t[0],Ct+$t[0].length):-1}function N(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+3));return $t?(ft.L=+$t[0],Ct+$t[0].length):-1}function z(ft,st,Ct){var $t=n.exec(st.slice(Ct,Ct+6));return $t?(ft.L=Math.floor($t[0]/1e3),Ct+$t[0].length):-1}function q(ft,st,Ct){var $t=m.exec(st.slice(Ct,Ct+1));return $t?Ct+$t[0].length:-1}function G(ft,st,Ct){var $t=n.exec(st.slice(Ct));return $t?(ft.Q=+$t[0],Ct+$t[0].length):-1}function K(ft,st,Ct){var $t=n.exec(st.slice(Ct));return $t?(ft.s=+$t[0],Ct+$t[0].length):-1}function ne(ft,st){return i(ft.getDate(),st,2)}function X(ft,st){return i(ft.getHours(),st,2)}function J(ft,st){return i(ft.getHours()%12||12,st,2)}function se(ft,st){return i(1+g.timeDay.count(g.timeYear(ft),ft),st,3)}function V(ft,st){return i(ft.getMilliseconds(),st,3)}function j(ft,st){return V(ft,st)+"000"}function H(ft,st){return i(ft.getMonth()+1,st,2)}function oe(ft,st){return i(ft.getMinutes(),st,2)}function U(ft,st){return i(ft.getSeconds(),st,2)}function te(ft){var st=ft.getDay();return 0===st?7:st}function ee(ft,st){return i(g.timeSunday.count(g.timeYear(ft)-1,ft),st,2)}function le(ft,st){var Ct=ft.getDay();return ft=Ct>=4||0===Ct?g.timeThursday(ft):g.timeThursday.ceil(ft),i(g.timeThursday.count(g.timeYear(ft),ft)+(4===g.timeYear(ft).getDay()),st,2)}function ce(ft){return ft.getDay()}function pe(ft,st){return i(g.timeMonday.count(g.timeYear(ft)-1,ft),st,2)}function de(ft,st){return i(ft.getFullYear()%100,st,2)}function be(ft,st){return i(ft.getFullYear()%1e4,st,4)}function he(ft){var st=ft.getTimezoneOffset();return(st>0?"-":(st*=-1,"+"))+i(st/60|0,"0",2)+i(st%60,"0",2)}function xe(ft,st){return i(ft.getUTCDate(),st,2)}function De(ft,st){return i(ft.getUTCHours(),st,2)}function Se(ft,st){return i(ft.getUTCHours()%12||12,st,2)}function ke(ft,st){return i(1+g.utcDay.count(g.utcYear(ft),ft),st,3)}function Fe(ft,st){return i(ft.getUTCMilliseconds(),st,3)}function ve(ft,st){return Fe(ft,st)+"000"}function Te(ft,st){return i(ft.getUTCMonth()+1,st,2)}function Le(ft,st){return i(ft.getUTCMinutes(),st,2)}function Oe(ft,st){return i(ft.getUTCSeconds(),st,2)}function Ne(ft){var st=ft.getUTCDay();return 0===st?7:st}function Be(ft,st){return i(g.utcSunday.count(g.utcYear(ft)-1,ft),st,2)}function He(ft,st){var Ct=ft.getUTCDay();return ft=Ct>=4||0===Ct?g.utcThursday(ft):g.utcThursday.ceil(ft),i(g.utcThursday.count(g.utcYear(ft),ft)+(4===g.utcYear(ft).getUTCDay()),st,2)}function Ve(ft){return ft.getUTCDay()}function it(ft,st){return i(g.utcMonday.count(g.utcYear(ft)-1,ft),st,2)}function ze(ft,st){return i(ft.getUTCFullYear()%100,st,2)}function je(ft,st){return i(ft.getUTCFullYear()%1e4,st,4)}function qe(){return"+0000"}function Ye(){return"%"}function ct(ft){return+ft}function vt(ft){return Math.floor(+ft/1e3)}function wt(ft){return t=r(ft),p.timeFormat=t.format,p.timeParse=t.parse,p.utcFormat=t.utcFormat,p.utcParse=t.utcParse,t}wt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ot=Date.prototype.toISOString?function(ft){return ft.toISOString()}:p.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),St=+new Date("2000-01-01T00:00:00.000Z")?function(ft){var st=new Date(ft);return isNaN(st)?null:st}:p.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");p.isoFormat=Ot,p.isoParse=St,p.timeFormatDefaultLocale=wt,p.timeFormatLocale=r,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ie&&void 0!==ae?g(ie,v("d3-time")):g((p=p||self).d3=p.d3||{},p.d3)},{"d3-time":121}],121:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";var g=new Date,b=new Date;function y(Te,Le,Oe,Ne){function Be(He){return Te(He=0===arguments.length?new Date:new Date(+He)),He}return Be.floor=function(He){return Te(He=new Date(+He)),He},Be.ceil=function(He){return Te(He=new Date(He-1)),Le(He,1),Te(He),He},Be.round=function(He){var Ve=Be(He),it=Be.ceil(He);return He-Ve<it-He?Ve:it},Be.offset=function(He,Ve){return Le(He=new Date(+He),null==Ve?1:Math.floor(Ve)),He},Be.range=function(He,Ve,it){var ze,je=[];if(He=Be.ceil(He),it=null==it?1:Math.floor(it),!(He<Ve&&it>0))return je;do{je.push(ze=new Date(+He)),Le(He,it),Te(He)}while(ze<He&&He<Ve);return je},Be.filter=function(He){return y(function(Ve){if(Ve>=Ve)for(;Te(Ve),!He(Ve);)Ve.setTime(Ve-1)},function(Ve,it){if(Ve>=Ve)if(it<0)for(;++it<=0;)for(;Le(Ve,-1),!He(Ve););else for(;--it>=0;)for(;Le(Ve,1),!He(Ve););})},Oe&&(Be.count=function(He,Ve){return g.setTime(+He),b.setTime(+Ve),Te(g),Te(b),Math.floor(Oe(g,b))},Be.every=function(He){return He=Math.floor(He),isFinite(He)&&He>0?He>1?Be.filter(Ne?function(Ve){return Ne(Ve)%He==0}:function(Ve){return Be.count(0,Ve)%He==0}):Be:null}),Be}var e=y(function(){},function(Te,Le){Te.setTime(+Te+Le)},function(Te,Le){return Le-Te});e.every=function(Te){return Te=Math.floor(Te),isFinite(Te)&&Te>0?Te>1?y(function(Le){Le.setTime(Math.floor(Le/Te)*Te)},function(Le,Oe){Le.setTime(+Le+Oe*Te)},function(Le,Oe){return(Oe-Le)/Te}):e:null};var r=e.range,t=y(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Le){Te.setTime(+Te+1e3*Le)},function(Te,Le){return(Le-Te)/1e3},function(Te){return Te.getUTCSeconds()}),o=t.range,n=y(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds())},function(Te,Le){Te.setTime(+Te+6e4*Le)},function(Te,Le){return(Le-Te)/6e4},function(Te){return Te.getMinutes()}),m=n.range,l=y(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds()-6e4*Te.getMinutes())},function(Te,Le){Te.setTime(+Te+36e5*Le)},function(Te,Le){return(Le-Te)/36e5},function(Te){return Te.getHours()}),i=l.range,f=y(function(Te){Te.setHours(0,0,0,0)},function(Te,Le){Te.setDate(Te.getDate()+Le)},function(Te,Le){return(Le-Te-6e4*(Le.getTimezoneOffset()-Te.getTimezoneOffset()))/864e5},function(Te){return Te.getDate()-1}),u=f.range;function s(Te){return y(function(Le){Le.setDate(Le.getDate()-(Le.getDay()+7-Te)%7),Le.setHours(0,0,0,0)},function(Le,Oe){Le.setDate(Le.getDate()+7*Oe)},function(Le,Oe){return(Oe-Le-6e4*(Oe.getTimezoneOffset()-Le.getTimezoneOffset()))/6048e5})}var d=s(0),h=s(1),a=s(2),_=s(3),c=s(4),T=s(5),x=s(6),w=d.range,M=h.range,D=a.range,C=_.range,P=c.range,L=T.range,S=x.range,E=y(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Le){Te.setMonth(Te.getMonth()+Le)},function(Te,Le){return Le.getMonth()-Te.getMonth()+12*(Le.getFullYear()-Te.getFullYear())},function(Te){return Te.getMonth()}),N=E.range,z=y(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Le){Te.setFullYear(Te.getFullYear()+Le)},function(Te,Le){return Le.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});z.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?y(function(Le){Le.setFullYear(Math.floor(Le.getFullYear()/Te)*Te),Le.setMonth(0,1),Le.setHours(0,0,0,0)},function(Le,Oe){Le.setFullYear(Le.getFullYear()+Oe*Te)}):null};var q=z.range,G=y(function(Te){Te.setUTCSeconds(0,0)},function(Te,Le){Te.setTime(+Te+6e4*Le)},function(Te,Le){return(Le-Te)/6e4},function(Te){return Te.getUTCMinutes()}),K=G.range,ne=y(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Le){Te.setTime(+Te+36e5*Le)},function(Te,Le){return(Le-Te)/36e5},function(Te){return Te.getUTCHours()}),X=ne.range,J=y(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Le){Te.setUTCDate(Te.getUTCDate()+Le)},function(Te,Le){return(Le-Te)/864e5},function(Te){return Te.getUTCDate()-1}),se=J.range;function V(Te){return y(function(Le){Le.setUTCDate(Le.getUTCDate()-(Le.getUTCDay()+7-Te)%7),Le.setUTCHours(0,0,0,0)},function(Le,Oe){Le.setUTCDate(Le.getUTCDate()+7*Oe)},function(Le,Oe){return(Oe-Le)/6048e5})}var j=V(0),H=V(1),oe=V(2),U=V(3),te=V(4),ee=V(5),le=V(6),ce=j.range,pe=H.range,de=oe.range,be=U.range,he=te.range,xe=ee.range,De=le.range,Se=y(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Le){Te.setUTCMonth(Te.getUTCMonth()+Le)},function(Te,Le){return Le.getUTCMonth()-Te.getUTCMonth()+12*(Le.getUTCFullYear()-Te.getUTCFullYear())},function(Te){return Te.getUTCMonth()}),ke=Se.range,Fe=y(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Le){Te.setUTCFullYear(Te.getUTCFullYear()+Le)},function(Te,Le){return Le.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});Fe.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?y(function(Le){Le.setUTCFullYear(Math.floor(Le.getUTCFullYear()/Te)*Te),Le.setUTCMonth(0,1),Le.setUTCHours(0,0,0,0)},function(Le,Oe){Le.setUTCFullYear(Le.getUTCFullYear()+Oe*Te)}):null};var ve=Fe.range;p.timeDay=f,p.timeDays=u,p.timeFriday=T,p.timeFridays=L,p.timeHour=l,p.timeHours=i,p.timeInterval=y,p.timeMillisecond=e,p.timeMilliseconds=r,p.timeMinute=n,p.timeMinutes=m,p.timeMonday=h,p.timeMondays=M,p.timeMonth=E,p.timeMonths=N,p.timeSaturday=x,p.timeSaturdays=S,p.timeSecond=t,p.timeSeconds=o,p.timeSunday=d,p.timeSundays=w,p.timeThursday=c,p.timeThursdays=P,p.timeTuesday=a,p.timeTuesdays=D,p.timeWednesday=_,p.timeWednesdays=C,p.timeWeek=d,p.timeWeeks=w,p.timeYear=z,p.timeYears=q,p.utcDay=J,p.utcDays=se,p.utcFriday=ee,p.utcFridays=xe,p.utcHour=ne,p.utcHours=X,p.utcMillisecond=e,p.utcMilliseconds=r,p.utcMinute=G,p.utcMinutes=K,p.utcMonday=H,p.utcMondays=pe,p.utcMonth=Se,p.utcMonths=ke,p.utcSaturday=le,p.utcSaturdays=De,p.utcSecond=t,p.utcSeconds=o,p.utcSunday=j,p.utcSundays=ce,p.utcThursday=te,p.utcThursdays=he,p.utcTuesday=oe,p.utcTuesdays=de,p.utcWednesday=U,p.utcWednesdays=be,p.utcWeek=j,p.utcWeeks=ce,p.utcYear=Fe,p.utcYears=ve,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],122:[function(v,ae,ie){arguments[4][121][0].apply(ie,arguments)},{dup:121}],123:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";var g,b,y=0,e=0,r=0,t=0,o=0,n=0,m="object"==typeof performance&&performance.now?performance:Date,l="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(c){setTimeout(c,17)};function i(){return o||(l(f),o=m.now()+n)}function f(){o=0}function u(){this._call=this._time=this._next=null}function s(c,T,x){var w=new u;return w.restart(c,T,x),w}function d(){i(),++y;for(var c,T=g;T;)(c=o-T._time)>=0&&T._call.call(null,c),T=T._next;--y}function h(){o=(t=m.now())+n,y=e=0;try{d()}finally{y=0,function(){for(var c,T,x=g,w=1/0;x;)x._call?(w>x._time&&(w=x._time),c=x,x=x._next):(T=x._next,x._next=null,x=c?c._next=T:g=T);b=c,_(w)}(),o=0}}function a(){var c=m.now(),T=c-t;T>1e3&&(n-=T,t=c)}function _(c){y||(e&&(e=clearTimeout(e)),c-o>24?(c<1/0&&(e=setTimeout(h,c-m.now()-n)),r&&(r=clearInterval(r))):(r||(t=m.now(),r=setInterval(a,1e3)),y=1,l(h)))}u.prototype=s.prototype={constructor:u,restart:function(c,T,x){if("function"!=typeof c)throw new TypeError("callback is not a function");x=(null==x?i():+x)+(null==T?0:+T),this._next||b===this||(b?b._next=this:g=this,b=this),this._call=c,this._time=x,_()},stop:function(){this._call&&(this._call=null,this._time=1/0,_())}},p.interval=function(c,T,x){var w=new u,M=T;return null==T?(w.restart(c,T,x),w):(T=+T,x=null==x?i():+x,w.restart(function D(C){C+=M,w.restart(D,M+=T,x),c(C)},T,x),w)},p.now=i,p.timeout=function(c,T,x){var w=new u;return w.restart(function(M){w.stop(),c(M+T)},T=null==T?0:+T,x),w},p.timer=s,p.timerFlush=d,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).d3=p.d3||{})},{}],124:[function(v,ae,ie){ae.exports=function(){for(var p=0;p<arguments.length;p++)if(void 0!==arguments[p])return arguments[p]}},{}],125:[function(v,ae,ie){"use strict";ae.exports=b;var p=(b.canvas=document.createElement("canvas")).getContext("2d"),g=y([32,126]);function b(e,r){Array.isArray(e)&&(e=e.join(", "));var t,o={},n=16,m=.05;r&&(2===r.length&&"number"==typeof r[0]?t=y(r):Array.isArray(r)?t=r:(r.o?t=y(r.o):r.pairs&&(t=r.pairs),r.fontSize&&(n=r.fontSize),null!=r.threshold&&(m=r.threshold))),t||(t=g),p.font=n+"px "+e;for(var l=0;l<t.length;l++){var i=t[l],f=p.measureText(i[0]).width+p.measureText(i[1]).width,u=p.measureText(i).width;Math.abs(f-u)>n*m&&(o[i]=(u-f)/n*1e3)}return o}function y(e){for(var r=[],t=e[0];t<=e[1];t++)for(var o=String.fromCharCode(t),n=e[0];n<e[1];n++){var m=o+String.fromCharCode(n);r.push(m)}return r}b.createPairs=y,b.ascii=g},{}],126:[function(v,ae,ie){var p=v("abs-svg-path"),g=v("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};ae.exports=function(y,e){y.beginPath(),g(p(e)).forEach(function(r){var t=r[0],o=r.slice(1);y[b[t]].apply(y,o)}),y.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(v,ae,ie){ae.exports=function(p){switch(p){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(v,ae,ie){"use strict";ae.exports=function(p,g){switch(void 0===g&&(g=0),typeof p){case"number":if(p>0)return function(b,y){var e,r;for(e=new Array(b),r=0;r<b;++r)e[r]=y;return e}(0|p,g);break;case"object":if("number"==typeof p.length)return function b(y,e,r){var t=0|y[r];if(t<=0)return[];var o,n=new Array(t);if(r===y.length-1)for(o=0;o<t;++o)n[o]=e;else for(o=0;o<t;++o)n[o]=b(y,e,r+1);return n}(p,g,0)}return[]}},{}],129:[function(v,ae,ie){"use strict";function p(P,L,S){S=S||2;var E,N,z,q,G,K,ne,X=L&&L.length,J=X?L[0]*S:P.length,se=g(P,0,J,S,!0),V=[];if(!se||se.next===se.prev)return V;if(X&&(se=function(H,oe,U,te){var ee,le,de,be=[];for(ee=0,le=oe.length;ee<le;ee++)(de=g(H,oe[ee]*te,ee<le-1?oe[ee+1]*te:H.length,te,!1))===de.next&&(de.steiner=!0),be.push(f(de));for(be.sort(n),ee=0;ee<be.length;ee++)m(be[ee],U),U=b(U,U.next);return U}(P,L,se,S)),P.length>80*S){E=z=P[0],N=q=P[1];for(var j=S;j<J;j+=S)(G=P[j])<E&&(E=G),(K=P[j+1])<N&&(N=K),G>z&&(z=G),K>q&&(q=K);ne=0!==(ne=Math.max(z-E,q-N))?1/ne:0}return y(se,V,S,E,N,ne),V}function g(P,L,S,E,N){var z,q;if(N===C(P,L,S,E)>0)for(z=L;z<S;z+=E)q=w(z,P[z],P[z+1],q);else for(z=S-E;z>=L;z-=E)q=w(z,P[z],P[z+1],q);return q&&h(q,q.next)&&(M(q),q=q.next),q}function b(P,L){if(!P)return P;L||(L=P);var S,E=P;do{if(S=!1,E.steiner||!h(E,E.next)&&0!==d(E.prev,E,E.next))E=E.next;else{if(M(E),(E=L=E.prev)===E.next)break;S=!0}}while(S||E!==L);return L}function y(P,L,S,E,N,z,q){if(P){!q&&z&&function(X,J,se,V){var j=X;do{null===j.z&&(j.z=i(j.x,j.y,J,se,V)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next}while(j!==X);j.prevZ.nextZ=null,j.prevZ=null,function(H){var oe,U,te,ee,le,ce,pe,de,be=1;do{for(U=H,H=null,le=null,ce=0;U;){for(ce++,te=U,pe=0,oe=0;oe<be&&(pe++,te=te.nextZ);oe++);for(de=be;pe>0||de>0&&te;)0!==pe&&(0===de||!te||U.z<=te.z)?(ee=U,U=U.nextZ,pe--):(ee=te,te=te.nextZ,de--),le?le.nextZ=ee:H=ee,ee.prevZ=le,le=ee;U=te}le.nextZ=null,be*=2}while(ce>1)}(j)}(P,E,N,z);for(var G,K,ne=P;P.prev!==P.next;)if(G=P.prev,K=P.next,z?r(P,E,N,z):e(P))L.push(G.i/S),L.push(P.i/S),L.push(K.i/S),M(P),P=K.next,ne=K.next;else if((P=K)===ne){q?1===q?y(P=t(b(P),L,S),L,S,E,N,z,2):2===q&&o(P,L,S,E,N,z):y(b(P),L,S,E,N,z,1);break}}}function e(P){var L=P.prev,S=P,E=P.next;if(d(L,S,E)>=0)return!1;for(var N=P.next.next;N!==P.prev;){if(u(L.x,L.y,S.x,S.y,E.x,E.y,N.x,N.y)&&d(N.prev,N,N.next)>=0)return!1;N=N.next}return!0}function r(P,L,S,E){var N=P.prev,z=P,q=P.next;if(d(N,z,q)>=0)return!1;for(var ne=N.x>z.x?N.x>q.x?N.x:q.x:z.x>q.x?z.x:q.x,X=N.y>z.y?N.y>q.y?N.y:q.y:z.y>q.y?z.y:q.y,J=i(N.x<z.x?N.x<q.x?N.x:q.x:z.x<q.x?z.x:q.x,N.y<z.y?N.y<q.y?N.y:q.y:z.y<q.y?z.y:q.y,L,S,E),se=i(ne,X,L,S,E),V=P.prevZ,j=P.nextZ;V&&V.z>=J&&j&&j.z<=se;){if(V!==P.prev&&V!==P.next&&u(N.x,N.y,z.x,z.y,q.x,q.y,V.x,V.y)&&d(V.prev,V,V.next)>=0||(V=V.prevZ,j!==P.prev&&j!==P.next&&u(N.x,N.y,z.x,z.y,q.x,q.y,j.x,j.y)&&d(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;V&&V.z>=J;){if(V!==P.prev&&V!==P.next&&u(N.x,N.y,z.x,z.y,q.x,q.y,V.x,V.y)&&d(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;j&&j.z<=se;){if(j!==P.prev&&j!==P.next&&u(N.x,N.y,z.x,z.y,q.x,q.y,j.x,j.y)&&d(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function t(P,L,S){var E=P;do{var N=E.prev,z=E.next.next;!h(N,z)&&a(N,E,E.next,z)&&T(N,z)&&T(z,N)&&(L.push(N.i/S),L.push(E.i/S),L.push(z.i/S),M(E),M(E.next),E=P=z),E=E.next}while(E!==P);return b(E)}function o(P,L,S,E,N,z){var q=P;do{for(var G=q.next.next;G!==q.prev;){if(q.i!==G.i&&s(q,G)){var K=x(q,G);return q=b(q,q.next),K=b(K,K.next),y(q,L,S,E,N,z),void y(K,L,S,E,N,z)}G=G.next}q=q.next}while(q!==P)}function n(P,L){return P.x-L.x}function m(P,L){if(L=function(E,N){var z,q=N,G=E.x,K=E.y,ne=-1/0;do{if(K<=q.y&&K>=q.next.y&&q.next.y!==q.y){var X=q.x+(K-q.y)*(q.next.x-q.x)/(q.next.y-q.y);if(X<=G&&X>ne){if(ne=X,X===G){if(K===q.y)return q;if(K===q.next.y)return q.next}z=q.x<q.next.x?q:q.next}}q=q.next}while(q!==N);if(!z)return null;if(G===ne)return z;var J,se=z,V=z.x,j=z.y,H=1/0;q=z;do{G>=q.x&&q.x>=V&&G!==q.x&&u(K<j?G:ne,K,V,j,K<j?ne:G,K,q.x,q.y)&&(J=Math.abs(K-q.y)/(G-q.x),T(q,E)&&(J<H||J===H&&(q.x>z.x||q.x===z.x&&l(z,q)))&&(z=q,H=J)),q=q.next}while(q!==se);return z}(P,L)){var S=x(L,P);b(L,L.next),b(S,S.next)}}function l(P,L){return d(P.prev,P,L.prev)<0&&d(L.next,P,P.next)<0}function i(P,L,S,E,N){return(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-S)*N)|P<<8))|P<<4))|P<<2))|P<<1))|(L=1431655765&((L=858993459&((L=252645135&((L=16711935&((L=32767*(L-E)*N)|L<<8))|L<<4))|L<<2))|L<<1))<<1}function f(P){var L=P,S=P;do{(L.x<S.x||L.x===S.x&&L.y<S.y)&&(S=L),L=L.next}while(L!==P);return S}function u(P,L,S,E,N,z,q,G){return(N-q)*(L-G)-(P-q)*(z-G)>=0&&(P-q)*(E-G)-(S-q)*(L-G)>=0&&(S-q)*(z-G)-(N-q)*(E-G)>=0}function s(P,L){return P.next.i!==L.i&&P.prev.i!==L.i&&!function(S,E){var N=S;do{if(N.i!==S.i&&N.next.i!==S.i&&N.i!==E.i&&N.next.i!==E.i&&a(N,N.next,S,E))return!0;N=N.next}while(N!==S);return!1}(P,L)&&(T(P,L)&&T(L,P)&&function(S,E){var N=S,z=!1,q=(S.x+E.x)/2,G=(S.y+E.y)/2;do{N.y>G!=N.next.y>G&&N.next.y!==N.y&&q<(N.next.x-N.x)*(G-N.y)/(N.next.y-N.y)+N.x&&(z=!z),N=N.next}while(N!==S);return z}(P,L)&&(d(P.prev,P,L.prev)||d(P,L.prev,L))||h(P,L)&&d(P.prev,P,P.next)>0&&d(L.prev,L,L.next)>0)}function d(P,L,S){return(L.y-P.y)*(S.x-L.x)-(L.x-P.x)*(S.y-L.y)}function h(P,L){return P.x===L.x&&P.y===L.y}function a(P,L,S,E){var N=c(d(P,L,S)),z=c(d(P,L,E)),q=c(d(S,E,P)),G=c(d(S,E,L));return N!==z&&q!==G||!(0!==N||!_(P,S,L))||!(0!==z||!_(P,E,L))||!(0!==q||!_(S,P,E))||!(0!==G||!_(S,L,E))}function _(P,L,S){return L.x<=Math.max(P.x,S.x)&&L.x>=Math.min(P.x,S.x)&&L.y<=Math.max(P.y,S.y)&&L.y>=Math.min(P.y,S.y)}function c(P){return P>0?1:P<0?-1:0}function T(P,L){return d(P.prev,P,P.next)<0?d(P,L,P.next)>=0&&d(P,P.prev,L)>=0:d(P,L,P.prev)<0||d(P,P.next,L)<0}function x(P,L){var S=new D(P.i,P.x,P.y),E=new D(L.i,L.x,L.y),N=P.next,z=L.prev;return P.next=L,L.prev=P,S.next=N,N.prev=S,E.next=S,S.prev=E,z.next=E,E.prev=z,E}function w(P,L,S,E){var N=new D(P,L,S);return E?(N.next=E.next,N.prev=E,E.next.prev=N,E.next=N):(N.prev=N,N.next=N),N}function M(P){P.next.prev=P.prev,P.prev.next=P.next,P.prevZ&&(P.prevZ.nextZ=P.nextZ),P.nextZ&&(P.nextZ.prevZ=P.prevZ)}function D(P,L,S){this.i=P,this.x=L,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(P,L,S,E){for(var N=0,z=L,q=S-E;z<S;z+=E)N+=(P[q]-P[z])*(P[z+1]+P[q+1]),q=z;return N}ae.exports=p,ae.exports.default=p,p.deviation=function(P,L,S,E){var N=L&&L.length,q=Math.abs(C(P,0,N?L[0]*S:P.length,S));if(N)for(var G=0,K=L.length;G<K;G++)q-=Math.abs(C(P,L[G]*S,G<K-1?L[G+1]*S:P.length,S));var J=0;for(G=0;G<E.length;G+=3){var se=E[G]*S,V=E[G+1]*S,j=E[G+2]*S;J+=Math.abs((P[se]-P[j])*(P[V+1]-P[se+1])-(P[se]-P[V])*(P[j+1]-P[se+1]))}return 0===q&&0===J?0:Math.abs((J-q)/q)},p.flatten=function(P){for(var L=P[0][0].length,S={vertices:[],holes:[],dimensions:L},E=0,N=0;N<P.length;N++){for(var z=0;z<P[N].length;z++)for(var q=0;q<L;q++)S.vertices.push(P[N][z][q]);N>0&&S.holes.push(E+=P[N-1].length)}return S}},{}],130:[function(v,ae,ie){var p=v("strongly-connected-components");ae.exports=function(g,b){var y,e=[],r=[],t=[],o={},n=[];function m(a){var _,c,T=!1;for(r.push(a),t[a]=!0,_=0;_<n[a].length;_++)(c=n[a][_])===y?(l(y,r),T=!0):t[c]||(T=m(c));if(T)!function w(M){t[M]=!1,o.hasOwnProperty(M)&&Object.keys(o[M]).forEach(function(D){delete o[M][D],t[D]&&w(D)})}(a);else for(_=0;_<n[a].length;_++){var x=o[c=n[a][_]];x||(o[c]=x={}),x[c]=!0}return r.pop(),T}function l(a,_){var c=[].concat(_).concat(a);b?b(m):e.push(c)}function i(a){!function(D){for(var C=0;C<g.length;C++)C<D&&(g[C]=[]),g[C]=g[C].filter(function(P){return P>=D})}(a);for(var _,c=p(g).components.filter(function(D){return D.length>1}),T=1/0,x=0;x<c.length;x++)for(var w=0;w<c[x].length;w++)c[x][w]<T&&(T=c[x][w],_=x);var M=c[_];return!!M&&{leastVertex:T,adjList:g.map(function(D,C){return-1===M.indexOf(C)?[]:D.filter(function(P){return-1!==M.indexOf(P)})})}}y=0;for(var f=g.length;y<f;){var u=i(y);if(y=u.leastVertex,n=u.adjList){for(var s=0;s<n.length;s++)for(var d=0;d<n[s].length;d++){var h=n[s][d];t[+h]=!1,o[h]={}}m(y),y+=1}else y=f}return b?void 0:e}},{"strongly-connected-components":307}],131:[function(v,ae,ie){"use strict";var p=v("../../object/valid-value");ae.exports=function(){return p(this).length=0,this}},{"../../object/valid-value":162}],132:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?Array.from:v("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(v,ae,ie){"use strict";ae.exports=function(){var p,g,b=Array.from;return"function"==typeof b&&(g=b(p=["raz","dwa"]),Boolean(g&&g!==p&&"dwa"===g[1]))}},{}],134:[function(v,ae,ie){"use strict";var p=v("es6-symbol").iterator,g=v("../../function/is-arguments"),b=v("../../function/is-function"),y=v("../../number/to-pos-integer"),e=v("../../object/valid-callable"),r=v("../../object/valid-value"),t=v("../../object/is-value"),o=v("../../string/is-string"),n=Array.isArray,m=Function.prototype.call,l={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;ae.exports=function(f){var u,s,d,h,a,_,c,T,x,w,M=arguments[1],D=arguments[2];if(f=Object(r(f)),t(M)&&e(M),this&&this!==Array&&b(this))u=this;else{if(!M){if(g(f))return 1!==(a=f.length)?Array.apply(null,f):((h=new Array(1))[0]=f[0],h);if(n(f)){for(h=new Array(a=f.length),s=0;s<a;++s)h[s]=f[s];return h}}h=[]}if(!n(f))if(void 0!==(x=f[p])){for(c=e(x).call(f),u&&(h=new u),T=c.next(),s=0;!T.done;)w=M?m.call(M,D,T.value,s):T.value,u?(l.value=w,i(h,s,l)):h[s]=w,T=c.next(),++s;a=s}else if(o(f)){for(a=f.length,u&&(h=new u),s=0,d=0;s<a;++s)w=f[s],s+1<a&&(_=w.charCodeAt(0))>=55296&&_<=56319&&(w+=f[++s]),w=M?m.call(M,D,w,d):w,u?(l.value=w,i(h,d,l)):h[d]=w,++d;a=d}if(void 0===a)for(a=y(f.length),u&&(h=new u(a)),s=0;s<a;++s)w=M?m.call(M,D,f[s],s):f[s],u?(l.value=w,i(h,s,l)):h[s]=w;return u&&(l.value=null,h.length=a),h}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(v,ae,ie){"use strict";var p=Object.prototype.toString,g=p.call(function(){return arguments}());ae.exports=function(b){return p.call(b)===g}},{}],136:[function(v,ae,ie){"use strict";var p=Object.prototype.toString,g=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ae.exports=function(b){return"function"==typeof b&&g(p.call(b))}},{}],137:[function(v,ae,ie){"use strict";ae.exports=function(){}},{}],138:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?Math.sign:v("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(v,ae,ie){"use strict";ae.exports=function(){var p=Math.sign;return"function"==typeof p&&1===p(10)&&-1===p(-20)}},{}],140:[function(v,ae,ie){"use strict";ae.exports=function(p){return p=Number(p),isNaN(p)||0===p?p:p>0?1:-1}},{}],141:[function(v,ae,ie){"use strict";var p=v("../math/sign"),g=Math.abs,b=Math.floor;ae.exports=function(y){return isNaN(y)?0:0!==(y=Number(y))&&isFinite(y)?p(y)*b(g(y)):y}},{"../math/sign":138}],142:[function(v,ae,ie){"use strict";var p=v("./to-integer"),g=Math.max;ae.exports=function(b){return g(0,p(b))}},{"./to-integer":141}],143:[function(v,ae,ie){"use strict";var p=v("./valid-callable"),g=v("./valid-value"),b=Function.prototype.bind,y=Function.prototype.call,e=Object.keys,r=Object.prototype.propertyIsEnumerable;ae.exports=function(t,o){return function(n,m){var l,i=arguments[2],f=arguments[3];return n=Object(g(n)),p(m),l=e(n),f&&l.sort("function"==typeof f?b.call(f,n):void 0),"function"!=typeof t&&(t=l[t]),y.call(t,l,function(u,s){return r.call(n,u)?y.call(m,i,n[u],u,n,s):o})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?Object.assign:v("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(v,ae,ie){"use strict";ae.exports=function(){var p,g=Object.assign;return"function"==typeof g&&(g(p={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),p.foo+p.bar+p.trzy==="razdwatrzy")}},{}],146:[function(v,ae,ie){"use strict";var p=v("../keys"),g=v("../valid-value"),b=Math.max;ae.exports=function(y,e){var r,t,o,n=b(arguments.length,2);for(y=Object(g(y)),o=function(m){try{y[m]=e[m]}catch(l){r||(r=l)}},t=1;t<n;++t)p(e=arguments[t]).forEach(o);if(void 0!==r)throw r;return y}},{"../keys":152,"../valid-value":162}],147:[function(v,ae,ie){"use strict";var p=v("../array/from"),g=v("./assign"),b=v("./valid-value");ae.exports=function(y){var e=Object(b(y)),r=arguments[1],t=Object(arguments[2]);if(e!==y&&!r)return e;var o={};return r?p(r,function(n){(t.ensure||n in y)&&(o[n]=y[n])}):g(o,y),o}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(v,ae,ie){"use strict";var p,g,b,y,e=Object.create;v("./set-prototype-of/is-implemented")()||(p=v("./set-prototype-of/shim")),ae.exports=p?1!==p.level?e:(g={},b={},y={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){b[r]="__proto__"!==r?y:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(g,b),Object.defineProperty(p,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:g}),function(r,t){return e(null===r?g:r,t)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(v,ae,ie){"use strict";ae.exports=v("./_iterate")("forEach")},{"./_iterate":143}],150:[function(v,ae,ie){"use strict";var p=v("./is-value"),g={function:!0,object:!0};ae.exports=function(b){return p(b)&&g[typeof b]||!1}},{"./is-value":151}],151:[function(v,ae,ie){"use strict";var p=v("../function/noop")();ae.exports=function(g){return g!==p&&null!==g}},{"../function/noop":137}],152:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?Object.keys:v("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(v,ae,ie){"use strict";ae.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(v,ae,ie){"use strict";var p=v("../is-value"),g=Object.keys;ae.exports=function(b){return g(p(b)?Object(b):b)}},{"../is-value":151}],155:[function(v,ae,ie){"use strict";var p=v("./valid-callable"),g=v("./for-each"),b=Function.prototype.call;ae.exports=function(y,e){var r={},t=arguments[2];return p(e),g(y,function(o,n,m,l){r[n]=b.call(e,t,o,n,m,l)}),r}},{"./for-each":149,"./valid-callable":160}],156:[function(v,ae,ie){"use strict";var p=v("./is-value"),g=Array.prototype.forEach,b=Object.create,y=function(e,r){var t;for(t in e)r[t]=e[t]};ae.exports=function(e){var r=b(null);return g.call(arguments,function(t){p(t)&&y(Object(t),r)}),r}},{"./is-value":151}],157:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?Object.setPrototypeOf:v("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(v,ae,ie){"use strict";var p=Object.create,g=Object.getPrototypeOf,b={};ae.exports=function(){var y=Object.setPrototypeOf;return"function"==typeof y&&g(y((arguments[0]||p)(null),b))===b}},{}],159:[function(v,ae,ie){"use strict";var p,t,o,n,g=v("../is-object"),b=v("../valid-value"),y=Object.prototype.isPrototypeOf,e=Object.defineProperty,r={configurable:!0,enumerable:!1,writable:!0,value:void 0};p=function(t,o){if(b(t),null===o||g(o))return t;throw new TypeError("Prototype must be null or an object")},ae.exports=(t=function(){var t,o=Object.create(null),n={},m=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(m){try{(t=m.set).call(o,n)}catch{}if(Object.getPrototypeOf(o)===n)return{set:t,level:2}}return o.__proto__=n,Object.getPrototypeOf(o)===n?{level:2}:((o={}).__proto__=n,Object.getPrototypeOf(o)===n&&{level:1})}(),t?(2===t.level?t.set?(n=t.set,o=function(m,l){return n.call(p(m,l),l),m}):o=function(m,l){return p(m,l).__proto__=l,m}:o=function m(l,i){var f;return p(l,i),(f=y.call(m.nullPolyfill,l))&&delete m.nullPolyfill.__proto__,null===i&&(i=m.nullPolyfill),l.__proto__=i,f&&e(m.nullPolyfill,"__proto__",r),l},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null),v("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(v,ae,ie){"use strict";ae.exports=function(p){if("function"!=typeof p)throw new TypeError(p+" is not a function");return p}},{}],161:[function(v,ae,ie){"use strict";var p=v("./is-object");ae.exports=function(g){if(!p(g))throw new TypeError(g+" is not an Object");return g}},{"./is-object":150}],162:[function(v,ae,ie){"use strict";var p=v("./is-value");ae.exports=function(g){if(!p(g))throw new TypeError("Cannot use null or undefined");return g}},{"./is-value":151}],163:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?String.prototype.contains:v("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(v,ae,ie){"use strict";var p="razdwatrzy";ae.exports=function(){return"function"==typeof p.contains&&!0===p.contains("dwa")&&!1===p.contains("foo")}},{}],165:[function(v,ae,ie){"use strict";var p=String.prototype.indexOf;ae.exports=function(g){return p.call(this,g,arguments[1])>-1}},{}],166:[function(v,ae,ie){"use strict";var p=Object.prototype.toString,g=p.call("");ae.exports=function(b){return"string"==typeof b||b&&"object"==typeof b&&(b instanceof String||p.call(b)===g)||!1}},{}],167:[function(v,ae,ie){"use strict";var p=Object.create(null),g=Math.random;ae.exports=function(){var b;do{b=g().toString(36).slice(2)}while(p[b]);return b}},{}],168:[function(v,ae,ie){"use strict";var p,g=v("es5-ext/object/set-prototype-of"),b=v("es5-ext/string/#/contains"),y=v("d"),e=v("es6-symbol"),r=v("./"),t=Object.defineProperty;p=ae.exports=function(o,n){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");r.call(this,o),n=n?b.call(n,"key+value")?"key+value":b.call(n,"key")?"key":"value":"value",t(this,"__kind__",y("",n))},g&&g(p,r),delete p.prototype.constructor,p.prototype=Object.create(r.prototype,{_resolve:y(function(o){return"value"===this.__kind__?this.__list__[o]:"key+value"===this.__kind__?[o,this.__list__[o]]:o})}),t(p.prototype,e.toStringTag,y("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(v,ae,ie){"use strict";var p=v("es5-ext/function/is-arguments"),g=v("es5-ext/object/valid-callable"),b=v("es5-ext/string/is-string"),y=v("./get"),e=Array.isArray,r=Function.prototype.call,t=Array.prototype.some;ae.exports=function(o,n){var m,l,i,f,u,s,d,h,a=arguments[2];if(e(o)||p(o)?m="array":b(o)?m="string":o=y(o),g(n),i=function(){f=!0},"array"!==m)if("string"!==m)for(l=o.next();!l.done;){if(r.call(n,a,l.value,i),f)return;l=o.next()}else for(s=o.length,u=0;u<s&&(d=o[u],u+1<s&&(h=d.charCodeAt(0))>=55296&&h<=56319&&(d+=o[++u]),r.call(n,a,d,i),!f);++u);else t.call(o,function(_){return r.call(n,a,_,i),f})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(v,ae,ie){"use strict";var p=v("es5-ext/function/is-arguments"),g=v("es5-ext/string/is-string"),b=v("./array"),y=v("./string"),e=v("./valid-iterable"),r=v("es6-symbol").iterator;ae.exports=function(t){return"function"==typeof e(t)[r]?t[r]():p(t)?new b(t):g(t)?new y(t):new b(t)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(v,ae,ie){"use strict";var p,g=v("es5-ext/array/#/clear"),b=v("es5-ext/object/assign"),y=v("es5-ext/object/valid-callable"),e=v("es5-ext/object/valid-value"),r=v("d"),t=v("d/auto-bind"),o=v("es6-symbol"),n=Object.defineProperty,m=Object.defineProperties;ae.exports=p=function(l,i){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");m(this,{__list__:r("w",e(l)),__context__:r("w",i),__nextIndex__:r("w",0)}),i&&(y(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete p.prototype.constructor,m(p.prototype,b({_next:r(function(){var l;if(this.__list__)return this.__redo__&&void 0!==(l=this.__redo__.shift())?l:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:r(function(){return this._createResult(this._next())}),_createResult:r(function(l){return void 0===l?{done:!0,value:void 0}:{done:!1,value:this._resolve(l)}}),_resolve:r(function(l){return this.__list__[l]}),_unBind:r(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:r(function(){return"[object "+(this[o.toStringTag]||"Object")+"]"})},t({_onAdd:r(function(l){l>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,f){i>=l&&(this.__redo__[f]=++i)},this),this.__redo__.push(l)):n(this,"__redo__",r("c",[l])))}),_onDelete:r(function(l){var i;l>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(l))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(f,u){f>l&&(this.__redo__[u]=--f)},this)))}),_onClear:r(function(){this.__redo__&&g.call(this.__redo__),this.__nextIndex__=0})}))),n(p.prototype,o.iterator,r(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(v,ae,ie){"use strict";var p=v("es5-ext/function/is-arguments"),g=v("es5-ext/object/is-value"),b=v("es5-ext/string/is-string"),y=v("es6-symbol").iterator,e=Array.isArray;ae.exports=function(r){return!(!g(r)||!e(r)&&!b(r)&&!p(r)&&"function"!=typeof r[y])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(v,ae,ie){"use strict";var p,g=v("es5-ext/object/set-prototype-of"),b=v("d"),y=v("es6-symbol"),e=v("./"),r=Object.defineProperty;p=ae.exports=function(t){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");t=String(t),e.call(this,t),r(this,"__length__",b("",t.length))},g&&g(p,e),delete p.prototype.constructor,p.prototype=Object.create(e.prototype,{_next:b(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:b(function(t){var o,n=this.__list__[t];return this.__nextIndex__===this.__length__?n:(o=n.charCodeAt(0))>=55296&&o<=56319?n+this.__list__[this.__nextIndex__++]:n})}),r(p.prototype,y.toStringTag,b("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(v,ae,ie){"use strict";var p=v("./is-iterable");ae.exports=function(g){if(!p(g))throw new TypeError(g+" is not iterable");return g}},{"./is-iterable":172}],175:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?v("ext/global-this").Symbol:v("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(v,ae,ie){"use strict";var p=v("ext/global-this"),g={object:!0,symbol:!0};ae.exports=function(){var b,y=p.Symbol;if("function"!=typeof y)return!1;b=y("test symbol");try{String(b)}catch{return!1}return!!g[typeof y.iterator]&&!!g[typeof y.toPrimitive]&&!!g[typeof y.toStringTag]}},{"ext/global-this":188}],177:[function(v,ae,ie){"use strict";ae.exports=function(p){return!!p&&("symbol"==typeof p||!!p.constructor&&"Symbol"===p.constructor.name&&"Symbol"===p[p.constructor.toStringTag])}},{}],178:[function(v,ae,ie){"use strict";var p=v("d"),b=Object.defineProperty,y=Object.prototype,e=(0,Object.create)(null);ae.exports=function(r){for(var t,o,n=0;e[r+(n||"")];)++n;return e[r+=n||""]=!0,b(y,t="@@"+r,p.gs(null,function(m){o||(o=!0,b(this,t,p(m)),o=!1)})),t}},{d:106}],179:[function(v,ae,ie){"use strict";var p=v("d"),g=v("ext/global-this").Symbol;ae.exports=function(b){return Object.defineProperties(b,{hasInstance:p("",g&&g.hasInstance||b("hasInstance")),isConcatSpreadable:p("",g&&g.isConcatSpreadable||b("isConcatSpreadable")),iterator:p("",g&&g.iterator||b("iterator")),match:p("",g&&g.match||b("match")),replace:p("",g&&g.replace||b("replace")),search:p("",g&&g.search||b("search")),species:p("",g&&g.species||b("species")),split:p("",g&&g.split||b("split")),toPrimitive:p("",g&&g.toPrimitive||b("toPrimitive")),toStringTag:p("",g&&g.toStringTag||b("toStringTag")),unscopables:p("",g&&g.unscopables||b("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(v,ae,ie){"use strict";var p=v("d"),g=v("../../../validate-symbol"),b=Object.create(null);ae.exports=function(y){return Object.defineProperties(y,{for:p(function(e){return b[e]?b[e]:b[e]=y(String(e))}),keyFor:p(function(e){var r;for(r in g(e),b)if(b[r]===e)return r})})}},{"../../../validate-symbol":182,d:106}],181:[function(v,ae,ie){"use strict";var p,g,b,y=v("d"),e=v("./validate-symbol"),r=v("ext/global-this").Symbol,t=v("./lib/private/generate-name"),o=v("./lib/private/setup/standard-symbols"),n=v("./lib/private/setup/symbol-registry"),m=Object.create,l=Object.defineProperties,i=Object.defineProperty;if("function"==typeof r)try{String(r()),b=!0}catch{}else r=null;g=function(f){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return p(f)},ae.exports=p=function f(u){var s;if(this instanceof f)throw new TypeError("Symbol is not a constructor");return b?r(u):(s=m(g.prototype),u=void 0===u?"":String(u),l(s,{__description__:y("",u),__name__:y("",t(u))}))},o(p),n(p),l(g.prototype,{constructor:y(p),toString:y("",function(){return this.__name__})}),l(p.prototype,{toString:y(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:y(function(){return e(this)})}),i(p.prototype,p.toPrimitive,y("",function(){var f=e(this);return"symbol"==typeof f?f:f.toString()})),i(p.prototype,p.toStringTag,y("c","Symbol")),i(g.prototype,p.toStringTag,y("c",p.prototype[p.toStringTag])),i(g.prototype,p.toPrimitive,y("c",p.prototype[p.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(v,ae,ie){"use strict";var p=v("./is-symbol");ae.exports=function(g){if(!p(g))throw new TypeError(g+" is not a symbol");return g}},{"./is-symbol":177}],183:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?WeakMap:v("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(v,ae,ie){"use strict";ae.exports=function(){var p,g;if("function"!=typeof WeakMap)return!1;try{p=new WeakMap([[g={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(p)&&"function"==typeof p.set&&p.set({},1)===p&&"function"==typeof p.delete&&"function"==typeof p.has&&"one"===p.get(g)}},{}],185:[function(v,ae,ie){"use strict";ae.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(v,ae,ie){"use strict";var p,g=v("es5-ext/object/is-value"),b=v("es5-ext/object/set-prototype-of"),y=v("es5-ext/object/valid-object"),e=v("es5-ext/object/valid-value"),r=v("es5-ext/string/random-uniq"),t=v("d"),o=v("es6-iterator/get"),n=v("es6-iterator/for-of"),m=v("es6-symbol").toStringTag,l=v("./is-native-implemented"),i=Array.isArray,f=Object.defineProperty,u=Object.prototype.hasOwnProperty,s=Object.getPrototypeOf;ae.exports=p=function(){var d,h=arguments[0];if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");return d=l&&b&&WeakMap!==p?b(new WeakMap,s(this)):this,g(h)&&(i(h)||(h=o(h))),f(d,"__weakMapData__",t("c","$weakMap$"+r())),h&&n(h,function(a){e(a),d.set(a[0],a[1])}),d},l&&(b&&b(p,WeakMap),p.prototype=Object.create(WeakMap.prototype,{constructor:t(p)})),Object.defineProperties(p.prototype,{delete:t(function(d){return!!u.call(y(d),this.__weakMapData__)&&(delete d[this.__weakMapData__],!0)}),get:t(function(d){if(u.call(y(d),this.__weakMapData__))return d[this.__weakMapData__]}),has:t(function(d){return u.call(y(d),this.__weakMapData__)}),set:t(function(d,h){return f(y(d),this.__weakMapData__,t("c",h)),this}),toString:t(function(){return"[object WeakMap]"})}),f(p.prototype,m,t("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(v,ae,ie){var p=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};ae.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return p()}try{return __global__||p()}finally{delete Object.prototype.__global__}}()},{}],188:[function(v,ae,ie){"use strict";ae.exports=v("./is-implemented")()?globalThis:v("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(v,ae,ie){"use strict";ae.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(v,ae,ie){"use strict";var p=v("is-string-blank");ae.exports=function(g){var b=typeof g;if("string"===b){var y=g;if(0==(g=+g)&&p(y))return!1}else if("number"!==b)return!1;return g-g<1}},{"is-string-blank":237}],191:[function(v,ae,ie){var p=v("dtype");ae.exports=function(g,b,y){if(!g)throw new TypeError("must specify data as first parameter");if(y=0|+(y||0),Array.isArray(g)&&g[0]&&"number"==typeof g[0][0]){var e,r,t,o,n=g[0].length,m=g.length*n;b&&"string"!=typeof b||(b=new(p(b||"float32"))(m+y));var l=b.length-y;if(m!==l)throw new Error("source length "+m+" ("+n+"x"+g.length+") does not match destination length "+l);for(e=0,t=y;e<g.length;e++)for(r=0;r<n;r++)b[t++]=null===g[e][r]?NaN:g[e][r]}else if(b&&"string"!=typeof b)b.set(g,y);else{var i=p(b||"float32");if(Array.isArray(g)||"array"===b)for(e=0,t=y,o=(b=new i(g.length+y)).length;t<o;t++,e++)b[t]=null===g[e]?NaN:g[e];else 0===y?b=new i(g):(b=new i(g.length+y)).set(g,y)}return b}},{dtype:127}],192:[function(v,ae,ie){"use strict";var p=v("css-font/stringify"),g=[32,126];ae.exports=function(b){var y=(b=b||{}).shape?b.shape:b.canvas?[b.canvas.width,b.canvas.height]:[512,512],e=b.canvas||document.createElement("canvas"),r=b.font,t="number"==typeof b.step?[b.step,b.step]:b.step||[32,32],o=b.chars||g;if(r&&"string"!=typeof r&&(r=p(r)),Array.isArray(o)){if(2===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]){for(var n=[],m=o[0],l=0;m<=o[1];m++)n[l++]=String.fromCharCode(m);o=n}}else o=String(o).split("");y=y.slice(),e.width=y[0],e.height=y[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=r,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var f=t[0]/2,u=t[1]/2;for(m=0;m<o.length;m++)i.fillText(o[m],f,u),(f+=t[0])>y[0]-t[0]/2&&(f=t[0]/2,u+=t[1]);return e}},{"css-font/stringify":102}],193:[function(v,ae,ie){"use strict";function p(e,r){r||(r={}),("string"==typeof e||Array.isArray(e))&&(r.family=e);var t=Array.isArray(r.family)?r.family.join(", "):r.family;if(!t)throw Error("`family` must be defined");var o=r.size||r.fontSize||r.em||48,m=(e=[r.style||r.fontStyle||"",r.weight||r.fontWeight||"",o].join(" ")+"px "+t,r.origin||"top");if(p.cache[t]&&o<=p.cache[t].em)return g(p.cache[t],m);var l=r.canvas||p.canvas,i=l.getContext("2d"),f={upper:void 0!==r.upper?r.upper:"H",lower:void 0!==r.lower?r.lower:"x",descent:void 0!==r.descent?r.descent:"p",ascent:void 0!==r.ascent?r.ascent:"h",tittle:void 0!==r.tittle?r.tittle:"i",overshoot:void 0!==r.overshoot?r.overshoot:"O"},u=Math.ceil(1.5*o);l.height=u,l.width=.5*u,i.font=e;var s={top:0};i.clearRect(0,0,u,u),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var d=b(i.getImageData(0,0,u,u));i.clearRect(0,0,u,u),i.textBaseline="bottom",i.fillText("H",0,u);var h=b(i.getImageData(0,0,u,u));s.lineHeight=s.bottom=u-h+d,i.clearRect(0,0,u,u),i.textBaseline="alphabetic",i.fillText("H",0,u);var a=u-b(i.getImageData(0,0,u,u))-1+d;s.baseline=s.alphabetic=a,i.clearRect(0,0,u,u),i.textBaseline="middle",i.fillText("H",0,.5*u);var _=b(i.getImageData(0,0,u,u));s.median=s.middle=u-_-1+d-.5*u,i.clearRect(0,0,u,u),i.textBaseline="hanging",i.fillText("H",0,.5*u);var c=b(i.getImageData(0,0,u,u));s.hanging=u-c-1+d-.5*u,i.clearRect(0,0,u,u),i.textBaseline="ideographic",i.fillText("H",0,u);var T=b(i.getImageData(0,0,u,u));if(s.ideographic=u-T-1+d,f.upper&&(i.clearRect(0,0,u,u),i.textBaseline="top",i.fillText(f.upper,0,0),s.upper=b(i.getImageData(0,0,u,u)),s.capHeight=s.baseline-s.upper),f.lower&&(i.clearRect(0,0,u,u),i.textBaseline="top",i.fillText(f.lower,0,0),s.lower=b(i.getImageData(0,0,u,u)),s.xHeight=s.baseline-s.lower),f.tittle&&(i.clearRect(0,0,u,u),i.textBaseline="top",i.fillText(f.tittle,0,0),s.tittle=b(i.getImageData(0,0,u,u))),f.ascent&&(i.clearRect(0,0,u,u),i.textBaseline="top",i.fillText(f.ascent,0,0),s.ascent=b(i.getImageData(0,0,u,u))),f.descent&&(i.clearRect(0,0,u,u),i.textBaseline="top",i.fillText(f.descent,0,0),s.descent=y(i.getImageData(0,0,u,u))),f.overshoot){i.clearRect(0,0,u,u),i.textBaseline="top",i.fillText(f.overshoot,0,0);var x=y(i.getImageData(0,0,u,u));s.overshoot=x-a}for(var w in s)s[w]/=o;return s.em=o,p.cache[t]=s,g(s,m)}function g(e,r){var t={};for(var o in"string"==typeof r&&(r=e[r]),e)"em"!==o&&(t[o]=e[o]-r);return t}function b(e){for(var r=e.height,t=e.data,o=3;o<t.length;o+=4)if(0!==t[o])return Math.floor(.25*(o-3)/r)}function y(e){for(var r=e.height,t=e.data,o=t.length-1;o>0;o-=4)if(0!==t[o])return Math.floor(.25*(o-3)/r)}ae.exports=p,p.canvas=document.createElement("canvas"),p.cache={}},{}],194:[function(v,ae,ie){ae.exports=function(p,g){if("string"!=typeof p)throw new TypeError("must specify type string");if(g=g||{},typeof document>"u"&&!g.canvas)return null;var b=g.canvas||document.createElement("canvas");"number"==typeof g.width&&(b.width=g.width),"number"==typeof g.height&&(b.height=g.height);var y,e=g;try{var r=[p];0===p.indexOf("webgl")&&r.push("experimental-"+p);for(var t=0;t<r.length;t++)if(y=b.getContext(r[t],e))return y}catch{y=null}return y||null}},{}],195:[function(v,ae,ie){ae.exports=function(p,g){var b=g[0],y=g[1],e=g[2],r=g[3],t=g[4],o=g[5],n=g[6],m=g[7],l=g[8],i=g[9],f=g[10],u=g[11],s=g[12],d=g[13],h=g[14],a=g[15];return p[0]=o*(f*a-u*h)-i*(n*a-m*h)+d*(n*u-m*f),p[1]=-(y*(f*a-u*h)-i*(e*a-r*h)+d*(e*u-r*f)),p[2]=y*(n*a-m*h)-o*(e*a-r*h)+d*(e*m-r*n),p[3]=-(y*(n*u-m*f)-o*(e*u-r*f)+i*(e*m-r*n)),p[4]=-(t*(f*a-u*h)-l*(n*a-m*h)+s*(n*u-m*f)),p[5]=b*(f*a-u*h)-l*(e*a-r*h)+s*(e*u-r*f),p[6]=-(b*(n*a-m*h)-t*(e*a-r*h)+s*(e*m-r*n)),p[7]=b*(n*u-m*f)-t*(e*u-r*f)+l*(e*m-r*n),p[8]=t*(i*a-u*d)-l*(o*a-m*d)+s*(o*u-m*i),p[9]=-(b*(i*a-u*d)-l*(y*a-r*d)+s*(y*u-r*i)),p[10]=b*(o*a-m*d)-t*(y*a-r*d)+s*(y*m-r*o),p[11]=-(b*(o*u-m*i)-t*(y*u-r*i)+l*(y*m-r*o)),p[12]=-(t*(i*h-f*d)-l*(o*h-n*d)+s*(o*f-n*i)),p[13]=b*(i*h-f*d)-l*(y*h-e*d)+s*(y*f-e*i),p[14]=-(b*(o*h-n*d)-t*(y*h-e*d)+s*(y*n-e*o)),p[15]=b*(o*f-n*i)-t*(y*f-e*i)+l*(y*n-e*o),p}},{}],196:[function(v,ae,ie){ae.exports=function(p){var g=new Float32Array(16);return g[0]=p[0],g[1]=p[1],g[2]=p[2],g[3]=p[3],g[4]=p[4],g[5]=p[5],g[6]=p[6],g[7]=p[7],g[8]=p[8],g[9]=p[9],g[10]=p[10],g[11]=p[11],g[12]=p[12],g[13]=p[13],g[14]=p[14],g[15]=p[15],g}},{}],197:[function(v,ae,ie){ae.exports=function(p,g){return p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[3],p[4]=g[4],p[5]=g[5],p[6]=g[6],p[7]=g[7],p[8]=g[8],p[9]=g[9],p[10]=g[10],p[11]=g[11],p[12]=g[12],p[13]=g[13],p[14]=g[14],p[15]=g[15],p}},{}],198:[function(v,ae,ie){ae.exports=function(){var p=new Float32Array(16);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],199:[function(v,ae,ie){ae.exports=function(p){var g=p[0],b=p[1],y=p[2],e=p[3],r=p[4],t=p[5],o=p[6],n=p[7],m=p[8],l=p[9],i=p[10],f=p[11],u=p[12],s=p[13],d=p[14],h=p[15];return(g*t-b*r)*(i*h-f*d)-(g*o-y*r)*(l*h-f*s)+(g*n-e*r)*(l*d-i*s)+(b*o-y*t)*(m*h-f*u)-(b*n-e*t)*(m*d-i*u)+(y*n-e*o)*(m*s-l*u)}},{}],200:[function(v,ae,ie){ae.exports=function(p,g){var b=g[0],y=g[1],e=g[2],r=g[3],t=b+b,o=y+y,n=e+e,m=b*t,l=y*t,i=y*o,f=e*t,u=e*o,s=e*n,d=r*t,h=r*o,a=r*n;return p[0]=1-i-s,p[1]=l+a,p[2]=f-h,p[3]=0,p[4]=l-a,p[5]=1-m-s,p[6]=u+d,p[7]=0,p[8]=f+h,p[9]=u-d,p[10]=1-m-i,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],201:[function(v,ae,ie){ae.exports=function(p,g,b){var y,e,r,t=b[0],o=b[1],n=b[2],m=Math.sqrt(t*t+o*o+n*n);return Math.abs(m)<1e-6?null:(t*=m=1/m,o*=m,n*=m,y=Math.sin(g),e=Math.cos(g),p[0]=t*t*(r=1-e)+e,p[1]=o*t*r+n*y,p[2]=n*t*r-o*y,p[3]=0,p[4]=t*o*r-n*y,p[5]=o*o*r+e,p[6]=n*o*r+t*y,p[7]=0,p[8]=t*n*r+o*y,p[9]=o*n*r-t*y,p[10]=n*n*r+e,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p)}},{}],202:[function(v,ae,ie){ae.exports=function(p,g,b){var y=g[0],e=g[1],r=g[2],t=g[3],o=y+y,n=e+e,m=r+r,l=y*o,i=y*n,f=y*m,u=e*n,s=e*m,d=r*m,h=t*o,a=t*n,_=t*m;return p[0]=1-(u+d),p[1]=i+_,p[2]=f-a,p[3]=0,p[4]=i-_,p[5]=1-(l+d),p[6]=s+h,p[7]=0,p[8]=f+a,p[9]=s-h,p[10]=1-(l+u),p[11]=0,p[12]=b[0],p[13]=b[1],p[14]=b[2],p[15]=1,p}},{}],203:[function(v,ae,ie){ae.exports=function(p,g){return p[0]=g[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=g[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=g[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],204:[function(v,ae,ie){ae.exports=function(p,g){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=g[0],p[13]=g[1],p[14]=g[2],p[15]=1,p}},{}],205:[function(v,ae,ie){ae.exports=function(p,g){var b=Math.sin(g),y=Math.cos(g);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=y,p[6]=b,p[7]=0,p[8]=0,p[9]=-b,p[10]=y,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],206:[function(v,ae,ie){ae.exports=function(p,g){var b=Math.sin(g),y=Math.cos(g);return p[0]=y,p[1]=0,p[2]=-b,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=b,p[9]=0,p[10]=y,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],207:[function(v,ae,ie){ae.exports=function(p,g){var b=Math.sin(g),y=Math.cos(g);return p[0]=y,p[1]=b,p[2]=0,p[3]=0,p[4]=-b,p[5]=y,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],208:[function(v,ae,ie){ae.exports=function(p,g,b,y,e,r,t){var o=1/(b-g),n=1/(e-y),m=1/(r-t);return p[0]=2*r*o,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=2*r*n,p[6]=0,p[7]=0,p[8]=(b+g)*o,p[9]=(e+y)*n,p[10]=(t+r)*m,p[11]=-1,p[12]=0,p[13]=0,p[14]=t*r*2*m,p[15]=0,p}},{}],209:[function(v,ae,ie){ae.exports=function(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],210:[function(v,ae,ie){ae.exports={create:v("./create"),clone:v("./clone"),copy:v("./copy"),identity:v("./identity"),transpose:v("./transpose"),invert:v("./invert"),adjoint:v("./adjoint"),determinant:v("./determinant"),multiply:v("./multiply"),translate:v("./translate"),scale:v("./scale"),rotate:v("./rotate"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),fromRotation:v("./fromRotation"),fromRotationTranslation:v("./fromRotationTranslation"),fromScaling:v("./fromScaling"),fromTranslation:v("./fromTranslation"),fromXRotation:v("./fromXRotation"),fromYRotation:v("./fromYRotation"),fromZRotation:v("./fromZRotation"),fromQuat:v("./fromQuat"),frustum:v("./frustum"),perspective:v("./perspective"),perspectiveFromFieldOfView:v("./perspectiveFromFieldOfView"),ortho:v("./ortho"),lookAt:v("./lookAt"),str:v("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(v,ae,ie){ae.exports=function(p,g){var b=g[0],y=g[1],e=g[2],r=g[3],t=g[4],o=g[5],n=g[6],m=g[7],l=g[8],i=g[9],f=g[10],u=g[11],s=g[12],d=g[13],h=g[14],a=g[15],_=b*o-y*t,c=b*n-e*t,T=b*m-r*t,x=y*n-e*o,w=y*m-r*o,M=e*m-r*n,D=l*d-i*s,C=l*h-f*s,P=l*a-u*s,L=i*h-f*d,S=i*a-u*d,E=f*a-u*h,N=_*E-c*S+T*L+x*P-w*C+M*D;return N?(p[0]=(o*E-n*S+m*L)*(N=1/N),p[1]=(e*S-y*E-r*L)*N,p[2]=(d*M-h*w+a*x)*N,p[3]=(f*w-i*M-u*x)*N,p[4]=(n*P-t*E-m*C)*N,p[5]=(b*E-e*P+r*C)*N,p[6]=(h*T-s*M-a*c)*N,p[7]=(l*M-f*T+u*c)*N,p[8]=(t*S-o*P+m*D)*N,p[9]=(y*P-b*S-r*D)*N,p[10]=(s*w-d*T+a*_)*N,p[11]=(i*T-l*w-u*_)*N,p[12]=(o*C-t*L-n*D)*N,p[13]=(b*L-y*C+e*D)*N,p[14]=(d*c-s*x-h*_)*N,p[15]=(l*x-i*c+f*_)*N,p):null}},{}],212:[function(v,ae,ie){var p=v("./identity");ae.exports=function(g,b,y,e){var r,t,o,n,m,l,i,f,u,s,d=b[0],h=b[1],a=b[2],_=e[0],c=e[1],T=e[2],x=y[0],w=y[1],M=y[2];return Math.abs(d-x)<1e-6&&Math.abs(h-w)<1e-6&&Math.abs(a-M)<1e-6?p(g):(i=d-x,f=h-w,u=a-M,r=c*(u*=s=1/Math.sqrt(i*i+f*f+u*u))-T*(f*=s),t=T*(i*=s)-_*u,o=_*f-c*i,(s=Math.sqrt(r*r+t*t+o*o))?(r*=s=1/s,t*=s,o*=s):(r=0,t=0,o=0),n=f*o-u*t,m=u*r-i*o,l=i*t-f*r,(s=Math.sqrt(n*n+m*m+l*l))?(n*=s=1/s,m*=s,l*=s):(n=0,m=0,l=0),g[0]=r,g[1]=n,g[2]=i,g[3]=0,g[4]=t,g[5]=m,g[6]=f,g[7]=0,g[8]=o,g[9]=l,g[10]=u,g[11]=0,g[12]=-(r*d+t*h+o*a),g[13]=-(n*d+m*h+l*a),g[14]=-(i*d+f*h+u*a),g[15]=1,g)}},{"./identity":209}],213:[function(v,ae,ie){ae.exports=function(p,g,b){var y=g[0],e=g[1],r=g[2],t=g[3],o=g[4],n=g[5],m=g[6],l=g[7],i=g[8],f=g[9],u=g[10],s=g[11],d=g[12],h=g[13],a=g[14],_=g[15],c=b[0],T=b[1],x=b[2],w=b[3];return p[0]=c*y+T*o+x*i+w*d,p[1]=c*e+T*n+x*f+w*h,p[2]=c*r+T*m+x*u+w*a,p[3]=c*t+T*l+x*s+w*_,p[4]=(c=b[4])*y+(T=b[5])*o+(x=b[6])*i+(w=b[7])*d,p[5]=c*e+T*n+x*f+w*h,p[6]=c*r+T*m+x*u+w*a,p[7]=c*t+T*l+x*s+w*_,p[8]=(c=b[8])*y+(T=b[9])*o+(x=b[10])*i+(w=b[11])*d,p[9]=c*e+T*n+x*f+w*h,p[10]=c*r+T*m+x*u+w*a,p[11]=c*t+T*l+x*s+w*_,p[12]=(c=b[12])*y+(T=b[13])*o+(x=b[14])*i+(w=b[15])*d,p[13]=c*e+T*n+x*f+w*h,p[14]=c*r+T*m+x*u+w*a,p[15]=c*t+T*l+x*s+w*_,p}},{}],214:[function(v,ae,ie){ae.exports=function(p,g,b,y,e,r,t){var o=1/(g-b),n=1/(y-e),m=1/(r-t);return p[0]=-2*o,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*n,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*m,p[11]=0,p[12]=(g+b)*o,p[13]=(e+y)*n,p[14]=(t+r)*m,p[15]=1,p}},{}],215:[function(v,ae,ie){ae.exports=function(p,g,b,y,e){var r=1/Math.tan(g/2),t=1/(y-e);return p[0]=r/b,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=r,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=(e+y)*t,p[11]=-1,p[12]=0,p[13]=0,p[14]=2*e*y*t,p[15]=0,p}},{}],216:[function(v,ae,ie){ae.exports=function(p,g,b,y){var e=Math.tan(g.upDegrees*Math.PI/180),r=Math.tan(g.downDegrees*Math.PI/180),t=Math.tan(g.leftDegrees*Math.PI/180),o=Math.tan(g.rightDegrees*Math.PI/180),n=2/(t+o),m=2/(e+r);return p[0]=n,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=m,p[6]=0,p[7]=0,p[8]=-(t-o)*n*.5,p[9]=(e-r)*m*.5,p[10]=y/(b-y),p[11]=-1,p[12]=0,p[13]=0,p[14]=y*b/(b-y),p[15]=0,p}},{}],217:[function(v,ae,ie){ae.exports=function(p,g,b,y){var e,r,t,o,n,m,l,i,f,u,s,d,h,a,_,c,T,x,w,M,D,C,P,L,S=y[0],E=y[1],N=y[2],z=Math.sqrt(S*S+E*E+N*N);return Math.abs(z)<1e-6?null:(S*=z=1/z,E*=z,N*=z,e=Math.sin(b),r=Math.cos(b),n=g[1],m=g[2],l=g[3],f=g[5],u=g[6],s=g[7],h=g[9],a=g[10],_=g[11],w=S*E*(t=1-r)-N*e,M=E*E*t+r,D=N*E*t+S*e,C=S*N*t+E*e,P=E*N*t-S*e,L=N*N*t+r,p[0]=(o=g[0])*(c=S*S*t+r)+(i=g[4])*(T=E*S*t+N*e)+(d=g[8])*(x=N*S*t-E*e),p[1]=n*c+f*T+h*x,p[2]=m*c+u*T+a*x,p[3]=l*c+s*T+_*x,p[4]=o*w+i*M+d*D,p[5]=n*w+f*M+h*D,p[6]=m*w+u*M+a*D,p[7]=l*w+s*M+_*D,p[8]=o*C+i*P+d*L,p[9]=n*C+f*P+h*L,p[10]=m*C+u*P+a*L,p[11]=l*C+s*P+_*L,g!==p&&(p[12]=g[12],p[13]=g[13],p[14]=g[14],p[15]=g[15]),p)}},{}],218:[function(v,ae,ie){ae.exports=function(p,g,b){var y=Math.sin(b),e=Math.cos(b),r=g[4],t=g[5],o=g[6],n=g[7],m=g[8],l=g[9],i=g[10],f=g[11];return g!==p&&(p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[3],p[12]=g[12],p[13]=g[13],p[14]=g[14],p[15]=g[15]),p[4]=r*e+m*y,p[5]=t*e+l*y,p[6]=o*e+i*y,p[7]=n*e+f*y,p[8]=m*e-r*y,p[9]=l*e-t*y,p[10]=i*e-o*y,p[11]=f*e-n*y,p}},{}],219:[function(v,ae,ie){ae.exports=function(p,g,b){var y=Math.sin(b),e=Math.cos(b),r=g[0],t=g[1],o=g[2],n=g[3],m=g[8],l=g[9],i=g[10],f=g[11];return g!==p&&(p[4]=g[4],p[5]=g[5],p[6]=g[6],p[7]=g[7],p[12]=g[12],p[13]=g[13],p[14]=g[14],p[15]=g[15]),p[0]=r*e-m*y,p[1]=t*e-l*y,p[2]=o*e-i*y,p[3]=n*e-f*y,p[8]=r*y+m*e,p[9]=t*y+l*e,p[10]=o*y+i*e,p[11]=n*y+f*e,p}},{}],220:[function(v,ae,ie){ae.exports=function(p,g,b){var y=Math.sin(b),e=Math.cos(b),r=g[0],t=g[1],o=g[2],n=g[3],m=g[4],l=g[5],i=g[6],f=g[7];return g!==p&&(p[8]=g[8],p[9]=g[9],p[10]=g[10],p[11]=g[11],p[12]=g[12],p[13]=g[13],p[14]=g[14],p[15]=g[15]),p[0]=r*e+m*y,p[1]=t*e+l*y,p[2]=o*e+i*y,p[3]=n*e+f*y,p[4]=m*e-r*y,p[5]=l*e-t*y,p[6]=i*e-o*y,p[7]=f*e-n*y,p}},{}],221:[function(v,ae,ie){ae.exports=function(p,g,b){var y=b[0],e=b[1],r=b[2];return p[0]=g[0]*y,p[1]=g[1]*y,p[2]=g[2]*y,p[3]=g[3]*y,p[4]=g[4]*e,p[5]=g[5]*e,p[6]=g[6]*e,p[7]=g[7]*e,p[8]=g[8]*r,p[9]=g[9]*r,p[10]=g[10]*r,p[11]=g[11]*r,p[12]=g[12],p[13]=g[13],p[14]=g[14],p[15]=g[15],p}},{}],222:[function(v,ae,ie){ae.exports=function(p){return"mat4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+", "+p[9]+", "+p[10]+", "+p[11]+", "+p[12]+", "+p[13]+", "+p[14]+", "+p[15]+")"}},{}],223:[function(v,ae,ie){ae.exports=function(p,g,b){var y,e,r,t,o,n,m,l,i,f,u,s,d=b[0],h=b[1],a=b[2];return g===p?(p[12]=g[0]*d+g[4]*h+g[8]*a+g[12],p[13]=g[1]*d+g[5]*h+g[9]*a+g[13],p[14]=g[2]*d+g[6]*h+g[10]*a+g[14],p[15]=g[3]*d+g[7]*h+g[11]*a+g[15]):(e=g[1],r=g[2],t=g[3],o=g[4],n=g[5],m=g[6],l=g[7],i=g[8],f=g[9],u=g[10],s=g[11],p[0]=y=g[0],p[1]=e,p[2]=r,p[3]=t,p[4]=o,p[5]=n,p[6]=m,p[7]=l,p[8]=i,p[9]=f,p[10]=u,p[11]=s,p[12]=y*d+o*h+i*a+g[12],p[13]=e*d+n*h+f*a+g[13],p[14]=r*d+m*h+u*a+g[14],p[15]=t*d+l*h+s*a+g[15]),p}},{}],224:[function(v,ae,ie){ae.exports=function(p,g){if(p===g){var b=g[1],y=g[2],e=g[3],r=g[6],t=g[7],o=g[11];p[1]=g[4],p[2]=g[8],p[3]=g[12],p[4]=b,p[6]=g[9],p[7]=g[13],p[8]=y,p[9]=r,p[11]=g[14],p[12]=e,p[13]=t,p[14]=o}else p[0]=g[0],p[1]=g[4],p[2]=g[8],p[3]=g[12],p[4]=g[1],p[5]=g[5],p[6]=g[9],p[7]=g[13],p[8]=g[2],p[9]=g[6],p[10]=g[10],p[11]=g[14],p[12]=g[3],p[13]=g[7],p[14]=g[11],p[15]=g[15];return p}},{}],225:[function(v,ae,ie){"use strict";var p=v("css-font"),g=v("pick-by-alias"),b=v("regl"),y=v("gl-util/context"),e=v("es6-weak-map"),r=v("color-normalize"),t=v("font-atlas"),o=v("typedarray-pool"),n=v("parse-rect"),m=v("is-plain-obj"),l=v("parse-unit"),i=v("to-px"),f=v("detect-kerning"),u=v("object-assign"),s=v("font-measure"),d=v("flatten-vertex-data"),h=v("bit-twiddle").nextPow2,a=new e,_=!1;if(document.body){var c=document.body.appendChild(document.createElement("div"));c.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(c).fontStretch&&(_=!0),document.body.removeChild(c)}var T=function(x){var w;this.gl="function"==typeof(w=x)&&w._gl&&w.prop&&w.texture&&w.buffer?(x={regl:x}).regl._gl:y(x),this.shader=a.get(this.gl),this.regl=this.shader?this.shader.regl:x.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),a.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(m(x)?x:{})};T.prototype.createShader=function(){var x=this.regl,w=x({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:x.prop("count"),offset:x.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:x.this("sizeBuffer")},width:{offset:0,stride:8,buffer:x.this("sizeBuffer")},char:x.this("charBuffer"),position:x.this("position")},uniforms:{atlasSize:function(M,D){return[D.atlas.width,D.atlas.height]},atlasDim:function(M,D){return[D.atlas.cols,D.atlas.rows]},atlas:function(M,D){return D.atlas.texture},charStep:function(M,D){return D.atlas.step},em:function(M,D){return D.atlas.em},color:x.prop("color"),opacity:x.prop("opacity"),viewport:x.this("viewportArray"),scale:x.this("scale"),align:x.prop("align"),baseline:x.prop("baseline"),translate:x.this("translate"),positionOffset:x.prop("positionOffset")},primitive:"points",viewport:x.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:x,draw:w,atlas:{}}},T.prototype.update=function(x){var w=this;if("string"==typeof x)x={text:x};else if(!x)return;null!=(x=g(x,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(x.opacity)?x.opacity.map(function(Te){return parseFloat(Te)}):parseFloat(x.opacity)),null!=x.viewport&&(this.viewport=n(x.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=x.kerning&&(this.kerning=x.kerning),null!=x.offset&&("number"==typeof x.offset&&(x.offset=[x.offset,0]),this.positionOffset=d(x.offset)),x.direction&&(this.direction=x.direction),x.range&&(this.range=x.range,this.scale=[1/(x.range[2]-x.range[0]),1/(x.range[3]-x.range[1])],this.translate=[-x.range[0],-x.range[1]]),x.scale&&(this.scale=x.scale),x.translate&&(this.translate=x.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||x.font||(x.font=T.baseFontSize+"px sans-serif");var M,D=!1,C=!1;if(x.font&&(Array.isArray(x.font)?x.font:[x.font]).forEach(function(Te,Le){if("string"==typeof Te)try{Te=p.parse(Te)}catch{Te=p.parse(T.baseFontSize+"px "+Te)}else Te=p.parse(p.stringify(Te));var Oe=p.stringify({size:T.baseFontSize,family:Te.family,stretch:_?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),Ne=l(Te.size),Be=Math.round(Ne[0]*i(Ne[1]));if(Be!==w.fontSize[Le]&&(C=!0,w.fontSize[Le]=Be),!(w.font[Le]&&Oe==w.font[Le].baseString||(D=!0,w.font[Le]=T.fonts[Oe],w.font[Le]))){var He=Te.family.join(", "),Ve=[Te.style];Te.style!=Te.variant&&Ve.push(Te.variant),Te.variant!=Te.weight&&Ve.push(Te.weight),_&&Te.weight!=Te.stretch&&Ve.push(Te.stretch),w.font[Le]={baseString:Oe,family:He,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:s(He,{origin:"top",fontSize:T.baseFontSize,fontStyle:Ve.join(" ")})},T.fonts[Oe]=w.font[Le]}}),(D||C)&&this.font.forEach(function(Te,Le){var Oe=p.stringify({size:w.fontSize[Le],family:Te.family,stretch:_?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});w.fontAtlas[Le]=w.shader.atlas[Oe],w.fontAtlas[Le]||(w.shader.atlas[Oe]=w.fontAtlas[Le]={fontString:Oe,step:2*Math.ceil(w.fontSize[Le]*Te.metrics.bottom*.5),em:w.fontSize[Le],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}),null==x.text&&(x.text=w.text)}),"string"==typeof x.text&&x.position&&x.position.length>2){for(var P=Array(.5*x.position.length),L=0;L<P.length;L++)P[L]=x.text;x.text=P}if(null!=x.text||D){if(this.textOffsets=[0],Array.isArray(x.text)){this.count=x.text[0].length,this.counts=[this.count];for(var S=1;S<x.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+x.text[S-1].length,this.count+=x.text[S].length,this.counts.push(x.text[S].length);this.text=x.text.join("")}else this.text=x.text,this.count=this.text.length,this.counts=[this.count];M=[],this.font.forEach(function(Te,Le){T.atlasContext.font=Te.baseString;for(var Oe=w.fontAtlas[Le],Ne=0;Ne<w.text.length;Ne++){var Be=w.text.charAt(Ne);if(null==Oe.ids[Be]&&(Oe.ids[Be]=Oe.chars.length,Oe.chars.push(Be),M.push(Be)),null==Te.width[Be]&&(Te.width[Be]=T.atlasContext.measureText(Be).width/T.baseFontSize,w.kerning)){var He=[];for(var Ve in Te.width)He.push(Ve+Be,Be+Ve);u(Te.kerning,f(Te.family,{pairs:He}))}}})}if(x.position)if(x.position.length>2){for(var E=!x.position[0].length,N=o.mallocFloat(2*this.count),z=0,q=0;z<this.counts.length;z++){var G=this.counts[z];if(E)for(var K=0;K<G;K++)N[q++]=x.position[2*z],N[q++]=x.position[2*z+1];else for(var ne=0;ne<G;ne++)N[q++]=x.position[z][0],N[q++]=x.position[z][1]}this.position.call?this.position({type:"float",data:N}):this.position=this.regl.buffer({type:"float",data:N}),o.freeFloat(N)}else this.position.destroy&&this.position.destroy(),this.position={constant:x.position};if(x.text||D){var X=o.mallocUint8(this.count),J=o.mallocFloat(2*this.count);this.textWidth=[];for(var se=0,V=0;se<this.counts.length;se++){for(var j=this.counts[se],H=this.font[se]||this.font[0],oe=this.fontAtlas[se]||this.fontAtlas[0],U=0;U<j;U++){var te=this.text.charAt(V),ee=this.text.charAt(V-1);if(X[V]=oe.ids[te],J[2*V]=H.width[te],U){var pe=J[2*V-1]+.5*J[2*V-2]+.5*J[2*V];if(this.kerning){var de=H.kerning[ee+te];de&&(pe+=.001*de)}J[2*V+1]=pe}else J[2*V+1]=.5*J[2*V];V++}this.textWidth.push(J.length?.5*J[2*V-2]+J[2*V-1]:0)}x.align||(x.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),o.freeUint8(X),o.freeFloat(J),M.length&&this.font.forEach(function(Te,Le){var Oe=w.fontAtlas[Le],Ne=Oe.step,Be=Math.floor(T.maxAtlasSize/Ne),He=Math.min(Be,Oe.chars.length),Ve=Math.ceil(Oe.chars.length/He),it=h(He*Ne),ze=h(Ve*Ne);Oe.width=it,Oe.height=ze,Oe.rows=Ve,Oe.cols=He,Oe.em&&Oe.texture({data:t({canvas:T.atlasCanvas,font:Oe.fontString,chars:Oe.chars,shape:[it,ze],step:[Ne,Ne]})})})}if(x.align&&(this.align=x.align,this.alignOffset=this.textWidth.map(function(Te,Le){var Oe=Array.isArray(w.align)?w.align.length>1?w.align[Le]:w.align[0]:w.align;if("number"==typeof Oe)return Oe;switch(Oe){case"right":case"end":return-Te;case"center":case"centre":case"middle":return.5*-Te}return 0})),null==this.baseline&&null==x.baseline&&(x.baseline=0),null!=x.baseline&&(this.baseline=x.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Le){var Oe=(w.font[Le]||w.font[0]).metrics,Ne=0;return-1*((Ne+=.5*Oe.bottom)+("number"==typeof Te?Te-Oe.baseline:-Oe[Te]))})),null!=x.color)if(x.color||(x.color="transparent"),"string"!=typeof x.color&&isNaN(x.color)){var be;if("number"==typeof x.color[0]&&x.color.length>this.counts.length){var he=x.color.length;be=o.mallocUint8(he);for(var xe=(x.color.subarray||x.color.slice).bind(x.color),De=0;De<he;De+=4)be.set(r(xe(De,De+4),"uint8"),De)}else{var Se=x.color.length;be=o.mallocUint8(4*Se);for(var ke=0;ke<Se;ke++)be.set(r(x.color[ke]||0,"uint8"),4*ke)}this.color=be}else this.color=r(x.color,"uint8");if(x.position||x.text||x.color||x.baseline||x.align||x.font||x.offset||x.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Fe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Fe);for(var ve=0;ve<this.batch.length;ve++)this.batch[ve]={count:this.counts.length>1?this.counts[ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ve,4*ve+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ve]:this.opacity,baseline:null!=this.baselineOffset[ve]?this.baselineOffset[ve]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ve]?this.alignOffset[ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ve,2*ve+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},T.prototype.destroy=function(){},T.prototype.kerning=!0,T.prototype.position={constant:new Float32Array(2)},T.prototype.translate=null,T.prototype.scale=null,T.prototype.font=null,T.prototype.text="",T.prototype.positionOffset=[0,0],T.prototype.opacity=1,T.prototype.color=new Uint8Array([0,0,0,255]),T.prototype.alignOffset=[0,0],T.maxAtlasSize=1024,T.atlasCanvas=document.createElement("canvas"),T.atlasContext=T.atlasCanvas.getContext("2d",{alpha:!1}),T.baseFontSize=64,T.fonts={},ae.exports=T},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(v,ae,ie){(function(p){(function(){"use strict";var g=v("pick-by-alias");function b(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*p.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*p.innerHeight);else{var t=r.container.getBoundingClientRect();r.canvas.width=r.width||t.right-t.left,r.canvas.height=r.height||t.bottom-t.top}}function y(r){return"function"==typeof r.getContext&&"width"in r&&"height"in r}function e(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}ae.exports=function(r){var t,n;if(r?"string"==typeof r&&(r={container:r}):r={},(r=y(r)||"string"==typeof(t=r).nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect?{container:r}:"function"==typeof(n=r).drawArrays||"function"==typeof n.drawElements?{gl:r}:g(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(r.pixelRatio=p.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if("string"==typeof r.container){var o=document.querySelector(r.container);if(!o)throw Error("Element "+r.container+" is not found");r.container=o}y(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=e(),r.container.appendChild(r.canvas),b(r))}else if(!r.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=e(),r.container.appendChild(r.canvas),b(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(n){try{r.gl=r.canvas.getContext(n,r.attrs)}catch{}return r.gl}),r.gl}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(v,ae,ie){ae.exports=function(p){"string"==typeof p&&(p=[p]);for(var g=[].slice.call(arguments,1),b=[],y=0;y<p.length-1;y++)b.push(p[y],g[y]||"");return b.push(p[y]),b.join("")}},{}],228:[function(v,ae,ie){(function(p){(function(){"use strict";var g,b=v("is-browser");g="function"==typeof p.matchMedia?!p.matchMedia("(hover: none)").matches:b,ae.exports=g}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(v,ae,ie){"use strict";var p=v("is-browser");ae.exports=p&&function(){var g=!1;try{var b=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch{g=!1}return g}()},{"is-browser":232}],230:[function(v,ae,ie){ie.read=function(p,g,b,y,e){var r,t,o=8*e-y-1,n=(1<<o)-1,m=n>>1,l=-7,i=b?e-1:0,f=b?-1:1,u=p[g+i];for(i+=f,r=u&(1<<-l)-1,u>>=-l,l+=o;l>0;r=256*r+p[g+i],i+=f,l-=8);for(t=r&(1<<-l)-1,r>>=-l,l+=y;l>0;t=256*t+p[g+i],i+=f,l-=8);if(0===r)r=1-m;else{if(r===n)return t?NaN:1/0*(u?-1:1);t+=Math.pow(2,y),r-=m}return(u?-1:1)*t*Math.pow(2,r-y)},ie.write=function(p,g,b,y,e,r){var t,o,n,m=8*r-e-1,l=(1<<m)-1,i=l>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,u=y?0:r-1,s=y?1:-1,d=g<0||0===g&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(o=isNaN(g)?1:0,t=l):(t=Math.floor(Math.log(g)/Math.LN2),g*(n=Math.pow(2,-t))<1&&(t--,n*=2),(g+=t+i>=1?f/n:f*Math.pow(2,1-i))*n>=2&&(t++,n/=2),t+i>=l?(o=0,t=l):t+i>=1?(o=(g*n-1)*Math.pow(2,e),t+=i):(o=g*Math.pow(2,i-1)*Math.pow(2,e),t=0));e>=8;p[b+u]=255&o,u+=s,o/=256,e-=8);for(t=t<<e|o,m+=e;m>0;p[b+u]=255&t,u+=s,t/=256,m-=8);p[b+u-s]|=128*d}},{}],231:[function(v,ae,ie){ae.exports="function"==typeof Object.create?function(p,g){g&&(p.super_=g,p.prototype=Object.create(g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,g){if(g){p.super_=g;var b=function(){};b.prototype=g.prototype,p.prototype=new b,p.prototype.constructor=p}}},{}],232:[function(v,ae,ie){ae.exports=!0},{}],233:[function(v,ae,ie){"use strict";ae.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(v,ae,ie){"use strict";ae.exports=b,ae.exports.isMobile=b,ae.exports.default=b;var p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(y){y||(y={});var e=y.ua;if(e||typeof navigator>"u"||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=y.tablet?g.test(e):p.test(e);return!r&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],235:[function(v,ae,ie){"use strict";ae.exports=function(p){var g=typeof p;return null!==p&&("object"===g||"function"===g)}},{}],236:[function(v,ae,ie){"use strict";var p=Object.prototype.toString;ae.exports=function(g){var b;return"[object Object]"===p.call(g)&&(null===(b=Object.getPrototypeOf(g))||b===Object.getPrototypeOf({}))}},{}],237:[function(v,ae,ie){"use strict";ae.exports=function(p){for(var g,b=p.length,y=0;y<b;y++)if(((g=p.charCodeAt(y))<9||g>13)&&32!==g&&133!==g&&160!==g&&5760!==g&&6158!==g&&(g<8192||g>8205)&&8232!==g&&8233!==g&&8239!==g&&8287!==g&&8288!==g&&12288!==g&&65279!==g)return!1;return!0}},{}],238:[function(v,ae,ie){"use strict";ae.exports=function(p){return"string"==typeof p&&(p=p.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(p)&&/[\dz]$/i.test(p)&&p.length>4))}},{}],239:[function(v,ae,ie){var p,g;p=this,g=function(){"use strict";var p,g,b;function y(e,r){if(p)if(g){var t="var sharedChunk = {}; ("+p+")(sharedChunk); ("+g+")(sharedChunk);",o={};p(o),(b=r(o)).workerUrl=window.URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}else g=r;else p=r}return y(0,function(e){function r(k,R){return k(R={exports:{}},R.exports),R.exports}var t=o;function o(k,R,$,ue){this.cx=3*k,this.bx=3*($-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*R,this.by=3*(ue-R)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=ue,this.p2x=$,this.p2y=ue}o.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},o.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},o.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},o.prototype.solveCurveX=function(k,R){var $,ue,_e,Ae,Re;for(void 0===R&&(R=1e-6),_e=k,Re=0;Re<8;Re++){if(Ae=this.sampleCurveX(_e)-k,Math.abs(Ae)<R)return _e;var Ze=this.sampleCurveDerivativeX(_e);if(Math.abs(Ze)<1e-6)break;_e-=Ae/Ze}if((_e=k)<($=0))return $;if(_e>(ue=1))return ue;for(;$<ue;){if(Ae=this.sampleCurveX(_e),Math.abs(Ae-k)<R)return _e;k>Ae?$=_e:ue=_e,_e=.5*(ue-$)+$}return _e},o.prototype.solve=function(k,R){return this.sampleCurveY(this.solveCurveX(k,R))};var n=m;function m(k,R){this.x=k,this.y=R}function l(k,R,$,ue){var _e=new t(k,R,$,ue);return function(Ae){return _e.solve(Ae)}}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,R){return this.clone()._rotateAround(k,R)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var R=k.x-this.x,$=k.y-this.y;return R*R+$*$},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,R){return Math.atan2(this.x*R-this.y*k,this.x*k+this.y*R)},_matMult:function(k){var $=k[2]*this.x+k[3]*this.y;return this.x=k[0]*this.x+k[1]*this.y,this.y=$,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var R=Math.cos(k),$=Math.sin(k),_e=$*this.x+R*this.y;return this.x=R*this.x-$*this.y,this.y=_e,this},_rotateAround:function(k,R){var $=Math.cos(k),ue=Math.sin(k),Ae=R.y+ue*(this.x-R.x)+$*(this.y-R.y);return this.x=R.x+$*(this.x-R.x)-ue*(this.y-R.y),this.y=Ae,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(k){return k instanceof m?k:Array.isArray(k)?new m(k[0],k[1]):k};var i=l(.25,.1,.25,1);function f(k,R,$){return Math.min($,Math.max(R,k))}function u(k,R,$){var ue=$-R,_e=((k-R)%ue+ue)%ue+R;return _e===R?$:_e}function s(k){for(var R=[],$=arguments.length-1;$-- >0;)R[$]=arguments[$+1];for(var ue=0,_e=R;ue<_e.length;ue+=1){var Ae=_e[ue];for(var Re in Ae)k[Re]=Ae[Re]}return k}var d=1;function h(){return d++}function a(){return function k(R){return R?(R^16*Math.random()>>R/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,k)}()}function _(k){return!!k&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(k)}function c(k,R){k.forEach(function($){R[$]&&(R[$]=R[$].bind(R))})}function T(k,R){return-1!==k.indexOf(R,k.length-R.length)}function x(k,R,$){var ue={};for(var _e in k)ue[_e]=R.call($||this,k[_e],_e,k);return ue}function w(k,R,$){var ue={};for(var _e in k)R.call($||this,k[_e],_e,k)&&(ue[_e]=k[_e]);return ue}function M(k){return Array.isArray(k)?k.map(M):"object"==typeof k&&k?x(k,M):k}var D={};function C(k){D[k]||(typeof console<"u"&&console.warn(k),D[k]=!0)}function P(k,R,$){return($.y-k.y)*(R.x-k.x)>(R.y-k.y)*($.x-k.x)}function L(k){for(var R=0,$=0,ue=k.length,_e=ue-1,Ae=void 0,Re=void 0;$<ue;_e=$++)R+=((Re=k[_e]).x-(Ae=k[$]).x)*(Ae.y+Re.y);return R}function S(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function E(k){var R={};if(k.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ue,_e,Ae,Re){var Ze=Ae||Re;return R[_e]=!Ze||Ze.toLowerCase(),""}),R["max-age"]){var $=parseInt(R["max-age"],10);isNaN($)?delete R["max-age"]:R["max-age"]=$}return R}var N=null;function z(k){if(null==N){var R=k.navigator?k.navigator.userAgent:null;N=!!k.safari||!(!R||!(/\b(iPad|iPhone|iPod)\b/.test(R)||R.match("Safari")&&!R.match("Chrome")))}return N}function q(k){try{var R=self[k];return R.setItem("_mapbox_test_",1),R.removeItem("_mapbox_test_"),!0}catch{return!1}}var G,K,ne,X,J=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),se=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,V=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,j={now:J,frame:function(k){var R=se(k);return{cancel:function(){return V(R)}}},getImageData:function(k,R){void 0===R&&(R=0);var $=self.document.createElement("canvas"),ue=$.getContext("2d");if(!ue)throw new Error("failed to create canvas 2d context");return $.width=k.width,$.height=k.height,ue.drawImage(k,0,0,k.width,k.height),ue.getImageData(-R,-R,k.width+2*R,k.height+2*R)},resolveURL:function(k){return G||(G=self.document.createElement("a")),G.href=k,G.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==K&&(K=self.matchMedia("(prefers-reduced-motion: reduce)")),K.matches)}},H={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:function(k){U||!X||(te?ee(k):ne=k)}},U=!1,te=!1;function ee(k){var R=k.createTexture();k.bindTexture(k.TEXTURE_2D,R);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,X),k.isContextLost())return;oe.supported=!0}catch{}k.deleteTexture(R),U=!0}self.document&&((X=self.document.createElement("img")).onload=function(){ne&&ee(ne),ne=null,te=!0},X.onerror=function(){U=!0,ne=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var le="01",ce=function(k,R){this._transformRequestFn=k,this._customAccessToken=R,this._createSkuToken()};function pe(k){return 0===k.indexOf("mapbox:")}ce.prototype._createSkuToken=function(){var k=function(){for(var R="",$=0;$<10;$++)R+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",le,R].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=k.token,this._skuTokenExpiresAt=k.tokenExpiresAt},ce.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ce.prototype.transformRequest=function(k,R){return this._transformRequestFn&&this._transformRequestFn(k,R)||{url:k}},ce.prototype.normalizeStyleURL=function(k,R){if(!pe(k))return k;var $=xe(k);return $.path="/styles/v1"+$.path,this._makeAPIURL($,this._customAccessToken||R)},ce.prototype.normalizeGlyphsURL=function(k,R){if(!pe(k))return k;var $=xe(k);return $.path="/fonts/v1"+$.path,this._makeAPIURL($,this._customAccessToken||R)},ce.prototype.normalizeSourceURL=function(k,R){if(!pe(k))return k;var $=xe(k);return $.path="/v4/"+$.authority+".json",$.params.push("secure"),this._makeAPIURL($,this._customAccessToken||R)},ce.prototype.normalizeSpriteURL=function(k,R,$,ue){var _e=xe(k);return pe(k)?(_e.path="/styles/v1"+_e.path+"/sprite"+R+$,this._makeAPIURL(_e,this._customAccessToken||ue)):(_e.path+=""+R+$,De(_e))},ce.prototype.normalizeTileURL=function(k,R){if(this._isSkuTokenExpired()&&this._createSkuToken(),k&&!pe(k))return k;var $=xe(k);$.path=$.path.replace(/(\.(png|jpg)\d*)(?=$)/,(j.devicePixelRatio>=2||512===R?"@2x":"")+(oe.supported?".webp":"$1")),$.path=$.path.replace(/^.+\/v4\//,"/"),$.path="/v4"+$.path;var Ae=this._customAccessToken||function(Re){for(var Ze=0,lt=Re;Ze<lt.length;Ze+=1){var _t=lt[Ze].match(/^access_token=(.*)$/);if(_t)return _t[1]}return null}($.params)||H.ACCESS_TOKEN;return H.REQUIRE_ACCESS_TOKEN&&Ae&&this._skuToken&&$.params.push("sku="+this._skuToken),this._makeAPIURL($,Ae)},ce.prototype.canonicalizeTileURL=function(k,R){var $=xe(k);if(!$.path.match(/(^\/v4\/)/)||!$.path.match(/\.[\w]+$/))return k;var ue="mapbox://tiles/";ue+=$.path.replace("/v4/","");var _e=$.params;return R&&(_e=_e.filter(function(Ae){return!Ae.match(/^access_token=/)})),_e.length&&(ue+="?"+_e.join("&")),ue},ce.prototype.canonicalizeTileset=function(k,R){for(var $=!!R&&pe(R),ue=[],_e=0,Ae=k.tiles||[];_e<Ae.length;_e+=1){var Re=Ae[_e];be(Re)?ue.push(this.canonicalizeTileURL(Re,$)):ue.push(Re)}return ue},ce.prototype._makeAPIURL=function(k,R){var $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ue=xe(H.API_URL);if(k.protocol=ue.protocol,k.authority=ue.authority,"/"!==ue.path&&(k.path=""+ue.path+k.path),!H.REQUIRE_ACCESS_TOKEN)return De(k);if(!(R=R||H.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+$);if("s"===R[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+$);return k.params=k.params.filter(function(_e){return-1===_e.indexOf("access_token")}),k.params.push("access_token="+R),De(k)};var de=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(k){return de.test(k)}var he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xe(k){var R=k.match(he);if(!R)throw new Error("Unable to parse URL object");return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}function De(k){var R=k.params.length?"?"+k.params.join("&"):"";return k.protocol+"://"+k.authority+k.path+R}function Se(k){if(!k)return null;var $=k.split(".");if(!$||3!==$.length)return null;try{return JSON.parse(decodeURIComponent(self.atob($[1]).split("").map(function(ue){return"%"+("00"+ue.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var ke=function(k){this.type=k,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ke.prototype.getStorageKey=function(k){var ue,$=Se(H.ACCESS_TOKEN);return ue=$&&$.u?self.btoa(encodeURIComponent($.u).replace(/%([0-9A-F]{2})/g,function(_e,Ae){return String.fromCharCode(Number("0x"+Ae))})):H.ACCESS_TOKEN||"",k?"mapbox.eventData."+k+":"+ue:"mapbox.eventData:"+ue},ke.prototype.fetchEventData=function(){var k=q("localStorage"),R=this.getStorageKey(),$=this.getStorageKey("uuid");if(k)try{var ue=self.localStorage.getItem(R);ue&&(this.eventData=JSON.parse(ue));var _e=self.localStorage.getItem($);_e&&(this.anonId=_e)}catch{C("Unable to read from LocalStorage")}},ke.prototype.saveEventData=function(){var k=q("localStorage"),R=this.getStorageKey(),$=this.getStorageKey("uuid");if(k)try{self.localStorage.setItem($,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(R,JSON.stringify(this.eventData))}catch{C("Unable to write to LocalStorage")}},ke.prototype.processRequests=function(k){},ke.prototype.postEvent=function(k,R,$,ue){var _e=this;if(H.EVENTS_URL){var Ae=xe(H.EVENTS_URL);Ae.params.push("access_token="+(ue||H.ACCESS_TOKEN||""));var Re={event:this.type,created:new Date(k).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:le,userId:this.anonId},Ze=R?s(Re,R):Re,lt={url:De(Ae),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=$t(lt,function(_t){_e.pendingRequest=null,$(_t),_e.saveEventData(),_e.processRequests(ue)})}},ke.prototype.queueRequest=function(k,R){this.queue.push(k),this.processRequests(R)};var Fe,ve,Te=function(k){function R(){k.call(this,"map.load"),this.success={},this.skuToken=""}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.postMapLoadEvent=function($,ue,_e,Ae){this.skuToken=_e,(H.EVENTS_URL&&Ae||H.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(Re){return pe(Re)||be(Re)}))&&this.queueRequest({id:ue,timestamp:Date.now()},Ae)},R.prototype.processRequests=function($){var ue=this;if(!this.pendingRequest&&0!==this.queue.length){var _e=this.queue.shift(),Ae=_e.id,Re=_e.timestamp;Ae&&this.success[Ae]||(this.anonId||this.fetchEventData(),_(this.anonId)||(this.anonId=a()),this.postEvent(Re,{skuToken:this.skuToken},function(Ze){Ze||Ae&&(ue.success[Ae]=!0)},$))}},R}(ke),Le=new(function(k){function R($){k.call(this,"appUserTurnstile"),this._customAccessToken=$}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.postTurnstileEvent=function($,ue){H.EVENTS_URL&&H.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(_e){return pe(_e)||be(_e)})&&this.queueRequest(Date.now(),ue)},R.prototype.processRequests=function($){var ue=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var _e=Se(H.ACCESS_TOKEN),Ae=_e?_e.u:H.ACCESS_TOKEN,Re=Ae!==this.eventData.tokenU;_(this.anonId)||(this.anonId=a(),Re=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var lt=new Date(this.eventData.lastSuccess),_t=new Date(Ze),At=(Ze-this.eventData.lastSuccess)/864e5;Re=Re||At>=1||At<-1||lt.getDate()!==_t.getDate()}else Re=!0;if(!Re)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(Wt){Wt||(ue.eventData.lastSuccess=Ze,ue.eventData.tokenU=Ae)},$)}},R}(ke)),Oe=Le.postTurnstileEvent.bind(Le),Ne=new Te,Be=Ne.postMapLoadEvent.bind(Ne),He=500,Ve=50;function it(){self.caches&&!Fe&&(Fe=self.caches.open("mapbox-tiles"))}function je(k){var R=k.indexOf("?");return R<0?k:k.slice(0,R)}var Ye,ct=1/0;function vt(){return null==Ye&&(Ye=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ye}var wt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(wt);var Ot=function(k){function R($,ue,_e){401===ue&&be(_e)&&($+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),k.call(this,$),this.status=ue,this.url=_e,this.name=this.constructor.name,this.message=$}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},R}(Error),St=S()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ft(k,R){var $,ue=new self.AbortController,_e=new self.Request(k.url,{method:k.method||"GET",body:k.body,credentials:k.credentials,headers:k.headers,referrer:St(),signal:ue.signal}),Ae=!1,Re=!1,Ze=($=_e.url).indexOf("sku=")>0&&be($);"json"===k.type&&_e.headers.set("Accept","application/json");var lt=function(At,Wt,on){if(!Re){if(At&&"SecurityError"!==At.message&&C(At),Wt&&on)return _t(Wt);var en=Date.now();self.fetch(_e).then(function(_n){if(_n.ok){var Rn=Ze?_n.clone():null;return _t(_n,Rn,en)}return R(new Ot(_n.statusText,_n.status,k.url))}).catch(function(_n){20!==_n.code&&R(new Error(_n.message))})}},_t=function(At,Wt,on){("arrayBuffer"===k.type?At.arrayBuffer():"json"===k.type?At.json():At.text()).then(function(en){Re||(Wt&&on&&function ze(k,R,$){if(it(),Fe){var ue={status:R.status,statusText:R.statusText,headers:new self.Headers};R.headers.forEach(function(Ae,Re){return ue.headers.set(Re,Ae)});var _e=E(R.headers.get("Cache-Control")||"");_e["no-store"]||(_e["max-age"]&&ue.headers.set("Expires",new Date($+1e3*_e["max-age"]).toUTCString()),new Date(ue.headers.get("Expires")).getTime()-$<42e4||function(Ae,Re){if(void 0===ve)try{new Response(new ReadableStream),ve=!0}catch{ve=!1}ve?Re(Ae.body):Ae.blob().then(Re)}(R,function(Ae){var Re=new self.Response(Ae,ue);it(),Fe&&Fe.then(function(Ze){return Ze.put(je(k.url),Re)}).catch(function(Ze){return C(Ze.message)})}))}}(_e,Wt,on),Ae=!0,R(null,en,At.headers.get("Cache-Control"),At.headers.get("Expires")))}).catch(function(en){Re||R(new Error(en.message))})};return Ze?function qe(k,R){if(it(),!Fe)return R(null);var $=je(k.url);Fe.then(function(ue){ue.match($).then(function(_e){var Ae=function(Re){if(!Re)return!1;var Ze=new Date(Re.headers.get("Expires")||0),lt=E(Re.headers.get("Cache-Control")||"");return Ze>Date.now()&&!lt["no-cache"]}(_e);ue.delete($),Ae&&ue.put($,_e.clone()),R(null,_e,Ae)}).catch(R)}).catch(R)}(_e,lt):lt(null,null),{cancel:function(){Re=!0,Ae||ue.abort()}}}var rn,hn,st=function(k,R){if(!(/^file:/.test($=k.url)||/^file:/.test(St())&&!/^\w+:/.test($))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ft(k,R);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",k,R,void 0,!0)}var $;return function(ue,_e){var Ae=new self.XMLHttpRequest;for(var Re in Ae.open(ue.method||"GET",ue.url,!0),"arrayBuffer"===ue.type&&(Ae.responseType="arraybuffer"),ue.headers)Ae.setRequestHeader(Re,ue.headers[Re]);return"json"===ue.type&&(Ae.responseType="text",Ae.setRequestHeader("Accept","application/json")),Ae.withCredentials="include"===ue.credentials,Ae.onerror=function(){_e(new Error(Ae.statusText))},Ae.onload=function(){if((Ae.status>=200&&Ae.status<300||0===Ae.status)&&null!==Ae.response){var Ze=Ae.response;if("json"===ue.type)try{Ze=JSON.parse(Ae.response)}catch(lt){return _e(lt)}_e(null,Ze,Ae.getResponseHeader("Cache-Control"),Ae.getResponseHeader("Expires"))}else _e(new Ot(Ae.statusText,Ae.status,ue.url))},Ae.send(ue.body),{cancel:function(){return Ae.abort()}}}(k,R)},Ct=function(k,R){return st(s(k,{type:"arrayBuffer"}),R)},$t=function(k,R){return st(s(k,{method:"POST"}),R)};rn=[],hn=0;var cn=function(k,R){if(oe.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),hn>=H.MAX_PARALLEL_IMAGE_REQUESTS){var $={requestParameters:k,callback:R,cancelled:!1,cancel:function(){this.cancelled=!0}};return rn.push($),$}hn++;var ue=!1,_e=function(){if(!ue)for(ue=!0,hn--;rn.length&&hn<H.MAX_PARALLEL_IMAGE_REQUESTS;){var Re=rn.shift();Re.cancelled||(Re.cancel=cn(Re.requestParameters,Re.callback).cancel)}},Ae=Ct(k,function(Re,Ze,lt,_t){var Wt,on;_e(),Re?R(Re):Ze&&(vt()?(Wt=R,on=new self.Blob([new Uint8Array(Ze)],{type:"image/png"}),self.createImageBitmap(on).then(function(en){Wt(null,en)}).catch(function(en){Wt(new Error("Could not load image because of "+en.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(At,Wt,on,en){var _n=new self.Image,Rn=self.URL;_n.onload=function(){Wt(null,_n),Rn.revokeObjectURL(_n.src)},_n.onerror=function(){return Wt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Zn=new self.Blob([new Uint8Array(At)],{type:"image/png"});_n.cacheControl=on,_n.expires=en,_n.src=At.byteLength?Rn.createObjectURL(Zn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ze,R,lt,_t))});return{cancel:function(){Ae.cancel(),_e()}}};function mn(k,R,$){$[k]&&-1!==$[k].indexOf(R)||($[k]=$[k]||[],$[k].push(R))}function nn(k,R,$){if($&&$[k]){var ue=$[k].indexOf(R);-1!==ue&&$[k].splice(ue,1)}}var Xe=function(k,R){void 0===R&&(R={}),s(this,R),this.type=k},nt=function(k){function R($,ue){void 0===ue&&(ue={}),k.call(this,"error",s({error:$},ue))}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R}(Xe),ye=function(){};ye.prototype.on=function(k,R){return this._listeners=this._listeners||{},mn(k,R,this._listeners),this},ye.prototype.off=function(k,R){return nn(k,R,this._listeners),nn(k,R,this._oneTimeListeners),this},ye.prototype.once=function(k,R){return this._oneTimeListeners=this._oneTimeListeners||{},mn(k,R,this._oneTimeListeners),this},ye.prototype.fire=function(k,R){"string"==typeof k&&(k=new Xe(k,R||{}));var $=k.type;if(this.listens($)){k.target=this;for(var ue=0,_e=this._listeners&&this._listeners[$]?this._listeners[$].slice():[];ue<_e.length;ue+=1)_e[ue].call(this,k);for(var Ae=0,Re=this._oneTimeListeners&&this._oneTimeListeners[$]?this._oneTimeListeners[$].slice():[];Ae<Re.length;Ae+=1){var Ze=Re[Ae];nn($,Ze,this._oneTimeListeners),Ze.call(this,k)}var lt=this._eventedParent;lt&&(s(k,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),lt.fire(k))}else k instanceof nt&&console.error(k.error);return this},ye.prototype.listens=function(k){return this._listeners&&this._listeners[k]&&this._listeners[k].length>0||this._oneTimeListeners&&this._oneTimeListeners[k]&&this._oneTimeListeners[k].length>0||this._eventedParent&&this._eventedParent.listens(k)},ye.prototype.setEventedParent=function(k,R){return this._eventedParent=k,this._eventedParentData=R,this};var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ue=function(k,R,$,ue){this.message=(k?k+": ":"")+$,ue&&(this.identifier=ue),null!=R&&R.__line__&&(this.line=R.__line__)};function Qe(k){var $=k.value;return $?[new Ue(k.key,$,"constants have been deprecated as of v8")]:[]}function rt(k){for(var R=[],$=arguments.length-1;$-- >0;)R[$]=arguments[$+1];for(var ue=0,_e=R;ue<_e.length;ue+=1){var Ae=_e[ue];for(var Re in Ae)k[Re]=Ae[Re]}return k}function Ke(k){return k instanceof Number||k instanceof String||k instanceof Boolean?k.valueOf():k}function gt(k){if(Array.isArray(k))return k.map(gt);if(k instanceof Object&&!(k instanceof Number||k instanceof String||k instanceof Boolean)){var R={};for(var $ in k)R[$]=gt(k[$]);return R}return Ke(k)}var mt=function(k){function R($,ue){k.call(this,ue),this.message=ue,this.key=$}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R}(Error),Lt=function(k,R){void 0===R&&(R=[]),this.parent=k,this.bindings={};for(var $=0,ue=R;$<ue.length;$+=1){var _e=ue[$];this.bindings[_e[0]]=_e[1]}};Lt.prototype.concat=function(k){return new Lt(this,k)},Lt.prototype.get=function(k){if(this.bindings[k])return this.bindings[k];if(this.parent)return this.parent.get(k);throw new Error(k+" not found in scope.")},Lt.prototype.has=function(k){return!!this.bindings[k]||!!this.parent&&this.parent.has(k)};var Vt={kind:"null"},dt={kind:"number"},bt={kind:"string"},Yt={kind:"boolean"},It={kind:"color"},jt={kind:"object"},Ie={kind:"value"},et={kind:"collator"},ht={kind:"formatted"},xt={kind:"resolvedImage"};function Rt(k,R){return{kind:"array",itemType:k,N:R}}function Xt(k){if("array"===k.kind){var R=Xt(k.itemType);return"number"==typeof k.N?"array<"+R+", "+k.N+">":"value"===k.itemType.kind?"array":"array<"+R+">"}return k.kind}var tn=[Vt,dt,bt,Yt,It,ht,jt,Rt(Ie),xt];function Kt(k,R){if("error"===R.kind)return null;if("array"===k.kind){if("array"===R.kind&&(0===R.N&&"value"===R.itemType.kind||!Kt(k.itemType,R.itemType))&&("number"!=typeof k.N||k.N===R.N))return null}else{if(k.kind===R.kind)return null;if("value"===k.kind)for(var $=0,ue=tn;$<ue.length;$+=1)if(!Kt(ue[$],R))return null}return"Expected "+Xt(k)+" but found "+Xt(R)+" instead."}function kn(k,R){return R.some(function($){return $.kind===k.kind})}function Vn(k,R){return R.some(function($){return"null"===$?null===k:"array"===$?Array.isArray(k):"object"===$?k&&!Array.isArray(k)&&"object"==typeof k:$===typeof k})}var Tn=r(function(k,R){var $={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ue(lt){return(lt=Math.round(lt))<0?0:lt>255?255:lt}function Ae(lt){return ue("%"===lt[lt.length-1]?parseFloat(lt)/100*255:parseInt(lt))}function Re(lt){return function _e(lt){return lt<0?0:lt>1?1:lt}("%"===lt[lt.length-1]?parseFloat(lt)/100:parseFloat(lt))}function Ze(lt,_t,At){return At<0?At+=1:At>1&&(At-=1),6*At<1?lt+(_t-lt)*At*6:2*At<1?_t:3*At<2?lt+(_t-lt)*(2/3-At)*6:lt}try{R.parseCSSColor=function(lt){var _t,At=lt.replace(/ /g,"").toLowerCase();if(At in $)return $[At].slice();if("#"===At[0])return 4===At.length?(_t=parseInt(At.substr(1),16))>=0&&_t<=4095?[(3840&_t)>>4|(3840&_t)>>8,240&_t|(240&_t)>>4,15&_t|(15&_t)<<4,1]:null:7===At.length&&(_t=parseInt(At.substr(1),16))>=0&&_t<=16777215?[(16711680&_t)>>16,(65280&_t)>>8,255&_t,1]:null;var Wt=At.indexOf("("),on=At.indexOf(")");if(-1!==Wt&&on+1===At.length){var en=At.substr(0,Wt),_n=At.substr(Wt+1,on-(Wt+1)).split(","),Rn=1;switch(en){case"rgba":if(4!==_n.length)return null;Rn=Re(_n.pop());case"rgb":return 3!==_n.length?null:[Ae(_n[0]),Ae(_n[1]),Ae(_n[2]),Rn];case"hsla":if(4!==_n.length)return null;Rn=Re(_n.pop());case"hsl":if(3!==_n.length)return null;var Zn=(parseFloat(_n[0])%360+360)%360/360,Wn=Re(_n[1]),rr=Re(_n[2]),ir=rr<=.5?rr*(Wn+1):rr+Wn-rr*Wn,hr=2*rr-ir;return[ue(255*Ze(hr,ir,Zn+1/3)),ue(255*Ze(hr,ir,Zn)),ue(255*Ze(hr,ir,Zn-1/3)),Rn];default:return null}}return null}}catch{}}).parseCSSColor,sn=function(k,R,$,ue){void 0===ue&&(ue=1),this.r=k,this.g=R,this.b=$,this.a=ue};sn.parse=function(k){if(k){if(k instanceof sn)return k;if("string"==typeof k){var R=Tn(k);if(R)return new sn(R[0]/255*R[3],R[1]/255*R[3],R[2]/255*R[3],R[3])}}},sn.prototype.toString=function(){var k=this.toArray(),$=k[1],ue=k[2],_e=k[3];return"rgba("+Math.round(k[0])+","+Math.round($)+","+Math.round(ue)+","+_e+")"},sn.prototype.toArray=function(){var ue=this.a;return 0===ue?[0,0,0,0]:[255*this.r/ue,255*this.g/ue,255*this.b/ue,ue]},sn.black=new sn(0,0,0,1),sn.white=new sn(1,1,1,1),sn.transparent=new sn(0,0,0,0),sn.red=new sn(1,0,0,1);var fn=function(k,R,$){this.sensitivity=k?R?"variant":"case":R?"accent":"base",this.locale=$,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};fn.prototype.compare=function(k,R){return this.collator.compare(k,R)},fn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var dn=function(k,R,$,ue,_e){this.text=k,this.image=R,this.scale=$,this.fontStack=ue,this.textColor=_e},Mn=function(k){this.sections=k};Mn.fromString=function(k){return new Mn([new dn(k,null,null,null,null)])},Mn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(k){return 0!==k.text.length||k.image&&0!==k.image.name.length})},Mn.factory=function(k){return k instanceof Mn?k:Mn.fromString(k)},Mn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(k){return k.text}).join("")},Mn.prototype.serialize=function(){for(var k=["format"],R=0,$=this.sections;R<$.length;R+=1){var ue=$[R];if(ue.image)k.push(["image",ue.image.name]);else{k.push(ue.text);var _e={};ue.fontStack&&(_e["text-font"]=["literal",ue.fontStack.split(",")]),ue.scale&&(_e["font-scale"]=ue.scale),ue.textColor&&(_e["text-color"]=["rgba"].concat(ue.textColor.toArray())),k.push(_e)}}return k};var En=function(k){this.name=k.name,this.available=k.available};function jn(k,R,$,ue){return"number"==typeof k&&k>=0&&k<=255&&"number"==typeof R&&R>=0&&R<=255&&"number"==typeof $&&$>=0&&$<=255?void 0===ue||"number"==typeof ue&&ue>=0&&ue<=1?null:"Invalid rgba value ["+[k,R,$,ue].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ue?[k,R,$,ue]:[k,R,$]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function er(k){if(null===k||"string"==typeof k||"boolean"==typeof k||"number"==typeof k||k instanceof sn||k instanceof fn||k instanceof Mn||k instanceof En)return!0;if(Array.isArray(k)){for(var R=0,$=k;R<$.length;R+=1)if(!er($[R]))return!1;return!0}if("object"==typeof k){for(var ue in k)if(!er(k[ue]))return!1;return!0}return!1}function nr(k){if(null===k)return Vt;if("string"==typeof k)return bt;if("boolean"==typeof k)return Yt;if("number"==typeof k)return dt;if(k instanceof sn)return It;if(k instanceof fn)return et;if(k instanceof Mn)return ht;if(k instanceof En)return xt;if(Array.isArray(k)){for(var R,$=k.length,ue=0,_e=k;ue<_e.length;ue+=1){var Ae=nr(_e[ue]);if(R){if(R===Ae)continue;R=Ie;break}R=Ae}return Rt(R||Ie,$)}return jt}function mr(k){var R=typeof k;return null===k?"":"string"===R||"number"===R||"boolean"===R?String(k):k instanceof sn||k instanceof Mn||k instanceof En?k.toString():JSON.stringify(k)}En.prototype.toString=function(){return this.name},En.fromString=function(k){return k?new En({name:k,available:!1}):null},En.prototype.serialize=function(){return["image",this.name]};var Dr=function(k,R){this.type=k,this.value=R};Dr.parse=function(k,R){if(2!==k.length)return R.error("'literal' expression requires exactly one argument, but found "+(k.length-1)+" instead.");if(!er(k[1]))return R.error("invalid value");var $=k[1],ue=nr($),_e=R.expectedType;return"array"!==ue.kind||0!==ue.N||!_e||"array"!==_e.kind||"number"==typeof _e.N&&0!==_e.N||(ue=_e),new Dr(ue,$)},Dr.prototype.evaluate=function(){return this.value},Dr.prototype.eachChild=function(){},Dr.prototype.outputDefined=function(){return!0},Dr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof sn?["rgba"].concat(this.value.toArray()):this.value instanceof Mn?this.value.serialize():this.value};var yr=function(k){this.name="ExpressionEvaluationError",this.message=k};yr.prototype.toJSON=function(){return this.message};var Wr={string:bt,number:dt,boolean:Yt,object:jt},kr=function(k,R){this.type=k,this.args=R};kr.parse=function(k,R){if(k.length<2)return R.error("Expected at least one argument.");var $,ue=1,_e=k[0];if("array"===_e){var Ae,Re;if(k.length>2){var Ze=k[1];if("string"!=typeof Ze||!(Ze in Wr)||"object"===Ze)return R.error('The item type argument of "array" must be one of string, number, boolean',1);Ae=Wr[Ze],ue++}else Ae=Ie;if(k.length>3){if(null!==k[2]&&("number"!=typeof k[2]||k[2]<0||k[2]!==Math.floor(k[2])))return R.error('The length argument to "array" must be a positive integer literal',2);Re=k[2],ue++}$=Rt(Ae,Re)}else $=Wr[_e];for(var lt=[];ue<k.length;ue++){var _t=R.parse(k[ue],ue,Ie);if(!_t)return null;lt.push(_t)}return new kr($,lt)},kr.prototype.evaluate=function(k){for(var R=0;R<this.args.length;R++){var $=this.args[R].evaluate(k);if(!Kt(this.type,nr($)))return $;if(R===this.args.length-1)throw new yr("Expected value to be of type "+Xt(this.type)+", but found "+Xt(nr($))+" instead.")}return null},kr.prototype.eachChild=function(k){this.args.forEach(k)},kr.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},kr.prototype.serialize=function(){var k=this.type,R=[k.kind];if("array"===k.kind){var $=k.itemType;if("string"===$.kind||"number"===$.kind||"boolean"===$.kind){R.push($.kind);var ue=k.N;("number"==typeof ue||this.args.length>1)&&R.push(ue)}}return R.concat(this.args.map(function(_e){return _e.serialize()}))};var Or=function(k){this.type=ht,this.sections=k};Or.parse=function(k,R){if(k.length<2)return R.error("Expected at least one argument.");var $=k[1];if(!Array.isArray($)&&"object"==typeof $)return R.error("First argument must be an image or text section.");for(var ue=[],_e=!1,Ae=1;Ae<=k.length-1;++Ae){var Re=k[Ae];if(_e&&"object"==typeof Re&&!Array.isArray(Re)){_e=!1;var Ze=null;if(Re["font-scale"]&&!(Ze=R.parse(Re["font-scale"],1,dt)))return null;var lt=null;if(Re["text-font"]&&!(lt=R.parse(Re["text-font"],1,Rt(bt))))return null;var _t=null;if(Re["text-color"]&&!(_t=R.parse(Re["text-color"],1,It)))return null;var At=ue[ue.length-1];At.scale=Ze,At.font=lt,At.textColor=_t}else{var Wt=R.parse(k[Ae],1,Ie);if(!Wt)return null;var on=Wt.type.kind;if("string"!==on&&"value"!==on&&"null"!==on&&"resolvedImage"!==on)return R.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_e=!0,ue.push({content:Wt,scale:null,font:null,textColor:null})}}return new Or(ue)},Or.prototype.evaluate=function(k){return new Mn(this.sections.map(function(R){var $=R.content.evaluate(k);return nr($)===xt?new dn("",$,null,null,null):new dn(mr($),null,R.scale?R.scale.evaluate(k):null,R.font?R.font.evaluate(k).join(","):null,R.textColor?R.textColor.evaluate(k):null)}))},Or.prototype.eachChild=function(k){for(var R=0,$=this.sections;R<$.length;R+=1){var ue=$[R];k(ue.content),ue.scale&&k(ue.scale),ue.font&&k(ue.font),ue.textColor&&k(ue.textColor)}},Or.prototype.outputDefined=function(){return!1},Or.prototype.serialize=function(){for(var k=["format"],R=0,$=this.sections;R<$.length;R+=1){var ue=$[R];k.push(ue.content.serialize());var _e={};ue.scale&&(_e["font-scale"]=ue.scale.serialize()),ue.font&&(_e["text-font"]=ue.font.serialize()),ue.textColor&&(_e["text-color"]=ue.textColor.serialize()),k.push(_e)}return k};var Hr=function(k){this.type=xt,this.input=k};Hr.parse=function(k,R){if(2!==k.length)return R.error("Expected two arguments.");var $=R.parse(k[1],1,bt);return $?new Hr($):R.error("No image name provided.")},Hr.prototype.evaluate=function(k){var R=this.input.evaluate(k),$=En.fromString(R);return $&&k.availableImages&&($.available=k.availableImages.indexOf(R)>-1),$},Hr.prototype.eachChild=function(k){k(this.input)},Hr.prototype.outputDefined=function(){return!1},Hr.prototype.serialize=function(){return["image",this.input.serialize()]};var oi={"to-boolean":Yt,"to-color":It,"to-number":dt,"to-string":bt},Qn=function(k,R){this.type=k,this.args=R};Qn.parse=function(k,R){if(k.length<2)return R.error("Expected at least one argument.");var $=k[0];if(("to-boolean"===$||"to-string"===$)&&2!==k.length)return R.error("Expected one argument.");for(var ue=oi[$],_e=[],Ae=1;Ae<k.length;Ae++){var Re=R.parse(k[Ae],Ae,Ie);if(!Re)return null;_e.push(Re)}return new Qn(ue,_e)},Qn.prototype.evaluate=function(k){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(k));if("color"===this.type.kind){for(var R,$,ue=0,_e=this.args;ue<_e.length;ue+=1){if($=null,(R=_e[ue].evaluate(k))instanceof sn)return R;if("string"==typeof R){var Ae=k.parseColor(R);if(Ae)return Ae}else if(Array.isArray(R)&&!($=R.length<3||R.length>4?"Invalid rbga value "+JSON.stringify(R)+": expected an array containing either three or four numeric values.":jn(R[0],R[1],R[2],R[3])))return new sn(R[0]/255,R[1]/255,R[2]/255,R[3])}throw new yr($||"Could not parse color from value '"+("string"==typeof R?R:String(JSON.stringify(R)))+"'")}if("number"===this.type.kind){for(var Re=null,Ze=0,lt=this.args;Ze<lt.length;Ze+=1){if(null===(Re=lt[Ze].evaluate(k)))return 0;var _t=Number(Re);if(!isNaN(_t))return _t}throw new yr("Could not convert "+JSON.stringify(Re)+" to number.")}return"formatted"===this.type.kind?Mn.fromString(mr(this.args[0].evaluate(k))):"resolvedImage"===this.type.kind?En.fromString(mr(this.args[0].evaluate(k))):mr(this.args[0].evaluate(k))},Qn.prototype.eachChild=function(k){this.args.forEach(k)},Qn.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},Qn.prototype.serialize=function(){if("formatted"===this.type.kind)return new Or([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Hr(this.args[0]).serialize();var k=["to-"+this.type.kind];return this.eachChild(function(R){k.push(R.serialize())}),k};var Ir=["Unknown","Point","LineString","Polygon"],Tr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Tr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Tr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ir[this.feature.type]:this.feature.type:null},Tr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Tr.prototype.canonicalID=function(){return this.canonical},Tr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Tr.prototype.parseColor=function(k){var R=this._parseColorCache[k];return R||(R=this._parseColorCache[k]=sn.parse(k)),R};var ar=function(k,R,$,ue){this.name=k,this.type=R,this._evaluate=$,this.args=ue};ar.prototype.evaluate=function(k){return this._evaluate(k,this.args)},ar.prototype.eachChild=function(k){this.args.forEach(k)},ar.prototype.outputDefined=function(){return!1},ar.prototype.serialize=function(){return[this.name].concat(this.args.map(function(k){return k.serialize()}))},ar.parse=function(k,R){var $,ue=k[0],_e=ar.definitions[ue];if(!_e)return R.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ae=Array.isArray(_e)?_e[0]:_e.type,Re=Array.isArray(_e)?[[_e[1],_e[2]]]:_e.overloads,Ze=Re.filter(function(Mi){var mi=Mi[0];return!Array.isArray(mi)||mi.length===k.length-1}),lt=null,_t=0,At=Ze;_t<At.length;_t+=1){var Wt=At[_t],on=Wt[0],en=Wt[1];lt=new _r(R.registry,R.path,null,R.scope);for(var _n=[],Rn=!1,Zn=1;Zn<k.length;Zn++){var Wn=k[Zn],rr=Array.isArray(on)?on[Zn-1]:on.type,ir=lt.parse(Wn,1+_n.length,rr);if(!ir){Rn=!0;break}_n.push(ir)}if(!Rn)if(Array.isArray(on)&&on.length!==_n.length)lt.error("Expected "+on.length+" arguments, but found "+_n.length+" instead.");else{for(var hr=0;hr<_n.length;hr++){var Er=Array.isArray(on)?on[hr]:on.type,zr=_n[hr];lt.concat(hr+1).checkSubtype(Er,zr.type)}if(0===lt.errors.length)return new ar(ue,Ae,en,_n)}}if(1===Ze.length)($=R.errors).push.apply($,lt.errors);else{for(var ni=(Ze.length?Ze:Re).map(function(Mi){var mi;return mi=Mi[0],Array.isArray(mi)?"("+mi.map(Xt).join(", ")+")":"("+Xt(mi.type)+"...)"}).join(" | "),ti=[],li=1;li<k.length;li++){var Ti=R.parse(k[li],1+ti.length);if(!Ti)return null;ti.push(Xt(Ti.type))}R.error("Expected arguments of type "+ni+", but found ("+ti.join(", ")+") instead.")}return null},ar.register=function(k,R){for(var $ in ar.definitions=R,R)k[$]=ar};var Jr=function(k,R,$){this.type=et,this.locale=$,this.caseSensitive=k,this.diacriticSensitive=R};function ri(k,R){k[0]=Math.min(k[0],R[0]),k[1]=Math.min(k[1],R[1]),k[2]=Math.max(k[2],R[0]),k[3]=Math.max(k[3],R[1])}function Rr(k,R){return!(k[0]<=R[0]||k[2]>=R[2]||k[1]<=R[1]||k[3]>=R[3])}function Yr(k,R){var ue=(180+k[0])/360,_e=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k[1]*Math.PI/360)))/360,Ae=Math.pow(2,R.z);return[Math.round(ue*Ae*8192),Math.round(_e*Ae*8192)]}function Ci(k,R,$){return R[1]>k[1]!=$[1]>k[1]&&k[0]<($[0]-R[0])*(k[1]-R[1])/($[1]-R[1])+R[0]}function pn(k,R){for(var $,ue,_e,Ae,Re,Ze,lt,_t=!1,At=0,Wt=R.length;At<Wt;At++)for(var on=R[At],en=0,_n=on.length;en<_n-1;en++){if(void 0,void 0,void 0,void 0,(Ae=($=k)[0]-(ue=on[en])[0])*(lt=$[1]-(_e=on[en+1])[1])-(Ze=$[0]-_e[0])*(Re=$[1]-ue[1])==0&&Ae*Ze<=0&&Re*lt<=0)return!1;Ci(k,on[en],on[en+1])&&(_t=!_t)}return _t}function Ln(k,R){for(var $=0;$<R.length;$++)if(pn(k,R[$]))return!0;return!1}function Ut(k,R,$,ue){var lt=ue[0]-$[0],_t=ue[1]-$[1],At=(k[0]-$[0])*_t-lt*(k[1]-$[1]),Wt=(R[0]-$[0])*_t-lt*(R[1]-$[1]);return At>0&&Wt<0||At<0&&Wt>0}function xn(k,R,$){for(var ue=0,_e=$;ue<_e.length;ue+=1)for(var Ae=_e[ue],Re=0;Re<Ae.length-1;++Re)if(void 0,void 0,(Wt=[(At=Ae[Re+1])[0]-(_t=Ae[Re])[0],At[1]-_t[1]])[0]*(on=[(lt=R)[0]-(Ze=k)[0],lt[1]-Ze[1]])[1]-Wt[1]*on[0]!=0&&Ut(Ze,lt,_t,At)&&Ut(_t,At,Ze,lt))return!0;var Ze,lt,_t,At,Wt,on;return!1}function Sn(k,R){for(var $=0;$<k.length;++$)if(!pn(k[$],R))return!1;for(var ue=0;ue<k.length-1;++ue)if(xn(k[ue],k[ue+1],R))return!1;return!0}function Kn(k,R){for(var $=0;$<R.length;$++)if(Sn(k,R[$]))return!0;return!1}function Jn(k,R,$){for(var ue=[],_e=0;_e<k.length;_e++){for(var Ae=[],Re=0;Re<k[_e].length;Re++){var Ze=Yr(k[_e][Re],$);ri(R,Ze),Ae.push(Ze)}ue.push(Ae)}return ue}function Xn(k,R,$){for(var ue=[],_e=0;_e<k.length;_e++){var Ae=Jn(k[_e],R,$);ue.push(Ae)}return ue}function Un(k,R,$,ue){if(k[0]<$[0]||k[0]>$[2]){var _e=.5*ue,Ae=k[0]-$[0]>_e?-ue:$[0]-k[0]>_e?ue:0;0===Ae&&(Ae=k[0]-$[2]>_e?-ue:$[2]-k[0]>_e?ue:0),k[0]+=Ae}ri(R,k)}function In(k,R,$,ue){for(var _e=8192*Math.pow(2,ue.z),Ae=[8192*ue.x,8192*ue.y],Re=[],Ze=0,lt=k;Ze<lt.length;Ze+=1)for(var _t=0,At=lt[Ze];_t<At.length;_t+=1){var Wt=At[_t],on=[Wt.x+Ae[0],Wt.y+Ae[1]];Un(on,R,$,_e),Re.push(on)}return Re}function Pn(k,R,$,ue){for(var _e,Ae=8192*Math.pow(2,ue.z),Re=[8192*ue.x,8192*ue.y],Ze=[],lt=0,_t=k;lt<_t.length;lt+=1){for(var At=[],Wt=0,on=_t[lt];Wt<on.length;Wt+=1){var en=on[Wt],_n=[en.x+Re[0],en.y+Re[1]];ri(R,_n),At.push(_n)}Ze.push(At)}if(R[2]-R[0]<=Ae/2){(_e=R)[0]=_e[1]=1/0,_e[2]=_e[3]=-1/0;for(var Rn=0,Zn=Ze;Rn<Zn.length;Rn+=1)for(var Wn=0,rr=Zn[Rn];Wn<rr.length;Wn+=1)Un(rr[Wn],R,$,Ae)}return Ze}Jr.parse=function(k,R){if(2!==k.length)return R.error("Expected one argument.");var $=k[1];if("object"!=typeof $||Array.isArray($))return R.error("Collator options argument must be an object.");var ue=R.parse(void 0!==$["case-sensitive"]&&$["case-sensitive"],1,Yt);if(!ue)return null;var _e=R.parse(void 0!==$["diacritic-sensitive"]&&$["diacritic-sensitive"],1,Yt);if(!_e)return null;var Ae=null;return $.locale&&!(Ae=R.parse($.locale,1,bt))?null:new Jr(ue,_e,Ae)},Jr.prototype.evaluate=function(k){return new fn(this.caseSensitive.evaluate(k),this.diacriticSensitive.evaluate(k),this.locale?this.locale.evaluate(k):null)},Jr.prototype.eachChild=function(k){k(this.caseSensitive),k(this.diacriticSensitive),this.locale&&k(this.locale)},Jr.prototype.outputDefined=function(){return!1},Jr.prototype.serialize=function(){var k={};return k["case-sensitive"]=this.caseSensitive.serialize(),k["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(k.locale=this.locale.serialize()),["collator",k]};var Bn=function(k,R){this.type=Yt,this.geojson=k,this.geometries=R};function Gn(k){if(k instanceof ar&&("get"===k.name&&1===k.args.length||"feature-state"===k.name||"has"===k.name&&1===k.args.length||"properties"===k.name||"geometry-type"===k.name||"id"===k.name||/^filter-/.test(k.name))||k instanceof Bn)return!1;var R=!0;return k.eachChild(function($){R&&!Gn($)&&(R=!1)}),R}function or(k){if(k instanceof ar&&"feature-state"===k.name)return!1;var R=!0;return k.eachChild(function($){R&&!or($)&&(R=!1)}),R}function sr(k,R){if(k instanceof ar&&R.indexOf(k.name)>=0)return!1;var $=!0;return k.eachChild(function(ue){$&&!sr(ue,R)&&($=!1)}),$}Bn.parse=function(k,R){if(2!==k.length)return R.error("'within' expression requires exactly one argument, but found "+(k.length-1)+" instead.");if(er(k[1])){var $=k[1];if("FeatureCollection"===$.type)for(var ue=0;ue<$.features.length;++ue){var _e=$.features[ue].geometry.type;if("Polygon"===_e||"MultiPolygon"===_e)return new Bn($,$.features[ue].geometry)}else if("Feature"===$.type){var Ae=$.geometry.type;if("Polygon"===Ae||"MultiPolygon"===Ae)return new Bn($,$.geometry)}else if("Polygon"===$.type||"MultiPolygon"===$.type)return new Bn($,$)}return R.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Bn.prototype.evaluate=function(k){if(null!=k.geometry()&&null!=k.canonicalID()){if("Point"===k.geometryType())return function(R,$){var ue=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Ae=R.canonicalID();if("Polygon"===$.type){var Re=Jn($.coordinates,_e,Ae),Ze=In(R.geometry(),ue,_e,Ae);if(!Rr(ue,_e))return!1;for(var lt=0,_t=Ze;lt<_t.length;lt+=1)if(!pn(_t[lt],Re))return!1}if("MultiPolygon"===$.type){var At=Xn($.coordinates,_e,Ae),Wt=In(R.geometry(),ue,_e,Ae);if(!Rr(ue,_e))return!1;for(var on=0,en=Wt;on<en.length;on+=1)if(!Ln(en[on],At))return!1}return!0}(k,this.geometries);if("LineString"===k.geometryType())return function(R,$){var ue=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Ae=R.canonicalID();if("Polygon"===$.type){var Re=Jn($.coordinates,_e,Ae),Ze=Pn(R.geometry(),ue,_e,Ae);if(!Rr(ue,_e))return!1;for(var lt=0,_t=Ze;lt<_t.length;lt+=1)if(!Sn(_t[lt],Re))return!1}if("MultiPolygon"===$.type){var At=Xn($.coordinates,_e,Ae),Wt=Pn(R.geometry(),ue,_e,Ae);if(!Rr(ue,_e))return!1;for(var on=0,en=Wt;on<en.length;on+=1)if(!Kn(en[on],At))return!1}return!0}(k,this.geometries)}return!1},Bn.prototype.eachChild=function(){},Bn.prototype.outputDefined=function(){return!0},Bn.prototype.serialize=function(){return["within",this.geojson]};var xr=function(k,R){this.type=R.type,this.name=k,this.boundExpression=R};xr.parse=function(k,R){if(2!==k.length||"string"!=typeof k[1])return R.error("'var' expression requires exactly one string literal argument.");var $=k[1];return R.scope.has($)?new xr($,R.scope.get($)):R.error('Unknown variable "'+$+'". Make sure "'+$+'" has been bound in an enclosing "let" expression before using it.',1)},xr.prototype.evaluate=function(k){return this.boundExpression.evaluate(k)},xr.prototype.eachChild=function(){},xr.prototype.outputDefined=function(){return!1},xr.prototype.serialize=function(){return["var",this.name]};var _r=function(k,R,$,ue,_e){void 0===R&&(R=[]),void 0===ue&&(ue=new Lt),void 0===_e&&(_e=[]),this.registry=k,this.path=R,this.key=R.map(function(Ae){return"["+Ae+"]"}).join(""),this.scope=ue,this.errors=_e,this.expectedType=$};function Nr(k,R){for(var $,_e=k.length-1,Ae=0,Re=_e,Ze=0;Ae<=Re;)if(($=k[Ze=Math.floor((Ae+Re)/2)])<=R){if(Ze===_e||R<k[Ze+1])return Ze;Ae=Ze+1}else{if(!($>R))throw new yr("Input is not a number.");Re=Ze-1}return 0}_r.prototype.parse=function(k,R,$,ue,_e){return void 0===_e&&(_e={}),R?this.concat(R,$,ue)._parse(k,_e):this._parse(k,_e)},_r.prototype._parse=function(k,R){function $(_t,At,Wt){return"assert"===Wt?new kr(At,[_t]):"coerce"===Wt?new Qn(At,[_t]):_t}if(null!==k&&"string"!=typeof k&&"boolean"!=typeof k&&"number"!=typeof k||(k=["literal",k]),Array.isArray(k)){if(0===k.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ue=k[0];if("string"!=typeof ue)return this.error("Expression name must be a string, but found "+typeof ue+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var _e=this.registry[ue];if(_e){var Ae=_e.parse(k,this);if(!Ae)return null;if(this.expectedType){var Re=this.expectedType,Ze=Ae.type;if("string"!==Re.kind&&"number"!==Re.kind&&"boolean"!==Re.kind&&"object"!==Re.kind&&"array"!==Re.kind||"value"!==Ze.kind)if("color"!==Re.kind&&"formatted"!==Re.kind&&"resolvedImage"!==Re.kind||"value"!==Ze.kind&&"string"!==Ze.kind){if(this.checkSubtype(Re,Ze))return null}else Ae=$(Ae,Re,R.typeAnnotation||"coerce");else Ae=$(Ae,Re,R.typeAnnotation||"assert")}if(!(Ae instanceof Dr)&&"resolvedImage"!==Ae.type.kind&&function _t(At){if(At instanceof xr)return _t(At.boundExpression);if(At instanceof ar&&"error"===At.name||At instanceof Jr||At instanceof Bn)return!1;var Wt=At instanceof Qn||At instanceof kr,on=!0;return At.eachChild(function(en){on=Wt?on&&_t(en):on&&en instanceof Dr}),!!on&&Gn(At)&&sr(At,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Ae)){var lt=new Tr;try{Ae=new Dr(Ae.type,Ae.evaluate(lt))}catch(_t){return this.error(_t.message),null}}return Ae}return this.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===k?"'undefined' value invalid. Use null instead.":"object"==typeof k?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof k+" instead.")},_r.prototype.concat=function(k,R,$){var ue="number"==typeof k?this.path.concat(k):this.path,_e=$?this.scope.concat($):this.scope;return new _r(this.registry,ue,R||null,_e,this.errors)},_r.prototype.error=function(k){for(var R=[],$=arguments.length-1;$-- >0;)R[$]=arguments[$+1];var ue=""+this.key+R.map(function(_e){return"["+_e+"]"}).join("");this.errors.push(new mt(ue,k))},_r.prototype.checkSubtype=function(k,R){var $=Kt(k,R);return $&&this.error($),$};var Fr=function(k,R,$){this.type=k,this.input=R,this.labels=[],this.outputs=[];for(var ue=0,_e=$;ue<_e.length;ue+=1){var Ae=_e[ue],Ze=Ae[1];this.labels.push(Ae[0]),this.outputs.push(Ze)}};function Br(k,R,$){return k*(1-$)+R*$}Fr.parse=function(k,R){if(k.length-1<4)return R.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if((k.length-1)%2!=0)return R.error("Expected an even number of arguments.");var $=R.parse(k[1],1,dt);if(!$)return null;var ue=[],_e=null;R.expectedType&&"value"!==R.expectedType.kind&&(_e=R.expectedType);for(var Ae=1;Ae<k.length;Ae+=2){var Re=1===Ae?-1/0:k[Ae],Ze=k[Ae+1],lt=Ae,_t=Ae+1;if("number"!=typeof Re)return R.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lt);if(ue.length&&ue[ue.length-1][0]>=Re)return R.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',lt);var At=R.parse(Ze,_t,_e);if(!At)return null;_e=_e||At.type,ue.push([Re,At])}return new Fr(_e,$,ue)},Fr.prototype.evaluate=function(k){var R=this.labels,$=this.outputs;if(1===R.length)return $[0].evaluate(k);var ue=this.input.evaluate(k);if(ue<=R[0])return $[0].evaluate(k);var _e=R.length;return ue>=R[_e-1]?$[_e-1].evaluate(k):$[Nr(R,ue)].evaluate(k)},Fr.prototype.eachChild=function(k){k(this.input);for(var R=0,$=this.outputs;R<$.length;R+=1)k($[R])},Fr.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})},Fr.prototype.serialize=function(){for(var k=["step",this.input.serialize()],R=0;R<this.labels.length;R++)R>0&&k.push(this.labels[R]),k.push(this.outputs[R].serialize());return k};var qr=Object.freeze({__proto__:null,number:Br,color:function(k,R,$){return new sn(Br(k.r,R.r,$),Br(k.g,R.g,$),Br(k.b,R.b,$),Br(k.a,R.a,$))},array:function(k,R,$){return k.map(function(ue,_e){return Br(ue,R[_e],$)})}}),Xr=6/29,ci=3*Xr*Xr,Ui=Math.PI/180,Hi=180/Math.PI;function jr(k){return k>.008856451679035631?Math.pow(k,1/3):k/ci+4/29}function pi(k){return k>Xr?k*k*k:ci*(k-4/29)}function ui(k){return 255*(k<=.0031308?12.92*k:1.055*Math.pow(k,1/2.4)-.055)}function Qi(k){return(k/=255)<=.04045?k/12.92:Math.pow((k+.055)/1.055,2.4)}function ma(k){var R=Qi(k.r),$=Qi(k.g),ue=Qi(k.b),_e=jr((.4124564*R+.3575761*$+.1804375*ue)/.95047),Ae=jr((.2126729*R+.7151522*$+.072175*ue)/1);return{l:116*Ae-16,a:500*(_e-Ae),b:200*(Ae-jr((.0193339*R+.119192*$+.9503041*ue)/1.08883)),alpha:k.a}}function Za(k){var R=(k.l+16)/116,$=isNaN(k.a)?R:R+k.a/500,ue=isNaN(k.b)?R:R-k.b/200;return R=1*pi(R),$=.95047*pi($),ue=1.08883*pi(ue),new sn(ui(3.2404542*$-1.5371385*R-.4985314*ue),ui(-.969266*$+1.8760108*R+.041556*ue),ui(.0556434*$-.2040259*R+1.0572252*ue),k.alpha)}function Co(k,R,$){var ue=R-k;return k+$*(ue>180||ue<-180?ue-360*Math.round(ue/360):ue)}var sa={forward:ma,reverse:Za,interpolate:function(k,R,$){return{l:Br(k.l,R.l,$),a:Br(k.a,R.a,$),b:Br(k.b,R.b,$),alpha:Br(k.alpha,R.alpha,$)}}},la={forward:function(k){var R=ma(k),$=R.l,ue=R.a,_e=R.b,Ae=Math.atan2(_e,ue)*Hi;return{h:Ae<0?Ae+360:Ae,c:Math.sqrt(ue*ue+_e*_e),l:$,alpha:k.a}},reverse:function(k){var R=k.h*Ui,$=k.c;return Za({l:k.l,a:Math.cos(R)*$,b:Math.sin(R)*$,alpha:k.alpha})},interpolate:function(k,R,$){return{h:Co(k.h,R.h,$),c:Br(k.c,R.c,$),l:Br(k.l,R.l,$),alpha:Br(k.alpha,R.alpha,$)}}},lo=Object.freeze({__proto__:null,lab:sa,hcl:la}),Ki=function(k,R,$,ue,_e){this.type=k,this.operator=R,this.interpolation=$,this.input=ue,this.labels=[],this.outputs=[];for(var Ae=0,Re=_e;Ae<Re.length;Ae+=1){var Ze=Re[Ae],_t=Ze[1];this.labels.push(Ze[0]),this.outputs.push(_t)}};function po(k,R,$,ue){var _e=ue-$,Ae=k-$;return 0===_e?0:1===R?Ae/_e:(Math.pow(R,Ae)-1)/(Math.pow(R,_e)-1)}Ki.interpolationFactor=function(k,R,$,ue){var _e=0;if("exponential"===k.name)_e=po(R,k.base,$,ue);else if("linear"===k.name)_e=po(R,1,$,ue);else if("cubic-bezier"===k.name){var Ae=k.controlPoints;_e=new t(Ae[0],Ae[1],Ae[2],Ae[3]).solve(po(R,1,$,ue))}return _e},Ki.parse=function(k,R){var $=k[0],ue=k[1],_e=k[2],Ae=k.slice(3);if(!Array.isArray(ue)||0===ue.length)return R.error("Expected an interpolation type expression.",1);if("linear"===ue[0])ue={name:"linear"};else if("exponential"===ue[0]){var Re=ue[1];if("number"!=typeof Re)return R.error("Exponential interpolation requires a numeric base.",1,1);ue={name:"exponential",base:Re}}else{if("cubic-bezier"!==ue[0])return R.error("Unknown interpolation type "+String(ue[0]),1,0);var Ze=ue.slice(1);if(4!==Ze.length||Ze.some(function(Zn){return"number"!=typeof Zn||Zn<0||Zn>1}))return R.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ue={name:"cubic-bezier",controlPoints:Ze}}if(k.length-1<4)return R.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if((k.length-1)%2!=0)return R.error("Expected an even number of arguments.");if(!(_e=R.parse(_e,2,dt)))return null;var lt=[],_t=null;"interpolate-hcl"===$||"interpolate-lab"===$?_t=It:R.expectedType&&"value"!==R.expectedType.kind&&(_t=R.expectedType);for(var At=0;At<Ae.length;At+=2){var Wt=Ae[At],on=Ae[At+1],en=At+3,_n=At+4;if("number"!=typeof Wt)return R.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',en);if(lt.length&&lt[lt.length-1][0]>=Wt)return R.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',en);var Rn=R.parse(on,_n,_t);if(!Rn)return null;_t=_t||Rn.type,lt.push([Wt,Rn])}return"number"===_t.kind||"color"===_t.kind||"array"===_t.kind&&"number"===_t.itemType.kind&&"number"==typeof _t.N?new Ki(_t,$,ue,_e,lt):R.error("Type "+Xt(_t)+" is not interpolatable.")},Ki.prototype.evaluate=function(k){var R=this.labels,$=this.outputs;if(1===R.length)return $[0].evaluate(k);var ue=this.input.evaluate(k);if(ue<=R[0])return $[0].evaluate(k);var _e=R.length;if(ue>=R[_e-1])return $[_e-1].evaluate(k);var Ae=Nr(R,ue),lt=Ki.interpolationFactor(this.interpolation,ue,R[Ae],R[Ae+1]),_t=$[Ae].evaluate(k),At=$[Ae+1].evaluate(k);return"interpolate"===this.operator?qr[this.type.kind.toLowerCase()](_t,At,lt):"interpolate-hcl"===this.operator?la.reverse(la.interpolate(la.forward(_t),la.forward(At),lt)):sa.reverse(sa.interpolate(sa.forward(_t),sa.forward(At),lt))},Ki.prototype.eachChild=function(k){k(this.input);for(var R=0,$=this.outputs;R<$.length;R+=1)k($[R])},Ki.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})},Ki.prototype.serialize=function(){var k;k="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var R=[this.operator,k,this.input.serialize()],$=0;$<this.labels.length;$++)R.push(this.labels[$],this.outputs[$].serialize());return R};var Po=function(k,R){this.type=k,this.args=R};Po.parse=function(k,R){if(k.length<2)return R.error("Expectected at least one argument.");var $=null,ue=R.expectedType;ue&&"value"!==ue.kind&&($=ue);for(var _e=[],Ae=0,Re=k.slice(1);Ae<Re.length;Ae+=1){var lt=R.parse(Re[Ae],1+_e.length,$,void 0,{typeAnnotation:"omit"});if(!lt)return null;$=$||lt.type,_e.push(lt)}var _t=ue&&_e.some(function(At){return Kt(ue,At.type)});return new Po(_t?Ie:$,_e)},Po.prototype.evaluate=function(k){for(var R,$=null,ue=0,_e=0,Ae=this.args;_e<Ae.length&&(ue++,($=Ae[_e].evaluate(k))&&$ instanceof En&&!$.available&&(R||(R=$.name),$=null,ue===this.args.length&&($=R)),null===$);_e+=1);return $},Po.prototype.eachChild=function(k){this.args.forEach(k)},Po.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},Po.prototype.serialize=function(){var k=["coalesce"];return this.eachChild(function(R){k.push(R.serialize())}),k};var Va=function(k,R){this.type=R.type,this.bindings=[].concat(k),this.result=R};Va.prototype.evaluate=function(k){return this.result.evaluate(k)},Va.prototype.eachChild=function(k){for(var R=0,$=this.bindings;R<$.length;R+=1)k($[R][1]);k(this.result)},Va.parse=function(k,R){if(k.length<4)return R.error("Expected at least 3 arguments, but found "+(k.length-1)+" instead.");for(var $=[],ue=1;ue<k.length-1;ue+=2){var _e=k[ue];if("string"!=typeof _e)return R.error("Expected string, but found "+typeof _e+" instead.",ue);if(/[^a-zA-Z0-9_]/.test(_e))return R.error("Variable names must contain only alphanumeric characters or '_'.",ue);var Ae=R.parse(k[ue+1],ue+1);if(!Ae)return null;$.push([_e,Ae])}var Re=R.parse(k[k.length-1],k.length-1,R.expectedType,$);return Re?new Va($,Re):null},Va.prototype.outputDefined=function(){return this.result.outputDefined()},Va.prototype.serialize=function(){for(var k=["let"],R=0,$=this.bindings;R<$.length;R+=1){var ue=$[R];k.push(ue[0],ue[1].serialize())}return k.push(this.result.serialize()),k};var mo=function(k,R,$){this.type=k,this.index=R,this.input=$};mo.parse=function(k,R){if(3!==k.length)return R.error("Expected 2 arguments, but found "+(k.length-1)+" instead.");var $=R.parse(k[1],1,dt),ue=R.parse(k[2],2,Rt(R.expectedType||Ie));return $&&ue?new mo(ue.type.itemType,$,ue):null},mo.prototype.evaluate=function(k){var R=this.index.evaluate(k),$=this.input.evaluate(k);if(R<0)throw new yr("Array index out of bounds: "+R+" < 0.");if(R>=$.length)throw new yr("Array index out of bounds: "+R+" > "+($.length-1)+".");if(R!==Math.floor(R))throw new yr("Array index must be an integer, but found "+R+" instead.");return $[R]},mo.prototype.eachChild=function(k){k(this.index),k(this.input)},mo.prototype.outputDefined=function(){return!1},mo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ro=function(k,R){this.type=Yt,this.needle=k,this.haystack=R};Ro.parse=function(k,R){if(3!==k.length)return R.error("Expected 2 arguments, but found "+(k.length-1)+" instead.");var $=R.parse(k[1],1,Ie),ue=R.parse(k[2],2,Ie);return $&&ue?kn($.type,[Yt,bt,dt,Vt,Ie])?new Ro($,ue):R.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt($.type)+" instead"):null},Ro.prototype.evaluate=function(k){var R=this.needle.evaluate(k),$=this.haystack.evaluate(k);if(!$)return!1;if(!Vn(R,["boolean","string","number","null"]))throw new yr("Expected first argument to be of type boolean, string, number or null, but found "+Xt(nr(R))+" instead.");if(!Vn($,["string","array"]))throw new yr("Expected second argument to be of type array or string, but found "+Xt(nr($))+" instead.");return $.indexOf(R)>=0},Ro.prototype.eachChild=function(k){k(this.needle),k(this.haystack)},Ro.prototype.outputDefined=function(){return!0},Ro.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Wo=function(k,R,$){this.type=dt,this.needle=k,this.haystack=R,this.fromIndex=$};Wo.parse=function(k,R){if(k.length<=2||k.length>=5)return R.error("Expected 3 or 4 arguments, but found "+(k.length-1)+" instead.");var $=R.parse(k[1],1,Ie),ue=R.parse(k[2],2,Ie);if(!$||!ue)return null;if(!kn($.type,[Yt,bt,dt,Vt,Ie]))return R.error("Expected first argument to be of type boolean, string, number or null, but found "+Xt($.type)+" instead");if(4===k.length){var _e=R.parse(k[3],3,dt);return _e?new Wo($,ue,_e):null}return new Wo($,ue)},Wo.prototype.evaluate=function(k){var R=this.needle.evaluate(k),$=this.haystack.evaluate(k);if(!Vn(R,["boolean","string","number","null"]))throw new yr("Expected first argument to be of type boolean, string, number or null, but found "+Xt(nr(R))+" instead.");if(!Vn($,["string","array"]))throw new yr("Expected second argument to be of type array or string, but found "+Xt(nr($))+" instead.");if(this.fromIndex){var ue=this.fromIndex.evaluate(k);return $.indexOf(R,ue)}return $.indexOf(R)},Wo.prototype.eachChild=function(k){k(this.needle),k(this.haystack),this.fromIndex&&k(this.fromIndex)},Wo.prototype.outputDefined=function(){return!1},Wo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var k=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),k]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Wa=function(k,R,$,ue,_e,Ae){this.inputType=k,this.type=R,this.input=$,this.cases=ue,this.outputs=_e,this.otherwise=Ae};Wa.parse=function(k,R){if(k.length<5)return R.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if(k.length%2!=1)return R.error("Expected an even number of arguments.");var $,ue;R.expectedType&&"value"!==R.expectedType.kind&&(ue=R.expectedType);for(var _e={},Ae=[],Re=2;Re<k.length-1;Re+=2){var Ze=k[Re],lt=k[Re+1];Array.isArray(Ze)||(Ze=[Ze]);var _t=R.concat(Re);if(0===Ze.length)return _t.error("Expected at least one branch label.");for(var At=0,Wt=Ze;At<Wt.length;At+=1){var on=Wt[At];if("number"!=typeof on&&"string"!=typeof on)return _t.error("Branch labels must be numbers or strings.");if("number"==typeof on&&Math.abs(on)>Number.MAX_SAFE_INTEGER)return _t.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof on&&Math.floor(on)!==on)return _t.error("Numeric branch labels must be integer values.");if($){if(_t.checkSubtype($,nr(on)))return null}else $=nr(on);if(void 0!==_e[String(on)])return _t.error("Branch labels must be unique.");_e[String(on)]=Ae.length}var en=R.parse(lt,Re,ue);if(!en)return null;ue=ue||en.type,Ae.push(en)}var _n=R.parse(k[1],1,Ie);if(!_n)return null;var Rn=R.parse(k[k.length-1],k.length-1,ue);return Rn?"value"!==_n.type.kind&&R.concat(1).checkSubtype($,_n.type)?null:new Wa($,ue,_n,_e,Ae,Rn):null},Wa.prototype.evaluate=function(k){var R=this.input.evaluate(k);return(nr(R)===this.inputType&&this.outputs[this.cases[R]]||this.otherwise).evaluate(k)},Wa.prototype.eachChild=function(k){k(this.input),this.outputs.forEach(k),k(this.otherwise)},Wa.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})&&this.otherwise.outputDefined()},Wa.prototype.serialize=function(){for(var k=this,R=["match",this.input.serialize()],$=[],ue={},_e=0,Ae=Object.keys(this.cases).sort();_e<Ae.length;_e+=1){var Re=Ae[_e];void 0===(Wt=ue[this.cases[Re]])?(ue[this.cases[Re]]=$.length,$.push([this.cases[Re],[Re]])):$[Wt][1].push(Re)}for(var Ze=function(en){return"number"===k.inputType.kind?Number(en):en},lt=0,_t=$;lt<_t.length;lt+=1){var At=_t[lt],Wt=At[0],on=At[1];R.push(1===on.length?Ze(on[0]):on.map(Ze)),R.push(this.outputs[outputIndex$1].serialize())}return R.push(this.otherwise.serialize()),R};var Ia=function(k,R,$){this.type=k,this.branches=R,this.otherwise=$};Ia.parse=function(k,R){if(k.length<4)return R.error("Expected at least 3 arguments, but found only "+(k.length-1)+".");if(k.length%2!=0)return R.error("Expected an odd number of arguments.");var $;R.expectedType&&"value"!==R.expectedType.kind&&($=R.expectedType);for(var ue=[],_e=1;_e<k.length-1;_e+=2){var Ae=R.parse(k[_e],_e,Yt);if(!Ae)return null;var Re=R.parse(k[_e+1],_e+1,$);if(!Re)return null;ue.push([Ae,Re]),$=$||Re.type}var Ze=R.parse(k[k.length-1],k.length-1,$);return Ze?new Ia($,ue,Ze):null},Ia.prototype.evaluate=function(k){for(var R=0,$=this.branches;R<$.length;R+=1){var ue=$[R],Ae=ue[1];if(ue[0].evaluate(k))return Ae.evaluate(k)}return this.otherwise.evaluate(k)},Ia.prototype.eachChild=function(k){for(var R=0,$=this.branches;R<$.length;R+=1){var ue=$[R],Ae=ue[1];k(ue[0]),k(Ae)}k(this.otherwise)},Ia.prototype.outputDefined=function(){return this.branches.every(function(k){return k[1].outputDefined()})&&this.otherwise.outputDefined()},Ia.prototype.serialize=function(){var k=["case"];return this.eachChild(function(R){k.push(R.serialize())}),k};var no=function(k,R,$,ue){this.type=k,this.input=R,this.beginIndex=$,this.endIndex=ue};function xs(k,R){return"=="===k||"!="===k?"boolean"===R.kind||"string"===R.kind||"number"===R.kind||"null"===R.kind||"value"===R.kind:"string"===R.kind||"number"===R.kind||"value"===R.kind}function ns(k,R,$,ue){return 0===ue.compare(R,$)}function ra(k,R,$){var ue="=="!==k&&"!="!==k;return function(){function _e(Ae,Re,Ze){this.type=Yt,this.lhs=Ae,this.rhs=Re,this.collator=Ze,this.hasUntypedArgument="value"===Ae.type.kind||"value"===Re.type.kind}return _e.parse=function(Ae,Re){if(3!==Ae.length&&4!==Ae.length)return Re.error("Expected two or three arguments.");var Ze=Ae[0],lt=Re.parse(Ae[1],1,Ie);if(!lt)return null;if(!xs(Ze,lt.type))return Re.concat(1).error('"'+Ze+"\" comparisons are not supported for type '"+Xt(lt.type)+"'.");var _t=Re.parse(Ae[2],2,Ie);if(!_t)return null;if(!xs(Ze,_t.type))return Re.concat(2).error('"'+Ze+"\" comparisons are not supported for type '"+Xt(_t.type)+"'.");if(lt.type.kind!==_t.type.kind&&"value"!==lt.type.kind&&"value"!==_t.type.kind)return Re.error("Cannot compare types '"+Xt(lt.type)+"' and '"+Xt(_t.type)+"'.");ue&&("value"===lt.type.kind&&"value"!==_t.type.kind?lt=new kr(_t.type,[lt]):"value"!==lt.type.kind&&"value"===_t.type.kind&&(_t=new kr(lt.type,[_t])));var At=null;if(4===Ae.length){if("string"!==lt.type.kind&&"string"!==_t.type.kind&&"value"!==lt.type.kind&&"value"!==_t.type.kind)return Re.error("Cannot use collator to compare non-string types.");if(!(At=Re.parse(Ae[3],3,et)))return null}return new _e(lt,_t,At)},_e.prototype.evaluate=function(Ae){var Re=this.lhs.evaluate(Ae),Ze=this.rhs.evaluate(Ae);if(ue&&this.hasUntypedArgument){var lt=nr(Re),_t=nr(Ze);if(lt.kind!==_t.kind||"string"!==lt.kind&&"number"!==lt.kind)throw new yr('Expected arguments for "'+k+'" to be (string, string) or (number, number), but found ('+lt.kind+", "+_t.kind+") instead.")}if(this.collator&&!ue&&this.hasUntypedArgument){var At=nr(Re),Wt=nr(Ze);if("string"!==At.kind||"string"!==Wt.kind)return R(Ae,Re,Ze)}return this.collator?$(Ae,Re,Ze,this.collator.evaluate(Ae)):R(Ae,Re,Ze)},_e.prototype.eachChild=function(Ae){Ae(this.lhs),Ae(this.rhs),this.collator&&Ae(this.collator)},_e.prototype.outputDefined=function(){return!0},_e.prototype.serialize=function(){var Ae=[k];return this.eachChild(function(Re){Ae.push(Re.serialize())}),Ae},_e}()}no.parse=function(k,R){if(k.length<=2||k.length>=5)return R.error("Expected 3 or 4 arguments, but found "+(k.length-1)+" instead.");var $=R.parse(k[1],1,Ie),ue=R.parse(k[2],2,dt);if(!$||!ue)return null;if(!kn($.type,[Rt(Ie),bt,Ie]))return R.error("Expected first argument to be of type array or string, but found "+Xt($.type)+" instead");if(4===k.length){var _e=R.parse(k[3],3,dt);return _e?new no($.type,$,ue,_e):null}return new no($.type,$,ue)},no.prototype.evaluate=function(k){var R=this.input.evaluate(k),$=this.beginIndex.evaluate(k);if(!Vn(R,["string","array"]))throw new yr("Expected first argument to be of type array or string, but found "+Xt(nr(R))+" instead.");if(this.endIndex){var ue=this.endIndex.evaluate(k);return R.slice($,ue)}return R.slice($)},no.prototype.eachChild=function(k){k(this.input),k(this.beginIndex),this.endIndex&&k(this.endIndex)},no.prototype.outputDefined=function(){return!1},no.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var k=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),k]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Ls=ra("==",function(k,R,$){return R===$},ns),ws=ra("!=",function(k,R,$){return R!==$},function(k,R,$,ue){return!ns(0,R,$,ue)}),Ys=ra("<",function(k,R,$){return R<$},function(k,R,$,ue){return ue.compare(R,$)<0}),Qs=ra(">",function(k,R,$){return R>$},function(k,R,$,ue){return ue.compare(R,$)>0}),Zs=ra("<=",function(k,R,$){return R<=$},function(k,R,$,ue){return ue.compare(R,$)<=0}),Us=ra(">=",function(k,R,$){return R>=$},function(k,R,$,ue){return ue.compare(R,$)>=0}),Vo=function(k,R,$,ue,_e){this.type=bt,this.number=k,this.locale=R,this.currency=$,this.minFractionDigits=ue,this.maxFractionDigits=_e};Vo.parse=function(k,R){if(3!==k.length)return R.error("Expected two arguments.");var $=R.parse(k[1],1,dt);if(!$)return null;var ue=k[2];if("object"!=typeof ue||Array.isArray(ue))return R.error("NumberFormat options argument must be an object.");var _e=null;if(ue.locale&&!(_e=R.parse(ue.locale,1,bt)))return null;var Ae=null;if(ue.currency&&!(Ae=R.parse(ue.currency,1,bt)))return null;var Re=null;if(ue["min-fraction-digits"]&&!(Re=R.parse(ue["min-fraction-digits"],1,dt)))return null;var Ze=null;return ue["max-fraction-digits"]&&!(Ze=R.parse(ue["max-fraction-digits"],1,dt))?null:new Vo($,_e,Ae,Re,Ze)},Vo.prototype.evaluate=function(k){return new Intl.NumberFormat(this.locale?this.locale.evaluate(k):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(k):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(k):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(k):void 0}).format(this.number.evaluate(k))},Vo.prototype.eachChild=function(k){k(this.number),this.locale&&k(this.locale),this.currency&&k(this.currency),this.minFractionDigits&&k(this.minFractionDigits),this.maxFractionDigits&&k(this.maxFractionDigits)},Vo.prototype.outputDefined=function(){return!1},Vo.prototype.serialize=function(){var k={};return this.locale&&(k.locale=this.locale.serialize()),this.currency&&(k.currency=this.currency.serialize()),this.minFractionDigits&&(k["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(k["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),k]};var Xo=function(k){this.type=dt,this.input=k};Xo.parse=function(k,R){if(2!==k.length)return R.error("Expected 1 argument, but found "+(k.length-1)+" instead.");var $=R.parse(k[1],1);return $?"array"!==$.type.kind&&"string"!==$.type.kind&&"value"!==$.type.kind?R.error("Expected argument of type string or array, but found "+Xt($.type)+" instead."):new Xo($):null},Xo.prototype.evaluate=function(k){var R=this.input.evaluate(k);if("string"==typeof R||Array.isArray(R))return R.length;throw new yr("Expected value to be of type string or array, but found "+Xt(nr(R))+" instead.")},Xo.prototype.eachChild=function(k){k(this.input)},Xo.prototype.outputDefined=function(){return!1},Xo.prototype.serialize=function(){var k=["length"];return this.eachChild(function(R){k.push(R.serialize())}),k};var rs={"==":Ls,"!=":ws,">":Qs,"<":Ys,">=":Us,"<=":Zs,array:kr,at:mo,boolean:kr,case:Ia,coalesce:Po,collator:Jr,format:Or,image:Hr,in:Ro,"index-of":Wo,interpolate:Ki,"interpolate-hcl":Ki,"interpolate-lab":Ki,length:Xo,let:Va,literal:Dr,match:Wa,number:kr,"number-format":Vo,object:kr,slice:no,step:Fr,string:kr,"to-boolean":Qn,"to-color":Qn,"to-number":Qn,"to-string":Qn,var:xr,within:Bn};function $o(k,R){var $=R[0],ue=R[1],_e=R[2],Ae=R[3];$=$.evaluate(k),ue=ue.evaluate(k),_e=_e.evaluate(k);var Re=Ae?Ae.evaluate(k):1,Ze=jn($,ue,_e,Re);if(Ze)throw new yr(Ze);return new sn($/255*Re,ue/255*Re,_e/255*Re,Re)}function Jo(k,R){return k in R}function Ts(k,R){var $=R[k];return void 0===$?null:$}function So(k){return{type:k}}function Hs(k){return{result:"success",value:k}}function go(k){return{result:"error",value:k}}function ds(k){return"data-driven"===k["property-type"]||"cross-faded-data-driven"===k["property-type"]}function Is(k){return!!k.expression&&k.expression.parameters.indexOf("zoom")>-1}function Ko(k){return!!k.expression&&k.expression.interpolated}function oa(k){return k instanceof Number?"number":k instanceof String?"string":k instanceof Boolean?"boolean":Array.isArray(k)?"array":null===k?"null":typeof k}function We(k){return"object"==typeof k&&null!==k&&!Array.isArray(k)}function tt(k){return k}function ut(k,R,$){return void 0!==k?k:void 0!==R?R:void 0!==$?$:void 0}function yt(k,R,$,ue,_e){return ut(typeof $===_e?ue[$]:void 0,k.default,R.default)}function kt(k,R,$){if("number"!==oa($))return ut(k.default,R.default);var ue=k.stops.length;if(1===ue||$<=k.stops[0][0])return k.stops[0][1];if($>=k.stops[ue-1][0])return k.stops[ue-1][1];var _e=Nr(k.stops.map(function(Ae){return Ae[0]}),$);return k.stops[_e][1]}function Mt(k,R,$){var ue=void 0!==k.base?k.base:1;if("number"!==oa($))return ut(k.default,R.default);var _e=k.stops.length;if(1===_e||$<=k.stops[0][0])return k.stops[0][1];if($>=k.stops[_e-1][0])return k.stops[_e-1][1];var on,en,Rn,Zn,Ae=Nr(k.stops.map(function(Wt){return Wt[0]}),$),Re=(on=ue,Zn=$-(en=k.stops[Ae][0]),0==(Rn=k.stops[Ae+1][0]-en)?0:1===on?Zn/Rn:(Math.pow(on,Zn)-1)/(Math.pow(on,Rn)-1)),Ze=k.stops[Ae][1],lt=k.stops[Ae+1][1],_t=qr[R.type]||tt;if(k.colorSpace&&"rgb"!==k.colorSpace){var At=lo[k.colorSpace];_t=function(Wt,on){return At.reverse(At.interpolate(At.forward(Wt),At.forward(on),Re))}}return"function"==typeof Ze.evaluate?{evaluate:function(){for(var Wt=[],on=arguments.length;on--;)Wt[on]=arguments[on];var en=Ze.evaluate.apply(void 0,Wt),_n=lt.evaluate.apply(void 0,Wt);if(void 0!==en&&void 0!==_n)return _t(en,_n,Re)}}:_t(Ze,lt,Re)}function Ft(k,R,$){return"color"===R.type?$=sn.parse($):"formatted"===R.type?$=Mn.fromString($.toString()):"resolvedImage"===R.type?$=En.fromString($.toString()):oa($)===R.type||"enum"===R.type&&R.values[$]||($=void 0),ut($,k.default,R.default)}ar.register(rs,{error:[{kind:"error"},[bt],function(k,R){throw new yr(R[0].evaluate(k))}],typeof:[bt,[Ie],function(k,R){return Xt(nr(R[0].evaluate(k)))}],"to-rgba":[Rt(dt,4),[It],function(k,R){return R[0].evaluate(k).toArray()}],rgb:[It,[dt,dt,dt],$o],rgba:[It,[dt,dt,dt,dt],$o],has:{type:Yt,overloads:[[[bt],function(k,R){return Jo(R[0].evaluate(k),k.properties())}],[[bt,jt],function(k,R){var ue=R[1];return Jo(R[0].evaluate(k),ue.evaluate(k))}]]},get:{type:Ie,overloads:[[[bt],function(k,R){return Ts(R[0].evaluate(k),k.properties())}],[[bt,jt],function(k,R){var ue=R[1];return Ts(R[0].evaluate(k),ue.evaluate(k))}]]},"feature-state":[Ie,[bt],function(k,R){return Ts(R[0].evaluate(k),k.featureState||{})}],properties:[jt,[],function(k){return k.properties()}],"geometry-type":[bt,[],function(k){return k.geometryType()}],id:[Ie,[],function(k){return k.id()}],zoom:[dt,[],function(k){return k.globals.zoom}],"heatmap-density":[dt,[],function(k){return k.globals.heatmapDensity||0}],"line-progress":[dt,[],function(k){return k.globals.lineProgress||0}],accumulated:[Ie,[],function(k){return void 0===k.globals.accumulated?null:k.globals.accumulated}],"+":[dt,So(dt),function(k,R){for(var $=0,ue=0,_e=R;ue<_e.length;ue+=1)$+=_e[ue].evaluate(k);return $}],"*":[dt,So(dt),function(k,R){for(var $=1,ue=0,_e=R;ue<_e.length;ue+=1)$*=_e[ue].evaluate(k);return $}],"-":{type:dt,overloads:[[[dt,dt],function(k,R){var ue=R[1];return R[0].evaluate(k)-ue.evaluate(k)}],[[dt],function(k,R){return-R[0].evaluate(k)}]]},"/":[dt,[dt,dt],function(k,R){var ue=R[1];return R[0].evaluate(k)/ue.evaluate(k)}],"%":[dt,[dt,dt],function(k,R){var ue=R[1];return R[0].evaluate(k)%ue.evaluate(k)}],ln2:[dt,[],function(){return Math.LN2}],pi:[dt,[],function(){return Math.PI}],e:[dt,[],function(){return Math.E}],"^":[dt,[dt,dt],function(k,R){var ue=R[1];return Math.pow(R[0].evaluate(k),ue.evaluate(k))}],sqrt:[dt,[dt],function(k,R){return Math.sqrt(R[0].evaluate(k))}],log10:[dt,[dt],function(k,R){return Math.log(R[0].evaluate(k))/Math.LN10}],ln:[dt,[dt],function(k,R){return Math.log(R[0].evaluate(k))}],log2:[dt,[dt],function(k,R){return Math.log(R[0].evaluate(k))/Math.LN2}],sin:[dt,[dt],function(k,R){return Math.sin(R[0].evaluate(k))}],cos:[dt,[dt],function(k,R){return Math.cos(R[0].evaluate(k))}],tan:[dt,[dt],function(k,R){return Math.tan(R[0].evaluate(k))}],asin:[dt,[dt],function(k,R){return Math.asin(R[0].evaluate(k))}],acos:[dt,[dt],function(k,R){return Math.acos(R[0].evaluate(k))}],atan:[dt,[dt],function(k,R){return Math.atan(R[0].evaluate(k))}],min:[dt,So(dt),function(k,R){return Math.min.apply(Math,R.map(function($){return $.evaluate(k)}))}],max:[dt,So(dt),function(k,R){return Math.max.apply(Math,R.map(function($){return $.evaluate(k)}))}],abs:[dt,[dt],function(k,R){return Math.abs(R[0].evaluate(k))}],round:[dt,[dt],function(k,R){var $=R[0].evaluate(k);return $<0?-Math.round(-$):Math.round($)}],floor:[dt,[dt],function(k,R){return Math.floor(R[0].evaluate(k))}],ceil:[dt,[dt],function(k,R){return Math.ceil(R[0].evaluate(k))}],"filter-==":[Yt,[bt,Ie],function(k,R){var $=R[0],ue=R[1];return k.properties()[$.value]===ue.value}],"filter-id-==":[Yt,[Ie],function(k,R){var $=R[0];return k.id()===$.value}],"filter-type-==":[Yt,[bt],function(k,R){var $=R[0];return k.geometryType()===$.value}],"filter-<":[Yt,[bt,Ie],function(k,R){var $=R[0],ue=R[1],_e=k.properties()[$.value],Ae=ue.value;return typeof _e==typeof Ae&&_e<Ae}],"filter-id-<":[Yt,[Ie],function(k,R){var $=R[0],ue=k.id(),_e=$.value;return typeof ue==typeof _e&&ue<_e}],"filter->":[Yt,[bt,Ie],function(k,R){var $=R[0],ue=R[1],_e=k.properties()[$.value],Ae=ue.value;return typeof _e==typeof Ae&&_e>Ae}],"filter-id->":[Yt,[Ie],function(k,R){var $=R[0],ue=k.id(),_e=$.value;return typeof ue==typeof _e&&ue>_e}],"filter-<=":[Yt,[bt,Ie],function(k,R){var $=R[0],ue=R[1],_e=k.properties()[$.value],Ae=ue.value;return typeof _e==typeof Ae&&_e<=Ae}],"filter-id-<=":[Yt,[Ie],function(k,R){var $=R[0],ue=k.id(),_e=$.value;return typeof ue==typeof _e&&ue<=_e}],"filter->=":[Yt,[bt,Ie],function(k,R){var $=R[0],ue=R[1],_e=k.properties()[$.value],Ae=ue.value;return typeof _e==typeof Ae&&_e>=Ae}],"filter-id->=":[Yt,[Ie],function(k,R){var $=R[0],ue=k.id(),_e=$.value;return typeof ue==typeof _e&&ue>=_e}],"filter-has":[Yt,[Ie],function(k,R){return R[0].value in k.properties()}],"filter-has-id":[Yt,[],function(k){return null!==k.id()&&void 0!==k.id()}],"filter-type-in":[Yt,[Rt(bt)],function(k,R){return R[0].value.indexOf(k.geometryType())>=0}],"filter-id-in":[Yt,[Rt(Ie)],function(k,R){return R[0].value.indexOf(k.id())>=0}],"filter-in-small":[Yt,[bt,Rt(Ie)],function(k,R){var $=R[0];return R[1].value.indexOf(k.properties()[$.value])>=0}],"filter-in-large":[Yt,[bt,Rt(Ie)],function(k,R){var $=R[0],ue=R[1];return function(_e,Ae,Re,Ze){for(;Re<=Ze;){var lt=Re+Ze>>1;if(Ae[lt]===_e)return!0;Ae[lt]>_e?Ze=lt-1:Re=lt+1}return!1}(k.properties()[$.value],ue.value,0,ue.value.length-1)}],all:{type:Yt,overloads:[[[Yt,Yt],function(k,R){var ue=R[1];return R[0].evaluate(k)&&ue.evaluate(k)}],[So(Yt),function(k,R){for(var $=0,ue=R;$<ue.length;$+=1)if(!ue[$].evaluate(k))return!1;return!0}]]},any:{type:Yt,overloads:[[[Yt,Yt],function(k,R){var ue=R[1];return R[0].evaluate(k)||ue.evaluate(k)}],[So(Yt),function(k,R){for(var $=0,ue=R;$<ue.length;$+=1)if(ue[$].evaluate(k))return!0;return!1}]]},"!":[Yt,[Yt],function(k,R){return!R[0].evaluate(k)}],"is-supported-script":[Yt,[bt],function(k,R){var ue=k.globals&&k.globals.isSupportedScript;return!ue||ue(R[0].evaluate(k))}],upcase:[bt,[bt],function(k,R){return R[0].evaluate(k).toUpperCase()}],downcase:[bt,[bt],function(k,R){return R[0].evaluate(k).toLowerCase()}],concat:[bt,So(Ie),function(k,R){return R.map(function($){return mr($.evaluate(k))}).join("")}],"resolved-locale":[bt,[et],function(k,R){return R[0].evaluate(k).resolvedLocale()}]});var ln=function(k,R){var $;this.expression=k,this._warningHistory={},this._evaluator=new Tr,this._defaultValue=R?"color"===($=R).type&&We($.default)?new sn(0,0,0,0):"color"===$.type?sn.parse($.default)||null:void 0===$.default?null:$.default:null,this._enumValues=R&&"enum"===R.type?R.values:null};function un(k){return Array.isArray(k)&&k.length>0&&"string"==typeof k[0]&&k[0]in rs}function an(k,R){var _e,Ae,$=new _r(rs,[],R?(Ae={color:It,string:bt,number:dt,enum:bt,boolean:Yt,formatted:ht,resolvedImage:xt},"array"===(_e=R).type?Rt(Ae[_e.value]||Ie,_e.length):Ae[_e.type]):void 0),ue=$.parse(k,void 0,void 0,void 0,R&&"string"===R.type?{typeAnnotation:"coerce"}:void 0);return ue?Hs(new ln(ue,R)):go($.errors)}ln.prototype.evaluateWithoutErrorHandling=function(k,R,$,ue,_e,Ae){return this._evaluator.globals=k,this._evaluator.feature=R,this._evaluator.featureState=$,this._evaluator.canonical=ue,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Ae,this.expression.evaluate(this._evaluator)},ln.prototype.evaluate=function(k,R,$,ue,_e,Ae){this._evaluator.globals=k,this._evaluator.feature=R||null,this._evaluator.featureState=$||null,this._evaluator.canonical=ue,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Ae||null;try{var Re=this.expression.evaluate(this._evaluator);if(null==Re||"number"==typeof Re&&Re!=Re)return this._defaultValue;if(this._enumValues&&!(Re in this._enumValues))throw new yr("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(Re)+" instead.");return Re}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,typeof console<"u"&&console.warn(Ze.message)),this._defaultValue}};var vn=function(k,R){this.kind=k,this._styleExpression=R,this.isStateDependent="constant"!==k&&!or(R.expression)};vn.prototype.evaluateWithoutErrorHandling=function(k,R,$,ue,_e,Ae){return this._styleExpression.evaluateWithoutErrorHandling(k,R,$,ue,_e,Ae)},vn.prototype.evaluate=function(k,R,$,ue,_e,Ae){return this._styleExpression.evaluate(k,R,$,ue,_e,Ae)};var Dn=function(k,R,$,ue){this.kind=k,this.zoomStops=$,this._styleExpression=R,this.isStateDependent="camera"!==k&&!or(R.expression),this.interpolationType=ue};function Nn(k,R){if("error"===(k=an(k,R)).result)return k;var $=k.value.expression,ue=Gn($);if(!ue&&!ds(R))return go([new mt("","data expressions not supported")]);var _e=sr($,["zoom"]);if(!_e&&!Is(R))return go([new mt("","zoom expressions not supported")]);var Ae=function Ze(lt){var _t=null;if(lt instanceof Va)_t=Ze(lt.result);else if(lt instanceof Po)for(var At=0,Wt=lt.args;At<Wt.length&&!(_t=Ze(Wt[At]));At+=1);else(lt instanceof Fr||lt instanceof Ki)&&lt.input instanceof ar&&"zoom"===lt.input.name&&(_t=lt);return _t instanceof mt||lt.eachChild(function(en){var _n=Ze(en);_n instanceof mt?_t=_n:!_t&&_n?_t=new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):_t&&_n&&_t!==_n&&(_t=new mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),_t}($);return Ae||_e?Ae instanceof mt?go([Ae]):Ae instanceof Ki&&!Ko(R)?go([new mt("",'"interpolate" expressions cannot be used with this property')]):Hs(Ae?new Dn(ue?"camera":"composite",k.value,Ae.labels,Ae instanceof Ki?Ae.interpolation:void 0):new vn(ue?"constant":"source",k.value)):go([new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Dn.prototype.evaluateWithoutErrorHandling=function(k,R,$,ue,_e,Ae){return this._styleExpression.evaluateWithoutErrorHandling(k,R,$,ue,_e,Ae)},Dn.prototype.evaluate=function(k,R,$,ue,_e,Ae){return this._styleExpression.evaluate(k,R,$,ue,_e,Ae)},Dn.prototype.interpolationFactor=function(k,R,$){return this.interpolationType?Ki.interpolationFactor(this.interpolationType,k,R,$):0};var Fn=function(k,R){this._parameters=k,this._specification=R,rt(this,function $(ue,_e){var Ae,Re,Ze,lt="color"===_e.type,_t=ue.stops&&"object"==typeof ue.stops[0][0],Wt=_t||!(_t||void 0!==ue.property),on=ue.type||(Ko(_e)?"exponential":"interval");if(lt&&((ue=rt({},ue)).stops&&(ue.stops=ue.stops.map(function(Mi){return[Mi[0],sn.parse(Mi[1])]})),ue.default=sn.parse(ue.default?ue.default:_e.default)),ue.colorSpace&&"rgb"!==ue.colorSpace&&!lo[ue.colorSpace])throw new Error("Unknown color space: "+ue.colorSpace);if("exponential"===on)Ae=Mt;else if("interval"===on)Ae=kt;else if("categorical"===on){Ae=yt,Re=Object.create(null);for(var en=0,_n=ue.stops;en<_n.length;en+=1){var Rn=_n[en];Re[Rn[0]]=Rn[1]}Ze=typeof ue.stops[0][0]}else{if("identity"!==on)throw new Error('Unknown function type "'+on+'"');Ae=Ft}if(_t){for(var Zn={},Wn=[],rr=0;rr<ue.stops.length;rr++){var ir=ue.stops[rr],hr=ir[0].zoom;void 0===Zn[hr]&&(Zn[hr]={zoom:hr,type:ue.type,property:ue.property,default:ue.default,stops:[]},Wn.push(hr)),Zn[hr].stops.push([ir[0].value,ir[1]])}for(var Er=[],zr=0,ni=Wn;zr<ni.length;zr+=1){var ti=ni[zr];Er.push([Zn[ti].zoom,$(Zn[ti],_e)])}var li={name:"linear"};return{kind:"composite",interpolationType:li,interpolationFactor:Ki.interpolationFactor.bind(void 0,li),zoomStops:Er.map(function(Mi){return Mi[0]}),evaluate:function(Mi,mi){var Pi=Mi.zoom;return Mt({stops:Er,base:ue.base},_e,Pi).evaluate(Pi,mi)}}}if(Wt){var Ti="exponential"===on?{name:"exponential",base:void 0!==ue.base?ue.base:1}:null;return{kind:"camera",interpolationType:Ti,interpolationFactor:Ki.interpolationFactor.bind(void 0,Ti),zoomStops:ue.stops.map(function(Mi){return Mi[0]}),evaluate:function(Mi){return Ae(ue,_e,Mi.zoom,Re,Ze)}}}return{kind:"source",evaluate:function(Mi,mi){var Pi=mi&&mi.properties?mi.properties[ue.property]:void 0;return void 0===Pi?ut(ue.default,_e.default):Ae(ue,_e,Pi,Re,Ze)}}}(this._parameters,this._specification))};function $n(k){var R=k.key,$=k.value,ue=k.valueSpec||{},_e=k.objectElementValidators||{},Ae=k.style,Re=k.styleSpec,Ze=[],lt=oa($);if("object"!==lt)return[new Ue(R,$,"object expected, "+lt+" found")];for(var _t in $){var At=_t.split(".")[0],Wt=ue[At]||ue["*"],on=void 0;if(_e[At])on=_e[At];else if(ue[At])on=bn;else if(_e["*"])on=_e["*"];else{if(!ue["*"]){Ze.push(new Ue(R,$[_t],'unknown property "'+_t+'"'));continue}on=bn}Ze=Ze.concat(on({key:(R&&R+".")+_t,value:$[_t],valueSpec:Wt,style:Ae,styleSpec:Re,object:$,objectKey:_t},$))}for(var en in ue)_e[en]||ue[en].required&&void 0===ue[en].default&&void 0===$[en]&&Ze.push(new Ue(R,$,'missing required property "'+en+'"'));return Ze}function wr(k){var R=k.value,$=k.valueSpec,ue=k.style,_e=k.styleSpec,Ae=k.key,Re=k.arrayElementValidator||bn;if("array"!==oa(R))return[new Ue(Ae,R,"array expected, "+oa(R)+" found")];if($.length&&R.length!==$.length)return[new Ue(Ae,R,"array length "+$.length+" expected, length "+R.length+" found")];if($["min-length"]&&R.length<$["min-length"])return[new Ue(Ae,R,"array length at least "+$["min-length"]+" expected, length "+R.length+" found")];var Ze={type:$.value,values:$.values};_e.$version<7&&(Ze.function=$.function),"object"===oa($.value)&&(Ze=$.value);for(var lt=[],_t=0;_t<R.length;_t++)lt=lt.concat(Re({array:R,arrayIndex:_t,value:R[_t],valueSpec:Ze,style:ue,styleSpec:_e,key:Ae+"["+_t+"]"}));return lt}function Lr(k){var R=k.key,$=k.value,ue=k.valueSpec,_e=oa($);return"number"===_e&&$!=$&&(_e="NaN"),"number"!==_e?[new Ue(R,$,"number expected, "+_e+" found")]:"minimum"in ue&&$<ue.minimum?[new Ue(R,$,$+" is less than the minimum value "+ue.minimum)]:"maximum"in ue&&$>ue.maximum?[new Ue(R,$,$+" is greater than the maximum value "+ue.maximum)]:[]}function Zr(k){var R,$,ue,_e=k.valueSpec,Ae=Ke(k.value.type),Re={},Ze="categorical"!==Ae&&void 0===k.value.property,lt=!Ze,_t="array"===oa(k.value.stops)&&"array"===oa(k.value.stops[0])&&"object"===oa(k.value.stops[0][0]),At=$n({key:k.key,value:k.value,valueSpec:k.styleSpec.function,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{stops:function(en){if("identity"===Ae)return[new Ue(en.key,en.value,'identity function may not have a "stops" property')];var _n=[],Rn=en.value;return _n=_n.concat(wr({key:en.key,value:Rn,valueSpec:en.valueSpec,style:en.style,styleSpec:en.styleSpec,arrayElementValidator:Wt})),"array"===oa(Rn)&&0===Rn.length&&_n.push(new Ue(en.key,Rn,"array must have at least one stop")),_n},default:function(en){return bn({key:en.key,value:en.value,valueSpec:_e,style:en.style,styleSpec:en.styleSpec})}}});return"identity"===Ae&&Ze&&At.push(new Ue(k.key,k.value,'missing required property "property"')),"identity"===Ae||k.value.stops||At.push(new Ue(k.key,k.value,'missing required property "stops"')),"exponential"===Ae&&k.valueSpec.expression&&!Ko(k.valueSpec)&&At.push(new Ue(k.key,k.value,"exponential functions not supported")),k.styleSpec.$version>=8&&(lt&&!ds(k.valueSpec)?At.push(new Ue(k.key,k.value,"property functions not supported")):Ze&&!Is(k.valueSpec)&&At.push(new Ue(k.key,k.value,"zoom functions not supported"))),"categorical"!==Ae&&!_t||void 0!==k.value.property||At.push(new Ue(k.key,k.value,'"property" property is required')),At;function Wt(en){var _n=[],Rn=en.value,Zn=en.key;if("array"!==oa(Rn))return[new Ue(Zn,Rn,"array expected, "+oa(Rn)+" found")];if(2!==Rn.length)return[new Ue(Zn,Rn,"array length 2 expected, length "+Rn.length+" found")];if(_t){if("object"!==oa(Rn[0]))return[new Ue(Zn,Rn,"object expected, "+oa(Rn[0])+" found")];if(void 0===Rn[0].zoom)return[new Ue(Zn,Rn,"object stop key must have zoom")];if(void 0===Rn[0].value)return[new Ue(Zn,Rn,"object stop key must have value")];if(ue&&ue>Ke(Rn[0].zoom))return[new Ue(Zn,Rn[0].zoom,"stop zoom values must appear in ascending order")];Ke(Rn[0].zoom)!==ue&&(ue=Ke(Rn[0].zoom),$=void 0,Re={}),_n=_n.concat($n({key:Zn+"[0]",value:Rn[0],valueSpec:{zoom:{}},style:en.style,styleSpec:en.styleSpec,objectElementValidators:{zoom:Lr,value:on}}))}else _n=_n.concat(on({key:Zn+"[0]",value:Rn[0],valueSpec:{},style:en.style,styleSpec:en.styleSpec},Rn));return un(gt(Rn[1]))?_n.concat([new Ue(Zn+"[1]",Rn[1],"expressions are not allowed in function stops.")]):_n.concat(bn({key:Zn+"[1]",value:Rn[1],valueSpec:_e,style:en.style,styleSpec:en.styleSpec}))}function on(en,_n){var Rn=oa(en.value),Zn=Ke(en.value),Wn=null!==en.value?en.value:_n;if(R){if(Rn!==R)return[new Ue(en.key,Wn,Rn+" stop domain type must match previous stop domain type "+R)]}else R=Rn;if("number"!==Rn&&"string"!==Rn&&"boolean"!==Rn)return[new Ue(en.key,Wn,"stop domain value must be a number, string, or boolean")];if("number"!==Rn&&"categorical"!==Ae){var rr="number expected, "+Rn+" found";return ds(_e)&&void 0===Ae&&(rr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ue(en.key,Wn,rr)]}return"categorical"!==Ae||"number"!==Rn||isFinite(Zn)&&Math.floor(Zn)===Zn?"categorical"!==Ae&&"number"===Rn&&void 0!==$&&Zn<$?[new Ue(en.key,Wn,"stop domain values must appear in ascending order")]:($=Zn,"categorical"===Ae&&Zn in Re?[new Ue(en.key,Wn,"stop domain values must be unique")]:(Re[Zn]=!0,[])):[new Ue(en.key,Wn,"integer expected, found "+Zn)]}}function Qr(k){var R=("property"===k.expressionContext?Nn:an)(gt(k.value),k.valueSpec);if("error"===R.result)return R.value.map(function(ue){return new Ue(""+k.key+ue.key,k.value,ue.message)});var $=R.value.expression||R.value._styleExpression.expression;if("property"===k.expressionContext&&"text-font"===k.propertyKey&&!$.outputDefined())return[new Ue(k.key,k.value,'Invalid data expression for "'+k.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===k.expressionContext&&"layout"===k.propertyType&&!or($))return[new Ue(k.key,k.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===k.expressionContext&&!or($))return[new Ue(k.key,k.value,'"feature-state" data expressions are not supported with filters.')];if(k.expressionContext&&0===k.expressionContext.indexOf("cluster")){if(!sr($,["zoom","feature-state"]))return[new Ue(k.key,k.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===k.expressionContext&&!Gn($))return[new Ue(k.key,k.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Kr(k){var R=k.key,$=k.value,ue=k.valueSpec,_e=[];return Array.isArray(ue.values)?-1===ue.values.indexOf(Ke($))&&_e.push(new Ue(R,$,"expected one of ["+ue.values.join(", ")+"], "+JSON.stringify($)+" found")):-1===Object.keys(ue.values).indexOf(Ke($))&&_e.push(new Ue(R,$,"expected one of ["+Object.keys(ue.values).join(", ")+"], "+JSON.stringify($)+" found")),_e}function $r(k){if(!0===k||!1===k)return!0;if(!Array.isArray(k)||0===k.length)return!1;switch(k[0]){case"has":return k.length>=2&&"$id"!==k[1]&&"$type"!==k[1];case"in":return k.length>=3&&("string"!=typeof k[1]||Array.isArray(k[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==k.length||Array.isArray(k[1])||Array.isArray(k[2]);case"any":case"all":for(var R=0,$=k.slice(1);R<$.length;R+=1){var ue=$[R];if(!$r(ue)&&"boolean"!=typeof ue)return!1}return!0;default:return!0}}Fn.deserialize=function(k){return new Fn(k._parameters,k._specification)},Fn.serialize=function(k){return{_parameters:k._parameters,_specification:k._specification}};var Li={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Gi(k){if(null==k)return{filter:function(){return!0},needGeometry:!1};$r(k)||(k=Wi(k));var R=an(k,Li);if("error"===R.result)throw new Error(R.value.map(function($){return $.key+": "+$.message}).join(", "));return{filter:function($,ue,_e){return R.value.evaluate($,ue,{},_e)},needGeometry:function $(ue){if(!Array.isArray(ue))return!1;if("within"===ue[0])return!0;for(var _e=1;_e<ue.length;_e++)if($(ue[_e]))return!0;return!1}(k)}}function ia(k,R){return k<R?-1:k>R?1:0}function Wi(k){if(!k)return!0;var R,$=k[0];return k.length<=1?"any"!==$:"=="===$?aa(k[1],k[2],"=="):"!="===$?ya(aa(k[1],k[2],"==")):"<"===$||">"===$||"<="===$||">="===$?aa(k[1],k[2],$):"any"===$?(R=k.slice(1),["any"].concat(R.map(Wi))):"all"===$?["all"].concat(k.slice(1).map(Wi)):"none"===$?["all"].concat(k.slice(1).map(Wi).map(ya)):"in"===$?Pa(k[1],k.slice(2)):"!in"===$?ya(Pa(k[1],k.slice(2))):"has"===$?Ua(k[1]):"!has"===$?ya(Ua(k[1])):"within"!==$||k}function aa(k,R,$){switch(k){case"$type":return["filter-type-"+$,R];case"$id":return["filter-id-"+$,R];default:return["filter-"+$,k,R]}}function Pa(k,R){if(0===R.length)return!1;switch(k){case"$type":return["filter-type-in",["literal",R]];case"$id":return["filter-id-in",["literal",R]];default:return R.length>200&&!R.some(function($){return typeof $!=typeof R[0]})?["filter-in-large",k,["literal",R.sort(ia)]]:["filter-in-small",k,["literal",R]]}}function Ua(k){switch(k){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",k]}}function ya(k){return["!",k]}function Aa(k){return $r(gt(k.value))?Qr(rt({},k,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function R($){var ue=$.value,_e=$.key;if("array"!==oa(ue))return[new Ue(_e,ue,"array expected, "+oa(ue)+" found")];var Ae,Re=$.styleSpec,Ze=[];if(ue.length<1)return[new Ue(_e,ue,"filter array must have at least 1 element")];switch(Ze=Ze.concat(Kr({key:_e+"[0]",value:ue[0],valueSpec:Re.filter_operator,style:$.style,styleSpec:$.styleSpec})),Ke(ue[0])){case"<":case"<=":case">":case">=":ue.length>=2&&"$type"===Ke(ue[1])&&Ze.push(new Ue(_e,ue,'"$type" cannot be use with operator "'+ue[0]+'"'));case"==":case"!=":3!==ue.length&&Ze.push(new Ue(_e,ue,'filter array for operator "'+ue[0]+'" must have 3 elements'));case"in":case"!in":ue.length>=2&&"string"!==(Ae=oa(ue[1]))&&Ze.push(new Ue(_e+"[1]",ue[1],"string expected, "+Ae+" found"));for(var lt=2;lt<ue.length;lt++)Ae=oa(ue[lt]),"$type"===Ke(ue[1])?Ze=Ze.concat(Kr({key:_e+"["+lt+"]",value:ue[lt],valueSpec:Re.geometry_type,style:$.style,styleSpec:$.styleSpec})):"string"!==Ae&&"number"!==Ae&&"boolean"!==Ae&&Ze.push(new Ue(_e+"["+lt+"]",ue[lt],"string, number, or boolean expected, "+Ae+" found"));break;case"any":case"all":case"none":for(var _t=1;_t<ue.length;_t++)Ze=Ze.concat(R({key:_e+"["+_t+"]",value:ue[_t],style:$.style,styleSpec:$.styleSpec}));break;case"has":case"!has":Ae=oa(ue[1]),2!==ue.length?Ze.push(new Ue(_e,ue,'filter array for "'+ue[0]+'" operator must have 2 elements')):"string"!==Ae&&Ze.push(new Ue(_e+"[1]",ue[1],"string expected, "+Ae+" found"));break;case"within":Ae=oa(ue[1]),2!==ue.length?Ze.push(new Ue(_e,ue,'filter array for "'+ue[0]+'" operator must have 2 elements')):"object"!==Ae&&Ze.push(new Ue(_e+"[1]",ue[1],"object expected, "+Ae+" found"))}return Ze}(k)}function Na(k,R){var $=k.key,ue=k.style,_e=k.styleSpec,Ae=k.value,Re=k.objectKey,Ze=_e[R+"_"+k.layerType];if(!Ze)return[];var lt=Re.match(/^(.*)-transition$/);if("paint"===R&&lt&&Ze[lt[1]]&&Ze[lt[1]].transition)return bn({key:$,value:Ae,valueSpec:_e.transition,style:ue,styleSpec:_e});var _t,At=k.valueSpec||Ze[Re];if(!At)return[new Ue($,Ae,'unknown property "'+Re+'"')];if("string"===oa(Ae)&&ds(At)&&!At.tokens&&(_t=/^{([^}]+)}$/.exec(Ae)))return[new Ue($,Ae,'"'+Re+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(_t[1])+" }`.")];var Wt=[];return"symbol"===k.layerType&&("text-field"===Re&&ue&&!ue.glyphs&&Wt.push(new Ue($,Ae,'use of "text-field" requires a style "glyphs" property')),"text-font"===Re&&We(gt(Ae))&&"identity"===Ke(Ae.type)&&Wt.push(new Ue($,Ae,'"text-font" does not support identity functions'))),Wt.concat(bn({key:k.key,value:Ae,valueSpec:At,style:ue,styleSpec:_e,expressionContext:"property",propertyType:R,propertyKey:Re}))}function ro(k){return Na(k,"paint")}function wo(k){return Na(k,"layout")}function Eo(k){var R=[],$=k.value,ue=k.key,_e=k.style,Ae=k.styleSpec;$.type||$.ref||R.push(new Ue(ue,$,'either "type" or "ref" is required'));var Re,Ze=Ke($.type),lt=Ke($.ref);if($.id)for(var _t=Ke($.id),At=0;At<k.arrayIndex;At++){var Wt=_e.layers[At];Ke(Wt.id)===_t&&R.push(new Ue(ue,$.id,'duplicate layer id "'+$.id+'", previously used at line '+Wt.id.__line__))}if("ref"in $)["type","source","source-layer","filter","layout"].forEach(function(_n){_n in $&&R.push(new Ue(ue,$[_n],'"'+_n+'" is prohibited for ref layers'))}),_e.layers.forEach(function(_n){Ke(_n.id)===lt&&(Re=_n)}),Re?Re.ref?R.push(new Ue(ue,$.ref,"ref cannot reference another ref layer")):Ze=Ke(Re.type):R.push(new Ue(ue,$.ref,'ref layer "'+lt+'" not found'));else if("background"!==Ze)if($.source){var on=_e.sources&&_e.sources[$.source],en=on&&Ke(on.type);on?"vector"===en&&"raster"===Ze?R.push(new Ue(ue,$.source,'layer "'+$.id+'" requires a raster source')):"raster"===en&&"raster"!==Ze?R.push(new Ue(ue,$.source,'layer "'+$.id+'" requires a vector source')):"vector"!==en||$["source-layer"]?"raster-dem"===en&&"hillshade"!==Ze?R.push(new Ue(ue,$.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ze||!$.paint||!$.paint["line-gradient"]||"geojson"===en&&on.lineMetrics||R.push(new Ue(ue,$,'layer "'+$.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):R.push(new Ue(ue,$,'layer "'+$.id+'" must specify a "source-layer"')):R.push(new Ue(ue,$.source,'source "'+$.source+'" not found'))}else R.push(new Ue(ue,$,'missing required property "source"'));return R=R.concat($n({key:ue,value:$,valueSpec:Ae.layer,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return bn({key:ue+".type",value:$.type,valueSpec:Ae.layer.type,style:k.style,styleSpec:k.styleSpec,object:$,objectKey:"type"})},filter:Aa,layout:function(_n){return $n({layer:$,key:_n.key,value:_n.value,style:_n.style,styleSpec:_n.styleSpec,objectElementValidators:{"*":function(Rn){return wo(rt({layerType:Ze},Rn))}}})},paint:function(_n){return $n({layer:$,key:_n.key,value:_n.value,style:_n.style,styleSpec:_n.styleSpec,objectElementValidators:{"*":function(Rn){return ro(rt({layerType:Ze},Rn))}}})}}}))}function Do(k){var R=k.value,$=k.key,ue=oa(R);return"string"!==ue?[new Ue($,R,"string expected, "+ue+" found")]:[]}var Xa={promoteId:function(k){var R=k.key,$=k.value;if("string"===oa($))return Do({key:R,value:$});var ue=[];for(var _e in $)ue.push.apply(ue,Do({key:R+"."+_e,value:$[_e]}));return ue}};function ea(k){var R=k.value,$=k.key,ue=k.styleSpec,_e=k.style;if(!R.type)return[new Ue($,R,'"type" is required')];var Ae,Re=Ke(R.type);switch(Re){case"vector":case"raster":case"raster-dem":return $n({key:$,value:R,valueSpec:ue["source_"+Re.replace("-","_")],style:k.style,styleSpec:ue,objectElementValidators:Xa});case"geojson":if(Ae=$n({key:$,value:R,valueSpec:ue.source_geojson,style:_e,styleSpec:ue,objectElementValidators:Xa}),R.cluster)for(var Ze in R.clusterProperties){var lt=R.clusterProperties[Ze],_t=lt[0],Wt="string"==typeof _t?[_t,["accumulated"],["get",Ze]]:_t;Ae.push.apply(Ae,Qr({key:$+"."+Ze+".map",value:lt[1],expressionContext:"cluster-map"})),Ae.push.apply(Ae,Qr({key:$+"."+Ze+".reduce",value:Wt,expressionContext:"cluster-reduce"}))}return Ae;case"video":return $n({key:$,value:R,valueSpec:ue.source_video,style:_e,styleSpec:ue});case"image":return $n({key:$,value:R,valueSpec:ue.source_image,style:_e,styleSpec:ue});case"canvas":return[new Ue($,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kr({key:$+".type",value:R.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_e,styleSpec:ue})}}function Tt(k){var R=k.value,$=k.styleSpec,ue=$.light,_e=k.style,Ae=[],Re=oa(R);if(void 0===R)return Ae;if("object"!==Re)return Ae.concat([new Ue("light",R,"object expected, "+Re+" found")]);for(var Ze in R){var lt=Ze.match(/^(.*)-transition$/);Ae=Ae.concat(lt&&ue[lt[1]]&&ue[lt[1]].transition?bn({key:Ze,value:R[Ze],valueSpec:$.transition,style:_e,styleSpec:$}):ue[Ze]?bn({key:Ze,value:R[Ze],valueSpec:ue[Ze],style:_e,styleSpec:$}):[new Ue(Ze,R[Ze],'unknown property "'+Ze+'"')])}return Ae}var Gt={"*":function(){return[]},array:wr,boolean:function(k){var R=k.value,$=k.key,ue=oa(R);return"boolean"!==ue?[new Ue($,R,"boolean expected, "+ue+" found")]:[]},number:Lr,color:function(k){var R=k.key,$=k.value,ue=oa($);return"string"!==ue?[new Ue(R,$,"color expected, "+ue+" found")]:null===Tn($)?[new Ue(R,$,'color expected, "'+$+'" found')]:[]},constants:Qe,enum:Kr,filter:Aa,function:Zr,layer:Eo,object:$n,source:ea,light:Tt,string:Do,formatted:function(k){return 0===Do(k).length?[]:Qr(k)},resolvedImage:function(k){return 0===Do(k).length?[]:Qr(k)}};function bn(k){var R=k.value,$=k.valueSpec,ue=k.styleSpec;return $.expression&&We(Ke(R))?Zr(k):$.expression&&un(gt(R))?Qr(k):$.type&&Gt[$.type]?Gt[$.type](k):$n(rt({},k,{valueSpec:$.type?ue[$.type]:$}))}function Qt(k){var R=k.value,$=k.key,ue=Do(k);return ue.length||(-1===R.indexOf("{fontstack}")&&ue.push(new Ue($,R,'"glyphs" url must include a "{fontstack}" token')),-1===R.indexOf("{range}")&&ue.push(new Ue($,R,'"glyphs" url must include a "{range}" token'))),ue}function wn(k,R){void 0===R&&(R=Ce);var $=[];return $=$.concat(bn({key:"",value:k,valueSpec:R.$root,styleSpec:R,style:k,objectElementValidators:{glyphs:Qt,"*":function(){return[]}}})),k.constants&&($=$.concat(Qe({key:"constants",value:k.constants,style:k,styleSpec:R}))),qn($)}function qn(k){return[].concat(k).sort(function(R,$){return R.line-$.line})}function tr(k){return function(){for(var R=[],$=arguments.length;$--;)R[$]=arguments[$];return qn(k.apply(this,R))}}wn.source=tr(ea),wn.light=tr(Tt),wn.layer=tr(Eo),wn.filter=tr(Aa),wn.paintProperty=tr(ro),wn.layoutProperty=tr(wo);var pr=wn,Ar=pr.light,br=pr.paintProperty,Sr=pr.layoutProperty;function Vr(k,R){var $=!1;if(R&&R.length)for(var ue=0,_e=R;ue<_e.length;ue+=1)k.fire(new nt(new Error(_e[ue].message))),$=!0;return $}var Mr=Ur;function Ur(k,R,$){var ue=this.cells=[];if(k instanceof ArrayBuffer){this.arrayBuffer=k;var _e=new Int32Array(this.arrayBuffer);k=_e[0],this.d=(R=_e[1])+2*($=_e[2]);for(var Ae=0;Ae<this.d*this.d;Ae++){var Re=_e[3+Ae],Ze=_e[3+Ae+1];ue.push(Re===Ze?null:_e.subarray(Re,Ze))}var _t=_e[3+ue.length+1];this.keys=_e.subarray(_e[3+ue.length],_t),this.bboxes=_e.subarray(_t),this.insert=this._insertReadonly}else{this.d=R+2*$;for(var At=0;At<this.d*this.d;At++)ue.push([]);this.keys=[],this.bboxes=[]}this.n=R,this.extent=k,this.padding=$,this.scale=R/k,this.uid=0;var Wt=$/R*k;this.min=-Wt,this.max=k+Wt}Ur.prototype.insert=function(k,R,$,ue,_e){this._forEachCell(R,$,ue,_e,this._insertCell,this.uid++),this.keys.push(k),this.bboxes.push(R),this.bboxes.push($),this.bboxes.push(ue),this.bboxes.push(_e)},Ur.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ur.prototype._insertCell=function(k,R,$,ue,_e,Ae){this.cells[_e].push(Ae)},Ur.prototype.query=function(k,R,$,ue,_e){var Ae=this.min,Re=this.max;if(k<=Ae&&R<=Ae&&Re<=$&&Re<=ue&&!_e)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(k,R,$,ue,this._queryCell,Ze,{},_e),Ze},Ur.prototype._queryCell=function(k,R,$,ue,_e,Ae,Re,Ze){var lt=this.cells[_e];if(null!==lt)for(var _t=this.keys,At=this.bboxes,Wt=0;Wt<lt.length;Wt++){var on=lt[Wt];if(void 0===Re[on]){var en=4*on;(Ze?Ze(At[en+0],At[en+1],At[en+2],At[en+3]):k<=At[en+2]&&R<=At[en+3]&&$>=At[en+0]&&ue>=At[en+1])?(Re[on]=!0,Ae.push(_t[on])):Re[on]=!1}}},Ur.prototype._forEachCell=function(k,R,$,ue,_e,Ae,Re,Ze){for(var lt=this._convertToCellCoord(k),_t=this._convertToCellCoord(R),At=this._convertToCellCoord($),Wt=this._convertToCellCoord(ue),on=lt;on<=At;on++)for(var en=_t;en<=Wt;en++){var _n=this.d*en+on;if((!Ze||Ze(this._convertFromCellCoord(on),this._convertFromCellCoord(en),this._convertFromCellCoord(on+1),this._convertFromCellCoord(en+1)))&&_e.call(this,k,R,$,ue,_n,Ae,Re,Ze))return}},Ur.prototype._convertFromCellCoord=function(k){return(k-this.padding)/this.scale},Ur.prototype._convertToCellCoord=function(k){return Math.max(0,Math.min(this.d-1,Math.floor(k*this.scale)+this.padding))},Ur.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var k=this.cells,R=3+this.cells.length+1+1,$=0,ue=0;ue<this.cells.length;ue++)$+=this.cells[ue].length;var _e=new Int32Array(R+$+this.keys.length+this.bboxes.length);_e[0]=this.extent,_e[1]=this.n,_e[2]=this.padding;for(var Ae=R,Re=0;Re<k.length;Re++){var Ze=k[Re];_e[3+Re]=Ae,_e.set(Ze,Ae),Ae+=Ze.length}return _e[3+k.length]=Ae,_e.set(this.keys,Ae),_e[3+k.length+1]=Ae+=this.keys.length,_e.set(this.bboxes,Ae),Ae+=this.bboxes.length,_e.buffer};var ei=self.ImageData,ai=self.ImageBitmap,yi={};function fr(k,R,$){void 0===$&&($={}),Object.defineProperty(R,"_classRegistryKey",{value:k,writeable:!1}),yi[k]={klass:R,omit:$.omit||[],shallow:$.shallow||[]}}for(var gi in fr("Object",Object),Mr.serialize=function(k,R){var $=k.toArrayBuffer();return R&&R.push($),{buffer:$}},Mr.deserialize=function(k){return new Mr(k.buffer)},fr("Grid",Mr),fr("Color",sn),fr("Error",Error),fr("ResolvedImage",En),fr("StylePropertyFunction",Fn),fr("StyleExpression",ln,{omit:["_evaluator"]}),fr("ZoomDependentExpression",Dn),fr("ZoomConstantExpression",vn),fr("CompoundExpression",ar,{omit:["_evaluate"]}),rs)rs[gi]._classRegistryKey||fr("Expression_"+gi,rs[gi]);function Je(k){return k&&typeof ArrayBuffer<"u"&&(k instanceof ArrayBuffer||k.constructor&&"ArrayBuffer"===k.constructor.name)}function at(k){return ai&&k instanceof ai}function Bt(k,R){if(null==k||"boolean"==typeof k||"number"==typeof k||"string"==typeof k||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp)return k;if(Je(k)||at(k))return R&&R.push(k),k;if(ArrayBuffer.isView(k)){var $=k;return R&&R.push($.buffer),$}if(k instanceof ei)return R&&R.push(k.data.buffer),k;if(Array.isArray(k)){for(var ue=[],_e=0,Ae=k;_e<Ae.length;_e+=1)ue.push(Bt(Ae[_e],R));return ue}if("object"==typeof k){var Ze=k.constructor,lt=Ze._classRegistryKey;if(!lt)throw new Error("can't serialize object of unregistered class");var _t=Ze.serialize?Ze.serialize(k,R):{};if(!Ze.serialize){for(var At in k)if(k.hasOwnProperty(At)&&!(yi[lt].omit.indexOf(At)>=0)){var Wt=k[At];_t[At]=yi[lt].shallow.indexOf(At)>=0?Wt:Bt(Wt,R)}k instanceof Error&&(_t.message=k.message)}if(_t.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==lt&&(_t.$name=lt),_t}throw new Error("can't serialize object of type "+typeof k)}function Cn(k){if(null==k||"boolean"==typeof k||"number"==typeof k||"string"==typeof k||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp||Je(k)||at(k)||ArrayBuffer.isView(k)||k instanceof ei)return k;if(Array.isArray(k))return k.map(Cn);if("object"==typeof k){var R=k.$name||"Object",$=yi[R].klass;if(!$)throw new Error("can't deserialize unregistered class "+R);if($.deserialize)return $.deserialize(k);for(var ue=Object.create($.prototype),_e=0,Ae=Object.keys(k);_e<Ae.length;_e+=1){var Re=Ae[_e];if("$name"!==Re){var Ze=k[Re];ue[Re]=yi[R].shallow.indexOf(Re)>=0?Ze:Cn(Ze)}}return ue}throw new Error("can't deserialize object of type "+typeof k)}var dr=function(){this.first=!0};dr.prototype.update=function(k,R){var $=Math.floor(k);return this.first?(this.first=!1,this.lastIntegerZoom=$,this.lastIntegerZoomTime=0,this.lastZoom=k,this.lastFloorZoom=$,!0):(this.lastFloorZoom>$?(this.lastIntegerZoom=$+1,this.lastIntegerZoomTime=R):this.lastFloorZoom<$&&(this.lastIntegerZoom=$,this.lastIntegerZoomTime=R),k!==this.lastZoom&&(this.lastZoom=k,this.lastFloorZoom=$,!0))};var cr={"Latin-1 Supplement":function(k){return k>=128&&k<=255},Arabic:function(k){return k>=1536&&k<=1791},"Arabic Supplement":function(k){return k>=1872&&k<=1919},"Arabic Extended-A":function(k){return k>=2208&&k<=2303},"Hangul Jamo":function(k){return k>=4352&&k<=4607},"Unified Canadian Aboriginal Syllabics":function(k){return k>=5120&&k<=5759},Khmer:function(k){return k>=6016&&k<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(k){return k>=6320&&k<=6399},"General Punctuation":function(k){return k>=8192&&k<=8303},"Letterlike Symbols":function(k){return k>=8448&&k<=8527},"Number Forms":function(k){return k>=8528&&k<=8591},"Miscellaneous Technical":function(k){return k>=8960&&k<=9215},"Control Pictures":function(k){return k>=9216&&k<=9279},"Optical Character Recognition":function(k){return k>=9280&&k<=9311},"Enclosed Alphanumerics":function(k){return k>=9312&&k<=9471},"Geometric Shapes":function(k){return k>=9632&&k<=9727},"Miscellaneous Symbols":function(k){return k>=9728&&k<=9983},"Miscellaneous Symbols and Arrows":function(k){return k>=11008&&k<=11263},"CJK Radicals Supplement":function(k){return k>=11904&&k<=12031},"Kangxi Radicals":function(k){return k>=12032&&k<=12255},"Ideographic Description Characters":function(k){return k>=12272&&k<=12287},"CJK Symbols and Punctuation":function(k){return k>=12288&&k<=12351},Hiragana:function(k){return k>=12352&&k<=12447},Katakana:function(k){return k>=12448&&k<=12543},Bopomofo:function(k){return k>=12544&&k<=12591},"Hangul Compatibility Jamo":function(k){return k>=12592&&k<=12687},Kanbun:function(k){return k>=12688&&k<=12703},"Bopomofo Extended":function(k){return k>=12704&&k<=12735},"CJK Strokes":function(k){return k>=12736&&k<=12783},"Katakana Phonetic Extensions":function(k){return k>=12784&&k<=12799},"Enclosed CJK Letters and Months":function(k){return k>=12800&&k<=13055},"CJK Compatibility":function(k){return k>=13056&&k<=13311},"CJK Unified Ideographs Extension A":function(k){return k>=13312&&k<=19903},"Yijing Hexagram Symbols":function(k){return k>=19904&&k<=19967},"CJK Unified Ideographs":function(k){return k>=19968&&k<=40959},"Yi Syllables":function(k){return k>=40960&&k<=42127},"Yi Radicals":function(k){return k>=42128&&k<=42191},"Hangul Jamo Extended-A":function(k){return k>=43360&&k<=43391},"Hangul Syllables":function(k){return k>=44032&&k<=55215},"Hangul Jamo Extended-B":function(k){return k>=55216&&k<=55295},"Private Use Area":function(k){return k>=57344&&k<=63743},"CJK Compatibility Ideographs":function(k){return k>=63744&&k<=64255},"Arabic Presentation Forms-A":function(k){return k>=64336&&k<=65023},"Vertical Forms":function(k){return k>=65040&&k<=65055},"CJK Compatibility Forms":function(k){return k>=65072&&k<=65103},"Small Form Variants":function(k){return k>=65104&&k<=65135},"Arabic Presentation Forms-B":function(k){return k>=65136&&k<=65279},"Halfwidth and Fullwidth Forms":function(k){return k>=65280&&k<=65519}};function ki(k){for(var R=0,$=k;R<$.length;R+=1)if(_i($[R].charCodeAt(0)))return!0;return!1}function Di(k){return!(cr.Arabic(k)||cr["Arabic Supplement"](k)||cr["Arabic Extended-A"](k)||cr["Arabic Presentation Forms-A"](k)||cr["Arabic Presentation Forms-B"](k))}function _i(k){return!(746!==k&&747!==k&&(k<4352||!(cr["Bopomofo Extended"](k)||cr.Bopomofo(k)||cr["CJK Compatibility Forms"](k)&&!(k>=65097&&k<=65103)||cr["CJK Compatibility Ideographs"](k)||cr["CJK Compatibility"](k)||cr["CJK Radicals Supplement"](k)||cr["CJK Strokes"](k)||!(!cr["CJK Symbols and Punctuation"](k)||k>=12296&&k<=12305||k>=12308&&k<=12319||12336===k)||cr["CJK Unified Ideographs Extension A"](k)||cr["CJK Unified Ideographs"](k)||cr["Enclosed CJK Letters and Months"](k)||cr["Hangul Compatibility Jamo"](k)||cr["Hangul Jamo Extended-A"](k)||cr["Hangul Jamo Extended-B"](k)||cr["Hangul Jamo"](k)||cr["Hangul Syllables"](k)||cr.Hiragana(k)||cr["Ideographic Description Characters"](k)||cr.Kanbun(k)||cr["Kangxi Radicals"](k)||cr["Katakana Phonetic Extensions"](k)||cr.Katakana(k)&&12540!==k||!(!cr["Halfwidth and Fullwidth Forms"](k)||65288===k||65289===k||65293===k||k>=65306&&k<=65310||65339===k||65341===k||65343===k||k>=65371&&k<=65503||65507===k||k>=65512&&k<=65519)||!(!cr["Small Form Variants"](k)||k>=65112&&k<=65118||k>=65123&&k<=65126)||cr["Unified Canadian Aboriginal Syllabics"](k)||cr["Unified Canadian Aboriginal Syllabics Extended"](k)||cr["Vertical Forms"](k)||cr["Yijing Hexagram Symbols"](k)||cr["Yi Syllables"](k)||cr["Yi Radicals"](k))))}function $i(k){return!(_i(k)||(R=k,cr["Latin-1 Supplement"](R)&&(167===R||169===R||174===R||177===R||188===R||189===R||190===R||215===R||247===R)||cr["General Punctuation"](R)&&(8214===R||8224===R||8225===R||8240===R||8241===R||8251===R||8252===R||8258===R||8263===R||8264===R||8265===R||8273===R)||cr["Letterlike Symbols"](R)||cr["Number Forms"](R)||cr["Miscellaneous Technical"](R)&&(R>=8960&&R<=8967||R>=8972&&R<=8991||R>=8996&&R<=9e3||9003===R||R>=9085&&R<=9114||R>=9150&&R<=9165||9167===R||R>=9169&&R<=9179||R>=9186&&R<=9215)||cr["Control Pictures"](R)&&9251!==R||cr["Optical Character Recognition"](R)||cr["Enclosed Alphanumerics"](R)||cr["Geometric Shapes"](R)||cr["Miscellaneous Symbols"](R)&&!(R>=9754&&R<=9759)||cr["Miscellaneous Symbols and Arrows"](R)&&(R>=11026&&R<=11055||R>=11088&&R<=11097||R>=11192&&R<=11243)||cr["CJK Symbols and Punctuation"](R)||cr.Katakana(R)||cr["Private Use Area"](R)||cr["CJK Compatibility Forms"](R)||cr["Small Form Variants"](R)||cr["Halfwidth and Fullwidth Forms"](R)||8734===R||8756===R||8757===R||R>=9984&&R<=10087||R>=10102&&R<=10131||65532===R||65533===R));var R}function Bi(k){return k>=1424&&k<=2303||cr["Arabic Presentation Forms-A"](k)||cr["Arabic Presentation Forms-B"](k)}function Ta(k,R){return!(!R&&Bi(k)||k>=2304&&k<=3583||k>=3840&&k<=4255||cr.Khmer(k))}function xi(k){for(var R=0,$=k;R<$.length;R+=1)if(Bi($[R].charCodeAt(0)))return!0;return!1}var _a="deferred",$a="loading",Ps="loaded",ca=null,Fi="unavailable",Ja=null,is=function(k){k&&"string"==typeof k&&k.indexOf("NetworkError")>-1&&(Fi="error"),ca&&ca(k)};function ba(){io.fire(new Xe("pluginStateChange",{pluginStatus:Fi,pluginURL:Ja}))}var io=new ye,Mo=function(){return Fi},Ca=function(){if(Fi!==_a||!Ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fi=$a,ba(),Ja&&Ct({url:Ja},function(k){k?is(k):(Fi=Ps,ba())})},Uo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Fi===Ps||null!=Uo.applyArabicShaping},isLoading:function(){return Fi===$a},setState:function(k){Fi=k.pluginStatus,Ja=k.pluginURL},isParsed:function(){return null!=Uo.applyArabicShaping&&null!=Uo.processBidirectionalText&&null!=Uo.processStyledBidirectionalText},getPluginURL:function(){return Ja}},Sa=function(k,R){this.zoom=k,R?(this.now=R.now,this.fadeDuration=R.fadeDuration,this.zoomHistory=R.zoomHistory,this.transition=R.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dr,this.transition={})};Sa.prototype.isSupportedScript=function(k){return function(R,$){for(var ue=0,_e=R;ue<_e.length;ue+=1)if(!Ta(_e[ue].charCodeAt(0),$))return!1;return!0}(k,Uo.isLoaded())},Sa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sa.prototype.getCrossfadeParameters=function(){var k=this.zoom,R=k-Math.floor(k),$=this.crossFadingFactor();return k>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:R+(1-R)*$}:{fromScale:.5,toScale:1,t:1-(1-$)*R}};var Ho=function(k,R){this.property=k,this.value=R,this.expression=function($,ue){if(We($))return new Fn($,ue);if(un($)){var _e=Nn($,ue);if("error"===_e.result)throw new Error(_e.value.map(function(Re){return Re.key+": "+Re.message}).join(", "));return _e.value}var Ae=$;return"string"==typeof $&&"color"===ue.type&&(Ae=sn.parse($)),{kind:"constant",evaluate:function(){return Ae}}}(void 0===R?k.specification.default:R,k.specification)};Ho.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ho.prototype.possiblyEvaluate=function(k,R,$){return this.property.possiblyEvaluate(this,k,R,$)};var el=function(k){this.property=k,this.value=new Ho(k,void 0)};el.prototype.transitioned=function(k,R){return new Cl(this.property,this.value,R,s({},k.transition,this.transition),k.now)},el.prototype.untransitioned=function(){return new Cl(this.property,this.value,null,{},0)};var Ws=function(k){this._properties=k,this._values=Object.create(k.defaultTransitionablePropertyValues)};Ws.prototype.getValue=function(k){return M(this._values[k].value.value)},Ws.prototype.setValue=function(k,R){this._values.hasOwnProperty(k)||(this._values[k]=new el(this._values[k].property)),this._values[k].value=new Ho(this._values[k].property,null===R?void 0:M(R))},Ws.prototype.getTransition=function(k){return M(this._values[k].transition)},Ws.prototype.setTransition=function(k,R){this._values.hasOwnProperty(k)||(this._values[k]=new el(this._values[k].property)),this._values[k].transition=M(R)||void 0},Ws.prototype.serialize=function(){for(var k={},R=0,$=Object.keys(this._values);R<$.length;R+=1){var ue=$[R],_e=this.getValue(ue);void 0!==_e&&(k[ue]=_e);var Ae=this.getTransition(ue);void 0!==Ae&&(k[ue+"-transition"]=Ae)}return k},Ws.prototype.transitioned=function(k,R){for(var $=new vo(this._properties),ue=0,_e=Object.keys(this._values);ue<_e.length;ue+=1){var Ae=_e[ue];$._values[Ae]=this._values[Ae].transitioned(k,R._values[Ae])}return $},Ws.prototype.untransitioned=function(){for(var k=new vo(this._properties),R=0,$=Object.keys(this._values);R<$.length;R+=1){var ue=$[R];k._values[ue]=this._values[ue].untransitioned()}return k};var Cl=function(k,R,$,ue,_e){this.property=k,this.value=R,this.begin=_e+ue.delay||0,this.end=this.begin+ue.duration||0,k.specification.transition&&(ue.delay||ue.duration)&&(this.prior=$)};Cl.prototype.possiblyEvaluate=function(k,R,$){var ue=k.now||0,_e=this.value.possiblyEvaluate(k,R,$),Ae=this.prior;if(Ae){if(ue>this.end)return this.prior=null,_e;if(this.value.isDataDriven())return this.prior=null,_e;if(ue<this.begin)return Ae.possiblyEvaluate(k,R,$);var Re=(ue-this.begin)/(this.end-this.begin);return this.property.interpolate(Ae.possiblyEvaluate(k,R,$),_e,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var lt=Ze*Ze,_t=lt*Ze;return 4*(Ze<.5?_t:3*(Ze-lt)+_t-.75)}(Re))}return _e};var vo=function(k){this._properties=k,this._values=Object.create(k.defaultTransitioningPropertyValues)};vo.prototype.possiblyEvaluate=function(k,R,$){for(var ue=new Xs(this._properties),_e=0,Ae=Object.keys(this._values);_e<Ae.length;_e+=1){var Re=Ae[_e];ue._values[Re]=this._values[Re].possiblyEvaluate(k,R,$)}return ue},vo.prototype.hasTransition=function(){for(var k=0,R=Object.keys(this._values);k<R.length;k+=1)if(this._values[R[k]].prior)return!0;return!1};var Rl=function(k){this._properties=k,this._values=Object.create(k.defaultPropertyValues)};Rl.prototype.getValue=function(k){return M(this._values[k].value)},Rl.prototype.setValue=function(k,R){this._values[k]=new Ho(this._values[k].property,null===R?void 0:M(R))},Rl.prototype.serialize=function(){for(var k={},R=0,$=Object.keys(this._values);R<$.length;R+=1){var ue=$[R],_e=this.getValue(ue);void 0!==_e&&(k[ue]=_e)}return k},Rl.prototype.possiblyEvaluate=function(k,R,$){for(var ue=new Xs(this._properties),_e=0,Ae=Object.keys(this._values);_e<Ae.length;_e+=1){var Re=Ae[_e];ue._values[Re]=this._values[Re].possiblyEvaluate(k,R,$)}return ue};var yo=function(k,R,$){this.property=k,this.value=R,this.parameters=$};yo.prototype.isConstant=function(){return"constant"===this.value.kind},yo.prototype.constantOr=function(k){return"constant"===this.value.kind?this.value.value:k},yo.prototype.evaluate=function(k,R,$,ue){return this.property.evaluate(this.value,this.parameters,k,R,$,ue)};var Xs=function(k){this._properties=k,this._values=Object.create(k.defaultPossiblyEvaluatedValues)};Xs.prototype.get=function(k){return this._values[k]};var Si=function(k){this.specification=k};Si.prototype.possiblyEvaluate=function(k,R){return k.expression.evaluate(R)},Si.prototype.interpolate=function(k,R,$){var ue=qr[this.specification.type];return ue?ue(k,R,$):k};var ji=function(k,R){this.specification=k,this.overrides=R};ji.prototype.possiblyEvaluate=function(k,R,$,ue){return new yo(this,"constant"===k.expression.kind||"camera"===k.expression.kind?{kind:"constant",value:k.expression.evaluate(R,null,{},$,ue)}:k.expression,R)},ji.prototype.interpolate=function(k,R,$){if("constant"!==k.value.kind||"constant"!==R.value.kind)return k;if(void 0===k.value.value||void 0===R.value.value)return new yo(this,{kind:"constant",value:void 0},k.parameters);var ue=qr[this.specification.type];return ue?new yo(this,{kind:"constant",value:ue(k.value.value,R.value.value,$)},k.parameters):k},ji.prototype.evaluate=function(k,R,$,ue,_e,Ae){return"constant"===k.kind?k.value:k.evaluate(R,$,ue,_e,Ae)};var Nl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.possiblyEvaluate=function($,ue,_e,Ae){if(void 0===$.value)return new yo(this,{kind:"constant",value:void 0},ue);if("constant"===$.expression.kind){var Re=$.expression.evaluate(ue,null,{},_e,Ae),Ze="resolvedImage"===$.property.specification.type&&"string"!=typeof Re?Re.name:Re,lt=this._calculate(Ze,Ze,Ze,ue);return new yo(this,{kind:"constant",value:lt},ue)}if("camera"===$.expression.kind){var _t=this._calculate($.expression.evaluate({zoom:ue.zoom-1}),$.expression.evaluate({zoom:ue.zoom}),$.expression.evaluate({zoom:ue.zoom+1}),ue);return new yo(this,{kind:"constant",value:_t},ue)}return new yo(this,$.expression,ue)},R.prototype.evaluate=function($,ue,_e,Ae,Re,Ze){if("source"===$.kind){var lt=$.evaluate(ue,_e,Ae,Re,Ze);return this._calculate(lt,lt,lt,ue)}return"composite"===$.kind?this._calculate($.evaluate({zoom:Math.floor(ue.zoom)-1},_e,Ae),$.evaluate({zoom:Math.floor(ue.zoom)},_e,Ae),$.evaluate({zoom:Math.floor(ue.zoom)+1},_e,Ae),ue):$.value},R.prototype._calculate=function($,ue,_e,Ae){return Ae.zoom>Ae.zoomHistory.lastIntegerZoom?{from:$,to:ue}:{from:_e,to:ue}},R.prototype.interpolate=function($){return $},R}(ji),Fl=function(k){this.specification=k};Fl.prototype.possiblyEvaluate=function(k,R,$,ue){if(void 0!==k.value){if("constant"===k.expression.kind){var _e=k.expression.evaluate(R,null,{},$,ue);return this._calculate(_e,_e,_e,R)}return this._calculate(k.expression.evaluate(new Sa(Math.floor(R.zoom-1),R)),k.expression.evaluate(new Sa(Math.floor(R.zoom),R)),k.expression.evaluate(new Sa(Math.floor(R.zoom+1),R)),R)}},Fl.prototype._calculate=function(k,R,$,ue){return ue.zoom>ue.zoomHistory.lastIntegerZoom?{from:k,to:R}:{from:$,to:R}},Fl.prototype.interpolate=function(k){return k};var $s=function(k){this.specification=k};$s.prototype.possiblyEvaluate=function(k,R,$,ue){return!!k.expression.evaluate(R,null,{},$,ue)},$s.prototype.interpolate=function(){return!1};var hs=function(k){for(var R in this.properties=k,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],k){var $=k[R];$.specification.overridable&&this.overridableProperties.push(R);var ue=this.defaultPropertyValues[R]=new Ho($,void 0),_e=this.defaultTransitionablePropertyValues[R]=new el($);this.defaultTransitioningPropertyValues[R]=_e.untransitioned(),this.defaultPossiblyEvaluatedValues[R]=ue.possiblyEvaluate({})}};fr("DataDrivenProperty",ji),fr("DataConstantProperty",Si),fr("CrossFadedDataDrivenProperty",Nl),fr("CrossFadedProperty",Fl),fr("ColorRampProperty",$s);var Rs=function(k){function R($,ue){if(k.call(this),this.id=$.id,this.type=$.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==$.type&&(this.metadata=$.metadata,this.minzoom=$.minzoom,this.maxzoom=$.maxzoom,"background"!==$.type&&(this.source=$.source,this.sourceLayer=$["source-layer"],this.filter=$.filter),ue.layout&&(this._unevaluatedLayout=new Rl(ue.layout)),ue.paint)){for(var _e in this._transitionablePaint=new Ws(ue.paint),$.paint)this.setPaintProperty(_e,$.paint[_e],{validate:!1});for(var Ae in $.layout)this.setLayoutProperty(Ae,$.layout[Ae],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xs(ue.paint)}}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},R.prototype.getLayoutProperty=function($){return"visibility"===$?this.visibility:this._unevaluatedLayout.getValue($)},R.prototype.setLayoutProperty=function($,ue,_e){void 0===_e&&(_e={}),null!=ue&&this._validate(Sr,"layers."+this.id+".layout."+$,$,ue,_e)||("visibility"!==$?this._unevaluatedLayout.setValue($,ue):this.visibility=ue)},R.prototype.getPaintProperty=function($){return T($,"-transition")?this._transitionablePaint.getTransition($.slice(0,-11)):this._transitionablePaint.getValue($)},R.prototype.setPaintProperty=function($,ue,_e){if(void 0===_e&&(_e={}),null!=ue&&this._validate(br,"layers."+this.id+".paint."+$,$,ue,_e))return!1;if(T($,"-transition"))return this._transitionablePaint.setTransition($.slice(0,-11),ue||void 0),!1;var Re=this._transitionablePaint._values[$],Ze="cross-faded-data-driven"===Re.property.specification["property-type"],lt=Re.value.isDataDriven(),_t=Re.value;this._transitionablePaint.setValue($,ue),this._handleSpecialPaintPropertyUpdate($);var At=this._transitionablePaint._values[$].value;return At.isDataDriven()||lt||Ze||this._handleOverridablePaintPropertyUpdate($,_t,At)},R.prototype._handleSpecialPaintPropertyUpdate=function($){},R.prototype._handleOverridablePaintPropertyUpdate=function($,ue,_e){return!1},R.prototype.isHidden=function($){return!!(this.minzoom&&$<this.minzoom)||!!(this.maxzoom&&$>=this.maxzoom)||"none"===this.visibility},R.prototype.updateTransitions=function($){this._transitioningPaint=this._transitionablePaint.transitioned($,this._transitioningPaint)},R.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},R.prototype.recalculate=function($,ue){$.getCrossfadeParameters&&(this._crossfadeParameters=$.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate($,void 0,ue)),this.paint=this._transitioningPaint.possiblyEvaluate($,void 0,ue)},R.prototype.serialize=function(){var $={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&($.layout=$.layout||{},$.layout.visibility=this.visibility),w($,function(ue,_e){return!(void 0===ue||"layout"===_e&&!Object.keys(ue).length||"paint"===_e&&!Object.keys(ue).length)})},R.prototype._validate=function($,ue,_e,Ae,Re){return void 0===Re&&(Re={}),(!Re||!1!==Re.validate)&&Vr(this,$.call(pr,{key:ue,layerType:this.type,objectKey:_e,value:Ae,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))},R.prototype.is3D=function(){return!1},R.prototype.isTileClipped=function(){return!1},R.prototype.hasOffscreenPass=function(){return!1},R.prototype.resize=function(){},R.prototype.isStateDependent=function(){for(var $ in this.paint._values){var ue=this.paint.get($);if(ue instanceof yo&&ds(ue.property.specification)&&("source"===ue.value.kind||"composite"===ue.value.kind)&&ue.value.isStateDependent)return!0}return!1},R}(ye),dc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Sl=function(k,R){this._structArray=k,this._pos1=R*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},xa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ea(k,R){void 0===R&&(R=1);var $=0,ue=0;return{members:k.map(function(_e){var Re=dc[_e.type].BYTES_PER_ELEMENT,Ze=$=ul($,Math.max(R,Re)),lt=_e.components||1;return ue=Math.max(ue,Re),$+=Re*lt,{name:_e.name,type:_e.type,components:lt,offset:Ze}}),size:ul($,Math.max(ue,R)),alignment:R}}function ul(k,R){return Math.ceil(k/R)*R}xa.serialize=function(k,R){return k._trim(),R&&(k.isTransferred=!0,R.push(k.arrayBuffer)),{length:k.length,arrayBuffer:k.arrayBuffer}},xa.deserialize=function(k){var R=Object.create(this.prototype);return R.arrayBuffer=k.arrayBuffer,R.length=k.length,R.capacity=k.arrayBuffer.byteLength/R.bytesPerElement,R._refreshViews(),R},xa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},xa.prototype.clear=function(){this.length=0},xa.prototype.resize=function(k){this.reserve(k),this.length=k},xa.prototype.reserve=function(k){if(k>this.capacity){this.capacity=Math.max(k,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var R=this.uint8;this._refreshViews(),R&&this.uint8.set(R)}},xa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var tl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue){var _e=this.length;return this.resize(_e+1),this.emplace(_e,$,ue)},R.prototype.emplace=function($,ue,_e){var Ae=2*$;return this.int16[Ae+0]=ue,this.int16[Ae+1]=_e,$},R}(xa);tl.prototype.bytesPerElement=4,fr("StructArrayLayout2i4",tl);var co=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae){var Re=this.length;return this.resize(Re+1),this.emplace(Re,$,ue,_e,Ae)},R.prototype.emplace=function($,ue,_e,Ae,Re){var Ze=4*$;return this.int16[Ze+0]=ue,this.int16[Ze+1]=_e,this.int16[Ze+2]=Ae,this.int16[Ze+3]=Re,$},R}(xa);co.prototype.bytesPerElement=8,fr("StructArrayLayout4i8",co);var fl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,$,ue,_e,Ae,Re,Ze)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt){var _t=6*$;return this.int16[_t+0]=ue,this.int16[_t+1]=_e,this.int16[_t+2]=Ae,this.int16[_t+3]=Re,this.int16[_t+4]=Ze,this.int16[_t+5]=lt,$},R}(xa);fl.prototype.bytesPerElement=12,fr("StructArrayLayout2i4i12",fl);var El=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,$,ue,_e,Ae,Re,Ze)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt){var _t=4*$,At=8*$;return this.int16[_t+0]=ue,this.int16[_t+1]=_e,this.uint8[At+4]=Ae,this.uint8[At+5]=Re,this.uint8[At+6]=Ze,this.uint8[At+7]=lt,$},R}(xa);El.prototype.bytesPerElement=8,fr("StructArrayLayout2i4ub8",El);var xl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt){var on=this.length;return this.resize(on+1),this.emplace(on,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on){var en=9*$,_n=18*$;return this.uint16[en+0]=ue,this.uint16[en+1]=_e,this.uint16[en+2]=Ae,this.uint16[en+3]=Re,this.uint16[en+4]=Ze,this.uint16[en+5]=lt,this.uint16[en+6]=_t,this.uint16[en+7]=At,this.uint8[_n+16]=Wt,this.uint8[_n+17]=on,$},R}(xa);xl.prototype.bytesPerElement=18,fr("StructArrayLayout8ui2ub18",xl);var Dl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en){var _n=this.length;return this.resize(_n+1),this.emplace(_n,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n){var Rn=12*$;return this.int16[Rn+0]=ue,this.int16[Rn+1]=_e,this.int16[Rn+2]=Ae,this.int16[Rn+3]=Re,this.uint16[Rn+4]=Ze,this.uint16[Rn+5]=lt,this.uint16[Rn+6]=_t,this.uint16[Rn+7]=At,this.int16[Rn+8]=Wt,this.int16[Rn+9]=on,this.int16[Rn+10]=en,this.int16[Rn+11]=_n,$},R}(xa);Dl.prototype.bytesPerElement=24,fr("StructArrayLayout4i4ui4i24",Dl);var nl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,$,ue,_e)},R.prototype.emplace=function($,ue,_e,Ae){var Re=3*$;return this.float32[Re+0]=ue,this.float32[Re+1]=_e,this.float32[Re+2]=Ae,$},R}(xa);nl.prototype.bytesPerElement=12,fr("StructArrayLayout3f12",nl);var hc=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($){var ue=this.length;return this.resize(ue+1),this.emplace(ue,$)},R.prototype.emplace=function($,ue){return this.uint32[1*$+0]=ue,$},R}(xa);hc.prototype.bytesPerElement=4,fr("StructArrayLayout1ul4",hc);var Ic=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze,lt,_t,At){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,$,ue,_e,Ae,Re,Ze,lt,_t,At)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt){var on=10*$,en=5*$;return this.int16[on+0]=ue,this.int16[on+1]=_e,this.int16[on+2]=Ae,this.int16[on+3]=Re,this.int16[on+4]=Ze,this.int16[on+5]=lt,this.uint32[en+3]=_t,this.uint16[on+8]=At,this.uint16[on+9]=Wt,$},R}(xa);Ic.prototype.bytesPerElement=20,fr("StructArrayLayout6i1ul2ui20",Ic);var dl=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze){var lt=this.length;return this.resize(lt+1),this.emplace(lt,$,ue,_e,Ae,Re,Ze)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt){var _t=6*$;return this.int16[_t+0]=ue,this.int16[_t+1]=_e,this.int16[_t+2]=Ae,this.int16[_t+3]=Re,this.int16[_t+4]=Ze,this.int16[_t+5]=lt,$},R}(xa);dl.prototype.bytesPerElement=12,fr("StructArrayLayout2i2i2i12",dl);var pc=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,$,ue,_e,Ae,Re)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze){var lt=4*$,_t=8*$;return this.float32[lt+0]=ue,this.float32[lt+1]=_e,this.float32[lt+2]=Ae,this.int16[_t+6]=Re,this.int16[_t+7]=Ze,$},R}(xa);pc.prototype.bytesPerElement=16,fr("StructArrayLayout2f1f2i16",pc);var Ol=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae){var Re=this.length;return this.resize(Re+1),this.emplace(Re,$,ue,_e,Ae)},R.prototype.emplace=function($,ue,_e,Ae,Re){var Ze=12*$,lt=3*$;return this.uint8[Ze+0]=ue,this.uint8[Ze+1]=_e,this.float32[lt+1]=Ae,this.float32[lt+2]=Re,$},R}(xa);Ol.prototype.bytesPerElement=12,fr("StructArrayLayout2ub2f12",Ol);var Go=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,$,ue,_e)},R.prototype.emplace=function($,ue,_e,Ae){var Re=3*$;return this.uint16[Re+0]=ue,this.uint16[Re+1]=_e,this.uint16[Re+2]=Ae,$},R}(xa);Go.prototype.bytesPerElement=6,fr("StructArrayLayout3ui6",Go);var Pc=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn,Zn,Wn,rr){var ir=this.length;return this.resize(ir+1),this.emplace(ir,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn,Zn,Wn,rr)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn,Zn,Wn,rr,ir){var hr=24*$,Er=12*$,zr=48*$;return this.int16[hr+0]=ue,this.int16[hr+1]=_e,this.uint16[hr+2]=Ae,this.uint16[hr+3]=Re,this.uint32[Er+2]=Ze,this.uint32[Er+3]=lt,this.uint32[Er+4]=_t,this.uint16[hr+10]=At,this.uint16[hr+11]=Wt,this.uint16[hr+12]=on,this.float32[Er+7]=en,this.float32[Er+8]=_n,this.uint8[zr+36]=Rn,this.uint8[zr+37]=Zn,this.uint8[zr+38]=Wn,this.uint32[Er+10]=rr,this.int16[hr+22]=ir,$},R}(xa);Pc.prototype.bytesPerElement=48,fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pc);var Rc=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn,Zn,Wn,rr,ir,hr,Er,zr,ni,ti,li,Ti,Mi,mi,Pi){var Ei=this.length;return this.resize(Ei+1),this.emplace(Ei,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn,Zn,Wn,rr,ir,hr,Er,zr,ni,ti,li,Ti,Mi,mi,Pi)},R.prototype.emplace=function($,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn,Zn,Wn,rr,ir,hr,Er,zr,ni,ti,li,Ti,Mi,mi,Pi,Ei){var Ai=34*$,ga=17*$;return this.int16[Ai+0]=ue,this.int16[Ai+1]=_e,this.int16[Ai+2]=Ae,this.int16[Ai+3]=Re,this.int16[Ai+4]=Ze,this.int16[Ai+5]=lt,this.int16[Ai+6]=_t,this.int16[Ai+7]=At,this.uint16[Ai+8]=Wt,this.uint16[Ai+9]=on,this.uint16[Ai+10]=en,this.uint16[Ai+11]=_n,this.uint16[Ai+12]=Rn,this.uint16[Ai+13]=Zn,this.uint16[Ai+14]=Wn,this.uint16[Ai+15]=rr,this.uint16[Ai+16]=ir,this.uint16[Ai+17]=hr,this.uint16[Ai+18]=Er,this.uint16[Ai+19]=zr,this.uint16[Ai+20]=ni,this.uint16[Ai+21]=ti,this.uint16[Ai+22]=li,this.uint32[ga+12]=Ti,this.float32[ga+13]=Mi,this.float32[ga+14]=mi,this.float32[ga+15]=Pi,this.float32[ga+16]=Ei,$},R}(xa);Rc.prototype.bytesPerElement=68,fr("StructArrayLayout8i15ui1ul4f68",Rc);var me=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($){var ue=this.length;return this.resize(ue+1),this.emplace(ue,$)},R.prototype.emplace=function($,ue){return this.float32[1*$+0]=ue,$},R}(xa);me.prototype.bytesPerElement=4,fr("StructArrayLayout1f4",me);var O=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,$,ue,_e)},R.prototype.emplace=function($,ue,_e,Ae){var Re=3*$;return this.int16[Re+0]=ue,this.int16[Re+1]=_e,this.int16[Re+2]=Ae,$},R}(xa);O.prototype.bytesPerElement=6,fr("StructArrayLayout3i6",O);var F=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,$,ue,_e)},R.prototype.emplace=function($,ue,_e,Ae){var Ze=4*$;return this.uint32[2*$+0]=ue,this.uint16[Ze+2]=_e,this.uint16[Ze+3]=Ae,$},R}(xa);F.prototype.bytesPerElement=8,fr("StructArrayLayout1ul2ui8",F);var B=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue){var _e=this.length;return this.resize(_e+1),this.emplace(_e,$,ue)},R.prototype.emplace=function($,ue,_e){var Ae=2*$;return this.uint16[Ae+0]=ue,this.uint16[Ae+1]=_e,$},R}(xa);B.prototype.bytesPerElement=4,fr("StructArrayLayout2ui4",B);var W=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function($){var ue=this.length;return this.resize(ue+1),this.emplace(ue,$)},R.prototype.emplace=function($,ue){return this.uint16[1*$+0]=ue,$},R}(xa);W.prototype.bytesPerElement=2,fr("StructArrayLayout1ui2",W);var fe=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue){var _e=this.length;return this.resize(_e+1),this.emplace(_e,$,ue)},R.prototype.emplace=function($,ue,_e){var Ae=2*$;return this.float32[Ae+0]=ue,this.float32[Ae+1]=_e,$},R}(xa);fe.prototype.bytesPerElement=8,fr("StructArrayLayout2f8",fe);var ge=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function($,ue,_e,Ae){var Re=this.length;return this.resize(Re+1),this.emplace(Re,$,ue,_e,Ae)},R.prototype.emplace=function($,ue,_e,Ae,Re){var Ze=4*$;return this.float32[Ze+0]=ue,this.float32[Ze+1]=_e,this.float32[Ze+2]=Ae,this.float32[Ze+3]=Re,$},R}(xa);ge.prototype.bytesPerElement=16,fr("StructArrayLayout4f16",ge);var we=function(k){function R(){k.apply(this,arguments)}k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R;var $={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return $.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},$.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},$.x1.get=function(){return this._structArray.int16[this._pos2+2]},$.y1.get=function(){return this._structArray.int16[this._pos2+3]},$.x2.get=function(){return this._structArray.int16[this._pos2+4]},$.y2.get=function(){return this._structArray.int16[this._pos2+5]},$.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},$.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},$.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},$.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(R.prototype,$),R}(Sl);we.prototype.size=20;var Ee=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.get=function($){return new we(this,$)},R}(Ic);fr("CollisionBoxArray",Ee);var Pe=function(k){function R(){k.apply(this,arguments)}k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R;var $={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return $.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},$.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},$.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},$.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},$.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},$.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},$.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},$.segment.get=function(){return this._structArray.uint16[this._pos2+10]},$.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},$.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},$.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},$.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},$.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},$.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},$.placedOrientation.set=function(ue){this._structArray.uint8[this._pos1+37]=ue},$.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},$.hidden.set=function(ue){this._structArray.uint8[this._pos1+38]=ue},$.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},$.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+10]=ue},$.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(R.prototype,$),R}(Sl);Pe.prototype.size=48;var $e=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.get=function($){return new Pe(this,$)},R}(Pc);fr("PlacedSymbolArray",$e);var ot=function(k){function R(){k.apply(this,arguments)}k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R;var $={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return $.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},$.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},$.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},$.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},$.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},$.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},$.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},$.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},$.key.get=function(){return this._structArray.uint16[this._pos2+8]},$.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},$.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},$.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},$.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},$.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},$.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},$.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},$.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},$.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},$.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},$.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},$.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},$.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},$.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},$.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},$.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+12]=ue},$.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},$.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},$.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},$.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(R.prototype,$),R}(Sl);ot.prototype.size=68;var pt=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.get=function($){return new ot(this,$)},R}(Rc);fr("SymbolInstanceArray",pt);var Dt=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.getoffsetX=function($){return this.float32[1*$+0]},R}(me);fr("GlyphOffsetArray",Dt);var zt=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.getx=function($){return this.int16[3*$+0]},R.prototype.gety=function($){return this.int16[3*$+1]},R.prototype.gettileUnitDistanceFromAnchor=function($){return this.int16[3*$+2]},R}(O);fr("SymbolLineVertexArray",zt);var Pt=function(k){function R(){k.apply(this,arguments)}k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R;var $={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return $.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},$.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},$.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(R.prototype,$),R}(Sl);Pt.prototype.size=8;var Nt=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.get=function($){return new Pt(this,$)},R}(F);fr("FeatureIndexArray",Nt);var Et=Ea([{name:"a_pos",components:2,type:"Int16"}],4).members,Zt=function(k){void 0===k&&(k=[]),this.segments=k};function qt(k,R){return 256*(k=f(Math.floor(k),0,255))+f(Math.floor(R),0,255)}Zt.prototype.prepareSegment=function(k,R,$,ue){var _e=this.segments[this.segments.length-1];return k>Zt.MAX_VERTEX_ARRAY_LENGTH&&C("Max vertices per segment is "+Zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+k),(!_e||_e.vertexLength+k>Zt.MAX_VERTEX_ARRAY_LENGTH||_e.sortKey!==ue)&&(_e={vertexOffset:R.length,primitiveOffset:$.length,vertexLength:0,primitiveLength:0},void 0!==ue&&(_e.sortKey=ue),this.segments.push(_e)),_e},Zt.prototype.get=function(){return this.segments},Zt.prototype.destroy=function(){for(var k=0,R=this.segments;k<R.length;k+=1){var $=R[k];for(var ue in $.vaos)$.vaos[ue].destroy()}},Zt.simpleSegment=function(k,R,$,ue){return new Zt([{vertexOffset:k,primitiveOffset:R,vertexLength:$,primitiveLength:ue,vaos:{},sortKey:0}])},Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fr("SegmentVector",Zt);var Jt=Ea([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),gn=r(function(k){k.exports=function(R,$){var ue,_e,Ae,Re,Ze,lt,_t,At;for(_e=R.length-(ue=3&R.length),Ae=$,Ze=3432918353,lt=461845907,At=0;At<_e;)_t=255&R.charCodeAt(At)|(255&R.charCodeAt(++At))<<8|(255&R.charCodeAt(++At))<<16|(255&R.charCodeAt(++At))<<24,++At,Ae=27492+(65535&(Re=5*(65535&(Ae=(Ae^=_t=(65535&(_t=(_t=(65535&_t)*Ze+(((_t>>>16)*Ze&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295)<<13|Ae>>>19))+((5*(Ae>>>16)&65535)<<16)&4294967295))+((58964+(Re>>>16)&65535)<<16);switch(_t=0,ue){case 3:_t^=(255&R.charCodeAt(At+2))<<16;case 2:_t^=(255&R.charCodeAt(At+1))<<8;case 1:Ae^=_t=(65535&(_t=(_t=(65535&(_t^=255&R.charCodeAt(At)))*Ze+(((_t>>>16)*Ze&65535)<<16)&4294967295)<<15|_t>>>17))*lt+(((_t>>>16)*lt&65535)<<16)&4294967295}return Ae^=R.length,Ae=2246822507*(65535&(Ae^=Ae>>>16))+((2246822507*(Ae>>>16)&65535)<<16)&4294967295,Ae=3266489909*(65535&(Ae^=Ae>>>13))+((3266489909*(Ae>>>16)&65535)<<16)&4294967295,(Ae^=Ae>>>16)>>>0}}),On=r(function(k){k.exports=function(R,$){for(var ue,_e=R.length,Ae=$^_e,Re=0;_e>=4;)ue=1540483477*(65535&(ue=255&R.charCodeAt(Re)|(255&R.charCodeAt(++Re))<<8|(255&R.charCodeAt(++Re))<<16|(255&R.charCodeAt(++Re))<<24))+((1540483477*(ue>>>16)&65535)<<16),Ae=1540483477*(65535&Ae)+((1540483477*(Ae>>>16)&65535)<<16)^(ue=1540483477*(65535&(ue^=ue>>>24))+((1540483477*(ue>>>16)&65535)<<16)),_e-=4,++Re;switch(_e){case 3:Ae^=(255&R.charCodeAt(Re+2))<<16;case 2:Ae^=(255&R.charCodeAt(Re+1))<<8;case 1:Ae=1540483477*(65535&(Ae^=255&R.charCodeAt(Re)))+((1540483477*(Ae>>>16)&65535)<<16)}return Ae=1540483477*(65535&(Ae^=Ae>>>13))+((1540483477*(Ae>>>16)&65535)<<16),(Ae^=Ae>>>15)>>>0}}),Yn=gn,vr=On;Yn.murmur3=gn,Yn.murmur2=vr;var gr=function(){this.ids=[],this.positions=[],this.indexed=!1};gr.prototype.add=function(k,R,$,ue){this.ids.push(Cr(k)),this.positions.push(R,$,ue)},gr.prototype.getPositions=function(k){for(var R=Cr(k),$=0,ue=this.ids.length-1;$<ue;){var _e=$+ue>>1;this.ids[_e]>=R?ue=_e:$=_e+1}for(var Ae=[];this.ids[$]===R;)Ae.push({index:this.positions[3*$],start:this.positions[3*$+1],end:this.positions[3*$+2]}),$++;return Ae},gr.serialize=function(k,R){var $=new Float64Array(k.ids),ue=new Uint32Array(k.positions);return function _e(Ae,Re,Ze,lt){for(;Ze<lt;){for(var _t=Ae[Ze+lt>>1],At=Ze-1,Wt=lt+1;;){do{At++}while(Ae[At]<_t);do{Wt--}while(Ae[Wt]>_t);if(At>=Wt)break;ii(Ae,At,Wt),ii(Re,3*At,3*Wt),ii(Re,3*At+1,3*Wt+1),ii(Re,3*At+2,3*Wt+2)}Wt-Ze<lt-Wt?(_e(Ae,Re,Ze,Wt),Ze=Wt+1):(_e(Ae,Re,Wt+1,lt),lt=Wt)}}($,ue,0,$.length-1),R&&R.push($.buffer,ue.buffer),{ids:$,positions:ue}},gr.deserialize=function(k){var R=new gr;return R.ids=k.ids,R.positions=k.positions,R.indexed=!0,R};var Pr=Math.pow(2,53)-1;function Cr(k){var R=+k;return!isNaN(R)&&R<=Pr?R:Yn(String(k))}function ii(k,R,$){var ue=k[R];k[R]=k[$],k[$]=ue}fr("FeaturePositionMap",gr);var di=function(k,R){this.gl=k.gl,this.location=R},Oi=function(k){function R($,ue){k.call(this,$,ue),this.current=0}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))},R}(di),ur=function(k){function R($,ue){k.call(this,$,ue),this.current=0}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1f(this.location,$))},R}(di),Gr=function(k){function R($,ue){k.call(this,$,ue),this.current=[0,0]}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){$[0]===this.current[0]&&$[1]===this.current[1]||(this.current=$,this.gl.uniform2f(this.location,$[0],$[1]))},R}(di),hi=function(k){function R($,ue){k.call(this,$,ue),this.current=[0,0,0]}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){$[0]===this.current[0]&&$[1]===this.current[1]&&$[2]===this.current[2]||(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2]))},R}(di),si=function(k){function R($,ue){k.call(this,$,ue),this.current=[0,0,0,0]}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){$[0]===this.current[0]&&$[1]===this.current[1]&&$[2]===this.current[2]&&$[3]===this.current[3]||(this.current=$,this.gl.uniform4f(this.location,$[0],$[1],$[2],$[3]))},R}(di),wi=function(k){function R($,ue){k.call(this,$,ue),this.current=sn.transparent}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){$.r===this.current.r&&$.g===this.current.g&&$.b===this.current.b&&$.a===this.current.a||(this.current=$,this.gl.uniform4f(this.location,$.r,$.g,$.b,$.a))},R}(di),Ii=new Float32Array(16),Xi=function(k){function R($,ue){k.call(this,$,ue),this.current=Ii}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.set=function($){if($[12]!==this.current[12]||$[0]!==this.current[0])return this.current=$,void this.gl.uniformMatrix4fv(this.location,!1,$);for(var ue=1;ue<16;ue++)if($[ue]!==this.current[ue]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}},R}(di);function bi(k){return[qt(255*k.r,255*k.g),qt(255*k.b,255*k.a)]}var qi=function(k,R,$){this.value=k,this.uniformNames=R.map(function(ue){return"u_"+ue}),this.type=$};qi.prototype.setUniform=function(k,R,$){k.set($.constantOr(this.value))},qi.prototype.getBinding=function(k,R,$){return"color"===this.type?new wi(k,R):new ur(k,R)};var zi=function(k,R){this.uniformNames=R.map(function($){return"u_"+$}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};zi.prototype.setConstantPatternPositions=function(k,R){this.pixelRatioFrom=R.pixelRatio,this.pixelRatioTo=k.pixelRatio,this.patternFrom=R.tlbr,this.patternTo=k.tlbr},zi.prototype.setUniform=function(k,R,$,ue){var _e="u_pattern_to"===ue?this.patternTo:"u_pattern_from"===ue?this.patternFrom:"u_pixel_ratio_to"===ue?this.pixelRatioTo:"u_pixel_ratio_from"===ue?this.pixelRatioFrom:null;_e&&k.set(_e)},zi.prototype.getBinding=function(k,R,$){return"u_pattern"===$.substr(0,9)?new si(k,R):new ur(k,R)};var ta=function(k,R,$,ue){this.expression=k,this.type=$,this.maxValue=0,this.paintVertexAttributes=R.map(function(_e){return{name:"a_"+_e,type:"Float32",components:"color"===$?2:1,offset:0}}),this.paintVertexArray=new ue};ta.prototype.populatePaintArray=function(k,R,$,ue,_e){var Ae=this.paintVertexArray.length,Re=this.expression.evaluate(new Sa(0),R,{},ue,[],_e);this.paintVertexArray.resize(k),this._setPaintValue(Ae,k,Re)},ta.prototype.updatePaintArray=function(k,R,$,ue){var _e=this.expression.evaluate({zoom:0},$,ue);this._setPaintValue(k,R,_e)},ta.prototype._setPaintValue=function(k,R,$){if("color"===this.type)for(var ue=bi($),_e=k;_e<R;_e++)this.paintVertexArray.emplace(_e,ue[0],ue[1]);else{for(var Ae=k;Ae<R;Ae++)this.paintVertexArray.emplace(Ae,$);this.maxValue=Math.max(this.maxValue,Math.abs($))}},ta.prototype.upload=function(k){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=k.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Yi=function(k,R,$,ue,_e,Ae){this.expression=k,this.uniformNames=R.map(function(Re){return"u_"+Re+"_t"}),this.type=$,this.useIntegerZoom=ue,this.zoom=_e,this.maxValue=0,this.paintVertexAttributes=R.map(function(Re){return{name:"a_"+Re,type:"Float32",components:"color"===$?4:2,offset:0}}),this.paintVertexArray=new Ae};Yi.prototype.populatePaintArray=function(k,R,$,ue,_e){var Ae=this.expression.evaluate(new Sa(this.zoom),R,{},ue,[],_e),Re=this.expression.evaluate(new Sa(this.zoom+1),R,{},ue,[],_e),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(k),this._setPaintValue(Ze,k,Ae,Re)},Yi.prototype.updatePaintArray=function(k,R,$,ue){var _e=this.expression.evaluate({zoom:this.zoom},$,ue),Ae=this.expression.evaluate({zoom:this.zoom+1},$,ue);this._setPaintValue(k,R,_e,Ae)},Yi.prototype._setPaintValue=function(k,R,$,ue){if("color"===this.type)for(var _e=bi($),Ae=bi(ue),Re=k;Re<R;Re++)this.paintVertexArray.emplace(Re,_e[0],_e[1],Ae[0],Ae[1]);else{for(var Ze=k;Ze<R;Ze++)this.paintVertexArray.emplace(Ze,$,ue);this.maxValue=Math.max(this.maxValue,Math.abs($),Math.abs(ue))}},Yi.prototype.upload=function(k){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=k.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yi.prototype.setUniform=function(k,R){var $=this.useIntegerZoom?Math.floor(R.zoom):R.zoom,ue=f(this.expression.interpolationFactor($,this.zoom,this.zoom+1),0,1);k.set(ue)},Yi.prototype.getBinding=function(k,R,$){return new ur(k,R)};var na=function(k,R,$,ue,_e,Ae){this.expression=k,this.type=R,this.useIntegerZoom=$,this.zoom=ue,this.layerId=Ae,this.zoomInPaintVertexArray=new _e,this.zoomOutPaintVertexArray=new _e};na.prototype.populatePaintArray=function(k,R,$){var ue=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(k),this.zoomOutPaintVertexArray.resize(k),this._setPaintValues(ue,k,R.patterns&&R.patterns[this.layerId],$)},na.prototype.updatePaintArray=function(k,R,$,ue,_e){this._setPaintValues(k,R,$.patterns&&$.patterns[this.layerId],_e)},na.prototype._setPaintValues=function(k,R,$,ue){if(ue&&$){var Ze=ue[$.min],lt=ue[$.mid],_t=ue[$.max];if(Ze&&lt&&_t)for(var At=k;At<R;At++)this.zoomInPaintVertexArray.emplace(At,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],lt.pixelRatio,Ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(At,lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],_t.tl[0],_t.tl[1],_t.br[0],_t.br[1],lt.pixelRatio,_t.pixelRatio)}},na.prototype.upload=function(k){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=k.createVertexBuffer(this.zoomInPaintVertexArray,Jt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=k.createVertexBuffer(this.zoomOutPaintVertexArray,Jt.members,this.expression.isStateDependent))},na.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var fa=function(k,R,$,ue){this.binders={},this.layoutAttributes=ue,this._buffers=[];var _e=[];for(var Ae in k.paint._values)if($(Ae)){var Re=k.paint.get(Ae);if(Re instanceof yo&&ds(Re.property.specification)){var Ze=uo(Ae,k.type),lt=Re.value,_t=Re.property.specification.type,At=Re.property.useIntegerZoom,Wt=Re.property.specification["property-type"],on="cross-faded"===Wt||"cross-faded-data-driven"===Wt;if("constant"===lt.kind)this.binders[Ae]=on?new zi(lt.value,Ze):new qi(lt.value,Ze,_t),_e.push("/u_"+Ae);else if("source"===lt.kind||on){var en=fo(Ae,_t,"source");this.binders[Ae]=on?new na(lt,_t,At,R,en,k.id):new ta(lt,Ze,_t,en),_e.push("/a_"+Ae)}else{var _n=fo(Ae,_t,"composite");this.binders[Ae]=new Yi(lt,Ze,_t,At,R,_n),_e.push("/z_"+Ae)}}}this.cacheKey=_e.sort().join("")};fa.prototype.getMaxValue=function(k){var R=this.binders[k];return R instanceof ta||R instanceof Yi?R.maxValue:0},fa.prototype.populatePaintArrays=function(k,R,$,ue,_e){for(var Ae in this.binders){var Re=this.binders[Ae];(Re instanceof ta||Re instanceof Yi||Re instanceof na)&&Re.populatePaintArray(k,R,$,ue,_e)}},fa.prototype.setConstantPatternPositions=function(k,R){for(var $ in this.binders){var ue=this.binders[$];ue instanceof zi&&ue.setConstantPatternPositions(k,R)}},fa.prototype.updatePaintArrays=function(k,R,$,ue,_e){var Ae=!1;for(var Re in k)for(var Ze=0,lt=R.getPositions(Re);Ze<lt.length;Ze+=1){var _t=lt[Ze],At=$.feature(_t.index);for(var Wt in this.binders){var on=this.binders[Wt];if((on instanceof ta||on instanceof Yi||on instanceof na)&&!0===on.expression.isStateDependent){var en=ue.paint.get(Wt);on.expression=en.value,on.updatePaintArray(_t.start,_t.end,At,k[Re],_e),Ae=!0}}}return Ae},fa.prototype.defines=function(){var k=[];for(var R in this.binders){var $=this.binders[R];($ instanceof qi||$ instanceof zi)&&k.push.apply(k,$.uniformNames.map(function(ue){return"#define HAS_UNIFORM_"+ue}))}return k},fa.prototype.getPaintVertexBuffers=function(){return this._buffers},fa.prototype.getUniforms=function(k,R){var $=[];for(var ue in this.binders){var _e=this.binders[ue];if(_e instanceof qi||_e instanceof zi||_e instanceof Yi)for(var Ae=0,Re=_e.uniformNames;Ae<Re.length;Ae+=1){var Ze=Re[Ae];if(R[Ze]){var lt=_e.getBinding(k,R[Ze],Ze);$.push({name:Ze,property:ue,binding:lt})}}}return $},fa.prototype.setUniforms=function(k,R,$,ue){for(var _e=0,Ae=R;_e<Ae.length;_e+=1){var Re=Ae[_e],Ze=Re.name,lt=Re.property;this.binders[lt].setUniform(Re.binding,ue,$.get(lt),Ze)}},fa.prototype.updatePaintBuffers=function(k){for(var R in this._buffers=[],this.binders){var $=this.binders[R];if(k&&$ instanceof na){var ue=2===k.fromScale?$.zoomInPaintVertexBuffer:$.zoomOutPaintVertexBuffer;ue&&this._buffers.push(ue)}else($ instanceof ta||$ instanceof Yi)&&$.paintVertexBuffer&&this._buffers.push($.paintVertexBuffer)}},fa.prototype.upload=function(k){for(var R in this.binders){var $=this.binders[R];($ instanceof ta||$ instanceof Yi||$ instanceof na)&&$.upload(k)}this.updatePaintBuffers()},fa.prototype.destroy=function(){for(var k in this.binders){var R=this.binders[k];(R instanceof ta||R instanceof Yi||R instanceof na)&&R.destroy()}};var Ha=function(k,R,$,ue){void 0===ue&&(ue=function(){return!0}),this.programConfigurations={};for(var _e=0,Ae=R;_e<Ae.length;_e+=1){var Re=Ae[_e];this.programConfigurations[Re.id]=new fa(Re,$,ue,k)}this.needsUpload=!1,this._featureMap=new gr,this._bufferOffset=0};function uo(k,R){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[k]||[k.replace(R+"-","").replace(/-/g,"_")]}function fo(k,R,$){var _e={"line-pattern":{source:xl,composite:xl},"fill-pattern":{source:xl,composite:xl},"fill-extrusion-pattern":{source:xl,composite:xl}}[k];return _e&&_e[$]||{color:{source:fe,composite:ge},number:{source:me,composite:fe}}[R][$]}Ha.prototype.populatePaintArrays=function(k,R,$,ue,_e,Ae){for(var Re in this.programConfigurations)this.programConfigurations[Re].populatePaintArrays(k,R,ue,_e,Ae);void 0!==R.id&&this._featureMap.add(R.id,$,this._bufferOffset,k),this._bufferOffset=k,this.needsUpload=!0},Ha.prototype.updatePaintArrays=function(k,R,$,ue){for(var _e=0,Ae=$;_e<Ae.length;_e+=1){var Re=Ae[_e];this.needsUpload=this.programConfigurations[Re.id].updatePaintArrays(k,this._featureMap,R,Re,ue)||this.needsUpload}},Ha.prototype.get=function(k){return this.programConfigurations[k]},Ha.prototype.upload=function(k){if(this.needsUpload){for(var R in this.programConfigurations)this.programConfigurations[R].upload(k);this.needsUpload=!1}},Ha.prototype.destroy=function(){for(var k in this.programConfigurations)this.programConfigurations[k].destroy()},fr("ConstantBinder",qi),fr("CrossFadedConstantBinder",zi),fr("SourceExpressionBinder",ta),fr("CrossFadedCompositeBinder",na),fr("CompositeExpressionBinder",Yi),fr("ProgramConfiguration",fa,{omit:["_buffers"]}),fr("ProgramConfigurationSet",Ha);var ao=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Ka(k){for(var R=8192/k.extent,$=k.loadGeometry(),ue=0;ue<$.length;ue++)for(var _e=$[ue],Ae=0;Ae<_e.length;Ae++){var Re=_e[Ae];Re.x=Math.round(Re.x*R),Re.y=Math.round(Re.y*R),(Re.x<ao.min||Re.x>ao.max||Re.y<ao.min||Re.y>ao.max)&&(C("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Re.x=f(Re.x,ao.min,ao.max),Re.y=f(Re.y,ao.min,ao.max))}return $}function as(k,R,$,ue,_e){k.emplaceBack(2*R+(ue+1)/2,2*$+(_e+1)/2)}var Oo=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=k.index,this.hasPattern=!1,this.layoutVertexArray=new tl,this.indexArray=new Go,this.segments=new Zt,this.programConfigurations=new Ha(Et,k.layers,k.zoom),this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};function Ms(k,R){for(var $=0;$<k.length;$++)if(Js(R,k[$]))return!0;for(var ue=0;ue<R.length;ue++)if(Js(k,R[ue]))return!0;return!!mc(k,R)}function wl(k,R,$){return!!Js(k,R)||!!os(R,k,$)}function zl(k,R){if(1===k.length)return Fc(R,k[0]);for(var $=0;$<R.length;$++)for(var ue=R[$],_e=0;_e<ue.length;_e++)if(Js(k,ue[_e]))return!0;for(var Ae=0;Ae<k.length;Ae++)if(Fc(R,k[Ae]))return!0;for(var Re=0;Re<R.length;Re++)if(mc(k,R[Re]))return!0;return!1}function Nc(k,R,$){if(k.length>1){if(mc(k,R))return!0;for(var ue=0;ue<R.length;ue++)if(os(R[ue],k,$))return!0}for(var _e=0;_e<k.length;_e++)if(os(k[_e],R,$))return!0;return!1}function mc(k,R){if(0===k.length||0===R.length)return!1;for(var $=0;$<k.length-1;$++)for(var ue=k[$],_e=k[$+1],Ae=0;Ae<R.length-1;Ae++)if(gc(ue,_e,R[Ae],R[Ae+1]))return!0;return!1}function gc(k,R,$,ue){return P(k,$,ue)!==P(R,$,ue)&&P(k,R,$)!==P(k,R,ue)}function os(k,R,$){var ue=$*$;if(1===R.length)return k.distSqr(R[0])<ue;for(var _e=1;_e<R.length;_e++)if(Ql(k,R[_e-1],R[_e])<ue)return!0;return!1}function Ql(k,R,$){var ue=R.distSqr($);if(0===ue)return k.distSqr(R);var _e=((k.x-R.x)*($.x-R.x)+(k.y-R.y)*($.y-R.y))/ue;return k.distSqr(_e<0?R:_e>1?$:$.sub(R)._mult(_e)._add(R))}function Fc(k,R){for(var $,ue,_e,Ae=!1,Re=0;Re<k.length;Re++)for(var Ze=0,lt=($=k[Re]).length-1;Ze<$.length;lt=Ze++)(ue=$[Ze]).y>R.y!=(_e=$[lt]).y>R.y&&R.x<(_e.x-ue.x)*(R.y-ue.y)/(_e.y-ue.y)+ue.x&&(Ae=!Ae);return Ae}function Js(k,R){for(var $=!1,ue=0,_e=k.length-1;ue<k.length;_e=ue++){var Ae=k[ue],Re=k[_e];Ae.y>R.y!=Re.y>R.y&&R.x<(Re.x-Ae.x)*(R.y-Ae.y)/(Re.y-Ae.y)+Ae.x&&($=!$)}return $}function zc(k,R,$){var ue=$[0],_e=$[2];if(k.x<ue.x&&R.x<ue.x||k.x>_e.x&&R.x>_e.x||k.y<ue.y&&R.y<ue.y||k.y>_e.y&&R.y>_e.y)return!1;var Ae=P(k,R,$[0]);return Ae!==P(k,R,$[1])||Ae!==P(k,R,$[2])||Ae!==P(k,R,$[3])}function oo(k,R,$){var ue=R.paint.get(k).value;return"constant"===ue.kind?ue.value:$.programConfigurations.get(R.id).getMaxValue(k)}function ps(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function ms(k,R,$,ue,_e){if(!R[0]&&!R[1])return k;var Ae=n.convert(R)._mult(_e);"viewport"===$&&Ae._rotate(-ue);for(var Re=[],Ze=0;Ze<k.length;Ze++)Re.push(k[Ze].sub(Ae));return Re}Oo.prototype.populate=function(k,R,$){var ue=this.layers[0],_e=[],Ae=null;"circle"===ue.type&&(Ae=ue.layout.get("circle-sort-key"));for(var Re=0,Ze=k;Re<Ze.length;Re+=1){var lt=Ze[Re],_t=lt.feature,At=lt.id,Wt=lt.index,on=lt.sourceLayerIndex,en=this.layers[0]._featureFilter.needGeometry,_n={type:_t.type,id:At,properties:_t.properties,geometry:en?Ka(_t):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),_n,$)){en||(_n.geometry=Ka(_t));var Rn=Ae?Ae.evaluate(_n,{},$):void 0;_e.push({id:At,properties:_t.properties,type:_t.type,sourceLayerIndex:on,index:Wt,geometry:_n.geometry,patterns:{},sortKey:Rn})}}Ae&&_e.sort(function(li,Ti){return li.sortKey-Ti.sortKey});for(var Wn=0,rr=_e;Wn<rr.length;Wn+=1){var ir=rr[Wn],Er=ir.geometry,zr=ir.index,ni=ir.sourceLayerIndex,ti=k[zr].feature;this.addFeature(ir,Er,zr,$),R.featureIndex.insert(ti,Er,zr,ni,this.index)}},Oo.prototype.update=function(k,R,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,R,this.stateDependentLayers,$)},Oo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Oo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Oo.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Et),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},Oo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Oo.prototype.addFeature=function(k,R,$,ue){for(var _e=0,Ae=R;_e<Ae.length;_e+=1)for(var Re=0,Ze=Ae[_e];Re<Ze.length;Re+=1){var lt=Ze[Re],_t=lt.x,At=lt.y;if(!(_t<0||_t>=8192||At<0||At>=8192)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,k.sortKey),on=Wt.vertexLength;as(this.layoutVertexArray,_t,At,-1,-1),as(this.layoutVertexArray,_t,At,1,-1),as(this.layoutVertexArray,_t,At,1,1),as(this.layoutVertexArray,_t,At,-1,1),this.indexArray.emplaceBack(on,on+1,on+2),this.indexArray.emplaceBack(on,on+3,on+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,$,{},ue)},fr("CircleBucket",Oo,{omit:["layers"]});var uu=new hs({"circle-sort-key":new ji(Ce.layout_circle["circle-sort-key"])}),yd={paint:new hs({"circle-radius":new ji(Ce.paint_circle["circle-radius"]),"circle-color":new ji(Ce.paint_circle["circle-color"]),"circle-blur":new ji(Ce.paint_circle["circle-blur"]),"circle-opacity":new ji(Ce.paint_circle["circle-opacity"]),"circle-translate":new Si(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new Si(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Si(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Si(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ji(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ji(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ji(Ce.paint_circle["circle-stroke-opacity"])}),layout:uu},Gs=typeof Float32Array<"u"?Float32Array:Array;function Zu(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}function Bc(k,R,$){var ue=R[0],_e=R[1],Ae=R[2],Re=R[3],Ze=R[4],lt=R[5],_t=R[6],At=R[7],Wt=R[8],on=R[9],en=R[10],_n=R[11],Rn=R[12],Zn=R[13],Wn=R[14],rr=R[15],ir=$[0],hr=$[1],Er=$[2],zr=$[3];return k[0]=ir*ue+hr*Ze+Er*Wt+zr*Rn,k[1]=ir*_e+hr*lt+Er*on+zr*Zn,k[2]=ir*Ae+hr*_t+Er*en+zr*Wn,k[3]=ir*Re+hr*At+Er*_n+zr*rr,k[4]=(ir=$[4])*ue+(hr=$[5])*Ze+(Er=$[6])*Wt+(zr=$[7])*Rn,k[5]=ir*_e+hr*lt+Er*on+zr*Zn,k[6]=ir*Ae+hr*_t+Er*en+zr*Wn,k[7]=ir*Re+hr*At+Er*_n+zr*rr,k[8]=(ir=$[8])*ue+(hr=$[9])*Ze+(Er=$[10])*Wt+(zr=$[11])*Rn,k[9]=ir*_e+hr*lt+Er*on+zr*Zn,k[10]=ir*Ae+hr*_t+Er*en+zr*Wn,k[11]=ir*Re+hr*At+Er*_n+zr*rr,k[12]=(ir=$[12])*ue+(hr=$[13])*Ze+(Er=$[14])*Wt+(zr=$[15])*Rn,k[13]=ir*_e+hr*lt+Er*on+zr*Zn,k[14]=ir*Ae+hr*_t+Er*en+zr*Wn,k[15]=ir*Re+hr*At+Er*_n+zr*rr,k}Math.hypot||(Math.hypot=function(){for(var k=arguments,R=0,$=arguments.length;$--;)R+=k[$]*k[$];return Math.sqrt(R)});var Bl,R,_d=Bc;function gs(k,R,$){var ue=R[0],_e=R[1],Ae=R[2],Re=R[3];return k[0]=$[0]*ue+$[4]*_e+$[8]*Ae+$[12]*Re,k[1]=$[1]*ue+$[5]*_e+$[9]*Ae+$[13]*Re,k[2]=$[2]*ue+$[6]*_e+$[10]*Ae+$[14]*Re,k[3]=$[3]*ue+$[7]*_e+$[11]*Ae+$[15]*Re,k}Bl=new Gs(3),Gs!=Float32Array&&(Bl[0]=0,Bl[1]=0,Bl[2]=0),R=new Gs(4),Gs!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0);var bd=(function(){var R=new Gs(2);Gs!=Float32Array&&(R[0]=0,R[1]=0)}(),function(k){function R($){k.call(this,$,yd)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.createBucket=function($){return new Oo($)},R.prototype.queryRadius=function($){var ue=$;return oo("circle-radius",this,ue)+oo("circle-stroke-width",this,ue)+ps(this.paint.get("circle-translate"))},R.prototype.queryIntersectsFeature=function($,ue,_e,Ae,Re,Ze,lt,_t){for(var At=ms($,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,lt),Wt=this.paint.get("circle-radius").evaluate(ue,_e)+this.paint.get("circle-stroke-width").evaluate(ue,_e),on="map"===this.paint.get("circle-pitch-alignment"),en=on?At:function(ni,ti){return ni.map(function(li){return jc(li,ti)})}(At,_t),_n=on?Wt*lt:Wt,Rn=0,Zn=Ae;Rn<Zn.length;Rn+=1)for(var Wn=0,rr=Zn[Rn];Wn<rr.length;Wn+=1){var ir=rr[Wn],hr=on?ir:jc(ir,_t),Er=_n,zr=gs([],[ir.x,ir.y,0,1],_t);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Er*=zr[3]/Ze.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Er*=Ze.cameraToCenterDistance/zr[3]),wl(en,hr,Er))return!0}return!1},R}(Rs));function jc(k,R){var $=gs([],[k.x,k.y,0,1],R);return new n($[0]/$[3],$[1]/$[3])}var Vc=function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R}(Oo);function kf(k,R,$,ue){var _e=R.width,Ae=R.height;if(ue){if(ue instanceof Uint8ClampedArray)ue=new Uint8Array(ue.buffer);else if(ue.length!==_e*Ae*$)throw new RangeError("mismatched image size")}else ue=new Uint8Array(_e*Ae*$);return k.width=_e,k.height=Ae,k.data=ue,k}function fu(k,R,$){var ue=R.width,_e=R.height;if(ue!==k.width||_e!==k.height){var Ae=kf({},{width:ue,height:_e},$);_o(k,Ae,{x:0,y:0},{x:0,y:0},{width:Math.min(k.width,ue),height:Math.min(k.height,_e)},$),k.width=ue,k.height=_e,k.data=Ae.data}}function _o(k,R,$,ue,_e,Ae){if(0===_e.width||0===_e.height)return R;if(_e.width>k.width||_e.height>k.height||$.x>k.width-_e.width||$.y>k.height-_e.height)throw new RangeError("out of range source coordinates for image copy");if(_e.width>R.width||_e.height>R.height||ue.x>R.width-_e.width||ue.y>R.height-_e.height)throw new RangeError("out of range destination coordinates for image copy");for(var Re=k.data,Ze=R.data,lt=0;lt<_e.height;lt++)for(var _t=(($.y+lt)*k.width+$.x)*Ae,At=((ue.y+lt)*R.width+ue.x)*Ae,Wt=0;Wt<_e.width*Ae;Wt++)Ze[At+Wt]=Re[_t+Wt];return R}fr("HeatmapBucket",Vc,{omit:["layers"]});var jl=function(k,R){kf(this,k,1,R)};jl.prototype.resize=function(k){fu(this,k,1)},jl.prototype.clone=function(){return new jl({width:this.width,height:this.height},new Uint8Array(this.data))},jl.copy=function(k,R,$,ue,_e){_o(k,R,$,ue,_e,1)};var vs=function(k,R){kf(this,k,4,R)};vs.prototype.resize=function(k){fu(this,k,4)},vs.prototype.replace=function(k,R){R?this.data.set(k):this.data=k instanceof Uint8ClampedArray?new Uint8Array(k.buffer):k},vs.prototype.clone=function(){return new vs({width:this.width,height:this.height},new Uint8Array(this.data))},vs.copy=function(k,R,$,ue,_e){_o(k,R,$,ue,_e,4)},fr("AlphaImage",jl),fr("RGBAImage",vs);var qs={paint:new hs({"heatmap-radius":new ji(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ji(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Si(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $s(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Si(Ce.paint_heatmap["heatmap-opacity"])})};function xd(k,R){for(var $=new Uint8Array(1024),ue={},_e=0,Ae=0;_e<256;_e++,Ae+=4){ue[R]=_e/255;var Re=k.evaluate(ue);$[Ae+0]=Math.floor(255*Re.r/Re.a),$[Ae+1]=Math.floor(255*Re.g/Re.a),$[Ae+2]=Math.floor(255*Re.b/Re.a),$[Ae+3]=Math.floor(255*Re.a)}return new vs({width:256,height:1},$)}var Wu=function(k){function R($){k.call(this,$,qs),this._updateColorRamp()}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.createBucket=function($){return new Vc($)},R.prototype._handleSpecialPaintPropertyUpdate=function($){"heatmap-color"===$&&this._updateColorRamp()},R.prototype._updateColorRamp=function(){this.colorRamp=xd(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},R.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},R}(Rs),Lh={paint:new hs({"hillshade-illumination-direction":new Si(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Si(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Si(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Si(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Si(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Si(Ce.paint_hillshade["hillshade-accent-color"])})},Ih=function(k){function R($){k.call(this,$,Lh)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},R}(Rs),Af=Ea([{name:"a_pos",components:2,type:"Int16"}],4).members,vc=Uc,Ph=Uc;function Uc(k,R,$){$=$||2;var ue,_e,Ae,Re,Ze,lt,_t,At=R&&R.length,Wt=At?R[0]*$:k.length,on=wd(k,0,Wt,$,!0),en=[];if(!on||on.next===on.prev)return en;if(At&&(on=function(Rn,Zn,Wn,rr){var ir,hr,ni,ti=[];for(ir=0,hr=Zn.length;ir<hr;ir++)(ni=wd(Rn,Zn[ir]*rr,ir<hr-1?Zn[ir+1]*rr:Rn.length,rr,!1))===ni.next&&(ni.steiner=!0),ti.push(e0(ni));for(ti.sort(Nh),ir=0;ir<ti.length;ir++)Fh(ti[ir],Wn),Wn=Vl(Wn,Wn.next);return Wn}(k,R,on,$)),k.length>80*$){ue=Ae=k[0],_e=Re=k[1];for(var _n=$;_n<Wt;_n+=$)(Ze=k[_n])<ue&&(ue=Ze),(lt=k[_n+1])<_e&&(_e=lt),Ze>Ae&&(Ae=Ze),lt>Re&&(Re=lt);_t=0!==(_t=Math.max(Ae-ue,Re-_e))?1/_t:0}return hl(on,en,$,ue,_e,_t),en}function wd(k,R,$,ue,_e){var Ae,Re;if(_e===kd(k,R,$,ue)>0)for(Ae=R;Ae<$;Ae+=ue)Re=Vh(Ae,k[Ae],k[Ae+1],Re);else for(Ae=$-ue;Ae>=R;Ae-=ue)Re=Vh(Ae,k[Ae],k[Ae+1],Re);return Re&&du(Re,Re.next)&&(Ju(Re),Re=Re.next),Re}function Vl(k,R){if(!k)return k;R||(R=k);var $,ue=k;do{if($=!1,ue.steiner||!du(ue,ue.next)&&0!==qo(ue.prev,ue,ue.next))ue=ue.next;else{if(Ju(ue),(ue=R=ue.prev)===ue.next)break;$=!0}}while($||ue!==R);return R}function hl(k,R,$,ue,_e,Ae,Re){if(k){!Re&&Ae&&function(At,Wt,on,en){var _n=At;do{null===_n.z&&(_n.z=Xu(_n.x,_n.y,Wt,on,en)),_n.prevZ=_n.prev,_n.nextZ=_n.next,_n=_n.next}while(_n!==At);_n.prevZ.nextZ=null,_n.prevZ=null,function(Rn){var Zn,Wn,rr,ir,hr,Er,zr,ni,ti=1;do{for(Wn=Rn,Rn=null,hr=null,Er=0;Wn;){for(Er++,rr=Wn,zr=0,Zn=0;Zn<ti&&(zr++,rr=rr.nextZ);Zn++);for(ni=ti;zr>0||ni>0&&rr;)0!==zr&&(0===ni||!rr||Wn.z<=rr.z)?(ir=Wn,Wn=Wn.nextZ,zr--):(ir=rr,rr=rr.nextZ,ni--),hr?hr.nextZ=ir:Rn=ir,ir.prevZ=hr,hr=ir;Wn=rr}hr.nextZ=null,ti*=2}while(Er>1)}(_n)}(k,ue,_e,Ae);for(var Ze,lt,_t=k;k.prev!==k.next;)if(Ze=k.prev,lt=k.next,Ae?Td(k,ue,_e,Ae):Qp(k))R.push(Ze.i/$),R.push(k.i/$),R.push(lt.i/$),Ju(k),k=lt.next,_t=lt.next;else if((k=lt)===_t){Re?1===Re?hl(k=Hc(Vl(k),R,$),R,$,ue,_e,Ae,2):2===Re&&Rh(k,R,$,ue,_e,Ae):hl(Vl(k),R,$,ue,_e,Ae,1);break}}}function Qp(k){var R=k.prev,$=k,ue=k.next;if(qo(R,$,ue)>=0)return!1;for(var _e=k.next.next;_e!==k.prev;){if(yc(R.x,R.y,$.x,$.y,ue.x,ue.y,_e.x,_e.y)&&qo(_e.prev,_e,_e.next)>=0)return!1;_e=_e.next}return!0}function Td(k,R,$,ue){var _e=k.prev,Ae=k,Re=k.next;if(qo(_e,Ae,Re)>=0)return!1;for(var _t=_e.x>Ae.x?_e.x>Re.x?_e.x:Re.x:Ae.x>Re.x?Ae.x:Re.x,At=_e.y>Ae.y?_e.y>Re.y?_e.y:Re.y:Ae.y>Re.y?Ae.y:Re.y,Wt=Xu(_e.x<Ae.x?_e.x<Re.x?_e.x:Re.x:Ae.x<Re.x?Ae.x:Re.x,_e.y<Ae.y?_e.y<Re.y?_e.y:Re.y:Ae.y<Re.y?Ae.y:Re.y,R,$,ue),on=Xu(_t,At,R,$,ue),en=k.prevZ,_n=k.nextZ;en&&en.z>=Wt&&_n&&_n.z<=on;){if(en!==k.prev&&en!==k.next&&yc(_e.x,_e.y,Ae.x,Ae.y,Re.x,Re.y,en.x,en.y)&&qo(en.prev,en,en.next)>=0||(en=en.prevZ,_n!==k.prev&&_n!==k.next&&yc(_e.x,_e.y,Ae.x,Ae.y,Re.x,Re.y,_n.x,_n.y)&&qo(_n.prev,_n,_n.next)>=0))return!1;_n=_n.nextZ}for(;en&&en.z>=Wt;){if(en!==k.prev&&en!==k.next&&yc(_e.x,_e.y,Ae.x,Ae.y,Re.x,Re.y,en.x,en.y)&&qo(en.prev,en,en.next)>=0)return!1;en=en.prevZ}for(;_n&&_n.z<=on;){if(_n!==k.prev&&_n!==k.next&&yc(_e.x,_e.y,Ae.x,Ae.y,Re.x,Re.y,_n.x,_n.y)&&qo(_n.prev,_n,_n.next)>=0)return!1;_n=_n.nextZ}return!0}function Hc(k,R,$){var ue=k;do{var _e=ue.prev,Ae=ue.next.next;!du(_e,Ae)&&Bh(_e,ue,ue.next,Ae)&&hu(_e,Ae)&&hu(Ae,_e)&&(R.push(_e.i/$),R.push(ue.i/$),R.push(Ae.i/$),Ju(ue),Ju(ue.next),ue=k=Ae),ue=ue.next}while(ue!==k);return Vl(ue)}function Rh(k,R,$,ue,_e,Ae){var Re=k;do{for(var Ze=Re.next.next;Ze!==Re.prev;){if(Re.i!==Ze.i&&t0(Re,Ze)){var lt=jh(Re,Ze);return Re=Vl(Re,Re.next),lt=Vl(lt,lt.next),hl(Re,R,$,ue,_e,Ae),void hl(lt,R,$,ue,_e,Ae)}Ze=Ze.next}Re=Re.next}while(Re!==k)}function Nh(k,R){return k.x-R.x}function Fh(k,R){if(R=function(ue,_e){var Ae,Re=_e,Ze=ue.x,lt=ue.y,_t=-1/0;do{if(lt<=Re.y&&lt>=Re.next.y&&Re.next.y!==Re.y){var At=Re.x+(lt-Re.y)*(Re.next.x-Re.x)/(Re.next.y-Re.y);if(At<=Ze&&At>_t){if(_t=At,At===Ze){if(lt===Re.y)return Re;if(lt===Re.next.y)return Re.next}Ae=Re.x<Re.next.x?Re:Re.next}}Re=Re.next}while(Re!==_e);if(!Ae)return null;if(Ze===_t)return Ae;var Wt,on=Ae,en=Ae.x,_n=Ae.y,Rn=1/0;Re=Ae;do{Ze>=Re.x&&Re.x>=en&&Ze!==Re.x&&yc(lt<_n?Ze:_t,lt,en,_n,lt<_n?_t:Ze,lt,Re.x,Re.y)&&(Wt=Math.abs(lt-Re.y)/(Ze-Re.x),hu(Re,ue)&&(Wt<Rn||Wt===Rn&&(Re.x>Ae.x||Re.x===Ae.x&&zh(Ae,Re)))&&(Ae=Re,Rn=Wt)),Re=Re.next}while(Re!==on);return Ae}(k,R)){var $=jh(R,k);Vl(R,R.next),Vl($,$.next)}}function zh(k,R){return qo(k.prev,k,R.prev)<0&&qo(R.next,k,k.next)<0}function Xu(k,R,$,ue,_e){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k=32767*(k-$)*_e)|k<<8))|k<<4))|k<<2))|k<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-ue)*_e)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function e0(k){var R=k,$=k;do{(R.x<$.x||R.x===$.x&&R.y<$.y)&&($=R),R=R.next}while(R!==k);return $}function yc(k,R,$,ue,_e,Ae,Re,Ze){return(_e-Re)*(R-Ze)-(k-Re)*(Ae-Ze)>=0&&(k-Re)*(ue-Ze)-($-Re)*(R-Ze)>=0&&($-Re)*(Ae-Ze)-(_e-Re)*(ue-Ze)>=0}function t0(k,R){return k.next.i!==R.i&&k.prev.i!==R.i&&!function($,ue){var _e=$;do{if(_e.i!==$.i&&_e.next.i!==$.i&&_e.i!==ue.i&&_e.next.i!==ue.i&&Bh(_e,_e.next,$,ue))return!0;_e=_e.next}while(_e!==$);return!1}(k,R)&&(hu(k,R)&&hu(R,k)&&function($,ue){var _e=$,Ae=!1,Re=($.x+ue.x)/2,Ze=($.y+ue.y)/2;do{_e.y>Ze!=_e.next.y>Ze&&_e.next.y!==_e.y&&Re<(_e.next.x-_e.x)*(Ze-_e.y)/(_e.next.y-_e.y)+_e.x&&(Ae=!Ae),_e=_e.next}while(_e!==$);return Ae}(k,R)&&(qo(k.prev,k,R.prev)||qo(k,R.prev,R))||du(k,R)&&qo(k.prev,k,k.next)>0&&qo(R.prev,R,R.next)>0)}function qo(k,R,$){return(R.y-k.y)*($.x-R.x)-(R.x-k.x)*($.y-R.y)}function du(k,R){return k.x===R.x&&k.y===R.y}function Bh(k,R,$,ue){var _e=Cf(qo(k,R,$)),Ae=Cf(qo(k,R,ue)),Re=Cf(qo($,ue,k)),Ze=Cf(qo($,ue,R));return _e!==Ae&&Re!==Ze||!(0!==_e||!$u(k,$,R))||!(0!==Ae||!$u(k,ue,R))||!(0!==Re||!$u($,k,ue))||!(0!==Ze||!$u($,R,ue))}function $u(k,R,$){return R.x<=Math.max(k.x,$.x)&&R.x>=Math.min(k.x,$.x)&&R.y<=Math.max(k.y,$.y)&&R.y>=Math.min(k.y,$.y)}function Cf(k){return k>0?1:k<0?-1:0}function hu(k,R){return qo(k.prev,k,k.next)<0?qo(k,R,k.next)>=0&&qo(k,k.prev,R)>=0:qo(k,R,k.prev)<0||qo(k,k.next,R)<0}function jh(k,R){var $=new Md(k.i,k.x,k.y),ue=new Md(R.i,R.x,R.y),_e=k.next,Ae=R.prev;return k.next=R,R.prev=k,$.next=_e,_e.prev=$,ue.next=$,$.prev=ue,Ae.next=ue,ue.prev=Ae,ue}function Vh(k,R,$,ue){var _e=new Md(k,R,$);return ue?(_e.next=ue.next,_e.prev=ue,ue.next.prev=_e,ue.next=_e):(_e.prev=_e,_e.next=_e),_e}function Ju(k){k.next.prev=k.prev,k.prev.next=k.next,k.prevZ&&(k.prevZ.nextZ=k.nextZ),k.nextZ&&(k.nextZ.prevZ=k.prevZ)}function Md(k,R,$){this.i=k,this.x=R,this.y=$,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kd(k,R,$,ue){for(var _e=0,Ae=R,Re=$-ue;Ae<$;Ae+=ue)_e+=(k[Re]-k[Ae])*(k[Ae+1]+k[Re+1]),Re=Ae;return _e}function n0(k,R,$,ue,_e){!function Ae(Re,Ze,lt,_t,At){for(;_t>lt;){if(_t-lt>600){var Wt=_t-lt+1,on=Ze-lt+1,en=Math.log(Wt),_n=.5*Math.exp(2*en/3),Rn=.5*Math.sqrt(en*_n*(Wt-_n)/Wt)*(on-Wt/2<0?-1:1);Ae(Re,Ze,Math.max(lt,Math.floor(Ze-on*_n/Wt+Rn)),Math.min(_t,Math.floor(Ze+(Wt-on)*_n/Wt+Rn)),At)}var rr=Re[Ze],ir=lt,hr=_t;for(Ku(Re,lt,Ze),At(Re[_t],rr)>0&&Ku(Re,lt,_t);ir<hr;){for(Ku(Re,ir,hr),ir++,hr--;At(Re[ir],rr)<0;)ir++;for(;At(Re[hr],rr)>0;)hr--}0===At(Re[lt],rr)?Ku(Re,lt,hr):Ku(Re,++hr,_t),hr<=Ze&&(lt=hr+1),Ze<=hr&&(_t=hr-1)}}(k,R,$||0,ue||k.length-1,_e||r0)}function Ku(k,R,$){var ue=k[R];k[R]=k[$],k[$]=ue}function r0(k,R){return k<R?-1:k>R?1:0}function Ad(k,R){var $=k.length;if($<=1)return[k];for(var ue,_e,Ae=[],Re=0;Re<$;Re++){var Ze=L(k[Re]);0!==Ze&&(k[Re].area=Math.abs(Ze),void 0===_e&&(_e=Ze<0),_e===Ze<0?(ue&&Ae.push(ue),ue=[k[Re]]):ue.push(k[Re]))}if(ue&&Ae.push(ue),R>1)for(var lt=0;lt<Ae.length;lt++)Ae[lt].length<=R||(n0(Ae[lt],R,1,Ae[lt].length-1,a0),Ae[lt]=Ae[lt].slice(0,R));return Ae}function a0(k,R){return R.area-k.area}function Sf(k,R,$){for(var ue=$.patternDependencies,_e=!1,Ae=0,Re=R;Ae<Re.length;Ae+=1){var Ze=Re[Ae].paint.get(k+"-pattern");Ze.isConstant()||(_e=!0);var lt=Ze.constantOr(null);lt&&(_e=!0,ue[lt.to]=!0,ue[lt.from]=!0)}return _e}function Ef(k,R,$,ue,_e){for(var Ae=_e.patternDependencies,Re=0,Ze=R;Re<Ze.length;Re+=1){var lt=Ze[Re],_t=lt.paint.get(k+"-pattern").value;if("constant"!==_t.kind){var At=_t.evaluate({zoom:ue-1},$,{},_e.availableImages),Wt=_t.evaluate({zoom:ue},$,{},_e.availableImages),on=_t.evaluate({zoom:ue+1},$,{},_e.availableImages);Wt=Wt&&Wt.name?Wt.name:Wt,on=on&&on.name?on.name:on,Ae[At=At&&At.name?At.name:At]=!0,Ae[Wt]=!0,Ae[on]=!0,$.patterns[lt.id]={min:At,mid:Wt,max:on}}}return $}Uc.deviation=function(k,R,$,ue){var _e=R&&R.length,Re=Math.abs(kd(k,0,_e?R[0]*$:k.length,$));if(_e)for(var Ze=0,lt=R.length;Ze<lt;Ze++)Re-=Math.abs(kd(k,R[Ze]*$,Ze<lt-1?R[Ze+1]*$:k.length,$));var Wt=0;for(Ze=0;Ze<ue.length;Ze+=3){var on=ue[Ze]*$,en=ue[Ze+1]*$,_n=ue[Ze+2]*$;Wt+=Math.abs((k[on]-k[_n])*(k[en+1]-k[on+1])-(k[on]-k[en])*(k[_n+1]-k[on+1]))}return 0===Re&&0===Wt?0:Math.abs((Wt-Re)/Re)},Uc.flatten=function(k){for(var R=k[0][0].length,$={vertices:[],holes:[],dimensions:R},ue=0,_e=0;_e<k.length;_e++){for(var Ae=0;Ae<k[_e].length;Ae++)for(var Re=0;Re<R;Re++)$.vertices.push(k[_e][Ae][Re]);_e>0&&$.holes.push(ue+=k[_e-1].length)}return $},vc.default=Ph;var Tl=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=k.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tl,this.indexArray=new Go,this.indexArray2=new B,this.programConfigurations=new Ha(Af,k.layers,k.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};Tl.prototype.populate=function(k,R,$){this.hasPattern=Sf("fill",this.layers,R);for(var ue=this.layers[0].layout.get("fill-sort-key"),_e=[],Ae=0,Re=k;Ae<Re.length;Ae+=1){var Ze=Re[Ae],lt=Ze.feature,_t=Ze.id,At=Ze.index,Wt=Ze.sourceLayerIndex,on=this.layers[0]._featureFilter.needGeometry,en={type:lt.type,id:_t,properties:lt.properties,geometry:on?Ka(lt):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),en,$)){on||(en.geometry=Ka(lt));var _n=ue?ue.evaluate(en,{},$,R.availableImages):void 0;_e.push({id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:Wt,index:At,geometry:en.geometry,patterns:{},sortKey:_n})}}ue&&_e.sort(function(li,Ti){return li.sortKey-Ti.sortKey});for(var Zn=0,Wn=_e;Zn<Wn.length;Zn+=1){var rr=Wn[Zn],hr=rr.geometry,Er=rr.index,zr=rr.sourceLayerIndex;if(this.hasPattern){var ni=Ef("fill",this.layers,rr,this.zoom,R);this.patternFeatures.push(ni)}else this.addFeature(rr,hr,Er,$,{});R.featureIndex.insert(k[Er].feature,hr,Er,zr,this.index)}},Tl.prototype.update=function(k,R,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,R,this.stateDependentLayers,$)},Tl.prototype.addFeatures=function(k,R,$){for(var ue=0,_e=this.patternFeatures;ue<_e.length;ue+=1){var Ae=_e[ue];this.addFeature(Ae,Ae.geometry,Ae.index,R,$)}},Tl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Tl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Tl.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Af),this.indexBuffer=k.createIndexBuffer(this.indexArray),this.indexBuffer2=k.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(k),this.uploaded=!0},Tl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Tl.prototype.addFeature=function(k,R,$,ue,_e){for(var Ae=0,Re=Ad(R,500);Ae<Re.length;Ae+=1){for(var Ze=Re[Ae],lt=0,_t=0,At=Ze;_t<At.length;_t+=1)lt+=At[_t].length;for(var Wt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray),on=Wt.vertexLength,en=[],_n=[],Rn=0,Zn=Ze;Rn<Zn.length;Rn+=1){var Wn=Zn[Rn];if(0!==Wn.length){Wn!==Ze[0]&&_n.push(en.length/2);var rr=this.segments2.prepareSegment(Wn.length,this.layoutVertexArray,this.indexArray2),ir=rr.vertexLength;this.layoutVertexArray.emplaceBack(Wn[0].x,Wn[0].y),this.indexArray2.emplaceBack(ir+Wn.length-1,ir),en.push(Wn[0].x),en.push(Wn[0].y);for(var hr=1;hr<Wn.length;hr++)this.layoutVertexArray.emplaceBack(Wn[hr].x,Wn[hr].y),this.indexArray2.emplaceBack(ir+hr-1,ir+hr),en.push(Wn[hr].x),en.push(Wn[hr].y);rr.vertexLength+=Wn.length,rr.primitiveLength+=Wn.length}}for(var Er=vc(en,_n),zr=0;zr<Er.length;zr+=3)this.indexArray.emplaceBack(on+Er[zr],on+Er[zr+1],on+Er[zr+2]);Wt.vertexLength+=lt,Wt.primitiveLength+=Er.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,$,_e,ue)},fr("FillBucket",Tl,{omit:["layers","patternFeatures"]});var Uh=new hs({"fill-sort-key":new ji(Ce.layout_fill["fill-sort-key"])}),Hh={paint:new hs({"fill-antialias":new Si(Ce.paint_fill["fill-antialias"]),"fill-opacity":new ji(Ce.paint_fill["fill-opacity"]),"fill-color":new ji(Ce.paint_fill["fill-color"]),"fill-outline-color":new ji(Ce.paint_fill["fill-outline-color"]),"fill-translate":new Si(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new Si(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Nl(Ce.paint_fill["fill-pattern"])}),layout:Uh},Cd=function(k){function R($){k.call(this,$,Hh)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.recalculate=function($,ue){k.prototype.recalculate.call(this,$,ue);var _e=this.paint._values["fill-outline-color"];"constant"===_e.value.kind&&void 0===_e.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},R.prototype.createBucket=function($){return new Tl($)},R.prototype.queryRadius=function(){return ps(this.paint.get("fill-translate"))},R.prototype.queryIntersectsFeature=function($,ue,_e,Ae,Re,Ze,lt){return zl(ms($,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,lt),Ae)},R.prototype.isTileClipped=function(){return!0},R}(Rs),Gh=Ea([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qh=pu;function pu(k,R,$,ue,_e){this.properties={},this.extent=$,this.type=0,this._pbf=k,this._geometry=-1,this._keys=ue,this._values=_e,k.readFields(o0,this,R)}function o0(k,R,$){1==k?R.id=$.readVarint():2==k?function(ue,_e){for(var Ae=ue.readVarint()+ue.pos;ue.pos<Ae;){var Re=_e._keys[ue.readVarint()],Ze=_e._values[ue.readVarint()];_e.properties[Re]=Ze}}($,R):3==k?R.type=$.readVarint():4==k&&(R._geometry=$.pos)}function s0(k){for(var R,$,ue=0,_e=0,Ae=k.length,Re=Ae-1;_e<Ae;Re=_e++)ue+=(($=k[Re]).x-(R=k[_e]).x)*(R.y+$.y);return ue}pu.types=["Unknown","Point","LineString","Polygon"],pu.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var R,$=k.readVarint()+k.pos,ue=1,_e=0,Ae=0,Re=0,Ze=[];k.pos<$;){if(_e<=0){var lt=k.readVarint();ue=7&lt,_e=lt>>3}if(_e--,1===ue||2===ue)Ae+=k.readSVarint(),Re+=k.readSVarint(),1===ue&&(R&&Ze.push(R),R=[]),R.push(new n(Ae,Re));else{if(7!==ue)throw new Error("unknown command "+ue);R&&R.push(R[0].clone())}}return R&&Ze.push(R),Ze},pu.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var R=k.readVarint()+k.pos,$=1,ue=0,_e=0,Ae=0,Re=1/0,Ze=-1/0,lt=1/0,_t=-1/0;k.pos<R;){if(ue<=0){var At=k.readVarint();$=7&At,ue=At>>3}if(ue--,1===$||2===$)(_e+=k.readSVarint())<Re&&(Re=_e),_e>Ze&&(Ze=_e),(Ae+=k.readSVarint())<lt&&(lt=Ae),Ae>_t&&(_t=Ae);else if(7!==$)throw new Error("unknown command "+$)}return[Re,lt,Ze,_t]},pu.prototype.toGeoJSON=function(k,R,$){var ue,_e,Ae=this.extent*Math.pow(2,$),Re=this.extent*k,Ze=this.extent*R,lt=this.loadGeometry(),_t=pu.types[this.type];function At(en){for(var _n=0;_n<en.length;_n++){var Rn=en[_n];en[_n]=[360*(Rn.x+Re)/Ae-180,360/Math.PI*Math.atan(Math.exp((180-360*(Rn.y+Ze)/Ae)*Math.PI/180))-90]}}switch(this.type){case 1:var Wt=[];for(ue=0;ue<lt.length;ue++)Wt[ue]=lt[ue][0];At(lt=Wt);break;case 2:for(ue=0;ue<lt.length;ue++)At(lt[ue]);break;case 3:for(lt=function(en){var _n=en.length;if(_n<=1)return[en];for(var Rn,Zn,Wn=[],rr=0;rr<_n;rr++){var ir=s0(en[rr]);0!==ir&&(void 0===Zn&&(Zn=ir<0),Zn===ir<0?(Rn&&Wn.push(Rn),Rn=[en[rr]]):Rn.push(en[rr]))}return Rn&&Wn.push(Rn),Wn}(lt),ue=0;ue<lt.length;ue++)for(_e=0;_e<lt[ue].length;_e++)At(lt[ue][_e])}1===lt.length?lt=lt[0]:_t="Multi"+_t;var on={type:"Feature",geometry:{type:_t,coordinates:lt},properties:this.properties};return"id"in this&&(on.id=this.id),on};var Yh=Zh;function Zh(k,R){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=k,this._keys=[],this._values=[],this._features=[],k.readFields(l0,this,R),this.length=this._features.length}function l0(k,R,$){15===k?R.version=$.readVarint():1===k?R.name=$.readString():5===k?R.extent=$.readVarint():2===k?R._features.push($.pos):3===k?R._keys.push($.readString()):4===k&&R._values.push(function(ue){for(var _e=null,Ae=ue.readVarint()+ue.pos;ue.pos<Ae;){var Re=ue.readVarint()>>3;_e=1===Re?ue.readString():2===Re?ue.readFloat():3===Re?ue.readDouble():4===Re?ue.readVarint64():5===Re?ue.readVarint():6===Re?ue.readSVarint():7===Re?ue.readBoolean():null}return _e}($))}function c0(k,R,$){if(3===k){var ue=new Yh($,$.readVarint()+$.pos);ue.length&&(R[ue.name]=ue)}}Zh.prototype.feature=function(k){if(k<0||k>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[k];var R=this._pbf.readVarint()+this._pbf.pos;return new qh(this._pbf,R,this.extent,this._keys,this._values)};var mu={VectorTile:function(k,R){this.layers=k.readFields(c0,{},R)},VectorTileFeature:qh,VectorTileLayer:Yh},u0=mu.VectorTileFeature.types,Sd=Math.pow(2,13);function Gc(k,R,$,ue,_e,Ae,Re,Ze){k.emplaceBack(R,$,2*Math.floor(ue*Sd)+Re,_e*Sd*2,Ae*Sd*2,Math.round(Ze))}var pl=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=k.index,this.hasPattern=!1,this.layoutVertexArray=new fl,this.indexArray=new Go,this.programConfigurations=new Ha(Gh,k.layers,k.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};function Wh(k,R){return k.x===R.x&&(k.x<0||k.x>8192)||k.y===R.y&&(k.y<0||k.y>8192)}function Xh(k){return k.every(function(R){return R.x<0})||k.every(function(R){return R.x>8192})||k.every(function(R){return R.y<0})||k.every(function(R){return R.y>8192})}pl.prototype.populate=function(k,R,$){this.features=[],this.hasPattern=Sf("fill-extrusion",this.layers,R);for(var ue=0,_e=k;ue<_e.length;ue+=1){var Ae=_e[ue],Re=Ae.feature,Ze=Ae.id,lt=Ae.index,_t=Ae.sourceLayerIndex,At=this.layers[0]._featureFilter.needGeometry,Wt={type:Re.type,id:Ze,properties:Re.properties,geometry:At?Ka(Re):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Wt,$)){var on={id:Ze,sourceLayerIndex:_t,index:lt,geometry:At?Wt.geometry:Ka(Re),properties:Re.properties,type:Re.type,patterns:{}};void 0!==Re.id&&(on.id=Re.id),this.hasPattern?this.features.push(Ef("fill-extrusion",this.layers,on,this.zoom,R)):this.addFeature(on,on.geometry,lt,$,{}),R.featureIndex.insert(Re,on.geometry,lt,_t,this.index,!0)}}},pl.prototype.addFeatures=function(k,R,$){for(var ue=0,_e=this.features;ue<_e.length;ue+=1){var Ae=_e[ue];this.addFeature(Ae,Ae.geometry,Ae.index,R,$)}},pl.prototype.update=function(k,R,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,R,this.stateDependentLayers,$)},pl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},pl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pl.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Gh),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},pl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pl.prototype.addFeature=function(k,R,$,ue,_e){for(var Ae=0,Re=Ad(R,500);Ae<Re.length;Ae+=1){for(var Ze=Re[Ae],lt=0,_t=0,At=Ze;_t<At.length;_t+=1)lt+=At[_t].length;for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),on=0,en=Ze;on<en.length;on+=1){var _n=en[on];if(0!==_n.length&&!Xh(_n))for(var Rn=0,Zn=0;Zn<_n.length;Zn++){var Wn=_n[Zn];if(Zn>=1){var rr=_n[Zn-1];if(!Wh(Wn,rr)){Wt.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ir=Wn.sub(rr)._perp()._unit(),hr=rr.dist(Wn);Rn+hr>32768&&(Rn=0),Gc(this.layoutVertexArray,Wn.x,Wn.y,ir.x,ir.y,0,0,Rn),Gc(this.layoutVertexArray,Wn.x,Wn.y,ir.x,ir.y,0,1,Rn),Gc(this.layoutVertexArray,rr.x,rr.y,ir.x,ir.y,0,0,Rn+=hr),Gc(this.layoutVertexArray,rr.x,rr.y,ir.x,ir.y,0,1,Rn);var Er=Wt.vertexLength;this.indexArray.emplaceBack(Er,Er+2,Er+1),this.indexArray.emplaceBack(Er+1,Er+2,Er+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+lt>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(lt,this.layoutVertexArray,this.indexArray)),"Polygon"===u0[k.type]){for(var zr=[],ni=[],ti=Wt.vertexLength,li=0,Ti=Ze;li<Ti.length;li+=1){var Mi=Ti[li];if(0!==Mi.length){Mi!==Ze[0]&&ni.push(zr.length/2);for(var mi=0;mi<Mi.length;mi++){var Pi=Mi[mi];Gc(this.layoutVertexArray,Pi.x,Pi.y,0,0,1,1,0),zr.push(Pi.x),zr.push(Pi.y)}}}for(var Ei=vc(zr,ni),Ai=0;Ai<Ei.length;Ai+=3)this.indexArray.emplaceBack(ti+Ei[Ai],ti+Ei[Ai+2],ti+Ei[Ai+1]);Wt.primitiveLength+=Ei.length/3,Wt.vertexLength+=lt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,$,_e,ue)},fr("FillExtrusionBucket",pl,{omit:["layers","features"]});var Ed={paint:new hs({"fill-extrusion-opacity":new Si(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ji(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Si(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Si(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Nl(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ji(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ji(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Si(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},qc=function(k){function R($){k.call(this,$,Ed)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.createBucket=function($){return new pl($)},R.prototype.queryRadius=function(){return ps(this.paint.get("fill-extrusion-translate"))},R.prototype.is3D=function(){return!0},R.prototype.queryIntersectsFeature=function($,ue,_e,Ae,Re,Ze,lt,_t){var At=ms($,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,lt),Wt=this.paint.get("fill-extrusion-height").evaluate(ue,_e),on=this.paint.get("fill-extrusion-base").evaluate(ue,_e),en=function(Rn,Zn,Wn,rr){for(var ir=[],hr=0,Er=Rn;hr<Er.length;hr+=1){var zr=Er[hr],ni=[zr.x,zr.y,0,1];gs(ni,ni,Zn),ir.push(new n(ni[0]/ni[3],ni[1]/ni[3]))}return ir}(At,_t),_n=function(Rn,Zn,Wn,rr){for(var ir=[],hr=[],Er=rr[8]*Zn,zr=rr[9]*Zn,ni=rr[10]*Zn,ti=rr[11]*Zn,li=rr[8]*Wn,Ti=rr[9]*Wn,Mi=rr[10]*Wn,mi=rr[11]*Wn,Pi=0,Ei=Rn;Pi<Ei.length;Pi+=1){for(var ga=[],da=[],Ma=0,Vi=Ei[Pi];Ma<Vi.length;Ma+=1){var pa=Vi[Ma],Ga=pa.x,Ba=pa.y,Qa=rr[0]*Ga+rr[4]*Ba+rr[12],qa=rr[1]*Ga+rr[5]*Ba+rr[13],zo=rr[2]*Ga+rr[6]*Ba+rr[14],eo=rr[3]*Ga+rr[7]*Ba+rr[15],ls=zo+ni,ts=eo+ti,cs=Qa+li,Cs=qa+Ti,us=zo+Mi,Bo=eo+mi,ss=new n((Qa+Er)/ts,(qa+zr)/ts);ss.z=ls/ts,ga.push(ss);var Zi=new n(cs/Bo,Cs/Bo);Zi.z=us/Bo,da.push(Zi)}ir.push(ga),hr.push(da)}return[ir,hr]}(Ae,on,Wt,_t);return function(Rn,Zn,Wn){var rr=1/0;zl(Wn,Zn)&&(rr=$h(Wn,Zn[0]));for(var ir=0;ir<Zn.length;ir++)for(var hr=Zn[ir],Er=Rn[ir],zr=0;zr<hr.length-1;zr++){var ni=hr[zr],Mi=[ni,hr[zr+1],Er[zr+1],Er[zr],ni];Ms(Wn,Mi)&&(rr=Math.min(rr,$h(Wn,Mi)))}return rr!==1/0&&rr}(_n[0],_n[1],en)},R}(Rs);function gu(k,R){return k.x*R.x+k.y*R.y}function $h(k,R){if(1===k.length){for(var $,ue=0,_e=R[ue++];!$||_e.equals($);)if(!($=R[ue++]))return 1/0;for(;ue<R.length;ue++){var Ae=R[ue],Re=k[0],Ze=$.sub(_e),lt=Ae.sub(_e),_t=Re.sub(_e),At=gu(Ze,Ze),Wt=gu(Ze,lt),on=gu(lt,lt),en=gu(_t,Ze),_n=gu(_t,lt),Rn=At*on-Wt*Wt,Zn=(on*en-Wt*_n)/Rn,Wn=(At*_n-Wt*en)/Rn,ir=_e.z*(1-Zn-Wn)+$.z*Zn+Ae.z*Wn;if(isFinite(ir))return ir}return 1/0}for(var hr=1/0,Er=0,zr=R;Er<zr.length;Er+=1)hr=Math.min(hr,zr[Er].z);return hr}var Dd=Ea([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,f0=mu.VectorTileFeature.types,d0=Math.cos(Math.PI/180*37.5),Jh=Math.pow(2,14)/.5,Ns=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(R){return R.id}),this.index=k.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new El,this.indexArray=new Go,this.programConfigurations=new Ha(Dd,k.layers,k.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(R){return R.isStateDependent()}).map(function(R){return R.id})};Ns.prototype.populate=function(k,R,$){this.hasPattern=Sf("line",this.layers,R);for(var ue=this.layers[0].layout.get("line-sort-key"),_e=[],Ae=0,Re=k;Ae<Re.length;Ae+=1){var Ze=Re[Ae],lt=Ze.feature,_t=Ze.id,At=Ze.index,Wt=Ze.sourceLayerIndex,on=this.layers[0]._featureFilter.needGeometry,en={type:lt.type,id:_t,properties:lt.properties,geometry:on?Ka(lt):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),en,$)){on||(en.geometry=Ka(lt));var _n=ue?ue.evaluate(en,{},$):void 0;_e.push({id:_t,properties:lt.properties,type:lt.type,sourceLayerIndex:Wt,index:At,geometry:en.geometry,patterns:{},sortKey:_n})}}ue&&_e.sort(function(li,Ti){return li.sortKey-Ti.sortKey});for(var Zn=0,Wn=_e;Zn<Wn.length;Zn+=1){var rr=Wn[Zn],hr=rr.geometry,Er=rr.index,zr=rr.sourceLayerIndex;if(this.hasPattern){var ni=Ef("line",this.layers,rr,this.zoom,R);this.patternFeatures.push(ni)}else this.addFeature(rr,hr,Er,$,{});R.featureIndex.insert(k[Er].feature,hr,Er,zr,this.index)}},Ns.prototype.update=function(k,R,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,R,this.stateDependentLayers,$)},Ns.prototype.addFeatures=function(k,R,$){for(var ue=0,_e=this.patternFeatures;ue<_e.length;ue+=1){var Ae=_e[ue];this.addFeature(Ae,Ae.geometry,Ae.index,R,$)}},Ns.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ns.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ns.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Dd),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},Ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ns.prototype.addFeature=function(k,R,$,ue,_e){for(var Ae=this.layers[0].layout,Re=Ae.get("line-join").evaluate(k,{}),Ze=Ae.get("line-cap"),lt=Ae.get("line-miter-limit"),_t=Ae.get("line-round-limit"),At=0,Wt=R;At<Wt.length;At+=1)this.addLine(Wt[At],k,Re,Ze,lt,_t);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,$,_e,ue)},Ns.prototype.addLine=function(k,R,$,ue,_e,Ae){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,R.properties&&R.properties.hasOwnProperty("mapbox_clip_start")&&R.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+R.properties.mapbox_clip_start,this.clipEnd=+R.properties.mapbox_clip_end;for(var Re=0;Re<k.length-1;Re++)this.totalDistance+=k[Re].dist(k[Re+1]);this.updateScaledDistance()}for(var Ze="Polygon"===f0[R.type],lt=k.length;lt>=2&&k[lt-1].equals(k[lt-2]);)lt--;for(var _t=0;_t<lt-1&&k[_t].equals(k[_t+1]);)_t++;if(!(lt<(Ze?3:2))){"bevel"===$&&(_e=1.05);var At,Wt=this.overscaling<=16?122880/(512*this.overscaling):0,on=this.segments.prepareSegment(10*lt,this.layoutVertexArray,this.indexArray),en=void 0,_n=void 0,Rn=void 0,Zn=void 0;this.e1=this.e2=-1,Ze&&(Zn=k[_t].sub(At=k[lt-2])._unit()._perp());for(var Wn=_t;Wn<lt;Wn++)if(!(_n=Wn===lt-1?Ze?k[_t+1]:void 0:k[Wn+1])||!k[Wn].equals(_n)){Zn&&(Rn=Zn),At&&(en=At),At=k[Wn],Zn=_n?_n.sub(At)._unit()._perp():Rn;var rr=(Rn=Rn||Zn).add(Zn);0===rr.x&&0===rr.y||rr._unit();var ir=Rn.x*Zn.x+Rn.y*Zn.y,hr=rr.x*Zn.x+rr.y*Zn.y,Er=0!==hr?1/hr:1/0,zr=2*Math.sqrt(2-2*hr),ni=hr<d0&&en&&_n,ti=Rn.x*Zn.y-Rn.y*Zn.x>0;if(ni&&Wn>_t){var li=At.dist(en);if(li>2*Wt){var Ti=At.sub(At.sub(en)._mult(Wt/li)._round());this.updateDistance(en,Ti),this.addCurrentVertex(Ti,Rn,0,0,on),en=Ti}}var Mi=en&&_n,mi=Mi?$:Ze?"butt":ue;if(Mi&&"round"===mi&&(Er<Ae?mi="miter":Er<=2&&(mi="fakeround")),"miter"===mi&&Er>_e&&(mi="bevel"),"bevel"===mi&&(Er>2&&(mi="flipbevel"),Er<_e&&(mi="miter")),en&&this.updateDistance(en,At),"miter"===mi)rr._mult(Er),this.addCurrentVertex(At,rr,0,0,on);else if("flipbevel"===mi){if(Er>100)rr=Zn.mult(-1);else{var Pi=Er*Rn.add(Zn).mag()/Rn.sub(Zn).mag();rr._perp()._mult(Pi*(ti?-1:1))}this.addCurrentVertex(At,rr,0,0,on),this.addCurrentVertex(At,rr.mult(-1),0,0,on)}else if("bevel"===mi||"fakeround"===mi){var Ei=-Math.sqrt(Er*Er-1),Ai=ti?Ei:0,ga=ti?0:Ei;if(en&&this.addCurrentVertex(At,Rn,Ai,ga,on),"fakeround"===mi)for(var da=Math.round(180*zr/Math.PI/20),Ma=1;Ma<da;Ma++){var Vi=Ma/da;if(.5!==Vi){var pa=Vi-.5;Vi+=Vi*pa*(Vi-1)*((1.0904+ir*(ir*(3.55645-1.43519*ir)-3.2452))*pa*pa+(.848013+ir*(.215638*ir-1.06021)))}var Ga=Zn.sub(Rn)._mult(Vi)._add(Rn)._unit()._mult(ti?-1:1);this.addHalfVertex(At,Ga.x,Ga.y,!1,ti,0,on)}_n&&this.addCurrentVertex(At,Zn,-Ai,-ga,on)}else if("butt"===mi)this.addCurrentVertex(At,rr,0,0,on);else if("square"===mi){var Ba=en?1:-1;this.addCurrentVertex(At,rr,Ba,Ba,on)}else"round"===mi&&(en&&(this.addCurrentVertex(At,Rn,0,0,on),this.addCurrentVertex(At,Rn,1,1,on,!0)),_n&&(this.addCurrentVertex(At,Zn,-1,-1,on,!0),this.addCurrentVertex(At,Zn,0,0,on)));if(ni&&Wn<lt-1){var Qa=At.dist(_n);if(Qa>2*Wt){var qa=At.add(_n.sub(At)._mult(Wt/Qa)._round());this.updateDistance(At,qa),this.addCurrentVertex(qa,Zn,0,0,on),At=qa}}}}},Ns.prototype.addCurrentVertex=function(k,R,$,ue,_e,Ae){void 0===Ae&&(Ae=!1);var lt=R.y*ue-R.x,_t=-R.y-R.x*ue;this.addHalfVertex(k,R.x+R.y*$,R.y-R.x*$,Ae,!1,$,_e),this.addHalfVertex(k,lt,_t,Ae,!0,-ue,_e),this.distance>Jh/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(k,R,$,ue,_e,Ae))},Ns.prototype.addHalfVertex=function(k,R,$,ue,_e,Ae,Re){var _t=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((k.x<<1)+(ue?1:0),(k.y<<1)+(_e?1:0),Math.round(63*R)+128,Math.round(63*$)+128,1+(0===Ae?0:Ae<0?-1:1)|(63&_t)<<2,_t>>6);var At=Re.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,At),Re.primitiveLength++),_e?this.e2=At:this.e1=At},Ns.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Jh-1):this.distance},Ns.prototype.updateDistance=function(k,R){this.distance+=k.dist(R),this.updateScaledDistance()},fr("LineBucket",Ns,{omit:["layers","patternFeatures"]});var Qu=new hs({"line-cap":new Si(Ce.layout_line["line-cap"]),"line-join":new ji(Ce.layout_line["line-join"]),"line-miter-limit":new Si(Ce.layout_line["line-miter-limit"]),"line-round-limit":new Si(Ce.layout_line["line-round-limit"]),"line-sort-key":new ji(Ce.layout_line["line-sort-key"])}),Df={paint:new hs({"line-opacity":new ji(Ce.paint_line["line-opacity"]),"line-color":new ji(Ce.paint_line["line-color"]),"line-translate":new Si(Ce.paint_line["line-translate"]),"line-translate-anchor":new Si(Ce.paint_line["line-translate-anchor"]),"line-width":new ji(Ce.paint_line["line-width"]),"line-gap-width":new ji(Ce.paint_line["line-gap-width"]),"line-offset":new ji(Ce.paint_line["line-offset"]),"line-blur":new ji(Ce.paint_line["line-blur"]),"line-dasharray":new Fl(Ce.paint_line["line-dasharray"]),"line-pattern":new Nl(Ce.paint_line["line-pattern"]),"line-gradient":new $s(Ce.paint_line["line-gradient"])}),layout:Qu},Kh=new(function(k){function R(){k.apply(this,arguments)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.possiblyEvaluate=function($,ue){return ue=new Sa(Math.floor(ue.zoom),{now:ue.now,fadeDuration:ue.fadeDuration,zoomHistory:ue.zoomHistory,transition:ue.transition}),k.prototype.possiblyEvaluate.call(this,$,ue)},R.prototype.evaluate=function($,ue,_e,Ae){return ue=s({},ue,{zoom:Math.floor(ue.zoom)}),k.prototype.evaluate.call(this,$,ue,_e,Ae)},R}(ji))(Df.paint.properties["line-width"].specification);Kh.useIntegerZoom=!0;var Od=function(k){function R($){k.call(this,$,Df)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype._handleSpecialPaintPropertyUpdate=function($){"line-gradient"===$&&this._updateGradient()},R.prototype._updateGradient=function(){this.gradient=xd(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},R.prototype.recalculate=function($,ue){k.prototype.recalculate.call(this,$,ue),this.paint._values["line-floorwidth"]=Kh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)},R.prototype.createBucket=function($){return new Ns($)},R.prototype.queryRadius=function($){var ue=$,_e=Of(oo("line-width",this,ue),oo("line-gap-width",this,ue)),Ae=oo("line-offset",this,ue);return _e/2+Math.abs(Ae)+ps(this.paint.get("line-translate"))},R.prototype.queryIntersectsFeature=function($,ue,_e,Ae,Re,Ze,lt){var _t=ms($,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,lt),At=lt/2*Of(this.paint.get("line-width").evaluate(ue,_e),this.paint.get("line-gap-width").evaluate(ue,_e)),Wt=this.paint.get("line-offset").evaluate(ue,_e);return Wt&&(Ae=function(on,en){for(var _n=[],Rn=new n(0,0),Zn=0;Zn<on.length;Zn++){for(var Wn=on[Zn],rr=[],ir=0;ir<Wn.length;ir++){var Er=Wn[ir],zr=Wn[ir+1],ni=0===ir?Rn:Er.sub(Wn[ir-1])._unit()._perp(),ti=ir===Wn.length-1?Rn:zr.sub(Er)._unit()._perp(),li=ni._add(ti)._unit();li._mult(1/(li.x*ti.x+li.y*ti.y)),rr.push(li._mult(en)._add(Er))}_n.push(rr)}return _n}(Ae,Wt*lt)),function(on,en,_n){for(var Rn=0;Rn<en.length;Rn++){var Zn=en[Rn];if(on.length>=3)for(var Wn=0;Wn<Zn.length;Wn++)if(Js(on,Zn[Wn]))return!0;if(Nc(on,Zn,_n))return!0}return!1}(_t,Ae,At)},R.prototype.isTileClipped=function(){return!0},R}(Rs);function Of(k,R){return R>0?R+2*k:k}var vu=Ea([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qh=Ea([{name:"a_projected_pos",components:3,type:"Float32"}],4),h0=(Ea([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ea([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ld=(Ea([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ea([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ep=Ea([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function tp(k,R,$){return k.sections.forEach(function(ue){var _e,Re,Ze;ue.text=(_e=ue.text,Re=$,"uppercase"===(Ze=R.layout.get("text-transform").evaluate(Re,{}))?_e=_e.toLocaleUpperCase():"lowercase"===Ze&&(_e=_e.toLocaleLowerCase()),Uo.applyArabicShaping&&(_e=Uo.applyArabicShaping(_e)),_e)}),k}Ea([{name:"triangle",components:3,type:"Uint16"}]),Ea([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ea([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ea([{type:"Float32",name:"offsetX"}]),Ea([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var yu={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Id=function(k,R,$,ue,_e){var Ae,Re,Ze=8*_e-ue-1,lt=(1<<Ze)-1,_t=lt>>1,At=-7,Wt=$?_e-1:0,on=$?-1:1,en=k[R+Wt];for(Wt+=on,Ae=en&(1<<-At)-1,en>>=-At,At+=Ze;At>0;Ae=256*Ae+k[R+Wt],Wt+=on,At-=8);for(Re=Ae&(1<<-At)-1,Ae>>=-At,At+=ue;At>0;Re=256*Re+k[R+Wt],Wt+=on,At-=8);if(0===Ae)Ae=1-_t;else{if(Ae===lt)return Re?NaN:1/0*(en?-1:1);Re+=Math.pow(2,ue),Ae-=_t}return(en?-1:1)*Re*Math.pow(2,Ae-ue)},np=function(k,R,$,ue,_e,Ae){var Re,Ze,lt,_t=8*Ae-_e-1,At=(1<<_t)-1,Wt=At>>1,on=23===_e?Math.pow(2,-24)-Math.pow(2,-77):0,en=ue?0:Ae-1,_n=ue?1:-1,Rn=R<0||0===R&&1/R<0?1:0;for(R=Math.abs(R),isNaN(R)||R===1/0?(Ze=isNaN(R)?1:0,Re=At):(Re=Math.floor(Math.log(R)/Math.LN2),R*(lt=Math.pow(2,-Re))<1&&(Re--,lt*=2),(R+=Re+Wt>=1?on/lt:on*Math.pow(2,1-Wt))*lt>=2&&(Re++,lt/=2),Re+Wt>=At?(Ze=0,Re=At):Re+Wt>=1?(Ze=(R*lt-1)*Math.pow(2,_e),Re+=Wt):(Ze=R*Math.pow(2,Wt-1)*Math.pow(2,_e),Re=0));_e>=8;k[$+en]=255&Ze,en+=_n,Ze/=256,_e-=8);for(Re=Re<<_e|Ze,_t+=_e;_t>0;k[$+en]=255&Re,en+=_n,Re/=256,_t-=8);k[$+en-_n]|=128*Rn},_u=za;function za(k){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(k)?k:new Uint8Array(k||0),this.pos=0,this.type=0,this.length=this.buf.length}za.Varint=0,za.Fixed64=1,za.Bytes=2,za.Fixed32=5;var rp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ec(k){return k.type===za.Bytes?k.readVarint()+k.pos:k.pos+1}function ip(k,R,$){var ue=R<=16383?1:R<=2097151?2:R<=268435455?3:Math.floor(Math.log(R)/(7*Math.LN2));$.realloc(ue);for(var _e=$.pos-1;_e>=k;_e--)$.buf[_e+ue]=$.buf[_e]}function p0(k,R){for(var $=0;$<k.length;$++)R.writeVarint(k[$])}function Pd(k,R){for(var $=0;$<k.length;$++)R.writeSVarint(k[$])}function m0(k,R){for(var $=0;$<k.length;$++)R.writeFloat(k[$])}function g0(k,R){for(var $=0;$<k.length;$++)R.writeDouble(k[$])}function ap(k,R){for(var $=0;$<k.length;$++)R.writeBoolean(k[$])}function op(k,R){for(var $=0;$<k.length;$++)R.writeFixed32(k[$])}function tc(k,R){for(var $=0;$<k.length;$++)R.writeSFixed32(k[$])}function v0(k,R){for(var $=0;$<k.length;$++)R.writeFixed64(k[$])}function y0(k,R){for(var $=0;$<k.length;$++)R.writeSFixed64(k[$])}function Lf(k,R){return(k[R]|k[R+1]<<8|k[R+2]<<16)+16777216*k[R+3]}function Yc(k,R,$){k[$]=R,k[$+1]=R>>>8,k[$+2]=R>>>16,k[$+3]=R>>>24}function If(k,R){return(k[R]|k[R+1]<<8|k[R+2]<<16)+(k[R+3]<<24)}function sp(k,R,$){1===k&&$.readMessage(lp,R)}function lp(k,R,$){if(3===k){var ue=$.readMessage(cp,{}),Re=ue.width,Ze=ue.height,lt=ue.left,_t=ue.top,At=ue.advance;R.push({id:ue.id,bitmap:new jl({width:Re+6,height:Ze+6},ue.bitmap),metrics:{width:Re,height:Ze,left:lt,top:_t,advance:At}})}}function cp(k,R,$){1===k?R.id=$.readVarint():2===k?R.bitmap=$.readBytes():3===k?R.width=$.readVarint():4===k?R.height=$.readVarint():5===k?R.left=$.readSVarint():6===k?R.top=$.readSVarint():7===k&&(R.advance=$.readVarint())}function up(k){for(var R=0,$=0,ue=0,_e=k;ue<_e.length;ue+=1){var Ae=_e[ue];R+=Ae.w*Ae.h,$=Math.max($,Ae.w)}k.sort(function(Rn,Zn){return Zn.h-Rn.h});for(var Re=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(R/.95)),$),h:1/0}],Ze=0,lt=0,_t=0,At=k;_t<At.length;_t+=1)for(var Wt=At[_t],on=Re.length-1;on>=0;on--){var en=Re[on];if(!(Wt.w>en.w||Wt.h>en.h)){if(Wt.x=en.x,Wt.y=en.y,lt=Math.max(lt,Wt.y+Wt.h),Ze=Math.max(Ze,Wt.x+Wt.w),Wt.w===en.w&&Wt.h===en.h){var _n=Re.pop();on<Re.length&&(Re[on]=_n)}else Wt.h===en.h?(en.x+=Wt.w,en.w-=Wt.w):Wt.w===en.w?(en.y+=Wt.h,en.h-=Wt.h):(Re.push({x:en.x+Wt.w,y:en.y,w:en.w-Wt.w,h:Wt.h}),en.y+=Wt.h,en.h-=Wt.h);break}}return{w:Ze,h:lt,fill:R/(Ze*lt)||0}}za.prototype={destroy:function(){this.buf=null},readFields:function(k,R,$){for($=$||this.length;this.pos<$;){var ue=this.readVarint(),_e=ue>>3,Ae=this.pos;this.type=7&ue,k(_e,R,this),this.pos===Ae&&this.skip(ue)}return R},readMessage:function(k,R){return this.readFields(k,R,this.readVarint()+this.pos)},readFixed32:function(){var k=Lf(this.buf,this.pos);return this.pos+=4,k},readSFixed32:function(){var k=If(this.buf,this.pos);return this.pos+=4,k},readFixed64:function(){var k=Lf(this.buf,this.pos)+4294967296*Lf(this.buf,this.pos+4);return this.pos+=8,k},readSFixed64:function(){var k=Lf(this.buf,this.pos)+4294967296*If(this.buf,this.pos+4);return this.pos+=8,k},readFloat:function(){var k=Id(this.buf,this.pos,!0,23,4);return this.pos+=4,k},readDouble:function(){var k=Id(this.buf,this.pos,!0,52,8);return this.pos+=8,k},readVarint:function(k){var R,$,ue=this.buf;return R=127&($=ue[this.pos++]),$<128?R:(R|=(127&($=ue[this.pos++]))<<7,$<128?R:(R|=(127&($=ue[this.pos++]))<<14,$<128?R:(R|=(127&($=ue[this.pos++]))<<21,$<128?R:function(_e,Ae,Re){var Ze,lt,_t=Re.buf;if(Ze=(112&(lt=_t[Re.pos++]))>>4,lt<128||(Ze|=(127&(lt=_t[Re.pos++]))<<3,lt<128)||(Ze|=(127&(lt=_t[Re.pos++]))<<10,lt<128)||(Ze|=(127&(lt=_t[Re.pos++]))<<17,lt<128)||(Ze|=(127&(lt=_t[Re.pos++]))<<24,lt<128)||(Ze|=(1&(lt=_t[Re.pos++]))<<31,lt<128))return function bu(k,R,$){return $?4294967296*R+(k>>>0):4294967296*(R>>>0)+(k>>>0)}(_e,Ze,Ae);throw new Error("Expected varint not more than 10 bytes")}(R|=(15&($=ue[this.pos]))<<28,k,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var k=this.readVarint();return k%2==1?(k+1)/-2:k/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var k=this.readVarint()+this.pos,R=this.pos;return this.pos=k,k-R>=12&&rp?rp.decode(this.buf.subarray(R,k)):function($,ue,_e){for(var Ae="",Re=ue;Re<_e;){var Ze,lt,_t,At=$[Re],Wt=null,on=At>239?4:At>223?3:At>191?2:1;if(Re+on>_e)break;1===on?At<128&&(Wt=At):2===on?128==(192&(Ze=$[Re+1]))&&(Wt=(31&At)<<6|63&Ze)<=127&&(Wt=null):3===on?(lt=$[Re+2],128==(192&(Ze=$[Re+1]))&&128==(192&lt)&&((Wt=(15&At)<<12|(63&Ze)<<6|63&lt)<=2047||Wt>=55296&&Wt<=57343)&&(Wt=null)):4===on&&(lt=$[Re+2],_t=$[Re+3],128==(192&(Ze=$[Re+1]))&&128==(192&lt)&&128==(192&_t)&&((Wt=(15&At)<<18|(63&Ze)<<12|(63&lt)<<6|63&_t)<=65535||Wt>=1114112)&&(Wt=null)),null===Wt?(Wt=65533,on=1):Wt>65535&&(Wt-=65536,Ae+=String.fromCharCode(Wt>>>10&1023|55296),Wt=56320|1023&Wt),Ae+=String.fromCharCode(Wt),Re+=on}return Ae}(this.buf,R,k)},readBytes:function(){var k=this.readVarint()+this.pos,R=this.buf.subarray(this.pos,k);return this.pos=k,R},readPackedVarint:function(k,R){if(this.type!==za.Bytes)return k.push(this.readVarint(R));var $=ec(this);for(k=k||[];this.pos<$;)k.push(this.readVarint(R));return k},readPackedSVarint:function(k){if(this.type!==za.Bytes)return k.push(this.readSVarint());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readSVarint());return k},readPackedBoolean:function(k){if(this.type!==za.Bytes)return k.push(this.readBoolean());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readBoolean());return k},readPackedFloat:function(k){if(this.type!==za.Bytes)return k.push(this.readFloat());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readFloat());return k},readPackedDouble:function(k){if(this.type!==za.Bytes)return k.push(this.readDouble());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readDouble());return k},readPackedFixed32:function(k){if(this.type!==za.Bytes)return k.push(this.readFixed32());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readFixed32());return k},readPackedSFixed32:function(k){if(this.type!==za.Bytes)return k.push(this.readSFixed32());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readSFixed32());return k},readPackedFixed64:function(k){if(this.type!==za.Bytes)return k.push(this.readFixed64());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readFixed64());return k},readPackedSFixed64:function(k){if(this.type!==za.Bytes)return k.push(this.readSFixed64());var R=ec(this);for(k=k||[];this.pos<R;)k.push(this.readSFixed64());return k},skip:function(k){var R=7&k;if(R===za.Varint)for(;this.buf[this.pos++]>127;);else if(R===za.Bytes)this.pos=this.readVarint()+this.pos;else if(R===za.Fixed32)this.pos+=4;else{if(R!==za.Fixed64)throw new Error("Unimplemented type: "+R);this.pos+=8}},writeTag:function(k,R){this.writeVarint(k<<3|R)},realloc:function(k){for(var R=this.length||16;R<this.pos+k;)R*=2;if(R!==this.length){var $=new Uint8Array(R);$.set(this.buf),this.buf=$,this.length=R}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(k){this.realloc(4),Yc(this.buf,k,this.pos),this.pos+=4},writeSFixed32:function(k){this.realloc(4),Yc(this.buf,k,this.pos),this.pos+=4},writeFixed64:function(k){this.realloc(8),Yc(this.buf,-1&k,this.pos),Yc(this.buf,Math.floor(k*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(k){this.realloc(8),Yc(this.buf,-1&k,this.pos),Yc(this.buf,Math.floor(k*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(k){(k=+k||0)>268435455||k<0?function(R,$){var ue,_e,Ae,Ze;if(R>=0?(ue=R%4294967296|0,_e=R/4294967296|0):(_e=~(-R/4294967296),4294967295^(ue=~(-R%4294967296))?ue=ue+1|0:(ue=0,_e=_e+1|0)),R>=0x10000000000000000||R<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");$.realloc(10),Ae=ue,(Ze=$).buf[Ze.pos++]=127&Ae|128,Ae>>>=7,Ze.buf[Ze.pos++]=127&Ae|128,Ae>>>=7,Ze.buf[Ze.pos++]=127&Ae|128,Ae>>>=7,Ze.buf[Ze.pos++]=127&Ae|128,Ze.buf[Ze.pos]=127&(Ae>>>=7),function(Ae,Re){var Ze=(7&Ae)<<4;Re.buf[Re.pos++]|=Ze|((Ae>>>=3)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae)))))}(_e,$)}(k,this):(this.realloc(4),this.buf[this.pos++]=127&k|(k>127?128:0),k<=127||(this.buf[this.pos++]=127&(k>>>=7)|(k>127?128:0),k<=127||(this.buf[this.pos++]=127&(k>>>=7)|(k>127?128:0),k<=127||(this.buf[this.pos++]=k>>>7&127))))},writeSVarint:function(k){this.writeVarint(k<0?2*-k-1:2*k)},writeBoolean:function(k){this.writeVarint(Boolean(k))},writeString:function(k){k=String(k),this.realloc(4*k.length),this.pos++;var R=this.pos;this.pos=function(ue,_e,Ae){for(var Re,Ze,lt=0;lt<_e.length;lt++){if((Re=_e.charCodeAt(lt))>55295&&Re<57344){if(!Ze){Re>56319||lt+1===_e.length?(ue[Ae++]=239,ue[Ae++]=191,ue[Ae++]=189):Ze=Re;continue}if(Re<56320){ue[Ae++]=239,ue[Ae++]=191,ue[Ae++]=189,Ze=Re;continue}Re=Ze-55296<<10|Re-56320|65536,Ze=null}else Ze&&(ue[Ae++]=239,ue[Ae++]=191,ue[Ae++]=189,Ze=null);Re<128?ue[Ae++]=Re:(Re<2048?ue[Ae++]=Re>>6|192:(Re<65536?ue[Ae++]=Re>>12|224:(ue[Ae++]=Re>>18|240,ue[Ae++]=Re>>12&63|128),ue[Ae++]=Re>>6&63|128),ue[Ae++]=63&Re|128)}return Ae}(this.buf,k,this.pos);var $=this.pos-R;$>=128&&ip(R,$,this),this.pos=R-1,this.writeVarint($),this.pos+=$},writeFloat:function(k){this.realloc(4),np(this.buf,k,this.pos,!0,23,4),this.pos+=4},writeDouble:function(k){this.realloc(8),np(this.buf,k,this.pos,!0,52,8),this.pos+=8},writeBytes:function(k){var R=k.length;this.writeVarint(R),this.realloc(R);for(var $=0;$<R;$++)this.buf[this.pos++]=k[$]},writeRawMessage:function(k,R){this.pos++;var $=this.pos;k(R,this);var ue=this.pos-$;ue>=128&&ip($,ue,this),this.pos=$-1,this.writeVarint(ue),this.pos+=ue},writeMessage:function(k,R,$){this.writeTag(k,za.Bytes),this.writeRawMessage(R,$)},writePackedVarint:function(k,R){R.length&&this.writeMessage(k,p0,R)},writePackedSVarint:function(k,R){R.length&&this.writeMessage(k,Pd,R)},writePackedBoolean:function(k,R){R.length&&this.writeMessage(k,ap,R)},writePackedFloat:function(k,R){R.length&&this.writeMessage(k,m0,R)},writePackedDouble:function(k,R){R.length&&this.writeMessage(k,g0,R)},writePackedFixed32:function(k,R){R.length&&this.writeMessage(k,op,R)},writePackedSFixed32:function(k,R){R.length&&this.writeMessage(k,tc,R)},writePackedFixed64:function(k,R){R.length&&this.writeMessage(k,v0,R)},writePackedSFixed64:function(k,R){R.length&&this.writeMessage(k,y0,R)},writeBytesField:function(k,R){this.writeTag(k,za.Bytes),this.writeBytes(R)},writeFixed32Field:function(k,R){this.writeTag(k,za.Fixed32),this.writeFixed32(R)},writeSFixed32Field:function(k,R){this.writeTag(k,za.Fixed32),this.writeSFixed32(R)},writeFixed64Field:function(k,R){this.writeTag(k,za.Fixed64),this.writeFixed64(R)},writeSFixed64Field:function(k,R){this.writeTag(k,za.Fixed64),this.writeSFixed64(R)},writeVarintField:function(k,R){this.writeTag(k,za.Varint),this.writeVarint(R)},writeSVarintField:function(k,R){this.writeTag(k,za.Varint),this.writeSVarint(R)},writeStringField:function(k,R){this.writeTag(k,za.Bytes),this.writeString(R)},writeFloatField:function(k,R){this.writeTag(k,za.Fixed32),this.writeFloat(R)},writeDoubleField:function(k,R){this.writeTag(k,za.Fixed64),this.writeDouble(R)},writeBooleanField:function(k,R){this.writeVarintField(k,Boolean(R))}};var Pf=function(k,R){var $=R.pixelRatio,ue=R.version,_e=R.stretchX,Ae=R.stretchY,Re=R.content;this.paddedRect=k,this.pixelRatio=$,this.stretchX=_e,this.stretchY=Ae,this.content=Re,this.version=ue},xu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};xu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},xu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},xu.tlbr.get=function(){return this.tl.concat(this.br)},xu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Pf.prototype,xu);var ef=function(k,R){var $={},ue={};this.haveRenderCallbacks=[];var _e=[];this.addImages(k,$,_e),this.addImages(R,ue,_e);var Ae=up(_e),lt=new vs({width:Ae.w||1,height:Ae.h||1});for(var _t in k){var At=k[_t],Wt=$[_t].paddedRect;vs.copy(At.data,lt,{x:0,y:0},{x:Wt.x+1,y:Wt.y+1},At.data)}for(var on in R){var en=R[on],_n=ue[on].paddedRect,Rn=_n.x+1,Zn=_n.y+1,Wn=en.data.width,rr=en.data.height;vs.copy(en.data,lt,{x:0,y:0},{x:Rn,y:Zn},en.data),vs.copy(en.data,lt,{x:0,y:rr-1},{x:Rn,y:Zn-1},{width:Wn,height:1}),vs.copy(en.data,lt,{x:0,y:0},{x:Rn,y:Zn+rr},{width:Wn,height:1}),vs.copy(en.data,lt,{x:Wn-1,y:0},{x:Rn-1,y:Zn},{width:1,height:rr}),vs.copy(en.data,lt,{x:0,y:0},{x:Rn+Wn,y:Zn},{width:1,height:rr})}this.image=lt,this.iconPositions=$,this.patternPositions=ue};ef.prototype.addImages=function(k,R,$){for(var ue in k){var _e=k[ue],Ae={x:0,y:0,w:_e.data.width+2,h:_e.data.height+2};$.push(Ae),R[ue]=new Pf(Ae,_e),_e.hasRenderCallback&&this.haveRenderCallbacks.push(ue)}},ef.prototype.patchUpdatedImages=function(k,R){for(var $ in k.dispatchRenderCallbacks(this.haveRenderCallbacks),k.updatedImages)this.patchUpdatedImage(this.iconPositions[$],k.getImage($),R),this.patchUpdatedImage(this.patternPositions[$],k.getImage($),R)},ef.prototype.patchUpdatedImage=function(k,R,$){if(k&&R&&k.version!==R.version){k.version=R.version;var ue=k.tl;$.update(R.data,void 0,{x:ue[0],y:ue[1]})}},fr("ImagePosition",Pf),fr("ImageAtlas",ef);var rl={horizontal:1,vertical:2,horizontalOnly:3},wu=function(){this.scale=1,this.fontStack="",this.imageName=null};wu.forText=function(k,R){var $=new wu;return $.scale=k||1,$.fontStack=R,$},wu.forImage=function(k){var R=new wu;return R.imageName=k,R};var ks=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Rf(k,R,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn){var Zn,Wn=ks.fromFeature(k,_e);Wt===rl.vertical&&Wn.verticalizePunctuation();var rr=Uo.processBidirectionalText,ir=Uo.processStyledBidirectionalText;if(rr&&1===Wn.sections.length){Zn=[];for(var hr=0,Er=rr(Wn.toString(),Nd(Wn,_t,Ae,R,ue,en,_n));hr<Er.length;hr+=1){var zr=Er[hr],ni=new ks;ni.text=zr,ni.sections=Wn.sections;for(var ti=0;ti<zr.length;ti++)ni.sectionIndex.push(0);Zn.push(ni)}}else if(ir){Zn=[];for(var li=0,Ti=ir(Wn.text,Wn.sectionIndex,Nd(Wn,_t,Ae,R,ue,en,_n));li<Ti.length;li+=1){var Mi=Ti[li],mi=new ks;mi.text=Mi[0],mi.sectionIndex=Mi[1],mi.sections=Wn.sections,Zn.push(mi)}}else Zn=function(Ai,ga){for(var da=[],Ma=Ai.text,Vi=0,pa=0,Ga=ga;pa<Ga.length;pa+=1){var Ba=Ga[pa];da.push(Ai.substring(Vi,Ba)),Vi=Ba}return Vi<Ma.length&&da.push(Ai.substring(Vi,Ma.length)),da}(Wn,Nd(Wn,_t,Ae,R,ue,en,_n));var Pi=[],Ei={positionedLines:Pi,text:Wn.toString(),top:At[1],bottom:At[1],left:At[0],right:At[0],writingMode:Wt,iconsInText:!1,verticalizable:!1};return function(Ai,ga,da,Ma,Vi,pa,Ga,Ba,Qa,qa,zo,eo){for(var ls=0,ts=-17,cs=0,Cs=0,us="right"===Ba?1:"left"===Ba?0:.5,Bo=0,ss=0,Zi=Vi;ss<Zi.length;ss+=1){var Yo=Zi[ss];Yo.trim();var Ji=Yo.getMaxScale(),va=24*(Ji-1),ko={positionedGlyphs:[],lineOffset:0};Ai.positionedLines[Bo]=ko;var Ao=ko.positionedGlyphs,ho=0;if(Yo.length()){for(var to=0;to<Yo.length();to++){var wa=Yo.getSection(to),bo=Yo.getSectionIndex(to),ys=Yo.getCharCode(to),Fs=0,_s=null,ml=null,rc=null,Lo=24,Ml=!(Qa===rl.horizontal||!zo&&!_i(ys)||zo&&(Nf[ys]||(ac=ys,cr.Arabic(ac)||cr["Arabic Supplement"](ac)||cr["Arabic Extended-A"](ac)||cr["Arabic Presentation Forms-A"](ac)||cr["Arabic Presentation Forms-B"](ac))));if(wa.imageName){var vl=Ma[wa.imageName];if(!vl)continue;rc=wa.imageName,Ai.iconsInText=Ai.iconsInText||!0,ml=vl.paddedRect;var yl=vl.displaySize;wa.scale=24*wa.scale/eo,Fs=va+(24-yl[1]*wa.scale),Lo=(_s={width:yl[0],height:yl[1],left:1,top:-3,advance:Ml?yl[1]:yl[0]}).advance;var Qc=Ml?yl[0]*wa.scale-24*Ji:yl[1]*wa.scale-24*Ji;Qc>0&&Qc>ho&&(ho=Qc)}else{var lf=da[wa.fontStack],ic=lf&&lf[ys];if(ic&&ic.rect)ml=ic.rect,_s=ic.metrics;else{var cf=ga[wa.fontStack],uf=cf&&cf[ys];if(!uf)continue;_s=uf.metrics}Fs=24*(Ji-wa.scale)}Ml?(Ai.verticalizable=!0,Ao.push({glyph:ys,imageName:rc,x:ls,y:ts+Fs,vertical:Ml,scale:wa.scale,fontStack:wa.fontStack,sectionIndex:bo,metrics:_s,rect:ml}),ls+=Lo*wa.scale+qa):(Ao.push({glyph:ys,imageName:rc,x:ls,y:ts+Fs,vertical:Ml,scale:wa.scale,fontStack:wa.fontStack,sectionIndex:bo,metrics:_s,rect:ml}),ls+=_s.advance*wa.scale+qa)}0!==Ao.length&&(cs=Math.max(ls-qa,cs),_0(Ao,0,Ao.length-1,us,ho)),ls=0;var il=pa*Ji+ho;ko.lineOffset=Math.max(ho,va),ts+=il,Cs=Math.max(il,Cs),++Bo}else ts+=pa,++Bo}var ac,kc=ts- -17,zs=_c(Ga),Bs=zs.horizontalAlign,bs=zs.verticalAlign;(function(Ss,eu,oc,Gl,ql,ff,tu,sc,Su){var Ac,Eu=(eu-oc)*ql;Ac=ff!==tu?-sc*Gl- -17:(-Gl*Su+.5)*tu;for(var nu=0,ru=Ss;nu<ru.length;nu+=1)for(var iu=0,Du=ru[nu].positionedGlyphs;iu<Du.length;iu+=1){var au=Du[iu];au.x+=Eu,au.y+=Ac}})(Ai.positionedLines,us,Bs,bs,cs,Cs,pa,kc,Vi.length),Ai.top+=-bs*kc,Ai.bottom=Ai.top+kc,Ai.left+=-Bs*cs,Ai.right=Ai.left+cs}(Ei,R,$,ue,Zn,Re,Ze,lt,Wt,_t,on,Rn),!function(Ai){for(var ga=0,da=Ai;ga<da.length;ga+=1)if(0!==da[ga].positionedGlyphs.length)return!1;return!0}(Pi)&&Ei}ks.fromFeature=function(k,R){for(var $=new ks,ue=0;ue<k.sections.length;ue++){var _e=k.sections[ue];_e.image?$.addImageSection(_e):$.addTextSection(_e,R)}return $},ks.prototype.length=function(){return this.text.length},ks.prototype.getSection=function(k){return this.sections[this.sectionIndex[k]]},ks.prototype.getSectionIndex=function(k){return this.sectionIndex[k]},ks.prototype.getCharCode=function(k){return this.text.charCodeAt(k)},ks.prototype.verticalizePunctuation=function(){this.text=function(k){for(var R="",$=0;$<k.length;$++){var ue=k.charCodeAt($+1)||null,_e=k.charCodeAt($-1)||null;ue&&$i(ue)&&!yu[k[$+1]]||_e&&$i(_e)&&!yu[k[$-1]]||!yu[k[$]]?R+=k[$]:R+=yu[k[$]]}return R}(this.text)},ks.prototype.trim=function(){for(var k=0,R=0;R<this.text.length&&Nf[this.text.charCodeAt(R)];R++)k++;for(var $=this.text.length,ue=this.text.length-1;ue>=0&&ue>=k&&Nf[this.text.charCodeAt(ue)];ue--)$--;this.text=this.text.substring(k,$),this.sectionIndex=this.sectionIndex.slice(k,$)},ks.prototype.substring=function(k,R){var $=new ks;return $.text=this.text.substring(k,R),$.sectionIndex=this.sectionIndex.slice(k,R),$.sections=this.sections,$},ks.prototype.toString=function(){return this.text},ks.prototype.getMaxScale=function(){var k=this;return this.sectionIndex.reduce(function(R,$){return Math.max(R,k.sections[$].scale)},0)},ks.prototype.addTextSection=function(k,R){this.text+=k.text,this.sections.push(wu.forText(k.scale,k.fontStack||R));for(var $=this.sections.length-1,ue=0;ue<k.text.length;++ue)this.sectionIndex.push($)},ks.prototype.addImageSection=function(k){var R=k.image?k.image.name:"";if(0!==R.length){var $=this.getNextImageSectionCharCode();$?(this.text+=String.fromCharCode($),this.sections.push(wu.forImage(R)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}else C("Can't add FormattedSection with an empty image.")},ks.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Nf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ks={};function fp(k,R,$,ue,_e,Ae){if(R.imageName){var Re=ue[R.imageName];return Re?Re.displaySize[0]*R.scale*24/Ae+_e:0}var Ze=$[R.fontStack],lt=Ze&&Ze[k];return lt?lt.metrics.advance*R.scale+_e:0}function dp(k,R,$,ue){var _e=Math.pow(k-R,2);return ue?k<R?_e/2:2*_e:_e+Math.abs($)*$}function Rd(k,R,$){var ue=0;return 10===k&&(ue-=1e4),$&&(ue+=150),40!==k&&65288!==k||(ue+=50),41!==R&&65289!==R||(ue+=50),ue}function hp(k,R,$,ue,_e,Ae){for(var Re=null,Ze=dp(R,$,_e,Ae),lt=0,_t=ue;lt<_t.length;lt+=1){var At=_t[lt],Wt=dp(R-At.x,$,_e,Ae)+At.badness;Wt<=Ze&&(Re=At,Ze=Wt)}return{index:k,x:R,priorBreak:Re,badness:Ze}}function Nd(k,R,$,ue,_e,Ae,Re){if("point"!==Ae)return[];if(!k)return[];for(var Ze,lt=[],_t=function(Zn,Wn,rr,ir,hr,Er){for(var zr=0,ni=0;ni<Zn.length();ni++){var ti=Zn.getSection(ni);zr+=fp(Zn.getCharCode(ni),ti,ir,hr,Wn,Er)}return zr/Math.max(1,Math.ceil(zr/rr))}(k,R,$,ue,_e,Re),At=k.text.indexOf("\u200b")>=0,Wt=0,on=0;on<k.length();on++){var en=k.getSection(on),_n=k.getCharCode(on);if(Nf[_n]||(Wt+=fp(_n,en,ue,_e,R,Re)),on<k.length()-1){var Rn=!((Ze=_n)<11904||!(cr["Bopomofo Extended"](Ze)||cr.Bopomofo(Ze)||cr["CJK Compatibility Forms"](Ze)||cr["CJK Compatibility Ideographs"](Ze)||cr["CJK Compatibility"](Ze)||cr["CJK Radicals Supplement"](Ze)||cr["CJK Strokes"](Ze)||cr["CJK Symbols and Punctuation"](Ze)||cr["CJK Unified Ideographs Extension A"](Ze)||cr["CJK Unified Ideographs"](Ze)||cr["Enclosed CJK Letters and Months"](Ze)||cr["Halfwidth and Fullwidth Forms"](Ze)||cr.Hiragana(Ze)||cr["Ideographic Description Characters"](Ze)||cr["Kangxi Radicals"](Ze)||cr["Katakana Phonetic Extensions"](Ze)||cr.Katakana(Ze)||cr["Vertical Forms"](Ze)||cr["Yi Radicals"](Ze)||cr["Yi Syllables"](Ze)));(Ks[_n]||Rn||en.imageName)&&lt.push(hp(on+1,Wt,_t,lt,Rd(_n,k.getCharCode(on+1),Rn&&At),!1))}}return function Zn(Wn){return Wn?Zn(Wn.priorBreak).concat(Wn.index):[]}(hp(k.length(),Wt,_t,lt,0,!0))}function _c(k){var R=.5,$=.5;switch(k){case"right":case"top-right":case"bottom-right":R=1;break;case"left":case"top-left":case"bottom-left":R=0}switch(k){case"bottom":case"bottom-right":case"bottom-left":$=1;break;case"top":case"top-right":case"top-left":$=0}return{horizontalAlign:R,verticalAlign:$}}function _0(k,R,$,ue,_e){if(ue||_e)for(var Ae=k[$],Ze=(k[$].x+Ae.metrics.advance*Ae.scale)*ue,lt=R;lt<=$;lt++)k[lt].x-=Ze,k[lt].y+=_e}function Fd(k,R,$,ue,_e,Ae){var Re,Ze=k.image;if(Ze.content){var lt=Ze.content,_t=Ze.pixelRatio||1;Re=[lt[0]/_t,lt[1]/_t,Ze.displaySize[0]-lt[2]/_t,Ze.displaySize[1]-lt[3]/_t]}var At,Wt,on,en,_n=R.left*Ae,Rn=R.right*Ae;"width"===$||"both"===$?(en=_e[0]+_n-ue[3],Wt=_e[0]+Rn+ue[1]):Wt=(en=_e[0]+(_n+Rn-Ze.displaySize[0])/2)+Ze.displaySize[0];var Zn=R.top*Ae,Wn=R.bottom*Ae;return"height"===$||"both"===$?(At=_e[1]+Zn-ue[0],on=_e[1]+Wn+ue[2]):on=(At=_e[1]+(Zn+Wn-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:At,right:Wt,bottom:on,left:en,collisionPadding:Re}}Ks[10]=!0,Ks[32]=!0,Ks[38]=!0,Ks[40]=!0,Ks[41]=!0,Ks[43]=!0,Ks[45]=!0,Ks[47]=!0,Ks[173]=!0,Ks[183]=!0,Ks[8203]=!0,Ks[8208]=!0,Ks[8211]=!0,Ks[8231]=!0;var bc=function(k){function R($,ue,_e,Ae){k.call(this,$,ue),this.angle=_e,void 0!==Ae&&(this.segment=Ae)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.clone=function(){return new R(this.x,this.y,this.angle,this.segment)},R}(n);function Ff(k,R){var $=R.expression;if("constant"===$.kind)return{kind:"constant",layoutSize:$.evaluate(new Sa(k+1))};if("source"===$.kind)return{kind:"source"};for(var ue=$.zoomStops,_e=$.interpolationType,Ae=0;Ae<ue.length&&ue[Ae]<=k;)Ae++;for(var Re=Ae=Math.max(0,Ae-1);Re<ue.length&&ue[Re]<k+1;)Re++;Re=Math.min(ue.length-1,Re);var Ze=ue[Ae],lt=ue[Re];return"composite"===$.kind?{kind:"composite",minZoom:Ze,maxZoom:lt,interpolationType:_e}:{kind:"camera",minZoom:Ze,maxZoom:lt,minSize:$.evaluate(new Sa(Ze)),maxSize:$.evaluate(new Sa(lt)),interpolationType:_e}}function tf(k,R,$){var ue=R.uSize,Ae=$.lowerSize;return"source"===k.kind?Ae/128:"composite"===k.kind?Br(Ae/128,$.upperSize/128,R.uSizeT):ue}function zf(k,R){var $=0,ue=0;if("constant"===k.kind)ue=k.layoutSize;else if("source"!==k.kind){var _e=k.interpolationType,Ze=_e?f(Ki.interpolationFactor(_e,R,k.minZoom,k.maxZoom),0,1):0;"camera"===k.kind?ue=Br(k.minSize,k.maxSize,Ze):$=Ze}return{uSizeT:$,uSize:ue}}fr("Anchor",bc);var zd=Object.freeze({__proto__:null,getSizeData:Ff,evaluateSizeForFeature:tf,evaluateSizeForZoom:zf,SIZE_PACK_FACTOR:128});function Bd(k,R,$,ue,_e){if(void 0===R.segment)return!0;for(var Ae=R,Re=R.segment+1,Ze=0;Ze>-$/2;){if(--Re<0)return!1;Ze-=k[Re].dist(Ae),Ae=k[Re]}Ze+=k[Re].dist(k[Re+1]),Re++;for(var lt=[],_t=0;Ze<$/2;){var Wt=k[Re],on=k[Re+1];if(!on)return!1;var en=k[Re-1].angleTo(Wt)-Wt.angleTo(on);for(en=Math.abs((en+3*Math.PI)%(2*Math.PI)-Math.PI),lt.push({distance:Ze,angleDelta:en}),_t+=en;Ze-lt[0].distance>ue;)_t-=lt.shift().angleDelta;if(_t>_e)return!1;Re++,Ze+=Wt.dist(on)}return!0}function jd(k){for(var R=0,$=0;$<k.length-1;$++)R+=k[$].dist(k[$+1]);return R}function Vd(k,R,$){return k?.6*R*$:0}function Bf(k,R){return Math.max(k?k.right-k.left:0,R?R.right-R.left:0)}function pp(k,R,$,ue,_e,Ae){for(var Re=Vd($,_e,Ae),Ze=Bf($,ue)*Ae,lt=0,_t=jd(k)/2,At=0;At<k.length-1;At++){var Wt=k[At],on=k[At+1],en=Wt.dist(on);if(lt+en>_t){var _n=(_t-lt)/en,Rn=Br(Wt.x,on.x,_n),Zn=Br(Wt.y,on.y,_n),Wn=new bc(Rn,Zn,on.angleTo(Wt),At);return Wn._round(),!Re||Bd(k,Wn,Ze,Re,R)?Wn:void 0}lt+=en}}function b0(k,R,$,ue,_e,Ae,Re,Ze,lt){var _t=Vd(ue,Ae,Re),At=Bf(ue,_e),Wt=At*Re,on=0===k[0].x||k[0].x===lt||0===k[0].y||k[0].y===lt;return R-Wt<R/4&&(R=Wt+R/4),function en(_n,Rn,Zn,Wn,rr,ir,hr,Er,zr){for(var ni=ir/2,ti=jd(_n),li=0,Ti=Rn-Zn,Mi=[],mi=0;mi<_n.length-1;mi++){for(var Pi=_n[mi],Ei=_n[mi+1],Ai=Pi.dist(Ei),ga=Ei.angleTo(Pi);Ti+Zn<li+Ai;){var da=((Ti+=Zn)-li)/Ai,Ma=Br(Pi.x,Ei.x,da),Vi=Br(Pi.y,Ei.y,da);if(Ma>=0&&Ma<zr&&Vi>=0&&Vi<zr&&Ti-ni>=0&&Ti+ni<=ti){var pa=new bc(Ma,Vi,ga,mi);pa._round(),Wn&&!Bd(_n,pa,ir,Wn,rr)||Mi.push(pa)}}li+=Ai}return Er||Mi.length||hr||(Mi=en(_n,li/2,Zn,Wn,rr,ir,hr,!0,zr)),Mi}(k,on?R/2*Ze%R:(At/2+2*Ae)*Re*Ze%R,R,_t,$,Wt,on,!1,lt)}function mp(k,R,$,ue,_e){for(var Ae=[],Re=0;Re<k.length;Re++)for(var Ze=k[Re],lt=void 0,_t=0;_t<Ze.length-1;_t++){var At=Ze[_t],Wt=Ze[_t+1];At.x<R&&Wt.x<R||(At.x<R?At=new n(R,At.y+(R-At.x)/(Wt.x-At.x)*(Wt.y-At.y))._round():Wt.x<R&&(Wt=new n(R,At.y+(R-At.x)/(Wt.x-At.x)*(Wt.y-At.y))._round()),At.y<$&&Wt.y<$||(At.y<$?At=new n(At.x+($-At.y)/(Wt.y-At.y)*(Wt.x-At.x),$)._round():Wt.y<$&&(Wt=new n(At.x+($-At.y)/(Wt.y-At.y)*(Wt.x-At.x),$)._round()),At.x>=ue&&Wt.x>=ue||(At.x>=ue?At=new n(ue,At.y+(ue-At.x)/(Wt.x-At.x)*(Wt.y-At.y))._round():Wt.x>=ue&&(Wt=new n(ue,At.y+(ue-At.x)/(Wt.x-At.x)*(Wt.y-At.y))._round()),At.y>=_e&&Wt.y>=_e||(At.y>=_e?At=new n(At.x+(_e-At.y)/(Wt.y-At.y)*(Wt.x-At.x),_e)._round():Wt.y>=_e&&(Wt=new n(At.x+(_e-At.y)/(Wt.y-At.y)*(Wt.x-At.x),_e)._round()),lt&&At.equals(lt[lt.length-1])||Ae.push(lt=[At]),lt.push(Wt)))))}return Ae}function gp(k,R,$,ue){var _e=[],Ae=k.image,Re=Ae.pixelRatio,Ze=Ae.paddedRect.w-2,lt=Ae.paddedRect.h-2,_t=k.right-k.left,At=k.bottom-k.top,Wt=Ae.stretchX||[[0,Ze]],on=Ae.stretchY||[[0,lt]],en=function(pa,Ga){return pa+Ga[1]-Ga[0]},_n=Wt.reduce(en,0),Rn=on.reduce(en,0),Zn=Ze-_n,Wn=lt-Rn,rr=0,ir=_n,hr=0,Er=Rn,zr=0,ni=Zn,ti=0,li=Wn;if(Ae.content&&ue){var Ti=Ae.content;rr=jf(Wt,0,Ti[0]),hr=jf(on,0,Ti[1]),ir=jf(Wt,Ti[0],Ti[2]),Er=jf(on,Ti[1],Ti[3]),zr=Ti[0]-rr,ti=Ti[1]-hr,ni=Ti[2]-Ti[0]-ir,li=Ti[3]-Ti[1]-Er}var Mi=function(pa,Ga,Ba,Qa){var qa=Vf(pa.stretch-rr,ir,_t,k.left),zo=Uf(pa.fixed-zr,ni,pa.stretch,_n),eo=Vf(Ga.stretch-hr,Er,At,k.top),ls=Uf(Ga.fixed-ti,li,Ga.stretch,Rn),ts=Vf(Ba.stretch-rr,ir,_t,k.left),cs=Uf(Ba.fixed-zr,ni,Ba.stretch,_n),Cs=Vf(Qa.stretch-hr,Er,At,k.top),us=Uf(Qa.fixed-ti,li,Qa.stretch,Rn),Bo=new n(qa,eo),ss=new n(ts,eo),Zi=new n(ts,Cs),Yo=new n(qa,Cs),Ji=new n(zo/Re,ls/Re),va=new n(cs/Re,us/Re),ko=R*Math.PI/180;if(ko){var Ao=Math.sin(ko),ho=Math.cos(ko),to=[ho,-Ao,Ao,ho];Bo._matMult(to),ss._matMult(to),Yo._matMult(to),Zi._matMult(to)}var wa=pa.stretch+pa.fixed,ys=Ga.stretch+Ga.fixed;return{tl:Bo,tr:ss,bl:Yo,br:Zi,tex:{x:Ae.paddedRect.x+1+wa,y:Ae.paddedRect.y+1+ys,w:Ba.stretch+Ba.fixed-wa,h:Qa.stretch+Qa.fixed-ys},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ji,pixelOffsetBR:va,minFontScaleX:ni/Re/_t,minFontScaleY:li/Re/At,isSDF:$}};if(ue&&(Ae.stretchX||Ae.stretchY))for(var mi=vp(Wt,Zn,_n),Pi=vp(on,Wn,Rn),Ei=0;Ei<mi.length-1;Ei++)for(var Ai=mi[Ei],ga=mi[Ei+1],da=0;da<Pi.length-1;da++)_e.push(Mi(Ai,Pi[da],ga,Pi[da+1]));else _e.push(Mi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:lt+1}));return _e}function jf(k,R,$){for(var ue=0,_e=0,Ae=k;_e<Ae.length;_e+=1){var Re=Ae[_e];ue+=Math.max(R,Math.min($,Re[1]))-Math.max(R,Math.min($,Re[0]))}return ue}function vp(k,R,$){for(var ue=[{fixed:-1,stretch:0}],_e=0,Ae=k;_e<Ae.length;_e+=1){var Re=Ae[_e],Ze=Re[0],lt=Re[1],_t=ue[ue.length-1];ue.push({fixed:Ze-_t.stretch,stretch:_t.stretch}),ue.push({fixed:Ze-_t.stretch,stretch:_t.stretch+(lt-Ze)})}return ue.push({fixed:R+1,stretch:$}),ue}function Vf(k,R,$,ue){return k/R*$+ue}function Uf(k,R,$,ue){return k-R*$/ue}var Hf=function(k,R,$,ue,_e,Ae,Re,Ze,lt,_t){if(this.boxStartIndex=k.length,lt){var At=Ae.top,Wt=Ae.bottom,on=Ae.collisionPadding;on&&(At-=on[1],Wt+=on[3]);var en=Wt-At;en>0&&(en=Math.max(10,en),this.circleDiameter=en)}else{var _n=Ae.top*Re-Ze,Rn=Ae.bottom*Re+Ze,Zn=Ae.left*Re-Ze,Wn=Ae.right*Re+Ze,rr=Ae.collisionPadding;if(rr&&(Zn-=rr[0]*Re,_n-=rr[1]*Re,Wn+=rr[2]*Re,Rn+=rr[3]*Re),_t){var ir=new n(Zn,_n),hr=new n(Wn,_n),Er=new n(Zn,Rn),zr=new n(Wn,Rn),ni=_t*Math.PI/180;ir._rotate(ni),hr._rotate(ni),Er._rotate(ni),zr._rotate(ni),Zn=Math.min(ir.x,hr.x,Er.x,zr.x),Wn=Math.max(ir.x,hr.x,Er.x,zr.x),_n=Math.min(ir.y,hr.y,Er.y,zr.y),Rn=Math.max(ir.y,hr.y,Er.y,zr.y)}k.emplaceBack(R.x,R.y,Zn,_n,Wn,Rn,$,ue,_e)}this.boxEndIndex=k.length},Tu=function(k,R){if(void 0===k&&(k=[]),void 0===R&&(R=x0),this.data=k,this.length=this.data.length,this.compare=R,this.length>0)for(var $=(this.length>>1)-1;$>=0;$--)this._down($)};function x0(k,R){return k<R?-1:k>R?1:0}function w0(k,R,$){void 0===R&&(R=1),void 0===$&&($=!1);for(var ue=1/0,_e=1/0,Ae=-1/0,Re=-1/0,Ze=k[0],lt=0;lt<Ze.length;lt++){var _t=Ze[lt];(!lt||_t.x<ue)&&(ue=_t.x),(!lt||_t.y<_e)&&(_e=_t.y),(!lt||_t.x>Ae)&&(Ae=_t.x),(!lt||_t.y>Re)&&(Re=_t.y)}var on=Math.min(Ae-ue,Re-_e),en=on/2,_n=new Tu([],T0);if(0===on)return new n(ue,_e);for(var Rn=ue;Rn<Ae;Rn+=on)for(var Zn=_e;Zn<Re;Zn+=on)_n.push(new Mu(Rn+en,Zn+en,en,k));for(var Wn=function(hr){for(var Er=0,zr=0,ni=0,ti=hr[0],li=0,Ti=ti.length,Mi=Ti-1;li<Ti;Mi=li++){var mi=ti[li],Pi=ti[Mi],Ei=mi.x*Pi.y-Pi.x*mi.y;zr+=(mi.x+Pi.x)*Ei,ni+=(mi.y+Pi.y)*Ei,Er+=3*Ei}return new Mu(zr/Er,ni/Er,0,hr)}(k),rr=_n.length;_n.length;){var ir=_n.pop();(ir.d>Wn.d||!Wn.d)&&(Wn=ir,$&&console.log("found best %d after %d probes",Math.round(1e4*ir.d)/1e4,rr)),ir.max-Wn.d<=R||(_n.push(new Mu(ir.p.x-(en=ir.h/2),ir.p.y-en,en,k)),_n.push(new Mu(ir.p.x+en,ir.p.y-en,en,k)),_n.push(new Mu(ir.p.x-en,ir.p.y+en,en,k)),_n.push(new Mu(ir.p.x+en,ir.p.y+en,en,k)),rr+=4)}return $&&(console.log("num probes: "+rr),console.log("best distance: "+Wn.d)),Wn.p}function T0(k,R){return R.max-k.max}function Mu(k,R,$,ue){this.p=new n(k,R),this.h=$,this.d=function(_e,Ae){for(var Re=!1,Ze=1/0,lt=0;lt<Ae.length;lt++)for(var _t=Ae[lt],At=0,Wt=_t.length,on=Wt-1;At<Wt;on=At++){var en=_t[At],_n=_t[on];en.y>_e.y!=_n.y>_e.y&&_e.x<(_n.x-en.x)*(_e.y-en.y)/(_n.y-en.y)+en.x&&(Re=!Re),Ze=Math.min(Ze,Ql(_e,en,_n))}return(Re?1:-1)*Math.sqrt(Ze)}(this.p,ue),this.max=this.d+this.h*Math.SQRT2}Tu.prototype.push=function(k){this.data.push(k),this.length++,this._up(this.length-1)},Tu.prototype.pop=function(){if(0!==this.length){var k=this.data[0],R=this.data.pop();return this.length--,this.length>0&&(this.data[0]=R,this._down(0)),k}},Tu.prototype.peek=function(){return this.data[0]},Tu.prototype._up=function(k){for(var R=this.data,$=this.compare,ue=R[k];k>0;){var _e=k-1>>1,Ae=R[_e];if($(ue,Ae)>=0)break;R[k]=Ae,k=_e}R[k]=ue},Tu.prototype._down=function(k){for(var R=this.data,$=this.compare,ue=this.length>>1,_e=R[k];k<ue;){var Ae=1+(k<<1),Re=R[Ae],Ze=Ae+1;if(Ze<this.length&&$(R[Ze],Re)<0&&(Ae=Ze,Re=R[Ze]),$(Re,_e)>=0)break;R[k]=Re,k=Ae}R[k]=_e};var Ud=Number.POSITIVE_INFINITY;function yp(k,R){return R[1]!==Ud?function($,ue,_e){var Ae=0,Re=0;switch(ue=Math.abs(ue),_e=Math.abs(_e),$){case"top-right":case"top-left":case"top":Re=_e-7;break;case"bottom-right":case"bottom-left":case"bottom":Re=7-_e}switch($){case"top-right":case"bottom-right":case"right":Ae=-ue;break;case"top-left":case"bottom-left":case"left":Ae=ue}return[Ae,Re]}(k,R[0],R[1]):function($,ue){var _e=0,Ae=0;ue<0&&(ue=0);var Re=ue/Math.sqrt(2);switch($){case"top-right":case"top-left":Ae=Re-7;break;case"bottom-right":case"bottom-left":Ae=7-Re;break;case"bottom":Ae=7-ue;break;case"top":Ae=ue-7}switch($){case"top-right":case"bottom-right":_e=-Re;break;case"top-left":case"bottom-left":_e=Re;break;case"left":_e=ue;break;case"right":_e=-ue}return[_e,Ae]}(k,R[0])}function Zc(k){switch(k){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Gf(k,R,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n){var Rn=function(hr,Er,zr,ni,ti,li,Ti,Mi){for(var mi=ni.layout.get("text-rotate").evaluate(li,{})*Math.PI/180,Pi=[],Ei=0,Ai=Er.positionedLines;Ei<Ai.length;Ei+=1)for(var ga=Ai[Ei],da=0,Ma=ga.positionedGlyphs;da<Ma.length;da+=1){var Vi=Ma[da];if(Vi.rect){var pa=Vi.rect||{},Ga=4,Ba=!0,Qa=1,qa=0,zo=(ti||Mi)&&Vi.vertical,eo=Vi.metrics.advance*Vi.scale/2;if(Mi&&Er.verticalizable&&(qa=ga.lineOffset/2-(Vi.imageName?-(24-Vi.metrics.width*Vi.scale)/2:24*(Vi.scale-1))),Vi.imageName){var cs=Ti[Vi.imageName];Ba=cs.sdf,Ga=1/(Qa=cs.pixelRatio)}var Cs=ti?[Vi.x+eo,Vi.y]:[0,0],us=ti?[0,0]:[Vi.x+eo+zr[0],Vi.y+zr[1]-qa],Bo=[0,0];zo&&(Bo=us,us=[0,0]);var ss=(Vi.metrics.left-Ga)*Vi.scale-eo+us[0],Zi=(-Vi.metrics.top-Ga)*Vi.scale+us[1],Yo=ss+pa.w*Vi.scale/Qa,Ji=Zi+pa.h*Vi.scale/Qa,va=new n(ss,Zi),ko=new n(Yo,Zi),Ao=new n(ss,Ji),ho=new n(Yo,Ji);if(zo){var to=new n(-eo,eo- -17),wa=-Math.PI/2,bo=12-eo,Fs=new n(22-bo,-(Vi.imageName?bo:0)),_s=new(Function.prototype.bind.apply(n,[null].concat(Bo)));va._rotateAround(wa,to)._add(Fs)._add(_s),ko._rotateAround(wa,to)._add(Fs)._add(_s),Ao._rotateAround(wa,to)._add(Fs)._add(_s),ho._rotateAround(wa,to)._add(Fs)._add(_s)}if(mi){var ml=Math.sin(mi),rc=Math.cos(mi),Lo=[rc,-ml,ml,rc];va._matMult(Lo),ko._matMult(Lo),Ao._matMult(Lo),ho._matMult(Lo)}var Ml=new n(0,0),vl=new n(0,0);Pi.push({tl:va,tr:ko,bl:Ao,br:ho,tex:pa,writingMode:Er.writingMode,glyphOffset:Cs,sectionIndex:Vi.sectionIndex,isSDF:Ba,pixelOffsetTL:Ml,pixelOffsetBR:vl,minFontScaleX:0,minFontScaleY:0})}}return Pi}(0,$,Ze,_e,Ae,Re,ue,k.allowVerticalPlacement),Zn=k.textSizeData,Wn=null;"source"===Zn.kind?(Wn=[128*_e.layout.get("text-size").evaluate(Re,{})])[0]>32640&&C(k.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Zn.kind&&((Wn=[128*en.compositeTextSizes[0].evaluate(Re,{},_n),128*en.compositeTextSizes[1].evaluate(Re,{},_n)])[0]>32640||Wn[1]>32640)&&C(k.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),k.addSymbols(k.text,Rn,Wn,Ze,Ae,Re,_t,R,lt.lineStartIndex,lt.lineLength,on,_n);for(var rr=0,ir=At;rr<ir.length;rr+=1)Wt[ir[rr]]=k.text.placedSymbolArray.length-1;return 4*Rn.length}function Qo(k){for(var R in k)return k[R];return null}function _p(k,R,$,ue){var _e=k.compareText;if(R in _e){for(var Ae=_e[R],Re=Ae.length-1;Re>=0;Re--)if(ue.dist(Ae[Re])<$)return!0}else _e[R]=[];return _e[R].push(ue),!1}var bp=mu.VectorTileFeature.types,xp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nf(k,R,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on){var en=Ze?Math.min(32640,Math.round(Ze[0])):0,_n=Ze?Math.min(32640,Math.round(Ze[1])):0;k.emplaceBack(R,$,Math.round(32*ue),Math.round(32*_e),Ae,Re,(en<<1)+(lt?1:0),_n,16*_t,16*At,256*Wt,256*on)}function qf(k,R,$){k.emplaceBack(R.x,R.y,$),k.emplaceBack(R.x,R.y,$),k.emplaceBack(R.x,R.y,$),k.emplaceBack(R.x,R.y,$)}function wp(k){for(var R=0,$=k.sections;R<$.length;R+=1)if(xi($[R].text))return!0;return!1}var Wc=function(k){this.layoutVertexArray=new Dl,this.indexArray=new Go,this.programConfigurations=k,this.segments=new Zt,this.dynamicLayoutVertexArray=new nl,this.opacityVertexArray=new hc,this.placedSymbolArray=new $e};Wc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Wc.prototype.upload=function(k,R,$,ue){this.isEmpty()||($&&(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,vu.members),this.indexBuffer=k.createIndexBuffer(this.indexArray,R),this.dynamicLayoutVertexBuffer=k.createVertexBuffer(this.dynamicLayoutVertexArray,Qh.members,!0),this.opacityVertexBuffer=k.createVertexBuffer(this.opacityVertexArray,xp,!0),this.opacityVertexBuffer.itemSize=1),($||ue)&&this.programConfigurations.upload(k))},Wc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},fr("SymbolBuffers",Wc);var Xc=function(k,R,$){this.layoutVertexArray=new k,this.layoutAttributes=R,this.indexArray=new $,this.segments=new Zt,this.collisionVertexArray=new Ol};Xc.prototype.upload=function(k){this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=k.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=k.createVertexBuffer(this.collisionVertexArray,h0.members,!0)},Xc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},fr("CollisionBuffers",Xc);var Oa=function(k){this.collisionBoxArray=k.collisionBoxArray,this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(Re){return Re.id}),this.index=k.index,this.pixelRatio=k.pixelRatio,this.sourceLayerIndex=k.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Zu([]),this.placementViewportMatrix=Zu([]);var R=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ff(this.zoom,R["text-size"]),this.iconSizeData=Ff(this.zoom,R["icon-size"]);var $=this.layers[0].layout,ue=$.get("symbol-sort-key"),_e=$.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==_e&&void 0!==ue.constantOr(1),this.sortFeaturesByY=("viewport-y"===_e||"auto"===_e&&!this.sortFeaturesByKey)&&($.get("text-allow-overlap")||$.get("icon-allow-overlap")||$.get("text-ignore-placement")||$.get("icon-ignore-placement")),"point"===$.get("symbol-placement")&&(this.writingModes=$.get("text-writing-mode").map(function(Re){return rl[Re]})),this.stateDependentLayerIds=this.layers.filter(function(Re){return Re.isStateDependent()}).map(function(Re){return Re.id}),this.sourceID=k.sourceID};Oa.prototype.createArrays=function(){this.text=new Wc(new Ha(vu.members,this.layers,this.zoom,function(k){return/^text/.test(k)})),this.icon=new Wc(new Ha(vu.members,this.layers,this.zoom,function(k){return/^icon/.test(k)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new zt,this.symbolInstances=new pt},Oa.prototype.calculateGlyphDependencies=function(k,R,$,ue,_e){for(var Ae=0;Ae<k.length;Ae++)if(R[k.charCodeAt(Ae)]=!0,($||ue)&&_e){var Re=yu[k.charAt(Ae)];Re&&(R[Re.charCodeAt(0)]=!0)}},Oa.prototype.populate=function(k,R,$){var ue=this.layers[0],_e=ue.layout,Ae=_e.get("text-font"),Re=_e.get("text-field"),Ze=_e.get("icon-image"),lt=("constant"!==Re.value.kind||Re.value.value instanceof Mn&&!Re.value.value.isEmpty()||Re.value.value.toString().length>0)&&("constant"!==Ae.value.kind||Ae.value.value.length>0),_t="constant"!==Ze.value.kind||!!Ze.value.value||Object.keys(Ze.parameters).length>0,At=_e.get("symbol-sort-key");if(this.features=[],lt||_t){for(var Wt=R.iconDependencies,on=R.glyphDependencies,en=R.availableImages,_n=new Sa(this.zoom),Rn=0,Zn=k;Rn<Zn.length;Rn+=1){var Wn=Zn[Rn],rr=Wn.feature,ir=Wn.id,hr=Wn.index,Er=Wn.sourceLayerIndex,zr=ue._featureFilter.needGeometry,ni={type:rr.type,id:ir,properties:rr.properties,geometry:zr?Ka(rr):[]};if(ue._featureFilter.filter(_n,ni,$)){zr||(ni.geometry=Ka(rr));var ti=void 0;if(lt){var li=ue.getValueAndResolveTokens("text-field",ni,$,en),Ti=Mn.factory(li);wp(Ti)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Mo()||this.hasRTLText&&Uo.isParsed())&&(ti=tp(Ti,ue,ni))}var Mi=void 0;if(_t){var mi=ue.getValueAndResolveTokens("icon-image",ni,$,en);Mi=mi instanceof En?mi:En.fromString(mi)}if(ti||Mi){var Pi=this.sortFeaturesByKey?At.evaluate(ni,{},$):void 0,Ei={id:ir,text:ti,icon:Mi,index:hr,sourceLayerIndex:Er,geometry:Ka(rr),properties:rr.properties,type:bp[rr.type],sortKey:Pi};if(this.features.push(Ei),Mi&&(Wt[Mi.name]=!0),ti){var Ai=Ae.evaluate(ni,{},$).join(","),ga="map"===_e.get("text-rotation-alignment")&&"point"!==_e.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rl.vertical)>=0;for(var da=0,Ma=ti.sections;da<Ma.length;da+=1){var Vi=Ma[da];if(Vi.image)Wt[Vi.image.name]=!0;else{var pa=ki(ti.toString()),Ga=Vi.fontStack||Ai,Ba=on[Ga]=on[Ga]||{};this.calculateGlyphDependencies(Vi.text,Ba,ga,this.allowVerticalPlacement,pa)}}}}}}"line"===_e.get("symbol-placement")&&(this.features=function(Qa){var qa={},zo={},eo=[],ls=0;function ts(ho){eo.push(Qa[ho]),ls++}function cs(ho,to,wa){var bo=zo[ho];return delete zo[ho],zo[to]=bo,eo[bo].geometry[0].pop(),eo[bo].geometry[0]=eo[bo].geometry[0].concat(wa[0]),bo}function Cs(ho,to,wa){var bo=qa[to];return delete qa[to],qa[ho]=bo,eo[bo].geometry[0].shift(),eo[bo].geometry[0]=wa[0].concat(eo[bo].geometry[0]),bo}function us(ho,to,wa){var bo=wa?to[0][to[0].length-1]:to[0][0];return ho+":"+bo.x+":"+bo.y}for(var Bo=0;Bo<Qa.length;Bo++){var ss=Qa[Bo],Zi=ss.geometry,Yo=ss.text?ss.text.toString():null;if(Yo){var Ji=us(Yo,Zi),va=us(Yo,Zi,!0);if(Ji in zo&&va in qa&&zo[Ji]!==qa[va]){var ko=Cs(Ji,va,Zi),Ao=cs(Ji,va,eo[ko].geometry);delete qa[Ji],delete zo[va],zo[us(Yo,eo[Ao].geometry,!0)]=Ao,eo[ko].geometry=null}else Ji in zo?cs(Ji,va,Zi):va in qa?Cs(Ji,va,Zi):(ts(Bo),qa[Ji]=ls-1,zo[va]=ls-1)}else ts(Bo)}return eo.filter(function(ho){return ho.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Qa,qa){return Qa.sortKey-qa.sortKey})}},Oa.prototype.update=function(k,R,$){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(k,R,this.layers,$),this.icon.programConfigurations.updatePaintArrays(k,R,this.layers,$))},Oa.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Oa.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Oa.prototype.upload=function(k){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(k),this.iconCollisionBox.upload(k)),this.text.upload(k,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(k,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Oa.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Oa.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Oa.prototype.addToLineVertexArray=function(k,R){var $=this.lineVertexArray.length;if(void 0!==k.segment){for(var ue=k.dist(R[k.segment+1]),_e=k.dist(R[k.segment]),Ae={},Re=k.segment+1;Re<R.length;Re++)Ae[Re]={x:R[Re].x,y:R[Re].y,tileUnitDistanceFromAnchor:ue},Re<R.length-1&&(ue+=R[Re+1].dist(R[Re]));for(var Ze=k.segment||0;Ze>=0;Ze--)Ae[Ze]={x:R[Ze].x,y:R[Ze].y,tileUnitDistanceFromAnchor:_e},Ze>0&&(_e+=R[Ze-1].dist(R[Ze]));for(var lt=0;lt<R.length;lt++){var _t=Ae[lt];this.lineVertexArray.emplaceBack(_t.x,_t.y,_t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:$,lineLength:this.lineVertexArray.length-$}},Oa.prototype.addSymbols=function(k,R,$,ue,_e,Ae,Re,Ze,lt,_t,At,Wt){for(var on=k.indexArray,en=k.layoutVertexArray,_n=k.segments.prepareSegment(4*R.length,en,on,Ae.sortKey),Rn=this.glyphOffsetArray.length,Zn=_n.vertexLength,Wn=this.allowVerticalPlacement&&Re===rl.vertical?Math.PI/2:0,rr=Ae.text&&Ae.text.sections,ir=0;ir<R.length;ir++){var hr=R[ir],Er=hr.tl,zr=hr.tr,ni=hr.bl,ti=hr.br,li=hr.tex,Ti=hr.pixelOffsetTL,Mi=hr.pixelOffsetBR,mi=hr.minFontScaleX,Pi=hr.minFontScaleY,Ei=hr.glyphOffset,Ai=hr.isSDF,ga=hr.sectionIndex,da=_n.vertexLength,Ma=Ei[1];nf(en,Ze.x,Ze.y,Er.x,Ma+Er.y,li.x,li.y,$,Ai,Ti.x,Ti.y,mi,Pi),nf(en,Ze.x,Ze.y,zr.x,Ma+zr.y,li.x+li.w,li.y,$,Ai,Mi.x,Ti.y,mi,Pi),nf(en,Ze.x,Ze.y,ni.x,Ma+ni.y,li.x,li.y+li.h,$,Ai,Ti.x,Mi.y,mi,Pi),nf(en,Ze.x,Ze.y,ti.x,Ma+ti.y,li.x+li.w,li.y+li.h,$,Ai,Mi.x,Mi.y,mi,Pi),qf(k.dynamicLayoutVertexArray,Ze,Wn),on.emplaceBack(da,da+1,da+2),on.emplaceBack(da+1,da+2,da+3),_n.vertexLength+=4,_n.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ei[0]),ir!==R.length-1&&ga===R[ir+1].sectionIndex||k.programConfigurations.populatePaintArrays(en.length,Ae,Ae.index,{},Wt,rr&&rr[ga])}k.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Rn,this.glyphOffsetArray.length-Rn,Zn,lt,_t,Ze.segment,$?$[0]:0,$?$[1]:0,ue[0],ue[1],Re,0,!1,0,At)},Oa.prototype._addCollisionDebugVertex=function(k,R,$,ue,_e,Ae){return R.emplaceBack(0,0),k.emplaceBack($.x,$.y,ue,_e,Math.round(Ae.x),Math.round(Ae.y))},Oa.prototype.addCollisionDebugVertices=function(k,R,$,ue,_e,Ae,Re){var Ze=_e.segments.prepareSegment(4,_e.layoutVertexArray,_e.indexArray),lt=Ze.vertexLength,_t=_e.layoutVertexArray,At=_e.collisionVertexArray,Wt=Re.anchorX,on=Re.anchorY;this._addCollisionDebugVertex(_t,At,Ae,Wt,on,new n(k,R)),this._addCollisionDebugVertex(_t,At,Ae,Wt,on,new n($,R)),this._addCollisionDebugVertex(_t,At,Ae,Wt,on,new n($,ue)),this._addCollisionDebugVertex(_t,At,Ae,Wt,on,new n(k,ue)),Ze.vertexLength+=4;var en=_e.indexArray;en.emplaceBack(lt,lt+1),en.emplaceBack(lt+1,lt+2),en.emplaceBack(lt+2,lt+3),en.emplaceBack(lt+3,lt),Ze.primitiveLength+=4},Oa.prototype.addDebugCollisionBoxes=function(k,R,$,ue){for(var _e=k;_e<R;_e++){var Ae=this.collisionBoxArray.get(_e);this.addCollisionDebugVertices(Ae.x1,Ae.y1,Ae.x2,Ae.y2,ue?this.textCollisionBox:this.iconCollisionBox,Ae.anchorPoint,$)}},Oa.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Xc(dl,Ld.members,B),this.iconCollisionBox=new Xc(dl,Ld.members,B);for(var k=0;k<this.symbolInstances.length;k++){var R=this.symbolInstances.get(k);this.addDebugCollisionBoxes(R.textBoxStartIndex,R.textBoxEndIndex,R,!0),this.addDebugCollisionBoxes(R.verticalTextBoxStartIndex,R.verticalTextBoxEndIndex,R,!0),this.addDebugCollisionBoxes(R.iconBoxStartIndex,R.iconBoxEndIndex,R,!1),this.addDebugCollisionBoxes(R.verticalIconBoxStartIndex,R.verticalIconBoxEndIndex,R,!1)}},Oa.prototype._deserializeCollisionBoxesForSymbol=function(k,R,$,ue,_e,Ae,Re,Ze,lt){for(var _t={},At=R;At<$;At++){var Wt=k.get(At);_t.textBox={x1:Wt.x1,y1:Wt.y1,x2:Wt.x2,y2:Wt.y2,anchorPointX:Wt.anchorPointX,anchorPointY:Wt.anchorPointY},_t.textFeatureIndex=Wt.featureIndex;break}for(var on=ue;on<_e;on++){var en=k.get(on);_t.verticalTextBox={x1:en.x1,y1:en.y1,x2:en.x2,y2:en.y2,anchorPointX:en.anchorPointX,anchorPointY:en.anchorPointY},_t.verticalTextFeatureIndex=en.featureIndex;break}for(var _n=Ae;_n<Re;_n++){var Rn=k.get(_n);_t.iconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},_t.iconFeatureIndex=Rn.featureIndex;break}for(var Zn=Ze;Zn<lt;Zn++){var Wn=k.get(Zn);_t.verticalIconBox={x1:Wn.x1,y1:Wn.y1,x2:Wn.x2,y2:Wn.y2,anchorPointX:Wn.anchorPointX,anchorPointY:Wn.anchorPointY},_t.verticalIconFeatureIndex=Wn.featureIndex;break}return _t},Oa.prototype.deserializeCollisionBoxes=function(k){this.collisionArrays=[];for(var R=0;R<this.symbolInstances.length;R++){var $=this.symbolInstances.get(R);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(k,$.textBoxStartIndex,$.textBoxEndIndex,$.verticalTextBoxStartIndex,$.verticalTextBoxEndIndex,$.iconBoxStartIndex,$.iconBoxEndIndex,$.verticalIconBoxStartIndex,$.verticalIconBoxEndIndex))}},Oa.prototype.hasTextData=function(){return this.text.segments.get().length>0},Oa.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Oa.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Oa.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Oa.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Oa.prototype.addIndicesForPlacedSymbol=function(k,R){for(var $=k.placedSymbolArray.get(R),ue=$.vertexStartIndex+4*$.numGlyphs,_e=$.vertexStartIndex;_e<ue;_e+=4)k.indexArray.emplaceBack(_e,_e+1,_e+2),k.indexArray.emplaceBack(_e+1,_e+2,_e+3)},Oa.prototype.getSortedSymbolIndexes=function(k){if(this.sortedAngle===k&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var R=Math.sin(k),$=Math.cos(k),ue=[],_e=[],Ae=[],Re=0;Re<this.symbolInstances.length;++Re){Ae.push(Re);var Ze=this.symbolInstances.get(Re);ue.push(0|Math.round(R*Ze.anchorX+$*Ze.anchorY)),_e.push(Ze.featureIndex)}return Ae.sort(function(lt,_t){return ue[lt]-ue[_t]||_e[_t]-_e[lt]}),Ae},Oa.prototype.addToSortKeyRanges=function(k,R){var $=this.sortKeyRanges[this.sortKeyRanges.length-1];$&&$.sortKey===R?$.symbolInstanceEnd=k+1:this.sortKeyRanges.push({sortKey:R,symbolInstanceStart:k,symbolInstanceEnd:k+1})},Oa.prototype.sortFeatures=function(k){var R=this;if(this.sortFeaturesByY&&this.sortedAngle!==k&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(k),this.sortedAngle=k,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var $=0,ue=this.symbolInstanceIndexes;$<ue.length;$+=1){var Ae=this.symbolInstances.get(ue[$]);this.featureSortOrder.push(Ae.featureIndex),[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(function(Re,Ze,lt){Re>=0&&lt.indexOf(Re)===Ze&&R.addIndicesForPlacedSymbol(R.text,Re)}),Ae.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ae.verticalPlacedTextSymbolIndex),Ae.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.placedIconSymbolIndex),Ae.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},fr("SymbolBucket",Oa,{omit:["layers","collisionBoxArray","features","compareText"]}),Oa.MAX_GLYPHS=65535,Oa.addDynamicAttributes=qf;var Hd=new hs({"symbol-placement":new Si(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new Si(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Si(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ji(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Si(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Si(Ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Si(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new Si(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Si(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new ji(Ce.layout_symbol["icon-size"]),"icon-text-fit":new Si(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Si(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new ji(Ce.layout_symbol["icon-image"]),"icon-rotate":new ji(Ce.layout_symbol["icon-rotate"]),"icon-padding":new Si(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new Si(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new ji(Ce.layout_symbol["icon-offset"]),"icon-anchor":new ji(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Si(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Si(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Si(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new ji(Ce.layout_symbol["text-field"]),"text-font":new ji(Ce.layout_symbol["text-font"]),"text-size":new ji(Ce.layout_symbol["text-size"]),"text-max-width":new ji(Ce.layout_symbol["text-max-width"]),"text-line-height":new Si(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new ji(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new ji(Ce.layout_symbol["text-justify"]),"text-radial-offset":new ji(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Si(Ce.layout_symbol["text-variable-anchor"]),"text-anchor":new ji(Ce.layout_symbol["text-anchor"]),"text-max-angle":new Si(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new Si(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new ji(Ce.layout_symbol["text-rotate"]),"text-padding":new Si(Ce.layout_symbol["text-padding"]),"text-keep-upright":new Si(Ce.layout_symbol["text-keep-upright"]),"text-transform":new ji(Ce.layout_symbol["text-transform"]),"text-offset":new ji(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new Si(Ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Si(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new Si(Ce.layout_symbol["text-optional"])}),rf={paint:new hs({"icon-opacity":new ji(Ce.paint_symbol["icon-opacity"]),"icon-color":new ji(Ce.paint_symbol["icon-color"]),"icon-halo-color":new ji(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new ji(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ji(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new Si(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new Si(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new ji(Ce.paint_symbol["text-opacity"]),"text-color":new ji(Ce.paint_symbol["text-color"],{runtimeType:It,getOverride:function(k){return k.textColor},hasOverride:function(k){return!!k.textColor}}),"text-halo-color":new ji(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new ji(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new ji(Ce.paint_symbol["text-halo-blur"]),"text-translate":new Si(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new Si(Ce.paint_symbol["text-translate-anchor"])}),layout:Hd},$c=function(k){this.type=k.property.overrides?k.property.overrides.runtimeType:Vt,this.defaultValue=k};$c.prototype.evaluate=function(k){if(k.formattedSection){var R=this.defaultValue.property.overrides;if(R&&R.hasOverride(k.formattedSection))return R.getOverride(k.formattedSection)}return k.feature&&k.featureState?this.defaultValue.evaluate(k.feature,k.featureState):this.defaultValue.property.specification.default},$c.prototype.eachChild=function(k){this.defaultValue.isConstant()||k(this.defaultValue.value._styleExpression.expression)},$c.prototype.outputDefined=function(){return!1},$c.prototype.serialize=function(){return null},fr("FormatSectionOverride",$c,{omit:["defaultValue"]});var Tp=function(k){function R($){k.call(this,$,rf)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.recalculate=function($,ue){if(k.prototype.recalculate.call(this,$,ue),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var _e=this.layout.get("text-writing-mode");if(_e){for(var Ae=[],Re=0,Ze=_e;Re<Ze.length;Re+=1){var lt=Ze[Re];Ae.indexOf(lt)<0&&Ae.push(lt)}this.layout._values["text-writing-mode"]=Ae}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},R.prototype.getValueAndResolveTokens=function($,ue,_e,Ae){var lt,Re=this.layout.get($).evaluate(ue,{},_e,Ae),Ze=this._unevaluatedLayout._values[$];return Ze.isDataDriven()||un(Ze.value)||!Re?Re:(lt=ue.properties,Re.replace(/{([^{}]+)}/g,function(At,Wt){return Wt in lt?String(lt[Wt]):""}))},R.prototype.createBucket=function($){return new Oa($)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype._setPaintOverrides=function(){for(var $=0,ue=rf.paint.overridableProperties;$<ue.length;$+=1){var _e=ue[$];if(R.hasPaintOverride(this.layout,_e)){var lt,Ae=this.paint.get(_e),Re=new $c(Ae),Ze=new ln(Re,Ae.property.specification);lt="constant"===Ae.value.kind||"source"===Ae.value.kind?new vn("source",Ze):new Dn("composite",Ze,Ae.value.zoomStops,Ae.value._interpolationType),this.paint._values[_e]=new yo(Ae.property,lt,Ae.parameters)}}},R.prototype._handleOverridablePaintPropertyUpdate=function($,ue,_e){return!(!this.layout||ue.isDataDriven()||_e.isDataDriven())&&R.hasPaintOverride(this.layout,$)},R.hasPaintOverride=function($,ue){var _e=$.get("text-field"),Ae=rf.paint.properties[ue],Re=!1,Ze=function(At){for(var Wt=0,on=At;Wt<on.length;Wt+=1)if(Ae.overrides&&Ae.overrides.hasOverride(on[Wt]))return void(Re=!0)};if("constant"===_e.value.kind&&_e.value.value instanceof Mn)Ze(_e.value.value.sections);else if("source"===_e.value.kind){var lt=function(At){Re||(At instanceof Dr&&nr(At.value)===ht?Ze(At.value.sections):At instanceof Or?Ze(At.sections):At.eachChild(lt))},_t=_e.value;_t._styleExpression&&lt(_t._styleExpression.expression)}return Re},R}(Rs),Gd={paint:new hs({"background-color":new Si(Ce.paint_background["background-color"]),"background-pattern":new Fl(Ce.paint_background["background-pattern"]),"background-opacity":new Si(Ce.paint_background["background-opacity"])})},qd=function(k){function R($){k.call(this,$,Gd)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R}(Rs),M0={paint:new hs({"raster-opacity":new Si(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new Si(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Si(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Si(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new Si(Ce.paint_raster["raster-saturation"]),"raster-contrast":new Si(Ce.paint_raster["raster-contrast"]),"raster-resampling":new Si(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new Si(Ce.paint_raster["raster-fade-duration"])})},Mp=function(k){function R($){k.call(this,$,M0)}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R}(Rs),kp=function(k){function R($){k.call(this,$,{}),this.implementation=$}return k&&(R.__proto__=k),(R.prototype=Object.create(k&&k.prototype)).constructor=R,R.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},R.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},R.prototype.recalculate=function(){},R.prototype.updateTransitions=function(){},R.prototype.hasTransition=function(){},R.prototype.serialize=function(){},R.prototype.onAdd=function($){this.implementation.onAdd&&this.implementation.onAdd($,$.painter.context.gl)},R.prototype.onRemove=function($){this.implementation.onRemove&&this.implementation.onRemove($,$.painter.context.gl)},R}(Rs),Ap={circle:bd,heatmap:Wu,hillshade:Ih,fill:Cd,"fill-extrusion":qc,line:Od,symbol:Tp,background:qd,raster:Mp},Cp=self.HTMLImageElement,Yd=self.HTMLCanvasElement,Sp=self.HTMLVideoElement,Zd=self.ImageData,ku=self.ImageBitmap,xc=function(k,R,$,ue){this.context=k,this.format=$,this.texture=k.gl.createTexture(),this.update(R,ue)};xc.prototype.update=function(k,R,$){var ue=k.width,_e=k.height,Ae=!(this.size&&this.size[0]===ue&&this.size[1]===_e||$),Re=this.context,Ze=Re.gl;if(this.useMipmap=Boolean(R&&R.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),Re.pixelStoreUnpackFlipY.set(!1),Re.pixelStoreUnpack.set(1),Re.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!R||!1!==R.premultiply)),Ae)this.size=[ue,_e],k instanceof Cp||k instanceof Yd||k instanceof Sp||k instanceof Zd||ku&&k instanceof ku?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,k):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,ue,_e,0,this.format,Ze.UNSIGNED_BYTE,k.data);else{var lt=$||{x:0,y:0},_t=lt.x,At=lt.y;k instanceof Cp||k instanceof Yd||k instanceof Sp||k instanceof Zd||ku&&k instanceof ku?Ze.texSubImage2D(Ze.TEXTURE_2D,0,_t,At,Ze.RGBA,Ze.UNSIGNED_BYTE,k):Ze.texSubImage2D(Ze.TEXTURE_2D,0,_t,At,ue,_e,Ze.RGBA,Ze.UNSIGNED_BYTE,k.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},xc.prototype.bind=function(k,R,$){var ue=this.context.gl;ue.bindTexture(ue.TEXTURE_2D,this.texture),$!==ue.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||($=ue.LINEAR),k!==this.filter&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MAG_FILTER,k),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MIN_FILTER,$||k),this.filter=k),R!==this.wrap&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_S,R),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_T,R),this.wrap=R)},xc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},xc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Yf=function(k){var R=this;this._callback=k,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){R._triggered=!1,R._callback()})};Yf.prototype.trigger=function(){var k=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){k._triggered=!1,k._callback()},0))},Yf.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Jc=function(k,R,$){this.target=k,this.parent=R,this.mapId=$,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Yf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?k:self};function Zf(k,R,$){var ue=2*Math.PI*6378137/256/Math.pow(2,$);return[k*ue-2*Math.PI*6378137/2,R*ue-2*Math.PI*6378137/2]}Jc.prototype.send=function(k,R,$,ue,_e){var Ae=this;void 0===_e&&(_e=!1);var Re=Math.round(1e18*Math.random()).toString(36).substring(0,10);$&&(this.callbacks[Re]=$);var Ze=z(this.globalScope)?void 0:[];return this.target.postMessage({id:Re,type:k,hasCallback:!!$,targetMapId:ue,mustQueue:_e,sourceMapId:this.mapId,data:Bt(R,Ze)},Ze),{cancel:function(){$&&delete Ae.callbacks[Re],Ae.target.postMessage({id:Re,type:"<cancel>",targetMapId:ue,sourceMapId:Ae.mapId})}}},Jc.prototype.receive=function(k){var R=k.data,$=R.id;if($&&(!R.targetMapId||this.mapId===R.targetMapId))if("<cancel>"===R.type){delete this.tasks[$];var ue=this.cancelCallbacks[$];delete this.cancelCallbacks[$],ue&&ue()}else S()||R.mustQueue?(this.tasks[$]=R,this.taskQueue.push($),this.invoker.trigger()):this.processTask($,R)},Jc.prototype.process=function(){if(this.taskQueue.length){var k=this.taskQueue.shift(),R=this.tasks[k];delete this.tasks[k],this.taskQueue.length&&this.invoker.trigger(),R&&this.processTask(k,R)}},Jc.prototype.processTask=function(k,R){var $=this;if("<response>"===R.type){var ue=this.callbacks[k];delete this.callbacks[k],ue&&(R.error?ue(Cn(R.error)):ue(null,Cn(R.data)))}else{var _e=!1,Ae=z(this.globalScope)?void 0:[],Re=R.hasCallback?function(At,Wt){_e=!0,delete $.cancelCallbacks[k],$.target.postMessage({id:k,type:"<response>",sourceMapId:$.mapId,error:At?Bt(At):null,data:Bt(Wt,Ae)},Ae)}:function(At){_e=!0},Ze=null,lt=Cn(R.data);if(this.parent[R.type])Ze=this.parent[R.type](R.sourceMapId,lt,Re);else if(this.parent.getWorkerSource){var _t=R.type.split(".");Ze=this.parent.getWorkerSource(R.sourceMapId,_t[0],lt.source)[_t[1]](lt,Re)}else Re(new Error("Could not find function "+R.type));!_e&&Ze&&Ze.cancel&&(this.cancelCallbacks[k]=Ze.cancel)}},Jc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var No=function(k,R){k&&(R?this.setSouthWest(k).setNorthEast(R):4===k.length?this.setSouthWest([k[0],k[1]]).setNorthEast([k[2],k[3]]):this.setSouthWest(k[0]).setNorthEast(k[1]))};No.prototype.setNorthEast=function(k){return this._ne=k instanceof La?new La(k.lng,k.lat):La.convert(k),this},No.prototype.setSouthWest=function(k){return this._sw=k instanceof La?new La(k.lng,k.lat):La.convert(k),this},No.prototype.extend=function(k){var R,$,ue=this._sw,_e=this._ne;if(k instanceof La)R=k,$=k;else{if(!(k instanceof No))return Array.isArray(k)?4===k.length||k.every(Array.isArray)?this.extend(No.convert(k)):this.extend(La.convert(k)):this;if($=k._ne,!(R=k._sw)||!$)return this}return ue||_e?(ue.lng=Math.min(R.lng,ue.lng),ue.lat=Math.min(R.lat,ue.lat),_e.lng=Math.max($.lng,_e.lng),_e.lat=Math.max($.lat,_e.lat)):(this._sw=new La(R.lng,R.lat),this._ne=new La($.lng,$.lat)),this},No.prototype.getCenter=function(){return new La((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},No.prototype.getSouthWest=function(){return this._sw},No.prototype.getNorthEast=function(){return this._ne},No.prototype.getNorthWest=function(){return new La(this.getWest(),this.getNorth())},No.prototype.getSouthEast=function(){return new La(this.getEast(),this.getSouth())},No.prototype.getWest=function(){return this._sw.lng},No.prototype.getSouth=function(){return this._sw.lat},No.prototype.getEast=function(){return this._ne.lng},No.prototype.getNorth=function(){return this._ne.lat},No.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},No.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},No.prototype.isEmpty=function(){return!(this._sw&&this._ne)},No.prototype.contains=function(k){var R=La.convert(k),$=R.lng,ue=R.lat,Ae=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ae=this._sw.lng>=$&&$>=this._ne.lng),this._sw.lat<=ue&&ue<=this._ne.lat&&Ae},No.convert=function(k){return!k||k instanceof No?k:new No(k)};var La=function(k,R){if(isNaN(k)||isNaN(R))throw new Error("Invalid LngLat object: ("+k+", "+R+")");if(this.lng=+k,this.lat=+R,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};La.prototype.wrap=function(){return new La(u(this.lng,-180,180),this.lat)},La.prototype.toArray=function(){return[this.lng,this.lat]},La.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},La.prototype.distanceTo=function(k){var R=Math.PI/180,$=this.lat*R,ue=k.lat*R,_e=Math.sin($)*Math.sin(ue)+Math.cos($)*Math.cos(ue)*Math.cos((k.lng-this.lng)*R);return 6371008.8*Math.acos(Math.min(_e,1))},La.prototype.toBounds=function(k){void 0===k&&(k=0);var R=360*k/40075017,$=R/Math.cos(Math.PI/180*this.lat);return new No(new La(this.lng-$,this.lat-R),new La(this.lng+$,this.lat+R))},La.convert=function(k){if(k instanceof La)return k;if(Array.isArray(k)&&(2===k.length||3===k.length))return new La(Number(k[0]),Number(k[1]));if(!Array.isArray(k)&&"object"==typeof k&&null!==k)return new La(Number("lng"in k?k.lng:k.lon),Number(k.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Wd=2*Math.PI*6371008.8;function Xd(k){return Wd*Math.cos(k*Math.PI/180)}function $d(k){return(180+k)/360}function As(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Wf(k,R){return k/Xd(R)}function Xf(k){return 360/Math.PI*Math.atan(Math.exp((180-360*k)*Math.PI/180))-90}var wc=function(k,R,$){void 0===$&&($=0),this.x=+k,this.y=+R,this.z=+$};wc.fromLngLat=function(k,R){void 0===R&&(R=0);var $=La.convert(k);return new wc($d($.lng),As($.lat),Wf(R,$.lat))},wc.prototype.toLngLat=function(){return new La(360*this.x-180,Xf(this.y))},wc.prototype.toAltitude=function(){return this.z*Xd(Xf(this.y))},wc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Wd*(k=Xf(this.y),1/Math.cos(k*Math.PI/180));var k};var Tc=function(k,R,$){this.z=k,this.x=R,this.y=$,this.key=Au(0,k,k,R,$)};Tc.prototype.equals=function(k){return this.z===k.z&&this.x===k.x&&this.y===k.y},Tc.prototype.url=function(k,R){var $,ue,_e,Ae,Re,Ze=(ue=this.y,_e=this.z,Ae=Zf(256*($=this.x),256*(ue=Math.pow(2,_e)-ue-1),_e),Re=Zf(256*($+1),256*(ue+1),_e),Ae[0]+","+Ae[1]+","+Re[0]+","+Re[1]),lt=function(_t,At,Wt){for(var on,en="",_n=_t;_n>0;_n--)en+=(At&(on=1<<_n-1)?1:0)+(Wt&on?2:0);return en}(this.z,this.x,this.y);return k[(this.x+this.y)%k.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===R?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",lt).replace("{bbox-epsg-3857}",Ze)},Tc.prototype.getTilePoint=function(k){var R=Math.pow(2,this.z);return new n(8192*(k.x*R-this.x),8192*(k.y*R-this.y))},Tc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Jd=function(k,R){this.wrap=k,this.canonical=R,this.key=Au(k,R.z,R.z,R.x,R.y)},Fo=function(k,R,$,ue,_e){this.overscaledZ=k,this.wrap=R,this.canonical=new Tc($,+ue,+_e),this.key=Au(R,k,$,ue,_e)};function Au(k,R,$,ue,_e){(k*=2)<0&&(k=-1*k-1);var Ae=1<<$;return(Ae*Ae*k+Ae*_e+ue).toString(36)+$.toString(36)+R.toString(36)}Fo.prototype.equals=function(k){return this.overscaledZ===k.overscaledZ&&this.wrap===k.wrap&&this.canonical.equals(k.canonical)},Fo.prototype.scaledTo=function(k){var R=this.canonical.z-k;return k>this.canonical.z?new Fo(k,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fo(k,this.wrap,k,this.canonical.x>>R,this.canonical.y>>R)},Fo.prototype.calculateScaledKey=function(k,R){var $=this.canonical.z-k;return k>this.canonical.z?Au(this.wrap*+R,k,this.canonical.z,this.canonical.x,this.canonical.y):Au(this.wrap*+R,k,k,this.canonical.x>>$,this.canonical.y>>$)},Fo.prototype.isChildOf=function(k){if(k.wrap!==this.wrap)return!1;var R=this.canonical.z-k.canonical.z;return 0===k.overscaledZ||k.overscaledZ<this.overscaledZ&&k.canonical.x===this.canonical.x>>R&&k.canonical.y===this.canonical.y>>R},Fo.prototype.children=function(k){if(this.overscaledZ>=k)return[new Fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var R=this.canonical.z+1,$=2*this.canonical.x,ue=2*this.canonical.y;return[new Fo(R,this.wrap,R,$,ue),new Fo(R,this.wrap,R,$+1,ue),new Fo(R,this.wrap,R,$,ue+1),new Fo(R,this.wrap,R,$+1,ue+1)]},Fo.prototype.isLessThan=function(k){return this.wrap<k.wrap||!(this.wrap>k.wrap)&&(this.overscaledZ<k.overscaledZ||!(this.overscaledZ>k.overscaledZ)&&(this.canonical.x<k.canonical.x||!(this.canonical.x>k.canonical.x)&&this.canonical.y<k.canonical.y))},Fo.prototype.wrapped=function(){return new Fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Fo.prototype.unwrapTo=function(k){return new Fo(this.overscaledZ,k,this.canonical.z,this.canonical.x,this.canonical.y)},Fo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Fo.prototype.toUnwrapped=function(){return new Jd(this.wrap,this.canonical)},Fo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Fo.prototype.getTilePoint=function(k){return this.canonical.getTilePoint(new wc(k.x-this.wrap,k.y))},fr("CanonicalTileID",Tc),fr("OverscaledTileID",Fo,{omit:["posMatrix"]});var Ul=function(k,R,$){if(this.uid=k,R.height!==R.width)throw new RangeError("DEM tiles must be square");if($&&"mapbox"!==$&&"terrarium"!==$)return C('"'+$+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=R.height;var ue=this.dim=R.height-2;this.data=new Uint32Array(R.data.buffer),this.encoding=$||"mapbox";for(var _e=0;_e<ue;_e++)this.data[this._idx(-1,_e)]=this.data[this._idx(0,_e)],this.data[this._idx(ue,_e)]=this.data[this._idx(ue-1,_e)],this.data[this._idx(_e,-1)]=this.data[this._idx(_e,0)],this.data[this._idx(_e,ue)]=this.data[this._idx(_e,ue-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ue,-1)]=this.data[this._idx(ue-1,0)],this.data[this._idx(-1,ue)]=this.data[this._idx(0,ue-1)],this.data[this._idx(ue,ue)]=this.data[this._idx(ue-1,ue-1)]};Ul.prototype.get=function(k,R){var $=new Uint8Array(this.data.buffer),ue=4*this._idx(k,R);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)($[ue],$[ue+1],$[ue+2])},Ul.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ul.prototype._idx=function(k,R){if(k<-1||k>=this.dim+1||R<-1||R>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(R+1)*this.stride+(k+1)},Ul.prototype._unpackMapbox=function(k,R,$){return(256*k*256+256*R+$)/10-1e4},Ul.prototype._unpackTerrarium=function(k,R,$){return 256*k+R+$/256-32768},Ul.prototype.getPixels=function(){return new vs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ul.prototype.backfillBorder=function(k,R,$){if(this.dim!==k.dim)throw new Error("dem dimension mismatch");var ue=R*this.dim,_e=R*this.dim+this.dim,Ae=$*this.dim,Re=$*this.dim+this.dim;switch(R){case-1:ue=_e-1;break;case 1:_e=ue+1}switch($){case-1:Ae=Re-1;break;case 1:Re=Ae+1}for(var Ze=-R*this.dim,lt=-$*this.dim,_t=Ae;_t<Re;_t++)for(var At=ue;At<_e;At++)this.data[this._idx(At,_t)]=k.data[this._idx(At+Ze,_t+lt)]},fr("DEMData",Ul);var af=function(k){this._stringToNumber={},this._numberToString=[];for(var R=0;R<k.length;R++){var $=k[R];this._stringToNumber[$]=R,this._numberToString[R]=$}};af.prototype.encode=function(k){return this._stringToNumber[k]},af.prototype.decode=function(k){return this._numberToString[k]};var sf=function(k,R,$,ue,_e){this.type="Feature",this._vectorTileFeature=k,k._z=R,k._x=$,k._y=ue,this.properties=k.properties,this.id=_e},$f={geometry:{configurable:!0}};$f.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},$f.geometry.set=function(k){this._geometry=k},sf.prototype.toJSON=function(){var k={geometry:this.geometry};for(var R in this)"_geometry"!==R&&"_vectorTileFeature"!==R&&(k[R]=this[R]);return k},Object.defineProperties(sf.prototype,$f);var Kc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Kc.prototype.updateState=function(k,R,$){var ue=String(R);if(this.stateChanges[k]=this.stateChanges[k]||{},this.stateChanges[k][ue]=this.stateChanges[k][ue]||{},s(this.stateChanges[k][ue],$),null===this.deletedStates[k])for(var _e in this.deletedStates[k]={},this.state[k])_e!==ue&&(this.deletedStates[k][_e]=null);else if(this.deletedStates[k]&&null===this.deletedStates[k][ue])for(var Ae in this.deletedStates[k][ue]={},this.state[k][ue])$[Ae]||(this.deletedStates[k][ue][Ae]=null);else for(var Re in $)this.deletedStates[k]&&this.deletedStates[k][ue]&&null===this.deletedStates[k][ue][Re]&&delete this.deletedStates[k][ue][Re]},Kc.prototype.removeFeatureState=function(k,R,$){if(null!==this.deletedStates[k]){var ue=String(R);if(this.deletedStates[k]=this.deletedStates[k]||{},$&&void 0!==R)null!==this.deletedStates[k][ue]&&(this.deletedStates[k][ue]=this.deletedStates[k][ue]||{},this.deletedStates[k][ue][$]=null);else if(void 0!==R)if(this.stateChanges[k]&&this.stateChanges[k][ue])for($ in this.deletedStates[k][ue]={},this.stateChanges[k][ue])this.deletedStates[k][ue][$]=null;else this.deletedStates[k][ue]=null;else this.deletedStates[k]=null}},Kc.prototype.getState=function(k,R){var $=String(R),Ae=s({},(this.state[k]||{})[$],(this.stateChanges[k]||{})[$]);if(null===this.deletedStates[k])return{};if(this.deletedStates[k]){var Re=this.deletedStates[k][R];if(null===Re)return{};for(var Ze in Re)delete Ae[Ze]}return Ae},Kc.prototype.initializeTileState=function(k,R){k.setFeatureState(this.state,R)},Kc.prototype.coalesceChanges=function(k,R){var $={};for(var ue in this.stateChanges){this.state[ue]=this.state[ue]||{};var _e={};for(var Ae in this.stateChanges[ue])this.state[ue][Ae]||(this.state[ue][Ae]={}),s(this.state[ue][Ae],this.stateChanges[ue][Ae]),_e[Ae]=this.state[ue][Ae];$[ue]=_e}for(var Re in this.deletedStates){this.state[Re]=this.state[Re]||{};var Ze={};if(null===this.deletedStates[Re])for(var lt in this.state[Re])Ze[lt]={},this.state[Re][lt]={};else for(var _t in this.deletedStates[Re]){if(null===this.deletedStates[Re][_t])this.state[Re][_t]={};else for(var At=0,Wt=Object.keys(this.deletedStates[Re][_t]);At<Wt.length;At+=1)delete this.state[Re][_t][Wt[At]];Ze[_t]=this.state[Re][_t]}$[Re]=$[Re]||{},s($[Re],Ze)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys($).length)for(var en in k)k[en].setFeatureState($,R)};var Hl=function(k,R){this.tileID=k,this.x=k.canonical.x,this.y=k.canonical.y,this.z=k.canonical.z,this.grid=new Mr(8192,16,0),this.grid3D=new Mr(8192,16,0),this.featureIndexArray=new Nt,this.promoteId=R};function Kd(k,R,$,ue,_e){return x(k,function(Ae,Re){var Ze=R instanceof Xs?R.get(Re):null;return Ze&&Ze.evaluate?Ze.evaluate($,ue,_e):Ze})}function Qd(k){for(var R=1/0,$=1/0,ue=-1/0,_e=-1/0,Ae=0,Re=k;Ae<Re.length;Ae+=1){var Ze=Re[Ae];R=Math.min(R,Ze.x),$=Math.min($,Ze.y),ue=Math.max(ue,Ze.x),_e=Math.max(_e,Ze.y)}return{minX:R,minY:$,maxX:ue,maxY:_e}}function Ep(k,R){return R-k}Hl.prototype.insert=function(k,R,$,ue,_e,Ae){var Re=this.featureIndexArray.length;this.featureIndexArray.emplaceBack($,ue,_e);for(var Ze=Ae?this.grid3D:this.grid,lt=0;lt<R.length;lt++){for(var _t=R[lt],At=[1/0,1/0,-1/0,-1/0],Wt=0;Wt<_t.length;Wt++){var on=_t[Wt];At[0]=Math.min(At[0],on.x),At[1]=Math.min(At[1],on.y),At[2]=Math.max(At[2],on.x),At[3]=Math.max(At[3],on.y)}At[0]<8192&&At[1]<8192&&At[2]>=0&&At[3]>=0&&Ze.insert(Re,At[0],At[1],At[2],At[3])}},Hl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new mu.VectorTile(new _u(this.rawTileData)).layers,this.sourceLayerCoder=new af(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Hl.prototype.query=function(k,R,$,ue){var _e=this;this.loadVTLayers();for(var Ae=k.params||{},Re=8192/k.tileSize/k.scale,Ze=Gi(Ae.filter),lt=k.queryGeometry,_t=k.queryPadding*Re,At=Qd(lt),Wt=this.grid.query(At.minX-_t,At.minY-_t,At.maxX+_t,At.maxY+_t),on=Qd(k.cameraQueryGeometry),_n=0,Rn=this.grid3D.query(on.minX-_t,on.minY-_t,on.maxX+_t,on.maxY+_t,function(Er,zr,ni,ti){return function(li,Ti,Mi,mi,Pi){for(var Ei=0,Ai=li;Ei<Ai.length;Ei+=1){var ga=Ai[Ei];if(Ti<=ga.x&&Mi<=ga.y&&mi>=ga.x&&Pi>=ga.y)return!0}var da=[new n(Ti,Mi),new n(Ti,Pi),new n(mi,Pi),new n(mi,Mi)];if(li.length>2)for(var Ma=0,Vi=da;Ma<Vi.length;Ma+=1)if(Js(li,Vi[Ma]))return!0;for(var pa=0;pa<li.length-1;pa++)if(zc(li[pa],li[pa+1],da))return!0;return!1}(k.cameraQueryGeometry,Er-_t,zr-_t,ni+_t,ti+_t)});_n<Rn.length;_n+=1)Wt.push(Rn[_n]);Wt.sort(Ep);for(var Wn,rr={},ir=function(Er){var zr=Wt[Er];if(zr!==Wn){Wn=zr;var ni=_e.featureIndexArray.get(zr),ti=null;_e.loadMatchingFeature(rr,ni.bucketIndex,ni.sourceLayerIndex,ni.featureIndex,Ze,Ae.layers,Ae.availableImages,R,$,ue,function(li,Ti,Mi){return ti||(ti=Ka(li)),Ti.queryIntersectsFeature(lt,li,Mi,ti,_e.z,k.transform,Re,k.pixelPosMatrix)})}},hr=0;hr<Wt.length;hr++)ir(hr);return rr},Hl.prototype.loadMatchingFeature=function(k,R,$,ue,_e,Ae,Re,Ze,lt,_t,At){var Wt=this.bucketLayerIDs[R];if(!Ae||function(ni,ti){for(var li=0;li<ni.length;li++)if(ti.indexOf(ni[li])>=0)return!0;return!1}(Ae,Wt)){var on=this.sourceLayerCoder.decode($),en=this.vtLayers[on].feature(ue);if(_e.filter(new Sa(this.tileID.overscaledZ),en))for(var _n=this.getId(en,on),Rn=0;Rn<Wt.length;Rn++){var Zn=Wt[Rn];if(!(Ae&&Ae.indexOf(Zn)<0)){var Wn=Ze[Zn];if(Wn){var rr={};void 0!==_n&&_t&&(rr=_t.getState(Wn.sourceLayer||"_geojsonTileLayer",_n));var ir=lt[Zn];ir.paint=Kd(ir.paint,Wn.paint,en,rr,Re),ir.layout=Kd(ir.layout,Wn.layout,en,rr,Re);var hr=!At||At(en,Wn,rr);if(hr){var Er=new sf(en,this.z,this.x,this.y,_n);Er.layer=ir;var zr=k[Zn];void 0===zr&&(zr=k[Zn]=[]),zr.push({featureIndex:ue,feature:Er,intersectionZ:hr})}}}}}},Hl.prototype.lookupSymbolFeatures=function(k,R,$,ue,_e,Ae,Re,Ze){var lt={};this.loadVTLayers();for(var _t=Gi(_e),At=0,Wt=k;At<Wt.length;At+=1)this.loadMatchingFeature(lt,$,ue,Wt[At],_t,Ae,Re,Ze,R);return lt},Hl.prototype.hasLayer=function(k){for(var R=0,$=this.bucketLayerIDs;R<$.length;R+=1)for(var ue=0,_e=$[R];ue<_e.length;ue+=1)if(k===_e[ue])return!0;return!1},Hl.prototype.getId=function(k,R){var $=k.id;return this.promoteId&&"boolean"==typeof($=k.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[R]])&&($=Number($)),$},fr("FeatureIndex",Hl,{omit:["rawTileData","sourceLayerCoder"]});var es=function(k,R){this.tileID=k,this.uid=h(),this.uses=0,this.tileSize=R,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};es.prototype.registerFadeDuration=function(k){var R=k+this.timeAdded;R<j.now()||this.fadeEndTime&&R<this.fadeEndTime||(this.fadeEndTime=R)},es.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},es.prototype.loadVectorData=function(k,R,$){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",k){for(var ue in k.featureIndex&&(this.latestFeatureIndex=k.featureIndex,k.rawTileData?(this.latestRawTileData=k.rawTileData,this.latestFeatureIndex.rawTileData=k.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=k.collisionBoxArray,this.buckets=function(_t,At){var Wt={};if(!At)return Wt;for(var on=function(){var Rn=_n[en],Zn=Rn.layerIds.map(function(hr){return At.getLayer(hr)}).filter(Boolean);if(0!==Zn.length){Rn.layers=Zn,Rn.stateDependentLayerIds&&(Rn.stateDependentLayers=Rn.stateDependentLayerIds.map(function(hr){return Zn.filter(function(Er){return Er.id===hr})[0]}));for(var Wn=0,rr=Zn;Wn<rr.length;Wn+=1)Wt[rr[Wn].id]=Rn}},en=0,_n=_t;en<_n.length;en+=1)on();return Wt}(k.buckets,R.style),this.hasSymbolBuckets=!1,this.buckets){var _e=this.buckets[ue];if(_e instanceof Oa){if(this.hasSymbolBuckets=!0,!$)break;_e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ae in this.buckets){var Re=this.buckets[Ae];if(Re instanceof Oa&&Re.hasRTLText){this.hasRTLText=!0,Uo.isLoading()||Uo.isLoaded()||"deferred"!==Mo()||Ca();break}}for(var Ze in this.queryPadding=0,this.buckets){var lt=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,R.style.getLayer(Ze).queryRadius(lt))}k.imageAtlas&&(this.imageAtlas=k.imageAtlas),k.glyphAtlasImage&&(this.glyphAtlasImage=k.glyphAtlasImage)}else this.collisionBoxArray=new Ee},es.prototype.unloadVectorData=function(){for(var k in this.buckets)this.buckets[k].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},es.prototype.getBucket=function(k){return this.buckets[k.id]},es.prototype.upload=function(k){for(var R in this.buckets){var $=this.buckets[R];$.uploadPending()&&$.upload(k)}var ue=k.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xc(k,this.imageAtlas.image,ue.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xc(k,this.glyphAtlasImage,ue.ALPHA),this.glyphAtlasImage=null)},es.prototype.prepare=function(k){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(k,this.imageAtlasTexture)},es.prototype.queryRenderedFeatures=function(k,R,$,ue,_e,Ae,Re,Ze,lt,_t){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ue,cameraQueryGeometry:_e,scale:Ae,tileSize:this.tileSize,pixelPosMatrix:_t,transform:Ze,params:Re,queryPadding:this.queryPadding*lt},k,R,$):{}},es.prototype.querySourceFeatures=function(k,R){var $=this.latestFeatureIndex;if($&&$.rawTileData){var ue=$.loadVTLayers(),_e=R?R.sourceLayer:"",Ae=ue._geojsonTileLayer||ue[_e];if(Ae)for(var Re=Gi(R&&R.filter),Ze=this.tileID.canonical,lt=Ze.z,_t=Ze.x,At=Ze.y,Wt={z:lt,x:_t,y:At},on=0;on<Ae.length;on++){var en=Ae.feature(on);if(Re.filter(new Sa(this.tileID.overscaledZ),en)){var _n=$.getId(en,_e),Rn=new sf(en,lt,_t,At,_n);Rn.tile=Wt,k.push(Rn)}}}},es.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},es.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},es.prototype.setExpiryData=function(k){var R=this.expirationTime;if(k.cacheControl){var $=E(k.cacheControl);$["max-age"]&&(this.expirationTime=Date.now()+1e3*$["max-age"])}else k.expires&&(this.expirationTime=new Date(k.expires).getTime());if(this.expirationTime){var ue=Date.now(),_e=!1;if(this.expirationTime>ue)_e=!1;else if(R)if(this.expirationTime<R)_e=!0;else{var Ae=this.expirationTime-R;Ae?this.expirationTime=ue+Math.max(Ae,3e4):_e=!0}else _e=!0;_e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},es.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},es.prototype.setFeatureState=function(k,R){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(k).length){var $=this.latestFeatureIndex.loadVTLayers();for(var ue in this.buckets)if(R.style.hasLayer(ue)){var _e=this.buckets[ue],Ae=_e.layers[0].sourceLayer||"_geojsonTileLayer",Re=$[Ae],Ze=k[Ae];if(Re&&Ze&&0!==Object.keys(Ze).length){_e.update(Ze,Re,this.imageAtlas&&this.imageAtlas.patternPositions||{});var lt=R&&R.style&&R.style.getLayer(ue);lt&&(this.queryPadding=Math.max(this.queryPadding,lt.queryRadius(_e)))}}}},es.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},es.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()},es.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},es.prototype.setHoldDuration=function(k){this.symbolFadeHoldUntil=j.now()+k},es.prototype.setDependencies=function(k,R){for(var $={},ue=0,_e=R;ue<_e.length;ue+=1)$[_e[ue]]=!0;this.dependencies[k]=$},es.prototype.hasDependency=function(k,R){for(var $=0,ue=k;$<ue.length;$+=1){var Ae=this.dependencies[ue[$]];if(Ae)for(var Re=0,Ze=R;Re<Ze.length;Re+=1)if(Ae[Ze[Re]])return!0}return!1};var nc=self.performance,eh=function(k){this._marks={start:[k.url,"start"].join("#"),end:[k.url,"end"].join("#"),measure:k.url.toString()},nc.mark(this._marks.start)};eh.prototype.finish=function(){nc.mark(this._marks.end);var k=nc.getEntriesByName(this._marks.measure);return 0===k.length&&(nc.measure(this._marks.measure,this._marks.start,this._marks.end),k=nc.getEntriesByName(this._marks.measure),nc.clearMarks(this._marks.start),nc.clearMarks(this._marks.end),nc.clearMeasures(this._marks.measure)),k},e.Actor=Jc,e.AlphaImage=jl,e.CanonicalTileID=Tc,e.CollisionBoxArray=Ee,e.Color=sn,e.DEMData=Ul,e.DataConstantProperty=Si,e.DictionaryCoder=af,e.EXTENT=8192,e.ErrorEvent=nt,e.EvaluationParameters=Sa,e.Event=Xe,e.Evented=ye,e.FeatureIndex=Hl,e.FillBucket=Tl,e.FillExtrusionBucket=pl,e.ImageAtlas=ef,e.ImagePosition=Pf,e.LineBucket=Ns,e.LngLat=La,e.LngLatBounds=No,e.MercatorCoordinate=wc,e.ONE_EM=24,e.OverscaledTileID=Fo,e.Point=n,e.Point$1=n,e.Properties=hs,e.Protobuf=_u,e.RGBAImage=vs,e.RequestManager=ce,e.RequestPerformance=eh,e.ResourceType=wt,e.SegmentVector=Zt,e.SourceFeatureState=Kc,e.StructArrayLayout1ui2=W,e.StructArrayLayout2f1f2i16=pc,e.StructArrayLayout2i4=tl,e.StructArrayLayout3ui6=Go,e.StructArrayLayout4i8=co,e.SymbolBucket=Oa,e.Texture=xc,e.Tile=es,e.Transitionable=Ws,e.Uniform1f=ur,e.Uniform1i=Oi,e.Uniform2f=Gr,e.Uniform3f=hi,e.Uniform4f=si,e.UniformColor=wi,e.UniformMatrix4f=Xi,e.UnwrappedTileID=Jd,e.ValidationError=Ue,e.WritingMode=rl,e.ZoomHistory=dr,e.add=function(k,R,$){return k[0]=R[0]+$[0],k[1]=R[1]+$[1],k[2]=R[2]+$[2],k},e.addDynamicAttributes=qf,e.asyncAll=function(k,R,$){if(!k.length)return $(null,[]);var ue=k.length,_e=new Array(k.length),Ae=null;k.forEach(function(Re,Ze){R(Re,function(lt,_t){lt&&(Ae=lt),_e[Ze]=_t,0==--ue&&$(Ae,_e)})})},e.bezier=l,e.bindAll=c,e.browser=j,e.cacheEntryPossiblyAdded=function(k){++ct>Ve&&(k.getActor().send("enforceCacheSizeLimit",He),ct=0)},e.clamp=f,e.clearTileCache=function(k){var R=self.caches.delete("mapbox-tiles");k&&R.catch(k).then(function(){return k()})},e.clipLine=mp,e.clone=function(k){var R=new Gs(16);return R[0]=k[0],R[1]=k[1],R[2]=k[2],R[3]=k[3],R[4]=k[4],R[5]=k[5],R[6]=k[6],R[7]=k[7],R[8]=k[8],R[9]=k[9],R[10]=k[10],R[11]=k[11],R[12]=k[12],R[13]=k[13],R[14]=k[14],R[15]=k[15],R},e.clone$1=M,e.clone$2=function(k){var R=new Gs(3);return R[0]=k[0],R[1]=k[1],R[2]=k[2],R},e.collisionCircleLayout=ep,e.config=H,e.create=function(){var k=new Gs(16);return Gs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=0,k[12]=0,k[13]=0,k[14]=0),k[0]=1,k[5]=1,k[10]=1,k[15]=1,k},e.create$1=function(){var k=new Gs(9);return Gs!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k},e.create$2=function(){var k=new Gs(4);return Gs!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k},e.createCommonjsModule=r,e.createExpression=an,e.createLayout=Ea,e.createStyleLayer=function(k){return"custom"===k.type?new kp(k):new Ap[k.type](k)},e.cross=function(k,R,$){var ue=R[0],_e=R[1],Ae=R[2],Re=$[0],Ze=$[1],lt=$[2];return k[0]=_e*lt-Ae*Ze,k[1]=Ae*Re-ue*lt,k[2]=ue*Ze-_e*Re,k},e.deepEqual=function k(R,$){if(Array.isArray(R)){if(!Array.isArray($)||R.length!==$.length)return!1;for(var ue=0;ue<R.length;ue++)if(!k(R[ue],$[ue]))return!1;return!0}if("object"==typeof R&&null!==R&&null!==$){if("object"!=typeof $||Object.keys(R).length!==Object.keys($).length)return!1;for(var _e in R)if(!k(R[_e],$[_e]))return!1;return!0}return R===$},e.dot=function(k,R){return k[0]*R[0]+k[1]*R[1]+k[2]*R[2]},e.dot$1=function(k,R){return k[0]*R[0]+k[1]*R[1]+k[2]*R[2]+k[3]*R[3]},e.ease=i,e.emitValidationErrors=Vr,e.endsWith=T,e.enforceCacheSizeLimit=function(k){it(),Fe&&Fe.then(function(R){R.keys().then(function($){for(var ue=0;ue<$.length-k;ue++)R.delete($[ue])})})},e.evaluateSizeForFeature=tf,e.evaluateSizeForZoom=zf,e.evaluateVariableOffset=yp,e.evented=io,e.extend=s,e.featureFilter=Gi,e.filterObject=w,e.fromRotation=function(k,R){var $=Math.sin(R),ue=Math.cos(R);return k[0]=ue,k[1]=$,k[2]=0,k[3]=-$,k[4]=ue,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k},e.getAnchorAlignment=_c,e.getAnchorJustification=Zc,e.getArrayBuffer=Ct,e.getImage=cn,e.getJSON=function(k,R){return st(s(k,{type:"json"}),R)},e.getRTLTextPluginStatus=Mo,e.getReferrer=St,e.getVideo=function(k,R){var $,ue,_e=self.document.createElement("video");_e.muted=!0,_e.onloadstart=function(){R(null,_e)};for(var Ae=0;Ae<k.length;Ae++){var Re=self.document.createElement("source");$=k[Ae],ue=void 0,(ue=self.document.createElement("a")).href=$,(ue.protocol!==self.document.location.protocol||ue.host!==self.document.location.host)&&(_e.crossOrigin="Anonymous"),Re.src=k[Ae],_e.appendChild(Re)}return{cancel:function(){}}},e.identity=Zu,e.invert=function(k,R){var $=R[0],ue=R[1],_e=R[2],Ae=R[3],Re=R[4],Ze=R[5],lt=R[6],_t=R[7],At=R[8],Wt=R[9],on=R[10],en=R[11],_n=R[12],Rn=R[13],Zn=R[14],Wn=R[15],rr=$*Ze-ue*Re,ir=$*lt-_e*Re,hr=$*_t-Ae*Re,Er=ue*lt-_e*Ze,zr=ue*_t-Ae*Ze,ni=_e*_t-Ae*lt,ti=At*Rn-Wt*_n,li=At*Zn-on*_n,Ti=At*Wn-en*_n,Mi=Wt*Zn-on*Rn,mi=Wt*Wn-en*Rn,Pi=on*Wn-en*Zn,Ei=rr*Pi-ir*mi+hr*Mi+Er*Ti-zr*li+ni*ti;return Ei?(k[0]=(Ze*Pi-lt*mi+_t*Mi)*(Ei=1/Ei),k[1]=(_e*mi-ue*Pi-Ae*Mi)*Ei,k[2]=(Rn*ni-Zn*zr+Wn*Er)*Ei,k[3]=(on*zr-Wt*ni-en*Er)*Ei,k[4]=(lt*Ti-Re*Pi-_t*li)*Ei,k[5]=($*Pi-_e*Ti+Ae*li)*Ei,k[6]=(Zn*hr-_n*ni-Wn*ir)*Ei,k[7]=(At*ni-on*hr+en*ir)*Ei,k[8]=(Re*mi-Ze*Ti+_t*ti)*Ei,k[9]=(ue*Ti-$*mi-Ae*ti)*Ei,k[10]=(_n*zr-Rn*hr+Wn*rr)*Ei,k[11]=(Wt*hr-At*zr-en*rr)*Ei,k[12]=(Ze*li-Re*Mi-lt*ti)*Ei,k[13]=($*Mi-ue*li+_e*ti)*Ei,k[14]=(Rn*ir-_n*Er-Zn*rr)*Ei,k[15]=(At*Er-Wt*ir+on*rr)*Ei,k):null},e.isChar=cr,e.isMapboxURL=pe,e.keysDifference=function(k,R){var $=[];for(var ue in k)ue in R||$.push(ue);return $},e.makeRequest=st,e.mapObject=x,e.mercatorXfromLng=$d,e.mercatorYfromLat=As,e.mercatorZfromAltitude=Wf,e.mul=_d,e.multiply=Bc,e.mvt=mu,e.normalize=function(k,R){var $=R[0],ue=R[1],_e=R[2],Ae=$*$+ue*ue+_e*_e;return Ae>0&&(Ae=1/Math.sqrt(Ae)),k[0]=R[0]*Ae,k[1]=R[1]*Ae,k[2]=R[2]*Ae,k},e.number=Br,e.offscreenCanvasSupported=vt,e.ortho=function(k,R,$,ue,_e,Ae,Re){var Ze=1/(R-$),lt=1/(ue-_e),_t=1/(Ae-Re);return k[0]=-2*Ze,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*lt,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*_t,k[11]=0,k[12]=(R+$)*Ze,k[13]=(_e+ue)*lt,k[14]=(Re+Ae)*_t,k[15]=1,k},e.parseGlyphPBF=function(k){return new _u(k).readFields(sp,[])},e.pbf=_u,e.performSymbolLayout=function(k,R,$,ue,_e,Ae,Re){k.createArrays(),k.tilePixelRatio=8192/(512*k.overscaling),k.compareText={},k.iconsNeedLinear=!1;var lt=k.layers[0].layout,_t=k.layers[0]._unevaluatedLayout._values,At={};if("composite"===k.textSizeData.kind){var Wt=k.textSizeData,en=Wt.maxZoom;At.compositeTextSizes=[_t["text-size"].possiblyEvaluate(new Sa(Wt.minZoom),Re),_t["text-size"].possiblyEvaluate(new Sa(en),Re)]}if("composite"===k.iconSizeData.kind){var _n=k.iconSizeData,Zn=_n.maxZoom;At.compositeIconSizes=[_t["icon-size"].possiblyEvaluate(new Sa(_n.minZoom),Re),_t["icon-size"].possiblyEvaluate(new Sa(Zn),Re)]}At.layoutTextSize=_t["text-size"].possiblyEvaluate(new Sa(k.zoom+1),Re),At.layoutIconSize=_t["icon-size"].possiblyEvaluate(new Sa(k.zoom+1),Re),At.textMaxSize=_t["text-size"].possiblyEvaluate(new Sa(18));for(var Wn=24*lt.get("text-line-height"),rr="map"===lt.get("text-rotation-alignment")&&"point"!==lt.get("symbol-placement"),ir=lt.get("text-keep-upright"),hr=lt.get("text-size"),Er=function(){var ti=ni[zr],li=lt.get("text-font").evaluate(ti,{},Re).join(","),Ti=hr.evaluate(ti,{},Re),Mi=At.layoutTextSize.evaluate(ti,{},Re),mi=At.layoutIconSize.evaluate(ti,{},Re),Pi={horizontal:{},vertical:void 0},Ei=ti.text,Ai=[0,0];if(Ei){var ga=Ei.toString(),da=24*lt.get("text-letter-spacing").evaluate(ti,{},Re),Ma=function(Ji){for(var va=0,ko=Ji;va<ko.length;va+=1)if(!Di(ko[va].charCodeAt(0)))return!1;return!0}(ga)?da:0,Vi=lt.get("text-anchor").evaluate(ti,{},Re),pa=lt.get("text-variable-anchor");if(!pa){var Ga=lt.get("text-radial-offset").evaluate(ti,{},Re);Ai=Ga?yp(Vi,[24*Ga,Ud]):lt.get("text-offset").evaluate(ti,{},Re).map(function(Ji){return 24*Ji})}var Ba=rr?"center":lt.get("text-justify").evaluate(ti,{},Re),Qa=lt.get("symbol-placement"),qa="point"===Qa?24*lt.get("text-max-width").evaluate(ti,{},Re):0,zo=function(){k.allowVerticalPlacement&&ki(ga)&&(Pi.vertical=Rf(Ei,R,$,_e,li,qa,Wn,Vi,"left",Ma,Ai,rl.vertical,!0,Qa,Mi,Ti))};if(!rr&&pa){for(var eo="auto"===Ba?pa.map(function(Ji){return Zc(Ji)}):[Ba],ls=!1,ts=0;ts<eo.length;ts++){var cs=eo[ts];if(!Pi.horizontal[cs])if(ls)Pi.horizontal[cs]=Pi.horizontal[0];else{var Cs=Rf(Ei,R,$,_e,li,qa,Wn,"center",cs,Ma,Ai,rl.horizontal,!1,Qa,Mi,Ti);Cs&&(Pi.horizontal[cs]=Cs,ls=1===Cs.positionedLines.length)}}zo()}else{"auto"===Ba&&(Ba=Zc(Vi));var us=Rf(Ei,R,$,_e,li,qa,Wn,Vi,Ba,Ma,Ai,rl.horizontal,!1,Qa,Mi,Ti);us&&(Pi.horizontal[Ba]=us),zo(),ki(ga)&&rr&&ir&&(Pi.vertical=Rf(Ei,R,$,_e,li,qa,Wn,Vi,Ba,Ma,Ai,rl.vertical,!1,Qa,Mi,Ti))}}var Ji,va,Ao,ys,_s,Bo=void 0,ss=!1;if(ti.icon&&ti.icon.name){var Zi=ue[ti.icon.name];Zi&&(Ji=_e[ti.icon.name],va=lt.get("icon-offset").evaluate(ti,{},Re),Ao=_c(lt.get("icon-anchor").evaluate(ti,{},Re)),Bo={image:Ji,top:_s=va[1]-Ji.displaySize[1]*Ao.verticalAlign,bottom:_s+Ji.displaySize[1],left:ys=va[0]-Ji.displaySize[0]*Ao.horizontalAlign,right:ys+Ji.displaySize[0]},ss=Zi.sdf,void 0===k.sdfIcons?k.sdfIcons=Zi.sdf:k.sdfIcons!==Zi.sdf&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Zi.pixelRatio!==k.pixelRatio||0!==lt.get("icon-rotate").constantOr(1))&&(k.iconsNeedLinear=!0))}var Yo=Qo(Pi.horizontal)||Pi.vertical;k.iconsInText=!!Yo&&Yo.iconsInText,(Yo||Bo)&&function(Ji,va,ko,Ao,ho,to,wa,bo,ys,Fs,_s){var ml=to.textMaxSize.evaluate(va,{});void 0===ml&&(ml=wa);var rc,Lo=Ji.layers[0].layout,Ml=Lo.get("icon-offset").evaluate(va,{},_s),vl=Qo(ko.horizontal),yl=wa/24,Cu=Ji.tilePixelRatio*yl,Qc=Ji.tilePixelRatio*ml/24,lf=Ji.tilePixelRatio*bo,ic=Ji.tilePixelRatio*Lo.get("symbol-spacing"),cf=Lo.get("text-padding")*Ji.tilePixelRatio,uf=Lo.get("icon-padding")*Ji.tilePixelRatio,Mc=Lo.get("text-max-angle")/180*Math.PI,il="map"===Lo.get("text-rotation-alignment")&&"point"!==Lo.get("symbol-placement"),ac="map"===Lo.get("icon-rotation-alignment")&&"point"!==Lo.get("symbol-placement"),kc=Lo.get("symbol-placement"),zs=ic/2,Bs=Lo.get("icon-text-fit");Ao&&"none"!==Bs&&(Ji.allowVerticalPlacement&&ko.vertical&&(rc=Fd(Ao,ko.vertical,Bs,Lo.get("icon-text-fit-padding"),Ml,yl)),vl&&(Ao=Fd(Ao,vl,Bs,Lo.get("icon-text-fit-padding"),Ml,yl)));var bs=function(lc,kl){kl.x<0||kl.x>=8192||kl.y<0||kl.y>=8192||function(so,js,Qf,Zl,cc,hf,ou,Ll,bl,Lu,ol,Cc,Iu,ed,Wl,rh,td,ih,su,nd,Vs,pf,rd,Il,Dp){var uc,Xl,Sc,Ec,Dc,Oc=so.addToLineVertexArray(js,Qf),mf=0,ah=0,oh=0,sh=0,id=-1,ad=-1,sl={},lh=Yn(""),Pu=0,od=0;if(void 0===Ll._unevaluatedLayout.getValue("text-radial-offset")?(Pu=(uc=Ll.layout.get("text-offset").evaluate(Vs,{},Il).map(function(Nu){return 24*Nu}))[0],od=uc[1]):(Pu=24*Ll.layout.get("text-radial-offset").evaluate(Vs,{},Il),od=Ud),so.allowVerticalPlacement&&Zl.vertical){var ch=Ll.layout.get("text-rotate").evaluate(Vs,{},Il)+90;Ec=new Hf(bl,js,Lu,ol,Cc,Zl.vertical,Iu,ed,Wl,ch),ou&&(Dc=new Hf(bl,js,Lu,ol,Cc,ou,td,ih,Wl,ch))}if(cc){var sd=Ll.layout.get("icon-rotate").evaluate(Vs,{}),uh="none"!==Ll.layout.get("icon-text-fit"),fh=gp(cc,sd,rd,uh),ld=ou?gp(ou,sd,rd,uh):void 0;Sc=new Hf(bl,js,Lu,ol,Cc,cc,td,ih,!1,sd),mf=4*fh.length;var dh=so.iconSizeData,Ru=null;"source"===dh.kind?(Ru=[128*Ll.layout.get("icon-size").evaluate(Vs,{})])[0]>32640&&C(so.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===dh.kind&&((Ru=[128*pf.compositeIconSizes[0].evaluate(Vs,{},Il),128*pf.compositeIconSizes[1].evaluate(Vs,{},Il)])[0]>32640||Ru[1]>32640)&&C(so.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),so.addSymbols(so.icon,fh,Ru,nd,su,Vs,!1,js,Oc.lineStartIndex,Oc.lineLength,-1,Il),id=so.icon.placedSymbolArray.length-1,ld&&(ah=4*ld.length,so.addSymbols(so.icon,ld,Ru,nd,su,Vs,rl.vertical,js,Oc.lineStartIndex,Oc.lineLength,-1,Il),ad=so.icon.placedSymbolArray.length-1)}for(var hh in Zl.horizontal){var gf=Zl.horizontal[hh];if(!Xl){lh=Yn(gf.text);var Lp=Ll.layout.get("text-rotate").evaluate(Vs,{},Il);Xl=new Hf(bl,js,Lu,ol,Cc,gf,Iu,ed,Wl,Lp)}var ph=1===gf.positionedLines.length;if(oh+=Gf(so,js,gf,hf,Ll,Wl,Vs,rh,Oc,Zl.vertical?rl.horizontal:rl.horizontalOnly,ph?Object.keys(Zl.horizontal):[hh],sl,id,pf,Il),ph)break}Zl.vertical&&(sh+=Gf(so,js,Zl.vertical,hf,Ll,Wl,Vs,rh,Oc,rl.vertical,["vertical"],sl,ad,pf,Il));var Ip=Xl?Xl.boxStartIndex:so.collisionBoxArray.length,k0=Xl?Xl.boxEndIndex:so.collisionBoxArray.length,A0=Ec?Ec.boxStartIndex:so.collisionBoxArray.length,mh=Ec?Ec.boxEndIndex:so.collisionBoxArray.length,gh=Sc?Sc.boxStartIndex:so.collisionBoxArray.length,Pp=Sc?Sc.boxEndIndex:so.collisionBoxArray.length,C0=Dc?Dc.boxStartIndex:so.collisionBoxArray.length,vf=Dc?Dc.boxEndIndex:so.collisionBoxArray.length,Pl=-1,yf=function(Nu,yh){return Nu&&Nu.circleDiameter?Math.max(Nu.circleDiameter,yh):yh};Pl=yf(Xl,Pl),Pl=yf(Ec,Pl),Pl=yf(Sc,Pl);var vh=(Pl=yf(Dc,Pl))>-1?1:0;vh&&(Pl*=Dp/24),so.glyphOffsetArray.length>=Oa.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Vs.sortKey&&so.addToSortKeyRanges(so.symbolInstances.length,Vs.sortKey),so.symbolInstances.emplaceBack(js.x,js.y,sl.right>=0?sl.right:-1,sl.center>=0?sl.center:-1,sl.left>=0?sl.left:-1,sl.vertical||-1,id,ad,lh,Ip,k0,A0,mh,gh,Pp,C0,vf,Lu,oh,sh,mf,ah,vh,0,Iu,Pu,od,Pl)}(Ji,kl,lc,ko,Ao,ho,rc,Ji.layers[0],Ji.collisionBoxArray,va.index,va.sourceLayerIndex,Ji.index,Cu,cf,il,ys,lf,uf,ac,Ml,va,to,Fs,_s,wa)};if("line"===kc)for(var Ss=0,eu=mp(va.geometry,0,0,8192,8192);Ss<eu.length;Ss+=1)for(var oc=eu[Ss],ql=0,ff=b0(oc,ic,Mc,ko.vertical||vl,Ao,24,Qc,Ji.overscaling,8192);ql<ff.length;ql+=1){var tu=ff[ql];vl&&_p(Ji,vl.text,zs,tu)||bs(oc,tu)}else if("line-center"===kc)for(var Su=0,Eu=va.geometry;Su<Eu.length;Su+=1){var Ac=Eu[Su];if(Ac.length>1){var nu=pp(Ac,Mc,ko.vertical||vl,Ao,24,Qc);nu&&bs(Ac,nu)}}else if("Polygon"===va.type)for(var ru=0,df=Ad(va.geometry,0);ru<df.length;ru+=1){var iu=df[ru],Du=w0(iu,16);bs(iu[0],new bc(Du.x,Du.y,0))}else if("LineString"===va.type)for(var au=0,th=va.geometry;au<th.length;au+=1){var Jf=th[au];bs(Jf,new bc(Jf[0].x,Jf[0].y,0))}else if("Point"===va.type)for(var Kf=0,nh=va.geometry;Kf<nh.length;Kf+=1)for(var Yl=0,al=nh[Kf];Yl<al.length;Yl+=1){var Ou=al[Yl];bs([Ou],new bc(Ou.x,Ou.y,0))}}(k,ti,Pi,Bo,ue,At,Mi,mi,Ai,ss,Re)},zr=0,ni=k.features;zr<ni.length;zr+=1)Er();Ae&&k.generateCollisionDebugBuffers()},e.perspective=function(k,R,$,ue,_e){var Ae,Re=1/Math.tan(R/2);return k[0]=Re/$,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=Re,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=-1,k[12]=0,k[13]=0,k[15]=0,null!=_e&&_e!==1/0?(k[10]=(_e+ue)*(Ae=1/(ue-_e)),k[14]=2*_e*ue*Ae):(k[10]=-1,k[14]=-2*ue),k},e.pick=function(k,R){for(var $={},ue=0;ue<R.length;ue++){var _e=R[ue];_e in k&&($[_e]=k[_e])}return $},e.plugin=Uo,e.polygonIntersectsPolygon=Ms,e.postMapLoadEvent=Be,e.postTurnstileEvent=Oe,e.potpack=up,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=fr,e.registerForPluginStateChange=function(k){return k({pluginStatus:Fi,pluginURL:Ja}),io.on("pluginStateChange",k),k},e.rotate=function(k,R,$){var ue=R[0],_e=R[1],Ae=R[2],Re=R[3],Ze=Math.sin($),lt=Math.cos($);return k[0]=ue*lt+Ae*Ze,k[1]=_e*lt+Re*Ze,k[2]=ue*-Ze+Ae*lt,k[3]=_e*-Ze+Re*lt,k},e.rotateX=function(k,R,$){var ue=Math.sin($),_e=Math.cos($),Ae=R[4],Re=R[5],Ze=R[6],lt=R[7],_t=R[8],At=R[9],Wt=R[10],on=R[11];return R!==k&&(k[0]=R[0],k[1]=R[1],k[2]=R[2],k[3]=R[3],k[12]=R[12],k[13]=R[13],k[14]=R[14],k[15]=R[15]),k[4]=Ae*_e+_t*ue,k[5]=Re*_e+At*ue,k[6]=Ze*_e+Wt*ue,k[7]=lt*_e+on*ue,k[8]=_t*_e-Ae*ue,k[9]=At*_e-Re*ue,k[10]=Wt*_e-Ze*ue,k[11]=on*_e-lt*ue,k},e.rotateZ=function(k,R,$){var ue=Math.sin($),_e=Math.cos($),Ae=R[0],Re=R[1],Ze=R[2],lt=R[3],_t=R[4],At=R[5],Wt=R[6],on=R[7];return R!==k&&(k[8]=R[8],k[9]=R[9],k[10]=R[10],k[11]=R[11],k[12]=R[12],k[13]=R[13],k[14]=R[14],k[15]=R[15]),k[0]=Ae*_e+_t*ue,k[1]=Re*_e+At*ue,k[2]=Ze*_e+Wt*ue,k[3]=lt*_e+on*ue,k[4]=_t*_e-Ae*ue,k[5]=At*_e-Re*ue,k[6]=Wt*_e-Ze*ue,k[7]=on*_e-lt*ue,k},e.scale=function(k,R,$){var ue=$[0],_e=$[1],Ae=$[2];return k[0]=R[0]*ue,k[1]=R[1]*ue,k[2]=R[2]*ue,k[3]=R[3]*ue,k[4]=R[4]*_e,k[5]=R[5]*_e,k[6]=R[6]*_e,k[7]=R[7]*_e,k[8]=R[8]*Ae,k[9]=R[9]*Ae,k[10]=R[10]*Ae,k[11]=R[11]*Ae,k[12]=R[12],k[13]=R[13],k[14]=R[14],k[15]=R[15],k},e.scale$1=function(k,R,$){return k[0]=R[0]*$,k[1]=R[1]*$,k[2]=R[2]*$,k[3]=R[3]*$,k},e.scale$2=function(k,R,$){return k[0]=R[0]*$,k[1]=R[1]*$,k[2]=R[2]*$,k},e.setCacheLimits=function(k,R){He=k,Ve=R},e.setRTLTextPlugin=function(k,R,$){if(void 0===$&&($=!1),Fi===_a||Fi===$a||Fi===Ps)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ja=j.resolveURL(k),Fi=_a,ca=R,ba(),$||Ca()},e.sphericalToCartesian=function(k){var R=k[0],$=k[1],ue=k[2];return $+=90,$*=Math.PI/180,ue*=Math.PI/180,{x:R*Math.cos($)*Math.sin(ue),y:R*Math.sin($)*Math.sin(ue),z:R*Math.cos(ue)}},e.sqrLen=function(k){var R=k[0],$=k[1];return R*R+$*$},e.styleSpec=Ce,e.sub=function(k,R,$){return k[0]=R[0]-$[0],k[1]=R[1]-$[1],k[2]=R[2]-$[2],k},e.symbolSize=zd,e.transformMat3=function(k,R,$){var ue=R[0],_e=R[1],Ae=R[2];return k[0]=ue*$[0]+_e*$[3]+Ae*$[6],k[1]=ue*$[1]+_e*$[4]+Ae*$[7],k[2]=ue*$[2]+_e*$[5]+Ae*$[8],k},e.transformMat4=gs,e.translate=function(k,R,$){var ue,_e,Ae,Re,Ze,lt,_t,At,Wt,on,en,_n,Rn=$[0],Zn=$[1],Wn=$[2];return R===k?(k[12]=R[0]*Rn+R[4]*Zn+R[8]*Wn+R[12],k[13]=R[1]*Rn+R[5]*Zn+R[9]*Wn+R[13],k[14]=R[2]*Rn+R[6]*Zn+R[10]*Wn+R[14],k[15]=R[3]*Rn+R[7]*Zn+R[11]*Wn+R[15]):(_e=R[1],Ae=R[2],Re=R[3],Ze=R[4],lt=R[5],_t=R[6],At=R[7],Wt=R[8],on=R[9],en=R[10],_n=R[11],k[0]=ue=R[0],k[1]=_e,k[2]=Ae,k[3]=Re,k[4]=Ze,k[5]=lt,k[6]=_t,k[7]=At,k[8]=Wt,k[9]=on,k[10]=en,k[11]=_n,k[12]=ue*Rn+Ze*Zn+Wt*Wn+R[12],k[13]=_e*Rn+lt*Zn+on*Wn+R[13],k[14]=Ae*Rn+_t*Zn+en*Wn+R[14],k[15]=Re*Rn+At*Zn+_n*Wn+R[15]),k},e.triggerPluginCompletionEvent=is,e.uniqueId=h,e.validateCustomStyleLayer=function(k){var R=[],$=k.id;return void 0===$&&R.push({message:"layers."+$+': missing required property "id"'}),void 0===k.render&&R.push({message:"layers."+$+': missing required method "render"'}),k.renderingMode&&"2d"!==k.renderingMode&&"3d"!==k.renderingMode&&R.push({message:"layers."+$+': property "renderingMode" must be either "2d" or "3d"'}),R},e.validateLight=Ar,e.validateStyle=pr,e.values=function(k){var R=[];for(var $ in k)R.push(k[$]);return R},e.vectorTile=mu,e.version="1.10.1",e.warnOnce=C,e.webpSupported=oe,e.window=self,e.wrap=u}),y(0,function(e){function r(Xe){var nt=typeof Xe;if("number"===nt||"boolean"===nt||"string"===nt||null==Xe)return JSON.stringify(Xe);if(Array.isArray(Xe)){for(var ye="[",Ce=0,Ue=Xe;Ce<Ue.length;Ce+=1)ye+=r(Ue[Ce])+",";return ye+"]"}for(var Qe=Object.keys(Xe).sort(),rt="{",Ke=0;Ke<Qe.length;Ke++)rt+=JSON.stringify(Qe[Ke])+":"+r(Xe[Qe[Ke]])+",";return rt+"}"}function t(Xe){for(var nt="",ye=0,Ce=e.refProperties;ye<Ce.length;ye+=1)nt+="/"+r(Xe[Ce[ye]]);return nt}var o=function(Xe){this.keyCache={},Xe&&this.replace(Xe)};o.prototype.replace=function(Xe){this._layerConfigs={},this._layers={},this.update(Xe,[])},o.prototype.update=function(Xe,nt){for(var ye=this,Ce=0,Ue=Xe;Ce<Ue.length;Ce+=1){var Qe=Ue[Ce];this._layerConfigs[Qe.id]=Qe;var rt=this._layers[Qe.id]=e.createStyleLayer(Qe);rt._featureFilter=e.featureFilter(rt.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(var Ke=0,gt=nt;Ke<gt.length;Ke+=1){var mt=gt[Ke];delete this.keyCache[mt],delete this._layerConfigs[mt],delete this._layers[mt]}this.familiesBySource={};for(var Lt=0,Vt=function(et,ht){for(var xt={},Rt=0;Rt<et.length;Rt++){var Xt=ht&&ht[et[Rt].id]||t(et[Rt]);ht&&(ht[et[Rt].id]=Xt);var tn=xt[Xt];tn||(tn=xt[Xt]=[]),tn.push(et[Rt])}var Kt=[];for(var kn in xt)Kt.push(xt[kn]);return Kt}(e.values(this._layerConfigs),this.keyCache);Lt<Vt.length;Lt+=1){var dt=Vt[Lt].map(function(et){return ye._layers[et.id]}),bt=dt[0];if("none"!==bt.visibility){var Yt=bt.source||"",It=this.familiesBySource[Yt];It||(It=this.familiesBySource[Yt]={});var jt=bt.sourceLayer||"_geojsonTileLayer",Ie=It[jt];Ie||(Ie=It[jt]=[]),Ie.push(dt)}}};var n=function(Xe){var nt={},ye=[];for(var Ce in Xe){var Ue=Xe[Ce],Qe=nt[Ce]={};for(var rt in Ue){var Ke=Ue[+rt];if(Ke&&0!==Ke.bitmap.width&&0!==Ke.bitmap.height){var gt={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};ye.push(gt),Qe[rt]={rect:gt,metrics:Ke.metrics}}}}var mt=e.potpack(ye),dt=new e.AlphaImage({width:mt.w||1,height:mt.h||1});for(var bt in Xe){var Yt=Xe[bt];for(var It in Yt){var jt=Yt[+It];if(jt&&0!==jt.bitmap.width&&0!==jt.bitmap.height){var Ie=nt[bt][It].rect;e.AlphaImage.copy(jt.bitmap,dt,{x:0,y:0},{x:Ie.x+1,y:Ie.y+1},jt.bitmap)}}}this.image=dt,this.positions=nt};e.register("GlyphAtlas",n);var m=function(Xe){this.tileID=new e.OverscaledTileID(Xe.tileID.overscaledZ,Xe.tileID.wrap,Xe.tileID.canonical.z,Xe.tileID.canonical.x,Xe.tileID.canonical.y),this.uid=Xe.uid,this.zoom=Xe.zoom,this.pixelRatio=Xe.pixelRatio,this.tileSize=Xe.tileSize,this.source=Xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Xe.showCollisionBoxes,this.collectResourceTiming=!!Xe.collectResourceTiming,this.returnDependencies=!!Xe.returnDependencies,this.promoteId=Xe.promoteId};function l(Xe,nt,ye){for(var Ce=new e.EvaluationParameters(nt),Ue=0,Qe=Xe;Ue<Qe.length;Ue+=1)Qe[Ue].recalculate(Ce,ye)}function i(Xe,nt){var ye=e.getArrayBuffer(Xe.request,function(Ce,Ue,Qe,rt){Ce?nt(Ce):Ue&&nt(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ue)),rawData:Ue,cacheControl:Qe,expires:rt})});return function(){ye.cancel(),nt()}}m.prototype.parse=function(Xe,nt,ye,Ce,Ue){var Qe=this;this.status="parsing",this.data=Xe,this.collisionBoxArray=new e.CollisionBoxArray;var rt=new e.DictionaryCoder(Object.keys(Xe.layers).sort()),Ke=new e.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var gt,mt,Lt,Vt,dt={},bt={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},Yt=nt.familiesBySource[this.source];for(var It in Yt){var jt=Xe.layers[It];if(jt){1===jt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+It+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ie=rt.encode(It),et=[],ht=0;ht<jt.length;ht++){var xt=jt.feature(ht),Rt=Ke.getId(xt,It);et.push({feature:xt,id:Rt,index:ht,sourceLayerIndex:Ie})}for(var Xt=0,tn=Yt[It];Xt<tn.length;Xt+=1){var Kt=tn[Xt],kn=Kt[0];kn.minzoom&&this.zoom<Math.floor(kn.minzoom)||kn.maxzoom&&this.zoom>=kn.maxzoom||"none"!==kn.visibility&&(l(Kt,this.zoom,ye),(dt[kn.id]=kn.createBucket({index:Ke.bucketLayerIDs.length,layers:Kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ie,sourceID:this.source})).populate(et,bt,this.tileID.canonical),Ke.bucketLayerIDs.push(Kt.map(function(dn){return dn.id})))}}}var Vn=e.mapObject(bt.glyphDependencies,function(dn){return Object.keys(dn).map(Number)});Object.keys(Vn).length?Ce.send("getGlyphs",{uid:this.uid,stacks:Vn},function(dn,Mn){gt||(gt=dn,mt=Mn,fn.call(Qe))}):mt={};var Tn=Object.keys(bt.iconDependencies);Tn.length?Ce.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"},function(dn,Mn){gt||(gt=dn,Lt=Mn,fn.call(Qe))}):Lt={};var sn=Object.keys(bt.patternDependencies);function fn(){if(gt)return Ue(gt);if(mt&&Lt&&Vt){var dn=new n(mt),Mn=new e.ImageAtlas(Lt,Vt);for(var En in dt){var jn=dt[En];jn instanceof e.SymbolBucket?(l(jn.layers,this.zoom,ye),e.performSymbolLayout(jn,mt,dn.positions,Lt,Mn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):jn.hasPattern&&(jn instanceof e.LineBucket||jn instanceof e.FillBucket||jn instanceof e.FillExtrusionBucket)&&(l(jn.layers,this.zoom,ye),jn.addFeatures(bt,this.tileID.canonical,Mn.patternPositions))}this.status="done",Ue(null,{buckets:e.values(dt).filter(function(er){return!er.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dn.image,imageAtlas:Mn,glyphMap:this.returnDependencies?mt:null,iconMap:this.returnDependencies?Lt:null,glyphPositions:this.returnDependencies?dn.positions:null})}}sn.length?Ce.send("getImages",{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"},function(dn,Mn){gt||(gt=dn,Vt=Mn,fn.call(Qe))}):Vt={},fn.call(this)};var f=function(Xe,nt,ye,Ce){this.actor=Xe,this.layerIndex=nt,this.availableImages=ye,this.loadVectorData=Ce||i,this.loading={},this.loaded={}};f.prototype.loadTile=function(Xe,nt){var ye=this,Ce=Xe.uid;this.loading||(this.loading={});var Ue=!!(Xe&&Xe.request&&Xe.request.collectResourceTiming)&&new e.RequestPerformance(Xe.request),Qe=this.loading[Ce]=new m(Xe);Qe.abort=this.loadVectorData(Xe,function(rt,Ke){if(delete ye.loading[Ce],rt||!Ke)return Qe.status="done",ye.loaded[Ce]=Qe,nt(rt);var gt=Ke.rawData,mt={};Ke.expires&&(mt.expires=Ke.expires),Ke.cacheControl&&(mt.cacheControl=Ke.cacheControl);var Lt={};if(Ue){var Vt=Ue.finish();Vt&&(Lt.resourceTiming=JSON.parse(JSON.stringify(Vt)))}Qe.vectorTile=Ke.vectorTile,Qe.parse(Ke.vectorTile,ye.layerIndex,ye.availableImages,ye.actor,function(dt,bt){if(dt||!bt)return nt(dt);nt(null,e.extend({rawTileData:gt.slice(0)},bt,mt,Lt))}),ye.loaded=ye.loaded||{},ye.loaded[Ce]=Qe})},f.prototype.reloadTile=function(Xe,nt){var ye=this,Ce=this.loaded,Ue=Xe.uid,Qe=this;if(Ce&&Ce[Ue]){var rt=Ce[Ue];rt.showCollisionBoxes=Xe.showCollisionBoxes;var Ke=function(gt,mt){var Lt=rt.reloadCallback;Lt&&(delete rt.reloadCallback,rt.parse(rt.vectorTile,Qe.layerIndex,ye.availableImages,Qe.actor,Lt)),nt(gt,mt)};"parsing"===rt.status?rt.reloadCallback=Ke:"done"===rt.status&&(rt.vectorTile?rt.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},f.prototype.abortTile=function(Xe,nt){var ye=this.loading,Ce=Xe.uid;ye&&ye[Ce]&&ye[Ce].abort&&(ye[Ce].abort(),delete ye[Ce]),nt()},f.prototype.removeTile=function(Xe,nt){var ye=this.loaded,Ce=Xe.uid;ye&&ye[Ce]&&delete ye[Ce],nt()};var u=e.window.ImageBitmap,s=function(){this.loaded={}};s.prototype.loadTile=function(Xe,nt){var ye=Xe.uid,Ce=Xe.encoding,Ue=Xe.rawImageData,Qe=u&&Ue instanceof u?this.getImageData(Ue):Ue,rt=new e.DEMData(ye,Qe,Ce);this.loaded=this.loaded||{},this.loaded[ye]=rt,nt(null,rt)},s.prototype.getImageData=function(Xe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Xe.width,Xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Xe.width,this.offscreenCanvas.height=Xe.height,this.offscreenCanvasContext.drawImage(Xe,0,0,Xe.width,Xe.height);var nt=this.offscreenCanvasContext.getImageData(-1,-1,Xe.width+2,Xe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:nt.width,height:nt.height},nt.data)},s.prototype.removeTile=function(Xe){var nt=this.loaded,ye=Xe.uid;nt&&nt[ye]&&delete nt[ye]};var d=function Xe(nt,ye){var Ce,Ue=nt&&nt.type;if("FeatureCollection"===Ue)for(Ce=0;Ce<nt.features.length;Ce++)Xe(nt.features[Ce],ye);else if("GeometryCollection"===Ue)for(Ce=0;Ce<nt.geometries.length;Ce++)Xe(nt.geometries[Ce],ye);else if("Feature"===Ue)Xe(nt.geometry,ye);else if("Polygon"===Ue)h(nt.coordinates,ye);else if("MultiPolygon"===Ue)for(Ce=0;Ce<nt.coordinates.length;Ce++)h(nt.coordinates[Ce],ye);return nt};function h(Xe,nt){if(0!==Xe.length){a(Xe[0],nt);for(var ye=1;ye<Xe.length;ye++)a(Xe[ye],!nt)}}function a(Xe,nt){for(var ye=0,Ce=0,Ue=Xe.length,Qe=Ue-1;Ce<Ue;Qe=Ce++)ye+=(Xe[Ce][0]-Xe[Qe][0])*(Xe[Qe][1]+Xe[Ce][1]);ye>=0!=!!nt&&Xe.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,c=function(Xe){this._feature=Xe,this.extent=e.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))};c.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Xe=[],nt=0,ye=this._feature.geometry;nt<ye.length;nt+=1){var Ce=ye[nt];Xe.push([new e.Point$1(Ce[0],Ce[1])])}return Xe}for(var Ue=[],Qe=0,rt=this._feature.geometry;Qe<rt.length;Qe+=1){for(var Ke=[],gt=0,mt=rt[Qe];gt<mt.length;gt+=1){var Lt=mt[gt];Ke.push(new e.Point$1(Lt[0],Lt[1]))}Ue.push(Ke)}return Ue},c.prototype.toGeoJSON=function(Xe,nt,ye){return _.call(this,Xe,nt,ye)};var T=function(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Xe.length,this._features=Xe};T.prototype.feature=function(Xe){return new c(this._features[Xe])};var x=e.vectorTile.VectorTileFeature,w=M;function M(Xe,nt){this.options=nt||{},this.features=Xe,this.length=Xe.length}function D(Xe,nt){this.id="number"==typeof Xe.id?Xe.id:void 0,this.type=Xe.type,this.rawGeometry=1===Xe.type?[Xe.geometry]:Xe.geometry,this.properties=Xe.tags,this.extent=nt||4096}M.prototype.feature=function(Xe){return new D(this.features[Xe],this.options.extent)},D.prototype.loadGeometry=function(){var Xe=this.rawGeometry;this.geometry=[];for(var nt=0;nt<Xe.length;nt++){for(var ye=Xe[nt],Ce=[],Ue=0;Ue<ye.length;Ue++)Ce.push(new e.Point$1(ye[Ue][0],ye[Ue][1]));this.geometry.push(Ce)}return this.geometry},D.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Xe=this.geometry,nt=1/0,ye=-1/0,Ce=1/0,Ue=-1/0,Qe=0;Qe<Xe.length;Qe++)for(var rt=Xe[Qe],Ke=0;Ke<rt.length;Ke++){var gt=rt[Ke];nt=Math.min(nt,gt.x),ye=Math.max(ye,gt.x),Ce=Math.min(Ce,gt.y),Ue=Math.max(Ue,gt.y)}return[nt,Ce,ye,Ue]},D.prototype.toGeoJSON=x.prototype.toGeoJSON;var C=E,S=w;function E(Xe){var nt=new e.pbf;return function(ye,Ce){for(var Ue in ye.layers)Ce.writeMessage(3,N,ye.layers[Ue])}(Xe,nt),nt.finish()}function N(Xe,nt){var ye;nt.writeVarintField(15,Xe.version||1),nt.writeStringField(1,Xe.name||""),nt.writeVarintField(5,Xe.extent||4096);var Ce={keys:[],values:[],keycache:{},valuecache:{}};for(ye=0;ye<Xe.length;ye++)Ce.feature=Xe.feature(ye),nt.writeMessage(2,z,Ce);var Ue=Ce.keys;for(ye=0;ye<Ue.length;ye++)nt.writeStringField(3,Ue[ye]);var Qe=Ce.values;for(ye=0;ye<Qe.length;ye++)nt.writeMessage(4,X,Qe[ye])}function z(Xe,nt){var ye=Xe.feature;void 0!==ye.id&&nt.writeVarintField(1,ye.id),nt.writeMessage(2,q,Xe),nt.writeVarintField(3,ye.type),nt.writeMessage(4,ne,ye)}function q(Xe,nt){var ye=Xe.feature,Ce=Xe.keys,Ue=Xe.values,Qe=Xe.keycache,rt=Xe.valuecache;for(var Ke in ye.properties){var gt=Qe[Ke];void 0===gt&&(Ce.push(Ke),Qe[Ke]=gt=Ce.length-1),nt.writeVarint(gt);var mt=ye.properties[Ke],Lt=typeof mt;"string"!==Lt&&"boolean"!==Lt&&"number"!==Lt&&(mt=JSON.stringify(mt));var Vt=Lt+":"+mt,dt=rt[Vt];void 0===dt&&(Ue.push(mt),rt[Vt]=dt=Ue.length-1),nt.writeVarint(dt)}}function G(Xe,nt){return(nt<<3)+(7&Xe)}function K(Xe){return Xe<<1^Xe>>31}function ne(Xe,nt){for(var ye=Xe.loadGeometry(),Ce=Xe.type,Ue=0,Qe=0,rt=ye.length,Ke=0;Ke<rt;Ke++){var gt=ye[Ke],mt=1;1===Ce&&(mt=gt.length),nt.writeVarint(G(1,mt));for(var Lt=3===Ce?gt.length-1:gt.length,Vt=0;Vt<Lt;Vt++){1===Vt&&1!==Ce&&nt.writeVarint(G(2,Lt-1));var dt=gt[Vt].x-Ue,bt=gt[Vt].y-Qe;nt.writeVarint(K(dt)),nt.writeVarint(K(bt)),Ue+=dt,Qe+=bt}3===Ce&&nt.writeVarint(G(7,1))}}function X(Xe,nt){var ye=typeof Xe;"string"===ye?nt.writeStringField(1,Xe):"boolean"===ye?nt.writeBooleanField(7,Xe):"number"===ye&&(Xe%1!=0?nt.writeDoubleField(3,Xe):Xe<0?nt.writeSVarintField(6,Xe):nt.writeVarintField(5,Xe))}function J(Xe,nt,ye,Ce,Ue,Qe){if(!(Ue-Ce<=ye)){var rt=Ce+Ue>>1;(function Ke(gt,mt,Lt,Vt,dt,bt){for(;dt>Vt;){if(dt-Vt>600){var Yt=dt-Vt+1,It=Lt-Vt+1,jt=Math.log(Yt),Ie=.5*Math.exp(2*jt/3),et=.5*Math.sqrt(jt*Ie*(Yt-Ie)/Yt)*(It-Yt/2<0?-1:1);Ke(gt,mt,Lt,Math.max(Vt,Math.floor(Lt-It*Ie/Yt+et)),Math.min(dt,Math.floor(Lt+(Yt-It)*Ie/Yt+et)),bt)}var Rt=mt[2*Lt+bt],Xt=Vt,tn=dt;for(se(gt,mt,Vt,Lt),mt[2*dt+bt]>Rt&&se(gt,mt,Vt,dt);Xt<tn;){for(se(gt,mt,Xt,tn),Xt++,tn--;mt[2*Xt+bt]<Rt;)Xt++;for(;mt[2*tn+bt]>Rt;)tn--}mt[2*Vt+bt]===Rt?se(gt,mt,Vt,tn):se(gt,mt,++tn,dt),tn<=Lt&&(Vt=tn+1),Lt<=tn&&(dt=tn-1)}})(Xe,nt,rt,Ce,Ue,Qe%2),J(Xe,nt,ye,Ce,rt-1,Qe+1),J(Xe,nt,ye,rt+1,Ue,Qe+1)}}function se(Xe,nt,ye,Ce){V(Xe,ye,Ce),V(nt,2*ye,2*Ce),V(nt,2*ye+1,2*Ce+1)}function V(Xe,nt,ye){var Ce=Xe[nt];Xe[nt]=Xe[ye],Xe[ye]=Ce}function j(Xe,nt,ye,Ce){var Ue=Xe-ye,Qe=nt-Ce;return Ue*Ue+Qe*Qe}C.fromVectorTileJs=E,C.fromGeojsonVt=function(Xe,nt){nt=nt||{};var ye={};for(var Ce in Xe)ye[Ce]=new w(Xe[Ce].features,nt),ye[Ce].name=Ce,ye[Ce].version=nt.version,ye[Ce].extent=nt.extent;return E({layers:ye})},C.GeoJSONWrapper=S;var H=function(Xe){return Xe[0]},oe=function(Xe){return Xe[1]},U=function(Xe,nt,ye,Ce,Ue){void 0===nt&&(nt=H),void 0===ye&&(ye=oe),void 0===Ce&&(Ce=64),void 0===Ue&&(Ue=Float64Array),this.nodeSize=Ce,this.points=Xe;for(var Qe=Xe.length<65536?Uint16Array:Uint32Array,rt=this.ids=new Qe(Xe.length),Ke=this.coords=new Ue(2*Xe.length),gt=0;gt<Xe.length;gt++)rt[gt]=gt,Ke[2*gt]=nt(Xe[gt]),Ke[2*gt+1]=ye(Xe[gt]);J(rt,Ke,Ce,0,rt.length-1,0)};U.prototype.range=function(Xe,nt,ye,Ce){return function(Ue,Qe,rt,Ke,gt,mt,Lt){for(var Vt,dt,bt=[0,Ue.length-1,0],Yt=[];bt.length;){var It=bt.pop(),jt=bt.pop(),Ie=bt.pop();if(jt-Ie<=Lt)for(var et=Ie;et<=jt;et++)dt=Qe[2*et+1],(Vt=Qe[2*et])>=rt&&Vt<=gt&&dt>=Ke&&dt<=mt&&Yt.push(Ue[et]);else{var ht=Math.floor((Ie+jt)/2);dt=Qe[2*ht+1],(Vt=Qe[2*ht])>=rt&&Vt<=gt&&dt>=Ke&&dt<=mt&&Yt.push(Ue[ht]);var xt=(It+1)%2;(0===It?rt<=Vt:Ke<=dt)&&(bt.push(Ie),bt.push(ht-1),bt.push(xt)),(0===It?gt>=Vt:mt>=dt)&&(bt.push(ht+1),bt.push(jt),bt.push(xt))}}return Yt}(this.ids,this.coords,Xe,nt,ye,Ce,this.nodeSize)},U.prototype.within=function(Xe,nt,ye){return function(Ce,Ue,Qe,rt,Ke,gt){for(var mt=[0,Ce.length-1,0],Lt=[],Vt=Ke*Ke;mt.length;){var dt=mt.pop(),bt=mt.pop(),Yt=mt.pop();if(bt-Yt<=gt)for(var It=Yt;It<=bt;It++)j(Ue[2*It],Ue[2*It+1],Qe,rt)<=Vt&&Lt.push(Ce[It]);else{var jt=Math.floor((Yt+bt)/2),Ie=Ue[2*jt],et=Ue[2*jt+1];j(Ie,et,Qe,rt)<=Vt&&Lt.push(Ce[jt]);var ht=(dt+1)%2;(0===dt?Qe-Ke<=Ie:rt-Ke<=et)&&(mt.push(Yt),mt.push(jt-1),mt.push(ht)),(0===dt?Qe+Ke>=Ie:rt+Ke>=et)&&(mt.push(jt+1),mt.push(bt),mt.push(ht))}}return Lt}(this.ids,this.coords,Xe,nt,ye,this.nodeSize)};var te={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Xe){return Xe}},ee=function(Xe){this.options=xe(Object.create(te),Xe),this.trees=new Array(this.options.maxZoom+1)};function le(Xe,nt,ye,Ce,Ue){return{x:Xe,y:nt,zoom:1/0,id:ye,parentId:-1,numPoints:Ce,properties:Ue}}function ce(Xe,nt){var ye=Xe.geometry.coordinates,Ue=ye[1];return{x:be(ye[0]),y:he(Ue),zoom:1/0,index:nt,parentId:-1}}function pe(Xe){return{type:"Feature",id:Xe.id,properties:de(Xe),geometry:{type:"Point",coordinates:[(Ce=Xe.x,360*(Ce-.5)),(nt=Xe.y,ye=(180-360*nt)*Math.PI/180,360*Math.atan(Math.exp(ye))/Math.PI-90)]}};var nt,ye,Ce}function de(Xe){var nt=Xe.numPoints,ye=nt>=1e4?Math.round(nt/1e3)+"k":nt>=1e3?Math.round(nt/100)/10+"k":nt;return xe(xe({},Xe.properties),{cluster:!0,cluster_id:Xe.id,point_count:nt,point_count_abbreviated:ye})}function be(Xe){return Xe/360+.5}function he(Xe){var nt=Math.sin(Xe*Math.PI/180),ye=.5-.25*Math.log((1+nt)/(1-nt))/Math.PI;return ye<0?0:ye>1?1:ye}function xe(Xe,nt){for(var ye in nt)Xe[ye]=nt[ye];return Xe}function De(Xe){return Xe.x}function Se(Xe){return Xe.y}function ke(Xe,nt,ye,Ce,Ue,Qe){var rt=Ue-ye,Ke=Qe-Ce;if(0!==rt||0!==Ke){var gt=((Xe-ye)*rt+(nt-Ce)*Ke)/(rt*rt+Ke*Ke);gt>1?(ye=Ue,Ce=Qe):gt>0&&(ye+=rt*gt,Ce+=Ke*gt)}return(rt=Xe-ye)*rt+(Ke=nt-Ce)*Ke}function Fe(Xe,nt,ye,Ce){var Ue={id:void 0===Xe?null:Xe,type:nt,geometry:ye,tags:Ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Qe){var rt=Qe.geometry,Ke=Qe.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)ve(Qe,rt);else if("Polygon"===Ke||"MultiLineString"===Ke)for(var gt=0;gt<rt.length;gt++)ve(Qe,rt[gt]);else if("MultiPolygon"===Ke)for(gt=0;gt<rt.length;gt++)for(var mt=0;mt<rt[gt].length;mt++)ve(Qe,rt[gt][mt])}(Ue),Ue}function ve(Xe,nt){for(var ye=0;ye<nt.length;ye+=3)Xe.minX=Math.min(Xe.minX,nt[ye]),Xe.minY=Math.min(Xe.minY,nt[ye+1]),Xe.maxX=Math.max(Xe.maxX,nt[ye]),Xe.maxY=Math.max(Xe.maxY,nt[ye+1])}function Te(Xe,nt,ye,Ce){if(nt.geometry){var Ue=nt.geometry.coordinates,Qe=nt.geometry.type,rt=Math.pow(ye.tolerance/((1<<ye.maxZoom)*ye.extent),2),Ke=[],gt=nt.id;if(ye.promoteId?gt=nt.properties[ye.promoteId]:ye.generateId&&(gt=Ce||0),"Point"===Qe)Le(Ue,Ke);else if("MultiPoint"===Qe)for(var mt=0;mt<Ue.length;mt++)Le(Ue[mt],Ke);else if("LineString"===Qe)Oe(Ue,Ke,rt,!1);else if("MultiLineString"===Qe){if(ye.lineMetrics){for(mt=0;mt<Ue.length;mt++)Oe(Ue[mt],Ke=[],rt,!1),Xe.push(Fe(gt,"LineString",Ke,nt.properties));return}Ne(Ue,Ke,rt,!1)}else if("Polygon"===Qe)Ne(Ue,Ke,rt,!0);else{if("MultiPolygon"!==Qe){if("GeometryCollection"===Qe){for(mt=0;mt<nt.geometry.geometries.length;mt++)Te(Xe,{id:gt,geometry:nt.geometry.geometries[mt],properties:nt.properties},ye,Ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(mt=0;mt<Ue.length;mt++){var Lt=[];Ne(Ue[mt],Lt,rt,!0),Ke.push(Lt)}}Xe.push(Fe(gt,Qe,Ke,nt.properties))}}function Le(Xe,nt){nt.push(Be(Xe[0])),nt.push(He(Xe[1])),nt.push(0)}function Oe(Xe,nt,ye,Ce){for(var Ue,Qe,rt=0,Ke=0;Ke<Xe.length;Ke++){var gt=Be(Xe[Ke][0]),mt=He(Xe[Ke][1]);nt.push(gt),nt.push(mt),nt.push(0),Ke>0&&(rt+=Ce?(Ue*mt-gt*Qe)/2:Math.sqrt(Math.pow(gt-Ue,2)+Math.pow(mt-Qe,2))),Ue=gt,Qe=mt}var Lt=nt.length-3;nt[2]=1,function Vt(dt,bt,Yt,It){for(var jt,Ie=It,et=Yt-bt>>1,ht=Yt-bt,xt=dt[bt],Rt=dt[bt+1],Xt=dt[Yt],tn=dt[Yt+1],Kt=bt+3;Kt<Yt;Kt+=3){var kn=ke(dt[Kt],dt[Kt+1],xt,Rt,Xt,tn);if(kn>Ie)jt=Kt,Ie=kn;else if(kn===Ie){var Vn=Math.abs(Kt-et);Vn<ht&&(jt=Kt,ht=Vn)}}Ie>It&&(jt-bt>3&&Vt(dt,bt,jt,It),dt[jt+2]=Ie,Yt-jt>3&&Vt(dt,jt,Yt,It))}(nt,0,Lt,ye),nt[Lt+2]=1,nt.size=Math.abs(rt),nt.start=0,nt.end=nt.size}function Ne(Xe,nt,ye,Ce){for(var Ue=0;Ue<Xe.length;Ue++){var Qe=[];Oe(Xe[Ue],Qe,ye,Ce),nt.push(Qe)}}function Be(Xe){return Xe/360+.5}function He(Xe){var nt=Math.sin(Xe*Math.PI/180),ye=.5-.25*Math.log((1+nt)/(1-nt))/Math.PI;return ye<0?0:ye>1?1:ye}function Ve(Xe,nt,ye,Ce,Ue,Qe,rt,Ke){if(Ce/=nt,Qe>=(ye/=nt)&&rt<Ce)return Xe;if(rt<ye||Qe>=Ce)return null;for(var gt=[],mt=0;mt<Xe.length;mt++){var Lt=Xe[mt],Vt=Lt.geometry,dt=Lt.type,bt=0===Ue?Lt.minX:Lt.minY,Yt=0===Ue?Lt.maxX:Lt.maxY;if(bt>=ye&&Yt<Ce)gt.push(Lt);else if(!(Yt<ye||bt>=Ce)){var It=[];if("Point"===dt||"MultiPoint"===dt)it(Vt,It,ye,Ce,Ue);else if("LineString"===dt)ze(Vt,It,ye,Ce,Ue,!1,Ke.lineMetrics);else if("MultiLineString"===dt)qe(Vt,It,ye,Ce,Ue,!1);else if("Polygon"===dt)qe(Vt,It,ye,Ce,Ue,!0);else if("MultiPolygon"===dt)for(var jt=0;jt<Vt.length;jt++){var Ie=[];qe(Vt[jt],Ie,ye,Ce,Ue,!0),Ie.length&&It.push(Ie)}if(It.length){if(Ke.lineMetrics&&"LineString"===dt){for(jt=0;jt<It.length;jt++)gt.push(Fe(Lt.id,dt,It[jt],Lt.tags));continue}"LineString"!==dt&&"MultiLineString"!==dt||(1===It.length?(dt="LineString",It=It[0]):dt="MultiLineString"),"Point"!==dt&&"MultiPoint"!==dt||(dt=3===It.length?"Point":"MultiPoint"),gt.push(Fe(Lt.id,dt,It,Lt.tags))}}}return gt.length?gt:null}function it(Xe,nt,ye,Ce,Ue){for(var Qe=0;Qe<Xe.length;Qe+=3){var rt=Xe[Qe+Ue];rt>=ye&&rt<=Ce&&(nt.push(Xe[Qe]),nt.push(Xe[Qe+1]),nt.push(Xe[Qe+2]))}}function ze(Xe,nt,ye,Ce,Ue,Qe,rt){for(var Ke,gt,mt=je(Xe),Lt=0===Ue?ct:vt,Vt=Xe.start,dt=0;dt<Xe.length-3;dt+=3){var bt=Xe[dt],Yt=Xe[dt+1],It=Xe[dt+2],jt=Xe[dt+3],Ie=Xe[dt+4],et=0===Ue?bt:Yt,ht=0===Ue?jt:Ie,xt=!1;rt&&(Ke=Math.sqrt(Math.pow(bt-jt,2)+Math.pow(Yt-Ie,2))),et<ye?ht>ye&&(gt=Lt(mt,bt,Yt,jt,Ie,ye),rt&&(mt.start=Vt+Ke*gt)):et>Ce?ht<Ce&&(gt=Lt(mt,bt,Yt,jt,Ie,Ce),rt&&(mt.start=Vt+Ke*gt)):Ye(mt,bt,Yt,It),ht<ye&&et>=ye&&(gt=Lt(mt,bt,Yt,jt,Ie,ye),xt=!0),ht>Ce&&et<=Ce&&(gt=Lt(mt,bt,Yt,jt,Ie,Ce),xt=!0),!Qe&&xt&&(rt&&(mt.end=Vt+Ke*gt),nt.push(mt),mt=je(Xe)),rt&&(Vt+=Ke)}var Rt=Xe.length-3;bt=Xe[Rt],Yt=Xe[Rt+1],It=Xe[Rt+2],(et=0===Ue?bt:Yt)>=ye&&et<=Ce&&Ye(mt,bt,Yt,It),Rt=mt.length-3,Qe&&Rt>=3&&(mt[Rt]!==mt[0]||mt[Rt+1]!==mt[1])&&Ye(mt,mt[0],mt[1],mt[2]),mt.length&&nt.push(mt)}function je(Xe){var nt=[];return nt.size=Xe.size,nt.start=Xe.start,nt.end=Xe.end,nt}function qe(Xe,nt,ye,Ce,Ue,Qe){for(var rt=0;rt<Xe.length;rt++)ze(Xe[rt],nt,ye,Ce,Ue,Qe,!1)}function Ye(Xe,nt,ye,Ce){Xe.push(nt),Xe.push(ye),Xe.push(Ce)}function ct(Xe,nt,ye,Ce,Ue,Qe){var rt=(Qe-nt)/(Ce-nt);return Xe.push(Qe),Xe.push(ye+(Ue-ye)*rt),Xe.push(1),rt}function vt(Xe,nt,ye,Ce,Ue,Qe){var rt=(Qe-ye)/(Ue-ye);return Xe.push(nt+(Ce-nt)*rt),Xe.push(Qe),Xe.push(1),rt}function wt(Xe,nt){for(var ye=[],Ce=0;Ce<Xe.length;Ce++){var Ue,Qe=Xe[Ce],rt=Qe.type;if("Point"===rt||"MultiPoint"===rt||"LineString"===rt)Ue=Ot(Qe.geometry,nt);else if("MultiLineString"===rt||"Polygon"===rt){Ue=[];for(var Ke=0;Ke<Qe.geometry.length;Ke++)Ue.push(Ot(Qe.geometry[Ke],nt))}else if("MultiPolygon"===rt)for(Ue=[],Ke=0;Ke<Qe.geometry.length;Ke++){for(var gt=[],mt=0;mt<Qe.geometry[Ke].length;mt++)gt.push(Ot(Qe.geometry[Ke][mt],nt));Ue.push(gt)}ye.push(Fe(Qe.id,rt,Ue,Qe.tags))}return ye}function Ot(Xe,nt){var ye=[];ye.size=Xe.size,void 0!==Xe.start&&(ye.start=Xe.start,ye.end=Xe.end);for(var Ce=0;Ce<Xe.length;Ce+=3)ye.push(Xe[Ce]+nt,Xe[Ce+1],Xe[Ce+2]);return ye}function St(Xe,nt){if(Xe.transformed)return Xe;var ye,Ce,Ue,Qe=1<<Xe.z,rt=Xe.x,Ke=Xe.y;for(ye=0;ye<Xe.features.length;ye++){var gt=Xe.features[ye],mt=gt.geometry,Lt=gt.type;if(gt.geometry=[],1===Lt)for(Ce=0;Ce<mt.length;Ce+=2)gt.geometry.push(ft(mt[Ce],mt[Ce+1],nt,Qe,rt,Ke));else for(Ce=0;Ce<mt.length;Ce++){var Vt=[];for(Ue=0;Ue<mt[Ce].length;Ue+=2)Vt.push(ft(mt[Ce][Ue],mt[Ce][Ue+1],nt,Qe,rt,Ke));gt.geometry.push(Vt)}}return Xe.transformed=!0,Xe}function ft(Xe,nt,ye,Ce,Ue,Qe){return[Math.round(ye*(Xe*Ce-Ue)),Math.round(ye*(nt*Ce-Qe))]}function st(Xe,nt,ye,Ce,Ue){for(var Qe=nt===Ue.maxZoom?0:Ue.tolerance/((1<<nt)*Ue.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ye,y:Ce,z:nt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<Xe.length;Ke++){rt.numFeatures++,Ct(rt,Xe[Ke],Qe,Ue);var gt=Xe[Ke].minX,mt=Xe[Ke].minY,Lt=Xe[Ke].maxX,Vt=Xe[Ke].maxY;gt<rt.minX&&(rt.minX=gt),mt<rt.minY&&(rt.minY=mt),Lt>rt.maxX&&(rt.maxX=Lt),Vt>rt.maxY&&(rt.maxY=Vt)}return rt}function Ct(Xe,nt,ye,Ce){var Ue=nt.geometry,Qe=nt.type,rt=[];if("Point"===Qe||"MultiPoint"===Qe)for(var Ke=0;Ke<Ue.length;Ke+=3)rt.push(Ue[Ke]),rt.push(Ue[Ke+1]),Xe.numPoints++,Xe.numSimplified++;else if("LineString"===Qe)$t(rt,Ue,Xe,ye,!1,!1);else if("MultiLineString"===Qe||"Polygon"===Qe)for(Ke=0;Ke<Ue.length;Ke++)$t(rt,Ue[Ke],Xe,ye,"Polygon"===Qe,0===Ke);else if("MultiPolygon"===Qe)for(var gt=0;gt<Ue.length;gt++){var mt=Ue[gt];for(Ke=0;Ke<mt.length;Ke++)$t(rt,mt[Ke],Xe,ye,!0,0===Ke)}if(rt.length){var Lt=nt.tags||null;if("LineString"===Qe&&Ce.lineMetrics){for(var Vt in Lt={},nt.tags)Lt[Vt]=nt.tags[Vt];Lt.mapbox_clip_start=Ue.start/Ue.size,Lt.mapbox_clip_end=Ue.end/Ue.size}var dt={geometry:rt,type:"Polygon"===Qe||"MultiPolygon"===Qe?3:"LineString"===Qe||"MultiLineString"===Qe?2:1,tags:Lt};null!==nt.id&&(dt.id=nt.id),Xe.features.push(dt)}}function $t(Xe,nt,ye,Ce,Ue,Qe){var rt=Ce*Ce;if(Ce>0&&nt.size<(Ue?rt:Ce))ye.numPoints+=nt.length/3;else{for(var Ke=[],gt=0;gt<nt.length;gt+=3)(0===Ce||nt[gt+2]>rt)&&(ye.numSimplified++,Ke.push(nt[gt]),Ke.push(nt[gt+1])),ye.numPoints++;Ue&&function(mt,Lt){for(var Vt=0,dt=0,bt=mt.length,Yt=bt-2;dt<bt;Yt=dt,dt+=2)Vt+=(mt[dt]-mt[Yt])*(mt[dt+1]+mt[Yt+1]);if(Vt>0===Lt)for(dt=0,bt=mt.length;dt<bt/2;dt+=2){var It=mt[dt],jt=mt[dt+1];mt[dt]=mt[bt-2-dt],mt[dt+1]=mt[bt-1-dt],mt[bt-2-dt]=It,mt[bt-1-dt]=jt}}(Ke,Qe),Xe.push(Ke)}}function rn(Xe,nt){var ye=(nt=this.options=function(Ue,Qe){for(var rt in Qe)Ue[rt]=Qe[rt];return Ue}(Object.create(this.options),nt)).debug;if(ye&&console.time("preprocess data"),nt.maxZoom<0||nt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(nt.promoteId&&nt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ue,Qe,rt,Ke,gt,mt,Ce=function(Ue,Qe){var rt=[];if("FeatureCollection"===Ue.type)for(var Ke=0;Ke<Ue.features.length;Ke++)Te(rt,Ue.features[Ke],Qe,Ke);else Te(rt,"Feature"===Ue.type?Ue:{geometry:Ue},Qe);return rt}(Xe,nt);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",nt.indexMaxZoom,nt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ue=Ce,Qe=nt,rt=Qe.buffer/Qe.extent,Ke=Ue,gt=Ve(Ue,1,-1-rt,rt,0,-1,2,Qe),mt=Ve(Ue,1,1-rt,2+rt,0,-1,2,Qe),(gt||mt)&&(Ke=Ve(Ue,1,-rt,1+rt,0,-1,2,Qe)||[],gt&&(Ke=wt(gt,1).concat(Ke)),mt&&(Ke=Ke.concat(wt(mt,-1)))),Ce=Ke).length&&this.splitTile(Ce,0,0,0),ye&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function hn(Xe,nt,ye){return 32*((1<<Xe)*ye+nt)+Xe}function cn(Xe,nt){var ye=Xe.tileID.canonical;if(!this._geoJSONIndex)return nt(null,null);var Ce=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!Ce)return nt(null,null);var Ue=new T(Ce.features),Qe=C(Ue);0===Qe.byteOffset&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),nt(null,{vectorTile:Ue,rawData:Qe.buffer})}ee.prototype.load=function(Xe){var nt=this.options,ye=nt.log,Ce=nt.minZoom,Ue=nt.maxZoom,Qe=nt.nodeSize;ye&&console.time("total time");var rt="prepare "+Xe.length+" points";ye&&console.time(rt),this.points=Xe;for(var Ke=[],gt=0;gt<Xe.length;gt++)Xe[gt].geometry&&Ke.push(ce(Xe[gt],gt));this.trees[Ue+1]=new U(Ke,De,Se,Qe,Float32Array),ye&&console.timeEnd(rt);for(var mt=Ue;mt>=Ce;mt--){var Lt=+Date.now();Ke=this._cluster(Ke,mt),this.trees[mt]=new U(Ke,De,Se,Qe,Float32Array),ye&&console.log("z%d: %d clusters in %dms",mt,Ke.length,+Date.now()-Lt)}return ye&&console.timeEnd("total time"),this},ee.prototype.getClusters=function(Xe,nt){var ye=((Xe[0]+180)%360+360)%360-180,Ce=Math.max(-90,Math.min(90,Xe[1])),Ue=180===Xe[2]?180:((Xe[2]+180)%360+360)%360-180,Qe=Math.max(-90,Math.min(90,Xe[3]));if(Xe[2]-Xe[0]>=360)ye=-180,Ue=180;else if(ye>Ue){var rt=this.getClusters([ye,Ce,180,Qe],nt),Ke=this.getClusters([-180,Ce,Ue,Qe],nt);return rt.concat(Ke)}for(var gt=this.trees[this._limitZoom(nt)],mt=[],Lt=0,Vt=gt.range(be(ye),he(Qe),be(Ue),he(Ce));Lt<Vt.length;Lt+=1){var bt=gt.points[Vt[Lt]];mt.push(bt.numPoints?pe(bt):this.points[bt.index])}return mt},ee.prototype.getChildren=function(Xe){var nt=this._getOriginId(Xe),ye=this._getOriginZoom(Xe),Ce="No cluster with the specified id.",Ue=this.trees[ye];if(!Ue)throw new Error(Ce);var Qe=Ue.points[nt];if(!Qe)throw new Error(Ce);for(var rt=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ke=[],gt=0,mt=Ue.within(Qe.x,Qe.y,rt);gt<mt.length;gt+=1){var Vt=Ue.points[mt[gt]];Vt.parentId===Xe&&Ke.push(Vt.numPoints?pe(Vt):this.points[Vt.index])}if(0===Ke.length)throw new Error(Ce);return Ke},ee.prototype.getLeaves=function(Xe,nt,ye){var Ce=[];return this._appendLeaves(Ce,Xe,nt=nt||10,ye=ye||0,0),Ce},ee.prototype.getTile=function(Xe,nt,ye){var Ce=this.trees[this._limitZoom(Xe)],Ue=Math.pow(2,Xe),Qe=this.options,Ke=Qe.radius/Qe.extent,gt=(ye-Ke)/Ue,mt=(ye+1+Ke)/Ue,Lt={features:[]};return this._addTileFeatures(Ce.range((nt-Ke)/Ue,gt,(nt+1+Ke)/Ue,mt),Ce.points,nt,ye,Ue,Lt),0===nt&&this._addTileFeatures(Ce.range(1-Ke/Ue,gt,1,mt),Ce.points,Ue,ye,Ue,Lt),nt===Ue-1&&this._addTileFeatures(Ce.range(0,gt,Ke/Ue,mt),Ce.points,-1,ye,Ue,Lt),Lt.features.length?Lt:null},ee.prototype.getClusterExpansionZoom=function(Xe){for(var nt=this._getOriginZoom(Xe)-1;nt<=this.options.maxZoom;){var ye=this.getChildren(Xe);if(nt++,1!==ye.length)break;Xe=ye[0].properties.cluster_id}return nt},ee.prototype._appendLeaves=function(Xe,nt,ye,Ce,Ue){for(var Qe=0,rt=this.getChildren(nt);Qe<rt.length;Qe+=1){var Ke=rt[Qe],gt=Ke.properties;if(gt&&gt.cluster?Ue+gt.point_count<=Ce?Ue+=gt.point_count:Ue=this._appendLeaves(Xe,gt.cluster_id,ye,Ce,Ue):Ue<Ce?Ue++:Xe.push(Ke),Xe.length===ye)break}return Ue},ee.prototype._addTileFeatures=function(Xe,nt,ye,Ce,Ue,Qe){for(var rt=0,Ke=Xe;rt<Ke.length;rt+=1){var gt=nt[Ke[rt]],mt=gt.numPoints,Lt={type:1,geometry:[[Math.round(this.options.extent*(gt.x*Ue-ye)),Math.round(this.options.extent*(gt.y*Ue-Ce))]],tags:mt?de(gt):this.points[gt.index].properties},Vt=void 0;mt?Vt=gt.id:this.options.generateId?Vt=gt.index:this.points[gt.index].id&&(Vt=this.points[gt.index].id),void 0!==Vt&&(Lt.id=Vt),Qe.features.push(Lt)}},ee.prototype._limitZoom=function(Xe){return Math.max(this.options.minZoom,Math.min(Xe,this.options.maxZoom+1))},ee.prototype._cluster=function(Xe,nt){for(var ye=[],Ce=this.options,rt=Ce.reduce,Ke=Ce.radius/(Ce.extent*Math.pow(2,nt)),gt=0;gt<Xe.length;gt++){var mt=Xe[gt];if(!(mt.zoom<=nt)){mt.zoom=nt;for(var Lt=this.trees[nt+1],Vt=Lt.within(mt.x,mt.y,Ke),dt=mt.numPoints||1,bt=mt.x*dt,Yt=mt.y*dt,It=rt&&dt>1?this._map(mt,!0):null,jt=(gt<<5)+(nt+1)+this.points.length,Ie=0,et=Vt;Ie<et.length;Ie+=1){var xt=Lt.points[et[Ie]];if(!(xt.zoom<=nt)){xt.zoom=nt;var Rt=xt.numPoints||1;bt+=xt.x*Rt,Yt+=xt.y*Rt,dt+=Rt,xt.parentId=jt,rt&&(It||(It=this._map(mt,!0)),rt(It,this._map(xt)))}}1===dt?ye.push(mt):(mt.parentId=jt,ye.push(le(bt/dt,Yt/dt,jt,dt,It)))}}return ye},ee.prototype._getOriginId=function(Xe){return Xe-this.points.length>>5},ee.prototype._getOriginZoom=function(Xe){return(Xe-this.points.length)%32},ee.prototype._map=function(Xe,nt){if(Xe.numPoints)return nt?xe({},Xe.properties):Xe.properties;var ye=this.points[Xe.index].properties,Ce=this.options.map(ye);return nt&&Ce===ye?xe({},Ce):Ce},rn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rn.prototype.splitTile=function(Xe,nt,ye,Ce,Ue,Qe,rt){for(var Ke=[Xe,nt,ye,Ce],gt=this.options,mt=gt.debug;Ke.length;){Ce=Ke.pop(),ye=Ke.pop(),nt=Ke.pop(),Xe=Ke.pop();var Lt=1<<nt,Vt=hn(nt,ye,Ce),dt=this.tiles[Vt];if(!dt&&(mt>1&&console.time("creation"),dt=this.tiles[Vt]=st(Xe,nt,ye,Ce,gt),this.tileCoords.push({z:nt,x:ye,y:Ce}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",nt,ye,Ce,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation"));var bt="z"+nt;this.stats[bt]=(this.stats[bt]||0)+1,this.total++}if(dt.source=Xe,Ue){if(nt===gt.maxZoom||nt===Ue)continue;var Yt=1<<Ue-nt;if(ye!==Math.floor(Qe/Yt)||Ce!==Math.floor(rt/Yt))continue}else if(nt===gt.indexMaxZoom||dt.numPoints<=gt.indexMaxPoints)continue;if(dt.source=null,0!==Xe.length){mt>1&&console.time("clipping");var It,jt,Ie,et,ht,xt,Rt=.5*gt.buffer/gt.extent,Xt=.5-Rt,tn=.5+Rt,Kt=1+Rt;It=jt=Ie=et=null,ht=Ve(Xe,Lt,ye-Rt,ye+tn,0,dt.minX,dt.maxX,gt),xt=Ve(Xe,Lt,ye+Xt,ye+Kt,0,dt.minX,dt.maxX,gt),Xe=null,ht&&(It=Ve(ht,Lt,Ce-Rt,Ce+tn,1,dt.minY,dt.maxY,gt),jt=Ve(ht,Lt,Ce+Xt,Ce+Kt,1,dt.minY,dt.maxY,gt),ht=null),xt&&(Ie=Ve(xt,Lt,Ce-Rt,Ce+tn,1,dt.minY,dt.maxY,gt),et=Ve(xt,Lt,Ce+Xt,Ce+Kt,1,dt.minY,dt.maxY,gt),xt=null),mt>1&&console.timeEnd("clipping"),Ke.push(It||[],nt+1,2*ye,2*Ce),Ke.push(jt||[],nt+1,2*ye,2*Ce+1),Ke.push(Ie||[],nt+1,2*ye+1,2*Ce),Ke.push(et||[],nt+1,2*ye+1,2*Ce+1)}}},rn.prototype.getTile=function(Xe,nt,ye){var Ce=this.options,Ue=Ce.extent,Qe=Ce.debug;if(Xe<0||Xe>24)return null;var rt=1<<Xe,Ke=hn(Xe,nt=(nt%rt+rt)%rt,ye);if(this.tiles[Ke])return St(this.tiles[Ke],Ue);Qe>1&&console.log("drilling down to z%d-%d-%d",Xe,nt,ye);for(var gt,mt=Xe,Lt=nt,Vt=ye;!gt&&mt>0;)mt--,Lt=Math.floor(Lt/2),Vt=Math.floor(Vt/2),gt=this.tiles[hn(mt,Lt,Vt)];return gt&&gt.source?(Qe>1&&console.log("found parent tile z%d-%d-%d",mt,Lt,Vt),Qe>1&&console.time("drilling down"),this.splitTile(gt.source,mt,Lt,Vt,Xe,nt,ye),Qe>1&&console.timeEnd("drilling down"),this.tiles[Ke]?St(this.tiles[Ke],Ue):null):null};var mn=function(Xe){function nt(ye,Ce,Ue,Qe){Xe.call(this,ye,Ce,Ue,cn),Qe&&(this.loadGeoJSON=Qe)}return Xe&&(nt.__proto__=Xe),(nt.prototype=Object.create(Xe&&Xe.prototype)).constructor=nt,nt.prototype.loadData=function(ye,Ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ce,this._pendingLoadDataParams=ye,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},nt.prototype._loadData=function(){var ye=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ce=this._pendingCallback,Ue=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Qe=!!(Ue&&Ue.request&&Ue.request.collectResourceTiming)&&new e.RequestPerformance(Ue.request);this.loadGeoJSON(Ue,function(rt,Ke){if(rt||!Ke)return Ce(rt);if("object"!=typeof Ke)return Ce(new Error("Input data given to '"+Ue.source+"' is not a valid GeoJSON object."));d(Ke,!0);try{ye._geoJSONIndex=Ue.cluster?new ee(function(Lt){var Vt=Lt.superclusterOptions,dt=Lt.clusterProperties;if(!dt||!Vt)return Vt;for(var bt={},Yt={},It={accumulated:null,zoom:0},jt={properties:null},Ie=Object.keys(dt),et=0,ht=Ie;et<ht.length;et+=1){var xt=ht[et],Rt=dt[xt],Xt=Rt[0],Kt=e.createExpression(Rt[1]),kn=e.createExpression("string"==typeof Xt?[Xt,["accumulated"],["get",xt]]:Xt);bt[xt]=Kt.value,Yt[xt]=kn.value}return Vt.map=function(Vn){jt.properties=Vn;for(var Tn={},sn=0,fn=Ie;sn<fn.length;sn+=1){var dn=fn[sn];Tn[dn]=bt[dn].evaluate(It,jt)}return Tn},Vt.reduce=function(Vn,Tn){jt.properties=Tn;for(var sn=0,fn=Ie;sn<fn.length;sn+=1){var dn=fn[sn];It.accumulated=Vn[dn],Vn[dn]=Yt[dn].evaluate(It,jt)}},Vt}(Ue)).load(Ke.features):new rn(Lt=Ke,Ue.geojsonVtOptions)}catch(Lt){return Ce(Lt)}var Lt;ye.loaded={};var gt={};if(Qe){var mt=Qe.finish();mt&&(gt.resourceTiming={},gt.resourceTiming[Ue.source]=JSON.parse(JSON.stringify(mt)))}Ce(null,gt)})}},nt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},nt.prototype.reloadTile=function(ye,Ce){var Ue=this.loaded;return Ue&&Ue[ye.uid]?Xe.prototype.reloadTile.call(this,ye,Ce):this.loadTile(ye,Ce)},nt.prototype.loadGeoJSON=function(ye,Ce){if(ye.request)e.getJSON(ye.request,Ce);else{if("string"!=typeof ye.data)return Ce(new Error("Input data given to '"+ye.source+"' is not a valid GeoJSON object."));try{return Ce(null,JSON.parse(ye.data))}catch{return Ce(new Error("Input data given to '"+ye.source+"' is not a valid GeoJSON object."))}}},nt.prototype.removeSource=function(ye,Ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ce()},nt.prototype.getClusterExpansionZoom=function(ye,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId))}catch(Ue){Ce(Ue)}},nt.prototype.getClusterChildren=function(ye,Ce){try{Ce(null,this._geoJSONIndex.getChildren(ye.clusterId))}catch(Ue){Ce(Ue)}},nt.prototype.getClusterLeaves=function(ye,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset))}catch(Ue){Ce(Ue)}},nt}(f),nn=function(Xe){var nt=this;this.self=Xe,this.actor=new e.Actor(Xe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:f,geojson:mn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ye,Ce){if(nt.workerSourceTypes[ye])throw new Error('Worker source with name "'+ye+'" already registered.');nt.workerSourceTypes[ye]=Ce},this.self.registerRTLTextPlugin=function(ye){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ye.applyArabicShaping,e.plugin.processBidirectionalText=ye.processBidirectionalText,e.plugin.processStyledBidirectionalText=ye.processStyledBidirectionalText}};return nn.prototype.setReferrer=function(Xe,nt){this.referrer=nt},nn.prototype.setImages=function(Xe,nt,ye){for(var Ce in this.availableImages[Xe]=nt,this.workerSources[Xe]){var Ue=this.workerSources[Xe][Ce];for(var Qe in Ue)Ue[Qe].availableImages=nt}ye()},nn.prototype.setLayers=function(Xe,nt,ye){this.getLayerIndex(Xe).replace(nt),ye()},nn.prototype.updateLayers=function(Xe,nt,ye){this.getLayerIndex(Xe).update(nt.layers,nt.removedIds),ye()},nn.prototype.loadTile=function(Xe,nt,ye){this.getWorkerSource(Xe,nt.type,nt.source).loadTile(nt,ye)},nn.prototype.loadDEMTile=function(Xe,nt,ye){this.getDEMWorkerSource(Xe,nt.source).loadTile(nt,ye)},nn.prototype.reloadTile=function(Xe,nt,ye){this.getWorkerSource(Xe,nt.type,nt.source).reloadTile(nt,ye)},nn.prototype.abortTile=function(Xe,nt,ye){this.getWorkerSource(Xe,nt.type,nt.source).abortTile(nt,ye)},nn.prototype.removeTile=function(Xe,nt,ye){this.getWorkerSource(Xe,nt.type,nt.source).removeTile(nt,ye)},nn.prototype.removeDEMTile=function(Xe,nt){this.getDEMWorkerSource(Xe,nt.source).removeTile(nt)},nn.prototype.removeSource=function(Xe,nt,ye){if(this.workerSources[Xe]&&this.workerSources[Xe][nt.type]&&this.workerSources[Xe][nt.type][nt.source]){var Ce=this.workerSources[Xe][nt.type][nt.source];delete this.workerSources[Xe][nt.type][nt.source],void 0!==Ce.removeSource?Ce.removeSource(nt,ye):ye()}},nn.prototype.loadWorkerSource=function(Xe,nt,ye){try{this.self.importScripts(nt.url),ye()}catch(Ce){ye(Ce.toString())}},nn.prototype.syncRTLPluginState=function(Xe,nt,ye){try{e.plugin.setState(nt);var Ce=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Ce){this.self.importScripts(Ce);var Ue=e.plugin.isParsed();ye(Ue?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ce),Ue)}}catch(Qe){ye(Qe.toString())}},nn.prototype.getAvailableImages=function(Xe){var nt=this.availableImages[Xe];return nt||(nt=[]),nt},nn.prototype.getLayerIndex=function(Xe){var nt=this.layerIndexes[Xe];return nt||(nt=this.layerIndexes[Xe]=new o),nt},nn.prototype.getWorkerSource=function(Xe,nt,ye){var Ce=this;return this.workerSources[Xe]||(this.workerSources[Xe]={}),this.workerSources[Xe][nt]||(this.workerSources[Xe][nt]={}),this.workerSources[Xe][nt][ye]||(this.workerSources[Xe][nt][ye]=new this.workerSourceTypes[nt]({send:function(Qe,rt,Ke){Ce.actor.send(Qe,rt,Ke,Xe)}},this.getLayerIndex(Xe),this.getAvailableImages(Xe))),this.workerSources[Xe][nt][ye]},nn.prototype.getDEMWorkerSource=function(Xe,nt){return this.demWorkerSources[Xe]||(this.demWorkerSources[Xe]={}),this.demWorkerSources[Xe][nt]||(this.demWorkerSources[Xe][nt]=new s),this.demWorkerSources[Xe][nt]},nn.prototype.enforceCacheSizeLimit=function(Xe,nt){e.enforceCacheSizeLimit(nt)},typeof WorkerGlobalScope<"u"&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new nn(e.window)),nn}),y(0,function(e){var r=e.createCommonjsModule(function(O){function F(fe){return!B(fe)}function B(fe){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ge,we,Ee=new Blob([""],{type:"text/javascript"}),Pe=URL.createObjectURL(Ee);try{we=new Worker(Pe),ge=!0}catch{ge=!1}return we&&we.terminate(),URL.revokeObjectURL(Pe),ge}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ge=document.createElement("canvas");ge.width=ge.height=1;var we=ge.getContext("2d");if(!we)return!1;var Ee=we.getImageData(0,0,1,1);return Ee&&Ee.width===ge.width}()?(void 0===W[ge=fe&&fe.failIfMajorPerformanceCaveat]&&(W[ge]=function(we){var $e,ot,pt,Ee=($e=we,ot=document.createElement("canvas"),(pt=Object.create(F.webGLContextAttributes)).failIfMajorPerformanceCaveat=$e,ot.probablySupportsContext?ot.probablySupportsContext("webgl",pt)||ot.probablySupportsContext("experimental-webgl",pt):ot.supportsContext?ot.supportsContext("webgl",pt)||ot.supportsContext("experimental-webgl",pt):ot.getContext("webgl",pt)||ot.getContext("experimental-webgl",pt));if(!Ee)return!1;var Pe=Ee.createShader(Ee.VERTEX_SHADER);return!(!Pe||Ee.isContextLost())&&(Ee.shaderSource(Pe,"void main() {}"),Ee.compileShader(Pe),!0===Ee.getShaderParameter(Pe,Ee.COMPILE_STATUS))}(ge)),W[ge]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ge}O.exports?O.exports=F:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=F,window.mapboxgl.notSupportedReason=B);var W={};F.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),t={create:function(O,F,B){var W=e.window.document.createElement(O);return void 0!==F&&(W.className=F),B&&B.appendChild(W),W},createNS:function(O,F){return e.window.document.createElementNS(O,F)}},o=e.window.document.documentElement.style;function n(O){if(!o)return O[0];for(var F=0;F<O.length;F++)if(O[F]in o)return O[F];return O[0]}var m,l=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);t.disableDrag=function(){o&&l&&(m=o[l],o[l]="none")},t.enableDrag=function(){o&&l&&(o[l]=m)};var i=n(["transform","WebkitTransform"]);t.setTransform=function(O,F){O.style[i]=F};var f=!1;try{var u=Object.defineProperty({},"passive",{get:function(){f=!0}});e.window.addEventListener("test",u,u),e.window.removeEventListener("test",u,u)}catch{f=!1}t.addEventListener=function(O,F,B,W){void 0===W&&(W={}),O.addEventListener(F,B,"passive"in W&&f?W:W.capture)},t.removeEventListener=function(O,F,B,W){void 0===W&&(W={}),O.removeEventListener(F,B,"passive"in W&&f?W:W.capture)};var s=function(O){O.preventDefault(),O.stopPropagation(),e.window.removeEventListener("click",s,!0)};function d(O){var F=O.userImage;return!!(F&&F.render&&F.render())&&(O.data.replace(new Uint8Array(F.data.buffer)),!0)}t.suppressClick=function(){e.window.addEventListener("click",s,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",s,!0)},0)},t.mousePos=function(O,F){var B=O.getBoundingClientRect();return new e.Point(F.clientX-B.left-O.clientLeft,F.clientY-B.top-O.clientTop)},t.touchPos=function(O,F){for(var B=O.getBoundingClientRect(),W=[],fe=0;fe<F.length;fe++)W.push(new e.Point(F[fe].clientX-B.left-O.clientLeft,F[fe].clientY-B.top-O.clientTop));return W},t.mouseButton=function(O){return void 0!==e.window.InstallTrigger&&2===O.button&&O.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:O.button},t.remove=function(O){O.parentNode&&O.parentNode.removeChild(O)};var h=function(O){function F(){O.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.isLoaded=function(){return this.loaded},F.prototype.setLoaded=function(B){if(this.loaded!==B&&(this.loaded=B,B)){for(var W=0,fe=this.requestors;W<fe.length;W+=1){var ge=fe[W];this._notify(ge.ids,ge.callback)}this.requestors=[]}},F.prototype.getImage=function(B){return this.images[B]},F.prototype.addImage=function(B,W){this._validate(B,W)&&(this.images[B]=W)},F.prototype._validate=function(B,W){var fe=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(W.content,W)||(this.fire(new e.ErrorEvent(new Error('Image "'+B+'" has invalid "content" value'))),fe=!1),fe},F.prototype._validateStretch=function(B,W){if(!B)return!0;for(var fe=0,ge=0,we=B;ge<we.length;ge+=1){var Ee=we[ge];if(Ee[0]<fe||Ee[1]<Ee[0]||W<Ee[1])return!1;fe=Ee[1]}return!0},F.prototype._validateContent=function(B,W){return!(B&&(4!==B.length||B[0]<0||W.data.width<B[0]||B[1]<0||W.data.height<B[1]||B[2]<0||W.data.width<B[2]||B[3]<0||W.data.height<B[3]||B[2]<B[0]||B[3]<B[1]))},F.prototype.updateImage=function(B,W){W.version=this.images[B].version+1,this.images[B]=W,this.updatedImages[B]=!0},F.prototype.removeImage=function(B){var W=this.images[B];delete this.images[B],delete this.patterns[B],W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},F.prototype.listImages=function(){return Object.keys(this.images)},F.prototype.getImages=function(B,W){var fe=!0;if(!this.isLoaded())for(var ge=0,we=B;ge<we.length;ge+=1)this.images[we[ge]]||(fe=!1);this.isLoaded()||fe?this._notify(B,W):this.requestors.push({ids:B,callback:W})},F.prototype._notify=function(B,W){for(var fe={},ge=0,we=B;ge<we.length;ge+=1){var Ee=we[ge];this.images[Ee]||this.fire(new e.Event("styleimagemissing",{id:Ee}));var Pe=this.images[Ee];Pe?fe[Ee]={data:Pe.data.clone(),pixelRatio:Pe.pixelRatio,sdf:Pe.sdf,version:Pe.version,stretchX:Pe.stretchX,stretchY:Pe.stretchY,content:Pe.content,hasRenderCallback:Boolean(Pe.userImage&&Pe.userImage.render)}:e.warnOnce('Image "'+Ee+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,fe)},F.prototype.getPixelSize=function(){var B=this.atlasImage;return{width:B.width,height:B.height}},F.prototype.getPattern=function(B){var W=this.patterns[B],fe=this.getImage(B);if(!fe)return null;if(W&&W.position.version===fe.version)return W.position;if(W)W.position.version=fe.version;else{var ge={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},we=new e.ImagePosition(ge,fe);this.patterns[B]={bin:ge,position:we}}return this._updatePatternAtlas(),this.patterns[B].position},F.prototype.bind=function(B){var W=B.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(B,this.atlasImage,W.RGBA),this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},F.prototype._updatePatternAtlas=function(){var B=[];for(var W in this.patterns)B.push(this.patterns[W].bin);var fe=e.potpack(B),ge=fe.w,we=fe.h,Ee=this.atlasImage;for(var Pe in Ee.resize({width:ge||1,height:we||1}),this.patterns){var $e=this.patterns[Pe].bin,ot=$e.x+1,pt=$e.y+1,Dt=this.images[Pe].data,zt=Dt.width,Pt=Dt.height;e.RGBAImage.copy(Dt,Ee,{x:0,y:0},{x:ot,y:pt},{width:zt,height:Pt}),e.RGBAImage.copy(Dt,Ee,{x:0,y:Pt-1},{x:ot,y:pt-1},{width:zt,height:1}),e.RGBAImage.copy(Dt,Ee,{x:0,y:0},{x:ot,y:pt+Pt},{width:zt,height:1}),e.RGBAImage.copy(Dt,Ee,{x:zt-1,y:0},{x:ot-1,y:pt},{width:1,height:Pt}),e.RGBAImage.copy(Dt,Ee,{x:0,y:0},{x:ot+zt,y:pt},{width:1,height:Pt})}this.dirty=!0},F.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},F.prototype.dispatchRenderCallbacks=function(B){for(var W=0,fe=B;W<fe.length;W+=1){var ge=fe[W];if(!this.callbackDispatchedThisFrame[ge]){this.callbackDispatchedThisFrame[ge]=!0;var we=this.images[ge];d(we)&&this.updateImage(ge,we)}}},F}(e.Evented),a=T,_=T,c=1e20;function T(O,F,B,W,fe,ge){this.fontSize=O||24,this.buffer=void 0===F?3:F,this.cutoff=W||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=ge||"normal",this.radius=B||8;var we=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=we,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(we*we),this.gridInner=new Float64Array(we*we),this.f=new Float64Array(we),this.d=new Float64Array(we),this.z=new Float64Array(we+1),this.v=new Int16Array(we),this.middle=Math.round(we/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function x(O,F,B,W,fe,ge,we){for(var Ee=0;Ee<F;Ee++){for(var Pe=0;Pe<B;Pe++)W[Pe]=O[Pe*F+Ee];for(w(W,fe,ge,we,B),Pe=0;Pe<B;Pe++)O[Pe*F+Ee]=fe[Pe]}for(Pe=0;Pe<B;Pe++){for(Ee=0;Ee<F;Ee++)W[Ee]=O[Pe*F+Ee];for(w(W,fe,ge,we,F),Ee=0;Ee<F;Ee++)O[Pe*F+Ee]=Math.sqrt(fe[Ee])}}function w(O,F,B,W,fe){B[0]=0,W[0]=-c,W[1]=+c;for(var ge=1,we=0;ge<fe;ge++){for(var Ee=(O[ge]+ge*ge-(O[B[we]]+B[we]*B[we]))/(2*ge-2*B[we]);Ee<=W[we];)we--,Ee=(O[ge]+ge*ge-(O[B[we]]+B[we]*B[we]))/(2*ge-2*B[we]);B[++we]=ge,W[we]=Ee,W[we+1]=+c}for(ge=0,we=0;ge<fe;ge++){for(;W[we+1]<ge;)we++;F[ge]=(ge-B[we])*(ge-B[we])+O[B[we]]}}T.prototype.draw=function(O){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(O,this.buffer,this.middle);for(var F=this.ctx.getImageData(0,0,this.size,this.size),B=new Uint8ClampedArray(this.size*this.size),W=0;W<this.size*this.size;W++){var fe=F.data[4*W+3]/255;this.gridOuter[W]=1===fe?0:0===fe?c:Math.pow(Math.max(0,.5-fe),2),this.gridInner[W]=1===fe?c:0===fe?0:Math.pow(Math.max(0,fe-.5),2)}for(x(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),x(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),W=0;W<this.size*this.size;W++)B[W]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[W]-this.gridInner[W])/this.radius+this.cutoff))));return B},a.default=_;var M=function(O,F){this.requestManager=O,this.localIdeographFontFamily=F,this.entries={}};M.prototype.setURL=function(O){this.url=O},M.prototype.getGlyphs=function(O,F){var B=this,W=[];for(var fe in O)for(var ge=0,we=O[fe];ge<we.length;ge+=1)W.push({stack:fe,id:we[ge]});e.asyncAll(W,function(Pe,$e){var ot=Pe.stack,pt=Pe.id,Dt=B.entries[ot];Dt||(Dt=B.entries[ot]={glyphs:{},requests:{},ranges:{}});var zt=Dt.glyphs[pt];if(void 0===zt){if(zt=B._tinySDF(Dt,ot,pt))return Dt.glyphs[pt]=zt,void $e(null,{stack:ot,id:pt,glyph:zt});var Pt=Math.floor(pt/256);if(256*Pt>65535)$e(new Error("glyphs > 65535 not supported"));else if(Dt.ranges[Pt])$e(null,{stack:ot,id:pt,glyph:zt});else{var Nt=Dt.requests[Pt];Nt||(Nt=Dt.requests[Pt]=[],M.loadGlyphRange(ot,Pt,B.url,B.requestManager,function(Et,Zt){if(Zt){for(var qt in Zt)B._doesCharSupportLocalGlyph(+qt)||(Dt.glyphs[+qt]=Zt[+qt]);Dt.ranges[Pt]=!0}for(var Jt=0,gn=Nt;Jt<gn.length;Jt+=1)(0,gn[Jt])(Et,Zt);delete Dt.requests[Pt]})),Nt.push(function(Et,Zt){Et?$e(Et):Zt&&$e(null,{stack:ot,id:pt,glyph:Zt[pt]||null})})}}else $e(null,{stack:ot,id:pt,glyph:zt})},function(Pe,$e){if(Pe)F(Pe);else if($e){for(var ot={},pt=0,Dt=$e;pt<Dt.length;pt+=1){var zt=Dt[pt],Pt=zt.stack,Nt=zt.id,Et=zt.glyph;(ot[Pt]||(ot[Pt]={}))[Nt]=Et&&{id:Et.id,bitmap:Et.bitmap.clone(),metrics:Et.metrics}}F(null,ot)}})},M.prototype._doesCharSupportLocalGlyph=function(O){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](O)||e.isChar["Hangul Syllables"](O)||e.isChar.Hiragana(O)||e.isChar.Katakana(O))},M.prototype._tinySDF=function(O,F,B){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(B)){var fe=O.tinySDF;if(!fe){var ge="400";/bold/i.test(F)?ge="900":/medium/i.test(F)?ge="500":/light/i.test(F)&&(ge="200"),fe=O.tinySDF=new M.TinySDF(24,3,8,.25,W,ge)}return{id:B,bitmap:new e.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(B))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},M.loadGlyphRange=function(O,F,B,W,fe){var ge=256*F,we=ge+255,Ee=W.transformRequest(W.normalizeGlyphsURL(B).replace("{fontstack}",O).replace("{range}",ge+"-"+we),e.ResourceType.Glyphs);e.getArrayBuffer(Ee,function(Pe,$e){if(Pe)fe(Pe);else if($e){for(var ot={},pt=0,Dt=e.parseGlyphPBF($e);pt<Dt.length;pt+=1){var zt=Dt[pt];ot[zt.id]=zt}fe(null,ot)}})},M.TinySDF=a;var D=function(){this.specification=e.styleSpec.light.position};D.prototype.possiblyEvaluate=function(O,F){return e.sphericalToCartesian(O.expression.evaluate(F))},D.prototype.interpolate=function(O,F,B){return{x:e.number(O.x,F.x,B),y:e.number(O.y,F.y,B),z:e.number(O.z,F.z,B)}};var C=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new D,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),P=function(O){function F(B){O.call(this),this._transitionable=new e.Transitionable(C),this.setLight(B),this._transitioning=this._transitionable.untransitioned()}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getLight=function(){return this._transitionable.serialize()},F.prototype.setLight=function(B,W){if(void 0===W&&(W={}),!this._validate(e.validateLight,B,W))for(var fe in B){var ge=B[fe];e.endsWith(fe,"-transition")?this._transitionable.setTransition(fe.slice(0,-11),ge):this._transitionable.setValue(fe,ge)}},F.prototype.updateTransitions=function(B){this._transitioning=this._transitionable.transitioned(B,this._transitioning)},F.prototype.hasTransition=function(){return this._transitioning.hasTransition()},F.prototype.recalculate=function(B){this.properties=this._transitioning.possiblyEvaluate(B)},F.prototype._validate=function(B,W,fe){return(!fe||!1!==fe.validate)&&e.emitValidationErrors(this,B.call(e.validateStyle,e.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},F}(e.Evented),L=function(O,F){this.width=O,this.height=F,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};L.prototype.getDash=function(O,F){var B=O.join(",")+String(F);return this.dashEntry[B]||(this.dashEntry[B]=this.addDash(O,F)),this.dashEntry[B]},L.prototype.getDashRanges=function(O,F,B){var W=[],fe=O.length%2==1?-O[O.length-1]*B:0,ge=O[0]*B,we=!0;W.push({left:fe,right:ge,isDash:we,zeroLength:0===O[0]});for(var Ee=O[0],Pe=1;Pe<O.length;Pe++){var $e=O[Pe];fe=Ee*B,ge=(Ee+=$e)*B,W.push({left:fe,right:ge,isDash:we=!we,zeroLength:0===$e})}return W},L.prototype.addRoundDash=function(O,F,B){for(var W=F/2,fe=-B;fe<=B;fe++)for(var we=this.width*(this.nextRow+B+fe),Ee=0,Pe=O[Ee],$e=0;$e<this.width;$e++){$e/Pe.right>1&&(Pe=O[++Ee]);var ot=Math.abs($e-Pe.left),pt=Math.abs($e-Pe.right),Dt=Math.min(ot,pt),zt=void 0,Pt=fe/B*(W+1);if(Pe.isDash){var Nt=W-Math.abs(Pt);zt=Math.sqrt(Dt*Dt+Nt*Nt)}else zt=W-Math.sqrt(Dt*Dt+Pt*Pt);this.data[we+$e]=Math.max(0,Math.min(255,zt+128))}},L.prototype.addRegularDash=function(O){for(var F=O.length-1;F>=0;--F){var B=O[F],W=O[F+1];B.zeroLength?O.splice(F,1):W&&W.isDash===B.isDash&&(W.left=B.left,O.splice(F,1))}var fe=O[0],ge=O[O.length-1];fe.isDash===ge.isDash&&(fe.left=ge.left-this.width,ge.right=fe.right+this.width);for(var we=this.width*this.nextRow,Ee=0,Pe=O[Ee],$e=0;$e<this.width;$e++){$e/Pe.right>1&&(Pe=O[++Ee]);var ot=Math.abs($e-Pe.left),pt=Math.abs($e-Pe.right),Dt=Math.min(ot,pt);this.data[we+$e]=Math.max(0,Math.min(255,(Pe.isDash?Dt:-Dt)+128))}},L.prototype.addDash=function(O,F){var B=F?7:0,W=2*B+1;if(this.nextRow+W>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var fe=0,ge=0;ge<O.length;ge++)fe+=O[ge];if(0!==fe){var we=this.width/fe,Ee=this.getDashRanges(O,this.width,we);F?this.addRoundDash(Ee,we,B):this.addRegularDash(Ee)}var Pe={y:(this.nextRow+B+.5)/this.height,height:2*B/this.height,width:fe};return this.nextRow+=W,this.dirty=!0,Pe},L.prototype.bind=function(O){var F=O.gl;this.texture?(F.bindTexture(F.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,F.texSubImage2D(F.TEXTURE_2D,0,0,0,this.width,this.height,F.ALPHA,F.UNSIGNED_BYTE,this.data))):(this.texture=F.createTexture(),F.bindTexture(F.TEXTURE_2D,this.texture),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.REPEAT),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.REPEAT),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.LINEAR),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.LINEAR),F.texImage2D(F.TEXTURE_2D,0,F.ALPHA,this.width,this.height,0,F.ALPHA,F.UNSIGNED_BYTE,this.data))};var S=function O(F,B){this.workerPool=F,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var W=this.workerPool.acquire(this.id),fe=0;fe<W.length;fe++){var we=new O.Actor(W[fe],B,this.id);we.name="Worker "+fe,this.actors.push(we)}};function E(O,F,B){var W=function(fe,ge){if(fe)return B(fe);if(ge){var we=e.pick(e.extend(ge,O),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ge.vector_layers&&(we.vectorLayers=ge.vector_layers,we.vectorLayerIds=we.vectorLayers.map(function(Ee){return Ee.id})),we.tiles=F.canonicalizeTileset(we,O.url),B(null,we)}};return O.url?e.getJSON(F.transformRequest(F.normalizeSourceURL(O.url),e.ResourceType.Source),W):e.browser.frame(function(){return W(null,O)})}S.prototype.broadcast=function(O,F,B){e.asyncAll(this.actors,function(W,fe){W.send(O,F,fe)},B=B||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(O){O.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var N=function(O,F,B){this.bounds=e.LngLatBounds.convert(this.validateBounds(O)),this.minzoom=F||0,this.maxzoom=B||24};N.prototype.validateBounds=function(O){return Array.isArray(O)&&4===O.length?[Math.max(-180,O[0]),Math.max(-90,O[1]),Math.min(180,O[2]),Math.min(90,O[3])]:[-180,-90,180,90]},N.prototype.contains=function(O){var F=Math.pow(2,O.z),B=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*F),W=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*F),fe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*F),ge=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*F);return O.x>=B&&O.x<fe&&O.y>=W&&O.y<ge};var z=function(O){function F(B,W,fe,ge){if(O.call(this),this.id=B,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(W,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},W),this._collectResourceTiming=W.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ge)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.load=function(){var B=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(W,fe){B._tileJSONRequest=null,B._loaded=!0,W?B.fire(new e.ErrorEvent(W)):fe&&(e.extend(B,fe),fe.bounds&&(B.tileBounds=new N(fe.bounds,B.minzoom,B.maxzoom)),e.postTurnstileEvent(fe.tiles,B.map._requestManager._customAccessToken),e.postMapLoadEvent(fe.tiles,B.map._getMapId(),B.map._requestManager._skuToken,B.map._requestManager._customAccessToken),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},F.prototype.loaded=function(){return this._loaded},F.prototype.hasTile=function(B){return!this.tileBounds||this.tileBounds.contains(B.canonical)},F.prototype.onAdd=function(B){this.map=B,this.load()},F.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},F.prototype.serialize=function(){return e.extend({},this._options)},F.prototype.loadTile=function(B,W){var fe=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme)),ge={request:this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),uid:B.uid,tileID:B.tileID,zoom:B.tileID.overscaledZ,tileSize:this.tileSize*B.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function we(Ee,Pe){return delete B.request,B.aborted?W(null):Ee&&404!==Ee.status?W(Ee):(Pe&&Pe.resourceTiming&&(B.resourceTiming=Pe.resourceTiming),this.map._refreshExpiredTiles&&Pe&&B.setExpiryData(Pe),B.loadVectorData(Pe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),W(null),void(B.reloadCallback&&(this.loadTile(B,B.reloadCallback),B.reloadCallback=null)))}ge.request.collectResourceTiming=this._collectResourceTiming,B.actor&&"expired"!==B.state?"loading"===B.state?B.reloadCallback=W:B.request=B.actor.send("reloadTile",ge,we.bind(this)):(B.actor=this.dispatcher.getActor(),B.request=B.actor.send("loadTile",ge,we.bind(this)))},F.prototype.abortTile=function(B){B.request&&(B.request.cancel(),delete B.request),B.actor&&B.actor.send("abortTile",{uid:B.uid,type:this.type,source:this.id},void 0)},F.prototype.unloadTile=function(B){B.unloadVectorData(),B.actor&&B.actor.send("removeTile",{uid:B.uid,type:this.type,source:this.id},void 0)},F.prototype.hasTransition=function(){return!1},F}(e.Evented),q=function(O){function F(B,W,fe,ge){O.call(this),this.id=B,this.dispatcher=fe,this.setEventedParent(ge),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},W),e.extend(this,e.pick(W,["url","scheme","tileSize"]))}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.load=function(){var B=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(W,fe){B._tileJSONRequest=null,B._loaded=!0,W?B.fire(new e.ErrorEvent(W)):fe&&(e.extend(B,fe),fe.bounds&&(B.tileBounds=new N(fe.bounds,B.minzoom,B.maxzoom)),e.postTurnstileEvent(fe.tiles),e.postMapLoadEvent(fe.tiles,B.map._getMapId(),B.map._requestManager._skuToken),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),B.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},F.prototype.loaded=function(){return this._loaded},F.prototype.onAdd=function(B){this.map=B,this.load()},F.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},F.prototype.serialize=function(){return e.extend({},this._options)},F.prototype.hasTile=function(B){return!this.tileBounds||this.tileBounds.contains(B.canonical)},F.prototype.loadTile=function(B,W){var fe=this,ge=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);B.request=e.getImage(this.map._requestManager.transformRequest(ge,e.ResourceType.Tile),function(we,Ee){if(delete B.request,B.aborted)B.state="unloaded",W(null);else if(we)B.state="errored",W(we);else if(Ee){fe.map._refreshExpiredTiles&&B.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Pe=fe.map.painter.context,$e=Pe.gl;B.texture=fe.map.painter.getTileTexture(Ee.width),B.texture?B.texture.update(Ee,{useMipmap:!0}):(B.texture=new e.Texture(Pe,Ee,$e.RGBA,{useMipmap:!0}),B.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE,$e.LINEAR_MIPMAP_NEAREST),Pe.extTextureFilterAnisotropic&&$e.texParameterf($e.TEXTURE_2D,Pe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Pe.extTextureFilterAnisotropicMax)),B.state="loaded",e.cacheEntryPossiblyAdded(fe.dispatcher),W(null)}})},F.prototype.abortTile=function(B,W){B.request&&(B.request.cancel(),delete B.request),W()},F.prototype.unloadTile=function(B,W){B.texture&&this.map.painter.saveTileTexture(B.texture),W()},F.prototype.hasTransition=function(){return!1},F}(e.Evented),G=function(O){function F(B,W,fe,ge){O.call(this,B,W,fe,ge),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},W),this.encoding=W.encoding||"mapbox"}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},F.prototype.loadTile=function(B,W){var fe=this.map._requestManager.normalizeTileURL(B.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ge(we,Ee){we&&(B.state="errored",W(we)),Ee&&(B.dem=Ee,B.needsHillshadePrepare=!0,B.state="loaded",W(null))}B.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(we,Ee){if(delete B.request,B.aborted)B.state="unloaded",W(null);else if(we)B.state="errored",W(we);else if(Ee){this.map._refreshExpiredTiles&&B.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Pe=e.window.ImageBitmap&&Ee instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Ee:e.browser.getImageData(Ee,1),$e={uid:B.uid,coord:B.tileID,source:this.id,rawImageData:Pe,encoding:this.encoding};B.actor&&"expired"!==B.state||(B.actor=this.dispatcher.getActor(),B.actor.send("loadDEMTile",$e,ge.bind(this)))}}.bind(this)),B.neighboringTiles=this._getNeighboringTiles(B.tileID)},F.prototype._getNeighboringTiles=function(B){var W=B.canonical,fe=Math.pow(2,W.z),ge=(W.x-1+fe)%fe,we=0===W.x?B.wrap-1:B.wrap,Ee=(W.x+1+fe)%fe,Pe=W.x+1===fe?B.wrap+1:B.wrap,$e={};return $e[new e.OverscaledTileID(B.overscaledZ,we,W.z,ge,W.y).key]={backfilled:!1},$e[new e.OverscaledTileID(B.overscaledZ,Pe,W.z,Ee,W.y).key]={backfilled:!1},W.y>0&&($e[new e.OverscaledTileID(B.overscaledZ,we,W.z,ge,W.y-1).key]={backfilled:!1},$e[new e.OverscaledTileID(B.overscaledZ,B.wrap,W.z,W.x,W.y-1).key]={backfilled:!1},$e[new e.OverscaledTileID(B.overscaledZ,Pe,W.z,Ee,W.y-1).key]={backfilled:!1}),W.y+1<fe&&($e[new e.OverscaledTileID(B.overscaledZ,we,W.z,ge,W.y+1).key]={backfilled:!1},$e[new e.OverscaledTileID(B.overscaledZ,B.wrap,W.z,W.x,W.y+1).key]={backfilled:!1},$e[new e.OverscaledTileID(B.overscaledZ,Pe,W.z,Ee,W.y+1).key]={backfilled:!1}),$e},F.prototype.unloadTile=function(B){B.demTexture&&this.map.painter.saveTileTexture(B.demTexture),B.fbo&&(B.fbo.destroy(),delete B.fbo),B.dem&&delete B.dem,delete B.neighboringTiles,B.state="unloaded",B.actor&&B.actor.send("removeDEMTile",{uid:B.uid,source:this.id})},F}(q),K=function(O){function F(B,W,fe,ge){O.call(this),this.id=B,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(ge),this._data=W.data,this._options=e.extend({},W),this._collectResourceTiming=W.collectResourceTiming,this._resourceTiming=[],void 0!==W.maxzoom&&(this.maxzoom=W.maxzoom),W.type&&(this.type=W.type),W.attribution&&(this.attribution=W.attribution),this.promoteId=W.promoteId;var we=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:W.cluster||!1,geojsonVtOptions:{buffer:(void 0!==W.buffer?W.buffer:128)*we,tolerance:(void 0!==W.tolerance?W.tolerance:.375)*we,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:W.lineMetrics||!1,generateId:W.generateId||!1},superclusterOptions:{maxZoom:void 0!==W.clusterMaxZoom?Math.min(W.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(W.clusterRadius||50)*we,log:!1,generateId:W.generateId||!1},clusterProperties:W.clusterProperties},W.workerOptions)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.load=function(){var B=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(W){if(W)B.fire(new e.ErrorEvent(W));else{var fe={dataType:"source",sourceDataType:"metadata"};B._collectResourceTiming&&B._resourceTiming&&B._resourceTiming.length>0&&(fe.resourceTiming=B._resourceTiming,B._resourceTiming=[]),B.fire(new e.Event("data",fe))}})},F.prototype.onAdd=function(B){this.map=B,this.load()},F.prototype.setData=function(B){var W=this;return this._data=B,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)W.fire(new e.ErrorEvent(fe));else{var ge={dataType:"source",sourceDataType:"content"};W._collectResourceTiming&&W._resourceTiming&&W._resourceTiming.length>0&&(ge.resourceTiming=W._resourceTiming,W._resourceTiming=[]),W.fire(new e.Event("data",ge))}}),this},F.prototype.getClusterExpansionZoom=function(B,W){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:B,source:this.id},W),this},F.prototype.getClusterChildren=function(B,W){return this.actor.send("geojson.getClusterChildren",{clusterId:B,source:this.id},W),this},F.prototype.getClusterLeaves=function(B,W,fe,ge){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:B,limit:W,offset:fe},ge),this},F.prototype._updateWorkerData=function(B){var W=this;this._loaded=!1;var fe=e.extend({},this.workerOptions),ge=this._data;"string"==typeof ge?(fe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ge),e.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(ge),this.actor.send(this.type+".loadData",fe,function(we,Ee){W._removed||Ee&&Ee.abandoned||(W._loaded=!0,Ee&&Ee.resourceTiming&&Ee.resourceTiming[W.id]&&(W._resourceTiming=Ee.resourceTiming[W.id].slice(0)),W.actor.send(W.type+".coalesce",{source:fe.source},null),B(we))})},F.prototype.loaded=function(){return this._loaded},F.prototype.loadTile=function(B,W){var fe=this,ge=B.actor?"reloadTile":"loadTile";B.actor=this.actor,B.request=this.actor.send(ge,{type:this.type,uid:B.uid,tileID:B.tileID,zoom:B.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ee,Pe){return delete B.request,B.unloadVectorData(),B.aborted?W(null):Ee?W(Ee):(B.loadVectorData(Pe,fe.map.painter,"reloadTile"===ge),W(null))})},F.prototype.abortTile=function(B){B.request&&(B.request.cancel(),delete B.request),B.aborted=!0},F.prototype.unloadTile=function(B){B.unloadVectorData(),this.actor.send("removeTile",{uid:B.uid,type:this.type,source:this.id})},F.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},F.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},F.prototype.hasTransition=function(){return!1},F}(e.Evented),ne=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),X=function(O){function F(B,W,fe,ge){O.call(this),this.id=B,this.dispatcher=fe,this.coordinates=W.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ge),this.options=W}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.load=function(B,W){var fe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ge,we){fe._loaded=!0,ge?fe.fire(new e.ErrorEvent(ge)):we&&(fe.image=we,B&&(fe.coordinates=B),W&&W(),fe._finishLoading())})},F.prototype.loaded=function(){return this._loaded},F.prototype.updateImage=function(B){var W=this;return this.image&&B.url?(this.options.url=B.url,this.load(B.coordinates,function(){W.texture=null}),this):this},F.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},F.prototype.onAdd=function(B){this.map=B,this.load()},F.prototype.setCoordinates=function(B){var W=this;this.coordinates=B;var fe=B.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(we){for(var Ee=1/0,Pe=1/0,$e=-1/0,ot=-1/0,pt=0,Dt=we;pt<Dt.length;pt+=1){var zt=Dt[pt];Ee=Math.min(Ee,zt.x),Pe=Math.min(Pe,zt.y),$e=Math.max($e,zt.x),ot=Math.max(ot,zt.y)}var Et=Math.max($e-Ee,ot-Pe),Zt=Math.max(0,Math.floor(-Math.log(Et)/Math.LN2)),qt=Math.pow(2,Zt);return new e.CanonicalTileID(Zt,Math.floor((Ee+$e)/2*qt),Math.floor((Pe+ot)/2*qt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var ge=fe.map(function(we){return W.tileID.getTilePoint(we)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ge[0].x,ge[0].y,0,0),this._boundsArray.emplaceBack(ge[1].x,ge[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ge[3].x,ge[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ge[2].x,ge[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},F.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var B=this.map.painter.context,W=B.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(B,this.image,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE)),this.tiles){var ge=this.tiles[fe];"loaded"!==ge.state&&(ge.state="loaded",ge.texture=this.texture)}}},F.prototype.loadTile=function(B,W){this.tileID&&this.tileID.equals(B.tileID.canonical)?(this.tiles[String(B.tileID.wrap)]=B,B.buckets={},W(null)):(B.state="errored",W(null))},F.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},F.prototype.hasTransition=function(){return!1},F}(e.Evented),J=function(O){function F(B,W,fe,ge){O.call(this,B,W,fe,ge),this.roundZoom=!0,this.type="video",this.options=W}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.load=function(){var B=this;this._loaded=!1;var W=this.options;this.urls=[];for(var fe=0,ge=W.urls;fe<ge.length;fe+=1)this.urls.push(this.map._requestManager.transformRequest(ge[fe],e.ResourceType.Source).url);e.getVideo(this.urls,function(Ee,Pe){B._loaded=!0,Ee?B.fire(new e.ErrorEvent(Ee)):Pe&&(B.video=Pe,B.video.loop=!0,B.video.addEventListener("playing",function(){B.map.triggerRepaint()}),B.map&&B.video.play(),B._finishLoading())})},F.prototype.pause=function(){this.video&&this.video.pause()},F.prototype.play=function(){this.video&&this.video.play()},F.prototype.seek=function(B){if(this.video){var W=this.video.seekable;B<W.start(0)||B>W.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+W.start(0)+" and "+W.end(0)+"-second mark."))):this.video.currentTime=B}},F.prototype.getVideo=function(){return this.video},F.prototype.onAdd=function(B){this.map||(this.map=B,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},F.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var B=this.map.painter.context,W=B.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=B.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE),W.texSubImage2D(W.TEXTURE_2D,0,0,0,W.RGBA,W.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(B,this.video,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE)),this.tiles){var ge=this.tiles[fe];"loaded"!==ge.state&&(ge.state="loaded",ge.texture=this.texture)}}},F.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},F.prototype.hasTransition=function(){return this.video&&!this.video.paused},F}(X),se=function(O){function F(B,W,fe,ge){O.call(this,B,W,fe,ge),W.coordinates?Array.isArray(W.coordinates)&&4===W.coordinates.length&&!W.coordinates.some(function(we){return!Array.isArray(we)||2!==we.length||we.some(function(Ee){return"number"!=typeof Ee})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'missing required property "coordinates"'))),W.animate&&"boolean"!=typeof W.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'optional "animate" property must be a boolean value'))),W.canvas?"string"==typeof W.canvas||W.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+B,null,'missing required property "canvas"'))),this.options=W,this.animate=void 0===W.animate||W.animate}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},F.prototype.getCanvas=function(){return this.canvas},F.prototype.onAdd=function(B){this.map=B,this.load(),this.canvas&&this.animate&&this.play()},F.prototype.onRemove=function(){this.pause()},F.prototype.prepare=function(){var B=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,B=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,B=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var W=this.map.painter.context,fe=W.gl;for(var ge in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,ne.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(B||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(W,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var we=this.tiles[ge];"loaded"!==we.state&&(we.state="loaded",we.texture=this.texture)}}},F.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},F.prototype.hasTransition=function(){return this._playing},F.prototype._hasInvalidDimensions=function(){for(var B=0,W=[this.canvas.width,this.canvas.height];B<W.length;B+=1){var fe=W[B];if(isNaN(fe)||fe<=0)return!0}return!1},F}(X),V={vector:z,raster:q,"raster-dem":G,geojson:K,video:J,image:X,canvas:se};function j(O,F){var B=e.identity([]);return e.translate(B,B,[1,1,0]),e.scale(B,B,[.5*O.width,.5*O.height,1]),e.multiply(B,B,O.calculatePosMatrix(F.toUnwrapped()))}function H(O,F,B,W,fe,ge){var we=function(Nt,Et,Zt){if(Nt)for(var qt=0,Jt=Nt;qt<Jt.length;qt+=1){var gn=Et[Jt[qt]];if(gn&&gn.source===Zt&&"fill-extrusion"===gn.type)return!0}else for(var On in Et){var Yn=Et[On];if(Yn.source===Zt&&"fill-extrusion"===Yn.type)return!0}return!1}(fe&&fe.layers,F,O.id),Ee=ge.maxPitchScaleFactor(),Pe=O.tilesIn(W,Ee,we);Pe.sort(oe);for(var $e=[],ot=0,pt=Pe;ot<pt.length;ot+=1){var Dt=pt[ot];$e.push({wrappedTileID:Dt.tileID.wrapped().key,queryResults:Dt.tile.queryRenderedFeatures(F,B,O._state,Dt.queryGeometry,Dt.cameraQueryGeometry,Dt.scale,fe,ge,Ee,j(O.transform,Dt.tileID))})}var zt=function(Nt){for(var Et={},Zt={},qt=0,Jt=Nt;qt<Jt.length;qt+=1){var gn=Jt[qt],On=gn.queryResults,Yn=gn.wrappedTileID,Hn=Zt[Yn]=Zt[Yn]||{};for(var vr in On)for(var gr=On[vr],Pr=Hn[vr]=Hn[vr]||{},Cr=Et[vr]=Et[vr]||[],ii=0,di=gr;ii<di.length;ii+=1){var Oi=di[ii];Pr[Oi.featureIndex]||(Pr[Oi.featureIndex]=!0,Cr.push(Oi))}}return Et}($e);for(var Pt in zt)zt[Pt].forEach(function(Nt){var Et=Nt.feature,Zt=O.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=Zt});return zt}function oe(O,F){var B=O.tileID,W=F.tileID;return B.overscaledZ-W.overscaledZ||B.canonical.y-W.canonical.y||B.wrap-W.wrap||B.canonical.x-W.canonical.x}var U=function(O,F){this.max=O,this.onRemove=F,this.reset()};U.prototype.reset=function(){for(var O in this.data)for(var F=0,B=this.data[O];F<B.length;F+=1){var W=B[F];W.timeout&&clearTimeout(W.timeout),this.onRemove(W.value)}return this.data={},this.order=[],this},U.prototype.add=function(O,F,B){var W=this,fe=O.wrapped().key;void 0===this.data[fe]&&(this.data[fe]=[]);var ge={value:F,timeout:void 0};if(void 0!==B&&(ge.timeout=setTimeout(function(){W.remove(O,ge)},B)),this.data[fe].push(ge),this.order.push(fe),this.order.length>this.max){var we=this._getAndRemoveByKey(this.order[0]);we&&this.onRemove(we)}return this},U.prototype.has=function(O){return O.wrapped().key in this.data},U.prototype.getAndRemove=function(O){return this.has(O)?this._getAndRemoveByKey(O.wrapped().key):null},U.prototype._getAndRemoveByKey=function(O){var F=this.data[O].shift();return F.timeout&&clearTimeout(F.timeout),0===this.data[O].length&&delete this.data[O],this.order.splice(this.order.indexOf(O),1),F.value},U.prototype.getByKey=function(O){var F=this.data[O];return F?F[0].value:null},U.prototype.get=function(O){return this.has(O)?this.data[O.wrapped().key][0].value:null},U.prototype.remove=function(O,F){if(!this.has(O))return this;var B=O.wrapped().key,W=void 0===F?0:this.data[B].indexOf(F),fe=this.data[B][W];return this.data[B].splice(W,1),fe.timeout&&clearTimeout(fe.timeout),0===this.data[B].length&&delete this.data[B],this.onRemove(fe.value),this.order.splice(this.order.indexOf(B),1),this},U.prototype.setMaxSize=function(O){for(this.max=O;this.order.length>this.max;){var F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this},U.prototype.filter=function(O){var F=[];for(var B in this.data)for(var W=0,fe=this.data[B];W<fe.length;W+=1){var ge=fe[W];O(ge.value)||F.push(ge)}for(var we=0,Ee=F;we<Ee.length;we+=1){var Pe=Ee[we];this.remove(Pe.value.tileID,Pe)}};var te=function(O,F,B){this.context=O;var W=O.gl;this.buffer=W.createBuffer(),this.dynamicDraw=Boolean(B),this.context.unbindVAO(),O.bindElementBuffer.set(this.buffer),W.bufferData(W.ELEMENT_ARRAY_BUFFER,F.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete F.arrayBuffer};te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},te.prototype.updateData=function(O){var F=this.context.gl;this.context.unbindVAO(),this.bind(),F.bufferSubData(F.ELEMENT_ARRAY_BUFFER,0,O.arrayBuffer)},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ee={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},le=function(O,F,B,W){this.length=F.length,this.attributes=B,this.itemSize=F.bytesPerElement,this.dynamicDraw=W,this.context=O;var fe=O.gl;this.buffer=fe.createBuffer(),O.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,F.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete F.arrayBuffer};le.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},le.prototype.updateData=function(O){var F=this.context.gl;this.bind(),F.bufferSubData(F.ARRAY_BUFFER,0,O.arrayBuffer)},le.prototype.enableAttributes=function(O,F){for(var B=0;B<this.attributes.length;B++){var fe=F.attributes[this.attributes[B].name];void 0!==fe&&O.enableVertexAttribArray(fe)}},le.prototype.setVertexAttribPointers=function(O,F,B){for(var W=0;W<this.attributes.length;W++){var fe=this.attributes[W],ge=F.attributes[fe.name];void 0!==ge&&O.vertexAttribPointer(ge,fe.components,O[ee[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(B||0))}},le.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ce=function(O){this.gl=O.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ce.prototype.get=function(){return this.current},ce.prototype.set=function(O){},ce.prototype.getDefault=function(){return this.default},ce.prototype.setDefault=function(){this.set(this.default)};var pe=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return e.Color.transparent},F.prototype.set=function(B){var W=this.current;(B.r!==W.r||B.g!==W.g||B.b!==W.b||B.a!==W.a||this.dirty)&&(this.gl.clearColor(B.r,B.g,B.b,B.a),this.current=B,this.dirty=!1)},F}(ce),de=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return 1},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.clearDepth(B),this.current=B,this.dirty=!1)},F}(ce),be=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return 0},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.clearStencil(B),this.current=B,this.dirty=!1)},F}(ce),he=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return[!0,!0,!0,!0]},F.prototype.set=function(B){var W=this.current;(B[0]!==W[0]||B[1]!==W[1]||B[2]!==W[2]||B[3]!==W[3]||this.dirty)&&(this.gl.colorMask(B[0],B[1],B[2],B[3]),this.current=B,this.dirty=!1)},F}(ce),xe=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!0},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.depthMask(B),this.current=B,this.dirty=!1)},F}(ce),De=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return 255},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.stencilMask(B),this.current=B,this.dirty=!1)},F}(ce),Se=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},F.prototype.set=function(B){var W=this.current;(B.func!==W.func||B.ref!==W.ref||B.mask!==W.mask||this.dirty)&&(this.gl.stencilFunc(B.func,B.ref,B.mask),this.current=B,this.dirty=!1)},F}(ce),ke=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){var B=this.gl;return[B.KEEP,B.KEEP,B.KEEP]},F.prototype.set=function(B){var W=this.current;(B[0]!==W[0]||B[1]!==W[1]||B[2]!==W[2]||this.dirty)&&(this.gl.stencilOp(B[0],B[1],B[2]),this.current=B,this.dirty=!1)},F}(ce),Fe=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!1},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;B?W.enable(W.STENCIL_TEST):W.disable(W.STENCIL_TEST),this.current=B,this.dirty=!1}},F}(ce),ve=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return[0,1]},F.prototype.set=function(B){var W=this.current;(B[0]!==W[0]||B[1]!==W[1]||this.dirty)&&(this.gl.depthRange(B[0],B[1]),this.current=B,this.dirty=!1)},F}(ce),Te=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!1},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;B?W.enable(W.DEPTH_TEST):W.disable(W.DEPTH_TEST),this.current=B,this.dirty=!1}},F}(ce),Le=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return this.gl.LESS},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.depthFunc(B),this.current=B,this.dirty=!1)},F}(ce),Oe=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!1},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;B?W.enable(W.BLEND):W.disable(W.BLEND),this.current=B,this.dirty=!1}},F}(ce),Ne=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){var B=this.gl;return[B.ONE,B.ZERO]},F.prototype.set=function(B){var W=this.current;(B[0]!==W[0]||B[1]!==W[1]||this.dirty)&&(this.gl.blendFunc(B[0],B[1]),this.current=B,this.dirty=!1)},F}(ce),Be=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return e.Color.transparent},F.prototype.set=function(B){var W=this.current;(B.r!==W.r||B.g!==W.g||B.b!==W.b||B.a!==W.a||this.dirty)&&(this.gl.blendColor(B.r,B.g,B.b,B.a),this.current=B,this.dirty=!1)},F}(ce),He=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return this.gl.FUNC_ADD},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.blendEquation(B),this.current=B,this.dirty=!1)},F}(ce),Ve=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!1},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;B?W.enable(W.CULL_FACE):W.disable(W.CULL_FACE),this.current=B,this.dirty=!1}},F}(ce),it=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return this.gl.BACK},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.cullFace(B),this.current=B,this.dirty=!1)},F}(ce),ze=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return this.gl.CCW},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.frontFace(B),this.current=B,this.dirty=!1)},F}(ce),je=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.useProgram(B),this.current=B,this.dirty=!1)},F}(ce),qe=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return this.gl.TEXTURE0},F.prototype.set=function(B){(B!==this.current||this.dirty)&&(this.gl.activeTexture(B),this.current=B,this.dirty=!1)},F}(ce),Ye=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){var B=this.gl;return[0,0,B.drawingBufferWidth,B.drawingBufferHeight]},F.prototype.set=function(B){var W=this.current;(B[0]!==W[0]||B[1]!==W[1]||B[2]!==W[2]||B[3]!==W[3]||this.dirty)&&(this.gl.viewport(B[0],B[1],B[2],B[3]),this.current=B,this.dirty=!1)},F}(ce),ct=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.bindFramebuffer(W.FRAMEBUFFER,B),this.current=B,this.dirty=!1}},F}(ce),vt=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.bindRenderbuffer(W.RENDERBUFFER,B),this.current=B,this.dirty=!1}},F}(ce),wt=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.bindTexture(W.TEXTURE_2D,B),this.current=B,this.dirty=!1}},F}(ce),Ot=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.bindBuffer(W.ARRAY_BUFFER,B),this.current=B,this.dirty=!1}},F}(ce),St=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){var W=this.gl;W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,B),this.current=B,this.dirty=!1},F}(ce),ft=function(O){function F(B){O.call(this,B),this.vao=B.extVertexArrayObject}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F.prototype.set=function(B){this.vao&&(B!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(B),this.current=B,this.dirty=!1)},F}(ce),st=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return 4},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.pixelStorei(W.UNPACK_ALIGNMENT,B),this.current=B,this.dirty=!1}},F}(ce),Ct=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!1},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),this.current=B,this.dirty=!1}},F}(ce),$t=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return!1},F.prototype.set=function(B){if(B!==this.current||this.dirty){var W=this.gl;W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,B),this.current=B,this.dirty=!1}},F}(ce),rn=function(O){function F(B,W){O.call(this,B),this.context=B,this.parent=W}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getDefault=function(){return null},F}(ce),hn=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.setDirty=function(){this.dirty=!0},F.prototype.set=function(B){if(B!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,B,0),this.current=B,this.dirty=!1}},F}(rn),cn=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.set=function(B){if(B!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.RENDERBUFFER,B),this.current=B,this.dirty=!1}},F}(rn),mn=function(O,F,B,W){this.context=O,this.width=F,this.height=B;var ge=this.framebuffer=O.gl.createFramebuffer();this.colorAttachment=new hn(O,ge),W&&(this.depthAttachment=new cn(O,ge))};mn.prototype.destroy=function(){var O=this.context.gl,F=this.colorAttachment.get();if(F&&O.deleteTexture(F),this.depthAttachment){var B=this.depthAttachment.get();B&&O.deleteRenderbuffer(B)}O.deleteFramebuffer(this.framebuffer)};var nn=function(O,F,B){this.func=O,this.mask=F,this.range=B};nn.ReadOnly=!1,nn.ReadWrite=!0,nn.disabled=new nn(519,nn.ReadOnly,[0,1]);var Xe=function(O,F,B,W,fe,ge){this.test=O,this.ref=F,this.mask=B,this.fail=W,this.depthFail=fe,this.pass=ge};Xe.disabled=new Xe({func:519,mask:0},0,0,7680,7680,7680);var nt=function(O,F,B){this.blendFunction=O,this.blendColor=F,this.mask=B};nt.disabled=new nt(nt.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),nt.unblended=new nt(nt.Replace,e.Color.transparent,[!0,!0,!0,!0]),nt.alphaBlended=new nt([1,771],e.Color.transparent,[!0,!0,!0,!0]);var ye=function(O,F,B){this.enable=O,this.mode=F,this.frontFace=B};ye.disabled=new ye(!1,1029,2305),ye.backCCW=new ye(!0,1029,2305);var Ce=function(O){this.gl=O,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new pe(this),this.clearDepth=new de(this),this.clearStencil=new be(this),this.colorMask=new he(this),this.depthMask=new xe(this),this.stencilMask=new De(this),this.stencilFunc=new Se(this),this.stencilOp=new ke(this),this.stencilTest=new Fe(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Le(this),this.blend=new Oe(this),this.blendFunc=new Ne(this),this.blendColor=new Be(this),this.blendEquation=new He(this),this.cullFace=new Ve(this),this.cullFaceSide=new it(this),this.frontFace=new ze(this),this.program=new je(this),this.activeTexture=new qe(this),this.viewport=new Ye(this),this.bindFramebuffer=new ct(this),this.bindRenderbuffer=new vt(this),this.bindTexture=new wt(this),this.bindVertexBuffer=new Ot(this),this.bindElementBuffer=new St(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ft(this),this.pixelStoreUnpack=new st(this),this.pixelStoreUnpackPremultiplyAlpha=new Ct(this),this.pixelStoreUnpackFlipY=new $t(this),this.extTextureFilterAnisotropic=O.getExtension("EXT_texture_filter_anisotropic")||O.getExtension("MOZ_EXT_texture_filter_anisotropic")||O.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=O.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=O.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(O.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=O.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=O.getExtension("EXT_disjoint_timer_query")};Ce.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ce.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ce.prototype.createIndexBuffer=function(O,F){return new te(this,O,F)},Ce.prototype.createVertexBuffer=function(O,F,B){return new le(this,O,F,B)},Ce.prototype.createRenderbuffer=function(O,F,B){var W=this.gl,fe=W.createRenderbuffer();return this.bindRenderbuffer.set(fe),W.renderbufferStorage(W.RENDERBUFFER,O,F,B),this.bindRenderbuffer.set(null),fe},Ce.prototype.createFramebuffer=function(O,F,B){return new mn(this,O,F,B)},Ce.prototype.clear=function(O){var F=O.color,B=O.depth,W=this.gl,fe=0;F&&(fe|=W.COLOR_BUFFER_BIT,this.clearColor.set(F),this.colorMask.set([!0,!0,!0,!0])),void 0!==B&&(fe|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(B),this.depthMask.set(!0)),W.clear(fe)},Ce.prototype.setCullFace=function(O){!1===O.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(O.mode),this.frontFace.set(O.frontFace))},Ce.prototype.setDepthMode=function(O){O.func!==this.gl.ALWAYS||O.mask?(this.depthTest.set(!0),this.depthFunc.set(O.func),this.depthMask.set(O.mask),this.depthRange.set(O.range)):this.depthTest.set(!1)},Ce.prototype.setStencilMode=function(O){O.test.func!==this.gl.ALWAYS||O.mask?(this.stencilTest.set(!0),this.stencilMask.set(O.mask),this.stencilOp.set([O.fail,O.depthFail,O.pass]),this.stencilFunc.set({func:O.test.func,ref:O.ref,mask:O.test.mask})):this.stencilTest.set(!1)},Ce.prototype.setColorMode=function(O){e.deepEqual(O.blendFunction,nt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(O.blendFunction),this.blendColor.set(O.blendColor)),this.colorMask.set(O.mask)},Ce.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ue=function(O){function F(B,W,fe){var ge=this;O.call(this),this.id=B,this.dispatcher=fe,this.on("data",function(we){"source"===we.dataType&&"metadata"===we.sourceDataType&&(ge._sourceLoaded=!0),ge._sourceLoaded&&!ge._paused&&"source"===we.dataType&&"content"===we.sourceDataType&&(ge.reload(),ge.transform&&ge.update(ge.transform))}),this.on("error",function(){ge._sourceErrored=!0}),this._source=function(we,Ee,Pe,$e){var ot=new V[Ee.type](we,Ee,Pe,$e);if(ot.id!==we)throw new Error("Expected Source id to be "+we+" instead of "+ot.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ot),ot}(B,W,fe,this),this._tiles={},this._cache=new U(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.onAdd=function(B){this.map=B,this._maxTileCacheSize=B?B._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(B)},F.prototype.onRemove=function(B){this._source&&this._source.onRemove&&this._source.onRemove(B)},F.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var B in this._tiles){var W=this._tiles[B];if("loaded"!==W.state&&"errored"!==W.state)return!1}return!0},F.prototype.getSource=function(){return this._source},F.prototype.pause=function(){this._paused=!0},F.prototype.resume=function(){if(this._paused){var B=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,B&&this.reload(),this.transform&&this.update(this.transform)}},F.prototype._loadTile=function(B,W){return this._source.loadTile(B,W)},F.prototype._unloadTile=function(B){if(this._source.unloadTile)return this._source.unloadTile(B,function(){})},F.prototype._abortTile=function(B){if(this._source.abortTile)return this._source.abortTile(B,function(){})},F.prototype.serialize=function(){return this._source.serialize()},F.prototype.prepare=function(B){for(var W in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[W];fe.upload(B),fe.prepare(this.map.style.imageManager)}},F.prototype.getIds=function(){return e.values(this._tiles).map(function(B){return B.tileID}).sort(Qe).map(function(B){return B.key})},F.prototype.getRenderableIds=function(B){var W=this,fe=[];for(var ge in this._tiles)this._isIdRenderable(ge,B)&&fe.push(this._tiles[ge]);return B?fe.sort(function(we,Ee){var Pe=we.tileID,$e=Ee.tileID,ot=new e.Point(Pe.canonical.x,Pe.canonical.y)._rotate(W.transform.angle),pt=new e.Point($e.canonical.x,$e.canonical.y)._rotate(W.transform.angle);return Pe.overscaledZ-$e.overscaledZ||pt.y-ot.y||pt.x-ot.x}).map(function(we){return we.tileID.key}):fe.map(function(we){return we.tileID}).sort(Qe).map(function(we){return we.key})},F.prototype.hasRenderableParent=function(B){var W=this.findLoadedParent(B,0);return!!W&&this._isIdRenderable(W.tileID.key)},F.prototype._isIdRenderable=function(B,W){return this._tiles[B]&&this._tiles[B].hasData()&&!this._coveredTiles[B]&&(W||!this._tiles[B].holdingForFade())},F.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var B in this._cache.reset(),this._tiles)"errored"!==this._tiles[B].state&&this._reloadTile(B,"reloading")},F.prototype._reloadTile=function(B,W){var fe=this._tiles[B];fe&&("loading"!==fe.state&&(fe.state=W),this._loadTile(fe,this._tileLoaded.bind(this,fe,B,W)))},F.prototype._tileLoaded=function(B,W,fe,ge){if(ge)return B.state="errored",void(404!==ge.status?this._source.fire(new e.ErrorEvent(ge,{tile:B})):this.update(this.transform));B.timeAdded=e.browser.now(),"expired"===fe&&(B.refreshedUponExpiration=!0),this._setTileReloadTimer(W,B),"raster-dem"===this.getSource().type&&B.dem&&this._backfillDEM(B),this._state.initializeTileState(B,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:B,coord:B.tileID}))},F.prototype._backfillDEM=function(B){for(var W=this.getRenderableIds(),fe=0;fe<W.length;fe++){var ge=W[fe];if(B.neighboringTiles&&B.neighboringTiles[ge]){var we=this.getTileByID(ge);Ee(B,we),Ee(we,B)}}function Ee(Pe,$e){Pe.needsHillshadePrepare=!0;var ot=$e.tileID.canonical.x-Pe.tileID.canonical.x,pt=$e.tileID.canonical.y-Pe.tileID.canonical.y,Dt=Math.pow(2,Pe.tileID.canonical.z),zt=$e.tileID.key;0===ot&&0===pt||Math.abs(pt)>1||(Math.abs(ot)>1&&(1===Math.abs(ot+Dt)?ot+=Dt:1===Math.abs(ot-Dt)&&(ot-=Dt)),$e.dem&&Pe.dem&&(Pe.dem.backfillBorder($e.dem,ot,pt),Pe.neighboringTiles&&Pe.neighboringTiles[zt]&&(Pe.neighboringTiles[zt].backfilled=!0)))}},F.prototype.getTile=function(B){return this.getTileByID(B.key)},F.prototype.getTileByID=function(B){return this._tiles[B]},F.prototype._retainLoadedChildren=function(B,W,fe,ge){for(var we in this._tiles){var Ee=this._tiles[we];if(!(ge[we]||!Ee.hasData()||Ee.tileID.overscaledZ<=W||Ee.tileID.overscaledZ>fe)){for(var Pe=Ee.tileID;Ee&&Ee.tileID.overscaledZ>W+1;){var $e=Ee.tileID.scaledTo(Ee.tileID.overscaledZ-1);(Ee=this._tiles[$e.key])&&Ee.hasData()&&(Pe=$e)}for(var ot=Pe;ot.overscaledZ>W;)if(B[(ot=ot.scaledTo(ot.overscaledZ-1)).key]){ge[Pe.key]=Pe;break}}}},F.prototype.findLoadedParent=function(B,W){if(B.key in this._loadedParentTiles){var fe=this._loadedParentTiles[B.key];return fe&&fe.tileID.overscaledZ>=W?fe:null}for(var ge=B.overscaledZ-1;ge>=W;ge--){var we=B.scaledTo(ge),Ee=this._getLoadedTile(we);if(Ee)return Ee}},F.prototype._getLoadedTile=function(B){var W=this._tiles[B.key];return W&&W.hasData()?W:this._cache.getByKey(B.wrapped().key)},F.prototype.updateCacheSize=function(B){var W=(Math.ceil(B.width/this._source.tileSize)+1)*(Math.ceil(B.height/this._source.tileSize)+1),fe=Math.floor(5*W),ge="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(ge)},F.prototype.handleWrapJump=function(B){var fe=Math.round((B-(void 0===this._prevLng?B:this._prevLng))/360);if(this._prevLng=B,fe){var ge={};for(var we in this._tiles){var Ee=this._tiles[we];Ee.tileID=Ee.tileID.unwrapTo(Ee.tileID.wrap+fe),ge[Ee.tileID.key]=Ee}for(var Pe in this._tiles=ge,this._timers)clearTimeout(this._timers[Pe]),delete this._timers[Pe];for(var $e in this._tiles)this._setTileReloadTimer($e,this._tiles[$e])}},F.prototype.update=function(B){var W=this;if(this.transform=B,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(B),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=B.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Hn){return new e.OverscaledTileID(Hn.canonical.z,Hn.wrap,Hn.canonical.z,Hn.canonical.x,Hn.canonical.y)}):(fe=B.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Hn){return W._source.hasTile(Hn)}))):fe=[];var ge=B.coveringZoomLevel(this._source),we=Math.max(ge-F.maxOverzooming,this._source.minzoom),Ee=Math.max(ge+F.maxUnderzooming,this._source.minzoom),Pe=this._updateRetainedTiles(fe,ge);if(rt(this._source.type)){for(var $e={},ot={},pt=0,Dt=Object.keys(Pe);pt<Dt.length;pt+=1){var zt=Dt[pt],Pt=Pe[zt],Nt=this._tiles[zt];if(Nt&&!(Nt.fadeEndTime&&Nt.fadeEndTime<=e.browser.now())){var Et=this.findLoadedParent(Pt,we);Et&&(this._addTile(Et.tileID),$e[Et.tileID.key]=Et.tileID),ot[zt]=Pt}}for(var Zt in this._retainLoadedChildren(ot,ge,Ee,Pe),$e)Pe[Zt]||(this._coveredTiles[Zt]=!0,Pe[Zt]=$e[Zt])}for(var qt in Pe)this._tiles[qt].clearFadeHold();for(var Jt=0,gn=e.keysDifference(this._tiles,Pe);Jt<gn.length;Jt+=1){var On=gn[Jt],Yn=this._tiles[On];Yn.hasSymbolBuckets&&!Yn.holdingForFade()?Yn.setHoldDuration(this.map._fadeDuration):Yn.hasSymbolBuckets&&!Yn.symbolFadeFinished()||this._removeTile(On)}this._updateLoadedParentTileCache()}},F.prototype.releaseSymbolFadeTiles=function(){for(var B in this._tiles)this._tiles[B].holdingForFade()&&this._removeTile(B)},F.prototype._updateRetainedTiles=function(B,W){for(var fe={},ge={},we=Math.max(W-F.maxOverzooming,this._source.minzoom),Ee=Math.max(W+F.maxUnderzooming,this._source.minzoom),Pe={},$e=0,ot=B;$e<ot.length;$e+=1){var pt=ot[$e],Dt=this._addTile(pt);fe[pt.key]=pt,Dt.hasData()||W<this._source.maxzoom&&(Pe[pt.key]=pt)}this._retainLoadedChildren(Pe,W,Ee,fe);for(var zt=0,Pt=B;zt<Pt.length;zt+=1){var Nt=Pt[zt],Et=this._tiles[Nt.key];if(!Et.hasData()){if(W+1>this._source.maxzoom){var Zt=Nt.children(this._source.maxzoom)[0],qt=this.getTile(Zt);if(qt&&qt.hasData()){fe[Zt.key]=Zt;continue}}else{var Jt=Nt.children(this._source.maxzoom);if(fe[Jt[0].key]&&fe[Jt[1].key]&&fe[Jt[2].key]&&fe[Jt[3].key])continue}for(var gn=Et.wasRequested(),On=Nt.overscaledZ-1;On>=we;--On){var Yn=Nt.scaledTo(On);if(ge[Yn.key]||(ge[Yn.key]=!0,!(Et=this.getTile(Yn))&&gn&&(Et=this._addTile(Yn)),Et&&(fe[Yn.key]=Yn,gn=Et.wasRequested(),Et.hasData())))break}}}return fe},F.prototype._updateLoadedParentTileCache=function(){for(var B in this._loadedParentTiles={},this._tiles){for(var W=[],fe=void 0,ge=this._tiles[B].tileID;ge.overscaledZ>0;){if(ge.key in this._loadedParentTiles){fe=this._loadedParentTiles[ge.key];break}W.push(ge.key);var we=ge.scaledTo(ge.overscaledZ-1);if(fe=this._getLoadedTile(we))break;ge=we}for(var Ee=0,Pe=W;Ee<Pe.length;Ee+=1)this._loadedParentTiles[Pe[Ee]]=fe}},F.prototype._addTile=function(B){var W=this._tiles[B.key];if(W)return W;(W=this._cache.getAndRemove(B))&&(this._setTileReloadTimer(B.key,W),W.tileID=B,this._state.initializeTileState(W,this.map?this.map.painter:null),this._cacheTimers[B.key]&&(clearTimeout(this._cacheTimers[B.key]),delete this._cacheTimers[B.key],this._setTileReloadTimer(B.key,W)));var fe=Boolean(W);return fe||(W=new e.Tile(B,this._source.tileSize*B.overscaleFactor()),this._loadTile(W,this._tileLoaded.bind(this,W,B.key,W.state))),W?(W.uses++,this._tiles[B.key]=W,fe||this._source.fire(new e.Event("dataloading",{tile:W,coord:W.tileID,dataType:"source"})),W):null},F.prototype._setTileReloadTimer=function(B,W){var fe=this;B in this._timers&&(clearTimeout(this._timers[B]),delete this._timers[B]);var ge=W.getExpiryTimeout();ge&&(this._timers[B]=setTimeout(function(){fe._reloadTile(B,"expired"),delete fe._timers[B]},ge))},F.prototype._removeTile=function(B){var W=this._tiles[B];W&&(W.uses--,delete this._tiles[B],this._timers[B]&&(clearTimeout(this._timers[B]),delete this._timers[B]),W.uses>0||(W.hasData()&&"reloading"!==W.state?this._cache.add(W.tileID,W,W.getExpiryTimeout()):(W.aborted=!0,this._abortTile(W),this._unloadTile(W))))},F.prototype.clearTiles=function(){for(var B in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(B);this._cache.reset()},F.prototype.tilesIn=function(B,W,fe){var ge=this,we=[],Ee=this.transform;if(!Ee)return we;for(var Pe=fe?Ee.getCameraQueryGeometry(B):B,$e=B.map(function(On){return Ee.pointCoordinate(On)}),ot=Pe.map(function(On){return Ee.pointCoordinate(On)}),pt=this.getIds(),Dt=1/0,zt=1/0,Pt=-1/0,Nt=-1/0,Et=0,Zt=ot;Et<Zt.length;Et+=1){var qt=Zt[Et];Dt=Math.min(Dt,qt.x),zt=Math.min(zt,qt.y),Pt=Math.max(Pt,qt.x),Nt=Math.max(Nt,qt.y)}for(var Jt=function(On){var Yn=ge._tiles[pt[On]];if(!Yn.holdingForFade()){var Hn=Yn.tileID,vr=Math.pow(2,Ee.zoom-Yn.tileID.overscaledZ),gr=W*Yn.queryPadding*e.EXTENT/Yn.tileSize/vr,Pr=[Hn.getTilePoint(new e.MercatorCoordinate(Dt,zt)),Hn.getTilePoint(new e.MercatorCoordinate(Pt,Nt))];if(Pr[0].x-gr<e.EXTENT&&Pr[0].y-gr<e.EXTENT&&Pr[1].x+gr>=0&&Pr[1].y+gr>=0){var Cr=$e.map(function(di){return Hn.getTilePoint(di)}),ii=ot.map(function(di){return Hn.getTilePoint(di)});we.push({tile:Yn,tileID:Hn,queryGeometry:Cr,cameraQueryGeometry:ii,scale:vr})}}},gn=0;gn<pt.length;gn++)Jt(gn);return we},F.prototype.getVisibleCoordinates=function(B){for(var W=this,fe=this.getRenderableIds(B).map(function(Pe){return W._tiles[Pe].tileID}),ge=0,we=fe;ge<we.length;ge+=1){var Ee=we[ge];Ee.posMatrix=this.transform.calculatePosMatrix(Ee.toUnwrapped())}return fe},F.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(rt(this._source.type))for(var B in this._tiles){var W=this._tiles[B];if(void 0!==W.fadeEndTime&&W.fadeEndTime>=e.browser.now())return!0}return!1},F.prototype.setFeatureState=function(B,W,fe){this._state.updateState(B=B||"_geojsonTileLayer",W,fe)},F.prototype.removeFeatureState=function(B,W,fe){this._state.removeFeatureState(B=B||"_geojsonTileLayer",W,fe)},F.prototype.getFeatureState=function(B,W){return this._state.getState(B=B||"_geojsonTileLayer",W)},F.prototype.setDependencies=function(B,W,fe){var ge=this._tiles[B];ge&&ge.setDependencies(W,fe)},F.prototype.reloadTilesForDependencies=function(B,W){for(var fe in this._tiles)this._tiles[fe].hasDependency(B,W)&&this._reloadTile(fe,"reloading");this._cache.filter(function(ge){return!ge.hasDependency(B,W)})},F}(e.Evented);function Qe(O,F){var B=Math.abs(2*O.wrap)-+(O.wrap<0),W=Math.abs(2*F.wrap)-+(F.wrap<0);return O.overscaledZ-F.overscaledZ||W-B||F.canonical.y-O.canonical.y||F.canonical.x-O.canonical.x}function rt(O){return"raster"===O||"image"===O||"video"===O}function Ke(){return new e.window.Worker(me.workerUrl)}Ue.maxOverzooming=10,Ue.maxUnderzooming=3;var gt="mapboxgl_preloaded_worker_pool",mt=function(){this.active={}};mt.prototype.acquire=function(O){if(!this.workers)for(this.workers=[];this.workers.length<mt.workerCount;)this.workers.push(new Ke);return this.active[O]=!0,this.workers.slice()},mt.prototype.release=function(O){delete this.active[O],0===this.numActive()&&(this.workers.forEach(function(F){F.terminate()}),this.workers=null)},mt.prototype.isPreloaded=function(){return!!this.active[gt]},mt.prototype.numActive=function(){return Object.keys(this.active).length};var Lt,Vt=Math.floor(e.browser.hardwareConcurrency/2);function dt(){return Lt||(Lt=new mt),Lt}function bt(O,F){var B={};for(var W in O)"ref"!==W&&(B[W]=O[W]);return e.refProperties.forEach(function(fe){fe in F&&(B[fe]=F[fe])}),B}function Yt(O){O=O.slice();for(var F=Object.create(null),B=0;B<O.length;B++)F[O[B].id]=O[B];for(var W=0;W<O.length;W++)"ref"in O[W]&&(O[W]=bt(O[W],F[O[W].ref]));return O}mt.workerCount=Math.max(Math.min(Vt,6),1);var It={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(O,F,B){B.push({command:It.addSource,args:[O,F[O]]})}function Ie(O,F,B){F.push({command:It.removeSource,args:[O]}),B[O]=!0}function et(O,F,B,W){Ie(O,B,W),jt(O,F,B)}function ht(O,F,B){var W;for(W in O[B])if(O[B].hasOwnProperty(W)&&"data"!==W&&!e.deepEqual(O[B][W],F[B][W]))return!1;for(W in F[B])if(F[B].hasOwnProperty(W)&&"data"!==W&&!e.deepEqual(O[B][W],F[B][W]))return!1;return!0}function xt(O,F,B,W,fe,ge){var we;for(we in F=F||{},O=O||{})O.hasOwnProperty(we)&&(e.deepEqual(O[we],F[we])||B.push({command:ge,args:[W,we,F[we],fe]}));for(we in F)F.hasOwnProperty(we)&&!O.hasOwnProperty(we)&&(e.deepEqual(O[we],F[we])||B.push({command:ge,args:[W,we,F[we],fe]}))}function Rt(O){return O.id}function Xt(O,F){return O[F.id]=F,O}var Kt=function(O,F){this.reset(O,F)};Kt.prototype.reset=function(O,F){this.points=O||[],this._distances=[0];for(var B=1;B<this.points.length;B++)this._distances[B]=this._distances[B-1]+this.points[B].dist(this.points[B-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(F||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(O){if(1===this.points.length)return this.points[0];O=e.clamp(O,0,1);for(var F=1,B=this._distances[F],W=O*this.paddedLength+this.padding;B<W&&F<this._distances.length;)B=this._distances[++F];var fe=F-1,ge=this._distances[fe],we=B-ge,Ee=we>0?(W-ge)/we:0;return this.points[fe].mult(1-Ee).add(this.points[F].mult(Ee))};var kn=function(O,F,B){var W=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(O/B),this.yCellCount=Math.ceil(F/B);for(var ge=0;ge<this.xCellCount*this.yCellCount;ge++)W.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=O,this.height=F,this.xScale=this.xCellCount/O,this.yScale=this.yCellCount/F,this.boxUid=0,this.circleUid=0};function Vn(O,F,B,W,fe){var ge=e.create();return F?(e.scale(ge,ge,[1/fe,1/fe,1]),B||e.rotateZ(ge,ge,W.angle)):e.multiply(ge,W.labelPlaneMatrix,O),ge}function Tn(O,F,B,W,fe){if(F){var ge=e.clone(O);return e.scale(ge,ge,[fe,fe,1]),B||e.rotateZ(ge,ge,-W.angle),ge}return W.glCoordMatrix}function sn(O,F){var B=[O.x,O.y,0,1];Wr(B,B,F);var W=B[3];return{point:new e.Point(B[0]/W,B[1]/W),signedDistanceFromCamera:W}}function fn(O,F){return.5+O/F*.5}function dn(O,F){var B=O[0]/O[3],W=O[1]/O[3];return B>=-F[0]&&B<=F[0]&&W>=-F[1]&&W<=F[1]}function Mn(O,F,B,W,fe,ge,we,Ee){var Pe=W?O.textSizeData:O.iconSizeData,$e=e.evaluateSizeForZoom(Pe,B.transform.zoom),ot=[256/B.width*2+1,256/B.height*2+1],pt=W?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;pt.clear();for(var Dt=O.lineVertexArray,zt=W?O.text.placedSymbolArray:O.icon.placedSymbolArray,Pt=B.transform.width/B.transform.height,Nt=!1,Et=0;Et<zt.length;Et++){var Zt=zt.get(Et);if(Zt.hidden||Zt.writingMode===e.WritingMode.vertical&&!Nt)yr(Zt.numGlyphs,pt);else{Nt=!1;var qt=[Zt.anchorX,Zt.anchorY,0,1];if(e.transformMat4(qt,qt,F),dn(qt,ot)){var gn=fn(B.transform.cameraToCenterDistance,qt[3]),On=e.evaluateSizeForFeature(Pe,$e,Zt),Yn=we?On/gn:On*gn,Hn=new e.Point(Zt.anchorX,Zt.anchorY),vr=sn(Hn,fe).point,gr={},Pr=er(Zt,Yn,!1,Ee,F,fe,ge,O.glyphOffsetArray,Dt,pt,vr,Hn,gr,Pt);Nt=Pr.useVertical,(Pr.notEnoughRoom||Nt||Pr.needsFlipping&&er(Zt,Yn,!0,Ee,F,fe,ge,O.glyphOffsetArray,Dt,pt,vr,Hn,gr,Pt).notEnoughRoom)&&yr(Zt.numGlyphs,pt)}else yr(Zt.numGlyphs,pt)}}W?O.text.dynamicLayoutVertexBuffer.updateData(pt):O.icon.dynamicLayoutVertexBuffer.updateData(pt)}function En(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot){var pt=Ee.glyphStartIndex+Ee.numGlyphs,Dt=Ee.lineStartIndex,zt=Ee.lineStartIndex+Ee.lineLength,Pt=F.getoffsetX(Ee.glyphStartIndex),Nt=F.getoffsetX(pt-1),Et=mr(O*Pt,B,W,fe,ge,we,Ee.segment,Dt,zt,Pe,$e,ot);if(!Et)return null;var Zt=mr(O*Nt,B,W,fe,ge,we,Ee.segment,Dt,zt,Pe,$e,ot);return Zt?{first:Et,last:Zt}:null}function jn(O,F,B,W){return O===e.WritingMode.horizontal&&Math.abs(B.y-F.y)>Math.abs(B.x-F.x)*W?{useVertical:!0}:(O===e.WritingMode.vertical?F.y<B.y:F.x>B.x)?{needsFlipping:!0}:null}function er(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot,pt,Dt,zt){var Pt,Nt=F/24,Et=O.lineOffsetX*Nt,Zt=O.lineOffsetY*Nt;if(O.numGlyphs>1){var qt=O.glyphStartIndex+O.numGlyphs,Jt=O.lineStartIndex,gn=O.lineStartIndex+O.lineLength,On=En(Nt,Ee,Et,Zt,B,ot,pt,O,Pe,ge,Dt);if(!On)return{notEnoughRoom:!0};var Yn=sn(On.first.point,we).point,Hn=sn(On.last.point,we).point;if(W&&!B){var vr=jn(O.writingMode,Yn,Hn,zt);if(vr)return vr}Pt=[On.first];for(var gr=O.glyphStartIndex+1;gr<qt-1;gr++)Pt.push(mr(Nt*Ee.getoffsetX(gr),Et,Zt,B,ot,pt,O.segment,Jt,gn,Pe,ge,Dt));Pt.push(On.last)}else{if(W&&!B){var Pr=sn(pt,fe).point,Cr=O.lineStartIndex+O.segment+1,ii=new e.Point(Pe.getx(Cr),Pe.gety(Cr)),di=sn(ii,fe),Oi=di.signedDistanceFromCamera>0?di.point:nr(pt,ii,Pr,1,fe),ur=jn(O.writingMode,Pr,Oi,zt);if(ur)return ur}var Gr=mr(Nt*Ee.getoffsetX(O.glyphStartIndex),Et,Zt,B,ot,pt,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,Pe,ge,Dt);if(!Gr)return{notEnoughRoom:!0};Pt=[Gr]}for(var hi=0,si=Pt;hi<si.length;hi+=1){var wi=si[hi];e.addDynamicAttributes($e,wi.point,wi.angle)}return{}}function nr(O,F,B,W,fe){var ge=sn(O.add(O.sub(F)._unit()),fe).point,we=B.sub(ge);return B.add(we._mult(W/we.mag()))}function mr(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot,pt){var Dt=W?O-F:O+F,zt=Dt>0?1:-1,Pt=0;W&&(zt*=-1,Pt=Math.PI),zt<0&&(Pt+=Math.PI);for(var Nt=zt>0?Ee+we:Ee+we+1,Et=fe,Zt=fe,qt=0,Jt=0,gn=Math.abs(Dt),On=[];qt+Jt<=gn;){if((Nt+=zt)<Ee||Nt>=Pe)return null;if(Zt=Et,On.push(Et),void 0===(Et=pt[Nt])){var Yn=new e.Point($e.getx(Nt),$e.gety(Nt)),Hn=sn(Yn,ot);if(Hn.signedDistanceFromCamera>0)Et=pt[Nt]=Hn.point;else{var vr=Nt-zt;Et=nr(0===qt?ge:new e.Point($e.getx(vr),$e.gety(vr)),Yn,Zt,gn-qt+1,ot)}}qt+=Jt,Jt=Zt.dist(Et)}var gr=(gn-qt)/Jt,Pr=Et.sub(Zt),Cr=Pr.mult(gr)._add(Zt);Cr._add(Pr._unit()._perp()._mult(B*zt));var ii=Pt+Math.atan2(Et.y-Zt.y,Et.x-Zt.x);return On.push(Cr),{point:Cr,angle:ii,path:On}}kn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},kn.prototype.insert=function(O,F,B,W,fe){this._forEachCell(F,B,W,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(O),this.bboxes.push(F),this.bboxes.push(B),this.bboxes.push(W),this.bboxes.push(fe)},kn.prototype.insertCircle=function(O,F,B,W){this._forEachCell(F-W,B-W,F+W,B+W,this._insertCircleCell,this.circleUid++),this.circleKeys.push(O),this.circles.push(F),this.circles.push(B),this.circles.push(W)},kn.prototype._insertBoxCell=function(O,F,B,W,fe,ge){this.boxCells[fe].push(ge)},kn.prototype._insertCircleCell=function(O,F,B,W,fe,ge){this.circleCells[fe].push(ge)},kn.prototype._query=function(O,F,B,W,fe,ge){if(B<0||O>this.width||W<0||F>this.height)return!fe&&[];var we=[];if(O<=0&&F<=0&&this.width<=B&&this.height<=W){if(fe)return!0;for(var Ee=0;Ee<this.boxKeys.length;Ee++)we.push({key:this.boxKeys[Ee],x1:this.bboxes[4*Ee],y1:this.bboxes[4*Ee+1],x2:this.bboxes[4*Ee+2],y2:this.bboxes[4*Ee+3]});for(var Pe=0;Pe<this.circleKeys.length;Pe++){var $e=this.circles[3*Pe],ot=this.circles[3*Pe+1],pt=this.circles[3*Pe+2];we.push({key:this.circleKeys[Pe],x1:$e-pt,y1:ot-pt,x2:$e+pt,y2:ot+pt})}return ge?we.filter(ge):we}return this._forEachCell(O,F,B,W,this._queryCell,we,{hitTest:fe,seenUids:{box:{},circle:{}}},ge),fe?we.length>0:we},kn.prototype._queryCircle=function(O,F,B,W,fe){var ge=O-B,we=O+B,Ee=F-B,Pe=F+B;if(we<0||ge>this.width||Pe<0||Ee>this.height)return!W&&[];var $e=[];return this._forEachCell(ge,Ee,we,Pe,this._queryCellCircle,$e,{hitTest:W,circle:{x:O,y:F,radius:B},seenUids:{box:{},circle:{}}},fe),W?$e.length>0:$e},kn.prototype.query=function(O,F,B,W,fe){return this._query(O,F,B,W,!1,fe)},kn.prototype.hitTest=function(O,F,B,W,fe){return this._query(O,F,B,W,!0,fe)},kn.prototype.hitTestCircle=function(O,F,B,W){return this._queryCircle(O,F,B,!0,W)},kn.prototype._queryCell=function(O,F,B,W,fe,ge,we,Ee){var Pe=we.seenUids,$e=this.boxCells[fe];if(null!==$e)for(var ot=this.bboxes,pt=0,Dt=$e;pt<Dt.length;pt+=1){var zt=Dt[pt];if(!Pe.box[zt]){Pe.box[zt]=!0;var Pt=4*zt;if(O<=ot[Pt+2]&&F<=ot[Pt+3]&&B>=ot[Pt+0]&&W>=ot[Pt+1]&&(!Ee||Ee(this.boxKeys[zt]))){if(we.hitTest)return ge.push(!0),!0;ge.push({key:this.boxKeys[zt],x1:ot[Pt],y1:ot[Pt+1],x2:ot[Pt+2],y2:ot[Pt+3]})}}}var Nt=this.circleCells[fe];if(null!==Nt)for(var Et=this.circles,Zt=0,qt=Nt;Zt<qt.length;Zt+=1){var Jt=qt[Zt];if(!Pe.circle[Jt]){Pe.circle[Jt]=!0;var gn=3*Jt;if(this._circleAndRectCollide(Et[gn],Et[gn+1],Et[gn+2],O,F,B,W)&&(!Ee||Ee(this.circleKeys[Jt]))){if(we.hitTest)return ge.push(!0),!0;var On=Et[gn],Yn=Et[gn+1],Hn=Et[gn+2];ge.push({key:this.circleKeys[Jt],x1:On-Hn,y1:Yn-Hn,x2:On+Hn,y2:Yn+Hn})}}}},kn.prototype._queryCellCircle=function(O,F,B,W,fe,ge,we,Ee){var Pe=we.circle,$e=we.seenUids,ot=this.boxCells[fe];if(null!==ot)for(var pt=this.bboxes,Dt=0,zt=ot;Dt<zt.length;Dt+=1){var Pt=zt[Dt];if(!$e.box[Pt]){$e.box[Pt]=!0;var Nt=4*Pt;if(this._circleAndRectCollide(Pe.x,Pe.y,Pe.radius,pt[Nt+0],pt[Nt+1],pt[Nt+2],pt[Nt+3])&&(!Ee||Ee(this.boxKeys[Pt])))return ge.push(!0),!0}}var Et=this.circleCells[fe];if(null!==Et)for(var Zt=this.circles,qt=0,Jt=Et;qt<Jt.length;qt+=1){var gn=Jt[qt];if(!$e.circle[gn]){$e.circle[gn]=!0;var On=3*gn;if(this._circlesCollide(Zt[On],Zt[On+1],Zt[On+2],Pe.x,Pe.y,Pe.radius)&&(!Ee||Ee(this.circleKeys[gn])))return ge.push(!0),!0}}},kn.prototype._forEachCell=function(O,F,B,W,fe,ge,we,Ee){for(var Pe=this._convertToXCellCoord(O),$e=this._convertToYCellCoord(F),ot=this._convertToXCellCoord(B),pt=this._convertToYCellCoord(W),Dt=Pe;Dt<=ot;Dt++)for(var zt=$e;zt<=pt;zt++)if(fe.call(this,O,F,B,W,this.xCellCount*zt+Dt,ge,we,Ee))return},kn.prototype._convertToXCellCoord=function(O){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(O*this.xScale)))},kn.prototype._convertToYCellCoord=function(O){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(O*this.yScale)))},kn.prototype._circlesCollide=function(O,F,B,W,fe,ge){var we=W-O,Ee=fe-F,Pe=B+ge;return Pe*Pe>we*we+Ee*Ee},kn.prototype._circleAndRectCollide=function(O,F,B,W,fe,ge,we){var Ee=(ge-W)/2,Pe=Math.abs(O-(W+Ee));if(Pe>Ee+B)return!1;var $e=(we-fe)/2,ot=Math.abs(F-(fe+$e));if(ot>$e+B)return!1;if(Pe<=Ee||ot<=$e)return!0;var pt=Pe-Ee,Dt=ot-$e;return pt*pt+Dt*Dt<=B*B};var Dr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yr(O,F){for(var B=0;B<O;B++){var W=F.length;F.resize(W+4),F.float32.set(Dr,3*W)}}function Wr(O,F,B){var W=F[0],fe=F[1];return O[0]=B[0]*W+B[4]*fe+B[12],O[1]=B[1]*W+B[5]*fe+B[13],O[3]=B[3]*W+B[7]*fe+B[15],O}var kr=function(O,F,B){void 0===F&&(F=new kn(O.width+200,O.height+200,25)),void 0===B&&(B=new kn(O.width+200,O.height+200,25)),this.transform=O,this.grid=F,this.ignoredGrid=B,this.pitchfactor=Math.cos(O._pitch)*O.cameraToCenterDistance,this.screenRightBoundary=O.width+100,this.screenBottomBoundary=O.height+100,this.gridRightBoundary=O.width+200,this.gridBottomBoundary=O.height+200};function Or(O,F,B){return F*(e.EXTENT/(O.tileSize*Math.pow(2,B-O.tileID.overscaledZ)))}kr.prototype.placeCollisionBox=function(O,F,B,W,fe){var ge=this.projectAndGetPerspectiveRatio(W,O.anchorPointX,O.anchorPointY),we=B*ge.perspectiveRatio,Ee=O.x1*we+ge.point.x,Pe=O.y1*we+ge.point.y,$e=O.x2*we+ge.point.x,ot=O.y2*we+ge.point.y;return!this.isInsideGrid(Ee,Pe,$e,ot)||!F&&this.grid.hitTest(Ee,Pe,$e,ot,fe)?{box:[],offscreen:!1}:{box:[Ee,Pe,$e,ot],offscreen:this.isOffscreen(Ee,Pe,$e,ot)}},kr.prototype.placeCollisionCircles=function(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot,pt,Dt){var zt=[],Pt=new e.Point(F.anchorX,F.anchorY),Nt=sn(Pt,ge),Et=fn(this.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),Zt=($e?fe/Et:fe*Et)/e.ONE_EM,qt=sn(Pt,we).point,Jt=En(Zt,W,F.lineOffsetX*Zt,F.lineOffsetY*Zt,!1,qt,Pt,F,B,we,{}),gn=!1,On=!1,Yn=!0;if(Jt){for(var Hn=.5*pt*Et+Dt,vr=new e.Point(-100,-100),gr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Pr=new Kt,Cr=Jt.first,ii=Jt.last,di=[],Oi=Cr.path.length-1;Oi>=1;Oi--)di.push(Cr.path[Oi]);for(var ur=1;ur<ii.path.length;ur++)di.push(ii.path[ur]);var Gr=2.5*Hn;if(Ee){var hi=di.map(function(as){return sn(as,Ee)});di=hi.some(function(as){return as.signedDistanceFromCamera<=0})?[]:hi.map(function(as){return as.point})}var si=[];if(di.length>0){for(var wi=di[0].clone(),Ii=di[0].clone(),Xi=1;Xi<di.length;Xi++)wi.x=Math.min(wi.x,di[Xi].x),wi.y=Math.min(wi.y,di[Xi].y),Ii.x=Math.max(Ii.x,di[Xi].x),Ii.y=Math.max(Ii.y,di[Xi].y);si=wi.x>=vr.x&&Ii.x<=gr.x&&wi.y>=vr.y&&Ii.y<=gr.y?[di]:Ii.x<vr.x||wi.x>gr.x||Ii.y<vr.y||wi.y>gr.y?[]:e.clipLine([di],vr.x,vr.y,gr.x,gr.y)}for(var bi=0,qi=si;bi<qi.length;bi+=1){Pr.reset(qi[bi],.25*Hn);var ta;ta=Pr.length<=.5*Hn?1:Math.ceil(Pr.paddedLength/Gr)+1;for(var Yi=0;Yi<ta;Yi++){var na=Yi/Math.max(ta-1,1),fa=Pr.lerp(na),Ha=fa.x+100,uo=fa.y+100;zt.push(Ha,uo,Hn,0);var fo=Ha-Hn,Fa=uo-Hn,ao=Ha+Hn,Ka=uo+Hn;if(Yn=Yn&&this.isOffscreen(fo,Fa,ao,Ka),On=On||this.isInsideGrid(fo,Fa,ao,Ka),!O&&this.grid.hitTestCircle(Ha,uo,Hn,ot)&&(gn=!0,!Pe))return{circles:[],offscreen:!1,collisionDetected:gn}}}}return{circles:!Pe&&gn||!On?[]:zt,offscreen:Yn,collisionDetected:gn}},kr.prototype.queryRenderedSymbols=function(O){if(0===O.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var F=[],B=1/0,W=1/0,fe=-1/0,ge=-1/0,we=0,Ee=O;we<Ee.length;we+=1){var Pe=Ee[we],$e=new e.Point(Pe.x+100,Pe.y+100);B=Math.min(B,$e.x),W=Math.min(W,$e.y),fe=Math.max(fe,$e.x),ge=Math.max(ge,$e.y),F.push($e)}for(var ot={},pt={},Dt=0,zt=this.grid.query(B,W,fe,ge).concat(this.ignoredGrid.query(B,W,fe,ge));Dt<zt.length;Dt+=1){var Pt=zt[Dt],Nt=Pt.key;if(void 0===ot[Nt.bucketInstanceId]&&(ot[Nt.bucketInstanceId]={}),!ot[Nt.bucketInstanceId][Nt.featureIndex]){var Et=[new e.Point(Pt.x1,Pt.y1),new e.Point(Pt.x2,Pt.y1),new e.Point(Pt.x2,Pt.y2),new e.Point(Pt.x1,Pt.y2)];e.polygonIntersectsPolygon(F,Et)&&(ot[Nt.bucketInstanceId][Nt.featureIndex]=!0,void 0===pt[Nt.bucketInstanceId]&&(pt[Nt.bucketInstanceId]=[]),pt[Nt.bucketInstanceId].push(Nt.featureIndex))}}return pt},kr.prototype.insertCollisionBox=function(O,F,B,W,fe){(F?this.ignoredGrid:this.grid).insert({bucketInstanceId:B,featureIndex:W,collisionGroupID:fe},O[0],O[1],O[2],O[3])},kr.prototype.insertCollisionCircles=function(O,F,B,W,fe){for(var ge=F?this.ignoredGrid:this.grid,we={bucketInstanceId:B,featureIndex:W,collisionGroupID:fe},Ee=0;Ee<O.length;Ee+=4)ge.insertCircle(we,O[Ee],O[Ee+1],O[Ee+2])},kr.prototype.projectAndGetPerspectiveRatio=function(O,F,B){var W=[F,B,0,1];return Wr(W,W,O),{point:new e.Point((W[0]/W[3]+1)/2*this.transform.width+100,(-W[1]/W[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/W[3]*.5}},kr.prototype.isOffscreen=function(O,F,B,W){return B<100||O>=this.screenRightBoundary||W<100||F>this.screenBottomBoundary},kr.prototype.isInsideGrid=function(O,F,B,W){return B>=0&&O<this.gridRightBoundary&&W>=0&&F<this.gridBottomBoundary},kr.prototype.getViewportMatrix=function(){var O=e.identity([]);return e.translate(O,O,[-100,-100,0]),O};var Hr=function(O,F,B,W){this.opacity=O?Math.max(0,Math.min(1,O.opacity+(O.placed?F:-F))):W&&B?1:0,this.placed=B};Hr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var oi=function(O,F,B,W,fe){this.text=new Hr(O?O.text:null,F,B,fe),this.icon=new Hr(O?O.icon:null,F,W,fe)};oi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Qn=function(O,F,B){this.text=O,this.icon=F,this.skipFade=B},Ir=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Tr=function(O,F,B,W,fe){this.bucketInstanceId=O,this.featureIndex=F,this.sourceLayerIndex=B,this.bucketIndex=W,this.tileID=fe},ar=function(O){this.crossSourceCollisions=O,this.maxGroupID=0,this.collisionGroups={}};function Jr(O,F,B,W,fe){var ge=e.getAnchorAlignment(O),we=-(ge.horizontalAlign-.5)*F,Ee=-(ge.verticalAlign-.5)*B,Pe=e.evaluateVariableOffset(O,W);return new e.Point(we+Pe[0]*fe,Ee+Pe[1]*fe)}function ri(O,F,B,W,fe,ge){var we=O.x1,Ee=O.x2,Pe=O.y1,$e=O.y2,ot=O.anchorPointX,pt=O.anchorPointY,Dt=new e.Point(F,B);return W&&Dt._rotate(fe?ge:-ge),{x1:we+Dt.x,y1:Pe+Dt.y,x2:Ee+Dt.x,y2:$e+Dt.y,anchorPointX:ot,anchorPointY:pt}}ar.prototype.get=function(O){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[O]){var F=++this.maxGroupID;this.collisionGroups[O]={ID:F,predicate:function(B){return B.collisionGroupID===F}}}return this.collisionGroups[O]};var Rr=function(O,F,B,W){this.transform=O.clone(),this.collisionIndex=new kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=F,this.retainedQueryData={},this.collisionGroups=new ar(B),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}};function Yr(O,F,B,W,fe){O.emplaceBack(F?1:0,B?1:0,W||0,fe||0),O.emplaceBack(F?1:0,B?1:0,W||0,fe||0),O.emplaceBack(F?1:0,B?1:0,W||0,fe||0),O.emplaceBack(F?1:0,B?1:0,W||0,fe||0)}Rr.prototype.getBucketParts=function(O,F,B,W){var fe=B.getBucket(F),ge=B.latestFeatureIndex;if(fe&&ge&&F.id===fe.layerIds[0]){var we=B.collisionBoxArray,Ee=fe.layers[0].layout,Pe=Math.pow(2,this.transform.zoom-B.tileID.overscaledZ),$e=B.tileSize/e.EXTENT,ot=this.transform.calculatePosMatrix(B.tileID.toUnwrapped()),pt="map"===Ee.get("text-pitch-alignment"),Dt="map"===Ee.get("text-rotation-alignment"),zt=Or(B,1,this.transform.zoom),Pt=Vn(ot,pt,Dt,this.transform,zt),Nt=null;if(pt){var Et=Tn(ot,pt,Dt,this.transform,zt);Nt=e.multiply([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[fe.bucketInstanceId]=new Tr(fe.bucketInstanceId,ge,fe.sourceLayerIndex,fe.index,B.tileID);var Zt={bucket:fe,layout:Ee,posMatrix:ot,textLabelPlaneMatrix:Pt,labelToScreenMatrix:Nt,scale:Pe,textPixelRatio:$e,holdingForFade:B.holdingForFade(),collisionBoxArray:we,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(W)for(var qt=0,Jt=fe.sortKeyRanges;qt<Jt.length;qt+=1){var gn=Jt[qt];O.push({sortKey:gn.sortKey,symbolInstanceStart:gn.symbolInstanceStart,symbolInstanceEnd:gn.symbolInstanceEnd,parameters:Zt})}else O.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:Zt})}},Rr.prototype.attemptAnchorPlacement=function(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot,pt,Dt,zt,Pt){var Nt,Et=[pt.textOffset0,pt.textOffset1],Zt=Jr(O,B,W,Et,fe),qt=this.collisionIndex.placeCollisionBox(ri(F,Zt.x,Zt.y,ge,we,this.transform.angle),ot,Ee,Pe,$e.predicate);if((!Pt||0!==this.collisionIndex.placeCollisionBox(ri(Pt,Zt.x,Zt.y,ge,we,this.transform.angle),ot,Ee,Pe,$e.predicate).box.length)&&qt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[pt.crossTileID].anchor),this.variableOffsets[pt.crossTileID]={textOffset:Et,width:B,height:W,anchor:O,textBoxScale:fe,prevAnchor:Nt},this.markUsedJustification(Dt,O,pt,zt),Dt.allowVerticalPlacement&&(this.markUsedOrientation(Dt,zt,pt),this.placedOrientations[pt.crossTileID]=zt),{shift:Zt,placedGlyphBoxes:qt}},Rr.prototype.placeLayerBucketPart=function(O,F,B){var W=this,fe=O.parameters,ge=fe.bucket,we=fe.layout,Ee=fe.posMatrix,Pe=fe.textLabelPlaneMatrix,$e=fe.labelToScreenMatrix,ot=fe.textPixelRatio,pt=fe.holdingForFade,Dt=fe.collisionBoxArray,zt=fe.partiallyEvaluatedTextSize,Pt=fe.collisionGroup,Nt=we.get("text-optional"),Et=we.get("icon-optional"),Zt=we.get("text-allow-overlap"),qt=we.get("icon-allow-overlap"),Jt="map"===we.get("text-rotation-alignment"),gn="map"===we.get("text-pitch-alignment"),On="none"!==we.get("icon-text-fit"),Yn="viewport-y"===we.get("symbol-z-order"),Hn=Zt&&(qt||!ge.hasIconData()||Et),vr=qt&&(Zt||!ge.hasTextData()||Nt);!ge.collisionArrays&&Dt&&ge.deserializeCollisionBoxes(Dt);var gr=function(ur,Gr){if(!F[ur.crossTileID])if(pt)W.placements[ur.crossTileID]=new Qn(!1,!1,!1);else{var hi,si=!1,wi=!1,Ii=!0,Xi=null,bi={box:null,offscreen:null},qi={box:null,offscreen:null},zi=null,ta=null,Yi=0,na=0,fa=0;Gr.textFeatureIndex?Yi=Gr.textFeatureIndex:ur.useRuntimeCollisionCircles&&(Yi=ur.featureIndex),Gr.verticalTextFeatureIndex&&(na=Gr.verticalTextFeatureIndex);var Ha=Gr.textBox;if(Ha){var uo=function(oo){var ps=e.WritingMode.horizontal;if(ge.allowVerticalPlacement&&!oo&&W.prevPlacement){var ms=W.prevPlacement.placedOrientations[ur.crossTileID];ms&&(W.placedOrientations[ur.crossTileID]=ms,W.markUsedOrientation(ge,ps=ms,ur))}return ps},fo=function(oo,ps){if(ge.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&Gr.verticalTextBox)for(var ms=0,uu=ge.writingModes;ms<uu.length&&(uu[ms]===e.WritingMode.vertical?(bi=ps(),qi=bi):bi=oo(),!(bi&&bi.box&&bi.box.length));ms+=1);else bi=oo()};if(we.get("text-variable-anchor")){var Fa=we.get("text-variable-anchor");if(W.prevPlacement&&W.prevPlacement.variableOffsets[ur.crossTileID]){var ao=W.prevPlacement.variableOffsets[ur.crossTileID];Fa.indexOf(ao.anchor)>0&&(Fa=Fa.filter(function(oo){return oo!==ao.anchor})).unshift(ao.anchor)}var Ka=function(oo,ps,ms){for(var uu=oo.x2-oo.x1,yd=oo.y2-oo.y1,Gs=ur.textBoxScale,Zu=On&&!qt?ps:null,Bc={box:[],offscreen:!1},_d=Zt?2*Fa.length:Fa.length,Bl=0;Bl<_d;++Bl){var gs=W.attemptAnchorPlacement(Fa[Bl%Fa.length],oo,uu,yd,Gs,Jt,gn,ot,Ee,Pt,Bl>=Fa.length,ur,ge,ms,Zu);if(gs&&(Bc=gs.placedGlyphBoxes)&&Bc.box&&Bc.box.length){si=!0,Xi=gs.shift;break}}return Bc};fo(function(){return Ka(Ha,Gr.iconBox,e.WritingMode.horizontal)},function(){var oo=Gr.verticalTextBox;return ge.allowVerticalPlacement&&!(bi&&bi.box&&bi.box.length)&&ur.numVerticalGlyphVertices>0&&oo?Ka(oo,Gr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),bi&&(si=bi.box,Ii=bi.offscreen);var as=uo(bi&&bi.box);if(!si&&W.prevPlacement){var Oo=W.prevPlacement.variableOffsets[ur.crossTileID];Oo&&(W.variableOffsets[ur.crossTileID]=Oo,W.markUsedJustification(ge,Oo.anchor,ur,as))}}else{var Ms=function(oo,ps){var ms=W.collisionIndex.placeCollisionBox(oo,Zt,ot,Ee,Pt.predicate);return ms&&ms.box&&ms.box.length&&(W.markUsedOrientation(ge,ps,ur),W.placedOrientations[ur.crossTileID]=ps),ms};fo(function(){return Ms(Ha,e.WritingMode.horizontal)},function(){var oo=Gr.verticalTextBox;return ge.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&oo?Ms(oo,e.WritingMode.vertical):{box:null,offscreen:null}}),uo(bi&&bi.box&&bi.box.length)}}if(si=(hi=bi)&&hi.box&&hi.box.length>0,Ii=hi&&hi.offscreen,ur.useRuntimeCollisionCircles){var wl=ge.text.placedSymbolArray.get(ur.centerJustifiedTextSymbolIndex),zl=e.evaluateSizeForFeature(ge.textSizeData,zt,wl),Nc=we.get("text-padding");zi=W.collisionIndex.placeCollisionCircles(Zt,wl,ge.lineVertexArray,ge.glyphOffsetArray,zl,Ee,Pe,$e,B,gn,Pt.predicate,ur.collisionCircleDiameter,Nc),si=Zt||zi.circles.length>0&&!zi.collisionDetected,Ii=Ii&&zi.offscreen}if(Gr.iconFeatureIndex&&(fa=Gr.iconFeatureIndex),Gr.iconBox){var gc=function(oo){var ps=On&&Xi?ri(oo,Xi.x,Xi.y,Jt,gn,W.transform.angle):oo;return W.collisionIndex.placeCollisionBox(ps,qt,ot,Ee,Pt.predicate)};wi=qi&&qi.box&&qi.box.length&&Gr.verticalIconBox?(ta=gc(Gr.verticalIconBox)).box.length>0:(ta=gc(Gr.iconBox)).box.length>0,Ii=Ii&&ta.offscreen}var os=Nt||0===ur.numHorizontalGlyphVertices&&0===ur.numVerticalGlyphVertices,Ql=Et||0===ur.numIconVertices;if(os||Ql?Ql?os||(wi=wi&&si):si=wi&&si:wi=si=wi&&si,si&&hi&&hi.box&&W.collisionIndex.insertCollisionBox(hi.box,we.get("text-ignore-placement"),ge.bucketInstanceId,qi&&qi.box&&na?na:Yi,Pt.ID),wi&&ta&&W.collisionIndex.insertCollisionBox(ta.box,we.get("icon-ignore-placement"),ge.bucketInstanceId,fa,Pt.ID),zi&&(si&&W.collisionIndex.insertCollisionCircles(zi.circles,we.get("text-ignore-placement"),ge.bucketInstanceId,Yi,Pt.ID),B)){var Fc=ge.bucketInstanceId,Js=W.collisionCircleArrays[Fc];void 0===Js&&(Js=W.collisionCircleArrays[Fc]=new Ir);for(var zc=0;zc<zi.circles.length;zc+=4)Js.circles.push(zi.circles[zc+0]),Js.circles.push(zi.circles[zc+1]),Js.circles.push(zi.circles[zc+2]),Js.circles.push(zi.collisionDetected?1:0)}W.placements[ur.crossTileID]=new Qn(si||Hn,wi||vr,Ii||ge.justReloaded),F[ur.crossTileID]=!0}};if(Yn)for(var Pr=ge.getSortedSymbolIndexes(this.transform.angle),Cr=Pr.length-1;Cr>=0;--Cr){var ii=Pr[Cr];gr(ge.symbolInstances.get(ii),ge.collisionArrays[ii])}else for(var di=O.symbolInstanceStart;di<O.symbolInstanceEnd;di++)gr(ge.symbolInstances.get(di),ge.collisionArrays[di]);if(B&&ge.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[ge.bucketInstanceId];e.invert(Oi.invProjMatrix,Ee),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}ge.justReloaded=!1},Rr.prototype.markUsedJustification=function(O,F,B,W){var fe;fe=W===e.WritingMode.vertical?B.verticalPlacedTextSymbolIndex:{left:B.leftJustifiedTextSymbolIndex,center:B.centerJustifiedTextSymbolIndex,right:B.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(F)];for(var we=0,Ee=[B.leftJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.rightJustifiedTextSymbolIndex,B.verticalPlacedTextSymbolIndex];we<Ee.length;we+=1){var Pe=Ee[we];Pe>=0&&(O.text.placedSymbolArray.get(Pe).crossTileID=fe>=0&&Pe!==fe?0:B.crossTileID)}},Rr.prototype.markUsedOrientation=function(O,F,B){for(var W=F===e.WritingMode.horizontal||F===e.WritingMode.horizontalOnly?F:0,fe=F===e.WritingMode.vertical?F:0,ge=0,we=[B.leftJustifiedTextSymbolIndex,B.centerJustifiedTextSymbolIndex,B.rightJustifiedTextSymbolIndex];ge<we.length;ge+=1)O.text.placedSymbolArray.get(we[ge]).placedOrientation=W;B.verticalPlacedTextSymbolIndex&&(O.text.placedSymbolArray.get(B.verticalPlacedTextSymbolIndex).placedOrientation=fe)},Rr.prototype.commit=function(O){this.commitTime=O,this.zoomAtLastRecencyCheck=this.transform.zoom;var F=this.prevPlacement,B=!1;this.prevZoomAdjustment=F?F.zoomAdjustment(this.transform.zoom):0;var W=F?F.symbolFadeChange(O):1,fe=F?F.opacities:{},ge=F?F.variableOffsets:{},we=F?F.placedOrientations:{};for(var Ee in this.placements){var Pe=this.placements[Ee],$e=fe[Ee];$e?(this.opacities[Ee]=new oi($e,W,Pe.text,Pe.icon),B=B||Pe.text!==$e.text.placed||Pe.icon!==$e.icon.placed):(this.opacities[Ee]=new oi(null,W,Pe.text,Pe.icon,Pe.skipFade),B=B||Pe.text||Pe.icon)}for(var ot in fe){var pt=fe[ot];if(!this.opacities[ot]){var Dt=new oi(pt,W,!1,!1);Dt.isHidden()||(this.opacities[ot]=Dt,B=B||pt.text.placed||pt.icon.placed)}}for(var zt in ge)this.variableOffsets[zt]||!this.opacities[zt]||this.opacities[zt].isHidden()||(this.variableOffsets[zt]=ge[zt]);for(var Pt in we)this.placedOrientations[Pt]||!this.opacities[Pt]||this.opacities[Pt].isHidden()||(this.placedOrientations[Pt]=we[Pt]);B?this.lastPlacementChangeTime=O:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=F?F.lastPlacementChangeTime:O)},Rr.prototype.updateLayerOpacities=function(O,F){for(var B={},W=0,fe=F;W<fe.length;W+=1){var ge=fe[W],we=ge.getBucket(O);we&&ge.latestFeatureIndex&&O.id===we.layerIds[0]&&this.updateBucketOpacities(we,B,ge.collisionBoxArray)}},Rr.prototype.updateBucketOpacities=function(O,F,B){var W=this;O.hasTextData()&&O.text.opacityVertexArray.clear(),O.hasIconData()&&O.icon.opacityVertexArray.clear(),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexArray.clear(),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexArray.clear();var fe=O.layers[0].layout,ge=new oi(null,0,!1,!1,!0),we=fe.get("text-allow-overlap"),Ee=fe.get("icon-allow-overlap"),Pe=fe.get("text-variable-anchor"),$e="map"===fe.get("text-rotation-alignment"),ot="map"===fe.get("text-pitch-alignment"),pt="none"!==fe.get("icon-text-fit"),Dt=new oi(null,0,we&&(Ee||!O.hasIconData()||fe.get("icon-optional")),Ee&&(we||!O.hasTextData()||fe.get("text-optional")),!0);!O.collisionArrays&&B&&(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData())&&O.deserializeCollisionBoxes(B);for(var zt=function(Zt,qt,Jt){for(var gn=0;gn<qt/4;gn++)Zt.opacityVertexArray.emplaceBack(Jt)},Pt=function(Zt){var qt=O.symbolInstances.get(Zt),Jt=qt.numHorizontalGlyphVertices,gn=qt.numVerticalGlyphVertices,On=qt.crossTileID,Hn=W.opacities[On];F[On]?Hn=ge:Hn||(W.opacities[On]=Hn=Dt),F[On]=!0;var gr=qt.numIconVertices>0,Pr=W.placedOrientations[qt.crossTileID],Cr=Pr===e.WritingMode.vertical,ii=Pr===e.WritingMode.horizontal||Pr===e.WritingMode.horizontalOnly;if(Jt>0||gn>0){var di=Jn(Hn.text);zt(O.text,Jt,Cr?Xn:di),zt(O.text,gn,ii?Xn:di);var Gr=Hn.text.isHidden();[qt.rightJustifiedTextSymbolIndex,qt.centerJustifiedTextSymbolIndex,qt.leftJustifiedTextSymbolIndex].forEach(function(fa){fa>=0&&(O.text.placedSymbolArray.get(fa).hidden=Gr||Cr?1:0)}),qt.verticalPlacedTextSymbolIndex>=0&&(O.text.placedSymbolArray.get(qt.verticalPlacedTextSymbolIndex).hidden=Gr||ii?1:0);var hi=W.variableOffsets[qt.crossTileID];hi&&W.markUsedJustification(O,hi.anchor,qt,Pr);var si=W.placedOrientations[qt.crossTileID];si&&(W.markUsedJustification(O,"left",qt,si),W.markUsedOrientation(O,si,qt))}if(gr){var wi=Jn(Hn.icon),Ii=!(pt&&qt.verticalPlacedIconSymbolIndex&&Cr);qt.placedIconSymbolIndex>=0&&(zt(O.icon,qt.numIconVertices,Ii?wi:Xn),O.icon.placedSymbolArray.get(qt.placedIconSymbolIndex).hidden=Hn.icon.isHidden()),qt.verticalPlacedIconSymbolIndex>=0&&(zt(O.icon,qt.numVerticalIconVertices,Ii?Xn:wi),O.icon.placedSymbolArray.get(qt.verticalPlacedIconSymbolIndex).hidden=Hn.icon.isHidden())}if(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData()){var qi=O.collisionArrays[Zt];if(qi){var zi=new e.Point(0,0);if(qi.textBox||qi.verticalTextBox){var ta=!0;if(Pe){var Yi=W.variableOffsets[On];Yi?(zi=Jr(Yi.anchor,Yi.width,Yi.height,Yi.textOffset,Yi.textBoxScale),$e&&zi._rotate(ot?W.transform.angle:-W.transform.angle)):ta=!1}qi.textBox&&Yr(O.textCollisionBox.collisionVertexArray,Hn.text.placed,!ta||Cr,zi.x,zi.y),qi.verticalTextBox&&Yr(O.textCollisionBox.collisionVertexArray,Hn.text.placed,!ta||ii,zi.x,zi.y)}var na=Boolean(!ii&&qi.verticalIconBox);qi.iconBox&&Yr(O.iconCollisionBox.collisionVertexArray,Hn.icon.placed,na,pt?zi.x:0,pt?zi.y:0),qi.verticalIconBox&&Yr(O.iconCollisionBox.collisionVertexArray,Hn.icon.placed,!na,pt?zi.x:0,pt?zi.y:0)}}},Nt=0;Nt<O.symbolInstances.length;Nt++)Pt(Nt);if(O.sortFeatures(this.transform.angle),this.retainedQueryData[O.bucketInstanceId]&&(this.retainedQueryData[O.bucketInstanceId].featureSortOrder=O.featureSortOrder),O.hasTextData()&&O.text.opacityVertexBuffer&&O.text.opacityVertexBuffer.updateData(O.text.opacityVertexArray),O.hasIconData()&&O.icon.opacityVertexBuffer&&O.icon.opacityVertexBuffer.updateData(O.icon.opacityVertexArray),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexBuffer&&O.iconCollisionBox.collisionVertexBuffer.updateData(O.iconCollisionBox.collisionVertexArray),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexBuffer&&O.textCollisionBox.collisionVertexBuffer.updateData(O.textCollisionBox.collisionVertexArray),O.bucketInstanceId in this.collisionCircleArrays){var Et=this.collisionCircleArrays[O.bucketInstanceId];O.placementInvProjMatrix=Et.invProjMatrix,O.placementViewportMatrix=Et.viewportMatrix,O.collisionCircleArray=Et.circles,delete this.collisionCircleArrays[O.bucketInstanceId]}},Rr.prototype.symbolFadeChange=function(O){return 0===this.fadeDuration?1:(O-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Rr.prototype.zoomAdjustment=function(O){return Math.max(0,(this.transform.zoom-O)/1.5)},Rr.prototype.hasTransitions=function(O){return this.stale||O-this.lastPlacementChangeTime<this.fadeDuration},Rr.prototype.stillRecent=function(O,F){var B=this.zoomAtLastRecencyCheck===F?1-this.zoomAdjustment(F):1;return this.zoomAtLastRecencyCheck=F,this.commitTime+this.fadeDuration*B>O},Rr.prototype.setStale=function(){this.stale=!0};var Ci=Math.pow(2,25),pn=Math.pow(2,24),Ln=Math.pow(2,17),Ut=Math.pow(2,16),xn=Math.pow(2,9),Sn=Math.pow(2,8),Kn=Math.pow(2,1);function Jn(O){if(0===O.opacity&&!O.placed)return 0;if(1===O.opacity&&O.placed)return 4294967295;var F=O.placed?1:0,B=Math.floor(127*O.opacity);return B*Ci+F*pn+B*Ln+F*Ut+B*xn+F*Sn+B*Kn+F}var Xn=0,Un=function(O){this._sortAcrossTiles="viewport-y"!==O.layout.get("symbol-z-order")&&void 0!==O.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Un.prototype.continuePlacement=function(O,F,B,W,fe){for(var ge=this._bucketParts;this._currentTileIndex<O.length;)if(F.getBucketParts(ge,W,O[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,fe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ge.sort(function(Pe,$e){return Pe.sortKey-$e.sortKey}));this._currentPartIndex<ge.length;)if(F.placeLayerBucketPart(ge[this._currentPartIndex],this._seenCrossTileIDs,B),this._currentPartIndex++,fe())return!0;return!1};var In=function(O,F,B,W,fe,ge,we){this.placement=new Rr(O,fe,ge,we),this._currentPlacementIndex=F.length-1,this._forceFullPlacement=B,this._showCollisionBoxes=W,this._done=!1};In.prototype.isDone=function(){return this._done},In.prototype.continuePlacement=function(O,F,B){for(var W=this,fe=e.browser.now(),ge=function(){var Pe=e.browser.now()-fe;return!W._forceFullPlacement&&Pe>2};this._currentPlacementIndex>=0;){var we=F[O[this._currentPlacementIndex]],Ee=this.placement.collisionIndex.transform.zoom;if("symbol"===we.type&&(!we.minzoom||we.minzoom<=Ee)&&(!we.maxzoom||we.maxzoom>Ee)){if(this._inProgressLayer||(this._inProgressLayer=new Un(we)),this._inProgressLayer.continuePlacement(B[we.source],this.placement,this._showCollisionBoxes,we,ge))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},In.prototype.commit=function(O){return this.placement.commit(O),this.placement};var Pn=512/e.EXTENT/2,Bn=function(O,F,B){this.tileID=O,this.indexedSymbolInstances={},this.bucketInstanceId=B;for(var W=0;W<F.length;W++){var fe=F.get(W),ge=fe.key;this.indexedSymbolInstances[ge]||(this.indexedSymbolInstances[ge]=[]),this.indexedSymbolInstances[ge].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,O)})}};Bn.prototype.getScaledCoordinates=function(O,F){var W=Pn/Math.pow(2,F.canonical.z-this.tileID.canonical.z);return{x:Math.floor((F.canonical.x*e.EXTENT+O.anchorX)*W),y:Math.floor((F.canonical.y*e.EXTENT+O.anchorY)*W)}},Bn.prototype.findMatches=function(O,F,B){for(var W=this.tileID.canonical.z<F.canonical.z?1:Math.pow(2,this.tileID.canonical.z-F.canonical.z),fe=0;fe<O.length;fe++){var ge=O.get(fe);if(!ge.crossTileID){var we=this.indexedSymbolInstances[ge.key];if(we)for(var Ee=this.getScaledCoordinates(ge,F),Pe=0,$e=we;Pe<$e.length;Pe+=1){var ot=$e[Pe];if(Math.abs(ot.coord.x-Ee.x)<=W&&Math.abs(ot.coord.y-Ee.y)<=W&&!B[ot.crossTileID]){B[ot.crossTileID]=!0,ge.crossTileID=ot.crossTileID;break}}}}};var Gn=function(){this.maxCrossTileID=0};Gn.prototype.generate=function(){return++this.maxCrossTileID};var or=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};or.prototype.handleWrapJump=function(O){var F=Math.round((O-this.lng)/360);if(0!==F)for(var B in this.indexes){var W=this.indexes[B],fe={};for(var ge in W){var we=W[ge];we.tileID=we.tileID.unwrapTo(we.tileID.wrap+F),fe[we.tileID.key]=we}this.indexes[B]=fe}this.lng=O},or.prototype.addBucket=function(O,F,B){if(this.indexes[O.overscaledZ]&&this.indexes[O.overscaledZ][O.key]){if(this.indexes[O.overscaledZ][O.key].bucketInstanceId===F.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(O.overscaledZ,this.indexes[O.overscaledZ][O.key])}for(var W=0;W<F.symbolInstances.length;W++)F.symbolInstances.get(W).crossTileID=0;this.usedCrossTileIDs[O.overscaledZ]||(this.usedCrossTileIDs[O.overscaledZ]={});var fe=this.usedCrossTileIDs[O.overscaledZ];for(var ge in this.indexes){var we=this.indexes[ge];if(Number(ge)>O.overscaledZ)for(var Ee in we){var Pe=we[Ee];Pe.tileID.isChildOf(O)&&Pe.findMatches(F.symbolInstances,O,fe)}else{var $e=we[O.scaledTo(Number(ge)).key];$e&&$e.findMatches(F.symbolInstances,O,fe)}}for(var ot=0;ot<F.symbolInstances.length;ot++){var pt=F.symbolInstances.get(ot);pt.crossTileID||(pt.crossTileID=B.generate(),fe[pt.crossTileID]=!0)}return void 0===this.indexes[O.overscaledZ]&&(this.indexes[O.overscaledZ]={}),this.indexes[O.overscaledZ][O.key]=new Bn(O,F.symbolInstances,F.bucketInstanceId),!0},or.prototype.removeBucketCrossTileIDs=function(O,F){for(var B in F.indexedSymbolInstances)for(var W=0,fe=F.indexedSymbolInstances[B];W<fe.length;W+=1)delete this.usedCrossTileIDs[O][fe[W].crossTileID]},or.prototype.removeStaleBuckets=function(O){var F=!1;for(var B in this.indexes){var W=this.indexes[B];for(var fe in W)O[W[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(B,W[fe]),delete W[fe],F=!0)}return F};var sr=function(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};sr.prototype.addLayer=function(O,F,B){var W=this.layerIndexes[O.id];void 0===W&&(W=this.layerIndexes[O.id]=new or);var fe=!1,ge={};W.handleWrapJump(B);for(var we=0,Ee=F;we<Ee.length;we+=1){var Pe=Ee[we],$e=Pe.getBucket(O);$e&&O.id===$e.layerIds[0]&&($e.bucketInstanceId||($e.bucketInstanceId=++this.maxBucketInstanceId),W.addBucket(Pe.tileID,$e,this.crossTileIDs)&&(fe=!0),ge[$e.bucketInstanceId]=!0)}return W.removeStaleBuckets(ge)&&(fe=!0),fe},sr.prototype.pruneUnusedLayers=function(O){var F={};for(var B in O.forEach(function(W){F[W]=!0}),this.layerIndexes)F[B]||delete this.layerIndexes[B]};var xr=function(O,F){return e.emitValidationErrors(O,F&&F.filter(function(B){return"source.canvas"!==B.identifier}))},_r=e.pick(It,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Nr=e.pick(It,["setCenter","setZoom","setBearing","setPitch"]),Fr=function(){var O={},F=e.styleSpec.$version;for(var B in e.styleSpec.$root){var W=e.styleSpec.$root[B];if(W.required){var fe;null!=(fe="version"===B?F:"array"===W.type?[]:{})&&(O[B]=fe)}}return O}(),Br=function(O){function F(B,W){var fe=this;void 0===W&&(W={}),O.call(this),this.map=B,this.dispatcher=new S(dt(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new M(B._requestManager,W.localIdeographFontFamily),this.lineAtlas=new L(256,512),this.crossTileSymbolIndex=new sr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ge=this;this._rtlTextPluginCallback=F.registerForPluginStateChange(function(we){ge.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:we.pluginStatus,pluginURL:we.pluginURL},function(Pe,$e){if(e.triggerPluginCompletionEvent(Pe),$e&&$e.every(function(pt){return pt}))for(var ot in ge.sourceCaches)ge.sourceCaches[ot].reload()})}),this.on("data",function(we){if("source"===we.dataType&&"metadata"===we.sourceDataType){var Ee=fe.sourceCaches[we.sourceId];if(Ee){var Pe=Ee.getSource();if(Pe&&Pe.vectorLayerIds)for(var $e in fe._layers){var ot=fe._layers[$e];ot.source===Pe.id&&fe._validateLayer(ot)}}}})}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.loadURL=function(B,W){var fe=this;void 0===W&&(W={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ge="boolean"==typeof W.validate?W.validate:!e.isMapboxURL(B);B=this.map._requestManager.normalizeStyleURL(B,W.accessToken);var we=this.map._requestManager.transformRequest(B,e.ResourceType.Style);this._request=e.getJSON(we,function(Ee,Pe){fe._request=null,Ee?fe.fire(new e.ErrorEvent(Ee)):Pe&&fe._load(Pe,ge)})},F.prototype.loadJSON=function(B,W){var fe=this;void 0===W&&(W={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){fe._request=null,fe._load(B,!1!==W.validate)})},F.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Fr,!1)},F.prototype._load=function(B,W){if(!W||!xr(this,e.validateStyle(B))){for(var fe in this._loaded=!0,this.stylesheet=B,B.sources)this.addSource(fe,B.sources[fe],{validate:!1});B.sprite?this._loadSprite(B.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(B.glyphs);var ge=Yt(this.stylesheet.layers);this._order=ge.map(function($e){return $e.id}),this._layers={},this._serializedLayers={};for(var we=0,Ee=ge;we<Ee.length;we+=1){var Pe=Ee[we];(Pe=e.createStyleLayer(Pe)).setEventedParent(this,{layer:{id:Pe.id}}),this._layers[Pe.id]=Pe,this._serializedLayers[Pe.id]=Pe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new P(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},F.prototype._loadSprite=function(B){var W=this;this._spriteRequest=function(fe,ge,we){var Ee,Pe,$e,ot=e.browser.devicePixelRatio>1?"@2x":"",pt=e.getJSON(ge.transformRequest(ge.normalizeSpriteURL(fe,ot,".json"),e.ResourceType.SpriteJSON),function(Pt,Nt){pt=null,$e||($e=Pt,Ee=Nt,zt())}),Dt=e.getImage(ge.transformRequest(ge.normalizeSpriteURL(fe,ot,".png"),e.ResourceType.SpriteImage),function(Pt,Nt){Dt=null,$e||($e=Pt,Pe=Nt,zt())});function zt(){if($e)we($e);else if(Ee&&Pe){var Pt=e.browser.getImageData(Pe),Nt={};for(var Et in Ee){var Zt=Ee[Et],qt=Zt.width,Jt=Zt.height,gn=Zt.x,On=Zt.y,Yn=Zt.sdf,Hn=Zt.pixelRatio,vr=Zt.stretchX,gr=Zt.stretchY,Pr=Zt.content,Cr=new e.RGBAImage({width:qt,height:Jt});e.RGBAImage.copy(Pt,Cr,{x:gn,y:On},{x:0,y:0},{width:qt,height:Jt}),Nt[Et]={data:Cr,pixelRatio:Hn,sdf:Yn,stretchX:vr,stretchY:gr,content:Pr}}we(null,Nt)}}return{cancel:function(){pt&&(pt.cancel(),pt=null),Dt&&(Dt.cancel(),Dt=null)}}}(B,this.map._requestManager,function(fe,ge){if(W._spriteRequest=null,fe)W.fire(new e.ErrorEvent(fe));else if(ge)for(var we in ge)W.imageManager.addImage(we,ge[we]);W.imageManager.setLoaded(!0),W._availableImages=W.imageManager.listImages(),W.dispatcher.broadcast("setImages",W._availableImages),W.fire(new e.Event("data",{dataType:"style"}))})},F.prototype._validateLayer=function(B){var W=this.sourceCaches[B.source];if(W){var fe=B.sourceLayer;if(fe){var ge=W.getSource();("geojson"===ge.type||ge.vectorLayerIds&&-1===ge.vectorLayerIds.indexOf(fe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+ge.id+'" as specified by style layer "'+B.id+'"')))}}},F.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var B in this.sourceCaches)if(!this.sourceCaches[B].loaded())return!1;return!!this.imageManager.isLoaded()},F.prototype._serializeLayers=function(B){for(var W=[],fe=0,ge=B;fe<ge.length;fe+=1){var Ee=this._layers[ge[fe]];"custom"!==Ee.type&&W.push(Ee.serialize())}return W},F.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var B in this.sourceCaches)if(this.sourceCaches[B].hasTransition())return!0;for(var W in this._layers)if(this._layers[W].hasTransition())return!0;return!1},F.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},F.prototype.update=function(B){if(this._loaded){var W=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),ge=Object.keys(this._removedLayers);for(var we in(fe.length||ge.length)&&this._updateWorkerLayers(fe,ge),this._updatedSources){var Ee=this._updatedSources[we];"reload"===Ee?this._reloadSource(we):"clear"===Ee&&this._clearSource(we)}for(var Pe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Pe].updateTransitions(B);this.light.updateTransitions(B),this._resetUpdates()}for(var $e in this.sourceCaches)this.sourceCaches[$e].used=!1;for(var ot=0,pt=this._order;ot<pt.length;ot+=1){var zt=this._layers[pt[ot]];zt.recalculate(B,this._availableImages),!zt.isHidden(B.zoom)&&zt.source&&(this.sourceCaches[zt.source].used=!0)}this.light.recalculate(B),this.z=B.zoom,W&&this.fire(new e.Event("data",{dataType:"style"}))}},F.prototype._updateTilesForChangedImages=function(){var B=Object.keys(this._changedImages);if(B.length){for(var W in this.sourceCaches)this.sourceCaches[W].reloadTilesForDependencies(["icons","patterns"],B);this._changedImages={}}},F.prototype._updateWorkerLayers=function(B,W){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(B),removedIds:W})},F.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},F.prototype.setState=function(B){var W=this;if(this._checkLoaded(),xr(this,e.validateStyle(B)))return!1;(B=e.clone$1(B)).layers=Yt(B.layers);var fe=function tn(O,F){if(!O)return[{command:It.setStyle,args:[F]}];var B=[];try{if(!e.deepEqual(O.version,F.version))return[{command:It.setStyle,args:[F]}];e.deepEqual(O.center,F.center)||B.push({command:It.setCenter,args:[F.center]}),e.deepEqual(O.zoom,F.zoom)||B.push({command:It.setZoom,args:[F.zoom]}),e.deepEqual(O.bearing,F.bearing)||B.push({command:It.setBearing,args:[F.bearing]}),e.deepEqual(O.pitch,F.pitch)||B.push({command:It.setPitch,args:[F.pitch]}),e.deepEqual(O.sprite,F.sprite)||B.push({command:It.setSprite,args:[F.sprite]}),e.deepEqual(O.glyphs,F.glyphs)||B.push({command:It.setGlyphs,args:[F.glyphs]}),e.deepEqual(O.transition,F.transition)||B.push({command:It.setTransition,args:[F.transition]}),e.deepEqual(O.light,F.light)||B.push({command:It.setLight,args:[F.light]});var W={},fe=[];!function(we,Ee,Pe,$e){var ot;for(ot in Ee=Ee||{},we=we||{})we.hasOwnProperty(ot)&&(Ee.hasOwnProperty(ot)||Ie(ot,Pe,$e));for(ot in Ee)Ee.hasOwnProperty(ot)&&(we.hasOwnProperty(ot)?e.deepEqual(we[ot],Ee[ot])||("geojson"===we[ot].type&&"geojson"===Ee[ot].type&&ht(we,Ee,ot)?Pe.push({command:It.setGeoJSONSourceData,args:[ot,Ee[ot].data]}):et(ot,Ee,Pe,$e)):jt(ot,Ee,Pe))}(O.sources,F.sources,fe,W);var ge=[];O.layers&&O.layers.forEach(function(we){W[we.source]?B.push({command:It.removeLayer,args:[we.id]}):ge.push(we)}),B=B.concat(fe),function(we,Ee,Pe){Ee=Ee||[];var $e,ot,pt,Dt,zt,Pt,Nt,Et=(we=we||[]).map(Rt),Zt=Ee.map(Rt),qt=we.reduce(Xt,{}),Jt=Ee.reduce(Xt,{}),gn=Et.slice(),On=Object.create(null);for($e=0,ot=0;$e<Et.length;$e++)Jt.hasOwnProperty(pt=Et[$e])?ot++:(Pe.push({command:It.removeLayer,args:[pt]}),gn.splice(gn.indexOf(pt,ot),1));for($e=0,ot=0;$e<Zt.length;$e++)gn[gn.length-1-$e]!==(pt=Zt[Zt.length-1-$e])&&(qt.hasOwnProperty(pt)?(Pe.push({command:It.removeLayer,args:[pt]}),gn.splice(gn.lastIndexOf(pt,gn.length-ot),1)):ot++,Pe.push({command:It.addLayer,args:[Jt[pt],Pt=gn[gn.length-$e]]}),gn.splice(gn.length-$e,0,pt),On[pt]=!0);for($e=0;$e<Zt.length;$e++)if(Dt=qt[pt=Zt[$e]],zt=Jt[pt],!On[pt]&&!e.deepEqual(Dt,zt))if(e.deepEqual(Dt.source,zt.source)&&e.deepEqual(Dt["source-layer"],zt["source-layer"])&&e.deepEqual(Dt.type,zt.type)){for(Nt in xt(Dt.layout,zt.layout,Pe,pt,null,It.setLayoutProperty),xt(Dt.paint,zt.paint,Pe,pt,null,It.setPaintProperty),e.deepEqual(Dt.filter,zt.filter)||Pe.push({command:It.setFilter,args:[pt,zt.filter]}),e.deepEqual(Dt.minzoom,zt.minzoom)&&e.deepEqual(Dt.maxzoom,zt.maxzoom)||Pe.push({command:It.setLayerZoomRange,args:[pt,zt.minzoom,zt.maxzoom]}),Dt)Dt.hasOwnProperty(Nt)&&"layout"!==Nt&&"paint"!==Nt&&"filter"!==Nt&&"metadata"!==Nt&&"minzoom"!==Nt&&"maxzoom"!==Nt&&(0===Nt.indexOf("paint.")?xt(Dt[Nt],zt[Nt],Pe,pt,Nt.slice(6),It.setPaintProperty):e.deepEqual(Dt[Nt],zt[Nt])||Pe.push({command:It.setLayerProperty,args:[pt,Nt,zt[Nt]]}));for(Nt in zt)zt.hasOwnProperty(Nt)&&!Dt.hasOwnProperty(Nt)&&"layout"!==Nt&&"paint"!==Nt&&"filter"!==Nt&&"metadata"!==Nt&&"minzoom"!==Nt&&"maxzoom"!==Nt&&(0===Nt.indexOf("paint.")?xt(Dt[Nt],zt[Nt],Pe,pt,Nt.slice(6),It.setPaintProperty):e.deepEqual(Dt[Nt],zt[Nt])||Pe.push({command:It.setLayerProperty,args:[pt,Nt,zt[Nt]]}))}else Pe.push({command:It.removeLayer,args:[pt]}),Pt=gn[gn.lastIndexOf(pt)+1],Pe.push({command:It.addLayer,args:[zt,Pt]})}(ge,F.layers,B)}catch(we){console.warn("Unable to compute style diff:",we),B=[{command:It.setStyle,args:[F]}]}return B}(this.serialize(),B).filter(function(we){return!(we.command in Nr)});if(0===fe.length)return!1;var ge=fe.filter(function(we){return!(we.command in _r)});if(ge.length>0)throw new Error("Unimplemented: "+ge.map(function(we){return we.command}).join(", ")+".");return fe.forEach(function(we){"setTransition"!==we.command&&W[we.command].apply(W,we.args)}),this.stylesheet=B,!0},F.prototype.addImage=function(B,W){if(this.getImage(B))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(B,W),this._availableImages=this.imageManager.listImages(),this._changedImages[B]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},F.prototype.updateImage=function(B,W){this.imageManager.updateImage(B,W)},F.prototype.getImage=function(B){return this.imageManager.getImage(B)},F.prototype.removeImage=function(B){if(!this.getImage(B))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(B),this._availableImages=this.imageManager.listImages(),this._changedImages[B]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},F.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},F.prototype.addSource=function(B,W,fe){var ge=this;if(void 0===fe&&(fe={}),this._checkLoaded(),void 0!==this.sourceCaches[B])throw new Error("There is already a source with this ID");if(!W.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(W).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(W.type)>=0&&this._validate(e.validateStyle.source,"sources."+B,W,null,fe))){this.map&&this.map._collectResourceTiming&&(W.collectResourceTiming=!0);var we=this.sourceCaches[B]=new Ue(B,W,this.dispatcher);we.style=this,we.setEventedParent(this,function(){return{isSourceLoaded:ge.loaded(),source:we.serialize(),sourceId:B}}),we.onAdd(this.map),this._changed=!0}},F.prototype.removeSource=function(B){if(this._checkLoaded(),void 0===this.sourceCaches[B])throw new Error("There is no source with this ID");for(var W in this._layers)if(this._layers[W].source===B)return this.fire(new e.ErrorEvent(new Error('Source "'+B+'" cannot be removed while layer "'+W+'" is using it.')));var fe=this.sourceCaches[B];delete this.sourceCaches[B],delete this._updatedSources[B],fe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:B})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},F.prototype.setGeoJSONSourceData=function(B,W){this._checkLoaded(),this.sourceCaches[B].getSource().setData(W),this._changed=!0},F.prototype.getSource=function(B){return this.sourceCaches[B]&&this.sourceCaches[B].getSource()},F.prototype.addLayer=function(B,W,fe){void 0===fe&&(fe={}),this._checkLoaded();var ge=B.id;if(this.getLayer(ge))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" already exists on this map')));else{var we;if("custom"===B.type){if(xr(this,e.validateCustomStyleLayer(B)))return;we=e.createStyleLayer(B)}else{if("object"==typeof B.source&&(this.addSource(ge,B.source),B=e.clone$1(B),B=e.extend(B,{source:ge})),this._validate(e.validateStyle.layer,"layers."+ge,B,{arrayIndex:-1},fe))return;we=e.createStyleLayer(B),this._validateLayer(we),we.setEventedParent(this,{layer:{id:ge}}),this._serializedLayers[we.id]=we.serialize()}var Ee=W?this._order.indexOf(W):this._order.length;if(W&&-1===Ee)this.fire(new e.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));else{if(this._order.splice(Ee,0,ge),this._layerOrderChanged=!0,this._layers[ge]=we,this._removedLayers[ge]&&we.source&&"custom"!==we.type){var Pe=this._removedLayers[ge];delete this._removedLayers[ge],Pe.type!==we.type?this._updatedSources[we.source]="clear":(this._updatedSources[we.source]="reload",this.sourceCaches[we.source].pause())}this._updateLayer(we),we.onAdd&&we.onAdd(this.map)}}},F.prototype.moveLayer=function(B,W){if(this._checkLoaded(),this._changed=!0,this._layers[B]){if(B!==W){var fe=this._order.indexOf(B);this._order.splice(fe,1);var ge=W?this._order.indexOf(W):this._order.length;W&&-1===ge?this.fire(new e.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.'))):(this._order.splice(ge,0,B),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be moved.")))},F.prototype.removeLayer=function(B){this._checkLoaded();var W=this._layers[B];if(W){W.setEventedParent(null);var fe=this._order.indexOf(B);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[B]=W,delete this._layers[B],delete this._serializedLayers[B],delete this._updatedLayers[B],delete this._updatedPaintProps[B],W.onRemove&&W.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be removed.")))},F.prototype.getLayer=function(B){return this._layers[B]},F.prototype.hasLayer=function(B){return B in this._layers},F.prototype.setLayerZoomRange=function(B,W,fe){this._checkLoaded();var ge=this.getLayer(B);ge?ge.minzoom===W&&ge.maxzoom===fe||(null!=W&&(ge.minzoom=W),null!=fe&&(ge.maxzoom=fe),this._updateLayer(ge)):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot have zoom extent.")))},F.prototype.setFilter=function(B,W,fe){void 0===fe&&(fe={}),this._checkLoaded();var ge=this.getLayer(B);if(ge){if(!e.deepEqual(ge.filter,W))return null==W?(ge.filter=void 0,void this._updateLayer(ge)):void(this._validate(e.validateStyle.filter,"layers."+ge.id+".filter",W,null,fe)||(ge.filter=e.clone$1(W),this._updateLayer(ge)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be filtered.")))},F.prototype.getFilter=function(B){return e.clone$1(this.getLayer(B).filter)},F.prototype.setLayoutProperty=function(B,W,fe,ge){void 0===ge&&(ge={}),this._checkLoaded();var we=this.getLayer(B);we?e.deepEqual(we.getLayoutProperty(W),fe)||(we.setLayoutProperty(W,fe,ge),this._updateLayer(we)):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be styled.")))},F.prototype.getLayoutProperty=function(B,W){var fe=this.getLayer(B);if(fe)return fe.getLayoutProperty(W);this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style.")))},F.prototype.setPaintProperty=function(B,W,fe,ge){void 0===ge&&(ge={}),this._checkLoaded();var we=this.getLayer(B);we?e.deepEqual(we.getPaintProperty(W),fe)||(we.setPaintProperty(W,fe,ge)&&this._updateLayer(we),this._changed=!0,this._updatedPaintProps[B]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+B+"' does not exist in the map's style and cannot be styled.")))},F.prototype.getPaintProperty=function(B,W){return this.getLayer(B).getPaintProperty(W)},F.prototype.setFeatureState=function(B,W){this._checkLoaded();var fe=B.source,ge=B.sourceLayer,we=this.sourceCaches[fe];if(void 0!==we){var Ee=we.getSource().type;"geojson"===Ee&&ge?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Ee||ge?(void 0===B.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),we.setFeatureState(ge,B.id,W)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},F.prototype.removeFeatureState=function(B,W){this._checkLoaded();var fe=B.source,ge=this.sourceCaches[fe];if(void 0!==ge){var we=ge.getSource().type,Ee="vector"===we?B.sourceLayer:void 0;"vector"!==we||Ee?W&&"string"!=typeof B.id&&"number"!=typeof B.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ge.removeFeatureState(Ee,B.id,W):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},F.prototype.getFeatureState=function(B){this._checkLoaded();var W=B.source,fe=B.sourceLayer,ge=this.sourceCaches[W];if(void 0!==ge){if("vector"!==ge.getSource().type||fe)return void 0===B.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ge.getFeatureState(fe,B.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+W+"' does not exist in the map's style.")))},F.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},F.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(B){return B.serialize()}),layers:this._serializeLayers(this._order)},function(B){return void 0!==B})},F.prototype._updateLayer=function(B){this._updatedLayers[B.id]=!0,B.source&&!this._updatedSources[B.source]&&"raster"!==this.sourceCaches[B.source].getSource().type&&(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause()),this._changed=!0},F.prototype._flattenAndSortRenderedFeatures=function(B){for(var W=this,fe=function(Pr){return"fill-extrusion"===W._layers[Pr].type},ge={},we=[],Ee=this._order.length-1;Ee>=0;Ee--){var Pe=this._order[Ee];if(fe(Pe)){ge[Pe]=Ee;for(var $e=0,ot=B;$e<ot.length;$e+=1){var pt=ot[$e][Pe];if(pt)for(var Dt=0,zt=pt;Dt<zt.length;Dt+=1)we.push(zt[Dt])}}}we.sort(function(Pr,Cr){return Cr.intersectionZ-Pr.intersectionZ});for(var Nt=[],Et=this._order.length-1;Et>=0;Et--){var Zt=this._order[Et];if(fe(Zt))for(var qt=we.length-1;qt>=0;qt--){var Jt=we[qt].feature;if(ge[Jt.layer.id]<Et)break;Nt.push(Jt),we.pop()}else for(var gn=0,On=B;gn<On.length;gn+=1){var Yn=On[gn][Zt];if(Yn)for(var Hn=0,vr=Yn;Hn<vr.length;Hn+=1)Nt.push(vr[Hn].feature)}}return Nt},F.prototype.queryRenderedFeatures=function(B,W,fe){W&&W.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",W.filter,null,W);var ge={};if(W&&W.layers){if(!Array.isArray(W.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var we=0,Ee=W.layers;we<Ee.length;we+=1){var Pe=Ee[we],$e=this._layers[Pe];if(!$e)return this.fire(new e.ErrorEvent(new Error("The layer '"+Pe+"' does not exist in the map's style and cannot be queried for features."))),[];ge[$e.source]=!0}}var ot=[];for(var pt in W.availableImages=this._availableImages,this.sourceCaches)W.layers&&!ge[pt]||ot.push(H(this.sourceCaches[pt],this._layers,this._serializedLayers,B,W,fe));return this.placement&&ot.push(function(Dt,zt,Pt,Nt,Et,Zt,qt){for(var Jt={},gn=Zt.queryRenderedSymbols(Nt),On=[],Yn=0,Hn=Object.keys(gn).map(Number);Yn<Hn.length;Yn+=1)On.push(qt[Hn[Yn]]);On.sort(oe);for(var gr=function(){var Oi=Cr[Pr],ur=Oi.featureIndex.lookupSymbolFeatures(gn[Oi.bucketInstanceId],zt,Oi.bucketIndex,Oi.sourceLayerIndex,Et.filter,Et.layers,Et.availableImages,Dt);for(var Gr in ur){var hi=Jt[Gr]=Jt[Gr]||[],si=ur[Gr];si.sort(function(bi,qi){var zi=Oi.featureSortOrder;if(zi){var ta=zi.indexOf(bi.featureIndex);return zi.indexOf(qi.featureIndex)-ta}return qi.featureIndex-bi.featureIndex});for(var wi=0,Ii=si;wi<Ii.length;wi+=1)hi.push(Ii[wi])}},Pr=0,Cr=On;Pr<Cr.length;Pr+=1)gr();var ii=function(Oi){Jt[Oi].forEach(function(ur){var Gr=ur.feature,si=Pt[Dt[Oi].source].getFeatureState(Gr.layer["source-layer"],Gr.id);Gr.source=Gr.layer.source,Gr.layer["source-layer"]&&(Gr.sourceLayer=Gr.layer["source-layer"]),Gr.state=si})};for(var di in Jt)ii(di);return Jt}(this._layers,this._serializedLayers,this.sourceCaches,B,W,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ot)},F.prototype.querySourceFeatures=function(B,W){W&&W.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",W.filter,null,W);var fe=this.sourceCaches[B];return fe?function(ge,we){for(var Ee=ge.getRenderableIds().map(function(zt){return ge.getTileByID(zt)}),Pe=[],$e={},ot=0;ot<Ee.length;ot++){var pt=Ee[ot],Dt=pt.tileID.canonical.key;$e[Dt]||($e[Dt]=!0,pt.querySourceFeatures(Pe,we))}return Pe}(fe,W):[]},F.prototype.addSourceType=function(B,W,fe){return F.getSourceType(B)?fe(new Error('A source type called "'+B+'" already exists.')):(F.setSourceType(B,W),W.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:B,url:W.workerSourceURL},fe):fe(null,null))},F.prototype.getLight=function(){return this.light.getLight()},F.prototype.setLight=function(B,W){void 0===W&&(W={}),this._checkLoaded();var fe=this.light.getLight(),ge=!1;for(var we in B)if(!e.deepEqual(B[we],fe[we])){ge=!0;break}if(ge){var Ee={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(B,W),this.light.updateTransitions(Ee)}},F.prototype._validate=function(B,W,fe,ge,we){return void 0===we&&(we={}),(!we||!1!==we.validate)&&xr(this,B.call(e.validateStyle,e.extend({key:W,style:this.serialize(),value:fe,styleSpec:e.styleSpec},ge)))},F.prototype._remove=function(){for(var B in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[B].setEventedParent(null);for(var W in this.sourceCaches)this.sourceCaches[W].clearTiles(),this.sourceCaches[W].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},F.prototype._clearSource=function(B){this.sourceCaches[B].clearTiles()},F.prototype._reloadSource=function(B){this.sourceCaches[B].resume(),this.sourceCaches[B].reload()},F.prototype._updateSources=function(B){for(var W in this.sourceCaches)this.sourceCaches[W].update(B)},F.prototype._generateCollisionBoxes=function(){for(var B in this.sourceCaches)this._reloadSource(B)},F.prototype._updatePlacement=function(B,W,fe,ge,we){void 0===we&&(we=!1);for(var Ee=!1,Pe=!1,$e={},ot=0,pt=this._order;ot<pt.length;ot+=1){var zt=this._layers[pt[ot]];if("symbol"===zt.type){if(!$e[zt.source]){var Pt=this.sourceCaches[zt.source];$e[zt.source]=Pt.getRenderableIds(!0).map(function(gn){return Pt.getTileByID(gn)}).sort(function(gn,On){return On.tileID.overscaledZ-gn.tileID.overscaledZ||(gn.tileID.isLessThan(On.tileID)?-1:1)})}var Nt=this.crossTileSymbolIndex.addLayer(zt,$e[zt.source],B.center.lng);Ee=Ee||Nt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((we=we||this._layerOrderChanged||0===fe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),B.zoom))&&(this.pauseablePlacement=new In(B,this._order,we,W,fe,ge,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Pe=!0),Ee&&this.pauseablePlacement.placement.setStale()),Pe||Ee)for(var Et=0,Zt=this._order;Et<Zt.length;Et+=1){var Jt=this._layers[Zt[Et]];"symbol"===Jt.type&&this.placement.updateLayerOpacities(Jt,$e[Jt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},F.prototype._releaseSymbolFadeTiles=function(){for(var B in this.sourceCaches)this.sourceCaches[B].releaseSymbolFadeTiles()},F.prototype.getImages=function(B,W,fe){this.imageManager.getImages(W.icons,fe),this._updateTilesForChangedImages();var ge=this.sourceCaches[W.source];ge&&ge.setDependencies(W.tileID.key,W.type,W.icons)},F.prototype.getGlyphs=function(B,W,fe){this.glyphManager.getGlyphs(W.stacks,fe)},F.prototype.getResource=function(B,W,fe){return e.makeRequest(W,fe)},F}(e.Evented);Br.getSourceType=function(O){return V[O]},Br.setSourceType=function(O,F){V[O]=F},Br.registerForPluginStateChange=e.registerForPluginStateChange;var qr=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Xr=ra("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),ci=ra("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ui=ra("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Hi=ra("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),jr=ra("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),pi=ra("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ui=ra("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Qi=ra("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ma=ra("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Za=ra("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Co=ra("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),sa=ra("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),la=ra("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),lo=ra("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ki=ra("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),po=ra("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Po=ra("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Va=ra("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),mo=ra("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Ro=ra("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Wo=ra("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Wa=ra("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Ia=ra("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),no=ra("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),xs=ra("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),ns=ra("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function ra(O,F){var B=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,W={};return{fragmentSource:O=O.replace(B,function(fe,ge,we,Ee,Pe){return W[Pe]=!0,"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nvarying "+we+" "+Ee+" "+Pe+";\n#else\nuniform "+we+" "+Ee+" u_"+Pe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Pe+"\n    "+we+" "+Ee+" "+Pe+" = u_"+Pe+";\n#endif\n"}),vertexSource:F=F.replace(B,function(fe,ge,we,Ee,Pe){var $e="float"===Ee?"vec2":"vec4",ot=Pe.match(/color/)?"color":$e;return W[Pe]?"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nuniform lowp float u_"+Pe+"_t;\nattribute "+we+" "+$e+" a_"+Pe+";\nvarying "+we+" "+Ee+" "+Pe+";\n#else\nuniform "+we+" "+Ee+" u_"+Pe+";\n#endif\n":"vec4"===ot?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+Pe+" = a_"+Pe+";\n#else\n    "+we+" "+Ee+" "+Pe+" = u_"+Pe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+Pe+" = unpack_mix_"+ot+"(a_"+Pe+", u_"+Pe+"_t);\n#else\n    "+we+" "+Ee+" "+Pe+" = u_"+Pe+";\n#endif\n":"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\nuniform lowp float u_"+Pe+"_t;\nattribute "+we+" "+$e+" a_"+Pe+";\n#else\nuniform "+we+" "+Ee+" u_"+Pe+";\n#endif\n":"vec4"===ot?"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+we+" "+Ee+" "+Pe+" = a_"+Pe+";\n#else\n    "+we+" "+Ee+" "+Pe+" = u_"+Pe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Pe+"\n    "+we+" "+Ee+" "+Pe+" = unpack_mix_"+ot+"(a_"+Pe+", u_"+Pe+"_t);\n#else\n    "+we+" "+Ee+" "+Pe+" = u_"+Pe+";\n#endif\n"})}}var Ls=Object.freeze({__proto__:null,prelude:Xr,background:ci,backgroundPattern:Ui,circle:Hi,clippingMask:jr,heatmap:pi,heatmapTexture:ui,collisionBox:Qi,collisionCircle:ma,debug:Za,fill:Co,fillOutline:sa,fillOutlinePattern:la,fillPattern:lo,fillExtrusion:Ki,fillExtrusionPattern:po,hillshadePrepare:Po,hillshade:Va,line:mo,lineGradient:Ro,linePattern:Wo,lineSDF:Wa,raster:Ia,symbolIcon:no,symbolSDF:xs,symbolTextAndIcon:ns}),ws=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};ws.prototype.bind=function(O,F,B,W,fe,ge,we,Ee){this.context=O;for(var Pe=this.boundPaintVertexBuffers.length!==W.length,$e=0;!Pe&&$e<W.length;$e++)this.boundPaintVertexBuffers[$e]!==W[$e]&&(Pe=!0);O.extVertexArrayObject&&this.vao&&this.boundProgram===F&&this.boundLayoutVertexBuffer===B&&!Pe&&this.boundIndexBuffer===fe&&this.boundVertexOffset===ge&&this.boundDynamicVertexBuffer===we&&this.boundDynamicVertexBuffer2===Ee?(O.bindVertexArrayOES.set(this.vao),we&&we.bind(),fe&&fe.dynamicDraw&&fe.bind(),Ee&&Ee.bind()):this.freshBind(F,B,W,fe,ge,we,Ee)},ws.prototype.freshBind=function(O,F,B,W,fe,ge,we){var Ee,Pe=O.numAttributes,$e=this.context,ot=$e.gl;if($e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$e.extVertexArrayObject.createVertexArrayOES(),$e.bindVertexArrayOES.set(this.vao),Ee=0,this.boundProgram=O,this.boundLayoutVertexBuffer=F,this.boundPaintVertexBuffers=B,this.boundIndexBuffer=W,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=ge,this.boundDynamicVertexBuffer2=we;else{Ee=$e.currentNumAttributes||0;for(var pt=Pe;pt<Ee;pt++)ot.disableVertexAttribArray(pt)}F.enableAttributes(ot,O);for(var Dt=0,zt=B;Dt<zt.length;Dt+=1)zt[Dt].enableAttributes(ot,O);ge&&ge.enableAttributes(ot,O),we&&we.enableAttributes(ot,O),F.bind(),F.setVertexAttribPointers(ot,O,fe);for(var Pt=0,Nt=B;Pt<Nt.length;Pt+=1){var Et=Nt[Pt];Et.bind(),Et.setVertexAttribPointers(ot,O,fe)}ge&&(ge.bind(),ge.setVertexAttribPointers(ot,O,fe)),W&&W.bind(),we&&(we.bind(),we.setVertexAttribPointers(ot,O,fe)),$e.currentNumAttributes=Pe},ws.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ys=function(O,F,B,W,fe){var ge=O.gl;this.program=ge.createProgram();var we=B?B.defines():[];fe&&we.push("#define OVERDRAW_INSPECTOR;");var Ee=we.concat(Xr.fragmentSource,F.fragmentSource).join("\n"),Pe=we.concat(Xr.vertexSource,F.vertexSource).join("\n"),$e=ge.createShader(ge.FRAGMENT_SHADER);if(ge.isContextLost())this.failedToCreate=!0;else{ge.shaderSource($e,Ee),ge.compileShader($e),ge.attachShader(this.program,$e);var ot=ge.createShader(ge.VERTEX_SHADER);if(ge.isContextLost())this.failedToCreate=!0;else{ge.shaderSource(ot,Pe),ge.compileShader(ot),ge.attachShader(this.program,ot);for(var pt=B?B.layoutAttributes:[],Dt=0;Dt<pt.length;Dt++)ge.bindAttribLocation(this.program,Dt,pt[Dt].name);ge.linkProgram(this.program),ge.deleteShader(ot),ge.deleteShader($e),this.numAttributes=ge.getProgramParameter(this.program,ge.ACTIVE_ATTRIBUTES),this.attributes={};for(var zt={},Pt=0;Pt<this.numAttributes;Pt++){var Nt=ge.getActiveAttrib(this.program,Pt);Nt&&(this.attributes[Nt.name]=ge.getAttribLocation(this.program,Nt.name))}for(var Et=ge.getProgramParameter(this.program,ge.ACTIVE_UNIFORMS),Zt=0;Zt<Et;Zt++){var qt=ge.getActiveUniform(this.program,Zt);qt&&(zt[qt.name]=ge.getUniformLocation(this.program,qt.name))}this.fixedUniforms=W(O,zt),this.binderUniforms=B?B.getUniforms(O,zt):[]}}};function Qs(O,F,B){var W=1/Or(B,1,F.transform.tileZoom),fe=Math.pow(2,B.tileID.overscaledZ),ge=B.tileSize*Math.pow(2,F.transform.tileZoom)/fe,we=ge*(B.tileID.canonical.x+B.tileID.wrap*fe),Ee=ge*B.tileID.canonical.y;return{u_image:0,u_texsize:B.imageAtlasTexture.size,u_scale:[W,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[we>>16,Ee>>16],u_pixel_coord_lower:[65535&we,65535&Ee]}}Ys.prototype.draw=function(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot,pt,Dt,zt,Pt,Nt){var Et,Zt=O.gl;if(!this.failedToCreate){for(var qt in O.program.set(this.program),O.setDepthMode(B),O.setStencilMode(W),O.setColorMode(fe),O.setCullFace(ge),this.fixedUniforms)this.fixedUniforms[qt].set(we[qt]);zt&&zt.setUniforms(O,this.binderUniforms,pt,{zoom:Dt});for(var Jt=(Et={},Et[Zt.LINES]=2,Et[Zt.TRIANGLES]=3,Et[Zt.LINE_STRIP]=1,Et)[F],gn=0,On=ot.get();gn<On.length;gn+=1){var Yn=On[gn],Hn=Yn.vaos||(Yn.vaos={});(Hn[Ee]||(Hn[Ee]=new ws)).bind(O,this,Pe,zt?zt.getPaintVertexBuffers():[],$e,Yn.vertexOffset,Pt,Nt),Zt.drawElements(F,Yn.primitiveLength*Jt,Zt.UNSIGNED_SHORT,Yn.primitiveOffset*Jt*2)}}};var Zs=function(O,F,B,W){var fe=F.style.light,ge=fe.properties.get("position"),we=[ge.x,ge.y,ge.z],Ee=e.create$1();"viewport"===fe.properties.get("anchor")&&e.fromRotation(Ee,-F.transform.angle),e.transformMat3(we,we,Ee);var Pe=fe.properties.get("color");return{u_matrix:O,u_lightpos:we,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Pe.r,Pe.g,Pe.b],u_vertical_gradient:+B,u_opacity:W}},Us=function(O,F,B,W,fe,ge,we){return e.extend(Zs(O,F,B,W),Qs(ge,F,we),{u_height_factor:-Math.pow(2,fe.overscaledZ)/we.tileSize/8})},Vo=function(O){return{u_matrix:O}},Xo=function(O,F,B,W){return e.extend(Vo(O),Qs(B,F,W))},rs=function(O,F){return{u_matrix:O,u_world:F}},$o=function(O,F,B,W,fe){return e.extend(Xo(O,F,B,W),{u_world:fe})},Jo=function(O,F,B,W){var fe,ge,we=O.transform;if("map"===W.paint.get("circle-pitch-alignment")){var Ee=Or(B,1,we.zoom);fe=!0,ge=[Ee,Ee]}else fe=!1,ge=we.pixelsToGLUnits;return{u_camera_to_center_distance:we.cameraToCenterDistance,u_scale_with_map:+("map"===W.paint.get("circle-pitch-scale")),u_matrix:O.translatePosMatrix(F.posMatrix,B,W.paint.get("circle-translate"),W.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ge}},Ts=function(O,F,B){var W=Or(B,1,F.zoom),fe=Math.pow(2,F.zoom-B.tileID.overscaledZ),ge=B.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:F.cameraToCenterDistance,u_pixels_to_tile_units:W,u_extrude_scale:[F.pixelsToGLUnits[0]/(W*fe),F.pixelsToGLUnits[1]/(W*fe)],u_overscale_factor:ge}},So=function(O,F,B){return{u_matrix:O,u_inv_matrix:F,u_camera_to_center_distance:B.cameraToCenterDistance,u_viewport_size:[B.width,B.height]}},Hs=function(O,F,B){return void 0===B&&(B=1),{u_matrix:O,u_color:F,u_overlay:0,u_overlay_scale:B}},go=function(O){return{u_matrix:O}},ds=function(O,F,B,W){return{u_matrix:O,u_extrude_scale:Or(F,1,B),u_intensity:W}};function Is(O,F){var B=Math.pow(2,F.canonical.z),W=F.canonical.y;return[new e.MercatorCoordinate(0,W/B).toLngLat().lat,new e.MercatorCoordinate(0,(W+1)/B).toLngLat().lat]}var Ko=function(O,F,B){var W=O.transform;return{u_matrix:yt(O,F,B),u_ratio:1/Or(F,1,W.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},oa=function(O,F,B){return e.extend(Ko(O,F,B),{u_image:0})},We=function(O,F,B,W){var fe=O.transform,ge=ut(F,fe);return{u_matrix:yt(O,F,B),u_texsize:F.imageAtlasTexture.size,u_ratio:1/Or(F,1,fe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ge,W.fromScale,W.toScale],u_fade:W.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},tt=function(O,F,B,W,fe){var we=O.lineAtlas,Ee=ut(F,O.transform),Pe="round"===B.layout.get("line-cap"),$e=we.getDash(W.from,Pe),ot=we.getDash(W.to,Pe),pt=$e.width*fe.fromScale,Dt=ot.width*fe.toScale;return e.extend(Ko(O,F,B),{u_patternscale_a:[Ee/pt,-$e.height/2],u_patternscale_b:[Ee/Dt,-ot.height/2],u_sdfgamma:we.width/(256*Math.min(pt,Dt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:$e.y,u_tex_y_b:ot.y,u_mix:fe.t})};function ut(O,F){return 1/Or(O,1,F.tileZoom)}function yt(O,F,B){return O.translatePosMatrix(F.tileID.posMatrix,F,B.paint.get("line-translate"),B.paint.get("line-translate-anchor"))}var kt=function(O,F,B,W,fe){return{u_matrix:O,u_tl_parent:F,u_scale_parent:B,u_buffer_scale:1,u_fade_t:W.mix,u_opacity:W.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(we=fe.paint.get("raster-saturation"),we>0?1-1/(1.001-we):-we),u_contrast_factor:(ge=fe.paint.get("raster-contrast"),ge>0?1/(1-ge):1+ge),u_spin_weights:Mt(fe.paint.get("raster-hue-rotate"))};var ge,we};function Mt(O){O*=Math.PI/180;var F=Math.sin(O),B=Math.cos(O);return[(2*B+1)/3,(-Math.sqrt(3)*F-B+1)/3,(Math.sqrt(3)*F-B+1)/3]}var Ft,ln=function(O,F,B,W,fe,ge,we,Ee,Pe,$e){var ot=fe.transform;return{u_is_size_zoom_constant:+("constant"===O||"source"===O),u_is_size_feature_constant:+("constant"===O||"camera"===O),u_size_t:F?F.uSizeT:0,u_size:F?F.uSize:0,u_camera_to_center_distance:ot.cameraToCenterDistance,u_pitch:ot.pitch/360*2*Math.PI,u_rotate_symbol:+B,u_aspect_ratio:ot.width/ot.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:ge,u_label_plane_matrix:we,u_coord_matrix:Ee,u_is_text:+Pe,u_pitch_with_map:+W,u_texsize:$e,u_texture:0}},un=function(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot){var pt=fe.transform;return e.extend(ln(O,F,B,W,fe,ge,we,Ee,Pe,$e),{u_gamma_scale:W?Math.cos(pt._pitch)*pt.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+ot})},an=function(O,F,B,W,fe,ge,we,Ee,Pe,$e){return e.extend(un(O,F,B,W,fe,ge,we,Ee,!0,Pe,!0),{u_texsize_icon:$e,u_texture_icon:1})},vn=function(O,F,B){return{u_matrix:O,u_opacity:F,u_color:B}},Dn=function(O,F,B,W,fe,ge){return e.extend((Ee=ge,$e=fe,ot=(Pe=B).imageManager.getPattern((we=W).from.toString()),pt=Pe.imageManager.getPattern(we.to.toString()),zt=(Dt=Pe.imageManager.getPixelSize()).width,Pt=Dt.height,Nt=Math.pow(2,$e.tileID.overscaledZ),Zt=(Et=$e.tileSize*Math.pow(2,Pe.transform.tileZoom)/Nt)*($e.tileID.canonical.x+$e.tileID.wrap*Nt),qt=Et*$e.tileID.canonical.y,{u_image:0,u_pattern_tl_a:ot.tl,u_pattern_br_a:ot.br,u_pattern_tl_b:pt.tl,u_pattern_br_b:pt.br,u_texsize:[zt,Pt],u_mix:Ee.t,u_pattern_size_a:ot.displaySize,u_pattern_size_b:pt.displaySize,u_scale_a:Ee.fromScale,u_scale_b:Ee.toScale,u_tile_units_to_pixels:1/Or($e,1,Pe.transform.tileZoom),u_pixel_coord_upper:[Zt>>16,qt>>16],u_pixel_coord_lower:[65535&Zt,65535&qt]}),{u_matrix:O,u_opacity:F});var we,Ee,Pe,$e,ot,pt,Dt,zt,Pt,Nt,Et,Zt,qt},Nn={fillExtrusion:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_lightpos:new e.Uniform3f(O,F.u_lightpos),u_lightintensity:new e.Uniform1f(O,F.u_lightintensity),u_lightcolor:new e.Uniform3f(O,F.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,F.u_vertical_gradient),u_opacity:new e.Uniform1f(O,F.u_opacity)}},fillExtrusionPattern:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_lightpos:new e.Uniform3f(O,F.u_lightpos),u_lightintensity:new e.Uniform1f(O,F.u_lightintensity),u_lightcolor:new e.Uniform3f(O,F.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,F.u_vertical_gradient),u_height_factor:new e.Uniform1f(O,F.u_height_factor),u_image:new e.Uniform1i(O,F.u_image),u_texsize:new e.Uniform2f(O,F.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,F.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,F.u_scale),u_fade:new e.Uniform1f(O,F.u_fade),u_opacity:new e.Uniform1f(O,F.u_opacity)}},fill:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix)}},fillPattern:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_image:new e.Uniform1i(O,F.u_image),u_texsize:new e.Uniform2f(O,F.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,F.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,F.u_scale),u_fade:new e.Uniform1f(O,F.u_fade)}},fillOutline:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_world:new e.Uniform2f(O,F.u_world)}},fillOutlinePattern:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_world:new e.Uniform2f(O,F.u_world),u_image:new e.Uniform1i(O,F.u_image),u_texsize:new e.Uniform2f(O,F.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,F.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,F.u_scale),u_fade:new e.Uniform1f(O,F.u_fade)}},circle:function(O,F){return{u_camera_to_center_distance:new e.Uniform1f(O,F.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(O,F.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(O,F.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(O,F.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(O,F.u_matrix)}},collisionBox:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_camera_to_center_distance:new e.Uniform1f(O,F.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(O,F.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(O,F.u_extrude_scale),u_overscale_factor:new e.Uniform1f(O,F.u_overscale_factor)}},collisionCircle:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_inv_matrix:new e.UniformMatrix4f(O,F.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(O,F.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(O,F.u_viewport_size)}},debug:function(O,F){return{u_color:new e.UniformColor(O,F.u_color),u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_overlay:new e.Uniform1i(O,F.u_overlay),u_overlay_scale:new e.Uniform1f(O,F.u_overlay_scale)}},clippingMask:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix)}},heatmap:function(O,F){return{u_extrude_scale:new e.Uniform1f(O,F.u_extrude_scale),u_intensity:new e.Uniform1f(O,F.u_intensity),u_matrix:new e.UniformMatrix4f(O,F.u_matrix)}},heatmapTexture:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_world:new e.Uniform2f(O,F.u_world),u_image:new e.Uniform1i(O,F.u_image),u_color_ramp:new e.Uniform1i(O,F.u_color_ramp),u_opacity:new e.Uniform1f(O,F.u_opacity)}},hillshade:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_image:new e.Uniform1i(O,F.u_image),u_latrange:new e.Uniform2f(O,F.u_latrange),u_light:new e.Uniform2f(O,F.u_light),u_shadow:new e.UniformColor(O,F.u_shadow),u_highlight:new e.UniformColor(O,F.u_highlight),u_accent:new e.UniformColor(O,F.u_accent)}},hillshadePrepare:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_image:new e.Uniform1i(O,F.u_image),u_dimension:new e.Uniform2f(O,F.u_dimension),u_zoom:new e.Uniform1f(O,F.u_zoom),u_maxzoom:new e.Uniform1f(O,F.u_maxzoom),u_unpack:new e.Uniform4f(O,F.u_unpack)}},line:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_ratio:new e.Uniform1f(O,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,F.u_units_to_pixels)}},lineGradient:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_ratio:new e.Uniform1f(O,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,F.u_units_to_pixels),u_image:new e.Uniform1i(O,F.u_image)}},linePattern:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_texsize:new e.Uniform2f(O,F.u_texsize),u_ratio:new e.Uniform1f(O,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_image:new e.Uniform1i(O,F.u_image),u_units_to_pixels:new e.Uniform2f(O,F.u_units_to_pixels),u_scale:new e.Uniform3f(O,F.u_scale),u_fade:new e.Uniform1f(O,F.u_fade)}},lineSDF:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_ratio:new e.Uniform1f(O,F.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,F.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(O,F.u_patternscale_a),u_patternscale_b:new e.Uniform2f(O,F.u_patternscale_b),u_sdfgamma:new e.Uniform1f(O,F.u_sdfgamma),u_image:new e.Uniform1i(O,F.u_image),u_tex_y_a:new e.Uniform1f(O,F.u_tex_y_a),u_tex_y_b:new e.Uniform1f(O,F.u_tex_y_b),u_mix:new e.Uniform1f(O,F.u_mix)}},raster:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_tl_parent:new e.Uniform2f(O,F.u_tl_parent),u_scale_parent:new e.Uniform1f(O,F.u_scale_parent),u_buffer_scale:new e.Uniform1f(O,F.u_buffer_scale),u_fade_t:new e.Uniform1f(O,F.u_fade_t),u_opacity:new e.Uniform1f(O,F.u_opacity),u_image0:new e.Uniform1i(O,F.u_image0),u_image1:new e.Uniform1i(O,F.u_image1),u_brightness_low:new e.Uniform1f(O,F.u_brightness_low),u_brightness_high:new e.Uniform1f(O,F.u_brightness_high),u_saturation_factor:new e.Uniform1f(O,F.u_saturation_factor),u_contrast_factor:new e.Uniform1f(O,F.u_contrast_factor),u_spin_weights:new e.Uniform3f(O,F.u_spin_weights)}},symbolIcon:function(O,F){return{u_is_size_zoom_constant:new e.Uniform1i(O,F.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,F.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,F.u_size_t),u_size:new e.Uniform1f(O,F.u_size),u_camera_to_center_distance:new e.Uniform1f(O,F.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,F.u_pitch),u_rotate_symbol:new e.Uniform1i(O,F.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,F.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,F.u_fade_change),u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,F.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,F.u_coord_matrix),u_is_text:new e.Uniform1i(O,F.u_is_text),u_pitch_with_map:new e.Uniform1i(O,F.u_pitch_with_map),u_texsize:new e.Uniform2f(O,F.u_texsize),u_texture:new e.Uniform1i(O,F.u_texture)}},symbolSDF:function(O,F){return{u_is_size_zoom_constant:new e.Uniform1i(O,F.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,F.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,F.u_size_t),u_size:new e.Uniform1f(O,F.u_size),u_camera_to_center_distance:new e.Uniform1f(O,F.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,F.u_pitch),u_rotate_symbol:new e.Uniform1i(O,F.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,F.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,F.u_fade_change),u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,F.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,F.u_coord_matrix),u_is_text:new e.Uniform1i(O,F.u_is_text),u_pitch_with_map:new e.Uniform1i(O,F.u_pitch_with_map),u_texsize:new e.Uniform2f(O,F.u_texsize),u_texture:new e.Uniform1i(O,F.u_texture),u_gamma_scale:new e.Uniform1f(O,F.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,F.u_is_halo)}},symbolTextAndIcon:function(O,F){return{u_is_size_zoom_constant:new e.Uniform1i(O,F.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,F.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,F.u_size_t),u_size:new e.Uniform1f(O,F.u_size),u_camera_to_center_distance:new e.Uniform1f(O,F.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,F.u_pitch),u_rotate_symbol:new e.Uniform1i(O,F.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,F.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,F.u_fade_change),u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,F.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,F.u_coord_matrix),u_is_text:new e.Uniform1i(O,F.u_is_text),u_pitch_with_map:new e.Uniform1i(O,F.u_pitch_with_map),u_texsize:new e.Uniform2f(O,F.u_texsize),u_texsize_icon:new e.Uniform2f(O,F.u_texsize_icon),u_texture:new e.Uniform1i(O,F.u_texture),u_texture_icon:new e.Uniform1i(O,F.u_texture_icon),u_gamma_scale:new e.Uniform1f(O,F.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,F.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,F.u_is_halo)}},background:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_opacity:new e.Uniform1f(O,F.u_opacity),u_color:new e.UniformColor(O,F.u_color)}},backgroundPattern:function(O,F){return{u_matrix:new e.UniformMatrix4f(O,F.u_matrix),u_opacity:new e.Uniform1f(O,F.u_opacity),u_image:new e.Uniform1i(O,F.u_image),u_pattern_tl_a:new e.Uniform2f(O,F.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(O,F.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(O,F.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(O,F.u_pattern_br_b),u_texsize:new e.Uniform2f(O,F.u_texsize),u_mix:new e.Uniform1f(O,F.u_mix),u_pattern_size_a:new e.Uniform2f(O,F.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(O,F.u_pattern_size_b),u_scale_a:new e.Uniform1f(O,F.u_scale_a),u_scale_b:new e.Uniform1f(O,F.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(O,F.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,F.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(O,F.u_tile_units_to_pixels)}}};function Fn(O,F,B,W,fe,ge,we){for(var Ee=O.context,Pe=Ee.gl,$e=O.useProgram("collisionBox"),ot=[],pt=0,Dt=0,zt=0;zt<W.length;zt++){var Pt=W[zt],Nt=F.getTile(Pt),Et=Nt.getBucket(B);if(Et){var Zt=Pt.posMatrix;0===fe[0]&&0===fe[1]||(Zt=O.translatePosMatrix(Pt.posMatrix,Nt,fe,ge));var qt=we?Et.textCollisionBox:Et.iconCollisionBox,Jt=Et.collisionCircleArray;if(Jt.length>0){var gn=e.create(),On=Zt;e.mul(gn,Et.placementInvProjMatrix,O.transform.glCoordMatrix),e.mul(gn,gn,Et.placementViewportMatrix),ot.push({circleArray:Jt,circleOffset:Dt,transform:On,invTransform:gn}),Dt=pt+=Jt.length/4}qt&&$e.draw(Ee,Pe.LINES,nn.disabled,Xe.disabled,O.colorModeForRenderPass(),ye.disabled,Ts(Zt,O.transform,Nt),B.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,null,O.transform.zoom,null,null,qt.collisionVertexBuffer)}}if(we&&ot.length){var Yn=O.useProgram("collisionCircle"),Hn=new e.StructArrayLayout2f1f2i16;Hn.resize(4*pt),Hn._trim();for(var vr=0,gr=0,Pr=ot;gr<Pr.length;gr+=1)for(var Cr=Pr[gr],ii=0;ii<Cr.circleArray.length/4;ii++){var di=4*ii,Oi=Cr.circleArray[di+0],ur=Cr.circleArray[di+1],Gr=Cr.circleArray[di+2],hi=Cr.circleArray[di+3];Hn.emplace(vr++,Oi,ur,Gr,hi,0),Hn.emplace(vr++,Oi,ur,Gr,hi,1),Hn.emplace(vr++,Oi,ur,Gr,hi,2),Hn.emplace(vr++,Oi,ur,Gr,hi,3)}(!Ft||Ft.length<2*pt)&&(Ft=function(zi){var ta=2*zi,Yi=new e.StructArrayLayout3ui6;Yi.resize(ta),Yi._trim();for(var na=0;na<ta;na++){var fa=6*na;Yi.uint16[fa+0]=4*na+0,Yi.uint16[fa+1]=4*na+1,Yi.uint16[fa+2]=4*na+2,Yi.uint16[fa+3]=4*na+2,Yi.uint16[fa+4]=4*na+3,Yi.uint16[fa+5]=4*na+0}return Yi}(pt));for(var si=Ee.createIndexBuffer(Ft,!0),wi=Ee.createVertexBuffer(Hn,e.collisionCircleLayout.members,!0),Ii=0,Xi=ot;Ii<Xi.length;Ii+=1){var bi=Xi[Ii],qi=So(bi.transform,bi.invTransform,O.transform);Yn.draw(Ee,Pe.TRIANGLES,nn.disabled,Xe.disabled,O.colorModeForRenderPass(),ye.disabled,qi,B.id,wi,si,e.SegmentVector.simpleSegment(0,2*bi.circleOffset,bi.circleArray.length,bi.circleArray.length/2),null,O.transform.zoom,null,null,null)}wi.destroy(),si.destroy()}}var $n=e.identity(new Float32Array(16));function wr(O,F,B,W,fe,ge){var we=e.getAnchorAlignment(O),Ee=-(we.horizontalAlign-.5)*F,Pe=-(we.verticalAlign-.5)*B,$e=e.evaluateVariableOffset(O,W);return new e.Point((Ee/fe+$e[0])*ge,(Pe/fe+$e[1])*ge)}function Lr(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot){var pt=O.text.placedSymbolArray,Dt=O.text.dynamicLayoutVertexArray,zt=O.icon.dynamicLayoutVertexArray,Pt={};Dt.clear();for(var Nt=0;Nt<pt.length;Nt++){var Et=pt.get(Nt),qt=Et.hidden||!Et.crossTileID||O.allowVerticalPlacement&&!Et.placedOrientation?null:W[Et.crossTileID];if(qt){var Jt=new e.Point(Et.anchorX,Et.anchorY),gn=sn(Jt,B?Ee:we),On=fn(ge.cameraToCenterDistance,gn.signedDistanceFromCamera),Yn=fe.evaluateSizeForFeature(O.textSizeData,$e,Et)*On/e.ONE_EM;B&&(Yn*=O.tilePixelRatio/Pe);for(var gr=wr(qt.anchor,qt.width,qt.height,qt.textOffset,qt.textBoxScale,Yn),Pr=B?sn(Jt.add(gr),we).point:gn.point.add(F?gr.rotate(-ge.angle):gr),Cr=O.allowVerticalPlacement&&Et.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,ii=0;ii<Et.numGlyphs;ii++)e.addDynamicAttributes(Dt,Pr,Cr);ot&&Et.associatedIconIndex>=0&&(Pt[Et.associatedIconIndex]={shiftedAnchor:Pr,angle:Cr})}else yr(Et.numGlyphs,Dt)}if(ot){zt.clear();for(var di=O.icon.placedSymbolArray,Oi=0;Oi<di.length;Oi++){var ur=di.get(Oi);if(ur.hidden)yr(ur.numGlyphs,zt);else{var Gr=Pt[Oi];if(Gr)for(var hi=0;hi<ur.numGlyphs;hi++)e.addDynamicAttributes(zt,Gr.shiftedAnchor,Gr.angle);else yr(ur.numGlyphs,zt)}}O.icon.dynamicLayoutVertexBuffer.updateData(zt)}O.text.dynamicLayoutVertexBuffer.updateData(Dt)}function Zr(O,F,B){return B.iconsInText&&F?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function Qr(O,F,B,W,fe,ge,we,Ee,Pe,$e,ot,pt){for(var Dt=O.context,zt=Dt.gl,Pt=O.transform,Nt="map"===Ee,Et="map"===Pe,Zt=Nt&&"point"!==B.layout.get("symbol-placement"),qt=Nt&&!Et&&!Zt,Jt=void 0!==B.layout.get("symbol-sort-key").constantOr(1),gn=O.depthModeForSublayer(0,nn.ReadOnly),On=B.layout.get("text-variable-anchor"),Yn=[],Hn=0,vr=W;Hn<vr.length;Hn+=1){var gr=vr[Hn],Pr=F.getTile(gr),Cr=Pr.getBucket(B);if(Cr){var ii=fe?Cr.text:Cr.icon;if(ii&&ii.segments.get().length){var di=ii.programConfigurations.get(B.id),Oi=fe||Cr.sdfIcons,ur=fe?Cr.textSizeData:Cr.iconSizeData,Gr=Et||0!==Pt.pitch,hi=O.useProgram(Zr(Oi,fe,Cr),di),si=e.evaluateSizeForZoom(ur,Pt.zoom),wi=void 0,Ii=[0,0],Xi=void 0,bi=void 0,qi=null,zi=void 0;if(fe)Xi=Pr.glyphAtlasTexture,bi=zt.LINEAR,wi=Pr.glyphAtlasTexture.size,Cr.iconsInText&&(Ii=Pr.imageAtlasTexture.size,qi=Pr.imageAtlasTexture,zi=Gr||O.options.rotating||O.options.zooming||"composite"===ur.kind||"camera"===ur.kind?zt.LINEAR:zt.NEAREST);else{var Yi=1!==B.layout.get("icon-size").constantOr(0)||Cr.iconsNeedLinear;Xi=Pr.imageAtlasTexture,bi=Oi||O.options.rotating||O.options.zooming||Yi||Gr?zt.LINEAR:zt.NEAREST,wi=Pr.imageAtlasTexture.size}var na=Or(Pr,1,O.transform.zoom),fa=Vn(gr.posMatrix,Et,Nt,O.transform,na),Ha=Tn(gr.posMatrix,Et,Nt,O.transform,na),uo=On&&Cr.hasTextData(),fo="none"!==B.layout.get("icon-text-fit")&&uo&&Cr.hasIconData();Zt&&Mn(Cr,gr.posMatrix,O,fe,fa,Ha,Et,$e);var Fa=O.translatePosMatrix(gr.posMatrix,Pr,ge,we),ao=Zt||fe&&On||fo?$n:fa,Ka=O.translatePosMatrix(Ha,Pr,ge,we,!0),as=Oi&&0!==B.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1),Oo={program:hi,buffers:ii,uniformValues:Oi?Cr.iconsInText?an(ur.kind,si,qt,Et,O,Fa,ao,Ka,wi,Ii):un(ur.kind,si,qt,Et,O,Fa,ao,Ka,fe,wi,!0):ln(ur.kind,si,qt,Et,O,Fa,ao,Ka,fe,wi),atlasTexture:Xi,atlasTextureIcon:qi,atlasInterpolation:bi,atlasInterpolationIcon:zi,isSDF:Oi,hasHalo:as};if(Jt)for(var Ms=0,wl=ii.segments.get();Ms<wl.length;Ms+=1){var zl=wl[Ms];Yn.push({segments:new e.SegmentVector([zl]),sortKey:zl.sortKey,state:Oo})}else Yn.push({segments:ii.segments,sortKey:0,state:Oo})}}}Jt&&Yn.sort(function(Fc,Js){return Fc.sortKey-Js.sortKey});for(var Nc=0,mc=Yn;Nc<mc.length;Nc+=1){var gc=mc[Nc],os=gc.state;if(Dt.activeTexture.set(zt.TEXTURE0),os.atlasTexture.bind(os.atlasInterpolation,zt.CLAMP_TO_EDGE),os.atlasTextureIcon&&(Dt.activeTexture.set(zt.TEXTURE1),os.atlasTextureIcon&&os.atlasTextureIcon.bind(os.atlasInterpolationIcon,zt.CLAMP_TO_EDGE)),os.isSDF){var Ql=os.uniformValues;os.hasHalo&&(Ql.u_is_halo=1,Kr(os.buffers,gc.segments,B,O,os.program,gn,ot,pt,Ql)),Ql.u_is_halo=0}Kr(os.buffers,gc.segments,B,O,os.program,gn,ot,pt,os.uniformValues)}}function Kr(O,F,B,W,fe,ge,we,Ee,Pe){var $e=W.context;fe.draw($e,$e.gl.TRIANGLES,ge,we,Ee,ye.disabled,Pe,B.id,O.layoutVertexBuffer,O.indexBuffer,F,B.paint,W.transform.zoom,O.programConfigurations.get(B.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function $r(O,F,B,W,fe,ge,we){var Ee,Pe,$e,ot,pt,Dt=O.context.gl,zt=B.paint.get("fill-pattern"),Pt=zt&&zt.constantOr(1),Nt=B.getCrossfadeParameters();we?(Pe=Pt&&!B.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ee=Dt.LINES):(Pe=Pt?"fillPattern":"fill",Ee=Dt.TRIANGLES);for(var Et=0,Zt=W;Et<Zt.length;Et+=1){var qt=Zt[Et],Jt=F.getTile(qt);if(!Pt||Jt.patternsLoaded()){var gn=Jt.getBucket(B);if(gn){var On=gn.programConfigurations.get(B.id),Yn=O.useProgram(Pe,On);Pt&&(O.context.activeTexture.set(Dt.TEXTURE0),Jt.imageAtlasTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE),On.updatePaintBuffers(Nt));var Hn=zt.constantOr(null);if(Hn&&Jt.imageAtlas){var vr=Jt.imageAtlas,gr=vr.patternPositions[Hn.to.toString()],Pr=vr.patternPositions[Hn.from.toString()];gr&&Pr&&On.setConstantPatternPositions(gr,Pr)}var Cr=O.translatePosMatrix(qt.posMatrix,Jt,B.paint.get("fill-translate"),B.paint.get("fill-translate-anchor"));if(we){ot=gn.indexBuffer2,pt=gn.segments2;var ii=[Dt.drawingBufferWidth,Dt.drawingBufferHeight];$e="fillOutlinePattern"===Pe&&Pt?$o(Cr,O,Nt,Jt,ii):rs(Cr,ii)}else ot=gn.indexBuffer,pt=gn.segments,$e=Pt?Xo(Cr,O,Nt,Jt):Vo(Cr);Yn.draw(O.context,Ee,fe,O.stencilModeForClipping(qt),ge,ye.disabled,$e,B.id,gn.layoutVertexBuffer,ot,pt,B.paint,O.transform.zoom,On)}}}}function Li(O,F,B,W,fe,ge,we){for(var Ee=O.context,Pe=Ee.gl,$e=B.paint.get("fill-extrusion-pattern"),ot=$e.constantOr(1),pt=B.getCrossfadeParameters(),Dt=B.paint.get("fill-extrusion-opacity"),zt=0,Pt=W;zt<Pt.length;zt+=1){var Nt=Pt[zt],Et=F.getTile(Nt),Zt=Et.getBucket(B);if(Zt){var qt=Zt.programConfigurations.get(B.id),Jt=O.useProgram(ot?"fillExtrusionPattern":"fillExtrusion",qt);ot&&(O.context.activeTexture.set(Pe.TEXTURE0),Et.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),qt.updatePaintBuffers(pt));var gn=$e.constantOr(null);if(gn&&Et.imageAtlas){var On=Et.imageAtlas,Yn=On.patternPositions[gn.to.toString()],Hn=On.patternPositions[gn.from.toString()];Yn&&Hn&&qt.setConstantPatternPositions(Yn,Hn)}var vr=O.translatePosMatrix(Nt.posMatrix,Et,B.paint.get("fill-extrusion-translate"),B.paint.get("fill-extrusion-translate-anchor")),gr=B.paint.get("fill-extrusion-vertical-gradient"),Pr=ot?Us(vr,O,gr,Dt,Nt,pt,Et):Zs(vr,O,gr,Dt);Jt.draw(Ee,Ee.gl.TRIANGLES,fe,ge,we,ye.backCCW,Pr,B.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,B.paint,O.transform.zoom,qt)}}}function Gi(O,F,B,W,fe,ge){var we=O.context,Ee=we.gl,Pe=F.fbo;if(Pe){var $e=O.useProgram("hillshade");we.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,Pe.colorAttachment.get());var ot=function(pt,Dt,zt){var Pt=zt.paint.get("hillshade-shadow-color"),Nt=zt.paint.get("hillshade-highlight-color"),Et=zt.paint.get("hillshade-accent-color"),Zt=zt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===zt.paint.get("hillshade-illumination-anchor")&&(Zt-=pt.transform.angle);var qt=!pt.options.moving;return{u_matrix:pt.transform.calculatePosMatrix(Dt.tileID.toUnwrapped(),qt),u_image:0,u_latrange:Is(0,Dt.tileID),u_light:[zt.paint.get("hillshade-exaggeration"),Zt],u_shadow:Pt,u_highlight:Nt,u_accent:Et}}(O,F,B);$e.draw(we,Ee.TRIANGLES,W,fe,ge,ye.disabled,ot,B.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}}function ia(O,F,B,W,fe,ge,we){var Et,Zt,qt,Jt,gn,Ee=O.context,Pe=Ee.gl,$e=F.dem;if($e&&$e.data){var ot=$e.dim,pt=$e.stride,Dt=$e.getPixels();if(Ee.activeTexture.set(Pe.TEXTURE1),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),F.demTexture=F.demTexture||O.getTileTexture(pt),F.demTexture){var zt=F.demTexture;zt.update(Dt,{premultiply:!1}),zt.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE)}else F.demTexture=new e.Texture(Ee,Dt,Pe.RGBA,{premultiply:!1}),F.demTexture.bind(Pe.NEAREST,Pe.CLAMP_TO_EDGE);Ee.activeTexture.set(Pe.TEXTURE0);var Pt=F.fbo;if(!Pt){var Nt=new e.Texture(Ee,{width:ot,height:ot,data:null},Pe.RGBA);Nt.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),(Pt=F.fbo=Ee.createFramebuffer(ot,ot,!0)).colorAttachment.set(Nt.texture)}Ee.bindFramebuffer.set(Pt.framebuffer),Ee.viewport.set([0,0,ot,ot]),O.useProgram("hillshadePrepare").draw(Ee,Pe.TRIANGLES,fe,ge,we,ye.disabled,(Et=F.tileID,qt=W,Jt=(Zt=$e).stride,gn=e.create(),e.ortho(gn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(gn,gn,[0,-e.EXTENT,0]),{u_matrix:gn,u_image:1,u_dimension:[Jt,Jt],u_zoom:Et.overscaledZ,u_maxzoom:qt,u_unpack:Zt.getUnpackVector()}),B.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),F.needsHillshadePrepare=!1}}function Wi(O,F,B,W,fe){var ge=W.paint.get("raster-fade-duration");if(ge>0){var we=e.browser.now(),Ee=(we-O.timeAdded)/ge,Pe=F?(we-F.timeAdded)/ge:-1,$e=B.getSource(),ot=fe.coveringZoomLevel({tileSize:$e.tileSize,roundZoom:$e.roundZoom}),pt=!F||Math.abs(F.tileID.overscaledZ-ot)>Math.abs(O.tileID.overscaledZ-ot),Dt=pt&&O.refreshedUponExpiration?1:e.clamp(pt?Ee:1-Pe,0,1);return O.refreshedUponExpiration&&Ee>=1&&(O.refreshedUponExpiration=!1),F?{opacity:1,mix:1-Dt}:{opacity:Dt,mix:0}}return{opacity:1,mix:0}}var aa=new e.Color(1,0,0,1),Pa=new e.Color(0,1,0,1),Ua=new e.Color(0,0,1,1),ya=new e.Color(1,0,1,1),Aa=new e.Color(0,1,1,1);function ro(O,F,B,W){Eo(O,0,F+B/2,O.transform.width,B,W)}function wo(O,F,B,W){Eo(O,F-B/2,0,B,O.transform.height,W)}function Eo(O,F,B,W,fe,ge){var we=O.context,Ee=we.gl;Ee.enable(Ee.SCISSOR_TEST),Ee.scissor(F*e.browser.devicePixelRatio,B*e.browser.devicePixelRatio,W*e.browser.devicePixelRatio,fe*e.browser.devicePixelRatio),we.clear({color:ge}),Ee.disable(Ee.SCISSOR_TEST)}function Do(O,F,B){var W=O.context,fe=W.gl,ge=B.posMatrix,we=O.useProgram("debug"),Ee=nn.disabled,Pe=Xe.disabled,$e=O.colorModeForRenderPass();W.activeTexture.set(fe.TEXTURE0),O.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),we.draw(W,fe.LINE_STRIP,Ee,Pe,$e,ye.disabled,Hs(ge,e.Color.red),"$debug",O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments);var ot=F.getTileByID(B.key).latestRawTileData,Dt=Math.floor((ot&&ot.byteLength||0)/1024),zt=F.getTile(B).tileSize,Pt=512/Math.min(zt,512)*(B.overscaledZ/O.transform.zoom)*.5,Nt=B.canonical.toString();B.overscaledZ!==B.canonical.z&&(Nt+=" => "+B.overscaledZ),function(Et,Zt){Et.initDebugOverlayCanvas();var qt=Et.debugOverlayCanvas,Jt=Et.context.gl,gn=Et.debugOverlayCanvas.getContext("2d");gn.clearRect(0,0,qt.width,qt.height),gn.shadowColor="white",gn.shadowBlur=2,gn.lineWidth=1.5,gn.strokeStyle="white",gn.textBaseline="top",gn.font="bold 36px Open Sans, sans-serif",gn.fillText(Zt,5,5),gn.strokeText(Zt,5,5),Et.debugOverlayTexture.update(qt),Et.debugOverlayTexture.bind(Jt.LINEAR,Jt.CLAMP_TO_EDGE)}(O,Nt+" "+Dt+"kb"),we.draw(W,fe.TRIANGLES,Ee,Pe,nt.alphaBlended,ye.disabled,Hs(ge,e.Color.transparent,Pt),"$debug",O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments)}var Xa={symbol:function(O,F,B,W,fe){if("translucent"===O.renderPass){var ge=Xe.disabled,we=O.colorModeForRenderPass();B.layout.get("text-variable-anchor")&&function(Ee,Pe,$e,ot,pt,Dt,zt){for(var Pt=Pe.transform,Nt="map"===pt,Et="map"===Dt,Zt=0,qt=Ee;Zt<qt.length;Zt+=1){var Jt=qt[Zt],gn=ot.getTile(Jt),On=gn.getBucket($e);if(On&&On.text&&On.text.segments.get().length){var Hn=e.evaluateSizeForZoom(On.textSizeData,Pt.zoom),vr=Or(gn,1,Pe.transform.zoom),gr=Vn(Jt.posMatrix,Et,Nt,Pe.transform,vr),Pr="none"!==$e.layout.get("icon-text-fit")&&On.hasIconData();if(Hn){var Cr=Math.pow(2,Pt.zoom-gn.tileID.overscaledZ);Lr(On,Nt,Et,zt,e.symbolSize,Pt,gr,Jt.posMatrix,Cr,Hn,Pr)}}}}(W,O,B,F,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),fe),0!==B.paint.get("icon-opacity").constantOr(1)&&Qr(O,F,B,W,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),ge,we),0!==B.paint.get("text-opacity").constantOr(1)&&Qr(O,F,B,W,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),ge,we),F.map.showCollisionBoxes&&(Fn(O,F,B,W,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),!0),Fn(O,F,B,W,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),!1))}},circle:function(O,F,B,W){if("translucent"===O.renderPass){var fe=B.paint.get("circle-opacity"),ge=B.paint.get("circle-stroke-width"),we=B.paint.get("circle-stroke-opacity"),Ee=void 0!==B.layout.get("circle-sort-key").constantOr(1);if(0!==fe.constantOr(1)||0!==ge.constantOr(1)&&0!==we.constantOr(1)){for(var Pe=O.context,$e=Pe.gl,ot=O.depthModeForSublayer(0,nn.ReadOnly),pt=Xe.disabled,Dt=O.colorModeForRenderPass(),zt=[],Pt=0;Pt<W.length;Pt++){var Nt=W[Pt],Et=F.getTile(Nt),Zt=Et.getBucket(B);if(Zt){var qt=Zt.programConfigurations.get(B.id),Jt={programConfiguration:qt,program:O.useProgram("circle",qt),layoutVertexBuffer:Zt.layoutVertexBuffer,indexBuffer:Zt.indexBuffer,uniformValues:Jo(O,Nt,Et,B)};if(Ee)for(var gn=0,On=Zt.segments.get();gn<On.length;gn+=1){var Yn=On[gn];zt.push({segments:new e.SegmentVector([Yn]),sortKey:Yn.sortKey,state:Jt})}else zt.push({segments:Zt.segments,sortKey:0,state:Jt})}}Ee&&zt.sort(function(hi,si){return hi.sortKey-si.sortKey});for(var Hn=0,vr=zt;Hn<vr.length;Hn+=1){var gr=vr[Hn],Pr=gr.state;Pr.program.draw(Pe,$e.TRIANGLES,ot,pt,Dt,ye.disabled,Pr.uniformValues,B.id,Pr.layoutVertexBuffer,Pr.indexBuffer,gr.segments,B.paint,O.transform.zoom,Pr.programConfiguration)}}}},heatmap:function(O,F,B,W){if(0!==B.paint.get("heatmap-opacity"))if("offscreen"===O.renderPass){var fe=O.context,ge=fe.gl,we=Xe.disabled,Ee=new nt([ge.ONE,ge.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Nt,Et,Zt){var qt=Nt.gl;Nt.activeTexture.set(qt.TEXTURE1),Nt.viewport.set([0,0,Et.width/4,Et.height/4]);var On,Yn,Hn,vr,gr,Jt=Zt.heatmapFbo;if(Jt)qt.bindTexture(qt.TEXTURE_2D,Jt.colorAttachment.get()),Nt.bindFramebuffer.set(Jt.framebuffer);else{var gn=qt.createTexture();qt.bindTexture(qt.TEXTURE_2D,gn),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_WRAP_S,qt.CLAMP_TO_EDGE),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_WRAP_T,qt.CLAMP_TO_EDGE),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_MIN_FILTER,qt.LINEAR),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_MAG_FILTER,qt.LINEAR),Hn=gn,vr=Jt=Zt.heatmapFbo=Nt.createFramebuffer(Et.width/4,Et.height/4,!1),(gr=(On=Nt).gl).texImage2D(gr.TEXTURE_2D,0,gr.RGBA,(Yn=Et).width/4,Yn.height/4,0,gr.RGBA,On.extRenderToTextureHalfFloat?On.extTextureHalfFloat.HALF_FLOAT_OES:gr.UNSIGNED_BYTE,null),vr.colorAttachment.set(Hn)}})(fe,O,B),fe.clear({color:e.Color.transparent});for(var Pe=0;Pe<W.length;Pe++){var $e=W[Pe];if(!F.hasRenderableParent($e)){var ot=F.getTile($e),pt=ot.getBucket(B);if(pt){var Dt=pt.programConfigurations.get(B.id);O.useProgram("heatmap",Dt).draw(fe,ge.TRIANGLES,nn.disabled,we,Ee,ye.disabled,ds($e.posMatrix,ot,O.transform.zoom,B.paint.get("heatmap-intensity")),B.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,B.paint,O.transform.zoom,Dt)}}}fe.viewport.set([0,0,O.width,O.height])}else"translucent"===O.renderPass&&(O.context.setColorMode(O.colorModeForRenderPass()),function(Nt,Et){var Zt=Nt.context,qt=Zt.gl,Jt=Et.heatmapFbo;if(Jt){Zt.activeTexture.set(qt.TEXTURE0),qt.bindTexture(qt.TEXTURE_2D,Jt.colorAttachment.get()),Zt.activeTexture.set(qt.TEXTURE1);var gn=Et.colorRampTexture;gn||(gn=Et.colorRampTexture=new e.Texture(Zt,Et.colorRamp,qt.RGBA)),gn.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),Nt.useProgram("heatmapTexture").draw(Zt,qt.TRIANGLES,nn.disabled,Xe.disabled,Nt.colorModeForRenderPass(),ye.disabled,function(On,Yn,Hn,vr){var gr=e.create();e.ortho(gr,0,On.width,On.height,0,0,1);var Pr=On.context.gl;return{u_matrix:gr,u_world:[Pr.drawingBufferWidth,Pr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Yn.paint.get("heatmap-opacity")}}(Nt,Et),Et.id,Nt.viewportBuffer,Nt.quadTriangleIndexBuffer,Nt.viewportSegments,Et.paint,Nt.transform.zoom)}}(O,B))},line:function(O,F,B,W){if("translucent"===O.renderPass){var fe=B.paint.get("line-opacity"),ge=B.paint.get("line-width");if(0!==fe.constantOr(1)&&0!==ge.constantOr(1)){var we=O.depthModeForSublayer(0,nn.ReadOnly),Ee=O.colorModeForRenderPass(),Pe=B.paint.get("line-dasharray"),$e=B.paint.get("line-pattern"),ot=$e.constantOr(1),pt=B.paint.get("line-gradient"),Dt=B.getCrossfadeParameters(),zt=ot?"linePattern":Pe?"lineSDF":pt?"lineGradient":"line",Pt=O.context,Nt=Pt.gl,Et=!0;if(pt){Pt.activeTexture.set(Nt.TEXTURE0);var Zt=B.gradientTexture;if(!B.gradient)return;Zt||(Zt=B.gradientTexture=new e.Texture(Pt,B.gradient,Nt.RGBA)),Zt.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE)}for(var qt=0,Jt=W;qt<Jt.length;qt+=1){var gn=Jt[qt],On=F.getTile(gn);if(!ot||On.patternsLoaded()){var Yn=On.getBucket(B);if(Yn){var Hn=Yn.programConfigurations.get(B.id),vr=O.context.program.get(),gr=O.useProgram(zt,Hn),Pr=Et||gr.program!==vr,Cr=$e.constantOr(null);if(Cr&&On.imageAtlas){var ii=On.imageAtlas,di=ii.patternPositions[Cr.to.toString()],Oi=ii.patternPositions[Cr.from.toString()];di&&Oi&&Hn.setConstantPatternPositions(di,Oi)}var ur=ot?We(O,On,B,Dt):Pe?tt(O,On,B,Pe,Dt):pt?oa(O,On,B):Ko(O,On,B);ot?(Pt.activeTexture.set(Nt.TEXTURE0),On.imageAtlasTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE),Hn.updatePaintBuffers(Dt)):Pe&&(Pr||O.lineAtlas.dirty)&&(Pt.activeTexture.set(Nt.TEXTURE0),O.lineAtlas.bind(Pt)),gr.draw(Pt,Nt.TRIANGLES,we,O.stencilModeForClipping(gn),Ee,ye.disabled,ur,B.id,Yn.layoutVertexBuffer,Yn.indexBuffer,Yn.segments,B.paint,O.transform.zoom,Hn),Et=!1}}}}}},fill:function(O,F,B,W){var fe=B.paint.get("fill-color"),ge=B.paint.get("fill-opacity");if(0!==ge.constantOr(1)){var we=O.colorModeForRenderPass(),Ee=B.paint.get("fill-pattern"),Pe=O.opaquePassEnabledForLayer()&&!Ee.constantOr(1)&&1===fe.constantOr(e.Color.transparent).a&&1===ge.constantOr(0)?"opaque":"translucent";if(O.renderPass===Pe){var $e=O.depthModeForSublayer(1,"opaque"===O.renderPass?nn.ReadWrite:nn.ReadOnly);$r(O,F,B,W,$e,we,!1)}if("translucent"===O.renderPass&&B.paint.get("fill-antialias")){var ot=O.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,nn.ReadOnly);$r(O,F,B,W,ot,we,!0)}}},"fill-extrusion":function(O,F,B,W){var fe=B.paint.get("fill-extrusion-opacity");if(0!==fe&&"translucent"===O.renderPass){var ge=new nn(O.context.gl.LEQUAL,nn.ReadWrite,O.depthRangeFor3D);if(1!==fe||B.paint.get("fill-extrusion-pattern").constantOr(1))Li(O,F,B,W,ge,Xe.disabled,nt.disabled),Li(O,F,B,W,ge,O.stencilModeFor3D(),O.colorModeForRenderPass());else{var we=O.colorModeForRenderPass();Li(O,F,B,W,ge,Xe.disabled,we)}}},hillshade:function(O,F,B,W){if("offscreen"===O.renderPass||"translucent"===O.renderPass){for(var fe=O.context,ge=F.getSource().maxzoom,we=O.depthModeForSublayer(0,nn.ReadOnly),Ee=O.colorModeForRenderPass(),Pe="translucent"===O.renderPass?O.stencilConfigForOverlap(W):[{},W],$e=Pe[0],ot=0,pt=Pe[1];ot<pt.length;ot+=1){var Dt=pt[ot],zt=F.getTile(Dt);zt.needsHillshadePrepare&&"offscreen"===O.renderPass?ia(O,zt,B,ge,we,Xe.disabled,Ee):"translucent"===O.renderPass&&Gi(O,zt,B,we,$e[Dt.overscaledZ],Ee)}fe.viewport.set([0,0,O.width,O.height])}},raster:function(O,F,B,W){if("translucent"===O.renderPass&&0!==B.paint.get("raster-opacity")&&W.length)for(var fe=O.context,ge=fe.gl,we=F.getSource(),Ee=O.useProgram("raster"),Pe=O.colorModeForRenderPass(),$e=we instanceof X?[{},W]:O.stencilConfigForOverlap(W),ot=$e[0],pt=$e[1],Dt=pt[pt.length-1].overscaledZ,zt=!O.options.moving,Pt=0,Nt=pt;Pt<Nt.length;Pt+=1){var Et=Nt[Pt],Zt=O.depthModeForSublayer(Et.overscaledZ-Dt,1===B.paint.get("raster-opacity")?nn.ReadWrite:nn.ReadOnly,ge.LESS),qt=F.getTile(Et),Jt=O.transform.calculatePosMatrix(Et.toUnwrapped(),zt);qt.registerFadeDuration(B.paint.get("raster-fade-duration"));var gn=F.findLoadedParent(Et,0),On=Wi(qt,gn,F,B,O.transform),Yn=void 0,Hn=void 0,vr="nearest"===B.paint.get("raster-resampling")?ge.NEAREST:ge.LINEAR;fe.activeTexture.set(ge.TEXTURE0),qt.texture.bind(vr,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(ge.TEXTURE1),gn?(gn.texture.bind(vr,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),Yn=Math.pow(2,gn.tileID.overscaledZ-qt.tileID.overscaledZ),Hn=[qt.tileID.canonical.x*Yn%1,qt.tileID.canonical.y*Yn%1]):qt.texture.bind(vr,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST);var gr=kt(Jt,Hn||[0,0],Yn||1,On,B);we instanceof X?Ee.draw(fe,ge.TRIANGLES,Zt,Xe.disabled,Pe,ye.disabled,gr,B.id,we.boundsBuffer,O.quadTriangleIndexBuffer,we.boundsSegments):Ee.draw(fe,ge.TRIANGLES,Zt,ot[Et.overscaledZ],Pe,ye.disabled,gr,B.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,F,B){var W=B.paint.get("background-color"),fe=B.paint.get("background-opacity");if(0!==fe){var ge=O.context,we=ge.gl,Ee=O.transform,Pe=Ee.tileSize,$e=B.paint.get("background-pattern");if(!O.isPatternMissing($e)){var ot=!$e&&1===W.a&&1===fe&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass===ot){var pt=Xe.disabled,Dt=O.depthModeForSublayer(0,"opaque"===ot?nn.ReadWrite:nn.ReadOnly),zt=O.colorModeForRenderPass(),Pt=O.useProgram($e?"backgroundPattern":"background"),Nt=Ee.coveringTiles({tileSize:Pe});$e&&(ge.activeTexture.set(we.TEXTURE0),O.imageManager.bind(O.context));for(var Et=B.getCrossfadeParameters(),Zt=0,qt=Nt;Zt<qt.length;Zt+=1){var Jt=qt[Zt],gn=O.transform.calculatePosMatrix(Jt.toUnwrapped()),On=$e?Dn(gn,fe,O,$e,{tileID:Jt,tileSize:Pe},Et):vn(gn,fe,W);Pt.draw(ge,we.TRIANGLES,Dt,pt,zt,ye.disabled,On,B.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}}}},debug:function(O,F,B){for(var W=0;W<B.length;W++)Do(O,F,B[W])},custom:function(O,F,B){var W=O.context,fe=B.implementation;if("offscreen"===O.renderPass){var ge=fe.prerender;ge&&(O.setCustomLayerDefaults(),W.setColorMode(O.colorModeForRenderPass()),ge.call(fe,W.gl,O.transform.customLayerMatrix()),W.setDirty(),O.setBaseState())}else if("translucent"===O.renderPass){O.setCustomLayerDefaults(),W.setColorMode(O.colorModeForRenderPass()),W.setStencilMode(Xe.disabled);var we="3d"===fe.renderingMode?new nn(O.context.gl.LEQUAL,nn.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,nn.ReadOnly);W.setDepthMode(we),fe.render(W.gl,O.transform.customLayerMatrix()),W.setDirty(),O.setBaseState(),W.bindFramebuffer.set(null)}}},ea=function(O,F){this.context=new Ce(O),this.transform=F,this._tileTextures={},this.setup(),this.numSublayers=Ue.maxUnderzooming+Ue.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new sr,this.gpuTimers={}};ea.prototype.resize=function(O,F){if(this.width=O*e.browser.devicePixelRatio,this.height=F*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var B=0,W=this.style._order;B<W.length;B+=1)this.style._layers[W[B]].resize()},ea.prototype.setup=function(){var O=this.context,F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=O.createVertexBuffer(F,qr.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var B=new e.StructArrayLayout2i4;B.emplaceBack(0,0),B.emplaceBack(e.EXTENT,0),B.emplaceBack(0,e.EXTENT),B.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=O.createVertexBuffer(B,qr.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var W=new e.StructArrayLayout4i8;W.emplaceBack(0,0,0,0),W.emplaceBack(e.EXTENT,0,e.EXTENT,0),W.emplaceBack(0,e.EXTENT,0,e.EXTENT),W.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=O.createVertexBuffer(W,ne.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=O.createVertexBuffer(fe,qr.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ge=new e.StructArrayLayout1ui2;ge.emplaceBack(0),ge.emplaceBack(1),ge.emplaceBack(3),ge.emplaceBack(2),ge.emplaceBack(0),this.tileBorderIndexBuffer=O.createIndexBuffer(ge);var we=new e.StructArrayLayout3ui6;we.emplaceBack(0,1,2),we.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=O.createIndexBuffer(we),this.emptyTexture=new e.Texture(O,{width:1,height:1,data:new Uint8Array([0,0,0,0])},O.gl.RGBA);var Ee=this.context.gl;this.stencilClearMode=new Xe({func:Ee.ALWAYS,mask:0},0,255,Ee.ZERO,Ee.ZERO,Ee.ZERO)},ea.prototype.clearStencil=function(){var O=this.context,F=O.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var B=e.create();e.ortho(B,0,this.width,this.height,0,0,1),e.scale(B,B,[F.drawingBufferWidth,F.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(O,F.TRIANGLES,nn.disabled,this.stencilClearMode,nt.disabled,ye.disabled,go(B),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ea.prototype._renderTileClippingMasks=function(O,F){if(this.currentStencilSource!==O.source&&O.isTileClipped()&&F&&F.length){this.currentStencilSource=O.source;var B=this.context,W=B.gl;this.nextStencilID+F.length>256&&this.clearStencil(),B.setColorMode(nt.disabled),B.setDepthMode(nn.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ge=0,we=F;ge<we.length;ge+=1){var Ee=we[ge],Pe=this._tileClippingMaskIDs[Ee.key]=this.nextStencilID++;fe.draw(B,W.TRIANGLES,nn.disabled,new Xe({func:W.ALWAYS,mask:0},Pe,255,W.KEEP,W.KEEP,W.REPLACE),nt.disabled,ye.disabled,go(Ee.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ea.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var O=this.nextStencilID++,F=this.context.gl;return new Xe({func:F.NOTEQUAL,mask:255},O,255,F.KEEP,F.KEEP,F.REPLACE)},ea.prototype.stencilModeForClipping=function(O){var F=this.context.gl;return new Xe({func:F.EQUAL,mask:255},this._tileClippingMaskIDs[O.key],0,F.KEEP,F.KEEP,F.REPLACE)},ea.prototype.stencilConfigForOverlap=function(O){var F,B=this.context.gl,W=O.sort(function(Pe,$e){return $e.overscaledZ-Pe.overscaledZ}),fe=W[W.length-1].overscaledZ,ge=W[0].overscaledZ-fe+1;if(ge>1){this.currentStencilSource=void 0,this.nextStencilID+ge>256&&this.clearStencil();for(var we={},Ee=0;Ee<ge;Ee++)we[Ee+fe]=new Xe({func:B.GEQUAL,mask:255},Ee+this.nextStencilID,255,B.KEEP,B.KEEP,B.REPLACE);return this.nextStencilID+=ge,[we,W]}return[(F={},F[fe]=Xe.disabled,F),W]},ea.prototype.colorModeForRenderPass=function(){var O=this.context.gl;return this._showOverdrawInspector?new nt([O.CONSTANT_COLOR,O.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?nt.unblended:nt.alphaBlended},ea.prototype.depthModeForSublayer=function(O,F,B){if(!this.opaquePassEnabledForLayer())return nn.disabled;var W=1-((1+this.currentLayer)*this.numSublayers+O)*this.depthEpsilon;return new nn(B||this.context.gl.LEQUAL,F,[W,W])},ea.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ea.prototype.render=function(O,F){var B=this;this.style=O,this.options=F,this.lineAtlas=O.lineAtlas,this.imageManager=O.imageManager,this.glyphManager=O.glyphManager,this.symbolFadeChange=O.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var W=this.style._order,fe=this.style.sourceCaches;for(var ge in fe){var we=fe[ge];we.used&&we.prepare(this.context)}var Ee,Pe,$e={},ot={},pt={};for(var Dt in fe){var zt=fe[Dt];$e[Dt]=zt.getVisibleCoordinates(),ot[Dt]=$e[Dt].slice().reverse(),pt[Dt]=zt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Pt=0;Pt<W.length;Pt++)if(this.style._layers[W[Pt]].is3D()){this.opaquePassCutoff=Pt;break}this.renderPass="offscreen";for(var Et=0,Zt=W;Et<Zt.length;Et+=1){var Jt=this.style._layers[Zt[Et]];if(Jt.hasOffscreenPass()&&!Jt.isHidden(this.transform.zoom)){var gn=ot[Jt.source];("custom"===Jt.type||gn.length)&&this.renderLayer(this,fe[Jt.source],Jt,gn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:F.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=F.showOverdrawInspector,this.depthRangeFor3D=[0,1-(O._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=W.length-1;this.currentLayer>=0;this.currentLayer--){var On=this.style._layers[W[this.currentLayer]],Yn=fe[On.source],Hn=$e[On.source];this._renderTileClippingMasks(On,Hn),this.renderLayer(this,Yn,On,Hn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<W.length;this.currentLayer++){var vr=this.style._layers[W[this.currentLayer]],gr=fe[vr.source],Pr=("symbol"===vr.type?pt:ot)[vr.source];this._renderTileClippingMasks(vr,$e[vr.source]),this.renderLayer(this,gr,vr,Pr)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(Cr){Cr.source&&!Cr.isHidden(B.transform.zoom)&&(Cr.source!==(Pe&&Pe.id)&&(Pe=B.style.sourceCaches[Cr.source]),(!Ee||Ee.getSource().maxzoom<Pe.getSource().maxzoom)&&(Ee=Pe))}),Ee&&Xa.debug(this,Ee,Ee.getVisibleCoordinates())),this.options.showPadding&&function Na(O){var F=O.transform.padding;ro(O,O.transform.height-(F.top||0),3,aa),ro(O,F.bottom||0,3,Pa),wo(O,F.left||0,3,Ua),wo(O,O.transform.width-(F.right||0),3,ya);var W,fe,ge,we,B=O.transform.centerPoint;Eo(W=O,(fe=B.x)-1,(ge=O.transform.height-B.y)-10,2,20,we=Aa),Eo(W,fe-10,ge-1,20,2,we)}(this),this.context.setDefault()},ea.prototype.renderLayer=function(O,F,B,W){B.isHidden(this.transform.zoom)||("background"===B.type||"custom"===B.type||W.length)&&(this.id=B.id,this.gpuTimingStart(B),Xa[B.type](O,F,B,W,this.style.placement.variableOffsets),this.gpuTimingEnd())},ea.prototype.gpuTimingStart=function(O){if(this.options.gpuTiming){var F=this.context.extTimerQuery,B=this.gpuTimers[O.id];B||(B=this.gpuTimers[O.id]={calls:0,cpuTime:0,query:F.createQueryEXT()}),B.calls++,F.beginQueryEXT(F.TIME_ELAPSED_EXT,B.query)}},ea.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var O=this.context.extTimerQuery;O.endQueryEXT(O.TIME_ELAPSED_EXT)}},ea.prototype.collectGpuTimers=function(){var O=this.gpuTimers;return this.gpuTimers={},O},ea.prototype.queryGpuTimers=function(O){var F={};for(var B in O){var W=O[B],fe=this.context.extTimerQuery,ge=fe.getQueryObjectEXT(W.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(W.query),F[B]=ge}return F},ea.prototype.translatePosMatrix=function(O,F,B,W,fe){if(!B[0]&&!B[1])return O;var ge=fe?"map"===W?this.transform.angle:0:"viewport"===W?-this.transform.angle:0;if(ge){var we=Math.sin(ge),Ee=Math.cos(ge);B=[B[0]*Ee-B[1]*we,B[0]*we+B[1]*Ee]}var Pe=[fe?B[0]:Or(F,B[0],this.transform.zoom),fe?B[1]:Or(F,B[1],this.transform.zoom),0],$e=new Float32Array(16);return e.translate($e,O,Pe),$e},ea.prototype.saveTileTexture=function(O){var F=this._tileTextures[O.size[0]];F?F.push(O):this._tileTextures[O.size[0]]=[O]},ea.prototype.getTileTexture=function(O){var F=this._tileTextures[O];return F&&F.length>0?F.pop():null},ea.prototype.isPatternMissing=function(O){if(!O)return!1;if(!O.from||!O.to)return!0;var F=this.imageManager.getPattern(O.from.toString()),B=this.imageManager.getPattern(O.to.toString());return!F||!B},ea.prototype.useProgram=function(O,F){this.cache=this.cache||{};var B=""+O+(F?F.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[B]||(this.cache[B]=new Ys(this.context,Ls[O],F,Nn[O],this._showOverdrawInspector)),this.cache[B]},ea.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ea.prototype.setBaseState=function(){var O=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(O.FUNC_ADD)},ea.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ea.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Tt=function(O,F){this.points=O,this.planes=F};Tt.fromInvProjectionMatrix=function(O,F,B){var W=Math.pow(2,B),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(we){return e.transformMat4([],we,O)}).map(function(we){return e.scale$1([],we,1/we[3]/F*W)}),ge=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(we){var Ee=e.sub([],fe[we[0]],fe[we[1]]),Pe=e.sub([],fe[we[2]],fe[we[1]]),$e=e.normalize([],e.cross([],Ee,Pe)),ot=-e.dot($e,fe[we[1]]);return $e.concat(ot)});return new Tt(fe,ge)};var Gt=function(O,F){this.min=O,this.max=F,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Gt.prototype.quadrant=function(O){for(var F=[O%2==0,O<2],B=e.clone$2(this.min),W=e.clone$2(this.max),fe=0;fe<F.length;fe++)B[fe]=F[fe]?this.min[fe]:this.center[fe],W[fe]=F[fe]?this.center[fe]:this.max[fe];return W[2]=this.max[2],new Gt(B,W)},Gt.prototype.distanceX=function(O){return Math.max(Math.min(this.max[0],O[0]),this.min[0])-O[0]},Gt.prototype.distanceY=function(O){return Math.max(Math.min(this.max[1],O[1]),this.min[1])-O[1]},Gt.prototype.intersects=function(O){for(var F=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],B=!0,W=0;W<O.planes.length;W++){for(var fe=O.planes[W],ge=0,we=0;we<F.length;we++)ge+=e.dot$1(fe,F[we])>=0;if(0===ge)return 0;ge!==F.length&&(B=!1)}if(B)return 2;for(var Ee=0;Ee<3;Ee++){for(var Pe=Number.MAX_VALUE,$e=-Number.MAX_VALUE,ot=0;ot<O.points.length;ot++){var pt=O.points[ot][Ee]-this.min[Ee];Pe=Math.min(Pe,pt),$e=Math.max($e,pt)}if($e<0||Pe>this.max[Ee]-this.min[Ee])return 0}return 1};var bn=function(O,F,B,W){if(void 0===O&&(O=0),void 0===F&&(F=0),void 0===B&&(B=0),void 0===W&&(W=0),isNaN(O)||O<0||isNaN(F)||F<0||isNaN(B)||B<0||isNaN(W)||W<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=O,this.bottom=F,this.left=B,this.right=W};bn.prototype.interpolate=function(O,F,B){return null!=F.top&&null!=O.top&&(this.top=e.number(O.top,F.top,B)),null!=F.bottom&&null!=O.bottom&&(this.bottom=e.number(O.bottom,F.bottom,B)),null!=F.left&&null!=O.left&&(this.left=e.number(O.left,F.left,B)),null!=F.right&&null!=O.right&&(this.right=e.number(O.right,F.right,B)),this},bn.prototype.getCenter=function(O,F){var B=e.clamp((this.left+O-this.right)/2,0,O),W=e.clamp((this.top+F-this.bottom)/2,0,F);return new e.Point(B,W)},bn.prototype.equals=function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right},bn.prototype.clone=function(){return new bn(this.top,this.bottom,this.left,this.right)},bn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Qt=function(O,F,B,W,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===fe||fe,this._minZoom=O||0,this._maxZoom=F||22,this._minPitch=B??0,this._maxPitch=W??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new bn,this._posMatrixCache={},this._alignedPosMatrixCache={}},wn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Qt.prototype.clone=function(){var O=new Qt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O._center=this._center,O.zoom=this.zoom,O.angle=this.angle,O._fov=this._fov,O._pitch=this._pitch,O._unmodified=this._unmodified,O._edgeInsets=this._edgeInsets.clone(),O._calcMatrices(),O},wn.minZoom.get=function(){return this._minZoom},wn.minZoom.set=function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))},wn.maxZoom.get=function(){return this._maxZoom},wn.maxZoom.set=function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))},wn.minPitch.get=function(){return this._minPitch},wn.minPitch.set=function(O){this._minPitch!==O&&(this._minPitch=O,this.pitch=Math.max(this.pitch,O))},wn.maxPitch.get=function(){return this._maxPitch},wn.maxPitch.set=function(O){this._maxPitch!==O&&(this._maxPitch=O,this.pitch=Math.min(this.pitch,O))},wn.renderWorldCopies.get=function(){return this._renderWorldCopies},wn.renderWorldCopies.set=function(O){void 0===O?O=!0:null===O&&(O=!1),this._renderWorldCopies=O},wn.worldSize.get=function(){return this.tileSize*this.scale},wn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wn.size.get=function(){return new e.Point(this.width,this.height)},wn.bearing.get=function(){return-this.angle/Math.PI*180},wn.bearing.set=function(O){var F=-e.wrap(O,-180,180)*Math.PI/180;this.angle!==F&&(this._unmodified=!1,this.angle=F,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wn.pitch.get=function(){return this._pitch/Math.PI*180},wn.pitch.set=function(O){var F=e.clamp(O,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==F&&(this._unmodified=!1,this._pitch=F,this._calcMatrices())},wn.fov.get=function(){return this._fov/Math.PI*180},wn.fov.set=function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this._unmodified=!1,this._fov=O/180*Math.PI,this._calcMatrices())},wn.zoom.get=function(){return this._zoom},wn.zoom.set=function(O){var F=Math.min(Math.max(O,this.minZoom),this.maxZoom);this._zoom!==F&&(this._unmodified=!1,this._zoom=F,this.scale=this.zoomScale(F),this.tileZoom=Math.floor(F),this.zoomFraction=F-this.tileZoom,this._constrain(),this._calcMatrices())},wn.center.get=function(){return this._center},wn.center.set=function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this._unmodified=!1,this._center=O,this._constrain(),this._calcMatrices())},wn.padding.get=function(){return this._edgeInsets.toJSON()},wn.padding.set=function(O){this._edgeInsets.equals(O)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,O,1),this._calcMatrices())},wn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Qt.prototype.isPaddingEqual=function(O){return this._edgeInsets.equals(O)},Qt.prototype.interpolatePadding=function(O,F,B){this._unmodified=!1,this._edgeInsets.interpolate(O,F,B),this._constrain(),this._calcMatrices()},Qt.prototype.coveringZoomLevel=function(O){var F=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,F)},Qt.prototype.getVisibleUnwrappedCoordinates=function(O){var F=[new e.UnwrappedTileID(0,O)];if(this._renderWorldCopies)for(var B=this.pointCoordinate(new e.Point(0,0)),W=this.pointCoordinate(new e.Point(this.width,0)),fe=this.pointCoordinate(new e.Point(this.width,this.height)),ge=this.pointCoordinate(new e.Point(0,this.height)),we=Math.floor(Math.min(B.x,W.x,fe.x,ge.x)),Ee=Math.floor(Math.max(B.x,W.x,fe.x,ge.x)),Pe=we-1;Pe<=Ee+1;Pe++)0!==Pe&&F.push(new e.UnwrappedTileID(Pe,O));return F},Qt.prototype.coveringTiles=function(O){var F=this.coveringZoomLevel(O),B=F;if(void 0!==O.minzoom&&F<O.minzoom)return[];void 0!==O.maxzoom&&F>O.maxzoom&&(F=O.maxzoom);var W=e.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,F),ge=[fe*W.x,fe*W.y,0],we=Tt.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,F),Ee=O.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ee=F);var Pe=function(Pr){return{aabb:new Gt([Pr*fe,0,0],[(Pr+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Pr,fullyVisible:!1}},$e=[],ot=[],pt=F,Dt=O.reparseOverscaled?B:F;if(this._renderWorldCopies)for(var zt=1;zt<=3;zt++)$e.push(Pe(-zt)),$e.push(Pe(zt));for($e.push(Pe(0));$e.length>0;){var Pt=$e.pop(),Nt=Pt.x,Et=Pt.y,Zt=Pt.fullyVisible;if(!Zt){var qt=Pt.aabb.intersects(we);if(0===qt)continue;Zt=2===qt}var Jt=Pt.aabb.distanceX(ge),gn=Pt.aabb.distanceY(ge),On=Math.max(Math.abs(Jt),Math.abs(gn));if(Pt.zoom===pt||On>3+(1<<pt-Pt.zoom)-2&&Pt.zoom>=Ee)ot.push({tileID:new e.OverscaledTileID(Pt.zoom===pt?Dt:Pt.zoom,Pt.wrap,Pt.zoom,Nt,Et),distanceSq:e.sqrLen([ge[0]-.5-Nt,ge[1]-.5-Et])});else for(var Hn=0;Hn<4;Hn++){var vr=(Nt<<1)+Hn%2,gr=(Et<<1)+(Hn>>1);$e.push({aabb:Pt.aabb.quadrant(Hn),zoom:Pt.zoom+1,x:vr,y:gr,wrap:Pt.wrap,fullyVisible:Zt})}}return ot.sort(function(Pr,Cr){return Pr.distanceSq-Cr.distanceSq}).map(function(Pr){return Pr.tileID})},Qt.prototype.resize=function(O,F){this.width=O,this.height=F,this.pixelsToGLUnits=[2/O,-2/F],this._constrain(),this._calcMatrices()},wn.unmodified.get=function(){return this._unmodified},Qt.prototype.zoomScale=function(O){return Math.pow(2,O)},Qt.prototype.scaleZoom=function(O){return Math.log(O)/Math.LN2},Qt.prototype.project=function(O){var F=e.clamp(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(O.lng)*this.worldSize,e.mercatorYfromLat(F)*this.worldSize)},Qt.prototype.unproject=function(O){return new e.MercatorCoordinate(O.x/this.worldSize,O.y/this.worldSize).toLngLat()},wn.point.get=function(){return this.project(this.center)},Qt.prototype.setLocationAtPoint=function(O,F){var B=this.pointCoordinate(F),W=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(O),ge=new e.MercatorCoordinate(fe.x-(B.x-W.x),fe.y-(B.y-W.y));this.center=this.coordinateLocation(ge),this._renderWorldCopies&&(this.center=this.center.wrap())},Qt.prototype.locationPoint=function(O){return this.coordinatePoint(this.locationCoordinate(O))},Qt.prototype.pointLocation=function(O){return this.coordinateLocation(this.pointCoordinate(O))},Qt.prototype.locationCoordinate=function(O){return e.MercatorCoordinate.fromLngLat(O)},Qt.prototype.coordinateLocation=function(O){return O.toLngLat()},Qt.prototype.pointCoordinate=function(O){var F=[O.x,O.y,0,1],B=[O.x,O.y,1,1];e.transformMat4(F,F,this.pixelMatrixInverse),e.transformMat4(B,B,this.pixelMatrixInverse);var W=F[3],fe=B[3],Ee=F[1]/W,Pe=B[1]/fe,$e=F[2]/W,ot=B[2]/fe,pt=$e===ot?0:(0-$e)/(ot-$e);return new e.MercatorCoordinate(e.number(F[0]/W,B[0]/fe,pt)/this.worldSize,e.number(Ee,Pe,pt)/this.worldSize)},Qt.prototype.coordinatePoint=function(O){var F=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(F,F,this.pixelMatrix),new e.Point(F[0]/F[3],F[1]/F[3])},Qt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Qt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Qt.prototype.setMaxBounds=function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Qt.prototype.calculatePosMatrix=function(O,F){void 0===F&&(F=!1);var B=O.key,W=F?this._alignedPosMatrixCache:this._posMatrixCache;if(W[B])return W[B];var fe=O.canonical,ge=this.worldSize/this.zoomScale(fe.z),we=fe.x+Math.pow(2,fe.z)*O.wrap,Ee=e.identity(new Float64Array(16));return e.translate(Ee,Ee,[we*ge,fe.y*ge,0]),e.scale(Ee,Ee,[ge/e.EXTENT,ge/e.EXTENT,1]),e.multiply(Ee,F?this.alignedProjMatrix:this.projMatrix,Ee),W[B]=new Float32Array(Ee),W[B]},Qt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Qt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var O,F,B,W,fe=-90,ge=90,we=-180,Ee=180,Pe=this.size,$e=this._unmodified;if(this.latRange){var ot=this.latRange;fe=e.mercatorYfromLat(ot[1])*this.worldSize,O=(ge=e.mercatorYfromLat(ot[0])*this.worldSize)-fe<Pe.y?Pe.y/(ge-fe):0}if(this.lngRange){var pt=this.lngRange;we=e.mercatorXfromLng(pt[0])*this.worldSize,F=(Ee=e.mercatorXfromLng(pt[1])*this.worldSize)-we<Pe.x?Pe.x/(Ee-we):0}var Dt=this.point,zt=Math.max(F||0,O||0);if(zt)return this.center=this.unproject(new e.Point(F?(Ee+we)/2:Dt.x,O?(ge+fe)/2:Dt.y)),this.zoom+=this.scaleZoom(zt),this._unmodified=$e,void(this._constraining=!1);if(this.latRange){var Pt=Dt.y,Nt=Pe.y/2;Pt-Nt<fe&&(W=fe+Nt),Pt+Nt>ge&&(W=ge-Nt)}if(this.lngRange){var Et=Dt.x,Zt=Pe.x/2;Et-Zt<we&&(B=we+Zt),Et+Zt>Ee&&(B=Ee-Zt)}void 0===B&&void 0===W||(this.center=this.unproject(new e.Point(void 0!==B?B:Dt.x,void 0!==W?W:Dt.y))),this._unmodified=$e,this._constraining=!1}},Qt.prototype._calcMatrices=function(){if(this.height){var F=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var B=Math.PI/2+this._pitch,W=this._fov*(.5+F.y/this.height),fe=Math.sin(W)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-B-W,.01,Math.PI-.01)),ge=this.point,we=ge.x,Ee=ge.y,Pe=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),$e=this.height/50,ot=new Float64Array(16);e.perspective(ot,this._fov,this.width/this.height,$e,Pe),ot[8]=2*-F.x/this.width,ot[9]=2*F.y/this.height,e.scale(ot,ot,[1,-1,1]),e.translate(ot,ot,[0,0,-this.cameraToCenterDistance]),e.rotateX(ot,ot,this._pitch),e.rotateZ(ot,ot,this.angle),e.translate(ot,ot,[-we,-Ee,0]),this.mercatorMatrix=e.scale([],ot,[this.worldSize,this.worldSize,this.worldSize]),e.scale(ot,ot,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ot,this.invProjMatrix=e.invert([],this.projMatrix);var pt=this.width%2/2,Dt=this.height%2/2,zt=Math.cos(this.angle),Pt=Math.sin(this.angle),Nt=we-Math.round(we)+zt*pt+Pt*Dt,Et=Ee-Math.round(Ee)+zt*Dt+Pt*pt,Zt=new Float64Array(ot);if(e.translate(Zt,Zt,[Nt>.5?Nt-1:Nt,Et>.5?Et-1:Et,0]),this.alignedProjMatrix=Zt,ot=e.create(),e.scale(ot,ot,[this.width/2,-this.height/2,1]),e.translate(ot,ot,[1,-1,0]),this.labelPlaneMatrix=ot,ot=e.create(),e.scale(ot,ot,[1,-1,1]),e.translate(ot,ot,[-1,-1,0]),e.scale(ot,ot,[2/this.width,2/this.height,1]),this.glCoordMatrix=ot,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ot=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=ot,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Qt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new e.Point(0,0)),F=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(F,F,this.pixelMatrix)[3]/this.cameraToCenterDistance},Qt.prototype.getCameraPoint=function(){var F=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,F))},Qt.prototype.getCameraQueryGeometry=function(O){var F=this.getCameraPoint();if(1===O.length)return[O[0],F];for(var B=F.x,W=F.y,fe=F.x,ge=F.y,we=0,Ee=O;we<Ee.length;we+=1){var Pe=Ee[we];B=Math.min(B,Pe.x),W=Math.min(W,Pe.y),fe=Math.max(fe,Pe.x),ge=Math.max(ge,Pe.y)}return[new e.Point(B,W),new e.Point(fe,W),new e.Point(fe,ge),new e.Point(B,ge),new e.Point(B,W)]},Object.defineProperties(Qt.prototype,wn);var qn=function(O){var F,W,fe,ge;this._hashName=O&&encodeURIComponent(O),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(F=this._updateHashUnthrottled.bind(this),300,W=!1,fe=null,ge=function(){fe=null,W&&(F(),fe=setTimeout(ge,300),W=!1)},function(){return W=!0,fe||ge(),fe})};qn.prototype.addTo=function(O){return this._map=O,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},qn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},qn.prototype.getHashString=function(O){var F=this._map.getCenter(),B=Math.round(100*this._map.getZoom())/100,W=Math.ceil((B*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,W),ge=Math.round(F.lng*fe)/fe,we=Math.round(F.lat*fe)/fe,Ee=this._map.getBearing(),Pe=this._map.getPitch(),$e="";if($e+=O?"/"+ge+"/"+we+"/"+B:B+"/"+we+"/"+ge,(Ee||Pe)&&($e+="/"+Math.round(10*Ee)/10),Pe&&($e+="/"+Math.round(Pe)),this._hashName){var ot=this._hashName,pt=!1,Dt=e.window.location.hash.slice(1).split("&").map(function(zt){var Pt=zt.split("=")[0];return Pt===ot?(pt=!0,Pt+"="+$e):zt}).filter(function(zt){return zt});return pt||Dt.push(ot+"="+$e),"#"+Dt.join("&")}return"#"+$e},qn.prototype._getCurrentHash=function(){var O,F=this,B=e.window.location.hash.replace("#","");return this._hashName?(B.split("&").map(function(W){return W.split("=")}).forEach(function(W){W[0]===F._hashName&&(O=W)}),(O&&O[1]||"").split("/")):B.split("/")},qn.prototype._onHashChange=function(){var O=this._getCurrentHash();if(O.length>=3&&!O.some(function(B){return isNaN(B)})){var F=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(O[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+O[2],+O[1]],zoom:+O[0],bearing:F,pitch:+(O[4]||0)}),!0}return!1},qn.prototype._updateHashUnthrottled=function(){var O=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",O)}catch{}};var tr={linearity:.3,easing:e.bezier(0,0,.3,1)},pr=e.extend({deceleration:2500,maxSpeed:1400},tr),Ar=e.extend({deceleration:20,maxSpeed:1400},tr),br=e.extend({deceleration:1e3,maxSpeed:360},tr),Sr=e.extend({deceleration:1e3,maxSpeed:90},tr),Vr=function(O){this._map=O,this.clear()};function Mr(O,F){(!O.duration||O.duration<F.duration)&&(O.duration=F.duration,O.easing=F.easing)}function Ur(O,F,B){var W=B.maxSpeed,fe=B.linearity,ge=B.deceleration,we=e.clamp(O*fe/(F/1e3),-W,W),Ee=Math.abs(we)/(ge*fe);return{easing:B.easing,duration:1e3*Ee,amount:we*(Ee/2)}}Vr.prototype.clear=function(){this._inertiaBuffer=[]},Vr.prototype.record=function(O){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:O})},Vr.prototype._drainInertiaBuffer=function(){for(var O=this._inertiaBuffer,F=e.browser.now();O.length>0&&F-O[0].time>160;)O.shift()},Vr.prototype._onMoveEnd=function(O){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var F={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},B=0,W=this._inertiaBuffer;B<W.length;B+=1){var fe=W[B].settings;F.zoom+=fe.zoomDelta||0,F.bearing+=fe.bearingDelta||0,F.pitch+=fe.pitchDelta||0,fe.panDelta&&F.pan._add(fe.panDelta),fe.around&&(F.around=fe.around),fe.pinchAround&&(F.pinchAround=fe.pinchAround)}var ge=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,we={};if(F.pan.mag()){var Ee=Ur(F.pan.mag(),ge,e.extend({},pr,O||{}));we.offset=F.pan.mult(Ee.amount/F.pan.mag()),we.center=this._map.transform.center,Mr(we,Ee)}if(F.zoom){var Pe=Ur(F.zoom,ge,Ar);we.zoom=this._map.transform.zoom+Pe.amount,Mr(we,Pe)}if(F.bearing){var $e=Ur(F.bearing,ge,br);we.bearing=this._map.transform.bearing+e.clamp($e.amount,-179,179),Mr(we,$e)}if(F.pitch){var ot=Ur(F.pitch,ge,Sr);we.pitch=this._map.transform.pitch+ot.amount,Mr(we,ot)}if(we.zoom||we.bearing){var pt=void 0===F.pinchAround?F.around:F.pinchAround;we.around=pt?this._map.unproject(pt):this._map.getCenter()}return this.clear(),e.extend(we,{noMoveStart:!0})}};var ei=function(O){function F(W,fe,ge,we){void 0===we&&(we={});var Ee=t.mousePos(fe.getCanvasContainer(),ge),Pe=fe.unproject(Ee);O.call(this,W,e.extend({point:Ee,lngLat:Pe,originalEvent:ge},we)),this._defaultPrevented=!1,this.target=fe}O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F;var B={defaultPrevented:{configurable:!0}};return F.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(F.prototype,B),F}(e.Event),ai=function(O){function F(W,fe,ge){var we="touchend"===W?ge.changedTouches:ge.touches,Ee=t.touchPos(fe.getCanvasContainer(),we),Pe=Ee.map(function(pt){return fe.unproject(pt)}),$e=Ee.reduce(function(pt,Dt,zt,Pt){return pt.add(Dt.div(Pt.length))},new e.Point(0,0)),ot=fe.unproject($e);O.call(this,W,{points:Ee,point:$e,lngLats:Pe,lngLat:ot,originalEvent:ge}),this._defaultPrevented=!1}O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F;var B={defaultPrevented:{configurable:!0}};return F.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(F.prototype,B),F}(e.Event),yi=function(O){function F(W,fe,ge){O.call(this,W,{originalEvent:ge}),this._defaultPrevented=!1}O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F;var B={defaultPrevented:{configurable:!0}};return F.prototype.preventDefault=function(){this._defaultPrevented=!0},B.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(F.prototype,B),F}(e.Event),fr=function(O,F){this._map=O,this._clickTolerance=F.clickTolerance};fr.prototype.reset=function(){delete this._mousedownPos},fr.prototype.wheel=function(O){return this._firePreventable(new yi(O.type,this._map,O))},fr.prototype.mousedown=function(O,F){return this._mousedownPos=F,this._firePreventable(new ei(O.type,this._map,O))},fr.prototype.mouseup=function(O){this._map.fire(new ei(O.type,this._map,O))},fr.prototype.click=function(O,F){this._mousedownPos&&this._mousedownPos.dist(F)>=this._clickTolerance||this._map.fire(new ei(O.type,this._map,O))},fr.prototype.dblclick=function(O){return this._firePreventable(new ei(O.type,this._map,O))},fr.prototype.mouseover=function(O){this._map.fire(new ei(O.type,this._map,O))},fr.prototype.mouseout=function(O){this._map.fire(new ei(O.type,this._map,O))},fr.prototype.touchstart=function(O){return this._firePreventable(new ai(O.type,this._map,O))},fr.prototype.touchmove=function(O){this._map.fire(new ai(O.type,this._map,O))},fr.prototype.touchend=function(O){this._map.fire(new ai(O.type,this._map,O))},fr.prototype.touchcancel=function(O){this._map.fire(new ai(O.type,this._map,O))},fr.prototype._firePreventable=function(O){if(this._map.fire(O),O.defaultPrevented)return{}},fr.prototype.isEnabled=function(){return!0},fr.prototype.isActive=function(){return!1},fr.prototype.enable=function(){},fr.prototype.disable=function(){};var gi=function(O){this._map=O};gi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},gi.prototype.mousemove=function(O){this._map.fire(new ei(O.type,this._map,O))},gi.prototype.mousedown=function(){this._delayContextMenu=!0},gi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ei("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},gi.prototype.contextmenu=function(O){this._delayContextMenu?this._contextMenuEvent=O:this._map.fire(new ei(O.type,this._map,O)),this._map.listens("contextmenu")&&O.preventDefault()},gi.prototype.isEnabled=function(){return!0},gi.prototype.isActive=function(){return!1},gi.prototype.enable=function(){},gi.prototype.disable=function(){};var Je=function(O,F){this._map=O,this._el=O.getCanvasContainer(),this._container=O.getContainer(),this._clickTolerance=F.clickTolerance||1};function at(O,F){for(var B={},W=0;W<O.length;W++)B[O[W].identifier]=F[W];return B}Je.prototype.isEnabled=function(){return!!this._enabled},Je.prototype.isActive=function(){return!!this._active},Je.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Je.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Je.prototype.mousedown=function(O,F){this.isEnabled()&&O.shiftKey&&0===O.button&&(t.disableDrag(),this._startPos=this._lastPos=F,this._active=!0)},Je.prototype.mousemoveWindow=function(O,F){if(this._active){var B=F;if(!(this._lastPos.equals(B)||!this._box&&B.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=B,this._box||(this._box=t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",O));var fe=Math.min(W.x,B.x),ge=Math.max(W.x,B.x),we=Math.min(W.y,B.y),Ee=Math.max(W.y,B.y);t.setTransform(this._box,"translate("+fe+"px,"+we+"px)"),this._box.style.width=ge-fe+"px",this._box.style.height=Ee-we+"px"}}},Je.prototype.mouseupWindow=function(O,F){var B=this;if(this._active&&0===O.button){var W=this._startPos,fe=F;if(this.reset(),t.suppressClick(),W.x!==fe.x||W.y!==fe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:O})),{cameraAnimation:function(ge){return ge.fitScreenCoordinates(W,fe,B._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",O)}},Je.prototype.keydown=function(O){this._active&&27===O.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",O))},Je.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(t.remove(this._box),this._box=null),t.enableDrag(),delete this._startPos,delete this._lastPos},Je.prototype._fireEvent=function(O,F){return this._map.fire(new e.Event(O,{originalEvent:F}))};var Bt=function(O){this.reset(),this.numTouches=O.numTouches};Bt.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Bt.prototype.touchstart=function(O,F,B){(this.centroid||B.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=O.timeStamp),B.length===this.numTouches&&(this.centroid=function(W){for(var fe=new e.Point(0,0),ge=0,we=W;ge<we.length;ge+=1)fe._add(we[ge]);return fe.div(W.length)}(F),this.touches=at(B,F)))},Bt.prototype.touchmove=function(O,F,B){if(!this.aborted&&this.centroid){var W=at(B,F);for(var fe in this.touches){var we=W[fe];(!we||we.dist(this.touches[fe])>30)&&(this.aborted=!0)}}},Bt.prototype.touchend=function(O,F,B){if((!this.centroid||O.timeStamp-this.startTime>500)&&(this.aborted=!0),0===B.length){var W=!this.aborted&&this.centroid;if(this.reset(),W)return W}};var Cn=function(O){this.singleTap=new Bt(O),this.numTaps=O.numTaps,this.reset()};Cn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Cn.prototype.touchstart=function(O,F,B){this.singleTap.touchstart(O,F,B)},Cn.prototype.touchmove=function(O,F,B){this.singleTap.touchmove(O,F,B)},Cn.prototype.touchend=function(O,F,B){var W=this.singleTap.touchend(O,F,B);if(W){var fe=O.timeStamp-this.lastTime<500,ge=!this.lastTap||this.lastTap.dist(W)<30;if(fe&&ge||this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=W,this.count===this.numTaps)return this.reset(),W}};var dr=function(){this._zoomIn=new Cn({numTouches:1,numTaps:2}),this._zoomOut=new Cn({numTouches:2,numTaps:1}),this.reset()};dr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},dr.prototype.touchstart=function(O,F,B){this._zoomIn.touchstart(O,F,B),this._zoomOut.touchstart(O,F,B)},dr.prototype.touchmove=function(O,F,B){this._zoomIn.touchmove(O,F,B),this._zoomOut.touchmove(O,F,B)},dr.prototype.touchend=function(O,F,B){var W=this,fe=this._zoomIn.touchend(O,F,B),ge=this._zoomOut.touchend(O,F,B);return fe?(this._active=!0,O.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()+1,around:we.unproject(fe)},{originalEvent:O})}}):ge?(this._active=!0,O.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()-1,around:we.unproject(ge)},{originalEvent:O})}}):void 0},dr.prototype.touchcancel=function(){this.reset()},dr.prototype.enable=function(){this._enabled=!0},dr.prototype.disable=function(){this._enabled=!1,this.reset()},dr.prototype.isEnabled=function(){return this._enabled},dr.prototype.isActive=function(){return this._active};var cr=function(O){this.reset(),this._clickTolerance=O.clickTolerance||1};cr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},cr.prototype._correctButton=function(O,F){return!1},cr.prototype._move=function(O,F){return{}},cr.prototype.mousedown=function(O,F){if(!this._lastPoint){var B=t.mouseButton(O);this._correctButton(O,B)&&(this._lastPoint=F,this._eventButton=B)}},cr.prototype.mousemoveWindow=function(O,F){var B=this._lastPoint;if(B&&(O.preventDefault(),this._moved||!(F.dist(B)<this._clickTolerance)))return this._moved=!0,this._lastPoint=F,this._move(B,F)},cr.prototype.mouseupWindow=function(O){t.mouseButton(O)===this._eventButton&&(this._moved&&t.suppressClick(),this.reset())},cr.prototype.enable=function(){this._enabled=!0},cr.prototype.disable=function(){this._enabled=!1,this.reset()},cr.prototype.isEnabled=function(){return this._enabled},cr.prototype.isActive=function(){return this._active};var ki=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.mousedown=function(B,W){O.prototype.mousedown.call(this,B,W),this._lastPoint&&(this._active=!0)},F.prototype._correctButton=function(B,W){return 0===W&&!B.ctrlKey},F.prototype._move=function(B,W){return{around:W,panDelta:W.sub(B)}},F}(cr),Di=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype._correctButton=function(B,W){return 0===W&&B.ctrlKey||2===W},F.prototype._move=function(B,W){var fe=.8*(W.x-B.x);if(fe)return this._active=!0,{bearingDelta:fe}},F.prototype.contextmenu=function(B){B.preventDefault()},F}(cr),_i=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype._correctButton=function(B,W){return 0===W&&B.ctrlKey||2===W},F.prototype._move=function(B,W){var fe=-.5*(W.y-B.y);if(fe)return this._active=!0,{pitchDelta:fe}},F.prototype.contextmenu=function(B){B.preventDefault()},F}(cr),$i=function(O){this._minTouches=1,this._clickTolerance=O.clickTolerance||1,this.reset()};$i.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},$i.prototype.touchstart=function(O,F,B){return this._calculateTransform(O,F,B)},$i.prototype.touchmove=function(O,F,B){if(this._active)return O.preventDefault(),this._calculateTransform(O,F,B)},$i.prototype.touchend=function(O,F,B){this._calculateTransform(O,F,B),this._active&&B.length<this._minTouches&&this.reset()},$i.prototype.touchcancel=function(){this.reset()},$i.prototype._calculateTransform=function(O,F,B){B.length>0&&(this._active=!0);var W=at(B,F),fe=new e.Point(0,0),ge=new e.Point(0,0),we=0;for(var Ee in W){var Pe=W[Ee],$e=this._touches[Ee];$e&&(fe._add(Pe),ge._add(Pe.sub($e)),we++,W[Ee]=Pe)}if(this._touches=W,!(we<this._minTouches)&&ge.mag()){var ot=ge.div(we);if(this._sum._add(ot),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(we),panDelta:ot}}},$i.prototype.enable=function(){this._enabled=!0},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var Bi=function(){this.reset()};function Ta(O,F,B){for(var W=0;W<O.length;W++)if(O[W].identifier===B)return F[W]}function xi(O,F){return Math.log(O/F)/Math.LN2}Bi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Bi.prototype._start=function(O){},Bi.prototype._move=function(O,F,B){return{}},Bi.prototype.touchstart=function(O,F,B){this._firstTwoTouches||B.length<2||(this._firstTwoTouches=[B[0].identifier,B[1].identifier],this._start([F[0],F[1]]))},Bi.prototype.touchmove=function(O,F,B){if(this._firstTwoTouches){O.preventDefault();var W=this._firstTwoTouches,ge=W[1],we=Ta(B,F,W[0]),Ee=Ta(B,F,ge);if(we&&Ee){var Pe=this._aroundCenter?null:we.add(Ee).div(2);return this._move([we,Ee],Pe,O)}}},Bi.prototype.touchend=function(O,F,B){if(this._firstTwoTouches){var W=this._firstTwoTouches,ge=W[1],we=Ta(B,F,W[0]),Ee=Ta(B,F,ge);we&&Ee||(this._active&&t.suppressClick(),this.reset())}},Bi.prototype.touchcancel=function(){this.reset()},Bi.prototype.enable=function(O){this._enabled=!0,this._aroundCenter=!!O&&"center"===O.around},Bi.prototype.disable=function(){this._enabled=!1,this.reset()},Bi.prototype.isEnabled=function(){return this._enabled},Bi.prototype.isActive=function(){return this._active};var _a=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.reset=function(){O.prototype.reset.call(this),delete this._distance,delete this._startDistance},F.prototype._start=function(B){this._startDistance=this._distance=B[0].dist(B[1])},F.prototype._move=function(B,W){var fe=this._distance;if(this._distance=B[0].dist(B[1]),this._active||!(Math.abs(xi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xi(this._distance,fe),pinchAround:W}},F}(Bi);function $a(O,F){return 180*O.angleWith(F)/Math.PI}var Ps=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.reset=function(){O.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},F.prototype._start=function(B){this._startVector=this._vector=B[0].sub(B[1]),this._minDiameter=B[0].dist(B[1])},F.prototype._move=function(B,W){var fe=this._vector;if(this._vector=B[0].sub(B[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$a(this._vector,fe),pinchAround:W}},F.prototype._isBelowThreshold=function(B){this._minDiameter=Math.min(this._minDiameter,B.mag());var W=25/(Math.PI*this._minDiameter)*360,fe=$a(B,this._startVector);return Math.abs(fe)<W},F}(Bi);function To(O){return Math.abs(O.y)>Math.abs(O.x)}var ca=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.reset=function(){O.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},F.prototype._start=function(B){this._lastPoints=B,To(B[0].sub(B[1]))&&(this._valid=!1)},F.prototype._move=function(B,W,fe){var ge=B[0].sub(this._lastPoints[0]),we=B[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ge,we,fe.timeStamp),this._valid)return this._lastPoints=B,this._active=!0,{pitchDelta:(ge.y+we.y)/2*-.5}},F.prototype.gestureBeginsVertically=function(B,W,fe){if(void 0!==this._valid)return this._valid;var ge=B.mag()>=2,we=W.mag()>=2;if(ge||we){if(!ge||!we)return void 0===this._firstMove&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var Ee=B.y>0==W.y>0;return To(B)&&To(W)&&Ee}},F}(Bi),Fi={panStep:100,bearingStep:15,pitchStep:10},Ja=function(){var O=Fi;this._panStep=O.panStep,this._bearingStep=O.bearingStep,this._pitchStep=O.pitchStep};function is(O){return O*(2-O)}Ja.prototype.reset=function(){this._active=!1},Ja.prototype.keydown=function(O){var F=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var B=0,W=0,fe=0,ge=0,we=0;switch(O.keyCode){case 61:case 107:case 171:case 187:B=1;break;case 189:case 109:case 173:B=-1;break;case 37:O.shiftKey?W=-1:(O.preventDefault(),ge=-1);break;case 39:O.shiftKey?W=1:(O.preventDefault(),ge=1);break;case 38:O.shiftKey?fe=1:(O.preventDefault(),we=-1);break;case 40:O.shiftKey?fe=-1:(O.preventDefault(),we=1);break;default:return}return{cameraAnimation:function(Ee){var Pe=Ee.getZoom();Ee.easeTo({duration:300,easeId:"keyboardHandler",easing:is,zoom:B?Math.round(Pe)+B*(O.shiftKey?2:1):Pe,bearing:Ee.getBearing()+W*F._bearingStep,pitch:Ee.getPitch()+fe*F._pitchStep,offset:[-ge*F._panStep,-we*F._panStep],center:Ee.getCenter()},{originalEvent:O})}}}},Ja.prototype.enable=function(){this._enabled=!0},Ja.prototype.disable=function(){this._enabled=!1,this.reset()},Ja.prototype.isEnabled=function(){return this._enabled},Ja.prototype.isActive=function(){return this._active};var ba=function(O,F){this._map=O,this._el=O.getCanvasContainer(),this._handler=F,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};ba.prototype.setZoomRate=function(O){this._defaultZoomRate=O},ba.prototype.setWheelZoomRate=function(O){this._wheelZoomRate=O},ba.prototype.isEnabled=function(){return!!this._enabled},ba.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},ba.prototype.isZooming=function(){return!!this._zooming},ba.prototype.enable=function(O){this.isEnabled()||(this._enabled=!0,this._aroundCenter=O&&"center"===O.around)},ba.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ba.prototype.wheel=function(O){if(this.isEnabled()){var F=O.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*O.deltaY:O.deltaY,B=e.browser.now(),W=B-(this._lastWheelEventTime||0);this._lastWheelEventTime=B,0!==F&&F%4.000244140625==0?this._type="wheel":0!==F&&Math.abs(F)<4?this._type="trackpad":W>400?(this._type=null,this._lastValue=F,this._timeout=setTimeout(this._onTimeout,40,O)):this._type||(this._type=Math.abs(W*F)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,F+=this._lastValue)),O.shiftKey&&F&&(F/=4),this._type&&(this._lastWheelEvent=O,this._delta-=F,this._active||this._start(O)),O.preventDefault()}},ba.prototype._onTimeout=function(O){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(O)},ba.prototype._start=function(O){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var F=t.mousePos(this._el,O);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(F)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ba.prototype.renderFrame=function(){return this._onScrollFrame()},ba.prototype._onScrollFrame=function(){var O=this;if(this._frameId&&(this._frameId=null,this.isActive())){var F=this._map.transform;if(0!==this._delta){var B="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,W=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&0!==W&&(W=1/W);var fe="number"==typeof this._targetZoom?F.zoomScale(this._targetZoom):F.scale;this._targetZoom=Math.min(F.maxZoom,Math.max(F.minZoom,F.scaleZoom(fe*W))),"wheel"===this._type&&(this._startZoom=F.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ge,we="number"==typeof this._targetZoom?this._targetZoom:F.zoom,Ee=this._startZoom,Pe=this._easing,$e=!1;if("wheel"===this._type&&Ee&&Pe){var ot=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),pt=Pe(ot);ge=e.number(Ee,we,pt),ot<1?this._frameId||(this._frameId=!0):$e=!0}else ge=we,$e=!0;return this._active=!0,$e&&(this._active=!1,this._finishTimeout=setTimeout(function(){O._zooming=!1,O._handler._triggerRenderFrame(),delete O._targetZoom,delete O._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!$e,zoomDelta:ge-F.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ba.prototype._smoothOutEasing=function(O){var F=e.ease;if(this._prevEase){var B=this._prevEase,W=(e.browser.now()-B.start)/B.duration,fe=B.easing(W+.01)-B.easing(W),ge=.27/Math.sqrt(fe*fe+1e-4)*.01,we=Math.sqrt(.0729-ge*ge);F=e.bezier(ge,we,.25,1)}return this._prevEase={start:e.browser.now(),duration:O,easing:F},F},ba.prototype.reset=function(){this._active=!1};var io=function(O,F){this._clickZoom=O,this._tapZoom=F};io.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},io.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},io.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},io.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Mo=function(){this.reset()};Mo.prototype.reset=function(){this._active=!1},Mo.prototype.dblclick=function(O,F){return O.preventDefault(),{cameraAnimation:function(B){B.easeTo({duration:300,zoom:B.getZoom()+(O.shiftKey?-1:1),around:B.unproject(F)},{originalEvent:O})}}},Mo.prototype.enable=function(){this._enabled=!0},Mo.prototype.disable=function(){this._enabled=!1,this.reset()},Mo.prototype.isEnabled=function(){return this._enabled},Mo.prototype.isActive=function(){return this._active};var Ca=function(){this._tap=new Cn({numTouches:1,numTaps:1}),this.reset()};Ca.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ca.prototype.touchstart=function(O,F,B){this._swipePoint||(this._tapTime&&O.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?B.length>0&&(this._swipePoint=F[0],this._swipeTouch=B[0].identifier):this._tap.touchstart(O,F,B))},Ca.prototype.touchmove=function(O,F,B){if(this._tapTime){if(this._swipePoint){if(B[0].identifier!==this._swipeTouch)return;var W=F[0],fe=W.y-this._swipePoint.y;return this._swipePoint=W,O.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(O,F,B)},Ca.prototype.touchend=function(O,F,B){this._tapTime?this._swipePoint&&0===B.length&&this.reset():this._tap.touchend(O,F,B)&&(this._tapTime=O.timeStamp)},Ca.prototype.touchcancel=function(){this.reset()},Ca.prototype.enable=function(){this._enabled=!0},Ca.prototype.disable=function(){this._enabled=!1,this.reset()},Ca.prototype.isEnabled=function(){return this._enabled},Ca.prototype.isActive=function(){return this._active};var Uo=function(O,F,B){this._el=O,this._mousePan=F,this._touchPan=B};Uo.prototype.enable=function(O){this._inertiaOptions=O||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Uo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Uo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Uo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Sa=function(O,F,B){this._pitchWithRotate=O.pitchWithRotate,this._mouseRotate=F,this._mousePitch=B};Sa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Sa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Sa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Sa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ho=function(O,F,B,W){this._el=O,this._touchZoom=F,this._touchRotate=B,this._tapDragZoom=W,this._rotationDisabled=!1,this._enabled=!0};Ho.prototype.enable=function(O){this._touchZoom.enable(O),this._rotationDisabled||this._touchRotate.enable(O),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ho.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ho.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ho.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ho.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ho.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var el=function(O){return O.zoom||O.drag||O.pitch||O.rotate},Ws=function(O){function F(){O.apply(this,arguments)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F}(e.Event);function Cl(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}var vo=function(O,F){this._map=O,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vr(O),this._bearingSnap=F.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(F),e.bindAll(["handleEvent","handleWindowEvent"],this);var B=this._el;this._listeners=[[B,"touchstart",{passive:!1}],[B,"touchmove",{passive:!1}],[B,"touchend",void 0],[B,"touchcancel",void 0],[B,"mousedown",void 0],[B,"mousemove",void 0],[B,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[B,"mouseover",void 0],[B,"mouseout",void 0],[B,"dblclick",void 0],[B,"click",void 0],[B,"keydown",{capture:!1}],[B,"keyup",void 0],[B,"wheel",{passive:!1}],[B,"contextmenu",void 0],[e.window,"blur",void 0]];for(var W=0,fe=this._listeners;W<fe.length;W+=1){var ge=fe[W],we=ge[0];t.addEventListener(we,ge[1],we===e.window.document?this.handleWindowEvent:this.handleEvent,ge[2])}};vo.prototype.destroy=function(){for(var O=0,F=this._listeners;O<F.length;O+=1){var B=F[O],W=B[0];t.removeEventListener(W,B[1],W===e.window.document?this.handleWindowEvent:this.handleEvent,B[2])}},vo.prototype._addDefaultHandlers=function(O){var F=this._map,B=F.getCanvasContainer();this._add("mapEvent",new fr(F,O));var W=F.boxZoom=new Je(F,O);this._add("boxZoom",W);var fe=new dr,ge=new Mo;F.doubleClickZoom=new io(ge,fe),this._add("tapZoom",fe),this._add("clickZoom",ge);var we=new Ca;this._add("tapDragZoom",we);var Ee=F.touchPitch=new ca;this._add("touchPitch",Ee);var Pe=new Di(O),$e=new _i(O);F.dragRotate=new Sa(O,Pe,$e),this._add("mouseRotate",Pe,["mousePitch"]),this._add("mousePitch",$e,["mouseRotate"]);var ot=new ki(O),pt=new $i(O);F.dragPan=new Uo(B,ot,pt),this._add("mousePan",ot),this._add("touchPan",pt,["touchZoom","touchRotate"]);var Dt=new Ps,zt=new _a;F.touchZoomRotate=new Ho(B,zt,Dt,we),this._add("touchRotate",Dt,["touchPan","touchZoom"]),this._add("touchZoom",zt,["touchPan","touchRotate"]);var Pt=F.scrollZoom=new ba(F,this);this._add("scrollZoom",Pt,["mousePan"]);var Nt=F.keyboard=new Ja;this._add("keyboard",Nt),this._add("blockableMapEvent",new gi(F));for(var Et=0,Zt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Et<Zt.length;Et+=1){var qt=Zt[Et];O.interactive&&O[qt]&&F[qt].enable(O[qt])}},vo.prototype._add=function(O,F,B){this._handlers.push({handlerName:O,handler:F,allowed:B}),this._handlersById[O]=F},vo.prototype.stop=function(){if(!this._updatingCamera){for(var O=0,F=this._handlers;O<F.length;O+=1)F[O].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},vo.prototype.isActive=function(){for(var O=0,F=this._handlers;O<F.length;O+=1)if(F[O].handler.isActive())return!0;return!1},vo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},vo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},vo.prototype.isMoving=function(){return Boolean(el(this._eventsInProgress))||this.isZooming()},vo.prototype._blockedByActive=function(O,F,B){for(var W in O)if(W!==B&&(!F||F.indexOf(W)<0))return!0;return!1},vo.prototype.handleWindowEvent=function(O){this.handleEvent(O,O.type+"Window")},vo.prototype._getMapTouches=function(O){for(var F=[],B=0,W=O;B<W.length;B+=1){var fe=W[B];this._el.contains(fe.target)&&F.push(fe)}return F},vo.prototype.handleEvent=function(O,F){if("blur"!==O.type){this._updatingCamera=!0;for(var B="renderFrame"===O.type?void 0:O,W={needsRenderFrame:!1},fe={},ge={},we=O.touches?this._getMapTouches(O.touches):void 0,Ee=we?t.touchPos(this._el,we):t.mousePos(this._el,O),Pe=0,$e=this._handlers;Pe<$e.length;Pe+=1){var ot=$e[Pe],pt=ot.handlerName,Dt=ot.handler,zt=ot.allowed;if(Dt.isEnabled()){var Pt=void 0;this._blockedByActive(ge,zt,pt)?Dt.reset():Dt[F||O.type]&&(Pt=Dt[F||O.type](O,Ee,we),this.mergeHandlerResult(W,fe,Pt,pt,B),Pt&&Pt.needsRenderFrame&&this._triggerRenderFrame()),(Pt||Dt.isActive())&&(ge[pt]=Dt)}}var Nt={};for(var Et in this._previousActiveHandlers)ge[Et]||(Nt[Et]=B);this._previousActiveHandlers=ge,(Object.keys(Nt).length||Cl(W))&&(this._changes.push([W,fe,Nt]),this._triggerRenderFrame()),(Object.keys(ge).length||Cl(W))&&this._map._stop(!0),this._updatingCamera=!1;var Zt=W.cameraAnimation;Zt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Zt(this._map))}else this.stop()},vo.prototype.mergeHandlerResult=function(O,F,B,W,fe){if(B){e.extend(O,B);var ge={handlerName:W,originalEvent:B.originalEvent||fe};void 0!==B.zoomDelta&&(F.zoom=ge),void 0!==B.panDelta&&(F.drag=ge),void 0!==B.pitchDelta&&(F.pitch=ge),void 0!==B.bearingDelta&&(F.rotate=ge)}},vo.prototype._applyChanges=function(){for(var O={},F={},B={},W=0,fe=this._changes;W<fe.length;W+=1){var ge=fe[W],we=ge[0],Ee=ge[1],Pe=ge[2];we.panDelta&&(O.panDelta=(O.panDelta||new e.Point(0,0))._add(we.panDelta)),we.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+we.zoomDelta),we.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+we.bearingDelta),we.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+we.pitchDelta),void 0!==we.around&&(O.around=we.around),void 0!==we.pinchAround&&(O.pinchAround=we.pinchAround),we.noInertia&&(O.noInertia=we.noInertia),e.extend(F,Ee),e.extend(B,Pe)}this._updateMapTransform(O,F,B),this._changes=[]},vo.prototype._updateMapTransform=function(O,F,B){var W=this._map,fe=W.transform;if(!Cl(O))return this._fireEvents(F,B);var ge=O.panDelta,we=O.zoomDelta,Ee=O.bearingDelta,Pe=O.pitchDelta,$e=O.around,ot=O.pinchAround;void 0!==ot&&($e=ot),W._stop(!0),$e=$e||W.transform.centerPoint;var pt=fe.pointLocation(ge?$e.sub(ge):$e);Ee&&(fe.bearing+=Ee),Pe&&(fe.pitch+=Pe),we&&(fe.zoom+=we),fe.setLocationAtPoint(pt,$e),this._map._update(),O.noInertia||this._inertia.record(O),this._fireEvents(F,B)},vo.prototype._fireEvents=function(O,F){var B=this,W=el(this._eventsInProgress),fe=el(O),ge={};for(var we in O)this._eventsInProgress[we]||(ge[we+"start"]=O[we].originalEvent),this._eventsInProgress[we]=O[we];for(var Pe in!W&&fe&&this._fireEvent("movestart",fe.originalEvent),ge)this._fireEvent(Pe,ge[Pe]);for(var $e in O.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),O)this._fireEvent($e,O[$e].originalEvent);var pt,Dt={};for(var zt in this._eventsInProgress){var Pt=this._eventsInProgress[zt],Nt=Pt.handlerName,Et=Pt.originalEvent;this._handlersById[Nt].isActive()||(delete this._eventsInProgress[zt],Dt[zt+"end"]=pt=F[Nt]||Et)}for(var Zt in Dt)this._fireEvent(Zt,Dt[Zt]);var qt=el(this._eventsInProgress);if((W||fe)&&!qt){this._updatingCamera=!0;var Jt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),gn=function(On){return 0!==On&&-B._bearingSnap<On&&On<B._bearingSnap};Jt?(gn(Jt.bearing||this._map.getBearing())&&(Jt.bearing=0),this._map.easeTo(Jt,{originalEvent:pt})):(this._map.fire(new e.Event("moveend",{originalEvent:pt})),gn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},vo.prototype._fireEvent=function(O,F){this._map.fire(new e.Event(O,F?{originalEvent:F}:{}))},vo.prototype._triggerRenderFrame=function(){var O=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(F){delete O._frameId,O.handleEvent(new Ws("renderFrame",{timeStamp:F})),O._applyChanges()}))};var Rl=function(O){function F(B,W){O.call(this),this._moving=!1,this._zooming=!1,this.transform=B,this._bearingSnap=W.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},F.prototype.setCenter=function(B,W){return this.jumpTo({center:B},W)},F.prototype.panBy=function(B,W,fe){return B=e.Point.convert(B).mult(-1),this.panTo(this.transform.center,e.extend({offset:B},W),fe)},F.prototype.panTo=function(B,W,fe){return this.easeTo(e.extend({center:B},W),fe)},F.prototype.getZoom=function(){return this.transform.zoom},F.prototype.setZoom=function(B,W){return this.jumpTo({zoom:B},W),this},F.prototype.zoomTo=function(B,W,fe){return this.easeTo(e.extend({zoom:B},W),fe)},F.prototype.zoomIn=function(B,W){return this.zoomTo(this.getZoom()+1,B,W),this},F.prototype.zoomOut=function(B,W){return this.zoomTo(this.getZoom()-1,B,W),this},F.prototype.getBearing=function(){return this.transform.bearing},F.prototype.setBearing=function(B,W){return this.jumpTo({bearing:B},W),this},F.prototype.getPadding=function(){return this.transform.padding},F.prototype.setPadding=function(B,W){return this.jumpTo({padding:B},W),this},F.prototype.rotateTo=function(B,W,fe){return this.easeTo(e.extend({bearing:B},W),fe)},F.prototype.resetNorth=function(B,W){return this.rotateTo(0,e.extend({duration:1e3},B),W),this},F.prototype.resetNorthPitch=function(B,W){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},B),W),this},F.prototype.snapToNorth=function(B,W){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(B,W):this},F.prototype.getPitch=function(){return this.transform.pitch},F.prototype.setPitch=function(B,W){return this.jumpTo({pitch:B},W),this},F.prototype.cameraForBounds=function(B,W){return B=e.LngLatBounds.convert(B),this._cameraForBoxAndBearing(B.getNorthWest(),B.getSouthEast(),0,W)},F.prototype._cameraForBoxAndBearing=function(B,W,fe,ge){var we={top:0,bottom:0,right:0,left:0};if("number"==typeof(ge=e.extend({padding:we,offset:[0,0],maxZoom:this.transform.maxZoom},ge)).padding){var Ee=ge.padding;ge.padding={top:Ee,bottom:Ee,right:Ee,left:Ee}}ge.padding=e.extend(we,ge.padding);var Pe=this.transform,$e=Pe.padding,ot=Pe.project(e.LngLat.convert(B)),pt=Pe.project(e.LngLat.convert(W)),Dt=ot.rotate(-fe*Math.PI/180),zt=pt.rotate(-fe*Math.PI/180),Pt=new e.Point(Math.max(Dt.x,zt.x),Math.max(Dt.y,zt.y)),Nt=new e.Point(Math.min(Dt.x,zt.x),Math.min(Dt.y,zt.y)),Et=Pt.sub(Nt),Zt=(Pe.width-($e.left+$e.right+ge.padding.left+ge.padding.right))/Et.x,qt=(Pe.height-($e.top+$e.bottom+ge.padding.top+ge.padding.bottom))/Et.y;if(!(qt<0||Zt<0)){var Jt=Math.min(Pe.scaleZoom(Pe.scale*Math.min(Zt,qt)),ge.maxZoom),gn=e.Point.convert(ge.offset),Hn=new e.Point(gn.x+(ge.padding.left-ge.padding.right)/2,gn.y+(ge.padding.top-ge.padding.bottom)/2).mult(Pe.scale/Pe.zoomScale(Jt));return{center:Pe.unproject(ot.add(pt).div(2).sub(Hn)),zoom:Jt,bearing:fe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},F.prototype.fitBounds=function(B,W,fe){return this._fitInternal(this.cameraForBounds(B,W),W,fe)},F.prototype.fitScreenCoordinates=function(B,W,fe,ge,we){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(B)),this.transform.pointLocation(e.Point.convert(W)),fe,ge),ge,we)},F.prototype._fitInternal=function(B,W,fe){return B?(delete(W=e.extend(B,W)).padding,W.linear?this.easeTo(W,fe):this.flyTo(W,fe)):this},F.prototype.jumpTo=function(B,W){this.stop();var fe=this.transform,ge=!1,we=!1,Ee=!1;return"zoom"in B&&fe.zoom!==+B.zoom&&(ge=!0,fe.zoom=+B.zoom),void 0!==B.center&&(fe.center=e.LngLat.convert(B.center)),"bearing"in B&&fe.bearing!==+B.bearing&&(we=!0,fe.bearing=+B.bearing),"pitch"in B&&fe.pitch!==+B.pitch&&(Ee=!0,fe.pitch=+B.pitch),null==B.padding||fe.isPaddingEqual(B.padding)||(fe.padding=B.padding),this.fire(new e.Event("movestart",W)).fire(new e.Event("move",W)),ge&&this.fire(new e.Event("zoomstart",W)).fire(new e.Event("zoom",W)).fire(new e.Event("zoomend",W)),we&&this.fire(new e.Event("rotatestart",W)).fire(new e.Event("rotate",W)).fire(new e.Event("rotateend",W)),Ee&&this.fire(new e.Event("pitchstart",W)).fire(new e.Event("pitch",W)).fire(new e.Event("pitchend",W)),this.fire(new e.Event("moveend",W))},F.prototype.easeTo=function(B,W){var fe=this;this._stop(!1,B.easeId),(!1===(B=e.extend({offset:[0,0],duration:500,easing:e.ease},B)).animate||!B.essential&&e.browser.prefersReducedMotion)&&(B.duration=0);var ge=this.transform,we=this.getZoom(),Ee=this.getBearing(),Pe=this.getPitch(),$e=this.getPadding(),ot="zoom"in B?+B.zoom:we,pt="bearing"in B?this._normalizeBearing(B.bearing,Ee):Ee,Dt="pitch"in B?+B.pitch:Pe,zt="padding"in B?B.padding:ge.padding,Pt=e.Point.convert(B.offset),Nt=ge.centerPoint.add(Pt),Et=ge.pointLocation(Nt),Zt=e.LngLat.convert(B.center||Et);this._normalizeCenter(Zt);var qt,Jt,gn=ge.project(Et),On=ge.project(Zt).sub(gn),Yn=ge.zoomScale(ot-we);B.around&&(qt=e.LngLat.convert(B.around),Jt=ge.locationPoint(qt));var Hn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ot!==we,this._rotating=this._rotating||Ee!==pt,this._pitching=this._pitching||Dt!==Pe,this._padding=!ge.isPaddingEqual(zt),this._easeId=B.easeId,this._prepareEase(W,B.noMoveStart,Hn),clearTimeout(this._easeEndTimeoutID),this._ease(function(vr){if(fe._zooming&&(ge.zoom=e.number(we,ot,vr)),fe._rotating&&(ge.bearing=e.number(Ee,pt,vr)),fe._pitching&&(ge.pitch=e.number(Pe,Dt,vr)),fe._padding&&(ge.interpolatePadding($e,zt,vr),Nt=ge.centerPoint.add(Pt)),qt)ge.setLocationAtPoint(qt,Jt);else{var gr=ge.zoomScale(ge.zoom-we),Pr=ot>we?Math.min(2,Yn):Math.max(.5,Yn),Cr=Math.pow(Pr,1-vr),ii=ge.unproject(gn.add(On.mult(vr*Cr)).mult(gr));ge.setLocationAtPoint(ge.renderWorldCopies?ii.wrap():ii,Nt)}fe._fireMoveEvents(W)},function(vr){fe._afterEase(W,vr)},B),this},F.prototype._prepareEase=function(B,W,fe){void 0===fe&&(fe={}),this._moving=!0,W||fe.moving||this.fire(new e.Event("movestart",B)),this._zooming&&!fe.zooming&&this.fire(new e.Event("zoomstart",B)),this._rotating&&!fe.rotating&&this.fire(new e.Event("rotatestart",B)),this._pitching&&!fe.pitching&&this.fire(new e.Event("pitchstart",B))},F.prototype._fireMoveEvents=function(B){this.fire(new e.Event("move",B)),this._zooming&&this.fire(new e.Event("zoom",B)),this._rotating&&this.fire(new e.Event("rotate",B)),this._pitching&&this.fire(new e.Event("pitch",B))},F.prototype._afterEase=function(B,W){if(!this._easeId||!W||this._easeId!==W){delete this._easeId;var fe=this._zooming,ge=this._rotating,we=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new e.Event("zoomend",B)),ge&&this.fire(new e.Event("rotateend",B)),we&&this.fire(new e.Event("pitchend",B)),this.fire(new e.Event("moveend",B))}},F.prototype.flyTo=function(B,W){var fe=this;if(!B.essential&&e.browser.prefersReducedMotion){var ge=e.pick(B,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ge,W)}this.stop(),B=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},B);var we=this.transform,Ee=this.getZoom(),Pe=this.getBearing(),$e=this.getPitch(),ot=this.getPadding(),pt="zoom"in B?e.clamp(+B.zoom,we.minZoom,we.maxZoom):Ee,Dt="bearing"in B?this._normalizeBearing(B.bearing,Pe):Pe,zt="pitch"in B?+B.pitch:$e,Pt="padding"in B?B.padding:we.padding,Nt=we.zoomScale(pt-Ee),Et=e.Point.convert(B.offset),Zt=we.centerPoint.add(Et),qt=we.pointLocation(Zt),Jt=e.LngLat.convert(B.center||qt);this._normalizeCenter(Jt);var gn=we.project(qt),On=we.project(Jt).sub(gn),Yn=B.curve,Hn=Math.max(we.width,we.height),vr=Hn/Nt,gr=On.mag();if("minZoom"in B){var Pr=e.clamp(Math.min(B.minZoom,Ee,pt),we.minZoom,we.maxZoom),Cr=Hn/we.zoomScale(Pr-Ee);Yn=Math.sqrt(Cr/gr*2)}var ii=Yn*Yn;function di(bi){var qi=(vr*vr-Hn*Hn+(bi?-1:1)*ii*ii*gr*gr)/(2*(bi?vr:Hn)*ii*gr);return Math.log(Math.sqrt(qi*qi+1)-qi)}function Oi(bi){return(Math.exp(bi)-Math.exp(-bi))/2}function ur(bi){return(Math.exp(bi)+Math.exp(-bi))/2}var Gr=di(0),hi=function(bi){return ur(Gr)/ur(Gr+Yn*bi)},si=function(bi){return Hn*((ur(Gr)*(Oi(qi=Gr+Yn*bi)/ur(qi))-Oi(Gr))/ii)/gr;var qi},wi=(di(1)-Gr)/Yn;if(Math.abs(gr)<1e-6||!isFinite(wi)){if(Math.abs(Hn-vr)<1e-6)return this.easeTo(B,W);var Ii=vr<Hn?-1:1;wi=Math.abs(Math.log(vr/Hn))/Yn,si=function(){return 0},hi=function(bi){return Math.exp(Ii*Yn*bi)}}return B.duration="duration"in B?+B.duration:1e3*wi/("screenSpeed"in B?+B.screenSpeed/Yn:+B.speed),B.maxDuration&&B.duration>B.maxDuration&&(B.duration=0),this._zooming=!0,this._rotating=Pe!==Dt,this._pitching=zt!==$e,this._padding=!we.isPaddingEqual(Pt),this._prepareEase(W,!1),this._ease(function(bi){var qi=bi*wi,zi=1/hi(qi);we.zoom=1===bi?pt:Ee+we.scaleZoom(zi),fe._rotating&&(we.bearing=e.number(Pe,Dt,bi)),fe._pitching&&(we.pitch=e.number($e,zt,bi)),fe._padding&&(we.interpolatePadding(ot,Pt,bi),Zt=we.centerPoint.add(Et));var ta=1===bi?Jt:we.unproject(gn.add(On.mult(si(qi))).mult(zi));we.setLocationAtPoint(we.renderWorldCopies?ta.wrap():ta,Zt),fe._fireMoveEvents(W)},function(){return fe._afterEase(W)},B),this},F.prototype.isEasing=function(){return!!this._easeFrameId},F.prototype.stop=function(){return this._stop()},F.prototype._stop=function(B,W){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,W)}if(!B){var ge=this.handlers;ge&&ge.stop()}return this},F.prototype._ease=function(B,W,fe){!1===fe.animate||0===fe.duration?(B(1),W()):(this._easeStart=e.browser.now(),this._easeOptions=fe,this._onEaseFrame=B,this._onEaseEnd=W,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},F.prototype._renderFrameCallback=function(){var B=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(B)),B<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},F.prototype._normalizeBearing=function(B,W){B=e.wrap(B,-180,180);var fe=Math.abs(B-W);return Math.abs(B-360-W)<fe&&(B-=360),Math.abs(B+360-W)<fe&&(B+=360),B},F.prototype._normalizeCenter=function(B){var W=this.transform;if(W.renderWorldCopies&&!W.lngRange){var fe=B.lng-W.center.lng;B.lng+=fe>180?-360:fe<-180?360:0}},F}(e.Evented),yo=function(O){void 0===O&&(O={}),this.options=O,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};yo.prototype.getDefaultPosition=function(){return"bottom-right"},yo.prototype.onAdd=function(O){var F=this.options&&this.options.compact;return this._map=O,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=t.create("div","mapboxgl-ctrl-attrib-inner",this._container),F&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===F&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},yo.prototype.onRemove=function(){t.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},yo.prototype._updateEditLink=function(){var O=this._editLink;O||(O=this._editLink=this._container.querySelector(".mapbox-improve-map"));var F=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(O){var B=F.reduce(function(W,fe,ge){return fe.value&&(W+=fe.key+"="+fe.value+(ge<F.length-1?"&":"")),W},"?");O.href=e.config.FEEDBACK_URL+"/"+B+(this._map._hash?this._map._hash.getHashString(!0):""),O.rel="noopener nofollow"}},yo.prototype._updateData=function(O){!O||"metadata"!==O.sourceDataType&&"style"!==O.dataType||(this._updateAttributions(),this._updateEditLink())},yo.prototype._updateAttributions=function(){if(this._map.style){var O=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(function(Ee){return"string"!=typeof Ee?"":Ee})):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet){var F=this._map.style.stylesheet;this.styleOwner=F.owner,this.styleId=F.id}var B=this._map.style.sourceCaches;for(var W in B){var fe=B[W];if(fe.used){var ge=fe.getSource();ge.attribution&&O.indexOf(ge.attribution)<0&&O.push(ge.attribution)}}O.sort(function(Ee,Pe){return Ee.length-Pe.length});var we=(O=O.filter(function(Ee,Pe){for(var $e=Pe+1;$e<O.length;$e++)if(O[$e].indexOf(Ee)>=0)return!1;return!0})).join(" | ");we!==this._attribHTML&&(this._attribHTML=we,O.length?(this._innerContainer.innerHTML=we,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},yo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Xs=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Xs.prototype.onAdd=function(O){this._map=O,this._container=t.create("div","mapboxgl-ctrl");var F=t.create("a","mapboxgl-ctrl-logo");return F.target="_blank",F.rel="noopener nofollow",F.href="https://www.mapbox.com/",F.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),F.setAttribute("rel","noopener nofollow"),this._container.appendChild(F),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Xs.prototype.onRemove=function(){t.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Xs.prototype.getDefaultPosition=function(){return"bottom-left"},Xs.prototype._updateLogo=function(O){O&&"metadata"!==O.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Xs.prototype._logoRequired=function(){if(this._map.style){var O=this._map.style.sourceCaches;for(var F in O)if(O[F].getSource().mapbox_logo)return!0;return!1}},Xs.prototype._updateCompact=function(){var O=this._container.children;if(O.length){var F=O[0];this._map.getCanvasContainer().offsetWidth<250?F.classList.add("mapboxgl-compact"):F.classList.remove("mapboxgl-compact")}};var Si=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Si.prototype.add=function(O){var F=++this._id;return this._queue.push({callback:O,id:F,cancelled:!1}),F},Si.prototype.remove=function(O){for(var F=this._currentlyRunning,B=0,W=F?this._queue.concat(F):this._queue;B<W.length;B+=1){var fe=W[B];if(fe.id===O)return void(fe.cancelled=!0)}},Si.prototype.run=function(O){void 0===O&&(O=0);var F=this._currentlyRunning=this._queue;this._queue=[];for(var B=0,W=F;B<W.length;B+=1){var fe=W[B];if(!fe.cancelled&&(fe.callback(O),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Si.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ji={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Nl=e.window.HTMLImageElement,Fl=e.window.HTMLElement,$s=e.window.ImageBitmap,hs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Rs=function(O){function F(W){var fe=this;if(null!=(W=e.extend({},hs,W)).minZoom&&null!=W.maxZoom&&W.minZoom>W.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=W.minPitch&&null!=W.maxPitch&&W.minPitch>W.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=W.minPitch&&W.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=W.maxPitch&&W.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ge=new Qt(W.minZoom,W.maxZoom,W.minPitch,W.maxPitch,W.renderWorldCopies);if(O.call(this,ge,W),this._interactive=W.interactive,this._maxTileCacheSize=W.maxTileCacheSize,this._failIfMajorPerformanceCaveat=W.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=W.preserveDrawingBuffer,this._antialias=W.antialias,this._trackResize=W.trackResize,this._bearingSnap=W.bearingSnap,this._refreshExpiredTiles=W.refreshExpiredTiles,this._fadeDuration=W.fadeDuration,this._crossSourceCollisions=W.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=W.collectResourceTiming,this._renderTaskQueue=new Si,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ji,W.locale),this._requestManager=new e.RequestManager(W.transformRequest,W.accessToken),"string"==typeof W.container){if(this._container=e.window.document.getElementById(W.container),!this._container)throw new Error("Container '"+W.container+"' not found.")}else{if(!(W.container instanceof Fl))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=W.container}if(W.maxBounds&&this.setMaxBounds(W.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new vo(this,W),this._hash=W.hash&&new qn("string"==typeof W.hash&&W.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:W.center,zoom:W.zoom,bearing:W.bearing,pitch:W.pitch}),W.bounds&&(this.resize(),this.fitBounds(W.bounds,e.extend({},W.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=W.localIdeographFontFamily,W.style&&this.setStyle(W.style,{localIdeographFontFamily:W.localIdeographFontFamily}),W.attributionControl&&this.addControl(new yo({customAttribution:W.customAttribution})),this.addControl(new Xs,W.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(Ee){fe._update("style"===Ee.dataType),fe.fire(new e.Event(Ee.dataType+"data",Ee))}),this.on("dataloading",function(Ee){fe.fire(new e.Event(Ee.dataType+"dataloading",Ee))})}O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F;var B={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return F.prototype._getMapId=function(){return this._mapId},F.prototype.addControl=function(W,fe){if(void 0===fe&&W.getDefaultPosition&&(fe=W.getDefaultPosition()),void 0===fe&&(fe="top-right"),!W||!W.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ge=W.onAdd(this);this._controls.push(W);var we=this._controlPositions[fe];return-1!==fe.indexOf("bottom")?we.insertBefore(ge,we.firstChild):we.appendChild(ge),this},F.prototype.removeControl=function(W){if(!W||!W.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(W);return fe>-1&&this._controls.splice(fe,1),W.onRemove(this),this},F.prototype.resize=function(W){var fe=this._containerDimensions(),ge=fe[0],we=fe[1];this._resizeCanvas(ge,we),this.transform.resize(ge,we),this.painter.resize(ge,we);var Ee=!this._moving;return Ee&&(this.stop(),this.fire(new e.Event("movestart",W)).fire(new e.Event("move",W))),this.fire(new e.Event("resize",W)),Ee&&this.fire(new e.Event("moveend",W)),this},F.prototype.getBounds=function(){return this.transform.getBounds()},F.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},F.prototype.setMaxBounds=function(W){return this.transform.setMaxBounds(e.LngLatBounds.convert(W)),this._update()},F.prototype.setMinZoom=function(W){if((W=W??-2)>=-2&&W<=this.transform.maxZoom)return this.transform.minZoom=W,this._update(),this.getZoom()<W&&this.setZoom(W),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},F.prototype.getMinZoom=function(){return this.transform.minZoom},F.prototype.setMaxZoom=function(W){if((W=W??22)>=this.transform.minZoom)return this.transform.maxZoom=W,this._update(),this.getZoom()>W&&this.setZoom(W),this;throw new Error("maxZoom must be greater than the current minZoom")},F.prototype.getMaxZoom=function(){return this.transform.maxZoom},F.prototype.setMinPitch=function(W){if((W=W??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(W>=0&&W<=this.transform.maxPitch)return this.transform.minPitch=W,this._update(),this.getPitch()<W&&this.setPitch(W),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},F.prototype.getMinPitch=function(){return this.transform.minPitch},F.prototype.setMaxPitch=function(W){if((W=W??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(W>=this.transform.minPitch)return this.transform.maxPitch=W,this._update(),this.getPitch()>W&&this.setPitch(W),this;throw new Error("maxPitch must be greater than the current minPitch")},F.prototype.getMaxPitch=function(){return this.transform.maxPitch},F.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},F.prototype.setRenderWorldCopies=function(W){return this.transform.renderWorldCopies=W,this._update()},F.prototype.project=function(W){return this.transform.locationPoint(e.LngLat.convert(W))},F.prototype.unproject=function(W){return this.transform.pointLocation(e.Point.convert(W))},F.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},F.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},F.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},F.prototype._createDelegatedListener=function(W,fe,ge){var we,Ee=this;if("mouseenter"===W||"mouseover"===W){var Pe=!1;return{layer:fe,listener:ge,delegates:{mousemove:function(ot){var pt=Ee.getLayer(fe)?Ee.queryRenderedFeatures(ot.point,{layers:[fe]}):[];pt.length?Pe||(Pe=!0,ge.call(Ee,new ei(W,Ee,ot.originalEvent,{features:pt}))):Pe=!1},mouseout:function(){Pe=!1}}}}if("mouseleave"===W||"mouseout"===W){var $e=!1;return{layer:fe,listener:ge,delegates:{mousemove:function(ot){(Ee.getLayer(fe)?Ee.queryRenderedFeatures(ot.point,{layers:[fe]}):[]).length?$e=!0:$e&&($e=!1,ge.call(Ee,new ei(W,Ee,ot.originalEvent)))},mouseout:function(ot){$e&&($e=!1,ge.call(Ee,new ei(W,Ee,ot.originalEvent)))}}}}return{layer:fe,listener:ge,delegates:(we={},we[W]=function(ot){var pt=Ee.getLayer(fe)?Ee.queryRenderedFeatures(ot.point,{layers:[fe]}):[];pt.length&&(ot.features=pt,ge.call(Ee,ot),delete ot.features)},we)}},F.prototype.on=function(W,fe,ge){if(void 0===ge)return O.prototype.on.call(this,W,fe);var we=this._createDelegatedListener(W,fe,ge);for(var Ee in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[W]=this._delegatedListeners[W]||[],this._delegatedListeners[W].push(we),we.delegates)this.on(Ee,we.delegates[Ee]);return this},F.prototype.once=function(W,fe,ge){if(void 0===ge)return O.prototype.once.call(this,W,fe);var we=this._createDelegatedListener(W,fe,ge);for(var Ee in we.delegates)this.once(Ee,we.delegates[Ee]);return this},F.prototype.off=function(W,fe,ge){var we=this;return void 0===ge?O.prototype.off.call(this,W,fe):(this._delegatedListeners&&this._delegatedListeners[W]&&function(Ee){for(var Pe=Ee[W],$e=0;$e<Pe.length;$e++){var ot=Pe[$e];if(ot.layer===fe&&ot.listener===ge){for(var pt in ot.delegates)we.off(pt,ot.delegates[pt]);return Pe.splice($e,1),we}}}(this._delegatedListeners),this)},F.prototype.queryRenderedFeatures=function(W,fe){if(!this.style)return[];var ge;if(void 0!==fe||void 0===W||W instanceof e.Point||Array.isArray(W)||(fe=W,W=void 0),fe=fe||{},(W=W||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof W[0])ge=[e.Point.convert(W)];else{var we=e.Point.convert(W[0]),Ee=e.Point.convert(W[1]);ge=[we,new e.Point(Ee.x,we.y),Ee,new e.Point(we.x,Ee.y),we]}return this.style.queryRenderedFeatures(ge,fe,this.transform)},F.prototype.querySourceFeatures=function(W,fe){return this.style.querySourceFeatures(W,fe)},F.prototype.setStyle=function(W,fe){return!1!==(fe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&W?(this._diffStyle(W,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(W,fe))},F.prototype._getUIString=function(W){var fe=this._locale[W];if(null==fe)throw new Error("Missing UI string '"+W+"'");return fe},F.prototype._updateStyle=function(W,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),W?(this.style=new Br(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof W?this.style.loadURL(W):this.style.loadJSON(W),this):(delete this.style,this)},F.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},F.prototype._diffStyle=function(W,fe){var ge=this;if("string"==typeof W){var we=this._requestManager.normalizeStyleURL(W),Ee=this._requestManager.transformRequest(we,e.ResourceType.Style);e.getJSON(Ee,function(Pe,$e){Pe?ge.fire(new e.ErrorEvent(Pe)):$e&&ge._updateDiff($e,fe)})}else"object"==typeof W&&this._updateDiff(W,fe)},F.prototype._updateDiff=function(W,fe){try{this.style.setState(W)&&this._update(!0)}catch(ge){e.warnOnce("Unable to perform style diff: "+(ge.message||ge.error||ge)+".  Rebuilding the style from scratch."),this._updateStyle(W,fe)}},F.prototype.getStyle=function(){if(this.style)return this.style.serialize()},F.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},F.prototype.addSource=function(W,fe){return this._lazyInitEmptyStyle(),this.style.addSource(W,fe),this._update(!0)},F.prototype.isSourceLoaded=function(W){var fe=this.style&&this.style.sourceCaches[W];if(void 0!==fe)return fe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+W+"'")))},F.prototype.areTilesLoaded=function(){var W=this.style&&this.style.sourceCaches;for(var fe in W){var ge=W[fe]._tiles;for(var we in ge){var Ee=ge[we];if("loaded"!==Ee.state&&"errored"!==Ee.state)return!1}}return!0},F.prototype.addSourceType=function(W,fe,ge){return this._lazyInitEmptyStyle(),this.style.addSourceType(W,fe,ge)},F.prototype.removeSource=function(W){return this.style.removeSource(W),this._update(!0)},F.prototype.getSource=function(W){return this.style.getSource(W)},F.prototype.addImage=function(W,fe,ge){void 0===ge&&(ge={});var we=ge.pixelRatio;void 0===we&&(we=1);var Ee=ge.sdf;void 0===Ee&&(Ee=!1);var Pe=ge.stretchX,$e=ge.stretchY,ot=ge.content;if(this._lazyInitEmptyStyle(),fe instanceof Nl||$s&&fe instanceof $s){var pt=e.browser.getImageData(fe);this.style.addImage(W,{data:new e.RGBAImage({width:pt.width,height:pt.height},pt.data),pixelRatio:we,stretchX:Pe,stretchY:$e,content:ot,sdf:Ee,version:0})}else{if(void 0===fe.width||void 0===fe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=fe;this.style.addImage(W,{data:new e.RGBAImage({width:fe.width,height:fe.height},new Uint8Array(fe.data)),pixelRatio:we,stretchX:Pe,stretchY:$e,content:ot,sdf:Ee,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,W)}},F.prototype.updateImage=function(W,fe){var ge=this.style.getImage(W);if(!ge)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var we=fe instanceof Nl||$s&&fe instanceof $s?e.browser.getImageData(fe):fe,Ee=we.width,Pe=we.height,$e=we.data;return void 0===Ee||void 0===Pe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ee!==ge.data.width||Pe!==ge.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ge.data.replace($e,!(fe instanceof Nl||$s&&fe instanceof $s)),void this.style.updateImage(W,ge))},F.prototype.hasImage=function(W){return W?!!this.style.getImage(W):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},F.prototype.removeImage=function(W){this.style.removeImage(W)},F.prototype.loadImage=function(W,fe){e.getImage(this._requestManager.transformRequest(W,e.ResourceType.Image),fe)},F.prototype.listImages=function(){return this.style.listImages()},F.prototype.addLayer=function(W,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(W,fe),this._update(!0)},F.prototype.moveLayer=function(W,fe){return this.style.moveLayer(W,fe),this._update(!0)},F.prototype.removeLayer=function(W){return this.style.removeLayer(W),this._update(!0)},F.prototype.getLayer=function(W){return this.style.getLayer(W)},F.prototype.setLayerZoomRange=function(W,fe,ge){return this.style.setLayerZoomRange(W,fe,ge),this._update(!0)},F.prototype.setFilter=function(W,fe,ge){return void 0===ge&&(ge={}),this.style.setFilter(W,fe,ge),this._update(!0)},F.prototype.getFilter=function(W){return this.style.getFilter(W)},F.prototype.setPaintProperty=function(W,fe,ge,we){return void 0===we&&(we={}),this.style.setPaintProperty(W,fe,ge,we),this._update(!0)},F.prototype.getPaintProperty=function(W,fe){return this.style.getPaintProperty(W,fe)},F.prototype.setLayoutProperty=function(W,fe,ge,we){return void 0===we&&(we={}),this.style.setLayoutProperty(W,fe,ge,we),this._update(!0)},F.prototype.getLayoutProperty=function(W,fe){return this.style.getLayoutProperty(W,fe)},F.prototype.setLight=function(W,fe){return void 0===fe&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(W,fe),this._update(!0)},F.prototype.getLight=function(){return this.style.getLight()},F.prototype.setFeatureState=function(W,fe){return this.style.setFeatureState(W,fe),this._update()},F.prototype.removeFeatureState=function(W,fe){return this.style.removeFeatureState(W,fe),this._update()},F.prototype.getFeatureState=function(W){return this.style.getFeatureState(W)},F.prototype.getContainer=function(){return this._container},F.prototype.getCanvasContainer=function(){return this._canvasContainer},F.prototype.getCanvas=function(){return this._canvas},F.prototype._containerDimensions=function(){var W=0,fe=0;return this._container&&(W=this._container.clientWidth||400,fe=this._container.clientHeight||300),[W,fe]},F.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},F.prototype._setupContainer=function(){var W=this._container;W.classList.add("mapboxgl-map"),(this._missingCSSCanary=t.create("div","mapboxgl-canary",W)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=t.create("div","mapboxgl-canvas-container",W);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=t.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ge=this._containerDimensions();this._resizeCanvas(ge[0],ge[1]);var we=this._controlContainer=t.create("div","mapboxgl-control-container",W),Ee=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Pe){Ee[Pe]=t.create("div","mapboxgl-ctrl-"+Pe,we)})},F.prototype._resizeCanvas=function(W,fe){var ge=e.browser.devicePixelRatio||1;this._canvas.width=ge*W,this._canvas.height=ge*fe,this._canvas.style.width=W+"px",this._canvas.style.height=fe+"px"},F.prototype._setupPainter=function(){var W=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",W)||this._canvas.getContext("experimental-webgl",W);fe?(this.painter=new ea(fe,this.transform),e.webpSupported.testSupport(fe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},F.prototype._contextLost=function(W){W.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:W}))},F.prototype._contextRestored=function(W){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:W}))},F.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},F.prototype._update=function(W){return this.style?(this._styleDirty=this._styleDirty||W,this._sourcesDirty=!0,this.triggerRepaint(),this):this},F.prototype._requestRenderFrame=function(W){return this._update(),this._renderTaskQueue.add(W)},F.prototype._cancelRenderFrame=function(W){this._renderTaskQueue.remove(W)},F.prototype._render=function(W){var fe,ge=this,we=0,Ee=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=Ee.createQueryEXT(),Ee.beginQueryEXT(Ee.TIME_ELAPSED_EXT,fe),we=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(W),!this._removed){var Pe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $e=this.transform.zoom,ot=e.browser.now();this.style.zoomHistory.update($e,ot);var pt=new e.EvaluationParameters($e,{now:ot,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Dt=pt.crossFadingFactor();1===Dt&&Dt===this._crossFadingFactor||(Pe=!0,this._crossFadingFactor=Dt),this.style.update(pt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Pe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var zt=e.browser.now()-we;Ee.endQueryEXT(Ee.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Nt=Ee.getQueryObjectEXT(fe,Ee.QUERY_RESULT_EXT)/1e6;Ee.deleteQueryEXT(fe),ge.fire(new e.Event("gpu-timing-frame",{cpuTime:zt,gpuTime:Nt}))},50)}if(this.listens("gpu-timing-layer")){var Pt=this.painter.collectGpuTimers();setTimeout(function(){var Nt=ge.painter.queryGpuTimers(Pt);ge.fire(new e.Event("gpu-timing-layer",{layerTimes:Nt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},F.prototype.remove=function(){this._hash&&this._hash.remove();for(var W=0,fe=this._controls;W<fe.length;W+=1)fe[W].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ge=this.painter.context.gl.getExtension("WEBGL_lose_context");ge&&ge.loseContext(),dc(this._canvasContainer),dc(this._controlContainer),dc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},F.prototype.triggerRepaint=function(){var W=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(fe){W._frame=null,W._render(fe)}))},F.prototype._onWindowOnline=function(){this._update()},F.prototype._onWindowResize=function(W){this._trackResize&&this.resize({originalEvent:W})._update()},B.showTileBoundaries.get=function(){return!!this._showTileBoundaries},B.showTileBoundaries.set=function(W){this._showTileBoundaries!==W&&(this._showTileBoundaries=W,this._update())},B.showPadding.get=function(){return!!this._showPadding},B.showPadding.set=function(W){this._showPadding!==W&&(this._showPadding=W,this._update())},B.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},B.showCollisionBoxes.set=function(W){this._showCollisionBoxes!==W&&(this._showCollisionBoxes=W,W?this.style._generateCollisionBoxes():this._update())},B.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},B.showOverdrawInspector.set=function(W){this._showOverdrawInspector!==W&&(this._showOverdrawInspector=W,this._update())},B.repaint.get=function(){return!!this._repaint},B.repaint.set=function(W){this._repaint!==W&&(this._repaint=W,this.triggerRepaint())},B.vertices.get=function(){return!!this._vertices},B.vertices.set=function(W){this._vertices=W,this._update()},F.prototype._setCacheLimits=function(W,fe){e.setCacheLimits(W,fe)},B.version.get=function(){return e.version},Object.defineProperties(F.prototype,B),F}(Rl);function dc(O){O.parentNode&&O.parentNode.removeChild(O)}var Sl={showCompass:!0,showZoom:!0,visualizePitch:!1},xa=function(O){var F=this;this.options=e.extend({},Sl,O),this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(B){return F._map.zoomIn({},{originalEvent:B})}),t.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(B){return F._map.zoomOut({},{originalEvent:B})}),t.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(B){F.options.visualizePitch?F._map.resetNorthPitch({},{originalEvent:B}):F._map.resetNorth({},{originalEvent:B})}),this._compassIcon=t.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};xa.prototype._updateZoomButtons=function(){var O=this._map.getZoom();this._zoomInButton.disabled=O===this._map.getMaxZoom(),this._zoomOutButton.disabled=O===this._map.getMinZoom()},xa.prototype._rotateCompassArrow=function(){var O=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=O},xa.prototype.onAdd=function(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ea(this._map,this._compass,this.options.visualizePitch)),this._container},xa.prototype.onRemove=function(){t.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},xa.prototype._createButton=function(O,F){var B=t.create("button",O,this._container);return B.type="button",B.addEventListener("click",F),B},xa.prototype._setButtonTitle=function(O,F){var B=this._map._getUIString("NavigationControl."+F);O.title=B,O.setAttribute("aria-label",B)};var Ea=function(O,F,B){void 0===B&&(B=!1),this._clickTolerance=10,this.element=F,this.mouseRotate=new Di({clickTolerance:O.dragRotate._mouseRotate._clickTolerance}),this.map=O,B&&(this.mousePitch=new _i({clickTolerance:O.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),t.addEventListener(F,"mousedown",this.mousedown),t.addEventListener(F,"touchstart",this.touchstart,{passive:!1}),t.addEventListener(F,"touchmove",this.touchmove),t.addEventListener(F,"touchend",this.touchend),t.addEventListener(F,"touchcancel",this.reset)};function ul(O,F,B){if(O=new e.LngLat(O.lng,O.lat),F){var W=new e.LngLat(O.lng-360,O.lat),fe=new e.LngLat(O.lng+360,O.lat),ge=B.locationPoint(O).distSqr(F);B.locationPoint(W).distSqr(F)<ge?O=W:B.locationPoint(fe).distSqr(F)<ge&&(O=fe)}for(;Math.abs(O.lng-B.center.lng)>180;){var we=B.locationPoint(O);if(we.x>=0&&we.y>=0&&we.x<=B.width&&we.y<=B.height)break;O.lng>B.center.lng?O.lng-=360:O.lng+=360}return O}Ea.prototype.down=function(O,F){this.mouseRotate.mousedown(O,F),this.mousePitch&&this.mousePitch.mousedown(O,F),t.disableDrag()},Ea.prototype.move=function(O,F){var B=this.map,W=this.mouseRotate.mousemoveWindow(O,F);if(W&&W.bearingDelta&&B.setBearing(B.getBearing()+W.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(O,F);fe&&fe.pitchDelta&&B.setPitch(B.getPitch()+fe.pitchDelta)}},Ea.prototype.off=function(){var O=this.element;t.removeEventListener(O,"mousedown",this.mousedown),t.removeEventListener(O,"touchstart",this.touchstart,{passive:!1}),t.removeEventListener(O,"touchmove",this.touchmove),t.removeEventListener(O,"touchend",this.touchend),t.removeEventListener(O,"touchcancel",this.reset),this.offTemp()},Ea.prototype.offTemp=function(){t.enableDrag(),t.removeEventListener(e.window,"mousemove",this.mousemove),t.removeEventListener(e.window,"mouseup",this.mouseup)},Ea.prototype.mousedown=function(O){this.down(e.extend({},O,{ctrlKey:!0,preventDefault:function(){return O.preventDefault()}}),t.mousePos(this.element,O)),t.addEventListener(e.window,"mousemove",this.mousemove),t.addEventListener(e.window,"mouseup",this.mouseup)},Ea.prototype.mousemove=function(O){this.move(O,t.mousePos(this.element,O))},Ea.prototype.mouseup=function(O){this.mouseRotate.mouseupWindow(O),this.mousePitch&&this.mousePitch.mouseupWindow(O),this.offTemp()},Ea.prototype.touchstart=function(O){1!==O.targetTouches.length?this.reset():(this._startPos=this._lastPos=t.touchPos(this.element,O.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return O.preventDefault()}},this._startPos))},Ea.prototype.touchmove=function(O){1!==O.targetTouches.length?this.reset():(this._lastPos=t.touchPos(this.element,O.targetTouches)[0],this.move({preventDefault:function(){return O.preventDefault()}},this._lastPos))},Ea.prototype.touchend=function(O){0===O.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ea.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function co(O,F,B){var W=O.classList;for(var fe in tl)W.remove("mapboxgl-"+B+"-anchor-"+fe);W.add("mapboxgl-"+B+"-anchor-"+F)}var fl,El=function(O){function F(B,W){var fe=this;if(O.call(this),(B instanceof e.window.HTMLElement||W)&&(B=e.extend({element:B},W)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=B&&B.anchor||"center",this._color=B&&B.color||"#3FB1CE",this._draggable=B&&B.draggable||!1,this._state="inactive",this._rotation=B&&B.rotation||0,this._rotationAlignment=B&&B.rotationAlignment||"auto",this._pitchAlignment=B&&B.pitchAlignment&&"auto"!==B.pitchAlignment?B.pitchAlignment:this._rotationAlignment,B&&B.element)this._element=B.element,this._offset=e.Point.convert(B&&B.offset||[0,0]);else{this._defaultMarker=!0,this._element=t.create("div"),this._element.setAttribute("aria-label","Map marker");var ge=t.createNS("http://www.w3.org/2000/svg","svg");ge.setAttributeNS(null,"display","block"),ge.setAttributeNS(null,"height","41px"),ge.setAttributeNS(null,"width","27px"),ge.setAttributeNS(null,"viewBox","0 0 27 41");var we=t.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"stroke","none"),we.setAttributeNS(null,"stroke-width","1"),we.setAttributeNS(null,"fill","none"),we.setAttributeNS(null,"fill-rule","evenodd");var Ee=t.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill-rule","nonzero");var Pe=t.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Pe.setAttributeNS(null,"fill","#000000");for(var $e=0,ot=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];$e<ot.length;$e+=1){var pt=ot[$e],Dt=t.createNS("http://www.w3.org/2000/svg","ellipse");Dt.setAttributeNS(null,"opacity","0.04"),Dt.setAttributeNS(null,"cx","10.5"),Dt.setAttributeNS(null,"cy","5.80029008"),Dt.setAttributeNS(null,"rx",pt.rx),Dt.setAttributeNS(null,"ry",pt.ry),Pe.appendChild(Dt)}var zt=t.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"fill",this._color);var Pt=t.createNS("http://www.w3.org/2000/svg","path");Pt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),zt.appendChild(Pt);var Nt=t.createNS("http://www.w3.org/2000/svg","g");Nt.setAttributeNS(null,"opacity","0.25"),Nt.setAttributeNS(null,"fill","#000000");var Et=t.createNS("http://www.w3.org/2000/svg","path");Et.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Nt.appendChild(Et);var Zt=t.createNS("http://www.w3.org/2000/svg","g");Zt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Zt.setAttributeNS(null,"fill","#FFFFFF");var qt=t.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Jt=t.createNS("http://www.w3.org/2000/svg","circle");Jt.setAttributeNS(null,"fill","#000000"),Jt.setAttributeNS(null,"opacity","0.25"),Jt.setAttributeNS(null,"cx","5.5"),Jt.setAttributeNS(null,"cy","5.5"),Jt.setAttributeNS(null,"r","5.4999962");var gn=t.createNS("http://www.w3.org/2000/svg","circle");gn.setAttributeNS(null,"fill","#FFFFFF"),gn.setAttributeNS(null,"cx","5.5"),gn.setAttributeNS(null,"cy","5.5"),gn.setAttributeNS(null,"r","5.4999962"),qt.appendChild(Jt),qt.appendChild(gn),Ee.appendChild(Pe),Ee.appendChild(zt),Ee.appendChild(Nt),Ee.appendChild(Zt),Ee.appendChild(qt),ge.appendChild(Ee),this._element.appendChild(ge),this._offset=e.Point.convert(B&&B.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(On){On.preventDefault()}),this._element.addEventListener("mousedown",function(On){On.preventDefault()}),this._element.addEventListener("focus",function(){var On=fe._map.getContainer();On.scrollTop=0,On.scrollLeft=0}),co(this._element,this._anchor,"marker"),this._popup=null}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.addTo=function(B){return this.remove(),this._map=B,B.getCanvasContainer().appendChild(this._element),B.on("move",this._update),B.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},F.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),t.remove(this._element),this._popup&&this._popup.remove(),this},F.prototype.getLngLat=function(){return this._lngLat},F.prototype.setLngLat=function(B){return this._lngLat=e.LngLat.convert(B),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},F.prototype.getElement=function(){return this._element},F.prototype.setPopup=function(B){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),B){if(!("offset"in B.options)){var W=Math.sqrt(Math.pow(13.5,2)/2);B.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[W,-1*(24.6+W)],"bottom-right":[-W,-1*(24.6+W)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=B,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},F.prototype._onKeyPress=function(B){var W=B.code,fe=B.charCode||B.keyCode;"Space"!==W&&"Enter"!==W&&32!==fe&&13!==fe||this.togglePopup()},F.prototype._onMapClick=function(B){var W=B.originalEvent.target,fe=this._element;this._popup&&(W===fe||fe.contains(W))&&this.togglePopup()},F.prototype.getPopup=function(){return this._popup},F.prototype.togglePopup=function(){var B=this._popup;return B?(B.isOpen()?B.remove():B.addTo(this._map),this):this},F.prototype._update=function(B){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ul(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var W="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?W="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(W="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?fe="rotateX(0deg)":"map"===this._pitchAlignment&&(fe="rotateX("+this._map.getPitch()+"deg)"),B&&"moveend"!==B.type||(this._pos=this._pos.round()),t.setTransform(this._element,tl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+W)}},F.prototype.getOffset=function(){return this._offset},F.prototype.setOffset=function(B){return this._offset=e.Point.convert(B),this._update(),this},F.prototype._onMove=function(B){this._pos=B.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},F.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},F.prototype._addDragHandler=function(B){this._element.contains(B.originalEvent.target)&&(B.preventDefault(),this._positionDelta=B.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},F.prototype.setDraggable=function(B){return this._draggable=!!B,this._map&&(B?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},F.prototype.isDraggable=function(){return this._draggable},F.prototype.setRotation=function(B){return this._rotation=B||0,this._update(),this},F.prototype.getRotation=function(){return this._rotation},F.prototype.setRotationAlignment=function(B){return this._rotationAlignment=B||"auto",this._update(),this},F.prototype.getRotationAlignment=function(){return this._rotationAlignment},F.prototype.setPitchAlignment=function(B){return this._pitchAlignment=B&&"auto"!==B?B:this._rotationAlignment,this._update(),this},F.prototype.getPitchAlignment=function(){return this._pitchAlignment},F}(e.Evented),xl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Dl=0,nl=!1,hc=function(O){function F(B){O.call(this),this.options=e.extend({},xl,B),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.onAdd=function(B){var W;return this._map=B,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),W=this._setupUI,void 0!==fl?W(fl):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){W(fl="denied"!==fe.state)}):W(fl=!!e.window.navigator.geolocation),this._container},F.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),t.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Dl=0,nl=!1},F.prototype._isOutOfMapMaxBounds=function(B){var W=this._map.getMaxBounds(),fe=B.coords;return W&&(fe.longitude<W.getWest()||fe.longitude>W.getEast()||fe.latitude<W.getSouth()||fe.latitude>W.getNorth())},F.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},F.prototype._onSuccess=function(B){if(this._map){if(this._isOutOfMapMaxBounds(B))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",B)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=B,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(B),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(B),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",B)),this._finish()}},F.prototype._updateCamera=function(B){var W=new e.LngLat(B.coords.longitude,B.coords.latitude),fe=B.coords.accuracy,ge=this._map.getBearing(),we=e.extend({bearing:ge},this.options.fitBoundsOptions);this._map.fitBounds(W.toBounds(fe),we,{geolocateSource:!0})},F.prototype._updateMarker=function(B){if(B){var W=new e.LngLat(B.coords.longitude,B.coords.latitude);this._accuracyCircleMarker.setLngLat(W).addTo(this._map),this._userLocationDotMarker.setLngLat(W).addTo(this._map),this._accuracy=B.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},F.prototype._updateCircleRadius=function(){var B=this._map._container.clientHeight/2,W=this._map.unproject([0,B]),fe=this._map.unproject([1,B]),ge=W.distanceTo(fe),we=Math.ceil(2*this._accuracy/ge);this._circleElement.style.width=we+"px",this._circleElement.style.height=we+"px"},F.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},F.prototype._onError=function(B){if(this._map){if(this.options.trackUserLocation)if(1===B.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var W=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===B.code&&nl)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",B)),this._finish()}},F.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},F.prototype._setupUI=function(B){var W=this;if(this._container.addEventListener("contextmenu",function(we){return we.preventDefault()}),this._geolocateButton=t.create("button","mapboxgl-ctrl-geolocate",this._container),t.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===B){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var ge=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new El(this._dotElement),this._circleElement=t.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new El({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(we){we.geolocateSource||"ACTIVE_LOCK"!==W._watchState||we.originalEvent&&"resize"===we.originalEvent.type||(W._watchState="BACKGROUND",W._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),W._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),W.fire(new e.Event("trackuserlocationend")))})},F.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Dl--,nl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var B;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Dl>1?(B={maximumAge:6e5,timeout:0},nl=!0):(B=this.options.positionOptions,nl=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,B)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},F.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},F}(e.Evented),Ic={maxWidth:100,unit:"metric"},dl=function(O){this.options=e.extend({},Ic,O),e.bindAll(["_onMove","setUnit"],this)};function pc(O,F,B){var W=B&&B.maxWidth||100,fe=O._container.clientHeight/2,ge=O.unproject([0,fe]),we=O.unproject([W,fe]),Ee=ge.distanceTo(we);if(B&&"imperial"===B.unit){var Pe=3.2808*Ee;Pe>5280?Ol(F,W,Pe/5280,O._getUIString("ScaleControl.Miles")):Ol(F,W,Pe,O._getUIString("ScaleControl.Feet"))}else B&&"nautical"===B.unit?Ol(F,W,Ee/1852,O._getUIString("ScaleControl.NauticalMiles")):Ee>=1e3?Ol(F,W,Ee/1e3,O._getUIString("ScaleControl.Kilometers")):Ol(F,W,Ee,O._getUIString("ScaleControl.Meters"))}function Ol(O,F,B,W){var fe,ge,we,$e,ot,Ee=(fe=B,(ge=Math.pow(10,(""+Math.floor(fe)).length-1))*(we=(we=fe/ge)>=10?10:we>=5?5:we>=3?3:we>=2?2:we>=1?1:($e=we,ot=Math.pow(10,Math.ceil(-Math.log($e)/Math.LN10)),Math.round($e*ot)/ot)));O.style.width=F*(Ee/B)+"px",O.innerHTML=Ee+"&nbsp;"+W}dl.prototype.getDefaultPosition=function(){return"bottom-left"},dl.prototype._onMove=function(){pc(this._map,this._container,this.options)},dl.prototype.onAdd=function(O){return this._map=O,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},dl.prototype.onRemove=function(){t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},dl.prototype.setUnit=function(O){this.options.unit=O,pc(this._map,this._container,this.options)};var Go=function(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof e.window.HTMLElement?this._container=O.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Go.prototype.onAdd=function(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Go.prototype.onRemove=function(){t.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Go.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Go.prototype._setupUI=function(){var O=this._fullscreenButton=t.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);t.create("span","mapboxgl-ctrl-icon",O).setAttribute("aria-hidden",!0),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Go.prototype._updateTitle=function(){var O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O},Go.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Go.prototype._isFullscreen=function(){return this._fullscreen},Go.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Go.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Pc={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Rc=function(O){function F(B){O.call(this),this.options=e.extend(Object.create(Pc),B),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return O&&(F.__proto__=O),(F.prototype=Object.create(O&&O.prototype)).constructor=F,F.prototype.addTo=function(B){return this._map&&this.remove(),this._map=B,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},F.prototype.isOpen=function(){return!!this._map},F.prototype.remove=function(){return this._content&&t.remove(this._content),this._container&&(t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},F.prototype.getLngLat=function(){return this._lngLat},F.prototype.setLngLat=function(B){return this._lngLat=e.LngLat.convert(B),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},F.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},F.prototype.getElement=function(){return this._container},F.prototype.setText=function(B){return this.setDOMContent(e.window.document.createTextNode(B))},F.prototype.setHTML=function(B){var W,fe=e.window.document.createDocumentFragment(),ge=e.window.document.createElement("body");for(ge.innerHTML=B;W=ge.firstChild;)fe.appendChild(W);return this.setDOMContent(fe)},F.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},F.prototype.setMaxWidth=function(B){return this.options.maxWidth=B,this._update(),this},F.prototype.setDOMContent=function(B){return this._createContent(),this._content.appendChild(B),this._update(),this},F.prototype.addClassName=function(B){this._container&&this._container.classList.add(B)},F.prototype.removeClassName=function(B){this._container&&this._container.classList.remove(B)},F.prototype.toggleClassName=function(B){if(this._container)return this._container.classList.toggle(B)},F.prototype._createContent=function(){this._content&&t.remove(this._content),this._content=t.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},F.prototype._onMouseUp=function(B){this._update(B.point)},F.prototype._onMouseMove=function(B){this._update(B.point)},F.prototype._onDrag=function(B){this._update(B.point)},F.prototype._update=function(B){var W=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Dt){return W._container.classList.add(Dt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ul(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||B)){var ge=this._pos=this._trackPointer&&B?B:this._map.project(this._lngLat),we=this.options.anchor,Ee=function Dt(zt){if(zt){if("number"==typeof zt){var Pt=Math.round(Math.sqrt(.5*Math.pow(zt,2)));return{center:new e.Point(0,0),top:new e.Point(0,zt),"top-left":new e.Point(Pt,Pt),"top-right":new e.Point(-Pt,Pt),bottom:new e.Point(0,-zt),"bottom-left":new e.Point(Pt,-Pt),"bottom-right":new e.Point(-Pt,-Pt),left:new e.Point(zt,0),right:new e.Point(-zt,0)}}if(zt instanceof e.Point||Array.isArray(zt)){var Nt=e.Point.convert(zt);return{center:Nt,top:Nt,"top-left":Nt,"top-right":Nt,bottom:Nt,"bottom-left":Nt,"bottom-right":Nt,left:Nt,right:Nt}}return{center:e.Point.convert(zt.center||[0,0]),top:e.Point.convert(zt.top||[0,0]),"top-left":e.Point.convert(zt["top-left"]||[0,0]),"top-right":e.Point.convert(zt["top-right"]||[0,0]),bottom:e.Point.convert(zt.bottom||[0,0]),"bottom-left":e.Point.convert(zt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(zt["bottom-right"]||[0,0]),left:e.Point.convert(zt.left||[0,0]),right:e.Point.convert(zt.right||[0,0])}}return Dt(new e.Point(0,0))}(this.options.offset);if(!we){var Pe,$e=this._container.offsetWidth,ot=this._container.offsetHeight;Pe=ge.y+Ee.bottom.y<ot?["top"]:ge.y>this._map.transform.height-ot?["bottom"]:[],ge.x<$e/2?Pe.push("left"):ge.x>this._map.transform.width-$e/2&&Pe.push("right"),we=0===Pe.length?"bottom":Pe.join("-")}var pt=ge.add(Ee[we]).round();t.setTransform(this._container,tl[we]+" translate("+pt.x+"px,"+pt.y+"px)"),co(this._container,we,"popup")}},F.prototype._onClose=function(){this.remove()},F}(e.Evented),me={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Rs,NavigationControl:xa,GeolocateControl:hc,AttributionControl:yo,ScaleControl:dl,FullscreenControl:Go,Popup:Rc,Marker:El,Style:Br,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){dt().acquire(gt)},clearPrewarmedResources:function(){var O=Lt;O&&(O.isPreloaded()&&1===O.numActive()?(O.release(gt),Lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(O){e.config.ACCESS_TOKEN=O},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(O){e.config.API_URL=O},get workerCount(){return mt.workerCount},set workerCount(O){mt.workerCount=O},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){e.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage:function(O){e.clearTileCache(O)},workerUrl:""};return me}),b},"object"==typeof ie&&void 0!==ae?ae.exports=g():(p=p||self).mapboxgl=g()},{}],240:[function(v,ae,ie){"use strict";ae.exports=Math.log2||function(p){return Math.log(p)*Math.LOG2E}},{}],241:[function(v,ae,ie){"use strict";ae.exports=function(g,b){b||(b=g,g=window);var y=0,e=0,r=0,t={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function n(_){var c=!1;return"altKey"in _&&(c=c||_.altKey!==t.alt,t.alt=!!_.altKey),"shiftKey"in _&&(c=c||_.shiftKey!==t.shift,t.shift=!!_.shiftKey),"ctrlKey"in _&&(c=c||_.ctrlKey!==t.control,t.control=!!_.ctrlKey),"metaKey"in _&&(c=c||_.metaKey!==t.meta,t.meta=!!_.metaKey),c}function m(_,c){var T=p.x(c),x=p.y(c);"buttons"in c&&(_=0|c.buttons),(_!==y||T!==e||x!==r||n(c))&&(y=0|_,e=T||0,r=x||0,b&&b(y,e,r,t))}function l(_){m(0,_)}function i(){(y||e||r||t.shift||t.alt||t.meta||t.control)&&(e=r=0,y=0,t.shift=t.alt=t.control=t.meta=!1,b&&b(0,0,0,t))}function f(_){n(_)&&b&&b(y,e,r,t)}function u(_){0===p.buttons(_)?m(0,_):m(y,_)}function s(_){m(y|p.buttons(_),_)}function d(_){m(y&~p.buttons(_),_)}function h(){o||(o=!0,g.addEventListener("mousemove",u),g.addEventListener("mousedown",s),g.addEventListener("mouseup",d),g.addEventListener("mouseleave",l),g.addEventListener("mouseenter",l),g.addEventListener("mouseout",l),g.addEventListener("mouseover",l),g.addEventListener("blur",i),g.addEventListener("keyup",f),g.addEventListener("keydown",f),g.addEventListener("keypress",f),g!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}h();var a={element:g};return Object.defineProperties(a,{enabled:{get:function(){return o},set:function(_){_?h():!o||(o=!1,g.removeEventListener("mousemove",u),g.removeEventListener("mousedown",s),g.removeEventListener("mouseup",d),g.removeEventListener("mouseleave",l),g.removeEventListener("mouseenter",l),g.removeEventListener("mouseout",l),g.removeEventListener("mouseover",l),g.removeEventListener("blur",i),g.removeEventListener("keyup",f),g.removeEventListener("keydown",f),g.removeEventListener("keypress",f),g!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return y},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return t},enumerable:!0}}),a};var p=v("mouse-event")},{"mouse-event":243}],242:[function(v,ae,ie){var p={left:0,top:0};ae.exports=function(g,b,y){b=b||g.currentTarget||g.srcElement,Array.isArray(y)||(y=[0,0]);var o,e=g.clientX||0,r=g.clientY||0,t=(o=b)===window||o===document||o===document.body?p:o.getBoundingClientRect();return y[0]=e-t.left,y[1]=r-t.top,y}},{}],243:[function(v,ae,ie){"use strict";function p(g){return g.target||g.srcElement||window}ie.buttons=function(g){if("object"==typeof g){if("buttons"in g)return g.buttons;if("which"in g){if(2===(b=g.which))return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in g){var b;if(1===(b=g.button))return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0},ie.element=p,ie.x=function(g){if("object"==typeof g){if("offsetX"in g)return g.offsetX;var b=p(g).getBoundingClientRect();return g.clientX-b.left}return 0},ie.y=function(g){if("object"==typeof g){if("offsetY"in g)return g.offsetY;var b=p(g).getBoundingClientRect();return g.clientY-b.top}return 0}},{}],244:[function(v,ae,ie){"use strict";var p=v("to-px");ae.exports=function(g,b,y){"function"==typeof g&&(y=!!b,b=g,g=window);var e=p("ex",g),r=function(t){y&&t.preventDefault();var o=t.deltaX||0,n=t.deltaY||0,m=t.deltaZ||0,l=1;switch(t.deltaMode){case 1:l=e;break;case 2:l=window.innerHeight}if(n*=l,m*=l,(o*=l)||n||m)return b(o,n,m,t)};return g.addEventListener("wheel",r),r}},{"to-px":315}],245:[function(v,ae,ie){(function(p,g){(function(){var b,y,e;e=function(){"use strict";var b,y,e,r=Object.prototype.toString,t=void 0!==g?function(_){return g(_)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(_,c,T,x){return Object.defineProperty(_,c,{value:T,writable:!0,configurable:!1!==x})}}catch{b=function(c,T,x){return c[T]=x,c}}function o(_,c){e.add(_,c),y||(y=t(e.drain))}function n(_){var c,T=typeof _;return null==_||"object"!=T&&"function"!=T||(c=_.then),"function"==typeof c&&c}function m(){for(var _=0;_<this.chain.length;_++)l(this,1===this.state?this.chain[_].success:this.chain[_].failure,this.chain[_]);this.chain.length=0}function l(_,c,T){var x,w;try{!1===c?T.reject(_.msg):(x=!0===c?_.msg:c.call(void 0,_.msg))===T.promise?T.reject(TypeError("Promise-chain cycle")):(w=n(x))?w.call(x,T.resolve,T.reject):T.resolve(x)}catch(M){T.reject(M)}}function i(_){var c,T=this;if(!T.triggered){T.triggered=!0,T.def&&(T=T.def);try{(c=n(_))?o(function(){var x=new s(T);try{c.call(_,function(){i.apply(x,arguments)},function(){f.apply(x,arguments)})}catch(w){f.call(x,w)}}):(T.msg=_,T.state=1,T.chain.length>0&&o(m,T))}catch(x){f.call(new s(T),x)}}}function f(_){var c=this;c.triggered||(c.triggered=!0,c.def&&(c=c.def),c.msg=_,c.state=2,c.chain.length>0&&o(m,c))}function u(_,c,T,x){for(var w=0;w<c.length;w++)!function(M){_.resolve(c[M]).then(function(D){T(M,D)},x)}(w)}function s(_){this.def=_,this.triggered=!1}function d(_){this.promise=_,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(_){if("function"!=typeof _)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var c=new d(this);this.then=function(T,x){var w={success:"function"!=typeof T||T,failure:"function"==typeof x&&x};return w.promise=new this.constructor(function(M,D){if("function"!=typeof M||"function"!=typeof D)throw TypeError("Not a function");w.resolve=M,w.reject=D}),c.chain.push(w),0!==c.state&&o(m,c),w.promise},this.catch=function(T){return this.then(void 0,T)};try{_.call(void 0,function(T){i.call(c,T)},function(T){f.call(c,T)})}catch(T){f.call(c,T)}}e=function(){var _,c,T;function x(w,M){this.fn=w,this.self=M,this.next=void 0}return{add:function(w,M){T=new x(w,M),c?c.next=T:_=T,c=T,T=void 0},drain:function(){var w=_;for(_=c=y=void 0;w;)w.fn.call(w.self),w=w.next}}}();var a=b({},"constructor",h,!1);return h.prototype=a,b(a,"__NPO__",0,!1),b(h,"resolve",function(_){return _&&"object"==typeof _&&1===_.__NPO__?_:new this(function(c,T){if("function"!=typeof c||"function"!=typeof T)throw TypeError("Not a function");c(_)})}),b(h,"reject",function(_){return new this(function(c,T){if("function"!=typeof c||"function"!=typeof T)throw TypeError("Not a function");T(_)})}),b(h,"all",function(_){var c=this;return"[object Array]"!=r.call(_)?c.reject(TypeError("Not an array")):0===_.length?c.resolve([]):new c(function(T,x){if("function"!=typeof T||"function"!=typeof x)throw TypeError("Not a function");var w=_.length,M=Array(w),D=0;u(c,_,function(C,P){M[C]=P,++D===w&&T(M)},x)})}),b(h,"race",function(_){var c=this;return"[object Array]"!=r.call(_)?c.reject(TypeError("Not an array")):new c(function(T,x){if("function"!=typeof T||"function"!=typeof x)throw TypeError("Not a function");u(c,_,function(w,M){T(M)},x)})}),h},(y=void 0!==p?p:this)[b="Promise"]=y[b]||e(),void 0!==ae&&ae.exports&&(ae.exports=y[b])}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},v("timers").setImmediate)},{timers:312}],246:[function(v,ae,ie){var p=Math.PI,g=t(120);function b(o,n,m,l){return["C",o,n,m,l,m,l]}function y(o,n,m,l,i,f){return["C",o/3+2/3*m,n/3+2/3*l,i/3+2/3*m,f/3+2/3*l,i,f]}function e(o,n,m,l,i,f,u,s,d,h){if(h)P=h[0],L=h[1],D=h[2],C=h[3];else{var a=r(o,n,-i);n=a.y;var _=((o=a.x)-(s=(a=r(s,d,-i)).x))/2,c=(n-(d=a.y))/2,T=_*_/(m*m)+c*c/(l*l);T>1&&(m*=T=Math.sqrt(T),l*=T);var x=m*m,w=l*l,M=(f==u?-1:1)*Math.sqrt(Math.abs((x*w-x*c*c-w*_*_)/(x*c*c+w*_*_)));M==1/0&&(M=1);var D=M*m*c/l+(o+s)/2,C=M*-l*_/m+(n+d)/2,P=Math.asin(((n-C)/l).toFixed(9)),L=Math.asin(((d-C)/l).toFixed(9));(P=o<D?p-P:P)<0&&(P=2*p+P),(L=s<D?p-L:L)<0&&(L=2*p+L),u&&P>L&&(P-=2*p),!u&&L>P&&(L-=2*p)}if(Math.abs(L-P)>g){var S=L,E=s,N=d;L=P+g*(u&&L>P?1:-1);var z=e(s=D+m*Math.cos(L),d=C+l*Math.sin(L),m,l,i,0,u,E,N,[L,S,D,C])}var q=Math.tan((L-P)/4),G=4/3*m*q,K=4/3*l*q,ne=[2*o-(o+G*Math.sin(P)),2*n-(n-K*Math.cos(P)),s+G*Math.sin(L),d-K*Math.cos(L),s,d];if(h)return ne;z&&(ne=ne.concat(z));for(var X=0;X<ne.length;){var J=r(ne[X],ne[X+1],i);ne[X++]=J.x,ne[X++]=J.y}return ne}function r(o,n,m){return{x:o*Math.cos(m)-n*Math.sin(m),y:o*Math.sin(m)+n*Math.cos(m)}}function t(o){return o*(p/180)}ae.exports=function(o){for(var n,m=[],l=0,i=0,f=0,u=0,s=null,d=null,h=0,a=0,_=0,c=o.length;_<c;_++){var T=o[_],x=T[0];switch(x){case"M":f=T[1],u=T[2];break;case"A":(T=e(h,a,T[1],T[2],t(T[3]),T[4],T[5],T[6],T[7])).unshift("C"),T.length>7&&(m.push(T.splice(0,7)),T.unshift("C"));break;case"S":var w=h,M=a;"C"!=n&&"S"!=n||(w+=w-l,M+=M-i),T=["C",w,M,T[1],T[2],T[3],T[4]];break;case"T":"Q"==n||"T"==n?(s=2*h-s,d=2*a-d):(s=h,d=a),T=y(h,a,s,d,T[1],T[2]);break;case"Q":s=T[1],d=T[2],T=y(h,a,T[1],T[2],T[3],T[4]);break;case"L":T=b(h,a,T[1],T[2]);break;case"H":T=b(h,a,T[1],a);break;case"V":T=b(h,a,h,T[1]);break;case"Z":T=b(h,a,f,u)}n=x,h=T[T.length-2],a=T[T.length-1],T.length>4?(l=T[T.length-4],i=T[T.length-3]):(l=h,i=a),m.push(T)}return m}},{}],247:[function(v,ae,ie){"use strict";var p=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function y(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}ae.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(n){return r[n]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch{return!1}}()?Object.assign:function(e,r){for(var t,o,n=y(e),m=1;m<arguments.length;m++){for(var l in t=Object(arguments[m]))g.call(t,l)&&(n[l]=t[l]);if(p){o=p(t);for(var i=0;i<o.length;i++)b.call(t,o[i])&&(n[o[i]]=t[o[i]])}}return n}},{}],248:[function(v,ae,ie){"use strict";function p(y,e){if("string"!=typeof y)return[y];var r=[y];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var t=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],o=e.escape||"___",n=!!e.flat;t.forEach(function(l){var i=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),f=[];function u(s,d,h){var a=r.push(s.slice(l[0].length,-l[1].length))-1;return f.push(a),o+a+o}r.forEach(function(s,d){for(var h,a=0;s!=h;)if(h=s,s=s.replace(i,u),a++>1e4)throw Error("References have circular dependency. Please, check them.");r[d]=s}),f=f.reverse(),r=r.map(function(s){return f.forEach(function(d){s=s.replace(new RegExp("(\\"+o+d+"\\"+o+")","g"),l[0]+"$1"+l[1])}),s})});var m=new RegExp("\\"+o+"([0-9]+)\\"+o);return n?r:function l(i,f,u){for(var s,d=[],h=0;s=m.exec(i);){if(h++>1e4)throw Error("Circular references in parenthesis");d.push(i.slice(0,s.index)),d.push(l(f[s[1]],f)),i=i.slice(s.index+s[0].length)}return d.push(i),d}(r[0],r)}function g(y,e){if(e&&e.flat){var r,t=e&&e.escape||"___",o=y[0];if(!o)return"";for(var n=new RegExp("\\"+t+"([0-9]+)\\"+t),m=0;o!=r;){if(m++>1e4)throw Error("Circular references in "+y);r=o,o=o.replace(n,l)}return o}return y.reduce(function i(f,u){return Array.isArray(u)&&(u=u.reduce(i,"")),f+u},"");function l(i,f){if(null==y[f])throw Error("Reference "+f+"is undefined");return y[f]}}function b(y,e){return Array.isArray(y)?g(y,e):p(y,e)}b.parse=p,b.stringify=g,ae.exports=b},{}],249:[function(v,ae,ie){"use strict";var p=v("pick-by-alias");ae.exports=function(g){var b;return arguments.length>1&&(g=arguments),"string"==typeof g?g=g.split(/\s/).map(parseFloat):"number"==typeof g&&(g=[g]),g.length&&"number"==typeof g[0]?b=1===g.length?{width:g[0],height:g[0],x:0,y:0}:2===g.length?{width:g[0],height:g[1],x:0,y:0}:{x:g[0],y:g[1],width:g[2]-g[0]||0,height:g[3]-g[1]||0}:g&&((b={x:(g=p(g,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:g.top||0}).width=g.width??(g.right?g.right-b.x:0),b.height=g.height??(g.bottom?g.bottom-b.y:0)),b}},{"pick-by-alias":253}],250:[function(v,ae,ie){ae.exports=function(y){var e=[];return y.replace(g,function(r,t,o){var l,n=t.toLowerCase();for(l=void 0,o=(l=o.match(b))?l.map(Number):[],"m"==n&&o.length>2&&(e.push([t].concat(o.splice(0,2))),n="l",t="m"==t?"l":"L");;){if(o.length==p[n])return o.unshift(t),e.push(o);if(o.length<p[n])throw new Error("malformed path data");e.push([t].concat(o.splice(0,p[n])))}}),e};var p={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},g=/([astvzqmhlc])([^astvzqmhlc]*)/gi,b=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(v,ae,ie){ae.exports=function(p,g){g||(g=[0,""]),p=String(p);var b=parseFloat(p,10);return g[0]=b,g[1]=p.match(/[\d.\-\+]*\s*(.*)/)[1]||"",g}},{}],252:[function(v,ae,ie){(function(p){(function(){(function(){var g,b,y,e,r,t;typeof performance<"u"&&null!==performance&&performance.now?ae.exports=function(){return performance.now()}:null!=p&&p.hrtime?(ae.exports=function(){return(g()-r)/1e6},b=p.hrtime,e=(g=function(){var o;return 1e9*(o=b())[0]+o[1]})(),t=1e9*p.uptime(),r=e-t):Date.now?(ae.exports=function(){return Date.now()-y},y=Date.now()):(ae.exports=function(){return(new Date).getTime()-y},y=(new Date).getTime())}).call(this)}).call(this)}).call(this,v("_process"))},{_process:278}],253:[function(v,ae,ie){"use strict";ae.exports=function(b,y,e){var r,t,o={};if("string"==typeof y&&(y=g(y)),Array.isArray(y)){var n={};for(t=0;t<y.length;t++)n[y[t]]=!0;y=n}for(r in y)y[r]=g(y[r]);var m={};for(r in y){var l=y[r];if(Array.isArray(l))for(t=0;t<l.length;t++){var i=l[t];if(e&&(m[i]=!0),i in b){if(o[r]=b[i],e)for(var f=t;f<l.length;f++)m[l[f]]=!0;break}}else r in b&&(y[r]&&(o[r]=b[r]),e&&(m[r]=!0))}if(e)for(r in b)m[r]||(o[r]=b[r]);return o};var p={};function g(b){return p[b]?p[b]:("string"==typeof b&&(b=p[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],254:[function(v,ae,ie){ae.exports=function(p,g,b,y){var e=p[0],r=p[1],t=!1;void 0===b&&(b=0),void 0===y&&(y=g.length);for(var o=y-b,n=0,m=o-1;n<o;m=n++){var l=g[n+b][0],i=g[n+b][1],u=g[m+b][1];i>r!=u>r&&e<(g[m+b][0]-l)*(r-i)/(u-i)+l&&(t=!t)}return t}},{}],255:[function(v,ae,ie){var p,g=v("./lib/build-log"),b=v("./lib/epsilon"),y=v("./lib/intersecter"),e=v("./lib/segment-chainer"),r=v("./lib/segment-selector"),t=v("./lib/geojson"),o=!1,n=b();function m(l,i,f){var u=p.segments(l),s=p.segments(i),d=f(p.combine(u,s));return p.polygon(d)}p={buildLog:function(l){return!0===l?o=g():!1===l&&(o=!1),!1!==o&&o.list},epsilon:function(l){return n.epsilon(l)},segments:function(l){var i=y(!0,n,o);return l.regions.forEach(i.addRegion),{segments:i.calculate(l.inverted),inverted:l.inverted}},combine:function(l,i){return{combined:y(!1,n,o).calculate(l.segments,l.inverted,i.segments,i.inverted),inverted1:l.inverted,inverted2:i.inverted}},selectUnion:function(l){return{segments:r.union(l.combined,o),inverted:l.inverted1||l.inverted2}},selectIntersect:function(l){return{segments:r.intersect(l.combined,o),inverted:l.inverted1&&l.inverted2}},selectDifference:function(l){return{segments:r.difference(l.combined,o),inverted:l.inverted1&&!l.inverted2}},selectDifferenceRev:function(l){return{segments:r.differenceRev(l.combined,o),inverted:!l.inverted1&&l.inverted2}},selectXor:function(l){return{segments:r.xor(l.combined,o),inverted:l.inverted1!==l.inverted2}},polygon:function(l){return{regions:e(l.segments,n,o),inverted:l.inverted}},polygonFromGeoJSON:function(l){return t.toPolygon(p,l)},polygonToGeoJSON:function(l){return t.fromPolygon(p,n,l)},union:function(l,i){return m(l,i,p.selectUnion)},intersect:function(l,i){return m(l,i,p.selectIntersect)},difference:function(l,i){return m(l,i,p.selectDifference)},differenceRev:function(l,i){return m(l,i,p.selectDifferenceRev)},xor:function(l,i){return m(l,i,p.selectXor)}},"object"==typeof window&&(window.PolyBool=p),ae.exports=p},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(v,ae,ie){ae.exports=function(){var p,g=0,b=!1;function y(e,r){return p.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),p}return p={list:[],segmentId:function(){return g++},checkIntersection:function(e,r){return y("check",{seg1:e,seg2:r})},segmentChop:function(e,r){return y("div_seg",{seg:e,pt:r}),y("chop",{seg:e,pt:r})},statusRemove:function(e){return y("pop_seg",{seg:e})},segmentUpdate:function(e){return y("seg_update",{seg:e})},segmentNew:function(e,r){return y("new_seg",{seg:e,primary:r})},segmentRemove:function(e){return y("rem_seg",{seg:e})},tempStatus:function(e,r,t){return y("temp_status",{seg:e,above:r,below:t})},rewind:function(e){return y("rewind",{seg:e})},status:function(e,r,t){return y("status",{seg:e,above:r,below:t})},vert:function(e){return e===b?p:(b=e,y("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),y("log",{txt:e})},reset:function(){return y("reset")},selected:function(e){return y("selected",{segs:e})},chainStart:function(e){return y("chain_start",{seg:e})},chainRemoveHead:function(e,r){return y("chain_rem_head",{index:e,pt:r})},chainRemoveTail:function(e,r){return y("chain_rem_tail",{index:e,pt:r})},chainNew:function(e,r){return y("chain_new",{pt1:e,pt2:r})},chainMatch:function(e){return y("chain_match",{index:e})},chainClose:function(e){return y("chain_close",{index:e})},chainAddHead:function(e,r){return y("chain_add_head",{index:e,pt:r})},chainAddTail:function(e,r){return y("chain_add_tail",{index:e,pt:r})},chainConnect:function(e,r){return y("chain_con",{index1:e,index2:r})},chainReverse:function(e){return y("chain_rev",{index:e})},chainJoin:function(e,r){return y("chain_join",{index1:e,index2:r})},done:function(){return y("done")}}}},{}],257:[function(v,ae,ie){ae.exports=function(p){"number"!=typeof p&&(p=1e-10);var g={epsilon:function(b){return"number"==typeof b&&(p=b),p},pointAboveOrOnLine:function(b,y,e){var r=y[0],t=y[1];return(e[0]-r)*(b[1]-t)-(e[1]-t)*(b[0]-r)>=-p},pointBetween:function(b,y,e){var t=e[0]-y[0],n=e[1]-y[1],m=(b[0]-y[0])*t+(b[1]-y[1])*n;return!(m<p||m-(t*t+n*n)>-p)},pointsSameX:function(b,y){return Math.abs(b[0]-y[0])<p},pointsSameY:function(b,y){return Math.abs(b[1]-y[1])<p},pointsSame:function(b,y){return g.pointsSameX(b,y)&&g.pointsSameY(b,y)},pointsCompare:function(b,y){return g.pointsSameX(b,y)?g.pointsSameY(b,y)?0:b[1]<y[1]?-1:1:b[0]<y[0]?-1:1},pointsCollinear:function(b,y,e){return Math.abs((b[0]-y[0])*(y[1]-e[1])-(y[0]-e[0])*(b[1]-y[1]))<p},linesIntersect:function(b,y,e,r){var t=y[0]-b[0],o=y[1]-b[1],n=r[0]-e[0],m=r[1]-e[1],l=t*m-o*n;if(Math.abs(l)<p)return!1;var i=b[0]-e[0],f=b[1]-e[1],u=(n*f-m*i)/l,s=(t*f-o*i)/l,d={alongA:0,alongB:0,pt:[b[0]+u*t,b[1]+u*o]};return d.alongA=u<=-p?-2:u<p?-1:u-1<=-p?0:u-1<p?1:2,d.alongB=s<=-p?-2:s<p?-1:s-1<=-p?0:s-1<p?1:2,d},pointInsideRegion:function(b,y){for(var e=b[0],r=b[1],t=y[y.length-1][0],o=y[y.length-1][1],n=!1,m=0;m<y.length;m++){var l=y[m][0],i=y[m][1];i-r>p!=o-r>p&&(t-l)*(r-i)/(o-i)+l-e>p&&(n=!n),t=l,o=i}return n}};return g}},{}],258:[function(v,ae,ie){ae.exports={toPolygon:function(g,b){function y(t){if(t.length<=0)return g.segments({inverted:!1,regions:[]});function o(l){var i=l.slice(0,l.length-1);return g.segments({inverted:!1,regions:[i]})}for(var n=o(t[0]),m=1;m<t.length;m++)n=g.selectDifference(g.combine(n,o(t[m])));return n}if("Polygon"===b.type)return g.polygon(y(b.coordinates));if("MultiPolygon"===b.type){for(var e=g.segments({inverted:!1,regions:[]}),r=0;r<b.coordinates.length;r++)e=g.selectUnion(g.combine(e,y(b.coordinates[r])));return g.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(g,b,y){function e(s,d){return b.pointInsideRegion([.5*(s[0][0]+s[1][0]),.5*(s[0][1]+s[1][1])],d)}function r(s){return{region:s,children:[]}}y=g.polygon(g.segments(y));var t=r(null);function o(s,d){for(var h=0;h<s.children.length;h++)if(e(d,(_=s.children[h]).region))return void o(_,d);var a=r(d);for(h=0;h<s.children.length;h++){var _;e((_=s.children[h]).region,d)&&(a.children.push(_),s.children.splice(h,1),h--)}s.children.push(a)}for(var n=0;n<y.regions.length;n++){var m=y.regions[n];m.length<3||o(t,m)}function l(s,d){for(var h=0,a=s[s.length-1][0],_=s[s.length-1][1],c=[],T=0;T<s.length;T++){var x=s[T][0],w=s[T][1];c.push([x,w]),h+=w*a-x*_,a=x,_=w}return h<0!==d&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var i=[];function f(s){var d=[l(s.region,!1)];i.push(d);for(var h=0;h<s.children.length;h++)d.push(u(s.children[h]))}function u(s){for(var d=0;d<s.children.length;d++)f(s.children[d]);return l(s.region,!0)}for(n=0;n<t.children.length;n++)f(t.children[n]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],259:[function(v,ae,ie){var p=v("./linked-list");ae.exports=function(g,b,y){function e(l,i,f){return{id:y?y.segmentId():-1,start:l,end:i,myFill:{above:f.myFill.above,below:f.myFill.below},otherFill:null}}var r=p.create();function t(l,i){r.insertBefore(l,function(f){return u=l.isStart,d=i,h=f.isStart,_=f.other.pt,(0!==(c=b.pointsCompare(l.pt,a=f.pt))?c:b.pointsSame(d,_)?0:u!==h?u?1:-1:b.pointAboveOrOnLine(d,h?a:_,h?_:a)?1:-1)<0;var u,d,h,a,_,c})}function o(l,i){var u,d,f=(t(d=p.node({isStart:!0,pt:(u=l).start,seg:u,primary:i,other:null,status:null}),u.end),d);return function(u,s,d){var h=p.node({isStart:!1,pt:s.end,seg:s,primary:d,other:u,status:null});u.other=h,t(h,u.pt)}(f,l,i),f}function n(l,i){var u,s,f=e(i,l.seg.end,l.seg);return u=l,s=i,y&&y.segmentChop(u.seg,s),u.other.remove(),u.seg.end=s,u.other.pt=s,t(u.other,u.pt),o(f,l.primary)}function m(l,i){var f=p.create();function u(P){return f.findTransition(function(L){var S,E,N,z,q,G;return z=(S=P).seg.end,(b.pointsCollinear(N=S.seg.start,q=(E=L.ev).seg.start,G=E.seg.end)?b.pointsCollinear(z,q,G)||b.pointAboveOrOnLine(z,q,G)?1:-1:b.pointAboveOrOnLine(N,q,G)?1:-1)>0})}function s(P,L){var S=P.seg,E=L.seg,N=S.start,z=S.end,q=E.start,G=E.end;y&&y.checkIntersection(S,E);var K=b.linesIntersect(N,z,q,G);if(!1===K){if(!b.pointsCollinear(N,z,q)||b.pointsSame(N,G)||b.pointsSame(z,q))return!1;var ne=b.pointsSame(N,q),X=b.pointsSame(z,G);if(ne&&X)return L;var J=!ne&&b.pointBetween(N,q,G),se=!X&&b.pointBetween(z,q,G);if(ne)return se?n(L,z):n(P,G),L;J&&(X||(se?n(L,z):n(P,G)),n(L,N))}else 0===K.alongA&&(-1===K.alongB?n(P,q):0===K.alongB?n(P,K.pt):1===K.alongB&&n(P,G)),0===K.alongB&&(-1===K.alongA?n(L,N):0===K.alongA?n(L,K.pt):1===K.alongA&&n(L,z));return!1}for(var d=[];!r.isEmpty();){var h=r.getHead();if(y&&y.vert(h.pt[0]),h.isStart){let P=function(){if(_){var L=s(h,_);if(L)return L}return!!c&&s(h,c)};y&&y.segmentNew(h.seg,h.primary);var a=u(h),_=a.before?a.before.ev:null,c=a.after?a.after.ev:null;y&&y.tempStatus(h.seg,!!_&&_.seg,!!c&&c.seg);var T,w,x=P();if(x&&(g?(w=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(x.seg.myFill.above=!x.seg.myFill.above):x.seg.otherFill=h.seg.myFill,y&&y.segmentUpdate(x.seg),h.other.remove(),h.remove()),r.getHead()!==h){y&&y.rewind(h.seg);continue}g?(w=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=c?c.seg.myFill.above:l,h.seg.myFill.above=w?!h.seg.myFill.below:h.seg.myFill.below):null===h.seg.otherFill&&(h.seg.otherFill={above:T=c?h.primary===c.primary?c.seg.otherFill.above:c.seg.myFill.above:h.primary?i:l,below:T}),y&&y.status(h.seg,!!_&&_.seg,!!c&&c.seg),h.other.status=a.insert(p.node({ev:h}))}else{var M=h.status;if(null===M)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(f.exists(M.prev)&&f.exists(M.next)&&s(M.prev.ev,M.next.ev),y&&y.statusRemove(M.ev.seg),M.remove(),!h.primary){var D=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=D}d.push(h.seg)}r.getHead().remove()}return y&&y.done(),d}return g?{addRegion:function(l){for(var i,f,u,s=l[l.length-1],d=0;d<l.length;d++){var h=b.pointsCompare(i=s,s=l[d]);0!==h&&o((f=h<0?i:s,u=h<0?s:i,{id:y?y.segmentId():-1,start:f,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(l){return m(l,!1)}}:{calculate:function(l,i,f,u){return l.forEach(function(s){o(e(s.start,s.end,s),!0)}),f.forEach(function(s){o(e(s.start,s.end,s),!1)}),m(i,u)}}}},{"./linked-list":260}],260:[function(v,ae,ie){ae.exports={create:function(){var p={root:{root:!0,next:null},exists:function(g){return null!==g&&g!==p.root},isEmpty:function(){return null===p.root.next},getHead:function(){return p.root.next},insertBefore:function(g,b){for(var y=p.root,e=p.root.next;null!==e;){if(b(e))return g.prev=e.prev,g.next=e,e.prev.next=g,void(e.prev=g);y=e,e=e.next}y.next=g,g.prev=y,g.next=null},findTransition:function(g){for(var b=p.root,y=p.root.next;null!==y&&!g(y);)b=y,y=y.next;return{before:b===p.root?null:b,after:y,insert:function(e){return e.prev=b,e.next=y,b.next=e,null!==y&&(y.prev=e),e}}}};return p},node:function(p){return p.prev=null,p.next=null,p.remove=function(){p.prev.next=p.next,p.next&&(p.next.prev=p.prev),p.prev=null,p.next=null},p}}},{}],261:[function(v,ae,ie){ae.exports=function(p,g,b){var y=[],e=[];return p.forEach(function(r){var t=r.start,o=r.end;if(g.pointsSame(t,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(r);for(var n={index:0,matches_head:!1,matches_pt1:!1},m={index:0,matches_head:!1,matches_pt1:!1},l=n,i=0;i<y.length;i++){var f=(a=y[i])[0],u=a[a.length-1];if(g.pointsSame(f,t)){if(C(i,!0,!0))break}else if(g.pointsSame(f,o)){if(C(i,!0,!1))break}else if(g.pointsSame(u,t)){if(C(i,!1,!0))break}else if(g.pointsSame(u,o)&&C(i,!1,!1))break}if(l===n)return y.push([t,o]),void(b&&b.chainNew(t,o));if(l===m){b&&b.chainMatch(n.index);var s=n.index,d=n.matches_pt1?o:t,h=n.matches_head,a=y[s],_=h?a[0]:a[a.length-1],c=h?a[1]:a[a.length-2],T=h?a[a.length-1]:a[0],x=h?a[a.length-2]:a[1];return g.pointsCollinear(c,_,d)&&(h?(b&&b.chainRemoveHead(n.index,d),a.shift()):(b&&b.chainRemoveTail(n.index,d),a.pop()),_=c),g.pointsSame(T,d)?(y.splice(s,1),g.pointsCollinear(x,T,_)&&(h?(b&&b.chainRemoveTail(n.index,_),a.pop()):(b&&b.chainRemoveHead(n.index,_),a.shift())),b&&b.chainClose(n.index),void e.push(a)):void(h?(b&&b.chainAddHead(n.index,d),a.unshift(d)):(b&&b.chainAddTail(n.index,d),a.push(d)))}var w=n.index,M=m.index;b&&b.chainConnect(w,M);var D=y[w].length<y[M].length;n.matches_head?m.matches_head?D?(P(w),L(w,M)):(P(M),L(M,w)):L(M,w):m.matches_head?L(w,M):D?(P(w),L(M,w)):(P(M),L(w,M))}function C(S,E,N){return l.index=S,l.matches_head=E,l.matches_pt1=N,l===n?(l=m,!1):(l=null,!0)}function P(S){b&&b.chainReverse(S),y[S].reverse()}function L(S,E){var N=y[S],z=y[E],q=N[N.length-1],G=N[N.length-2],K=z[0],ne=z[1];g.pointsCollinear(G,q,K)&&(b&&b.chainRemoveTail(S,q),N.pop(),q=G),g.pointsCollinear(q,K,ne)&&(b&&b.chainRemoveHead(E,K),z.shift()),b&&b.chainJoin(S,E),y[S]=N.concat(z),y.splice(E,1)}}),e}},{}],262:[function(v,ae,ie){function p(b,y,e){var r=[];return b.forEach(function(t){var o=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==y[o]&&r.push({id:e?e.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===y[o],below:2===y[o]},otherFill:null})}),e&&e.selected(r),r}ae.exports={union:function(b,y){return p(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],y)},intersect:function(b,y){return p(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],y)},difference:function(b,y){return p(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],y)},differenceRev:function(b,y){return p(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],y)},xor:function(b,y){return p(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],y)}}},{}],263:[function(v,ae,ie){"use strict";var p=v("stream").Transform,g=v("stream-parser");function b(){p.call(this,{readableObjectMode:!0})}function y(e,r,t){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,r&&(this.code=r),t&&(this.statusCode=t)}(b.prototype=Object.create(p.prototype)).constructor=b,g(b.prototype),ie.ParserStream=b,ie.sliceEq=function(e,r,t){for(var o=r,n=0;n<t.length;)if(e[o++]!==t[n++])return!1;return!0},ie.str2arr=function(e,r){var t=[],o=0;if(r&&"hex"===r)for(;o<e.length;)t.push(parseInt(e.slice(o,o+2),16)),o+=2;else for(;o<e.length;o++)t.push(255&e.charCodeAt(o));return t},ie.readUInt16LE=function(e,r){return e[r]|e[r+1]<<8},ie.readUInt16BE=function(e,r){return e[r+1]|e[r]<<8},ie.readUInt32LE=function(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|16777216*e[r+3]},ie.readUInt32BE=function(e,r){return e[r+3]|e[r+2]<<8|e[r+1]<<16|16777216*e[r]},(y.prototype=Object.create(Error.prototype)).constructor=y,ie.ProbeError=y},{stream:286,"stream-parser":302}],264:[function(v,ae,ie){"use strict";function p(y,e){var r=new Error(y);return r.code=e,r}function g(y){try{return decodeURIComponent(escape(y))}catch{return y}}function b(y,e,r){this.input=y.subarray(e,r),this.start=e;var t=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==t&&"MM\0*"!==t)throw p("invalid TIFF signature","EBADDATA");this.big_endian="M"===t[0]}b.prototype.each=function(y){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,y)}},b.prototype.read_uint16=function(y){var e=this.input;if(y+2>e.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?256*e[y]+e[y+1]:e[y]+256*e[y+1]},b.prototype.read_uint32=function(y){var e=this.input;if(y+4>e.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[y]+65536*e[y+1]+256*e[y+2]+e[y+3]:e[y]+256*e[y+1]+65536*e[y+2]+16777216*e[y+3]},b.prototype.is_subifd_link=function(y,e){return 0===y&&34665===e||0===y&&34853===e||34665===y&&40965===e},b.prototype.exif_format_length=function(y){switch(y){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(y,e){var r;switch(y){case 1:case 2:return this.input[e];case 6:return(r=this.input[e])|33554430*(128&r);case 3:return this.read_uint16(e);case 8:return(r=this.read_uint16(e))|131070*(32768&r);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},b.prototype.scan_ifd=function(y,e,r){var t=this.read_uint16(e);e+=2;for(var o=0;o<t;o++){var n=this.read_uint16(e),m=this.read_uint16(e+2),l=this.read_uint32(e+4),i=this.exif_format_length(m),f=l*i,u=f<=4?e+8:this.read_uint32(e+8),s=!1;if(u+f>this.input.length)throw p("unexpected EOF","EBADDATA");for(var d=[],h=u,a=0;a<l;a++,h+=i){var _=this.exif_format_read(m,h);if(null===_){d=null;break}d.push(_)}if(Array.isArray(d)&&2===m&&(d=g(String.fromCharCode.apply(null,d)))&&"\0"===d[d.length-1]&&(d=d.slice(0,-1)),this.is_subifd_link(y,n)&&Array.isArray(d)&&Number.isInteger(d[0])&&d[0]>0&&(this.ifds_to_read.push({id:n,offset:d[0]}),s=!0),!1===r({is_big_endian:this.big_endian,ifd:y,tag:n,format:m,count:l,entry_offset:e+this.start,data_length:f,data_offset:u+this.start,value:d,is_subifd_link:s}))return void(this.aborted=!0);e+=12}0===y&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},ae.exports.ExifParser=b,ae.exports.get_orientation=function(y){var e=0;try{return new b(y,0,y.length).each(function(r){if(0===r.ifd&&274===r.tag&&Array.isArray(r.value))return e=r.value[0],!1}),e}catch{return-1}}},{}],265:[function(v,ae,ie){"use strict";var p=v("./common").readUInt16BE,g=v("./common").readUInt32BE;function b(n,m){if(n.length<4+m)return null;var l=g(n,m);return n.length<l+m||l<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(m+4,m+8)),data:n.slice(m+8,m+l),end:m+l}}function y(n,m){for(var l=0;;){var i=b(n,l);if(!i)break;switch(i.boxtype){case"ispe":m.sizes.push({width:g(i.data,4),height:g(i.data,8)});break;case"irot":m.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":m.transforms.push({type:"imir",value:1&i.data[0]})}l=i.end}}function e(n,m,l){for(var i=0,f=0;f<l;f++)i=256*i+(n[m+f]||0);return i}function r(n,m){for(var l=n[4]>>4&15,i=15&n[4],f=n[5]>>4&15,u=p(n,6),s=8,d=0;d<u;d++){var h=p(n,s),a=p(n,s+=2),_=e(n,s+=2,f),c=p(n,s+=f);if(s+=2,0===a&&1===c){var T=e(n,s,l),x=e(n,s+l,i);m.item_loc[h]={length:x,offset:T+_}}s+=c*(l+i)}}function t(n,m){for(var l=p(n,4),i=6,f=0;f<l;f++){var u=b(n,i);if(!u)break;if("infe"===u.boxtype){for(var s=p(u.data,4),d="",h=8;h<u.data.length&&u.data[h];h++)d+=String.fromCharCode(u.data[h]);m.item_inf[d]=s}i=u.end}}function o(n,m){for(var l=0;;){var i=b(n,l);if(!i)break;"ipco"===i.boxtype&&y(i.data,m),l=i.end}}ae.exports.unbox=b,ae.exports.readSizeFromMeta=function(n){var m={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(h,a){for(var _=4;;){var c=b(h,_);if(!c)break;"iprp"===c.boxtype&&o(c.data,a),"iloc"===c.boxtype&&r(c.data,a),"iinf"===c.boxtype&&t(c.data,a),_=c.end}}(n,m),m.sizes.length){var l,i,f,u=(i=(l=m.sizes).reduce(function(h,a){return h.width>a.width||h.width===a.width&&h.height>a.height?h:a}),f=l.reduce(function(h,a){return h.height>a.height||h.height===a.height&&h.width>a.width?h:a}),i.width>f.height||i.width===f.height&&i.height>f.width?i:f),s=1;m.transforms.forEach(function(h){var a={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},_={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===h.type&&(s=0===h.value?_[s]:a[s=a[s=_[s]]]),"irot"===h.type)for(var c=0;c<h.value;c++)s=a[s]});var d=null;return m.item_inf.Exif&&(d=m.item_loc[m.item_inf.Exif]),{width:u.width,height:u.height,orientation:m.transforms.length?s:null,variants:m.sizes,exif_location:d}}},ae.exports.getMimeType=function(n){var m=String.fromCharCode.apply(null,n.slice(0,4)),l={};l[m]=!0;for(var i=8;i<n.length;i+=4)l[String.fromCharCode.apply(null,n.slice(i,i+4))]=!0;if(l.mif1||l.msf1||l.miaf)return"avif"===m||"avis"===m||"avio"===m?{type:"avif",mime:"image/avif"}:"heic"===m||"heix"===m?{type:"heic",mime:"image/heic"}:"hevc"===m||"hevx"===m?{type:"heic",mime:"image/heic-sequence"}:l.avif||l.avis?{type:"avif",mime:"image/avif"}:l.heic||l.heix||l.hevc||l.hevx||l.heis?l.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt32BE,y=v("../miaf_utils"),e=v("../exif_utils"),r=p("ftyp");ae.exports=function(t){if(g(t,4,r)){var o=y.unbox(t,0);if(o){var n=y.getMimeType(o.data);if(n){for(var m,l=o.end;;){var i=y.unbox(t,l);if(!i)break;if(l=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){m=i.data;break}}if(m){var f=y.readSizeFromMeta(m);if(f){var u={width:f.width,height:f.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(f.variants.length>1&&(u.variants=f.variants),f.orientation&&(u.orientation=f.orientation),f.exif_location&&f.exif_location.offset+f.exif_location.length<=t.length){var s=b(t,f.exif_location.offset),d=t.slice(f.exif_location.offset+s+4,f.exif_location.offset+f.exif_location.length),h=e.get_orientation(d);h>0&&(u.orientation=h)}return u}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt16LE,y=p("BM");ae.exports=function(e){if(!(e.length<26)&&g(e,0,y))return{width:b(e,18),height:b(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt16LE,y=p("GIF87a"),e=p("GIF89a");ae.exports=function(r){if(!(r.length<10)&&(g(r,0,y)||g(r,0,e)))return{width:b(r,6),height:b(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(v,ae,ie){"use strict";var p=v("../common").readUInt16LE;ae.exports=function(g){var b=p(g,0),y=p(g,2),e=p(g,4);if(0===b&&1===y&&e){for(var r=[],t={width:0,height:0},o=0;o<e;o++){var n=g[6+16*o]||256,m=g[6+16*o+1]||256,l={width:n,height:m};r.push(l),(n>t.width||m>t.height)&&(t=l)}return{width:t.width,height:t.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(v,ae,ie){"use strict";var p=v("../common").readUInt16BE,g=v("../common").str2arr,b=v("../common").sliceEq,y=v("../exif_utils"),e=g("Exif\0\0");ae.exports=function(r){if(!(r.length<2)&&255===r[0]&&216===r[1]&&255===r[2])for(var t=2;;){for(;;){if(r.length-t<2)return;if(255===r[t++])break}for(var o,n,m=r[t++];255===m;)m=r[t++];if(208<=m&&m<=217||1===m)o=0;else{if(!(192<=m&&m<=254)||r.length-t<2)return;o=p(r,t)-2,t+=2}if(217===m||218===m)return;if(225===m&&o>=10&&b(r,t,e)&&(n=y.get_orientation(r.slice(t+6,t+o))),o>=5&&192<=m&&m<=207&&196!==m&&200!==m&&204!==m){if(r.length-t<o)return;var l={width:p(r,t+3),height:p(r,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(l.orientation=n),l}t+=o}}},{"../common":263,"../exif_utils":264}],271:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt32BE,y=p("\x89PNG\r\n\x1a\n"),e=p("IHDR");ae.exports=function(r){if(!(r.length<24)&&g(r,0,y)&&g(r,12,e))return{width:b(r,16),height:b(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt32BE,y=p("8BPS\0\x01");ae.exports=function(e){if(!(e.length<22)&&g(e,0,y))return{width:b(e,18),height:b(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(v,ae,ie){"use strict";function p(n){return"number"==typeof n&&isFinite(n)&&n>0}var g=/<[-_.:a-zA-Z0-9][^>]*>/,b=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,y=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function o(n){return t.test(n)?n.match(t)[0]:"px"}ae.exports=function(n){if(function(T){var x,w=0,M=T.length;for(239===T[0]&&187===T[1]&&191===T[2]&&(w=3);w<M&&(32===(x=T[w])||9===x||13===x||10===x);)w++;return w!==M&&60===T[w]}(n)){for(var m="",l=0;l<n.length;l++)m+=String.fromCharCode(n[l]);var i=(m.match(g)||[""])[0];if(b.test(i)){var f=(x=(T=i).match(y),w=T.match(e),M=T.match(r),{width:x&&(x[1]||x[2]),height:w&&(w[1]||w[2]),viewbox:M&&(M[1]||M[2])}),u=parseFloat(f.width),s=parseFloat(f.height);if(f.width&&f.height)return p(u)&&p(s)?{width:u,height:s,type:"svg",mime:"image/svg+xml",wUnits:o(f.width),hUnits:o(f.height)}:void 0;var d=(f.viewbox||"").split(" "),h={width:d[2],height:d[3]},a=parseFloat(h.width),_=parseFloat(h.height);if(p(a)&&p(_)&&o(h.width)===o(h.height)){var c=a/_;return f.width?p(u)?{width:u,height:u/c,type:"svg",mime:"image/svg+xml",wUnits:o(f.width),hUnits:o(f.width)}:void 0:f.height?p(s)?{width:s*c,height:s,type:"svg",mime:"image/svg+xml",wUnits:o(f.height),hUnits:o(f.height)}:void 0:{width:a,height:_,type:"svg",mime:"image/svg+xml",wUnits:o(h.width),hUnits:o(h.height)}}}}var T,x,w,M}},{}],274:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt16LE,y=v("../common").readUInt16BE,e=v("../common").readUInt32LE,r=v("../common").readUInt32BE,t=p("II*\0"),o=p("MM\0*");function n(i,f,u){return u?y(i,f):b(i,f)}function m(i,f,u){return u?r(i,f):e(i,f)}function l(i,f,u){var s=n(i,f+2,u);return 1!==m(i,f+4,u)||3!==s&&4!==s?null:3===s?n(i,f+8,u):m(i,f+8,u)}ae.exports=function(i){if(!(i.length<8)&&(g(i,0,t)||g(i,0,o))){var f=77===i[0],u=m(i,4,f)-8;if(!(u<0)){var s=u+8;if(!(i.length-s<2)){var d=12*n(i,s+0,f);if(!(d<=0||(s+=2,i.length-s<d))){var h,a,_,c;for(h=0;h<d;h+=12)256===(c=n(i,s+h,f))?a=l(i,s+h,f):257===c&&(_=l(i,s+h,f));return a&&_?{width:a,height:_,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":263}],275:[function(v,ae,ie){"use strict";var p=v("../common").str2arr,g=v("../common").sliceEq,b=v("../common").readUInt16LE,y=v("../common").readUInt32LE,e=v("../exif_utils"),r=p("RIFF"),t=p("WEBP");function o(l,i){if(157===l[i+3]&&1===l[i+4]&&42===l[i+5])return{width:16383&b(l,i+6),height:16383&b(l,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(l,i){if(47===l[i]){var f=y(l,i+1);return{width:1+(16383&f),height:1+(f>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function m(l,i){return{width:1+(l[i+6]<<16|l[i+5]<<8|l[i+4]),height:1+(l[i+9]<<i|l[i+8]<<8|l[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ae.exports=function(l){if(!(l.length<16)&&(g(l,0,r)||g(l,8,t))){var i=12,f=null,u=0,s=y(l,4)+8;if(!(s>l.length)){for(;i+8<s;)if(0!==l[i]){var d=String.fromCharCode.apply(null,l.slice(i,i+4)),h=y(l,i+4);"VP8 "===d&&h>=10?f=f||o(l,i+8):"VP8L"===d&&h>=9?f=f||n(l,i+8):"VP8X"===d&&h>=10?f=f||m(l,i+8):"EXIF"===d&&(u=e.get_orientation(l.slice(i+8,i+8+h)),i=1/0),i+=8+h}else i++;if(f)return u>0&&(f.orientation=u),f}}}},{"../common":263,"../exif_utils":264}],276:[function(v,ae,ie){"use strict";ae.exports={avif:v("./parse_sync/avif"),bmp:v("./parse_sync/bmp"),gif:v("./parse_sync/gif"),ico:v("./parse_sync/ico"),jpeg:v("./parse_sync/jpeg"),png:v("./parse_sync/png"),psd:v("./parse_sync/psd"),svg:v("./parse_sync/svg"),tiff:v("./parse_sync/tiff"),webp:v("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(v,ae,ie){"use strict";var p=v("./lib/parsers_sync");ae.exports=function(g){return function(b){for(var y=Object.keys(p),e=0;e<y.length;e++){var r=p[y[e]](b);if(r)return r}return null}(g)},ae.exports.parsers=p},{"./lib/parsers_sync":276}],278:[function(v,ae,ie){var p,g,b=ae.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(s){if(p===setTimeout)return setTimeout(s,0);if((p===y||!p)&&setTimeout)return p=setTimeout,setTimeout(s,0);try{return p(s,0)}catch{try{return p.call(null,s,0)}catch{return p.call(this,s,0)}}}!function(){try{p="function"==typeof setTimeout?setTimeout:y}catch{p=y}try{g="function"==typeof clearTimeout?clearTimeout:e}catch{g=e}}();var t,o=[],n=!1,m=-1;function l(){n&&t&&(n=!1,t.length?o=t.concat(o):m=-1,o.length&&i())}function i(){if(!n){var s=r(l);n=!0;for(var d=o.length;d;){for(t=o,o=[];++m<d;)t&&t[m].run();m=-1,d=o.length}t=null,n=!1,function(h){if(g===clearTimeout)return clearTimeout(h);if((g===e||!g)&&clearTimeout)return g=clearTimeout,clearTimeout(h);try{g(h)}catch{try{return g.call(null,h)}catch{return g.call(this,h)}}}(s)}}function f(s,d){this.fun=s,this.array=d}function u(){}b.nextTick=function(s){var d=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)d[h-1]=arguments[h];o.push(new f(s,d)),1!==o.length||n||r(i)},f.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=u,b.addListener=u,b.once=u,b.off=u,b.removeListener=u,b.removeAllListeners=u,b.emit=u,b.prependListener=u,b.prependOnceListener=u,b.listeners=function(s){return[]},b.binding=function(s){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(s){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],279:[function(v,ae,ie){(function(p){(function(){for(var g=v("performance-now"),b=typeof window>"u"?p:window,y=["moz","webkit"],e="AnimationFrame",r=b["request"+e],t=b["cancel"+e]||b["cancelRequest"+e],o=0;!r&&o<y.length;o++)r=b[y[o]+"Request"+e],t=b[y[o]+"Cancel"+e]||b[y[o]+"CancelRequest"+e];if(!r||!t){var n=0,m=0,l=[];r=function(i){if(0===l.length){var f=g(),u=Math.max(0,1e3/60-(f-n));n=u+f,setTimeout(function(){var s=l.slice(0);l.length=0;for(var d=0;d<s.length;d++)if(!s[d].cancelled)try{s[d].callback(n)}catch(h){setTimeout(function(){throw h},0)}},Math.round(u))}return l.push({handle:++m,callback:i,cancelled:!1}),m},t=function(i){for(var f=0;f<l.length;f++)l[f].handle===i&&(l[f].cancelled=!0)}}ae.exports=function(i){return r.call(b,i)},ae.exports.cancel=function(){t.apply(b,arguments)},ae.exports.polyfill=function(i){i||(i=b),i.requestAnimationFrame=r,i.cancelAnimationFrame=t}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(v,ae,ie){"use strict";var p=v("array-bounds"),g=v("color-normalize"),b=v("update-diff"),y=v("pick-by-alias"),e=v("object-assign"),r=v("flatten-vertex-data"),t=v("to-float32"),o=t.float32,n=t.fract32;ae.exports=function(l,i){if("function"==typeof l?(i||(i={}),i.regl=l):i=l,i.length&&(i.positions=i),!(l=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var f,u,s,d,h,a,_=l._gl,c={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},T=[];return d=l.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=l.buffer({usage:"static",type:"float",data:m}),D(i),f=l({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:l.prop("range"),lineWidth:l.prop("lineWidth"),capSize:l.prop("capSize"),opacity:l.prop("opacity"),scale:l.prop("scale"),translate:l.prop("translate"),scaleFract:l.prop("scaleFract"),translateFract:l.prop("translateFract"),viewport:function(P,L){return[L.viewport.x,L.viewport.y,P.viewportWidth,P.viewportHeight]}},attributes:{color:{buffer:d,offset:function(P,L){return 4*L.offset},divisor:1},position:{buffer:u,offset:function(P,L){return 8*L.offset},divisor:1},positionFract:{buffer:s,offset:function(P,L){return 8*L.offset},divisor:1},error:{buffer:h,offset:function(P,L){return 16*L.offset},divisor:1},direction:{buffer:a,stride:24,offset:0},lineOffset:{buffer:a,stride:24,offset:8},capOffset:{buffer:a,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:l.prop("viewport")},viewport:l.prop("viewport"),stencil:!1,instances:l.prop("count"),count:m.length}),e(x,{update:D,draw:w,destroy:C,regl:l,gl:_,canvas:_.canvas,groups:T}),x;function x(P){P?D(P):null===P&&C(),w()}function w(P){if("number"==typeof P)return M(P);P&&!Array.isArray(P)&&(P=[P]),l._refresh(),T.forEach(function(L,S){L&&(P&&(L.draw=!!P[S]),L.draw?M(S):L.draw=!0)})}function M(P){"number"==typeof P&&(P=T[P]),null!=P&&P&&P.count&&P.color&&P.opacity&&P.positions&&P.positions.length>1&&(P.scaleRatio=[P.scale[0]*P.viewport.width,P.scale[1]*P.viewport.height],f(P),P.after&&P.after(P))}function D(P){if(P){null!=P.length?"number"==typeof P[0]&&(P=[{positions:P}]):Array.isArray(P)||(P=[P]);var L=0,S=0;if(x.groups=T=P.map(function(ne,X){var J=T[X];return ne&&("function"==typeof ne?ne={after:ne}:"number"==typeof ne[0]&&(ne={positions:ne}),ne=y(ne,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),J||(T[X]=J={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},ne=e({},c,ne)),b(J,ne,[{lineWidth:function(se){return.5*+se},capSize:function(se){return.5*+se},opacity:parseFloat,errors:function(se){return se=r(se),S+=se.length,se},positions:function(se,V){return se=r(se,"float64"),V.count=Math.floor(se.length/2),V.bounds=p(se,2),V.offset=L,L+=V.count,se}},{color:function(se,V){var j=V.count;if(se||(se="transparent"),!Array.isArray(se)||"number"==typeof se[0]){var H=se;se=Array(j);for(var oe=0;oe<j;oe++)se[oe]=H}if(se.length<j)throw Error("Not enough colors");for(var U=new Uint8Array(4*j),te=0;te<j;te++){var ee=g(se[te],"uint8");U.set(ee,4*te)}return U},range:function(se,V,j){return se||(se=V.bounds),V.scale=[1/(se[2]-se[0]),1/(se[3]-se[1])],V.translate=[-se[0],-se[1]],V.scaleFract=n(V.scale),V.translateFract=n(V.translate),se},viewport:function(se){var V;return Array.isArray(se)?V={x:se[0],y:se[1],width:se[2]-se[0],height:se[3]-se[1]}:se?((V={x:se.x||se.left||0,y:se.y||se.top||0}).width=se.right?se.right-V.x:se.w||se.width||0,V.height=se.bottom?se.bottom-V.y:se.h||se.height||0):V={x:0,y:0,width:_.drawingBufferWidth,height:_.drawingBufferHeight},V}}])),J}),L||S){var E=T.reduce(function(ne,X,J){return ne+(X?X.count:0)},0),N=new Float64Array(2*E),z=new Uint8Array(4*E),q=new Float32Array(4*E);T.forEach(function(ne,X){if(ne){var J=ne.positions,V=ne.offset,H=ne.errors;ne.count&&(z.set(ne.color,4*V),q.set(H,4*V),N.set(J,2*V))}});var G=o(N);u(G);var K=n(N,G);s(K),d(z),h(q)}}}function C(){u.destroy(),s.destroy(),d.destroy(),h.destroy(),a.destroy()}};var m=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(v,ae,ie){"use strict";var p=v("color-normalize"),g=v("array-bounds"),b=v("object-assign"),y=v("glslify"),e=v("pick-by-alias"),r=v("flatten-vertex-data"),t=v("earcut"),o=v("array-normalize"),n=v("to-float32"),m=n.float32,l=n.fract32,i=v("es6-weak-map"),f=v("parse-rect"),u=v("array-find-index");function s(d,h){if(!(this instanceof s))return new s(d,h);if("function"==typeof d?(h||(h={}),h.regl=d):h=d,h.length&&(h.positions=h),!(d=h.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=d._gl,this.regl=d,this.passes=[],this.shaders=s.shaders.has(d)?s.shaders.get(d):s.shaders.set(d,s.createShaders(d)).get(d),this.update(h)}ae.exports=s,s.dashMult=2,s.maxPatternLength=256,s.precisionThreshold=3e6,s.maxPoints=1e4,s.maxLines=2048,s.shaders=new i,s.createShaders=function(d){var h,a=d.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),_={primitive:"triangle strip",instances:d.prop("count"),count:4,offset:0,uniforms:{miterMode:function(T,x){return"round"===x.join?2:1},miterLimit:d.prop("miterLimit"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),thickness:d.prop("thickness"),dashTexture:d.prop("dashTexture"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),dashLength:d.prop("dashLength"),viewport:function(T,x){return[x.viewport.x,x.viewport.y,T.viewportWidth,T.viewportHeight]},depth:d.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(T,x){return!x.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport")},c=d(b({vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:a,divisor:0,stride:8,offset:0},lineTop:{buffer:a,divisor:0,stride:8,offset:4},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},_));try{h=d(b({cull:{enable:!0,face:"back"},vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:a,divisor:0,stride:8,offset:0},lineTop:{buffer:a,divisor:0,stride:8,offset:4},aColor:{buffer:d.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:d.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:d.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},_))}catch{h=c}return{fill:d({primitive:"triangle",elements:function(T,x){return x.triangles},offset:0,vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:d.prop("scale"),color:d.prop("fill"),scaleFract:d.prop("scaleFract"),translateFract:d.prop("translateFract"),translate:d.prop("translate"),opacity:d.prop("opacity"),pixelRatio:d.context("pixelRatio"),id:d.prop("id"),viewport:function(T,x){return[x.viewport.x,x.viewport.y,T.viewportWidth,T.viewportHeight]}},attributes:{position:{buffer:d.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:d.prop("positionFractBuffer"),stride:8,offset:8}},blend:_.blend,depth:{enable:!1},scissor:_.scissor,stencil:_.stencil,viewport:_.viewport}),rect:c,miter:h}},s.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},s.prototype.render=function(){for(var d,h=[],a=arguments.length;a--;)h[a]=arguments[a];h.length&&(d=this).update.apply(d,h),this.draw()},s.prototype.draw=function(){for(var d=this,h=[],a=arguments.length;a--;)h[a]=arguments[a];return(h.length?h:this.passes).forEach(function(_,c){var T;if(_&&Array.isArray(_))return(T=d).draw.apply(T,_);"number"==typeof _&&(_=d.passes[_]),_&&_.count>1&&_.opacity&&(d.regl._refresh(),_.fill&&_.triangles&&_.triangles.length>2&&d.shaders.fill(_),_.thickness&&(_.scale[0]*_.viewport.width>s.precisionThreshold||_.scale[1]*_.viewport.height>s.precisionThreshold||"rect"===_.join||!_.join&&(_.thickness<=2||_.count>=s.maxPoints)?d.shaders.rect(_):d.shaders.miter(_)))}),this},s.prototype.update=function(d){var h=this;if(d){null!=d.length?"number"==typeof d[0]&&(d=[{positions:d}]):Array.isArray(d)||(d=[d]);var a=this.regl,_=this.gl;if(d.forEach(function(M,D){var C=h.passes[D];if(void 0!==M)if(null!==M){if("number"==typeof M[0]&&(M={positions:M}),M=e(M,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),C||(h.passes[D]=C={id:D,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:a.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:a.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:a.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:a.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},M=b({},s.defaults,M)),null!=M.thickness&&(C.thickness=parseFloat(M.thickness)),null!=M.opacity&&(C.opacity=parseFloat(M.opacity)),null!=M.miterLimit&&(C.miterLimit=parseFloat(M.miterLimit)),null!=M.overlay&&(C.overlay=!!M.overlay,D<s.maxLines&&(C.depth=2*(s.maxLines-1-D%s.maxLines)/s.maxLines-1)),null!=M.join&&(C.join=M.join),null!=M.hole&&(C.hole=M.hole),null!=M.fill&&(C.fill=M.fill?p(M.fill,"uint8"):null),null!=M.viewport&&(C.viewport=f(M.viewport)),C.viewport||(C.viewport=f([_.drawingBufferWidth,_.drawingBufferHeight])),null!=M.close&&(C.close=M.close),null===M.positions&&(M.positions=[]),M.positions){var P,L;if(M.positions.x&&M.positions.y){var S=M.positions.x,E=M.positions.y;L=C.count=Math.max(S.length,E.length),P=new Float64Array(2*L);for(var N=0;N<L;N++)P[2*N]=S[N],P[2*N+1]=E[N]}else P=r(M.positions,"float64"),L=C.count=Math.floor(P.length/2);var z=C.bounds=g(P,2);if(C.fill){for(var q=[],G={},K=0,ne=0,X=0,J=C.count;ne<J;ne++){var se=P[2*ne],V=P[2*ne+1];isNaN(se)||isNaN(V)||null==se||null==V?(se=P[2*K],V=P[2*K+1],G[ne]=K):K=ne,q[X++]=se,q[X++]=V}if(M.splitNull){C.count-1 in G||(G[C.count]=C.count-1);var j=Object.keys(G).map(Number).sort(function(Ct,$t){return Ct-$t}),H=[],oe=0,U=null!=C.hole?C.hole[0]:null;if(null!=U){var te=u(j,function(Ct){return Ct>=U});(j=j.slice(0,te)).push(U)}for(var ee=function(Ct){var $t=q.slice(2*oe,2*j[Ct]).concat(U?q.slice(2*U):[]),rn=(C.hole||[]).map(function(cn){return cn-U+(j[Ct]-oe)}),hn=t($t,rn);hn=hn.map(function(cn){return cn+oe+(cn+oe<j[Ct]?0:U-j[Ct])}),H.push.apply(H,hn),oe=j[Ct]+1},le=0;le<j.length;le++)ee(le);for(var ce=0,pe=H.length;ce<pe;ce++)null!=G[H[ce]]&&(H[ce]=G[H[ce]]);C.triangles=H}else{for(var de=t(q,C.hole||[]),be=0,he=de.length;be<he;be++)null!=G[de[be]]&&(de[be]=G[de[be]]);C.triangles=de}}var xe=new Float64Array(P);o(xe,2,z);var De=new Float64Array(2*L+6);C.close?P[0]===P[2*L-2]&&P[1]===P[2*L-1]?(De[0]=xe[2*L-4],De[1]=xe[2*L-3]):(De[0]=xe[2*L-2],De[1]=xe[2*L-1]):(De[0]=xe[0],De[1]=xe[1]),De.set(xe,2),C.close?P[0]===P[2*L-2]&&P[1]===P[2*L-1]?(De[2*L+2]=xe[2],De[2*L+3]=xe[3],C.count-=1):(De[2*L+2]=xe[0],De[2*L+3]=xe[1],De[2*L+4]=xe[2],De[2*L+5]=xe[3]):(De[2*L+2]=xe[2*L-2],De[2*L+3]=xe[2*L-1],De[2*L+4]=xe[2*L-2],De[2*L+5]=xe[2*L-1]);var Se=m(De);C.positionBuffer(Se);var ke=l(De,Se);C.positionFractBuffer(ke)}if(M.range?C.range=M.range:C.range||(C.range=C.bounds),(M.range||M.positions)&&C.count){var Fe=C.bounds,Le=C.range[2]-C.range[0],Oe=C.range[3]-C.range[1];C.scale=[(Fe[2]-Fe[0])/Le,(Fe[3]-Fe[1])/Oe],C.translate=[-C.range[0]/Le+Fe[0]/Le||0,-C.range[1]/Oe+Fe[1]/Oe||0],C.scaleFract=l(C.scale),C.translateFract=l(C.translate)}if(M.dashes){var Ne,Be=0;if(!M.dashes||M.dashes.length<2)Be=1,Ne=new Uint8Array([255,255,255,255,255,255,255,255]);else{Be=0;for(var He=0;He<M.dashes.length;++He)Be+=M.dashes[He];Ne=new Uint8Array(Be*s.dashMult);for(var Ve=0,it=255,ze=0;ze<2;ze++)for(var je=0;je<M.dashes.length;++je){for(var qe=0,Ye=M.dashes[je]*s.dashMult*.5;qe<Ye;++qe)Ne[Ve++]=it;it^=255}}C.dashLength=Be,C.dashTexture({channels:1,data:Ne,width:Ne.length,height:1,mag:"linear",min:"linear"},0,0)}if(M.color){var ct=C.count,vt=M.color;vt||(vt="transparent");var wt=new Uint8Array(4*ct+4);if(Array.isArray(vt)&&"number"!=typeof vt[0]){for(var Ot=0;Ot<ct;Ot++){var St=p(vt[Ot],"uint8");wt.set(St,4*Ot)}wt.set(p(vt[0],"uint8"),4*ct)}else for(var ft=p(vt,"uint8"),st=0;st<ct+1;st++)wt.set(ft,4*st);C.colorBuffer({usage:"dynamic",type:"uint8",data:wt})}}else h.passes[D]=null}),d.length<this.passes.length){for(var c=d.length;c<this.passes.length;c++){var T=this.passes[c];T&&(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=d.length}for(var x=[],w=0;w<this.passes.length;w++)null!==this.passes[w]&&x.push(this.passes[w]);return this.passes=x,this}},s.prototype.destroy=function(){return this.passes.forEach(function(d){d.colorBuffer.destroy(),d.positionBuffer.destroy(),d.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(v,ae,ie){"use strict";function p(c,T){return function(x){if(Array.isArray(x))return x}(c)||function(x,w){var M=null==x?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(null!=M){var D,C,P=[],L=!0,S=!1;try{for(M=M.call(x);!(L=(D=M.next()).done)&&(P.push(D.value),!w||P.length!==w);L=!0);}catch(E){S=!0,C=E}finally{try{L||null==M.return||M.return()}finally{if(S)throw C}}return P}}(c,T)||b(c,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(c){return function(T){if(Array.isArray(T))return y(T)}(c)||function(T){if(typeof Symbol<"u"&&null!=T[Symbol.iterator]||null!=T["@@iterator"])return Array.from(T)}(c)||b(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(c,T){if(c){if("string"==typeof c)return y(c,T);var x=Object.prototype.toString.call(c).slice(8,-1);return"Object"===x&&c.constructor&&(x=c.constructor.name),"Map"===x||"Set"===x?Array.from(c):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?y(c,T):void 0}}function y(c,T){(null==T||T>c.length)&&(T=c.length);for(var x=0,w=new Array(T);x<T;x++)w[x]=c[x];return w}var e=v("color-normalize"),r=v("array-bounds"),t=v("color-id"),o=v("@plotly/point-cluster"),n=v("object-assign"),m=v("glslify"),l=v("pick-by-alias"),i=v("update-diff"),f=v("flatten-vertex-data"),u=v("is-iexplorer"),s=v("to-float32"),d=v("parse-rect"),h=a;function a(c,T){var x=this;if(!(this instanceof a))return new a(c,T);"function"==typeof c?(T||(T={}),T.regl=c):(T=c,c=null),T&&T.length&&(T.positions=T);var w,M=(c=T.regl)._gl,D=[];this.tooManyColors=u,w=c.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),n(this,{regl:c,gl:M,groups:[],markerCache:[null],markerTextures:[null],palette:D,paletteIds:{},paletteTexture:w,maxColors:255,maxSize:100,canvas:M.canvas}),this.update(T);var C={uniforms:{constPointSize:!!T.constPointSize,opacity:c.prop("opacity"),paletteSize:function(S,E){return[x.tooManyColors?0:255,w.height]},pixelRatio:c.context("pixelRatio"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translate:c.prop("translate"),translateFract:c.prop("translateFract"),markerTexture:c.prop("markerTexture"),paletteTexture:w},attributes:{x:function(S,E){return E.xAttr||{buffer:E.positionBuffer,stride:8,offset:0}},y:function(S,E){return E.yAttr||{buffer:E.positionBuffer,stride:8,offset:4}},xFract:function(S,E){return E.xAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:0}},yFract:function(S,E){return E.yAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:4}},size:function(S,E){return E.size.length?{buffer:E.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*E.size/x.maxSize)]}},borderSize:function(S,E){return E.borderSize.length?{buffer:E.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*E.borderSize/x.maxSize)]}},colorId:function(S,E){return E.color.length?{buffer:E.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?D.slice(4*E.color,4*E.color+4):[E.color]}},borderColorId:function(S,E){return E.borderColor.length?{buffer:E.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?D.slice(4*E.borderColor,4*E.borderColor+4):[E.borderColor]}},isActive:function(S,E){return!0===E.activation?{constant:[1]}:E.activation?E.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:c.prop("elements"),count:c.prop("count"),offset:c.prop("offset"),primitive:"points"},P=n({},C);P.frag=m(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),P.vert=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=c(P);var L=n({},C);L.frag=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),L.vert=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),u&&(L.frag=L.frag.replace("smoothstep","smoothStep"),P.frag=P.frag.replace("smoothstep","smoothStep")),this.drawCircle=c(L)}a.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},a.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},a.prototype.draw=function(){for(var c=this,T=arguments.length,x=new Array(T),w=0;w<T;w++)x[w]=arguments[w];var M=this.groups;if(1===x.length&&Array.isArray(x[0])&&(null===x[0][0]||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var D=0;D<x.length;D++)this.drawItem(D,x[D]);else M.forEach(function(C,P){c.drawItem(P)});return this},a.prototype.drawItem=function(c,T){var x=this.groups,w=x[c];if("number"==typeof T&&(c=T,w=x[T],T=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,T));for(var M=[],D=1;D<w.activation.length;D++)w.activation[D]&&(!0===w.activation[D]||w.activation[D].data.length)&&M.push.apply(M,g(this.getMarkerDrawOptions(D,w,T)));M.length&&this.drawMarker(M)}},a.prototype.getMarkerDrawOptions=function(c,T,x){var w=T.range,M=T.tree,D=T.viewport,C=T.activation,P=T.selectionBuffer,L=T.count;if(!M)return x?[n({},T,{markerTexture:this.markerTextures[c],activation:C[c],count:x.length,elements:x,offset:0})]:[n({},T,{markerTexture:this.markerTextures[c],activation:C[c],offset:0})];var S=[],E=M.range(w,{lod:!0,px:[(w[2]-w[0])/D.width,(w[3]-w[1])/D.height]});if(x){for(var N=C[c].data,z=new Uint8Array(L),q=0;q<x.length;q++){var G=x[q];z[G]=N?N[G]:1}P.subdata(z)}for(var K=E.length;K--;){var ne=p(E[K],2),X=ne[0];S.push(n({},T,{markerTexture:this.markerTextures[c],activation:x?P:C[c],offset:X,count:ne[1]-X}))}return S},a.prototype.update=function(){for(var c=this,T=arguments.length,x=new Array(T),w=0;w<T;w++)x[w]=arguments[w];if(x.length){1===x.length&&Array.isArray(x[0])&&(x=x[0]);var M=this.groups,D=this.gl,C=this.regl,P=this.maxSize,L=this.maxColors,S=this.palette;this.groups=M=x.map(function(E,N){var z=M[N];if(void 0===E)return z;null===E?E={positions:null}:"function"==typeof E?E={ondraw:E}:"number"==typeof E[0]&&(E={positions:E}),null===(E=l(E,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(E.positions=[]),null!=E.tooManyColors&&(c.tooManyColors=E.tooManyColors),z||(M[N]=z={id:N,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:C.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:C.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},E=n({},a.defaults,E)),E.positions&&!("marker"in E)&&(E.marker=z.marker,delete z.marker),E.marker&&!("positions"in E)&&(E.positions=z.positions,delete z.positions);var q=0,G=0;if(i(z,E,[{snap:!0,size:function(he,xe){return null==he&&(he=a.defaults.size),q+=he&&he.length?1:0,he},borderSize:function(he,xe){return null==he&&(he=a.defaults.borderSize),q+=he&&he.length?1:0,he},opacity:parseFloat,color:function(he,xe){return null==he&&(he=a.defaults.color),he=c.updateColor(he),G++,he},borderColor:function(he,xe){return null==he&&(he=a.defaults.borderColor),he=c.updateColor(he),G++,he},bounds:function(he,xe,De){return"range"in De||(De.range=null),he},positions:function(he,xe,De){var Se=xe.snap,ke=xe.positionBuffer,Fe=xe.positionFractBuffer,ve=xe.selectionBuffer;if(he.x||he.y)return xe.xAttr=he.x.length?{buffer:C.buffer(he.x),offset:0,stride:4,count:he.x.length}:{buffer:he.x.buffer,offset:4*he.x.offset||0,stride:4*(he.x.stride||1),count:he.x.count},xe.yAttr=he.y.length?{buffer:C.buffer(he.y),offset:0,stride:4,count:he.y.length}:{buffer:he.y.buffer,offset:4*he.y.offset||0,stride:4*(he.y.stride||1),count:he.y.count},xe.count=Math.max(xe.xAttr.count,xe.yAttr.count),he;he=f(he,"float64");var Te=xe.count=Math.floor(he.length/2),Le=xe.bounds=Te?r(he,2):null;if(De.range||xe.range||(delete xe.range,De.range=Le),De.marker||xe.marker||(delete xe.marker,De.marker=null),Se&&(!0===Se||Te>Se)?xe.tree=o(he,{bounds:Le}):Se&&Se.length&&(xe.tree=Se),xe.tree){var Oe={primitive:"points",usage:"static",data:xe.tree,type:"uint32"};xe.elements?xe.elements(Oe):xe.elements=C.elements(Oe)}var Ne=s.float32(he);return ke({data:Ne,usage:"dynamic"}),Fe({data:s.fract32(he,Ne),usage:"dynamic"}),ve({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),he}},{marker:function(he,xe,De){var Se=xe.activation;if(Se.forEach(function(Ne){return Ne&&Ne.destroy&&Ne.destroy()}),Se.length=0,he&&"number"!=typeof he[0]){for(var ke=[],Fe=0,ve=Math.min(he.length,xe.count);Fe<ve;Fe++){var Te=c.addMarker(he[Fe]);ke[Te]||(ke[Te]=new Uint8Array(xe.count)),ke[Te][Fe]=1}for(var Le=0;Le<ke.length;Le++)if(ke[Le]){var Oe={data:ke[Le],type:"uint8",usage:"static"};Se[Le]?Se[Le](Oe):Se[Le]=C.buffer(Oe),Se[Le].data=ke[Le]}}else Se[c.addMarker(he)]=!0;return he},range:function(he,xe,De){var Se=xe.bounds;if(Se)return he||(he=Se),xe.scale=[1/(he[2]-he[0]),1/(he[3]-he[1])],xe.translate=[-he[0],-he[1]],xe.scaleFract=s.fract(xe.scale),xe.translateFract=s.fract(xe.translate),he},viewport:function(he){return d(he||[D.drawingBufferWidth,D.drawingBufferHeight])}}]),q){var ne=z.count,X=z.size,J=z.borderSize,se=z.sizeBuffer,V=new Uint8Array(2*ne);if(X.length||J.length)for(var j=0;j<ne;j++)V[2*j]=Math.round(255*(X[j]??X)/P),V[2*j+1]=Math.round(255*(J[j]??J)/P);se({data:V,usage:"dynamic"})}if(G){var H,U=z.count,te=z.color,ee=z.borderColor,le=z.colorBuffer;if(c.tooManyColors){if(te.length||ee.length){H=new Uint8Array(8*U);for(var ce=0;ce<U;ce++){var pe=te[ce];H[8*ce]=S[4*pe],H[8*ce+1]=S[4*pe+1],H[8*ce+2]=S[4*pe+2],H[8*ce+3]=S[4*pe+3];var de=ee[ce];H[8*ce+4]=S[4*de],H[8*ce+5]=S[4*de+1],H[8*ce+6]=S[4*de+2],H[8*ce+7]=S[4*de+3]}}}else if(te.length||ee.length){H=new Uint8Array(4*U+2);for(var be=0;be<U;be++)null!=te[be]&&(H[4*be]=te[be]%L,H[4*be+1]=Math.floor(te[be]/L)),null!=ee[be]&&(H[4*be+2]=ee[be]%L,H[4*be+3]=Math.floor(ee[be]/L))}le({data:H||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},a.prototype.addMarker=function(c){var T,x=this.markerTextures,w=this.regl,M=this.markerCache,D=null==c?0:M.indexOf(c);if(D>=0)return D;if(c instanceof Uint8Array||c instanceof Uint8ClampedArray)T=c;else{T=new Uint8Array(c.length);for(var C=0,P=c.length;C<P;C++)T[C]=255*c[C]}var L=Math.floor(Math.sqrt(T.length));return D=x.length,M.push(c),x.push(w.texture({channels:1,data:T,radius:L,mag:"linear",min:"linear"})),D},a.prototype.updateColor=function(c){var T=this.paletteIds,x=this.palette,w=this.maxColors;Array.isArray(c)||(c=[c]);var M=[];if("number"==typeof c[0]){var D=[];if(Array.isArray(c))for(var C=0;C<c.length;C+=4)D.push(c.slice(C,C+4));else for(var P=0;P<c.length;P+=4)D.push(c.subarray(P,P+4));c=D}for(var L=0;L<c.length;L++){var S=c[L];S=e(S,"uint8");var E=t(S,!1);if(null==T[E]){var N=x.length;T[E]=Math.floor(N/4),x[N]=S[0],x[N+1]=S[1],x[N+2]=S[2],x[N+3]=S[3]}M[L]=T[E]}return!this.tooManyColors&&x.length>4*w&&(this.tooManyColors=!0),this.updatePalette(x),1===M.length?M[0]:M},a.prototype.updatePalette=function(c){if(!this.tooManyColors){var T=this.maxColors,x=this.paletteTexture,w=Math.ceil(.25*c.length/T);if(w>1)for(var M=.25*(c=c.slice()).length%T;M<w*T;M++)c.push(0,0,0,0);x.height<w&&x.resize(T,w),x.subimage({width:Math.min(.25*c.length,T),height:w,data:c},0,0)}},a.prototype.destroy=function(){return this.groups.forEach(function(c){c.sizeBuffer.destroy(),c.positionBuffer.destroy(),c.positionFractBuffer.destroy(),c.colorBuffer.destroy(),c.activation.forEach(function(T){return T&&T.destroy&&T.destroy()}),c.selectionBuffer.destroy(),c.elements&&c.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(c){return c&&c.destroy&&c.destroy()}),this};var _=v("object-assign");ae.exports=function(c,T){var x=new h(c,T),w=x.render.bind(x);return _(w,{render:w,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),w}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(v,ae,ie){"use strict";var p=v("regl-scatter2d"),g=v("pick-by-alias"),b=v("array-bounds"),y=v("raf"),e=v("array-range"),r=v("parse-rect"),t=v("flatten-vertex-data");function o(i,f){if(!(this instanceof o))return new o(i,f);this.traces=[],this.passes={},this.regl=i,this.scatter=p(i),this.canvas=this.scatter.canvas}function n(i,f,u){return(null!=i.id?i.id:i)<<16|(255&f)<<8|255&u}function m(i,f,u){var s,d,h,a,_=i[f],c=i[u];return _.length>2?(s=_[1],d=_[3]):_.length?(s=_[0],d=_[1]):(s=_.y,d=_.y+_.height),c.length>2?(h=c[0],a=c[2]):c.length?(h=c[0],a=c[1]):(h=c.x,a=c.x+c.width),[h,s,a,d]}function l(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var f=r(i);return[f.x,f.y,f.x+f.width,f.y+f.height]}ae.exports=o,o.prototype.render=function(){for(var i,f=this,u=[],s=arguments.length;s--;)u[s]=arguments[s];return u.length&&(i=this).update.apply(i,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=y(function(){f.draw(),f.dirty=!0,f.planned=null})):(this.draw(),this.dirty=!0,y(function(){f.dirty=!1})),this)},o.prototype.update=function(){for(var i,f=[],u=arguments.length;u--;)f[u]=arguments[u];if(f.length){for(var s=0;s<f.length;s++)this.updateItem(s,f[s]);this.traces=this.traces.filter(Boolean);for(var d=[],h=0,a=0;a<this.traces.length;a++){for(var _=this.traces[a],c=this.traces[a].passes,T=0;T<c.length;T++)d.push(this.passes[c[T]]);_.passOffset=h,h+=_.passes.length}return(i=this.scatter).update.apply(i,d),this}},o.prototype.updateItem=function(i,f){var u=this.regl;if(null===f)return this.traces[i]=null,this;if(!f)return this;var s,d=g(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),h=this.traces[i]||(this.traces[i]={id:i,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:r([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=d.color&&(h.color=d.color),null!=d.size&&(h.size=d.size),null!=d.marker&&(h.marker=d.marker),null!=d.borderColor&&(h.borderColor=d.borderColor),null!=d.borderSize&&(h.borderSize=d.borderSize),null!=d.opacity&&(h.opacity=d.opacity),d.viewport&&(h.viewport=r(d.viewport)),null!=d.diagonal&&(h.diagonal=d.diagonal),null!=d.upper&&(h.upper=d.upper),null!=d.lower&&(h.lower=d.lower),d.data){h.buffer(t(d.data)),h.columns=d.data.length,h.count=d.data[0].length,h.bounds=[];for(var a=0;a<h.columns;a++)h.bounds[a]=b(d.data[a],1)}d.range&&(h.range=d.range,s=h.range&&"number"!=typeof h.range[0]),d.domain&&(h.domain=d.domain);var _=!1;null!=d.padding&&(Array.isArray(d.padding)&&d.padding.length===h.columns&&"number"==typeof d.padding[d.padding.length-1]?(h.padding=d.padding.map(l),_=!0):h.padding=l(d.padding));var c=h.columns,T=h.count,x=h.viewport.width,w=h.viewport.height,M=h.viewport.x,D=h.viewport.y,C=x/c,P=w/c;h.passes=[];for(var L=0;L<c;L++)for(var S=0;S<c;S++)if((h.diagonal||S!==L)&&(h.upper||!(L>S))&&(h.lower||!(L<S))){var E=n(h.id,L,S),N=this.passes[E]||(this.passes[E]={});if(d.data&&(N.positions=d.transpose?{x:{buffer:h.buffer,offset:S,count:T,stride:c},y:{buffer:h.buffer,offset:L,count:T,stride:c}}:{x:{buffer:h.buffer,offset:S*T,count:T},y:{buffer:h.buffer,offset:L*T,count:T}},N.bounds=m(h.bounds,L,S)),d.domain||d.viewport||d.data){var z=_?m(h.padding,L,S):h.padding;if(h.domain){var q=m(h.domain,L,S);N.viewport=[M+q[0]*x+z[0],D+q[1]*w+z[1],M+q[2]*x-z[2],D+q[3]*w-z[3]]}else N.viewport=[M+S*C+C*z[0],D+L*P+P*z[1],M+(S+1)*C-C*z[2],D+(L+1)*P-P*z[3]]}d.color&&(N.color=h.color),d.size&&(N.size=h.size),d.marker&&(N.marker=h.marker),d.borderSize&&(N.borderSize=h.borderSize),d.borderColor&&(N.borderColor=h.borderColor),d.opacity&&(N.opacity=h.opacity),d.range&&(N.range=s?m(h.range,L,S):h.range||N.bounds),h.passes.push(E)}return this},o.prototype.draw=function(){for(var i,f=[],u=arguments.length;u--;)f[u]=arguments[u];if(f.length){for(var s=[],d=0;d<f.length;d++)if("number"==typeof f[d]){var h=this.traces[f[d]],_=h.passOffset;s.push.apply(s,e(_,_+h.passes.length))}else if(f[d].length){var c=f[d],T=this.traces[d],x=T.passes,w=T.passOffset;x=x.map(function(M,D){s[w+D]=c})}(i=this.scatter).draw.apply(i,s)}else this.scatter.draw();return this},o.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(v,ae,ie){var g;g=function(){function p(ye,Ce){this.id=te++,this.type=ye,this.data=Ce}function g(ye){return"["+function Ce(Ue){if(0===Ue.length)return[];var Qe=Ue.charAt(0),rt=Ue.charAt(Ue.length-1);if(1<Ue.length&&Qe===rt&&('"'===Qe||"'"===Qe))return['"'+Ue.substr(1,Ue.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Qe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ue))return Ce(Ue.substr(0,Qe.index)).concat(Ce(Qe[1])).concat(Ce(Ue.substr(Qe.index+Qe[0].length)));if(1===(Qe=Ue.split(".")).length)return['"'+Ue.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ue=[],rt=0;rt<Qe.length;++rt)Ue=Ue.concat(Ce(Qe[rt]));return Ue}(ye).join("][")+"]"}function b(ye){return"string"==typeof ye?ye.split():ye}function y(ye){return"string"==typeof ye?document.querySelector(ye):ye}function r(ye,Ce){for(var Ue=Array(ye),Qe=0;Qe<ye;++Qe)Ue[Qe]=Ce(Qe);return Ue}function t(ye){var Ce,Ue;return Ce=(65535<ye)<<4,Ce|=Ue=(255<(ye>>>=Ce))<<3,(Ce|=Ue=(15<(ye>>>=Ue))<<2)|(Ue=(3<(ye>>>=Ue))<<1)|ye>>>Ue>>1}function o(){function ye(Qe){e:{for(var rt=16;268435456>=rt;rt*=16)if(Qe<=rt){Qe=rt;break e}Qe=0}return 0<(rt=Ue[t(Qe)>>2]).length?rt.pop():new ArrayBuffer(Qe)}function Ce(Qe){Ue[t(Qe.byteLength)>>2].push(Qe)}var Ue=r(8,function(){return[]});return{alloc:ye,free:Ce,allocType:function(Qe,rt){var Ke=null;switch(Qe){case 5120:Ke=new Int8Array(ye(rt),0,rt);break;case 5121:Ke=new Uint8Array(ye(rt),0,rt);break;case 5122:Ke=new Int16Array(ye(2*rt),0,rt);break;case 5123:Ke=new Uint16Array(ye(2*rt),0,rt);break;case 5124:Ke=new Int32Array(ye(4*rt),0,rt);break;case 5125:Ke=new Uint32Array(ye(4*rt),0,rt);break;case 5126:Ke=new Float32Array(ye(4*rt),0,rt);break;default:return null}return Ke.length!==rt?Ke.subarray(0,rt):Ke},freeType:function(Qe){Ce(Qe.buffer)}}}function n(ye){return!!ye&&"object"==typeof ye&&Array.isArray(ye.shape)&&Array.isArray(ye.stride)&&"number"==typeof ye.offset&&ye.shape.length===ye.stride.length&&(Array.isArray(ye.data)||be(ye.data))}function m(ye,Ce,Ue,Qe,rt,Ke){for(var gt=0;gt<Ce;++gt)for(var mt=ye[gt],Lt=0;Lt<Ue;++Lt)for(var Vt=mt[Lt],dt=0;dt<Qe;++dt)rt[Ke++]=Vt[dt]}function l(ye){return 0|De[Object.prototype.toString.call(ye)]}function i(ye,Ce){for(var Ue=0;Ue<Ce.length;++Ue)ye[Ue]=Ce[Ue]}function f(ye,Ce,Ue,Qe,rt,Ke,gt){for(var mt=0,Lt=0;Lt<Ue;++Lt)for(var Vt=0;Vt<Qe;++Vt)ye[mt++]=Ce[rt*Lt+Ke*Vt+gt]}function d(ye){for(var Ce=pe.allocType(5123,ye.length),Ue=0;Ue<ye.length;++Ue)if(isNaN(ye[Ue]))Ce[Ue]=65535;else if(1/0===ye[Ue])Ce[Ue]=31744;else if(-1/0===ye[Ue])Ce[Ue]=64512;else{Oe[0]=ye[Ue];var Qe=(Ke=Ne[0])>>>31<<15,rt=(Ke<<1>>>24)-127,Ke=Ke>>13&1023;Ce[Ue]=-24>rt?Qe:-14>rt?Qe+(Ke+1024>>-14-rt):15<rt?Qe+31744:Qe+(rt+15<<10)+Ke}return Ce}function h(ye){return Array.isArray(ye)||be(ye)}function a(ye){return"[object "+ye+"]"}function _(ye){return Array.isArray(ye)&&(0===ye.length||"number"==typeof ye[0])}function c(ye){return!(!Array.isArray(ye)||0===ye.length||!h(ye[0]))}function T(ye){return Object.prototype.toString.call(ye)}function x(ye){if(!ye)return!1;var Ce=T(ye);return 0<=vt.indexOf(Ce)||_(ye)||c(ye)||n(ye)}function w(ye,Ce){36193===ye.type?(ye.data=d(Ce),pe.freeType(Ce)):ye.data=Ce}function M(ye,Ce,Ue,Qe,rt,Ke){if(ye=void 0!==Ot[ye]?Ot[ye]:Ve[ye]*wt[Ce],Ke&&(ye*=6),rt){for(Qe=0;1<=Ue;)Qe+=ye*Ue*Ue,Ue/=2;return Qe}return ye*Ue*Qe}function P(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function N(ye,Ce){return ye>>>Ce|ye<<32-Ce}function z(ye,Ce){var Ue=(65535&ye)+(65535&Ce);return(ye>>16)+(Ce>>16)+(Ue>>16)<<16|65535&Ue}function q(ye){return Array.prototype.slice.call(ye)}function G(ye){return q(ye).join("")}function ne(ye){return Array.isArray(ye)||be(ye)||n(ye)}function X(ye){return ye.sort(function(Ce,Ue){return"viewport"===Ce?-1:"viewport"===Ue?1:Ce<Ue?-1:1})}function J(ye,Ce,Ue,Qe){this.thisDep=ye,this.contextDep=Ce,this.propDep=Ue,this.append=Qe}function se(ye){return ye&&!(ye.thisDep||ye.contextDep||ye.propDep)}function V(ye){return new J(!1,!1,!1,ye)}function j(ye,Ce){var Ue=ye.type;if(0===Ue)return new J(!0,1<=(Ue=ye.data.length),2<=Ue,Ce);if(4===Ue)return new J((Ue=ye.data).thisDep,Ue.contextDep,Ue.propDep,Ce);if(5===Ue)return new J(!1,!1,!1,Ce);if(6===Ue){for(var Qe=Ue=!1,rt=!1,Ke=0;Ke<ye.data.length;++Ke){var gt=ye.data[Ke];1===gt.type?rt=!0:2===gt.type?Qe=!0:3===gt.type?Ue=!0:0===gt.type?(Ue=!0,1<=(gt=gt.data)&&(Qe=!0),2<=gt&&(rt=!0)):4===gt.type&&(Ue=Ue||gt.data.thisDep,Qe=Qe||gt.data.contextDep,rt=rt||gt.data.propDep)}return new J(Ue,Qe,rt,Ce)}return new J(3===Ue,2===Ue,1===Ue,Ce)}function H(ye,Ce,Ue,Qe,rt,Ke,gt,mt,Lt,Vt,dt,bt,Yt,It,jt,Ie){function et(Ut){return Ut.replace(".","_")}function ht(Ut,xn,Sn){var Kn=et(Ut);ri.push(Ut),Jr[Kn]=ar[Kn]=!!Sn,Rr[Kn]=xn}function xt(Ut,xn,Sn){var Kn=et(Ut);ri.push(Ut),Array.isArray(Sn)?(ar[Kn]=Sn.slice(),Jr[Kn]=Sn.slice()):ar[Kn]=Jr[Kn]=Sn,Yr[Kn]=xn}function Rt(){var Ut=function K(ye){function Ce(){var dt=[],bt=[];return U(function(){dt.push.apply(dt,q(arguments))},{def:function(){var Yt="v"+rt++;return bt.push(Yt),0<arguments.length&&(dt.push(Yt,"="),dt.push.apply(dt,q(arguments)),dt.push(";")),Yt},toString:function(){return G([0<bt.length?"var "+bt.join(",")+";":"",G(dt)])}})}function Ue(){function dt(Ie,et){Yt(Ie,et,"=",bt.def(Ie,et),";")}var bt=Ce(),Yt=Ce(),It=bt.toString,jt=Yt.toString;return U(function(){bt.apply(bt,q(arguments))},{def:bt.def,entry:bt,exit:Yt,save:dt,set:function(Ie,et,ht){dt(Ie,et),bt(Ie,et,"=",ht,";")},toString:function(){return It()+jt()}})}var Qe=ye&&ye.cache,rt=0,Ke=[],gt=[],mt=[],Lt=Ce(),Vt={};return{global:Lt,link:function(dt,bt){var Yt=bt&&bt.stable;if(!Yt)for(var It=0;It<gt.length;++It)if(gt[It]===dt&&!mt[It])return Ke[It];return It="g"+rt++,Ke.push(It),gt.push(dt),mt.push(Yt),It},block:Ce,proc:function(dt,bt){function Yt(){var et="a"+It.length;return It.push(et),et}var It=[];bt=bt||0;for(var jt=0;jt<bt;++jt)Yt();var Ie=(jt=Ue()).toString;return Vt[dt]=U(jt,{arg:Yt,toString:function(){return G(["function(",It.join(),"){",Ie(),"}"])}})},scope:Ue,cond:function(){var dt=G(arguments),bt=Ue(),Yt=Ue(),It=bt.toString,jt=Yt.toString;return U(bt,{then:function(){return bt.apply(bt,q(arguments)),this},else:function(){return Yt.apply(Yt,q(arguments)),this},toString:function(){var Ie=jt();return Ie&&(Ie="else{"+Ie+"}"),G(["if(",dt,"){",It(),"}",Ie])}})},compile:function(){var dt=['"use strict";',Lt,"return {"];Object.keys(Vt).forEach(function(It){dt.push('"',It,'":',Vt[It].toString(),",")}),dt.push("}");var bt,Yt=G(dt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Qe&&(bt=function(It){for(var jt,Ie="",et=0;et<It.length;et++)jt=It.charCodeAt(et),Ie+="0123456789abcdef".charAt(jt>>>4&15)+"0123456789abcdef".charAt(15&jt);return Ie}(function(It){for(var jt=Array(It.length>>2),Ie=0;Ie<jt.length;Ie++)jt[Ie]=0;for(Ie=0;Ie<8*It.length;Ie+=8)jt[Ie>>5]|=(255&It.charCodeAt(Ie/8))<<24-Ie%32;var et,ht,xt,Rt,Xt,tn,Kt,kn,Vn,Tn,sn,fn=8*It.length;for(It=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Ie=Array(64),jt[fn>>5]|=128<<24-fn%32,jt[15+(fn+64>>9<<4)]=fn,kn=0;kn<jt.length;kn+=16){for(fn=It[0],et=It[1],ht=It[2],xt=It[3],Rt=It[4],Xt=It[5],tn=It[6],Kt=It[7],Vn=0;64>Vn;Vn++){var dn;16>Vn?Ie[Vn]=jt[Vn+kn]:(Tn=Vn,sn=z(sn=N(sn=Ie[Vn-2],17)^N(sn,19)^sn>>>10,Ie[Vn-7]),dn=N(dn=Ie[Vn-15],7)^N(dn,18)^dn>>>3,Ie[Tn]=z(z(sn,dn),Ie[Vn-16])),Tn=z(z(z(z(Kt,Tn=N(Tn=Rt,6)^N(Tn,11)^N(Tn,25)),Rt&Xt^~Rt&tn),$t[Vn]),Ie[Vn]),sn=z(Kt=N(Kt=fn,2)^N(Kt,13)^N(Kt,22),fn&et^fn&ht^et&ht),Kt=tn,tn=Xt,Xt=Rt,Rt=z(xt,Tn),xt=ht,ht=et,et=fn,fn=z(Tn,sn)}It[0]=z(fn,It[0]),It[1]=z(et,It[1]),It[2]=z(ht,It[2]),It[3]=z(xt,It[3]),It[4]=z(Rt,It[4]),It[5]=z(Xt,It[5]),It[6]=z(tn,It[6]),It[7]=z(Kt,It[7])}for(jt="",Ie=0;Ie<32*It.length;Ie+=8)jt+=String.fromCharCode(It[Ie>>5]>>>24-Ie%32&255);return jt}(function(It){for(var jt,Ie,et="",ht=-1;++ht<It.length;)jt=It.charCodeAt(ht),Ie=ht+1<It.length?It.charCodeAt(ht+1):0,55296<=jt&&56319>=jt&&56320<=Ie&&57343>=Ie&&(jt=65536+((1023&jt)<<10)+(1023&Ie),ht++),127>=jt?et+=String.fromCharCode(jt):2047>=jt?et+=String.fromCharCode(192|jt>>>6&31,128|63&jt):65535>=jt?et+=String.fromCharCode(224|jt>>>12&15,128|jt>>>6&63,128|63&jt):2097151>=jt&&(et+=String.fromCharCode(240|jt>>>18&7,128|jt>>>12&63,128|jt>>>6&63,128|63&jt));return et}(Yt))),Qe[bt])?Qe[bt].apply(null,gt):(Yt=Function.apply(null,Ke.concat(Yt)),Qe&&(Qe[bt]=Yt),Yt.apply(null,gt))}}}({cache:jt}),xn=Ut.link,Sn=Ut.global;Ut.id=Ln++,Ut.batchId="0";var Kn=xn(Ci),Jn=Ut.shared={props:"a0"};Object.keys(Ci).forEach(function(Bn){Jn[Bn]=Sn.def(Kn,".",Bn)});var Xn=Ut.next={},Un=Ut.current={};Object.keys(Yr).forEach(function(Bn){Array.isArray(ar[Bn])&&(Xn[Bn]=Sn.def(Jn.next,".",Bn),Un[Bn]=Sn.def(Jn.current,".",Bn))});var In=Ut.constants={};Object.keys(pn).forEach(function(Bn){In[Bn]=Sn.def(JSON.stringify(pn[Bn]))}),Ut.invoke=function(Bn,Gn){switch(Gn.type){case 0:var or=["this",Jn.context,Jn.props,Ut.batchId];return Bn.def(xn(Gn.data),".call(",or.slice(0,Math.max(Gn.data.length+1,4)),")");case 1:return Bn.def(Jn.props,Gn.data);case 2:return Bn.def(Jn.context,Gn.data);case 3:return Bn.def("this",Gn.data);case 4:return Gn.data.append(Ut,Bn),Gn.data.ref;case 5:return Gn.data.toString();case 6:return Gn.data.map(function(sr){return Ut.invoke(Bn,sr)})}},Ut.attribCache={};var Pn={};return Ut.scopeAttrib=function(Bn){if((Bn=Ce.id(Bn))in Pn)return Pn[Bn];var Gn=Vt.scope[Bn];return Gn||(Gn=Vt.scope[Bn]=new Hr),Pn[Bn]=xn(Gn)},Ut}function Vn(Ut,xn,Sn,Kn,Jn){function Xn(Nr){var Fr=In[Nr];Fr&&(Bn[Nr]=Fr)}var Nr,Br,qr,Xr,Un=function(Nr,Fr){if("string"==typeof(Br=Nr.static).frag&&"string"==typeof Br.vert){if(0<Object.keys(Fr.dynamic).length)return null;var Br=Fr.static,qr=Object.keys(Br);if(0<qr.length&&"number"==typeof Br[qr[0]]){for(var Xr=[],ci=0;ci<qr.length;++ci)Xr.push([0|Br[qr[ci]],qr[ci]]);return Xr}}return null}(Ut,xn),In=function(Nr,Fr,Br){function qr(Hi){if(Hi in Xr){var jr=Xr[Hi];Hi=!0;var pi,ui,Qi=0|jr.x,ma=0|jr.y;return"width"in jr?pi=0|jr.width:Hi=!1,"height"in jr?ui=0|jr.height:Hi=!1,new J(!Hi&&Fr&&Fr.thisDep,!Hi&&Fr&&Fr.contextDep,!Hi&&Fr&&Fr.propDep,function(Co,sa){var la=Co.shared.context,lo=pi;"width"in jr||(lo=sa.def(la,".","framebufferWidth","-",Qi));var Ki=ui;return"height"in jr||(Ki=sa.def(la,".","framebufferHeight","-",ma)),[Qi,ma,lo,Ki]})}if(Hi in ci){var Za=ci[Hi];return Hi=j(Za,function(Co,sa){var la=Co.invoke(sa,Za),lo=Co.shared.context,Ki=sa.def(la,".x|0"),po=sa.def(la,".y|0");return[Ki,po,sa.def('"width" in ',la,"?",la,".width|0:","(",lo,".","framebufferWidth","-",Ki,")"),la=sa.def('"height" in ',la,"?",la,".height|0:","(",lo,".","framebufferHeight","-",po,")")]}),Fr&&(Hi.thisDep=Hi.thisDep||Fr.thisDep,Hi.contextDep=Hi.contextDep||Fr.contextDep,Hi.propDep=Hi.propDep||Fr.propDep),Hi}return Fr?new J(Fr.thisDep,Fr.contextDep,Fr.propDep,function(Co,sa){var la=Co.shared.context;return[0,0,sa.def(la,".","framebufferWidth"),sa.def(la,".","framebufferHeight")]}):null}var Xr=Nr.static,ci=Nr.dynamic;if(Nr=qr("viewport")){var Ui=Nr;Nr=new J(Nr.thisDep,Nr.contextDep,Nr.propDep,function(Hi,jr){var pi=Ui.append(Hi,jr),ui=Hi.shared.context;return jr.set(ui,".viewportWidth",pi[2]),jr.set(ui,".viewportHeight",pi[3]),pi})}return{viewport:Nr,scissor_box:qr("scissor.box")}}(Ut,or=function Xt(Ut,xn){var Sn=Ut.static,Kn=Ut.dynamic;if("framebuffer"in Sn){var Jn=Sn.framebuffer;return Jn?(Jn=mt.getFramebuffer(Jn),V(function(Un,In){var Pn=Un.link(Jn),Bn=Un.shared;return In.set(Bn.framebuffer,".next",Pn),In.set(Bn=Bn.context,".framebufferWidth",Pn+".width"),In.set(Bn,".framebufferHeight",Pn+".height"),Pn})):V(function(Un,In){var Pn=Un.shared;return In.set(Pn.framebuffer,".next","null"),In.set(Pn=Pn.context,".framebufferWidth",Pn+".drawingBufferWidth"),In.set(Pn,".framebufferHeight",Pn+".drawingBufferHeight"),"null"})}if("framebuffer"in Kn){var Xn=Kn.framebuffer;return j(Xn,function(Un,In){var Pn=Un.invoke(In,Xn),Bn=Un.shared,Gn=Bn.framebuffer;return Pn=In.def(Gn,".getFramebuffer(",Pn,")"),In.set(Gn,".next",Pn),In.set(Bn=Bn.context,".framebufferWidth",Pn+"?"+Pn+".width:"+Bn+".drawingBufferWidth"),In.set(Bn,".framebufferHeight",Pn+"?"+Pn+".height:"+Bn+".drawingBufferHeight"),Pn})}return null}(Ut)),Pn=function Kt(Ut,xn){function Sn(_r,Nr){if(_r in Kn){var Fr=0|Kn[_r];return Nr?Xn.offset=Fr:Xn.instances=Fr,V(function(qr,Xr){return Nr&&(qr.OFFSET=Fr),Fr})}if(_r in Jn){var Br=Jn[_r];return j(Br,function(qr,Xr){var ci=qr.invoke(Xr,Br);return Nr&&(qr.OFFSET=ci),ci})}if(Nr){if(Pn)return V(function(qr,Xr){return qr.OFFSET=0});if(Un)return new J(In.thisDep,In.contextDep,In.propDep,function(qr,Xr){return Xr.def(qr.shared.vao+".currentVAO?"+qr.shared.vao+".currentVAO.offset:0")})}else if(Un)return new J(In.thisDep,In.contextDep,In.propDep,function(qr,Xr){return Xr.def(qr.shared.vao+".currentVAO?"+qr.shared.vao+".currentVAO.instances:-1")});return null}var Kn=Ut.static,Jn=Ut.dynamic,Xn={},Un=!1,In=function(){if("vao"in Kn){var _r=Kn.vao;return null!==_r&&null===Vt.getVAO(_r)&&(_r=Vt.createVAO(_r)),Un=!0,Xn.vao=_r,V(function(Fr){var Br=Vt.getVAO(_r);return Br?Fr.link(Br):"null"})}if("vao"in Jn){Un=!0;var Nr=Jn.vao;return j(Nr,function(Fr,Br){var qr=Fr.invoke(Br,Nr);return Br.def(Fr.shared.vao+".getVAO("+qr+")")})}return null}(),Pn=!1,Bn=function(){if("elements"in Kn){var _r=Kn.elements;if(Xn.elements=_r,ne(_r)){var Nr=Xn.elements=Ke.create(_r,!0);_r=Ke.getElements(Nr),Pn=!0}else _r&&(_r=Ke.getElements(_r),Pn=!0);return(Nr=V(function(Br,qr){if(_r){var Xr=Br.link(_r);return Br.ELEMENTS=Xr}return Br.ELEMENTS=null})).value=_r,Nr}if("elements"in Jn){Pn=!0;var Fr=Jn.elements;return j(Fr,function(Br,qr){var Xr=(ci=Br.shared).isBufferArgs,ci=ci.elements,Ui=Br.invoke(qr,Fr),Hi=qr.def("null");return Xr=qr.def(Xr,"(",Ui,")"),Ui=Br.cond(Xr).then(Hi,"=",ci,".createStream(",Ui,");").else(Hi,"=",ci,".getElements(",Ui,");"),qr.entry(Ui),qr.exit(Br.cond(Xr).then(ci,".destroyStream(",Hi,");")),Br.ELEMENTS=Hi})}return Un?new J(In.thisDep,In.contextDep,In.propDep,function(Br,qr){return qr.def(Br.shared.vao+".currentVAO?"+Br.shared.elements+".getElements("+Br.shared.vao+".currentVAO.elements):null")}):null}(),Gn=Sn("offset",!0),or=function(){if("primitive"in Kn){var _r=Kn.primitive;return Xn.primitive=_r,V(function(Fr,Br){return Le[_r]})}if("primitive"in Jn){var Nr=Jn.primitive;return j(Nr,function(Fr,Br){var qr=Fr.constants.primTypes,Xr=Fr.invoke(Br,Nr);return Br.def(qr,"[",Xr,"]")})}return Pn?se(Bn)?V(Bn.value?function(Fr,Br){return Br.def(Fr.ELEMENTS,".primType")}:function(){return 4}):new J(Bn.thisDep,Bn.contextDep,Bn.propDep,function(Fr,Br){var qr=Fr.ELEMENTS;return Br.def(qr,"?",qr,".primType:",4)}):Un?new J(In.thisDep,In.contextDep,In.propDep,function(Fr,Br){return Br.def(Fr.shared.vao+".currentVAO?"+Fr.shared.vao+".currentVAO.primitive:4")}):null}(),sr=function(){if("count"in Kn){var _r=0|Kn.count;return Xn.count=_r,V(function(){return _r})}if("count"in Jn){var Nr=Jn.count;return j(Nr,function(Fr,Br){return Fr.invoke(Br,Nr)})}return Pn?se(Bn)?Bn?Gn?new J(Gn.thisDep,Gn.contextDep,Gn.propDep,function(Fr,Br){return Br.def(Fr.ELEMENTS,".vertCount-",Fr.OFFSET)}):V(function(Fr,Br){return Br.def(Fr.ELEMENTS,".vertCount")}):V(function(){return-1}):new J(Bn.thisDep||Gn.thisDep,Bn.contextDep||Gn.contextDep,Bn.propDep||Gn.propDep,function(Fr,Br){var qr=Fr.ELEMENTS;return Fr.OFFSET?Br.def(qr,"?",qr,".vertCount-",Fr.OFFSET,":-1"):Br.def(qr,"?",qr,".vertCount:-1")}):Un?new J(In.thisDep,In.contextDep,In.propDep,function(Fr,Br){return Br.def(Fr.shared.vao,".currentVAO?",Fr.shared.vao,".currentVAO.count:-1")}):null}(),xr=Sn("instances",!1);return{elements:Bn,primitive:or,count:sr,instances:xr,offset:Gn,vao:In,vaoActive:Un,elementsActive:Pn,static:Xn}}(Ut),Bn=(Br=(Nr=Ut).static,qr=Nr.dynamic,Xr={},ri.forEach(function(ci){function Ui(jr,pi){if(ci in Br){var ui=jr(Br[ci]);Xr[Hi]=V(function(){return ui})}else if(ci in qr){var Qi=qr[ci];Xr[Hi]=j(Qi,function(ma,Za){return pi(ma,Za,ma.invoke(Za,Qi))})}}var Hi=et(ci);switch(ci){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ui(function(jr){return jr},function(jr,pi,ui){return ui});case"depth.func":return Ui(function(jr){return mn[jr]},function(jr,pi,ui){return pi.def(jr.constants.compareFuncs,"[",ui,"]")});case"depth.range":return Ui(function(jr){return jr},function(jr,pi,ui){return[pi.def("+",ui,"[0]"),pi=pi.def("+",ui,"[1]")]});case"blend.func":return Ui(function(jr){return[cn["srcRGB"in jr?jr.srcRGB:jr.src],cn["dstRGB"in jr?jr.dstRGB:jr.dst],cn["srcAlpha"in jr?jr.srcAlpha:jr.src],cn["dstAlpha"in jr?jr.dstAlpha:jr.dst]]},function(jr,pi,ui){function Qi(sa,la){return pi.def('"',sa,la,'" in ',ui,"?",ui,".",sa,la,":",ui,".",sa)}jr=jr.constants.blendFuncs;var ma=Qi("src","RGB"),Za=Qi("dst","RGB"),Co=(ma=pi.def(jr,"[",ma,"]"),pi.def(jr,"[",Qi("src","Alpha"),"]"));return[ma,Za=pi.def(jr,"[",Za,"]"),Co,jr=pi.def(jr,"[",Qi("dst","Alpha"),"]")]});case"blend.equation":return Ui(function(jr){return"string"==typeof jr?[oi[jr],oi[jr]]:"object"==typeof jr?[oi[jr.rgb],oi[jr.alpha]]:void 0},function(jr,pi,ui){var Qi=jr.constants.blendEquations,ma=pi.def(),Za=pi.def();return(jr=jr.cond("typeof ",ui,'==="string"')).then(ma,"=",Za,"=",Qi,"[",ui,"];"),jr.else(ma,"=",Qi,"[",ui,".rgb];",Za,"=",Qi,"[",ui,".alpha];"),pi(jr),[ma,Za]});case"blend.color":return Ui(function(jr){return r(4,function(pi){return+jr[pi]})},function(jr,pi,ui){return r(4,function(Qi){return pi.def("+",ui,"[",Qi,"]")})});case"stencil.mask":return Ui(function(jr){return 0|jr},function(jr,pi,ui){return pi.def(ui,"|0")});case"stencil.func":return Ui(function(jr){return[mn[jr.cmp||"keep"],jr.ref||0,"mask"in jr?jr.mask:-1]},function(jr,pi,ui){return[jr=pi.def('"cmp" in ',ui,"?",jr.constants.compareFuncs,"[",ui,".cmp]",":",7680),pi.def(ui,".ref|0"),pi=pi.def('"mask" in ',ui,"?",ui,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ui(function(jr){return["stencil.opBack"===ci?1029:1028,nn[jr.fail||"keep"],nn[jr.zfail||"keep"],nn[jr.zpass||"keep"]]},function(jr,pi,ui){function Qi(Za){return pi.def('"',Za,'" in ',ui,"?",ma,"[",ui,".",Za,"]:",7680)}var ma=jr.constants.stencilOps;return["stencil.opBack"===ci?1029:1028,Qi("fail"),Qi("zfail"),Qi("zpass")]});case"polygonOffset.offset":return Ui(function(jr){return[0|jr.factor,0|jr.units]},function(jr,pi,ui){return[pi.def(ui,".factor|0"),pi=pi.def(ui,".units|0")]});case"cull.face":return Ui(function(jr){var pi=0;return"front"===jr?pi=1028:"back"===jr&&(pi=1029),pi},function(jr,pi,ui){return pi.def(ui,'==="front"?',1028,":",1029)});case"frontFace":return Ui(function(jr){return Xe[jr]},function(jr,pi,ui){return pi.def(ui+'==="cw"?2304:2305')});case"colorMask":return Ui(function(jr){return jr.map(function(pi){return!!pi})},function(jr,pi,ui){return r(4,function(Qi){return"!!"+ui+"["+Qi+"]"})});case"sample.coverage":return Ui(function(jr){return["value"in jr?jr.value:1,!!jr.invert]},function(jr,pi,ui){return[pi.def('"value" in ',ui,"?+",ui,".value:1"),pi=pi.def("!!",ui,".invert")]})}}),Xr),Gn=function tn(Ut,xn,Sn){function Kn(Bn){if(Bn in Jn){var Gn=Ce.id(Jn[Bn]);return(Bn=V(function(){return Gn})).id=Gn,Bn}if(Bn in Xn){var or=Xn[Bn];return j(or,function(sr,xr){var _r=sr.invoke(xr,or);return xr.def(sr.shared.strings,".id(",_r,")")})}return null}var Jn=Ut.static,Xn=Ut.dynamic,Un=Kn("frag"),In=Kn("vert"),Pn=null;return se(Un)&&se(In)?(Pn=dt.program(In.id,Un.id,null,Sn),Ut=V(function(Bn,Gn){return Bn.link(Pn)})):Ut=new J(Un&&Un.thisDep||In&&In.thisDep,Un&&Un.contextDep||In&&In.contextDep,Un&&Un.propDep||In&&In.propDep,function(Bn,Gn){var or,sr,xr=Bn.shared.shader;return or=Un?Un.append(Bn,Gn):Gn.def(xr,".","frag"),sr=In?In.append(Bn,Gn):Gn.def(xr,".","vert"),Gn.def(xr+".program("+sr+","+or+")")}),{frag:Un,vert:In,progVar:Ut,program:Pn}}(Ut,0,Un);Xn("viewport"),Xn(et("scissor.box"));var or,sr=0<Object.keys(Bn).length;if((or={framebuffer:or,draw:Pn,shader:Gn,state:Bn,dirty:sr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Nr){var Fr,Br=Nr.static;if(Nr=Nr.dynamic,"profile"in Br){var qr=!!Br.profile;(Fr=V(function(ci,Ui){return qr})).enable=qr}else if("profile"in Nr){var Xr=Nr.profile;Fr=j(Xr,function(ci,Ui){return ci.invoke(Ui,Xr)})}return Fr}(Ut),or.uniforms=function(Nr,Fr){var Br=Nr.static,qr=Nr.dynamic,Xr={};return Object.keys(Br).forEach(function(ci){var Ui,Hi=Br[ci];if("number"==typeof Hi||"boolean"==typeof Hi)Ui=V(function(){return Hi});else if("function"==typeof Hi){var jr=Hi._reglType;"texture2d"===jr||"textureCube"===jr?Ui=V(function(pi){return pi.link(Hi)}):"framebuffer"!==jr&&"framebufferCube"!==jr||(Ui=V(function(pi){return pi.link(Hi.color[0])}))}else h(Hi)&&(Ui=V(function(pi){return pi.global.def("[",r(Hi.length,function(ui){return Hi[ui]}),"]")}));Ui.value=Hi,Xr[ci]=Ui}),Object.keys(qr).forEach(function(ci){var Ui=qr[ci];Xr[ci]=j(Ui,function(Hi,jr){return Hi.invoke(jr,Ui)})}),Xr}(Sn),or.drawVAO=or.scopeVAO=Pn.vao,!or.drawVAO&&Gn.program&&!Un&&Ue.angle_instanced_arrays&&Pn.static.elements){var xr=!0;if(Ut=Gn.program.attributes.map(function(Nr){return Nr=xn.static[Nr],xr=xr&&!!Nr,Nr}),xr&&0<Ut.length){var _r=Vt.getVAO(Vt.createVAO({attributes:Ut,elements:Pn.static.elements}));or.drawVAO=new J(null,null,null,function(Nr,Fr){return Nr.link(_r)}),or.useVAO=!0}}return Un?or.useVAO=!0:or.attributes=function kn(Ut,xn){var Sn=Ut.static,Kn=Ut.dynamic,Jn={};return Object.keys(Sn).forEach(function(Xn){var Un=Sn[Xn],In=Ce.id(Xn),Pn=new Hr;if(ne(Un))Pn.state=1,Pn.buffer=rt.getBuffer(rt.create(Un,34962,!1,!0)),Pn.type=0;else if(Gn=rt.getBuffer(Un))Pn.state=1,Pn.buffer=Gn,Pn.type=0;else if("constant"in Un){var Bn=Un.constant;Pn.buffer="null",Pn.state=2,"number"==typeof Bn?Pn.x=Bn:rn.forEach(function(Fr,Br){Br<Bn.length&&(Pn[Fr]=Bn[Br])})}else{var Gn=ne(Un.buffer)?rt.getBuffer(rt.create(Un.buffer,34962,!1,!0)):rt.getBuffer(Un.buffer),or=0|Un.offset,sr=0|Un.stride,xr=0|Un.size,_r=!!Un.normalized,Nr=0;"type"in Un&&(Nr=Se[Un.type]),Un=0|Un.divisor,Pn.buffer=Gn,Pn.state=1,Pn.size=xr,Pn.normalized=_r,Pn.type=Nr||Gn.dtype,Pn.offset=or,Pn.stride=sr,Pn.divisor=Un}Jn[Xn]=V(function(Fr,Br){var qr=Fr.attribCache;if(In in qr)return qr[In];var Xr={isStream:!1};return Object.keys(Pn).forEach(function(ci){Xr[ci]=Pn[ci]}),Pn.buffer&&(Xr.buffer=Fr.link(Pn.buffer),Xr.type=Xr.type||Xr.buffer+".dtype"),qr[In]=Xr})}),Object.keys(Kn).forEach(function(Xn){var Un=Kn[Xn];Jn[Xn]=j(Un,function(In,Pn){function Bn(qr){Pn(_r[qr],"=",Gn,".",qr,"|0;")}var Gn=In.invoke(Pn,Un),or=In.shared,sr=In.constants,xr=or.isBufferArgs,_r=(or=or.buffer,{isStream:Pn.def(!1)}),Nr=new Hr;Nr.state=1,Object.keys(Nr).forEach(function(qr){_r[qr]=Pn.def(""+Nr[qr])});var Fr=_r.buffer,Br=_r.type;return Pn("if(",xr,"(",Gn,")){",_r.isStream,"=true;",Fr,"=",or,".createStream(",34962,",",Gn,");",Br,"=",Fr,".dtype;","}else{",Fr,"=",or,".getBuffer(",Gn,");","if(",Fr,"){",Br,"=",Fr,".dtype;",'}else if("constant" in ',Gn,"){",_r.state,"=",2,";","if(typeof "+Gn+'.constant === "number"){',_r[rn[0]],"=",Gn,".constant;",rn.slice(1).map(function(qr){return _r[qr]}).join("="),"=0;","}else{",rn.map(function(qr,Xr){return _r[qr]+"="+Gn+".constant.length>"+Xr+"?"+Gn+".constant["+Xr+"]:0;"}).join(""),"}}else{","if(",xr,"(",Gn,".buffer)){",Fr,"=",or,".createStream(",34962,",",Gn,".buffer);","}else{",Fr,"=",or,".getBuffer(",Gn,".buffer);","}",Br,'="type" in ',Gn,"?",sr.glTypes,"[",Gn,".type]:",Fr,".dtype;",_r.normalized,"=!!",Gn,".normalized;"),Bn("size"),Bn("offset"),Bn("stride"),Bn("divisor"),Pn("}}"),Pn.exit("if(",_r.isStream,"){",or,".destroyStream(",Fr,");","}"),_r})}),Jn}(xn),or.context=function(Nr){var Fr=Nr.static,Br=Nr.dynamic,qr={};return Object.keys(Fr).forEach(function(Xr){var ci=Fr[Xr];qr[Xr]=V(function(Ui,Hi){return"number"==typeof ci||"boolean"==typeof ci?""+ci:Ui.link(ci)})}),Object.keys(Br).forEach(function(Xr){var ci=Br[Xr];qr[Xr]=j(ci,function(Ui,Hi){return Ui.invoke(Hi,ci)})}),qr}(Kn),or}function Tn(Ut,xn,Sn){var Kn=Ut.shared.context,Jn=Ut.scope();Object.keys(Sn).forEach(function(Xn){xn.save(Kn,"."+Xn);var Un=Sn[Xn].append(Ut,xn);Array.isArray(Un)?Jn(Kn,".",Xn,"=[",Un.join(),"];"):Jn(Kn,".",Xn,"=",Un,";")}),xn(Jn)}function sn(Ut,xn,Sn,Kn){var Jn,Xn=(In=Ut.shared).gl,Un=In.framebuffer;Ir&&(Jn=xn.def(In.extensions,".webgl_draw_buffers"));var In=(Pn=Ut.constants).drawBuffer,Pn=Pn.backBuffer;Ut=Sn?Sn.append(Ut,xn):xn.def(Un,".next"),Kn||xn("if(",Ut,"!==",Un,".cur){"),xn("if(",Ut,"){",Xn,".bindFramebuffer(",36160,",",Ut,".framebuffer);"),Ir&&xn(Jn,".drawBuffersWEBGL(",In,"[",Ut,".colorAttachments.length]);"),xn("}else{",Xn,".bindFramebuffer(",36160,",null);"),Ir&&xn(Jn,".drawBuffersWEBGL(",Pn,");"),xn("}",Un,".cur=",Ut,";"),Kn||xn("}")}function fn(Ut,xn,Sn){var Kn=Ut.shared,Jn=Kn.gl,Xn=Ut.current,Un=Ut.next,In=Kn.current,Pn=Kn.next,Bn=Ut.cond(In,".dirty");ri.forEach(function(Gn){var or,sr;if(!((Gn=et(Gn))in Sn.state))if(Gn in Un){or=Un[Gn],sr=Xn[Gn];var xr=r(ar[Gn].length,function(_r){return Bn.def(or,"[",_r,"]")});Bn(Ut.cond(xr.map(function(_r,Nr){return _r+"!=="+sr+"["+Nr+"]"}).join("||")).then(Jn,".",Yr[Gn],"(",xr,");",xr.map(function(_r,Nr){return sr+"["+Nr+"]="+_r}).join(";"),";"))}else or=Bn.def(Pn,".",Gn),xr=Ut.cond(or,"!==",In,".",Gn),Bn(xr),Gn in Rr?xr(Ut.cond(or).then(Jn,".enable(",Rr[Gn],");").else(Jn,".disable(",Rr[Gn],");"),In,".",Gn,"=",or,";"):xr(Jn,".",Yr[Gn],"(",or,");",In,".",Gn,"=",or,";")}),0===Object.keys(Sn.state).length&&Bn(In,".dirty=false;"),xn(Bn)}function dn(Ut,xn,Sn,Kn){var Jn,Xn=Ut.shared,Un=Ut.current,In=Xn.current,Pn=Xn.gl;X(Object.keys(Sn)).forEach(function(Bn){var Gn=Sn[Bn];if(!Kn||Kn(Gn)){var or=Gn.append(Ut,xn);if(Rr[Bn]){var sr=Rr[Bn];se(Gn)?(Jn=Ut.link(or,{stable:!0}),xn(Ut.cond(Jn).then(Pn,".enable(",sr,");").else(Pn,".disable(",sr,");")),xn(In,".",Bn,"=",Jn,";")):(xn(Ut.cond(or).then(Pn,".enable(",sr,");").else(Pn,".disable(",sr,");")),xn(In,".",Bn,"=",or,";"))}else if(h(or)){var xr=Un[Bn];xn(Pn,".",Yr[Bn],"(",or,");",or.map(function(_r,Nr){return xr+"["+Nr+"]="+_r}).join(";"),";")}else se(Gn)?(Jn=Ut.link(or,{stable:!0}),xn(Pn,".",Yr[Bn],"(",Jn,");",In,".",Bn,"=",Jn,";")):xn(Pn,".",Yr[Bn],"(",or,");",In,".",Bn,"=",or,";")}})}function Mn(Ut,xn){Qn&&(Ut.instancing=xn.def(Ut.shared.extensions,".angle_instanced_arrays"))}function En(Ut,xn,Sn,Kn,Jn){function Xn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Un(Nr){Nr(Bn=xn.def(),"=",Xn(),";"),"string"==typeof Jn?Nr(sr,".count+=",Jn,";"):Nr(sr,".count++;"),It&&(Kn?Nr(Gn=xn.def(),"=",_r,".getNumPendingQueries();"):Nr(_r,".beginQuery(",sr,");"))}function In(Nr){Nr(sr,".cpuTime+=",Xn(),"-",Bn,";"),It&&(Kn?Nr(_r,".pushScopeStats(",Gn,",",_r,".getNumPendingQueries(),",sr,");"):Nr(_r,".endQuery();"))}function Pn(Nr){var Fr=xn.def(xr,".profile");xn(xr,".profile=",Nr,";"),xn.exit(xr,".profile=",Fr,";")}var Bn,Gn,or=Ut.shared,sr=Ut.stats,xr=or.current,_r=or.timer;if(Sn=Sn.profile){if(se(Sn))return void(Sn.enable?(Un(xn),In(xn.exit),Pn("true")):Pn("false"));Pn(Sn=Sn.append(Ut,xn))}else Sn=xn.def(xr,".profile");Un(or=Ut.block()),xn("if(",Sn,"){",or,"}"),In(Ut=Ut.block()),xn.exit("if(",Sn,"){",Ut,"}")}function jn(Ut,xn,Sn,Kn,Jn){var Un=Ut.shared;Kn.forEach(function(In){var Pn,Bn=In.name,Gn=Sn.attributes[Bn];if(Gn){if(!Jn(Gn))return;Pn=Gn.append(Ut,xn)}else{if(!Jn(nt))return;var or=Ut.scopeAttrib(Bn);Pn={},Object.keys(new Hr).forEach(function(sr){Pn[sr]=xn.def(or,".",sr)})}!function Xn(In,Pn,Bn){function Gn(){xn("if(!",_r,".buffer){",sr,".enableVertexAttribArray(",xr,");}");var qr,Xr=Bn.type;qr=Bn.size?xn.def(Bn.size,"||",Pn):Pn,xn("if(",_r,".type!==",Xr,"||",_r,".size!==",qr,"||",Br.map(function(ci){return _r+"."+ci+"!=="+Bn[ci]}).join("||"),"){",sr,".bindBuffer(",34962,",",Nr,".buffer);",sr,".vertexAttribPointer(",[xr,qr,Xr,Bn.normalized,Bn.stride,Bn.offset],");",_r,".type=",Xr,";",_r,".size=",qr,";",Br.map(function(ci){return _r+"."+ci+"="+Bn[ci]+";"}).join(""),"}"),Qn&&xn("if(",_r,".divisor!==",Xr=Bn.divisor,"){",Ut.instancing,".vertexAttribDivisorANGLE(",[xr,Xr],");",_r,".divisor=",Xr,";}")}function or(){xn("if(",_r,".buffer){",sr,".disableVertexAttribArray(",xr,");",_r,".buffer=null;","}if(",rn.map(function(qr,Xr){return _r+"."+qr+"!=="+Fr[Xr]}).join("||"),"){",sr,".vertexAttrib4f(",xr,",",Fr,");",rn.map(function(qr,Xr){return _r+"."+qr+"="+Fr[Xr]+";"}).join(""),"}")}var sr=Un.gl,xr=xn.def(In,".location"),_r=xn.def(Un.attributes,"[",xr,"]"),Nr=Bn.buffer,Fr=[Bn.x,Bn.y,Bn.z,Bn.w],Br=["buffer","normalized","offset","stride"];1===(In=Bn.state)?Gn():2===In?or():(xn("if(",In,"===",1,"){"),Gn(),xn("}else{"),or(),xn("}"))}(Ut.link(In),function(sr){switch(sr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(In.info.type),Pn)})}function er(Ut,xn,Sn,Kn,Jn,Xn){for(var Un,In=Ut.shared,Pn=In.gl,Bn=0;Bn<Kn.length;++Bn){var Gn,or=(_r=Kn[Bn]).name,sr=_r.info.type,xr=Sn.uniforms[or],_r=Ut.link(_r)+".location";if(xr){if(!Jn(xr))continue;if(se(xr)){if(or=xr.value,35678===sr||35680===sr)xn(Pn,".uniform1i(",_r,",",(sr=Ut.link(or._texture||or.color[0]._texture))+".bind());"),xn.exit(sr,".unbind();");else if(35674===sr||35675===sr||35676===sr)xr=2,35675===sr?xr=3:35676===sr&&(xr=4),xn(Pn,".uniformMatrix",xr,"fv(",_r,",false,",or=Ut.global.def("new Float32Array(["+Array.prototype.slice.call(or)+"])"),");");else{switch(sr){case 5126:Un="1f";break;case 35664:Un="2f";break;case 35665:Un="3f";break;case 35666:Un="4f";break;case 35670:case 5124:Un="1i";break;case 35671:case 35667:Un="2i";break;case 35672:case 35668:Un="3i";break;case 35673:case 35669:Un="4i"}xn(Pn,".uniform",Un,"(",_r,",",h(or)?Array.prototype.slice.call(or):or,");")}continue}Gn=xr.append(Ut,xn)}else{if(!Jn(nt))continue;Gn=xn.def(In.uniforms,"[",Ce.id(or),"]")}switch(35678===sr?xn("if(",Gn,"&&",Gn,'._reglType==="framebuffer"){',Gn,"=",Gn,".color[0];","}"):35680===sr&&xn("if(",Gn,"&&",Gn,'._reglType==="framebufferCube"){',Gn,"=",Gn,".color[0];","}"),or=1,sr){case 35678:case 35680:sr=xn.def(Gn,"._texture"),xn(Pn,".uniform1i(",_r,",",sr,".bind());"),xn.exit(sr,".unbind();");continue;case 5124:case 35670:Un="1i";break;case 35667:case 35671:Un="2i",or=2;break;case 35668:case 35672:Un="3i",or=3;break;case 35669:case 35673:Un="4i",or=4;break;case 5126:Un="1f";break;case 35664:Un="2f",or=2;break;case 35665:Un="3f",or=3;break;case 35666:Un="4f",or=4;break;case 35674:Un="Matrix2fv";break;case 35675:Un="Matrix3fv";break;case 35676:Un="Matrix4fv"}if("M"===Un.charAt(0)){xn(Pn,".uniform",Un,"(",_r,","),_r=Math.pow(sr-35674+2,2);var Nr=Ut.global.def("new Float32Array(",_r,")");Array.isArray(Gn)?xn("false,(",r(_r,function(Br){return Nr+"["+Br+"]="+Gn[Br]}),",",Nr,")"):xn("false,(Array.isArray(",Gn,")||",Gn," instanceof Float32Array)?",Gn,":(",r(_r,function(Br){return Nr+"["+Br+"]="+Gn+"["+Br+"]"}),",",Nr,")"),xn(");")}else{if(1<or){sr=[];var Fr=[];for(xr=0;xr<or;++xr)Array.isArray(Gn)?Fr.push(Gn[xr]):Fr.push(xn.def(Gn+"["+xr+"]")),Xn&&sr.push(xn.def());Xn&&xn("if(!",Ut.batchId,"||",sr.map(function(Br,qr){return Br+"!=="+Fr[qr]}).join("||"),"){",sr.map(function(Br,qr){return Br+"="+Fr[qr]+";"}).join("")),xn(Pn,".uniform",Un,"(",_r,",",Fr.join(","),");")}else Xn&&(sr=xn.def(),xn("if(!",Ut.batchId,"||",sr,"!==",Gn,"){",sr,"=",Gn,";")),xn(Pn,".uniform",Un,"(",_r,",",Gn,");");Xn&&xn("}")}}}function nr(Ut,xn,Sn,Kn){function Jn(Xr){var ci=sr[Xr];return ci?ci.append(Ut,ci.contextDep&&Kn.contextDynamic||ci.propDep?Sn:xn):xn.def(or,".",Xr)}function Xn(){function Xr(){Sn(Pn,".drawElementsInstancedANGLE(",[_r,Fr,Br,Nr+"<<(("+Br+"-5121)>>1)",In],");")}function ci(){Sn(Pn,".drawArraysInstancedANGLE(",[_r,Nr,Fr,In],");")}xr&&"null"!==xr?qr?Xr():(Sn("if(",xr,"){"),Xr(),Sn("}else{"),ci(),Sn("}")):ci()}function Un(){function Xr(){Sn(Gn+".drawElements("+[_r,Fr,Br,Nr+"<<(("+Br+"-5121)>>1)"]+");")}function ci(){Sn(Gn+".drawArrays("+[_r,Nr,Fr]+");")}xr&&"null"!==xr?qr?Xr():(Sn("if(",xr,"){"),Xr(),Sn("}else{"),ci(),Sn("}")):ci()}var In,Pn,Xr,ci,Bn=Ut.shared,Gn=Bn.gl,or=Bn.draw,sr=Kn.draw,xr=(ci=xn,(Xr=sr.elements)?((Xr.contextDep&&Kn.contextDynamic||Xr.propDep)&&(ci=Sn),Xr=Xr.append(Ut,ci),sr.elementsActive&&ci("if("+Xr+")"+Gn+".bindBuffer(34963,"+Xr+".buffer.buffer);")):(Xr=ci.def(),ci(Xr,"=",or,".","elements",";","if(",Xr,"){",Gn,".bindBuffer(",34963,",",Xr,".buffer.buffer);}","else if(",Bn.vao,".currentVAO){",Xr,"=",Ut.shared.elements+".getElements("+Bn.vao,".currentVAO.elements);",Tr?"":"if("+Xr+")"+Gn+".bindBuffer(34963,"+Xr+".buffer.buffer);","}")),Xr),_r=Jn("primitive"),Nr=Jn("offset"),Fr=function(){var Xr=sr.count,ci=xn;return Xr?((Xr.contextDep&&Kn.contextDynamic||Xr.propDep)&&(ci=Sn),Xr=Xr.append(Ut,ci)):Xr=ci.def(or,".","count"),Xr}();if("number"==typeof Fr){if(0===Fr)return}else Sn("if(",Fr,"){"),Sn.exit("}");Qn&&(In=Jn("instances"),Pn=Ut.instancing);var Br=xr+".type",qr=sr.elements&&se(sr.elements)&&!sr.vaoActive;Qn&&("number"!=typeof In||0<=In)?"string"==typeof In?(Sn("if(",In,">0){"),Xn(),Sn("}else if(",In,"<0){"),Un(),Sn("}")):Xn():Un()}function mr(Ut,xn,Sn,Kn,Jn){return Jn=(xn=Rt()).proc("body",Jn),Qn&&(xn.instancing=Jn.def(xn.shared.extensions,".angle_instanced_arrays")),Ut(xn,Jn,Sn,Kn),xn.compile().body}function Dr(Ut,xn,Sn,Kn){Mn(Ut,xn),Sn.useVAO?Sn.drawVAO?xn(Ut.shared.vao,".setVAO(",Sn.drawVAO.append(Ut,xn),");"):xn(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(xn(Ut.shared.vao,".setVAO(null);"),jn(Ut,xn,Sn,Kn.attributes,function(){return!0})),er(Ut,xn,Sn,Kn.uniforms,function(){return!0},!1),nr(Ut,xn,xn,Sn)}function yr(Ut,xn,Sn,Kn){function Jn(){return!0}Ut.batchId="a1",Mn(Ut,xn),jn(Ut,xn,Sn,Kn.attributes,Jn),er(Ut,xn,Sn,Kn.uniforms,Jn,!1),nr(Ut,xn,xn,Sn)}function Wr(Ut,xn,Sn,Kn){function Jn(or){return or.contextDep&&Un||or.propDep}function Xn(or){return!Jn(or)}Mn(Ut,xn);var Un=Sn.contextDep,In=xn.def(),Pn=xn.def();Ut.shared.props=Pn,Ut.batchId=In;var Bn=Ut.scope(),Gn=Ut.scope();xn(Bn.entry,"for(",In,"=0;",In,"<","a1",";++",In,"){",Pn,"=","a0","[",In,"];",Gn,"}",Bn.exit),Sn.needsContext&&Tn(Ut,Gn,Sn.context),Sn.needsFramebuffer&&sn(Ut,Gn,Sn.framebuffer),dn(Ut,Gn,Sn.state,Jn),Sn.profile&&Jn(Sn.profile)&&En(Ut,Gn,Sn,!1,!0),Kn?(Sn.useVAO?Sn.drawVAO?Jn(Sn.drawVAO)?Gn(Ut.shared.vao,".setVAO(",Sn.drawVAO.append(Ut,Gn),");"):Bn(Ut.shared.vao,".setVAO(",Sn.drawVAO.append(Ut,Bn),");"):Bn(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(Bn(Ut.shared.vao,".setVAO(null);"),jn(Ut,Bn,Sn,Kn.attributes,Xn),jn(Ut,Gn,Sn,Kn.attributes,Jn)),er(Ut,Bn,Sn,Kn.uniforms,Xn,!1),er(Ut,Gn,Sn,Kn.uniforms,Jn,!0),nr(Ut,Bn,Gn,Sn)):(xn=Ut.global.def("{}"),Kn=Sn.shader.progVar.append(Ut,Gn),Pn=Gn.def(Kn,".id"),Bn=Gn.def(xn,"[",Pn,"]"),Gn(Ut.shared.gl,".useProgram(",Kn,".program);","if(!",Bn,"){",Bn,"=",xn,"[",Pn,"]=",Ut.link(function(or){return mr(yr,Ut,Sn,or,2)}),"(",Kn,");}",Bn,".call(this,a0[",In,"],",In,");"))}function Or(Ut,xn,Sn){var Kn=xn.static[Sn];if(Kn&&function(Gn){if("object"==typeof Gn&&!h(Gn)){for(var or=Object.keys(Gn),sr=0;sr<or.length;++sr)if(ee.isDynamic(Gn[or[sr]]))return!0;return!1}}(Kn)){var Jn=Ut.global,Xn=Object.keys(Kn),Un=!1,In=!1,Pn=!1,Bn=Ut.global.def("{}");Xn.forEach(function(Gn){var or=Kn[Gn];if(ee.isDynamic(or))"function"==typeof or&&(or=Kn[Gn]=ee.unbox(or)),Gn=j(or,null),Un=Un||Gn.thisDep,Pn=Pn||Gn.propDep,In=In||Gn.contextDep;else{switch(Jn(Bn,".",Gn,"="),typeof or){case"number":Jn(or);break;case"string":Jn('"',or,'"');break;case"object":Array.isArray(or)&&Jn("[",or.join(),"]");break;default:Jn(Ut.link(or))}Jn(";")}}),xn.dynamic[Sn]=new ee.DynamicVariable(4,{thisDep:Un,contextDep:In,propDep:Pn,ref:Bn,append:function(Gn,or){Xn.forEach(function(sr){var xr=Kn[sr];ee.isDynamic(xr)&&(xr=Gn.invoke(or,xr),or(Bn,".",sr,"=",xr,";"))})}}),delete xn.static[Sn]}}var Hr=Vt.Record,oi={add:32774,subtract:32778,"reverse subtract":32779};Ue.ext_blend_minmax&&(oi.min=32775,oi.max=32776);var Qn=Ue.angle_instanced_arrays,Ir=Ue.webgl_draw_buffers,Tr=Ue.oes_vertex_array_object,ar={dirty:!0,profile:Ie.profile},Jr={},ri=[],Rr={},Yr={};ht("dither",3024),ht("blend.enable",3042),xt("blend.color","blendColor",[0,0,0,0]),xt("blend.equation","blendEquationSeparate",[32774,32774]),xt("blend.func","blendFuncSeparate",[1,0,1,0]),ht("depth.enable",2929,!0),xt("depth.func","depthFunc",513),xt("depth.range","depthRange",[0,1]),xt("depth.mask","depthMask",!0),xt("colorMask","colorMask",[!0,!0,!0,!0]),ht("cull.enable",2884),xt("cull.face","cullFace",1029),xt("frontFace","frontFace",2305),xt("lineWidth","lineWidth",1),ht("polygonOffset.enable",32823),xt("polygonOffset.offset","polygonOffset",[0,0]),ht("sample.alpha",32926),ht("sample.enable",32928),xt("sample.coverage","sampleCoverage",[1,!1]),ht("stencil.enable",2960),xt("stencil.mask","stencilMask",-1),xt("stencil.func","stencilFunc",[519,0,-1]),xt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),xt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),ht("scissor.enable",3089),xt("scissor.box","scissor",[0,0,ye.drawingBufferWidth,ye.drawingBufferHeight]),xt("viewport","viewport",[0,0,ye.drawingBufferWidth,ye.drawingBufferHeight]);var Ci={gl:ye,context:Yt,strings:Ce,next:Jr,current:ar,draw:bt,elements:Ke,buffer:rt,shader:dt,attributes:Vt.state,vao:Vt,uniforms:Lt,framebuffer:mt,extensions:Ue,timer:It,isBufferArgs:ne},pn={primTypes:Le,compareFuncs:mn,blendFuncs:cn,blendEquations:oi,stencilOps:nn,glTypes:Se,orientationType:Xe};Ir&&(pn.backBuffer=[1029],pn.drawBuffer=r(Qe.maxDrawbuffers,function(Ut){return 0===Ut?[0]:r(Ut,function(xn){return 36064+xn})}));var Ln=0;return{next:Jr,current:ar,procs:function(){var Ut=Rt(),xn=Ut.proc("poll"),Sn=Ut.proc("refresh"),Kn=Ut.block();xn(Kn),Sn(Kn);var Jn,Xn=(Pn=Ut.shared).gl,Un=Pn.next,In=Pn.current;Kn(In,".dirty=false;"),sn(Ut,xn),sn(Ut,Sn,null,!0),Qn&&(Jn=Ut.link(Qn)),Ue.oes_vertex_array_object&&Sn(Ut.link(Ue.oes_vertex_array_object),".bindVertexArrayOES(null);");var Pn=Sn.def(Pn.attributes),Bn=Sn.def(0),Gn=Ut.cond(Bn,".buffer");Gn.then(Xn,".enableVertexAttribArray(i);",Xn,".bindBuffer(",34962,",",Bn,".buffer.buffer);",Xn,".vertexAttribPointer(i,",Bn,".size,",Bn,".type,",Bn,".normalized,",Bn,".stride,",Bn,".offset);").else(Xn,".disableVertexAttribArray(i);",Xn,".vertexAttrib4f(i,",Bn,".x,",Bn,".y,",Bn,".z,",Bn,".w);",Bn,".buffer=null;");var or=Ut.link(Qe.maxAttributes,{stable:!0});return Sn("for(var i=0;i<",or,";++i){",Bn,"=",Pn,"[i];",Gn,"}"),Qn&&Sn("for(var i=0;i<",or,";++i){",Jn,".vertexAttribDivisorANGLE(i,",Pn,"[i].divisor);","}"),Sn(Ut.shared.vao,".currentVAO=null;",Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"),Object.keys(Rr).forEach(function(sr){var xr=Rr[sr],_r=Kn.def(Un,".",sr),Nr=Ut.block();Nr("if(",_r,"){",Xn,".enable(",xr,")}else{",Xn,".disable(",xr,")}",In,".",sr,"=",_r,";"),Sn(Nr),xn("if(",_r,"!==",In,".",sr,"){",Nr,"}")}),Object.keys(Yr).forEach(function(sr){var xr,_r,Nr=Yr[sr],Fr=ar[sr],Br=Ut.block();Br(Xn,".",Nr,"("),h(Fr)?(Nr=Fr.length,xr=Ut.global.def(Un,".",sr),_r=Ut.global.def(In,".",sr),Br(r(Nr,function(qr){return xr+"["+qr+"]"}),");",r(Nr,function(qr){return _r+"["+qr+"]="+xr+"["+qr+"];"}).join("")),xn("if(",r(Nr,function(qr){return xr+"["+qr+"]!=="+_r+"["+qr+"]"}).join("||"),"){",Br,"}")):(xr=Kn.def(Un,".",sr),_r=Kn.def(In,".",sr),Br(xr,");",In,".",sr,"=",xr,";"),xn("if(",xr,"!==",_r,"){",Br,"}")),Sn(Br)}),Ut.compile()}(),compile:function(Ut,xn,Sn,Kn,Jn){var Xn=Rt();Xn.stats=Xn.link(Jn),Object.keys(xn.static).forEach(function(In){Or(Xn,xn,In)}),hn.forEach(function(In){Or(Xn,Ut,In)});var Un=Vn(Ut,xn,Sn,Kn);return Un.shader.program&&(Un.shader.program.attributes.sort(function(In,Pn){return In.name<Pn.name?-1:1}),Un.shader.program.uniforms.sort(function(In,Pn){return In.name<Pn.name?-1:1})),function(In,Pn){var Bn=In.proc("draw",1);Mn(In,Bn),Tn(In,Bn,Pn.context),sn(In,Bn,Pn.framebuffer),fn(In,Bn,Pn),dn(In,Bn,Pn.state),En(In,Bn,Pn,!1,!0);var Gn=Pn.shader.progVar.append(In,Bn);if(Bn(In.shared.gl,".useProgram(",Gn,".program);"),Pn.shader.program)Dr(In,Bn,Pn,Pn.shader.program);else{Bn(In.shared.vao,".setVAO(null);");var or=In.global.def("{}"),sr=Bn.def(Gn,".id"),xr=Bn.def(or,"[",sr,"]");Bn(In.cond(xr).then(xr,".call(this,a0);").else(xr,"=",or,"[",sr,"]=",In.link(function(_r){return mr(Dr,In,Pn,_r,1)}),"(",Gn,");",xr,".call(this,a0);"))}0<Object.keys(Pn.state).length&&Bn(In.shared.current,".dirty=true;"),In.shared.vao&&Bn(In.shared.vao,".setVAO(null);")}(Xn,Un),function kr(Ut,xn){function Sn(In){var Pn=xn.shader[In];Pn&&(Pn=Pn.append(Ut,Kn),isNaN(Pn)?Kn.set(Jn.shader,"."+In,Pn):Kn.set(Jn.shader,"."+In,Ut.link(Pn,{stable:!0})))}var Kn=Ut.proc("scope",3);Ut.batchId="a2";var Jn=Ut.shared,Xn=Jn.current;if(Tn(Ut,Kn,xn.context),xn.framebuffer&&xn.framebuffer.append(Ut,Kn),X(Object.keys(xn.state)).forEach(function(In){var Pn=xn.state[In],Bn=Pn.append(Ut,Kn);h(Bn)?Bn.forEach(function(Gn,or){isNaN(Gn)?Kn.set(Ut.next[In],"["+or+"]",Gn):Kn.set(Ut.next[In],"["+or+"]",Ut.link(Gn,{stable:!0}))}):se(Pn)?Kn.set(Jn.next,"."+In,Ut.link(Bn,{stable:!0})):Kn.set(Jn.next,"."+In,Bn)}),En(Ut,Kn,xn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(In){var Pn=xn.draw[In];Pn&&(Pn=Pn.append(Ut,Kn),isNaN(Pn)?Kn.set(Jn.draw,"."+In,Pn):Kn.set(Jn.draw,"."+In,Ut.link(Pn),{stable:!0}))}),Object.keys(xn.uniforms).forEach(function(In){var Pn=xn.uniforms[In].append(Ut,Kn);Array.isArray(Pn)&&(Pn="["+Pn.map(function(Bn){return isNaN(Bn)?Bn:Ut.link(Bn,{stable:!0})})+"]"),Kn.set(Jn.uniforms,"["+Ut.link(Ce.id(In),{stable:!0})+"]",Pn)}),Object.keys(xn.attributes).forEach(function(In){var Pn=xn.attributes[In].append(Ut,Kn),Bn=Ut.scopeAttrib(In);Object.keys(new Hr).forEach(function(Gn){Kn.set(Bn,"."+Gn,Pn[Gn])})}),xn.scopeVAO){var Un=xn.scopeVAO.append(Ut,Kn);isNaN(Un)?Kn.set(Jn.vao,".targetVAO",Un):Kn.set(Jn.vao,".targetVAO",Ut.link(Un,{stable:!0}))}Sn("vert"),Sn("frag"),0<Object.keys(xn.state).length&&(Kn(Xn,".dirty=true;"),Kn.exit(Xn,".dirty=true;")),Kn("a1(",Ut.shared.context,",a0,",Ut.batchId,");")}(Xn,Un),function(In,Pn){function Bn(Fr){return Fr.contextDep&&or||Fr.propDep}var Gn=In.proc("batch",2);In.batchId="0",Mn(In,Gn);var or=!1,sr=!0;Object.keys(Pn.context).forEach(function(Fr){or=or||Pn.context[Fr].propDep}),or||(Tn(In,Gn,Pn.context),sr=!1);var xr=!1;if((_r=Pn.framebuffer)?(_r.propDep?or=xr=!0:_r.contextDep&&or&&(xr=!0),xr||sn(In,Gn,_r)):sn(In,Gn,null),Pn.state.viewport&&Pn.state.viewport.propDep&&(or=!0),fn(In,Gn,Pn),dn(In,Gn,Pn.state,function(Fr){return!Bn(Fr)}),Pn.profile&&Bn(Pn.profile)||En(In,Gn,Pn,!1,"a1"),Pn.contextDep=or,Pn.needsContext=sr,Pn.needsFramebuffer=xr,(sr=Pn.shader.progVar).contextDep&&or||sr.propDep)Wr(In,Gn,Pn,null);else if(sr=sr.append(In,Gn),Gn(In.shared.gl,".useProgram(",sr,".program);"),Pn.shader.program)Wr(In,Gn,Pn,Pn.shader.program);else{Gn(In.shared.vao,".setVAO(null);");var _r=In.global.def("{}"),Nr=(xr=Gn.def(sr,".id"),Gn.def(_r,"[",xr,"]"));Gn(In.cond(Nr).then(Nr,".call(this,a0,a1);").else(Nr,"=",_r,"[",xr,"]=",In.link(function(Fr){return mr(Wr,In,Pn,Fr,2)}),"(",sr,");",Nr,".call(this,a0,a1);"))}0<Object.keys(Pn.state).length&&Gn(In.shared.current,".dirty=true;"),In.shared.vao&&Gn(In.shared.vao,".setVAO(null);")}(Xn,Un),U(Xn.compile(),{destroy:function(){Un.shader.program.destroy()}})}}}function oe(ye,Ce){for(var Ue=0;Ue<ye.length;++Ue)if(ye[Ue]===Ce)return Ue;return-1}var U=function(ye,Ce){for(var Ue=Object.keys(Ce),Qe=0;Qe<Ue.length;++Qe)ye[Ue[Qe]]=Ce[Ue[Qe]];return ye},te=0,ee={DynamicVariable:p,define:function(ye,Ce){return new p(ye,g(Ce+""))},isDynamic:function(ye){return"function"==typeof ye&&!ye._reglType||ye instanceof p},unbox:function ye(Ce,Ue){return"function"==typeof Ce?new p(0,Ce):"number"==typeof Ce||"boolean"==typeof Ce?new p(5,Ce):Array.isArray(Ce)?new p(6,Ce.map(function(Qe,rt){return ye(Qe,Ue+"["+rt+"]")})):Ce instanceof p?Ce:void 0},accessor:g},le={next:"function"==typeof requestAnimationFrame?function(ye){return requestAnimationFrame(ye)}:function(ye){return setTimeout(ye,16)},cancel:"function"==typeof cancelAnimationFrame?function(ye){return cancelAnimationFrame(ye)}:clearTimeout},ce=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},pe=o();pe.zero=o();var be=function(ye){return ye instanceof Uint8Array||ye instanceof Uint16Array||ye instanceof Uint32Array||ye instanceof Int8Array||ye instanceof Int16Array||ye instanceof Int32Array||ye instanceof Float32Array||ye instanceof Float64Array||ye instanceof Uint8ClampedArray},he=function(ye){return Object.keys(ye).map(function(Ce){return ye[Ce]})},xe={shape:function(ye){for(var Ce=[];ye.length;ye=ye[0])Ce.push(ye.length);return Ce},flatten:function(ye,Ce,Ue,Qe){var rt=1;if(Ce.length)for(var Ke=0;Ke<Ce.length;++Ke)rt*=Ce[Ke];else rt=0;switch(Ue=Qe||pe.allocType(Ue,rt),Ce.length){case 0:break;case 1:for(Qe=Ce[0],Ce=0;Ce<Qe;++Ce)Ue[Ce]=ye[Ce];break;case 2:for(Qe=Ce[0],Ce=Ce[1],Ke=rt=0;Ke<Qe;++Ke)for(var gt=ye[Ke],mt=0;mt<Ce;++mt)Ue[rt++]=gt[mt];break;case 3:m(ye,Ce[0],Ce[1],Ce[2],Ue,0);break;default:!function Lt(Vt,dt,bt,Yt,It){for(var jt=1,Ie=bt+1;Ie<dt.length;++Ie)jt*=dt[Ie];var et=dt[bt];if(dt.length-bt==4){var ht=dt[bt+1],xt=dt[bt+2];for(dt=dt[bt+3],Ie=0;Ie<et;++Ie)m(Vt[Ie],ht,xt,dt,Yt,It),It+=jt}else for(Ie=0;Ie<et;++Ie)Lt(Vt[Ie],dt,bt+1,Yt,It),It+=jt}(ye,Ce,0,Ue,0)}return Ue}},De={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Se={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ke={dynamic:35048,stream:35040,static:35044},Fe=xe.flatten,ve=xe.shape,Te=[];Te[5120]=1,Te[5122]=2,Te[5124]=4,Te[5121]=1,Te[5123]=2,Te[5125]=4,Te[5126]=4;var Le={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Oe=new Float32Array(1),Ne=new Uint32Array(Oe.buffer),Be=[9984,9986,9985,9987],He=[0,6409,6410,6407,6408],Ve={};Ve[6409]=Ve[6406]=Ve[6402]=1,Ve[34041]=Ve[6410]=2,Ve[6407]=Ve[35904]=3,Ve[6408]=Ve[35906]=4;var it=a("HTMLCanvasElement"),ze=a("OffscreenCanvas"),je=a("CanvasRenderingContext2D"),qe=a("ImageBitmap"),Ye=a("HTMLImageElement"),ct=a("HTMLVideoElement"),vt=Object.keys(De).concat([it,ze,je,qe,Ye,ct]),wt=[];wt[5121]=1,wt[5126]=4,wt[36193]=2,wt[5123]=2,wt[5125]=4;var Ot=[];Ot[32854]=2,Ot[32855]=2,Ot[36194]=2,Ot[34041]=4,Ot[33776]=.5,Ot[33777]=.5,Ot[33778]=1,Ot[33779]=1,Ot[35986]=.5,Ot[35987]=1,Ot[34798]=1,Ot[35840]=.5,Ot[35841]=.25,Ot[35842]=.5,Ot[35843]=.25,Ot[36196]=.5;var St=[];St[32854]=2,St[32855]=2,St[36194]=2,St[33189]=2,St[36168]=1,St[34041]=4,St[35907]=4,St[34836]=16,St[34842]=8,St[34843]=6;var st=[];st[6408]=4,st[6407]=3;var Ct=[];Ct[5121]=1,Ct[5126]=4,Ct[36193]=2;var $t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],rn=["x","y","z","w"],hn="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),cn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},mn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},nn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xe={cw:2304,ccw:2305},nt=new J(!1,!1,!1,function(){});return function(ye){function Ce(){if(0===yr.length)Xt&&Xt.update(),Hr=null;else{Hr=le.next(Ce),dt();for(var Qn=yr.length-1;0<=Qn;--Qn){var Ir=yr[Qn];Ir&&Ir(Vn,null,0)}It.flush(),Xt&&Xt.update()}}function Ue(){!Hr&&0<yr.length&&(Hr=le.next(Ce))}function Qe(){Hr&&(le.cancel(Ce),Hr=null)}function rt(Qn){Qn.preventDefault(),Qe(),Wr.forEach(function(Ir){Ir()})}function Ke(Qn){It.getError(),Ie.restore(),Mn.restore(),sn.restore(),En.restore(),jn.restore(),er.restore(),dn.restore(),Xt&&Xt.restore(),nr.procs.refresh(),Ue(),kr.forEach(function(Ir){Ir()})}function gt(Qn){function Ir(Ut,xn){var Sn={},Kn={};return Object.keys(Ut).forEach(function(Jn){var Xn=Ut[Jn];if(ee.isDynamic(Xn))Kn[Jn]=ee.unbox(Xn,Jn);else{if(xn&&Array.isArray(Xn))for(var Un=0;Un<Xn.length;++Un)if(ee.isDynamic(Xn[Un]))return void(Kn[Jn]=ee.unbox(Xn,Jn));Sn[Jn]=Xn}}),{dynamic:Kn,static:Sn}}var Tr=Ir(Qn.context||{},!0),ar=Ir(Qn.uniforms||{},!0),Jr=Ir(Qn.attributes||{},!1);Qn=Ir(function(Ut){function xn(Kn){if(Kn in Sn){var Jn=Sn[Kn];delete Sn[Kn],Object.keys(Jn).forEach(function(Xn){Sn[Kn+"."+Xn]=Jn[Xn]})}}var Sn=U({},Ut);return delete Sn.uniforms,delete Sn.attributes,delete Sn.context,delete Sn.vao,"stencil"in Sn&&Sn.stencil.op&&(Sn.stencil.opBack=Sn.stencil.opFront=Sn.stencil.op,delete Sn.stencil.op),xn("blend"),xn("depth"),xn("cull"),xn("stencil"),xn("polygonOffset"),xn("scissor"),xn("sample"),"vao"in Ut&&(Sn.vao=Ut.vao),Sn}(Qn),!1);var ri={gpuTime:0,cpuTime:0,count:0},Rr=nr.compile(Qn,Jr,ar,Tr,ri),Yr=Rr.draw,Ci=Rr.batch,pn=Rr.scope,Ln=[];return U(function(Ut,xn){var Sn;if("function"==typeof Ut)return pn.call(this,null,Ut,0);if("function"==typeof xn)if("number"==typeof Ut)for(Sn=0;Sn<Ut;++Sn)pn.call(this,null,xn,Sn);else{if(!Array.isArray(Ut))return pn.call(this,Ut,xn,0);for(Sn=0;Sn<Ut.length;++Sn)pn.call(this,Ut[Sn],xn,Sn)}else if("number"==typeof Ut){if(0<Ut)return Ci.call(this,function(Kn){for(;Ln.length<Kn;)Ln.push(null);return Ln}(0|Ut),0|Ut)}else{if(!Array.isArray(Ut))return Yr.call(this,Ut);if(Ut.length)return Ci.call(this,Ut,Ut.length)}},{stats:ri,destroy:function(){Rr.destroy()}})}function mt(Qn,Ir){var Tr=0;nr.procs.poll();var ar=Ir.color;ar&&(It.clearColor(+ar[0]||0,+ar[1]||0,+ar[2]||0,+ar[3]||0),Tr|=16384),"depth"in Ir&&(It.clearDepth(+Ir.depth),Tr|=256),"stencil"in Ir&&(It.clearStencil(0|Ir.stencil),Tr|=1024),It.clear(Tr)}function Lt(Qn){return yr.push(Qn),Ue(),{cancel:function(){var Ir=oe(yr,Qn);yr[Ir]=function Tr(){var ar=oe(yr,Tr);yr[ar]=yr[yr.length-1],--yr.length,0>=yr.length&&Qe()}}}}function Vt(){var Qn=mr.viewport,Ir=mr.scissor_box;Qn[0]=Qn[1]=Ir[0]=Ir[1]=0,Vn.viewportWidth=Vn.framebufferWidth=Vn.drawingBufferWidth=Qn[2]=Ir[2]=It.drawingBufferWidth,Vn.viewportHeight=Vn.framebufferHeight=Vn.drawingBufferHeight=Qn[3]=Ir[3]=It.drawingBufferHeight}function dt(){Vn.tick+=1,Vn.time=Yt(),Vt(),nr.procs.poll()}function bt(){En.refresh(),Vt(),nr.procs.refresh(),Xt&&Xt.update()}function Yt(){return(ce()-tn)/1e3}if(!(ye=function e(ye){var Ce,Ue,Qe,rt,Ke=ye||{};ye={};var gt=[],mt=[],Lt=typeof window>"u"?1:window.devicePixelRatio,Vt=!1,dt={},bt=function(It){},Yt=function(){};if("string"==typeof Ke?Ce=document.querySelector(Ke):"object"==typeof Ke&&("string"==typeof Ke.nodeName&&"function"==typeof Ke.appendChild&&"function"==typeof Ke.getBoundingClientRect?Ce=Ke:"function"==typeof Ke.drawArrays||"function"==typeof Ke.drawElements?Qe=(rt=Ke).canvas:("gl"in Ke?rt=Ke.gl:"canvas"in Ke?Qe=y(Ke.canvas):"container"in Ke&&(Ue=y(Ke.container)),"attributes"in Ke&&(ye=Ke.attributes),"extensions"in Ke&&(gt=b(Ke.extensions)),"optionalExtensions"in Ke&&(mt=b(Ke.optionalExtensions)),"onDone"in Ke&&(bt=Ke.onDone),"profile"in Ke&&(Vt=!!Ke.profile),"pixelRatio"in Ke&&(Lt=+Ke.pixelRatio),"cachedCode"in Ke&&(dt=Ke.cachedCode))),Ce&&("canvas"===Ce.nodeName.toLowerCase()?Qe=Ce:Ue=Ce),!rt){if(!Qe){if(!(Ce=function(It,jt,Ie){function et(){var Rt=window.innerWidth,Xt=window.innerHeight;It!==document.body&&(Rt=(Xt=xt.getBoundingClientRect()).right-Xt.left,Xt=Xt.bottom-Xt.top),xt.width=Ie*Rt,xt.height=Ie*Xt}var ht,xt=document.createElement("canvas");return U(xt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),It.appendChild(xt),It===document.body&&(xt.style.position="absolute",U(It.style,{margin:0,padding:0})),It!==document.body&&"function"==typeof ResizeObserver?(ht=new ResizeObserver(function(){setTimeout(et)})).observe(It):window.addEventListener("resize",et,!1),et(),{canvas:xt,onDestroy:function(){ht?ht.disconnect():window.removeEventListener("resize",et),It.removeChild(xt)}}}(Ue||document.body,0,Lt)))return null;Qe=Ce.canvas,Yt=Ce.onDestroy}void 0===ye.premultipliedAlpha&&(ye.premultipliedAlpha=!0),rt=function(It,jt){function Ie(et){try{return It.getContext(et,jt)}catch{return null}}return Ie("webgl")||Ie("experimental-webgl")||Ie("webgl-experimental")}(Qe,ye)}return rt?{gl:rt,canvas:Qe,container:Ue,extensions:gt,optionalExtensions:mt,pixelRatio:Lt,profile:Vt,cachedCode:dt,onDone:bt,onDestroy:Yt}:(Yt(),bt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(ye)))return null;var It=ye.gl,jt=It.getContextAttributes();It.isContextLost();var Ie=function(Qn,Ir){function Tr(Rr){var Yr;Rr=Rr.toLowerCase();try{Yr=ar[Rr]=Qn.getExtension(Rr)}catch{}return!!Yr}for(var ar={},Jr=0;Jr<Ir.extensions.length;++Jr){var ri=Ir.extensions[Jr];if(!Tr(ri))return Ir.onDestroy(),Ir.onDone('"'+ri+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ir.optionalExtensions.forEach(Tr),{extensions:ar,restore:function(){Object.keys(ar).forEach(function(Rr){if(ar[Rr]&&!Tr(Rr))throw Error("(regl): error restoring extension "+Rr)})}}}(It,ye);if(!Ie)return null;var Qn,Ir,et=(Qn={"":0},Ir=[""],{id:function(Tr){var ar=Qn[Tr];return ar||(ar=Qn[Tr]=Ir.length,Ir.push(Tr),ar)},str:function(Tr){return Ir[Tr]}}),ht={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xt=ye.cachedCode||{},Rt=Ie.extensions,Xt=function(Qn,Ir){function Tr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function ar(Ln,Ut,xn){var Sn=Rr.pop()||new Tr;Sn.startQueryIndex=Ln,Sn.endQueryIndex=Ut,Sn.sum=0,Sn.stats=xn,Yr.push(Sn)}if(!Ir.ext_disjoint_timer_query)return null;var Jr=[],ri=[],Rr=[],Yr=[],Ci=[],pn=[];return{beginQuery:function(Ln){var Ut=Jr.pop()||Ir.ext_disjoint_timer_query.createQueryEXT();Ir.ext_disjoint_timer_query.beginQueryEXT(35007,Ut),ri.push(Ut),ar(ri.length-1,ri.length,Ln)},endQuery:function(){Ir.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:ar,update:function(){var Ln,Ut;if(0!==(Ln=ri.length)){pn.length=Math.max(pn.length,Ln+1),Ci.length=Math.max(Ci.length,Ln+1),Ci[0]=0;var xn=pn[0]=0;for(Ut=Ln=0;Ut<ri.length;++Ut){var Sn=ri[Ut];Ir.ext_disjoint_timer_query.getQueryObjectEXT(Sn,34919)?(xn+=Ir.ext_disjoint_timer_query.getQueryObjectEXT(Sn,34918),Jr.push(Sn)):ri[Ln++]=Sn,Ci[Ut+1]=xn,pn[Ut+1]=Ln}for(ri.length=Ln,Ut=Ln=0;Ut<Yr.length;++Ut){var Kn=(xn=Yr[Ut]).startQueryIndex;xn.sum+=Ci[Sn=xn.endQueryIndex]-Ci[Kn],(Sn=pn[Sn])===(Kn=pn[Kn])?(xn.stats.gpuTime+=xn.sum/1e6,Rr.push(xn)):(xn.startQueryIndex=Kn,xn.endQueryIndex=Sn,Yr[Ln++]=xn)}Yr.length=Ln}},getNumPendingQueries:function(){return ri.length},clear:function(){Jr.push.apply(Jr,ri);for(var Ln=0;Ln<Jr.length;Ln++)Ir.ext_disjoint_timer_query.deleteQueryEXT(Jr[Ln]);ri.length=0,Jr.length=0},restore:function(){ri.length=0,Jr.length=0}}}(0,Rt),tn=ce(),Kt=It.drawingBufferWidth,kn=It.drawingBufferHeight,Vn={tick:0,time:0,viewportWidth:Kt,viewportHeight:kn,framebufferWidth:Kt,framebufferHeight:kn,drawingBufferWidth:Kt,drawingBufferHeight:kn,pixelRatio:ye.pixelRatio},Tn=(Kt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(ye,Ce){var Ue=1;Ce.ext_texture_filter_anisotropic&&(Ue=ye.getParameter(34047));var Qe=1,rt=1;Ce.webgl_draw_buffers&&(Qe=ye.getParameter(34852),rt=ye.getParameter(36063));var Ke=!!Ce.oes_texture_float;if(Ke){Ke=ye.createTexture(),ye.bindTexture(3553,Ke),ye.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var gt=ye.createFramebuffer();if(ye.bindFramebuffer(36160,gt),ye.framebufferTexture2D(36160,36064,3553,Ke,0),ye.bindTexture(3553,null),36053!==ye.checkFramebufferStatus(36160))Ke=!1;else{ye.viewport(0,0,1,1),ye.clearColor(1,0,0,1),ye.clear(16384);var mt=pe.allocType(5126,4);ye.readPixels(0,0,1,1,6408,5126,mt),ye.getError()?Ke=!1:(ye.deleteFramebuffer(gt),ye.deleteTexture(Ke),Ke=1===mt[0]),pe.freeType(mt)}}return mt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(mt=ye.createTexture(),gt=pe.allocType(5121,36),ye.activeTexture(33984),ye.bindTexture(34067,mt),ye.texImage2D(34069,0,6408,3,3,0,6408,5121,gt),pe.freeType(gt),ye.bindTexture(34067,null),ye.deleteTexture(mt),mt=!ye.getError()),{colorBits:[ye.getParameter(3410),ye.getParameter(3411),ye.getParameter(3412),ye.getParameter(3413)],depthBits:ye.getParameter(3414),stencilBits:ye.getParameter(3415),subpixelBits:ye.getParameter(3408),extensions:Object.keys(Ce).filter(function(Lt){return!!Ce[Lt]}),maxAnisotropic:Ue,maxDrawbuffers:Qe,maxColorAttachments:rt,pointSizeDims:ye.getParameter(33901),lineWidthDims:ye.getParameter(33902),maxViewportDims:ye.getParameter(3386),maxCombinedTextureUnits:ye.getParameter(35661),maxCubeMapSize:ye.getParameter(34076),maxRenderbufferSize:ye.getParameter(34024),maxTextureUnits:ye.getParameter(34930),maxTextureSize:ye.getParameter(3379),maxAttributes:ye.getParameter(34921),maxVertexUniforms:ye.getParameter(36347),maxVertexTextureUnits:ye.getParameter(35660),maxVaryingVectors:ye.getParameter(36348),maxFragmentUniforms:ye.getParameter(36349),glsl:ye.getParameter(35724),renderer:ye.getParameter(7937),vendor:ye.getParameter(7936),version:ye.getParameter(7938),readFloat:Ke,npotTextureCube:mt}}(It,Rt)),sn=function u(ye,Ce,Ue,Qe){function rt(bt){this.id=Lt++,this.buffer=ye.createBuffer(),this.type=bt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ue.profile&&(this.stats={size:0})}function Ke(bt,Yt,It){bt.byteLength=Yt.byteLength,ye.bufferData(bt.type,Yt,It)}function gt(bt,Yt,It,jt,Ie,et){if(bt.usage=It,Array.isArray(Yt)){if(bt.dtype=jt||5126,0<Yt.length)if(Array.isArray(Yt[0])){Ie=ve(Yt);for(var ht=jt=1;ht<Ie.length;++ht)jt*=Ie[ht];bt.dimension=jt,Ke(bt,Yt=Fe(Yt,Ie,bt.dtype),It),et?bt.persistentData=Yt:pe.freeType(Yt)}else"number"==typeof Yt[0]?(bt.dimension=Ie,i(Ie=pe.allocType(bt.dtype,Yt.length),Yt),Ke(bt,Ie,It),et?bt.persistentData=Ie:pe.freeType(Ie)):be(Yt[0])&&(bt.dimension=Yt[0].length,bt.dtype=jt||l(Yt[0])||5126,Ke(bt,Yt=Fe(Yt,[Yt.length,Yt[0].length],bt.dtype),It),et?bt.persistentData=Yt:pe.freeType(Yt))}else if(be(Yt))bt.dtype=jt||l(Yt),bt.dimension=Ie,Ke(bt,Yt,It),et&&(bt.persistentData=new Uint8Array(new Uint8Array(Yt.buffer)));else if(n(Yt)){var xt=Yt.stride,Rt=(ht=Yt.offset,0),Xt=0,tn=0,Kt=0;1===(Ie=Yt.shape).length?(Rt=Ie[0],Xt=1,tn=xt[0],Kt=0):2===Ie.length&&(Rt=Ie[0],Xt=Ie[1],tn=xt[0],Kt=xt[1]),bt.dtype=jt||l(Yt.data)||5126,bt.dimension=Xt,f(Ie=pe.allocType(bt.dtype,Rt*Xt),Yt.data,Rt,Xt,tn,Kt,ht),Ke(bt,Ie,It),et?bt.persistentData=Ie:pe.freeType(Ie)}else Yt instanceof ArrayBuffer&&(bt.dtype=5121,bt.dimension=Ie,Ke(bt,Yt,It),et&&(bt.persistentData=new Uint8Array(new Uint8Array(Yt))))}function mt(bt){Ce.bufferCount--,Qe(bt),ye.deleteBuffer(bt.buffer),bt.buffer=null,delete Vt[bt.id]}var Lt=0,Vt={};rt.prototype.bind=function(){ye.bindBuffer(this.type,this.buffer)},rt.prototype.destroy=function(){mt(this)};var dt=[];return Ue.profile&&(Ce.getTotalBufferSize=function(){var bt=0;return Object.keys(Vt).forEach(function(Yt){bt+=Vt[Yt].stats.size}),bt}),{create:function(bt,Yt,It,jt){function Ie(ht){var xt=35044,Rt=null,Xt=0,tn=0,Kt=1;return Array.isArray(ht)||be(ht)||n(ht)||ht instanceof ArrayBuffer?Rt=ht:"number"==typeof ht?Xt=0|ht:ht&&("data"in ht&&(Rt=ht.data),"usage"in ht&&(xt=ke[ht.usage]),"type"in ht&&(tn=Se[ht.type]),"dimension"in ht&&(Kt=0|ht.dimension),"length"in ht&&(Xt=0|ht.length)),et.bind(),Rt?gt(et,Rt,xt,tn,Kt,jt):(Xt&&ye.bufferData(et.type,Xt,xt),et.dtype=tn||5121,et.usage=xt,et.dimension=Kt,et.byteLength=Xt),Ue.profile&&(et.stats.size=et.byteLength*Te[et.dtype]),Ie}Ce.bufferCount++;var et=new rt(Yt);return Vt[et.id]=et,It||Ie(bt),Ie._reglType="buffer",Ie._buffer=et,Ie.subdata=function(ht,xt){var Rt,Xt=0|(xt||0);if(et.bind(),be(ht)||ht instanceof ArrayBuffer)ye.bufferSubData(et.type,Xt,ht);else if(Array.isArray(ht)){if(0<ht.length)if("number"==typeof ht[0]){var tn=pe.allocType(et.dtype,ht.length);i(tn,ht),ye.bufferSubData(et.type,Xt,tn),pe.freeType(tn)}else(Array.isArray(ht[0])||be(ht[0]))&&(Rt=ve(ht),tn=Fe(ht,Rt,et.dtype),ye.bufferSubData(et.type,Xt,tn),pe.freeType(tn))}else if(n(ht)){var Kt=ht.stride,kn=tn=0,Vn=0,Tn=0;1===(Rt=ht.shape).length?(tn=Rt[0],kn=1,Vn=Kt[0],Tn=0):2===Rt.length&&(tn=Rt[0],kn=Rt[1],Vn=Kt[0],Tn=Kt[1]),Rt=Array.isArray(ht.data)?et.dtype:l(ht.data),f(Rt=pe.allocType(Rt,tn*kn),ht.data,tn,kn,Vn,Tn,ht.offset),ye.bufferSubData(et.type,Xt,Rt),pe.freeType(Rt)}return Ie},Ue.profile&&(Ie.stats=et.stats),Ie.destroy=function(){mt(et)},Ie},createStream:function(bt,Yt){var It=dt.pop();return It||(It=new rt(bt)),It.bind(),gt(It,Yt,35040,0,1,!1),It},destroyStream:function(bt){dt.push(bt)},clear:function(){he(Vt).forEach(mt),dt.forEach(mt)},getBuffer:function(bt){return bt&&bt._buffer instanceof rt?bt._buffer:null},restore:function(){he(Vt).forEach(function(bt){bt.buffer=ye.createBuffer(),ye.bindBuffer(bt.type,bt.buffer),ye.bufferData(bt.type,bt.persistentData||bt.byteLength,bt.usage)})},_initBuffer:gt}}(It,ht,ye,function(Qn){return dn.destroyBuffer(Qn)}),fn=function s(ye,Ce,Ue,Qe){function rt(bt){this.id=Lt++,mt[this.id]=this,this.buffer=bt,this.primType=4,this.type=this.vertCount=0}function Ke(bt,Yt,It,jt,Ie,et,ht){var xt;if(bt.buffer.bind(),Yt?((xt=ht)||be(Yt)&&(!n(Yt)||be(Yt.data))||(xt=Ce.oes_element_index_uint?5125:5123),Ue._initBuffer(bt.buffer,Yt,It,xt,3)):(ye.bufferData(34963,et,It),bt.buffer.dtype=xt||5121,bt.buffer.usage=It,bt.buffer.dimension=3,bt.buffer.byteLength=et),xt=ht,!ht){switch(bt.buffer.dtype){case 5121:case 5120:xt=5121;break;case 5123:case 5122:xt=5123;break;case 5125:case 5124:xt=5125}bt.buffer.dtype=xt}bt.type=xt,0>(Yt=Ie)&&(Yt=bt.buffer.byteLength,5123===xt?Yt>>=1:5125===xt&&(Yt>>=2)),bt.vertCount=Yt,Yt=jt,0>jt&&(Yt=4,1===(jt=bt.buffer.dimension)&&(Yt=0),2===jt&&(Yt=1),3===jt&&(Yt=4)),bt.primType=Yt}function gt(bt){Qe.elementsCount--,delete mt[bt.id],bt.buffer.destroy(),bt.buffer=null}var mt={},Lt=0,Vt={uint8:5121,uint16:5123};Ce.oes_element_index_uint&&(Vt.uint32=5125),rt.prototype.bind=function(){this.buffer.bind()};var dt=[];return{create:function(bt,Yt){function It(et){if(et)if("number"==typeof et)jt(et),Ie.primType=4,Ie.vertCount=0|et,Ie.type=5121;else{var ht=null,xt=35044,Rt=-1,Xt=-1,tn=0,Kt=0;Array.isArray(et)||be(et)||n(et)?ht=et:("data"in et&&(ht=et.data),"usage"in et&&(xt=ke[et.usage]),"primitive"in et&&(Rt=Le[et.primitive]),"count"in et&&(Xt=0|et.count),"type"in et&&(Kt=Vt[et.type]),"length"in et?tn=0|et.length:(tn=Xt,5123===Kt||5122===Kt?tn*=2:5125!==Kt&&5124!==Kt||(tn*=4))),Ke(Ie,ht,xt,Rt,Xt,tn,Kt)}else jt(),Ie.primType=4,Ie.vertCount=0,Ie.type=5121;return It}var jt=Ue.create(null,34963,!0),Ie=new rt(jt._buffer);return Qe.elementsCount++,It(bt),It._reglType="elements",It._elements=Ie,It.subdata=function(et,ht){return jt.subdata(et,ht),It},It.destroy=function(){gt(Ie)},It},createStream:function(bt){var Yt=dt.pop();return Yt||(Yt=new rt(Ue.create(null,34963,!0,!1)._buffer)),Ke(Yt,bt,35040,-1,-1,0,0),Yt},destroyStream:function(bt){dt.push(bt)},getElements:function(bt){return"function"==typeof bt&&bt._elements instanceof rt?bt._elements:null},clear:function(){he(mt).forEach(gt)}}}(It,Rt,sn,ht),dn=function L(ye,Ce,Ue,Qe,rt,Ke,gt){function mt(){this.id=++dt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var It=Ce.oes_vertex_array_object;this.vao=It?It.createVertexArrayOES():null,bt[this.id]=this,this.buffers=[]}var Lt=Ue.maxAttributes,Vt=Array(Lt);for(Ue=0;Ue<Lt;++Ue)Vt[Ue]=new P;var dt=0,bt={},Yt={Record:P,scope:{},state:Vt,currentVAO:null,targetVAO:null,restore:Ce.oes_vertex_array_object?function(){Ce.oes_vertex_array_object&&he(bt).forEach(function(It){It.refresh()})}:function(){},createVAO:function(It){function jt(et){var ht;Array.isArray(et)?(ht=et,Ie.elements&&Ie.ownsElements&&Ie.elements.destroy(),Ie.elements=null,Ie.ownsElements=!1,Ie.offset=0,Ie.count=0,Ie.instances=-1,Ie.primitive=4):(et.elements?(ht=et.elements,Ie.ownsElements?("function"==typeof ht&&"elements"===ht._reglType?Ie.elements.destroy():Ie.elements(ht),Ie.ownsElements=!1):Ke.getElements(et.elements)?(Ie.elements=et.elements,Ie.ownsElements=!1):(Ie.elements=Ke.create(et.elements),Ie.ownsElements=!0)):(Ie.elements=null,Ie.ownsElements=!1),ht=et.attributes,Ie.offset=0,Ie.count=-1,Ie.instances=-1,Ie.primitive=4,Ie.elements&&(Ie.count=Ie.elements._elements.vertCount,Ie.primitive=Ie.elements._elements.primType),"offset"in et&&(Ie.offset=0|et.offset),"count"in et&&(Ie.count=0|et.count),"instances"in et&&(Ie.instances=0|et.instances),"primitive"in et&&(Ie.primitive=Le[et.primitive])),et={};var xt=Ie.attributes;xt.length=ht.length;for(var Rt=0;Rt<ht.length;++Rt){var Xt,tn=ht[Rt],Kt=xt[Rt]=new P,kn=tn.data||tn;Array.isArray(kn)||be(kn)||n(kn)?(Ie.buffers[Rt]&&(Xt=Ie.buffers[Rt],be(kn)&&Xt._buffer.byteLength>=kn.byteLength?Xt.subdata(kn):(Xt.destroy(),Ie.buffers[Rt]=null)),Ie.buffers[Rt]||(Xt=Ie.buffers[Rt]=rt.create(tn,34962,!1,!0)),Kt.buffer=rt.getBuffer(Xt),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1,et[Rt]=1):rt.getBuffer(tn)?(Kt.buffer=rt.getBuffer(tn),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1):rt.getBuffer(tn.buffer)?(Kt.buffer=rt.getBuffer(tn.buffer),Kt.size=0|(+tn.size||Kt.buffer.dimension),Kt.normalized=!!tn.normalized||!1,Kt.type="type"in tn?Se[tn.type]:Kt.buffer.dtype,Kt.offset=0|(tn.offset||0),Kt.stride=0|(tn.stride||0),Kt.divisor=0|(tn.divisor||0),Kt.state=1):"x"in tn&&(Kt.x=+tn.x||0,Kt.y=+tn.y||0,Kt.z=+tn.z||0,Kt.w=+tn.w||0,Kt.state=2)}for(Xt=0;Xt<Ie.buffers.length;++Xt)!et[Xt]&&Ie.buffers[Xt]&&(Ie.buffers[Xt].destroy(),Ie.buffers[Xt]=null);return Ie.refresh(),jt}var Ie=new mt;return Qe.vaoCount+=1,jt.destroy=function(){for(var et=0;et<Ie.buffers.length;++et)Ie.buffers[et]&&Ie.buffers[et].destroy();Ie.buffers.length=0,Ie.ownsElements&&(Ie.elements.destroy(),Ie.elements=null,Ie.ownsElements=!1),Ie.destroy()},jt._vao=Ie,jt._reglType="vao",jt(It)},getVAO:function(It){return"function"==typeof It&&It._vao?It._vao:null},destroyBuffer:function(It){for(var jt=0;jt<Vt.length;++jt){var Ie=Vt[jt];Ie.buffer===It&&(ye.disableVertexAttribArray(jt),Ie.buffer=null)}},setVAO:Ce.oes_vertex_array_object?function(It){It!==Yt.currentVAO&&(Ce.oes_vertex_array_object.bindVertexArrayOES(It?It.vao:null),Yt.currentVAO=It)}:function(It){if(It!==Yt.currentVAO){if(It)It.bindAttrs();else{for(var jt=Ce.angle_instanced_arrays,Ie=0;Ie<Vt.length;++Ie){var et=Vt[Ie];et.buffer?(ye.enableVertexAttribArray(Ie),et.buffer.bind(),ye.vertexAttribPointer(Ie,et.size,et.type,et.normalized,et.stride,et.offfset),jt&&et.divisor&&jt.vertexAttribDivisorANGLE(Ie,et.divisor)):(ye.disableVertexAttribArray(Ie),ye.vertexAttrib4f(Ie,et.x,et.y,et.z,et.w))}ye.bindBuffer(34963,gt.elements?gt.elements.buffer.buffer:null)}Yt.currentVAO=It}},clear:Ce.oes_vertex_array_object?function(){he(bt).forEach(function(It){It.destroy()})}:function(){}};return mt.prototype.bindAttrs=function(){for(var It=Ce.angle_instanced_arrays,jt=this.attributes,Ie=0;Ie<jt.length;++Ie){var et=jt[Ie];et.buffer?(ye.enableVertexAttribArray(Ie),ye.bindBuffer(34962,et.buffer.buffer),ye.vertexAttribPointer(Ie,et.size,et.type,et.normalized,et.stride,et.offset),It&&et.divisor&&It.vertexAttribDivisorANGLE(Ie,et.divisor)):(ye.disableVertexAttribArray(Ie),ye.vertexAttrib4f(Ie,et.x,et.y,et.z,et.w))}for(It=jt.length;It<Lt;++It)ye.disableVertexAttribArray(It);(It=Ke.getElements(this.elements))?ye.bindBuffer(34963,It.buffer.buffer):ye.bindBuffer(34963,null)},mt.prototype.refresh=function(){var It=Ce.oes_vertex_array_object;It&&(It.bindVertexArrayOES(this.vao),this.bindAttrs(),Yt.currentVAO=null,It.bindVertexArrayOES(null))},mt.prototype.destroy=function(){if(this.vao){var It=Ce.oes_vertex_array_object;this===Yt.currentVAO&&(Yt.currentVAO=null,It.bindVertexArrayOES(null)),It.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),bt[this.id]&&(delete bt[this.id],--Qe.vaoCount)},Yt}(It,Rt,Tn,ht,sn,fn,Kt),Mn=function S(ye,Ce,Ue,Qe){function rt(jt,Ie,et,ht){this.name=jt,this.id=Ie,this.location=et,this.info=ht}function Ke(jt,Ie){for(var et=0;et<jt.length;++et)if(jt[et].id===Ie.id)return void(jt[et].location=Ie.location);jt.push(Ie)}function gt(jt,Ie,et){if(!(xt=(et=35632===jt?Vt:dt)[Ie])){var ht=Ce.str(Ie),xt=ye.createShader(jt);ye.shaderSource(xt,ht),ye.compileShader(xt),et[Ie]=xt}return xt}function mt(jt,Ie){this.id=It++,this.fragId=jt,this.vertId=Ie,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Qe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Lt(jt,Ie,et){var ht;ht=gt(35632,jt.fragId);var xt=gt(35633,jt.vertId);if(Ie=jt.program=ye.createProgram(),ye.attachShader(Ie,ht),ye.attachShader(Ie,xt),et)for(ht=0;ht<et.length;++ht)ye.bindAttribLocation(Ie,(xt=et[ht])[0],xt[1]);ye.linkProgram(Ie),xt=ye.getProgramParameter(Ie,35718),Qe.profile&&(jt.stats.uniformsCount=xt);var Rt=jt.uniforms;for(ht=0;ht<xt;++ht)if(et=ye.getActiveUniform(Ie,ht))if(1<et.size)for(var Xt=0;Xt<et.size;++Xt){var tn=et.name.replace("[0]","["+Xt+"]");Ke(Rt,new rt(tn,Ce.id(tn),ye.getUniformLocation(Ie,tn),et))}else Ke(Rt,new rt(et.name,Ce.id(et.name),ye.getUniformLocation(Ie,et.name),et));for(xt=ye.getProgramParameter(Ie,35721),Qe.profile&&(jt.stats.attributesCount=xt),jt=jt.attributes,ht=0;ht<xt;++ht)(et=ye.getActiveAttrib(Ie,ht))&&Ke(jt,new rt(et.name,Ce.id(et.name),ye.getAttribLocation(Ie,et.name),et))}var Vt={},dt={},bt={},Yt=[],It=0;return Qe.profile&&(Ue.getMaxUniformsCount=function(){var jt=0;return Yt.forEach(function(Ie){Ie.stats.uniformsCount>jt&&(jt=Ie.stats.uniformsCount)}),jt},Ue.getMaxAttributesCount=function(){var jt=0;return Yt.forEach(function(Ie){Ie.stats.attributesCount>jt&&(jt=Ie.stats.attributesCount)}),jt}),{clear:function(){var jt=ye.deleteShader.bind(ye);he(Vt).forEach(jt),Vt={},he(dt).forEach(jt),dt={},Yt.forEach(function(Ie){ye.deleteProgram(Ie.program)}),Yt.length=0,bt={},Ue.shaderCount=0},program:function(jt,Ie,et,ht){var xt=bt[Ie];xt||(xt=bt[Ie]={});var Rt=xt[jt];if(Rt&&(Rt.refCount++,!ht))return Rt;var Xt=new mt(Ie,jt);return Ue.shaderCount++,Lt(Xt,et,ht),Rt||(xt[jt]=Xt),Yt.push(Xt),U(Xt,{destroy:function(){if(Xt.refCount--,0>=Xt.refCount){ye.deleteProgram(Xt.program);var tn=Yt.indexOf(Xt);Yt.splice(tn,1),Ue.shaderCount--}0>=xt[Xt.vertId].refCount&&(ye.deleteShader(dt[Xt.vertId]),delete dt[Xt.vertId],delete bt[Xt.fragId][Xt.vertId]),Object.keys(bt[Xt.fragId]).length||(ye.deleteShader(Vt[Xt.fragId]),delete Vt[Xt.fragId],delete bt[Xt.fragId])}})},restore:function(){Vt={},dt={};for(var jt=0;jt<Yt.length;++jt)Lt(Yt[jt],null,Yt[jt].attributes.map(function(Ie){return[Ie.location,Ie.name]}))},shader:gt,frag:-1,vert:-1}}(It,et,ht,ye),En=function D(ye,Ce,Ue,Qe,rt,Ke,gt){function mt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Lt(pn,Ln){pn.internalformat=Ln.internalformat,pn.format=Ln.format,pn.type=Ln.type,pn.compressed=Ln.compressed,pn.premultiplyAlpha=Ln.premultiplyAlpha,pn.flipY=Ln.flipY,pn.unpackAlignment=Ln.unpackAlignment,pn.colorSpace=Ln.colorSpace,pn.width=Ln.width,pn.height=Ln.height,pn.channels=Ln.channels}function Vt(pn,Ln){if("object"==typeof Ln&&Ln){"premultiplyAlpha"in Ln&&(pn.premultiplyAlpha=Ln.premultiplyAlpha),"flipY"in Ln&&(pn.flipY=Ln.flipY),"alignment"in Ln&&(pn.unpackAlignment=Ln.alignment),"colorSpace"in Ln&&(pn.colorSpace=nr[Ln.colorSpace]),"type"in Ln&&(pn.type=mr[Ln.type]);var Ut=pn.width,xn=pn.height,Sn=pn.channels,Kn=!1;"shape"in Ln?(Ut=Ln.shape[0],xn=Ln.shape[1],3===Ln.shape.length&&(Sn=Ln.shape[2],Kn=!0)):("radius"in Ln&&(Ut=xn=Ln.radius),"width"in Ln&&(Ut=Ln.width),"height"in Ln&&(xn=Ln.height),"channels"in Ln&&(Sn=Ln.channels,Kn=!0)),pn.width=0|Ut,pn.height=0|xn,pn.channels=0|Sn,Ut=!1,"format"in Ln&&(xn=pn.internalformat=Dr[Ut=Ln.format],pn.format=Tr[xn],Ut in mr&&!("type"in Ln)&&(pn.type=mr[Ut]),Ut in yr&&(pn.compressed=!0),Ut=!0),!Kn&&Ut?pn.channels=Ve[pn.format]:Kn&&!Ut&&pn.channels!==He[pn.format]&&(pn.format=pn.internalformat=He[pn.channels])}}function dt(pn){ye.pixelStorei(37440,pn.flipY),ye.pixelStorei(37441,pn.premultiplyAlpha),ye.pixelStorei(37443,pn.colorSpace),ye.pixelStorei(3317,pn.unpackAlignment)}function bt(){mt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Yt(pn,Ln){var Ut=null;if(x(Ln)?Ut=Ln:Ln&&(Vt(pn,Ln),"x"in Ln&&(pn.xOffset=0|Ln.x),"y"in Ln&&(pn.yOffset=0|Ln.y),x(Ln.data)&&(Ut=Ln.data)),Ln.copy){var xn=rt.viewportWidth,Sn=rt.viewportHeight;pn.width=pn.width||xn-pn.xOffset,pn.height=pn.height||Sn-pn.yOffset,pn.needsCopy=!0}else if(Ut){if(be(Ut))pn.channels=pn.channels||4,pn.data=Ut,"type"in Ln||5121!==pn.type||(pn.type=0|De[Object.prototype.toString.call(Ut)]);else if(_(Ut)){switch(pn.channels=pn.channels||4,Sn=(xn=Ut).length,pn.type){case 5121:case 5123:case 5125:case 5126:(Sn=pe.allocType(pn.type,Sn)).set(xn),pn.data=Sn;break;case 36193:pn.data=d(xn)}pn.alignment=1,pn.needsFree=!0}else if(n(Ut)){xn=Ut.data,Array.isArray(xn)||5121!==pn.type||(pn.type=0|De[Object.prototype.toString.call(xn)]);var Kn,Jn,Xn,Un,In=Ut.stride;3===(Sn=Ut.shape).length?(Xn=Sn[2],Un=In[2]):Un=Xn=1,Kn=Sn[0],Jn=Sn[1],Sn=In[0],In=In[1],pn.alignment=1,pn.width=Kn,pn.height=Jn,pn.channels=Xn,pn.format=pn.internalformat=He[Xn],pn.needsFree=!0,Kn=Un,Ut=Ut.offset;for(var Pn=pe.allocType(36193===pn.type?5126:pn.type,(Xn=pn.width)*(Un=pn.height)*(Jn=pn.channels)),Bn=0,Gn=0;Gn<Un;++Gn)for(var or=0;or<Xn;++or)for(var sr=0;sr<Jn;++sr)Pn[Bn++]=xn[Sn*or+In*Gn+Kn*sr+Ut];w(pn,Pn)}else if(T(Ut)===it||T(Ut)===ze||T(Ut)===je)pn.element=T(Ut)===it||T(Ut)===ze?Ut:Ut.canvas,pn.width=pn.element.width,pn.height=pn.element.height,pn.channels=4;else if(T(Ut)===qe)pn.element=Ut,pn.width=Ut.width,pn.height=Ut.height,pn.channels=4;else if(T(Ut)===Ye)pn.element=Ut,pn.width=Ut.naturalWidth,pn.height=Ut.naturalHeight,pn.channels=4;else if(T(Ut)===ct)pn.element=Ut,pn.width=Ut.videoWidth,pn.height=Ut.videoHeight,pn.channels=4;else if(c(Ut)){for(xn=pn.width||Ut[0].length,Sn=pn.height||Ut.length,In=pn.channels,In=h(Ut[0][0])?In||Ut[0][0].length:In||1,Kn=xe.shape(Ut),Xn=1,Un=0;Un<Kn.length;++Un)Xn*=Kn[Un];Xn=pe.allocType(36193===pn.type?5126:pn.type,Xn),xe.flatten(Ut,Kn,"",Xn),w(pn,Xn),pn.alignment=1,pn.width=xn,pn.height=Sn,pn.channels=In,pn.format=pn.internalformat=He[In],pn.needsFree=!0}}else pn.width=pn.width||1,pn.height=pn.height||1,pn.channels=pn.channels||4}function It(pn,Ln,Ut,xn,Sn){var Kn=pn.element,Jn=pn.data,Xn=pn.internalformat,Un=pn.format,In=pn.type,Pn=pn.width,Bn=pn.height;dt(pn),Kn?ye.texSubImage2D(Ln,Sn,Ut,xn,Un,In,Kn):pn.compressed?ye.compressedTexSubImage2D(Ln,Sn,Ut,xn,Xn,Pn,Bn,Jn):pn.needsCopy?(Qe(),ye.copyTexSubImage2D(Ln,Sn,Ut,xn,pn.xOffset,pn.yOffset,Pn,Bn)):ye.texSubImage2D(Ln,Sn,Ut,xn,Pn,Bn,Un,In,Jn)}function jt(){return ar.pop()||new bt}function Ie(pn){pn.needsFree&&pe.freeType(pn.data),bt.call(pn),ar.push(pn)}function et(){mt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ht(pn,Ln,Ut){var xn=pn.images[0]=jt();pn.mipmask=1,xn.width=pn.width=Ln,xn.height=pn.height=Ut,xn.channels=pn.channels=4}function xt(pn,Ln){var Ut=null;if(x(Ln))Lt(Ut=pn.images[0]=jt(),pn),Yt(Ut,Ln),pn.mipmask=1;else if(Vt(pn,Ln),Array.isArray(Ln.mipmap))for(var xn=Ln.mipmap,Sn=0;Sn<xn.length;++Sn)Lt(Ut=pn.images[Sn]=jt(),pn),Ut.width>>=Sn,Ut.height>>=Sn,Yt(Ut,xn[Sn]),pn.mipmask|=1<<Sn;else Lt(Ut=pn.images[0]=jt(),pn),Yt(Ut,Ln),pn.mipmask=1;Lt(pn,pn.images[0])}function Rt(pn,Ln){for(var Ut=pn.images,xn=0;xn<Ut.length&&Ut[xn];++xn){var Sn=Ut[xn],Kn=Ln,Jn=xn,Xn=Sn.element,Un=Sn.data,In=Sn.internalformat,Pn=Sn.format,Bn=Sn.type,Gn=Sn.width,or=Sn.height;dt(Sn),Xn?ye.texImage2D(Kn,Jn,Pn,Pn,Bn,Xn):Sn.compressed?ye.compressedTexImage2D(Kn,Jn,In,Gn,or,0,Un):Sn.needsCopy?(Qe(),ye.copyTexImage2D(Kn,Jn,Pn,Sn.xOffset,Sn.yOffset,Gn,or,0)):ye.texImage2D(Kn,Jn,Pn,Gn,or,0,Pn,Bn,Un||null)}}function Xt(){var pn=Jr.pop()||new et;mt.call(pn);for(var Ln=pn.mipmask=0;16>Ln;++Ln)pn.images[Ln]=null;return pn}function tn(pn){for(var Ln=pn.images,Ut=0;Ut<Ln.length;++Ut)Ln[Ut]&&Ie(Ln[Ut]),Ln[Ut]=null;Jr.push(pn)}function Kt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function kn(pn,Ln){"min"in Ln&&(pn.minFilter=er[Ln.min],0<=Be.indexOf(pn.minFilter)&&!("faces"in Ln)&&(pn.genMipmaps=!0)),"mag"in Ln&&(pn.magFilter=jn[Ln.mag]);var Ut=pn.wrapS,xn=pn.wrapT;if("wrap"in Ln){var Sn=Ln.wrap;"string"==typeof Sn?Ut=xn=En[Sn]:Array.isArray(Sn)&&(Ut=En[Sn[0]],xn=En[Sn[1]])}else"wrapS"in Ln&&(Ut=En[Ln.wrapS]),"wrapT"in Ln&&(xn=En[Ln.wrapT]);if(pn.wrapS=Ut,pn.wrapT=xn,"anisotropic"in Ln&&(pn.anisotropic=Ln.anisotropic),"mipmap"in Ln){switch(Ut=!1,typeof Ln.mipmap){case"string":pn.mipmapHint=Mn[Ln.mipmap],Ut=pn.genMipmaps=!0;break;case"boolean":Ut=pn.genMipmaps=Ln.mipmap;break;case"object":pn.genMipmaps=!1,Ut=!0}!Ut||"min"in Ln||(pn.minFilter=9984)}}function Vn(pn,Ln){ye.texParameteri(Ln,10241,pn.minFilter),ye.texParameteri(Ln,10240,pn.magFilter),ye.texParameteri(Ln,10242,pn.wrapS),ye.texParameteri(Ln,10243,pn.wrapT),Ce.ext_texture_filter_anisotropic&&ye.texParameteri(Ln,34046,pn.anisotropic),pn.genMipmaps&&(ye.hint(33170,pn.mipmapHint),ye.generateMipmap(Ln))}function Tn(pn){mt.call(this),this.mipmask=0,this.internalformat=6408,this.id=ri++,this.refCount=1,this.target=pn,this.texture=ye.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Kt,gt.profile&&(this.stats={size:0})}function sn(pn){ye.activeTexture(33984),ye.bindTexture(pn.target,pn.texture)}function fn(){var pn=Ci[0];pn?ye.bindTexture(pn.target,pn.texture):ye.bindTexture(3553,null)}function dn(pn){var Ln=pn.texture,Ut=pn.unit,xn=pn.target;0<=Ut&&(ye.activeTexture(33984+Ut),ye.bindTexture(xn,null),Ci[Ut]=null),ye.deleteTexture(Ln),pn.texture=null,pn.params=null,pn.pixels=null,pn.refCount=0,delete Rr[pn.id],Ke.textureCount--}var Mn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},En={repeat:10497,clamp:33071,mirror:33648},jn={nearest:9728,linear:9729},er=U({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},jn),nr={none:0,browser:37444},mr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Dr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},yr={};Ce.ext_srgb&&(Dr.srgb=35904,Dr.srgba=35906),Ce.oes_texture_float&&(mr.float32=mr.float=5126),Ce.oes_texture_half_float&&(mr.float16=mr["half float"]=36193),Ce.webgl_depth_texture&&(U(Dr,{depth:6402,"depth stencil":34041}),U(mr,{uint16:5123,uint32:5125,"depth stencil":34042})),Ce.webgl_compressed_texture_s3tc&&U(yr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ce.webgl_compressed_texture_atc&&U(yr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ce.webgl_compressed_texture_pvrtc&&U(yr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ce.webgl_compressed_texture_etc1&&(yr["rgb etc1"]=36196);var Wr=Array.prototype.slice.call(ye.getParameter(34467));Object.keys(yr).forEach(function(pn){var Ln=yr[pn];0<=Wr.indexOf(Ln)&&(Dr[pn]=Ln)});var kr=Object.keys(Dr);Ue.textureFormats=kr;var Or=[];Object.keys(Dr).forEach(function(pn){Or[Dr[pn]]=pn});var Hr=[];Object.keys(mr).forEach(function(pn){Hr[mr[pn]]=pn});var oi=[];Object.keys(jn).forEach(function(pn){oi[jn[pn]]=pn});var Qn=[];Object.keys(er).forEach(function(pn){Qn[er[pn]]=pn});var Ir=[];Object.keys(En).forEach(function(pn){Ir[En[pn]]=pn});var Tr=kr.reduce(function(pn,Ln){var Ut=Dr[Ln];return pn[Ut]=6409===Ut||6406===Ut||6409===Ut||6410===Ut||6402===Ut||34041===Ut||Ce.ext_srgb&&(35904===Ut||35906===Ut)?Ut:32855===Ut||0<=Ln.indexOf("rgba")?6408:6407,pn},{}),ar=[],Jr=[],ri=0,Rr={},Yr=Ue.maxTextureUnits,Ci=Array(Yr).map(function(){return null});return U(Tn.prototype,{bind:function(){this.bindCount+=1;var pn=this.unit;if(0>pn){for(var Ln=0;Ln<Yr;++Ln){var Ut=Ci[Ln];if(Ut){if(0<Ut.bindCount)continue;Ut.unit=-1}Ci[Ln]=this,pn=Ln;break}gt.profile&&Ke.maxTextureUnits<pn+1&&(Ke.maxTextureUnits=pn+1),this.unit=pn,ye.activeTexture(33984+pn),ye.bindTexture(this.target,this.texture)}return pn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&dn(this)}}),gt.profile&&(Ke.getTotalTextureSize=function(){var pn=0;return Object.keys(Rr).forEach(function(Ln){pn+=Rr[Ln].stats.size}),pn}),{create2D:function(pn,Ln){function Ut(Sn,Kn){var Jn=xn.texInfo;Kt.call(Jn);var Xn=Xt();return"number"==typeof Sn?ht(Xn,0|Sn,"number"==typeof Kn?0|Kn:0|Sn):Sn?(kn(Jn,Sn),xt(Xn,Sn)):ht(Xn,1,1),Jn.genMipmaps&&(Xn.mipmask=(Xn.width<<1)-1),xn.mipmask=Xn.mipmask,Lt(xn,Xn),xn.internalformat=Xn.internalformat,Ut.width=Xn.width,Ut.height=Xn.height,sn(xn),Rt(Xn,3553),Vn(Jn,3553),fn(),tn(Xn),gt.profile&&(xn.stats.size=M(xn.internalformat,xn.type,Xn.width,Xn.height,Jn.genMipmaps,!1)),Ut.format=Or[xn.internalformat],Ut.type=Hr[xn.type],Ut.mag=oi[Jn.magFilter],Ut.min=Qn[Jn.minFilter],Ut.wrapS=Ir[Jn.wrapS],Ut.wrapT=Ir[Jn.wrapT],Ut}var xn=new Tn(3553);return Rr[xn.id]=xn,Ke.textureCount++,Ut(pn,Ln),Ut.subimage=function(Sn,Kn,Jn,Xn){Kn|=0,Jn|=0,Xn|=0;var Un=jt();return Lt(Un,xn),Un.width=0,Un.height=0,Yt(Un,Sn),Un.width=Un.width||(xn.width>>Xn)-Kn,Un.height=Un.height||(xn.height>>Xn)-Jn,sn(xn),It(Un,3553,Kn,Jn,Xn),fn(),Ie(Un),Ut},Ut.resize=function(Sn,Kn){var Jn=0|Sn,Xn=0|Kn||Jn;if(Jn===xn.width&&Xn===xn.height)return Ut;Ut.width=xn.width=Jn,Ut.height=xn.height=Xn,sn(xn);for(var Un=0;xn.mipmask>>Un;++Un){var In=Jn>>Un,Pn=Xn>>Un;if(!In||!Pn)break;ye.texImage2D(3553,Un,xn.format,In,Pn,0,xn.format,xn.type,null)}return fn(),gt.profile&&(xn.stats.size=M(xn.internalformat,xn.type,Jn,Xn,!1,!1)),Ut},Ut._reglType="texture2d",Ut._texture=xn,gt.profile&&(Ut.stats=xn.stats),Ut.destroy=function(){xn.decRef()},Ut},createCube:function(pn,Ln,Ut,xn,Sn,Kn){function Jn(In,Pn,Bn,Gn,or,sr){var xr,_r=Xn.texInfo;for(Kt.call(_r),xr=0;6>xr;++xr)Un[xr]=Xt();if("number"!=typeof In&&In){if("object"==typeof In)if(Pn)xt(Un[0],In),xt(Un[1],Pn),xt(Un[2],Bn),xt(Un[3],Gn),xt(Un[4],or),xt(Un[5],sr);else if(kn(_r,In),Vt(Xn,In),"faces"in In)for(In=In.faces,xr=0;6>xr;++xr)Lt(Un[xr],Xn),xt(Un[xr],In[xr]);else for(xr=0;6>xr;++xr)xt(Un[xr],In)}else for(In=0|In||1,xr=0;6>xr;++xr)ht(Un[xr],In,In);for(Lt(Xn,Un[0]),Xn.mipmask=_r.genMipmaps?(Un[0].width<<1)-1:Un[0].mipmask,Xn.internalformat=Un[0].internalformat,Jn.width=Un[0].width,Jn.height=Un[0].height,sn(Xn),xr=0;6>xr;++xr)Rt(Un[xr],34069+xr);for(Vn(_r,34067),fn(),gt.profile&&(Xn.stats.size=M(Xn.internalformat,Xn.type,Jn.width,Jn.height,_r.genMipmaps,!0)),Jn.format=Or[Xn.internalformat],Jn.type=Hr[Xn.type],Jn.mag=oi[_r.magFilter],Jn.min=Qn[_r.minFilter],Jn.wrapS=Ir[_r.wrapS],Jn.wrapT=Ir[_r.wrapT],xr=0;6>xr;++xr)tn(Un[xr]);return Jn}var Xn=new Tn(34067);Rr[Xn.id]=Xn,Ke.cubeCount++;var Un=Array(6);return Jn(pn,Ln,Ut,xn,Sn,Kn),Jn.subimage=function(In,Pn,Bn,Gn,or){Bn|=0,Gn|=0,or|=0;var sr=jt();return Lt(sr,Xn),sr.width=0,sr.height=0,Yt(sr,Pn),sr.width=sr.width||(Xn.width>>or)-Bn,sr.height=sr.height||(Xn.height>>or)-Gn,sn(Xn),It(sr,34069+In,Bn,Gn,or),fn(),Ie(sr),Jn},Jn.resize=function(In){if((In|=0)!==Xn.width){Jn.width=Xn.width=In,Jn.height=Xn.height=In,sn(Xn);for(var Pn=0;6>Pn;++Pn)for(var Bn=0;Xn.mipmask>>Bn;++Bn)ye.texImage2D(34069+Pn,Bn,Xn.format,In>>Bn,In>>Bn,0,Xn.format,Xn.type,null);return fn(),gt.profile&&(Xn.stats.size=M(Xn.internalformat,Xn.type,Jn.width,Jn.height,!1,!0)),Jn}},Jn._reglType="textureCube",Jn._texture=Xn,gt.profile&&(Jn.stats=Xn.stats),Jn.destroy=function(){Xn.decRef()},Jn},clear:function(){for(var pn=0;pn<Yr;++pn)ye.activeTexture(33984+pn),ye.bindTexture(3553,null),Ci[pn]=null;he(Rr).forEach(dn),Ke.cubeCount=0,Ke.textureCount=0},getTexture:function(pn){return null},restore:function(){for(var pn=0;pn<Yr;++pn){var Ln=Ci[pn];Ln&&(Ln.bindCount=0,Ln.unit=-1,Ci[pn]=null)}he(Rr).forEach(function(Ut){Ut.texture=ye.createTexture(),ye.bindTexture(Ut.target,Ut.texture);for(var xn=0;32>xn;++xn)if(0!=(Ut.mipmask&1<<xn))if(3553===Ut.target)ye.texImage2D(3553,xn,Ut.internalformat,Ut.width>>xn,Ut.height>>xn,0,Ut.internalformat,Ut.type,null);else for(var Sn=0;6>Sn;++Sn)ye.texImage2D(34069+Sn,xn,Ut.internalformat,Ut.width>>xn,Ut.height>>xn,0,Ut.internalformat,Ut.type,null);Vn(Ut.texInfo,Ut.target)})},refresh:function(){for(var pn=0;pn<Yr;++pn){var Ln=Ci[pn];Ln&&(Ln.bindCount=0,Ln.unit=-1,Ci[pn]=null),ye.activeTexture(33984+pn),ye.bindTexture(3553,null),ye.bindTexture(34067,null)}}}}(It,Rt,Tn,function(){nr.procs.poll()},Vn,ht,ye),jn=function(ye,Ce,Ue,Qe,rt){function Ke(bt){this.id=Vt++,this.refCount=1,this.renderbuffer=bt,this.format=32854,this.height=this.width=0,rt.profile&&(this.stats={size:0})}function gt(bt){var Yt=bt.renderbuffer;ye.bindRenderbuffer(36161,null),ye.deleteRenderbuffer(Yt),bt.renderbuffer=null,bt.refCount=0,delete dt[bt.id],Qe.renderbufferCount--}var mt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ce.ext_srgb&&(mt.srgba=35907),Ce.ext_color_buffer_half_float&&(mt.rgba16f=34842,mt.rgb16f=34843),Ce.webgl_color_buffer_float&&(mt.rgba32f=34836);var Lt=[];Object.keys(mt).forEach(function(bt){Lt[mt[bt]]=bt});var Vt=0,dt={};return Ke.prototype.decRef=function(){0>=--this.refCount&&gt(this)},rt.profile&&(Qe.getTotalRenderbufferSize=function(){var bt=0;return Object.keys(dt).forEach(function(Yt){bt+=dt[Yt].stats.size}),bt}),{create:function(bt,Yt){function It(Ie,et){var ht=0,xt=0,Rt=32854;if("object"==typeof Ie&&Ie?("shape"in Ie?(ht=0|(xt=Ie.shape)[0],xt=0|xt[1]):("radius"in Ie&&(ht=xt=0|Ie.radius),"width"in Ie&&(ht=0|Ie.width),"height"in Ie&&(xt=0|Ie.height)),"format"in Ie&&(Rt=mt[Ie.format])):"number"==typeof Ie?(ht=0|Ie,xt="number"==typeof et?0|et:ht):Ie||(ht=xt=1),ht!==jt.width||xt!==jt.height||Rt!==jt.format)return It.width=jt.width=ht,It.height=jt.height=xt,jt.format=Rt,ye.bindRenderbuffer(36161,jt.renderbuffer),ye.renderbufferStorage(36161,Rt,ht,xt),rt.profile&&(jt.stats.size=St[jt.format]*jt.width*jt.height),It.format=Lt[jt.format],It}var jt=new Ke(ye.createRenderbuffer());return dt[jt.id]=jt,Qe.renderbufferCount++,It(bt,Yt),It.resize=function(Ie,et){var ht=0|Ie,xt=0|et||ht;return ht===jt.width&&xt===jt.height||(It.width=jt.width=ht,It.height=jt.height=xt,ye.bindRenderbuffer(36161,jt.renderbuffer),ye.renderbufferStorage(36161,jt.format,ht,xt),rt.profile&&(jt.stats.size=St[jt.format]*jt.width*jt.height)),It},It._reglType="renderbuffer",It._renderbuffer=jt,rt.profile&&(It.stats=jt.stats),It.destroy=function(){jt.decRef()},It},clear:function(){he(dt).forEach(gt)},restore:function(){he(dt).forEach(function(bt){bt.renderbuffer=ye.createRenderbuffer(),ye.bindRenderbuffer(36161,bt.renderbuffer),ye.renderbufferStorage(36161,bt.format,bt.width,bt.height)}),ye.bindRenderbuffer(36161,null)}}}(It,Rt,0,ht,ye),er=function C(ye,Ce,Ue,Qe,rt,Ke){function gt(Tn,sn,fn){this.target=Tn,this.texture=sn,this.renderbuffer=fn;var dn=Tn=0;sn?(Tn=sn.width,dn=sn.height):fn&&(Tn=fn.width,dn=fn.height),this.width=Tn,this.height=dn}function mt(Tn){Tn&&(Tn.texture&&Tn.texture._texture.decRef(),Tn.renderbuffer&&Tn.renderbuffer._renderbuffer.decRef())}function Lt(Tn,sn,fn){Tn&&(Tn.texture?Tn.texture._texture.refCount+=1:Tn.renderbuffer._renderbuffer.refCount+=1)}function Vt(Tn,sn){sn&&(sn.texture?ye.framebufferTexture2D(36160,Tn,sn.target,sn.texture._texture.texture,0):ye.framebufferRenderbuffer(36160,Tn,36161,sn.renderbuffer._renderbuffer.renderbuffer))}function dt(Tn){var sn=3553,fn=null,dn=null,Mn=Tn;return"object"==typeof Tn&&(Mn=Tn.data,"target"in Tn&&(sn=0|Tn.target)),"texture2d"===(Tn=Mn._reglType)||"textureCube"===Tn?fn=Mn:"renderbuffer"===Tn&&(dn=Mn,sn=36161),new gt(sn,fn,dn)}function bt(Tn,sn,fn,dn,Mn){return fn?((Tn=Qe.create2D({width:Tn,height:sn,format:dn,type:Mn}))._texture.refCount=0,new gt(3553,Tn,null)):((Tn=rt.create({width:Tn,height:sn,format:dn}))._renderbuffer.refCount=0,new gt(36161,null,Tn))}function Yt(Tn){return Tn&&(Tn.texture||Tn.renderbuffer)}function It(Tn,sn,fn){Tn&&(Tn.texture?Tn.texture.resize(sn,fn):Tn.renderbuffer&&Tn.renderbuffer.resize(sn,fn),Tn.width=sn,Tn.height=fn)}function jt(){this.id=kn++,Vn[this.id]=this,this.framebuffer=ye.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ie(Tn){Tn.colorAttachments.forEach(mt),mt(Tn.depthAttachment),mt(Tn.stencilAttachment),mt(Tn.depthStencilAttachment)}function et(Tn){ye.deleteFramebuffer(Tn.framebuffer),Tn.framebuffer=null,Ke.framebufferCount--,delete Vn[Tn.id]}function ht(Tn){var sn;ye.bindFramebuffer(36160,Tn.framebuffer);var fn=Tn.colorAttachments;for(sn=0;sn<fn.length;++sn)Vt(36064+sn,fn[sn]);for(sn=fn.length;sn<Ue.maxColorAttachments;++sn)ye.framebufferTexture2D(36160,36064+sn,3553,null,0);ye.framebufferTexture2D(36160,33306,3553,null,0),ye.framebufferTexture2D(36160,36096,3553,null,0),ye.framebufferTexture2D(36160,36128,3553,null,0),Vt(36096,Tn.depthAttachment),Vt(36128,Tn.stencilAttachment),Vt(33306,Tn.depthStencilAttachment),ye.checkFramebufferStatus(36160),ye.isContextLost(),ye.bindFramebuffer(36160,Rt.next?Rt.next.framebuffer:null),Rt.cur=Rt.next,ye.getError()}function xt(Tn,sn){function fn(Mn,En){var jn,er=0,nr=0,mr=!0,Dr=!0;jn=null;var yr=!0,Wr="rgba",kr="uint8",Or=1,Hr=null,oi=null,Qn=null,Ir=!1;"number"==typeof Mn?(er=0|Mn,nr=0|En||er):Mn?("shape"in Mn?(er=(nr=Mn.shape)[0],nr=nr[1]):("radius"in Mn&&(er=nr=Mn.radius),"width"in Mn&&(er=Mn.width),"height"in Mn&&(nr=Mn.height)),("color"in Mn||"colors"in Mn)&&(jn=Mn.color||Mn.colors,Array.isArray(jn)),jn||("colorCount"in Mn&&(Or=0|Mn.colorCount),"colorTexture"in Mn&&(yr=!!Mn.colorTexture,Wr="rgba4"),"colorType"in Mn&&(kr=Mn.colorType,!yr)&&("half float"===kr||"float16"===kr?Wr="rgba16f":"float"!==kr&&"float32"!==kr||(Wr="rgba32f")),"colorFormat"in Mn&&(0<=Xt.indexOf(Wr=Mn.colorFormat)?yr=!0:0<=tn.indexOf(Wr)&&(yr=!1))),("depthTexture"in Mn||"depthStencilTexture"in Mn)&&(Ir=!(!Mn.depthTexture&&!Mn.depthStencilTexture)),"depth"in Mn&&("boolean"==typeof Mn.depth?mr=Mn.depth:(Hr=Mn.depth,Dr=!1)),"stencil"in Mn&&("boolean"==typeof Mn.stencil?Dr=Mn.stencil:(oi=Mn.stencil,mr=!1)),"depthStencil"in Mn&&("boolean"==typeof Mn.depthStencil?mr=Dr=Mn.depthStencil:(Qn=Mn.depthStencil,Dr=mr=!1))):er=nr=1;var Tr=null,ar=null,Jr=null,ri=null;if(Array.isArray(jn))Tr=jn.map(dt);else if(jn)Tr=[dt(jn)];else for(Tr=Array(Or),jn=0;jn<Or;++jn)Tr[jn]=bt(er,nr,yr,Wr,kr);for(er=er||Tr[0].width,nr=nr||Tr[0].height,Hr?ar=dt(Hr):mr&&!Dr&&(ar=bt(er,nr,Ir,"depth","uint32")),oi?Jr=dt(oi):Dr&&!mr&&(Jr=bt(er,nr,!1,"stencil","uint8")),Qn?ri=dt(Qn):!Hr&&!oi&&Dr&&mr&&(ri=bt(er,nr,Ir,"depth stencil","depth stencil")),mr=null,jn=0;jn<Tr.length;++jn)Lt(Tr[jn]),Tr[jn]&&Tr[jn].texture&&(Dr=st[Tr[jn].texture._texture.format]*Ct[Tr[jn].texture._texture.type],null===mr&&(mr=Dr));return Lt(ar),Lt(Jr),Lt(ri),Ie(dn),dn.width=er,dn.height=nr,dn.colorAttachments=Tr,dn.depthAttachment=ar,dn.stencilAttachment=Jr,dn.depthStencilAttachment=ri,fn.color=Tr.map(Yt),fn.depth=Yt(ar),fn.stencil=Yt(Jr),fn.depthStencil=Yt(ri),fn.width=dn.width,fn.height=dn.height,ht(dn),fn}var dn=new jt;return Ke.framebufferCount++,fn(Tn,sn),U(fn,{resize:function(Mn,En){var jn=Math.max(0|Mn,1),er=Math.max(0|En||jn,1);if(jn===dn.width&&er===dn.height)return fn;for(var nr=dn.colorAttachments,mr=0;mr<nr.length;++mr)It(nr[mr],jn,er);return It(dn.depthAttachment,jn,er),It(dn.stencilAttachment,jn,er),It(dn.depthStencilAttachment,jn,er),dn.width=fn.width=jn,dn.height=fn.height=er,ht(dn),fn},_reglType:"framebuffer",_framebuffer:dn,destroy:function(){et(dn),Ie(dn)},use:function(Mn){Rt.setFBO({framebuffer:fn},Mn)}})}var Rt={cur:null,next:null,dirty:!1,setFBO:null},Xt=["rgba"],tn=["rgba4","rgb565","rgb5 a1"];Ce.ext_srgb&&tn.push("srgba"),Ce.ext_color_buffer_half_float&&tn.push("rgba16f","rgb16f"),Ce.webgl_color_buffer_float&&tn.push("rgba32f");var Kt=["uint8"];Ce.oes_texture_half_float&&Kt.push("half float","float16"),Ce.oes_texture_float&&Kt.push("float","float32");var kn=0,Vn={};return U(Rt,{getFramebuffer:function(Tn){return"function"==typeof Tn&&"framebuffer"===Tn._reglType&&(Tn=Tn._framebuffer)instanceof jt?Tn:null},create:xt,createCube:function(Tn){function sn(dn){var Mn,En={color:null},jn=0,er=null;Mn="rgba";var nr="uint8",mr=1;if("number"==typeof dn?jn=0|dn:dn?("shape"in dn?jn=dn.shape[0]:("radius"in dn&&(jn=0|dn.radius),"width"in dn?jn=0|dn.width:"height"in dn&&(jn=0|dn.height)),("color"in dn||"colors"in dn)&&(er=dn.color||dn.colors,Array.isArray(er)),er||("colorCount"in dn&&(mr=0|dn.colorCount),"colorType"in dn&&(nr=dn.colorType),"colorFormat"in dn&&(Mn=dn.colorFormat)),"depth"in dn&&(En.depth=dn.depth),"stencil"in dn&&(En.stencil=dn.stencil),"depthStencil"in dn&&(En.depthStencil=dn.depthStencil)):jn=1,er)if(Array.isArray(er))for(dn=[],Mn=0;Mn<er.length;++Mn)dn[Mn]=er[Mn];else dn=[er];else for(dn=Array(mr),er={radius:jn,format:Mn,type:nr},Mn=0;Mn<mr;++Mn)dn[Mn]=Qe.createCube(er);for(En.color=Array(dn.length),Mn=0;Mn<dn.length;++Mn)mr=dn[Mn],jn=jn||mr.width,En.color[Mn]={target:34069,data:dn[Mn]};for(Mn=0;6>Mn;++Mn){for(mr=0;mr<dn.length;++mr)En.color[mr].target=34069+Mn;0<Mn&&(En.depth=fn[0].depth,En.stencil=fn[0].stencil,En.depthStencil=fn[0].depthStencil),fn[Mn]?fn[Mn](En):fn[Mn]=xt(En)}return U(sn,{width:jn,height:jn,color:dn})}var fn=Array(6);return sn(Tn),U(sn,{faces:fn,resize:function(dn){var Mn=0|dn;if(Mn===sn.width)return sn;var En=sn.color;for(dn=0;dn<En.length;++dn)En[dn].resize(Mn);for(dn=0;6>dn;++dn)fn[dn].resize(Mn);return sn.width=sn.height=Mn,sn},_reglType:"framebufferCube",destroy:function(){fn.forEach(function(dn){dn.destroy()})}})},clear:function(){he(Vn).forEach(et)},restore:function(){Rt.cur=null,Rt.next=null,Rt.dirty=!0,he(Vn).forEach(function(Tn){Tn.framebuffer=ye.createFramebuffer(),ht(Tn)})}})}(It,Rt,Tn,En,jn,ht),nr=H(It,et,Rt,Tn,sn,fn,0,er,{},dn,Mn,Kt,Vn,Xt,xt,ye),mr=(et=function E(ye,Ce,Ue,Qe,rt,Ke,gt){function mt(Lt){var Vt;Vt=null===Ce.next?5121:Ce.next.colorAttachments[0].texture._texture.type;var dt=0,bt=0,Yt=Qe.framebufferWidth,It=Qe.framebufferHeight,jt=null;return be(Lt)?jt=Lt:Lt&&(dt=0|Lt.x,bt=0|Lt.y,Yt=0|(Lt.width||Qe.framebufferWidth-dt),It=0|(Lt.height||Qe.framebufferHeight-bt),jt=Lt.data||null),Ue(),Lt=Yt*It*4,jt||(5121===Vt?jt=new Uint8Array(Lt):5126===Vt&&(jt=jt||new Float32Array(Lt))),ye.pixelStorei(3333,4),ye.readPixels(dt,bt,Yt,It,6408,Vt,jt),jt}return function(Lt){return Lt&&"framebuffer"in Lt?(Ce.setFBO({framebuffer:(Vt=Lt).framebuffer},function(){dt=mt(Vt)}),dt):mt(Lt);var Vt,dt}}(It,er,nr.procs.poll,Vn),nr.next),Dr=It.canvas,yr=[],Wr=[],kr=[],Or=[ye.onDestroy],Hr=null;Dr&&(Dr.addEventListener("webglcontextlost",rt,!1),Dr.addEventListener("webglcontextrestored",Ke,!1));var oi=er.setFBO=gt({framebuffer:ee.define.call(null,1,"framebuffer")});return bt(),jt=U(gt,{clear:function(Qn){if("framebuffer"in Qn)if(Qn.framebuffer&&"framebufferCube"===Qn.framebuffer_reglType)for(var Ir=0;6>Ir;++Ir)oi(U({framebuffer:Qn.framebuffer.faces[Ir]},Qn),mt);else oi(Qn,mt);else mt(0,Qn)},prop:ee.define.bind(null,1),context:ee.define.bind(null,2),this:ee.define.bind(null,3),draw:gt({}),buffer:function(Qn){return sn.create(Qn,34962,!1,!1)},elements:function(Qn){return fn.create(Qn,!1)},texture:En.create2D,cube:En.createCube,renderbuffer:jn.create,framebuffer:er.create,framebufferCube:er.createCube,vao:dn.createVAO,attributes:jt,frame:Lt,on:function(Qn,Ir){var Tr;switch(Qn){case"frame":return Lt(Ir);case"lost":Tr=Wr;break;case"restore":Tr=kr;break;case"destroy":Tr=Or}return Tr.push(Ir),{cancel:function(){for(var ar=0;ar<Tr.length;++ar)if(Tr[ar]===Ir){Tr[ar]=Tr[Tr.length-1],Tr.pop();break}}}},limits:Tn,hasExtension:function(Qn){return 0<=Tn.extensions.indexOf(Qn.toLowerCase())},read:et,destroy:function(){yr.length=0,Qe(),Dr&&(Dr.removeEventListener("webglcontextlost",rt),Dr.removeEventListener("webglcontextrestored",Ke)),Mn.clear(),er.clear(),jn.clear(),dn.clear(),En.clear(),fn.clear(),sn.clear(),Xt&&Xt.clear(),Or.forEach(function(Qn){Qn()})},_gl:It,_refresh:bt,poll:function(){dt(),Xt&&Xt.update()},now:Yt,stats:ht,getCachedCode:function(){return xt},preloadCachedCode:function(Qn){Object.entries(Qn).forEach(function(Ir){xt[Ir[0]]=Ir[1]})}}),ye.onDone(null,jt),jt}},"object"==typeof ie&&void 0!==ae?ae.exports=g():this.createREGL=g()},{}],285:[function(v,ae,ie){var p=v("buffer"),g=p.Buffer;function b(e,r){for(var t in e)r[t]=e[t]}function y(e,r,t){return g(e,r,t)}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?ae.exports=p:(b(p,ie),ie.Buffer=y),y.prototype=Object.create(g.prototype),b(g,y),y.from=function(e,r,t){if("number"==typeof e)throw new TypeError("Argument must not be a number");return g(e,r,t)},y.alloc=function(e,r,t){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=g(e);return void 0!==r?"string"==typeof t?o.fill(r,t):o.fill(r):o.fill(0),o},y.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g(e)},y.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return p.SlowBuffer(e)}},{buffer:85}],286:[function(v,ae,ie){ae.exports=g;var p=v("events").EventEmitter;function g(){p.call(this)}v("inherits")(g,p),g.Readable=v("readable-stream/lib/_stream_readable.js"),g.Writable=v("readable-stream/lib/_stream_writable.js"),g.Duplex=v("readable-stream/lib/_stream_duplex.js"),g.Transform=v("readable-stream/lib/_stream_transform.js"),g.PassThrough=v("readable-stream/lib/_stream_passthrough.js"),g.finished=v("readable-stream/lib/internal/streams/end-of-stream.js"),g.pipeline=v("readable-stream/lib/internal/streams/pipeline.js"),g.Stream=g,g.prototype.pipe=function(b,y){var e=this;function r(f){b.writable&&!1===b.write(f)&&e.pause&&e.pause()}function t(){e.readable&&e.resume&&e.resume()}e.on("data",r),b.on("drain",t),b._isStdio||y&&!1===y.end||(e.on("end",n),e.on("close",m));var o=!1;function n(){o||(o=!0,b.end())}function m(){o||(o=!0,"function"==typeof b.destroy&&b.destroy())}function l(f){if(i(),0===p.listenerCount(this,"error"))throw f}function i(){e.removeListener("data",r),b.removeListener("drain",t),e.removeListener("end",n),e.removeListener("close",m),e.removeListener("error",l),b.removeListener("error",l),e.removeListener("end",i),e.removeListener("close",i),b.removeListener("close",i)}return e.on("error",l),b.on("error",l),e.on("end",i),e.on("close",i),b.on("close",i),b.emit("pipe",e),b}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(v,ae,ie){"use strict";var p={};function g(y,e,r){r||(r=Error);var t=function(o){var n,m;function l(i,f,u){return o.call(this,"string"==typeof e?e:e(i,f,u))||this}return m=o,(n=l).prototype=Object.create(m.prototype),n.prototype.constructor=n,n.__proto__=m,l}(r);t.prototype.name=r.name,t.prototype.code=y,p[y]=t}function b(y,e){if(Array.isArray(y)){var r=y.length;return y=y.map(function(t){return String(t)}),r>2?"one of ".concat(e," ").concat(y.slice(0,r-1).join(", "),", or ")+y[r-1]:2===r?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}g("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(y,e,r){var t,m,i,u;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(t="must not be",e=e.replace(/^not /,"")):t="must be",i=y,(void 0===u||u>i.length)&&(u=i.length)," argument"===i.substring(u-" argument".length,u))m="The ".concat(y," ").concat(t," ").concat(b(e,"type"));else{var l=function(i,f,u){return"number"!=typeof u&&(u=0),!(u+".".length>i.length)&&-1!==i.indexOf(".",u)}(y)?"property":"argument";m='The "'.concat(y,'" ').concat(l," ").concat(t," ").concat(b(e,"type"))}return m+". Received type ".concat(typeof r)},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ae.exports.codes=p},{}],288:[function(v,ae,ie){(function(p){(function(){"use strict";var g=Object.keys||function(l){var i=[];for(var f in l)i.push(f);return i};ae.exports=o;var b=v("./_stream_readable"),y=v("./_stream_writable");v("inherits")(o,b);for(var e=g(y.prototype),r=0;r<e.length;r++){var t=e[r];o.prototype[t]||(o.prototype[t]=y.prototype[t])}function o(l){if(!(this instanceof o))return new o(l);b.call(this,l),y.call(this,l),this.allowHalfOpen=!0,l&&(!1===l.readable&&(this.readable=!1),!1===l.writable&&(this.writable=!1),!1===l.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n)))}function n(){this._writableState.ended||p.nextTick(m,this)}function m(l){l.end()}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(l){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}})}).call(this)}).call(this,v("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(v,ae,ie){"use strict";ae.exports=g;var p=v("./_stream_transform");function g(b){if(!(this instanceof g))return new g(b);p.call(this,b)}v("inherits")(g,p),g.prototype._transform=function(b,y,e){e(null,b)}},{"./_stream_transform":291,inherits:231}],290:[function(v,ae,ie){(function(p,g){(function(){"use strict";var b;ae.exports=M,M.ReadableState=w,v("events");var o,y=function(V,j){return V.listeners(j).length},e=v("./internal/streams/stream"),r=v("buffer").Buffer,t=g.Uint8Array||function(){},n=v("util");o=n&&n.debuglog?n.debuglog("stream"):function(){};var m,l,i,f=v("./internal/streams/buffer_list"),u=v("./internal/streams/destroy"),s=v("./internal/streams/state").getHighWaterMark,d=v("../errors").codes,h=d.ERR_INVALID_ARG_TYPE,a=d.ERR_STREAM_PUSH_AFTER_EOF,_=d.ERR_METHOD_NOT_IMPLEMENTED,c=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;v("inherits")(M,e);var T=u.errorOrDestroy,x=["error","close","destroy","pause","resume"];function w(V,j,H){b=b||v("./_stream_duplex"),"boolean"!=typeof H&&(H=j instanceof b),this.objectMode=!!(V=V||{}).objectMode,H&&(this.objectMode=this.objectMode||!!V.readableObjectMode),this.highWaterMark=s(this,V,"readableHighWaterMark",H),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==V.emitClose,this.autoDestroy=!!V.autoDestroy,this.destroyed=!1,this.defaultEncoding=V.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,V.encoding&&(m||(m=v("string_decoder/").StringDecoder),this.decoder=new m(V.encoding),this.encoding=V.encoding)}function M(V){if(b=b||v("./_stream_duplex"),!(this instanceof M))return new M(V);this._readableState=new w(V,this,this instanceof b),this.readable=!0,V&&("function"==typeof V.read&&(this._read=V.read),"function"==typeof V.destroy&&(this._destroy=V.destroy)),e.call(this)}function D(V,j,H,oe,U){o("readableAddChunk",j);var te,le,ce,pe,de,ee=V._readableState;if(null===j)ee.reading=!1,function(le,ce){if(o("onEofChunk"),!ce.ended){if(ce.decoder){var pe=ce.decoder.end();pe&&pe.length&&(ce.buffer.push(pe),ce.length+=ce.objectMode?1:pe.length)}ce.ended=!0,ce.sync?L(le):(ce.needReadable=!1,ce.emittedReadable||(ce.emittedReadable=!0,S(le)))}}(V,ee);else if(U||(le=ee,r.isBuffer(de=ce=j)||de instanceof t||"string"==typeof ce||void 0===ce||le.objectMode||(pe=new h("chunk",["string","Buffer","Uint8Array"],ce)),te=pe),te)T(V,te);else if(ee.objectMode||j&&j.length>0)if("string"==typeof j||ee.objectMode||Object.getPrototypeOf(j)===r.prototype||(j=function(le){return r.from(le)}(j)),oe)ee.endEmitted?T(V,new c):C(V,ee,j,!0);else if(ee.ended)T(V,new a);else{if(ee.destroyed)return!1;ee.reading=!1,ee.decoder&&!H?(j=ee.decoder.write(j),ee.objectMode||0!==j.length?C(V,ee,j,!1):E(V,ee)):C(V,ee,j,!1)}else oe||(ee.reading=!1,E(V,ee));return!ee.ended&&(ee.length<ee.highWaterMark||0===ee.length)}function C(V,j,H,oe){j.flowing&&0===j.length&&!j.sync?(j.awaitDrain=0,V.emit("data",H)):(j.length+=j.objectMode?1:H.length,oe?j.buffer.unshift(H):j.buffer.push(H),j.needReadable&&L(V)),E(V,j)}function P(V,j){return V<=0||0===j.length&&j.ended?0:j.objectMode?1:V!=V?j.flowing&&j.length?j.buffer.head.data.length:j.length:(V>j.highWaterMark&&(j.highWaterMark=((H=V)>=1073741824?H=1073741824:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H)),V<=j.length?V:j.ended?j.length:(j.needReadable=!0,0));var H}function L(V){var j=V._readableState;o("emitReadable",j.needReadable,j.emittedReadable),j.needReadable=!1,j.emittedReadable||(o("emitReadable",j.flowing),j.emittedReadable=!0,p.nextTick(S,V))}function S(V){var j=V._readableState;o("emitReadable_",j.destroyed,j.length,j.ended),j.destroyed||!j.length&&!j.ended||(V.emit("readable"),j.emittedReadable=!1),j.needReadable=!j.flowing&&!j.ended&&j.length<=j.highWaterMark,K(V)}function E(V,j){j.readingMore||(j.readingMore=!0,p.nextTick(N,V,j))}function N(V,j){for(;!j.reading&&!j.ended&&(j.length<j.highWaterMark||j.flowing&&0===j.length);){var H=j.length;if(o("maybeReadMore read 0"),V.read(0),H===j.length)break}j.readingMore=!1}function z(V){var j=V._readableState;j.readableListening=V.listenerCount("readable")>0,j.resumeScheduled&&!j.paused?j.flowing=!0:V.listenerCount("data")>0&&V.resume()}function q(V){o("readable nexttick read 0"),V.read(0)}function G(V,j){o("resume",j.reading),j.reading||V.read(0),j.resumeScheduled=!1,V.emit("resume"),K(V),j.flowing&&!j.reading&&V.read(0)}function K(V){var j=V._readableState;for(o("flow",j.flowing);j.flowing&&null!==V.read(););}function ne(V,j){return 0===j.length?null:(j.objectMode?H=j.buffer.shift():!V||V>=j.length?(H=j.decoder?j.buffer.join(""):1===j.buffer.length?j.buffer.first():j.buffer.concat(j.length),j.buffer.clear()):H=j.buffer.consume(V,j.decoder),H);var H}function X(V){var j=V._readableState;o("endReadable",j.endEmitted),j.endEmitted||(j.ended=!0,p.nextTick(J,j,V))}function J(V,j){if(o("endReadableNT",V.endEmitted,V.length),!V.endEmitted&&0===V.length&&(V.endEmitted=!0,j.readable=!1,j.emit("end"),V.autoDestroy)){var H=j._writableState;(!H||H.autoDestroy&&H.finished)&&j.destroy()}}function se(V,j){for(var H=0,oe=V.length;H<oe;H++)if(V[H]===j)return H;return-1}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(V){this._readableState&&(this._readableState.destroyed=V)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(V,j){j(V)},M.prototype.push=function(V,j){var H,oe=this._readableState;return oe.objectMode?H=!0:"string"==typeof V&&((j=j||oe.defaultEncoding)!==oe.encoding&&(V=r.from(V,j),j=""),H=!0),D(this,V,j,!1,H)},M.prototype.unshift=function(V){return D(this,V,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(V){m||(m=v("string_decoder/").StringDecoder);var j=new m(V);this._readableState.decoder=j,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,oe="";null!==H;)oe+=j.write(H.data),H=H.next;return this._readableState.buffer.clear(),""!==oe&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this},M.prototype.read=function(V){o("read",V),V=parseInt(V,10);var j=this._readableState,H=V;if(0!==V&&(j.emittedReadable=!1),0===V&&j.needReadable&&((0!==j.highWaterMark?j.length>=j.highWaterMark:j.length>0)||j.ended))return o("read: emitReadable",j.length,j.ended),0===j.length&&j.ended?X(this):L(this),null;if(0===(V=P(V,j))&&j.ended)return 0===j.length&&X(this),null;var oe,U=j.needReadable;return o("need readable",U),(0===j.length||j.length-V<j.highWaterMark)&&o("length less than watermark",U=!0),j.ended||j.reading?o("reading or ended",U=!1):U&&(o("do read"),j.reading=!0,j.sync=!0,0===j.length&&(j.needReadable=!0),this._read(j.highWaterMark),j.sync=!1,j.reading||(V=P(H,j))),null===(oe=V>0?ne(V,j):null)?(j.needReadable=j.length<=j.highWaterMark,V=0):(j.length-=V,j.awaitDrain=0),0===j.length&&(j.ended||(j.needReadable=!0),H!==V&&j.ended&&X(this)),null!==oe&&this.emit("data",oe),oe},M.prototype._read=function(V){T(this,new _("_read()"))},M.prototype.pipe=function(V,j){var H=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=V;break;case 1:oe.pipes=[oe.pipes,V];break;default:oe.pipes.push(V)}oe.pipesCount+=1,o("pipe count=%d opts=%j",oe.pipesCount,j);var U=j&&!1===j.end||V===p.stdout||V===p.stderr?xe:ee;function ee(){o("onend"),V.end()}oe.endEmitted?p.nextTick(U):H.once("end",U),V.on("unpipe",function te(De,Se){o("onunpipe"),De===H&&Se&&!1===Se.hasUnpiped&&(Se.hasUnpiped=!0,o("cleanup"),V.removeListener("close",be),V.removeListener("finish",he),V.removeListener("drain",le),V.removeListener("error",de),V.removeListener("unpipe",te),H.removeListener("end",ee),H.removeListener("end",xe),H.removeListener("data",pe),ce=!0,!oe.awaitDrain||V._writableState&&!V._writableState.needDrain||le())});var De,le=(De=H,function(){var Se=De._readableState;o("pipeOnDrain",Se.awaitDrain),Se.awaitDrain&&Se.awaitDrain--,0===Se.awaitDrain&&y(De,"data")&&(Se.flowing=!0,K(De))});V.on("drain",le);var ce=!1;function pe(De){o("ondata");var Se=V.write(De);o("dest.write",Se),!1===Se&&((1===oe.pipesCount&&oe.pipes===V||oe.pipesCount>1&&-1!==se(oe.pipes,V))&&!ce&&(o("false write response, pause",oe.awaitDrain),oe.awaitDrain++),H.pause())}function de(De){o("onerror",De),xe(),V.removeListener("error",de),0===y(V,"error")&&T(V,De)}function be(){V.removeListener("finish",he),xe()}function he(){o("onfinish"),V.removeListener("close",be),xe()}function xe(){o("unpipe"),H.unpipe(V)}return H.on("data",pe),function(De,Se,ke){if("function"==typeof De.prependListener)return De.prependListener(Se,ke);De._events&&De._events[Se]?Array.isArray(De._events[Se])?De._events[Se].unshift(ke):De._events[Se]=[ke,De._events[Se]]:De.on(Se,ke)}(V,"error",de),V.once("close",be),V.once("finish",he),V.emit("pipe",H),oe.flowing||(o("pipe resume"),H.resume()),V},M.prototype.unpipe=function(V){var j=this._readableState,H={hasUnpiped:!1};if(0===j.pipesCount)return this;if(1===j.pipesCount)return V&&V!==j.pipes||(V||(V=j.pipes),j.pipes=null,j.pipesCount=0,j.flowing=!1,V&&V.emit("unpipe",this,H)),this;if(!V){var oe=j.pipes,U=j.pipesCount;j.pipes=null,j.pipesCount=0,j.flowing=!1;for(var te=0;te<U;te++)oe[te].emit("unpipe",this,{hasUnpiped:!1});return this}var ee=se(j.pipes,V);return-1===ee||(j.pipes.splice(ee,1),j.pipesCount-=1,1===j.pipesCount&&(j.pipes=j.pipes[0]),V.emit("unpipe",this,H)),this},M.prototype.addListener=M.prototype.on=function(V,j){var H=e.prototype.on.call(this,V,j),oe=this._readableState;return"data"===V?(oe.readableListening=this.listenerCount("readable")>0,!1!==oe.flowing&&this.resume()):"readable"===V&&(oe.endEmitted||oe.readableListening||(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,o("on readable",oe.length,oe.reading),oe.length?L(this):oe.reading||p.nextTick(q,this))),H},M.prototype.removeListener=function(V,j){var H=e.prototype.removeListener.call(this,V,j);return"readable"===V&&p.nextTick(z,this),H},M.prototype.removeAllListeners=function(V){var j=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==V&&void 0!==V||p.nextTick(z,this),j},M.prototype.resume=function(){var H,V=this._readableState;return V.flowing||(o("resume"),V.flowing=!V.readableListening,this,(H=V).resumeScheduled||(H.resumeScheduled=!0,p.nextTick(G,this,H))),V.paused=!1,this},M.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(V){var j=this,H=this._readableState,oe=!1;for(var U in V.on("end",function(){if(o("wrapped end"),H.decoder&&!H.ended){var ee=H.decoder.end();ee&&ee.length&&j.push(ee)}j.push(null)}),V.on("data",function(ee){o("wrapped data"),H.decoder&&(ee=H.decoder.write(ee)),H.objectMode&&null==ee||(H.objectMode||ee&&ee.length)&&(j.push(ee)||(oe=!0,V.pause()))}),V)void 0===this[U]&&"function"==typeof V[U]&&(this[U]=function(ee){return function(){return V[ee].apply(V,arguments)}}(U));for(var te=0;te<x.length;te++)V.on(x[te],this.emit.bind(this,x[te]));return this._read=function(ee){o("wrapped _read",ee),oe&&(oe=!1,V.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=v("./internal/streams/async_iterator")),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(V){this._readableState&&(this._readableState.flowing=V)}}),M._fromList=ne,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(V,j){return void 0===i&&(i=v("./internal/streams/from")),i(M,V,j)})}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(v,ae,ie){"use strict";ae.exports=o;var p=v("../errors").codes,g=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=p.ERR_TRANSFORM_WITH_LENGTH_0,r=v("./_stream_duplex");function t(l,i){var f=this._transformState;f.transforming=!1;var u=f.writecb;if(null===u)return this.emit("error",new b);f.writechunk=null,f.writecb=null,null!=i&&this.push(i),u(l);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function o(l){if(!(this instanceof o))return new o(l);r.call(this,l),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&("function"==typeof l.transform&&(this._transform=l.transform),"function"==typeof l.flush&&(this._flush=l.flush)),this.on("prefinish",n)}function n(){var l=this;"function"!=typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(i,f){m(l,i,f)})}function m(l,i,f){if(i)return l.emit("error",i);if(null!=f&&l.push(f),l._writableState.length)throw new e;if(l._transformState.transforming)throw new y;return l.push(null)}v("inherits")(o,r),o.prototype.push=function(l,i){return this._transformState.needTransform=!1,r.prototype.push.call(this,l,i)},o.prototype._transform=function(l,i,f){f(new g("_transform()"))},o.prototype._write=function(l,i,f){var u=this._transformState;if(u.writecb=f,u.writechunk=l,u.writeencoding=i,!u.transforming){var s=this._readableState;(u.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},o.prototype._read=function(l){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},o.prototype._destroy=function(l,i){r.prototype._destroy.call(this,l,function(f){i(f)})}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(v,ae,ie){(function(p,g){(function(){"use strict";function b(N){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(q,G,K){var ne=q.entry;for(q.entry=null;ne;){var X=ne.callback;G.pendingcb--,X(undefined),ne=ne.next}G.corkedRequestsFree.next=q}(z,N)}}var y;ae.exports=M,M.WritableState=w;var n,e={deprecate:v("util-deprecate")},r=v("./internal/streams/stream"),t=v("buffer").Buffer,o=g.Uint8Array||function(){},m=v("./internal/streams/destroy"),l=v("./internal/streams/state").getHighWaterMark,i=v("../errors").codes,f=i.ERR_INVALID_ARG_TYPE,u=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,d=i.ERR_STREAM_CANNOT_PIPE,h=i.ERR_STREAM_DESTROYED,a=i.ERR_STREAM_NULL_VALUES,_=i.ERR_STREAM_WRITE_AFTER_END,c=i.ERR_UNKNOWN_ENCODING,T=m.errorOrDestroy;function x(){}function w(N,z,q){y=y||v("./_stream_duplex"),"boolean"!=typeof q&&(q=z instanceof y),this.objectMode=!!(N=N||{}).objectMode,q&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=l(this,N,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===N.decodeStrings),this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(K){!function(ne,X){var H,J=ne._writableState,se=J.sync,V=J.writecb;if("function"!=typeof V)throw new s;if((H=J).writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0,X)!function(H,oe,U,te,ee){--oe.pendingcb,U?(p.nextTick(ee,te),p.nextTick(E,H,oe),H._writableState.errorEmitted=!0,T(H,te)):(ee(te),H._writableState.errorEmitted=!0,T(H,te),E(H,oe))}(ne,J,se,X,V);else{var j=L(J)||ne.destroyed;j||J.corked||J.bufferProcessing||!J.bufferedRequest||P(ne,J),se?p.nextTick(C,ne,J,j,V):C(ne,J,j,V)}}(z,K)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==N.emitClose,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function M(N){var z=this instanceof(y=y||v("./_stream_duplex"));if(!z&&!n.call(M,this))return new M(N);this._writableState=new w(N,this,z),this.writable=!0,N&&("function"==typeof N.write&&(this._write=N.write),"function"==typeof N.writev&&(this._writev=N.writev),"function"==typeof N.destroy&&(this._destroy=N.destroy),"function"==typeof N.final&&(this._final=N.final)),r.call(this)}function D(N,z,q,G,K,ne,X){z.writelen=G,z.writecb=X,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new h("write")):q?N._writev(K,z.onwrite):N._write(K,ne,z.onwrite),z.sync=!1}function C(N,z,q,G){var K,ne;q||(K=N,0===(ne=z).length&&ne.needDrain&&(ne.needDrain=!1,K.emit("drain"))),z.pendingcb--,G(),E(N,z)}function P(N,z){z.bufferProcessing=!0;var q=z.bufferedRequest;if(N._writev&&q&&q.next){var K=new Array(z.bufferedRequestCount),ne=z.corkedRequestsFree;ne.entry=q;for(var X=0,J=!0;q;)K[X]=q,q.isBuf||(J=!1),q=q.next,X+=1;K.allBuffers=J,D(N,z,!0,z.length,K,"",ne.finish),z.pendingcb++,z.lastBufferedRequest=null,ne.next?(z.corkedRequestsFree=ne.next,ne.next=null):z.corkedRequestsFree=new b(z),z.bufferedRequestCount=0}else{for(;q;){var se=q.chunk;if(D(N,z,!1,z.objectMode?1:se.length,se,q.encoding,q.callback),q=q.next,z.bufferedRequestCount--,z.writing)break}null===q&&(z.lastBufferedRequest=null)}z.bufferedRequest=q,z.bufferProcessing=!1}function L(N){return N.ending&&0===N.length&&null===N.bufferedRequest&&!N.finished&&!N.writing}function S(N,z){N._final(function(q){z.pendingcb--,q&&T(N,q),z.prefinished=!0,N.emit("prefinish"),E(N,z)})}function E(N,z){var K,ne,q=L(z);if(q&&(K=N,(ne=z).prefinished||ne.finalCalled||("function"!=typeof K._final||ne.destroyed?(ne.prefinished=!0,K.emit("prefinish")):(ne.pendingcb++,ne.finalCalled=!0,p.nextTick(S,K,ne))),0===z.pendingcb&&(z.finished=!0,N.emit("finish"),z.autoDestroy))){var G=N._readableState;(!G||G.autoDestroy&&G.endEmitted)&&N.destroy()}return q}v("inherits")(M,r),w.prototype.getBuffer=function(){for(var N=this.bufferedRequest,z=[];N;)z.push(N),N=N.next;return z},function(){try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(N){return!!n.call(this,N)||this===M&&N&&N._writableState instanceof w}})):n=function(N){return N instanceof this},M.prototype.pipe=function(){T(this,new d)},M.prototype.write=function(N,z,q){var G,J,se,V,K=this._writableState,ne=!1,X=!K.objectMode&&(t.isBuffer(G=N)||G instanceof o);return X&&!t.isBuffer(N)&&(N=t.from(N)),"function"==typeof z&&(q=z,z=null),X?z="buffer":z||(z=K.defaultEncoding),"function"!=typeof q&&(q=x),K.ending?(J=this,se=q,V=new _,T(J,V),p.nextTick(se,V)):(X||function(J,se,V,j){var H;return null===V?H=new a:"string"==typeof V||se.objectMode||(H=new f("chunk",["string","Buffer"],V)),!H||(T(J,H),p.nextTick(j,H),!1)}(this,K,N,q))&&(K.pendingcb++,ne=function(J,se,V,j,H,oe){if(!V){var U=(pe=j,(ce=se).objectMode||!1===ce.decodeStrings||"string"!=typeof pe||(pe=t.from(pe,H)),pe);j!==U&&(V=!0,H="buffer",j=U)}var ce,pe,te=se.objectMode?1:j.length;se.length+=te;var ee=se.length<se.highWaterMark;if(ee||(se.needDrain=!0),se.writing||se.corked){var le=se.lastBufferedRequest;se.lastBufferedRequest={chunk:j,encoding:H,isBuf:V,callback:oe,next:null},le?le.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else D(J,se,!1,te,j,H,oe);return ee}(this,K,X,N,z,q)),ne},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,N.writing||N.corked||N.bufferProcessing||!N.bufferedRequest||P(this,N))},M.prototype.setDefaultEncoding=function(N){if("string"==typeof N&&(N=N.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())>-1))throw new c(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(N,z,q){q(new u("_write()"))},M.prototype._writev=null,M.prototype.end=function(N,z,q){var K,ne,X,G=this._writableState;return"function"==typeof N?(q=N,N=null,z=null):"function"==typeof z&&(q=z,z=null),null!=N&&this.write(N,z),G.corked&&(G.corked=1,this.uncork()),G.ending||(K=this,X=q,(ne=G).ending=!0,E(K,ne),X&&(ne.finished?p.nextTick(X):K.once("finish",X)),ne.ended=!0,K.writable=!1),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),M.prototype.destroy=m.destroy,M.prototype._undestroy=m.undestroy,M.prototype._destroy=function(N,z){z(N)}}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(v,ae,ie){(function(p){(function(){"use strict";var g;function b(h,a,_){return a in h?Object.defineProperty(h,a,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[a]=_,h}var y=v("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),t=Symbol("error"),o=Symbol("ended"),n=Symbol("lastPromise"),m=Symbol("handlePromise"),l=Symbol("stream");function i(h,a){return{value:h,done:a}}function f(h){var a=h[e];if(null!==a){var _=h[l].read();null!==_&&(h[n]=null,h[e]=null,h[r]=null,a(i(_,!1)))}}function u(h){p.nextTick(f,h)}var s=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((b(g={get stream(){return this[l]},next:function(){var h=this,a=this[t];if(null!==a)return Promise.reject(a);if(this[o])return Promise.resolve(i(void 0,!0));if(this[l].destroyed)return new Promise(function(x,w){p.nextTick(function(){h[t]?w(h[t]):x(i(void 0,!0))})});var _,x,w,c=this[n];if(c)_=new Promise((x=c,w=this,function(M,D){x.then(function(){w[o]?M(i(void 0,!0)):w[m](M,D)},D)}));else{var T=this[l].read();if(null!==T)return Promise.resolve(i(T,!1));_=new Promise(this[m])}return this[n]=_,_}},Symbol.asyncIterator,function(){return this}),b(g,"return",function(){var h=this;return new Promise(function(a,_){h[l].destroy(null,function(c){c?_(c):a(i(void 0,!0))})})}),g),s);ae.exports=function(h){var a,_=Object.create(d,(b(a={},l,{value:h,writable:!0}),b(a,e,{value:null,writable:!0}),b(a,r,{value:null,writable:!0}),b(a,t,{value:null,writable:!0}),b(a,o,{value:h._readableState.endEmitted,writable:!0}),b(a,m,{value:function(c,T){var x=_[l].read();x?(_[n]=null,_[e]=null,_[r]=null,c(i(x,!1))):(_[e]=c,_[r]=T)},writable:!0}),a));return _[n]=null,y(h,function(c){if(c&&"ERR_STREAM_PREMATURE_CLOSE"!==c.code){var T=_[r];return null!==T&&(_[n]=null,_[e]=null,_[r]=null,T(c)),void(_[t]=c)}var x=_[e];null!==x&&(_[n]=null,_[e]=null,_[r]=null,x(i(void 0,!0))),_[o]=!0}),h.on("readable",u.bind(null,_)),_}}).call(this)}).call(this,v("_process"))},{"./end-of-stream":296,_process:278}],294:[function(v,ae,ie){"use strict";function p(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);o&&(m=m.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),n.push.apply(n,m)}return n}function g(t,o,n){return o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function b(t,o){for(var n=0;n<o.length;n++){var m=o[n];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(t,m.key,m)}}var y=v("buffer").Buffer,e=v("util").inspect,r=e&&e.custom||"inspect";ae.exports=function(){function t(){(function(l,i){if(!(l instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}var o,n;return o=t,(n=[{key:"push",value:function(l){var i={data:l,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(l){var i={data:l,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var l=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(0===this.length)return"";for(var i=this.head,f=""+i.data;i=i.next;)f+=l+i.data;return f}},{key:"concat",value:function(l){if(0===this.length)return y.alloc(0);for(var s=y.allocUnsafe(l>>>0),d=this.head,h=0;d;)y.prototype.copy.call(d.data,s,h),h+=d.data.length,d=d.next;return s}},{key:"consume",value:function(l,i){var f;return l<this.head.data.length?(f=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):f=l===this.head.data.length?this.shift():i?this._getString(l):this._getBuffer(l),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var i=this.head,f=1,u=i.data;for(l-=u.length;i=i.next;){var s=i.data,d=l>s.length?s.length:l;if(u+=d===s.length?s:s.slice(0,l),0==(l-=d)){d===s.length?(++f,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=s.slice(d));break}++f}return this.length-=f,u}},{key:"_getBuffer",value:function(l){var i=y.allocUnsafe(l),f=this.head,u=1;for(f.data.copy(i),l-=f.data.length;f=f.next;){var s=f.data,d=l>s.length?s.length:l;if(s.copy(i,i.length-l,0,d),0==(l-=d)){d===s.length?(++u,this.head=f.next?f.next:this.tail=null):(this.head=f,f.data=s.slice(d));break}++u}return this.length-=u,i}},{key:r,value:function(l,i){return e(this,function(f){for(var u=1;u<arguments.length;u++){var s=null!=arguments[u]?arguments[u]:{};u%2?p(Object(s),!0).forEach(function(d){g(f,d,s[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach(function(d){Object.defineProperty(f,d,Object.getOwnPropertyDescriptor(s,d))})}return f}({},i,{depth:0,customInspect:!1}))}}])&&b(o.prototype,n),t}()},{buffer:85,util:83}],295:[function(v,ae,ie){(function(p){(function(){"use strict";function g(e,r){y(e,r),b(e)}function b(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,r){e.emit("error",r)}ae.exports={destroy:function(e,r){var t=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.nextTick(y,this,e)):p.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(m){!r&&m?t._writableState?t._writableState.errorEmitted?p.nextTick(b,t):(t._writableState.errorEmitted=!0,p.nextTick(g,t,m)):p.nextTick(g,t,m):r?(p.nextTick(b,t),r(m)):p.nextTick(b,t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var t=e._readableState,o=e._writableState;t&&t.autoDestroy||o&&o.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,v("_process"))},{_process:278}],296:[function(v,ae,ie){"use strict";var p=v("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function g(){}ae.exports=function b(y,e,r){if("function"==typeof e)return b(y,null,e);var h,a;e||(e={}),h=r||g,a=!1,r=function(){if(!a){a=!0;for(var _=arguments.length,c=new Array(_),T=0;T<_;T++)c[T]=arguments[T];h.apply(this,c)}};var t=e.readable||!1!==e.readable&&y.readable,o=e.writable||!1!==e.writable&&y.writable,n=function(){y.writable||l()},m=y._writableState&&y._writableState.finished,l=function(){o=!1,m=!0,t||r.call(y)},i=y._readableState&&y._readableState.endEmitted,f=function(){t=!1,i=!0,o||r.call(y)},u=function(h){r.call(y,h)},s=function(){var h;return t&&!i?(y._readableState&&y._readableState.ended||(h=new p),r.call(y,h)):o&&!m?(y._writableState&&y._writableState.ended||(h=new p),r.call(y,h)):void 0},d=function(){y.req.on("finish",l)};return function(h){return h.setHeader&&"function"==typeof h.abort}(y)?(y.on("complete",l),y.on("abort",s),y.req?d():y.on("request",d)):o&&!y._writableState&&(y.on("end",n),y.on("close",n)),y.on("end",f),y.on("finish",l),!1!==e.error&&y.on("error",u),y.on("close",s),function(){y.removeListener("complete",l),y.removeListener("abort",s),y.removeListener("request",d),y.req&&y.req.removeListener("finish",l),y.removeListener("end",n),y.removeListener("close",n),y.removeListener("finish",l),y.removeListener("end",f),y.removeListener("error",u),y.removeListener("close",s)}}},{"../../../errors":287}],297:[function(v,ae,ie){ae.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(v,ae,ie){"use strict";var p,g=v("../../../errors").codes,b=g.ERR_MISSING_ARGS,y=g.ERR_STREAM_DESTROYED;function e(m){if(m)throw m}function r(m,l,i,f){var d,h;d=f,h=!1,f=function(){h||(h=!0,d.apply(void 0,arguments))};var u=!1;m.on("close",function(){u=!0}),void 0===p&&(p=v("./end-of-stream")),p(m,{readable:l,writable:i},function(d){if(d)return f(d);u=!0,f()});var s=!1;return function(d){if(!u&&!s)return s=!0,function(h){return h.setHeader&&"function"==typeof h.abort}(m)?m.abort():"function"==typeof m.destroy?m.destroy():void f(d||new y("pipe"))}}function t(m){m()}function o(m,l){return m.pipe(l)}function n(m){return m.length?"function"!=typeof m[m.length-1]?e:m.pop():e}ae.exports=function(){for(var m=arguments.length,l=new Array(m),i=0;i<m;i++)l[i]=arguments[i];var f,u=n(l);if(Array.isArray(l[0])&&(l=l[0]),l.length<2)throw new b("streams");var s=l.map(function(d,h){var a=h<l.length-1;return r(d,a,h>0,function(_){f||(f=_),_&&s.forEach(t),a||(s.forEach(t),u(f))})});return l.reduce(o)}},{"../../../errors":287,"./end-of-stream":296}],299:[function(v,ae,ie){"use strict";var p=v("../../../errors").codes.ERR_INVALID_OPT_VALUE;ae.exports={getHighWaterMark:function(g,b,y,e){var t,r=null!=(t=b).highWaterMark?t.highWaterMark:e?t[y]:null;if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new p(e?y:"highWaterMark",r);return Math.floor(r)}return g.objectMode?16:16384}}},{"../../../errors":287}],300:[function(v,ae,ie){ae.exports=v("events").EventEmitter},{events:84}],301:[function(v,ae,ie){"use strict";var p=v("safe-buffer").Buffer,g=p.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(i){var f;switch(this.encoding=function(u){var s=function(d){if(!d)return"utf8";for(var h;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(h)return;d=(""+d).toLowerCase(),h=!0}}(u);if("string"!=typeof s&&(p.isEncoding===g||!g(u)))throw new Error("Unknown encoding: "+u);return s||u}(i),this.encoding){case"utf16le":this.text=r,this.end=t,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=o,this.end=n,f=3;break;default:return this.write=m,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(f)}function y(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var f=this.lastTotal-this.lastNeed,u=function(s,d,h){if(128!=(192&d[0]))return s.lastNeed=0,"\ufffd";if(s.lastNeed>1&&d.length>1){if(128!=(192&d[1]))return s.lastNeed=1,"\ufffd";if(s.lastNeed>2&&d.length>2&&128!=(192&d[2]))return s.lastNeed=2,"\ufffd"}}(this,i);return void 0!==u?u:this.lastNeed<=i.length?(i.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,f,0,i.length),void(this.lastNeed-=i.length))}function r(i,f){if((i.length-f)%2==0){var u=i.toString("utf16le",f);if(u){var s=u.charCodeAt(u.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",f,i.length-1)}function t(i){var f=i&&i.length?this.write(i):"";return this.lastNeed?f+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):f}function o(i,f){var u=(i.length-f)%3;return 0===u?i.toString("base64",f):(this.lastNeed=3-u,this.lastTotal=3,1===u?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",f,i.length-u))}function n(i){var f=i&&i.length?this.write(i):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function m(i){return i.toString(this.encoding)}function l(i){return i&&i.length?this.write(i):""}ie.StringDecoder=b,b.prototype.write=function(i){if(0===i.length)return"";var f,u;if(this.lastNeed){if(void 0===(f=this.fillLast(i)))return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<i.length?f?f+this.text(i,u):this.text(i,u):f||""},b.prototype.end=function(i){var f=i&&i.length?this.write(i):"";return this.lastNeed?f+"\ufffd":f},b.prototype.text=function(i,f){var u=function(d,h,a){var _=h.length-1;if(_<a)return 0;var c=y(h[_]);return c>=0?(c>0&&(d.lastNeed=c-1),c):--_<a||-2===c?0:(c=y(h[_]))>=0?(c>0&&(d.lastNeed=c-2),c):--_<a||-2===c?0:(c=y(h[_]))>=0?(c>0&&(2===c?c=0:d.lastNeed=c-3),c):0}(this,i,f);if(!this.lastNeed)return i.toString("utf8",f);this.lastTotal=u;var s=i.length-(u-this.lastNeed);return i.copy(this.lastChar,0,s),i.toString("utf8",f,s)},b.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":285}],302:[function(v,ae,ie){(function(p,g){(function(){var b=v("assert"),y=v("debug")("stream-parser");function e(u){y("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=-1,u._parserCallback=null,"function"==typeof u.push&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function r(u,s){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||e(this),y("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=s,this._parserState=0}function t(u,s){b(!this._parserCallback,'there is already a "callback" set!'),b(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||e(this),y("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=s,this._parserState=1}function o(u,s){b(!this._parserCallback,'There is already a "callback" set!'),b(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||e(this),y("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=s,this._parserState=2}function n(u,s,d){this._parserInit||e(this),y("write(%o bytes)",u.length),"function"==typeof s&&(d=s),i(this,u,null,d)}function m(u,s,d){this._parserInit||e(this),y("transform(%o bytes)",u.length),"function"!=typeof s&&(s=this._parserOutput),i(this,u,s,d)}function l(u,s,d,h){if(u._parserBytesLeft-=s.length,y("%o bytes left for stream piece",u._parserBytesLeft),0===u._parserState?(u._parserBuffers.push(s),u._parserBuffered+=s.length):2===u._parserState&&d(s),0!==u._parserBytesLeft)return h;var a=u._parserCallback;if(a&&0===u._parserState&&u._parserBuffers.length>1&&(s=g.concat(u._parserBuffers,u._parserBuffered)),0!==u._parserState&&(s=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=-1,u._parserBuffers.splice(0),a){var _=[];s&&_.push(s),d&&_.push(d);var c=a.length>_.length;c&&_.push(f(h));var T=a.apply(u,_);if(!c||h===T)return h}}ae.exports=function(u){var s=u&&"function"==typeof u._transform;if(!(s||u&&"function"==typeof u._write))throw new Error("must pass a Writable or Transform stream in");y("extending Parser into stream"),u._bytes=r,u._skipBytes=t,s&&(u._passthrough=o),s?u._transform=m:u._write=n};var i=f(function u(s,d,h,a){return s._parserBytesLeft<=0?a(new Error("got data but not currently parsing anything")):d.length<=s._parserBytesLeft?function(){return l(s,d,h,a)}:function(){var _=d.slice(0,s._parserBytesLeft);return l(s,_,h,function(c){return c?a(c):d.length>_.length?function(){return u(s,d.slice(_.length),h,a)}:void 0})}});function f(u){return function(){for(var s=u.apply(this,arguments);"function"==typeof s;)s=s();return s}}}).call(this)}).call(this,v("_process"),v("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(v,ae,ie){(function(p){(function(){function g(){var b;try{b=ie.storage.debug}catch{}return!b&&void 0!==p&&"env"in p&&(b=p.env.DEBUG),b}(ie=ae.exports=v("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ie.formatArgs=function(b){var y=this.useColors;if(b[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+b[0]+(y?"%c ":" ")+"+"+ie.humanize(this.diff),y){var e="color: "+this.color;b.splice(1,0,e,"color: inherit");var r=0,t=0;b[0].replace(/%[a-zA-Z%]/g,function(o){"%%"!==o&&(r++,"%c"===o&&(t=r))}),b.splice(t,0,e)}},ie.save=function(b){try{null==b?ie.storage.removeItem("debug"):ie.storage.debug=b}catch{}},ie.load=g,ie.useColors=function(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ie.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),ie.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ie.formatters.j=function(b){try{return JSON.stringify(b)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},ie.enable(g())}).call(this)}).call(this,v("_process"))},{"./debug":304,_process:278}],304:[function(v,ae,ie){var p;function g(b){function y(){if(y.enabled){var e=y,r=+new Date;e.diff=r-(p||r),e.prev=p,e.curr=r,p=r;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=ie.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var m=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(i,f){if("%%"===i)return i;m++;var u=ie.formatters[f];return"function"==typeof u&&(i=u.call(e,o[m]),o.splice(m,1),m--),i}),ie.formatArgs.call(e,o),(y.log||ie.log||console.log.bind(console)).apply(e,o)}}return y.namespace=b,y.enabled=ie.enabled(b),y.useColors=ie.useColors(),y.color=function(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return ie.colors[Math.abs(t)%ie.colors.length]}(b),"function"==typeof ie.init&&ie.init(y),y}(ie=ae.exports=g.debug=g.default=g).coerce=function(b){return b instanceof Error?b.stack||b.message:b},ie.disable=function(){ie.enable("")},ie.enable=function(b){ie.save(b),ie.names=[],ie.skips=[];for(var y=("string"==typeof b?b:"").split(/[\s,]+/),e=y.length,r=0;r<e;r++)y[r]&&("-"===(b=y[r].replace(/\*/g,".*?"))[0]?ie.skips.push(new RegExp("^"+b.substr(1)+"$")):ie.names.push(new RegExp("^"+b+"$")))},ie.enabled=function(b){var y,e;for(y=0,e=ie.skips.length;y<e;y++)if(ie.skips[y].test(b))return!1;for(y=0,e=ie.names.length;y<e;y++)if(ie.names[y].test(b))return!0;return!1},ie.humanize=v("ms"),ie.names=[],ie.skips=[],ie.formatters={}},{ms:305}],305:[function(v,ae,ie){var p=1e3,g=6e4,b=60*g,y=24*b;function e(r,t,o){if(!(r<t))return r<1.5*t?Math.floor(r/t)+" "+o:Math.ceil(r/t)+" "+o+"s"}ae.exports=function(r,t){t=t||{};var o,m,n=typeof r;if("string"===n&&r.length>0)return function(m){if(!((m=String(m)).length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(m);if(l){var i=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*y;case"hours":case"hour":case"hrs":case"hr":case"h":return i*b;case"minutes":case"minute":case"mins":case"min":case"m":return i*g;case"seconds":case"second":case"secs":case"sec":case"s":return i*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(r);if("number"===n&&!1===isNaN(r))return t.long?e(o=r,y,"day")||e(o,b,"hour")||e(o,g,"minute")||e(o,p,"second")||o+" ms":(m=r)>=y?Math.round(m/y)+"d":m>=b?Math.round(m/b)+"h":m>=g?Math.round(m/g)+"m":m>=p?Math.round(m/p)+"s":m+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],306:[function(v,ae,ie){"use strict";var p=v("parenthesis");ae.exports=function(g,b,y){if(null==g)throw Error("First argument should be a string");if(null==b)throw Error("Separator should be a string or a RegExp");y?("string"==typeof y||Array.isArray(y))&&(y={ignore:y}):y={},null==y.escape&&(y.escape=!0),null==y.ignore?y.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof y.ignore&&(y.ignore=[y.ignore]),y.ignore=y.ignore.map(function(l){return 1===l.length&&(l+=l),l}));var e=p.parse(g,{flat:!0,brackets:y.ignore}),r=e[0].split(b);if(y.escape){for(var t=[],o=0;o<r.length;o++){var n=r[o];"\\"===n[n.length-1]&&"\\"!==n[n.length-2]?(t.push(n+b+r[o+1]),o++):t.push(n)}r=t}for(o=0;o<r.length;o++)e[0]=r[o],r[o]=p.stringify(e,{flat:!0});return r}},{parenthesis:248}],307:[function(v,ae,ie){"use strict";ae.exports=function(p){for(var g=p.length,b=new Array(g),y=new Array(g),e=new Array(g),r=new Array(g),t=new Array(g),o=new Array(g),n=0;n<g;++n)b[n]=-1,y[n]=0,e[n]=!1,r[n]=0,t[n]=-1,o[n]=[];var m,l=0,i=[],f=[];function u(h){var a=[h],_=[h];for(b[h]=y[h]=l,e[h]=!0,l+=1;_.length>0;){var c=p[h=_[_.length-1]];if(r[h]<c.length){for(var T=r[h];T<c.length;++T){var x=c[T];if(b[x]<0){b[x]=y[x]=l,e[x]=!0,l+=1,a.push(x),_.push(x);break}e[x]&&(y[h]=0|Math.min(y[h],y[x])),t[x]>=0&&o[h].push(t[x])}r[h]=T}else{if(y[h]===b[h]){var w=[],M=[],D=0;for(T=a.length-1;T>=0;--T){var C=a[T];if(e[C]=!1,w.push(C),M.push(o[C]),D+=o[C].length,t[C]=i.length,C===h){a.length=T;break}}i.push(w);var P=new Array(D);for(T=0;T<M.length;T++)for(var L=0;L<M[T].length;L++)P[--D]=M[T][L];f.push(P)}_.pop()}}}for(n=0;n<g;++n)b[n]<0&&u(n);for(n=0;n<f.length;n++){var s=f[n];if(0!==s.length){s.sort(function(h,a){return h-a}),m=[s[0]];for(var d=1;d<s.length;d++)s[d]!==s[d-1]&&m.push(s[d]);f[n]=m}}return{components:i,adjacencyList:f}}},{}],308:[function(v,ae,ie){"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var g=2*Math.PI,b=function(r,t,o,n,m,l,i){var f=r.x,u=r.y;return{x:n*(f*=t)-m*(u*=o)+l,y:m*f+n*u+i}},y=function(r,t){var o=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),n=Math.cos(r),m=Math.sin(r),l=Math.cos(r+t),i=Math.sin(r+t);return[{x:n-m*o,y:m+n*o},{x:l+i*o,y:i-l*o},{x:l,y:i}]},e=function(r,t,o,n){var m=r*o+t*n;return m>1&&(m=1),m<-1&&(m=-1),(r*n-t*o<0?-1:1)*Math.acos(m)};ie.default=function(r){var t=r.px,o=r.py,n=r.cx,m=r.cy,l=r.rx,i=r.ry,f=r.xAxisRotation,u=void 0===f?0:f,s=r.largeArcFlag,d=void 0===s?0:s,h=r.sweepFlag,a=void 0===h?0:h,_=[];if(0===l||0===i)return[];var c=Math.sin(u*g/360),T=Math.cos(u*g/360),x=T*(t-n)/2+c*(o-m)/2,w=-c*(t-n)/2+T*(o-m)/2;if(0===x&&0===w)return[];l=Math.abs(l),i=Math.abs(i);var M=Math.pow(x,2)/Math.pow(l,2)+Math.pow(w,2)/Math.pow(i,2);M>1&&(l*=Math.sqrt(M),i*=Math.sqrt(M));var C=function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(o,n){var m=[],l=!0,i=!1,f=void 0;try{for(var u,s=o[Symbol.iterator]();!(l=(u=s.next()).done)&&(m.push(u.value),!n||m.length!==n);l=!0);}catch(d){i=!0,f=d}finally{try{!l&&s.return&&s.return()}finally{if(i)throw f}}return m}(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(G,K,ne,X,J,se,V,j,H,oe,U,te){var ee=Math.pow(J,2),le=Math.pow(se,2),ce=Math.pow(U,2),pe=Math.pow(te,2),de=ee*le-ee*pe-le*ce;de<0&&(de=0),de/=ee*pe+le*ce;var be=(de=Math.sqrt(de)*(V===j?-1:1))*J/se*te,he=de*-se/J*U,xe=oe*be-H*he+(G+ne)/2,De=H*be+oe*he+(K+X)/2,Se=(U-be)/J,ke=(te-he)/se,Fe=(-U-be)/J,ve=(-te-he)/se,Te=e(1,0,Se,ke),Le=e(Se,ke,Fe,ve);return 0===j&&Le>0&&(Le-=g),1===j&&Le<0&&(Le+=g),[xe,De,Te,Le]}(t,o,n,m,l,i,d,a,c,T,x,w),4),P=C[0],L=C[1],S=C[2],E=C[3],N=Math.abs(E)/(g/4);Math.abs(1-N)<1e-7&&(N=1);var z=Math.max(Math.ceil(N),1);E/=z;for(var q=0;q<z;q++)_.push(y(S,E)),S+=E;return _.map(function(G){var K=b(G[0],l,i,T,c,P,L),ne=K.x,X=K.y,J=b(G[1],l,i,T,c,P,L),se=J.x,V=J.y,j=b(G[2],l,i,T,c,P,L);return{x1:ne,y1:X,x2:se,y2:V,x:j.x,y:j.y}})},ae.exports=ie.default},{}],309:[function(v,ae,ie){"use strict";var p=v("parse-svg-path"),g=v("abs-svg-path"),b=v("normalize-svg-path"),y=v("is-svg-path"),e=v("assert");ae.exports=function(r){if(Array.isArray(r)&&1===r.length&&"string"==typeof r[0]&&(r=r[0]),"string"==typeof r&&(e(y(r),"String is not an SVG path."),r=p(r)),e(Array.isArray(r),"Argument should be a string or an array of path segments."),r=g(r),!(r=b(r)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],o=0,n=r.length;o<n;o++)for(var m=r[o].slice(1),l=0;l<m.length;l+=2)m[l+0]<t[0]&&(t[0]=m[l+0]),m[l+1]<t[1]&&(t[1]=m[l+1]),m[l+0]>t[2]&&(t[2]=m[l+0]),m[l+1]>t[3]&&(t[3]=m[l+1]);return t}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(v,ae,ie){"use strict";ae.exports=function(y){for(var e,r=[],t=0,o=0,n=0,m=0,l=null,i=null,f=0,u=0,s=0,d=y.length;s<d;s++){var h=y[s],a=h[0];switch(a){case"M":n=h[1],m=h[2];break;case"A":var _=p({px:f,py:u,cx:h[6],cy:h[7],rx:h[1],ry:h[2],xAxisRotation:h[3],largeArcFlag:h[4],sweepFlag:h[5]});if(!_.length)continue;for(var c,T=0;T<_.length;T++)h=["C",(c=_[T]).x1,c.y1,c.x2,c.y2,c.x,c.y],T<_.length-1&&r.push(h);break;case"S":var x=f,w=u;"C"!=e&&"S"!=e||(x+=x-t,w+=w-o),h=["C",x,w,h[1],h[2],h[3],h[4]];break;case"T":"Q"==e||"T"==e?(l=2*f-l,i=2*u-i):(l=f,i=u),h=b(f,u,l,i,h[1],h[2]);break;case"Q":l=h[1],i=h[2],h=b(f,u,h[1],h[2],h[3],h[4]);break;case"L":h=g(f,u,h[1],h[2]);break;case"H":h=g(f,u,h[1],u);break;case"V":h=g(f,u,f,h[1]);break;case"Z":h=g(f,u,n,m)}e=a,f=h[h.length-2],u=h[h.length-1],h.length>4?(t=h[h.length-4],o=h[h.length-3]):(t=f,o=u),r.push(h)}return r};var p=v("svg-arc-to-cubic-bezier");function g(y,e,r,t){return["C",y,e,r,t,r,t]}function b(y,e,r,t,o,n){return["C",y/3+2/3*r,e/3+2/3*t,o/3+2/3*r,n/3+2/3*t,o,n]}},{"svg-arc-to-cubic-bezier":308}],311:[function(v,ae,ie){"use strict";var p,g=v("svg-path-bounds"),b=v("parse-svg-path"),y=v("draw-svg-path"),e=v("is-svg-path"),r=v("bitmap-sdf"),t=document.createElement("canvas"),o=t.getContext("2d");ae.exports=function(n,m){if(!e(n))throw Error("Argument should be valid svg path string");var l,i;m||(m={}),m.shape?(l=m.shape[0],i=m.shape[1]):(l=t.width=m.w||m.width||200,i=t.height=m.h||m.height||200);var f=Math.min(l,i),u=m.stroke||0,s=m.viewbox||m.viewBox||g(n),d=[l/(s[2]-s[0]),i/(s[3]-s[1])],h=Math.min(d[0]||0,d[1]||0)/2;if(o.fillStyle="black",o.fillRect(0,0,l,i),o.fillStyle="white",u&&("number"!=typeof u&&(u=1),o.strokeStyle=u>0?"white":"black",o.lineWidth=Math.abs(u)),o.translate(.5*l,.5*i),o.scale(h,h),function(){if(null!=p)return p;var c=document.createElement("canvas").getContext("2d");if(c.canvas.width=c.canvas.height=1,!window.Path2D)return p=!1;var T=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black",c.fill(T);var x=c.getImageData(0,0,1,1);return p=x&&x.data&&255===x.data[3]}()){var a=new Path2D(n);o.fill(a),u&&o.stroke(a)}else{var _=b(n);y(o,_),o.fill(),u&&o.stroke()}return o.setTransform(1,0,0,1,0,0),r(o,{cutoff:null!=m.cutoff?m.cutoff:.5,radius:null!=m.radius?m.radius:.5*f})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(v,ae,ie){(function(p,g){(function(){var b=v("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,r={},t=0;function o(n,m){this._id=n,this._clearFn=m}ie.setTimeout=function(){return new o(y.call(setTimeout,window,arguments),clearTimeout)},ie.setInterval=function(){return new o(y.call(setInterval,window,arguments),clearInterval)},ie.clearTimeout=ie.clearInterval=function(n){n.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},ie.enroll=function(n,m){clearTimeout(n._idleTimeoutId),n._idleTimeout=m},ie.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},ie._unrefActive=ie.active=function(n){clearTimeout(n._idleTimeoutId);var m=n._idleTimeout;m>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},m))},ie.setImmediate="function"==typeof p?p:function(n){var m=t++,l=!(arguments.length<2)&&e.call(arguments,1);return r[m]=!0,b(function(){r[m]&&(l?n.apply(null,l):n.call(null),ie.clearImmediate(m))}),m},ie.clearImmediate="function"==typeof g?g:function(n){delete r[n]}}).call(this)}).call(this,v("timers").setImmediate,v("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(v,ae,ie){!function(p){var g=/^\s+/,b=/\s+$/,y=0,e=p.round,r=p.min,t=p.max,o=p.random;function n(H,oe){if(oe=oe||{},(H=H||"")instanceof n)return H;if(!(this instanceof n))return new n(H,oe);var te,De,Se,ee,le,ce,pe,de,be,he,U=(ee={r:0,g:0,b:0},le=1,ce=null,pe=null,de=null,be=!1,he=!1,"string"==typeof(te=H)&&(te=function(ke){ke=ke.replace(g,"").replace(b,"").toLowerCase();var Fe,ve=!1;if(P[ke])ke=P[ke],ve=!0;else if("transparent"==ke)return{r:0,g:0,b:0,a:0,format:"name"};return(Fe=V.rgb.exec(ke))?{r:Fe[1],g:Fe[2],b:Fe[3]}:(Fe=V.rgba.exec(ke))?{r:Fe[1],g:Fe[2],b:Fe[3],a:Fe[4]}:(Fe=V.hsl.exec(ke))?{h:Fe[1],s:Fe[2],l:Fe[3]}:(Fe=V.hsla.exec(ke))?{h:Fe[1],s:Fe[2],l:Fe[3],a:Fe[4]}:(Fe=V.hsv.exec(ke))?{h:Fe[1],s:Fe[2],v:Fe[3]}:(Fe=V.hsva.exec(ke))?{h:Fe[1],s:Fe[2],v:Fe[3],a:Fe[4]}:(Fe=V.hex8.exec(ke))?{r:z(Fe[1]),g:z(Fe[2]),b:z(Fe[3]),a:ne(Fe[4]),format:ve?"name":"hex8"}:(Fe=V.hex6.exec(ke))?{r:z(Fe[1]),g:z(Fe[2]),b:z(Fe[3]),format:ve?"name":"hex"}:(Fe=V.hex4.exec(ke))?{r:z(Fe[1]+""+Fe[1]),g:z(Fe[2]+""+Fe[2]),b:z(Fe[3]+""+Fe[3]),a:ne(Fe[4]+""+Fe[4]),format:ve?"name":"hex8"}:!!(Fe=V.hex3.exec(ke))&&{r:z(Fe[1]+""+Fe[1]),g:z(Fe[2]+""+Fe[2]),b:z(Fe[3]+""+Fe[3]),format:ve?"name":"hex"}}(te)),"object"==typeof te&&(j(te.r)&&j(te.g)&&j(te.b)?(De=te.g,Se=te.b,ee={r:255*E(te.r,255),g:255*E(De,255),b:255*E(Se,255)},be=!0,he="%"===String(te.r).substr(-1)?"prgb":"rgb"):j(te.h)&&j(te.s)&&j(te.v)?(ce=G(te.s),pe=G(te.v),ee=function(ke,Fe,ve){ke=6*E(ke,360),Fe=E(Fe,100),ve=E(ve,100);var Te=p.floor(ke),Le=ke-Te,Oe=ve*(1-Fe),Ne=ve*(1-Le*Fe),Be=ve*(1-(1-Le)*Fe),He=Te%6;return{r:255*[ve,Ne,Oe,Oe,Be,ve][He],g:255*[Be,ve,ve,Ne,Oe,Oe][He],b:255*[Oe,Oe,Be,ve,ve,Ne][He]}}(te.h,ce,pe),be=!0,he="hsv"):j(te.h)&&j(te.s)&&j(te.l)&&(ce=G(te.s),de=G(te.l),ee=function(ke,Fe,ve){var Te,Le,Oe;function Ne(Ve,it,ze){return ze<0&&(ze+=1),ze>1&&(ze-=1),ze<1/6?Ve+6*(it-Ve)*ze:ze<.5?it:ze<2/3?Ve+(it-Ve)*(2/3-ze)*6:Ve}if(ke=E(ke,360),Fe=E(Fe,100),ve=E(ve,100),0===Fe)Te=Le=Oe=ve;else{var Be=ve<.5?ve*(1+Fe):ve+Fe-ve*Fe,He=2*ve-Be;Te=Ne(He,Be,ke+1/3),Le=Ne(He,Be,ke),Oe=Ne(He,Be,ke-1/3)}return{r:255*Te,g:255*Le,b:255*Oe}}(te.h,ce,de),be=!0,he="hsl"),te.hasOwnProperty("a")&&(le=te.a)),le=S(le),{ok:be,format:te.format||he,r:r(255,t(ee.r,0)),g:r(255,t(ee.g,0)),b:r(255,t(ee.b,0)),a:le});this._originalInput=H,this._r=U.r,this._g=U.g,this._b=U.b,this._a=U.a,this._roundA=e(100*this._a)/100,this._format=oe.format||U.format,this._gradientType=oe.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=U.ok,this._tc_id=y++}function m(H,oe,U){H=E(H,255),oe=E(oe,255),U=E(U,255);var te,ee,le=t(H,oe,U),ce=r(H,oe,U),pe=(le+ce)/2;if(le==ce)te=ee=0;else{var de=le-ce;switch(ee=pe>.5?de/(2-le-ce):de/(le+ce),le){case H:te=(oe-U)/de+(oe<U?6:0);break;case oe:te=(U-H)/de+2;break;case U:te=(H-oe)/de+4}te/=6}return{h:te,s:ee,l:pe}}function l(H,oe,U){H=E(H,255),oe=E(oe,255),U=E(U,255);var te,ee,le=t(H,oe,U),ce=r(H,oe,U),pe=le,de=le-ce;if(ee=0===le?0:de/le,le==ce)te=0;else{switch(le){case H:te=(oe-U)/de+(oe<U?6:0);break;case oe:te=(U-H)/de+2;break;case U:te=(H-oe)/de+4}te/=6}return{h:te,s:ee,v:pe}}function i(H,oe,U,te){var ee=[q(e(H).toString(16)),q(e(oe).toString(16)),q(e(U).toString(16))];return te&&ee[0].charAt(0)==ee[0].charAt(1)&&ee[1].charAt(0)==ee[1].charAt(1)&&ee[2].charAt(0)==ee[2].charAt(1)?ee[0].charAt(0)+ee[1].charAt(0)+ee[2].charAt(0):ee.join("")}function f(H,oe,U,te){return[q(K(te)),q(e(H).toString(16)),q(e(oe).toString(16)),q(e(U).toString(16))].join("")}function u(H,oe){oe=0===oe?0:oe||10;var U=n(H).toHsl();return U.s-=oe/100,U.s=N(U.s),n(U)}function s(H,oe){oe=0===oe?0:oe||10;var U=n(H).toHsl();return U.s+=oe/100,U.s=N(U.s),n(U)}function d(H){return n(H).desaturate(100)}function h(H,oe){oe=0===oe?0:oe||10;var U=n(H).toHsl();return U.l+=oe/100,U.l=N(U.l),n(U)}function a(H,oe){oe=0===oe?0:oe||10;var U=n(H).toRgb();return U.r=t(0,r(255,U.r-e(-oe/100*255))),U.g=t(0,r(255,U.g-e(-oe/100*255))),U.b=t(0,r(255,U.b-e(-oe/100*255))),n(U)}function _(H,oe){oe=0===oe?0:oe||10;var U=n(H).toHsl();return U.l-=oe/100,U.l=N(U.l),n(U)}function c(H,oe){var U=n(H).toHsl(),te=(U.h+oe)%360;return U.h=te<0?360+te:te,n(U)}function T(H){var oe=n(H).toHsl();return oe.h=(oe.h+180)%360,n(oe)}function x(H){var oe=n(H).toHsl(),U=oe.h;return[n(H),n({h:(U+120)%360,s:oe.s,l:oe.l}),n({h:(U+240)%360,s:oe.s,l:oe.l})]}function w(H){var oe=n(H).toHsl(),U=oe.h;return[n(H),n({h:(U+90)%360,s:oe.s,l:oe.l}),n({h:(U+180)%360,s:oe.s,l:oe.l}),n({h:(U+270)%360,s:oe.s,l:oe.l})]}function M(H){var oe=n(H).toHsl(),U=oe.h;return[n(H),n({h:(U+72)%360,s:oe.s,l:oe.l}),n({h:(U+216)%360,s:oe.s,l:oe.l})]}function D(H,oe,U){oe=oe||6,U=U||30;var te=n(H).toHsl(),ee=360/U,le=[n(H)];for(te.h=(te.h-(ee*oe>>1)+720)%360;--oe;)te.h=(te.h+ee)%360,le.push(n(te));return le}function C(H,oe){oe=oe||6;for(var U=n(H).toHsv(),te=U.h,ee=U.s,le=U.v,ce=[],pe=1/oe;oe--;)ce.push(n({h:te,s:ee,v:le})),le=(le+pe)%1;return ce}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var H=this.toRgb();return(299*H.r+587*H.g+114*H.b)/1e3},getLuminance:function(){var H,oe,U,te=this.toRgb();return oe=te.g/255,U=te.b/255,.2126*((H=te.r/255)<=.03928?H/12.92:p.pow((H+.055)/1.055,2.4))+.7152*(oe<=.03928?oe/12.92:p.pow((oe+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:p.pow((U+.055)/1.055,2.4))},setAlpha:function(H){return this._a=S(H),this._roundA=e(100*this._a)/100,this},toHsv:function(){var H=l(this._r,this._g,this._b);return{h:360*H.h,s:H.s,v:H.v,a:this._a}},toHsvString:function(){var H=l(this._r,this._g,this._b),oe=e(360*H.h),U=e(100*H.s),te=e(100*H.v);return 1==this._a?"hsv("+oe+", "+U+"%, "+te+"%)":"hsva("+oe+", "+U+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var H=m(this._r,this._g,this._b);return{h:360*H.h,s:H.s,l:H.l,a:this._a}},toHslString:function(){var H=m(this._r,this._g,this._b),oe=e(360*H.h),U=e(100*H.s),te=e(100*H.l);return 1==this._a?"hsl("+oe+", "+U+"%, "+te+"%)":"hsla("+oe+", "+U+"%, "+te+"%, "+this._roundA+")"},toHex:function(H){return i(this._r,this._g,this._b,H)},toHexString:function(H){return"#"+this.toHex(H)},toHex8:function(H){return U=this._g,te=this._b,ee=this._a,le=H,ce=[q(e(this._r).toString(16)),q(e(U).toString(16)),q(e(te).toString(16)),q(K(ee))],le&&ce[0].charAt(0)==ce[0].charAt(1)&&ce[1].charAt(0)==ce[1].charAt(1)&&ce[2].charAt(0)==ce[2].charAt(1)&&ce[3].charAt(0)==ce[3].charAt(1)?ce[0].charAt(0)+ce[1].charAt(0)+ce[2].charAt(0)+ce[3].charAt(0):ce.join("");var U,te,ee,le,ce},toHex8String:function(H){return"#"+this.toHex8(H)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*E(this._r,255))+"%",g:e(100*E(this._g,255))+"%",b:e(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%)":"rgba("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(H){var oe="#"+f(this._r,this._g,this._b,this._a),U=oe,te=this._gradientType?"GradientType = 1, ":"";if(H){var ee=n(H);U="#"+f(ee._r,ee._g,ee._b,ee._a)}return"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+oe+",endColorstr="+U+")"},toString:function(H){var oe=!!H;H=H||this._format;var U=!1;return oe||!(this._a<1&&this._a>=0)||"hex"!==H&&"hex6"!==H&&"hex3"!==H&&"hex4"!==H&&"hex8"!==H&&"name"!==H?("rgb"===H&&(U=this.toRgbString()),"prgb"===H&&(U=this.toPercentageRgbString()),"hex"!==H&&"hex6"!==H||(U=this.toHexString()),"hex3"===H&&(U=this.toHexString(!0)),"hex4"===H&&(U=this.toHex8String(!0)),"hex8"===H&&(U=this.toHex8String()),"name"===H&&(U=this.toName()),"hsl"===H&&(U=this.toHslString()),"hsv"===H&&(U=this.toHsvString()),U||this.toHexString()):"name"===H&&0===this._a?this.toName():this.toRgbString()},clone:function(){return n(this.toString())},_applyModification:function(H,oe){var U=H.apply(null,[this].concat([].slice.call(oe)));return this._r=U._r,this._g=U._g,this._b=U._b,this.setAlpha(U._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(a,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(s,arguments)},greyscale:function(){return this._applyModification(d,arguments)},spin:function(){return this._applyModification(c,arguments)},_applyCombination:function(H,oe){return H.apply(null,[this].concat([].slice.call(oe)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},n.fromRatio=function(H,oe){if("object"==typeof H){var U={};for(var te in H)H.hasOwnProperty(te)&&(U[te]="a"===te?H[te]:G(H[te]));H=U}return n(H,oe)},n.equals=function(H,oe){return!(!H||!oe)&&n(H).toRgbString()==n(oe).toRgbString()},n.random=function(){return n.fromRatio({r:o(),g:o(),b:o()})},n.mix=function(H,oe,U){U=0===U?0:U||50;var te=n(H).toRgb(),ee=n(oe).toRgb(),le=U/100;return n({r:(ee.r-te.r)*le+te.r,g:(ee.g-te.g)*le+te.g,b:(ee.b-te.b)*le+te.b,a:(ee.a-te.a)*le+te.a})},n.readability=function(H,oe){var U=n(H),te=n(oe);return(p.max(U.getLuminance(),te.getLuminance())+.05)/(p.min(U.getLuminance(),te.getLuminance())+.05)},n.isReadable=function(H,oe,U){var te,ee,ce,pe,de,le=n.readability(H,oe);switch(ee=!1,(ce=U,"AA"!==(pe=((ce=ce||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==pe&&(pe="AA"),"small"!==(de=(ce.size||"small").toLowerCase())&&"large"!==de&&(de="small"),te={level:pe,size:de}).level+te.size){case"AAsmall":case"AAAlarge":ee=le>=4.5;break;case"AAlarge":ee=le>=3;break;case"AAAsmall":ee=le>=7}return ee},n.mostReadable=function(H,oe,U){var te,ee,le,ce,pe=null,de=0;ee=(U=U||{}).includeFallbackColors,le=U.level,ce=U.size;for(var be=0;be<oe.length;be++)(te=n.readability(H,oe[be]))>de&&(de=te,pe=n(oe[be]));return n.isReadable(H,pe,{level:le,size:ce})||!ee?pe:(U.includeFallbackColors=!1,n.mostReadable(H,["#fff","#000"],U))};var P=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=n.hexNames=function(H){var oe={};for(var U in H)H.hasOwnProperty(U)&&(oe[H[U]]=U);return oe}(P);function S(H){return H=parseFloat(H),(isNaN(H)||H<0||H>1)&&(H=1),H}function E(H,oe){var te;"string"==typeof(te=H)&&-1!=te.indexOf(".")&&1===parseFloat(te)&&(H="100%");var U=function(te){return"string"==typeof te&&-1!=te.indexOf("%")}(H);return H=r(oe,t(0,parseFloat(H))),U&&(H=parseInt(H*oe,10)/100),p.abs(H-oe)<1e-6?1:H%oe/parseFloat(oe)}function N(H){return r(1,t(0,H))}function z(H){return parseInt(H,16)}function q(H){return 1==H.length?"0"+H:""+H}function G(H){return H<=1&&(H=100*H+"%"),H}function K(H){return p.round(255*parseFloat(H)).toString(16)}function ne(H){return z(H)/255}var X,J,se,V=(J="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",se="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+J),rgba:new RegExp("rgba"+se),hsl:new RegExp("hsl"+J),hsla:new RegExp("hsla"+se),hsv:new RegExp("hsv"+J),hsva:new RegExp("hsva"+se),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(H){return!!V.CSS_UNIT.exec(H)}void 0!==ae&&ae.exports?ae.exports=n:window.tinycolor=n}(Math)},{}],314:[function(v,ae,ie){"use strict";ae.exports=g,ae.exports.float32=ae.exports.float=g,ae.exports.fract32=ae.exports.fract=function(b,y){if(b.length){if(b instanceof Float32Array)return new Float32Array(b.length);y instanceof Float32Array||(y=g(b));for(var e=0,r=y.length;e<r;e++)y[e]=b[e]-y[e];return y}return g(b-g(b))};var p=new Float32Array(1);function g(b){return b.length?b instanceof Float32Array?b:new Float32Array(b):(p[0]=b,p[0])}},{}],315:[function(v,ae,ie){"use strict";var p=v("parse-unit");function g(y,e){var r=p(getComputedStyle(y).getPropertyValue(e));return r[0]*b(r[1],y)}function b(y,e){switch(e=e||document.body,y=(y||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),y){case"%":return e.clientHeight/100;case"ch":case"ex":return function(r,t){var o=document.createElement("div");o.style["font-size"]="128"+r,t.appendChild(o);var n=g(o,"font-size")/128;return t.removeChild(o),n}(y,e);case"em":return g(e,"font-size");case"rem":return g(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}ae.exports=b},{"parse-unit":251}],316:[function(v,ae,ie){var p,g;p=this,g=function(p){"use strict";function g(f){return f}function b(f){if(null==f)return g;var u,s,d=f.scale[0],h=f.scale[1],a=f.translate[0],_=f.translate[1];return function(c,T){T||(u=s=0);var x=2,w=c.length,M=new Array(w);for(M[0]=(u+=c[0])*d+a,M[1]=(s+=c[1])*h+_;x<w;)M[x]=c[x],++x;return M}}function y(f){var u,s=b(f.transform),d=1/0,h=d,a=-d,_=-d;function c(x){(x=s(x))[0]<d&&(d=x[0]),x[0]>a&&(a=x[0]),x[1]<h&&(h=x[1]),x[1]>_&&(_=x[1])}function T(x){switch(x.type){case"GeometryCollection":x.geometries.forEach(T);break;case"Point":c(x.coordinates);break;case"MultiPoint":x.coordinates.forEach(c)}}for(u in f.arcs.forEach(function(x){for(var w,M=-1,D=x.length;++M<D;)(w=s(x[M],M))[0]<d&&(d=w[0]),w[0]>a&&(a=w[0]),w[1]<h&&(h=w[1]),w[1]>_&&(_=w[1])}),f.objects)T(f.objects[u]);return[d,h,a,_]}function e(f,u){var s=u.id,d=u.bbox,h=u.properties??{},a=r(f,u);return null==s&&null==d?{type:"Feature",properties:h,geometry:a}:null==d?{type:"Feature",id:s,properties:h,geometry:a}:{type:"Feature",id:s,bbox:d,properties:h,geometry:a}}function r(f,u){var s=b(f.transform),d=f.arcs;function h(x,w){w.length&&w.pop();for(var M=d[x<0?~x:x],D=0,C=M.length;D<C;++D)w.push(s(M[D],D));x<0&&function(P,L){for(var S,E=P.length,N=E-L;N<--E;)S=P[N],P[N++]=P[E],P[E]=S}(w,C)}function a(x){return s(x)}function _(x){for(var w=[],M=0,D=x.length;M<D;++M)h(x[M],w);return w.length<2&&w.push(w[0]),w}function c(x){for(var w=_(x);w.length<4;)w.push(w[0]);return w}function T(x){return x.map(c)}return function x(w){var M,D=w.type;switch(D){case"GeometryCollection":return{type:D,geometries:w.geometries.map(x)};case"Point":M=a(w.coordinates);break;case"MultiPoint":M=w.coordinates.map(a);break;case"LineString":M=_(w.arcs);break;case"MultiLineString":M=w.arcs.map(_);break;case"Polygon":M=T(w.arcs);break;case"MultiPolygon":M=w.arcs.map(T);break;default:return null}return{type:D,coordinates:M}}(u)}function t(f,u){var s={},d={},h={},a=[],_=-1;function c(T,x){for(var w in T){var M=T[w];delete x[M.start],delete M.start,delete M.end,M.forEach(function(D){s[D<0?~D:D]=1}),a.push(M)}}return u.forEach(function(T,x){var w,M=f.arcs[T<0?~T:T];M.length<3&&!M[1][0]&&!M[1][1]&&(w=u[++_],u[_]=T,u[x]=w)}),u.forEach(function(T){var x,w,S,E,N,z,M=(z=(N=f.arcs[(S=T)<0?~S:S])[0],f.transform?(E=[0,0],N.forEach(function(q){E[0]+=q[0],E[1]+=q[1]})):E=N[N.length-1],S<0?[E,z]:[z,E]),D=M[0],C=M[1];if(x=h[D])if(delete h[x.end],x.push(T),x.end=C,w=d[C]){delete d[w.start];var P=w===x?x:x.concat(w);d[P.start=x.start]=h[P.end=w.end]=P}else d[x.start]=h[x.end]=x;else if(x=d[C])if(delete d[x.start],x.unshift(T),x.start=D,w=h[D]){delete h[w.end];var L=w===x?x:w.concat(x);d[L.start=w.start]=h[L.end=x.end]=L}else d[x.start]=h[x.end]=x;else d[(x=[T]).start=D]=h[x.end=C]=x}),c(h,d),c(d,h),u.forEach(function(T){s[T<0?~T:T]||a.push([T])}),a}function o(f,u,s){var d,h,a;if(arguments.length>1)d=n(0,u,s);else for(h=0,d=new Array(a=f.arcs.length);h<a;++h)d[h]=h;return{type:"MultiLineString",arcs:t(f,d)}}function n(f,u,s){var d,h=[],a=[];function _(x){var w=x<0?~x:x;(a[w]||(a[w]=[])).push({i:x,g:d})}function c(x){x.forEach(_)}function T(x){x.forEach(c)}return function x(w){switch(d=w,w.type){case"GeometryCollection":w.geometries.forEach(x);break;case"LineString":c(w.arcs);break;case"MultiLineString":case"Polygon":T(w.arcs);break;case"MultiPolygon":w.arcs.forEach(T)}}(u),a.forEach(null==s?function(x){h.push(x[0].i)}:function(x){s(x[0].g,x[x.length-1].g)&&h.push(x[0].i)}),h}function m(f,u){var s={},d=[],h=[];function a(c){c.forEach(function(T){T.forEach(function(x){(s[x=x<0?~x:x]||(s[x]=[])).push(c)})}),d.push(c)}function _(c){return function(T){for(var x,w=-1,M=T.length,D=T[M-1],C=0;++w<M;)C+=(x=D)[0]*(D=T[w])[1]-x[1]*D[0];return Math.abs(C)}(r(f,{type:"Polygon",arcs:[c]}).coordinates[0])}return u.forEach(function c(T){switch(T.type){case"GeometryCollection":T.geometries.forEach(c);break;case"Polygon":a(T.arcs);break;case"MultiPolygon":T.arcs.forEach(a)}}),d.forEach(function(c){if(!c._){var T=[],x=[c];for(c._=1,h.push(T);c=x.pop();)T.push(c),c.forEach(function(w){w.forEach(function(M){s[M<0?~M:M].forEach(function(D){D._||(D._=1,x.push(D))})})})}}),d.forEach(function(c){delete c._}),{type:"MultiPolygon",arcs:h.map(function(c){var T,x=[];if(c.forEach(function(P){P.forEach(function(L){L.forEach(function(S){s[S<0?~S:S].length<2&&x.push(S)})})}),(T=(x=t(f,x)).length)>1)for(var w,M,D=1,C=_(x[0]);D<T;++D)(w=_(x[D]))>C&&(M=x[0],x[0]=x[D],x[D]=M,C=w);return x}).filter(function(c){return c.length>0})}}function l(f,u){for(var s=0,d=f.length;s<d;){var h=s+d>>>1;f[h]<u?s=h+1:d=h}return s}function i(f){if(null==f)return g;var u,s,d=f.scale[0],h=f.scale[1],a=f.translate[0],_=f.translate[1];return function(c,T){T||(u=s=0);var x=2,w=c.length,M=new Array(w),D=Math.round((c[0]-a)/d),C=Math.round((c[1]-_)/h);for(M[0]=D-u,u=D,M[1]=C-s,s=C;x<w;)M[x]=c[x],++x;return M}}p.bbox=y,p.feature=function(f,u){return"string"==typeof u&&(u=f.objects[u]),"GeometryCollection"===u.type?{type:"FeatureCollection",features:u.geometries.map(function(s){return e(f,s)})}:e(f,u)},p.merge=function(f){return r(f,m.apply(this,arguments))},p.mergeArcs=m,p.mesh=function(f){return r(f,o.apply(this,arguments))},p.meshArcs=o,p.neighbors=function(f){var u={},s=f.map(function(){return[]});function d(P,L){P.forEach(function(S){S<0&&(S=~S);var E=u[S];E?E.push(L):u[S]=[L]})}function h(P,L){P.forEach(function(S){d(S,L)})}var a={LineString:d,MultiLineString:h,Polygon:h,MultiPolygon:function(P,L){P.forEach(function(S){h(S,L)})}};for(var _ in f.forEach(function P(L,S){"GeometryCollection"===L.type?L.geometries.forEach(function(E){P(E,S)}):L.type in a&&a[L.type](L.arcs,S)}),u)for(var c=u[_],T=c.length,x=0;x<T;++x)for(var w=x+1;w<T;++w){var M,D=c[x],C=c[w];(M=s[D])[_=l(M,C)]!==C&&M.splice(_,0,C),(M=s[C])[_=l(M,D)]!==D&&M.splice(_,0,D)}return s},p.quantize=function(f,u){if(f.transform)throw new Error("already quantized");if(u&&u.scale)c=f.bbox;else{if(!((s=Math.floor(u))>=2))throw new Error("n must be \u22652");var s,d=(c=f.bbox||y(f))[0],h=c[1],a=c[2],_=c[3];u={scale:[a-d?(a-d)/(s-1):1,_-h?(_-h)/(s-1):1],translate:[d,h]}}var c,T,x=i(u),w=f.objects,M={};function D(P){return x(P)}function C(P){var L;switch(P.type){case"GeometryCollection":L={type:"GeometryCollection",geometries:P.geometries.map(C)};break;case"Point":L={type:"Point",coordinates:D(P.coordinates)};break;case"MultiPoint":L={type:"MultiPoint",coordinates:P.coordinates.map(D)};break;default:return P}return null!=P.id&&(L.id=P.id),null!=P.bbox&&(L.bbox=P.bbox),null!=P.properties&&(L.properties=P.properties),L}for(T in w)M[T]=C(w[T]);return{type:"Topology",bbox:c,transform:u,objects:M,arcs:f.arcs.map(function(P){var L,S=0,E=1,N=P.length,z=new Array(N);for(z[0]=x(P[0],0);++S<N;)((L=x(P[S],S))[0]||L[1])&&(z[E++]=L);return 1===E&&(z[E++]=[0,0]),z.length=E,z})}},p.transform=b,p.untransform=i,Object.defineProperty(p,"__esModule",{value:!0})},g("object"==typeof ie&&void 0!==ae?ie:(p=p||self).topojson=p.topojson||{})},{}],317:[function(v,ae,ie){"use strict";var p=v("../prototype/is");ae.exports=function(g){if("function"!=typeof g||!hasOwnProperty.call(g,"length"))return!1;try{if("number"!=typeof g.length||"function"!=typeof g.call||"function"!=typeof g.apply)return!1}catch{return!1}return!p(g)}},{"../prototype/is":324}],318:[function(v,ae,ie){"use strict";var p=v("../value/is"),g=v("../object/is"),b=v("../string/coerce"),y=v("./to-short-string"),e=function(r,t){return r.replace("%v",y(t))};ae.exports=function(r,t,o){if(!g(o))throw new TypeError(e(t,r));if(!p(r)){if("default"in o)return o.default;if(o.isOptional)return null}var n=b(o.errorMessage);throw p(n)||(n=t),new TypeError(e(n,r))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(v,ae,ie){"use strict";ae.exports=function(p){try{return p.toString()}catch{try{return String(p)}catch{return null}}}},{}],320:[function(v,ae,ie){"use strict";var p=v("./safe-to-string"),g=/[\n\r\u2028\u2029]/g;ae.exports=function(b){var y=p(b);return null===y?"<Non-coercible to string value>":(y.length>100&&(y=y.slice(0,99)+"\u2026"),y=y.replace(g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":319}],321:[function(v,ae,ie){"use strict";var p=v("../value/is"),g={object:!0,function:!0,undefined:!0};ae.exports=function(b){return!!p(b)&&hasOwnProperty.call(g,typeof b)}},{"../value/is":327}],322:[function(v,ae,ie){"use strict";var p=v("../lib/resolve-exception"),g=v("./is");ae.exports=function(b){return g(b)?b:p(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(v,ae,ie){"use strict";var p=v("../function/is"),g=/^\s*class[\s{/}]/,b=Function.prototype.toString;ae.exports=function(y){return!!p(y)&&!g.test(b.call(y))}},{"../function/is":317}],324:[function(v,ae,ie){"use strict";var p=v("../object/is");ae.exports=function(g){if(!p(g))return!1;try{return!!g.constructor&&g.constructor.prototype===g}catch{return!1}}},{"../object/is":321}],325:[function(v,ae,ie){"use strict";var p=v("../value/is"),g=v("../object/is"),b=Object.prototype.toString;ae.exports=function(y){if(!p(y))return null;if(g(y)){var e=y.toString;if("function"!=typeof e||e===b)return null}try{return""+y}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(v,ae,ie){"use strict";var p=v("../lib/resolve-exception"),g=v("./is");ae.exports=function(b){return g(b)?b:p(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(v,ae,ie){"use strict";ae.exports=function(p){return null!=p}},{}],328:[function(v,ae,ie){(function(p){(function(){"use strict";var g=v("bit-twiddle"),b=v("dup"),y=v("buffer").Buffer;p.__TYPEDARRAY_POOL||(p.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var e=typeof Uint8ClampedArray<"u",r=typeof BigUint64Array<"u",t=typeof BigInt64Array<"u",o=p.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=b([32,0])),o.BIGUINT64||(o.BIGUINT64=b([32,0])),o.BIGINT64||(o.BIGINT64=b([32,0])),o.BUFFER||(o.BUFFER=b([32,0]));var n=o.DATA,m=o.BUFFER;function l(C){if(C){var L=g.log2(C.length||C.byteLength);n[L].push(C)}}function i(C){C=g.nextPow2(C);var P=g.log2(C),L=n[P];return L.length>0?L.pop():new ArrayBuffer(C)}function f(C){return new Uint8Array(i(C),0,C)}function u(C){return new Uint16Array(i(2*C),0,C)}function s(C){return new Uint32Array(i(4*C),0,C)}function d(C){return new Int8Array(i(C),0,C)}function h(C){return new Int16Array(i(2*C),0,C)}function a(C){return new Int32Array(i(4*C),0,C)}function _(C){return new Float32Array(i(4*C),0,C)}function c(C){return new Float64Array(i(8*C),0,C)}function T(C){return e?new Uint8ClampedArray(i(C),0,C):f(C)}function x(C){return r?new BigUint64Array(i(8*C),0,C):null}function w(C){return t?new BigInt64Array(i(8*C),0,C):null}function M(C){return new DataView(i(C),0,C)}function D(C){C=g.nextPow2(C);var P=g.log2(C),L=m[P];return L.length>0?L.pop():new y(C)}ie.free=function(C){if(y.isBuffer(C))m[g.log2(C.length)].push(C);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(C)&&(C=C.buffer),!C)return;var L=0|g.log2(C.length||C.byteLength);n[L].push(C)}},ie.freeUint8=ie.freeUint16=ie.freeUint32=ie.freeBigUint64=ie.freeInt8=ie.freeInt16=ie.freeInt32=ie.freeBigInt64=ie.freeFloat32=ie.freeFloat=ie.freeFloat64=ie.freeDouble=ie.freeUint8Clamped=ie.freeDataView=function(C){l(C.buffer)},ie.freeArrayBuffer=l,ie.freeBuffer=function(C){m[g.log2(C.length)].push(C)},ie.malloc=function(C,P){if(void 0===P||"arraybuffer"===P)return i(C);switch(P){case"uint8":return f(C);case"uint16":return u(C);case"uint32":return s(C);case"int8":return d(C);case"int16":return h(C);case"int32":return a(C);case"float":case"float32":return _(C);case"double":case"float64":return c(C);case"uint8_clamped":return T(C);case"bigint64":return w(C);case"biguint64":return x(C);case"buffer":return D(C);case"data":case"dataview":return M(C);default:return null}return null},ie.mallocArrayBuffer=i,ie.mallocUint8=f,ie.mallocUint16=u,ie.mallocUint32=s,ie.mallocInt8=d,ie.mallocInt16=h,ie.mallocInt32=a,ie.mallocFloat32=ie.mallocFloat=_,ie.mallocFloat64=ie.mallocDouble=c,ie.mallocUint8Clamped=T,ie.mallocBigUint64=x,ie.mallocBigInt64=w,ie.mallocDataView=M,ie.mallocBuffer=D,ie.clearCache=function(){for(var C=0;C<32;++C)o.UINT8[C].length=0,o.UINT16[C].length=0,o.UINT32[C].length=0,o.INT8[C].length=0,o.INT16[C].length=0,o.INT32[C].length=0,o.FLOAT[C].length=0,o.DOUBLE[C].length=0,o.BIGUINT64[C].length=0,o.BIGINT64[C].length=0,o.UINT8C[C].length=0,n[C].length=0,m[C].length=0}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(v,ae,ie){var p=/[\'\"]/;ae.exports=function(g){return g?(p.test(g.charAt(0))&&(g=g.substr(1)),p.test(g.charAt(g.length-1))&&(g=g.substr(0,g.length-1)),g):""}},{}],330:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){Array.isArray(b)||(b=[].slice.call(arguments,2));for(var y=0,e=b.length;y<e;y++){var r=b[y];for(var t in r)if((void 0===g[t]||Array.isArray(g[t])||p[t]!==g[t])&&t in g){var o;if(!0===r[t])o=g[t];else if(!1===r[t]||"function"==typeof r[t]&&void 0===(o=r[t](g[t],p,g)))continue;p[t]=o}}return p}},{}],331:[function(v,ae,ie){(function(p){(function(){function g(b){try{if(!p.localStorage)return!1}catch{return!1}var y=p.localStorage[b];return null!=y&&"true"===String(y).toLowerCase()}ae.exports=function(b,y){if(g("noDeprecation"))return b;var e=!1;return function(){if(!e){if(g("throwDeprecation"))throw new Error(y);g("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return b.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(v,ae,ie){var p=v("get-canvas-context");ae.exports=function(g){return p("webgl",g)}},{"get-canvas-context":194}],333:[function(v,ae,ie){var p=v("../main"),g=v("object-assign"),b=p.instance();function y(l){this.local=this.regionalOptions[l||""]||this.regionalOptions[""]}g(y.prototype=new p.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(l,i){if("string"==typeof l){var f=l.match(r);return f?f[0]:""}var u=this._validateYear(l),s=l.month(),d=""+this.toChineseMonth(u,s);return i&&d.length<2&&(d="0"+d),this.isIntercalaryMonth(u,s)&&(d+="i"),d},monthNames:function(l){if("string"==typeof l){var i=l.match(t);return i?i[0]:""}var f=this._validateYear(l),u=l.month(),s=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(f,u)-1];return this.isIntercalaryMonth(f,u)&&(s="\u95f0"+s),s},monthNamesShort:function(l){if("string"==typeof l){var i=l.match(o);return i?i[0]:""}var f=this._validateYear(l),u=l.month(),s=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(f,u)-1];return this.isIntercalaryMonth(f,u)&&(s="\u95f0"+s),s},parseMonth:function(l,i){l=this._validateYear(l);var f,u=parseInt(i);if(isNaN(u))"\u95f0"===i[0]&&(f=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),u=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var s=i[i.length-1];f="i"===s||"I"===s}return this.toMonthIndex(l,u,f)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(l,i){if(l.year&&(l=l.year()),"number"!=typeof l||l<1888||l>2111)throw i.replace(/\{0\}/,this.local.name);return l},toMonthIndex:function(l,i,f){var u=this.intercalaryMonth(l);if(f&&i!==u||i<1||i>12)throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!f&&i<=u?i-1:i:i-1},toChineseMonth:function(l,i){l.year&&(i=(l=l.year()).month());var f=this.intercalaryMonth(l);if(i<0||i>(f?12:11))throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return f?i<f?i+1:i:i+1},intercalaryMonth:function(l){return l=this._validateYear(l),n[l-n[0]]>>13},isIntercalaryMonth:function(l,i){l.year&&(i=(l=l.year()).month());var f=this.intercalaryMonth(l);return!!f&&f===i},leapYear:function(l){return 0!==this.intercalaryMonth(l)},weekOfYear:function(l,i,f){var u,s=this._validateYear(l,p.local.invalidyear),d=m[s-m[0]];(u=b.newDate(d>>9&4095,d>>5&15,31&d)).add(4-(u.dayOfWeek()||7),"d");var c=this.toJD(l,i,f)-u.toJD();return 1+Math.floor(c/7)},monthsInYear:function(l){return this.leapYear(l)?13:12},daysInMonth:function(l,i){l.year&&(i=l.month(),l=l.year()),l=this._validateYear(l);var f=n[l-n[0]];if(i>(f>>13?12:11))throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return f&1<<12-i?30:29},weekDay:function(l,i,f){return(this.dayOfWeek(l,i,f)||7)<6},toJD:function(l,i,f){var u=this._validate(l,d,f,p.local.invalidDate);l=this._validateYear(u.year()),i=u.month(),f=u.day();var s=this.isIntercalaryMonth(l,i),d=this.toChineseMonth(l,i),h=function(a,_,c,T,x){var w,M,D;if("object"==typeof a)M=a,w=_||{};else{var C;if(!("number"==typeof a&&a>=1888&&a<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof _&&_>=1&&_<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof c&&c>=1&&c<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof T?(C=!1,w=T):(C=!!T,w={}),M={year:a,month:_,day:c,isIntercalary:C}}D=M.day-1;var P,L=n[M.year-n[0]],S=L>>13;P=S&&(M.month>S||M.isIntercalary)?M.month:M.month-1;for(var E=0;E<P;E++)D+=L&1<<12-E?30:29;var N=m[M.year-m[0]],z=new Date(N>>9&4095,(N>>5&15)-1,(31&N)+D);return w.year=z.getFullYear(),w.month=1+z.getMonth(),w.day=z.getDate(),w}(l,d,f,s);return b.toJD(h.year,h.month,h.day)},fromJD:function(l){var i=b.fromJD(l),f=function(s,d,h,a){var _,c;if("object"==typeof s)_=s,c=d||{};else{if(!("number"==typeof s&&s>=1888&&s<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof d&&d>=1&&d<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof h&&h>=1&&h<=31))throw new Error("Solar day outside range 1 - 31");_={year:s,month:d,day:h},c={}}var T=m[_.year-m[0]];c.year=(_.year<<9|_.month<<5|_.day)>=T?_.year:_.year-1,T=m[c.year-m[0]];var w,M=new Date(T>>9&4095,(T>>5&15)-1,31&T),D=new Date(_.year,_.month-1,_.day);w=Math.round((D-M)/864e5);var C,P=n[c.year-n[0]];for(C=0;C<13;C++){var L=P&1<<12-C?30:29;if(w<L)break;w-=L}var S=P>>13;return!S||C<S?(c.isIntercalary=!1,c.month=1+C):C===S?(c.isIntercalary=!0,c.month=C):(c.isIntercalary=!1,c.month=C),c.day=1+w,c}(i.year(),i.month(),i.day()),u=this.toMonthIndex(f.year,f.month,f.isIntercalary);return this.newDate(f.year,u,f.day)},fromString:function(l){var i=l.match(e),f=this._validateYear(+i[1]),d=this.toMonthIndex(f,+i[2],!!i[3]);return this.newDate(f,d,+i[4])},add:function(l,i,f){var u=l.year(),s=l.month(),d=this.isIntercalaryMonth(u,s),h=this.toChineseMonth(u,s),a=Object.getPrototypeOf(y.prototype).add.call(this,l,i,f);if("y"===f){var _=a.year(),c=a.month(),T=this.isIntercalaryMonth(_,h),x=this.toMonthIndex(_,h,!(!d||!T));x!==c&&a.month(x)}return a}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,r=/^\d?\d[iI]?/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,o=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;p.calendars.chinese=y;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],m=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":347,"object-assign":247}],334:[function(v,ae,ie){var p=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var t=this._validate(y,e,r,p.local.invalidDate);return(y=t.year())<0&&y++,t.day()+30*(t.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(r,t,e-30*(t-1)+1)}}),p.calendars.coptic=b},{"../main":347,"object-assign":247}],335:[function(v,ae,ie){var p=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),400},weekOfYear:function(e,r,t){var o=this.newDate(e,r,t);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/8)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,r,t){return(this._validate(e,r,t,p.local.invalidDate).day()+1)%8},weekDay:function(e,r,t){var o=this.dayOfWeek(e,r,t);return o>=2&&o<=6},extraInfo:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);return{century:y[Math.floor((o.year()-1)/100)+1]||""}},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);return e=o.year()+(o.year()<0?1:0),r=o.month(),(t=o.day())+(r>1?16:0)+(r>2?32*(r-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var r=Math.floor(e/400)+1;e-=400*(r-1),e+=e>15?16:0;var t=Math.floor(e/32)+1;return this.newDate(r<=0?r-1:r,t,e-32*(t-1)+1)}});var y={20:"Fruitbat",21:"Anchovy"};p.calendars.discworld=b},{"../main":347,"object-assign":247}],336:[function(v,ae,ie){var p=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var t=this._validate(y,e,r,p.local.invalidDate);return(y=t.year())<0&&y++,t.day()+30*(t.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(r,t,e-30*(t-1)+1)}}),p.calendars.ethiopian=b},{"../main":347,"object-assign":247}],337:[function(v,ae,ie){var p=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(r.year())},_leapYear:function(e){return y(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,r,t){var o=this.newDate(e,r,t);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,r){return e.year&&(r=e.month(),e=e.year()),this._validate(e,r,this.minDay,p.local.invalidMonth),12===r&&this.leapYear(e)||8===r&&5===y(this.daysInYear(e),10)?30:9===r&&3===y(this.daysInYear(e),10)?29:this.daysPerMonth[r-1]},weekDay:function(e,r,t){return 6!==this.dayOfWeek(e,r,t)},extraInfo:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);return{yearType:(this.leapYear(o)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(o)%10-3]}},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);e=o.year(),r=o.month(),t=o.day();var n=e<=0?e+1:e,m=this.jdEpoch+this._delay1(n)+this._delay2(n)+t+1;if(r<7){for(var l=7;l<=this.monthsInYear(e);l++)m+=this.daysInMonth(e,l);for(l=1;l<r;l++)m+=this.daysInMonth(e,l)}else for(l=7;l<r;l++)m+=this.daysInMonth(e,l);return m},_delay1:function(e){var r=Math.floor((235*e-234)/19),o=29*r+Math.floor((12084+13753*r)/25920);return y(3*(o+1),7)<3&&o++,o},_delay2:function(e){var r=this._delay1(e-1),t=this._delay1(e);return this._delay1(e+1)-t==356?2:t-r==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var r=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===r?1:r+1,7,1);)r++;for(var t=e<this.toJD(r,1,1)?7:1;e>this.toJD(r,t,this.daysInMonth(r,t));)t++;var o=e-this.toJD(r,t,1)+1;return this.newDate(r,t,o)}}),p.calendars.hebrew=b},{"../main":347,"object-assign":247}],338:[function(v,ae,ie){var p=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(y){return(11*this._validate(y,this.minMonth,this.minDay,p.local.invalidYear).year()+14)%30<11},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(y){return this.leapYear(y)?355:354},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return 5!==this.dayOfWeek(y,e,r)},toJD:function(y,e,r){var t=this._validate(y,e,r,p.local.invalidDate);return y=t.year(),e=t.month(),y=y<=0?y+1:y,(r=t.day())+Math.ceil(29.5*(e-1))+354*(y-1)+Math.floor((3+11*y)/30)+this.jdEpoch-1},fromJD:function(y){y=Math.floor(y)+.5;var e=Math.floor((30*(y-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var r=Math.min(12,Math.ceil((y-29-this.toJD(e,1,1))/29.5)+1),t=y-this.toJD(e,r,1)+1;return this.newDate(e,r,t)}}),p.calendars.islamic=b},{"../main":347,"object-assign":247}],339:[function(v,ae,ie){var p=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear);return(y=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(4-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var t=this._validate(y,e,r,p.local.invalidDate);return y=t.year(),e=t.month(),r=t.day(),y<0&&y++,e<=2&&(y--,e+=12),Math.floor(365.25*(y+4716))+Math.floor(30.6001*(e+1))+r-1524.5},fromJD:function(y){var e=Math.floor(y+.5)+1524,r=Math.floor((e-122.1)/365.25),t=Math.floor(365.25*r),o=Math.floor((e-t)/30.6001),n=o-Math.floor(o<14?1:13),m=r-Math.floor(n>2?4716:4715),l=e-t-Math.floor(30.6001*o);return m<=0&&m--,this.newDate(m,n,l)}}),p.calendars.julian=b},{"../main":347,"object-assign":247}],340:[function(v,ae,ie){var p=v("../main");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function y(r,t){return r-t*Math.floor(r/t)}function e(r,t){return y(r-1,t)+1}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,p.local.invalidYear),!1},formatYear:function(r){r=this._validate(r,this.minMonth,this.minDay,p.local.invalidYear).year();var t=Math.floor(r/400);return r%=400,r+=r<0?400:0,t+"."+Math.floor(r/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,o=0;o<r.length;o++){var n=parseInt(r[o],10);if(Math.abs(n)>19||o>0&&n<0)throw"Invalid Mayan year";t=20*t+n}return t},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,p.local.invalidYear),18},weekOfYear:function(r,t,o){return this._validate(r,t,o,p.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,p.local.invalidYear),360},daysInMonth:function(r,t){return this._validate(r,t,this.minDay,p.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,t,o){return this._validate(r,t,o,p.local.invalidDate).day()},weekDay:function(r,t,o){return this._validate(r,t,o,p.local.invalidDate),!0},extraInfo:function(r,t,o){var n=this._validate(r,t,o,p.local.invalidDate).toJD(),m=this._toHaab(n),l=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[m[0]-1],haabMonth:m[0],haabDay:m[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(r){var t=y(8+(r-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,y(t,20)]},_toTzolkin:function(r){return[e(20+(r-=this.jdEpoch),20),e(r+4,13)]},toJD:function(r,t,o){var n=this._validate(r,t,o,p.local.invalidDate);return n.day()+20*n.month()+360*n.year()+this.jdEpoch},fromJD:function(r){r=Math.floor(r)+.5-this.jdEpoch;var t=Math.floor(r/360);r%=360,r+=r<0?360:0;var o=Math.floor(r/20);return this.newDate(t,o,r%20)}}),p.calendars.mayan=b},{"../main":347,"object-assign":247}],341:[function(v,ae,ie){var p=v("../main"),g=v("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new p.baseCalendar;var y=p.instance("gregorian");g(b.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear);return y.leapYear(r.year()+(r.year()<1?1:0)+1469)},weekOfYear:function(e,r,t){var o=this.newDate(e,r,t);return o.add(1-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidMonth);(e=o.year())<0&&e++;for(var n=o.day(),m=1;m<o.month();m++)n+=this.daysPerMonth[m-1];return n+y.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var r=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(r+1,1,1);)r++;for(var t=e-Math.floor(this.toJD(r,1,1)+.5)+1,o=1;t>this.daysInMonth(r,o);)t-=this.daysInMonth(r,o),o++;return this.newDate(r,o,t)}}),p.calendars.nanakshahi=b},{"../main":347,"object-assign":247}],342:[function(v,ae,ie){var p=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(y){return this.daysInYear(y)!==this.daysPerYear},weekOfYear:function(y,e,r){var t=this.newDate(y,e,r);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(y){if(y=this._validate(y,this.minMonth,this.minDay,p.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[y])return this.daysPerYear;for(var e=0,r=this.minMonth;r<=12;r++)e+=this.NEPALI_CALENDAR_DATA[y][r];return e},daysInMonth:function(y,e){return y.year&&(e=y.month(),y=y.year()),this._validate(y,e,this.minDay,p.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[y]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[y][e]},weekDay:function(y,e,r){return 6!==this.dayOfWeek(y,e,r)},toJD:function(y,e,r){var t=this._validate(y,e,r,p.local.invalidDate);y=t.year(),e=t.month(),r=t.day();var o=p.instance(),n=0,m=e,l=y;this._createMissingCalendarData(y);var i=y-(m>9||9===m&&r>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);for(9!==e&&(n=r,m--);9!==m;)m<=0&&(m=12,l--),n+=this.NEPALI_CALENDAR_DATA[l][m],m--;return 9===e?(n+=r-this.NEPALI_CALENDAR_DATA[l][0])<0&&(n+=o.daysInYear(i)):n+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0],o.newDate(i,1,1).add(n,"d").toJD()},fromJD:function(y){var e=p.instance().fromJD(y),r=e.year(),t=e.dayOfYear(),o=r+56;this._createMissingCalendarData(o);for(var n=9,l=this.NEPALI_CALENDAR_DATA[o][n]-this.NEPALI_CALENDAR_DATA[o][0]+1;t>l;)++n>12&&(n=1,o++),l+=this.NEPALI_CALENDAR_DATA[o][n];return this.newDate(o,n,this.NEPALI_CALENDAR_DATA[o][n]-(l-t))},_createMissingCalendarData:function(y){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var r=y-1;r<y+2;r++)void 0===this.NEPALI_CALENDAR_DATA[r]&&(this.NEPALI_CALENDAR_DATA[r]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),p.calendars.nepali=b},{"../main":347,"object-assign":247}],343:[function(v,ae,ie){var p=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}v("object-assign")(b.prototype=new p.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return 682*((r.year()-(r.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,r,t){var o=this.newDate(e,r,t);return o.add(-(o.dayOfWeek()+1)%7,"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return 5!==this.dayOfWeek(e,r,t)},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);e=o.year(),r=o.month(),t=o.day();var n=e-(e>=0?474:473),m=474+y(n,2820);return t+(r<=7?31*(r-1):30*(r-1)+6)+Math.floor((682*m-110)/2816)+365*(m-1)+1029983*Math.floor(n/2820)+this.jdEpoch-1},fromJD:function(e){var r=(e=Math.floor(e)+.5)-this.toJD(475,1,1),t=Math.floor(r/1029983),o=y(r,1029983),n=2820;if(1029982!==o){var m=Math.floor(o/366),l=y(o,366);n=Math.floor((2134*m+2816*l+2815)/1028522)+m+1}var i=n+2820*t+474,f=e-this.toJD(i=i<=0?i-1:i,1,1)+1,u=f<=186?Math.ceil(f/31):Math.ceil((f-6)/30),s=e-this.toJD(i,u,1)+1;return this.newDate(i,u,s)}}),p.calendars.persian=b,p.calendars.jalali=b},{"../main":347,"object-assign":247}],344:[function(v,ae,ie){var p=v("../main"),g=v("object-assign"),b=p.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g(y.prototype=new p.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(r.year()),b.leapYear(e)},weekOfYear:function(e,r,t){var o=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(o.year()),b.weekOfYear(e,o.month(),o.day())},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);return e=this._t2gYear(o.year()),b.toJD(e,o.month(),o.day())},fromJD:function(e){var r=b.fromJD(e),t=this._g2tYear(r.year());return this.newDate(t,r.month(),r.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),p.calendars.taiwan=y},{"../main":347,"object-assign":247}],345:[function(v,ae,ie){var p=v("../main"),g=v("object-assign"),b=p.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}g(y.prototype=new p.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(r.year()),b.leapYear(e)},weekOfYear:function(e,r,t){var o=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(o.year()),b.weekOfYear(e,o.month(),o.day())},daysInMonth:function(e,r){var t=this._validate(e,r,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,r,t){return(this.dayOfWeek(e,r,t)||7)<6},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate);return e=this._t2gYear(o.year()),b.toJD(e,o.month(),o.day())},fromJD:function(e){var r=b.fromJD(e),t=this._g2tYear(r.year());return this.newDate(t,r.month(),r.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),p.calendars.thai=y},{"../main":347,"object-assign":247}],346:[function(v,ae,ie){var p=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new p.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return 355===this.daysInYear(r.year())},weekOfYear:function(e,r,t){var o=this.newDate(e,r,t);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var r=0,t=1;t<=12;t++)r+=this.daysInMonth(e,t);return r},daysInMonth:function(e,r){for(var t=this._validate(e,r,this.minDay,p.local.invalidMonth).toJD()-24e5+.5,o=0,n=0;n<y.length;n++){if(y[n]>t)return y[o]-y[o-1];o++}return 30},weekDay:function(e,r,t){return 5!==this.dayOfWeek(e,r,t)},toJD:function(e,r,t){var o=this._validate(e,r,t,p.local.invalidDate),n=12*(o.year()-1)+o.month()-15292;return o.day()+y[n-1]-1+24e5-.5},fromJD:function(e){for(var r=e-24e5+.5,t=0,o=0;o<y.length&&!(y[o]>r);o++)t++;var n=t+15292,m=Math.floor((n-1)/12);return this.newDate(m+1,n-12*m,r-y[t-1]+1)},isValid:function(e,r,t){var o=p.baseCalendar.prototype.isValid.apply(this,arguments);return o&&(o=(e=null!=e.year?e.year:e)>=1276&&e<=1500),o},_validate:function(e,r,t,o){var n=p.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw o.replace(/\{0\}/,this.local.name);return n}}),p.calendars.ummalqura=b;var y=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(v,ae,ie){var p=v("object-assign");function g(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function b(o,n,m,l){if(this._calendar=o,this._year=n,this._month=m,this._day=l,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function y(o,n){return"000000".substring(0,n-(o=""+o).length)+o}function e(){this.shortYearCutoff="+10"}function r(o){this.local=this.regionalOptions[o]||this.regionalOptions[""]}p(g.prototype,{instance:function(o,n){o=(o||"gregorian").toLowerCase();var m=this._localCals[o+"-"+(n=n||"")];if(!m&&this.calendars[o]&&(m=new this.calendars[o](n),this._localCals[o+"-"+n]=m),!m)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,o);return m},newDate:function(o,n,m,l,i){return(l=(null!=o&&o.year?o.calendar():"string"==typeof l?this.instance(l,i):l)||this.instance()).newDate(o,n,m)},substituteDigits:function(o){return function(n){return(n+"").replace(/[0-9]/g,function(m){return o[m]})}},substituteChineseDigits:function(o,n){return function(m){for(var l="",i=0;m>0;){var f=m%10;l=(0===f?"":o[f]+n[i])+l,i++,m=Math.floor(m/10)}return 0===l.indexOf(o[1]+n[1])&&(l=l.substr(1)),l||o[0]}}}),p(b.prototype,{newDate:function(o,n,m){return this._calendar.newDate(o??this,n,m)},year:function(o){return 0===arguments.length?this._year:this.set(o,"y")},month:function(o){return 0===arguments.length?this._month:this.set(o,"m")},day:function(o){return 0===arguments.length?this._day:this.set(o,"d")},date:function(o,n,m){if(!this._calendar.isValid(o,n,m))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=o,this._month=n,this._day=m,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(o,n){return this._calendar.add(this,o,n)},set:function(o,n){return this._calendar.set(this,o,n)},compareTo:function(o){if(this._calendar.name!==o._calendar.name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,o._calendar.local.name);var n=this._year!==o._year?this._year-o._year:this._month!==o._month?this.monthOfYear()-o.monthOfYear():this._day-o._day;return 0===n?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(o){return this._calendar.fromJD(o)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(o){return this._calendar.fromJSDate(o)},toString:function(){return(this.year()<0?"-":"")+y(Math.abs(this.year()),4)+"-"+y(this.month(),2)+"-"+y(this.day(),2)}}),p(e.prototype,{_validateLevel:0,newDate:function(o,n,m){return null==o?this.today():(o.year&&(this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate),m=o.day(),n=o.month(),o=o.year()),new b(this,o,n,m))},today:function(){return this.fromJSDate(new Date)},epoch:function(o){return this._validate(o,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(o){var n=this._validate(o,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+y(Math.abs(n.year()),4)},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear),12},monthOfYear:function(o,n){var m=this._validate(o,n,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return(m.month()+this.monthsInYear(m)-this.firstMonth)%this.monthsInYear(m)+this.minMonth},fromMonthOfYear:function(o,n){var m=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(o)+this.minMonth;return this._validate(o,m,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth),m},daysInYear:function(o){var n=this._validate(o,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(o,n,m){var l=this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate);return l.toJD()-this.newDate(l.year(),this.fromMonthOfYear(l.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(o,n,m){var l=this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(l))+2)%this.daysInWeek()},extraInfo:function(o,n,m){return this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate),{}},add:function(o,n,m){return this._validate(o,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate),this._correctAdd(o,this._add(o,n,m),n,m)},_add:function(o,n,m){if(this._validateLevel++,"d"===m||"w"===m){var l=o.toJD()+n*("w"===m?this.daysInWeek():1),i=o.calendar().fromJD(l);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var f=o.year()+("y"===m?n:0),u=o.monthOfYear()+("m"===m?n:0);i=o.day(),"y"===m?(o.month()!==this.fromMonthOfYear(f,u)&&(u=this.newDate(f,o.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(f)),i=Math.min(i,this.daysInMonth(f,this.fromMonthOfYear(f,u)))):"m"===m&&(function(d){for(;u<d.minMonth;)f--,u+=d.monthsInYear(f);for(var h=d.monthsInYear(f);u>h-1+d.minMonth;)f++,u-=h,h=d.monthsInYear(f)}(this),i=Math.min(i,this.daysInMonth(f,this.fromMonthOfYear(f,u))));var s=[f,this.fromMonthOfYear(f,u),i];return this._validateLevel--,s}catch(d){throw this._validateLevel--,d}},_correctAdd:function(o,n,m,l){if(!(this.hasYearZero||"y"!==l&&"m"!==l||0!==n[0]&&o.year()>0==n[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[l];n=this._add(o,m*i[0]+(m<0?-1:1)*i[1],i[2])}return o.date(n[0],n[1],n[2])},set:function(o,n,m){this._validate(o,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate);var l="y"===m?n:o.year(),i="m"===m?n:o.month(),f="d"===m?n:o.day();return"y"!==m&&"m"!==m||(f=Math.min(f,this.daysInMonth(l,i))),o.date(l,i,f)},isValid:function(o,n,m){this._validateLevel++;var l=this.hasYearZero||0!==o;if(l){var i=this.newDate(o,n,this.minDay);l=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(i)&&m>=this.minDay&&m-this.minDay<this.daysInMonth(i)}return this._validateLevel--,l},toJSDate:function(o,n,m){var l=this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate);return t.instance().fromJD(this.toJD(l)).toJSDate()},fromJSDate:function(o){return this.fromJD(t.instance().fromJSDate(o).toJD())},_validate:function(o,n,m,l){if(o.year){if(0===this._validateLevel&&this.name!==o.calendar().name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,o.calendar().local.name);return o}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(o,n,m))throw l.replace(/\{0\}/,this.local.name);var i=this.newDate(o,n,m);return this._validateLevel--,i}catch(f){throw this._validateLevel--,f}}}),p(r.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(o){var n=this._validate(o,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(o=n.year()+(n.year()<0?1:0))%4==0&&(o%100!=0||o%400==0)},weekOfYear:function(o,n,m){var l=this.newDate(o,n,m);return l.add(4-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(o,n){var m=this._validate(o,n,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(o,n,m){return(this.dayOfWeek(o,n,m)||7)<6},toJD:function(o,n,m){var l=this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate);o=l.year(),n=l.month(),m=l.day(),o<0&&o++,n<3&&(n+=12,o--);var i=Math.floor(o/100),f=2-i+Math.floor(i/4);return Math.floor(365.25*(o+4716))+Math.floor(30.6001*(n+1))+m+f-1524.5},fromJD:function(o){var n=Math.floor(o+.5),m=Math.floor((n-1867216.25)/36524.25),l=1524+(m=n+1+m-Math.floor(m/4)),i=Math.floor((l-122.1)/365.25),f=Math.floor(365.25*i),u=Math.floor((l-f)/30.6001),s=l-f-Math.floor(30.6001*u),d=u-(u>13.5?13:1),h=i-(d>2.5?4716:4715);return h<=0&&h--,this.newDate(h,d,s)},toJSDate:function(o,n,m){var l=this._validate(o,n,m,t.local.invalidDate||t.regionalOptions[""].invalidDate),i=new Date(l.year(),l.month()-1,l.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(o){return this.newDate(o.getFullYear(),o.getMonth()+1,o.getDate())}});var t=ae.exports=new g;t.cdate=b,t.baseCalendar=e,t.calendars.gregorian=r},{"object-assign":247}],348:[function(v,ae,ie){var p=v("object-assign"),g=v("./main");p(g.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),g.local=g.regionalOptions[""],p(g.cdate.prototype,{formatDate:function(b,y){return"string"!=typeof b&&(y=b,b=""),this._calendar.formatDate(b||"",this,y)}}),p(g.baseCalendar.prototype,{UNIX_EPOCH:g.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:g.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,y,e){if("string"!=typeof b&&(e=y,y=b,b=""),!y)return"";if(y.calendar()!==this)throw g.local.invalidFormat||g.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat;for(var t,o,n,m=(e=e||{}).dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,f=e.monthNamesShort||this.local.monthNamesShort,u=e.monthNames||this.local.monthNames,s=function(D,C){for(var P=1;M+P<b.length&&b.charAt(M+P)===D;)P++;return M+=P-1,Math.floor(P/(C||1))>1},d=function(D,C,P,L){var S=""+C;if(s(D,L))for(;S.length<P;)S="0"+S;return S},h=this,_=function(D,C){return C?"function"==typeof u?u.call(h,D):u[D.month()-h.minMonth]:"function"==typeof f?f.call(h,D):f[D.month()-h.minMonth]},c=this.local.digits,T=function(D){return e.localNumbers&&c?c(D):D},x="",w=!1,M=0;M<b.length;M++)if(w)"'"!==b.charAt(M)||s("'")?x+=b.charAt(M):w=!1;else switch(b.charAt(M)){case"d":x+=T(d("d",y.day(),2));break;case"D":x+=("D",t=y.dayOfWeek(),o=m,n=l,s("D")?n[t]:o[t]);break;case"o":x+=d("o",y.dayOfYear(),3);break;case"w":x+=d("w",y.weekOfYear(),2);break;case"m":x+=(D=y,"function"==typeof i?i.call(h,D,s("m")):T(d("m",D.month(),2)));break;case"M":x+=_(y,s("M"));break;case"y":x+=s("y",2)?y.year():(y.year()%100<10?"0":"")+y.year()%100;break;case"Y":s("Y",2),x+=y.formatYear();break;case"J":x+=y.toJD();break;case"@":x+=(y.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(y.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?x+="'":w=!0;break;default:x+=b.charAt(M)}var D;return x},parseDate:function(b,y,e){if(null==y)throw g.local.invalidArguments||g.regionalOptions[""].invalidArguments;if(""===(y="object"==typeof y?y.toString():y+""))return null;b=b||this.local.dateFormat;var r=(e=e||{}).shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var t=e.dayNamesShort||this.local.dayNamesShort,o=e.dayNames||this.local.dayNames,n=e.parseMonth||this.local.parseMonth,m=e.monthNumbers||this.local.monthNumbers,l=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,f=-1,u=-1,s=-1,d=-1,h=-1,a=!1,_=!1,c=function(N,z){for(var q=1;L+q<b.length&&b.charAt(L+q)===N;)q++;return L+=q-1,Math.floor(q/(z||1))>1},T=function(N,z){var q=c(N,z),G=[2,3,q?4:2,q?4:2,10,11,20]["oyYJ@!".indexOf(N)+1],K=new RegExp("^-?\\d{1,"+G+"}"),ne=y.substring(P).match(K);if(!ne)throw(g.local.missingNumberAt||g.regionalOptions[""].missingNumberAt).replace(/\{0\}/,P);return P+=ne[0].length,parseInt(ne[0],10)},x=this,w=function(){if("function"==typeof m){c("m");var N=m.call(x,y.substring(P));return P+=N.length,N}return T("m")},M=function(N,z,q,G){for(var K=c(N,G)?q:z,ne=0;ne<K.length;ne++)if(y.substr(P,K[ne].length).toLowerCase()===K[ne].toLowerCase())return P+=K[ne].length,ne+x.minMonth;throw(g.local.unknownNameAt||g.regionalOptions[""].unknownNameAt).replace(/\{0\}/,P)},D=function(){if("function"==typeof i){var N=c("M")?i.call(x,y.substring(P)):l.call(x,y.substring(P));return P+=N.length,N}return M("M",l,i)},C=function(){if(y.charAt(P)!==b.charAt(L))throw(g.local.unexpectedLiteralAt||g.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,P);P++},P=0,L=0;L<b.length;L++)if(_)"'"!==b.charAt(L)||c("'")?C():_=!1;else switch(b.charAt(L)){case"d":d=T("d");break;case"D":M("D",t,o);break;case"o":h=T("o");break;case"w":T("w");break;case"m":s=w();break;case"M":s=D();break;case"y":var S=L;a=!c("y",2),L=S,u=T("y",2);break;case"Y":u=T("Y",2);break;case"J":f=T("J")+.5,"."===y.charAt(P)&&(P++,T("J"));break;case"@":f=T("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=T("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":P=y.length;break;case"'":c("'")?C():_=!0;break;default:C()}if(P<y.length)throw g.local.unexpectedText||g.regionalOptions[""].unexpectedText;if(-1===u?u=this.today().year():u<100&&a&&(u+=-1===r?1900:this.today().year()-this.today().year()%100-(u<=r?0:100)),"string"==typeof s&&(s=n.call(this,u,s)),h>-1){d=h;for(var E=this.daysInMonth(u,s=1);d>E;E=this.daysInMonth(u,s))s++,d-=E}return f>-1?this.fromJD(f):this.newDate(u,s,d)},determineDate:function(b,y,e,r,t){e&&"object"!=typeof e&&(t=r,r=e,e=null),"string"!=typeof r&&(t=r,r="");var o=this;return y=y?y.newDate():null,null==b?y:"string"==typeof b?function(n){try{return o.parseDate(r,n,t)}catch{}for(var m=((n=n.toLowerCase()).match(/^c/)&&e?e.newDate():null)||o.today(),l=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=l.exec(n);i;)m.add(parseInt(i[1],10),i[2]||"d"),i=l.exec(n);return m}(b):"number"==typeof b?isNaN(b)||b===1/0||b===-1/0?y:o.today().add(b,"d"):o.newDate(b)}})},{"./main":347,"object-assign":247}],349:[function(v,ae,ie){"use strict";ae.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(v,ae,ie){"use strict";var p=v("./arrow_paths"),g=v("../../plots/font_attributes"),b=v("../../plots/cartesian/constants"),y=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ae.exports=y("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:g({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:g({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("./draw").draw;function y(r){p.filterVisible(r._fullLayout.annotations).forEach(function(o){var n=g.getFromId(r,o.xref),m=g.getFromId(r,o.yref),l=g.getRefType(o.xref),i=g.getRefType(o.yref);o._extremes={},"range"===l&&e(o,n),"range"===i&&e(o,m)})}function e(r,t){var o,n=t._id,m=n.charAt(0),l=r[m],i=r["a"+m],s=r["_"+m+"padplus"],d=r["_"+m+"padminus"],h={x:1,y:-1}[m]*r[m+"shift"],a=3*r.arrowsize*r.arrowwidth||0,_=a+h,c=a-h,T=3*r.startarrowsize*r.arrowwidth||0,x=T+h,w=T-h;if(r["a"+m+"ref"]===r[m+"ref"]){var M=g.findExtremes(t,[t.r2c(l)],{ppadplus:_,ppadminus:c}),D=g.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(s,x),ppadminus:Math.max(d,w)});o={min:[M.min[0],D.min[0]],max:[M.max[0],D.max[0]]}}else x=i?x+i:x,w=i?w-i:w,o=g.findExtremes(t,[t.r2c(l)],{ppadplus:Math.max(s,_,x),ppadminus:Math.max(d,c,w)});r._extremes[n]=o}ae.exports=function(r){if(p.filterVisible(r._fullLayout.annotations).length&&r._fullData.length)return p.syncOrAsync([b,y],r)}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry"),b=v("../../plot_api/plot_template").arrayEditor;function y(r,t){var o,n,m,l,i,f,u,s=r._fullLayout.annotations,d=[],h=[],a=[],_=(t||[]).length;for(o=0;o<s.length;o++)if(l=(m=s[o]).clicktoshow){for(n=0;n<_;n++)if(f=(i=t[n]).xaxis,u=i.yaxis,f._id===m.xref&&u._id===m.yref&&f.d2r(i.x)===e(m._xclick,f)&&u.d2r(i.y)===e(m._yclick,u)){(m.visible?"onout"===l?h:a:d).push(o);break}n===_&&m.visible&&"onout"===l&&h.push(o)}return{on:d,off:h,explicitOff:a}}function e(r,t){return"log"===t.type?t.l2r(r):t.d2r(r)}ae.exports={hasClickToShow:function(r,t){var o=y(r,t);return o.on.length>0||o.explicitOff.length>0},onClick:function(r,t){var o,n,m=y(r,t),l=m.on,i=m.off.concat(m.explicitOff),f={},u=r._fullLayout.annotations;if(l.length||i.length){for(o=0;o<l.length;o++)(n=b(r.layout,"annotations",u[l[o]])).modifyItem("visible",!0),p.extendFlat(f,n.getUpdateObj());for(o=0;o<i.length;o++)(n=b(r.layout,"annotations",u[i[o]])).modifyItem("visible",!1),p.extendFlat(f,n.getUpdateObj());return g.call("update",r,{},f)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../color");ae.exports=function(b,y,e,r){r("opacity");var t=r("bgcolor"),o=r("bordercolor"),n=g.opacity(o);r("borderpad");var m=r("borderwidth"),l=r("showarrow");if(r("text",l?" ":e._dfltTitle.annotation),r("textangle"),p.coerceFont(r,"font",e.font),r("width"),r("align"),r("height")&&r("valign"),l){var i,f,u=r("arrowside");-1!==u.indexOf("end")&&(i=r("arrowhead"),f=r("arrowsize")),-1!==u.indexOf("start")&&(r("startarrowhead",i),r("startarrowsize",f)),r("arrowcolor",n?y.bordercolor:g.defaultLine),r("arrowwidth",2*(n&&m||1)),r("standoff"),r("startstandoff")}var s=r("hovertext"),d=e.hoverlabel||{};if(s){var h=r("hoverlabel.bgcolor",d.bgcolor||(g.opacity(t)?g.rgb(t):g.defaultLine)),a=r("hoverlabel.bordercolor",d.bordercolor||g.contrast(h));p.coerceFont(r,"hoverlabel.font",{family:d.font.family,size:d.font.size,color:d.font.color||a})}r("captureevents",!!s)}},{"../../lib":515,"../color":367}],354:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib/to_log_range");ae.exports=function(b,y,e,r){y=y||{};var t="log"===e&&"linear"===y.type;if(t||"linear"===e&&"log"===y.type)for(var n,m,l=b._fullLayout.annotations,i=y._id.charAt(0),f=0;f<l.length;f++)m="annotations["+f+"].",(n=l[f])[i+"ref"]===y._id&&u(i),n["a"+i+"ref"]===y._id&&u("a"+i);function u(s){var d=n[s],h=null;h=t?g(d,y.range):Math.pow(10,d),p(h)||(h=null),r(m+s,h)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./common_defaults"),e=v("./attributes");function r(t,o,n){function m(D,C){return p.coerce(t,o,e,D,C)}var l=m("visible"),i=m("clicktoshow");if(l||i){y(t,o,n,m);for(var f=o.showarrow,u=["x","y"],s=[-10,-30],d={_fullLayout:n},h=0;h<2;h++){var a=u[h],_=g.coerceRef(t,o,d,a,"","paper");if("paper"!==_&&g.getFromId(d,_)._annIndices.push(o._index),g.coercePosition(o,d,m,_,a,.5),f){var c="a"+a,T=g.coerceRef(t,o,d,c,"pixel",["pixel","paper"]);"pixel"!==T&&T!==_&&(T=o[c]="pixel"),g.coercePosition(o,d,m,T,c,"pixel"===T?s[h]:.4)}m(a+"anchor"),m(a+"shift")}if(p.noneOrAll(t,o,["x","y"]),f&&p.noneOrAll(t,o,["ax","ay"]),i){var w=m("xclick"),M=m("yclick");o._xclick=void 0===w?o.x:g.cleanPosition(w,d,o.xref),o._yclick=void 0===M?o.y:g.cleanPosition(M,d,o.yref)}}}ae.exports=function(t,o){b(t,o,{name:"annotations",handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../plots/plots"),y=v("../../lib"),e=y.strTranslate,r=v("../../plots/cartesian/axes"),t=v("../color"),o=v("../drawing"),n=v("../fx"),m=v("../../lib/svg_text_utils"),l=v("../../lib/setcursor"),i=v("../dragelement"),f=v("../../plot_api/plot_template").arrayEditor,u=v("./draw_arrow_head");function s(a,_){var c=a._fullLayout.annotations[_]||{},T=r.getFromId(a,c.xref),x=r.getFromId(a,c.yref);T&&T.setScale(),x&&x.setScale(),h(a,c,_,!1,T,x)}function d(a,_,c,T,x){var w=x[c],M=x[c+"ref"],D=-1!==c.indexOf("y"),C="domain"===r.getRefType(M),P=D?T.h:T.w;return a?C?w+(D?-_:_)/a._length:a.p2r(a.r2p(w)+_):w+(D?-_:_)/P}function h(a,_,c,T,x,w){var M,D,C=a._fullLayout,P=a._fullLayout._size,L=a._context.edits;T?(M="annotation-"+T,D=T+".annotations"):(M="annotation",D="annotations");var S=f(a.layout,D,_),E=S.modifyBase,N=S.modifyItem,z=S.getUpdateObj;C._infolayer.selectAll("."+M+'[data-index="'+c+'"]').remove();var q="clip"+C._uid+"_ann"+c;if(_._input&&!1!==_.visible){var G={x:{},y:{}},K=+_.textangle||0,ne=C._infolayer.append("g").classed(M,!0).attr("data-index",String(c)).style("opacity",_.opacity),X=ne.append("g").classed("annotation-text-g",!0),J=L[_.showarrow?"annotationTail":"annotationPosition"],se=_.captureevents||L.annotationText||J,V=X.append("g").style("pointer-events",se?"all":null).call(l,"pointer").on("click",function(){a._dragging=!1,a.emit("plotly_clickannotation",de(p.event))});_.hovertext&&V.on("mouseover",function(){var xe=_.hoverlabel,De=xe.font,Se=this.getBoundingClientRect(),ke=a.getBoundingClientRect();n.loneHover({x0:Se.left-ke.left,x1:Se.right-ke.left,y:(Se.top+Se.bottom)/2-ke.top,text:_.hovertext,color:xe.bgcolor,borderColor:xe.bordercolor,fontFamily:De.family,fontSize:De.size,fontColor:De.color},{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:a})}).on("mouseout",function(){n.loneUnhover(C._hoverlayer.node())});var j=_.borderwidth,oe=j+_.borderpad,U=V.append("rect").attr("class","bg").style("stroke-width",j+"px").call(t.stroke,_.bordercolor).call(t.fill,_.bgcolor),te=_.width||_.height,ee=C._topclips.selectAll("#"+q).data(te?[0]:[]);ee.enter().append("clipPath").classed("annclip",!0).attr("id",q).append("rect"),ee.exit().remove();var le=_.font,ce=C._meta?y.templateString(_.text,C._meta):_.text,pe=V.append("text").classed("annotation-text",!0).text(ce);L.annotationText?pe.call(m.makeEditable,{delegate:V,gd:a}).call(be).on("edit",function(xe){_.text=xe,this.call(be),N("text",xe),x&&x.autorange&&E(x._name+".autorange",!0),w&&w.autorange&&E(w._name+".autorange",!0),g.call("_guiRelayout",a,z())}):pe.call(be)}else p.selectAll("#"+q).remove();function de(xe){var De={index:c,annotation:_._input,fullAnnotation:_,event:xe};return T&&(De.subplotId=T),De}function be(xe){return xe.call(o.font,le).attr({"text-anchor":{left:"start",right:"end"}[_.align]||"middle"}),m.convertToTspans(xe,a,he),xe}function he(){var xe=pe.selectAll("a");1===xe.size()&&xe.text()===pe.text()&&V.insert("a",":first-child").attr({"xlink:xlink:href":xe.attr("xlink:href"),"xlink:xlink:show":xe.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(U.node());var De=V.select(".annotation-text-math-group"),Se=!De.empty(),ke=o.bBox((Se?De:pe).node()),Fe=ke.width,ve=ke.height,Te=_.width||Fe,Le=_.height||ve,Oe=Math.round(Te+2*oe),Ne=Math.round(Le+2*oe);function Be(dt,bt){return"auto"===bt&&(bt=dt<1/3?"left":dt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[bt]}for(var He=!1,Ve=["x","y"],it=0;it<Ve.length;it++){var ze,je,qe,Ye,ct,vt=Ve[it],wt=_[vt+"ref"]||vt,Ot=_["a"+vt+"ref"],St={x,y:w}[vt],ft=(K+("x"===vt?0:-90))*Math.PI/180,st=Oe*Math.cos(ft),Ct=Ne*Math.sin(ft),$t=Math.abs(st)+Math.abs(Ct),rn=_[vt+"anchor"],hn=_[vt+"shift"]*("x"===vt?1:-1),cn=G[vt],mn=r.getRefType(wt);if(St&&"domain"!==mn){var nn=St.r2fraction(_[vt]);(nn<0||nn>1)&&(Ot===wt?((nn=St.r2fraction(_["a"+vt]))<0||nn>1)&&(He=!0):He=!0),ze=St._offset+St.r2p(_[vt]),Ye=.5}else{var Xe="domain"===mn;"x"===vt?(qe=_[vt],ze=Xe?St._offset+St._length*qe:ze=P.l+P.w*qe):(qe=1-_[vt],ze=Xe?St._offset+St._length*qe:ze=P.t+P.h*qe),Ye=_.showarrow?.5:qe}if(_.showarrow){cn.head=ze;var nt=_["a"+vt];if(ct=st*Be(.5,_.xanchor)-Ct*Be(.5,_.yanchor),Ot===wt){var ye=r.getRefType(Ot);"domain"===ye?("y"===vt&&(nt=1-nt),cn.tail=St._offset+St._length*nt):cn.tail="paper"===ye?"y"===vt?P.t+P.h*(nt=1-nt):P.l+P.w*nt:St._offset+St.r2p(nt),je=ct}else cn.tail=ze+nt,je=ct+nt;cn.text=cn.tail+ct;var Ce=C["x"===vt?"width":"height"];if("paper"===wt&&(cn.head=y.constrain(cn.head,1,Ce-1)),"pixel"===Ot){var Ue=-Math.max(cn.tail-3,cn.text),Qe=Math.min(cn.tail+3,cn.text)-Ce;Ue>0?(cn.tail+=Ue,cn.text+=Ue):Qe>0&&(cn.tail-=Qe,cn.text-=Qe)}cn.tail+=hn,cn.head+=hn}else je=ct=$t*Be(Ye,rn),cn.text=ze+ct;cn.text+=hn,ct+=hn,_["_"+vt+"padplus"]=$t/2+(je+=hn),_["_"+vt+"padminus"]=$t/2-je,_["_"+vt+"size"]=$t,_["_"+vt+"shift"]=ct}if(He)V.remove();else{var rt=0,Ke=0;"left"!==_.align&&(rt=(Te-Fe)*("center"===_.align?.5:1)),"top"!==_.valign&&(Ke=(Le-ve)*("middle"===_.valign?.5:1)),Se?De.select("svg").attr({x:oe+rt-1,y:oe+Ke}).call(o.setClipUrl,te?q:null,a):pe.call(m.positionText,oe+rt-ke.left,oe+Ke-ke.top).call(o.setClipUrl,te?q:null,a),ee.select("rect").call(o.setRect,oe,oe,Te,Le),U.call(o.setRect,j/2,j/2,Oe-j,Ne-j),V.call(o.setTranslate,Math.round(G.x.text-Oe/2),Math.round(G.y.text-Ne/2)),X.attr({transform:"rotate("+K+","+G.x.text+","+G.y.text+")"});var Lt,Vt=function(dt,bt){ne.selectAll(".annotation-arrow-g").remove();var Yt=G.x.head,It=G.y.head,jt=G.x.tail+dt,Ie=G.y.tail+bt,et=G.x.text+dt,ht=G.y.text+bt,xt=y.rotationXYMatrix(K,et,ht),Rt=y.apply2DTransform(xt),Xt=y.apply2DTransform2(xt),tn=+U.attr("width"),Kt=+U.attr("height"),kn=et-.5*tn,Vn=kn+tn,Tn=ht-.5*Kt,sn=Tn+Kt,fn=[[kn,Tn,kn,sn],[kn,sn,Vn,sn],[Vn,sn,Vn,Tn],[Vn,Tn,kn,Tn]].map(Xt);if(!fn.reduce(function(Or,Hr){return Or^!!y.segmentsIntersect(Yt,It,Yt+1e6,It+1e6,Hr[0],Hr[1],Hr[2],Hr[3])},!1)){fn.forEach(function(Or){var Hr=y.segmentsIntersect(jt,Ie,Yt,It,Or[0],Or[1],Or[2],Or[3]);Hr&&(jt=Hr.x,Ie=Hr.y)});var dn=_.arrowwidth,Mn=_.arrowcolor,En=_.arrowside,jn=ne.append("g").style({opacity:t.opacity(Mn)}).classed("annotation-arrow-g",!0),er=jn.append("path").attr("d","M"+jt+","+Ie+"L"+Yt+","+It).style("stroke-width",dn+"px").call(t.stroke,t.rgb(Mn));if(u(er,En,_),L.annotationPosition&&er.node().parentNode&&!T){var nr=Yt,mr=It;if(_.standoff){var Dr=Math.sqrt(Math.pow(Yt-jt,2)+Math.pow(It-Ie,2));nr+=_.standoff*(jt-Yt)/Dr,mr+=_.standoff*(Ie-It)/Dr}var yr,Wr,kr=jn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(jt-nr)+","+(Ie-mr),transform:e(nr,mr)}).style("stroke-width",dn+6+"px").call(t.stroke,"rgba(0,0,0,0)").call(t.fill,"rgba(0,0,0,0)");i.init({element:kr.node(),gd:a,prepFn:function(){var Or=o.getTranslate(V);yr=Or.x,Wr=Or.y,x&&x.autorange&&E(x._name+".autorange",!0),w&&w.autorange&&E(w._name+".autorange",!0)},moveFn:function(Or,Hr){var oi=Rt(yr,Wr),Qn=oi[0]+Or,Ir=oi[1]+Hr;V.call(o.setTranslate,Qn,Ir),N("x",d(x,Or,"x",P,_)),N("y",d(w,Hr,"y",P,_)),_.axref===_.xref&&N("ax",d(x,Or,"ax",P,_)),_.ayref===_.yref&&N("ay",d(w,Hr,"ay",P,_)),jn.attr("transform",e(Or,Hr)),X.attr({transform:"rotate("+K+","+Qn+","+Ir+")"})},doneFn:function(){g.call("_guiRelayout",a,z());var Or=document.querySelector(".js-notes-box-panel");Or&&Or.redraw(Or.selectedObj)}})}}};_.showarrow&&Vt(0,0),J&&i.init({element:V.node(),gd:a,prepFn:function(){Lt=X.attr("transform")},moveFn:function(dt,bt){var Yt="pointer";if(_.showarrow)N("ax",_.axref===_.xref?d(x,dt,"ax",P,_):_.ax+dt),N("ay",_.ayref===_.yref?d(w,bt,"ay",P.w,_):_.ay+bt),Vt(dt,bt);else{if(T)return;var It,jt;if(x)It=d(x,dt,"x",P,_);else{var Ie=_._xsize/P.w;It=i.align(_.x+(_._xshift-_.xshift)/P.w-Ie/2+dt/P.w,Ie,0,1,_.xanchor)}if(w)jt=d(w,bt,"y",P,_);else{var ht=_._ysize/P.h;jt=i.align(_.y-(_._yshift+_.yshift)/P.h-ht/2-bt/P.h,ht,0,1,_.yanchor)}N("x",It),N("y",jt),x&&w||(Yt=i.getCursor(x?.5:It,w?.5:jt,_.xanchor,_.yanchor))}X.attr({transform:e(dt,bt)+Lt}),l(V,Yt)},clickFn:function(dt,bt){_.captureevents&&a.emit("plotly_clickannotation",de(bt))},doneFn:function(){l(V),g.call("_guiRelayout",a,z());var dt=document.querySelector(".js-notes-box-panel");dt&&dt.redraw(dt.selectedObj)}})}}}ae.exports={draw:function(a){var _=a._fullLayout;_._infolayer.selectAll(".annotation").remove();for(var c=0;c<_.annotations.length;c++)_.annotations[c].visible&&s(a,c);return b.previousPromises(a)},drawOne:s,drawRaw:h}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../color"),b=v("./arrow_paths"),y=v("../../lib"),e=y.strScale,r=y.strRotate,t=y.strTranslate;ae.exports=function(o,n,m){var l,i,f,u,s=o.node(),d=b[m.arrowhead||0],h=b[m.startarrowhead||0],a=(m.arrowwidth||1)*(m.arrowsize||1),_=(m.arrowwidth||1)*(m.startarrowsize||1),c=n.indexOf("start")>=0,T=n.indexOf("end")>=0,x=d.backoff*a+m.standoff,w=h.backoff*_+m.startstandoff;if("line"===s.nodeName){l={x:+o.attr("x1"),y:+o.attr("y1")},i={x:+o.attr("x2"),y:+o.attr("y2")};var M=l.x-i.x,D=l.y-i.y;if(u=(f=Math.atan2(D,M))+Math.PI,x&&w&&x+w>Math.sqrt(M*M+D*D))return void ne();if(x){if(x*x>M*M+D*D)return void ne();var C=x*Math.cos(f),P=x*Math.sin(f);i.x+=C,i.y+=P,o.attr({x2:i.x,y2:i.y})}if(w){if(w*w>M*M+D*D)return void ne();var L=w*Math.cos(f),S=w*Math.sin(f);l.x-=L,l.y-=S,o.attr({x1:l.x,y1:l.y})}}else if("path"===s.nodeName){var E=s.getTotalLength(),N="";if(E<x+w)return void ne();var z=s.getPointAtLength(0),q=s.getPointAtLength(.1);f=Math.atan2(z.y-q.y,z.x-q.x),l=s.getPointAtLength(Math.min(w,E)),N="0px,"+w+"px,";var G=s.getPointAtLength(E),K=s.getPointAtLength(E-.1);u=Math.atan2(G.y-K.y,G.x-K.x),i=s.getPointAtLength(Math.max(0,E-x)),o.style("stroke-dasharray",N+=E-(N?w+x:x)+"px,"+E+"px")}function ne(){o.style("stroke-dasharray","0px,100px")}function X(J,se,V,j){J.path&&(J.noRotate&&(V=0),p.select(s.parentNode).append("path").attr({class:o.attr("class"),d:J.path,transform:t(se.x,se.y)+r(180*V/Math.PI)+e(j)}).style({fill:g.rgb(m.arrowcolor),"stroke-width":0}))}c&&X(h,l,f,_),T&&X(d,i,u,a)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(v,ae,ie){"use strict";var p=v("./draw"),g=v("./click");ae.exports={moduleType:"component",name:"annotations",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("annotations"),calcAutorange:v("./calc_autorange"),draw:p.draw,drawOne:p.drawOne,drawRaw:p.drawRaw,hasClickToShow:g.hasClickToShow,onClick:g.onClick,convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(v,ae,ie){"use strict";var p=v("../annotations/attributes"),g=v("../../plot_api/edit_types").overrideAll,b=v("../../plot_api/plot_template").templatedArray;ae.exports=g(b("annotation",{visible:p.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:p.xanchor,xshift:p.xshift,yanchor:p.yanchor,yshift:p.yshift,text:p.text,textangle:p.textangle,font:p.font,width:p.width,height:p.height,opacity:p.opacity,align:p.align,valign:p.valign,bgcolor:p.bgcolor,bordercolor:p.bordercolor,borderpad:p.borderpad,borderwidth:p.borderwidth,showarrow:p.showarrow,arrowcolor:p.arrowcolor,arrowhead:p.arrowhead,startarrowhead:p.startarrowhead,arrowside:p.arrowside,arrowsize:p.arrowsize,startarrowsize:p.startarrowsize,arrowwidth:p.arrowwidth,standoff:p.standoff,startstandoff:p.startstandoff,hovertext:p.hovertext,hoverlabel:p.hoverlabel,captureevents:p.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes");function b(y,e){var r=e.fullSceneLayout.domain,t=e.fullLayout._size,o={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};y._xa={},p.extendFlat(y._xa,o),g.setConvert(y._xa),y._xa._offset=t.l+r.x[0]*t.w,y._xa.l2p=function(){return.5*(1+y._pdata[0]/y._pdata[3])*t.w*(r.x[1]-r.x[0])},y._ya={},p.extendFlat(y._ya,o),g.setConvert(y._ya),y._ya._offset=t.t+(1-r.y[1])*t.h,y._ya.l2p=function(){return.5*(1-y._pdata[1]/y._pdata[3])*t.h*(r.y[1]-r.y[0])}}ae.exports=function(y){for(var e=y.fullSceneLayout.annotations,r=0;r<e.length;r++)b(e[r],y);y.fullLayout._infolayer.selectAll(".annotation-"+y.id).remove()}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("../annotations/common_defaults"),e=v("./attributes");function r(t,o,n,m){function l(f,u){return p.coerce(t,o,e,f,u)}function i(f){var u=f+"axis",s={_fullLayout:{}};return s._fullLayout[u]=n[u],g.coercePosition(o,s,l,f,f,.5)}l("visible")&&(y(t,o,m.fullLayout,l),i("x"),i("y"),i("z"),p.noneOrAll(t,o,["x","y","z"]),o.xref="x",o.yref="y",o.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),o.showarrow&&(o.axref="pixel",o.ayref="pixel",l("ax",-10),l("ay",-30),p.noneOrAll(t,o,["ax","ay"])))}ae.exports=function(t,o,n){b(t,o,{name:"annotations",handleItemDefaults:r,fullLayout:n.fullLayout})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(v,ae,ie){"use strict";var p=v("../annotations/draw").drawRaw,g=v("../../plots/gl3d/project"),b=["x","y","z"];ae.exports=function(y){for(var e=y.fullSceneLayout,r=y.dataScale,t=e.annotations,o=0;o<t.length;o++){for(var n=t[o],m=!1,l=0;l<3;l++){var i=b[l],u=e[i+"axis"].r2fraction(n[i]);if(u<0||u>1){m=!0;break}}m?y.fullLayout._infolayer.select(".annotation-"+y.id+'[data-index="'+o+'"]').remove():(n._pdata=g(y.glplot.cameraParams,[e.xaxis.r2l(n.x)*r[0],e.yaxis.r2l(n.y)*r[1],e.zaxis.r2l(n.z)*r[2]]),p(y.graphDiv,n,o,y.id,n._xa,n._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib");ae.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),includeBasePlot:function(b,y){var e=p.subplotsRegistry.gl3d;if(e)for(var r=e.attrRegex,t=Object.keys(b),o=0;o<t.length;o++){var n=t[o];r.test(n)&&(b[n].annotations||[]).length&&(g.pushUnique(y._basePlotModules,e),g.pushUnique(y._subplots.gl3d,n))}},convert:v("./convert"),draw:v("./draw")}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(v,ae,ie){"use strict";ae.exports=v("world-calendars/dist/main"),v("world-calendars/dist/plus"),v("world-calendars/dist/calendars/chinese"),v("world-calendars/dist/calendars/coptic"),v("world-calendars/dist/calendars/discworld"),v("world-calendars/dist/calendars/ethiopian"),v("world-calendars/dist/calendars/hebrew"),v("world-calendars/dist/calendars/islamic"),v("world-calendars/dist/calendars/julian"),v("world-calendars/dist/calendars/mayan"),v("world-calendars/dist/calendars/nanakshahi"),v("world-calendars/dist/calendars/nepali"),v("world-calendars/dist/calendars/persian"),v("world-calendars/dist/calendars/taiwan"),v("world-calendars/dist/calendars/thai"),v("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(v,ae,ie){"use strict";var p=v("./calendars"),g=v("../../lib"),b=v("../../constants/numerical"),y=b.EPOCHJD,e=b.ONEDAY,r={valType:"enumerated",values:g.sortObjectKeys(p.calendars),editType:"calc",dflt:"gregorian"},t=function(h,a,_,c){var T={};return T[_]=r,g.coerce(h,a,T,_,c)},o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},n={};function m(h){return n[h]||(n[h]=p.instance(h))}function l(h){return g.extendFlat({},r,{description:h})}function i(h){return"Sets the calendar system to use with `"+h+"` date data."}var f={xcalendar:l(i("x"))},u=g.extendFlat({},f,{ycalendar:l(i("y"))}),s=g.extendFlat({},u,{zcalendar:l(i("z"))}),d=l(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ae.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:s,surface:s,mesh3d:s,scattergl:u,ohlc:f,candlestick:f},layout:{calendar:l(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:d},yaxis:{calendar:d},scene:{xaxis:{calendar:d},yaxis:{calendar:d},zaxis:{calendar:d}},polar:{radialaxis:{calendar:d}}},transforms:{filter:{valuecalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:r,handleDefaults:t,handleTraceDefaults:function(h,a,_,c){for(var T=0;T<_.length;T++)t(h,a,_[T]+"calendar",c.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:m,worldCalFmt:function(h,a,_){for(var c,T,x,w,M,D=Math.floor((a+.05)/e)+y,C=m(_).fromJD(D),P=0;-1!==(P=h.indexOf("%",P));)"0"===(c=h.charAt(P+1))||"-"===c||"_"===c?(x=3,T=h.charAt(P+2),"_"===c&&(c="-")):(T=c,c="0",x=2),(w=o[T])?(M="##"===w?"##":C.formatDate(w[c]),h=h.substr(0,P)+M+h.substr(P+x),P+=M.length):P+=x;return h}}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(v,ae,ie){"use strict";ie.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ie.defaultLine="#444",ie.lightLine="#eee",ie.background="#fff",ie.borderLine="#BEC8D9",ie.lightFraction=1e3/11},{}],367:[function(v,ae,ie){"use strict";var p=v("tinycolor2"),g=v("fast-isnumeric"),b=v("../../lib/array").isTypedArray,y=ae.exports={},e=v("./attributes");y.defaults=e.defaults;var r=y.defaultLine=e.defaultLine;y.lightLine=e.lightLine;var t=y.background=e.background;function o(n){if(g(n)||"string"!=typeof n)return n;var m=n.trim();if("rgb"!==m.substr(0,3))return n;var l=m.match(/^rgba?\s*\(([^()]*)\)$/);if(!l)return n;var i=l[1].trim().split(/\s*[\s,]\s*/),f="a"===m.charAt(3)&&4===i.length;if(!f&&3!==i.length)return n;for(var u=0;u<i.length;u++){if(!(i[u].length&&(i[u]=Number(i[u]),i[u]>=0)))return n;if(3===u)i[u]>1&&(i[u]=1);else if(i[u]>=1)return n}var s=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return f?"rgba("+s+", "+i[3]+")":"rgb("+s+")"}y.tinyRGB=function(n){var m=n.toRgb();return"rgb("+Math.round(m.r)+", "+Math.round(m.g)+", "+Math.round(m.b)+")"},y.rgb=function(n){return y.tinyRGB(p(n))},y.opacity=function(n){return n?p(n).getAlpha():0},y.addOpacity=function(n,m){var l=p(n).toRgb();return"rgba("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+", "+m+")"},y.combine=function(n,m){var l=p(n).toRgb();if(1===l.a)return p(n).toRgbString();var i=p(m||t).toRgb(),f=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return p({r:f.r*(1-l.a)+l.r*l.a,g:f.g*(1-l.a)+l.g*l.a,b:f.b*(1-l.a)+l.b*l.a}).toRgbString()},y.contrast=function(n,m,l){var i=p(n);return 1!==i.getAlpha()&&(i=p(y.combine(n,t))),(i.isDark()?m?i.lighten(m):t:l?i.darken(l):r).toString()},y.stroke=function(n,m){var l=p(m);n.style({stroke:y.tinyRGB(l),"stroke-opacity":l.getAlpha()})},y.fill=function(n,m){var l=p(m);n.style({fill:y.tinyRGB(l),"fill-opacity":l.getAlpha()})},y.clean=function(n){if(n&&"object"==typeof n){var m,l,i,f,u=Object.keys(n);for(m=0;m<u.length;m++)if(f=n[i=u[m]],"color"===i.substr(i.length-5))if(Array.isArray(f))for(l=0;l<f.length;l++)f[l]=o(f[l]);else n[i]=o(f);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(f))for(l=0;l<f.length;l++)Array.isArray(f[l])&&(f[l][1]=o(f[l][1]));else if(Array.isArray(f)){var s=f[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(l=0;l<f.length;l++)y.clean(f[l])}else f&&"object"==typeof f&&!b(f)&&y.clean(f)}}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/layout_attributes"),g=v("../../plots/font_attributes"),b=v("../../lib/extend").extendFlat,y=v("../../plot_api/edit_types").overrideAll;ae.exports=y({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:p.linecolor,outlinewidth:p.linewidth,bordercolor:p.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:b({},p.ticks,{dflt:""}),ticklabeloverflow:b({},p.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,ticklabelstep:p.ticklabelstep,showticklabels:p.showticklabels,tickfont:g({}),tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,separatethousands:p.separatethousands,exponentformat:p.exponentformat,minexponent:p.minexponent,showexponent:p.showexponent,title:{text:{valType:"string"},font:g({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:g({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(v,ae,ie){"use strict";ae.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plot_api/plot_template"),b=v("../../plots/cartesian/tick_value_defaults"),y=v("../../plots/cartesian/tick_mark_defaults"),e=v("../../plots/cartesian/tick_label_defaults"),r=v("../../plots/cartesian/prefix_suffix_defaults"),t=v("./attributes");ae.exports=function(o,n,m){var l=g.newContainer(n,"colorbar"),i=o.colorbar||{};function f(D,C){return p.coerce(i,l,t,D,C)}var u=m.margin||{t:0,b:0,l:0,r:0},s=m.width-u.l-u.r,d=m.height-u.t-u.b,h="v"===f("orientation"),a=f("thicknessmode");f("thickness","fraction"===a?30/(h?s:d):30);var _=f("lenmode");f("len","fraction"===_?1:h?d:s),f("x",h?1.02:.5),f("xanchor",h?"left":"center"),f("xpad"),f("y",h?.5:1.02),f("yanchor",h?"middle":"bottom"),f("ypad"),p.noneOrAll(i,l,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor");var c=p.coerce(i,l,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:h?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");f("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"hide past div"),b(i,l,f,"linear");var T=m.font,x={outerTicks:!1,font:T};-1!==c.indexOf("inside")&&(x.bgColor="black"),r(i,l,f,"linear",x),e(i,l,f,"linear",x),y(i,l,f,"linear",x),f("title.text",m._dfltTitle.colorbar);var w=l.tickfont,M=p.extendFlat({},w,{color:T.color,size:p.bigFont(w.size)});p.coerceFont(f,"title.font",M),f("title.side",h?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("tinycolor2"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../plots/cartesian/axes"),r=v("../dragelement"),t=v("../../lib"),o=t.strTranslate,n=v("../../lib/extend").extendFlat,m=v("../../lib/setcursor"),l=v("../drawing"),i=v("../color"),f=v("../titles"),u=v("../../lib/svg_text_utils"),s=v("../colorscale/helpers").flipScale,d=v("../../plots/cartesian/axis_defaults"),h=v("../../plots/cartesian/position_defaults"),a=v("../../plots/cartesian/layout_attributes"),_=v("../../constants/alignment"),c=_.LINE_SPACING,T=_.FROM_TL,x=_.FROM_BR,w=v("./constants").cn;ae.exports={draw:function(M){var D=M._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(C){var P,L,S,E,N=C._fullLayout,z=C.calcdata,q=[];function G(te){return n(te,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function K(){"function"==typeof E.calc?E.calc(C,S,P):(P._fillgradient=L.reversescale?s(L.colorscale):L.colorscale,P._zrange=[L[E.min],L[E.max]])}for(var ne=0;ne<z.length;ne++){var J=(S=z[ne][0].trace)._module.colorbar;if(!0===S.visible&&J)for(var se=Array.isArray(J),V=se?J:[J],j=0;j<V.length;j++){var H=(E=V[j]).container;(L=H?S[H]:S)&&L.showscale&&((P=G(L.colorbar))._id="cb"+S.uid+(se&&H?"-"+H:""),P._traceIndex=S.index,P._propPrefix=(H?H+".":"")+"colorbar.",P._meta=S._meta,K(),q.push(P))}}for(var oe in N._colorAxes)if((L=N[oe]).showscale){var U=N._colorAxes[oe];(P=G(L.colorbar))._id="cb"+oe,P._propPrefix=oe+".colorbar.",P._meta=N._meta,E={min:"cmin",max:"cmax"},"heatmap"!==U[0]&&(E.calc=(S=U[1])._module.colorbar.calc),K(),q.push(P)}return q}(M),function(C){return C._id});D.enter().append("g").attr("class",function(C){return C._id}).classed(w.colorbar,!0),D.each(function(C){var P=p.select(this);t.ensureSingle(P,"rect",w.cbbg),t.ensureSingle(P,"g",w.cbfills),t.ensureSingle(P,"g",w.cblines),t.ensureSingle(P,"g",w.cbaxis,function(S){S.classed(w.crisp,!0)}),t.ensureSingle(P,"g",w.cbtitleunshift,function(S){S.append("g").classed(w.cbtitle,!0)}),t.ensureSingle(P,"rect",w.cboutline);var S,E,N,z,q,G,K,ne,L=function(S,E,N){var z="v"===E.orientation,q=E.len,G=E.lenmode,K=E.thickness,ne=E.thicknessmode,X=E.outlinewidth,J=E.borderwidth,se=E.bgcolor,V=E.xanchor,j=E.yanchor,H=E.xpad,oe=E.ypad,U=E.x,te=z?E.y:1-E.y,ee=N._fullLayout,le=ee._size,ce=E._fillcolor,pe=E._line,de=E.title,be=de.side,he=E._zrange||p.extent(("function"==typeof ce?ce:pe.color).domain()),xe="function"==typeof pe.color?pe.color:function(){return pe.color},De="function"==typeof ce?ce:function(){return ce},Se=E._levels,ke=function(mn,nn,Xe){var nt,ye,Ce=nn._levels,Ue=[],Qe=[],rt=Ce.end+Ce.size/100,Ke=Ce.size,gt=1.001*Xe[0]-.001*Xe[1],mt=1.001*Xe[1]-.001*Xe[0];for(ye=0;ye<1e5&&(nt=Ce.start+ye*Ke,!(Ke>0?nt>=rt:nt<=rt));ye++)nt>gt&&nt<mt&&Ue.push(nt);if(nn._fillgradient)Qe=[0];else if("function"==typeof nn._fillcolor){var Lt=nn._filllevels;if(Lt)for(rt=Lt.end+Lt.size/100,Ke=Lt.size,ye=0;ye<1e5&&(nt=Lt.start+ye*Ke,!(Ke>0?nt>=rt:nt<=rt));ye++)nt>Xe[0]&&nt<Xe[1]&&Qe.push(nt);else(Qe=Ue.map(function(Vt){return Vt-Ce.size/2})).push(Qe[Qe.length-1]+Ce.size)}else nn._fillcolor&&"string"==typeof nn._fillcolor&&(Qe=[0]);return Ce.size<0&&(Ue.reverse(),Qe.reverse()),{line:Ue,fill:Qe}}(0,E,he),Fe=ke.fill,ve=ke.line,Te=Math.round(K*("fraction"===ne?z?le.w:le.h:1)),Le=Te/(z?le.w:le.h),Oe=Math.round(q*("fraction"===G?z?le.h:le.w:1)),Ne=Oe/(z?le.h:le.w),Be=Math.round(z?U*le.w+H:te*le.h+oe),He={center:.5,right:1}[V]||0,Ve={top:1,middle:.5}[j]||0,it=z?U-He*Le:te-Ve*Le,ze=z?te-Ve*Ne:U-He*Ne,je=Math.round(z?le.h*(1-ze):le.w*ze);E._lenFrac=Ne,E._thickFrac=Le,E._uFrac=it,E._vFrac=ze;var qe=E._axis=function(mn,nn,Xe){var nt=mn._fullLayout,ye="v"===nn.orientation,Ce={type:"linear",range:Xe,tickmode:nn.tickmode,nticks:nn.nticks,tick0:nn.tick0,dtick:nn.dtick,tickvals:nn.tickvals,ticktext:nn.ticktext,ticks:nn.ticks,ticklen:nn.ticklen,tickwidth:nn.tickwidth,tickcolor:nn.tickcolor,showticklabels:nn.showticklabels,ticklabelposition:nn.ticklabelposition,ticklabeloverflow:nn.ticklabeloverflow,ticklabelstep:nn.ticklabelstep,tickfont:nn.tickfont,tickangle:nn.tickangle,tickformat:nn.tickformat,exponentformat:nn.exponentformat,minexponent:nn.minexponent,separatethousands:nn.separatethousands,showexponent:nn.showexponent,showtickprefix:nn.showtickprefix,tickprefix:nn.tickprefix,showticksuffix:nn.showticksuffix,ticksuffix:nn.ticksuffix,title:nn.title,showline:!0,anchor:"free",side:ye?"right":"bottom",position:1},Ue=ye?"y":"x",Qe={type:"linear",_id:Ue+nn._id},rt={letter:Ue,font:nt.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:nt.calendar};function Ke(gt,mt){return t.coerce(Ce,Qe,a,gt,mt)}return d(Ce,Qe,Ke,rt,nt),h(Ce,Qe,Ke,rt),Qe}(N,E,he);qe.position=Le+(z?U+H/le.w:te+oe/le.h);var Ye=-1!==["top","bottom"].indexOf(be);if(z&&Ye&&(qe.title.side=be,qe.titlex=U+H/le.w,qe.titley=ze+("top"===de.side?Ne-oe/le.h:oe/le.h)),z||Ye||(qe.title.side=be,qe.titley=te+oe/le.h,qe.titlex=ze+H/le.w),pe.color&&"auto"===E.tickmode){qe.tickmode="linear",qe.tick0=Se.start;var ct=Se.size,vt=t.constrain(Oe/50,4,15)+1,wt=(he[1]-he[0])/((E.nticks||vt)*ct);if(wt>1){var Ot=Math.pow(10,Math.floor(Math.log(wt)/Math.LN10));ct*=Ot*t.roundUp(wt/Ot,[2,5,10]),(Math.abs(Se.start)/Se.size+1e-6)%1<2e-6&&(qe.tick0=0)}qe.dtick=ct}qe.domain=z?[ze+oe/le.h,ze+Ne-oe/le.h]:[ze+H/le.w,ze+Ne-H/le.w],qe.setScale(),S.attr("transform",o(Math.round(le.l),Math.round(le.t)));var St,ft=S.select("."+w.cbtitleunshift).attr("transform",o(-Math.round(le.l),-Math.round(le.t))),st=qe.ticklabelposition,Ct=qe.title.font.size,$t=S.select("."+w.cbaxis),rn=0,hn=0;function cn(mn,nn){var Xe={propContainer:qe,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:ee._dfltTitle.colorbar,containerGroup:S.select("."+w.cbtitle)},nt="h"===mn.charAt(0)?mn.substr(1):"h"+mn;S.selectAll("."+nt+",."+nt+"-math-group").remove(),f.draw(N,mn,n(Xe,nn||{}))}return t.syncOrAsync([b.previousPromises,function(){var mn,nn;(z&&Ye||!z&&!Ye)&&("top"===be&&(mn=H+le.l+le.w*U,nn=oe+le.t+le.h*(1-ze-Ne)+3+.75*Ct),"bottom"===be&&(mn=H+le.l+le.w*U,nn=oe+le.t+le.h*(1-ze)-3-.25*Ct),"right"===be&&(nn=oe+le.t+le.h*te+3+.75*Ct,mn=H+le.l+le.w*ze),cn(qe._id+"title",{attributes:{x:mn,y:nn,"text-anchor":z?"start":"middle"}}))},function(){if(!z&&!Ye||z&&Ye){var mn,nn=S.select("."+w.cbtitle),Xe=nn.select("text"),nt=[-X/2,X/2],ye=nn.select(".h"+qe._id+"title-math-group").node(),Ce=15.6;if(Xe.node()&&(Ce=parseInt(Xe.node().style.fontSize,10)*c),ye?(mn=l.bBox(ye),hn=mn.width,(rn=mn.height)>Ce&&(nt[1]-=(rn-Ce)/2)):Xe.node()&&!Xe.classed(w.jsPlaceholder)&&(mn=l.bBox(Xe.node()),hn=mn.width,rn=mn.height),z){if(rn){if(rn+=5,"top"===be)qe.domain[1]-=rn/le.h,nt[1]*=-1;else{qe.domain[0]+=rn/le.h;var Ue=u.lineCount(Xe);nt[1]+=(1-Ue)*Ce}nn.attr("transform",o(nt[0],nt[1])),qe.setScale()}}else hn&&("right"===be&&(qe.domain[0]+=(hn+Ct/2)/le.w),nn.attr("transform",o(nt[0],nt[1])),qe.setScale())}S.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",z?o(0,Math.round(le.h*(1-qe.domain[1]))):o(Math.round(le.w*qe.domain[0]),0)),$t.attr("transform",z?o(0,Math.round(-le.t)):o(Math.round(-le.l),0));var Qe=S.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(Fe);Qe.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Qe.exit().remove();var rt=he.map(qe.c2p).map(Math.round).sort(function(Vt,dt){return Vt-dt});Qe.each(function(Vt,dt){var bt=[0===dt?he[0]:(Fe[dt]+Fe[dt-1])/2,dt===Fe.length-1?he[1]:(Fe[dt]+Fe[dt+1])/2].map(qe.c2p).map(Math.round);z&&(bt[1]=t.constrain(bt[1]+(bt[1]>bt[0])?1:-1,rt[0],rt[1]));var Yt=p.select(this).attr(z?"x":"y",Be).attr(z?"y":"x",p.min(bt)).attr(z?"width":"height",Math.max(Te,2)).attr(z?"height":"width",Math.max(p.max(bt)-p.min(bt),2));if(E._fillgradient)l.gradient(Yt,N,E._id,z?"vertical":"horizontalreversed",E._fillgradient,"fill");else{var It=De(Vt).replace("e-","");Yt.attr("fill",g(It).toHexString())}});var Ke=S.select("."+w.cblines).selectAll("path."+w.cbline).data(pe.color&&pe.width?ve:[]);Ke.enter().append("path").classed(w.cbline,!0),Ke.exit().remove(),Ke.each(function(Vt){var dt=Be,bt=Math.round(qe.c2p(Vt))+pe.width/2%1;p.select(this).attr("d","M"+(z?dt+","+bt:bt+","+dt)+(z?"h":"v")+Te).call(l.lineGroupStyle,pe.width,xe(Vt),pe.dash)}),$t.selectAll("g."+qe._id+"tick,path").remove();var gt=Be+Te+(X||0)/2-("outside"===E.ticks?1:0),mt=e.calcTicks(qe),Lt=e.getTickSigns(qe)[2];return e.drawTicks(N,qe,{vals:"inside"===qe.ticks?e.clipEnds(qe,mt):mt,layer:$t,path:e.makeTickPath(qe,gt,Lt),transFn:e.makeTransTickFn(qe)}),e.drawLabels(N,qe,{vals:mt,layer:$t,transFn:e.makeTransTickLabelFn(qe),labelFns:e.makeLabelFns(qe,gt)})},function(){if(z&&!Ye||!z&&Ye){var mn,nn,Xe=qe.position||0,nt=qe._offset+qe._length/2;if("right"===be)nn=nt,mn=le.l+le.w*Xe+10+Ct*(qe.showticklabels?1:.5);else if(mn=nt,"bottom"===be&&(nn=le.t+le.h*Xe+10+(-1===st.indexOf("inside")?qe.tickfont.size:0)+("intside"!==qe.ticks&&E.ticklen||0)),"top"===be){var ye=de.text.split("<br>").length;nn=le.t+le.h*Xe+10-Te-c*Ct*ye}cn((z?"h":"v")+qe._id+"title",{avoid:{selection:p.select(N).selectAll("g."+qe._id+"tick"),side:be,offsetTop:z?0:le.t,offsetLeft:z?le.l:0,maxShift:z?ee.width:ee.height},attributes:{x:mn,y:nn,"text-anchor":"middle"},transform:{rotate:z?-90:0,offset:0}})}},b.previousPromises,function(){var mn,nn=Te+X/2;-1===st.indexOf("inside")&&(mn=l.bBox($t.node()),nn+=z?mn.width:mn.height),St=ft.select("text");var Xe=0,nt=z&&"top"===be,ye=!z&&"right"===be,Ce=0;if(St.node()&&!St.classed(w.jsPlaceholder)){var Ue,Qe=ft.select(".h"+qe._id+"title-math-group").node();Qe&&(z&&Ye||!z&&!Ye)?(Xe=(mn=l.bBox(Qe)).width,Ue=mn.height):(Xe=(mn=l.bBox(ft.node())).right-le.l-(z?Be:je),Ue=mn.bottom-le.t-(z?je:Be),z||"top"!==be||(nn+=mn.height,Ce=mn.height)),ye&&(St.attr("transform",o(Xe/2+Ct/2,0)),Xe*=2),nn=Math.max(nn,z?Xe:Ue)}var rt=2*(z?H:oe)+nn+J+X/2,Ke=0;!z&&de.text&&"bottom"===j&&te<=0&&(rt+=Ke=rt/2,Ce+=Ke),ee._hColorbarMoveTitle=Ke,ee._hColorbarMoveCBTitle=Ce;var gt=J+X;S.select("."+w.cbbg).attr("x",(z?Be:je)-gt/2-(z?H:0)).attr("y",(z?je:Be)-(z?Oe:oe+Ce-Ke)).attr(z?"width":"height",Math.max(rt-Ke,2)).attr(z?"height":"width",Math.max(Oe+gt,2)).call(i.fill,se).call(i.stroke,E.bordercolor).style("stroke-width",J);var mt=ye?Math.max(Xe-10,0):0;if(S.selectAll("."+w.cboutline).attr("x",(z?Be:je+H)+mt).attr("y",(z?je+oe-Oe:Be)+(nt?rn:0)).attr(z?"width":"height",Math.max(Te,2)).attr(z?"height":"width",Math.max(Oe-(z?2*oe+rn:2*H+mt),2)).call(i.stroke,E.outlinecolor).style({fill:"none","stroke-width":X}),S.attr("transform",o(le.l-(z?He*rt:0),le.t-(z?0:(1-Ve)*rt-Ce))),!z&&(J||g(se).getAlpha()&&!g.equals(ee.paper_bgcolor,se))){var Lt=$t.selectAll("text"),Vt=Lt[0].length,dt=S.select("."+w.cbbg).node(),bt=l.bBox(dt),Yt=l.getTranslate(S);Lt.each(function(Rt,Xt){var tn=Vt-1;if(0===Xt||Xt===tn){var Kt,kn=l.bBox(this),Vn=l.getTranslate(this);Xt===tn?(Kt=bt.right+Yt.x+je-J-2+U-(kn.right+Vn.x))>0&&(Kt=0):0===Xt&&(Kt=bt.left+Yt.x+je+J+2-(kn.left+Vn.x))<0&&(Kt=0),Kt&&(Vt<3?this.setAttribute("transform","translate("+Kt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var It={},jt=T[V],Ie=x[V],et=T[j],ht=x[j],xt=rt-Te;z?("pixels"===G?(It.y=te,It.t=Oe*et,It.b=Oe*ht):(It.t=It.b=0,It.yt=te+q*et,It.yb=te-q*ht),"pixels"===ne?(It.x=U,It.l=rt*jt,It.r=rt*Ie):(It.l=xt*jt,It.r=xt*Ie,It.xl=U-K*jt,It.xr=U+K*Ie)):("pixels"===G?(It.x=U,It.l=Oe*jt,It.r=Oe*Ie):(It.l=It.r=0,It.xl=U+q*jt,It.xr=U-q*Ie),"pixels"===ne?(It.y=1-te,It.t=rt*et,It.b=rt*ht):(It.t=xt*et,It.b=xt*ht,It.yt=te-K*et,It.yb=te+K*ht)),b.autoMargin(N,E._id,It)}],N)}(P,C,M);L&&L.then&&(M._promises||[]).push(L),M._context.edits.colorbarPosition&&(K="v"===(E=C).orientation,ne=(N=M)._fullLayout._size,r.init({element:(S=P).node(),gd:N,prepFn:function(){z=S.attr("transform"),m(S)},moveFn:function(X,J){S.attr("transform",z+o(X,J)),q=r.align((K?E._uFrac:E._vFrac)+X/ne.w,K?E._thickFrac:E._lenFrac,0,1,E.xanchor),G=r.align((K?E._vFrac:1-E._uFrac)-J/ne.h,K?E._lenFrac:E._thickFrac,0,1,E.yanchor);var se=r.getCursor(q,G,E.xanchor,E.yanchor);m(S,se)},doneFn:function(){if(m(S),void 0!==q&&void 0!==G){var X={};X[E._propPrefix+"x"]=q,X[E._propPrefix+"y"]=G,void 0!==E._traceIndex?y.call("_guiRestyle",N,X,E._traceIndex):y.call("_guiRelayout",N,X)}}}))}),D.exit().each(function(C){b.autoMargin(M,C._id)}).remove(),D.order()}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g){return p.isPlainObject(g.colorbar)}},{"../../lib":515}],373:[function(v,ae,ie){"use strict";ae.exports={moduleType:"component",name:"colorbar",attributes:v("./attributes"),supplyDefaults:v("./defaults"),draw:v("./draw").draw,hasColorbar:v("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(v,ae,ie){"use strict";var p=v("../colorbar/attributes"),g=v("../../lib/regex").counter,b=v("../../lib/sort_object_keys"),y=v("./scales.js").scales;function e(r){return"`"+r+"`"}b(y),ae.exports=function(r,t){r=r||"";var o,n=(t=t||{}).cLetter||"c",m=("onlyIfNumerical"in t||Boolean(r),"noScale"in t?t.noScale:"marker.line"===r),l="showScaleDflt"in t?t.showScaleDflt:"z"===n,i="string"==typeof t.colorscaleDflt?y[t.colorscaleDflt]:null,f=t.editTypeOverride||"",u=r?r+".":"";"colorAttr"in t?o=t.colorAttr:e(u+(o={z:"z",c:"color"}[n]));var s=n+"auto",d=n+"min",h=n+"max",a=n+"mid",_=(e(u+s),e(u+d),e(u+h),{});_[d]=_[h]=void 0;var c={};c[s]=!1;var T={};return"color"===o&&(T.color={valType:"color",arrayOk:!0,editType:f||"style"},t.anim&&(T.color.anim=!0)),T[s]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:_},T[d]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:c},T[h]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:c},T[a]={valType:"number",dflt:null,editType:"calc",impliedEdits:_},T.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},T.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},T.reversescale={valType:"boolean",dflt:!1,editType:"plot"},m||(T.showscale={valType:"boolean",dflt:l,editType:"calc"},T.colorbar=p),t.noColorAxis||(T.coloraxis={valType:"subplotid",regex:g("coloraxis"),dflt:null,editType:"calc"}),T}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("./helpers").extractOpts;ae.exports=function(y,e,r){var o=y._fullLayout,n=r.vals,m=r.containerStr,l=m?g.nestedProperty(e,m).get():e,i=b(l),f=!1!==i.auto,u=i.min,s=i.max,d=i.mid,h=function(){return g.aggNums(Math.min,null,n)},a=function(){return g.aggNums(Math.max,null,n)};void 0===u?u=h():f&&(u=l._colorAx&&p(u)?Math.min(u,h()):h()),void 0===s?s=a():f&&(s=l._colorAx&&p(s)?Math.max(s,a()):a()),f&&void 0!==d&&(s-d>d-u?u=d-(s-d):s-d<d-u&&(s=d+(d-u))),u===s&&(u-=.5,s+=.5),i._sync("min",u),i._sync("max",s),i.autocolorscale&&i._sync("colorscale",u*s<0?o.colorscale.diverging:u>=0?o.colorscale.sequential:o.colorscale.sequentialminus)}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./helpers").hasColorscale,b=v("./helpers").extractOpts;ae.exports=function(y,e){function r(f,u){var s=f["_"+u];void 0!==s&&(f[u]=s)}function t(f,u){var s=u.container?p.nestedProperty(f,u.container).get():f;if(s)if(s.coloraxis)s._colorAx=e[s.coloraxis];else{var d=b(s),h=d.auto;(h||void 0===d.min)&&r(s,u.min),(h||void 0===d.max)&&r(s,u.max),d.autocolorscale&&r(s,"colorscale")}}for(var o=0;o<y.length;o++){var n=y[o],m=n._module.colorbar;if(m)if(Array.isArray(m))for(var l=0;l<m.length;l++)t(n,m[l]);else t(n,m);g(n,"marker.line")&&t(n,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)t(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../colorbar/has_colorbar"),y=v("../colorbar/defaults"),e=v("./scales").isValid,r=v("../../registry").traceIs;function t(o,n){var m=n.slice(0,n.length-1);return n?g.nestedProperty(o,m).get()||{}:o}ae.exports=function o(n,m,l,i,f){var u=f.prefix,s=f.cLetter,d="_module"in m,h=t(n,u),a=t(m,u),_=t(m._template||{},u)||{},c=function(){return delete n.coloraxis,delete m.coloraxis,o(n,m,l,i,f)};if(d){var T=l._colorAxes||{},x=i(u+"coloraxis");if(x){var w=r(m,"contour")&&g.nestedProperty(m,"contours.coloring").get()||"heatmap",M=T[x];return void(M?(M[2].push(c),M[0]!==w&&(M[0]=!1,g.warn(["Ignoring coloraxis:",x,"setting","as it is linked to incompatible colorscales."].join(" ")))):T[x]=[w,m,[c]])}}var D=h[s+"min"],C=h[s+"max"],P=p(D)&&p(C)&&D<C;i(u+s+"auto",!P)?i(u+s+"mid"):(i(u+s+"min"),i(u+s+"max"));var L,S,E=h.colorscale,N=_.colorscale;void 0!==E&&(L=!e(E)),void 0!==N&&(L=!e(N)),i(u+"autocolorscale",L),i(u+"colorscale"),i(u+"reversescale"),"marker.line."!==u&&(u&&d&&(S=b(h)),i(u+"showscale",S)&&(u&&_&&(a._template=_),y(h,a,l)))}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("tinycolor2"),b=v("fast-isnumeric"),y=v("../../lib"),e=v("../color"),r=v("./scales").isValid,t=["showscale","autocolorscale","colorscale","reversescale","colorbar"],o=["min","max","mid","auto"];function n(u){var s,d,h,a=u._colorAx,_=a||u,c={};for(d=0;d<t.length;d++)c[h=t[d]]=_[h];if(a)for(s="c",d=0;d<o.length;d++)c[h=o[d]]=_["c"+h];else{var T;for(d=0;d<o.length;d++)((T="c"+(h=o[d]))in _||(T="z"+h)in _)&&(c[h]=_[T]);s=T.charAt(0)}return c._sync=function(x,w){var M=-1!==o.indexOf(x)?s+x:x;_[M]=_["_"+M]=w},c}function m(u){for(var s=n(u),d=s.min,h=s.max,a=s.reversescale?l(s.colorscale):s.colorscale,_=a.length,c=new Array(_),T=new Array(_),x=0;x<_;x++){var w=a[x];c[x]=d+w[0]*(h-d),T[x]=w[1]}return{domain:c,range:T}}function l(u){for(var s=u.length,d=new Array(s),h=s-1,a=0;h>=0;h--,a++){var _=u[h];d[a]=[1-_[0],_[1]]}return d}function i(u,s){s=s||{};for(var d=u.domain,h=u.range,a=h.length,_=new Array(a),c=0;c<a;c++){var T=g(h[c]).toRgb();_[c]=[T.r,T.g,T.b,T.a]}var x,w=p.scale.linear().domain(d).range(_).clamp(!0),M=s.noNumericCheck,D=s.returnArray;return(x=M&&D?w:M?function(C){return f(w(C))}:D?function(C){return b(C)?w(C):g(C).isValid()?C:e.defaultLine}:function(C){return b(C)?f(w(C)):g(C).isValid()?C:e.defaultLine}).domain=w.domain,x.range=function(){return h},x}function f(u){return g({r:u[0],g:u[1],b:u[2],a:u[3]}).toRgbString()}ae.exports={hasColorscale:function(u,s,d){var h=s?y.nestedProperty(u,s).get()||{}:u,a=h[d||"color"],_=!1;if(y.isArrayOrTypedArray(a))for(var c=0;c<a.length;c++)if(b(a[c])){_=!0;break}return y.isPlainObject(h)&&(_||!0===h.showscale||b(h.cmin)&&b(h.cmax)||r(h.colorscale)||y.isPlainObject(h.colorbar))},extractOpts:n,extractScale:m,flipScale:l,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(u,s){return i(m(u),s)}}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(v,ae,ie){"use strict";var p=v("./scales"),g=v("./helpers");ae.exports={moduleType:"component",name:"colorscale",attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),handleDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc"),scales:p.scales,defaultScale:p.defaultScale,getScale:p.get,isValidScale:p.isValid,hasColorscale:g.hasColorscale,extractOpts:g.extractOpts,extractScale:g.extractScale,flipScale:g.flipScale,makeColorScaleFunc:g.makeColorScaleFunc,makeColorScaleFuncFromTrace:g.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(v,ae,ie){"use strict";var p=v("../../lib/extend").extendFlat,g=v("./attributes"),b=v("./scales").scales;ae.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:p({_isSubplotObj:!0,editType:"calc"},g("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plot_api/plot_template"),b=v("./layout_attributes"),y=v("./defaults");ae.exports=function(e,r){function t(s,d){return p.coerce(e,r,b,s,d)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var o,n,m=r._colorAxes;function l(s,d){return p.coerce(o,n,b.coloraxis,s,d)}for(var i in m){var f=m[i];if(f[0])o=e[i]||{},(n=g.newContainer(r,i,"coloraxis"))._name=i,y(o,n,r,l,{prefix:"",cLetter:"c"});else{for(var u=0;u<f[2].length;u++)f[2][u]();delete r._colorAxes[i]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(v,ae,ie){"use strict";var p=v("tinycolor2"),g={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=g.RdBu;function y(e){var r=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var t=0;t<e.length;t++){var o=e[t];if(2!==o.length||+o[0]<r||!p(o[1]).isValid())return!1;r=+o[0]}return!0}ae.exports={scales:g,defaultScale:b,get:function(e,r){if(r||(r=b),!e)return r;function t(){try{e=g[e]||JSON.parse(e)}catch{e=r}}return"string"==typeof e&&(t(),"string"==typeof e&&t()),y(e)?e:r},isValid:function(e){return void 0!==g[e]||y(e)}}},{tinycolor2:313}],383:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){var r=(p-b)/(y-b),t=r+g/(y-b),o=(r+t)/2;return"left"===e||"bottom"===e?r:"center"===e||"middle"===e?o:"right"===e||"top"===e?t:r<2/3-o?r:t>4/3-o?t:o}},{}],384:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ae.exports=function(b,y,e,r){return b="left"===e?0:"center"===e?1:"right"===e?2:p.constrain(Math.floor(3*b),0,2),y="bottom"===r?0:"middle"===r?1:"top"===r?2:p.constrain(Math.floor(3*y),0,2),g[y][b]}},{"../../lib":515}],385:[function(v,ae,ie){"use strict";ie.selectMode=function(p){return"lasso"===p||"select"===p},ie.drawMode=function(p){return"drawclosedpath"===p||"drawopenpath"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p},ie.openMode=function(p){return"drawline"===p||"drawopenpath"===p},ie.rectMode=function(p){return"select"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p},ie.freeMode=function(p){return"lasso"===p||"drawclosedpath"===p||"drawopenpath"===p},ie.selectingOrDrawing=function(p){return ie.freeMode(p)||ie.rectMode(p)}},{}],386:[function(v,ae,ie){"use strict";var p=v("mouse-event-offset"),g=v("has-hover"),b=v("has-passive-events"),y=v("../../lib").removeElement,e=v("../../plots/cartesian/constants"),r=ae.exports={};r.align=v("./align"),r.getCursor=v("./cursor");var t=v("./unhover");function o(){var m=document.createElement("div");m.className="dragcover";var l=m.style;return l.position="fixed",l.left=0,l.right=0,l.top=0,l.bottom=0,l.zIndex=999999999,l.background="none",document.body.appendChild(m),m}function n(m){return p(m.changedTouches?m.changedTouches[0]:m,document.body)}r.unhover=t.wrapped,r.unhoverRaw=t.raw,r.init=function(m){var l,i,f,u,s,d,h,a,_=m.gd,c=1,T=_._context.doubleClickDelay,x=m.element;_._mouseDownTime||(_._mouseDownTime=0),x.style.pointerEvents="all",x.onmousedown=M,b?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=M,x.addEventListener("touchstart",M,{passive:!1})):x.ontouchstart=M;var w=m.clampFn||function(P,L,S){return Math.abs(P)<S&&(P=0),Math.abs(L)<S&&(L=0),[P,L]};function M(P){_._dragged=!1,_._dragging=!0;var L=n(P);l=L[0],i=L[1],h=P.target,d=P,a=2===P.buttons||P.ctrlKey,void 0===P.clientX&&void 0===P.clientY&&(P.clientX=l,P.clientY=i),(f=(new Date).getTime())-_._mouseDownTime<T?c+=1:(c=1,_._mouseDownTime=f),m.prepFn&&m.prepFn(P,l,i),g&&!a?(s=o()).style.cursor=window.getComputedStyle(x).cursor:g||(s=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor),document.addEventListener("mouseup",C),document.addEventListener("touchend",C),!1!==m.dragmode&&(P.preventDefault(),document.addEventListener("mousemove",D),document.addEventListener("touchmove",D,{passive:!1}))}function D(P){P.preventDefault();var L=n(P),E=w(L[0]-l,L[1]-i,m.minDrag||e.MINDRAG),N=E[0],z=E[1];(N||z)&&(_._dragged=!0,r.unhover(_,P)),_._dragged&&m.moveFn&&!a&&(_._dragdata={element:x,dx:N,dy:z},m.moveFn(N,z))}function C(P){if(delete _._dragdata,!1!==m.dragmode&&(P.preventDefault(),document.removeEventListener("mousemove",D),document.removeEventListener("touchmove",D)),document.removeEventListener("mouseup",C),document.removeEventListener("touchend",C),g?y(s):u&&(s.documentElement.style.cursor=u,u=null),_._dragging){if(_._dragging=!1,(new Date).getTime()-_._mouseDownTime>T&&(c=Math.max(c-1,1)),_._dragged)m.doneFn&&m.doneFn();else if(m.clickFn&&m.clickFn(c,d),!a){var L;try{L=new MouseEvent("click",P)}catch{var S=n(P);(L=document.createEvent("MouseEvents")).initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,S[0],S[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}h.dispatchEvent(L)}_._dragging=!1,_._dragged=!1}else _._dragged=!1}},r.coverSlip=o},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(v,ae,ie){"use strict";var p=v("../../lib/events"),g=v("../../lib/throttle"),b=v("../../lib/dom").getGraphDiv,y=v("../fx/constants"),e=ae.exports={};e.wrapped=function(r,t,o){(r=b(r))._fullLayout&&g.clear(r._fullLayout._uid+y.HOVERID),e.raw(r,t,o)},e.raw=function(r,t){var o=r._fullLayout,n=r._hoverdata;t||(t={}),t.target&&!r._dragged&&!1===p.triggerHandler(r,"plotly_beforehover",t)||(o._hoverlayer.selectAll("g").remove(),o._hoverlayer.selectAll("line").remove(),o._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,t.target&&n&&r.emit("plotly_unhover",{event:t,points:n}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(v,ae,ie){"use strict";ie.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ie.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=g.numberFormat,y=v("fast-isnumeric"),e=v("tinycolor2"),r=v("../../registry"),t=v("../color"),o=v("../colorscale"),n=g.strTranslate,m=v("../../lib/svg_text_utils"),l=v("../../constants/xmlns_namespaces"),i=v("../../constants/alignment").LINE_SPACING,f=v("../../constants/interactions").DESELECTDIM,u=v("../../traces/scatter/subtypes"),s=v("../../traces/scatter/make_bubble_size_func"),d=v("../../components/fx/helpers").appendArrayPointValue,h=ae.exports={};function a(X,J,se){var V=J.fillpattern,j=V&&h.getPatternAttr(V.shape,0,"");if(j){var H=h.getPatternAttr(V.bgcolor,0,null),oe=h.getPatternAttr(V.fgcolor,0,null),U=V.fgopacity,te=h.getPatternAttr(V.size,0,8),ee=h.getPatternAttr(V.solidity,0,.3);h.pattern(X,"point",se,J.uid,j,te,ee,void 0,V.fillmode,H,oe,U)}else J.fillcolor&&X.call(t.fill,J.fillcolor)}h.font=function(X,J,se,V){g.isPlainObject(J)&&(V=J.color,se=J.size,J=J.family),J&&X.style("font-family",J),se+1&&X.style("font-size",se+"px"),V&&X.call(t.fill,V)},h.setPosition=function(X,J,se){X.attr("x",J).attr("y",se)},h.setSize=function(X,J,se){X.attr("width",J).attr("height",se)},h.setRect=function(X,J,se,V,j){X.call(h.setPosition,J,se).call(h.setSize,V,j)},h.translatePoint=function(X,J,se,V){var j=se.c2p(X.x),H=V.c2p(X.y);return!!(y(j)&&y(H)&&J.node())&&("text"===J.node().nodeName?J.attr("x",j).attr("y",H):J.attr("transform",n(j,H)),!0)},h.translatePoints=function(X,J,se){X.each(function(V){var j=p.select(this);h.translatePoint(V,j,J,se)})},h.hideOutsideRangePoint=function(X,J,se,V,j,H){J.attr("display",se.isPtWithinRange(X,j)&&V.isPtWithinRange(X,H)?null:"none")},h.hideOutsideRangePoints=function(X,J){if(J._hasClipOnAxisFalse){var se=J.xaxis,V=J.yaxis;X.each(function(j){var H=j[0].trace,oe=H.xcalendar,U=H.ycalendar,te=r.traceIs(H,"bar-like")?".bartext":".point,.textpoint";X.selectAll(te).each(function(ee){h.hideOutsideRangePoint(ee,p.select(this),se,V,oe,U)})})}},h.crispRound=function(X,J,se){return J&&y(J)?X._context.staticPlot?J:J<1?1:Math.round(J):se||0},h.singleLineStyle=function(X,J,se,V,j){J.style("fill","none");var H=(((X||[])[0]||{}).trace||{}).line||{},oe=se||H.width||0,U=j||H.dash||"";t.stroke(J,V||H.color),h.dashLine(J,U,oe)},h.lineGroupStyle=function(X,J,se,V){X.style("fill","none").each(function(j){var H=(((j||[])[0]||{}).trace||{}).line||{},oe=J||H.width||0,U=V||H.dash||"";p.select(this).call(t.stroke,se||H.color).call(h.dashLine,U,oe)})},h.dashLine=function(X,J,se){J=h.dashStyle(J,se=+se||0),X.style({"stroke-dasharray":J,"stroke-width":se+"px"})},h.dashStyle=function(X,J){J=+J||1;var se=Math.max(J,3);return"solid"===X?X="":"dot"===X?X=se+"px,"+se+"px":"dash"===X?X=3*se+"px,"+3*se+"px":"longdash"===X?X=5*se+"px,"+5*se+"px":"dashdot"===X?X=3*se+"px,"+se+"px,"+se+"px,"+se+"px":"longdashdot"===X&&(X=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),X},h.singleFillStyle=function(X,J){var se=p.select(X.node());a(X,((se.data()[0]||[])[0]||{}).trace||{},J)},h.fillGroupStyle=function(X,J){X.style("stroke-width",0).each(function(se){var V=p.select(this);se[0].trace&&a(V,se[0].trace,J)})};var _=v("./symbol_defs");h.symbolNames=[],h.symbolFuncs=[],h.symbolNeedLines={},h.symbolNoDot={},h.symbolNoFill={},h.symbolList=[],Object.keys(_).forEach(function(X){var J=_[X],se=J.n;h.symbolList.push(se,String(se),X,se+100,String(se+100),X+"-open"),h.symbolNames[se]=X,h.symbolFuncs[se]=J.f,J.needLine&&(h.symbolNeedLines[se]=!0),J.noDot?h.symbolNoDot[se]=!0:h.symbolList.push(se+200,String(se+200),X+"-dot",se+300,String(se+300),X+"-open-dot"),J.noFill&&(h.symbolNoFill[se]=!0)});var c=h.symbolNames.length;function T(X,J){return h.symbolFuncs[X%100](J)+(X>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}h.symbolNumber=function(X){if(y(X))X=+X;else if("string"==typeof X){var J=0;X.indexOf("-open")>0&&(J=100,X=X.replace("-open","")),X.indexOf("-dot")>0&&(J+=200,X=X.replace("-dot","")),(X=h.symbolNames.indexOf(X))>=0&&(X+=J)}return X%100>=c||X>=400?0:Math.floor(Math.max(X,0))};var x={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},M=b("~f"),D={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:x},horizontalreversed:{node:"linearGradient",attrs:x,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};h.gradient=function(X,J,se,V,j,H){for(var oe=j.length,U=D[V],te=new Array(oe),ee=0;ee<oe;ee++)U.reversed?te[oe-1-ee]=[M(100*(1-j[ee][0])),j[ee][1]]:te[ee]=[M(100*j[ee][0]),j[ee][1]];var le=J._fullLayout,ce="g"+le._uid+"-"+se,pe=le._defs.select(".gradients").selectAll("#"+ce).data([V+te.join(";")],g.identity);pe.exit().remove(),pe.enter().append(U.node).each(function(){var de=p.select(this);U.attrs&&de.attr(U.attrs),de.attr("id",ce);var be=de.selectAll("stop").data(te);be.exit().remove(),be.enter().append("stop"),be.each(function(he){var xe=e(he[1]);p.select(this).attr({offset:he[0]+"%","stop-color":t.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),X.style(H,G(ce,J)).style(H+"-opacity",null),X.classed("gradient_filled",!0)},h.pattern=function(X,J,se,V,j,H,oe,U,te,ee,le,ce){var pe="legend"===J;U&&("overlay"===te?le=t.contrast(ee=U):(ee=void 0,le=U));var de,be,he,xe,De,Se,ke,Fe,Te,Oe=se._fullLayout,Ne="p"+Oe._uid+"-"+V,Be={};switch(j){case"/":de=H*Math.sqrt(2),be=H*Math.sqrt(2),Se="path",Be={d:he="M-"+de/4+","+be/4+"l"+de/2+",-"+be/2+"M0,"+be+"L"+de+",0M"+de/4*3+","+be/4*5+"l"+de/2+",-"+be/2,opacity:ce,stroke:le,"stroke-width":(xe=oe*H)+"px"};break;case"\\":de=H*Math.sqrt(2),be=H*Math.sqrt(2),Se="path",Be={d:he="M"+de/4*3+",-"+be/4+"l"+de/2+","+be/2+"M0,0L"+de+","+be+"M-"+de/4+","+be/4*3+"l"+de/2+","+be/2,opacity:ce,stroke:le,"stroke-width":(xe=oe*H)+"px"};break;case"x":de=H*Math.sqrt(2),be=H*Math.sqrt(2),he="M-"+de/4+","+be/4+"l"+de/2+",-"+be/2+"M0,"+be+"L"+de+",0M"+de/4*3+","+be/4*5+"l"+de/2+",-"+be/2+"M"+de/4*3+",-"+be/4+"l"+de/2+","+be/2+"M0,0L"+de+","+be+"M-"+de/4+","+be/4*3+"l"+de/2+","+be/2,xe=H-H*Math.sqrt(1-oe),Se="path",Be={d:he,opacity:ce,stroke:le,"stroke-width":xe+"px"};break;case"|":Se="path",Se="path",Be={d:he="M"+(de=H)/2+",0L"+de/2+","+(be=H),opacity:ce,stroke:le,"stroke-width":(xe=oe*H)+"px"};break;case"-":Se="path",Se="path",Be={d:he="M0,"+(be=H)/2+"L"+(de=H)+","+be/2,opacity:ce,stroke:le,"stroke-width":(xe=oe*H)+"px"};break;case"+":Se="path",he="M"+(de=H)/2+",0L"+de/2+","+(be=H)+"M0,"+be/2+"L"+de+","+be/2,xe=H-H*Math.sqrt(1-oe),Se="path",Be={d:he,opacity:ce,stroke:le,"stroke-width":xe+"px"};break;case".":de=H,be=H,oe<Math.PI/4?De=Math.sqrt(oe*H*H/Math.PI):(ke=oe,Fe=Math.PI/4,1,De=(Te=H/2)+(H/Math.sqrt(2)-Te)*(ke-Fe)/(1-Fe)),Se="circle",Be={cx:de/2,cy:be/2,r:De,opacity:ce,fill:le}}var He=[j||"noSh",ee||"noBg",le||"noFg",H,oe].join(";"),Ve=Oe._defs.select(".patterns").selectAll("#"+Ne).data([He],g.identity);Ve.exit().remove(),Ve.enter().append("pattern").each(function(){var it=p.select(this);if(it.attr({id:Ne,width:de+"px",height:be+"px",patternUnits:"userSpaceOnUse",patternTransform:pe?"scale(0.8)":""}),ee){var ze=it.selectAll("rect").data([0]);ze.exit().remove(),ze.enter().append("rect").attr({width:de+"px",height:be+"px",fill:ee})}var je=it.selectAll(Se).data([0]);je.exit().remove(),je.enter().append(Se).attr(Be)}),X.style("fill",G(Ne,se)).style("fill-opacity",null),X.classed("pattern_filled",!0)},h.initGradients=function(X){g.ensureSingle(X._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),p.select(X).selectAll(".gradient_filled").classed("gradient_filled",!1)},h.initPatterns=function(X){g.ensureSingle(X._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),p.select(X).selectAll(".pattern_filled").classed("pattern_filled",!1)},h.getPatternAttr=function(X,J,se){return X&&g.isArrayOrTypedArray(X)?J<X.length?X[J]:se:X},h.pointStyle=function(X,J,se){if(X.size()){var V=h.makePointStyleFns(J);X.each(function(j){h.singlePointStyle(j,p.select(this),J,V,se)})}},h.singlePointStyle=function(X,J,se,V,j){var H=se.marker,oe=H.line;if(J.style("opacity",V.selectedOpacityFn?V.selectedOpacityFn(X):void 0===X.mo?H.opacity:X.mo),V.ms2mrc){var U;U="various"===X.ms||"various"===H.size?3:V.ms2mrc(X.ms),X.mrc=U,V.selectedSizeFn&&(U=X.mrc=V.selectedSizeFn(X));var te=h.symbolNumber(X.mx||H.symbol)||0;X.om=te%200>=100,J.attr("d",T(te,U))}var ee,le,ce,pe=!1;if(X.so?(ce=oe.outlierwidth,le=oe.outliercolor,ee=H.outliercolor):(ce=(X.mlw+1||(oe||{}).width+1||(X.trace?(X.trace.marker.line||{}).width:0)+1)-1||0,le="mlc"in X?X.mlcc=V.lineScale(X.mlc):g.isArrayOrTypedArray(oe.color)?t.defaultLine:oe.color,g.isArrayOrTypedArray(H.color)&&(ee=t.defaultLine,pe=!0),ee="mc"in X?X.mcc=V.markerScale(X.mc):H.color||"rgba(0,0,0,0)",V.selectedColorFn&&(ee=V.selectedColorFn(X))),X.om)J.call(t.stroke,ee).style({"stroke-width":(ce||1)+"px",fill:"none"});else{J.style("stroke-width",(X.isBlank?0:ce)+"px");var be=H.gradient,he=X.mgt;he?pe=!0:he=be&&be.type,g.isArrayOrTypedArray(he)&&(D[he=he[0]]||(he=0));var xe=H.pattern,De=xe&&h.getPatternAttr(xe.shape,X.i,"");if(he&&"none"!==he){var Se=X.mgc;Se?pe=!0:Se=be.color;var ke=se.uid;pe&&(ke+="-"+X.i),h.gradient(J,j,ke,he,[[0,Se],[1,ee]],"fill")}else if(De){var Fe=h.getPatternAttr(xe.bgcolor,X.i,null),ve=h.getPatternAttr(xe.fgcolor,X.i,null),Te=xe.fgopacity,Le=h.getPatternAttr(xe.size,X.i,8),Oe=h.getPatternAttr(xe.solidity,X.i,.3),Ne=X.mcc||g.isArrayOrTypedArray(xe.shape)||g.isArrayOrTypedArray(xe.bgcolor)||g.isArrayOrTypedArray(xe.size)||g.isArrayOrTypedArray(xe.solidity),Be=se.uid;Ne&&(Be+="-"+X.i),h.pattern(J,"point",j,Be,De,Le,Oe,X.mcc,xe.fillmode,Fe,ve,Te)}else t.fill(J,ee);ce&&t.stroke(J,le)}},h.makePointStyleFns=function(X){var J={},se=X.marker;return J.markerScale=h.tryColorscale(se,""),J.lineScale=h.tryColorscale(se,"line"),r.traceIs(X,"symbols")&&(J.ms2mrc=u.isBubble(X)?s(X):function(){return(se.size||6)/2}),X.selectedpoints&&g.extendFlat(J,h.makeSelectedPointStyleFns(X)),J},h.makeSelectedPointStyleFns=function(X){var J={},j=X.marker||{},H=(X.selected||{}).marker||{},oe=(X.unselected||{}).marker||{},te=H.opacity,ee=oe.opacity,le=void 0!==te,ce=void 0!==ee;(g.isArrayOrTypedArray(j.opacity)||le||ce)&&(J.selectedOpacityFn=function(Fe){var ve=void 0===Fe.mo?j.opacity:Fe.mo;return Fe.selected?le?te:ve:ce?ee:f*ve});var pe=j.color,de=H.color,be=oe.color;(de||be)&&(J.selectedColorFn=function(Fe){var ve=Fe.mcc||pe;return Fe.selected?de||ve:be||ve});var he=j.size,xe=H.size,De=oe.size,Se=void 0!==xe,ke=void 0!==De;return r.traceIs(X,"symbols")&&(Se||ke)&&(J.selectedSizeFn=function(Fe){var ve=Fe.mrc||he/2;return Fe.selected?Se?xe/2:ve:ke?De/2:ve}),J},h.makeSelectedTextStyleFns=function(X){var J={},U=(X.textfont||{}).color,te=((X.selected||{}).textfont||{}).color,ee=((X.unselected||{}).textfont||{}).color;return J.selectedTextColorFn=function(le){var ce=le.tc||U;return le.selected?te||ce:ee||(te?ce:t.addOpacity(ce,f))},J},h.selectedPointStyle=function(X,J){if(X.size()&&J.selectedpoints){var se=h.makeSelectedPointStyleFns(J),V=J.marker||{},j=[];se.selectedOpacityFn&&j.push(function(H,oe){H.style("opacity",se.selectedOpacityFn(oe))}),se.selectedColorFn&&j.push(function(H,oe){t.fill(H,se.selectedColorFn(oe))}),se.selectedSizeFn&&j.push(function(H,oe){var U=oe.mx||V.symbol||0,te=se.selectedSizeFn(oe);H.attr("d",T(h.symbolNumber(U),te)),oe.mrc2=te}),j.length&&X.each(function(H){for(var oe=p.select(this),U=0;U<j.length;U++)j[U](oe,H)})}},h.tryColorscale=function(X,J){var se=J?g.nestedProperty(X,J).get():X;return se&&(se.colorscale||se._colorAx)&&g.isArrayOrTypedArray(se.color)?o.makeColorScaleFuncFromTrace(se):g.identity};var C={start:1,end:-1,middle:0,bottom:1,top:-1};function P(X,J,se,V,j){var H=p.select(X.node().parentNode),oe=-1!==J.indexOf("top")?"top":-1!==J.indexOf("bottom")?"bottom":"middle",U=-1!==J.indexOf("left")?"end":-1!==J.indexOf("right")?"start":"middle",te=V?V/.8+1:0,ee=(m.lineCount(X)-1)*i+1,le=C[U]*te,ce=.75*se+C[oe]*te+(C[oe]-1)*ee*se/2;X.attr("text-anchor",U),j||H.attr("transform",n(le,ce))}function L(X,J){var se=X.ts||J.textfont.size;return y(se)&&se>0?se:0}function S(X,J,se,V){var j=X[0]-J[0],H=X[1]-J[1],oe=se[0]-J[0],U=se[1]-J[1],te=Math.pow(j*j+H*H,.25),ee=Math.pow(oe*oe+U*U,.25),le=(ee*ee*j-te*te*oe)*V,ce=(ee*ee*H-te*te*U)*V,pe=3*ee*(te+ee),de=3*te*(te+ee);return[[p.round(J[0]+(pe&&le/pe),2),p.round(J[1]+(pe&&ce/pe),2)],[p.round(J[0]-(de&&le/de),2),p.round(J[1]-(de&&ce/de),2)]]}h.textPointStyle=function(X,J,se){if(X.size()){var V;if(J.selectedpoints){var j=h.makeSelectedTextStyleFns(J);V=j.selectedTextColorFn}var H=J.texttemplate,oe=se._fullLayout;X.each(function(U){var te=p.select(this),ee=H?g.extractOption(U,J,"txt","texttemplate"):g.extractOption(U,J,"tx","text");if(ee||0===ee){if(H){var le=J._module.formatLabels,ce=le?le(U,J,oe):{},pe={};d(pe,J,U.i),ee=g.texttemplateString(ee,ce,oe._d3locale,pe,U,J._meta||{})}var be=U.tp||J.textposition,he=L(U,J),xe=V?V(U):U.tc||J.textfont.color;te.call(h.font,U.tf||J.textfont.family,he,xe).text(ee).call(m.convertToTspans,se).call(P,be,he,U.mrc)}else te.remove()})}},h.selectedTextStyle=function(X,J){if(X.size()&&J.selectedpoints){var se=h.makeSelectedTextStyleFns(J);X.each(function(V){var j=p.select(this),H=se.selectedTextColorFn(V),oe=V.tp||J.textposition,U=L(V,J);t.fill(j,H);var te=r.traceIs(J,"bar-like");P(j,oe,U,V.mrc2||V.mrc,te)})}},h.smoothopen=function(X,J){if(X.length<3)return"M"+X.join("L");var se,V="M"+X[0],j=[];for(se=1;se<X.length-1;se++)j.push(S(X[se-1],X[se],X[se+1],J));for(V+="Q"+j[0][0]+" "+X[1],se=2;se<X.length-1;se++)V+="C"+j[se-2][1]+" "+j[se-1][0]+" "+X[se];return V+"Q"+j[X.length-3][1]+" "+X[X.length-1]},h.smoothclosed=function(X,J){if(X.length<3)return"M"+X.join("L")+"Z";var se,V="M"+X[0],j=X.length-1,H=[S(X[j],X[0],X[1],J)];for(se=1;se<j;se++)H.push(S(X[se-1],X[se],X[se+1],J));for(H.push(S(X[j-1],X[j],X[0],J)),se=1;se<=j;se++)V+="C"+H[se-1][1]+" "+H[se][0]+" "+X[se];return V+"C"+H[j][1]+" "+H[0][0]+" "+X[0]+"Z"};var E={hv:function(X,J){return"H"+p.round(J[0],2)+"V"+p.round(J[1],2)},vh:function(X,J){return"V"+p.round(J[1],2)+"H"+p.round(J[0],2)},hvh:function(X,J){return"H"+p.round((X[0]+J[0])/2,2)+"V"+p.round(J[1],2)+"H"+p.round(J[0],2)},vhv:function(X,J){return"V"+p.round((X[1]+J[1])/2,2)+"H"+p.round(J[0],2)+"V"+p.round(J[1],2)}},N=function(X,J){return"L"+p.round(J[0],2)+","+p.round(J[1],2)};h.steps=function(X){var J=E[X]||N;return function(se){for(var V="M"+p.round(se[0][0],2)+","+p.round(se[0][1],2),j=1;j<se.length;j++)V+=J(se[j-1],se[j]);return V}},h.makeTester=function(){var X=g.ensureSingleById(p.select("body"),"svg","js-plotly-tester",function(se){se.attr(l.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),J=g.ensureSingle(X,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});h.tester=X,h.testref=J},h.savedBBoxes={};var z=0;function q(X){var J=X.getAttribute("data-unformatted");if(null!==J)return J+X.getAttribute("data-math")+X.getAttribute("text-anchor")+X.getAttribute("style")}function G(X,J){if(!X)return null;var se=J._context,V=se._exportedPlot?"":se._baseUrl||"";return V?"url('"+V+"#"+X+"')":"url(#"+X+")"}h.bBox=function(X,J,se){var V,j,H;if(se||(se=q(X)),se){if(V=h.savedBBoxes[se])return g.extendFlat({},V)}else if(1===X.childNodes.length){var oe=X.childNodes[0];if(se=q(oe)){var U=+oe.getAttribute("x")||0,te=+oe.getAttribute("y")||0,ee=oe.getAttribute("transform");if(!ee){var le=h.bBox(oe,!1,se);return U&&(le.left+=U,le.right+=U),te&&(le.top+=te,le.bottom+=te),le}if(V=h.savedBBoxes[se+="~"+U+"~"+te+"~"+ee])return g.extendFlat({},V)}}J?j=X:(H=h.tester.node(),j=X.cloneNode(!0),H.appendChild(j)),p.select(j).attr("transform",null).call(m.positionText,0,0);var ce=j.getBoundingClientRect(),pe=h.testref.node().getBoundingClientRect();J||H.removeChild(j);var de={height:ce.height,width:ce.width,left:ce.left-pe.left,top:ce.top-pe.top,right:ce.right-pe.left,bottom:ce.bottom-pe.top};return z>=1e4&&(h.savedBBoxes={},z=0),se&&(h.savedBBoxes[se]=de),z++,g.extendFlat({},de)},h.setClipUrl=function(X,J,se){X.attr("clip-path",G(J,se))},h.getTranslate=function(X){var J=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(se,V,j){return[V,j].join(" ")}).split(" ");return{x:+J[0]||0,y:+J[1]||0}},h.setTranslate=function(X,J,se){var j=X.attr?"attr":"setAttribute",H=X[X.attr?"attr":"getAttribute"]("transform")||"";return J=J||0,se=se||0,H=H.replace(/(\btranslate\(.*?\);?)/,"").trim(),H=(H+=n(J,se)).trim(),X[j]("transform",H),H},h.getScale=function(X){var J=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(se,V,j){return[V,j].join(" ")}).split(" ");return{x:+J[0]||1,y:+J[1]||1}},h.setScale=function(X,J,se){var j=X.attr?"attr":"setAttribute",H=X[X.attr?"attr":"getAttribute"]("transform")||"";return J=J||1,se=se||1,H=H.replace(/(\bscale\(.*?\);?)/,"").trim(),H=(H+="scale("+J+","+se+")").trim(),X[j]("transform",H),H};var K=/\s*sc.*/;h.setPointGroupScale=function(X,J,se){if(J=J||1,se=se||1,X){var V=1===J&&1===se?"":"scale("+J+","+se+")";X.each(function(){var j=(this.getAttribute("transform")||"").replace(K,"");j=(j+=V).trim(),this.setAttribute("transform",j)})}};var ne=/translate\([^)]*\)\s*$/;h.setTextPointsScale=function(X,J,se){X&&X.each(function(){var V,j=p.select(this),H=j.select("text");if(H.node()){var oe=parseFloat(H.attr("x")||0),U=parseFloat(H.attr("y")||0),te=(j.attr("transform")||"").match(ne);V=1===J&&1===se?[]:[n(oe,U),"scale("+J+","+se+")",n(-oe,-U)],te&&V.push(te),j.attr("transform",V.join(""))}})}},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(v,ae,ie){"use strict";var p=v("@plotly/d3");ae.exports={circle:{n:0,f:function(g){var b=p.round(g,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(g){var b=p.round(g,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(g){var b=p.round(1.3*g,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(g){var b=p.round(.4*g,2),y=p.round(1.2*g,2);return"M"+y+","+b+"H"+b+"V"+y+"H-"+b+"V"+b+"H-"+y+"V-"+b+"H-"+b+"V-"+y+"H"+b+"V-"+b+"H"+y+"Z"}},x:{n:4,f:function(g){var b=p.round(.8*g/Math.sqrt(2),2),y="l"+b+","+b,e="l"+b+",-"+b,r="l-"+b+",-"+b,t="l-"+b+","+b;return"M0,"+b+y+e+r+e+r+t+r+t+y+t+y+"Z"}},"triangle-up":{n:5,f:function(g){var b=p.round(2*g/Math.sqrt(3),2);return"M-"+b+","+p.round(g/2,2)+"H"+b+"L0,-"+p.round(g,2)+"Z"}},"triangle-down":{n:6,f:function(g){var b=p.round(2*g/Math.sqrt(3),2);return"M-"+b+",-"+p.round(g/2,2)+"H"+b+"L0,"+p.round(g,2)+"Z"}},"triangle-left":{n:7,f:function(g){var b=p.round(2*g/Math.sqrt(3),2);return"M"+p.round(g/2,2)+",-"+b+"V"+b+"L-"+p.round(g,2)+",0Z"}},"triangle-right":{n:8,f:function(g){var b=p.round(2*g/Math.sqrt(3),2);return"M-"+p.round(g/2,2)+",-"+b+"V"+b+"L"+p.round(g,2)+",0Z"}},"triangle-ne":{n:9,f:function(g){var b=p.round(.6*g,2),y=p.round(1.2*g,2);return"M-"+y+",-"+b+"H"+b+"V"+y+"Z"}},"triangle-se":{n:10,f:function(g){var b=p.round(.6*g,2),y=p.round(1.2*g,2);return"M"+b+",-"+y+"V"+b+"H-"+y+"Z"}},"triangle-sw":{n:11,f:function(g){var b=p.round(.6*g,2),y=p.round(1.2*g,2);return"M"+y+","+b+"H-"+b+"V-"+y+"Z"}},"triangle-nw":{n:12,f:function(g){var b=p.round(.6*g,2),y=p.round(1.2*g,2);return"M-"+b+","+y+"V-"+b+"H"+y+"Z"}},pentagon:{n:13,f:function(g){var b=p.round(.951*g,2),y=p.round(.588*g,2),e=p.round(-g,2),r=p.round(-.309*g,2);return"M"+b+","+r+"L"+y+","+p.round(.809*g,2)+"H-"+y+"L-"+b+","+r+"L0,"+e+"Z"}},hexagon:{n:14,f:function(g){var b=p.round(g,2),y=p.round(g/2,2),e=p.round(g*Math.sqrt(3)/2,2);return"M"+e+",-"+y+"V"+y+"L0,"+b+"L-"+e+","+y+"V-"+y+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(g){var b=p.round(g,2),y=p.round(g/2,2),e=p.round(g*Math.sqrt(3)/2,2);return"M-"+y+","+e+"H"+y+"L"+b+",0L"+y+",-"+e+"H-"+y+"L-"+b+",0Z"}},octagon:{n:16,f:function(g){var b=p.round(.924*g,2),y=p.round(.383*g,2);return"M-"+y+",-"+b+"H"+y+"L"+b+",-"+y+"V"+y+"L"+y+","+b+"H-"+y+"L-"+b+","+y+"V-"+y+"Z"}},star:{n:17,f:function(g){var b=1.4*g,y=p.round(.225*b,2),e=p.round(.951*b,2),r=p.round(.363*b,2),t=p.round(.588*b,2),o=p.round(-b,2),n=p.round(-.309*b,2),m=p.round(.118*b,2),l=p.round(.809*b,2);return"M"+y+","+n+"H"+e+"L"+r+","+m+"L"+t+","+l+"L0,"+p.round(.382*b,2)+"L-"+t+","+l+"L-"+r+","+m+"L-"+e+","+n+"H-"+y+"L0,"+o+"Z"}},hexagram:{n:18,f:function(g){var b=p.round(.66*g,2),y=p.round(.38*g,2),e=p.round(.76*g,2);return"M-"+e+",0l-"+y+",-"+b+"h"+e+"l"+y+",-"+b+"l"+y+","+b+"h"+e+"l-"+y+","+b+"l"+y+","+b+"h-"+e+"l-"+y+","+b+"l-"+y+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(g){var b=p.round(g*Math.sqrt(3)*.8,2),y=p.round(.8*g,2),e=p.round(1.6*g,2),r=p.round(4*g,2),t="A "+r+","+r+" 0 0 1 ";return"M-"+b+","+y+t+b+","+y+t+"0,-"+e+t+"-"+b+","+y+"Z"}},"star-triangle-down":{n:20,f:function(g){var b=p.round(g*Math.sqrt(3)*.8,2),y=p.round(.8*g,2),e=p.round(1.6*g,2),r=p.round(4*g,2),t="A "+r+","+r+" 0 0 1 ";return"M"+b+",-"+y+t+"-"+b+",-"+y+t+"0,"+e+t+b+",-"+y+"Z"}},"star-square":{n:21,f:function(g){var b=p.round(1.1*g,2),y=p.round(2*g,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(g){var b=p.round(1.4*g,2),y=p.round(1.9*g,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(g){var b=p.round(.7*g,2),y=p.round(1.4*g,2);return"M0,"+y+"L"+b+",0L0,-"+y+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(g){var b=p.round(1.4*g,2),y=p.round(.7*g,2);return"M0,"+y+"L"+b+",0L0,-"+y+"L-"+b+",0Z"}},hourglass:{n:25,f:function(g){var b=p.round(g,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(g){var b=p.round(g,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(g){var b=p.round(g,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(g){var b=p.round(g,2),y=p.round(g/Math.sqrt(2),2);return"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(g){var b=p.round(g,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(g){var b=p.round(g,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(g){var b=p.round(1.3*g,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(g){var b=p.round(1.3*g,2),y=p.round(.65*g,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(g){var b=p.round(1.4*g,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(g){var b=p.round(g,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(g){var b=p.round(1.2*g,2),y=p.round(.85*g,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(g){var b=p.round(g/2,2),y=p.round(g,2);return"M"+b+","+y+"V-"+y+"m-"+y+",0V"+y+"M"+y+","+b+"H-"+y+"m0,-"+y+"H"+y},needLine:!0,noFill:!0},"y-up":{n:37,f:function(g){var b=p.round(1.2*g,2),y=p.round(1.6*g,2),e=p.round(.8*g,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(g){var b=p.round(1.2*g,2),y=p.round(1.6*g,2),e=p.round(.8*g,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(g){var b=p.round(1.2*g,2),y=p.round(1.6*g,2),e=p.round(.8*g,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(g){var b=p.round(1.2*g,2),y=p.round(1.6*g,2),e=p.round(.8*g,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(g){var b=p.round(1.4*g,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(g){var b=p.round(1.4*g,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(g){var b=p.round(g,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(g){var b=p.round(g,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(g){var b=p.round(g,2);return"M0,0L-"+b+","+p.round(2*g,2)+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(g){var b=p.round(g,2);return"M0,0L-"+b+",-"+p.round(2*g,2)+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(g){var b=p.round(2*g,2),y=p.round(g,2);return"M0,0L"+b+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-right":{n:48,f:function(g){var b=p.round(2*g,2),y=p.round(g,2);return"M0,0L-"+b+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(g){var b=p.round(g,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+p.round(2*g,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(g){var b=p.round(g,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+p.round(2*g,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(g){var b=p.round(2*g,2),y=p.round(g,2);return"M0,-"+y+"V"+y+"M0,0L"+b+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(g){var b=p.round(2*g,2),y=p.round(g,2);return"M0,-"+y+"V"+y+"M0,0L-"+b+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],391:[function(v,ae,ie){"use strict";ae.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../registry"),b=v("../../plots/cartesian/axes"),y=v("../../lib"),e=v("./compute_error");function r(t,o,n,m){var l=o["error_"+m]||{},i=[];if(l.visible&&-1!==["linear","log"].indexOf(n.type)){for(var f=e(l),u=0;u<t.length;u++){var s=t[u],d=s.i;if(void 0===d)d=u;else if(null===d)continue;var h=s[m];if(p(n.c2l(h))){var a=f(h,d);if(p(a[0])&&p(a[1])){var _=s[m+"s"]=h-a[0],c=s[m+"h"]=h+a[1];i.push(_,c)}}}var x=o._extremes[n._id],w=b.findExtremes(n,i,y.extendFlat({tozero:x.opts.tozero},{padded:!0}));x.min=x.min.concat(w.min),x.max=x.max.concat(w.max)}}ae.exports=function(t){for(var o=t.calcdata,n=0;n<o.length;n++){var m=o[n],l=m[0].trace;if(!0===l.visible&&g.traceIs(l,"errorBarsOK")){var i=b.getFromId(t,l.xaxis),f=b.getFromId(t,l.yaxis);r(m,l,i,"x"),r(m,l,f,"y")}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(v,ae,ie){"use strict";function p(g,b){return"percent"===g?function(y){return Math.abs(y*b/100)}:"constant"===g?function(){return Math.abs(b)}:"sqrt"===g?function(y){return Math.sqrt(Math.abs(y))}:void 0}ae.exports=function(g){var b=g.type,y=g.symmetric;if("data"===b){var e=g.array||[];if(y)return function(n,m){var l=+e[m];return[l,l]};var r=g.arrayminus||[];return function(n,m){var l=+e[m],i=+r[m];return isNaN(l)&&isNaN(i)?[NaN,NaN]:[i||0,l||0]}}var t=p(b,g.value),o=p(b,g.valueminus);return y||void 0===g.valueminus?function(n){var m=t(n);return[m,m]}:function(n){return[o(n),t(n)]}}},{}],394:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../registry"),b=v("../../lib"),y=v("../../plot_api/plot_template"),e=v("./attributes");ae.exports=function(r,t,o,n){var m="error_"+n.axis,l=y.newContainer(t,m),i=r[m]||{};function f(h,a){return b.coerce(i,l,e,h,a)}if(!1!==f("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var u=f("type","array"in i?"data":"percent"),s=!0;"sqrt"!==u&&(s=f("symmetric",!(("data"===u?"arrayminus":"valueminus")in i))),"data"===u?(f("array"),f("traceref"),s||(f("arrayminus"),f("tracerefminus"))):"percent"!==u&&"constant"!==u||(f("value"),s||f("valueminus"));var d="copy_"+n.inherit+"style";n.inherit&&(t["error_"+n.inherit]||{}).visible&&f(d,!(i.color||p(i.thickness)||p(i.width))),n.inherit&&l[d]||(f("color",o),f("thickness"),f("width",g.traceIs(t,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plot_api/edit_types").overrideAll,b=v("./attributes"),y={error_x:p.extendFlat({},b),error_y:p.extendFlat({},b)};delete y.error_x.copy_zstyle,delete y.error_y.copy_zstyle,delete y.error_y.copy_ystyle;var e={error_x:p.extendFlat({},b),error_y:p.extendFlat({},b),error_z:p.extendFlat({},b)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,ae.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:y,bar:y,histogram:y,scatter3d:g(e,"calc","nested"),scattergl:g(y,"calc","nested")}},supplyDefaults:v("./defaults"),calc:v("./calc"),makeComputeError:v("./compute_error"),plot:v("./plot"),style:v("./style"),hoverInfo:function(r,t,o){(t.error_y||{}).visible&&(o.yerr=r.yh-r.y,t.error_y.symmetric||(o.yerrneg=r.y-r.ys)),(t.error_x||{}).visible&&(o.xerr=r.xh-r.x,t.error_x.symmetric||(o.xerrneg=r.x-r.xs))}}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../drawing"),y=v("../../traces/scatter/subtypes");ae.exports=function(e,r,t,o){var n=t.xaxis,m=t.yaxis,l=o&&o.duration>0;r.each(function(i){var f,u=i[0].trace,s=u.error_x||{},d=u.error_y||{};u.ids&&(f=function(c){return c.id});var h=y.hasMarkers(u)&&u.marker.maxdisplayed>0;d.visible||s.visible||(i=[]);var a=p.select(this).selectAll("g.errorbar").data(i,f);if(a.exit().remove(),i.length){s.visible||a.selectAll("path.xerror").remove(),d.visible||a.selectAll("path.yerror").remove(),a.style("opacity",1);var _=a.enter().append("g").classed("errorbar",!0);l&&_.style("opacity",0).transition().duration(o.duration).style("opacity",1),b.setClipUrl(a,t.layerClipId,e),a.each(function(c){var L,S,E,N,T=p.select(this),x=(E=m,N={x:(S=n).c2p((L=c).x),y:E.c2p(L.y)},void 0!==L.yh&&(N.yh=E.c2p(L.yh),N.ys=E.c2p(L.ys),g(N.ys)||(N.noYS=!0,N.ys=E.c2p(L.ys,!0))),void 0!==L.xh&&(N.xh=S.c2p(L.xh),N.xs=S.c2p(L.xs),g(N.xs)||(N.noXS=!0,N.xs=S.c2p(L.xs,!0))),N);if(!h||c.vis){var w,M=T.select("path.yerror");if(d.visible&&g(x.x)&&g(x.yh)&&g(x.ys)){var D=d.width;w="M"+(x.x-D)+","+x.yh+"h"+2*D+"m-"+D+",0V"+x.ys,x.noYS||(w+="m-"+D+",0h"+2*D),M.size()?l&&(M=M.transition().duration(o.duration).ease(o.easing)):M=T.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),M.attr("d",w)}else M.remove();var C=T.select("path.xerror");if(s.visible&&g(x.y)&&g(x.xh)&&g(x.xs)){var P=(s.copy_ystyle?d:s).width;w="M"+x.xh+","+(x.y-P)+"v"+2*P+"m0,-"+P+"H"+x.xs,x.noXS||(w+="m0,-"+P+"v"+2*P),C.size()?l&&(C=C.transition().duration(o.duration).ease(o.easing)):C=T.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),C.attr("d",w)}else C.remove()}})}})}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../color");ae.exports=function(b){b.each(function(y){var e=y[0].trace,r=e.error_y||{},t=e.error_x||{},o=p.select(this);o.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(g.stroke,r.color),t.copy_ystyle&&(t=r),o.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(g.stroke,t.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("./layout_attributes").hoverlabel,b=v("../../lib/extend").extendFlat;ae.exports={hoverlabel:{bgcolor:b({},g.bgcolor,{arrayOk:!0}),bordercolor:b({},g.bordercolor,{arrayOk:!0}),font:p({arrayOk:!0,editType:"none"}),align:b({},g.align,{arrayOk:!0}),namelength:b({},g.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry");function b(y,e,r,t){t=t||p.identity,Array.isArray(y)&&(e[0][r]=t(y))}ae.exports=function(y){var e=y.calcdata,r=y._fullLayout;function t(i){return function(f){return p.coerceHoverinfo({hoverinfo:f},{_module:i._module},r)}}for(var o=0;o<e.length;o++){var n=e[o],m=n[0].trace;if(!g.traceIs(m,"pie-like")){var l=g.traceIs(m,"2dMap")?b:p.fillArray;l(m.hoverinfo,n,"hi",t(m)),m.hovertemplate&&l(m.hovertemplate,n,"ht"),m.hoverlabel&&(l(m.hoverlabel.bgcolor,n,"hbg"),l(m.hoverlabel.bordercolor,n,"hbc"),l(m.hoverlabel.font.size,n,"hts"),l(m.hoverlabel.font.color,n,"htc"),l(m.hoverlabel.font.family,n,"htf"),l(m.hoverlabel.namelength,n,"hnl"),l(m.hoverlabel.align,n,"hta"))}}}},{"../../lib":515,"../../registry":647}],400:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("./hover").hover;ae.exports=function(b,y,e){var r=p.getComponentMethod("annotations","onClick")(b,b._hoverdata);function t(){b.emit("plotly_click",{points:b._hoverdata,event:y})}void 0!==e&&g(b,y,e,!0),b._hoverdata&&y&&y.target&&(r&&r.then?r.then(t):t(),y.stopImmediatePropagation&&y.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(v,ae,ie){"use strict";ae.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("./hoverlabel_defaults");ae.exports=function(y,e,r,t){var o=p.extendFlat({},t.hoverlabel);e.hovertemplate&&(o.namelength=-1),b(y,e,function(n,m){return p.coerce(y,e,g,n,m)},o)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(v,ae,ie){"use strict";var p=v("../../lib");ie.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},ie.isTraceInSubplots=function(t,o){if("splom"===t.type){for(var n=t.xaxes||[],m=t.yaxes||[],l=0;l<n.length;l++)for(var i=0;i<m.length;i++)if(-1!==o.indexOf(n[l]+m[i]))return!0;return!1}return-1!==o.indexOf(ie.getSubplot(t))},ie.flat=function(t,o){for(var n=new Array(t.length),m=0;m<t.length;m++)n[m]=o;return n},ie.p2c=function(t,o){for(var n=new Array(t.length),m=0;m<t.length;m++)n[m]=t[m].p2c(o);return n},ie.getDistanceFunction=function(t,o,n,m){return"closest"===t?m||ie.quadrature(o,n):"x"===t.charAt(0)?o:n},ie.getClosest=function(t,o,n){if(!1!==n.index)n.index>=0&&n.index<t.length?n.distance=0:n.index=!1;else for(var m=0;m<t.length;m++){var l=o(t[m]);l<=n.distance&&(n.index=m,n.distance=l)}return n},ie.inbox=function(t,o,n){return t*o<0||0===t?n:1/0},ie.quadrature=function(t,o){return function(n){var m=t(n),l=o(n);return Math.sqrt(m*m+l*l)}},ie.makeEventData=function(t,o,n){var m="index"in t?t.index:t.pointNumber,l={data:o._input,fullData:o,curveNumber:o.index,pointNumber:m};if(o._indexToPoints){var i=o._indexToPoints[m];1===i.length?l.pointIndex=i[0]:l.pointIndices=i}else l.pointIndex=m;return o._module.eventData?l=o._module.eventData(l,t,o,n,m):("xVal"in t?l.x=t.xVal:"x"in t&&(l.x=t.x),"yVal"in t?l.y=t.yVal:"y"in t&&(l.y=t.y),t.xa&&(l.xaxis=t.xa),t.ya&&(l.yaxis=t.ya),void 0!==t.zLabelVal&&(l.z=t.zLabelVal)),ie.appendArrayPointValue(l,o,m),l},ie.appendArrayPointValue=function(t,o,n){var m=o._arrayAttrs;if(m)for(var l=0;l<m.length;l++){var i=m[l],f=b(i);if(void 0===t[f]){var u=y(p.nestedProperty(o,i).get(),n);void 0!==u&&(t[f]=u)}}},ie.appendArrayMultiPointValues=function(t,o,n){var m=o._arrayAttrs;if(m)for(var l=0;l<m.length;l++){var i=m[l],f=b(i);if(void 0===t[f]){for(var u=p.nestedProperty(o,i).get(),s=new Array(n.length),d=0;d<n.length;d++)s[d]=y(u,n[d]);t[f]=s}}};var g={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(t){return g[t]||t}function y(t,o){return Array.isArray(o)?Array.isArray(t)&&Array.isArray(t[o[0]])?t[o[0]][o[1]]:void 0:t[o]}var e={x:!0,y:!0},r={"x unified":!0,"y unified":!0};ie.isUnifiedHover=function(t){return"string"==typeof t&&!!r[t]},ie.isXYhover=function(t){return"string"==typeof t&&!!e[t]}},{"../../lib":515}],404:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("tinycolor2"),y=v("../../lib"),e=y.strTranslate,r=y.strRotate,t=v("../../lib/events"),o=v("../../lib/svg_text_utils"),n=v("../../lib/override_cursor"),m=v("../drawing"),l=v("../color"),i=v("../dragelement"),f=v("../../plots/cartesian/axes"),u=v("../../registry"),s=v("./helpers"),d=v("./constants"),h=v("../legend/defaults"),a=v("../legend/draw"),_=d.YANGLE,c=Math.PI*_/180,T=1/Math.sin(c),x=Math.cos(c),w=Math.sin(c),M=d.HOVERARROWSIZE,D=d.HOVERTEXTPAD,C={box:!0,ohlc:!0,violin:!0,candlestick:!0},P={scatter:!0,scattergl:!0,splom:!0};function L(j){return[j.trace.index,j.index,j.x0,j.y0,j.name,j.attr,j.xa?j.xa._id:"",j.ya?j.ya._id:""].join(",")}ie.hover=function(j,H,oe,U){j=y.getGraphDiv(j);var te=H.target;y.throttle(j._fullLayout._uid+d.HOVERID,d.HOVERMINTIME,function(){!function(ee,le,ce,pe,de){ce||(ce="xy");var be=Array.isArray(ce)?ce:[ce],he=ee._fullLayout,xe=he._plots||[],De=xe[ce],Se=he._has("cartesian");if(De){var ke=De.overlays.map(function(Qn){return Qn.id});be=be.concat(ke)}for(var Fe=be.length,ve=new Array(Fe),Te=new Array(Fe),Le=!1,Oe=0;Oe<Fe;Oe++){var Ne=be[Oe];if(xe[Ne])Le=!0,ve[Oe]=xe[Ne].xaxis,Te[Oe]=xe[Ne].yaxis;else{if(!he[Ne]||!he[Ne]._subplot)return void y.warn("Unrecognized subplot: "+Ne);var Be=he[Ne]._subplot;ve[Oe]=Be.xaxis,Te[Oe]=Be.yaxis}}var He=le.hovermode||he.hovermode;if(He&&!Le&&(He="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(He)||!ee.calcdata||ee.querySelector(".zoombox")||ee._dragging)return i.unhoverRaw(ee,le);var Ve=he.hoverdistance;-1===Ve&&(Ve=1/0);var it=he.spikedistance;-1===it&&(it=1/0);var ze,je,qe,Ye,ct,vt,wt,Ot,St,ft,st,Ct,$t,rn=[],hn=[],cn={hLinePoint:null,vLinePoint:null},mn=!1;if(Array.isArray(le))for(He="array",qe=0;qe<le.length;qe++)(ct=ee.calcdata[le[qe].curveNumber||0])&&(vt=ct[0].trace,"skip"!==ct[0].trace.hoverinfo&&(hn.push(ct),"h"===vt.orientation&&(mn=!0)));else{for(Ye=0;Ye<ee.calcdata.length;Ye++)"skip"!==(vt=(ct=ee.calcdata[Ye])[0].trace).hoverinfo&&s.isTraceInSubplots(vt,be)&&(hn.push(ct),"h"===vt.orientation&&(mn=!0));var nn,Xe;if(de){if(!1===t.triggerHandler(ee,"plotly_beforehover",le))return;var nt=de.getBoundingClientRect();nn=le.clientX-nt.left,Xe=le.clientY-nt.top,he._calcInverseTransform(ee);var ye=y.apply3DTransform(he._invTransform)(nn,Xe);if(Xe=ye[1],(nn=ye[0])<0||nn>ve[0]._length||Xe<0||Xe>Te[0]._length)return i.unhoverRaw(ee,le)}else nn="xpx"in le?le.xpx:ve[0]._length/2,Xe="ypx"in le?le.ypx:Te[0]._length/2;if(le.pointerX=nn+ve[0]._offset,le.pointerY=Xe+Te[0]._offset,ze="xval"in le?s.flat(be,le.xval):s.p2c(ve,nn),je="yval"in le?s.flat(be,le.yval):s.p2c(Te,Xe),!g(ze[0])||!g(je[0]))return y.warn("Fx.hover failed",le,ee),i.unhoverRaw(ee,le)}var Ce=1/0;function Ue(Qn,Ir){for(Ye=0;Ye<hn.length;Ye++)if((ct=hn[Ye])&&ct[0]&&ct[0].trace&&!0===(vt=ct[0].trace).visible&&0!==vt._length&&-1===["carpet","contourcarpet"].indexOf(vt._module.name)){if("splom"===vt.type?wt=be[Ot=0]:(wt=s.getSubplot(vt),Ot=be.indexOf(wt)),s.isUnifiedHover(St=He)&&(St=St.charAt(0)),Ct={cd:ct,trace:vt,xa:ve[Ot],ya:Te[Ot],maxHoverDistance:Ve,maxSpikeDistance:it,index:!1,distance:Math.min(Ce,Ve),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:l.defaultLine,name:vt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[wt]&&(Ct.subplot=he[wt]._subplot),he._splomScenes&&he._splomScenes[vt.uid]&&(Ct.scene=he._splomScenes[vt.uid]),$t=rn.length,"array"===St){var Tr=le[Ye];"pointNumber"in Tr?(Ct.index=Tr.pointNumber,St="closest"):(St="","xval"in Tr&&(ft=Tr.xval,St="x"),"yval"in Tr&&(st=Tr.yval,St=St?"closest":"y"))}else void 0!==Qn&&void 0!==Ir?(ft=Qn,st=Ir):(ft=ze[Ot],st=je[Ot]);if(0!==Ve)if(vt._module&&vt._module.hoverPoints){var ar=vt._module.hoverPoints(Ct,ft,st,St,{finiteRange:!0,hoverLayer:he._hoverlayer});if(ar)for(var Jr,ri=0;ri<ar.length;ri++)g((Jr=ar[ri]).x0)&&g(Jr.y0)&&rn.push(q(Jr,He))}else y.log("Unrecognized trace type in hover:",vt);if("closest"===He&&rn.length>$t&&(rn.splice(0,$t),Ce=rn[0].distance),Se&&0!==it&&0===rn.length){Ct.distance=it,Ct.index=!1;var Rr=vt._module.hoverPoints(Ct,ft,st,"closest",{hoverLayer:he._hoverlayer});if(Rr&&(Rr=Rr.filter(function(xn){return xn.spikeDistance<=it})),Rr&&Rr.length){var Yr,Ci=Rr.filter(function(xn){return xn.xa.showspikes&&"hovered data"!==xn.xa.spikesnap});if(Ci.length){var pn=Ci[0];g(pn.x0)&&g(pn.y0)&&(Yr=rt(pn),(!cn.vLinePoint||cn.vLinePoint.spikeDistance>Yr.spikeDistance)&&(cn.vLinePoint=Yr))}var Ln=Rr.filter(function(xn){return xn.ya.showspikes&&"hovered data"!==xn.ya.spikesnap});if(Ln.length){var Ut=Ln[0];g(Ut.x0)&&g(Ut.y0)&&(Yr=rt(Ut),(!cn.hLinePoint||cn.hLinePoint.spikeDistance>Yr.spikeDistance)&&(cn.hLinePoint=Yr))}}}}}function Qe(Qn,Ir,Tr){for(var ar,Jr=null,ri=1/0,Rr=0;Rr<Qn.length;Rr++)ar=Qn[Rr].spikeDistance,Tr&&0===Rr&&(ar=-1/0),ar<=ri&&ar<=Ir&&(Jr=Qn[Rr],ri=ar);return Jr}function rt(Qn){return Qn?{xa:Qn.xa,ya:Qn.ya,x:void 0!==Qn.xSpike?Qn.xSpike:(Qn.x0+Qn.x1)/2,y:void 0!==Qn.ySpike?Qn.ySpike:(Qn.y0+Qn.y1)/2,distance:Qn.distance,spikeDistance:Qn.spikeDistance,curveNumber:Qn.trace.index,color:Qn.color,pointNumber:Qn.index}:null}Ue();var Ke={fullLayout:he,container:he._hoverlayer,event:le},gt=ee._spikepoints;ee._spikepoints={vLinePoint:cn.vLinePoint,hLinePoint:cn.hLinePoint};var Lt=function(){rn.sort(function(Qn,Ir){return Qn.distance-Ir.distance}),rn=function(Qn,Ir){for(var Tr=Ir.charAt(0),ar=[],Jr=[],ri=[],Rr=0;Rr<Qn.length;Rr++){var Yr=Qn[Rr];u.traceIs(Yr.trace,"bar-like")||u.traceIs(Yr.trace,"box-violin")?ri.push(Yr):Yr.trace[Tr+"period"]?Jr.push(Yr):ar.push(Yr)}return ar.concat(Jr).concat(ri)}(rn,He)};Lt();var Vt=He.charAt(0),dt=("x"===Vt||"y"===Vt)&&rn[0]&&P[rn[0].trace.type];if(Se&&0!==it&&0!==rn.length){var bt=Qe(rn.filter(function(Qn){return Qn.ya.showspikes}),it,dt);cn.hLinePoint=rt(bt);var Yt=Qe(rn.filter(function(Qn){return Qn.xa.showspikes}),it,dt);cn.vLinePoint=rt(Yt)}if(0===rn.length){var It=i.unhoverRaw(ee,le);return!Se||null===cn.hLinePoint&&null===cn.vLinePoint||K(gt)&&G(ee,cn,Ke),It}if(Se&&K(gt)&&G(ee,cn,Ke),s.isXYhover(St)&&0!==rn[0].length&&"splom"!==rn[0].trace.type){var jt=rn[0],Ie=(rn=C[jt.trace.type]?rn.filter(function(Qn){return Qn.trace.index===jt.trace.index}):[jt]).length;Ue(X("x",jt,he),X("y",jt,he));var xt,Rt=[],Xt={},tn=0,Kt=function(Qn){var Ir=C[Qn.trace.type]?L(Qn):Qn.trace.index;if(Xt[Ir]){var Tr=Xt[Ir]-1,ar=Rt[Tr];Tr>0&&Math.abs(Qn.distance)<Math.abs(ar.distance)&&(Rt[Tr]=Qn)}else tn++,Xt[Ir]=tn,Rt.push(Qn)};for(xt=0;xt<Ie;xt++)Kt(rn[xt]);for(xt=rn.length-1;xt>Ie-1;xt--)Kt(rn[xt]);rn=Rt,Lt()}var kn=ee._hoverdata,Vn=[],Tn=J(ee),sn=se(ee);for(qe=0;qe<rn.length;qe++){var fn=rn[qe],dn=s.makeEventData(fn,fn.trace,fn.cd);if(!1!==fn.hovertemplate){var Mn=!1;fn.cd[fn.index]&&fn.cd[fn.index].ht&&(Mn=fn.cd[fn.index].ht),fn.hovertemplate=Mn||fn.trace.hovertemplate||!1}if(fn.xa&&fn.ya){var En=fn.x0+fn.xa._offset,jn=fn.x1+fn.xa._offset,er=fn.y0+fn.ya._offset,nr=fn.y1+fn.ya._offset,mr=Math.min(En,jn),Dr=Math.max(En,jn),yr=Math.min(er,nr),Wr=Math.max(er,nr);dn.bbox={x0:mr+sn,x1:Dr+sn,y0:yr+Tn,y1:Wr+Tn}}fn.eventData=[dn],Vn.push(dn)}ee._hoverdata=Vn;var kr="y"===He&&(hn.length>1||rn.length>1)||"closest"===He&&mn&&rn.length>1,Or=l.combine(he.plot_bgcolor||l.background,he.paper_bgcolor),Hr=E(rn,{gd:ee,hovermode:He,rotateLabels:kr,bgColor:Or,container:he._hoverlayer,outerContainer:he._paper.node(),commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance});if(s.isUnifiedHover(He)||(function(Qn,Ir,Tr){var ar,Jr,ri,Rr,Yr,Ci,pn,Ln=0,Ut=1,xn=Qn.size(),Sn=new Array(xn),Kn=0;function Jn(sr){var xr=sr[0],_r=sr[sr.length-1];if(ri=_r.pos+_r.dp+_r.size-xr.pmax,(Jr=xr.pmin-xr.pos-xr.dp+xr.size)>.01){for(Yr=sr.length-1;Yr>=0;Yr--)sr[Yr].dp+=Jr;ar=!1}if(!(ri<.01)){if(Jr<-.01){for(Yr=sr.length-1;Yr>=0;Yr--)sr[Yr].dp-=ri;ar=!1}if(ar){var Nr=0;for(Rr=0;Rr<sr.length;Rr++)(Ci=sr[Rr]).pos+Ci.dp+Ci.size>xr.pmax&&Nr++;for(Rr=sr.length-1;Rr>=0&&!(Nr<=0);Rr--)(Ci=sr[Rr]).pos>xr.pmax-1&&(Ci.del=!0,Nr--);for(Rr=0;Rr<sr.length&&!(Nr<=0);Rr++)if((Ci=sr[Rr]).pos<xr.pmin+1)for(Ci.del=!0,Nr--,ri=2*Ci.size,Yr=sr.length-1;Yr>=0;Yr--)sr[Yr].dp-=ri;for(Rr=sr.length-1;Rr>=0&&!(Nr<=0);Rr--)(Ci=sr[Rr]).pos+Ci.dp+Ci.size>xr.pmax&&(Ci.del=!0,Nr--)}}}for(Qn.each(function(sr){var xr=sr[Ir],_r="x"===xr._id.charAt(0),Nr=xr.range;0===Kn&&Nr&&Nr[0]>Nr[1]!==_r&&(Ut=-1),Sn[Kn++]=[{datum:sr,traceIndex:sr.trace.index,dp:0,pos:sr.pos,posref:sr.posref,size:sr.by*(_r?T:1)/2,pmin:0,pmax:_r?Tr.width:Tr.height}]}),Sn.sort(function(sr,xr){return sr[0].posref-xr[0].posref||Ut*(xr[0].traceIndex-sr[0].traceIndex)});!ar&&Ln<=xn;){for(Ln++,ar=!0,Rr=0;Rr<Sn.length-1;){var Xn=Sn[Rr],Un=Sn[Rr+1],In=Xn[Xn.length-1],Pn=Un[0];if((Jr=In.pos+In.dp+In.size-Pn.pos-Pn.dp+Pn.size)>.01&&In.pmin===Pn.pmin&&In.pmax===Pn.pmax){for(Yr=Un.length-1;Yr>=0;Yr--)Un[Yr].dp+=Jr;for(Xn.push.apply(Xn,Un),Sn.splice(Rr+1,1),pn=0,Yr=Xn.length-1;Yr>=0;Yr--)pn+=Xn[Yr].dp;for(ri=pn/Xn.length,Yr=Xn.length-1;Yr>=0;Yr--)Xn[Yr].dp-=ri;ar=!1}else Rr++}Sn.forEach(Jn)}for(Rr=Sn.length-1;Rr>=0;Rr--){var Bn=Sn[Rr];for(Yr=Bn.length-1;Yr>=0;Yr--){var Gn=Bn[Yr],or=Gn.datum;or.offset=Gn.dp,or.del=Gn.del}}}(Hr,kr?"xa":"ya",he),z(Hr,kr,he._invScaleX,he._invScaleY)),de&&de.tagName){var oi=u.getComponentMethod("annotations","hasClickToShow")(ee,Vn);n(p.select(de),oi?"pointer":"")}!de||pe||!function(Qn,Ir,Tr){if(!Tr||Tr.length!==Qn._hoverdata.length)return!0;for(var ar=Tr.length-1;ar>=0;ar--){var Jr=Tr[ar],ri=Qn._hoverdata[ar];if(Jr.curveNumber!==ri.curveNumber||String(Jr.pointNumber)!==String(ri.pointNumber)||String(Jr.pointNumbers)!==String(ri.pointNumbers))return!0}return!1}(ee,0,kn)||(kn&&ee.emit("plotly_unhover",{event:le,points:kn}),ee.emit("plotly_hover",{event:le,points:ee._hoverdata,xaxes:ve,yaxes:Te,xvals:ze,yvals:je}))}(j,H,oe,U,te)})},ie.loneHover=function(j,H){var oe=!0;Array.isArray(j)||(oe=!1,j=[j]);var U=H.gd,te=J(U),ee=se(U),le=E(j.map(function(de){var be=de._x0||de.x0||de.x||0,he=de._x1||de.x1||de.x||0,xe=de._y0||de.y0||de.y||0,De=de._y1||de.y1||de.y||0,Se=de.eventData;if(Se){var ke=Math.min(be,he),Fe=Math.max(be,he),ve=Math.min(xe,De),Te=Math.max(xe,De),Le=de.trace;if(u.traceIs(Le,"gl3d")){var Oe=U._fullLayout[Le.scene]._scene.container,Ne=Oe.offsetLeft,Be=Oe.offsetTop;ke+=Ne,Fe+=Ne,ve+=Be,Te+=Be}Se.bbox={x0:ke+ee,x1:Fe+ee,y0:ve+te,y1:Te+te},H.inOut_bbox&&H.inOut_bbox.push(Se.bbox)}else Se=!1;return{color:de.color||l.defaultLine,x0:de.x0||de.x||0,x1:de.x1||de.x||0,y0:de.y0||de.y||0,y1:de.y1||de.y||0,xLabel:de.xLabel,yLabel:de.yLabel,zLabel:de.zLabel,text:de.text,name:de.name,idealAlign:de.idealAlign,borderColor:de.borderColor,fontFamily:de.fontFamily,fontSize:de.fontSize,fontColor:de.fontColor,nameLength:de.nameLength,textAlign:de.textAlign,trace:de.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:de.hovertemplate||!1,hovertemplateLabels:de.hovertemplateLabels||!1,eventData:Se}}),{gd:U,hovermode:"closest",rotateLabels:!1,bgColor:H.bgColor||l.background,container:p.select(H.container),outerContainer:H.outerContainer||H.container}),ce=0,pe=0;return le.sort(function(de,be){return de.y0-be.y0}).each(function(de,be){var he=de.y0-de.by/2;de.offset=he-5<ce?ce-he+5:0,ce=he+de.by+de.offset,be===H.anchorIndex&&(pe=de.offset)}).each(function(de){de.offset-=pe}),z(le,!1,U._fullLayout._invScaleX,U._fullLayout._invScaleY),oe?le:le.node()};var S=/<extra>([\s\S]*)<\/extra>/;function E(j,H){var oe=H.gd,U=oe._fullLayout,te=H.hovermode,ee=H.rotateLabels,le=H.bgColor,ce=H.container,pe=H.outerContainer,de=H.commonLabelOpts||{};if(0===j.length)return[[]];var be=H.fontFamily||d.HOVERFONT,he=H.fontSize||d.HOVERFONTSIZE,xe=j[0],De=xe.xa,Se=xe.ya,ke=te.charAt(0),Fe=xe[ke+"Label"],ve=V(oe,pe),Te=ve.top,Le=ve.width,Oe=ve.height,Ne=void 0!==Fe&&xe.distance<=H.hoverdistance&&("x"===te||"y"===te);if(Ne){var Be,He,Ve=!0;for(Be=0;Be<j.length;Be++)if(Ve&&void 0===j[Be].zLabel&&(Ve=!1),He=j[Be].hoverinfo||j[Be].trace.hoverinfo){var it=Array.isArray(He)?He:He.split("+");if(-1===it.indexOf("all")&&-1===it.indexOf(te)){Ne=!1;break}}Ve&&(Ne=!1)}var ze=ce.selectAll("g.axistext").data(Ne?[0]:[]);if(ze.enter().append("g").classed("axistext",!0),ze.exit().remove(),ze.each(function(){var dt=p.select(this),bt=y.ensureSingle(dt,"path","",function(jn){jn.style({"stroke-width":"1px"})}),Yt=y.ensureSingle(dt,"text","",function(jn){jn.attr("data-notex",1)}),It=de.bgcolor||l.defaultLine,jt=de.bordercolor||l.contrast(It),Ie=l.contrast(It),et={family:de.font.family||be,size:de.font.size||he,color:de.font.color||Ie};bt.style({fill:It,stroke:jt}),Yt.text(Fe).call(m.font,et).call(o.positionText,0,0).call(o.convertToTspans,oe),dt.attr("transform","");var ht,xt,Rt=V(oe,Yt.node());if("x"===te){var Xt="top"===De.side?"-":"";Yt.attr("text-anchor","middle").call(o.positionText,0,"top"===De.side?Te-Rt.bottom-M-D:Te-Rt.top+M+D),xt=Se._offset+("top"===De.side?0:Se._length);var tn=Rt.width/2+D;(ht=De._offset+(xe.x0+xe.x1)/2)<tn?(ht=tn,bt.attr("d","M-"+(tn-M)+",0L-"+(tn-2*M)+","+Xt+M+"H"+(D+Rt.width/2)+"v"+Xt+(2*D+Rt.height)+"H-"+tn+"V"+Xt+M+"Z")):ht>U.width-tn?(ht=U.width-tn,bt.attr("d","M"+(tn-M)+",0L"+tn+","+Xt+M+"v"+Xt+(2*D+Rt.height)+"H-"+tn+"V"+Xt+M+"H"+(tn-2*M)+"Z")):bt.attr("d","M0,0L"+M+","+Xt+M+"H"+(D+Rt.width/2)+"v"+Xt+(2*D+Rt.height)+"H-"+(D+Rt.width/2)+"V"+Xt+M+"H-"+M+"Z")}else{var Kt,kn,Vn;"right"===Se.side?(Kt="start",kn=1,Vn="",ht=De._offset+De._length):(Kt="end",kn=-1,Vn="-",ht=De._offset),xt=Se._offset+(xe.y0+xe.y1)/2,Yt.attr("text-anchor",Kt),bt.attr("d","M0,0L"+Vn+M+","+M+"V"+(D+Rt.height/2)+"h"+Vn+(2*D+Rt.width)+"V-"+(D+Rt.height/2)+"H"+Vn+M+"V-"+M+"Z");var Tn,sn=Rt.height/2,fn=Te-Rt.top-sn,dn="clip"+U._uid+"commonlabel"+Se._id;if(ht<Rt.width+2*D+M){Tn="M-"+(M+D)+"-"+sn+"h-"+(Rt.width-D)+"V"+sn+"h"+(Rt.width-D)+"Z";var Mn=Rt.width-ht+D;o.positionText(Yt,Mn,fn),"end"===Kt&&Yt.selectAll("tspan").each(function(){var jn=p.select(this),er=m.tester.append("text").text(jn.text()).call(m.font,et),nr=V(oe,er.node());Math.round(nr.width)<Math.round(Rt.width)&&jn.attr("x",Mn-nr.width),er.remove()})}else o.positionText(Yt,kn*(D+M),fn),Tn=null;var En=U._topclips.selectAll("#"+dn).data(Tn?[0]:[]);En.enter().append("clipPath").attr("id",dn).append("path"),En.exit().remove(),En.select("path").attr("d",Tn),m.setClipUrl(Yt,Tn?dn:null,oe)}dt.attr("transform",e(ht,xt))}),s.isUnifiedHover(te)){ce.selectAll("g.hovertext").remove();var je=j.filter(function(dt){return"none"!==dt.hoverinfo});if(0===je.length)return;var qe=U.hoverlabel,Ye=qe.font,vt={font:Ye};h({showlegend:!0,legend:{title:{text:Fe,font:Ye},font:Ye,bgcolor:qe.bgcolor,bordercolor:qe.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:U.legend?U.legend.traceorder:void 0,orientation:"v"}},vt,oe._fullData);var wt=vt.legend;wt.entries=[];for(var Ot=0;Ot<je.length;Ot++){var St=je[Ot];if("none"!==St.hoverinfo){var ft=N(St,!0,te,U,Fe),st=ft[0],Ct=ft[1];St.name=Ct,St.text=""!==Ct?Ct+" : "+st:st;var $t=St.cd[St.index];$t&&($t.mc&&(St.mc=$t.mc),$t.mcc&&(St.mc=$t.mcc),$t.mlc&&(St.mlc=$t.mlc),$t.mlcc&&(St.mlc=$t.mlcc),$t.mlw&&(St.mlw=$t.mlw),$t.mrc&&(St.mrc=$t.mrc),$t.dir&&(St.dir=$t.dir)),St._distinct=!0,wt.entries.push([St])}}wt.entries.sort(function(dt,bt){return dt[0].trace.index-bt[0].trace.index}),wt.layer=ce,wt._inHover=!0,wt._groupTitleFont=qe.grouptitlefont,a(oe,wt);var rn,hn,cn,mn,nn=ce.select("g.legend"),Xe=V(oe,nn.node()),nt=Xe.width+2*D,ye=Xe.height+2*D,Ce=je[0],Ue=(Ce.x0+Ce.x1)/2,Qe=(Ce.y0+Ce.y1)/2,rt=!(u.traceIs(Ce.trace,"bar-like")||u.traceIs(Ce.trace,"box-violin"));"y"===ke?rt?(hn=Qe-D,rn=Qe+D):(hn=Math.min.apply(null,je.map(function(dt){return Math.min(dt.y0,dt.y1)})),rn=Math.max.apply(null,je.map(function(dt){return Math.max(dt.y0,dt.y1)}))):hn=rn=y.mean(je.map(function(dt){return(dt.y0+dt.y1)/2}))-ye/2,"x"===ke?rt?(cn=Ue+D,mn=Ue-D):(cn=Math.max.apply(null,je.map(function(dt){return Math.max(dt.x0,dt.x1)})),mn=Math.min.apply(null,je.map(function(dt){return Math.min(dt.x0,dt.x1)}))):cn=mn=y.mean(je.map(function(dt){return(dt.x0+dt.x1)/2}))-nt/2;var Ke,gt,mt=De._offset,Lt=Se._offset;return mn+=mt-nt,hn+=Lt-ye,Ke=(cn+=mt)+nt<Le&&cn>=0?cn:mn+nt<Le&&mn>=0?mn:mt+nt<Le?mt:cn-Ue<Ue-mn+nt?Le-nt:0,gt=(rn+=Lt)+ye<Oe&&rn>=0?rn:hn+ye<Oe&&hn>=0?hn:Lt+ye<Oe?Lt:rn-Qe<Qe-hn+ye?Oe-ye:0,nn.attr("transform",e((Ke+=D)-1,(gt+=D)-1)),nn}var Vt=ce.selectAll("g.hovertext").data(j,function(dt){return L(dt)});return Vt.enter().append("g").classed("hovertext",!0).each(function(){var dt=p.select(this);dt.append("rect").call(l.fill,l.addOpacity(le,.8)),dt.append("text").classed("name",!0),dt.append("path").style("stroke-width","1px"),dt.append("text").classed("nums",!0).call(m.font,be,he)}),Vt.exit().remove(),Vt.each(function(dt){var bt=p.select(this).attr("transform",""),Yt=dt.color;Array.isArray(Yt)&&(Yt=Yt[dt.eventData[0].pointNumber]);var It=dt.bgcolor||Yt,jt=l.combine(l.opacity(It)?It:l.defaultLine,le),Ie=l.combine(l.opacity(Yt)?Yt:l.defaultLine,le),et=dt.borderColor||l.contrast(jt),ht=N(dt,Ne,te,U,Fe,bt),xt=ht[0],Rt=ht[1],Xt=bt.select("text.nums").call(m.font,dt.fontFamily||be,dt.fontSize||he,dt.fontColor||et).text(xt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,oe),tn=bt.select("text.name"),Kt=0,kn=0;if(Rt&&Rt!==xt){tn.call(m.font,dt.fontFamily||be,dt.fontSize||he,Ie).text(Rt).attr("data-notex",1).call(o.positionText,0,0).call(o.convertToTspans,oe);var Vn=V(oe,tn.node());Kt=Vn.width+2*D,kn=Vn.height+2*D}else tn.remove(),bt.select("rect").remove();bt.select("path").style({fill:jt,stroke:et});var Tn=dt.xa._offset+(dt.x0+dt.x1)/2,sn=dt.ya._offset+(dt.y0+dt.y1)/2,fn=Math.abs(dt.x1-dt.x0),dn=Math.abs(dt.y1-dt.y0),Mn=V(oe,Xt.node()),En=Mn.width/U._invScaleX,jn=Mn.height/U._invScaleY;dt.ty0=(Te-Mn.top)/U._invScaleY,dt.bx=En+2*D,dt.by=Math.max(jn+2*D,kn),dt.anchor="start",dt.txwidth=En,dt.tx2width=Kt,dt.offset=0;var er,nr,mr=(En+M+D+Kt)*U._invScaleX;if(ee)dt.pos=Tn,er=sn+dn/2+mr<=Oe,nr=sn-dn/2-mr>=0,"top"!==dt.idealAlign&&er||!nr?er?(sn+=dn/2,dt.anchor="start"):dt.anchor="middle":(sn-=dn/2,dt.anchor="end");else if(dt.pos=sn,er=Tn+fn/2+mr<=Le,nr=Tn-fn/2-mr>=0,"left"!==dt.idealAlign&&er||!nr)if(er)Tn+=fn/2,dt.anchor="start";else{dt.anchor="middle";var Dr=mr/2,yr=Tn+Dr-Le,Wr=Tn-Dr;yr>0&&(Tn-=yr),Wr<0&&(Tn+=-Wr)}else Tn-=fn/2,dt.anchor="end";Xt.attr("text-anchor",dt.anchor),Kt&&tn.attr("text-anchor",dt.anchor),bt.attr("transform",e(Tn,sn)+(ee?r(_):""))}),Vt}function N(j,H,oe,U,te,ee){var le="",ce="";void 0!==j.nameOverride&&(j.name=j.nameOverride),j.name&&(j.trace._meta&&(j.name=y.templateString(j.name,j.trace._meta)),le=ne(j.name,j.nameLength));var pe=oe.charAt(0);void 0!==j.zLabel?(void 0!==j.xLabel&&(ce+="x: "+j.xLabel+"<br>"),void 0!==j.yLabel&&(ce+="y: "+j.yLabel+"<br>"),"choropleth"!==j.trace.type&&"choroplethmapbox"!==j.trace.type&&(ce+=(ce?"z: ":"")+j.zLabel)):H&&j[pe+"Label"]===te?ce=j[("x"===pe?"y":"x")+"Label"]||"":void 0===j.xLabel?void 0!==j.yLabel&&"scattercarpet"!==j.trace.type&&(ce=j.yLabel):ce=void 0===j.yLabel?j.xLabel:"("+j.xLabel+", "+j.yLabel+")",!j.text&&0!==j.text||Array.isArray(j.text)||(ce+=(ce?"<br>":"")+j.text),void 0!==j.extraText&&(ce+=(ce?"<br>":"")+j.extraText),ee&&""===ce&&!j.hovertemplate&&(""===le&&ee.remove(),ce=le);var be=j.hovertemplate||!1;if(be){var he=j.hovertemplateLabels||j;j[pe+"Label"]!==te&&(he[pe+"other"]=he[pe+"Val"],he[pe+"otherLabel"]=he[pe+"Label"]),ce=(ce=y.hovertemplateString(be,he,U._d3locale,j.eventData[0]||{},j.trace._meta)).replace(S,function(xe,De){return le=ne(De,j.nameLength),""})}return[ce,le]}function z(j,H,oe,U){var te=function(le){return le*oe},ee=function(le){return le*U};j.each(function(le){var ce=p.select(this);if(le.del)return ce.remove();var pe=ce.select("text.nums"),de=le.anchor,be="end"===de?-1:1,he={start:1,end:-1,middle:0}[de],xe=he*(M+D),De=xe+he*(le.txwidth+D),Se=0,ke=le.offset,Fe="middle"===de;Fe&&(xe-=le.tx2width/2,De+=le.txwidth/2+D),H&&(ke*=-w,Se=le.offset*x),ce.select("path").attr("d",Fe?"M-"+te(le.bx/2+le.tx2width/2)+","+ee(ke-le.by/2)+"h"+te(le.bx)+"v"+ee(le.by)+"h-"+te(le.bx)+"Z":"M0,0L"+te(be*M+Se)+","+ee(M+ke)+"v"+ee(le.by/2-M)+"h"+te(be*le.bx)+"v-"+ee(le.by)+"H"+te(be*M+Se)+"V"+ee(ke-M)+"Z");var ve=Se+xe,Te=ke+le.ty0-le.by/2+D,Le=le.textAlign||"auto";"auto"!==Le&&("left"===Le&&"start"!==de?(pe.attr("text-anchor","start"),ve=Fe?-le.bx/2-le.tx2width/2+D:-le.bx-D):"right"===Le&&"end"!==de&&(pe.attr("text-anchor","end"),ve=Fe?le.bx/2-le.tx2width/2-D:le.bx+D)),pe.call(o.positionText,te(ve),ee(Te)),le.tx2width&&(ce.select("text.name").call(o.positionText,te(De+he*D+Se),ee(ke+le.ty0-le.by/2+D)),ce.select("rect").call(m.setRect,te(De+(he-1)*le.tx2width/2+Se),ee(ke-le.by/2-1),te(le.tx2width),ee(le.by+2)))})}function q(j,H){var oe=j.index,U=j.trace||{},te=j.cd[0],ee=j.cd[oe]||{};function le(xe){return xe||g(xe)&&0===xe}var ce=Array.isArray(oe)?function(xe,De){var Se=y.castOption(te,oe,xe);return le(Se)?Se:y.extractOption({},U,"",De)}:function(xe,De){return y.extractOption(ee,U,xe,De)};function pe(xe,De,Se){var ke=ce(De,Se);le(ke)&&(j[xe]=ke)}if(pe("hoverinfo","hi","hoverinfo"),pe("bgcolor","hbg","hoverlabel.bgcolor"),pe("borderColor","hbc","hoverlabel.bordercolor"),pe("fontFamily","htf","hoverlabel.font.family"),pe("fontSize","hts","hoverlabel.font.size"),pe("fontColor","htc","hoverlabel.font.color"),pe("nameLength","hnl","hoverlabel.namelength"),pe("textAlign","hta","hoverlabel.align"),j.posref="y"===H||"closest"===H&&"h"===U.orientation?j.xa._offset+(j.x0+j.x1)/2:j.ya._offset+(j.y0+j.y1)/2,j.x0=y.constrain(j.x0,0,j.xa._length),j.x1=y.constrain(j.x1,0,j.xa._length),j.y0=y.constrain(j.y0,0,j.ya._length),j.y1=y.constrain(j.y1,0,j.ya._length),void 0!==j.xLabelVal&&(j.xLabel="xLabel"in j?j.xLabel:f.hoverLabelText(j.xa,j.xLabelVal,U.xhoverformat),j.xVal=j.xa.c2d(j.xLabelVal)),void 0!==j.yLabelVal&&(j.yLabel="yLabel"in j?j.yLabel:f.hoverLabelText(j.ya,j.yLabelVal,U.yhoverformat),j.yVal=j.ya.c2d(j.yLabelVal)),void 0!==j.zLabelVal&&void 0===j.zLabel&&(j.zLabel=String(j.zLabelVal)),!(isNaN(j.xerr)||"log"===j.xa.type&&j.xerr<=0)){var de=f.tickText(j.xa,j.xa.c2l(j.xerr),"hover").text;j.xLabel+=void 0!==j.xerrneg?" +"+de+" / -"+f.tickText(j.xa,j.xa.c2l(j.xerrneg),"hover").text:" \xb1 "+de,"x"===H&&(j.distance+=1)}if(!(isNaN(j.yerr)||"log"===j.ya.type&&j.yerr<=0)){var be=f.tickText(j.ya,j.ya.c2l(j.yerr),"hover").text;j.yLabel+=void 0!==j.yerrneg?" +"+be+" / -"+f.tickText(j.ya,j.ya.c2l(j.yerrneg),"hover").text:" \xb1 "+be,"y"===H&&(j.distance+=1)}var he=j.hoverinfo||j.trace.hoverinfo;return he&&"all"!==he&&(-1===(he=Array.isArray(he)?he:he.split("+")).indexOf("x")&&(j.xLabel=void 0),-1===he.indexOf("y")&&(j.yLabel=void 0),-1===he.indexOf("z")&&(j.zLabel=void 0),-1===he.indexOf("text")&&(j.text=void 0),-1===he.indexOf("name")&&(j.name=void 0)),j}function G(j,H,oe){var U,te,ee=oe.container,le=oe.fullLayout,ce=le._size,pe=oe.event,de=!!H.hLinePoint,be=!!H.vLinePoint;if(ee.selectAll(".spikeline").remove(),be||de){var he=l.combine(le.plot_bgcolor,le.paper_bgcolor);if(de){var xe,De,Se=H.hLinePoint;U=Se&&Se.xa,"cursor"===(te=Se&&Se.ya).spikesnap?(xe=pe.pointerX,De=pe.pointerY):(xe=U._offset+Se.x,De=te._offset+Se.y);var ke,Fe,ve=b.readability(Se.color,he)<1.5?l.contrast(he):Se.color,Te=te.spikemode,Le=te.spikethickness,Oe=te.spikecolor||ve,Ne=f.getPxPosition(j,te);if(-1!==Te.indexOf("toaxis")||-1!==Te.indexOf("across")){if(-1!==Te.indexOf("toaxis")&&(ke=Ne,Fe=xe),-1!==Te.indexOf("across")){var Be=te._counterDomainMin,He=te._counterDomainMax;"free"===te.anchor&&(Be=Math.min(Be,te.position),He=Math.max(He,te.position)),ke=ce.l+Be*ce.w,Fe=ce.l+He*ce.w}ee.insert("line",":first-child").attr({x1:ke,x2:Fe,y1:De,y2:De,"stroke-width":Le,stroke:Oe,"stroke-dasharray":m.dashStyle(te.spikedash,Le)}).classed("spikeline",!0).classed("crisp",!0),ee.insert("line",":first-child").attr({x1:ke,x2:Fe,y1:De,y2:De,"stroke-width":Le+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}-1!==Te.indexOf("marker")&&ee.insert("circle",":first-child").attr({cx:Ne+("right"!==te.side?Le:-Le),cy:De,r:Le,fill:Oe}).classed("spikeline",!0)}if(be){var Ve,it,ze=H.vLinePoint;te=ze&&ze.ya,"cursor"===(U=ze&&ze.xa).spikesnap?(Ve=pe.pointerX,it=pe.pointerY):(Ve=U._offset+ze.x,it=te._offset+ze.y);var je,qe,Ye=b.readability(ze.color,he)<1.5?l.contrast(he):ze.color,ct=U.spikemode,vt=U.spikethickness,wt=U.spikecolor||Ye,Ot=f.getPxPosition(j,U);if(-1!==ct.indexOf("toaxis")||-1!==ct.indexOf("across")){if(-1!==ct.indexOf("toaxis")&&(je=Ot,qe=it),-1!==ct.indexOf("across")){var St=U._counterDomainMin,ft=U._counterDomainMax;"free"===U.anchor&&(St=Math.min(St,U.position),ft=Math.max(ft,U.position)),je=ce.t+(1-ft)*ce.h,qe=ce.t+(1-St)*ce.h}ee.insert("line",":first-child").attr({x1:Ve,x2:Ve,y1:je,y2:qe,"stroke-width":vt,stroke:wt,"stroke-dasharray":m.dashStyle(U.spikedash,vt)}).classed("spikeline",!0).classed("crisp",!0),ee.insert("line",":first-child").attr({x1:Ve,x2:Ve,y1:je,y2:qe,"stroke-width":vt+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}-1!==ct.indexOf("marker")&&ee.insert("circle",":first-child").attr({cx:Ve,cy:Ot-("top"!==U.side?vt:-vt),r:vt,fill:wt}).classed("spikeline",!0)}}}function K(j,H){return!H||H.vLinePoint!==j._spikepoints.vLinePoint||H.hLinePoint!==j._spikepoints.hLinePoint}function ne(j,H){return o.plainText(j||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function X(j,H,oe){var U=H[j+"a"],te=H[j+"Val"],ee=H.cd[0];if("category"===U.type)te=U._categoriesMap[te];else if("date"===U.type){var le=H.trace[j+"periodalignment"];if(le){var ce=H.cd[H.index],pe=ce[j+"Start"];void 0===pe&&(pe=ce[j]);var de=ce[j+"End"];void 0===de&&(de=ce[j]);var be=de-pe;"end"===le?te+=be:"middle"===le&&(te+=be/2)}te=U.d2c(te)}return ee&&ee.t&&ee.t.posLetter===U._id&&("group"!==oe.boxmode&&"group"!==oe.violinmode||(te+=ee.t.dPos)),te}function J(j){return j.offsetTop+j.clientTop}function se(j){return j.offsetLeft+j.clientLeft}function V(j,H){var oe=j._fullLayout,U=H.getBoundingClientRect(),te=U.x,ee=U.y,le=te+U.width,ce=ee+U.height,pe=y.apply3DTransform(oe._invTransform)(te,ee),de=y.apply3DTransform(oe._invTransform)(le,ce),be=pe[0],he=pe[1],xe=de[0],De=de[1];return{x:be,y:he,width:xe-be,height:De-he,top:Math.min(he,De),left:Math.min(be,xe),right:Math.max(be,xe),bottom:Math.max(he,De)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../color"),b=v("./helpers").isUnifiedHover;ae.exports=function(y,e,r,t){t=t||{};var o=e.legend;function n(m){t.font[m]||(t.font[m]=o?e.legend.font[m]:e.font[m])}e&&b(e.hovermode)&&(t.font||(t.font={}),n("size"),n("family"),n("color"),o?(t.bgcolor||(t.bgcolor=g.combine(e.legend.bgcolor,e.paper_bgcolor)),t.bordercolor||(t.bordercolor=e.legend.bordercolor)):t.bgcolor||(t.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",t.bgcolor),r("hoverlabel.bordercolor",t.bordercolor),r("hoverlabel.namelength",t.namelength),p.coerceFont(r,"hoverlabel.font",t.font),r("hoverlabel.align",t.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y){function e(r,t){return void 0!==y[r]?y[r]:p.coerce(b,y,g,r,t)}return e("clickmode"),e("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../dragelement"),y=v("./helpers"),e=v("./layout_attributes"),r=v("./hover");ae.exports={moduleType:"component",name:"fx",constants:v("./constants"),schema:{layout:e},attributes:v("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:v("./layout_global_defaults"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),getDistanceFunction:y.getDistanceFunction,getClosest:y.getClosest,inbox:y.inbox,quadrature:y.quadrature,appendArrayPointValue:y.appendArrayPointValue,castHoverOption:function(t,o,n){return g.castOption(t,o,"hoverlabel."+n)},castHoverinfo:function(t,o,n){return g.castOption(t,n,"hoverinfo",function(m){return g.coerceHoverinfo({hoverinfo:m},{_module:t._module},o)})},hover:r.hover,unhover:b.unhover,loneHover:r.loneHover,loneUnhover:function(t){var o=g.isD3Selection(t)?t:p.select(t);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()},click:v("./click")}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(v,ae,ie){"use strict";var p=v("./constants"),g=v("../../plots/font_attributes"),b=g({editType:"none"});b.family.dflt=p.HOVERFONT,b.size.dflt=p.HOVERFONTSIZE,ae.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,grouptitlefont:g({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes"),b=v("./hovermode_defaults"),y=v("./hoverlabel_defaults");ae.exports=function(e,r){function t(l,i){return p.coerce(e,r,g,l,i)}b(e,r)&&(t("hoverdistance"),t("spikedistance")),"select"===t("dragmode")&&t("selectdirection");var o=r._has("mapbox"),n=r._has("geo"),m=r._basePlotModules.length;"zoom"===r.dragmode&&((o||n)&&1===m||o&&n&&2===m)&&(r.dragmode="pan"),y(e,r,t),p.coerceFont(t,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./hoverlabel_defaults"),b=v("./layout_attributes");ae.exports=function(y,e){g(y,e,function(r,t){return p.coerce(y,e,b,r,t)})}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../lib/regex").counter,b=v("../../plots/domain").attributes,y=v("../../plots/cartesian/constants").idRegex,e=v("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[g("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function t(m,l,i){var f=l[i+"axes"],u=Object.keys((m._splomAxes||{})[i]||{});return Array.isArray(f)?f:u.length?u:void 0}function o(m,l,i,f,u,s){var d=l(m+"gap",i),h=l("domain."+m);l(m+"side",f);for(var a=new Array(u),_=h[0],c=(h[1]-_)/(u-d),T=c*(1-d),x=0;x<u;x++){var w=_+c*x;a[s?u-1-x:x]=[w,w+T]}return a}function n(m,l,i,f,u){var s,d=new Array(i);function h(a,_){-1!==l.indexOf(_)&&void 0===f[_]?(d[a]=_,f[_]=a):d[a]=""}if(Array.isArray(m))for(s=0;s<i;s++)h(s,m[s]);else for(h(0,u),s=1;s<i;s++)h(s,u+(s+1));return d}ae.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(m,l){var i=m.grid||{},f=t(l,i,"x"),u=t(l,i,"y");if(m.grid||f||u){var s,d,h=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),a=Array.isArray(f),_=Array.isArray(u),c=a&&f!==i.xaxes&&_&&u!==i.yaxes;h?(s=i.subplots.length,d=i.subplots[0].length):(_&&(s=u.length),a&&(d=f.length));var T=e.newContainer(l,"grid"),x=S("rows",s),w=S("columns",d);if(x*w>1){!h&&!a&&!_&&"independent"===S("pattern")&&(h=!0),T._hasSubplotGrid=h;var M,D,C="top to bottom"===S("roworder"),L=h?.3:.1;c&&l._splomGridDflt&&(M=l._splomGridDflt.xside,D=l._splomGridDflt.yside),T._domains={x:o("x",S,h?.2:.1,M,w),y:o("y",S,L,D,x,C)}}else delete l.grid}function S(E,N){return p.coerce(i,T,r,E,N)}},contentDefaults:function(m,l){var i=l.grid;if(i&&i._domains){var f,u,s,d,h,a,_,c=m.grid||{},T=l._subplots,x=i._hasSubplotGrid,w=i.rows,M=i.columns,D="independent"===i.pattern,C=i._axisMap={};if(x){var P=c.subplots||[];a=i.subplots=new Array(w);var L=1;for(f=0;f<w;f++){var S=a[f]=new Array(M),E=P[f]||[];for(u=0;u<M;u++)if(D?(h=1===L?"xy":"x"+L+"y"+L,L++):h=E[u],S[u]="",-1!==T.cartesian.indexOf(h)){if(_=h.indexOf("y"),s=h.slice(0,_),d=h.slice(_),void 0!==C[s]&&C[s]!==u||void 0!==C[d]&&C[d]!==f)continue;S[u]=h,C[s]=u,C[d]=f}}}else{var N=t(l,c,"x"),z=t(l,c,"y");i.xaxes=n(N,T.xaxis,M,C,"x"),i.yaxes=n(z,T.yaxis,w,C,"y")}var q=i._anchors={},G="top to bottom"===i.roworder;for(var K in C){var ne,X,J,se=K.charAt(0),V=i[se+"side"];if(V.length<8)q[K]="free";else if("x"===se){if("t"===V.charAt(0)===G?(ne=0,X=1,J=w):(ne=w-1,X=-1,J=-1),x){var j=C[K];for(f=ne;f!==J;f+=X)if((h=a[f][j])&&(_=h.indexOf("y"),h.slice(0,_)===K)){q[K]=h.slice(_);break}}else for(f=ne;f!==J;f+=X)if(-1!==T.cartesian.indexOf(K+(d=i.yaxes[f]))){q[K]=d;break}}else if("l"===V.charAt(0)?(ne=0,X=1,J=M):(ne=M-1,X=-1,J=-1),x){var H=C[K];for(f=ne;f!==J;f+=X)if((h=a[H][f])&&(_=h.indexOf("y"),h.slice(_)===K)){q[K]=h.slice(0,_);break}}else for(f=ne;f!==J;f+=X)if(-1!==T.cartesian.indexOf((s=i.xaxes[f])+K)){q[K]=s;break}}}}}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/constants"),g=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ae.exports=g("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",p.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",p.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib/to_log_range");ae.exports=function(b,y,e,r){y=y||{};var t="log"===e&&"linear"===y.type;if(t||"linear"===e&&"log"===y.type)for(var n,m,l=b._fullLayout.images,i=y._id.charAt(0),f=0;f<l.length;f++)if(m="images["+f+"].",(n=l[f])[i+"ref"]===y._id){var u=n[i],s=n["size"+i],d=null,h=null;if(t){d=g(u,y.range);var a=s/Math.pow(10,d)/2;h=2*Math.log(a+Math.sqrt(1+a*a))/Math.LN10}else h=(d=Math.pow(10,u))*(Math.pow(10,s/2)-Math.pow(10,-s/2));p(d)?p(h)||(h=null):(d=null,h=null),r(m+i,d),r(m+"size"+i,h)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./attributes");function e(r,t,o){function n(d,h){return p.coerce(r,t,y,d,h)}var m=n("source");if(!n("visible",!!m))return t;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var l={_fullLayout:o},i=["x","y"],f=0;f<2;f++){var u=i[f],s=g.coerceRef(r,t,l,u,"paper",void 0);"paper"!==s&&g.getFromId(l,s)._imgIndices.push(t._index),g.coercePosition(t,l,n,s,u,0)}return t}ae.exports=function(r,t){b(r,t,{name:"images",handleItemDefaults:e})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../drawing"),b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/axis_ids"),e=v("../../constants/xmlns_namespaces");ae.exports=function(r){var t,o,n=r._fullLayout,m=[],l={},i=[];for(o=0;o<n.images.length;o++){var f=n.images[o];if(f.visible)if("below"===f.layer&&"paper"!==f.xref&&"paper"!==f.yref){t=y.ref2id(f.xref)+y.ref2id(f.yref);var u=n._plots[t];if(!u){i.push(f);continue}u.mainplot&&(t=u.mainplot.id),l[t]||(l[t]=[]),l[t].push(f)}else"above"===f.layer?m.push(f):i.push(f)}var s={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},d={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function h(M){var D=p.select(this);if(this._imgSrc!==M.source)if(D.attr("xmlns",e.svg),M.source&&"data:"===M.source.slice(0,5))D.attr("xlink:href",M.source),this._imgSrc=M.source;else{var C=new Promise(function(P){var L=new Image;function S(){D.remove(),P()}this.img=L,L.setAttribute("crossOrigin","anonymous"),L.onerror=S,L.onload=function(){var E=document.createElement("canvas");E.width=this.width,E.height=this.height,E.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var N=E.toDataURL("image/png");D.attr("xlink:href",N),P()},D.on("error",S),L.src=M.source,this._imgSrc=M.source}.bind(this));r._promises.push(C)}}function a(M){var D,C,P=p.select(this),L=b.getFromId(r,M.xref),S=b.getFromId(r,M.yref),E="domain"===b.getRefType(M.xref),N="domain"===b.getRefType(M.yref),z=n._size;D=void 0!==L?"string"==typeof M.xref&&E?L._length*M.sizex:Math.abs(L.l2p(M.sizex)-L.l2p(0)):M.sizex*z.w,C=void 0!==S?"string"==typeof M.yref&&N?S._length*M.sizey:Math.abs(S.l2p(M.sizey)-S.l2p(0)):M.sizey*z.h;var q,G,K=D*s[M.xanchor].offset,ne=C*d[M.yanchor].offset,X=s[M.xanchor].sizing+d[M.yanchor].sizing;switch(q=void 0!==L?"string"==typeof M.xref&&E?L._length*M.x+L._offset:L.r2p(M.x)+L._offset:M.x*z.w+z.l,q+=K,G=void 0!==S?"string"==typeof M.yref&&N?S._length*(1-M.y)+S._offset:S.r2p(M.y)+S._offset:z.h-M.y*z.h+z.t,G+=ne,M.sizing){case"fill":X+=" slice";break;case"stretch":X="none"}P.attr({x:q,y:G,width:D,height:C,preserveAspectRatio:X,opacity:M.opacity});var J=(L&&"domain"!==b.getRefType(M.xref)?L._id:"")+(S&&"domain"!==b.getRefType(M.yref)?S._id:"");g.setClipUrl(P,J?"clip"+n._uid+J:null,r)}var _=n._imageLowerLayer.selectAll("image").data(i),c=n._imageUpperLayer.selectAll("image").data(m);_.enter().append("image"),c.enter().append("image"),_.exit().remove(),c.exit().remove(),_.each(function(M){h.bind(this)(M),a.bind(this)(M)}),c.each(function(M){h.bind(this)(M),a.bind(this)(M)});var T=Object.keys(n._plots);for(o=0;o<T.length;o++){var x=n._plots[t=T[o]];if(x.imagelayer){var w=x.imagelayer.selectAll("image").data(l[t]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(M){h.bind(this)(M),a.bind(this)(M)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(v,ae,ie){"use strict";ae.exports={moduleType:"component",name:"images",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("images"),draw:v("./draw"),convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("../color/attributes");ae.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:p({editType:"legend"}),grouptitlefont:p({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:p({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(v,ae,ie){"use strict";ae.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../../plot_api/plot_template"),y=v("../../plots/attributes"),e=v("./attributes"),r=v("../../plots/layout_attributes"),t=v("./helpers");ae.exports=function(o,n,m){var l,i=o.legend||{},f=b.newContainer(n,"legend");function u(S,E){return g.coerce(i,f,e,S,E)}for(var s=function(S,E){return g.coerce(l._input,l,y,S,E)},d=n.font||{},h=g.coerceFont(u,"grouptitlefont",g.extendFlat({},d,{size:Math.round(1.1*d.size)})),a=0,_=!1,c="normal",T=0;T<m.length;T++)(l=m[T]).visible&&((l.showlegend||l._dfltShowLegend&&!(l._module&&l._module.attributes&&l._module.attributes.showlegend&&!1===l._module.attributes.showlegend.dflt))&&(a++,l.showlegend&&(_=!0,(p.traceIs(l,"pie-like")||!0===l._input.showlegend)&&a++),g.coerceFont(s,"legendgrouptitle.font",h)),(p.traceIs(l,"bar")&&"stack"===n.barmode||-1!==["tonextx","tonexty"].indexOf(l.fill))&&(c=t.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==l.legendgroup&&""!==l.legendgroup&&(c=t.isReversed({traceorder:c})?"reversed+grouped":"grouped"));var x=g.coerce(o,n,r,"showlegend",_&&a>1);if(!1===x&&(n.legend=void 0),(!1!==x||i.uirevision)&&(u("uirevision",n.uirevision),!1!==x)){u("bgcolor",n.paper_bgcolor),u("bordercolor"),u("borderwidth");var w,M,D,C=g.coerceFont(u,"font",n.font),P="h"===u("orientation");if(P?(w=0,p.getComponentMethod("rangeslider","isVisible")(o.xaxis)?(M=1.1,D="bottom"):(M=-.1,D="top")):(w=1.02,M=1,D="auto"),u("traceorder",c),t.isGrouped(n.legend)&&u("tracegroupgap"),u("itemsizing"),u("itemwidth"),u("itemclick"),u("itemdoubleclick"),u("groupclick"),u("x",w),u("xanchor"),u("y",M),u("yanchor",D),u("valign"),g.noneOrAll(i,f,["x","y"]),u("title.text")){u("title.side",P?"left":"top");var L=g.extendFlat({},C,{size:g.bigFont(C.size)});g.coerceFont(u,"title.font",L)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../lib/events"),r=v("../dragelement"),t=v("../drawing"),o=v("../color"),n=v("../../lib/svg_text_utils"),m=v("./handle_click"),l=v("./constants"),i=v("../../constants/alignment"),f=i.LINE_SPACING,u=i.FROM_TL,s=i.FROM_BR,d=v("./get_legend_data"),h=v("./style"),a=v("./helpers");function _(C,P,L,S,E){var N=L.data()[0][0].trace,z={event:E,node:L.node(),curveNumber:N.index,expandedIndex:N._expandedIndex,data:C.data,layout:C.layout,frames:C._transitionData._frames,config:C._context,fullData:C._fullData,fullLayout:C._fullLayout};N._group&&(z.group=N._group),y.traceIs(N,"pie-like")&&(z.label=L.datum()[0].label),!1!==e.triggerHandler(C,"plotly_legendclick",z)&&(1===S?P._clickTimeout=setTimeout(function(){C._fullLayout&&m(L,C,S)},C._context.doubleClickDelay):2===S&&(P._clickTimeout&&clearTimeout(P._clickTimeout),C._legendMouseDownTime=0,!1!==e.triggerHandler(C,"plotly_legenddoubleclick",z)&&m(L,C,S)))}function c(C,P,L){var S,E,N=C.data()[0][0],z=N.trace,q=y.traceIs(z,"pie-like"),G=!L._inHover&&P._context.edits.legendText&&!q,K=L._maxNameLength;N.groupTitle?(S=N.groupTitle.text,E=N.groupTitle.font):(E=L.font,L.entries?S=N.text:(S=q?N.label:z.name,z._meta&&(S=g.templateString(S,z._meta))));var ne=g.ensureSingle(C,"text","legendtext");ne.attr("text-anchor","start").call(t.font,E).text(G?T(S,K):S),n.positionText(ne,L.itemwidth+2*l.itemGap,0),G?ne.call(n.makeEditable,{gd:P,text:S}).call(w,C,P,L).on("edit",function(J){this.text(T(J,K)).call(w,C,P,L);var se=N.trace._fullInput||{},V={};if(y.hasTransform(se,"groupby")){var j=y.getTransformIndices(se,"groupby"),oe=g.keyedContainer(se,"transforms["+j[j.length-1]+"].styles","target","value.name");oe.set(N.trace._group,J),V=oe.constructUpdate()}else V.name=J;return y.call("_guiRestyle",P,V,z.index)}):w(ne,C,P,L)}function T(C,P){var L=Math.max(4,P);if(C&&C.trim().length>=L/2)return C;for(var S=L-(C=C||"").length;S>0;S--)C+=" ";return C}function x(C,P){var L,S=P._context.doubleClickDelay,E=1,N=g.ensureSingle(C,"rect","legendtoggle",function(z){P._context.staticPlot||z.style("cursor","pointer").attr("pointer-events","all"),z.call(o.fill,"rgba(0,0,0,0)")});P._context.staticPlot||(N.on("mousedown",function(){(L=(new Date).getTime())-P._legendMouseDownTime<S?E+=1:(E=1,P._legendMouseDownTime=L)}),N.on("mouseup",function(){if(!P._dragged&&!P._editing){var z=P._fullLayout.legend;(new Date).getTime()-P._legendMouseDownTime>S&&(E=Math.max(E-1,1)),_(P,z,C,E,p.event)}}))}function w(C,P,L,S,E){S._inHover&&C.attr("data-notex",!0),n.convertToTspans(C,L,function(){!function(N,z,q,G){var K=N.data()[0][0];if(q._inHover||!K||K.trace.showlegend){var ne=N.select("g[class*=math-group]"),X=ne.node();q||(q=z._fullLayout.legend);var V,j,se=q.borderwidth,H=(1===G?q.title.font:K.groupTitle?K.groupTitle.font:q.font).size*f;if(X){var oe=t.bBox(X);V=oe.height,j=oe.width,1===G?t.setTranslate(ne,se,se+.75*V):t.setTranslate(ne,0,.25*V)}else{var U=N.select(1===G?".legendtitletext":".legendtext"),te=n.lineCount(U),ee=U.node();if(V=H*te,j=ee?t.bBox(ee).width:0,1===G)"left"===q.title.side&&(j+=2*l.itemGap),n.positionText(U,se+l.titlePad,se+H);else{var le=2*l.itemGap+q.itemwidth;K.groupTitle&&(le=l.itemGap,j-=q.itemwidth),n.positionText(U,le,-H*((te-1)/2-.3))}}1===G?(q._titleWidth=j,q._titleHeight=V):(K.lineHeight=H,K.height=Math.max(V,16)+3,K.width=j)}else N.remove()}(P,L,S,E)})}function M(C){return g.isRightAnchor(C)?"right":g.isCenterAnchor(C)?"center":"left"}function D(C){return g.isBottomAnchor(C)?"bottom":g.isMiddleAnchor(C)?"middle":"top"}ae.exports=function(C,P){return P||(P=C._fullLayout.legend||{}),function(L,S){var E,N,z=L._fullLayout,q="legend"+z._uid,G=S._inHover;if(G?(E=S.layer,q+="-hover"):E=z._infolayer,E){if(L._legendMouseDownTime||(L._legendMouseDownTime=0),G){if(!S.entries)return;N=d(S.entries,S)}else{if(!L.calcdata)return;N=z.showlegend&&d(L.calcdata,S)}var K=z.hiddenlabels||[];if(!(G||z.showlegend&&N.length))return E.selectAll(".legend").remove(),z._topdefs.select("#"+q).remove(),b.autoMargin(L,"legend");var ne=g.ensureSingle(E,"g","legend",function(te){G||te.attr("pointer-events","all")}),X=g.ensureSingleById(z._topdefs,"clipPath",q,function(te){te.append("rect")}),J=g.ensureSingle(ne,"rect","bg",function(te){te.attr("shape-rendering","crispEdges")});J.call(o.stroke,S.bordercolor).call(o.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var se=g.ensureSingle(ne,"g","scrollbox"),V=S.title;if(S._titleWidth=0,S._titleHeight=0,V.text){var j=g.ensureSingle(se,"text","legendtitletext");j.attr("text-anchor","start").call(t.font,V.font).text(V.text),w(j,se,L,S,1)}else se.selectAll(".legendtitletext").remove();var H=g.ensureSingle(ne,"rect","scrollbar",function(te){te.attr(l.scrollBarEnterAttrs).call(o.fill,l.scrollBarColor)}),oe=se.selectAll("g.groups").data(N);oe.enter().append("g").attr("class","groups"),oe.exit().remove();var U=oe.selectAll("g.traces").data(g.identity);U.enter().append("g").attr("class","traces"),U.exit().remove(),U.style("opacity",function(te){var ee=te[0].trace;return y.traceIs(ee,"pie-like")?-1!==K.indexOf(te[0].label)?.5:1:"legendonly"===ee.visible?.5:1}).each(function(){p.select(this).call(c,L,S)}).call(h,L,S).each(function(){G||p.select(this).call(x,L)}),g.syncOrAsync([b.previousPromises,function(){return function(te,ee,le,ce){var pe=te._fullLayout;ce||(ce=pe.legend);var de=pe._size,be=a.isVertical(ce),he=a.isGrouped(ce),xe=ce.borderwidth,De=2*xe,Se=l.itemGap,ke=ce.itemwidth+2*Se,Fe=2*(xe+Se),ve=D(ce),Te=ce.y<0||0===ce.y&&"top"===ve,Le=ce.y>1||1===ce.y&&"bottom"===ve,Oe=ce.tracegroupgap;ce._maxHeight=Math.max(Te||Le?pe.height/2:de.h,30);var Ne=0;ce._width=0,ce._height=0;var mn,nn,Xe,nt,Be=(nn=0,Xe=0,(nt=(mn=ce).title.side)&&(-1!==nt.indexOf("left")&&(nn=mn._titleWidth),-1!==nt.indexOf("top")&&(Xe=mn._titleHeight)),[nn,Xe]);if(be)le.each(function(mn){var nn=mn[0].height;t.setTranslate(this,xe+Be[0],xe+Be[1]+ce._height+nn/2+Se),ce._height+=nn,ce._width=Math.max(ce._width,mn[0].width)}),Ne=ke+ce._width,ce._width+=Se+ke+De,ce._height+=Fe,he&&(ee.each(function(mn,nn){t.setTranslate(this,0,nn*ce.tracegroupgap)}),ce._height+=(ce._lgroupsLength-1)*ce.tracegroupgap);else{var He=M(ce),ze=Le||Te,je=pe.width/2;ce._maxWidth=Math.max(ce.x<0||0===ce.x&&"right"===He?ze&&"left"===He?de.l+de.w:je:ce.x>1||1===ce.x&&"left"===He?ze&&"right"===He?de.r+de.w:je:de.w,2*ke);var qe=0,Ye=0;le.each(function(mn){var nn=mn[0].width+ke;qe=Math.max(qe,nn),Ye+=nn}),Ne=null;var ct=0;if(he){var vt=0,wt=0,Ot=0;ee.each(function(){var mn=0,nn=0;p.select(this).selectAll("g.traces").each(function(nt){var ye=nt[0].width,Ce=nt[0].height;t.setTranslate(this,Be[0],Be[1]+xe+Se+Ce/2+nn),nn+=Ce,mn=Math.max(mn,ke+ye)});var Xe=mn+Se;wt>0&&Xe+xe+wt>ce._maxWidth?(ct=Math.max(ct,wt),wt=0,Ot+=vt+Oe,vt=nn):vt=Math.max(vt,nn),t.setTranslate(this,wt,Ot),wt+=Xe}),ce._width=Math.max(ct,wt)+xe,ce._height=Ot+vt+Fe}else{var St=le.size(),ft=Ye+De+(St-1)*Se<ce._maxWidth,st=0,Ct=0,$t=0,rn=0;le.each(function(mn){var nn=mn[0].height,Xe=ke+mn[0].width,nt=(ft?Xe:qe)+Se;nt+xe+Ct-Se>=ce._maxWidth&&(ct=Math.max(ct,rn),Ct=0,$t+=st,ce._height+=st,st=0),t.setTranslate(this,Be[0]+xe+Ct,Be[1]+xe+$t+nn/2+Se),rn=Ct+Xe+Se,Ct+=nt,st=Math.max(st,nn)}),ft?(ce._width=Ct+De,ce._height=st+Fe):(ce._width=Math.max(ct,rn)+De,ce._height+=st+Fe)}}ce._width=Math.ceil(Math.max(ce._width+Be[0],ce._titleWidth+2*(xe+l.titlePad))),ce._height=Math.ceil(Math.max(ce._height+Be[1],ce._titleHeight+2*(xe+l.itemGap))),ce._effHeight=Math.min(ce._height,ce._maxHeight);var hn=te._context.edits,cn=hn.legendText||hn.legendPosition;le.each(function(mn){var nn=p.select(this).select(".legendtoggle"),Xe=mn[0].height,nt=cn?ke:Ne||ke+mn[0].width;be||(nt+=Se/2),t.setRect(nn,0,-Xe/2,nt,Xe)})}(L,oe,U,S)},function(){var te,ee,le,ce,ze,je,qe,Ye,pe=z._size,de=S.borderwidth;if(!G){if(qe=M(je=(ze=L)._fullLayout.legend),Ye=D(je),b.autoMargin(ze,"legend",{x:je.x,y:je.y,l:je._width*u[qe],r:je._width*s[qe],b:je._effHeight*s[Ye],t:je._effHeight*u[Ye]}))return;var be=pe.l+pe.w*S.x-u[M(S)]*S._width,he=pe.t+pe.h*(1-S.y)-u[D(S)]*S._effHeight;if(z.margin.autoexpand){var xe=be,De=he;be=g.constrain(be,0,z.width-S._width),he=g.constrain(he,0,z.height-S._effHeight),be!==xe&&g.log("Constrain legend.x to make legend fit inside graph"),he!==De&&g.log("Constrain legend.y to make legend fit inside graph")}t.setTranslate(ne,be,he)}if(H.on(".drag",null),ne.on("wheel",null),G||S._height<=S._maxHeight||L._context.staticPlot){var Se=S._effHeight;G&&(Se=S._height),J.attr({width:S._width-de,height:Se-de,x:de/2,y:de/2}),t.setTranslate(se,0,0),X.select("rect").attr({width:S._width-2*de,height:Se-2*de,x:de,y:de}),t.setClipUrl(se,q,L),t.setRect(H,0,0,0,0),delete S._scrollY}else{var ke,ve,Te=Math.max(l.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),Le=S._effHeight-Te-2*l.scrollBarMargin,Oe=S._height-S._effHeight,Ne=Le/Oe,Be=Math.min(S._scrollY||0,Oe);J.attr({width:S._width-2*de+l.scrollBarWidth+l.scrollBarMargin,height:S._effHeight-de,x:de/2,y:de/2}),X.select("rect").attr({width:S._width-2*de+l.scrollBarWidth+l.scrollBarMargin,height:S._effHeight-2*de,x:de,y:de+Be}),t.setClipUrl(se,q,L),it(Be,Te,Ne),ne.on("wheel",function(){it(Be=g.constrain(S._scrollY+p.event.deltaY/Le*Oe,0,Oe),Te,Ne),0!==Be&&Be!==Oe&&p.event.preventDefault()});var He=p.behavior.drag().on("dragstart",function(){var ze=p.event.sourceEvent;ke="touchstart"===ze.type?ze.changedTouches[0].clientY:ze.clientY,ve=Be}).on("drag",function(){var ze=p.event.sourceEvent;2===ze.buttons||ze.ctrlKey||it(Be=function(je,qe,Ye){return g.constrain((Ye-qe)/Ne+je,0,Oe)}(ve,ke,"touchmove"===ze.type?ze.changedTouches[0].clientY:ze.clientY),Te,Ne)});H.call(He);var Ve=p.behavior.drag().on("dragstart",function(){var ze=p.event.sourceEvent;"touchstart"===ze.type&&(ke=ze.changedTouches[0].clientY,ve=Be)}).on("drag",function(){var ze=p.event.sourceEvent;"touchmove"===ze.type&&it(Be=function(je,qe,Ye){return g.constrain((qe-Ye)/Ne+je,0,Oe)}(ve,ke,ze.changedTouches[0].clientY),Te,Ne)});se.call(Ve)}function it(ze,je,qe){S._scrollY=L._fullLayout.legend._scrollY=ze,t.setTranslate(se,0,-ze),t.setRect(H,S._width,l.scrollBarMargin+ze*qe,l.scrollBarWidth,je),X.select("rect").attr("y",de+ze)}L._context.edits.legendPosition&&(ne.classed("cursor-move",!0),r.init({element:ne.node(),gd:L,prepFn:function(){var ze=t.getTranslate(ne);le=ze.x,ce=ze.y},moveFn:function(ze,je){var qe=le+ze,Ye=ce+je;t.setTranslate(ne,qe,Ye),te=r.align(qe,0,pe.l,pe.l+pe.w,S.xanchor),ee=r.align(Ye,0,pe.t+pe.h,pe.t,S.yanchor)},doneFn:function(){void 0!==te&&void 0!==ee&&y.call("_guiRelayout",L,{"legend.x":te,"legend.y":ee})},clickFn:function(ze,je){var qe=E.selectAll("g.traces").filter(function(){var Ye=this.getBoundingClientRect();return je.clientX>=Ye.left&&je.clientX<=Ye.right&&je.clientY>=Ye.top&&je.clientY<=Ye.bottom});qe.size()>0&&_(L,ne,qe,ze,je)}}))}],L)}}(C,P)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("./helpers");ae.exports=function(b,y){var e,r,t=y._inHover,o=g.isGrouped(y),n=g.isReversed(y),m={},l=[],i=!1,f={},u=0,s=0;function d(z,q){if(""!==z&&g.isGrouped(y))-1===l.indexOf(z)?(l.push(z),i=!0,m[z]=[q]):m[z].push(q);else{var G="~~i"+u;l.push(G),m[G]=[q],u++}}for(e=0;e<b.length;e++){var h=b[e],a=h[0],_=a.trace,c=_.legendgroup;if(t||_.visible&&_.showlegend)if(p.traceIs(_,"pie-like"))for(f[c]||(f[c]={}),r=0;r<h.length;r++){var T=h[r].label;f[c][T]||(d(c,{label:T,color:h[r].color,i:h[r].i,trace:_,pts:h[r].pts}),f[c][T]=!0,s=Math.max(s,(T||"").length))}else d(c,a),s=Math.max(s,(_.name||"").length)}if(!l.length)return[];var x=!i||!o,w=[];for(e=0;e<l.length;e++){var M=m[l[e]];w.push(x?M[0]:M)}for(x&&(w=[w]),e=0;e<w.length;e++){var D=1/0;for(r=0;r<w[e].length;r++){var C=w[e][r].trace.legendrank;D>C&&(D=C)}w[e][0]._groupMinRank=D,w[e][0]._preGroupSort=e}var P=function(z,q){return z.trace.legendrank-q.trace.legendrank||z._preSort-q._preSort};for(w.forEach(function(z,q){z[0]._preGroupSort=q}),w.sort(function(z,q){return z[0]._groupMinRank-q[0]._groupMinRank||z[0]._preGroupSort-q[0]._preGroupSort}),e=0;e<w.length;e++){w[e].forEach(function(z,q){z._preSort=q}),w[e].sort(P);var L=w[e][0].trace,S=null;for(r=0;r<w[e].length;r++){var E=w[e][r].trace.legendgrouptitle;if(E&&E.text){S=E,t&&(E.font=y._groupTitleFont);break}}if(n&&w[e].reverse(),S){var N=!1;for(r=0;r<w[e].length;r++)if(p.traceIs(w[e][r].trace,"pie-like")){N=!0;break}w[e].unshift({i:-1,groupTitle:S,noClick:N,trace:{showlegend:L.showlegend,legendgroup:L.legendgroup,visible:"toggleitem"===y.groupclick||L.visible}})}for(r=0;r<w[e].length;r++)w[e][r]=[w[e][r]]}return y._lgroupsLength=w.length,y._maxNameLength=s,w}},{"../../registry":647,"./helpers":423}],422:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry"),b=!0;ae.exports=function(y,e,r){var t=e._fullLayout;if(!e._dragged&&!e._editing){var o,n=t.legend.itemclick,m=t.legend.itemdoubleclick,l=t.legend.groupclick;if(1===r&&"toggle"===n&&"toggleothers"===m&&b&&e.data&&e._context.showTips&&p.notifier(p._(e,"Double-click on legend to isolate one trace"),"long"),b=!1,1===r?o=n:2===r&&(o=m),o){var i="togglegroup"===l,f=t.hiddenlabels?t.hiddenlabels.slice():[],u=y.data()[0][0];if(!u.groupTitle||!u.noClick){var s,d,h,a,_,c=e._fullData,T=u.trace,x=T.legendgroup,w={},M=[],D=[],C=[];if(g.traceIs(T,"pie-like")){var P=u.label,L=f.indexOf(P);"toggle"===o?-1===L?f.push(P):f.splice(L,1):"toggleothers"===o&&(f=[],e.calcdata[0].forEach(function(H){P!==H.label&&f.push(H.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===f.length&&-1===L&&(f=[])),g.call("_guiRelayout",e,"hiddenlabels",f)}else{var S,E=x&&x.length,N=[];if(E)for(s=0;s<c.length;s++)(S=c[s]).visible&&S.legendgroup===x&&N.push(s);if("toggle"===o){var z;switch(T.visible){case!0:z="legendonly";break;case!1:z=!1;break;case"legendonly":z=!0}if(E)if(i)for(s=0;s<c.length;s++)!1!==c[s].visible&&c[s].legendgroup===x&&j(c[s],z);else j(T,z);else j(T,z)}else if("toggleothers"===o){var K,X=!0;for(s=0;s<c.length;s++)if(K=!0!==c[s].showlegend,!(c[s]===T||K||E&&c[s].legendgroup===x||!0!==c[s].visible||g.traceIs(c[s],"notLegendIsolatable"))){X=!1;break}for(s=0;s<c.length;s++)if(!1!==c[s].visible&&!g.traceIs(c[s],"notLegendIsolatable"))switch(T.visible){case"legendonly":j(c[s],!0);break;case!0:K=!0!==c[s].showlegend&&!c[s].legendgroup,j(c[s],!!(c[s]===T||E&&c[s].legendgroup===x||K)||!!X||"legendonly")}}for(s=0;s<D.length;s++)if(h=D[s]){var J=h.constructUpdate(),se=Object.keys(J);for(d=0;d<se.length;d++)(w[a=se[d]]=w[a]||[])[C[s]]=J[a]}for(_=Object.keys(w),s=0;s<_.length;s++)for(a=_[s],d=0;d<M.length;d++)w[a].hasOwnProperty(d)||(w[a][d]=void 0);g.call("_guiRestyle",e,w,M)}}}}function V(H,oe,U){var te=M.indexOf(H),ee=w[oe];return ee||(ee=w[oe]=[]),-1===M.indexOf(H)&&(M.push(H),te=M.length-1),ee[te]=U,te}function j(H,oe){if(!u.groupTitle||i){var U=H._fullInput;if(g.hasTransform(U,"groupby")){var te=D[U.index];if(!te){var ee=g.getTransformIndices(U,"groupby");te=p.keyedContainer(U,"transforms["+ee[ee.length-1]+"].styles","target","value.visible"),D[U.index]=te}var ce=te.get(H._group);void 0===ce&&(ce=!0),!1!==ce&&te.set(H._group,oe),C[U.index]=V(U.index,"visible",!1!==U.visible)}else V(U.index,"visible",!1!==U.visible&&oe)}}}},{"../../lib":515,"../../registry":647}],423:[function(v,ae,ie){"use strict";ie.isGrouped=function(p){return-1!==(p.traceorder||"").indexOf("grouped")},ie.isVertical=function(p){return"h"!==p.orientation},ie.isReversed=function(p){return-1!==(p.traceorder||"").indexOf("reversed")}},{}],424:[function(v,ae,ie){"use strict";ae.exports={moduleType:"component",name:"legend",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw"),style:v("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../lib"),y=b.strTranslate,e=v("../drawing"),r=v("../color"),t=v("../colorscale/helpers").extractOpts,o=v("../../traces/scatter/subtypes"),n=v("../../traces/pie/style_one"),m=v("../../traces/pie/helpers").castOption,l=v("./constants");function i(s,d){return(d?"radial":"horizontal")+(s?"":"reversed")}function f(s){var d=s[0].trace,h=d.contours,a=o.hasLines(d),_=o.hasMarkers(d),c=d.visible&&d.fill&&"none"!==d.fill,T=!1,x=!1;if(h){var w=h.coloring;"lines"===w?T=!0:a="none"===w||"heatmap"===w||h.showlines,"constraint"===h.type?c="="!==h._operation:"fill"!==w&&"heatmap"!==w||(x=!0)}return{showMarker:_,showLine:a,showFill:c,showGradientLine:T,showGradientFill:x,anyLine:a||T,anyFill:c||x}}function u(s,d,h){return s&&b.isArrayOrTypedArray(s)?d:s>h?h:s}ae.exports=function(s,d,h){h||(h=d._fullLayout.legend);var _="constant"===h.itemsizing,c=h.itemwidth,x=y((c+2*l.itemGap)/2,0),w=function(C,P,L,S){var E;if(C+1)E=C;else{if(!(P&&P.width>0))return 0;E=P.width}return _?S:Math.min(E,L)};function M(C,P,L){var S=C[0].trace,E=S.marker||{},N=E.line||{},z=L?S.visible&&S.type===L:g.traceIs(S,"bar"),q=p.select(P).select("g.legendpoints").selectAll("path.legend"+L).data(z?[C]:[]);q.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",x),q.exit().remove(),q.each(function(G){var K=p.select(this),ne=G[0],X=w(ne.mlw,E.line,5,2);K.style("stroke-width",X+"px");var J=ne.mcc;if(!h._inHover&&"mc"in ne){var se=t(E),V=se.mid;void 0===V&&(V=(se.max+se.min)/2),J=e.tryColorscale(E,"")(V)}var j=J||ne.mc||E.color,H=E.pattern,oe=H&&e.getPatternAttr(H.shape,0,"");if(oe){var U=e.getPatternAttr(H.bgcolor,0,null),te=e.getPatternAttr(H.fgcolor,0,null),ee=H.fgopacity,le=u(H.size,8,10),ce=u(H.solidity,.5,1);K.call(e.pattern,"legend",d,"legend-"+S.uid,oe,le,ce,J,H.fillmode,U,te,ee)}else K.call(r.fill,j);X&&r.stroke(K,ne.mlc||N.color)})}function D(C,P,L){var S=C[0],E=S.trace,N=L?E.visible&&E.type===L:g.traceIs(E,L),z=p.select(P).select("g.legendpoints").selectAll("path.legend"+L).data(N?[C]:[]);if(z.enter().append("path").classed("legend"+L,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",x),z.exit().remove(),z.size()){var q=(E.marker||{}).line,G=w(m(q.width,S.pts),q,5,2),K=b.minExtend(E,{marker:{line:{width:G}}});K.marker.line.color=q.color;var ne=b.minExtend(S,{trace:K});n(z,ne,K)}}s.each(function(C){var P=p.select(this),L=b.ensureSingle(P,"g","layers");L.style("opacity",C[0].trace.opacity);var S=h.valign,E=C[0].lineHeight,N=C[0].height;L.attr("transform","middle"!==S&&E&&N?y(0,{top:1,bottom:-1}[S]*(.5*(E-N+3))):null),L.selectAll("g.legendfill").data([C]).enter().append("g").classed("legendfill",!0),L.selectAll("g.legendlines").data([C]).enter().append("g").classed("legendlines",!0);var q=L.selectAll("g.legendsymbols").data([C]);q.enter().append("g").classed("legendsymbols",!0),q.selectAll("g.legendpoints").data([C]).enter().append("g").classed("legendpoints",!0)}).each(function(C){var P,L=C[0].trace,S=[];if(L.visible)switch(L.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],P=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],P=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],P="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],P=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],P=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],P=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],P=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],P=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],P=!1}var E=p.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);E.enter().append("path").classed("legend3dandfriends",!0).attr("transform",x).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(N,z){var q,G=p.select(this),K=t(L),ne=K.colorscale,X=K.reversescale;if(ne){if(!P){var J=ne.length;q=0===z?ne[X?J-1:0][1]:1===z?ne[X?0:J-1][1]:ne[Math.floor((J-1)/2)][1]}}else{var se=L.vertexcolor||L.facecolor||L.color;q=b.isArrayOrTypedArray(se)?se[z]||se[0]:se}G.attr("d",N[0]),q?G.call(r.fill,q):G.call(function(V){V.size()&&e.gradient(V,d,"legendfill-"+L.uid,i(X,"radial"===P),ne,"fill")})})}).each(function(C){var P=C[0].trace,L="waterfall"===P.type;if(C[0]._distinct&&L){var S=C[0].trace[C[0].dir].marker;return C[0].mc=S.color,C[0].mlw=S.line.width,C[0].mlc=S.line.color,M(C,this,"waterfall")}var E=[];P.visible&&L&&(E=C[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var N=p.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(E);N.enter().append("path").classed("legendwaterfall",!0).attr("transform",x).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(z){var q=p.select(this),G=P[z[0]].marker,K=w(void 0,G.line,5,2);q.attr("d",z[1]).style("stroke-width",K+"px").call(r.fill,G.color),K&&q.call(r.stroke,G.line.color)})}).each(function(C){M(C,this,"funnel")}).each(function(C){M(C,this)}).each(function(C){var P=C[0].trace,L=p.select(this).select("g.legendpoints").selectAll("path.legendbox").data(P.visible&&g.traceIs(P,"box-violin")?[C]:[]);L.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",x),L.exit().remove(),L.each(function(){var S=p.select(this);if("all"!==P.boxpoints&&"all"!==P.points||0!==r.opacity(P.fillcolor)||0!==r.opacity((P.line||{}).color)){var E=w(void 0,P.line,5,2);S.style("stroke-width",E+"px").call(r.fill,P.fillcolor),E&&r.stroke(S,P.line.color)}else{var N=b.minExtend(P,{marker:{size:_?12:b.constrain(P.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});L.call(e.pointStyle,N,d)}})}).each(function(C){D(C,this,"funnelarea")}).each(function(C){D(C,this,"pie")}).each(function(C){var P,L,S=f(C),E=S.showFill,N=S.showLine,z=S.showGradientLine,q=S.showGradientFill,G=S.anyFill,K=S.anyLine,ne=C[0],X=ne.trace,J=t(X),se=J.colorscale,V=J.reversescale,j=o.hasMarkers(X)||!G?"M5,0":K?"M5,-2":"M5,-3",H=p.select(this),oe=H.select(".legendfill").selectAll("path").data(E||q?[C]:[]);if(oe.enter().append("path").classed("js-fill",!0),oe.exit().remove(),oe.attr("d",j+"h"+c+"v6h-"+c+"z").call(function(ee){ee.size()&&(E?e.fillGroupStyle(ee,d):e.gradient(ee,d,"legendfill-"+X.uid,i(V),se,"fill"))}),N||z){var U=w(void 0,X.line,10,5);L=b.minExtend(X,{line:{width:U}}),P=[b.minExtend(ne,{trace:L})]}var te=H.select(".legendlines").selectAll("path").data(N||z?[P]:[]);te.enter().append("path").classed("js-line",!0),te.exit().remove(),te.attr("d",j+(z?"l"+c+",0.0001":"h"+c)).call(N?e.lineGroupStyle:function(ee){if(ee.size()){var le="legendline-"+X.uid;e.lineGroupStyle(ee),e.gradient(ee,d,le,i(V),se,"stroke")}})}).each(function(C){var P,L,S=f(C),z=S.showLine,q=S.showMarker,G=C[0],K=G.trace,ne=!q&&!S.anyLine&&!S.anyFill&&o.hasText(K);function X(te,ee,le,ce){var pe=b.nestedProperty(K,te).get(),de=b.isArrayOrTypedArray(pe)&&ee?ee(pe):pe;if(_&&de&&void 0!==ce&&(de=ce),le){if(de<le[0])return le[0];if(de>le[1])return le[1]}return de}function J(te){return G._distinct&&G.index&&te[G.index]?te[G.index]:te[0]}if(q||ne||z){var se={},V={};if(q){se.mc=X("marker.color",J),se.mx=X("marker.symbol",J),se.mo=X("marker.opacity",b.mean,[.2,1]),se.mlc=X("marker.line.color",J),se.mlw=X("marker.line.width",b.mean,[0,5],2),V.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var j=X("marker.size",b.mean,[2,16],12);se.ms=j,V.marker.size=j}z&&(V.line={width:X("line.width",J,[0,10],5)}),ne&&(se.tx="Aa",se.tp=X("textposition",J),se.ts=10,se.tc=X("textfont.color",J),se.tf=X("textfont.family",J)),P=[b.minExtend(G,se)],(L=b.minExtend(K,V)).selectedpoints=null,L.texttemplate=null}var H=p.select(this).select("g.legendpoints"),oe=H.selectAll("path.scatterpts").data(q?P:[]);oe.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",x),oe.exit().remove(),oe.call(e.pointStyle,L,d),q&&(P[0].mrc=3);var U=H.selectAll("g.pointtext").data(ne?P:[]);U.enter().append("g").classed("pointtext",!0).append("text").attr("transform",x),U.exit().remove(),U.selectAll("text").call(e.textPointStyle,L,d)}).each(function(C){var P=C[0].trace,L=p.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(P.visible&&"candlestick"===P.type?[C,C]:[]);L.enter().append("path").classed("legendcandle",!0).attr("d",function(S,E){return E?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",x).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(S,E){var N=p.select(this),z=P[E?"increasing":"decreasing"],q=w(void 0,z.line,5,2);N.style("stroke-width",q+"px").call(r.fill,z.fillcolor),q&&r.stroke(N,z.line.color)})}).each(function(C){var P=C[0].trace,L=p.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(P.visible&&"ohlc"===P.type?[C,C]:[]);L.enter().append("path").classed("legendohlc",!0).attr("d",function(S,E){return E?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",x).style("stroke-miterlimit",1),L.exit().remove(),L.each(function(S,E){var N=p.select(this),z=P[E?"increasing":"decreasing"],q=w(void 0,z.line,5,2);N.style("fill","none").call(e.dashLine,z.line.dash,q),q&&r.stroke(N,z.line.color)})})}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(v,ae,ie){"use strict";v("./constants"),ae.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../plots/plots"),b=v("../../plots/cartesian/axis_ids"),y=v("../../fonts/ploticon"),e=v("../shapes/draw").eraseActiveShape,r=v("../../lib"),t=r._,o=ae.exports={};function n(a,_){var c,T,x=_.currentTarget,w=x.getAttribute("data-attr"),M=x.getAttribute("data-val")||!0,D=a._fullLayout,C={},P=b.list(a,null,!0),L=D._cartesianSpikesEnabled;if("zoom"===w){var S,E="in"===M?.5:2,N=(1+E)/2,z=(1-E)/2;for(T=0;T<P.length;T++)if(!(c=P[T]).fixedrange)if(S=c._name,"auto"===M)C[S+".autorange"]=!0;else if("reset"===M){if(void 0===c._rangeInitial)C[S+".autorange"]=!0;else{var q=c._rangeInitial.slice();C[S+".range[0]"]=q[0],C[S+".range[1]"]=q[1]}void 0!==c._showSpikeInitial&&(C[S+".showspikes"]=c._showSpikeInitial,"on"!==L||c._showSpikeInitial||(L="off"))}else{var G=[c.r2l(c.range[0]),c.r2l(c.range[1])],K=[N*G[0]+z*G[1],N*G[1]+z*G[0]];C[S+".range[0]"]=c.l2r(K[0]),C[S+".range[1]"]=c.l2r(K[1])}}else"hovermode"!==w||"x"!==M&&"y"!==M||x.setAttribute("data-val",M=D._isHoriz?"y":"x"),C[w]=M;D._cartesianSpikesEnabled=L,p.call("_guiRelayout",a,C)}function m(a,_){for(var c=_.currentTarget,T=c.getAttribute("data-attr"),x=c.getAttribute("data-val")||!0,w=a._fullLayout._subplots.gl3d||[],M={},D=T.split("."),C=0;C<w.length;C++)M[w[C]+"."+D[1]]=x;M.dragmode="pan"===x?x:"zoom",p.call("_guiRelayout",a,M)}function l(a,_){for(var c=_.currentTarget.getAttribute("data-attr"),T="resetLastSave"===c,x="resetDefault"===c,w=a._fullLayout,M=w._subplots.gl3d||[],D={},C=0;C<M.length;C++){var P,L=M[C],S=L+".camera",E=L+".aspectratio",N=L+".aspectmode",z=w[L]._scene;T?(D[S+".up"]=z.viewInitial.up,D[S+".eye"]=z.viewInitial.eye,D[S+".center"]=z.viewInitial.center,P=!0):x&&(D[S+".up"]=null,D[S+".eye"]=null,D[S+".center"]=null,P=!0),P&&(D[E+".x"]=z.viewInitial.aspectratio.x,D[E+".y"]=z.viewInitial.aspectratio.y,D[E+".z"]=z.viewInitial.aspectratio.z,D[N]=z.viewInitial.aspectmode)}p.call("_guiRelayout",a,D)}function i(a,_){var c=_.currentTarget,T=c._previousVal,x=a._fullLayout,w=x._subplots.gl3d||[],M=["xaxis","yaxis","zaxis"],D={},C={};if(T)C=T,c._previousVal=null;else{for(var P=0;P<w.length;P++){var L=w[P],S=x[L],E=L+".hovermode";D[E]=S.hovermode,C[E]=!1;for(var N=0;N<3;N++){var z=M[N],q=L+"."+z+".showspikes";C[q]=!1,D[q]=S[z].showspikes}}c._previousVal=D}return C}function f(a,_){for(var c=_.currentTarget,T=c.getAttribute("data-attr"),x=c.getAttribute("data-val")||!0,w=a._fullLayout,M=w._subplots.geo||[],D=0;D<M.length;D++){var C=M[D];if("zoom"===T){var L=w[C].projection.scale;p.call("_guiRelayout",a,C+".projection.scale","in"===x?2*L:.5*L)}}"reset"===T&&h(a,"geo")}function u(a){var _=a._fullLayout;return!_.hovermode&&(_._has("cartesian")?_._isHoriz?"y":"x":"closest")}function s(a){var _=u(a);p.call("_guiRelayout",a,"hovermode",_)}function d(a,_){for(var c=_.currentTarget.getAttribute("data-val"),T=a._fullLayout,x=T._subplots.mapbox||[],w={},M=0;M<x.length;M++){var D=x[M],C=T[D].zoom;w[D+".zoom"]="in"===c?1.05*C:C/1.05}p.call("_guiRelayout",a,w)}function h(a,_){for(var c=a._fullLayout,T=c._subplots[_]||[],x={},w=0;w<T.length;w++)for(var M=T[w],D=c[M]._subplot.viewInitial,C=Object.keys(D),P=0;P<C.length;P++){var L=C[P];x[M+"."+L]=D[L]}p.call("_guiRelayout",a,x)}o.toImage={name:"toImage",title:function(a){return t(a,"png"===((a._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:y.camera,click:function(a){var _=a._context.toImageButtonOptions,c={format:_.format||"png"};r.notifier(t(a,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==c.format&&r.isIE()&&(r.notifier(t(a,"IE only supports svg.  Changing format to svg."),"long"),c.format="svg"),["filename","width","height","scale"].forEach(function(T){T in _&&(c[T]=_[T])}),p.call("downloadImage",a,c).then(function(T){r.notifier(t(a,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){r.notifier(t(a,"Sorry, there was a problem downloading your snapshot!"),"long")})}},o.sendDataToCloud={name:"sendDataToCloud",title:function(a){return t(a,"Edit in Chart Studio")},icon:y.disk,click:function(a){g.sendDataToCloud(a)}},o.editInChartStudio={name:"editInChartStudio",title:function(a){return t(a,"Edit in Chart Studio")},icon:y.pencil,click:function(a){g.sendDataToCloud(a)}},o.zoom2d={name:"zoom2d",_cat:"zoom",title:function(a){return t(a,"Zoom")},attr:"dragmode",val:"zoom",icon:y.zoombox,click:n},o.pan2d={name:"pan2d",_cat:"pan",title:function(a){return t(a,"Pan")},attr:"dragmode",val:"pan",icon:y.pan,click:n},o.select2d={name:"select2d",_cat:"select",title:function(a){return t(a,"Box Select")},attr:"dragmode",val:"select",icon:y.selectbox,click:n},o.lasso2d={name:"lasso2d",_cat:"lasso",title:function(a){return t(a,"Lasso Select")},attr:"dragmode",val:"lasso",icon:y.lasso,click:n},o.drawclosedpath={name:"drawclosedpath",title:function(a){return t(a,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:y.drawclosedpath,click:n},o.drawopenpath={name:"drawopenpath",title:function(a){return t(a,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:y.drawopenpath,click:n},o.drawline={name:"drawline",title:function(a){return t(a,"Draw line")},attr:"dragmode",val:"drawline",icon:y.drawline,click:n},o.drawrect={name:"drawrect",title:function(a){return t(a,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:y.drawrect,click:n},o.drawcircle={name:"drawcircle",title:function(a){return t(a,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:y.drawcircle,click:n},o.eraseshape={name:"eraseshape",title:function(a){return t(a,"Erase active shape")},icon:y.eraseshape,click:e},o.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(a){return t(a,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:n},o.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(a){return t(a,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:n},o.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(a){return t(a,"Autoscale")},attr:"zoom",val:"auto",icon:y.autoscale,click:n},o.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(a){return t(a,"Reset axes")},attr:"zoom",val:"reset",icon:y.home,click:n},o.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(a){return t(a,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:n},o.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(a){return t(a,"Compare data on hover")},attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?"y":"x"},icon:y.tooltip_compare,gravity:"ne",click:n},o.zoom3d={name:"zoom3d",_cat:"zoom",title:function(a){return t(a,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:y.zoombox,click:m},o.pan3d={name:"pan3d",_cat:"pan",title:function(a){return t(a,"Pan")},attr:"scene.dragmode",val:"pan",icon:y.pan,click:m},o.orbitRotation={name:"orbitRotation",title:function(a){return t(a,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:y["3d_rotate"],click:m},o.tableRotation={name:"tableRotation",title:function(a){return t(a,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:y["z-axis"],click:m},o.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(a){return t(a,"Reset camera to default")},attr:"resetDefault",icon:y.home,click:l},o.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(a){return t(a,"Reset camera to last save")},attr:"resetLastSave",icon:y.movie,click:l},o.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(a){return t(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(a,_){var c=i(a,_);p.call("_guiRelayout",a,c)}},o.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(a){return t(a,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:f},o.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(a){return t(a,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:f},o.resetGeo={name:"resetGeo",_cat:"reset",title:function(a){return t(a,"Reset")},attr:"reset",val:null,icon:y.autoscale,click:f},o.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(a){return t(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:s},o.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(a){return t(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:s},o.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(a){return t(a,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:s},o.resetViewSankey={name:"resetSankeyGroup",title:function(a){return t(a,"Reset view")},icon:y.home,click:function(a){for(var _={"node.groups":[],"node.x":[],"node.y":[]},c=0;c<a._fullData.length;c++){var T=a._fullData[c]._viewInitial;_["node.groups"].push(T.node.groups.slice()),_["node.x"].push(T.node.x.slice()),_["node.y"].push(T.node.y.slice())}p.call("restyle",a,_)}},o.toggleHover={name:"toggleHover",title:function(a){return t(a,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(a,_){var c=i(a,_);c.hovermode=u(a),p.call("_guiRelayout",a,c)}},o.resetViews={name:"resetViews",title:function(a){return t(a,"Reset views")},icon:y.home,click:function(a,_){var c=_.currentTarget;c.setAttribute("data-attr","zoom"),c.setAttribute("data-val","reset"),n(a,_),c.setAttribute("data-attr","resetLastSave"),l(a,_),h(a,"geo"),h(a,"mapbox")}},o.toggleSpikelines={name:"toggleSpikelines",title:function(a){return t(a,"Toggle Spike Lines")},icon:y.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(a){var _=a._fullLayout;_._cartesianSpikesEnabled="on"===_._cartesianSpikesEnabled?"off":"on",p.call("_guiRelayout",a,function(T){for(var x="on"===T._fullLayout._cartesianSpikesEnabled,w=b.list(T,null,!0),M={},D=0;D<w.length;D++){var C=w[D];M[C._name+".showspikes"]=!!x||C._showSpikeInitial}return M}(a))}},o.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(a){return t(a,"Reset view")},attr:"reset",icon:y.home,click:function(a){h(a,"mapbox")}},o.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(a){return t(a,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:d},o.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(a){return t(a,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:d}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(v,ae,ie){"use strict";var p=v("./buttons"),g=Object.keys(p),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],y=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),e=[];g.forEach(function(r){!function(t){if(-1===y.indexOf(t._cat||t.name)){var o=t.name,n=(t._cat||t.name).toLowerCase();-1===e.indexOf(o)&&e.push(o),-1===e.indexOf(n)&&e.push(n)}}(p[r])}),e.sort(),ae.exports={DRAW_MODES:b,backButtons:y,foreButtons:e}},{"./buttons":427}],429:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../color"),b=v("../../plot_api/plot_template"),y=v("./attributes");ae.exports=function(e,r){var t=e.modebar||{},o=b.newContainer(r,"modebar");function n(l,i){return p.coerce(t,o,y,l,i)}n("orientation"),n("bgcolor",g.addOpacity(r.paper_bgcolor,.5));var m=g.contrast(g.rgb(r.modebar.bgcolor));n("color",g.addOpacity(m,.3)),n("activecolor",g.addOpacity(m,.7)),n("uirevision",r.uirevision),n("add"),n("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(v,ae,ie){"use strict";ae.exports={moduleType:"component",name:"modebar",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),manage:v("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axis_ids"),g=v("../../traces/scatter/subtypes"),b=v("../../registry"),y=v("../fx/helpers").isUnifiedHover,e=v("./modebar"),r=v("./buttons"),t=v("./constants").DRAW_MODES,o=v("../../lib").extendDeep;ae.exports=function(n){var m=n._fullLayout,l=n._context,i=m._modeBar;if(l.displayModeBar||l.watermark){if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var f,u=l.modeBarButtons;f=Array.isArray(u)&&u.length?function(s){for(var d=o([],s),h=0;h<d.length;h++)for(var a=d[h],_=0;_<a.length;_++){var c=a[_];if("string"==typeof c){if(void 0===r[c])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));d[h][_]=r[c]}}return d}(u):!l.displayModeBar&&l.watermark?[]:function(s){var d=s._fullLayout,h=s._fullData,a=s._context;function _(pe,de){if("string"==typeof de){if(de.toLowerCase()===pe.toLowerCase())return!0}else if(de.name===pe||(de._cat||de.name)===pe.toLowerCase())return!0;return!1}var c=d.modebar.add;"string"==typeof c&&(c=[c]);var T=d.modebar.remove;"string"==typeof T&&(T=[T]);var x=a.modeBarButtonsToAdd.concat(c.filter(function(pe){for(var de=0;de<a.modeBarButtonsToRemove.length;de++)if(_(pe,a.modeBarButtonsToRemove[de]))return!1;return!0})),w=a.modeBarButtonsToRemove.concat(T.filter(function(pe){for(var de=0;de<a.modeBarButtonsToAdd.length;de++)if(_(pe,a.modeBarButtonsToAdd[de]))return!1;return!0})),M=d._has("cartesian"),D=d._has("gl3d"),C=d._has("geo"),P=d._has("pie"),L=d._has("funnelarea"),S=d._has("gl2d"),E=d._has("ternary"),N=d._has("mapbox"),z=d._has("polar"),q=d._has("smith"),G=d._has("sankey"),K=function(pe){for(var de=p.list({_fullLayout:pe},null,!0),be=0;be<de.length;be++)if(!de[be].fixedrange)return!1;return!0}(d),ne=y(d.hovermode),X=[];function J(pe){if(pe.length){for(var de=[],be=0;be<pe.length;be++){for(var he=pe[be],xe=r[he],De=xe.name.toLowerCase(),Se=(xe._cat||xe.name).toLowerCase(),ke=!1,Fe=0;Fe<w.length;Fe++){var ve=w[Fe].toLowerCase();if(ve===De||ve===Se){ke=!0;break}}ke||de.push(r[he])}X.push(de)}}var se=["toImage"];a.showEditInChartStudio?se.push("editInChartStudio"):a.showSendToCloud&&se.push("sendDataToCloud"),J(se);var V=[],j=[],H=[],oe=[];(M||S||P||L||E)+C+D+N+z+q>1?(j=["toggleHover"],H=["resetViews"]):C?(V=["zoomInGeo","zoomOutGeo"],j=["hoverClosestGeo"],H=["resetGeo"]):D?(j=["hoverClosest3d"],H=["resetCameraDefault3d","resetCameraLastSave3d"]):N?(V=["zoomInMapbox","zoomOutMapbox"],j=["toggleHover"],H=["resetViewMapbox"]):S?j=["hoverClosestGl2d"]:P?j=["hoverClosestPie"]:G?(j=["hoverClosestCartesian","hoverCompareCartesian"],H=["resetViewSankey"]):j=["toggleHover"],M&&(j=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(pe){for(var de=0;de<pe.length;de++)if(!b.traceIs(pe[de],"noHover"))return!1;return!0}(h)||ne)&&(j=[]),!M&&!S||K||(V=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==H[0]&&(H=["resetScale2d"])),D?oe=["zoom3d","pan3d","orbitRotation","tableRotation"]:(M||S)&&!K||E?oe=["zoom2d","pan2d"]:N||C?oe=["pan2d"]:z&&(oe=["zoom2d"]),function(pe){for(var de=!1,be=0;be<pe.length&&!de;be++){var he=pe[be];he._module&&he._module.selectPoints&&(b.traceIs(he,"scatter-like")?(g.hasMarkers(he)||g.hasText(he))&&(de=!0):b.traceIs(he,"box-violin")&&"all"!==he.boxpoints&&"all"!==he.points||(de=!0))}return de}(h)&&oe.push("select2d","lasso2d");var U=[],te=function(pe){-1===U.indexOf(pe)&&-1!==j.indexOf(pe)&&U.push(pe)};if(Array.isArray(x)){for(var ee=[],le=0;le<x.length;le++){var ce=x[le];"string"==typeof ce?(ce=ce.toLowerCase(),-1!==t.indexOf(ce)?(d._has("mapbox")||d._has("cartesian"))&&oe.push(ce):"togglespikelines"===ce?te("toggleSpikelines"):"togglehover"===ce?te("toggleHover"):"hovercompare"===ce?te("hoverCompareCartesian"):"hoverclosest"===ce?(te("hoverClosestCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestGl2d"),te("hoverClosestPie")):"v1hovermode"===ce&&(te("toggleHover"),te("hoverClosestCartesian"),te("hoverCompareCartesian"),te("hoverClosestGeo"),te("hoverClosest3d"),te("hoverClosestGl2d"),te("hoverClosestPie"))):ee.push(ce)}x=ee}return J(oe),J(V.concat(H)),J(U),function(pe,de){if(de.length)if(Array.isArray(de[0]))for(var be=0;be<de.length;be++)pe.push(de[be]);else pe.push(de);return pe}(X,x)}(n),i?i.update(n,f):m._modeBar=e(n,f)}else i&&(i.destroy(),delete m._modeBar)}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../../lib"),y=v("../../fonts/ploticon"),e=v("../../version").version,r=new DOMParser;function t(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var o=t.prototype;o.update=function(n,m){this.graphInfo=n;var l=this.graphInfo._context,i=this.graphInfo._fullLayout,f="modebar-"+i._uid;this.element.setAttribute("id",f),this._uid=f,this.element.className="modebar","hover"===l.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===i.modebar.orientation&&(this.element.className+=" vertical",m=m.reverse());var u=i.modebar,s="hover"===l.displayModeBar?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(f),b.addRelatedStyleRule(f,s+"#"+f+" .modebar-group","background-color: "+u.bgcolor),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn .icon path","fill: "+u.color),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn:hover .icon path","fill: "+u.activecolor),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn.active .icon path","fill: "+u.activecolor);var d=!this.hasButtons(m),h=this.hasLogo!==l.displaylogo,a=this.locale!==l.locale;if(this.locale=l.locale,(d||h||a)&&(this.removeAllButtons(),this.updateButtons(m),l.watermark||l.displaylogo)){var _=this.getLogo();l.watermark&&(_.className=_.className+" watermark"),"v"===i.modebar.orientation?this.element.insertBefore(_,this.element.childNodes[0]):this.element.appendChild(_),this.hasLogo=!0}this.updateActiveButton()},o.updateButtons=function(n){var m=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(l){var i=m.createGroup();l.forEach(function(f){var u=f.name;if(!u)throw new Error("must provide button 'name' in button config");if(-1!==m.buttonsNames.indexOf(u))throw new Error("button name '"+u+"' is taken");m.buttonsNames.push(u);var s=m.createButton(f);m.buttonElements.push(s),i.appendChild(s)}),m.element.appendChild(i)})},o.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},o.createButton=function(n){var m=this,l=document.createElement("a");l.setAttribute("rel","tooltip"),l.className="modebar-btn";var i=n.title;void 0===i?i=n.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&l.setAttribute("data-title",i),void 0!==n.attr&&l.setAttribute("data-attr",n.attr);var f=n.val;if(void 0!==f&&("function"==typeof f&&(f=f(this.graphInfo)),l.setAttribute("data-val",f)),"function"!=typeof n.click)throw new Error("must provide button 'click' function in button config");l.addEventListener("click",function(s){n.click(m.graphInfo,s),m.updateActiveButton(s.currentTarget)}),l.setAttribute("data-toggle",n.toggle||!1),n.toggle&&p.select(l).classed("active",!0);var u=n.icon;return l.appendChild("function"==typeof u?u():this.createIcon(u||y.question)),l.setAttribute("data-gravity",n.gravity||"n"),l},o.createIcon=function(n){var m,l=g(n.height)?Number(n.height):n.ascent-n.descent,i="http://www.w3.org/2000/svg";if(n.path){(m=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,n.width,l].join(" ")),m.setAttribute("class","icon");var f=document.createElementNS(i,"path");f.setAttribute("d",n.path),n.transform?f.setAttribute("transform",n.transform):void 0!==n.ascent&&f.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),m.appendChild(f)}return n.svg&&(m=r.parseFromString(n.svg,"application/xml").childNodes[0]),m.setAttribute("height","1em"),m.setAttribute("width","1em"),m},o.updateActiveButton=function(n){var m=this.graphInfo._fullLayout,l=void 0!==n?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var f=i.getAttribute("data-val")||!0,u=i.getAttribute("data-attr"),s="true"===i.getAttribute("data-toggle"),d=p.select(i);if(s)u===l&&d.classed("active",!d.classed("active"));else{var h=null===u?u:b.nestedProperty(m,u).get();d.classed("active",h===f)}})},o.hasButtons=function(n){var m=this.buttons;if(!m||n.length!==m.length)return!1;for(var l=0;l<n.length;++l){if(n[l].length!==m[l].length)return!1;for(var i=0;i<n[l].length;i++)if(n[l][i].name!==m[l][i].name)return!1}return!0},o.getLogo=function(){var n=this.createGroup(),m=document.createElement("a");return m.href="https://plotly.com/",m.target="_blank",m.setAttribute("data-title",b._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),m.className="modebar-btn plotlyjsicon modebar-btn--logo",m.appendChild(this.createIcon(y.newplotlylogo)),n.appendChild(m),n},o.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},o.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)},ae.exports=function(n,m){var l=n._fullLayout,i=new t({graphInfo:n,container:l._modebardiv.node(),buttons:m});return l._privateplot&&p.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("../color/attributes"),b=(0,v("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ae.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:p({editType:"plot"}),bgcolor:{valType:"color",dflt:g.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(v,ae,ie){"use strict";ae.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../color"),b=v("../../plot_api/plot_template"),y=v("../../plots/array_container_defaults"),e=v("./attributes"),r=v("./constants");function t(o,n,m,l){var i=l.calendar;function f(s,d){return p.coerce(o,n,e.buttons,s,d)}if(f("visible")){var u=f("step");"all"!==u&&(!i||"gregorian"===i||"month"!==u&&"year"!==u?f("stepmode"):n.stepmode="backward",f("count")),f("label")}}ae.exports=function(o,n,m,l,i){var f=o.rangeselector||{},u=b.newContainer(n,"rangeselector");function s(a,_){return p.coerce(f,u,e,a,_)}if(s("visible",y(f,u,{name:"buttons",handleItemDefaults:t,calendar:i}).length>0)){var d=function(a,_,c){for(var T=c.filter(function(D){return _[D].anchor===a._id}),x=0,w=0;w<T.length;w++){var M=_[T[w]].domain;M&&(x=Math.max(M[1],x))}return[a.domain[0],x+r.yPad]}(n,m,l);s("x",d[0]),s("y",d[1]),p.noneOrAll(o,n,["x","y"]),s("xanchor"),s("yanchor"),p.coerceFont(s,"font",m.font);var h=s("bgcolor");s("activecolor",g.contrast(h,r.lightAmount,r.darkAmount)),s("bordercolor"),s("borderwidth")}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../plots/plots"),y=v("../color"),e=v("../drawing"),r=v("../../lib"),t=r.strTranslate,o=v("../../lib/svg_text_utils"),n=v("../../plots/cartesian/axis_ids"),m=v("../../constants/alignment"),l=m.LINE_SPACING,i=m.FROM_TL,f=m.FROM_BR,u=v("./constants"),s=v("./get_update_object");function d(_){return _._id}function h(_,c,T){var w,M,x=r.ensureSingle(_,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});x.attr({rx:u.rx,ry:u.ry}),x.call(y.stroke,c.bordercolor).call(y.fill,(w=c,M=T,M._isActive||M._isHovered?w.activecolor:w.bgcolor)).style("stroke-width",c.borderwidth+"px")}function a(_,c,T,x){var w,M;r.ensureSingle(_,"text","selector-text",function(w){w.attr("text-anchor","middle")}).call(e.font,c.font).text((w=T,M=x._fullLayout._meta,w.label?M?r.templateString(w.label,M):w.label:"all"===w.step?"all":w.count+w.step.charAt(0))).call(function(w){o.convertToTspans(w,x)})}ae.exports=function(_){var c=_._fullLayout._infolayer.selectAll(".rangeselector").data(function(T){for(var x=n.list(T,"x",!0),w=[],M=0;M<x.length;M++){var D=x[M];D.rangeselector&&D.rangeselector.visible&&w.push(D)}return w}(_),d);c.enter().append("g").classed("rangeselector",!0),c.exit().remove(),c.style({cursor:"pointer","pointer-events":"all"}),c.each(function(T){var x=p.select(this),w=T,M=w.rangeselector,D=x.selectAll("g.button").data(r.filterVisible(M.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(C){var P=p.select(this),L=s(w,C);C._isActive=function(S,E,N){if("all"===E.step)return!0===S.autorange;var z=Object.keys(N);return S.range[0]===N[z[0]]&&S.range[1]===N[z[1]]}(w,C,L),P.call(h,M,C),P.call(a,M,C,_),P.on("click",function(){_._dragged||g.call("_guiRelayout",_,L)}),P.on("mouseover",function(){C._isHovered=!0,P.call(h,M,C)}),P.on("mouseout",function(){C._isHovered=!1,P.call(h,M,C)})}),function(C,P,L,S,E){var N=0,z=0,q=L.borderwidth;P.each(function(){var se=p.select(this).select(".selector-text"),j=Math.max(L.font.size*l*o.lineCount(se),16)+3;z=Math.max(z,j)}),P.each(function(){var se=p.select(this),V=se.select(".selector-rect"),j=se.select(".selector-text"),H=j.node()&&e.bBox(j.node()).width,oe=L.font.size*l,U=o.lineCount(j),te=Math.max(H+10,u.minButtonWidth);se.attr("transform",t(q+N,q)),V.attr({x:0,y:0,width:te,height:z}),o.positionText(j,te/2,z/2-(U-1)*oe/2+3),N+=te+5});var G=C._fullLayout._size,K=G.l+G.w*L.x,ne=G.t+G.h*(1-L.y),X="left";r.isRightAnchor(L)&&(K-=N,X="right"),r.isCenterAnchor(L)&&(K-=N/2,X="center");var J="top";r.isBottomAnchor(L)&&(ne-=z,J="bottom"),r.isMiddleAnchor(L)&&(ne-=z/2,J="middle"),N=Math.ceil(N),z=Math.ceil(z),K=Math.round(K),ne=Math.round(ne),b.autoMargin(C,S+"-range-selector",{x:L.x,y:L.y,l:N*i[X],r:N*f[X],b:z*f[J],t:z*i[J]}),E.attr("transform",t(K,ne))}(_,D,M,w._name,x)})}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(v,ae,ie){"use strict";var p=v("d3-time"),g=v("../../lib").titleCase;ae.exports=function(b,y){var e=b._name,r={};if("all"===y.step)r[e+".autorange"]=!0;else{var t=function(o,n){var m,l=o.range,i=new Date(o.r2l(l[1])),u=p["utc"+g(n.step)],s=n.count;switch(n.stepmode){case"backward":m=o.l2r(+u.offset(i,-s));break;case"todate":var d=u.offset(i,-s);m=o.l2r(+u.ceil(d))}return[m,l[1]]}(b,y);r[e+".range[0]"]=t[0],r[e+".range[1]"]=t[1]}return r}},{"../../lib":515,"d3-time":122}],438:[function(v,ae,ie){"use strict";ae.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(v,ae,ie){"use strict";var p=v("../color/attributes");ae.exports={bgcolor:{valType:"color",dflt:p.background,editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axis_ids").list,g=v("../../plots/cartesian/autorange").getAutoRange,b=v("./constants");ae.exports=function(y){for(var e=p(y,"x",!0),r=0;r<e.length;r++){var t=e[r],o=t[b.name];o&&o.visible&&o.autorange&&(o._input.autorange=!0,o._input.range=o.range=g(y,t))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(v,ae,ie){"use strict";ae.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plot_api/plot_template"),b=v("../../plots/cartesian/axis_ids"),y=v("./attributes"),e=v("./oppaxis_attributes");ae.exports=function(r,t,o){var n=r[o],m=t[o];if(n.rangeslider||t._requestRangeslider[m._id]){p.isPlainObject(n.rangeslider)||(n.rangeslider={});var l,i,f=n.rangeslider,u=g.newContainer(m,"rangeslider");if(x("visible")){x("bgcolor",t.plot_bgcolor),x("bordercolor"),x("borderwidth"),x("thickness"),x("autorange",!m.isValidRange(f.range)),x("range");var s=t._subplots;if(s)for(var d=s.cartesian.filter(function(M){return M.substr(0,M.indexOf("y"))===b.name2id(o)}).map(function(M){return M.substr(M.indexOf("y"),M.length)}),h=p.simpleMap(d,b.id2name),a=0;a<h.length;a++){var _=h[a];l=f[_]||{},i=g.newContainer(u,_,"yaxis");var c,T=t[_];l.range&&T.isValidRange(l.range)&&(c="fixed"),"match"!==w("rangemode",c)&&w("range",T.range.slice())}u._input=f}}function x(M,D){return p.coerce(f,u,y,M,D)}function w(M,D){return p.coerce(l,i,e,M,D)}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../plots/plots"),y=v("../../lib"),e=y.strTranslate,r=v("../drawing"),t=v("../color"),o=v("../titles"),n=v("../../plots/cartesian"),m=v("../../plots/cartesian/axis_ids"),l=v("../dragelement"),i=v("../../lib/setcursor"),f=v("./constants");function u(c,T,x,w){var M=y.ensureSingle(c,"rect",f.bgClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),D=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,C=-w._offsetShift,P=r.crispRound(T,w.borderwidth);M.attr({width:w._width+D,height:w._height+D,transform:e(C,C),fill:w.bgcolor,stroke:w.bordercolor,"stroke-width":P})}function s(c,T,x,w){y.ensureSingleById(T._fullLayout._topdefs,"clipPath",w._clipId,function(D){D.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function d(c,T,x,w){var M,D=T.calcdata,C=c.selectAll("g."+f.rangePlotClassName).data(x._subplotsWith,y.identity);C.enter().append("g").attr("class",function(P){return f.rangePlotClassName+" "+P}).call(r.setClipUrl,w._clipId,T),C.order(),C.exit().remove(),C.each(function(P,L){var S=p.select(this),E=0===L,N=m.getFromId(T,P,"y"),z=N._name,q=w[z],G={data:[],layout:{xaxis:{type:x.type,domain:[0,1],range:w.range.slice(),calendar:x.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:T._context};x.rangebreaks&&(G.layout.xaxis.rangebreaks=x.rangebreaks),G.layout[z]={type:N.type,domain:[0,1],range:"match"!==q.rangemode?q.range.slice():N.range.slice(),calendar:N.calendar},N.rangebreaks&&(G.layout[z].rangebreaks=N.rangebreaks),b.supplyDefaults(G);var K=G._fullLayout.xaxis,ne=G._fullLayout[z];K.clearCalc(),K.setScale(),ne.clearCalc(),ne.setScale();var X={id:P,plotgroup:S,xaxis:K,yaxis:ne,isRangePlot:!0};E?M=X:(X.mainplot="xy",X.mainplotinfo=M),n.rangePlot(T,X,function(J,se){for(var V=[],j=0;j<J.length;j++){var H=J[j],oe=H[0].trace;oe.xaxis+oe.yaxis===se&&V.push(H)}return V}(D,P))})}function h(c,T,x,w,M){y.ensureSingle(c,"rect",f.maskMinClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(t.fill,f.maskColor),y.ensureSingle(c,"rect",f.maskMaxClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(t.fill,f.maskColor),"match"!==M.rangemode&&(y.ensureSingle(c,"rect",f.maskMinOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(t.fill,f.maskOppAxisColor),y.ensureSingle(c,"rect",f.maskMaxOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",f.maskOppBorder).call(t.fill,f.maskOppAxisColor))}function a(c,T,x,w){T._context.staticPlot||y.ensureSingle(c,"rect",f.slideBoxClassName,function(M){M.attr({y:0,cursor:f.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:f.slideBoxFill})}function _(c,T,x,w){var M=y.ensureSingle(c,"g",f.grabberMinClassName),D=y.ensureSingle(c,"g",f.grabberMaxClassName),C={x:0,width:f.handleWidth,rx:f.handleRadius,fill:t.background,stroke:t.defaultLine,"stroke-width":f.handleStrokeWidth,"shape-rendering":"crispEdges"},P={y:Math.round(w._height/4),height:Math.round(w._height/2)};y.ensureSingle(M,"rect",f.handleMinClassName,function(S){S.attr(C)}).attr(P),y.ensureSingle(D,"rect",f.handleMaxClassName,function(S){S.attr(C)}).attr(P);var L={width:f.grabAreaWidth,x:0,y:0,fill:f.grabAreaFill,cursor:T._context.staticPlot?void 0:f.grabAreaCursor};y.ensureSingle(M,"rect",f.grabAreaMinClassName,function(S){S.attr(L)}).attr("height",w._height),y.ensureSingle(D,"rect",f.grabAreaMaxClassName,function(S){S.attr(L)}).attr("height",w._height)}ae.exports=function(c){for(var T=c._fullLayout,x=T._rangeSliderData,w=0;w<x.length;w++){var M=x[w][f.name];M._clipId=M._id+"-"+T._uid}var D=T._infolayer.selectAll("g."+f.containerClassName).data(x,function(C){return C._name});D.exit().each(function(C){T._topdefs.select("#"+C[f.name]._clipId).remove()}).remove(),0!==x.length&&(D.enter().append("g").classed(f.containerClassName,!0).attr("pointer-events","all"),D.each(function(C){var P=p.select(this),L=C[f.name],S=T[m.id2name(C.anchor)],E=L[m.id2name(C.anchor)];if(L.range){var N,z=y.simpleMap(L.range,C.r2l),q=y.simpleMap(C.range,C.r2l);N=q[0]<q[1]?[Math.min(z[0],q[0]),Math.max(z[1],q[1])]:[Math.max(z[0],q[0]),Math.min(z[1],q[1])],L.range=L._input.range=y.simpleMap(N,C.l2r)}C.cleanRange("rangeslider.range");var G=T._size,K=C.domain;L._width=G.w*(K[1]-K[0]);var ne=Math.round(G.l+G.w*K[0]),X=Math.round(G.t+G.h*(1-C._counterDomainMin)+("bottom"===C.side?C._depth:0)+L._offsetShift+f.extraPad);P.attr("transform",e(ne,X)),L._rl=y.simpleMap(L.range,C.r2l);var J=L._rl[0],se=L._rl[1],V=se-J;if(L.p2d=function(pe){return pe/L._width*V+J},L.d2p=function(pe){return(pe-J)/V*L._width},C.rangebreaks){var j=C.locateBreaks(J,se);if(j.length){var H,oe,U=0;for(H=0;H<j.length;H++)U+=(oe=j[H]).max-oe.min;var te=L._width/(se-J-U),ee=[-te*J];for(H=0;H<j.length;H++)ee.push(ee[ee.length-1]-te*((oe=j[H]).max-oe.min));for(L.d2p=function(pe){for(var de=ee[0],be=0;be<j.length;be++){var he=j[be];if(pe>=he.max)de=ee[be+1];else if(pe<he.min)break}return de+te*pe},H=0;H<j.length;H++)(oe=j[H]).pmin=L.d2p(oe.min),oe.pmax=L.d2p(oe.max);L.p2d=function(pe){for(var de=ee[0],be=0;be<j.length;be++){var he=j[be];if(pe>=he.pmax)de=ee[be+1];else if(pe<he.pmin)break}return(pe-de)/te}}}if("match"!==E.rangemode){var le=S.r2l(E.range[0]),ce=S.r2l(E.range[1])-le;L.d2pOppAxis=function(pe){return(pe-le)/ce*L._height}}P.call(u,c,C,L).call(s,c,C,L).call(d,c,C,L).call(h,c,C,L,E).call(a,c,C,L).call(_,c,C,L),function(pe,de,be,he){if(!de._context.staticPlot){var xe=pe.select("rect."+f.slideBoxClassName).node(),De=pe.select("rect."+f.grabAreaMinClassName).node(),Se=pe.select("rect."+f.grabAreaMaxClassName).node();pe.on("mousedown",ke),pe.on("touchstart",ke)}function ke(){var Fe=p.event,ve=Fe.target,Te=Fe.clientX||Fe.touches[0].clientX,Le=Te-pe.node().getBoundingClientRect().left,Oe=he.d2p(be._rl[0]),Ne=he.d2p(be._rl[1]),Be=l.coverSlip();function He(it){var ze,je,qe,Ye=+(it.clientX||it.touches[0].clientX)-Te;switch(ve){case xe:qe="ew-resize",ze=Oe+Ye,je=Ne+Ye;break;case De:qe="col-resize",ze=Oe+Ye,je=Ne;break;case Se:qe="col-resize",ze=Oe,je=Ne+Ye;break;default:qe="ew-resize",ze=Le,je=Le+Ye}if(je<ze){var ct=je;je=ze,ze=ct}he._pixelMin=ze,he._pixelMax=je,i(p.select(Be),qe),function(vt,wt,Ot,St){function ft($t){return Ot.l2r(y.constrain($t,St._rl[0],St._rl[1]))}var st=ft(St.p2d(St._pixelMin)),Ct=ft(St.p2d(St._pixelMax));window.requestAnimationFrame(function(){g.call("_guiRelayout",wt,Ot._name+".range",[st,Ct])})}(0,de,be,he)}function Ve(){Be.removeEventListener("mousemove",He),Be.removeEventListener("mouseup",Ve),this.removeEventListener("touchmove",He),this.removeEventListener("touchend",Ve),y.removeElement(Be)}this.addEventListener("touchmove",He),this.addEventListener("touchend",Ve),Be.addEventListener("mousemove",He),Be.addEventListener("mouseup",Ve)}}(P,c,C,L),function(pe,de,be,he,xe,De){var Se=f.handleWidth/2;function ke(Ve){return y.constrain(Ve,0,he._width)}function Fe(Ve){return y.constrain(Ve,0,he._height)}function ve(Ve){return y.constrain(Ve,-Se,he._width+Se)}var Te=ke(he.d2p(be._rl[0])),Le=ke(he.d2p(be._rl[1]));if(pe.select("rect."+f.slideBoxClassName).attr("x",Te).attr("width",Le-Te),pe.select("rect."+f.maskMinClassName).attr("width",Te),pe.select("rect."+f.maskMaxClassName).attr("x",Le).attr("width",he._width-Le),"match"!==De.rangemode){var Oe=he._height-Fe(he.d2pOppAxis(xe._rl[1])),Ne=he._height-Fe(he.d2pOppAxis(xe._rl[0]));pe.select("rect."+f.maskMinOppAxisClassName).attr("x",Te).attr("height",Oe).attr("width",Le-Te),pe.select("rect."+f.maskMaxOppAxisClassName).attr("x",Te).attr("y",Ne).attr("height",he._height-Ne).attr("width",Le-Te),pe.select("rect."+f.slideBoxClassName).attr("y",Oe).attr("height",Ne-Oe)}var Be=Math.round(ve(Te-Se))-.5,He=Math.round(ve(Le-Se))+.5;pe.select("g."+f.grabberMinClassName).attr("transform",e(Be,.5)),pe.select("g."+f.grabberMaxClassName).attr("transform",e(He,.5))}(P,0,C,L,S,E),"bottom"===C.side&&o.draw(c,C._id+"title",{propContainer:C,propName:C._name+".title",placeholder:T._dfltTitle.x,attributes:{x:C._offset+C._length/2,y:X+L._height+L._offsetShift+10+1.5*C.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axis_ids"),g=v("../../lib/svg_text_utils"),b=v("./constants"),y=v("../../constants/alignment").LINE_SPACING,e=b.name;function r(t){var o=t&&t[e];return o&&o.visible}ie.isVisible=r,ie.makeData=function(t){var o=p.list({_fullLayout:t},"x",!0),n=t.margin,m=[];if(!t._has("gl2d"))for(var l=0;l<o.length;l++){var i=o[l];if(r(i)){m.push(i);var f=i[e];f._id=e+i._id,f._height=(t.height-n.b-n.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}t._rangeSliderData=m},ie.autoMarginOpts=function(t,o){var n=t._fullLayout,m=o[e],l=o._id.charAt(0),i=0,f=0;return"bottom"===o.side&&(i=o._depth,o.title.text!==n._dfltTitle[l]&&(f=1.5*o.title.font.size+10+m._offsetShift,f+=(o.title.text.match(g.BR_TAG_ALL)||[]).length*o.title.font.size*y)),{x:0,y:o._counterDomainMin,l:0,r:0,t:0,b:m._height+i+Math.max(n.margin.b,f),pad:b.extraPad+2*m._offsetShift}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("./oppaxis_attributes"),y=v("./helpers");ae.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:p.extendFlat({},g,{yaxis:b})}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),calcAutorange:v("./calc_autorange"),draw:v("./draw"),isVisible:y.isVisible,makeData:y.makeData,autoMarginOpts:y.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(v,ae,ie){"use strict";ae.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(v,ae,ie){"use strict";var p=v("../annotations/attributes"),g=v("../../traces/scatter/attributes").line,b=v("../drawing/attributes").dash,y=v("../../lib/extend").extendFlat,e=v("../../plot_api/edit_types").overrideAll,r=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ae.exports=e(r("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:y({},p.xref,{}),yref:y({},p.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:g.color,width:y({},g.width,{min:1,dflt:1}),dash:y({},b,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(v,ae,ie){"use strict";ae.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./attributes"),e=v("../shapes/helpers");function r(t,o,n){function m(P,L){return p.coerce(t,o,y,P,L)}var l=m("path"),i="path"!==m("type",l?"path":"rect");i&&delete o.path,m("opacity"),m("line.color"),m("line.width"),m("line.dash");for(var f=["x","y"],u=0;u<2;u++){var s,d,h,a=f[u],_={_fullLayout:n},c=g.coerceRef(t,o,_,a);if((s=g.getFromId(_,c))._selectionIndices.push(o._index),h=e.rangeToShapePosition(s),d=e.shapePositionToRange(s),i){var T=a+"0",x=a+"1",w=t[T],M=t[x];t[T]=d(t[T],!0),t[x]=d(t[x],!0),g.coercePosition(o,_,m,c,T),g.coercePosition(o,_,m,c,x);var D=o[T],C=o[x];void 0!==D&&void 0!==C&&(o[T]=h(D),o[x]=h(C),t[T]=w,t[x]=M)}}i&&p.noneOrAll(t,o,["x0","x1","y0","y1"])}ae.exports=function(t,o){b(t,o,{name:"selections",handleItemDefaults:r});for(var n=o.selections,m=0;m<n.length;m++){var l=n[m];l&&void 0===l.path&&(void 0!==l.x0&&void 0!==l.x1&&void 0!==l.y0&&void 0!==l.y1||(o.selections[m]=null))}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(v,ae,ie){"use strict";var p=v("../shapes/draw_newshape/helpers").readPaths,g=v("../shapes/display_outlines"),b=v("../shapes/handle_outline").clearOutlineControllers,y=v("../color"),e=v("../drawing"),r=v("../../plot_api/plot_template").arrayEditor,t=v("../shapes/helpers"),o=t.getPathString;function n(u){var s=u._fullLayout;for(var d in b(u),s._selectionLayer.selectAll("path").remove(),s._plots){var h=s._plots[d].selectionLayer;h&&h.selectAll("path").remove()}for(var a=0;a<s.selections.length;a++)l(u,a)}function m(u){return u._context.editSelection}function l(u,s){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+s+'"]').remove();var d=t.makeSelectionsOptionsAndPlotinfo(u,s),h=d.options,a=d.plotinfo;h._input&&function(_){var c=o(u,h),T={"data-index":s,"fill-rule":"evenodd",d:c},x=h.opacity,w="rgba(0,0,0,0)",M=h.line.color||y.contrast(u._fullLayout.plot_bgcolor),D=h.line.width,C=h.line.dash;D||(D=5,C="solid");var P=m(u)&&u._fullLayout._activeSelectionIndex===s;P&&(w=u._fullLayout.activeselection.fillcolor,x=u._fullLayout.activeselection.opacity);for(var L=[],S=1;S>=0;S--){var E=_.append("path").attr(T).style("opacity",S?.1:x).call(y.stroke,M).call(y.fill,w).call(e.dashLine,S?"solid":C,S?4+D:D);if(i(E,u,h),P){var N=r(u.layout,"selections",h);E.style({cursor:"move"});var z={element:E.node(),plotinfo:a,gd:u,editHelpers:N,isActiveSelection:!0},q=p(c,u);g(q,E,z)}else E.style("pointer-events",S?"all":"none");L[S]=E}var G=L[0];L[1].node().addEventListener("click",function(){return function(K,ne){if(m(K)){var X=+ne.node().getAttribute("data-index");if(X>=0){if(X===K._fullLayout._activeSelectionIndex)return void f(K);K._fullLayout._activeSelectionIndex=X,K._fullLayout._deactivateSelection=f,n(K)}}}(u,G)})}(u._fullLayout._selectionLayer)}function i(u,s,d){e.setClipUrl(u,"clip"+s._fullLayout._uid+(d.xref+d.yref),s)}function f(u){m(u)&&u._fullLayout._activeSelectionIndex>=0&&(b(u),delete u._fullLayout._activeSelectionIndex,n(u))}ae.exports={draw:n,drawOne:l,activateLastSelection:function(u){m(u)&&(u._fullLayout._activeSelectionIndex=u._fullLayout.selections.length-1,u._fullLayout._deactivateSelection=f,n(u))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(v,ae,ie){"use strict";var p=v("../../drawing/attributes").dash,g=v("../../../lib/extend").extendFlat;ae.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:g({},p,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){b("newselection.mode"),b("newselection.line.width")&&(b("newselection.line.color"),b("newselection.line.dash")),b("activeselection.fillcolor"),b("activeselection.opacity")}},{}],453:[function(v,ae,ie){"use strict";var p=v("../../dragelement/helpers").selectMode,g=v("../../shapes/handle_outline").clearOutline,b=v("../../shapes/draw_newshape/helpers"),y=b.readPaths,e=b.writePaths,r=b.fixDatesForPaths;ae.exports=function(t,o){if(t.length){var n=t[0][0];if(n){var m=n.getAttribute("d"),l=o.gd,i=l._fullLayout.newselection,f=o.plotinfo,u=f.xaxis,s=f.yaxis,d=o.isActiveSelection,h=o.dragmode,a=(l.layout||{}).selections||[];if(!p(h)&&void 0!==d){var _=l._fullLayout._activeSelectionIndex;if(_<a.length)switch(l._fullLayout.selections[_].type){case"rect":h="select";break;case"path":h="lasso"}}var c,T=y(m,l,f,d),x={xref:u._id,yref:s._id,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};1===T.length&&(c=T[0]),c&&5===c.length&&"select"===h?(x.type="rect",x.x0=c[0][1],x.y0=c[0][2],x.x1=c[2][1],x.y1=c[2][2]):(x.type="path",u&&s&&r(T,u,s),x.path=e(T),c=null),g(l);for(var w=o.editHelpers,M=(w||{}).modifyItem,D=[],C=0;C<a.length;C++){var P=l._fullLayout.selections[C];if(P){if(D[C]=P._input,void 0!==d&&C===l._fullLayout._activeSelectionIndex){var L=x;switch(P.type){case"rect":M("x0",L.x0),M("x1",L.x1),M("y0",L.y0),M("y1",L.y1);break;case"path":M("path",L.path)}}}else D[C]=P}return void 0===d?(D.push(x),D):w?w.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(v,ae,ie){"use strict";var p=v("../../lib").strTranslate;function g(b,y){switch(b.type){case"log":return b.p2d(y);case"date":return b.p2r(y,0,b.calendar);default:return b.p2r(y)}}ae.exports={p2r:g,r2p:function(b,y){switch(b.type){case"log":return b.d2p(y);case"date":return b.r2p(y,0,b.calendar);default:return b.r2p(y)}},axValue:function(b){var y="y"===b._id.charAt(0)?1:0;return function(e){return g(b,e[y])}},getTransform:function(b){return p(b.xaxis._offset,b.yaxis._offset)}}},{"../../lib":515}],455:[function(v,ae,ie){"use strict";var p=v("./draw"),g=v("./select");ae.exports={moduleType:"component",name:"selections",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewSelectionDefaults:v("./draw_newselection/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("selections"),draw:p.draw,drawOne:p.drawOne,reselect:g.reselect,prepSelect:g.prepSelect,clearOutline:g.clearOutline,clearSelectionsCache:g.clearSelectionsCache,selectOnClick:g.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(v,ae,ie){"use strict";var p=v("polybooljs"),g=v("point-in-polygon/nested"),b=v("../../registry"),y=v("../drawing").dashStyle,e=v("../color"),r=v("../fx"),t=v("../fx/helpers").makeEventData,o=v("../dragelement/helpers"),n=o.freeMode,m=o.rectMode,l=o.drawMode,i=o.openMode,f=o.selectMode,u=v("../shapes/helpers"),s=v("../shapes/constants"),d=v("../shapes/display_outlines"),h=v("../shapes/handle_outline").clearOutline,a=v("../shapes/draw_newshape/helpers"),_=a.handleEllipse,c=a.readPaths,T=v("../shapes/draw_newshape/newshapes"),x=v("./draw_newselection/newselections"),w=v("./draw").activateLastSelection,M=v("../../lib"),D=M.sorterAsc,C=v("../../lib/polygon"),P=v("../../lib/throttle"),L=v("../../plots/cartesian/axis_ids").getFromId,S=v("../../lib/clear_gl_canvases"),E=v("../../plot_api/subroutines").redrawReglTraces,N=v("./constants"),z=N.MINSELECT,q=C.filter,G=C.tester,K=v("./helpers"),ne=K.p2r,X=K.axValue,J=K.getTransform;function se(Ve){return void 0!==Ve.subplot}function V(Ve,it,ze,je,qe,Ye,ct){var vt,wt,Ot,St,ft,st,Ct,$t,rn,Ce,hn=it._hoverdata,cn=it._fullLayout.clickmode.indexOf("event")>-1,mn=[];if((Ce=hn)&&Array.isArray(Ce)&&!0!==Ce[0].hoverOnBox){U(Ve,it,Ye);var nn=function(Ce,Ue){var Qe,rt,Ke=Ce[0],gt=-1,mt=[];for(rt=0;rt<Ue.length;rt++)if(Ke.fullData._expandedIndex===(Qe=Ue[rt]).cd[0].trace._expandedIndex){if(!0===Ke.hoverOnBox)break;void 0!==Ke.pointNumber?gt=Ke.pointNumber:void 0!==Ke.binNumber&&(gt=Ke.binNumber,mt=Ke.pointNumbers);break}return{pointNumber:gt,pointNumbers:mt,searchInfo:Qe}}(hn,vt=le(it,ze,je,qe));if(nn.pointNumbers.length>0?function(Ce,Ue){var Qe,rt,Ke,gt=[];for(Ke=0;Ke<Ce.length;Ke++)(Qe=Ce[Ke]).cd[0].trace.selectedpoints&&Qe.cd[0].trace.selectedpoints.length>0&&gt.push(Qe);if(1===gt.length&&gt[0]===Ue.searchInfo&&(rt=Ue.searchInfo.cd[0].trace).selectedpoints.length===Ue.pointNumbers.length){for(Ke=0;Ke<Ue.pointNumbers.length;Ke++)if(rt.selectedpoints.indexOf(Ue.pointNumbers[Ke])<0)return!1;return!0}return!1}(vt,nn):function(Ce){var Qe,rt,Ke=0;for(rt=0;rt<Ce.length;rt++)if((Qe=Ce[rt].cd[0].trace).selectedpoints&&(Qe.selectedpoints.length>1||(Ke+=Qe.selectedpoints.length)>1))return!1;return 1===Ke}(vt)&&(st=pe(nn))){for(ct&&ct.remove(),rn=0;rn<vt.length;rn++)(wt=vt[rn])._module.selectPoints(wt,!1);de(it,vt),te(Ye),cn&&He(it)}else{for(Ct=Ve.shiftKey&&(void 0!==st?st:pe(nn)),Ot=function(Ce,Ue,Qe){return{pointNumber:Ce,searchInfo:Ue,subtract:!!Qe}}(nn.pointNumber,nn.searchInfo,Ct),St=oe(Ye.selectionDefs.concat([Ot])),rn=0;rn<vt.length;rn++)if(ft=he(vt[rn]._module.selectPoints(vt[rn],St),vt[rn]),mn.length)for(var Xe=0;Xe<ft.length;Xe++)mn.push(ft[Xe]);else mn=ft;if(de(it,vt,$t={points:mn}),Ot&&Ye&&Ye.selectionDefs.push(Ot),ct){var nt=Ye.mergedPolygons,ye=i(Ye.dragmode);d(xe(nt,ye),ct,Ye)}cn&&Be(it,$t)}}}function j(Ve){return"pointNumber"in Ve&&"searchInfo"in Ve}function H(Ve){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(it,ze,je,qe){return qe.cd[0].trace._expandedIndex===Ve.searchInfo.cd[0].trace._expandedIndex&&je===Ve.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ve.subtract}}function oe(Ve){if(Ve.length){for(var it=[],ze=j(Ve[0])?0:Ve[0][0][0],je=ze,qe=j(Ve[0])?0:Ve[0][0][1],Ye=qe,ct=0;ct<Ve.length;ct++)if(j(Ve[ct]))it.push(H(Ve[ct]));else{var vt=G(Ve[ct]);vt.subtract=!!Ve[ct].subtract,it.push(vt),ze=Math.min(ze,vt.xmin),je=Math.max(je,vt.xmax),qe=Math.min(qe,vt.ymin),Ye=Math.max(Ye,vt.ymax)}return{xmin:ze,xmax:je,ymin:qe,ymax:Ye,pts:[],contains:function(wt,Ot,St,ft){for(var st=!1,Ct=0;Ct<it.length;Ct++)it[Ct].contains(wt,Ot,St,ft)&&(st=!it[Ct].subtract);return st},isRect:!1,degenerate:!1}}}function U(Ve,it,ze){var je=it._fullLayout,qe=ze.plotinfo,Ye=ze.dragmode,ct=je._lastSelectedSubplot&&je._lastSelectedSubplot===qe.id,vt=(Ve.shiftKey||Ve.altKey)&&!(l(Ye)&&i(Ye));ct&&vt&&qe.selection&&qe.selection.selectionDefs&&!ze.selectionDefs?(ze.selectionDefs=qe.selection.selectionDefs,ze.mergedPolygons=qe.selection.mergedPolygons):vt&&qe.selection||te(ze),ct||(h(it),je._lastSelectedSubplot=qe.id)}function te(Ve,it){var ze=Ve.dragmode,je=Ve.plotinfo,qe=Ve.gd;qe._fullLayout._activeShapeIndex>=0&&qe._fullLayout._deactivateShape(qe),qe._fullLayout._activeSelectionIndex>=0&&qe._fullLayout._deactivateSelection(qe);var Ye=qe._fullLayout._zoomlayer,ct=l(ze),vt=f(ze);if(ct||vt){var wt,Ot,St=Ye.selectAll(".select-outline-"+je.id);St&&qe._fullLayout._outlining&&(ct&&(wt=T(St,Ve)),wt&&b.call("_guiRelayout",qe,{shapes:wt}),vt&&!se(Ve)&&(Ot=x(St,Ve)),Ot&&(qe._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",qe,{selections:Ot}).then(function(){it&&w(qe)})),qe._fullLayout._outlining=!1)}je.selection={},je.selection.selectionDefs=Ve.selectionDefs=[],je.selection.mergedPolygons=Ve.mergedPolygons=[]}function ee(Ve){return Ve._id}function le(Ve,it,ze,je){if(!Ve.calcdata)return[];var qe,Ye,ct,vt=[],wt=it.map(ee),Ot=ze.map(ee);for(ct=0;ct<Ve.calcdata.length;ct++)if(!0===(Ye=(qe=Ve.calcdata[ct])[0].trace).visible&&Ye._module&&Ye._module.selectPoints)if(!se({subplot:je})||Ye.subplot!==je&&Ye.geo!==je)if("splom"===Ye.type){if(Ye._xaxes[wt[0]]&&Ye._yaxes[Ot[0]]){var St=ce(Ye._module,qe,it[0],ze[0]);St.scene=Ve._fullLayout._splomScenes[Ye.uid],vt.push(St)}}else if("sankey"===Ye.type){var ft=ce(Ye._module,qe,it[0],ze[0]);vt.push(ft)}else{if(-1===wt.indexOf(Ye.xaxis)||-1===Ot.indexOf(Ye.yaxis))continue;vt.push(ce(Ye._module,qe,L(Ve,Ye.xaxis),L(Ve,Ye.yaxis)))}else vt.push(ce(Ye._module,qe,it[0],ze[0]));return vt}function ce(Ve,it,ze,je){return{_module:Ve,cd:it,xaxis:ze,yaxis:je}}function pe(Ve){var it=Ve.searchInfo.cd[0].trace,je=Ve.pointNumbers;return!!it.selectedpoints&&it.selectedpoints.indexOf(je.length>0?je[0]:Ve.pointNumber)>-1}function de(Ve,it,ze){var je,qe;for(je=0;je<it.length;je++){var Ye=it[je].cd[0].trace._fullInput,ct=Ve._fullLayout._tracePreGUI[Ye.uid]||{};void 0===ct.selectedpoints&&(ct.selectedpoints=Ye._input.selectedpoints||null)}if(ze){var vt=ze.points||[];for(je=0;je<it.length;je++)(qe=it[je].cd[0].trace)._input.selectedpoints=qe._fullInput.selectedpoints=[],qe._fullInput!==qe&&(qe.selectedpoints=[]);for(var wt=0;wt<vt.length;wt++){var Ot=vt[wt],St=Ot.data,ft=Ot.fullData,st=Ot.pointIndex,Ct=Ot.pointIndices;Ct?([].push.apply(St.selectedpoints,Ct),qe._fullInput!==qe&&[].push.apply(ft.selectedpoints,Ct)):(St.selectedpoints.push(st),qe._fullInput!==qe&&ft.selectedpoints.push(st))}}else for(je=0;je<it.length;je++)delete(qe=it[je].cd[0].trace).selectedpoints,delete qe._input.selectedpoints,qe._fullInput!==qe&&delete qe._fullInput.selectedpoints;!function($t,rn){for(var hn=!1,cn=0;cn<rn.length;cn++){var mn=rn[cn],nn=mn.cd;b.traceIs(nn[0].trace,"regl")&&(hn=!0);var Xe=mn._module,nt=Xe.styleOnSelect||Xe.style;nt&&(nt($t,nn,nn[0].node3),nn[0].nodeRangePlot3&&nt($t,nn,nn[0].nodeRangePlot3))}hn&&(S($t),E($t))}(Ve,it)}function be(Ve,it,ze){for(var je=(ze?p.difference:p.union)({regions:Ve},{regions:[it]}).regions.reverse(),qe=0;qe<je.length;qe++){var Ye=je[qe];Ye.subtract=Te(Ye,je.slice(0,qe))}return je}function he(Ve,it){if(Array.isArray(Ve))for(var ze=it.cd,je=it.cd[0].trace,qe=0;qe<Ve.length;qe++)Ve[qe]=t(Ve[qe],je,ze);return Ve}function xe(Ve,it){for(var ze=[],je=0;je<Ve.length;je++){ze[je]=[];for(var qe=0;qe<Ve[je].length;qe++){ze[je][qe]=[],ze[je][qe][0]=qe?"L":"M";for(var Ye=0;Ye<Ve[je][qe].length;Ye++)ze[je][qe].push(Ve[je][qe][Ye])}it||ze[je].push(["Z",ze[je][0][1],ze[je][0][2]])}return ze}function De(Ve,it){for(var ze,je,qe=[],Ye=[],ct=0;ct<it.length;ct++){var vt=it[ct];je=vt._module.selectPoints(vt,Ve),Ye.push(je),ze=he(je,vt),qe=qe.concat(ze)}return qe}function Se(Ve,it,ze,je,qe){var Ye,ct,vt,wt=!!je;qe&&(Ye=qe.plotinfo,ct=qe.xaxes[0]._id,vt=qe.yaxes[0]._id);var Ot=[],St=[],ft=ve(Ve),st=Ve._fullLayout;if(Ye){var Ct=st._zoomlayer,$t=st.dragmode,rn=l($t),hn=f($t);if(rn||hn){var cn=L(Ve,ct,"x"),mn=L(Ve,vt,"y");if(cn&&mn){var nn=Ct.selectAll(".select-outline-"+Ye.id);if(nn&&Ve._fullLayout._outlining&&nn.length){for(var Xe=nn[0][0].getAttribute("d"),nt=c(Xe,Ve,Ye),ye=[],Ce=0;Ce<nt.length;Ce++){for(var Ue=nt[Ce],Qe=[],rt=0;rt<Ue.length;rt++)Qe.push([Le(cn,Ue[rt][1]),Le(mn,Ue[rt][2])]);Qe.xref=ct,Qe.yref=vt,Qe.subtract=Te(Qe,ye),ye.push(Qe)}ft=ft.concat(ye)}}}}var Ke=ct&&vt?[ct+vt]:st._subplots.cartesian;!function(er){var nr=er.calcdata;if(nr)for(var mr=0;mr<nr.length;mr++){var yr=er._fullLayout._splomScenes;if(yr){var Wr=yr[nr[mr][0].trace.uid];Wr&&(Wr.selectBatch=[])}}}(Ve);for(var gt={},mt=0;mt<Ke.length;mt++){var Lt=Ke[mt],Vt=Lt.indexOf("y"),dt=Lt.slice(0,Vt),bt=Lt.slice(Vt),Yt=ct&&vt?ze:void 0;if(Yt=Fe(ft,dt,bt,Yt)){var It=je;if(!wt){var jt=L(Ve,dt,"x"),Ie=L(Ve,bt,"y");It=le(Ve,[jt],[Ie],Lt);for(var et=0;et<It.length;et++){var ht=It[et],xt=ht.cd[0],Rt=xt.trace;if("scattergl"===ht._module.name&&!xt.t.xpx){var Xt=Rt.x,tn=Rt.y,Kt=Rt._length;xt.t.xpx=[],xt.t.ypx=[];for(var kn=0;kn<Kt;kn++)xt.t.xpx[kn]=jt.c2p(Xt[kn]),xt.t.ypx[kn]=Ie.c2p(tn[kn])}"splom"===ht._module.name&&(gt[Rt.uid]||(gt[Rt.uid]=!0))}}var Vn=De(Yt,It);Ot=Ot.concat(Vn),St=St.concat(It)}}var Tn={points:Ot};de(Ve,St,Tn);var sn=st.clickmode.indexOf("event")>-1&&it;if(!Ye&&it){var fn=ve(Ve,!0);if(fn.length){var dn=fn[0].xref,Mn=fn[0].yref;if(dn&&Mn){var En=Oe(fn);Ne([L(Ve,dn,"x"),L(Ve,Mn,"y")])(Tn,En)}}Ve._fullLayout._noEmitSelectedAtStart?Ve._fullLayout._noEmitSelectedAtStart=!1:sn&&Be(Ve,Tn),st._reselect=!1}if(!Ye&&st._deselect){var jn=st._deselect;(function(er,nr,mr){for(var Dr=0;Dr<mr.length;Dr++){var yr=mr[Dr];if(yr.xaxis&&yr.xaxis._id===er&&yr.yaxis&&yr.yaxis._id===nr)return!0}return!1})(ct=jn.xref,vt=jn.yref,St)||ke(Ve,ct,vt,je),sn&&(Tn.points.length?Be(Ve,Tn):He(Ve)),st._deselect=!1}return{eventData:Tn,selectionTesters:ze}}function ke(Ve,it,ze,je){je=le(Ve,[L(Ve,it,"x")],[L(Ve,ze,"y")],it+ze);for(var qe=0;qe<je.length;qe++){var Ye=je[qe];Ye._module.selectPoints(Ye,!1)}de(Ve,je)}function Fe(Ve,it,ze,je){for(var qe,Ye=0;Ye<Ve.length;Ye++){var ct=Ve[Ye];it===ct.xref&&ze===ct.yref&&(qe?je=oe(qe=be(qe,ct,!!ct.subtract)):(qe=[ct],je=G(ct)))}return je}function ve(Ve,it){for(var ze=[],je=Ve._fullLayout,qe=je.selections,Ye=qe.length,ct=0;ct<Ye;ct++)if(!it||ct===je._activeSelectionIndex){var vt=qe[ct];if(vt){var wt,Ot,St,ft,st,Ct=vt.xref,$t=vt.yref,rn=L(Ve,Ct,"x"),hn=L(Ve,$t,"y");if("rect"===vt.type){st=[];var cn=Le(rn,vt.x0),mn=Le(rn,vt.x1),nn=Le(hn,vt.y0),Xe=Le(hn,vt.y1);st=[[cn,nn],[cn,Xe],[mn,Xe],[mn,nn]],wt=Math.min(cn,mn),Ot=Math.max(cn,mn),St=Math.min(nn,Xe),ft=Math.max(nn,Xe),st.xmin=wt,st.xmax=Ot,st.ymin=St,st.ymax=ft,st.xref=Ct,st.yref=$t,st.subtract=!1,st.isRect=!0,ze.push(st)}else if("path"===vt.type)for(var nt=vt.path.split("Z"),ye=[],Ce=0;Ce<nt.length;Ce++){var Ue=nt[Ce];if(Ue){var Qe=u.extractPathCoords(Ue+="Z",s.paramIsX,"raw"),rt=u.extractPathCoords(Ue,s.paramIsY,"raw");wt=1/0,Ot=-1/0,St=1/0,ft=-1/0,st=[];for(var Ke=0;Ke<Qe.length;Ke++){var gt=Le(rn,Qe[Ke]),mt=Le(hn,rt[Ke]);st.push([gt,mt]),wt=Math.min(gt,wt),Ot=Math.max(gt,Ot),St=Math.min(mt,St),ft=Math.max(mt,ft)}st.xmin=wt,st.xmax=Ot,st.ymin=St,st.ymax=ft,st.xref=Ct,st.yref=$t,st.subtract=Te(st,ye),ye.push(st),ze.push(st)}}}}return ze}function Te(Ve,it){for(var ze=!1,je=0;je<it.length;je++)for(var qe=it[je],Ye=0;Ye<Ve.length;Ye++)if(g(Ve[Ye],qe)){ze=!ze;break}return ze}function Le(Ve,it){return"date"===Ve.type&&(it=it.replace("_"," ")),"log"===Ve.type?Ve.c2p(it):Ve.r2p(it,null,Ve.calendar)}function Oe(Ve){for(var it=Ve.length,ze=[],je=0;je<it;je++){var qe=Ve[je];ze=(ze=ze.concat(qe)).concat([qe[0]])}return(Ye=ze).isRect=5===Ye.length&&Ye[0][0]===Ye[4][0]&&Ye[0][1]===Ye[4][1]&&Ye[0][0]===Ye[1][0]&&Ye[2][0]===Ye[3][0]&&Ye[0][1]===Ye[3][1]&&Ye[1][1]===Ye[2][1]||Ye[0][1]===Ye[1][1]&&Ye[2][1]===Ye[3][1]&&Ye[0][0]===Ye[3][0]&&Ye[1][0]===Ye[2][0],Ye.isRect&&(Ye.xmin=Math.min(Ye[0][0],Ye[2][0]),Ye.xmax=Math.max(Ye[0][0],Ye[2][0]),Ye.ymin=Math.min(Ye[0][1],Ye[2][1]),Ye.ymax=Math.max(Ye[0][1],Ye[2][1])),Ye;var Ye}function Ne(Ve){return function(it,ze){for(var je,qe,Ye=0;Ye<Ve.length;Ye++){var ct=Ve[Ye],vt=ct._id,wt=vt.charAt(0);if(ze.isRect){je||(je={});var Ot=ze[wt+"min"],St=ze[wt+"max"];void 0!==Ot&&void 0!==St&&(je[vt]=[ne(ct,Ot),ne(ct,St)].sort(D))}else qe||(qe={}),qe[vt]=ze.map(X(ct))}je&&(it.range=je),qe&&(it.lassoPoints=qe)}}function Be(Ve,it){it&&(it.selections=(Ve.layout||{}).selections||[]),Ve.emit("plotly_selected",it)}function He(Ve){Ve.emit("plotly_deselect",null)}ae.exports={reselect:Se,prepSelect:function(Ve,it,ze,je,qe){var Ye=!se(je),ct=n(qe),vt=m(qe),wt=i(qe),Ot=l(qe),St=f(qe),ft="drawcircle"===qe,st="drawline"===qe||ft,Ct=je.gd,$t=Ct._fullLayout,rn=St&&"immediate"===$t.newselection.mode&&Ye,hn=$t._zoomlayer,cn=je.element.getBoundingClientRect(),mn=je.plotinfo,nn=J(mn),Xe=it-cn.left,nt=ze-cn.top;$t._calcInverseTransform(Ct);var Ce,Ue,Qe,rt,Ke,gt,mt,ye=M.apply3DTransform($t._invTransform)(Xe,nt),Lt=$t._invScaleX,Vt=$t._invScaleY,dt=Xe=ye[0],bt=nt=ye[1],Yt="M"+Xe+","+nt,It=je.xaxes[0],jt=je.yaxes[0],Ie=It._length,et=jt._length,ht=Ve.altKey&&!(l(qe)&&wt);U(Ve,Ct,je),ct&&(Ce=q([[Xe,nt]],N.BENDPX));var xt=hn.selectAll("path.select-outline-"+mn.id).data([1]),Rt=Ot?$t.newshape:$t.newselection;xt.enter().append("path").attr("class","select-outline select-outline-"+mn.id).style({opacity:Ot?Rt.opacity/2:1,fill:Ot&&!wt?Rt.fillcolor:"none",stroke:Rt.line.color||(Ye?e.contrast(Ct._fullLayout.plot_bgcolor):"#7f7f7f"),"stroke-dasharray":y(Rt.line.dash,Rt.line.width),"stroke-width":Rt.line.width+"px","shape-rendering":"crispEdges"}).attr("fill-rule","evenodd").classed("cursor-move",!!Ot).attr("transform",nn).attr("d",Yt+"Z");var Xt=hn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",nn).attr("d","M0,0Z"),tn=$t._uid+N.SELECTID,Kt=[],kn=le(Ct,je.xaxes,je.yaxes,je.subplot);rn&&!Ve.shiftKey&&(je._clearSubplotSelections=function(){if(Ye){var Tn=It._id,sn=jt._id;ke(Ct,Tn,sn,kn);for(var fn=(Ct.layout||{}).selections||[],dn=[],Mn=!1,En=0;En<fn.length;En++){var jn=$t.selections[En];jn.xref!==Tn||jn.yref!==sn?dn.push(fn[En]):Mn=!0}Mn&&(Ct._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",Ct,{selections:dn}))}});var Tn,Vn=(Tn=je).plotinfo.fillRangeItems||Ne(Tn.xaxes.concat(Tn.yaxes));je.moveFn=function(Tn,sn){je._clearSubplotSelections&&(je._clearSubplotSelections(),je._clearSubplotSelections=void 0),dt=Math.max(0,Math.min(Ie,Lt*Tn+Xe)),bt=Math.max(0,Math.min(et,Vt*sn+nt));var fn=Math.abs(dt-Xe),dn=Math.abs(bt-nt);if(vt){var Mn,En,jn;if(St){var er=$t.selectdirection;switch(Mn="any"===er?dn<Math.min(.6*fn,z)?"h":fn<Math.min(.6*dn,z)?"v":"d":er){case"h":En=ft?et/2:0,jn=et;break;case"v":En=ft?Ie/2:0,jn=Ie}}if(Ot)switch($t.newshape.drawdirection){case"vertical":Mn="h",En=ft?et/2:0,jn=et;break;case"horizontal":Mn="v",En=ft?Ie/2:0,jn=Ie;break;case"ortho":fn<dn?(Mn="h",En=nt,jn=bt):(Mn="v",En=Xe,jn=dt);break;default:Mn="d"}"h"===Mn?((rt=st?_(ft,[dt,En],[dt,jn]):[[Xe,En],[Xe,jn],[dt,jn],[dt,En]]).xmin=st?dt:Math.min(Xe,dt),rt.xmax=st?dt:Math.max(Xe,dt),rt.ymin=Math.min(En,jn),rt.ymax=Math.max(En,jn),Xt.attr("d","M"+rt.xmin+","+(nt-z)+"h-4v"+2*z+"h4ZM"+(rt.xmax-1)+","+(nt-z)+"h4v"+2*z+"h-4Z")):"v"===Mn?((rt=st?_(ft,[En,bt],[jn,bt]):[[En,nt],[En,bt],[jn,bt],[jn,nt]]).xmin=Math.min(En,jn),rt.xmax=Math.max(En,jn),rt.ymin=st?bt:Math.min(nt,bt),rt.ymax=st?bt:Math.max(nt,bt),Xt.attr("d","M"+(Xe-z)+","+rt.ymin+"v-4h"+2*z+"v4ZM"+(Xe-z)+","+(rt.ymax-1)+"v4h"+2*z+"v-4Z")):"d"===Mn&&((rt=st?_(ft,[Xe,nt],[dt,bt]):[[Xe,nt],[Xe,bt],[dt,bt],[dt,nt]]).xmin=Math.min(Xe,dt),rt.xmax=Math.max(Xe,dt),rt.ymin=Math.min(nt,bt),rt.ymax=Math.max(nt,bt),Xt.attr("d","M0,0Z"))}else ct&&(Ce.addPt([dt,bt]),rt=Ce.filtered);if(je.selectionDefs&&je.selectionDefs.length?(Qe=be(je.mergedPolygons,rt,ht),rt.subtract=ht,Ue=oe(je.selectionDefs.concat([rt]))):(Qe=[rt],Ue=G(rt)),d(xe(Qe,wt),xt,je),St){var nr,mr=Se(Ct,!1),Dr=mr.eventData?mr.eventData.points.slice():[];mr=Se(Ct,!1,Ue,kn,je),Ue=mr.selectionTesters,mt=mr.eventData,nr=Ce?Ce.filtered:Oe(Qe),P.throttle(tn,N.SELECTDELAY,function(){for(var yr=(Kt=De(Ue,kn)).slice(),Wr=0;Wr<Dr.length;Wr++){for(var kr=Dr[Wr],Or=!1,Hr=0;Hr<yr.length;Hr++)if(yr[Hr].curveNumber===kr.curveNumber&&yr[Hr].pointNumber===kr.pointNumber){Or=!0;break}Or||yr.push(kr)}yr.length&&(mt||(mt={}),mt.points=yr),Vn(mt,nr),Ct.emit("plotly_selecting",mt)})}},je.clickFn=function(Tn,sn){if(Xt.remove(),Ct._fullLayout._activeShapeIndex>=0)Ct._fullLayout._deactivateShape(Ct);else if(!Ot){var fn=$t.clickmode;P.done(tn).then(function(){if(P.clear(tn),2===Tn){for(xt.remove(),Ke=0;Ke<kn.length;Ke++)(gt=kn[Ke])._module.selectPoints(gt,!1);if(de(Ct,kn),te(je),He(Ct),kn.length){var dn=kn[0].xaxis,Mn=kn[0].yaxis;if(dn&&Mn){for(var En=[],jn=Ct._fullLayout.selections,er=0;er<jn.length;er++){var nr=jn[er];nr&&(nr.xref===dn._id&&nr.yref===Mn._id||En.push(nr))}En.length<jn.length&&(Ct._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",Ct,{selections:En}))}}}else fn.indexOf("select")>-1&&V(sn,Ct,je.xaxes,je.yaxes,je.subplot,je,xt),"event"===fn&&Be(Ct,void 0);r.click(Ct,sn)}).catch(M.error)}},je.doneFn=function(){Xt.remove(),P.done(tn).then(function(){P.clear(tn),!rn&&rt&&je.selectionDefs&&(rt.subtract=ht,je.selectionDefs.push(rt),je.mergedPolygons.length=0,[].push.apply(je.mergedPolygons,Qe)),(rn||Ot)&&te(je,rn),je.doneFnCompleted&&je.doneFnCompleted(Kt),St&&Be(Ct,mt)}).catch(M.error)}},clearOutline:h,clearSelectionsCache:te,selectOnClick:V}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(v,ae,ie){"use strict";var p=v("../annotations/attributes"),g=v("../../traces/scatter/attributes").line,b=v("../drawing/attributes").dash,y=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),ae.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:y({},p.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:y({},p.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},g.color,{editType:"arraydraw"}),width:y({},g.width,{editType:"calc+arraydraw"}),dash:y({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("./constants"),y=v("./helpers");function e(n){return t(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function r(n){return t(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function t(n,m,l,i,f,u){var s=n/2,d=u;if("pixel"===m){var h=f?y.extractPathCoords(f,u?b.paramIsY:b.paramIsX):[l,i],a=p.aggNums(Math.max,null,h),_=p.aggNums(Math.min,null,h),c=_<0?Math.abs(_)+s:s,T=a>0?a+s:s;return{ppad:s,ppadplus:d?c:T,ppadminus:d?T:c}}return{ppad:s}}function o(n,m,l,i,f){var u="category"===n.type||"multicategory"===n.type?n.r2c:n.d2c;if(void 0!==m)return[u(m),u(l)];if(i){var s,d,h,a,_=1/0,c=-1/0,T=i.match(b.segmentRE);for("date"===n.type&&(u=y.decodeDate(u)),s=0;s<T.length;s++)void 0!==(d=f[T[s].charAt(0)].drawn)&&(!(h=T[s].substr(1).match(b.paramRE))||h.length<d||((a=u(h[d]))<_&&(_=a),a>c&&(c=a)));return c>=_?[_,c]:void 0}}ae.exports=function(n){var l=p.filterVisible(n._fullLayout.shapes);if(l.length&&n._fullData.length)for(var i=0;i<l.length;i++){var f,u,s=l[i];s._extremes={};var d=g.getRefType(s.xref),h=g.getRefType(s.yref);if("paper"!==s.xref&&"domain"!==d){var a="pixel"===s.xsizemode?s.xanchor:s.x0,_="pixel"===s.xsizemode?s.xanchor:s.x1;(u=o(f=g.getFromId(n,s.xref),a,_,s.path,b.paramIsX))&&(s._extremes[f._id]=g.findExtremes(f,u,e(s)))}if("paper"!==s.yref&&"domain"!==h){var c="pixel"===s.ysizemode?s.yanchor:s.y0,T="pixel"===s.ysizemode?s.yanchor:s.y1;(u=o(f=g.getFromId(n,s.yref),c,T,s.path,b.paramIsY))&&(s._extremes[f._id]=g.findExtremes(f,u,r(s)))}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(v,ae,ie){"use strict";ae.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./attributes"),e=v("./helpers");function r(t,o,n){function m(E,N){return p.coerce(t,o,y,E,N)}if(m("visible")){var l=m("path"),i="path"!==m("type",l?"path":"rect");i&&delete o.path,m("editable"),m("layer"),m("opacity"),m("fillcolor"),m("fillrule"),m("line.width")&&(m("line.color"),m("line.dash"));for(var f=m("xsizemode"),u=m("ysizemode"),s=["x","y"],d=0;d<2;d++){var h,a,_,c=s[d],T=c+"anchor",x="x"===c?f:u,w={_fullLayout:n},M=g.coerceRef(t,o,w,c,void 0,"paper");if("range"===g.getRefType(M)?((h=g.getFromId(w,M))._shapeIndices.push(o._index),_=e.rangeToShapePosition(h),a=e.shapePositionToRange(h)):a=_=p.identity,i){var D=c+"0",C=c+"1",P=t[D],L=t[C];t[D]=a(t[D],!0),t[C]=a(t[C],!0),"pixel"===x?(m(D,0),m(C,10)):(g.coercePosition(o,w,m,M,D,.25),g.coercePosition(o,w,m,M,C,.75)),o[D]=_(o[D]),o[C]=_(o[C]),t[D]=P,t[C]=L}if("pixel"===x){var S=t[T];t[T]=a(t[T],!0),g.coercePosition(o,w,m,M,T,.25),o[T]=_(o[T]),t[T]=S}}i&&p.noneOrAll(t,o,["x0","x1","y0","y1"])}}ae.exports=function(t,o){b(t,o,{name:"shapes",handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(v,ae,ie){"use strict";var p=v("../../lib").strTranslate,g=v("../dragelement"),b=v("../dragelement/helpers"),y=b.drawMode,e=b.selectMode,r=v("../../registry"),t=v("../color"),o=v("./draw_newshape/constants"),n=o.i000,m=o.i090,l=o.i180,i=o.i270,f=v("./handle_outline").clearOutlineControllers,u=v("./draw_newshape/helpers"),s=u.pointsOnRectangle,d=u.pointsOnEllipse,h=u.writePaths,a=v("./draw_newshape/newshapes"),_=v("../selections/draw_newselection/newselections");function c(T,x){var w,M,D,L=T.length;return M=T[w=(x+1)%L][1],D=T[w][2],M===T[x][1]&&D===T[x][2]&&(M=T[w=(x+2)%L][1],D=T[w][2]),[w,M,D]}ae.exports=function T(x,w,M,D){D||(D=0);var C=M.gd;function P(){T(x,w,M,D++),d(x[0])&&L({redrawing:!0})}function L(ee){var le={};void 0!==M.isActiveShape&&(M.isActiveShape=!1,le=a(w,M)),void 0!==M.isActiveSelection&&(M.isActiveSelection=!1,le=_(w,M),C._fullLayout._reselect=!0),Object.keys(le).length&&r.call((ee||{}).redrawing?"relayout":"_guiRelayout",C,le)}var S,E,N,z,q,G=C._fullLayout._zoomlayer,K=M.dragmode,ne=y(K),X=e(K);function J(ee){N=+ee.srcElement.getAttribute("data-i"),z=+ee.srcElement.getAttribute("data-j"),S[N][z].moveFn=se}function se(ee,le){if(x.length){var ce=q[N][z][1],pe=q[N][z][2],de=x[N],be=de.length;if(s(de)){var he=ee,xe=le;M.isActiveSelection&&(c(de,z)[1]===de[z][1]?xe=0:he=0);for(var De=0;De<be;De++)if(De!==z){var Se=de[De];Se[1]===de[z][1]&&(Se[1]=ce+he),Se[2]===de[z][2]&&(Se[2]=pe+xe)}if(de[z][1]=ce+he,de[z][2]=pe+xe,!s(de))for(var ke=0;ke<be;ke++)for(var Fe=0;Fe<de[ke].length;Fe++)de[ke][Fe]=q[N][ke][Fe]}else de[z][1]=ce+ee,de[z][2]=pe+le;P()}}function V(){L()}function j(ee,le){if(2===ee){N=+le.srcElement.getAttribute("data-i"),z=+le.srcElement.getAttribute("data-j");var ce=x[N];s(ce)||d(ce)||function(){if(x.length&&x[N]&&x[N].length){for(var pe=[],de=0;de<x[N].length;de++)de!==z&&pe.push(x[N][de]);pe.length>1&&(2!==pe.length||"Z"!==pe[1][0])&&(0===z&&(pe[0][0]="M"),x[N]=pe,P(),L())}}()}}function H(ee,le){(function(ce,pe){if(x.length)for(var de=0;de<x.length;de++)for(var be=0;be<x[de].length;be++)for(var he=0;he+2<x[de][be].length;he+=2)x[de][be][he+1]=q[de][be][he+1]+ce,x[de][be][he+2]=q[de][be][he+2]+pe})(ee,le),P()}(ne||X)&&(C._fullLayout._outlining=!0),f(C),w.attr("d",h(x)),D||!M.isActiveShape&&!M.isActiveSelection||(q=function(ee,le){for(var ce=0;ce<le.length;ce++){var pe=le[ce];ee[ce]=[];for(var de=0;de<pe.length;de++){ee[ce][de]=[];for(var be=0;be<pe[de].length;be++)ee[ce][de][be]=pe[de][be]}}return ee}([],x),function(ee){S=[];for(var le=0;le<x.length;le++){var ce=x[le],pe=s(ce),de=!pe&&d(ce);S[le]=[];for(var be=ce.length,he=0;he<be;he++)if("Z"!==ce[he][0]&&(!de||he===n||he===m||he===l||he===i)){var xe,De=pe&&M.isActiveSelection;De&&(xe=c(ce,he));var Se=ce[he][1],ke=ce[he][2],Fe=ee.append(De?"rect":"circle").attr("data-i",le).attr("data-j",he).style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(De){var ve=xe[1]-Se,Te=xe[2]-ke,Le=Te?5:Math.max(Math.min(25,Math.abs(ve)-5),5),Oe=ve?5:Math.max(Math.min(25,Math.abs(Te)-5),5);Fe.classed(Te?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Le).attr("height",Oe).attr("x",Se-Le/2).attr("y",ke-Oe/2).attr("transform",p(ve/2,Te/2))}else Fe.classed("cursor-grab",!0).attr("r",5).attr("cx",Se).attr("cy",ke);S[le][he]={element:Fe.node(),gd:C,prepFn:J,doneFn:V,clickFn:j},g.init(S[le][he])}}}(G.append("g").attr("class","outline-controllers")),E=[],x.length&&(E[0]={element:w[0][0],gd:C,prepFn:function oe(ee){(N=+ee.srcElement.getAttribute("data-i"))||(N=0),E[N].moveFn=H},doneFn:function U(){L()},clickFn:function te(ee){2===ee&&function(le){if(e(le._fullLayout.dragmode)){f(le);var ce=le._fullLayout._activeSelectionIndex,pe=(le.layout||{}).selections||[];if(ce<pe.length){for(var de=[],be=0;be<pe.length;be++)be!==ce&&de.push(pe[be]);delete le._fullLayout._activeSelectionIndex;var he=le._fullLayout.selections[ce];le._fullLayout._deselect={xref:he.xref,yref:he.yref},r.call("_guiRelayout",le,{selections:de})}}}(C)}},g.init(E[0])))}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("./draw_newshape/helpers").readPaths,e=v("./display_outlines"),r=v("./handle_outline").clearOutlineControllers,t=v("../color"),o=v("../drawing"),n=v("../../plot_api/plot_template").arrayEditor,m=v("../dragelement"),l=v("../../lib/setcursor"),i=v("./constants"),f=v("./helpers"),u=f.getPathString;function s(x){var w=x._fullLayout;for(var M in w._shapeUpperLayer.selectAll("path").remove(),w._shapeLowerLayer.selectAll("path").remove(),w._plots){var D=w._plots[M].shapelayer;D&&D.selectAll("path").remove()}for(var C=0;C<w.shapes.length;C++)w.shapes[C].visible&&a(x,C)}function d(x){return!!x._fullLayout._outlining}function h(x){return!x._context.edits.shapePosition}function a(x,w){x._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+w+'"]').remove();var M=f.makeShapesOptionsAndPlotinfo(x,w),D=M.options,C=M.plotinfo;D._input&&!1!==D.visible&&function P(L){var S=u(x,D),E={"data-index":w,"fill-rule":D.fillrule,d:S},N=D.opacity,z=D.fillcolor,q=D.line.width?D.line.color:"rgba(0,0,0,0)",G=D.line.width,K=D.line.dash;G||!0!==D.editable||(G=5,K="solid");var ne="Z"!==S[S.length-1],X=h(x)&&D.editable&&x._fullLayout._activeShapeIndex===w;X&&(z=ne?"rgba(0,0,0,0)":x._fullLayout.activeshape.fillcolor,N=x._fullLayout.activeshape.opacity);var J,se=L.append("path").attr(E).style("opacity",N).call(t.stroke,q).call(t.fill,z).call(o.dashLine,K,G);if(_(se,x,D),(X||x._context.edits.shapePosition)&&(J=n(x.layout,"shapes",D)),X){se.style({cursor:"move"});var V={element:se.node(),plotinfo:C,gd:x,editHelpers:J,isActiveShape:!0},j=y(S,x);e(j,se,V)}else x._context.edits.shapePosition?function(H,oe,U,te,ee,le){var ce,pe,de,be,he,xe,De,Se,ke,Fe,ve,Te,Le,Oe,Ne,Be,He="pixel"===U.xsizemode,Ve="pixel"===U.ysizemode,it="line"===U.type,ze="path"===U.type,je=le.modifyItem,qe=b.getFromId(H,U.xref),Ye=b.getRefType(U.xref),ct=b.getFromId(H,U.yref),vt=b.getRefType(U.yref),wt=f.getDataToPixel(H,qe,!1,Ye),Ot=f.getDataToPixel(H,ct,!0,vt),St=f.getPixelToData(H,qe,!1,Ye),ft=f.getPixelToData(H,ct,!0,vt),st=it?function(){var nn=Math.max(U.line.width,10),Xe=ee.append("g").attr("data-index",te);Xe.append("path").attr("d",oe.attr("d")).style({cursor:"move","stroke-width":nn,"stroke-opacity":"0"});var nt={"fill-opacity":"0"},ye=Math.max(nn/2,10);return Xe.append("circle").attr({"data-line-point":"start-point",cx:He?wt(U.xanchor)+U.x0:wt(U.x0),cy:Ve?Ot(U.yanchor)-U.y0:Ot(U.y0),r:ye}).style(nt).classed("cursor-grab",!0),Xe.append("circle").attr({"data-line-point":"end-point",cx:He?wt(U.xanchor)+U.x1:wt(U.x1),cy:Ve?Ot(U.yanchor)-U.y1:Ot(U.y1),r:ye}).style(nt).classed("cursor-grab",!0),Xe}():oe,Ct={element:st.node(),gd:H,prepFn:function(nn){var Xe,nt,ye,Ce,Ue,Qe,rt,Ke;d(H)||(He&&(he=wt(U.xanchor)),Ve&&(xe=Ot(U.yanchor)),"path"===U.type?Ne=U.path:(ce=He?U.x0:wt(U.x0),pe=Ve?U.y0:Ot(U.y0),de=He?U.x1:wt(U.x1),be=Ve?U.y1:Ot(U.y1)),ce<de?(ke=ce,Le="x0",Fe=de,Oe="x1"):(ke=de,Le="x1",Fe=ce,Oe="x0"),!Ve&&pe<be||Ve&&pe>be?(De=pe,ve="y0",Se=be,Te="y1"):(De=be,ve="y1",Se=pe,Te="y0"),$t(nn),cn(ee,U),Xe=oe,Ue=(nt=U).yref,Qe=b.getFromId(ye=H,Ce=nt.xref),rt=b.getFromId(ye,Ue),Ke="","paper"===Ce||Qe.autorange||(Ke+=Ce),"paper"===Ue||rt.autorange||(Ke+=Ue),o.setClipUrl(Xe,Ke?"clip"+ye._fullLayout._uid+Ke:null,ye),Ct.moveFn="move"===Be?rn:hn,Ct.altKey=nn.altKey)},doneFn:function(){d(H)||(l(oe),mn(ee),_(oe,H,U),p.call("_guiRelayout",H,le.getUpdateObj()))},clickFn:function(){d(H)||mn(ee)}};function $t(nn){if(d(H))Be=null;else if(it)Be="path"===nn.target.tagName?"move":"start-point"===nn.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Xe=Ct.element.getBoundingClientRect(),nt=Xe.right-Xe.left,ye=Xe.bottom-Xe.top,Qe=!ze&&nt>10&&ye>10&&!nn.shiftKey?m.getCursor((nn.clientX-Xe.left)/nt,1-(nn.clientY-Xe.top)/ye):"move";l(oe,Qe),Be=Qe.split("-")[0]}}function rn(nn,Xe){if("path"===U.type){var nt=function(Ue){return Ue},ye=nt,Ce=nt;He?je("xanchor",U.xanchor=St(he+nn)):(ye=function(Ue){return St(wt(Ue)+nn)},qe&&"date"===qe.type&&(ye=f.encodeDate(ye))),Ve?je("yanchor",U.yanchor=ft(xe+Xe)):(Ce=function(Ue){return ft(Ot(Ue)+Xe)},ct&&"date"===ct.type&&(Ce=f.encodeDate(Ce))),je("path",U.path=c(Ne,ye,Ce))}else He?je("xanchor",U.xanchor=St(he+nn)):(je("x0",U.x0=St(ce+nn)),je("x1",U.x1=St(de+nn))),Ve?je("yanchor",U.yanchor=ft(xe+Xe)):(je("y0",U.y0=ft(pe+Xe)),je("y1",U.y1=ft(be+Xe)));oe.attr("d",u(H,U)),cn(ee,U)}function hn(nn,Xe){if(ze){var nt=function(Ie){return Ie},ye=nt,Ce=nt;He?je("xanchor",U.xanchor=St(he+nn)):(ye=function(Ie){return St(wt(Ie)+nn)},qe&&"date"===qe.type&&(ye=f.encodeDate(ye))),Ve?je("yanchor",U.yanchor=ft(xe+Xe)):(Ce=function(Ie){return ft(Ot(Ie)+Xe)},ct&&"date"===ct.type&&(Ce=f.encodeDate(Ce))),je("path",U.path=c(Ne,ye,Ce))}else if(it){if("resize-over-start-point"===Be){var Ue=ce+nn,Qe=Ve?pe-Xe:pe+Xe;je("x0",U.x0=He?Ue:St(Ue)),je("y0",U.y0=Ve?Qe:ft(Qe))}else if("resize-over-end-point"===Be){var rt=de+nn,Ke=Ve?be-Xe:be+Xe;je("x1",U.x1=He?rt:St(rt)),je("y1",U.y1=Ve?Ke:ft(Ke))}}else{var gt=function(Ie){return-1!==Be.indexOf(Ie)},mt=gt("n"),Lt=gt("s"),Vt=gt("w"),dt=gt("e"),bt=mt?De+Xe:De,Yt=Lt?Se+Xe:Se,It=Vt?ke+nn:ke,jt=dt?Fe+nn:Fe;Ve&&(mt&&(bt=De-Xe),Lt&&(Yt=Se-Xe)),(!Ve&&Yt-bt>10||Ve&&bt-Yt>10)&&(je(ve,U[ve]=Ve?bt:ft(bt)),je(Te,U[Te]=Ve?Yt:ft(Yt))),jt-It>10&&(je(Le,U[Le]=He?It:St(It)),je(Oe,U[Oe]=He?jt:St(jt)))}oe.attr("d",u(H,U)),cn(ee,U)}function cn(nn,Xe){(He||Ve)&&function(){var nt="path"!==Xe.type,ye=nn.selectAll(".visual-cue").data([0]);ye.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ce=wt(He?Xe.xanchor:g.midRange(nt?[Xe.x0,Xe.x1]:f.extractPathCoords(Xe.path,i.paramIsX))),Ue=Ot(Ve?Xe.yanchor:g.midRange(nt?[Xe.y0,Xe.y1]:f.extractPathCoords(Xe.path,i.paramIsY)));Ce=f.roundPositionForSharpStrokeRendering(Ce,1),Ue=f.roundPositionForSharpStrokeRendering(Ue,1),ye.attr("d",He&&Ve?"M"+(Ce-1-1)+","+(Ue-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":He?"M"+(Ce-1-1)+","+(Ue-9-1)+"v18 h2 v-18 Z":"M"+(Ce-9-1)+","+(Ue-1-1)+"h18 v2 h-18 Z")}()}function mn(nn){nn.selectAll(".visual-cue").remove()}m.init(Ct),st.node().onmousemove=$t}(x,se,D,w,L,J):!0===D.editable&&se.style("pointer-events",ne||t.opacity(z)*N<=.5?"stroke":"all");se.node().addEventListener("click",function(){return function(H,oe){if(h(H)){var U=+oe.node().getAttribute("data-index");if(U>=0){if(U===H._fullLayout._activeShapeIndex)return void T(H);H._fullLayout._activeShapeIndex=U,H._fullLayout._deactivateShape=T,s(H)}}}(x,se)})}("below"!==D.layer?x._fullLayout._shapeUpperLayer:"paper"===D.xref||"paper"===D.yref?x._fullLayout._shapeLowerLayer:C._hadPlotinfo?(C.mainplotinfo||C).shapelayer:x._fullLayout._shapeLowerLayer)}function _(x,w,M){var D=(M.xref+M.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");o.setClipUrl(x,D?"clip"+w._fullLayout._uid+D:null,w)}function c(x,w,M){return x.replace(i.segmentRE,function(D){var C=0,P=D.charAt(0),L=i.paramIsX[P],S=i.paramIsY[P],E=i.numParams[P];return P+D.substr(1).replace(i.paramRE,function(N){return C>=E||(L[C]?N=w(N):S[C]&&(N=M(N)),C++),N})})}function T(x){h(x)&&x._fullLayout._activeShapeIndex>=0&&(r(x),delete x._fullLayout._activeShapeIndex,s(x))}ae.exports={draw:s,drawOne:a,eraseActiveShape:function(x){if(h(x)){r(x);var w=x._fullLayout._activeShapeIndex,M=(x.layout||{}).shapes||[];if(w<M.length){for(var D=[],C=0;C<M.length;C++)C!==w&&D.push(M[C]);delete x._fullLayout._activeShapeIndex,p.call("_guiRelayout",x,{shapes:D})}}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(v,ae,ie){"use strict";var p=v("../../drawing/attributes").dash,g=v("../../../lib/extend").extendFlat;ae.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:g({},p,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(v,ae,ie){"use strict";ae.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(v,ae,ie){"use strict";var p=v("../../color");ae.exports=function(g,b,y){y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity"),y("newshape.line.width")&&(y("newshape.line.color",p.contrast((g||{}).plot_bgcolor||"#FFF")),y("newshape.line.dash")),y("activeshape.fillcolor"),y("activeshape.opacity")}},{"../../color":367}],466:[function(v,ae,ie){"use strict";var p=v("parse-svg-path"),g=v("./constants"),b=g.CIRCLE_SIDES,y=g.SQRT2,e=v("../../selections/helpers"),r=e.p2r,t=e.r2p,o=[0,3,4,5,6,1,2],n=[0,3,4,1,2];function m(i,f){return Math.abs(i-f)<=1e-6}function l(i,f){var u=f[1]-i[1],s=f[2]-i[2];return Math.sqrt(u*u+s*s)}ie.writePaths=function(i){var f=i.length;if(!f)return"M0,0Z";for(var u="",s=0;s<f;s++)for(var d=i[s].length,h=0;h<d;h++){var a=i[s][h][0];if("Z"===a)u+="Z";else for(var _=i[s][h].length,c=0;c<_;c++){var T=c;"Q"===a||"S"===a?T=n[c]:"C"===a&&(T=o[c]),u+=i[s][h][T],c>0&&c<_-1&&(u+=",")}}return u},ie.readPaths=function(i,f,u,s){var d,h,a,_=p(i),c=[],T=-1,x=0,w=0,M=function(){h=x,a=w};M();for(var D=0;D<_.length;D++){var E=[],N=_[D][0],z=N;switch(N){case"M":c[++T]=[],E.push([z,x=+_[D][1],w=+_[D][2]]),M();break;case"Q":case"S":E.push([z,x=+_[D][3],w=+_[D][4],+_[D][1],+_[D][2]]);break;case"C":E.push([z,x=+_[D][5],w=+_[D][6],+_[D][1],+_[D][2],+_[D][3],+_[D][4]]);break;case"T":case"L":E.push([z,x=+_[D][1],w=+_[D][2]]);break;case"H":E.push([z="L",x=+_[D][1],w]);break;case"V":E.push([z="L",x,w=+_[D][1]]);break;case"A":z="L";var q=+_[D][1],G=+_[D][2];+_[D][4]||(q=-q,G=-G);var K=x-q,ne=w;for(d=1;d<=b/2;d++){var X=2*Math.PI*d/b;E.push([z,K+q*Math.cos(X),ne+G*Math.sin(X)])}break;case"Z":x===h&&w===a||E.push([z,x=h,w=a])}for(var J=(u||{}).domain,se=f._fullLayout._size,V=u&&"pixel"===u.xsizemode,j=u&&"pixel"===u.ysizemode,H=!1===s,oe=0;oe<E.length;oe++){for(d=0;d+2<7;d+=2){var U=E[oe][d+1],te=E[oe][d+2];void 0!==U&&void 0!==te&&(x=U,w=te,u&&(u.xaxis&&u.xaxis.p2r?(H&&(U-=u.xaxis._offset),U=V?t(u.xaxis,u.xanchor)+U:r(u.xaxis,U)):(H&&(U-=se.l),J?U=J.x[0]+U/se.w:U/=se.w),u.yaxis&&u.yaxis.p2r?(H&&(te-=u.yaxis._offset),te=j?t(u.yaxis,u.yanchor)-te:r(u.yaxis,te)):(H&&(te-=se.t),te=J?J.y[1]-te/se.h:1-te/se.h)),E[oe][d+1]=U,E[oe][d+2]=te)}c[T].push(E[oe].slice())}}return c},ie.pointsOnRectangle=function(i){if(5!==i.length)return!1;for(var f=1;f<3;f++)if(!m(i[0][f]-i[1][f],i[3][f]-i[2][f])||!m(i[0][f]-i[3][f],i[1][f]-i[2][f]))return!1;return!(!m(i[0][1],i[1][1])&&!m(i[0][1],i[3][1])||!(l(i[0],i[1])*l(i[0],i[3])))},ie.pointsOnEllipse=function(i){var f=i.length;if(f!==b+1)return!1;f=b;for(var u=0;u<f;u++){var s=(2*f-u)%f,d=(f/2+s)%f;if(!m(l(i[u],i[(f/2+u)%f]),l(i[s],i[d])))return!1}return!0},ie.handleEllipse=function(i,f,u){if(!i)return[f,u];var s=ie.ellipseOver({x0:f[0],y0:f[1],x1:u[0],y1:u[1]}),d=(s.x1+s.x0)/2,h=(s.y1+s.y0)/2,a=(s.x1-s.x0)/2,_=(s.y1-s.y0)/2;a||(a=_/=y),_||(_=a/=y);for(var c=[],T=0;T<b;T++){var x=2*T*Math.PI/b;c.push([d+a*Math.cos(x),h+_*Math.sin(x)])}return c},ie.ellipseOver=function(i){var f=i.x0,u=i.y0,s=i.x1,d=i.y1,h=s-f,a=d-u,_=((f-=h)+s)/2,c=((u-=a)+d)/2;return{x0:_-(h*=y),y0:c-(a*=y),x1:_+h,y1:c+a}},ie.fixDatesForPaths=function(i,f,u){var s="date"===f.type,d="date"===u.type;if(!s&&!d)return i;for(var h=0;h<i.length;h++)for(var a=0;a<i[h].length;a++)for(var _=0;_+2<i[h][a].length;_+=2)s&&(i[h][a][_+1]=i[h][a][_+1].replace(" ","_")),d&&(i[h][a][_+2]=i[h][a][_+2].replace(" ","_"));return i}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(v,ae,ie){"use strict";var p=v("../../dragelement/helpers"),g=p.drawMode,b=p.openMode,y=v("./constants"),e=y.i000,r=y.i090,t=y.i180,o=y.i270,n=y.cos45,m=y.sin45,l=v("../../selections/helpers"),i=l.p2r,f=l.r2p,u=v(".././handle_outline").clearOutline,s=v("./helpers"),d=s.readPaths,h=s.writePaths,a=s.ellipseOver,_=s.fixDatesForPaths;ae.exports=function(c,T){if(c.length){var x=c[0][0];if(x){var w=x.getAttribute("d"),M=T.gd,D=M._fullLayout.newshape,C=T.plotinfo,P=C.xaxis,L=C.yaxis,S=!!C.domain||!C.xaxis,E=!!C.domain||!C.yaxis,N=T.isActiveShape,z=T.dragmode,q=(M.layout||{}).shapes||[];if(!g(z)&&void 0!==N){var G=M._fullLayout._activeShapeIndex;if(G<q.length)switch(M._fullLayout.shapes[G].type){case"rect":z="drawrect";break;case"circle":z="drawcircle";break;case"line":z="drawline";break;case"path":var K=q[G].path||"";z="Z"===K[K.length-1]?"drawclosedpath":"drawopenpath"}}var ne,X=b(z),J=d(w,M,C,N),se={editable:!0,xref:S?"paper":P._id,yref:E?"paper":L._id,layer:D.layer,opacity:D.opacity,line:{color:D.line.color,width:D.line.width,dash:D.line.dash}};if(X||(se.fillcolor=D.fillcolor,se.fillrule=D.fillrule),1===J.length&&(ne=J[0]),ne&&5===ne.length&&"drawrect"===z)se.type="rect",se.x0=ne[0][1],se.y0=ne[0][2],se.x1=ne[2][1],se.y1=ne[2][2];else if(ne&&"drawline"===z)se.type="line",se.x0=ne[0][1],se.y0=ne[0][2],se.x1=ne[1][1],se.y1=ne[1][2];else if(ne&&"drawcircle"===z){se.type="circle";var V=ne[e][1],j=ne[r][1],H=ne[t][1],oe=ne[o][1],U=ne[e][2],te=ne[r][2],ee=ne[t][2],le=ne[o][2],ce=C.xaxis&&("date"===C.xaxis.type||"log"===C.xaxis.type),pe=C.yaxis&&("date"===C.yaxis.type||"log"===C.yaxis.type);ce&&(V=f(C.xaxis,V),j=f(C.xaxis,j),H=f(C.xaxis,H),oe=f(C.xaxis,oe)),pe&&(U=f(C.yaxis,U),te=f(C.yaxis,te),ee=f(C.yaxis,ee),le=f(C.yaxis,le));var de=(j+oe)/2,be=(U+ee)/2,he=a({x0:de,y0:be,x1:de+(oe-j+H-V)/2*n,y1:be+(le-te+ee-U)/2*m});ce&&(he.x0=i(C.xaxis,he.x0),he.x1=i(C.xaxis,he.x1)),pe&&(he.y0=i(C.yaxis,he.y0),he.y1=i(C.yaxis,he.y1)),se.x0=he.x0,se.y0=he.y0,se.x1=he.x1,se.y1=he.y1}else se.type="path",P&&L&&_(J,P,L),se.path=h(J),ne=null;u(M);for(var xe=T.editHelpers,De=(xe||{}).modifyItem,Se=[],ke=0;ke<q.length;ke++){var Fe=M._fullLayout.shapes[ke];if(Se[ke]=Fe._input,void 0!==N&&ke===M._fullLayout._activeShapeIndex){var ve=se;switch(Fe.type){case"line":case"rect":case"circle":De("x0",ve.x0),De("x1",ve.x1),De("y0",ve.y0),De("y1",ve.y1);break;case"path":De("path",ve.path)}}}return void 0===N?(Se.push(se),Se):xe?xe.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(v,ae,ie){"use strict";ae.exports={clearOutlineControllers:function(p){var g=p._fullLayout._zoomlayer;g&&g.selectAll(".outline-controllers").remove()},clearOutline:function(p){var g=p._fullLayout._zoomlayer;g&&g.selectAll(".select-outline").remove(),p._fullLayout._outlining=!1}}},{}],469:[function(v,ae,ie){"use strict";var p=v("./constants"),g=v("../../lib"),b=v("../../plots/cartesian/axes");ie.rangeToShapePosition=function(y){return"log"===y.type?y.r2d:function(e){return e}},ie.shapePositionToRange=function(y){return"log"===y.type?y.d2r:function(e){return e}},ie.decodeDate=function(y){return function(e){return e.replace&&(e=e.replace("_"," ")),y(e)}},ie.encodeDate=function(y){return function(e){return y(e).replace(" ","_")}},ie.extractPathCoords=function(y,e,r){var t=[];return y.match(p.segmentRE).forEach(function(o){var n=e[o.charAt(0)].drawn;if(void 0!==n){var m=o.substr(1).match(p.paramRE);if(m&&!(m.length<n)){var l=m[n],i=r?l:g.cleanNumber(l);t.push(i)}}}),t},ie.getDataToPixel=function(y,e,r,t){var o,n=y._fullLayout._size;if(e)if("domain"===t)o=function(l){return e._length*(r?1-l:l)+e._offset};else{var m=ie.shapePositionToRange(e);o=function(l){return e._offset+e.r2p(m(l,!0))},"date"===e.type&&(o=ie.decodeDate(o))}else o=r?function(l){return n.t+n.h*(1-l)}:function(l){return n.l+n.w*l};return o},ie.getPixelToData=function(y,e,r,t){var o,n=y._fullLayout._size;if(e)if("domain"===t)o=function(l){var i=(l-e._offset)/e._length;return r?1-i:i};else{var m=ie.rangeToShapePosition(e);o=function(l){return m(e.p2r(l-e._offset))}}else o=r?function(l){return 1-(l-n.t)/n.h}:function(l){return(l-n.l)/n.w};return o},ie.roundPositionForSharpStrokeRendering=function(y,e){var r=1===Math.round(e%2),t=Math.round(y);return r?t+.5:t},ie.makeShapesOptionsAndPlotinfo=function(y,e){var r=y._fullLayout.shapes[e]||{},t=y._fullLayout._plots[r.xref+r.yref];return t?t._hadPlotinfo=!0:(t={},r.xref&&"paper"!==r.xref&&(t.xaxis=y._fullLayout[r.xref+"axis"]),r.yref&&"paper"!==r.yref&&(t.yaxis=y._fullLayout[r.yref+"axis"])),t.xsizemode=r.xsizemode,t.ysizemode=r.ysizemode,t.xanchor=r.xanchor,t.yanchor=r.yanchor,{options:r,plotinfo:t}},ie.makeSelectionsOptionsAndPlotinfo=function(y,e){var r=y._fullLayout.selections[e]||{},t=y._fullLayout._plots[r.xref+r.yref];return t?t._hadPlotinfo=!0:(t={},r.xref&&(t.xaxis=y._fullLayout[r.xref+"axis"]),r.yref&&(t.yaxis=y._fullLayout[r.yref+"axis"])),{options:r,plotinfo:t}},ie.getPathString=function(y,e){var r,t,o,n,m,l,i,f,L,S,E,z,q,G,K,u=e.type,s=b.getRefType(e.xref),d=b.getRefType(e.yref),h=b.getFromId(y,e.xref),a=b.getFromId(y,e.yref),_=y._fullLayout._size;if(h?"domain"===s?t=function(L){return h._offset+h._length*L}:(r=ie.shapePositionToRange(h),t=function(L){return h._offset+h.r2p(r(L,!0))}):t=function(L){return _.l+_.w*L},a?"domain"===d?n=function(L){return a._offset+a._length*(1-L)}:(o=ie.shapePositionToRange(a),n=function(L){return a._offset+a.r2p(o(L,!0))}):n=function(L){return _.t+_.h*(1-L)},"path"===u)return h&&"date"===h.type&&(t=ie.decodeDate(t)),a&&"date"===a.type&&(n=ie.decodeDate(n)),S=t,E=n,z=(L=e).xsizemode,q=L.ysizemode,G=L.xanchor,K=L.yanchor,L.path.replace(p.segmentRE,function(ne){var X=0,J=ne.charAt(0),se=p.paramIsX[J],V=p.paramIsY[J],j=p.numParams[J],H=ne.substr(1).replace(p.paramRE,function(oe){return se[X]?oe="pixel"===z?S(G)+Number(oe):S(oe):V[X]&&(oe="pixel"===q?E(K)-Number(oe):E(oe)),++X>j&&(oe="X"),oe});return X>j&&(H=H.replace(/[\s,]*X.*/,""),g.log("Ignoring extra params in segment "+ne)),J+H});if("pixel"===e.xsizemode){var c=t(e.xanchor);m=c+e.x0,l=c+e.x1}else m=t(e.x0),l=t(e.x1);if("pixel"===e.ysizemode){var T=n(e.yanchor);i=T-e.y0,f=T-e.y1}else i=n(e.y0),f=n(e.y1);if("line"===u)return"M"+m+","+i+"L"+l+","+f;if("rect"===u)return"M"+m+","+i+"H"+l+"V"+f+"H"+m+"Z";var x=(m+l)/2,w=(i+f)/2,M=Math.abs(x-m),D=Math.abs(w-i),C="A"+M+","+D,P=x+M+","+w;return"M"+P+C+" 0 1,1 "+x+","+(w-D)+C+" 0 0,1 "+P+"Z"}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(v,ae,ie){"use strict";var p=v("./draw");ae.exports={moduleType:"component",name:"shapes",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewShapeDefaults:v("./draw_newshape/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("shapes"),calcAutorange:v("./calc_autorange"),draw:p.draw,drawOne:p.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("../../plots/pad_attributes"),b=v("../../lib/extend").extendDeepAll,y=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/animation_attributes"),r=v("../../plot_api/plot_template").templatedArray,t=v("./constants"),o=r("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ae.exports=y(r("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:o,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(g({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:p({})},font:p({}),activebgcolor:{valType:"color",dflt:t.gripBgActiveColor},bgcolor:{valType:"color",dflt:t.railBgColor},bordercolor:{valType:"color",dflt:t.railBorderColor},borderwidth:{valType:"number",min:0,dflt:t.railBorderWidth},ticklen:{valType:"number",min:0,dflt:t.tickLength},tickcolor:{valType:"color",dflt:t.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:t.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(v,ae,ie){"use strict";ae.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/array_container_defaults"),b=v("./attributes"),y=v("./constants").name,e=b.steps;function r(o,n,m){function l(d,h){return p.coerce(o,n,b,d,h)}for(var i=g(o,n,{name:"steps",handleItemDefaults:t}),f=0,u=0;u<i.length;u++)i[u].visible&&f++;if(f<2?n.visible=!1:l("visible")){n._stepCount=f;var s=n._visibleSteps=p.filterVisible(i);(i[l("active")]||{}).visible||(n.active=s[0]._index),l("x"),l("y"),p.noneOrAll(o,n,["x","y"]),l("xanchor"),l("yanchor"),l("len"),l("lenmode"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),p.coerceFont(l,"font",m.font),l("currentvalue.visible")&&(l("currentvalue.xanchor"),l("currentvalue.prefix"),l("currentvalue.suffix"),l("currentvalue.offset"),p.coerceFont(l,"currentvalue.font",n.font)),l("transition.duration"),l("transition.easing"),l("bgcolor"),l("activebgcolor"),l("bordercolor"),l("borderwidth"),l("ticklen"),l("tickwidth"),l("tickcolor"),l("minorticklen")}}function t(o,n){function m(i,f){return p.coerce(o,n,e,i,f)}if("skip"===o.method||Array.isArray(o.args)?m("visible"):n.visible=!1){m("method"),m("args");var l=m("label","step-"+n._index);m("value",l),m("execute")}}ae.exports=function(o,n){g(o,n,{name:y,handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../plots/plots"),b=v("../color"),y=v("../drawing"),e=v("../../lib"),r=e.strTranslate,t=v("../../lib/svg_text_utils"),o=v("../../plot_api/plot_template").arrayEditor,n=v("./constants"),m=v("../../constants/alignment"),l=m.LINE_SPACING,i=m.FROM_TL,f=m.FROM_BR;function u(E){return n.autoMarginIdRoot+E._index}function s(E){return E._index}function d(E,N){var z=y.tester.selectAll("g."+n.labelGroupClass).data(N._visibleSteps);z.enter().append("g").classed(n.labelGroupClass,!0);var q=0,G=0;z.each(function(oe){var U=_(p.select(this),{step:oe},N).node();if(U){var te=y.bBox(U);G=Math.max(G,te.height),q=Math.max(q,te.width)}}),z.remove();var K=N._dims={};K.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var ne=E._fullLayout._size;if(K.lx=ne.l+ne.w*N.x,K.ly=ne.t+ne.h*(1-N.y),K.outerLength="fraction"===N.lenmode?Math.round(ne.w*N.len):N.len,K.inputAreaStart=0,K.inputAreaLength=Math.round(K.outerLength-N.pad.l-N.pad.r),K.labelStride=Math.max(1,Math.ceil((q+n.labelPadding)/((K.inputAreaLength-2*n.stepInset)/(N._stepCount-1)))),K.labelHeight=G,K.currentValueMaxWidth=0,K.currentValueHeight=0,K.currentValueTotalHeight=0,K.currentValueMaxLines=1,N.currentvalue.visible){var se=y.tester.append("g");z.each(function(oe){var U=h(se,N,oe.label),te=U.node()&&y.bBox(U.node())||{width:0,height:0},ee=t.lineCount(U);K.currentValueMaxWidth=Math.max(K.currentValueMaxWidth,Math.ceil(te.width)),K.currentValueHeight=Math.max(K.currentValueHeight,Math.ceil(te.height)),K.currentValueMaxLines=Math.max(K.currentValueMaxLines,ee)}),K.currentValueTotalHeight=K.currentValueHeight+N.currentvalue.offset,se.remove()}K.height=K.currentValueTotalHeight+n.tickOffset+N.ticklen+n.labelOffset+K.labelHeight+N.pad.t+N.pad.b;var V="left";e.isRightAnchor(N)&&(K.lx-=K.outerLength,V="right"),e.isCenterAnchor(N)&&(K.lx-=K.outerLength/2,V="center");var j="top";e.isBottomAnchor(N)&&(K.ly-=K.height,j="bottom"),e.isMiddleAnchor(N)&&(K.ly-=K.height/2,j="middle"),K.outerLength=Math.ceil(K.outerLength),K.height=Math.ceil(K.height),K.lx=Math.round(K.lx),K.ly=Math.round(K.ly);var H={y:N.y,b:K.height*f[j],t:K.height*i[j]};"fraction"===N.lenmode?(H.l=0,H.xl=N.x-N.len*i[V],H.r=0,H.xr=N.x+N.len*f[V]):(H.x=N.x,H.l=K.outerLength*i[V],H.r=K.outerLength*f[V]),g.autoMargin(E,u(N),H)}function h(E,N,z){if(N.currentvalue.visible){var q,G,K=N._dims;switch(N.currentvalue.xanchor){case"right":q=K.inputAreaLength-n.currentValueInset-K.currentValueMaxWidth,G="left";break;case"center":q=.5*K.inputAreaLength,G="middle";break;default:q=n.currentValueInset,G="left"}var ne=e.ensureSingle(E,"text",n.labelClass,function(H){H.attr({"text-anchor":G,"data-notex":1})}),X=N.currentvalue.prefix?N.currentvalue.prefix:"";if("string"==typeof z)X+=z;else{var J=N.steps[N.active].label,se=N._gd._fullLayout._meta;se&&(J=e.templateString(J,se)),X+=J}N.currentvalue.suffix&&(X+=N.currentvalue.suffix),ne.call(y.font,N.currentvalue.font).text(X).call(t.convertToTspans,N._gd);var V=t.lineCount(ne);return t.positionText(ne,q,(K.currentValueMaxLines+1-V)*N.currentvalue.font.size*l),ne}}function a(E,N,z){e.ensureSingle(E,"rect",n.gripRectClass,function(q){q.call(w,N,E,z).style("pointer-events","all")}).attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(b.stroke,z.bordercolor).call(b.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function _(E,N,z){var q=e.ensureSingle(E,"text",n.labelClass,function(ne){ne.attr({"text-anchor":"middle","data-notex":1})}),G=N.step.label,K=z._gd._fullLayout._meta;return K&&(G=e.templateString(G,K)),q.call(y.font,z.font).text(G).call(t.convertToTspans,z._gd),q}function c(E,N){var z=e.ensureSingle(E,"g",n.labelsClass),q=N._dims,G=z.selectAll("g."+n.labelGroupClass).data(q.labelSteps);G.enter().append("g").classed(n.labelGroupClass,!0),G.exit().remove(),G.each(function(K){var ne=p.select(this);ne.call(_,K,N),y.setTranslate(ne,C(N,K.fraction),n.tickOffset+N.ticklen+N.font.size*l+n.labelOffset+q.currentValueTotalHeight)})}function T(E,N,z,q,G){var K=Math.round(q*(z._stepCount-1)),ne=z._visibleSteps[K]._index;ne!==z.active&&x(E,N,z,ne,!0,G)}function x(E,N,z,q,G,K){var ne=z.active;z.active=q,o(E.layout,n.name,z).applyUpdate("active",q);var X=z.steps[z.active];N.call(D,z,K),N.call(h,z),E.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:G,previousActive:ne}),X&&X.method&&G&&(N._nextMethod?(N._nextMethod.step=X,N._nextMethod.doCallback=G,N._nextMethod.doTransition=K):(N._nextMethod={step:X,doCallback:G,doTransition:K},N._nextMethodRaf=window.requestAnimationFrame(function(){var J=N._nextMethod.step;J.method&&(J.execute&&g.executeAPICommand(E,J.method,J.args),N._nextMethod=null,N._nextMethodRaf=null)})))}function w(E,N,z){var q=z.node(),G=p.select(N);function K(){return z.data()[0]}function ne(){var X=K();N.emit("plotly_sliderstart",{slider:X});var J=z.select("."+n.gripRectClass);p.event.stopPropagation(),p.event.preventDefault(),J.call(b.fill,X.activebgcolor);var se=P(X,p.mouse(q)[0]);function V(){var H=K(),oe=P(H,p.mouse(q)[0]);T(N,z,H,oe,!1)}function j(){var H=K();H._dragging=!1,J.call(b.fill,H.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),N.emit("plotly_sliderend",{slider:H,step:H.steps[H.active]})}T(N,z,X,se,!0),X._dragging=!0,G.on("mousemove",V),G.on("touchmove",V),G.on("mouseup",j),G.on("touchend",j)}E.on("mousedown",ne),E.on("touchstart",ne)}function M(E,N){var z=E.selectAll("rect."+n.tickRectClass).data(N._visibleSteps),q=N._dims;z.enter().append("rect").classed(n.tickRectClass,!0),z.exit().remove(),z.attr({width:N.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(G,K){var ne=K%q.labelStride==0,X=p.select(this);X.attr({height:ne?N.ticklen:N.minorticklen}).call(b.fill,N.tickcolor),y.setTranslate(X,C(N,K/(N._stepCount-1))-.5*N.tickwidth,(ne?n.tickOffset:n.minorTickOffset)+q.currentValueTotalHeight)})}function D(E,N,z){for(var q=E.select("rect."+n.gripRectClass),G=0,K=0;K<N._stepCount;K++)if(N._visibleSteps[K]._index===N.active){G=K;break}var ne=C(N,G/(N._stepCount-1));if(!N._invokingCommand){var X=q;z&&N.transition.duration>0&&(X=X.transition().duration(N.transition.duration).ease(N.transition.easing)),X.attr("transform",r(ne-.5*n.gripWidth,N._dims.currentValueTotalHeight))}}function C(E,N){var z=E._dims;return z.inputAreaStart+n.stepInset+(z.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,N))}function P(E,N){var z=E._dims;return Math.min(1,Math.max(0,(N-n.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*n.stepInset-2*z.inputAreaStart)))}function L(E,N,z){var q=z._dims,G=e.ensureSingle(E,"rect",n.railTouchRectClass,function(K){K.call(w,N,E,z).style("pointer-events","all")});G.attr({width:q.inputAreaLength,height:Math.max(q.inputAreaWidth,n.tickOffset+z.ticklen+q.labelHeight)}).call(b.fill,z.bgcolor).attr("opacity",0),y.setTranslate(G,0,q.currentValueTotalHeight)}function S(E,N){var z=N._dims,q=z.inputAreaLength-2*n.railInset,G=e.ensureSingle(E,"rect",n.railRectClass);G.attr({width:q,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,N.bordercolor).call(b.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px"),y.setTranslate(G,n.railInset,.5*(z.inputAreaWidth-n.railWidth)+z.currentValueTotalHeight)}ae.exports=function(E){var N=E._fullLayout,z=function(J,se){for(var V=J[n.name],j=[],H=0;H<V.length;H++){var oe=V[H];oe.visible&&(oe._gd=se,j.push(oe))}return j}(N,E),q=N._infolayer.selectAll("g."+n.containerClassName).data(z.length>0?[0]:[]);function G(J){J._commandObserver&&(J._commandObserver.remove(),delete J._commandObserver),g.autoMargin(E,u(J))}if(q.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize"),q.exit().each(function(){p.select(this).selectAll("g."+n.groupClassName).each(G)}).remove(),0!==z.length){var K=q.selectAll("g."+n.groupClassName).data(z,s);K.enter().append("g").classed(n.groupClassName,!0),K.exit().each(G).remove();for(var ne=0;ne<z.length;ne++)d(E,z[ne]);K.each(function(J){var se=p.select(this);(function(V){var j=V._dims;j.labelSteps=[];for(var H=V._stepCount,oe=0;oe<H;oe+=j.labelStride)j.labelSteps.push({fraction:oe/(H-1),step:V._visibleSteps[oe]})})(J),g.manageCommandObserver(E,J,J._visibleSteps,function(V){var j=se.data()[0];j.active!==V.index&&(j._dragging||x(E,se,j,V.index,!1,!0))}),function(V,j,H){(H.steps[H.active]||{}).visible||(H.active=H._visibleSteps[0]._index),j.call(h,H).call(S,H).call(c,H).call(M,H).call(L,V,H).call(a,V,H);var oe=H._dims;y.setTranslate(j,oe.lx+H.pad.l,oe.ly+H.pad.t),j.call(D,H,!1),j.call(h,H)}(E,p.select(this),J)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(v,ae,ie){"use strict";var p=v("./constants");ae.exports={moduleType:"component",name:p.name,layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../lib"),r=e.strTranslate,t=v("../drawing"),o=v("../color"),n=v("../../lib/svg_text_utils"),m=v("../../constants/interactions"),l=v("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;ae.exports={draw:function(f,u,s){var d,a=s.propName,_=s.placeholder,c=s.traceIndex,T=s.avoid||{},x=s.attributes,w=s.transform,M=s.containerGroup,D=f._fullLayout,C=1,P=!1,L=s.propContainer.title,S=(L&&L.text?L.text:"").trim(),E=L&&L.font?L.font:{},N=E.family,z=E.size,q=E.color;"title.text"===a?d="titleText":-1!==a.indexOf("axis")?d="axisTitleText":a.indexOf(!0)&&(d="colorbarTitleText");var G=f._context.edits[d];""===S?C=0:S.replace(i," % ")===_.replace(i," % ")&&(C=.2,P=!0,G||(S="")),s._meta?S=e.templateString(S,s._meta):D._meta&&(S=e.templateString(S,D._meta));var K,ne=S||G;M||(M=e.ensureSingle(D._infolayer,"g","g-"+u),K=D._hColorbarMoveTitle);var X=M.selectAll("text").data(ne?[0]:[]);if(X.enter().append("text"),X.text(S).attr("class",u),X.exit().remove(),!ne)return M;function J(j){e.syncOrAsync([se,V],j)}function se(j){var H;return!w&&K&&(w={}),w?(H="",w.rotate&&(H+="rotate("+[w.rotate,x.x,x.y]+")"),(w.offset||K)&&(H+=r(0,(w.offset||0)-(K||0)))):H=null,j.attr("transform",H),j.style({"font-family":N,"font-size":p.round(z,2)+"px",fill:o.rgb(q),opacity:C*o.opacity(q),"font-weight":b.fontWeight}).attr(x).call(n.convertToTspans,f),b.previousPromises(f)}function V(j){var H=p.select(j.node().parentNode);if(T&&T.selection&&T.side&&S){H.attr("transform",null);var oe=l[T.side],U="left"===T.side||"top"===T.side?-1:1,te=g(T.pad)?T.pad:2,ee=t.bBox(H.node()),ce=T.maxShift||U*({left:0,top:0,right:D.width,bottom:D.height}[T.side]-ee[T.side]),pe=0;if(ce<0)pe=ce;else{var de=T.offsetLeft||0,be=T.offsetTop||0;ee.left-=de,ee.right-=de,ee.top-=be,ee.bottom-=be,T.selection.each(function(){var xe=t.bBox(this);e.bBoxIntersect(ee,xe,te)&&(pe=Math.max(pe,U*(xe[T.side]-ee[oe])+te))}),pe=Math.min(ce,pe)}if(pe>0||ce<0){var he={left:[-pe,0],right:[pe,0],top:[0,-pe],bottom:[0,pe]}[T.side];H.attr("transform",r(he[0],he[1]))}}}return X.call(J),G&&(S?X.on(".opacity",null):(C=0,P=!0,X.text(_).on("mouseover.opacity",function(){p.select(this).transition().duration(m.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(m.HIDE_PLACEHOLDER).style("opacity",0)})),X.call(n.makeEditable,{gd:f}).on("edit",function(j){void 0!==c?y.call("_guiRestyle",f,a,j,c):y.call("_guiRelayout",f,a,j)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(J)}).on("input",function(j){this.text(j||" ").call(n.positionText,x.x,x.y)})),X.classed("js-placeholder",P),M}}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("../color/attributes"),b=v("../../lib/extend").extendFlat,y=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/pad_attributes"),r=v("../../plot_api/plot_template").templatedArray,t=r("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ae.exports=y(r("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:t,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(e({editType:"arraydraw"}),{}),font:p({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:g.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(v,ae,ie){"use strict";ae.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],479:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/array_container_defaults"),b=v("./attributes"),y=v("./constants").name,e=b.buttons;function r(o,n,m){function l(i,f){return p.coerce(o,n,b,i,f)}l("visible",g(o,n,{name:"buttons",handleItemDefaults:t}).length>0)&&(l("active"),l("direction"),l("type"),l("showactive"),l("x"),l("y"),p.noneOrAll(o,n,["x","y"]),l("xanchor"),l("yanchor"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),p.coerceFont(l,"font",m.font),l("bgcolor",m.paper_bgcolor),l("bordercolor"),l("borderwidth"))}function t(o,n){function m(l,i){return p.coerce(o,n,e,l,i)}m("visible","skip"===o.method||Array.isArray(o.args))&&(m("method"),m("args"),m("args2"),m("label"),m("execute"))}ae.exports=function(o,n){g(o,n,{name:y,handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../plots/plots"),b=v("../color"),y=v("../drawing"),e=v("../../lib"),r=v("../../lib/svg_text_utils"),t=v("../../plot_api/plot_template").arrayEditor,o=v("../../constants/alignment").LINE_SPACING,n=v("./constants"),m=v("./scrollbox");function l(C){return C._index}function i(C,P){return+C.attr(n.menuIndexAttrName)===P._index}function f(C,P,L,S,E,N,z,q){P.active=z,t(C.layout,n.name,P).applyUpdate("active",z),"buttons"===P.type?s(C,S,null,null,P):"dropdown"===P.type&&(E.attr(n.menuIndexAttrName,"-1"),u(C,S,E,N,P),q||s(C,S,E,N,P))}function u(C,P,L,S,E){var N=e.ensureSingle(P,"g",n.headerClassName,function(X){X.style("pointer-events","all")}),z=E._dims,K={y:E.pad.t,yPad:0,x:E.pad.l,xPad:0,index:0},ne={width:z.headerWidth,height:z.headerHeight};N.call(d,E,E.buttons[E.active]||n.blankHeaderOpts,C).call(M,E,K,ne),e.ensureSingle(P,"text",n.headerArrowClassName,function(X){X.attr("text-anchor","end").call(y.font,E.font).text(n.arrowSymbol[E.direction])}).attr({x:z.headerWidth-n.arrowOffsetX+E.pad.l,y:z.headerHeight/2+n.textOffsetY+E.pad.t}),N.on("click",function(){L.call(D,String(i(L,E)?-1:E._index)),s(C,P,L,S,E)}),N.on("mouseover",function(){N.call(c)}),N.on("mouseout",function(){N.call(T,E)}),y.setTranslate(P,z.lx,z.ly)}function s(C,P,L,S,E){L||(L=P).attr("pointer-events","all");var N=-1==+L.attr(n.menuIndexAttrName)&&"buttons"!==E.type?[]:E.buttons,z="dropdown"===E.type?n.dropdownButtonClassName:n.buttonClassName,q=L.selectAll("g."+z).data(e.filterVisible(N)),G=q.enter().append("g").classed(z,!0),K=q.exit();"dropdown"===E.type?(G.attr("opacity","0").transition().attr("opacity","1"),K.transition().attr("opacity","0").remove()):K.remove();var ne=0,X=0,J=E._dims,se=-1!==["up","down"].indexOf(E.direction);"dropdown"===E.type&&(se?X=J.headerHeight+n.gapButtonHeader:ne=J.headerWidth+n.gapButtonHeader),"dropdown"===E.type&&"up"===E.direction&&(X=-n.gapButtonHeader+n.gapButton-J.openHeight),"dropdown"===E.type&&"left"===E.direction&&(ne=-n.gapButtonHeader+n.gapButton-J.openWidth);var H,oe,U,V={x:J.lx+ne+E.pad.l,y:J.ly+X+E.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},j={l:V.x+E.borderwidth,t:V.y+E.borderwidth};q.each(function(H,oe){var U=p.select(this);U.call(d,E,H,C).call(M,E,V),U.on("click",function(){p.event.defaultPrevented||(H.execute&&(H.args2&&E.active===oe?(f(C,E,0,P,L,S,-1),g.executeAPICommand(C,H.method,H.args2)):(f(C,E,0,P,L,S,oe),g.executeAPICommand(C,H.method,H.args))),C.emit("plotly_buttonclicked",{menu:E,button:H,active:E.active}))}),U.on("mouseover",function(){U.call(c)}),U.on("mouseout",function(){U.call(T,E),q.call(_,E)})}),q.call(_,E),se?(j.w=Math.max(J.openWidth,J.headerWidth),j.h=V.y-j.t):(j.w=V.x-j.l,j.h=Math.max(J.openHeight,J.headerHeight)),j.direction=E.direction,S&&(q.size()?function(H,oe,U,te,ee,le){var ce,pe,de,be=ee.direction,xe=ee._dims,De=ee.active;if("up"===be||"down"===be)for(pe=0,de=0;de<De;de++)pe+=xe.heights[de]+n.gapButton;else for(ce=0,de=0;de<De;de++)ce+=xe.widths[de]+n.gapButton;te.enable(le,ce,pe),te.hbar&&te.hbar.attr("opacity","0").transition().attr("opacity","1"),te.vbar&&te.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,E,j):(U=!!(H=S).vbar,(oe=!!H.hbar)&&H.hbar.transition().attr("opacity","0").each("end",function(){oe=!1,U||H.disable()}),U&&H.vbar.transition().attr("opacity","0").each("end",function(){U=!1,oe||H.disable()})))}function d(C,P,L,S){C.call(h,P).call(a,P,L,S)}function h(C,P){e.ensureSingle(C,"rect",n.itemRectClassName,function(L){L.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})}).call(b.stroke,P.bordercolor).call(b.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px")}function a(C,P,L,S){var E=e.ensureSingle(C,"text",n.itemTextClassName,function(q){q.attr({"text-anchor":"start","data-notex":1})}),N=L.label,z=S._fullLayout._meta;z&&(N=e.templateString(N,z)),E.call(y.font,P.font).text(N).call(r.convertToTspans,S)}function _(C,P){var L=P.active;C.each(function(S,E){var N=p.select(this);E===L&&P.showactive&&N.select("rect."+n.itemRectClassName).call(b.fill,n.activeColor)})}function c(C){C.select("rect."+n.itemRectClassName).call(b.fill,n.hoverColor)}function T(C,P){C.select("rect."+n.itemRectClassName).call(b.fill,P.bgcolor)}function x(C,P){var L=P._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=y.tester.selectAll("g."+n.dropdownButtonClassName).data(e.filterVisible(P.buttons));S.enter().append("g").classed(n.dropdownButtonClassName,!0);var E=-1!==["up","down"].indexOf(P.direction);S.each(function(ne,X){var J=p.select(this);J.call(d,P,ne,C);var se=J.select("."+n.itemTextClassName),V=se.node()&&y.bBox(se.node()).width,j=Math.max(V+n.textPadX,n.minWidth),H=P.font.size*o,oe=r.lineCount(se),U=Math.max(H*oe,n.minHeight)+n.textOffsetY;U=Math.ceil(U),j=Math.ceil(j),L.widths[X]=j,L.heights[X]=U,L.height1=Math.max(L.height1,U),L.width1=Math.max(L.width1,j),E?(L.totalWidth=Math.max(L.totalWidth,j),L.openWidth=L.totalWidth,L.totalHeight+=U+n.gapButton,L.openHeight+=U+n.gapButton):(L.totalWidth+=j+n.gapButton,L.openWidth+=j+n.gapButton,L.totalHeight=Math.max(L.totalHeight,U),L.openHeight=L.totalHeight)}),E?L.totalHeight-=n.gapButton:L.totalWidth-=n.gapButton,L.headerWidth=L.width1+n.arrowPadX,L.headerHeight=L.height1,"dropdown"===P.type&&(E?(L.width1+=n.arrowPadX,L.totalHeight=L.height1):L.totalWidth=L.width1,L.totalWidth+=n.arrowPadX),S.remove();var N=L.totalWidth+P.pad.l+P.pad.r,z=L.totalHeight+P.pad.t+P.pad.b,q=C._fullLayout._size;L.lx=q.l+q.w*P.x,L.ly=q.t+q.h*(1-P.y);var G="left";e.isRightAnchor(P)&&(L.lx-=N,G="right"),e.isCenterAnchor(P)&&(L.lx-=N/2,G="center");var K="top";e.isBottomAnchor(P)&&(L.ly-=z,K="bottom"),e.isMiddleAnchor(P)&&(L.ly-=z/2,K="middle"),L.totalWidth=Math.ceil(L.totalWidth),L.totalHeight=Math.ceil(L.totalHeight),L.lx=Math.round(L.lx),L.ly=Math.round(L.ly),g.autoMargin(C,w(P),{x:P.x,y:P.y,l:N*({right:1,center:.5}[G]||0),r:N*({left:1,center:.5}[G]||0),b:z*({top:1,middle:.5}[K]||0),t:z*({bottom:1,middle:.5}[K]||0)})}function w(C){return n.autoMarginIdRoot+C._index}function M(C,P,L,S){S=S||{};var E=C.select("."+n.itemRectClassName),N=C.select("."+n.itemTextClassName),z=P.borderwidth,q=L.index,G=P._dims;y.setTranslate(C,z+L.x,z+L.y);var K=-1!==["up","down"].indexOf(P.direction),ne=S.height||(K?G.heights[q]:G.height1);E.attr({x:0,y:0,width:S.width||(K?G.width1:G.widths[q]),height:ne});var X=P.font.size*o,J=(r.lineCount(N)-1)*X/2;r.positionText(N,n.textOffsetX,ne/2-J+n.textOffsetY),K?L.y+=G.heights[q]+L.yPad:L.x+=G.widths[q]+L.xPad,L.index++}function D(C,P){C.attr(n.menuIndexAttrName,P||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}ae.exports=function(C){var P=C._fullLayout,L=e.filterVisible(P[n.name]);function S(X){g.autoMargin(C,w(X))}var E=P._menulayer.selectAll("g."+n.containerClassName).data(L.length>0?[0]:[]);if(E.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),E.exit().each(function(){p.select(this).selectAll("g."+n.headerGroupClassName).each(S)}).remove(),0!==L.length){var N=E.selectAll("g."+n.headerGroupClassName).data(L,l);N.enter().append("g").classed(n.headerGroupClassName,!0);for(var z=e.ensureSingle(E,"g",n.dropdownButtonGroupClassName,function(X){X.style("pointer-events","all")}),q=0;q<L.length;q++)x(C,L[q]);var ne=new m(C,z,"updatemenus"+P._uid);N.enter().size()&&(z.node().parentNode.appendChild(z.node()),z.call(D)),N.exit().each(function(X){z.call(D),S(X)}).remove(),N.each(function(X){var J=p.select(this),se="dropdown"===X.type?z:null;g.manageCommandObserver(C,X,X.buttons,function(V){f(C,X,0,J,se,ne,V.index,!0)}),"dropdown"===X.type?(u(C,J,z,ne,X),i(z,X)&&s(C,J,z,ne,X)):s(C,J,null,null,X)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(v,ae,ie){arguments[4][475][0].apply(ie,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(v,ae,ie){"use strict";ae.exports=e;var p=v("@plotly/d3"),g=v("../color"),b=v("../drawing"),y=v("../../lib");function e(r,t,o){this.gd=r,this.container=t,this.id=o,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(r,t,o){var n=this.gd._fullLayout,m=n.width,l=n.height;this.position=r;var i,f,u,s,d=this.position.l,h=this.position.w,a=this.position.t,_=this.position.h,c=this.position.direction,T="down"===c,x="left"===c,w="up"===c,M=h,D=_;T||x||"right"===c||w||(this.position.direction="down",T=!0),T||w?(f=(i=d)+M,T?(u=a,D=(s=Math.min(u+D,l))-u):D=(s=a+D)-(u=Math.max(s-D,0))):(s=(u=a)+D,x?M=(f=d+M)-(i=Math.max(f-M,0)):(i=d,M=(f=Math.min(i+M,m))-i)),this._box={l:i,t:u,w:M,h:D};var C=h>M,P=e.barLength+2*e.barPad,L=e.barWidth+2*e.barPad,S=d,E=a+_;E+L>l&&(E=l-L);var N=this.container.selectAll("rect.scrollbar-horizontal").data(C?[0]:[]);N.exit().on(".drag",null).remove(),N.enter().append("rect").classed("scrollbar-horizontal",!0).call(g.fill,e.barColor),C?(this.hbar=N.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:E,width:P,height:L}),this._hbarXMin=S+P/2,this._hbarTranslateMax=M-P):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=_>D,q=e.barWidth+2*e.barPad,G=e.barLength+2*e.barPad,K=d+h,ne=a;K+q>m&&(K=m-q);var X=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(g.fill,e.barColor),z?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:K,y:ne,width:q,height:G}),this._vbarYMin=ne+G/2,this._vbarTranslateMax=D-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,se=i-.5,V=z?f+q+.5:f+.5,j=u-.5,H=C?s+L+.5:s+.5,oe=n._topdefs.selectAll("#"+J).data(C||z?[0]:[]);if(oe.exit().remove(),oe.enter().append("clipPath").attr("id",J).append("rect"),C||z?(this._clipRect=oe.select("rect").attr({x:Math.floor(se),y:Math.floor(j),width:Math.ceil(V)-Math.floor(se),height:Math.ceil(H)-Math.floor(j)}),this.container.call(b.setClipUrl,J,this.gd),this.bg.attr({x:d,y:a,width:h,height:_})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),C||z){var U=p.behavior.drag().on("dragstart",function(){p.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(U);var te=p.behavior.drag().on("dragstart",function(){p.event.sourceEvent.preventDefault(),p.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));C&&this.hbar.on(".drag",null).call(te),z&&this.vbar.on(".drag",null).call(te)}this.setTranslate(t,o)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var r=this.translateX,t=this.translateY;this.hbar&&(r-=p.event.dx),this.vbar&&(t-=p.event.dy),this.setTranslate(r,t)},e.prototype._onBoxWheel=function(){var r=this.translateX,t=this.translateY;this.hbar&&(r+=p.event.deltaY),this.vbar&&(t+=p.event.deltaY),this.setTranslate(r,t)},e.prototype._onBarDrag=function(){var r=this.translateX,t=this.translateY;if(this.hbar){var o=r+this._hbarXMin,n=o+this._hbarTranslateMax;r=(y.constrain(p.event.x,o,n)-o)/(n-o)*(this.position.w-this._box.w)}if(this.vbar){var m=t+this._vbarYMin,l=m+this._vbarTranslateMax;t=(y.constrain(p.event.y,m,l)-m)/(l-m)*(this.position.h-this._box.h)}this.setTranslate(r,t)},e.prototype.setTranslate=function(r,t){var o=this.position.w-this._box.w,n=this.position.h-this._box.h;r=y.constrain(r||0,0,o),t=y.constrain(t||0,0,n),this.translateX=r,this.translateY=t,this.container.call(b.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(b.setTranslate,r+r/o*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(b.setTranslate,r,t+t/n*this._vbarTranslateMax)}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(v,ae,ie){"use strict";ae.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(v,ae,ie){"use strict";ae.exports={axisRefDescription:function(p,g,b){return["If set to a",p,"axis id (e.g. *"+p+"* or","*"+p+"2*), the `"+p+"` position refers to a",p,"coordinate. If set to *paper*, the `"+p+"`","position refers to the distance from the",g,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",g,"("+b+"). If set to a",p,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",g,"of the domain of that axis: e.g.,","*"+p+"2 domain* refers to the domain of the second",p," axis and a",p,"position of 0.5 refers to the","point between the",g,"and the",b,"of the domain of the","second",p,"axis."].join(" ")}}},{}],485:[function(v,ae,ie){"use strict";ae.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],486:[function(v,ae,ie){"use strict";ae.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(v,ae,ie){"use strict";ae.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(v,ae,ie){"use strict";ae.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(v,ae,ie){"use strict";ae.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],490:[function(v,ae,ie){"use strict";ae.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(v,ae,ie){"use strict";ae.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(v,ae,ie){"use strict";ie.xmlns="http://www.w3.org/2000/xmlns/",ie.svg="http://www.w3.org/2000/svg",ie.xlink="http://www.w3.org/1999/xlink",ie.svgAttrs={xmlns:ie.svg,"xmlns:xlink":ie.xlink}},{}],493:[function(v,ae,ie){"use strict";ie.version=v("./version").version,v("native-promise-only"),v("../build/plotcss");for(var p=v("./registry"),g=ie.register=p.register,b=v("./plot_api"),y=Object.keys(b),e=0;e<y.length;e++){var r=y[e];"_"!==r.charAt(0)&&(ie[r]=b[r]),g({moduleType:"apiMethod",name:r,fn:b[r]})}g(v("./traces/scatter")),g([v("./components/legend"),v("./components/fx"),v("./components/annotations"),v("./components/annotations3d"),v("./components/selections"),v("./components/shapes"),v("./components/images"),v("./components/updatemenus"),v("./components/sliders"),v("./components/rangeslider"),v("./components/rangeselector"),v("./components/grid"),v("./components/errorbars"),v("./components/colorscale"),v("./components/colorbar"),v("./components/modebar")]),g([v("./locale-en"),v("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(g(window.PlotlyLocales),delete window.PlotlyLocales),ie.Icons=v("./fonts/ploticon");var t=v("./components/fx"),o=v("./plots/plots");ie.Plots={resize:o.resize,graphJson:o.graphJson,sendDataToCloud:o.sendDataToCloud},ie.Fx={hover:t.hover,unhover:t.unhover,loneHover:t.loneHover,loneUnhover:t.loneUnhover},ie.Snapshot=v("./snapshot"),ie.PlotSchema=v("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(v,ae,ie){"use strict";ae.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(v,ae,ie){"use strict";ie.isLeftAnchor=function(p){return"left"===p.xanchor||"auto"===p.xanchor&&p.x<=1/3},ie.isCenterAnchor=function(p){return"center"===p.xanchor||"auto"===p.xanchor&&p.x>1/3&&p.x<2/3},ie.isRightAnchor=function(p){return"right"===p.xanchor||"auto"===p.xanchor&&p.x>=2/3},ie.isTopAnchor=function(p){return"top"===p.yanchor||"auto"===p.yanchor&&p.y>=2/3},ie.isMiddleAnchor=function(p){return"middle"===p.yanchor||"auto"===p.yanchor&&p.y>1/3&&p.y<2/3},ie.isBottomAnchor=function(p){return"bottom"===p.yanchor||"auto"===p.yanchor&&p.y<=1/3}},{}],496:[function(v,ae,ie){"use strict";var p=v("./mod"),g=p.mod,b=p.modHalf,y=Math.PI,e=2*y;function r(m){return Math.abs(m[1]-m[0])>e-1e-14}function t(m,l){return b(l-m,e)}function o(m,l){if(r(l))return!0;var i,f;l[0]<l[1]?(i=l[0],f=l[1]):(i=l[1],f=l[0]),(i=g(i,e))>(f=g(f,e))&&(f+=e);var u=g(m,e),s=u+e;return u>=i&&u<=f||s>=i&&s<=f}function n(m,l,i,f,u,s,d){u=u||0,s=s||0;var h,a,_,c,T,x=r([i,f]);function w(P,L){return[P*Math.cos(L)+u,s-P*Math.sin(L)]}x?(h=0,a=y,_=e):i<f?(h=i,_=f):(h=f,_=i),m<l?(c=m,T=l):(c=l,T=m);var M,D=Math.abs(_-h)<=y?0:1;function C(P,L,S){return"A"+[P,P]+" "+[0,D,S]+" "+w(P,L)}return x?M=null===c?"M"+w(T,h)+C(T,a,0)+C(T,_,0)+"Z":"M"+w(c,h)+C(c,a,0)+C(c,_,0)+"ZM"+w(T,h)+C(T,a,1)+C(T,_,1)+"Z":null===c?(M="M"+w(T,h)+C(T,_,0),d&&(M+="L0,0Z")):M="M"+w(c,h)+"L"+w(T,h)+C(T,_,0)+"L"+w(c,_)+C(c,h,1)+"Z",M}ae.exports={deg2rad:function(m){return m/180*y},rad2deg:function(m){return m/y*180},angleDelta:t,angleDist:function(m,l){return Math.abs(t(m,l))},isFullCircle:r,isAngleInsideSector:o,isPtInsideSector:function(m,l,i,f){return!!o(l,f)&&(i[0]<i[1]?(u=i[0],s=i[1]):(u=i[1],s=i[0]),m>=u&&m<=s);var u,s},pathArc:function(m,l,i,f,u){return n(null,m,l,i,f,u,0)},pathSector:function(m,l,i,f,u){return n(null,m,l,i,f,u,1)},pathAnnulus:function(m,l,i,f,u,s){return n(m,l,i,f,u,s,1)}}},{"./mod":522}],497:[function(v,ae,ie){"use strict";var p=Array.isArray,g=ArrayBuffer,b=DataView;function y(t){return g.isView(t)&&!(t instanceof b)}function e(t){return p(t)||y(t)}function r(t,o,n){if(e(t)){if(e(t[0])){for(var m=n,l=0;l<t.length;l++)m=o(m,t[l].length);return m}return t.length}return 0}ie.isTypedArray=y,ie.isArrayOrTypedArray=e,ie.isArray1D=function(t){return!e(t[0])},ie.ensureArray=function(t,o){return p(t)||(t=[]),t.length=o,t},ie.concat=function(){var t,o,n,m,l,i,f,u,s=[],d=!0,h=0;for(n=0;n<arguments.length;n++)(i=(m=arguments[n]).length)&&(o?s.push(m):(o=m,l=i),p(m)?t=!1:(d=!1,h?t!==m.constructor&&(t=!1):t=m.constructor),h+=i);if(!h)return[];if(!s.length)return o;if(d)return o.concat.apply(o,s);if(t){for((f=new t(h)).set(o),n=0;n<s.length;n++)f.set(m=s[n],l),l+=m.length;return f}for(f=new Array(h),u=0;u<o.length;u++)f[u]=o[u];for(n=0;n<s.length;n++){for(m=s[n],u=0;u<m.length;u++)f[l+u]=m[u];l+=u}return f},ie.maxRowLength=function(t){return r(t,Math.max,0)},ie.minRowLength=function(t){return r(t,Math.min,1/0)}},{}],498:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ae.exports=function(y){return"string"==typeof y&&(y=y.replace(b,"")),p(y)?Number(y):g}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(v,ae,ie){"use strict";ae.exports=function(p){var g=p._fullLayout;g._glcanvas&&g._glcanvas.size()&&g._glcanvas.each(function(b){b.regl&&b.regl.clear({color:!0,depth:!0})})}},{}],500:[function(v,ae,ie){"use strict";ae.exports=function(p){p._responsiveChartHandler&&(window.removeEventListener("resize",p._responsiveChartHandler),delete p._responsiveChartHandler)}},{}],501:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("tinycolor2"),b=v("../plots/attributes"),y=v("../components/colorscale/scales"),e=v("../components/color"),r=v("../constants/interactions").DESELECTDIM,t=v("./nested_property"),o=v("./regex").counter,n=v("./mod").modHalf,m=v("./array").isArrayOrTypedArray;function l(i,f){var u=ie.valObjectMeta[f.valType];if(f.arrayOk&&m(i))return!0;if(u.validateFunction)return u.validateFunction(i,f);var s={},d=s;return u.coerceFunction(i,{set:function(a){d=a}},s,f),d!==s}ie.valObjectMeta={data_array:{coerceFunction:function(i,f,u){m(i)?f.set(i):void 0!==u&&f.set(u)}},enumerated:{coerceFunction:function(i,f,u,s){s.coerceNumber&&(i=+i),-1===s.values.indexOf(i)?f.set(u):f.set(i)},validateFunction:function(i,f){f.coerceNumber&&(i=+i);for(var u=f.values,s=0;s<u.length;s++){var d=String(u[s]);if("/"===d.charAt(0)&&"/"===d.charAt(d.length-1)){if(new RegExp(d.substr(1,d.length-2)).test(i))return!0}else if(i===u[s])return!0}return!1}},boolean:{coerceFunction:function(i,f,u){f.set(!0===i||!1===i?i:u)}},number:{coerceFunction:function(i,f,u,s){!p(i)||void 0!==s.min&&i<s.min||void 0!==s.max&&i>s.max?f.set(u):f.set(+i)}},integer:{coerceFunction:function(i,f,u,s){i%1||!p(i)||void 0!==s.min&&i<s.min||void 0!==s.max&&i>s.max?f.set(u):f.set(+i)}},string:{coerceFunction:function(i,f,u,s){f.set("string"!=typeof i?!0!==s.strict&&"number"==typeof i?String(i):u:s.noBlank&&!i?u:i)}},color:{coerceFunction:function(i,f,u){g(i).isValid()?f.set(i):f.set(u)}},colorlist:{coerceFunction:function(i,f,u){Array.isArray(i)&&i.length&&i.every(function(s){return g(s).isValid()})?f.set(i):f.set(u)}},colorscale:{coerceFunction:function(i,f,u){f.set(y.get(i,u))}},angle:{coerceFunction:function(i,f,u){"auto"===i?f.set("auto"):p(i)?f.set(n(+i,360)):f.set(u)}},subplotid:{coerceFunction:function(i,f,u,s){var d=s.regex||o(u);"string"==typeof i&&d.test(i)?f.set(i):f.set(u)},validateFunction:function(i,f){var u=f.dflt;return i===u||"string"==typeof i&&!!o(u).test(i)}},flaglist:{coerceFunction:function(i,f,u,s){if(-1===(s.extras||[]).indexOf(i))if("string"==typeof i){for(var d=i.split("+"),h=0;h<d.length;){var a=d[h];-1===s.flags.indexOf(a)||d.indexOf(a)<h?d.splice(h,1):h++}f.set(d.length?d.join("+"):u)}else f.set(u);else f.set(i)}},any:{coerceFunction:function(i,f,u){f.set(void 0===i?u:i)}},info_array:{coerceFunction:function(i,f,u,s){function d(E,N,z){var q;return void 0===z&&(z=N.dflt),ie.valObjectMeta[N.valType].coerceFunction(E,{set:function(K){q=K}},z,N),q}var h=2===s.dimensions||"1-2"===s.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var a,_,c,x,w,M=s.items,D=[],C=Array.isArray(M),P=C&&h&&Array.isArray(M[0]),L=h&&C&&!P,S=C&&!L?M.length:i.length;if(u=Array.isArray(u)?u:[],h)for(a=0;a<S;a++)for(D[a]=[],c=Array.isArray(i[a])?i[a]:[],x=L?M.length:C?M[a].length:c.length,_=0;_<x;_++)void 0!==(w=d(c[_],L?M[_]:C?M[a][_]:M,(u[a]||[])[_]))&&(D[a][_]=w);else for(a=0;a<S;a++)void 0!==(w=d(i[a],C?M[a]:M,u[a]))&&(D[a]=w);f.set(D)}else f.set(u)},validateFunction:function(i,f){if(!Array.isArray(i))return!1;var u=f.items,s=Array.isArray(u),d=2===f.dimensions;if(!f.freeLength&&i.length!==u.length)return!1;for(var h=0;h<i.length;h++)if(d){if(!Array.isArray(i[h])||!f.freeLength&&i[h].length!==u[h].length)return!1;for(var a=0;a<i[h].length;a++)if(!l(i[h][a],s?u[h][a]:u))return!1}else if(!l(i[h],s?u[h]:u))return!1;return!0}}},ie.coerce=function(i,f,u,s,d){var h=t(u,s).get(),a=t(i,s),_=t(f,s),c=a.get(),T=f._template;if(void 0===c&&T&&(c=t(T,s).get(),T=0),void 0===d&&(d=h.dflt),h.arrayOk&&m(c))return _.set(c),c;var x=ie.valObjectMeta[h.valType].coerceFunction;x(c,_,d,h);var w=_.get();return T&&w===d&&!l(c,h)&&(x(c=t(T,s).get(),_,d,h),w=_.get()),w},ie.coerce2=function(i,f,u,s,d){var h=t(i,s),a=ie.coerce(i,f,u,s,d);return null!=h.get()&&a},ie.coerceFont=function(i,f,u){var s={};return s.family=i(f+".family",(u=u||{}).family),s.size=i(f+".size",u.size),s.color=i(f+".color",u.color),s},ie.coercePattern=function(i,f,u,s){if(i(f+".shape")){i(f+".solidity"),i(f+".size");var d="overlay"===i(f+".fillmode");if(!s){var h=i(f+".bgcolor",d?u:void 0);i(f+".fgcolor",d?e.contrast(h):u)}i(f+".fgopacity",d?.5:1)}},ie.coerceHoverinfo=function(i,f,u){var s,d=f._module.attributes,h=d.hoverinfo?d:b,a=h.hoverinfo;if(1===u._dataLength){var _="all"===a.dflt?a.flags.slice():a.dflt.split("+");_.splice(_.indexOf("name"),1),s=_.join("+")}return ie.coerce(i,f,h,"hoverinfo",s)},ie.coerceSelectionMarkerOpacity=function(i,f){if(i.marker){var u,s,d=i.marker.opacity;void 0!==d&&(m(d)||i.selected||i.unselected||(u=d,s=r*d),f("selected.marker.opacity",u),f("unselected.marker.opacity",s))}},ie.validate=l},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(v,ae,ie){"use strict";var p,g,b=v("d3-time-format").timeFormat,y=v("fast-isnumeric"),e=v("./loggers"),r=v("./mod").mod,t=v("../constants/numerical"),o=t.BADNUM,n=t.ONEDAY,m=t.ONEHOUR,l=t.ONEMIN,i=t.ONESEC,f=t.EPOCHJD,u=v("../registry"),s=v("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,a=(new Date).getFullYear()-70;function _(N){return N&&u.componentsRegistry.calendars&&"string"==typeof N&&"gregorian"!==N}function c(N,z){return String(N+Math.pow(10,z)).substr(1)}ie.dateTick0=function(N,z){var K,ne,q=(ne=!!z,_(K=N)?ne?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[K]:u.getComponentMethod("calendars","CANONICAL_TICK")[K]:ne?"2000-01-02":"2000-01-01");if(z<2)return q;var G=ie.dateTime2ms(q,N);return ie.ms2DateTime(G+=n*(z-1),0,N)},ie.dfltRange=function(N){return _(N)?u.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]},ie.isJSDate=function(N){return"object"==typeof N&&null!==N&&"function"==typeof N.getTime},ie.dateTime2ms=function(N,z){if(ie.isJSDate(N)){var q=N.getTimezoneOffset()*l,G=(N.getUTCMinutes()-N.getMinutes())*l+(N.getUTCSeconds()-N.getSeconds())*i+(N.getUTCMilliseconds()-N.getMilliseconds());if(G){var K=3*l;q=q-K/2+r(G-q+K/2,K)}return(N=Number(N)-q)>=p&&N<=g?N:o}if("string"!=typeof N&&"number"!=typeof N)return o;N=String(N);var ne=_(z),X=N.charAt(0);!ne||"G"!==X&&"g"!==X||(N=N.substr(1),z="");var J=ne&&"chinese"===z.substr(0,7),se=N.match(J?h:d);if(!se)return o;var V=se[1],j=se[3]||"1",H=Number(se[5]||1),oe=Number(se[7]||0),U=Number(se[9]||0),te=Number(se[11]||0);if(ne){if(2===V.length)return o;var ee;V=Number(V);try{var le=u.getComponentMethod("calendars","getCal")(z);if(J){var ce="i"===j.charAt(j.length-1);j=parseInt(j,10),ee=le.newDate(V,le.toMonthIndex(V,j,ce),H)}else ee=le.newDate(V,Number(j),H)}catch{return o}return ee?(ee.toJD()-f)*n+oe*m+U*l+te*i:o}V=2===V.length?(Number(V)+2e3-a)%100+a:Number(V),j-=1;var pe=new Date(Date.UTC(2e3,j,H,oe,U));return pe.setUTCFullYear(V),pe.getUTCMonth()!==j||pe.getUTCDate()!==H?o:pe.getTime()+te*i},p=ie.MIN_MS=ie.dateTime2ms("-9999"),g=ie.MAX_MS=ie.dateTime2ms("9999-12-31 23:59:59.9999"),ie.isDateTime=function(N,z){return ie.dateTime2ms(N,z)!==o};var T=90*n,x=3*m,w=5*l;function M(N,z,q,G,K){if((z||q||G||K)&&(N+=" "+c(z,2)+":"+c(q,2),(G||K)&&(N+=":"+c(G,2),K))){for(var ne=4;K%10==0;)ne-=1,K/=10;N+="."+c(K,ne)}return N}ie.ms2DateTime=function(N,z,q){if("number"!=typeof N||!(N>=p&&N<=g))return o;z||(z=0);var G,K,ne,X,J,se,V=Math.floor(10*r(N+.05,1)),j=Math.round(N-V/10);if(_(q)){var H=Math.floor(j/n)+f,oe=Math.floor(r(N,n));try{G=u.getComponentMethod("calendars","getCal")(q).fromJD(H).formatDate("yyyy-mm-dd")}catch{G=s("G%Y-%m-%d")(new Date(j))}if("-"===G.charAt(0))for(;G.length<11;)G="-0"+G.substr(1);else for(;G.length<10;)G="0"+G;K=z<T?Math.floor(oe/m):0,ne=z<T?Math.floor(oe%m/l):0,X=z<x?Math.floor(oe%l/i):0,J=z<w?oe%i*10+V:0}else se=new Date(j),G=s("%Y-%m-%d")(se),K=z<T?se.getUTCHours():0,ne=z<T?se.getUTCMinutes():0,X=z<x?se.getUTCSeconds():0,J=z<w?10*se.getUTCMilliseconds()+V:0;return M(G,K,ne,X,J)},ie.ms2DateTimeLocal=function(N){if(!(N>=p+n&&N<=g-n))return o;var z=Math.floor(10*r(N+.05,1)),q=new Date(Math.round(N-z/10));return M(b("%Y-%m-%d")(q),q.getHours(),q.getMinutes(),q.getSeconds(),10*q.getUTCMilliseconds()+z)},ie.cleanDate=function(N,z,q){if(N===o)return z;if(ie.isJSDate(N)||"number"==typeof N&&isFinite(N)){if(_(q))return e.error("JS Dates and milliseconds are incompatible with world calendars",N),z;if(!(N=ie.ms2DateTimeLocal(+N))&&void 0!==z)return z}else if(!ie.isDateTime(N,q))return e.error("unrecognized date",N),z;return N};var D=/%\d?f/g,C=/%h/g,P={1:"1",2:"1",3:"2",4:"2"};function L(N,z,q,G){N=N.replace(D,function(ne){var X=Math.min(+ne.charAt(1)||6,6);return(z/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0"});var K=new Date(Math.floor(z+.05));if(N=N.replace(C,function(){return P[q("%q")(K)]}),_(G))try{N=u.getComponentMethod("calendars","worldCalFmt")(N,z,G)}catch{return"Invalid"}return q(N)(K)}var S=[59,59.9,59.99,59.999,59.9999];ie.formatDate=function(N,z,q,G,K,ne){if(K=_(K)&&K,!z)if("y"===q)z=ne.year;else if("m"===q)z=ne.month;else{if("d"!==q)return function(X,J){var se=r(X+.05,n),V=c(Math.floor(se/m),2)+":"+c(r(Math.floor(se/l),60),2);if("M"!==J){y(J)||(J=0);var j=(100+Math.min(r(X/i,60),S[J])).toFixed(J).substr(1);J>0&&(j=j.replace(/0+$/,"").replace(/[\.]$/,"")),V+=":"+j}return V}(N,q)+"\n"+L(ne.dayMonthYear,N,G,K);z=ne.dayMonth+"\n"+ne.year}return L(z,N,G,K)};var E=3*n;ie.incrementMonth=function(N,z,q){q=_(q)&&q;var G=r(N,n);if(N=Math.round(N-G),q)try{var K=Math.round(N/n)+f,ne=u.getComponentMethod("calendars","getCal")(q),X=ne.fromJD(K);return z%12?ne.add(X,z,"m"):ne.add(X,z/12,"y"),(X.toJD()-f)*n+G}catch{e.error("invalid ms "+N+" in calendar "+q)}var J=new Date(N+E);return J.setUTCMonth(J.getUTCMonth()+z)+G-E},ie.findExactDates=function(N,z){for(var q,G,K=0,ne=0,X=0,J=0,se=_(z)&&u.getComponentMethod("calendars","getCal")(z),V=0;V<N.length;V++)if(y(G=N[V])){if(!(G%n))if(se)try{1===(q=se.fromJD(G/n+f)).day()?1===q.month()?K++:ne++:X++}catch{}else 1===(q=new Date(G)).getUTCDate()?0===q.getUTCMonth()?K++:ne++:X++}else J++;X+=ne+=K;var j=N.length-J;return{exactYears:K/j,exactMonths:ne/j,exactDays:X/j}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("./loggers"),b=v("./matrix"),y=v("gl-mat4");function e(m){var l=m&&m.parentNode;l&&l.removeChild(m)}function r(m,l,i){var f="plotly.js-style-"+m,u=document.getElementById(f);u||((u=document.createElement("style")).setAttribute("id",f),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var s=u.sheet;s.insertRule?s.insertRule(l+"{"+i+"}",0):s.addRule?s.addRule(l,i,0):g.warn("addStyleRule failed")}function t(m){var l=window.getComputedStyle(m,null),i=l.getPropertyValue("-webkit-transform")||l.getPropertyValue("-moz-transform")||l.getPropertyValue("-ms-transform")||l.getPropertyValue("-o-transform")||l.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(f){return+f})}function o(m){for(var l=[];n(m);)l.push(m),m=m.parentNode;return l}function n(m){return m&&(m instanceof Element||m instanceof HTMLElement)}ae.exports={getGraphDiv:function(m){var l;if("string"==typeof m){if(null===(l=document.getElementById(m)))throw new Error("No DOM element with id '"+m+"' exists on the page.");return l}if(null==m)throw new Error("DOM element provided is null or undefined");return m},isPlotDiv:function(m){var l=p.select(m);return l.node()instanceof HTMLElement&&l.size()&&l.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(m,l){r("global",m,l)},addRelatedStyleRule:r,deleteRelatedStyleRule:function(m){var i=document.getElementById("plotly.js-style-"+m);i&&e(i)},getFullTransformMatrix:function(m){var l=o(m),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return l.forEach(function(f){var u=t(f);if(u){var s=b.convertCssMatrix(u);i=y.multiply(i,i,s)}}),i},getElementTransformMatrix:t,getElementAndAncestors:o,equalDomRects:function(m,l){return m&&l&&m.x===l.x&&m.y===l.y&&m.top===l.top&&m.left===l.left&&m.right===l.right&&m.bottom===l.bottom}}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(v,ae,ie){"use strict";var p=v("events").EventEmitter;ae.exports={init:function(b){if(b._ev instanceof p)return b;var y=new p,e=new p;return b._ev=y,b._internalEv=e,b.on=y.on.bind(y),b.once=y.once.bind(y),b.removeListener=y.removeListener.bind(y),b.removeAllListeners=y.removeAllListeners.bind(y),b._internalOn=e.on.bind(e),b._internalOnce=e.once.bind(e),b._removeInternalListener=e.removeListener.bind(e),b._removeAllInternalListeners=e.removeAllListeners.bind(e),b.emit=function(r,t){typeof jQuery<"u"&&jQuery(b).trigger(r,t),y.emit(r,t),e.emit(r,t)},b},triggerHandler:function(b,y,e){var r,t;typeof jQuery<"u"&&(r=jQuery(b).triggerHandler(y,e));var o=b._ev;if(!o)return r;var n,m=o._events[y];if(!m)return r;function l(i){return i.listener?(o.removeListener(y,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(o,[e]))):i.apply(o,[e])}for(m=Array.isArray(m)?m:[m],n=0;n<m.length-1;n++)l(m[n]);return t=l(m[n]),void 0!==r?r:t},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}}},{events:84}],505:[function(v,ae,ie){"use strict";var p=v("./is_plain_object.js"),g=Array.isArray;function b(y,e,r,t){var o,n,m,l,i,f,u=y[0],s=y.length;if(2===s&&g(u)&&g(y[1])&&0===u.length){if(function(h,a){var _,c;for(_=0;_<h.length;_++){if(null!==(c=h[_])&&"object"==typeof c)return!1;void 0!==c&&(a[_]=c)}return!0}(y[1],u))return u;u.splice(0,u.length)}for(var d=1;d<s;d++)for(n in o=y[d])m=u[n],l=o[n],t&&g(l)?u[n]=l:e&&l&&(p(l)||(i=g(l)))?(i?(i=!1,f=m&&g(m)?m:[]):f=m&&p(m)?m:{},u[n]=b([f,l],e,r,t)):(void 0!==l||r)&&(u[n]=l);return u}ie.extendFlat=function(){return b(arguments,!1,!1,!1)},ie.extendDeep=function(){return b(arguments,!0,!1,!1)},ie.extendDeepAll=function(){return b(arguments,!0,!0,!1)},ie.extendDeepNoArrays=function(){return b(arguments,!0,!1,!0)}},{"./is_plain_object.js":516}],506:[function(v,ae,ie){"use strict";ae.exports=function(p){for(var g={},b=[],y=0,e=0;e<p.length;e++){var r=p[e];1!==g[r]&&(g[r]=1,b[y++]=r)}return b}},{}],507:[function(v,ae,ie){"use strict";function p(b){return!0===b.visible}function g(b){var y=b[0].trace;return!0===y.visible&&0!==y._length}ae.exports=function(b){for(var y,e=(y=b,Array.isArray(y)&&Array.isArray(y[0])&&y[0][0]&&y[0][0].trace?g:p),r=[],t=0;t<b.length;t++){var o=b[t];e(o)&&r.push(o)}return r}},{}],508:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("country-regex"),b=v("@turf/area"),y=v("@turf/centroid"),e=v("@turf/bbox"),r=v("./identity"),t=v("./loggers"),o=v("./is_plain_object"),n=v("./nested_property"),m=v("./polygon"),l=Object.keys(g),i={"ISO-3":r,"USA-states":r,"country names":function(u){for(var s=0;s<l.length;s++){var d=l[s];if(new RegExp(g[d]).test(u.trim().toLowerCase()))return d}return t.log("Unrecognized country name: "+u+"."),!1}};function f(u){var s=u.geojson,d=window.PlotlyGeoAssets||{},h="string"==typeof s?d[s]:s;return o(h)?h:(t.error("Oops ... something went wrong when fetching "+s),!1)}ae.exports={locationToFeature:function(u,s,d){if(!s||"string"!=typeof s)return!1;var h,a,_,c=i[u](s);if(c){if("USA-states"===u)for(h=[],_=0;_<d.length;_++)(a=d[_]).properties&&a.properties.gu&&"USA"===a.properties.gu&&h.push(a);else h=d;for(_=0;_<h.length;_++)if((a=h[_]).id===c)return a;t.log(["Location with id",c,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var s,d,h,a,_=u.geometry,c=_.coordinates,T=u.id,x=[];function w(M){for(var D=0;D<M.length-1;D++)if(M[D][0]>0&&M[D+1][0]<0)return D;return null}switch(s="RUS"===T||"FJI"===T?function(M){var D;if(null===w(M))D=M;else for(D=new Array(M.length),a=0;a<M.length;a++)D[a]=[M[a][0]<0?M[a][0]+360:M[a][0],M[a][1]];x.push(m.tester(D))}:"ATA"===T?function(M){var D=w(M);if(null===D)return x.push(m.tester(M));var C=new Array(M.length+1),P=0;for(a=0;a<M.length;a++)a>D?C[P++]=[M[a][0]+360,M[a][1]]:a===D?(C[P++]=M[a],C[P++]=[M[a][0],-90]):C[P++]=M[a];var L=m.tester(C);L.pts.pop(),x.push(L)}:function(M){x.push(m.tester(M))},_.type){case"MultiPolygon":for(d=0;d<c.length;d++)for(h=0;h<c[d].length;h++)s(c[d][h]);break;case"Polygon":for(d=0;d<c.length;d++)s(c[d])}return x},getTraceGeojson:f,extractTraceFeature:function(u){var s=u[0].trace,d=f(s);if(!d)return!1;var h,a={},_=[];for(h=0;h<s._length;h++){var c=u[h];(c.loc||0===c.loc)&&(a[c.loc]=c)}function T(M){var D=n(M,s.featureidkey||"id").get(),C=a[D];if(C){var P=M.geometry;if("Polygon"===P.type||"MultiPolygon"===P.type){var L={type:"Feature",id:D,geometry:P,properties:{}};L.properties.ct=function(S){var E,N=S.geometry;if("MultiPolygon"===N.type)for(var z=N.coordinates,q=0,G=0;G<z.length;G++){var K={type:"Polygon",coordinates:z[G]},ne=b.default(K);ne>q&&(q=ne,E=K)}else E=N;return y.default(E).geometry.coordinates}(L),C.fIn=M,C.fOut=L,_.push(L)}else t.log(["Location",C.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete a[D]}switch(d.type){case"FeatureCollection":var x=d.features;for(h=0;h<x.length;h++)T(x[h]);break;case"Feature":T(d);break;default:return t.warn(["Invalid GeoJSON type",(d.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in a)t.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+s.featureidkey+"*."].join(" "));return _},fetchTraceGeoData:function(u){var s=window.PlotlyGeoAssets||{},d=[];function h(T){return new Promise(function(x,w){p.json(T,function(M,D){return M?(delete s[T],w(new Error(404===M.status?'GeoJSON at URL "'+T+'" does not exist.':"Unexpected error while fetching from "+T))):(s[T]=D,x(D))})})}function a(T){return new Promise(function(x,w){var M=0,D=setInterval(function(){return s[T]&&"pending"!==s[T]?(clearInterval(D),x(s[T])):M>100?(clearInterval(D),w("Unexpected error while fetching from "+T)):void M++},50)})}for(var _=0;_<u.length;_++){var c=u[_][0].trace.geojson;"string"==typeof c&&(s[c]?"pending"===s[c]&&d.push(a(c)):(s[c]="pending",d.push(h(c))))}return d},computeBbox:function(u){return e.default(u)}}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(v,ae,ie){"use strict";var p=v("../constants/numerical").BADNUM;ie.calcTraceToLineCoords=function(g){for(var b=g[0].trace.connectgaps,y=[],e=[],r=0;r<g.length;r++){var t=g[r].lonlat;t[0]!==p?e.push(t):!b&&e.length>0&&(y.push(e),e=[])}return e.length>0&&y.push(e),y},ie.makeLine=function(g){return 1===g.length?{type:"LineString",coordinates:g[0]}:{type:"MultiLineString",coordinates:g}},ie.makePolygon=function(g){if(1===g.length)return{type:"Polygon",coordinates:g};for(var b=new Array(g.length),y=0;y<g.length;y++)b[y]=[g[y]];return{type:"MultiPolygon",coordinates:b}},ie.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(v,ae,ie){"use strict";var p,g,b,y=v("./mod").mod;function e(t,o,n,m,l,i,f,u){var s=n-t,d=l-t,h=f-l,a=m-o,_=i-o,c=u-i,T=s*c-h*a;if(0===T)return null;var x=(d*c-h*_)/T,w=(d*a-s*_)/T;return w<0||w>1||x<0||x>1?null:{x:t+s*x,y:o+a*x}}function r(t,o,n,m,l){var i=m*t+l*o;if(i<0)return m*m+l*l;if(i>n){var f=m-t,u=l-o;return f*f+u*u}var s=m*o-l*t;return s*s/n}ie.segmentsIntersect=e,ie.segmentDistance=function(t,o,n,m,l,i,f,u){if(e(t,o,n,m,l,i,f,u))return 0;var s=n-t,d=m-o,h=f-l,a=u-i,_=s*s+d*d,c=h*h+a*a,T=Math.min(r(s,d,_,l-t,i-o),r(s,d,_,f-t,u-o),r(h,a,c,t-l,o-i),r(h,a,c,n-l,m-i));return Math.sqrt(T)},ie.getTextLocation=function(t,o,n,m){if(t===g&&m===b||(p={},g=t,b=m),p[n])return p[n];var l=t.getPointAtLength(y(n-m/2,o)),i=t.getPointAtLength(y(n+m/2,o)),f=Math.atan((i.y-l.y)/(i.x-l.x)),u=t.getPointAtLength(y(n,o)),s={x:(4*u.x+l.x+i.x)/6,y:(4*u.y+l.y+i.y)/6,theta:f};return p[n]=s,s},ie.clearLocationCache=function(){g=null},ie.getVisibleSegment=function(t,o,n){var m,l,i=o.left,f=o.right,u=o.top,s=o.bottom,d=0,h=t.getTotalLength(),a=h;function _(T){var x=t.getPointAtLength(T);0===T?m=x:T===h&&(l=x);var w=x.x<i?i-x.x:x.x>f?x.x-f:0,M=x.y<u?u-x.y:x.y>s?x.y-s:0;return Math.sqrt(w*w+M*M)}for(var c=_(d);c;){if((d+=c+n)>a)return;c=_(d)}for(c=_(a);c;){if(d>(a-=c+n))return;c=_(a)}return{min:d,max:a,len:a-d,total:h,isClosed:0===d&&a===h&&Math.abs(m.x-l.x)<.1&&Math.abs(m.y-l.y)<.1}},ie.findPointOnPath=function(t,o,n,m){for(var l,i,f,u=(m=m||{}).pathLength||t.getTotalLength(),s=m.tolerance||.001,d=m.iterationLimit||30,h=t.getPointAtLength(0)[n]>t.getPointAtLength(u)[n]?-1:1,a=0,_=0,c=u;a<d;){if(f=(i=t.getPointAtLength(l=(_+c)/2))[n]-o,Math.abs(f)<s)return i;h*f>0?c=l:_=l,a++}return i}},{"./mod":522}],511:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("tinycolor2"),b=v("color-normalize"),y=v("../components/colorscale"),e=v("../components/color/attributes").defaultLine,r=v("./array").isArrayOrTypedArray,t=b(e);function o(l,i){var f=l;return f[3]*=i,f}function n(l){if(p(l))return t;var i=b(l);return i.length?i:t}function m(l){return p(l)?l:1}ae.exports={formatColor:function(l,i,f){var u,s,d,h,a,_=l.color,c=r(_),T=r(i),x=y.extractOpts(l),w=[];if(u=void 0!==x.colorscale?y.makeColorScaleFuncFromTrace(l):n,s=c?function(D,C){return void 0===D[C]?t:b(u(D[C]))}:n,d=T?function(D,C){return void 0===D[C]?1:m(D[C])}:m,c||T)for(var M=0;M<f;M++)h=s(_,M),a=d(i,M),w[M]=o(h,a);else w=o(b(_),i);return w},parseColorScale:function(l){var i=y.extractOpts(l),f=i.colorscale;return i.reversescale&&(f=y.flipScale(i.colorscale)),f.map(function(u){var s=u[0],d=g(u[1]).toRgb();return{index:s,rgb:[d.r,d.g,d.b,d.a]}})}}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(v,ae,ie){"use strict";var p=v("./identity");function g(b){return[b]}ae.exports={keyFun:function(b){return b.key},repeat:g,descend:p,wrap:g,unwrap:function(b){return b[0]}}},{"./identity":513}],513:[function(v,ae,ie){"use strict";ae.exports=function(p){return p}},{}],514:[function(v,ae,ie){"use strict";ae.exports=function(p,g){if(!g)return p;var b=1/Math.abs(g),y=b>1?(b*p+b*g)/b:p+g,e=String(y).length;if(e>16){var r=String(g).length;if(e>=String(p).length+r){var t=parseFloat(y).toPrecision(12);-1===t.indexOf("e+")&&(y=+t)}}return y}},{}],515:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-time-format").utcFormat,b=v("d3-format").format,y=v("fast-isnumeric"),e=v("../constants/numerical"),r=e.FP_SAFE,t=-r,o=e.BADNUM,n=ae.exports={};n.adjustFormat=function(V){return!V||/^\d[.]\df/.test(V)||/[.]\d%/.test(V)?V:"0.f"===V?"~f":/^\d%/.test(V)?"~%":/^\ds/.test(V)?"~s":!/^[~,.0$]/.test(V)&&/[&fps]/.test(V)?"~"+V:V};var m={};n.warnBadFormat=function(V){var j=String(V);m[j]||(m[j]=1,n.warn('encountered bad format: "'+j+'"'))},n.noFormat=function(V){return String(V)},n.numberFormat=function(V){var j;try{j=b(n.adjustFormat(V))}catch{return n.warnBadFormat(V),n.noFormat}return j},n.nestedProperty=v("./nested_property"),n.keyedContainer=v("./keyed_container"),n.relativeAttr=v("./relative_attr"),n.isPlainObject=v("./is_plain_object"),n.toLogRange=v("./to_log_range"),n.relinkPrivateKeys=v("./relink_private");var l=v("./array");n.isTypedArray=l.isTypedArray,n.isArrayOrTypedArray=l.isArrayOrTypedArray,n.isArray1D=l.isArray1D,n.ensureArray=l.ensureArray,n.concat=l.concat,n.maxRowLength=l.maxRowLength,n.minRowLength=l.minRowLength;var i=v("./mod");n.mod=i.mod,n.modHalf=i.modHalf;var f=v("./coerce");n.valObjectMeta=f.valObjectMeta,n.coerce=f.coerce,n.coerce2=f.coerce2,n.coerceFont=f.coerceFont,n.coercePattern=f.coercePattern,n.coerceHoverinfo=f.coerceHoverinfo,n.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,n.validate=f.validate;var u=v("./dates");n.dateTime2ms=u.dateTime2ms,n.isDateTime=u.isDateTime,n.ms2DateTime=u.ms2DateTime,n.ms2DateTimeLocal=u.ms2DateTimeLocal,n.cleanDate=u.cleanDate,n.isJSDate=u.isJSDate,n.formatDate=u.formatDate,n.incrementMonth=u.incrementMonth,n.dateTick0=u.dateTick0,n.dfltRange=u.dfltRange,n.findExactDates=u.findExactDates,n.MIN_MS=u.MIN_MS,n.MAX_MS=u.MAX_MS;var s=v("./search");n.findBin=s.findBin,n.sorterAsc=s.sorterAsc,n.sorterDes=s.sorterDes,n.distinctVals=s.distinctVals,n.roundUp=s.roundUp,n.sort=s.sort,n.findIndexOfMin=s.findIndexOfMin,n.sortObjectKeys=v("./sort_object_keys");var d=v("./stats");n.aggNums=d.aggNums,n.len=d.len,n.mean=d.mean,n.median=d.median,n.midRange=d.midRange,n.variance=d.variance,n.stdev=d.stdev,n.interp=d.interp;var h=v("./matrix");n.init2dArray=h.init2dArray,n.transposeRagged=h.transposeRagged,n.dot=h.dot,n.translationMatrix=h.translationMatrix,n.rotationMatrix=h.rotationMatrix,n.rotationXYMatrix=h.rotationXYMatrix,n.apply3DTransform=h.apply3DTransform,n.apply2DTransform=h.apply2DTransform,n.apply2DTransform2=h.apply2DTransform2,n.convertCssMatrix=h.convertCssMatrix,n.inverseTransformMatrix=h.inverseTransformMatrix;var a=v("./angles");n.deg2rad=a.deg2rad,n.rad2deg=a.rad2deg,n.angleDelta=a.angleDelta,n.angleDist=a.angleDist,n.isFullCircle=a.isFullCircle,n.isAngleInsideSector=a.isAngleInsideSector,n.isPtInsideSector=a.isPtInsideSector,n.pathArc=a.pathArc,n.pathSector=a.pathSector,n.pathAnnulus=a.pathAnnulus;var _=v("./anchor_utils");n.isLeftAnchor=_.isLeftAnchor,n.isCenterAnchor=_.isCenterAnchor,n.isRightAnchor=_.isRightAnchor,n.isTopAnchor=_.isTopAnchor,n.isMiddleAnchor=_.isMiddleAnchor,n.isBottomAnchor=_.isBottomAnchor;var c=v("./geometry2d");n.segmentsIntersect=c.segmentsIntersect,n.segmentDistance=c.segmentDistance,n.getTextLocation=c.getTextLocation,n.clearLocationCache=c.clearLocationCache,n.getVisibleSegment=c.getVisibleSegment,n.findPointOnPath=c.findPointOnPath;var T=v("./extend");n.extendFlat=T.extendFlat,n.extendDeep=T.extendDeep,n.extendDeepAll=T.extendDeepAll,n.extendDeepNoArrays=T.extendDeepNoArrays;var x=v("./loggers");n.log=x.log,n.warn=x.warn,n.error=x.error;var w=v("./regex");n.counterRegex=w.counter;var M=v("./throttle");n.throttle=M.throttle,n.throttleDone=M.done,n.clearThrottle=M.clear;var D=v("./dom");function C(V){var j={};for(var H in V)for(var oe=V[H],U=0;U<oe.length;U++)j[oe[U]]=+H;return j}n.getGraphDiv=D.getGraphDiv,n.isPlotDiv=D.isPlotDiv,n.removeElement=D.removeElement,n.addStyleRule=D.addStyleRule,n.addRelatedStyleRule=D.addRelatedStyleRule,n.deleteRelatedStyleRule=D.deleteRelatedStyleRule,n.getFullTransformMatrix=D.getFullTransformMatrix,n.getElementTransformMatrix=D.getElementTransformMatrix,n.getElementAndAncestors=D.getElementAndAncestors,n.equalDomRects=D.equalDomRects,n.clearResponsive=v("./clear_responsive"),n.preserveDrawingBuffer=v("./preserve_drawing_buffer"),n.makeTraceGroups=v("./make_trace_groups"),n._=v("./localize"),n.notifier=v("./notifier"),n.filterUnique=v("./filter_unique"),n.filterVisible=v("./filter_visible"),n.pushUnique=v("./push_unique"),n.increment=v("./increment"),n.cleanNumber=v("./clean_number"),n.ensureNumber=function(V){return y(V)?(V=Number(V))>r||V<t?o:V:o},n.isIndex=function(V,j){return!(void 0!==j&&V>=j)&&y(V)&&V>=0&&V%1==0},n.noop=v("./noop"),n.identity=v("./identity"),n.repeat=function(V,j){for(var H=new Array(j),oe=0;oe<j;oe++)H[oe]=V;return H},n.swapAttrs=function(V,j,H,oe){H||(H="x"),oe||(oe="y");for(var U=0;U<j.length;U++){var te=j[U],ee=n.nestedProperty(V,te.replace("?",H)),le=n.nestedProperty(V,te.replace("?",oe)),ce=ee.get();ee.set(le.get()),le.set(ce)}},n.raiseToTop=function(V){V.parentNode.appendChild(V)},n.cancelTransition=function(V){return V.transition().duration(0)},n.constrain=function(V,j,H){return j>H?Math.max(H,Math.min(j,V)):Math.max(j,Math.min(H,V))},n.bBoxIntersect=function(V,j,H){return V.left<=j.right+(H=H||0)&&j.left<=V.right+H&&V.top<=j.bottom+H&&j.top<=V.bottom+H},n.simpleMap=function(V,j,H,oe,U){for(var te=V.length,ee=new Array(te),le=0;le<te;le++)ee[le]=j(V[le],H,oe,U);return ee},n.randstr=function V(j,H,oe,U){if(oe||(oe=16),void 0===H&&(H=24),H<=0)return"0";var te,ee,le=Math.log(Math.pow(2,H))/Math.log(oe),ce="";for(te=2;le===1/0;te*=2)le=Math.log(Math.pow(2,H/te))/Math.log(oe)*te;var pe=le-Math.floor(le);for(te=0;te<Math.floor(le);te++)ce=Math.floor(Math.random()*oe).toString(oe)+ce;pe&&(ee=Math.pow(oe,pe),ce=Math.floor(Math.random()*ee).toString(oe)+ce);var de=parseInt(ce,oe);return j&&j[ce]||de!==1/0&&de>=Math.pow(2,H)?U>10?(n.warn("randstr failed uniqueness"),ce):V(j,H,oe,(U||0)+1):ce},n.OptionControl=function(V,j){V||(V={}),j||(j="opt");var H={optionList:[],_newoption:function(oe){oe[j]=V,H[oe.name]=oe,H.optionList.push(oe)}};return H["_"+j]=V,H},n.smooth=function(V,j){if((j=Math.round(j)||0)<2)return V;var H,oe,U,te,ee=V.length,le=2*ee,ce=2*j-1,pe=new Array(ce),de=new Array(ee);for(H=0;H<ce;H++)pe[H]=(1-Math.cos(Math.PI*(H+1)/j))/(2*j);for(H=0;H<ee;H++){for(te=0,oe=0;oe<ce;oe++)(U=H+oe+1-j)<-ee?U-=le*Math.round(U/le):U>=le&&(U-=le*Math.floor(U/le)),U<0?U=-1-U:U>=ee&&(U=le-1-U),te+=V[U]*pe[oe];de[H]=te}return de},n.syncOrAsync=function(V,j,H){var oe;function U(){return n.syncOrAsync(V,j,H)}for(;V.length;)if((oe=(0,V.splice(0,1)[0])(j))&&oe.then)return oe.then(U);return H&&H(j)},n.stripTrailingSlash=function(V){return"/"===V.substr(-1)?V.substr(0,V.length-1):V},n.noneOrAll=function(V,j,H){if(V){var oe,U=!1,te=!0;for(oe=0;oe<H.length;oe++)null!=V[H[oe]]?U=!0:te=!1;if(U&&!te)for(oe=0;oe<H.length;oe++)V[H[oe]]=j[H[oe]]}},n.mergeArray=function(V,j,H,oe){var U="function"==typeof oe;if(n.isArrayOrTypedArray(V))for(var te=Math.min(V.length,j.length),ee=0;ee<te;ee++){var le=V[ee];j[ee][H]=U?oe(le):le}},n.mergeArrayCastPositive=function(V,j,H){return n.mergeArray(V,j,H,function(oe){var U=+oe;return isFinite(U)&&U>0?U:0})},n.fillArray=function(V,j,H,oe){if(oe=oe||n.identity,n.isArrayOrTypedArray(V))for(var U=0;U<j.length;U++)j[U][H]=oe(V[U])},n.castOption=function(V,j,H,oe){oe=oe||n.identity;var U=n.nestedProperty(V,H).get();return n.isArrayOrTypedArray(U)?Array.isArray(j)&&n.isArrayOrTypedArray(U[j[0]])?oe(U[j[0]][j[1]]):oe(U[j]):U},n.extractOption=function(V,j,H,oe){if(H in V)return V[H];var U=n.nestedProperty(j,oe).get();return Array.isArray(U)?void 0:U},n.tagSelected=function(V,j,H){var oe,U,te=j.selectedpoints,ee=j._indexToPoints;ee&&(oe=C(ee));for(var le=0;le<te.length;le++){var ce=te[le];if(n.isIndex(ce)||n.isArrayOrTypedArray(ce)&&n.isIndex(ce[0])&&n.isIndex(ce[1])){var pe=oe?oe[ce]:ce,de=H?H[pe]:pe;void 0!==(U=de)&&U<V.length&&(V[de].selected=1)}}},n.selIndices2selPoints=function(V){var j=V.selectedpoints,H=V._indexToPoints;if(H){for(var oe=C(H),U=[],te=0;te<j.length;te++){var ee=j[te];if(n.isIndex(ee)){var le=oe[ee];n.isIndex(le)&&U.push(le)}}return U}return j},n.getTargetArray=function(V,j){var H=j.target;if("string"==typeof H&&H){var oe=n.nestedProperty(V,H).get();return!!Array.isArray(oe)&&oe}return!!Array.isArray(H)&&H},n.minExtend=function(V,j){var H={};"object"!=typeof j&&(j={});var oe,U,te,ee=Object.keys(V);for(oe=0;oe<ee.length;oe++)te=V[U=ee[oe]],"_"!==U.charAt(0)&&"function"!=typeof te&&(H[U]="module"===U?te:Array.isArray(te)?"colorscale"===U?te.slice():te.slice(0,3):n.isTypedArray(te)?te.subarray(0,3):te&&"object"==typeof te?n.minExtend(V[U],j[U]):te);for(ee=Object.keys(j),oe=0;oe<ee.length;oe++)"object"==typeof(te=j[U=ee[oe]])&&U in H&&"object"==typeof H[U]||(H[U]=te);return H},n.titleCase=function(V){return V.charAt(0).toUpperCase()+V.substr(1)},n.containsAny=function(V,j){for(var H=0;H<j.length;H++)if(-1!==V.indexOf(j[H]))return!0;return!1},n.isIE=function(){return void 0!==window.navigator.msSaveBlob};var P=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return P.test(window.navigator.userAgent)};var L=/iPad|iPhone|iPod/;n.isIOS=function(){return L.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var V=S.exec(window.navigator.userAgent);if(V&&2===V.length){var j=parseInt(V[1]);if(!isNaN(j))return j}return null},n.isD3Selection=function(V){return V instanceof p.selection},n.ensureSingle=function(V,j,H,oe){var U=V.select(j+(H?"."+H:""));if(U.size())return U;var te=V.append(j);return H&&te.classed(H,!0),oe&&te.call(oe),te},n.ensureSingleById=function(V,j,H,oe){var U=V.select(j+"#"+H);if(U.size())return U;var te=V.append(j).attr("id",H);return oe&&te.call(oe),te},n.objectFromPath=function(V,j){for(var H,oe=V.split("."),U=H={},te=0;te<oe.length;te++){var ee=oe[te],le=null,ce=oe[te].match(/(.*)\[([0-9]+)\]/);ce?(le=ce[2],(H=H[ee=ce[1]]=[])[le]=te===oe.length-1?j:{},H=H[le]):(H[ee]=te===oe.length-1?j:{},H=H[ee])}return U};var E=/^([^\[\.]+)\.(.+)?/,N=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(V){var j,H,oe,U,te,ee,le;if("object"==typeof V&&!Array.isArray(V))for(H in V)V.hasOwnProperty(H)&&((j=H.match(E))?(U=V[H],oe=j[1],delete V[H],V[oe]=n.extendDeepNoArrays(V[oe]||{},n.objectFromPath(H,n.expandObjectPaths(U))[oe])):(j=H.match(N))?(U=V[H],oe=j[1],te=parseInt(j[2]),delete V[H],V[oe]=V[oe]||[],"."===j[3]?(le=j[4],ee=V[oe][te]=V[oe][te]||{},n.extendDeepNoArrays(ee,n.objectFromPath(le,n.expandObjectPaths(U)))):V[oe][te]=n.expandObjectPaths(U)):V[H]=n.expandObjectPaths(V[H]));return V},n.numSeparate=function(V,j,H){if(H||(H=!1),"string"!=typeof j||0===j.length)throw new Error("Separator string required for formatting!");"number"==typeof V&&(V=String(V));var oe=/(\d+)(\d{3})/,U=j.charAt(0),te=j.charAt(1),ee=V.split("."),le=ee[0],ce=ee.length>1?U+ee[1]:"";if(te&&(ee.length>1||le.length>4||H))for(;oe.test(le);)le=le.replace(oe,"$1"+te+"$2");return le+ce},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var z=/^\w*$/;n.templateString=function(V,j){var H={};return V.replace(n.TEMPLATE_STRING_REGEX,function(oe,U){var te;return z.test(U)?te=j[U]:(H[U]=H[U]||n.nestedProperty(j,U).get,te=H[U]()),n.isValidTextValue(te)?te:""})};var q={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return ne.apply(q,arguments)};var G={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return ne.apply(G,arguments)};var K=/^[:|\|]/;function ne(V,j,H){var oe=this,U=arguments;j||(j={});var te={};return V.replace(n.TEMPLATE_STRING_REGEX,function(ee,le,ce){var pe,de,be,he="_xother"===le||"_yother"===le,xe="_xother_"===le||"_yother_"===le,De="xother_"===le||"yother_"===le,Se="xother"===le||"yother"===le||he||De||xe,ke=le;if((he||xe)&&(ke=ke.substring(1)),(De||xe)&&(ke=ke.substring(0,ke.length-1)),Se){if(void 0===(pe=j[ke]))return""}else for(be=3;be<U.length;be++)if(de=U[be]){if(de.hasOwnProperty(ke)){pe=de[ke];break}if(z.test(ke)||(pe=n.nestedProperty(de,ke).get(),(pe=te[ke]||n.nestedProperty(de,ke).get())&&(te[ke]=pe)),void 0!==pe)break}if(void 0===pe&&oe)return oe.count<oe.max&&(n.warn("Variable '"+ke+"' in "+oe.name+" could not be found!"),pe=ee),oe.count===oe.max&&n.warn("Too many "+oe.name+" warnings - additional warnings will be suppressed"),oe.count++,ee;if(ce){var Fe;if(":"===ce[0]&&(pe=(Fe=H?H.numberFormat:n.numberFormat)(ce.replace(K,""))(pe)),"|"===ce[0]){Fe=H?H.timeFormat:g;var ve=n.dateTime2ms(pe);pe=n.formatDate(ve,ce.replace(K,""),!1,Fe)}}else{var Te=ke+"Label";j.hasOwnProperty(Te)&&(pe=j[Te])}return Se&&(pe="("+pe+")",(he||xe)&&(pe=" "+pe),(De||xe)&&(pe+=" ")),pe})}n.subplotSort=function(V,j){for(var H=Math.min(V.length,j.length)+1,oe=0,U=0,te=0;te<H;te++){var ee=V.charCodeAt(te)||0,le=j.charCodeAt(te)||0,ce=ee>=48&&ee<=57,pe=le>=48&&le<=57;if(ce&&(oe=10*oe+ee-48),pe&&(U=10*U+le-48),!ce||!pe){if(oe!==U)return oe-U;if(ee!==le)return ee-le}}return U-oe};var X=2e9;n.seedPseudoRandom=function(){X=2e9},n.pseudoRandom=function(){var V=X;return X=(69069*X+1)%4294967296,Math.abs(X-V)<429496729?n.pseudoRandom():X/4294967296},n.fillText=function(V,j,H){var oe=Array.isArray(H)?function(ee){H.push(ee)}:function(ee){H.text=ee},U=n.extractOption(V,j,"htx","hovertext");if(n.isValidTextValue(U))return oe(U);var te=n.extractOption(V,j,"tx","text");return n.isValidTextValue(te)?oe(te):void 0},n.isValidTextValue=function(V){return V||0===V},n.formatPercent=function(V,j){j=j||0;for(var H=(Math.round(100*V*Math.pow(10,j))*Math.pow(.1,j)).toFixed(j)+"%",oe=0;oe<j;oe++)-1!==H.indexOf(".")&&(H=(H=H.replace("0%","%")).replace(".%","%"));return H},n.isHidden=function(V){var j=window.getComputedStyle(V).display;return!j||"none"===j},n.strTranslate=function(V,j){return V||j?"translate("+V+","+j+")":""},n.strRotate=function(V){return V?"rotate("+V+")":""},n.strScale=function(V){return 1!==V?"scale("+V+")":""},n.getTextTransform=function(V){var j=V.noCenter,H=V.textX,oe=V.textY,ce=V.rotate,pe=V.scale;return pe?pe>1&&(pe=1):pe=0,n.strTranslate(V.targetX-pe*(H+(V.anchorX||0)),V.targetY-pe*(oe+(V.anchorY||0)))+n.strScale(pe)+(ce?"rotate("+ce+(j?"":" "+H+" "+oe)+")":"")},n.ensureUniformFontSize=function(V,j){var H=n.extendFlat({},j);return H.size=Math.max(j.size,V._fullLayout.uniformtext.minsize||0),H},n.join2=function(V,j,H){var oe=V.length;return oe>1?V.slice(0,-1).join(j)+H+V[oe-1]:V.join(j)},n.bigFont=function(V){return Math.round(1.2*V)};var J=n.getFirefoxVersion(),se=null!==J&&J<86;n.getPositionFromD3Event=function(){return se?[p.event.layerX,p.event.layerY]:[p.event.offsetX,p.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(v,ae,ie){"use strict";ae.exports=function(p){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(p):"[object Object]"===Object.prototype.toString.call(p)&&Object.getPrototypeOf(p).hasOwnProperty("hasOwnProperty")}},{}],517:[function(v,ae,ie){"use strict";var p=v("./nested_property"),g=/^\w*$/;ae.exports=function(b,y,e,r){var t,o,n;e=e||"name",r=r||"value";var m={};y&&y.length?(n=p(b,y),o=n.get()):o=b,y=y||"";var l={};if(o)for(t=0;t<o.length;t++)l[o[t][e]]=t;var i=g.test(r),f={set:function(u,s){var d=null===s?4:0;if(!o){if(!n||4===d)return;n.set(o=[])}var h=l[u];if(void 0===h){if(4===d)return;d|=3,l[u]=h=o.length}else s!==(i?o[h][r]:p(o[h],r).get())&&(d|=2);var a=o[h]=o[h]||{};return a[e]=u,i?a[r]=s:p(a,r).set(s),null!==s&&(d&=-5),m[h]=m[h]|d,f},get:function(u){if(o){var s=l[u];return void 0===s?void 0:i?o[s][r]:p(o[s],r).get()}},rename:function(u,s){var d=l[u];return void 0===d||(m[d]=1|m[d],l[s]=d,delete l[u],o[d][e]=s),f},remove:function(u){var s=l[u];if(void 0===s)return f;var d=o[s];if(Object.keys(d).length>2)return m[s]=2|m[s],f.set(u,null);if(i){for(t=s;t<o.length;t++)m[t]=3|m[t];for(t=s;t<o.length;t++)l[o[t][e]]--;o.splice(s,1),delete l[u]}else p(d,r).set(null),m[s]=6|m[s];return f},constructUpdate:function(){for(var u,s,d={},h=Object.keys(m),a=0;a<h.length;a++)u=y+"["+(s=h[a])+"]",o[s]?(1&m[s]&&(d[u+"."+e]=o[s][e]),2&m[s]&&(d[u+"."+r]=i?4&m[s]?null:o[s][r]:4&m[s]?null:p(o[s],r).get())):d[u]=null;return d}};return f}},{"./nested_property":523}],518:[function(v,ae,ie){"use strict";var p=v("../registry");ae.exports=function(g,b){for(var y=g._context.locale,e=0;e<2;e++){for(var r=g._context.locales,t=0;t<2;t++){var o=(r[y]||{}).dictionary;if(o){var n=o[b];if(n)return n}r=p.localeRegistry}var m=y.split("-")[0];if(m===y)break;y=m}return b}},{"../registry":647}],519:[function(v,ae,ie){"use strict";var p=v("../plot_api/plot_config").dfltConfig,g=v("./notifier"),b=ae.exports={};b.log=function(){var y;if(p.logging>1){var e=["LOG:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(p.notifyOnLogging>1){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);g(r.join("<br>"),"long")}},b.warn=function(){var y;if(p.logging>0){var e=["WARN:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(p.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);g(r.join("<br>"),"stick")}},b.error=function(){var y;if(p.logging>0){var e=["ERROR:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.error.apply(console,e)}if(p.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);g(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(v,ae,ie){"use strict";var p=v("@plotly/d3");ae.exports=function(g,b,y){var e=g.selectAll("g."+y.replace(/\s/g,".")).data(b,function(t){return t[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",y),e.order();var r=g.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(t){t[0][r]=p.select(this)}),e}},{"@plotly/d3":58}],521:[function(v,ae,ie){"use strict";var p=v("gl-mat4");ie.init2dArray=function(g,b){for(var y=new Array(g),e=0;e<g;e++)y[e]=new Array(b);return y},ie.transposeRagged=function(g){var b,y,e=0,r=g.length;for(b=0;b<r;b++)e=Math.max(e,g[b].length);var t=new Array(e);for(b=0;b<e;b++)for(t[b]=new Array(r),y=0;y<r;y++)t[b][y]=g[y][b];return t},ie.dot=function(g,b){if(!g.length||!b.length||g.length!==b.length)return null;var y,e,r=g.length;if(g[0].length)for(y=new Array(r),e=0;e<r;e++)y[e]=ie.dot(g[e],b);else if(b[0].length){var t=ie.transposeRagged(b);for(y=new Array(t.length),e=0;e<t.length;e++)y[e]=ie.dot(g,t[e])}else for(y=0,e=0;e<r;e++)y+=g[e]*b[e];return y},ie.translationMatrix=function(g,b){return[[1,0,g],[0,1,b],[0,0,1]]},ie.rotationMatrix=function(g){var b=g*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},ie.rotationXYMatrix=function(g,b,y){return ie.dot(ie.dot(ie.translationMatrix(b,y),ie.rotationMatrix(g)),ie.translationMatrix(-b,-y))},ie.apply3DTransform=function(g){return function(){var b=arguments,y=1===arguments.length?b[0]:[b[0],b[1],b[2]||0];return ie.dot(g,[y[0],y[1],y[2],1]).slice(0,3)}},ie.apply2DTransform=function(g){return function(){var b=arguments;3===b.length&&(b=b[0]);var y=1===arguments.length?b[0]:[b[0],b[1]];return ie.dot(g,[y[0],y[1],1]).slice(0,2)}},ie.apply2DTransform2=function(g){var b=ie.apply2DTransform(g);return function(y){return b(y.slice(0,2)).concat(b(y.slice(2,4)))}},ie.convertCssMatrix=function(g){if(g){var b=g.length;if(16===b)return g;if(6===b)return[g[0],g[1],0,0,g[2],g[3],0,0,0,0,1,0,g[4],g[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ie.inverseTransformMatrix=function(g){var b=[];return p.invert(b,g),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":210}],522:[function(v,ae,ie){"use strict";ae.exports={mod:function(p,g){var b=p%g;return b<0?b+g:b},modHalf:function(p,g){return Math.abs(p)>g/2?p-Math.round(p/g)*g:p}}},{}],523:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("./array").isArrayOrTypedArray;function b(m,l){return function(){var i,f,u,s,d,h=m;for(s=0;s<l.length-1;s++){if(-1===(i=l[s])){for(f=!0,u=[],d=0;d<h.length;d++)u[d]=b(h[d],l.slice(s+1))(),u[d]!==u[0]&&(f=!1);return f?u[0]:u}if("number"==typeof i&&!g(h)||"object"!=typeof(h=h[i])||null===h)return}if("object"==typeof h&&null!==h&&null!==(u=h[l[s]]))return u}}ae.exports=function(m,l){if(p(l))l=String(l);else if("string"!=typeof l||"[-1]"===l.substr(l.length-4))throw"bad property string";for(var i,f,u,s=0,d=l.split(".");s<d.length;){if(i=String(d[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])d[s]=i[1];else{if(0!==s)throw"bad property string";d.splice(0,1)}for(f=i[2].substr(1,i[2].length-2).split("]["),u=0;u<f.length;u++)s++,d.splice(s,0,Number(f[u]))}s++}return"object"!=typeof m?{set:function(){throw"bad container"},get:function(){},astr:l,parts:d,obj:m}:{set:r(m,d,l),get:b(m,d),astr:l,parts:d,obj:m}};var y=/(^|\.)args\[/;function e(m,l){return void 0===m||null===m&&!l.match(y)}function r(m,l,i){return function(f){var u,s,d=m,h="",a=[[m,h]],_=e(f,i);for(s=0;s<l.length-1;s++){if("number"==typeof(u=l[s])&&!g(d))throw"array index but container is not an array";if(-1===u){if(_=!o(d,l.slice(s+1),f,i))break;return}if(!n(d,u,l[s+1],_))break;if("object"!=typeof(d=d[u])||null===d)throw"container is not an object";h=t(h,u),a.push([d,h])}if(_){if(s===l.length-1&&(delete d[l[s]],Array.isArray(d)&&+l[s]==d.length-1))for(;d.length&&void 0===d[d.length-1];)d.pop()}else d[l[s]]=f}}function t(m,l){var i=l;return p(l)?i="["+l+"]":m&&(i="."+l),m+i}function o(m,l,i,f){var u,s=g(i),d=!0,h=i,a=f.replace("-1",0),_=!s&&e(i,a),c=l[0];for(u=0;u<m.length;u++)a=f.replace("-1",u),s&&(_=e(h=i[u%i.length],a)),_&&(d=!1),n(m,u,c,_)&&r(m[u],l,f.replace("-1",u))(h);return d}function n(m,l,i,f){if(void 0===m[l]){if(f)return!1;m[l]="number"==typeof i?[]:{}}return!0}},{"./array":497,"fast-isnumeric":190}],524:[function(v,ae,ie){"use strict";ae.exports=function(){}},{}],525:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=[];ae.exports=function(y,e){if(-1===b.indexOf(y)){b.push(y);var r=1e3;g(e)?r=e:"long"===e&&(r=3e3);var t=p.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",!0),t.selectAll(".notifier-note").data(b).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(n){var m=p.select(this);m.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){m.transition().call(o)});for(var l=m.append("p"),i=n.split(/<br\s*\/?>/g),f=0;f<i.length;f++)f&&l.append("br"),l.append("span").text(i[f]);"stick"===e?m.transition().duration(350).style("opacity",1):m.transition().duration(700).style("opacity",1).transition().delay(r).call(o)})}function o(n){n.duration(700).style("opacity",0).each("end",function(m){var l=b.indexOf(m);-1!==l&&b.splice(l,1),p.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(v,ae,ie){"use strict";var p=v("./setcursor"),g="data-savedcursor";ae.exports=function(b,y){var e=b.attr(g);if(y){if(!e){for(var r=(b.attr("class")||"").split(" "),t=0;t<r.length;t++){var o=r[t];0===o.indexOf("cursor-")&&b.attr(g,o.substr(7)).classed(o,!1)}b.attr(g)||b.attr(g,"!!")}p(b,y)}else e&&(b.attr(g,null),"!!"===e?p(b):p(b,e))}},{"./setcursor":536}],527:[function(v,ae,ie){"use strict";var p=v("./matrix").dot,g=v("../constants/numerical").BADNUM,b=ae.exports={};b.tester=function(y){var e,r=y.slice(),t=r[0][0],o=t,n=r[0][1],m=n;for(r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),e=1;e<r.length;e++)t=Math.min(t,r[e][0]),o=Math.max(o,r[e][0]),n=Math.min(n,r[e][1]),m=Math.max(m,r[e][1]);var l,i=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(i=!0,l=function(s){return s[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(i=!0,l=function(s){return s[1]===r[0][1]}));var f=!0,u=r[0];for(e=1;e<r.length;e++)if(u[0]!==r[e][0]||u[1]!==r[e][1]){f=!1;break}return{xmin:t,xmax:o,ymin:n,ymax:m,pts:r,contains:i?function(s,d){var h=s[0],a=s[1];return!(h===g||h<t||h>o||a===g||a<n||a>m||d&&l(s))}:function(s,d){var h=s[0],a=s[1];if(h===g||h<t||h>o||a===g||a<n||a>m)return!1;var _,c,T,x,w,M=r.length,D=r[0][0],C=r[0][1],P=0;for(_=1;_<M;_++)if(c=D,T=C,D=r[_][0],C=r[_][1],!(h<(x=Math.min(c,D))||h>Math.max(c,D)||a>Math.max(T,C)))if(a<Math.min(T,C))h!==x&&P++;else{if(a===(w=D===c?a:T+(h-c)*(C-T)/(D-c)))return 1!==_||!d;a<=w&&h!==x&&P++}return P%2==1},isRect:i,degenerate:f}},b.isSegmentBent=function(y,e,r,t){var o,n,m,l=y[e],i=[y[r][0]-l[0],y[r][1]-l[1]],f=p(i,i),u=Math.sqrt(f),s=[-i[1]/u,i[0]/u];for(o=e+1;o<r;o++)if((m=p(n=[y[o][0]-l[0],y[o][1]-l[1]],i))<0||m>f||Math.abs(p(n,s))>t)return!0;return!1},b.filter=function(y,e){var r=[y[0]],t=0,o=0;function n(m){y.push(m);var l=r.length,i=t;r.splice(o+1);for(var f=i+1;f<y.length;f++)(f===y.length-1||b.isSegmentBent(y,i,f+1,e))&&(r.push(y[f]),r.length<l-2&&(t=f,o=r.length-1),i=f)}return y.length>1&&n(y.pop()),{addPt:n,raw:y,filtered:r}}},{"../constants/numerical":491,"./matrix":521}],528:[function(v,ae,ie){(function(p){(function(){"use strict";var g=v("./show_no_webgl_msg"),b=v("regl");ae.exports=function(y,e,r){var t=y._fullLayout,o=!0;return t._glcanvas.each(function(n){if(n.regl)n.regl.preloadCachedCode(r);else if(!n.pick||t._has("parcoords")){try{n.regl=b({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:y._context.plotGlPixelRatio||p.devicePixelRatio,extensions:e||[],cachedCode:r||{}})}catch{o=!1}n.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(m){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:m,layer:n.key})},!1)}}),o||g({container:t._glcontainer.node()}),o}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("is-mobile");ae.exports=function(b){var y,l;if("string"!=typeof(y=b&&b.hasOwnProperty("userAgent")?b.userAgent:(typeof navigator<"u"&&(l=navigator.userAgent),l&&l.headers&&"string"==typeof l.headers["user-agent"]&&(l=l.headers["user-agent"]),l)))return!0;var e=g({ua:{headers:{"user-agent":y}},tablet:!0,featureDetect:!1});if(!e)for(var r=y.split(" "),t=1;t<r.length;t++)if(-1!==r[t].indexOf("Safari"))for(var o=t-1;o>-1;o--){var n=r[o];if("Version/"===n.substr(0,8)){var m=n.substr(8).split(".")[0];if(p(m)&&(m=+m),m>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(v,ae,ie){"use strict";ae.exports=function(p,g){if(g instanceof RegExp){for(var b=g.toString(),y=0;y<p.length;y++)if(p[y]instanceof RegExp&&p[y].toString()===b)return p;p.push(g)}else!g&&0!==g||-1!==p.indexOf(g)||p.push(g);return p}},{}],531:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plot_api/plot_config").dfltConfig,b={add:function(y,e,r,t,o){var n,m;y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},m=y.undoQueue.index,y.autoplay?y.undoQueue.inSequence||(y.autoplay=!1):(!y.undoQueue.sequence||y.undoQueue.beginSequence?(y.undoQueue.queue.splice(m,y.undoQueue.queue.length-m,n={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),y.undoQueue.index+=1):n=y.undoQueue.queue[m-1],y.undoQueue.beginSequence=!1,n&&(n.undo.calls.unshift(e),n.undo.args.unshift(r),n.redo.calls.push(t),n.redo.args.push(o)),y.undoQueue.queue.length>g.queueLength&&(y.undoQueue.queue.shift(),y.undoQueue.index--))},startSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!0,y.undoQueue.beginSequence=!0},stopSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!1,y.undoQueue.beginSequence=!1},undo:function(y){var e,r;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index<=0)){for(y.undoQueue.index--,e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)b.plotDo(y,e.undo.calls[r],e.undo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1}},redo:function(y){var e,r;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index>=y.undoQueue.queue.length)){for(e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)b.plotDo(y,e.redo.calls[r],e.redo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1,y.undoQueue.index++}},plotDo:function(y,e,r){y.autoplay=!0,r=function(t,o){for(var n,m=[],l=0;l<o.length;l++)m[l]=(n=o[l])===t?n:"object"==typeof n?Array.isArray(n)?p.extendDeep([],n):p.extendDeepAll({},n):n;return m}(y,r),e.apply(null,r)}};ae.exports=b},{"../lib":515,"../plot_api/plot_config":553}],532:[function(v,ae,ie){"use strict";ie.counter=function(p,g,b,y){var e=(g||"")+(b?"":"$"),r=!1===y?"":"^";return"xy"===p?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(r+p+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(v,ae,ie){"use strict";var p=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,g=/^[^\.\[\]]+$/;ae.exports=function(b,y){for(;y;){var e=b.match(p);if(e)b=e[1];else{if(!b.match(g))throw new Error("bad relativeAttr call:"+[b,y]);b=""}if("^"!==y.charAt(0))break;y=y.slice(1)}return b&&"["!==y.charAt(0)?b+"."+y:b+y}},{}],534:[function(v,ae,ie){"use strict";var p=v("./array").isArrayOrTypedArray,g=v("./is_plain_object");ae.exports=function b(y,e){for(var r in e){var t=e[r],o=y[r];if(o!==t)if("_"===r.charAt(0)||"function"==typeof t){if(r in y)continue;y[r]=t}else if(p(t)&&p(o)&&g(t[0])){if("customdata"===r||"ids"===r)continue;for(var n=Math.min(t.length,o.length),m=0;m<n;m++)o[m]!==t[m]&&g(t[m])&&g(o[m])&&b(o[m],t[m])}else g(t)&&g(o)&&(b(o,t),Object.keys(o).length||delete y[r])}}},{"./array":497,"./is_plain_object":516}],535:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("./loggers"),b=v("./identity"),y=v("../constants/numerical").BADNUM;function e(n,m){return n<m}function r(n,m){return n<=m}function t(n,m){return n>m}function o(n,m){return n>=m}ie.findBin=function(n,m,l){if(p(m.start))return l?Math.ceil((n-m.start)/m.size-1e-9)-1:Math.floor((n-m.start)/m.size+1e-9);var i,f,u=0,s=m.length,d=0,h=s>1?(m[s-1]-m[0])/(s-1):1;for(f=h>=0?l?e:r:l?o:t,n+=1e-9*h*(l?-1:1)*(h>=0?1:-1);u<s&&d++<100;)f(m[i=Math.floor((u+s)/2)],n)?u=i+1:s=i;return d>90&&g.log("Long binary search..."),u-1},ie.sorterAsc=function(n,m){return n-m},ie.sorterDes=function(n,m){return m-n},ie.distinctVals=function(n){var m,l=n.slice();for(l.sort(ie.sorterAsc),m=l.length-1;m>-1&&l[m]===y;m--);for(var i,f=l[m]-l[0]||1,u=f/(m||1)/1e4,s=[],d=0;d<=m;d++){var h=l[d],a=h-i;void 0===i?(s.push(h),i=h):a>u&&(f=Math.min(f,a),s.push(h),i=h)}return{vals:s,minDiff:f}},ie.roundUp=function(n,m,l){for(var i,f=0,u=m.length-1,s=0,d=l?0:1,h=l?1:0,a=l?Math.ceil:Math.floor;f<u&&s++<100;)m[i=a((f+u)/2)]<=n?f=i+d:u=i-h;return m[f]},ie.sort=function(n,m){for(var l=0,i=0,f=1;f<n.length;f++){var u=m(n[f],n[f-1]);if(u<0?l=1:u>0&&(i=1),l&&i)return n.sort(m)}return i?n:n.reverse()},ie.findIndexOfMin=function(n,m){m=m||b;for(var l,i=1/0,f=0;f<n.length;f++){var u=m(n[f]);u<i&&(i=u,l=f)}return l}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(v,ae,ie){"use strict";ae.exports=function(p,g){(p.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&p.classed(b,!1)}),g&&p.classed("cursor-"+g,!0)}},{}],537:[function(v,ae,ie){"use strict";var p=v("../components/color"),g=function(){};ae.exports=function(b){for(var y in b)"function"==typeof b[y]&&(b[y]=g);b.destroy=function(){b.container.parentNode.removeChild(b.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=p.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=p.lightLine,e.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",e.appendChild(r),b.container.appendChild(e),b.container.style.background="#FFFFFF",b.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(v,ae,ie){"use strict";ae.exports=function(p){return Object.keys(p).sort()}},{}],539:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("./array").isArrayOrTypedArray;ie.aggNums=function(b,y,e,r){var t,o;if((!r||r>e.length)&&(r=e.length),p(y)||(y=!1),g(e[0])){for(o=new Array(r),t=0;t<r;t++)o[t]=ie.aggNums(b,y,e[t]);e=o}for(t=0;t<r;t++)p(y)?p(e[t])&&(y=b(+y,+e[t])):y=e[t];return y},ie.len=function(b){return ie.aggNums(function(y){return y+1},0,b)},ie.mean=function(b,y){return y||(y=ie.len(b)),ie.aggNums(function(e,r){return e+r},0,b)/y},ie.midRange=function(b){if(void 0!==b&&0!==b.length)return(ie.aggNums(Math.max,null,b)+ie.aggNums(Math.min,null,b))/2},ie.variance=function(b,y,e){return y||(y=ie.len(b)),p(e)||(e=ie.mean(b,y)),ie.aggNums(function(r,t){return r+Math.pow(t-e,2)},0,b)/y},ie.stdev=function(b,y,e){return Math.sqrt(ie.variance(b,y,e))},ie.median=function(b){var y=b.slice().sort();return ie.interp(y,.5)},ie.interp=function(b,y){if(!p(y))throw"n should be a finite number";if((y=y*b.length-.5)<0)return b[0];if(y>b.length-1)return b[b.length-1];var e=y%1;return e*b[Math.ceil(y)]+(1-e)*b[Math.floor(y)]}},{"./array":497,"fast-isnumeric":190}],540:[function(v,ae,ie){"use strict";var p=v("color-normalize");ae.exports=function(g){return g?p(g):[0,0,0,1]}},{"color-normalize":89}],541:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../lib"),b=g.strTranslate,y=v("../constants/xmlns_namespaces"),e=v("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ie.convertToTspans=function(S,E,N){var z=S.text(),q=!S.attr("data-notex")&&E&&E._context.typesetMath&&typeof MathJax<"u"&&z.match(r),G=p.select(S.node().parentNode);if(!G.empty()){var K=S.attr("class")?S.attr("class").split(" ")[0]:"text";return G.selectAll("svg."+(K+="-math")).remove(),G.selectAll("g."+K+"-group").remove(),S.style("display",null).attr({"data-unformatted":z,"data-math":"N"}),q?(E&&E._promises||[]).push(new Promise(function(X){S.style("display","none");var J=parseInt(S.node().style.fontSize,10);!function(V,j,H){var oe,U,te,ee,le=parseInt((MathJax.version||"").split(".")[0]);if(2===le||3===le){var ce=function(){var de="math-output-"+g.randstr({},64),be=(ee=p.select("body").append("div").attr({id:de}).style({visibility:"hidden",position:"absolute","font-size":j.fontSize+"px"}).text(V.replace(t,"\\lt ").replace(o,"\\gt "))).node();return 2===le?MathJax.Hub.Typeset(be):MathJax.typeset([be])},pe=function(){var de=ee.select(2===le?".MathJax_SVG":".MathJax"),be=!de.empty()&&ee.select("svg").node();if(be){var he,xe=be.getBoundingClientRect();he=2===le?p.select("body").select("#MathJax_SVG_glyphs"):de.select("defs"),H(de,he,xe)}else g.log("There was an error in the tex syntax.",V),H();ee.remove()};2===le?MathJax.Hub.Queue(function(){return U=g.extendDeepAll({},MathJax.Hub.config),te=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:n},displayAlign:"left"})},function(){if("SVG"!==(oe=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ce,pe,function(){if("SVG"!==oe)return MathJax.Hub.setRenderer(oe)},function(){return void 0!==te&&(MathJax.Hub.processSectionDelay=te),MathJax.Hub.Config(U)}):3===le&&(U=g.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=n,"svg"!==(oe=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ce(),pe(),"svg"!==oe&&(MathJax.config.startup.output=oe),MathJax.config=U}))}else g.warn("No MathJax version:",MathJax.version)}(q[2],{fontSize:J},function(V,j,H){G.selectAll("svg."+K).remove(),G.selectAll("g."+K+"-group").remove();var oe=V&&V.select("svg");if(!oe||!oe.node())return ne(),void X();var U=G.append("g").classed(K+"-group",!0).attr({"pointer-events":"none","data-unformatted":z,"data-math":"Y"});U.node().appendChild(oe.node()),j&&j.node()&&oe.node().insertBefore(j.node().cloneNode(!0),oe.node().firstChild);var te=H.width,ee=H.height;oe.attr({class:K,height:ee,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var le=S.node().style.fill||"black",ce=oe.select("g");ce.attr({fill:le,stroke:le});var pe=ce.node().getBoundingClientRect(),de=pe.width,be=pe.height;(de>te||be>ee)&&(oe.style("overflow","hidden"),de=(pe=oe.node().getBoundingClientRect()).width,be=pe.height);var he=+S.attr("x"),xe=+S.attr("y"),De=-(J||S.node().getBoundingClientRect().height)/4;if("y"===K[0])U.attr({transform:"rotate("+[-90,he,xe]+")"+b(-de/2,De-be/2)});else if("l"===K[0])xe=De-be/2;else if("a"===K[0]&&0!==K.indexOf("atitle"))he=0,xe=De;else{var Se=S.attr("text-anchor");he-=de*("middle"===Se?.5:"end"===Se?1:0),xe=xe+De-be/2}oe.attr({x:he,y:xe}),N&&N.call(S,U),X(U)})})):ne(),S}function ne(){G.empty()||(K=S.attr("class")+"-math",G.select("svg."+K).remove()),S.text("").style("white-space","pre"),function(X,J){J=J.replace(u," ");var se,V=!1,j=[],H=-1;function oe(){H++;var ve=document.createElementNS(y.svg,"tspan");p.select(ve).attr({class:"line",dy:H*e+"em"}),X.appendChild(ve),se=ve;var Te=j;if(j=[{node:ve}],Te.length>1)for(var Le=1;Le<Te.length;Le++)U(Te[Le])}function U(ve){var Te,Le=ve.type,Oe={};if("a"===Le){Te="a";var Ne=ve.target,Be=ve.href,He=ve.popup;Be&&(Oe={"xlink:xlink:show":"_blank"===Ne||"_"!==Ne.charAt(0)?"new":"replace",target:Ne,"xlink:xlink:href":Be},He&&(Oe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else Te="tspan";ve.style&&(Oe.style=ve.style);var Ve=document.createElementNS(y.svg,Te);if("sup"===Le||"sub"===Le){te(se,"\u200b"),se.appendChild(Ve);var it=document.createElementNS(y.svg,"tspan");te(it,"\u200b"),p.select(it).attr("dy",i[Le]),Oe.dy=l[Le],se.appendChild(Ve),se.appendChild(it)}else se.appendChild(Ve);p.select(Ve).attr(Oe),se=ve.node=Ve,j.push(ve)}function te(ve,Te){ve.appendChild(document.createTextNode(Te))}function ee(ve){if(1!==j.length){var Te=j.pop();ve!==Te.type&&g.log("Start tag <"+Te.type+"> doesnt match end tag <"+ve+">. Pretending it did match.",J),se=j[j.length-1].node}else g.log("Ignoring unexpected end tag </"+ve+">.",J)}h.test(J)?oe():(se=X,j=[{node:X}]);for(var le=J.split(s),ce=0;ce<le.length;ce++){var pe=le[ce],de=pe.match(d),be=de&&de[2].toLowerCase(),he=m[be];if("br"===be)oe();else if(void 0===he)te(se,C(pe));else if(de[1])ee(be);else{var xe=de[4],De={type:be},Se=x(xe,a);if(Se?(Se=Se.replace(w,"$1 fill:"),he&&(Se+=";"+he)):he&&(Se=he),Se&&(De.style=Se),"a"===be){V=!0;var ke=x(xe,_);if(ke){var Fe=P(ke);Fe&&(De.href=Fe,De.target=x(xe,c)||"_blank",De.popup=x(xe,T))}}U(De)}}return V}(S.node(),z)&&S.style("pointer-events","all"),ie.positionText(S),N&&N.call(S)}};var t=/(<|&lt;|&#60;)/g,o=/(>|&gt;|&#62;)/g,n=[["$","$"],["\\(","\\)"]],m={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},l={sub:"0.3em",sup:"-0.6em"},i={sub:"-0.21em",sup:"0.42em"},f=["http:","https:","mailto:","",void 0,":"],u=ie.NEWLINES=/(\r\n?|\n)/g,s=/(<[^<>]*>)/,d=/<(\/?)([^ >]*)(\s+(.*))?>/i,h=/<br(\s+.*)?>/i;ie.BR_TAG_ALL=/<br(\s+.*)?>/gi;var a=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,c=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function x(S,E){if(!S)return null;var N=S.match(E),z=N&&(N[3]||N[4]);return z&&C(z)}var w=/(^|;)\s*color:/;ie.plainText=function(S,E){for(var N=void 0!==(E=E||{}).len&&-1!==E.len?E.len:1/0,z=void 0!==E.allowedTags?E.allowedTags:["br"],G=S.split(s),K=[],ne="",X=0,J=0;J<G.length;J++){var se=G[J],V=se.match(d),j=V&&V[2].toLowerCase();if(j)-1!==z.indexOf(j)&&(K.push(se),ne=j);else{var H=se.length;if(X+H<N)K.push(se),X+=H;else if(X<N){var oe=N-X;ne&&("br"!==ne||oe<=3||H<=3)&&K.pop(),K.push(N>3?se.substr(0,oe-3)+"...":se.substr(0,oe));break}ne=""}}return K.join("")};var M={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},D=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(S){return S.replace(D,function(E,N){return("#"===N.charAt(0)?function(z){if(!(z>1114111)){var q=String.fromCodePoint;if(q)return q(z);var G=String.fromCharCode;return z<=65535?G(z):G(55232+(z>>10),z%1024+56320)}}("x"===N.charAt(1)?parseInt(N.substr(2),16):parseInt(N.substr(1),10)):M[N])||E})}function P(S){var E=encodeURI(decodeURI(S)),N=document.createElement("a"),z=document.createElement("a");N.href=S,z.href=E;var G=z.protocol;return-1!==f.indexOf(N.protocol)&&-1!==f.indexOf(G)?E:""}function L(S,E,N){var z,q,G,K=N.horizontalAlign,ne=N.verticalAlign||"top",X=S.node().getBoundingClientRect(),J=E.node().getBoundingClientRect();return q="bottom"===ne?function(){return X.bottom-z.height}:"middle"===ne?function(){return X.top+(X.height-z.height)/2}:function(){return X.top},G="right"===K?function(){return X.right-z.width}:"center"===K?function(){return X.left+(X.width-z.width)/2}:function(){return X.left},function(){z=this.node().getBoundingClientRect();var se=G()-J.left,V=q()-J.top,j=N.gd||{};if(N.gd){j._fullLayout._calcInverseTransform(j);var H=g.apply3DTransform(j._fullLayout._invTransform)(se,V);se=H[0],V=H[1]}return this.style({top:V+"px",left:se+"px","z-index":1e3}),this}}ie.convertEntities=C,ie.sanitizeHTML=function(S){S=S.replace(u," ");for(var E=document.createElement("p"),N=E,z=[],q=S.split(s),G=0;G<q.length;G++){var K=q[G],ne=K.match(d),X=ne&&ne[2].toLowerCase();if(X in m)if(ne[1])z.length&&(N=z.pop());else{var J=ne[4],se=x(J,a),V=se?{style:se}:{};if("a"===X){var j=x(J,_);if(j){var H=P(j);if(H){V.href=H;var oe=x(J,c);oe&&(V.target=oe)}}}var U=document.createElement(X);N.appendChild(U),p.select(U).attr(V),N=U,z.push(U)}else N.appendChild(document.createTextNode(C(K)))}return E.innerHTML},ie.lineCount=function(S){return S.selectAll("tspan.line").size()||1},ie.positionText=function(S,E,N){return S.each(function(){var z=p.select(this);function q(ne,X){return void 0===X?null===(X=z.attr(ne))&&(z.attr(ne,0),X=0):z.attr(ne,X),X}var G=q("x",E),K=q("y",N);"text"===this.nodeName&&z.selectAll("tspan.line").attr({x:G,y:K})})},ie.makeTextShadow=function(S){var E="1px ",N="1px ",z="1px ";return E+N+z+S+", -"+E+"-"+N+z+S+", "+E+"-"+N+z+S+", -"+E+N+z+S},ie.makeEditable=function(S,E){var N=E.gd,z=E.delegate,q=p.dispatch("edit","input","cancel"),G=z||S;if(S.style({"pointer-events":z?"none":"all"}),1!==S.size())throw new Error("boo");function K(){var se,V,j,H,oe;se=p.select(N).select(".svg-container"),V=se.append("div"),j=S.node().style,H=parseFloat(j.fontSize||12),void 0===(oe=E.text)&&(oe=S.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":j.fontFamily||"Arial","font-size":H,color:E.fill||j.fill||"black",opacity:1,"background-color":E.background||"transparent",outline:"#ffffff33 1px solid",margin:[-H/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(oe).call(L(S,se,E)).on("blur",function(){N._editing=!1,S.text(this.textContent).style({opacity:1});var U,te=p.select(this).attr("class");(U=te?"."+te.split(" ")[0]+"-math-group":"[class*=-math-group]")&&p.select(S.node().parentNode).select(U).style({opacity:0});var ee=this.textContent;p.select(this).transition().duration(0).remove(),p.select(document).on("mouseup",null),q.edit.call(S,ee)}).on("focus",function(){var U=this;N._editing=!0,p.select(document).on("mouseup",function(){if(p.event.target===U)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){27===p.event.which?(N._editing=!1,S.style({opacity:1}),p.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),q.cancel.call(S,this.textContent)):(q.input.call(S,this.textContent),p.select(this).call(L(S,se,E)))}).on("keydown",function(){13===p.event.which&&this.blur()}).call(ne),S.style({opacity:0});var X,J=G.attr("class");(X=J?"."+J.split(" ")[0]+"-math-group":"[class*=-math-group]")&&p.select(S.node().parentNode).select(X).style({opacity:0})}function ne(X){var J=X.node(),se=document.createRange();se.selectNodeContents(J);var V=window.getSelection();V.removeAllRanges(),V.addRange(se),J.focus()}return E.immediate?K():G.on("click",K),p.rebind(S,q,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(v,ae,ie){"use strict";var p={};function g(b){b&&null!==b.timer&&(clearTimeout(b.timer),b.timer=null)}ie.throttle=function(b,y,e){var r=p[b],t=Date.now();if(!r){for(var o in p)p[o].ts<t-6e4&&delete p[o];r=p[b]={ts:0,timer:null}}function n(){e(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}g(r),t>r.ts+y?n():r.timer=setTimeout(function(){n(),r.timer=null},y)},ie.done=function(b){var y=p[b];return y&&y.timer?new Promise(function(e){var r=y.onDone;y.onDone=function(){r&&r(),e(),y.onDone=null}}):Promise.resolve()},ie.clear=function(b){if(b)g(p[b]),delete p[b];else for(var y in p)ie.clear(y)}},{}],543:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric");ae.exports=function(g,b){if(g>0)return Math.log(g)/Math.LN10;var y=Math.log(Math.min(b[0],b[1]))/Math.LN10;return p(y)||(y=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),y}},{"fast-isnumeric":190}],544:[function(v,ae,ie){"use strict";var p=ae.exports={},g=v("../plots/geo/constants").locationmodeToLayer,b=v("topojson-client").feature;p.getTopojsonName=function(y){return[y.scope.replace(/ /g,"-"),"_",y.resolution.toString(),"m"].join("")},p.getTopojsonPath=function(y,e){return y+e+".json"},p.getTopojsonFeatures=function(y,e){return b(e,e.objects[g[y.locationmode]]).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(v,ae,ie){"use strict";ae.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(v,ae,ie){"use strict";ae.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(v,ae,ie){"use strict";var p=v("../registry");ae.exports=function(g){for(var b,y,e=p.layoutArrayContainers,r=p.layoutArrayRegexes,t=g.split("[")[0],o=0;o<r.length;o++)if((y=g.match(r[o]))&&0===y.index){b=y[0];break}if(b||(b=e[e.indexOf(t)]),!b)return!1;var n=g.substr(b.length);return n?!!(y=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:b,index:Number(y[1]),property:y[3]||""}:{array:b,index:"",property:""}}},{"../registry":647}],548:[function(v,ae,ie){"use strict";var p=v("../lib"),g=p.extendFlat,b=p.isPlainObject,y={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},r=y.flags.slice().concat(["fullReplot"]),t=e.flags.slice().concat("layoutReplot");function o(l){for(var i={},f=0;f<l.length;f++)i[l[f]]=!1;return i}function n(l,i,f){var u=g({},l);for(var s in u){var d=u[s];b(d)&&(u[s]=m(d,i,0,s))}return"from-root"===f&&(u.editType=i),u}function m(l,i,f,u){if(l.valType){var s=g({},l);if(s.editType=i,Array.isArray(l.items)){s.items=new Array(l.items.length);for(var d=0;d<l.items.length;d++)s.items[d]=m(l.items[d],i)}return s}return n(l,i,"_"===u.charAt(0)?"nested":"from-root")}ae.exports={traces:y,layout:e,traceFlags:function(){return o(r)},layoutFlags:function(){return o(t)},update:function(l,i){var f=i.editType;if(f&&"none"!==f)for(var u=f.split("+"),s=0;s<u.length;s++)l[u[s]]=!0},overrideAll:n}},{"../lib":515}],549:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("gl-mat4/fromQuat"),b=v("../registry"),y=v("../lib"),e=v("../plots/plots"),r=v("../plots/cartesian/axis_ids"),t=v("../components/color"),o=r.cleanId,n=r.getFromTrace,m=b.traceIs;function l(c,T){var x=c[T],w=T.charAt(0);x&&"paper"!==x&&(c[T]=o(x,w,!0))}function i(c){function T(x,w){c[x]&&(!c.title||!c.title[w])&&(c.title||(c.title={}),c.title[w]=c[x],delete c[x])}c&&("string"!=typeof c.title&&"number"!=typeof c.title||(c.title={text:c.title}),T("titlefont","font"),T("titleposition","position"),T("titleside","side"),T("titleoffset","offset"))}function f(c){if(!y.isPlainObject(c))return!1;var T=c.name;return delete c.name,delete c.showlegend,("string"==typeof T||"number"==typeof T)&&String(T)}function u(c,T,x,w){if(x&&!w)return c;if(w&&!x||!c.trim())return T;if(!T.trim())return c;var M,D=Math.min(c.length,T.length);for(M=0;M<D&&c.charAt(M)===T.charAt(M);M++);return c.substr(0,M).trim()}function s(c){var T="middle",x="center";return"string"==typeof c&&(-1!==c.indexOf("top")?T="top":-1!==c.indexOf("bottom")&&(T="bottom"),-1!==c.indexOf("left")?x="left":-1!==c.indexOf("right")&&(x="right")),T+" "+x}function d(c,T){return T in c&&"object"==typeof c[T]&&0===Object.keys(c[T]).length}ie.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&y.log("Clearing previous rejected promises from queue."),c._promises=[]},ie.cleanLayout=function(c){var T,x;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var w=(e.subplotsRegistry.cartesian||{}).attrRegex,M=(e.subplotsRegistry.polar||{}).attrRegex,D=(e.subplotsRegistry.ternary||{}).attrRegex,C=(e.subplotsRegistry.gl3d||{}).attrRegex,P=Object.keys(c);for(T=0;T<P.length;T++){var L=P[T];if(w&&w.test(L)){var S=c[L];S.anchor&&"free"!==S.anchor&&(S.anchor=o(S.anchor)),S.overlaying&&(S.overlaying=o(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":!1===S.isdate&&!1===S.islog&&(S.type="linear")),"withzero"!==S.autorange&&"tozero"!==S.autorange||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,d(S,"domain")&&delete S.domain,void 0!==S.autotick&&(void 0===S.tickmode&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),i(S)}else if(M&&M.test(L))i(c[L].radialaxis);else if(D&&D.test(L)){var E=c[L];i(E.aaxis),i(E.baxis),i(E.caxis)}else if(C&&C.test(L)){var N=c[L],z=N.cameraposition;if(Array.isArray(z)&&4===z[0].length){var G=z[1],K=z[2],ne=g([],z[0]),X=[];for(x=0;x<3;++x)X[x]=G[x]+K*ne[2+4*x];N.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:G[0],y:G[1],z:G[2]},up:{x:0,y:0,z:1}},delete N.cameraposition}i(N.xaxis),i(N.yaxis),i(N.zaxis)}}var J=Array.isArray(c.annotations)?c.annotations.length:0;for(T=0;T<J;T++){var se=c.annotations[T];y.isPlainObject(se)&&(se.ref&&("paper"===se.ref?(se.xref="paper",se.yref="paper"):"data"===se.ref&&(se.xref="x",se.yref="y"),delete se.ref),l(se,"xref"),l(se,"yref"))}var V=Array.isArray(c.shapes)?c.shapes.length:0;for(T=0;T<V;T++){var j=c.shapes[T];y.isPlainObject(j)&&(l(j,"xref"),l(j,"yref"))}var H=Array.isArray(c.images)?c.images.length:0;for(T=0;T<H;T++){var oe=c.images[T];y.isPlainObject(oe)&&(l(oe,"xref"),l(oe,"yref"))}var U=c.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),i(c),"rotate"===c.dragmode&&(c.dragmode="orbit"),t.clean(c),c.template&&c.template.layout&&ie.cleanLayout(c.template.layout),c},ie.cleanData=function(c){for(var T=0;T<c.length;T++){var x,w=c[T];if("histogramy"===w.type&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var M=t.defaults,D=w.error_y.color||(m(w,"bar")?t.defaultLine:M[T%M.length]);w.error_y.color=t.addOpacity(t.rgb(D),t.opacity(D)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&("h"!==w.bardir||!m(w,"bar")&&"histogram"!==w.type.substr(0,9)||(w.orientation="h",ie.swapXYData(w)),delete w.bardir),"histogramy"===w.type&&ie.swapXYData(w),"histogramx"!==w.type&&"histogramy"!==w.type||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=o(w.xaxis,"x")),w.yaxis&&(w.yaxis=o(w.yaxis,"y")),m(w,"gl3d")&&w.scene&&(w.scene=e.subplotsRegistry.gl3d.cleanId(w.scene)),!m(w,"pie-like")&&!m(w,"bar-like"))if(Array.isArray(w.textposition))for(x=0;x<w.textposition.length;x++)w.textposition[x]=s(w.textposition[x]);else w.textposition&&(w.textposition=s(w.textposition));var C=b.getModule(w);if(C&&C.colorbar){var P=C.colorbar.container,L=P?w[P]:w;L&&L.colorscale&&("YIGnBu"===L.colorscale&&(L.colorscale="YlGnBu"),"YIOrRd"===L.colorscale&&(L.colorscale="YlOrRd"))}if("surface"===w.type&&y.isPlainObject(w.contours)){var S=["x","y","z"];for(x=0;x<S.length;x++){var E=w.contours[S[x]];y.isPlainObject(E)&&(E.highlightColor&&(E.highlightcolor=E.highlightColor,delete E.highlightColor),E.highlightWidth&&(E.highlightwidth=E.highlightWidth,delete E.highlightWidth))}}if("candlestick"===w.type||"ohlc"===w.type){var N=!1!==(w.increasing||{}).showlegend,z=!1!==(w.decreasing||{}).showlegend,q=f(w.increasing),G=f(w.decreasing);if(!1!==q&&!1!==G){var K=u(q,G,N,z);K&&(w.name=K)}else!q&&!G||w.name||(w.name=q||G)}if(Array.isArray(w.transforms)){var ne=w.transforms;for(x=0;x<ne.length;x++){var X=ne[x];if(y.isPlainObject(X))switch(X.type){case"filter":X.filtersrc&&(X.target=X.filtersrc,delete X.filtersrc),X.calendar&&(X.valuecalendar||(X.valuecalendar=X.calendar),delete X.calendar);break;case"groupby":if(X.styles=X.styles||X.style,X.styles&&!Array.isArray(X.styles)){var J=X.styles,se=Object.keys(J);X.styles=[];for(var V=0;V<se.length;V++)X.styles.push({target:se[V],value:J[se[V]]})}}}}d(w,"line")&&delete w.line,"marker"in w&&(d(w.marker,"line")&&delete w.marker.line,d(w,"marker")&&delete w.marker),t.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),i(w),w.colorbar&&i(w.colorbar),w.marker&&w.marker.colorbar&&i(w.marker.colorbar),w.line&&w.line.colorbar&&i(w.line.colorbar),w.aaxis&&i(w.aaxis),w.baxis&&i(w.baxis)}},ie.swapXYData=function(c){var T;if(y.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var x=c.error_y,w="copy_ystyle"in x?x.copy_ystyle:!(x.color||x.thickness||x.width);y.swapAttrs(c,["error_?.copy_ystyle"]),w&&y.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof c.hoverinfo){var M=c.hoverinfo.split("+");for(T=0;T<M.length;T++)"x"===M[T]?M[T]="y":"y"===M[T]&&(M[T]="x");c.hoverinfo=M.join("+")}},ie.coerceTraceIndices=function(c,T){if(p(T))return[T];if(!Array.isArray(T)||!T.length)return c.data.map(function(M,D){return D});if(Array.isArray(T)){for(var x=[],w=0;w<T.length;w++)y.isIndex(T[w],c.data.length)?x.push(T[w]):y.warn("trace index (",T[w],") is not a number or is out of bounds");return x}return T},ie.manageArrayContainers=function(c,T,x){var w=c.obj,M=c.parts,D=M.length,C=M[D-1],P=p(C);if(P&&null===T){var L=M.slice(0,D-1).join(".");y.nestedProperty(w,L).get().splice(C,1)}else P&&void 0===c.get()&&void 0===c.get()&&(x[c.astr]=null),c.set(T)};var h=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(c){var T=c.search(h);if(T>0)return c.substr(0,T)}ie.hasParent=function(c,T){for(var x=a(T);x;){if(x in c)return!0;x=a(x)}return!1};var _=["x","y","z"];ie.clearAxisTypes=function(c,T,x){for(var w=0;w<T.length;w++)for(var M=c._fullData[w],D=0;D<3;D++){var C=n(c,M,_[D]);if(C&&"log"!==C.type){var P=C._name,L=C._id.substr(1);if("scene"===L.substr(0,5)){if(void 0!==x[L])continue;P=L+"."+P}var S=P+".type";void 0===x[P]&&void 0===x[S]&&y.nestedProperty(c.layout,S).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(v,ae,ie){"use strict";var p=v("./plot_api");ie._doPlot=p._doPlot,ie.newPlot=p.newPlot,ie.restyle=p.restyle,ie.relayout=p.relayout,ie.redraw=p.redraw,ie.update=p.update,ie._guiRestyle=p._guiRestyle,ie._guiRelayout=p._guiRelayout,ie._guiUpdate=p._guiUpdate,ie._storeDirectGUIEdit=p._storeDirectGUIEdit,ie.react=p.react,ie.extendTraces=p.extendTraces,ie.prependTraces=p.prependTraces,ie.addTraces=p.addTraces,ie.deleteTraces=p.deleteTraces,ie.moveTraces=p.moveTraces,ie.purge=p.purge,ie.addFrames=p.addFrames,ie.deleteFrames=p.deleteFrames,ie.animate=p.animate,ie.setPlotConfig=p.setPlotConfig,ie.toImage=v("./to_image"),ie.validate=v("./validate"),ie.downloadImage=v("../snapshot/download");var g=v("./template_api");ie.makeTemplate=g.makeTemplate,ie.validateTemplate=g.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(v,ae,ie){"use strict";var p=v("../lib/is_plain_object"),g=v("../lib/noop"),b=v("../lib/loggers"),y=v("../lib/search").sorterAsc,e=v("../registry");ie.containerArrayMatch=v("./container_array_match");var r=ie.isAddVal=function(o){return"add"===o||p(o)},t=ie.isRemoveVal=function(o){return null===o||"remove"===o};ie.applyContainerArrayChanges=function(o,n,m,l,i){var f=n.astr,u=e.getComponentMethod(f,"supplyLayoutDefaults"),s=e.getComponentMethod(f,"draw"),d=e.getComponentMethod(f,"drawOne"),h=l.replot||l.recalc||u===g||s===g,a=o.layout,_=o._fullLayout;if(m[""]){Object.keys(m).length>1&&b.warn("Full array edits are incompatible with other edits",f);var c=m[""][""];if(t(c))n.set(null);else{if(!Array.isArray(c))return b.warn("Unrecognized full array edit value",f,c),!0;n.set(c)}return!h&&(u(a,_),s(o),!0)}var T,x,w,M,D,C,P,S=Object.keys(m).map(Number).sort(y),E=n.get(),N=E||[],z=i(_,f).get(),q=[],G=-1,K=N.length;for(T=0;T<S.length;T++)if(M=m[w=S[T]],D=Object.keys(M),P=r(C=M[""]),w<0||w>N.length-(P?0:1))b.warn("index out of range",f,w);else if(void 0!==C)D.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",f,w),t(C)?q.push(w):P?("add"===C&&(C={}),N.splice(w,0,C),z&&z.splice(w,0,{})):b.warn("Unrecognized full object edit value",f,w,C),-1===G&&(G=w);else for(x=0;x<D.length;x++)i(N[w],D[x],f+"["+w+"].").set(M[D[x]]);for(T=q.length-1;T>=0;T--)N.splice(q[T],1),z&&z.splice(q[T],1);if(N.length?E||n.set(N):n.set(null),h)return!1;if(u(a,_),d!==g){var ne;if(-1===G)ne=S;else{for(K=Math.max(N.length,K),ne=[],T=0;T<S.length&&!((w=S[T])>=G);T++)ne.push(w);for(T=G;T<K;T++)ne.push(T)}for(T=0;T<ne.length;T++)d(o,ne[T])}else s(o);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("has-hover"),y=v("../lib"),e=y.nestedProperty,r=v("../lib/events"),t=v("../lib/queue"),o=v("../registry"),n=v("./plot_schema"),m=v("../plots/plots"),l=v("../plots/cartesian/axes"),i=v("../components/drawing"),f=v("../components/color"),u=v("../plots/cartesian/graph_interact").initInteractions,s=v("../constants/xmlns_namespaces"),d=v("../components/selections").clearOutline,h=v("./plot_config").dfltConfig,a=v("./manage_arrays"),_=v("./helpers"),c=v("./subroutines"),T=v("./edit_types"),x=v("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function M(ve){var Te=ve._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:ve.emit("plotly_afterplot")}function D(ve,Te){try{ve._fullLayout._paper.style("background",Te)}catch(Le){y.error(Le)}}function C(ve,Te){D(ve,f.combine(Te,"white"))}function P(ve,Te){if(!ve._context){ve._context=y.extendDeep({},h);var Le=p.select("base");ve._context._baseUrl=Le.size()&&Le.attr("href")?window.location.href.split("#")[0]:""}var Oe,Ne,Be,He=ve._context;if(Te){for(Ne=Object.keys(Te),Oe=0;Oe<Ne.length;Oe++)"editable"!==(Be=Ne[Oe])&&"edits"!==Be&&Be in He&&(He[Be]="setBackground"===Be&&"opaque"===Te[Be]?C:Te[Be]);Te.plot3dPixelRatio&&!He.plotGlPixelRatio&&(He.plotGlPixelRatio=He.plot3dPixelRatio);var Ve=Te.editable;if(void 0!==Ve)for(He.editable=Ve,Ne=Object.keys(He.edits),Oe=0;Oe<Ne.length;Oe++)He.edits[Ne[Oe]]=Ve;if(Te.edits)for(Ne=Object.keys(Te.edits),Oe=0;Oe<Ne.length;Oe++)(Be=Ne[Oe])in He.edits&&(He.edits[Be]=Te.edits[Be]);He._exportedPlot=Te._exportedPlot}He.staticPlot&&(He.editable=!1,He.edits={},He.autosizable=!1,He.scrollZoom=!1,He.doubleClick=!1,He.showTips=!1,He.showLink=!1,He.displayModeBar=!1),"hover"!==He.displayModeBar||b||(He.displayModeBar=!0),"transparent"!==He.setBackground&&"function"==typeof He.setBackground||(He.setBackground=D),He._hasZeroHeight=He._hasZeroHeight||0===ve.clientHeight,He._hasZeroWidth=He._hasZeroWidth||0===ve.clientWidth;var it=He.scrollZoom,ze=He._scrollZoom={};if(!0===it)ze.cartesian=1,ze.gl3d=1,ze.geo=1,ze.mapbox=1;else if("string"==typeof it){var je=it.split("+");for(Oe=0;Oe<je.length;Oe++)ze[je[Oe]]=1}else!1!==it&&(ze.gl3d=1,ze.geo=1,ze.mapbox=1)}function L(ve,Te){var Le,Oe,Ne=Te+1,Be=[];for(Le=0;Le<ve.length;Le++)(Oe=ve[Le])<0?Be.push(Ne+Oe):Be.push(Oe);return Be}function S(ve,Te,Le){var Oe,Ne;for(Oe=0;Oe<Te.length;Oe++){if((Ne=Te[Oe])!==parseInt(Ne,10))throw new Error("all values in "+Le+" must be integers");if(Ne>=ve.data.length||Ne<-ve.data.length)throw new Error(Le+" must be valid indices for gd.data.");if(Te.indexOf(Ne,Oe+1)>-1||Ne>=0&&Te.indexOf(-ve.data.length+Ne)>-1||Ne<0&&Te.indexOf(ve.data.length+Ne)>-1)throw new Error("each index in "+Le+" must be unique.")}}function E(ve,Te,Le){if(!Array.isArray(ve.data))throw new Error("gd.data must be an array.");if(void 0===Te)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),S(ve,Te,"currentIndices"),void 0===Le||Array.isArray(Le)||(Le=[Le]),void 0!==Le&&S(ve,Le,"newIndices"),void 0!==Le&&Te.length!==Le.length)throw new Error("current and new indices must be of equal length.")}function N(ve,Te,Le,Oe,Ne){!function(Ye,ct,vt,wt){var Ot=y.isPlainObject(wt);if(!Array.isArray(Ye.data))throw new Error("gd.data must be an array");if(!y.isPlainObject(ct))throw new Error("update must be a key:value object");if(void 0===vt)throw new Error("indices must be an integer or array of integers");for(var St in S(Ye,vt,"indices"),ct){if(!Array.isArray(ct[St])||ct[St].length!==vt.length)throw new Error("attribute "+St+" must be an array of length equal to indices array length");if(Ot&&(!(St in wt)||!Array.isArray(wt[St])||wt[St].length!==ct[St].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ve,Te,Le,Oe);for(var Be=function(Ye,ct,vt,wt){var St,ft,st,Ct,$t=y.isPlainObject(wt),rn=[];for(var hn in Array.isArray(vt)||(vt=[vt]),vt=L(vt,Ye.data.length-1),ct)for(var cn=0;cn<vt.length;cn++){if(St=(ft=e(Ye.data[vt[cn]],hn)).get(),!y.isArrayOrTypedArray(st=ct[hn][cn]))throw new Error("attribute: "+hn+" index: "+cn+" must be an array");if(!y.isArrayOrTypedArray(St))throw new Error("cannot extend missing or non-array attribute: "+hn);if(St.constructor!==st.constructor)throw new Error("cannot extend array with an array of a different type: "+hn);g(Ct=$t?wt[hn][cn]:wt)||(Ct=-1),rn.push({prop:ft,target:St,insert:st,maxp:Math.floor(Ct)})}return rn}(ve,Te,Le,Oe),He={},Ve={},it=0;it<Be.length;it++){var ze=Be[it].prop,qe=Ne(Be[it].target,Be[it].insert,Be[it].maxp);ze.set(qe[0]),Array.isArray(He[ze.astr])||(He[ze.astr]=[]),He[ze.astr].push(qe[1]),Array.isArray(Ve[ze.astr])||(Ve[ze.astr]=[]),Ve[ze.astr].push(Be[it].target.length)}return{update:He,maxPoints:Ve}}function z(ve,Te){var Le=new ve.constructor(ve.length+Te.length);return Le.set(ve),Le.set(Te,ve.length),Le}function q(ve,Te,Le,Oe){ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve);var Ne={};if("string"==typeof Te)Ne[Te]=Le;else{if(!y.isPlainObject(Te))return y.warn("Restyle fail.",Te,Le,Oe),Promise.reject();Ne=y.extendFlat({},Te),void 0===Oe&&(Oe=Le)}Object.keys(Ne).length&&(ve.changed=!0);var Be=_.coerceTraceIndices(ve,Oe),He=X(ve,Ne,Be),Ve=He.flags;Ve.calc&&(ve.calcdata=void 0),Ve.clearAxisTypes&&_.clearAxisTypes(ve,Be,{});var it=[];Ve.fullReplot?it.push(ie._doPlot):(it.push(m.previousPromises),m.supplyDefaults(ve),Ve.markerSize&&(m.doCalcdata(ve),j(it)),Ve.style&&it.push(c.doTraceStyle),Ve.colorbars&&it.push(c.doColorBars),it.push(M)),it.push(m.rehover,m.redrag,m.reselect),t.add(ve,q,[ve,He.undoit,He.traces],q,[ve,He.redoit,He.traces]);var ze=y.syncOrAsync(it,ve);return ze&&ze.then||(ze=Promise.resolve()),ze.then(function(){return ve.emit("plotly_restyle",He.eventData),ve})}function G(ve){return void 0===ve?null:ve}function K(ve,Te){return Te?function(Le,Oe,Ne){var Be=e(Le,Oe),He=Be.set;return Be.set=function(Ve){ne((Ne||"")+Oe,Be.get(),Ve,ve),He(Ve)},Be}:e}function ne(ve,Te,Le,Oe){if(Array.isArray(Te)||Array.isArray(Le))for(var Ne=Array.isArray(Te)?Te:[],Be=Array.isArray(Le)?Le:[],He=Math.max(Ne.length,Be.length),Ve=0;Ve<He;Ve++)ne(ve+"["+Ve+"]",Ne[Ve],Be[Ve],Oe);else if(y.isPlainObject(Te)||y.isPlainObject(Le)){var it=y.isPlainObject(Te)?Te:{},ze=y.isPlainObject(Le)?Le:{},je=y.extendFlat({},it,ze);for(var qe in je)ne(ve+"."+qe,it[qe],ze[qe],Oe)}else void 0===Oe[ve]&&(Oe[ve]=G(Te))}function X(ve,Te,Le){var Oe,Ne=ve._fullLayout,Be=ve._fullData,He=ve.data,Ve=Ne._guiEditing,it=K(Ne._preGUI,Ve),ze=y.extendDeepAll({},Te);J(Te);var je,qe=T.traceFlags(),Ye={},ct={};function vt(){return Le.map(function(){})}function wt(ht){var xt=l.id2name(ht);-1===je.indexOf(xt)&&je.push(xt)}function Ot(ht){return"LAYOUT"+ht+".autorange"}function St(ht){return"LAYOUT"+ht+".range"}function ft(ht){for(var xt=ht;xt<Be.length;xt++)if(Be[xt]._input===He[ht])return Be[xt]}function st(ht,xt,Rt){if(Array.isArray(ht))ht.forEach(function(Kt){st(Kt,xt,Rt)});else if(!(ht in Te)&&!_.hasParent(Te,ht)){var Xt;if("LAYOUT"===ht.substr(0,6))Xt=it(ve.layout,ht.replace("LAYOUT",""));else{var tn=Le[Rt];Xt=K(Ne._tracePreGUI[ft(tn)._fullInput.uid],Ve)(He[tn],ht)}ht in ct||(ct[ht]=vt()),void 0===ct[ht][Rt]&&(ct[ht][Rt]=G(Xt.get())),void 0!==xt&&Xt.set(xt)}}function Ct(ht){return function(xt){return Be[xt][ht]}}function $t(ht){return function(xt,Rt){return!1===xt?Be[Le[Rt]][ht]:null}}for(var rn in Te){if(_.hasParent(Te,rn))throw new Error("cannot set "+rn+" and a parent attribute simultaneously");var hn,cn,mn,nn,Xe,nt,ye=Te[rn];if("autobinx"!==rn&&"autobiny"!==rn||(rn=rn.charAt(rn.length-1)+"bins",ye=Array.isArray(ye)?ye.map($t(rn)):!1===ye?Le.map(Ct(rn)):null),Ye[rn]=ye,"LAYOUT"!==rn.substr(0,6)){for(ct[rn]=vt(),Oe=0;Oe<Le.length;Oe++)if(hn=He[Le[Oe]],cn=ft(Le[Oe]),nn=(mn=K(Ne._tracePreGUI[cn._fullInput.uid],Ve)(hn,rn)).get(),void 0!==(Xe=Array.isArray(ye)?ye[Oe%ye.length]:ye)){var Ce=mn.parts[mn.parts.length-1],Ue=rn.substr(0,rn.length-Ce.length-1),Qe=Ue?Ue+".":"",rt=Ue?e(cn,Ue).get():cn;if((nt=n.getTraceValObject(cn,mn.parts))&&nt.impliedEdits&&null!==Xe)for(var Ke in nt.impliedEdits)st(y.relativeAttr(rn,Ke),nt.impliedEdits[Ke],Oe);else if("thicknessmode"!==Ce&&"lenmode"!==Ce||nn===Xe||"fraction"!==Xe&&"pixels"!==Xe||!rt){if("type"===rn&&("pie"===Xe!=("pie"===nn)||"funnelarea"===Xe!=("funnelarea"===nn))){var gt="x",mt="y";"bar"!==Xe&&"bar"!==nn||"h"!==hn.orientation||(gt="y",mt="x"),y.swapAttrs(hn,["?","?src"],"labels",gt),y.swapAttrs(hn,["d?","?0"],"label",gt),y.swapAttrs(hn,["?","?src"],"values",mt),"pie"===nn||"funnelarea"===nn?(e(hn,"marker.color").set(e(hn,"marker.colors").get()),Ne._pielayer.selectAll("g.trace").remove()):o.traceIs(hn,"cartesian")&&e(hn,"marker.colors").set(e(hn,"marker.color").get())}}else{var Lt=Ne._size,Vt=rt.orient,dt="top"===Vt||"bottom"===Vt;if("thicknessmode"===Ce){var bt=dt?Lt.h:Lt.w;st(Qe+"thickness",rt.thickness*("fraction"===Xe?1/bt:bt),Oe)}else{var Yt=dt?Lt.w:Lt.h;st(Qe+"len",rt.len*("fraction"===Xe?1/Yt:Yt),Oe)}}if(ct[rn][Oe]=G(nn),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(rn)){if("orientation"===rn){mn.set(Xe);var It=hn.x&&!hn.y?"h":"v";if((mn.get()||It)===cn.orientation)continue}else"orientationaxes"===rn&&(hn.orientation={v:"h",h:"v"}[cn.orientation]);_.swapXYData(hn),qe.calc=qe.clearAxisTypes=!0}else-1!==m.dataArrayContainers.indexOf(mn.parts[0])?(_.manageArrayContainers(mn,Xe,ct),qe.calc=!0):(nt?nt.arrayOk&&!o.traceIs(cn,"regl")&&(y.isArrayOrTypedArray(Xe)||y.isArrayOrTypedArray(nn))?qe.calc=!0:T.update(qe,nt):qe.calc=!0,mn.set(Xe))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(rn)&&l.swap(ve,Le),"orientationaxes"===rn){var jt=e(ve.layout,"hovermode"),Ie=jt.get();"x"===Ie?jt.set("y"):"y"===Ie?jt.set("x"):"x unified"===Ie?jt.set("y unified"):"y unified"===Ie&&jt.set("x unified")}if(-1!==["orientation","type"].indexOf(rn)){for(je=[],Oe=0;Oe<Le.length;Oe++){var et=He[Le[Oe]];o.traceIs(et,"cartesian")&&(wt(et.xaxis||"x"),wt(et.yaxis||"y"))}st(je.map(Ot),!0,0),st(je.map(St),[0,1],0)}}else mn=it(ve.layout,rn.replace("LAYOUT","")),ct[rn]=[G(mn.get())],mn.set(Array.isArray(ye)?ye[0]:ye),qe.calc=!0}return(qe.calc||qe.plot)&&(qe.fullReplot=!0),{flags:qe,undoit:ct,redoit:Ye,traces:Le,eventData:y.extendDeepNoArrays([],[ze,Le])}}function J(ve){var Te,Le,Oe,Ne=y.counterRegex("axis",".title",!1,!1),Be=/colorbar\.title$/,He=Object.keys(ve);for(Te=0;Te<He.length;Te++)Oe=ve[Le=He[Te]],"title"!==Le&&!Ne.test(Le)&&!Be.test(Le)||"string"!=typeof Oe&&"number"!=typeof Oe?Le.indexOf("titlefont")>-1&&-1===Le.indexOf("grouptitlefont")?Ve(Le,Le.replace("titlefont","title.font")):Le.indexOf("titleposition")>-1?Ve(Le,Le.replace("titleposition","title.position")):Le.indexOf("titleside")>-1?Ve(Le,Le.replace("titleside","title.side")):Le.indexOf("titleoffset")>-1&&Ve(Le,Le.replace("titleoffset","title.offset")):Ve(Le,Le.replace("title","title.text"));function Ve(it,ze){ve[ze]=ve[it],delete ve[it]}}function se(ve,Te,Le){ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve);var Oe={};if("string"==typeof Te)Oe[Te]=Le;else{if(!y.isPlainObject(Te))return y.warn("Relayout fail.",Te,Le),Promise.reject();Oe=y.extendFlat({},Te)}Object.keys(Oe).length&&(ve.changed=!0);var Ne=te(ve,Oe),Be=Ne.flags;Be.calc&&(ve.calcdata=void 0);var He=[m.previousPromises];Be.layoutReplot?He.push(c.layoutReplot):Object.keys(Oe).length&&(V(ve,Be,Ne)||m.supplyDefaults(ve),Be.legend&&He.push(c.doLegend),Be.layoutstyle&&He.push(c.layoutStyles),Be.axrange&&j(He,Ne.rangesAltered),Be.ticks&&He.push(c.doTicksRelayout),Be.modebar&&He.push(c.doModeBar),Be.camera&&He.push(c.doCamera),Be.colorbars&&He.push(c.doColorBars),He.push(M)),He.push(m.rehover,m.redrag,m.reselect),t.add(ve,se,[ve,Ne.undoit],se,[ve,Ne.redoit]);var Ve=y.syncOrAsync(He,ve);return Ve&&Ve.then||(Ve=Promise.resolve(ve)),Ve.then(function(){return ve.emit("plotly_relayout",Ne.eventData),ve})}function V(ve,Te,Le){var Oe=ve._fullLayout;if(!Te.axrange)return!1;for(var Ne in Te)if("axrange"!==Ne&&Te[Ne])return!1;for(var Be in Le.rangesAltered){var He=l.id2name(Be),Ve=ve.layout[He],it=Oe[He];if(it.autorange=Ve.autorange,Ve.range&&(it.range=Ve.range.slice()),it.cleanRange(),it._matchGroup)for(var ze in it._matchGroup)if(ze!==Be){var je=Oe[l.id2name(ze)];je.autorange=it.autorange,je.range=it.range.slice(),je._input.range=it.range.slice()}}return!0}function j(ve,Te){ve.push(d,c.doAutoRangeAndConstraints,Te?function(Oe){var Ne=[],Be=!0;for(var He in Te){var Ve=l.getFromId(Oe,He);if(Ne.push(He),-1!==(Ve.ticklabelposition||"").indexOf("inside")&&Ve._anchorAxis&&Ne.push(Ve._anchorAxis._id),Ve._matchGroup)for(var it in Ve._matchGroup)Te[it]||Ne.push(it);Ve.automargin&&(Be=!1)}return l.draw(Oe,Ne,{skipTitle:Be})}:function(Oe){return l.draw(Oe,"redraw")},c.drawData,c.finalDraw)}var H=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,oe=/^[xyz]axis[0-9]*\.autorange$/,U=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function te(ve,Te){var Le,Oe,Ne,Be=ve.layout,He=ve._fullLayout,it=K(He._preGUI,He._guiEditing),ze=Object.keys(Te),je=l.list(ve),qe=y.extendDeepAll({},Te),Ye={};for(J(Te),ze=Object.keys(Te),Oe=0;Oe<ze.length;Oe++)if(0===ze[Oe].indexOf("allaxes")){for(Ne=0;Ne<je.length;Ne++){var ct=je[Ne]._id.substr(1),vt=-1!==ct.indexOf("scene")?ct+".":"",wt=ze[Oe].replace("allaxes",vt+je[Ne]._name);Te[wt]||(Te[wt]=Te[ze[Oe]])}delete Te[ze[Oe]]}var Ot=T.layoutFlags(),St={},ft={};function st(tn,Kt){if(Array.isArray(tn))tn.forEach(function(Vn){st(Vn,Kt)});else if(!(tn in Te)&&!_.hasParent(Te,tn)){var kn=it(Be,tn);tn in ft||(ft[tn]=G(kn.get())),void 0!==Kt&&kn.set(Kt)}}var Ct,$t={};function rn(tn){var Kt=l.name2id(tn.split(".")[0]);return $t[Kt]=1,Kt}for(var hn in Te){if(_.hasParent(Te,hn))throw new Error("cannot set "+hn+" and a parent attribute simultaneously");for(var cn=it(Be,hn),mn=Te[hn],nn=cn.parts.length-1;nn>0&&"string"!=typeof cn.parts[nn];)nn--;var Xe=cn.parts[nn],nt=cn.parts[nn-1]+"."+Xe,ye=cn.parts.slice(0,nn).join("."),Ce=e(ve.layout,ye).get(),Ue=e(He,ye).get(),Qe=cn.get();if(void 0!==mn){St[hn]=mn,ft[hn]="reverse"===Xe?mn:G(Qe);var rt=n.getLayoutValObject(He,cn.parts);if(rt&&rt.impliedEdits&&null!==mn)for(var Ke in rt.impliedEdits)st(y.relativeAttr(hn,Ke),rt.impliedEdits[Ke]);if(-1!==["width","height"].indexOf(hn))if(mn){st("autosize",null);var gt="height"===hn?"width":"height";st(gt,He[gt])}else He[hn]=ve._initialAutoSize[hn];else if("autosize"===hn)st("width",mn?null:He.width),st("height",mn?null:He.height);else if(nt.match(H))rn(nt),e(He,ye+"._inputRange").set(null);else if(nt.match(oe)){rn(nt),e(He,ye+"._inputRange").set(null);var mt=e(He,ye).get();mt._inputDomain&&(mt._input.domain=mt._inputDomain.slice())}else nt.match(U)&&e(He,ye+"._inputDomain").set(null);if("type"===Xe){Ct=Ce;var Lt="linear"===Ue.type&&"log"===mn;if(Lt||"log"===Ue.type&&"linear"===mn){if(Ct&&Ct.range)if(Ue.autorange)Lt&&(Ct.range=Ct.range[1]>Ct.range[0]?[1,2]:[2,1]);else{var dt=Ct.range[0],bt=Ct.range[1];Lt?(dt<=0&&bt<=0&&st(ye+".autorange",!0),dt<=0?dt=bt/1e6:bt<=0&&(bt=dt/1e6),st(ye+".range[0]",Math.log(dt)/Math.LN10),st(ye+".range[1]",Math.log(bt)/Math.LN10)):(st(ye+".range[0]",Math.pow(10,dt)),st(ye+".range[1]",Math.pow(10,bt)))}else st(ye+".autorange",!0);Array.isArray(He._subplots.polar)&&He._subplots.polar.length&&He[cn.parts[0]]&&"radialaxis"===cn.parts[1]&&delete He[cn.parts[0]]._subplot.viewInitial["radialaxis.range"],o.getComponentMethod("annotations","convertCoords")(ve,Ue,mn,st),o.getComponentMethod("images","convertCoords")(ve,Ue,mn,st)}else st(ye+".autorange",!0),st(ye+".range",null);e(He,ye+"._inputRange").set(null)}else if(Xe.match(x)){var Yt=e(He,hn).get(),It=(mn||{}).type;It&&"-"!==It||(It="linear"),o.getComponentMethod("annotations","convertCoords")(ve,Yt,It,st),o.getComponentMethod("images","convertCoords")(ve,Yt,It,st)}var jt=a.containerArrayMatch(hn);if(jt){Le=jt.array;var Ie=jt.property,et=rt||{editType:"calc"};""!==(Oe=jt.index)&&""===Ie&&(a.isAddVal(mn)?ft[hn]=null:a.isRemoveVal(mn)?ft[hn]=(e(Be,Le).get()||[])[Oe]:y.warn("unrecognized full object value",Te)),T.update(Ot,et),Ye[Le]||(Ye[Le]={});var ht=Ye[Le][Oe];ht||(ht=Ye[Le][Oe]={}),ht[Ie]=mn,delete Te[hn]}else"reverse"===Xe?(Ce.range?Ce.range.reverse():(st(ye+".autorange",!0),Ce.range=[1,0]),Ue.autorange?Ot.calc=!0:Ot.plot=!0):("dragmode"===hn&&(!1===mn&&!1!==Qe||!1!==mn&&!1===Qe)||He._has("scatter-like")&&He._has("regl")&&"dragmode"===hn&&("lasso"===mn||"select"===mn)&&"lasso"!==Qe&&"select"!==Qe||He._has("gl2d")?Ot.plot=!0:rt?T.update(Ot,rt):Ot.calc=!0,cn.set(mn))}}for(Le in Ye)a.applyContainerArrayChanges(ve,it(Be,Le),Ye[Le],Ot,it)||(Ot.plot=!0);for(var xt in $t){var Rt=(Ct=l.getFromId(ve,xt))&&Ct._constraintGroup;if(Rt)for(var Xt in Ot.calc=!0,Rt)$t[Xt]||(l.getFromId(ve,Xt)._constraintShrinkable=!0)}return(ee(ve)||Te.height||Te.width)&&(Ot.plot=!0),(Ot.plot||Ot.calc)&&(Ot.layoutReplot=!0),{flags:Ot,rangesAltered:$t,undoit:ft,redoit:St,eventData:qe}}function ee(ve){var Te=ve._fullLayout,Le=Te.width,Oe=Te.height;return ve.layout.autosize&&m.plotAutoSize(ve,ve.layout,Te),Te.width!==Le||Te.height!==Oe}function le(ve,Te,Le,Oe){ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve),y.isPlainObject(Te)||(Te={}),y.isPlainObject(Le)||(Le={}),Object.keys(Te).length&&(ve.changed=!0),Object.keys(Le).length&&(ve.changed=!0);var Ne=_.coerceTraceIndices(ve,Oe),Be=X(ve,y.extendFlat({},Te),Ne),He=Be.flags,Ve=te(ve,y.extendFlat({},Le)),it=Ve.flags;(He.calc||it.calc)&&(ve.calcdata=void 0),He.clearAxisTypes&&_.clearAxisTypes(ve,Ne,Le);var ze=[];it.layoutReplot?ze.push(c.layoutReplot):He.fullReplot?ze.push(ie._doPlot):(ze.push(m.previousPromises),V(ve,it,Ve)||m.supplyDefaults(ve),He.style&&ze.push(c.doTraceStyle),(He.colorbars||it.colorbars)&&ze.push(c.doColorBars),it.legend&&ze.push(c.doLegend),it.layoutstyle&&ze.push(c.layoutStyles),it.axrange&&j(ze,Ve.rangesAltered),it.ticks&&ze.push(c.doTicksRelayout),it.modebar&&ze.push(c.doModeBar),it.camera&&ze.push(c.doCamera),ze.push(M)),ze.push(m.rehover,m.redrag,m.reselect),t.add(ve,le,[ve,Be.undoit,Ve.undoit,Be.traces],le,[ve,Be.redoit,Ve.redoit,Be.traces]);var je=y.syncOrAsync(ze,ve);return je&&je.then||(je=Promise.resolve(ve)),je.then(function(){return ve.emit("plotly_update",{data:Be.eventData,layout:Ve.eventData}),ve})}function ce(ve){return function(Te){Te._fullLayout._guiEditing=!0;var Le=ve.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Le}}var pe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],de=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function be(ve,Te){for(var Le=0;Le<Te.length;Le++){var Oe=Te[Le],Ne=ve.match(Oe.pattern);if(Ne){var Be=Ne[1]||"";return{head:Be,tail:ve.substr(Be.length+1),attr:Oe.attr}}}}function he(ve,Te){var Le=e(Te,ve).get();if(void 0!==Le)return Le;var Oe=ve.split(".");for(Oe.pop();Oe.length>1;)if(Oe.pop(),void 0!==(Le=e(Te,Oe.join(".")+".uirevision").get()))return Le;return Te.uirevision}function xe(ve,Te){for(var Le=0;Le<Te.length;Le++)if(Te[Le]._fullInput.uid===ve)return Le;return-1}function De(ve,Te,Le){for(var Oe=0;Oe<Te.length;Oe++)if(Te[Oe].uid===ve)return Oe;return!Te[Le]||Te[Le].uid?-1:Le}function Se(ve,Te){var Le=y.isPlainObject(ve),Oe=Array.isArray(ve);return Le||Oe?(Le&&y.isPlainObject(Te)||Oe&&Array.isArray(Te))&&JSON.stringify(ve)===JSON.stringify(Te):ve===Te}function ke(ve,Te,Le,Oe){var Ne,Be,He,Ve=Oe.getValObject,it=Oe.flags,ze=Oe.immutable,je=Oe.inArray,qe=Oe.arrayIndex;function Ye(){var Ce=Ne.editType;je&&-1!==Ce.indexOf("arraydraw")?y.pushUnique(it.arrays[je],qe):(T.update(it,Ne),"none"!==Ce&&it.nChanges++,Oe.transition&&Ne.anim&&it.nChangesAnim++,(H.test(He)||oe.test(He))&&(it.rangesAltered[Le[0]]=1),U.test(He)&&e(Te,"_inputDomain").set(null),"datarevision"===Be&&(it.newDataRevision=1))}function ct(Ce){return"data_array"===Ce.valType||Ce.arrayOk}for(Be in ve){if(it.calc&&!Oe.transition)return;var vt=ve[Be],wt=Te[Be],Ot=Le.concat(Be);if(He=Ot.join("."),"_"!==Be.charAt(0)&&"function"!=typeof vt&&vt!==wt){if(("tick0"===Be||"dtick"===Be)&&"geo"!==Le[0]){var St=Te.tickmode;if("auto"===St||"array"===St||!St)continue}if(("range"!==Be||!Te.autorange)&&("zmin"!==Be&&"zmax"!==Be||"contourcarpet"!==Te.type)&&(Ne=Ve(Ot))&&(!Ne._compareAsJSON||JSON.stringify(vt)!==JSON.stringify(wt))){var ft,st=Ne.valType,Ct=ct(Ne),$t=Array.isArray(vt),rn=Array.isArray(wt);if($t&&rn){var hn="_input_"+Be,cn=ve[hn],mn=Te[hn];if(Array.isArray(cn)&&cn===mn)continue}if(void 0===wt)Ct&&$t?it.calc=!0:Ye();else if(Ne._isLinkedToArray){var nn=[],Xe=!1;je||(it.arrays[Be]=nn);var nt=Math.min(vt.length,wt.length),ye=Math.max(vt.length,wt.length);if(nt!==ye){if("arraydraw"!==Ne.editType){Ye();continue}Xe=!0}for(ft=0;ft<nt;ft++)ke(vt[ft],wt[ft],Ot.concat(ft),y.extendFlat({inArray:Be,arrayIndex:ft},Oe));if(Xe)for(ft=nt;ft<ye;ft++)nn.push(ft)}else!st&&y.isPlainObject(vt)?ke(vt,wt,Ot,Oe):Ct?$t&&rn?(ze&&(it.calc=!0),(ze||Oe.newDataRevision)&&Ye()):$t!==rn?it.calc=!0:Ye():$t&&rn&&vt.length===wt.length&&String(vt)===String(wt)||Ye()}}}for(Be in Te)if(!(Be in ve)&&"_"!==Be.charAt(0)&&"function"!=typeof Te[Be]){if(ct(Ne=Ve(Le.concat(Be)))&&Array.isArray(Te[Be]))return void(it.calc=!0);Ye()}}function Fe(ve){var Te=ve._fullLayout,Le=ve.getBoundingClientRect();if(!y.equalDomRects(Le,Te._lastBBox)){var Oe=Te._invTransform=y.inverseTransformMatrix(y.getFullTransformMatrix(ve));Te._invScaleX=Math.sqrt(Oe[0][0]*Oe[0][0]+Oe[0][1]*Oe[0][1]+Oe[0][2]*Oe[0][2]),Te._invScaleY=Math.sqrt(Oe[1][0]*Oe[1][0]+Oe[1][1]*Oe[1][1]+Oe[1][2]*Oe[1][2]),Te._lastBBox=Le}}ie.animate=function(ve,Te,Le){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Oe=ve._transitionData;Oe._frameQueue||(Oe._frameQueue=[]);var Ne=(Le=m.supplyAnimationDefaults(Le)).transition,Be=Le.frame;function He(ze){return Array.isArray(Ne)?ze>=Ne.length?Ne[0]:Ne[ze]:Ne}function Ve(ze){return Array.isArray(Be)?ze>=Be.length?Be[0]:Be[ze]:Be}function it(ze,je){var qe=0;return function(){if(ze&&++qe===je)return ze()}}return void 0===Oe._frameWaitingCnt&&(Oe._frameWaitingCnt=0),new Promise(function(ze,je){function Ye(){ve.emit("plotly_animating"),Oe._lastFrameAt=-1/0,Oe._timeToNext=0,Oe._runningTransitions=0,Oe._currentFrame=null;var cn=function(){Oe._animationRaf=window.requestAnimationFrame(cn),Date.now()-Oe._lastFrameAt>Oe._timeToNext&&function qe(){Oe._currentFrame&&Oe._currentFrame.onComplete&&Oe._currentFrame.onComplete();var cn=Oe._currentFrame=Oe._frameQueue.shift();if(cn){var mn=cn.name?cn.name.toString():null;ve._fullLayout._currentFrame=mn,Oe._lastFrameAt=Date.now(),Oe._timeToNext=cn.frameOpts.duration,m.transition(ve,cn.frame.data,cn.frame.layout,_.coerceTraceIndices(ve,cn.frame.traces),cn.frameOpts,cn.transitionOpts).then(function(){cn.onComplete&&cn.onComplete()}),ve.emit("plotly_animatingframe",{name:mn,frame:cn.frame,animation:{frame:cn.frameOpts,transition:cn.transitionOpts}})}else ve.emit("plotly_animated"),window.cancelAnimationFrame(Oe._animationRaf),Oe._animationRaf=null}()};cn()}var ct,vt,wt=0;function Ot(cn){return cn.transitionOpts=Array.isArray(Ne)?wt>=Ne.length?Ne[wt]:Ne[0]:Ne,wt++,cn}var St=[],ft=null==Te,st=Array.isArray(Te);if(ft||st||!y.isPlainObject(Te)){if(ft||-1!==["string","number"].indexOf(typeof Te))for(ct=0;ct<Oe._frames.length;ct++)(vt=Oe._frames[ct])&&(ft||String(vt.group)===String(Te))&&St.push({type:"byname",name:String(vt.name),data:Ot({name:vt.name})});else if(st)for(ct=0;ct<Te.length;ct++){var Ct=Te[ct];-1!==["number","string"].indexOf(typeof Ct)?(Ct=String(Ct),St.push({type:"byname",name:Ct,data:Ot({name:Ct})})):y.isPlainObject(Ct)&&St.push({type:"object",data:Ot(y.extendFlat({},Ct))})}}else St.push({type:"object",data:Ot(y.extendFlat({},Te))});for(ct=0;ct<St.length;ct++)if("byname"===(vt=St[ct]).type&&!Oe._frameHash[vt.data.name])return y.warn('animate failure: frame not found: "'+vt.data.name+'"'),void je();-1!==["next","immediate"].indexOf(Le.mode)&&function(){if(0!==Oe._frameQueue.length){for(;Oe._frameQueue.length;){var cn=Oe._frameQueue.pop();cn.onInterrupt&&cn.onInterrupt()}ve.emit("plotly_animationinterrupted",[])}}(),"reverse"===Le.direction&&St.reverse();var $t=ve._fullLayout._currentFrame;if($t&&Le.fromcurrent){var rn=-1;for(ct=0;ct<St.length;ct++)if("byname"===(vt=St[ct]).type&&vt.name===$t){rn=ct;break}if(rn>0&&rn<St.length-1){var hn=[];for(ct=0;ct<St.length;ct++)vt=St[ct],("byname"!==St[ct].type||ct>rn)&&hn.push(vt);St=hn}}St.length>0?function(cn){if(0!==cn.length){for(var mn=0;mn<cn.length;mn++){var nn;nn="byname"===cn[mn].type?m.computeFrame(ve,cn[mn].name):cn[mn].data;var Xe=Ve(mn),nt=He(mn);nt.duration=Math.min(nt.duration,Xe.duration);var ye={frame:nn,name:cn[mn].name,frameOpts:Xe,transitionOpts:nt};mn===cn.length-1&&(ye.onComplete=it(ze,2),ye.onInterrupt=je),Oe._frameQueue.push(ye)}"immediate"===Le.mode&&(Oe._lastFrameAt=-1/0),Oe._animationRaf||Ye()}}(St):(ve.emit("plotly_animated"),ze())})},ie.addFrames=function(ve,Te,Le){if(ve=y.getGraphDiv(ve),null==Te)return Promise.resolve();if(!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Oe,Ne,Be,He,Ve=ve._transitionData._frames,it=ve._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var ze=Ve.length+2*Te.length,je=[],qe={};for(Oe=Te.length-1;Oe>=0;Oe--)if(y.isPlainObject(Te[Oe])){var Ye=Te[Oe].name,ct=(it[Ye]||qe[Ye]||{}).name,vt=Te[Oe].name;ct&&vt&&"number"==typeof vt&&(it[ct]||qe[ct])&&w<5&&(w++,y.warn('addFrames: overwriting frame "'+(it[ct]||qe[ct]).name+'" with a frame whose name of type "number" also equates to "'+ct+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&y.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),qe[Ye]={name:Ye},je.push({frame:m.supplyFrameDefaults(Te[Oe]),index:Le&&null!=Le[Oe]?Le[Oe]:ze+Oe})}je.sort(function(hn,cn){return hn.index>cn.index?-1:hn.index<cn.index?1:0});var Ot=[],St=[],ft=Ve.length;for(Oe=je.length-1;Oe>=0;Oe--){if("number"==typeof(Ne=je[Oe].frame).name&&y.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Ne.name)for(;it[Ne.name="frame "+ve._transitionData._counter++];);if(it[Ne.name]){for(Be=0;Be<Ve.length&&(Ve[Be]||{}).name!==Ne.name;Be++);Ot.push({type:"replace",index:Be,value:Ne}),St.unshift({type:"replace",index:Be,value:Ve[Be]})}else He=Math.max(0,Math.min(je[Oe].index,ft)),Ot.push({type:"insert",index:He,value:Ne}),St.unshift({type:"delete",index:He}),ft++}return t&&t.add(ve,m.modifyFrames,[ve,St],m.modifyFrames,[ve,Ot]),m.modifyFrames(ve,Ot)},ie.deleteFrames=function(ve,Te){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);var Le,Oe,Ne=ve._transitionData._frames,Be=[],He=[];if(!Te)for(Te=[],Le=0;Le<Ne.length;Le++)Te.push(Le);for((Te=Te.slice()).sort(),Le=Te.length-1;Le>=0;Le--)Be.push({type:"delete",index:Oe=Te[Le]}),He.unshift({type:"insert",index:Oe,value:Ne[Oe]});return t&&t.add(ve,m.modifyFrames,[ve,He],m.modifyFrames,[ve,Be]),m.modifyFrames(ve,Be)},ie.addTraces=function ve(Te,Le,Oe){Te=y.getGraphDiv(Te);var Ne,Be,He=[],Ve=ie.deleteTraces,it=ve,ze=[Te,He],je=[Te,Le];for(function(qe,Ye,ct){var vt,wt;if(!Array.isArray(qe.data))throw new Error("gd.data must be an array.");if(void 0===Ye)throw new Error("traces must be defined.");for(Array.isArray(Ye)||(Ye=[Ye]),vt=0;vt<Ye.length;vt++)if("object"!=typeof(wt=Ye[vt])||Array.isArray(wt)||null===wt)throw new Error("all values in traces array must be non-array objects");if(void 0===ct||Array.isArray(ct)||(ct=[ct]),void 0!==ct&&ct.length!==Ye.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Le,Oe),Array.isArray(Le)||(Le=[Le]),Le=Le.map(function(qe){return y.extendFlat({},qe)}),_.cleanData(Le),Ne=0;Ne<Le.length;Ne++)Te.data.push(Le[Ne]);for(Ne=0;Ne<Le.length;Ne++)He.push(-Le.length+Ne);if(void 0===Oe)return Be=ie.redraw(Te),t.add(Te,Ve,ze,it,je),Be;Array.isArray(Oe)||(Oe=[Oe]);try{E(Te,He,Oe)}catch(qe){throw Te.data.splice(Te.data.length-Le.length,Le.length),qe}return t.startSequence(Te),t.add(Te,Ve,ze,it,je),Be=ie.moveTraces(Te,He,Oe),t.stopSequence(Te),Be},ie.deleteTraces=function ve(Te,Le){Te=y.getGraphDiv(Te);var Oe,Ne,Be=[],He=ie.addTraces,Ve=ve,it=[Te,Be,Le],ze=[Te,Le];if(void 0===Le)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Le)||(Le=[Le]),S(Te,Le,"indices"),(Le=L(Le,Te.data.length-1)).sort(y.sorterDes),Oe=0;Oe<Le.length;Oe+=1)Ne=Te.data.splice(Le[Oe],1)[0],Be.push(Ne);var je=ie.redraw(Te);return t.add(Te,He,it,Ve,ze),je},ie.extendTraces=function ve(Te,Le,Oe,Ne){function Be(ze,je,qe){var Ye,ct;if(y.isTypedArray(ze))if(qe<0){var vt=new ze.constructor(0),wt=z(ze,je);qe<0?(Ye=wt,ct=vt):(Ye=vt,ct=wt)}else if(Ye=new ze.constructor(qe),ct=new ze.constructor(ze.length+je.length-qe),qe===je.length)Ye.set(je),ct.set(ze);else if(qe<je.length){var Ot=je.length-qe;Ye.set(je.subarray(Ot)),ct.set(ze),ct.set(je.subarray(0,Ot),ze.length)}else{var St=qe-je.length,ft=ze.length-St;Ye.set(ze.subarray(ft)),Ye.set(je,St),ct.set(ze.subarray(0,ft))}else Ye=ze.concat(je),ct=qe>=0&&qe<Ye.length?Ye.splice(0,Ye.length-qe):[];return[Ye,ct]}var He=N(Te=y.getGraphDiv(Te),Le,Oe,Ne,Be),Ve=ie.redraw(Te);return t.add(Te,ie.prependTraces,[Te,He.update,Oe,He.maxPoints],ve,arguments),Ve},ie.moveTraces=function ve(Te,Le,Oe){var Ne,Be=[],He=[],Ve=ve,it=ve,ze=[Te=y.getGraphDiv(Te),Oe,Le],je=[Te,Le,Oe];if(E(Te,Le,Oe),Le=Array.isArray(Le)?Le:[Le],void 0===Oe)for(Oe=[],Ne=0;Ne<Le.length;Ne++)Oe.push(-Le.length+Ne);for(Oe=Array.isArray(Oe)?Oe:[Oe],Le=L(Le,Te.data.length-1),Oe=L(Oe,Te.data.length-1),Ne=0;Ne<Te.data.length;Ne++)-1===Le.indexOf(Ne)&&Be.push(Te.data[Ne]);for(Ne=0;Ne<Le.length;Ne++)He.push({newIndex:Oe[Ne],trace:Te.data[Le[Ne]]});for(He.sort(function(Ye,ct){return Ye.newIndex-ct.newIndex}),Ne=0;Ne<He.length;Ne+=1)Be.splice(He[Ne].newIndex,0,He[Ne].trace);Te.data=Be;var qe=ie.redraw(Te);return t.add(Te,Ve,ze,it,je),qe},ie.prependTraces=function ve(Te,Le,Oe,Ne){function Be(ze,je,qe){var Ye,ct;if(y.isTypedArray(ze))if(qe<=0){var vt=new ze.constructor(0),wt=z(je,ze);qe<0?(Ye=wt,ct=vt):(Ye=vt,ct=wt)}else if(Ye=new ze.constructor(qe),ct=new ze.constructor(ze.length+je.length-qe),qe===je.length)Ye.set(je),ct.set(ze);else if(qe<je.length){var Ot=je.length-qe;Ye.set(je.subarray(0,Ot)),ct.set(je.subarray(Ot)),ct.set(ze,Ot)}else{var St=qe-je.length;Ye.set(je),Ye.set(ze.subarray(0,St),je.length),ct.set(ze.subarray(St))}else Ye=je.concat(ze),ct=qe>=0&&qe<Ye.length?Ye.splice(qe,Ye.length):[];return[Ye,ct]}var He=N(Te=y.getGraphDiv(Te),Le,Oe,Ne,Be),Ve=ie.redraw(Te);return t.add(Te,ie.extendTraces,[Te,He.update,Oe,He.maxPoints],ve,arguments),Ve},ie.newPlot=function(ve,Te,Le,Oe){return ve=y.getGraphDiv(ve),m.cleanPlot([],{},ve._fullData||[],ve._fullLayout||{}),m.purge(ve),ie._doPlot(ve,Te,Le,Oe)},ie._doPlot=function(ve,Te,Le,Oe){var Ne;if(ve=y.getGraphDiv(ve),r.init(ve),y.isPlainObject(Te)){var Be=Te;Te=Be.data,Le=Be.layout,Oe=Be.config,Ne=Be.frames}if(!1===r.triggerHandler(ve,"plotly_beforeplot",[Te,Le,Oe]))return Promise.reject();Te||Le||y.isPlotDiv(ve)||y.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ve),P(ve,Oe),Le||(Le={}),p.select(ve).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(ve._promises)||(ve._promises=[]);var He=0===(ve.data||[]).length&&Array.isArray(Te);Array.isArray(Te)&&(_.cleanData(Te),He?ve.data=Te:ve.data.push.apply(ve.data,Te),ve.empty=!1),ve.layout&&!He||(ve.layout=_.cleanLayout(Le)),m.supplyDefaults(ve);var Ve=ve._fullLayout,it=Ve._has("cartesian");Ve._replotting=!0,(He||Ve._shouldCreateBgLayer)&&(function(St){var ft=p.select(St),st=St._fullLayout;if(st._calcInverseTransform=Fe,st._calcInverseTransform(St),st._container=ft.selectAll(".plot-container").data([0]),st._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),st._paperdiv=st._container.selectAll(".svg-container").data([0]),st._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),st._glcontainer=st._paperdiv.selectAll(".gl-container").data([{}]),st._glcontainer.enter().append("div").classed("gl-container",!0),st._paperdiv.selectAll(".main-svg").remove(),st._paperdiv.select(".modebar-container").remove(),st._paper=st._paperdiv.insert("svg",":first-child").classed("main-svg",!0),st._toppaper=st._paperdiv.append("svg").classed("main-svg",!0),st._modebardiv=st._paperdiv.append("div"),delete st._modeBar,st._hoverpaper=st._paperdiv.append("svg").classed("main-svg",!0),!st._uid){var Ct={};p.selectAll("defs").each(function(){this.id&&(Ct[this.id.split("-")[1]]=1)}),st._uid=y.randstr(Ct)}st._paperdiv.selectAll(".main-svg").attr(s.svgAttrs),st._defs=st._paper.append("defs").attr("id","defs-"+st._uid),st._clips=st._defs.append("g").classed("clips",!0),st._topdefs=st._toppaper.append("defs").attr("id","topdefs-"+st._uid),st._topclips=st._topdefs.append("g").classed("clips",!0),st._bgLayer=st._paper.append("g").classed("bglayer",!0),st._draggers=st._paper.append("g").classed("draglayer",!0);var $t=st._paper.append("g").classed("layer-below",!0);st._imageLowerLayer=$t.append("g").classed("imagelayer",!0),st._shapeLowerLayer=$t.append("g").classed("shapelayer",!0),st._cartesianlayer=st._paper.append("g").classed("cartesianlayer",!0),st._polarlayer=st._paper.append("g").classed("polarlayer",!0),st._smithlayer=st._paper.append("g").classed("smithlayer",!0),st._ternarylayer=st._paper.append("g").classed("ternarylayer",!0),st._geolayer=st._paper.append("g").classed("geolayer",!0),st._funnelarealayer=st._paper.append("g").classed("funnelarealayer",!0),st._pielayer=st._paper.append("g").classed("pielayer",!0),st._iciclelayer=st._paper.append("g").classed("iciclelayer",!0),st._treemaplayer=st._paper.append("g").classed("treemaplayer",!0),st._sunburstlayer=st._paper.append("g").classed("sunburstlayer",!0),st._indicatorlayer=st._toppaper.append("g").classed("indicatorlayer",!0),st._glimages=st._paper.append("g").classed("glimages",!0);var rn=st._toppaper.append("g").classed("layer-above",!0);st._imageUpperLayer=rn.append("g").classed("imagelayer",!0),st._shapeUpperLayer=rn.append("g").classed("shapelayer",!0),st._selectionLayer=st._toppaper.append("g").classed("selectionlayer",!0),st._infolayer=st._toppaper.append("g").classed("infolayer",!0),st._menulayer=st._toppaper.append("g").classed("menulayer",!0),st._zoomlayer=st._toppaper.append("g").classed("zoomlayer",!0),st._hoverlayer=st._hoverpaper.append("g").classed("hoverlayer",!0),st._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),St.emit("plotly_framework")}(ve),Ve._shouldCreateBgLayer&&delete Ve._shouldCreateBgLayer),i.initGradients(ve),i.initPatterns(ve),He&&l.saveShowSpikeInitial(ve);var ze=!ve.calcdata||ve.calcdata.length!==(ve._fullData||[]).length;ze&&m.doCalcdata(ve);for(var je=0;je<ve.calcdata.length;je++)ve.calcdata[je][0].trace=ve._fullData[je];ve._context.responsive?ve._responsiveChartHandler||(ve._responsiveChartHandler=function(){y.isHidden(ve)||m.resize(ve)},window.addEventListener("resize",ve._responsiveChartHandler)):y.clearResponsive(ve);var qe=y.extendFlat({},Ve._size),Ye=0;function ct(){if(m.clearAutoMarginIds(ve),c.drawMarginPushers(ve),l.allowAutoMargin(ve),Ve._has("pie"))for(var St=ve._fullData,ft=0;ft<St.length;ft++){var st=St[ft];"pie"===st.type&&st.automargin&&m.allowAutoMargin(ve,"pie."+st.uid+".automargin")}return m.doAutoMargin(ve),m.previousPromises(ve)}function vt(){ve._transitioning||(c.doAutoRangeAndConstraints(ve),He&&l.saveRangeInitial(ve),o.getComponentMethod("rangeslider","calcAutorange")(ve))}var wt=[m.previousPromises,function(){if(Ne)return ie.addFrames(ve,Ne)},function St(){for(var ft=Ve._basePlotModules,st=0;st<ft.length;st++)ft[st].drawFramework&&ft[st].drawFramework(ve);!Ve._glcanvas&&Ve._has("gl")&&(Ve._glcanvas=Ve._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(hn){return hn.key}),Ve._glcanvas.enter().append("canvas").attr("class",function(hn){return"gl-canvas gl-canvas-"+hn.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ct=ve._context.plotGlPixelRatio;if(Ve._glcanvas){Ve._glcanvas.attr("width",Ve.width*Ct).attr("height",Ve.height*Ct).style("width",Ve.width+"px").style("height",Ve.height+"px");var $t=Ve._glcanvas.data()[0].regl;if($t&&(Math.floor(Ve.width*Ct)!==$t._gl.drawingBufferWidth||Math.floor(Ve.height*Ct)!==$t._gl.drawingBufferHeight)){var rn="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return y.log(rn+" Clearing graph and plotting again."),m.cleanPlot([],{},ve._fullData,Ve),m.supplyDefaults(ve),Ve=ve._fullLayout,m.doCalcdata(ve),Ye++,St();y.error(rn)}}return"h"===Ve.modebar.orientation?Ve._modebardiv.style("height",null).style("width","100%"):Ve._modebardiv.style("width",null).style("height",Ve.height+"px"),m.previousPromises(ve)},ct,function(){if(m.didMarginChange(qe,Ve._size))return y.syncOrAsync([ct,c.layoutStyles],ve)}];it&&wt.push(function(){if(ze)return y.syncOrAsync([o.getComponentMethod("shapes","calcAutorange"),o.getComponentMethod("annotations","calcAutorange"),vt],ve);vt()}),wt.push(c.layoutStyles),it&&wt.push(function(){return l.draw(ve,He?"":"redraw")},function(St){St._fullLayout._insideTickLabelsAutorange&&se(St,St._fullLayout._insideTickLabelsAutorange).then(function(){St._fullLayout._insideTickLabelsAutorange=void 0})}),wt.push(c.drawData,c.finalDraw,u,m.addLinks,m.rehover,m.redrag,m.reselect,m.doAutoMargin,function(St){St._fullLayout._insideTickLabelsAutorange&&He&&l.saveRangeInitial(St,!0)},m.previousPromises);var Ot=y.syncOrAsync(wt,ve);return Ot&&Ot.then||(Ot=Promise.resolve()),Ot.then(function(){return M(ve),ve})},ie.purge=function(ve){var Te=(ve=y.getGraphDiv(ve))._fullLayout||{};return m.cleanPlot([],{},ve._fullData||[],Te),m.purge(ve),r.purge(ve),Te._container&&Te._container.remove(),delete ve._context,ve},ie.react=function(ve,Te,Le,Oe){var Ne,Be;ve=y.getGraphDiv(ve),_.clearPromiseQueue(ve);var ye,Ce,Ue,Qe,rt,Ke,He=ve._fullData,Ve=ve._fullLayout;if(y.isPlotDiv(ve)&&He&&Ve){if(y.isPlainObject(Te)){var it=Te;Te=it.data,Le=it.layout,Oe=it.config,Ne=it.frames}var ze=!1;if(Oe){var je=y.extendDeep({},ve._context);ve._context=void 0,P(ve,Oe),ze=function ye(Ce,Ue){var Qe;for(Qe in Ce)if("_"!==Qe.charAt(0)){var rt=Ce[Qe],Ke=Ue[Qe];if(rt!==Ke)if(y.isPlainObject(rt)&&y.isPlainObject(Ke)){if(ye(rt,Ke))return!0}else{if(!Array.isArray(rt)||!Array.isArray(Ke)||rt.length!==Ke.length)return!0;for(var gt=0;gt<rt.length;gt++)if(rt[gt]!==Ke[gt]&&(!y.isPlainObject(rt[gt])||!y.isPlainObject(Ke[gt])||ye(rt[gt],Ke[gt])))return!0}}}(je,ve._context)}ve.data=Te||[],_.cleanData(ve.data),ve.layout=Le||{},_.cleanLayout(ve.layout),function(ye,Ce,Ue,Qe){var rt,Ke,gt,mt,Lt,Vt,dt,bt,Yt,It,jt=Qe._preGUI,Ie=[],et={},ht={};for(rt in jt){if(Lt=be(rt,pe)){if(Yt=Lt.head,It=Lt.tail,(mt=(gt=e(Qe,Ke=Lt.attr||Yt+".uirevision").get())&&he(Ke,Ce))&&mt===gt){if(null===(Vt=jt[rt])&&(Vt=void 0),Se(bt=(dt=e(Ce,rt)).get(),Vt)){void 0===bt&&"autorange"===It&&Ie.push(Yt),dt.set(G(e(Qe,rt).get()));continue}if("autorange"===It||"range["===It.substr(0,6)){var Xt=jt[Yt+".autorange"];if(Xt||null===Xt&&null===jt[Yt+".range[0]"]&&null===jt[Yt+".range[1]"]){if(!(Yt in et)){var tn=e(Ce,Yt).get();et[Yt]=tn&&(tn.autorange||!1!==tn.autorange&&(!tn.range||2!==tn.range.length))}if(et[Yt]){dt.set(G(e(Qe,rt).get()));continue}}}}}else y.warn("unrecognized GUI edit: "+rt);delete jt[rt],Lt&&"range["===Lt.tail.substr(0,6)&&(ht[Lt.head]=1)}for(var Kt=0;Kt<Ie.length;Kt++){var kn=Ie[Kt];if(ht[kn]){var Vn=e(Ce,kn).get();Vn&&delete Vn.autorange}}var Tn=Qe._tracePreGUI;for(var sn in Tn){var fn,dn=Tn[sn],Mn=null;for(rt in dn){if(!Mn){var En=xe(sn,Ue);if(En<0){delete Tn[sn];break}var jn=De(sn,ye,(fn=Ue[En]._fullInput).index);if(jn<0){delete Tn[sn];break}Mn=ye[jn]}if(Lt=be(rt,de)){if(Lt.attr?mt=(gt=e(Qe,Lt.attr).get())&&he(Lt.attr,Ce):(gt=fn.uirevision,void 0===(mt=Mn.uirevision)&&(mt=Ce.uirevision)),mt&&mt===gt&&(null===(Vt=dn[rt])&&(Vt=void 0),Se(bt=(dt=e(Mn,rt)).get(),Vt))){dt.set(G(e(fn,rt).get()));continue}}else y.warn("unrecognized GUI edit: "+rt+" in trace uid "+sn);delete dn[rt]}}}(ve.data,ve.layout,He,Ve),m.supplyDefaults(ve,{skipUpdateCalc:!0});var qe=ve._fullData,Ye=ve._fullLayout,ct=void 0===Ye.datarevision,vt=Ye.transition,wt=(ye=ve,Ce=Ve,Ue=Ye,Qe=ct,rt=vt,(Ke=T.layoutFlags()).arrays={},Ke.rangesAltered={},Ke.nChanges=0,Ke.nChangesAnim=0,ke(Ce,Ue,[],{getValObject:function gt(mt){return n.getLayoutValObject(Ue,mt)},flags:Ke,immutable:Qe,transition:rt,gd:ye}),(Ke.plot||Ke.calc)&&(Ke.layoutReplot=!0),rt&&Ke.nChanges&&Ke.nChangesAnim&&(Ke.anim=Ke.nChanges===Ke.nChangesAnim?"all":"some"),Ke),St=function(ye,Ce,Ue,Qe,rt,Ke){var gt=Ce.length===Ue.length;if(!rt&&!gt)return{fullReplot:!0,calc:!0};var mt,Lt,Vt=T.traceFlags();Vt.arrays={},Vt.nChanges=0,Vt.nChangesAnim=0;var dt={getValObject:function(Yt){var It=n.getTraceValObject(Lt,Yt);return!Lt._module.animatable&&It.anim&&(It.anim=!1),It},flags:Vt,immutable:Qe,transition:rt,newDataRevision:Ke,gd:ye},bt={};for(mt=0;mt<Ce.length;mt++)if(Ue[mt]){if(m.hasMakesDataTransform(Lt=Ue[mt]._fullInput)&&(Lt=Ue[mt]),bt[Lt.uid])continue;bt[Lt.uid]=1,ke(Ce[mt]._fullInput,Lt,[],dt)}return(Vt.calc||Vt.plot)&&(Vt.fullReplot=!0),rt&&Vt.nChanges&&Vt.nChangesAnim&&(Vt.anim=Vt.nChanges===Vt.nChangesAnim&&gt?"all":"some"),Vt}(ve,He,qe,ct,vt,wt.newDataRevision);if(ee(ve)&&(wt.layoutReplot=!0),St.calc||wt.calc){ve.calcdata=void 0;for(var ft=Object.getOwnPropertyNames(Ye),st=0;st<ft.length;st++){var Ct=ft[st],$t=Ct.substring(0,5);if("xaxis"===$t||"yaxis"===$t){var rn=Ye[Ct]._emptyCategories;rn&&rn()}}}else m.supplyDefaultsUpdateCalc(ve.calcdata,qe);var hn=[];if(Ne&&(ve._transitionData={},m.createTransitionData(ve),hn.push(function(){return ie.addFrames(ve,Ne)})),Ye.transition&&!ze&&(St.anim||wt.anim))wt.ticks&&hn.push(c.doTicksRelayout),m.doCalcdata(ve),c.doAutoRangeAndConstraints(ve),hn.push(function(){return m.transitionFromReact(ve,St,wt,Ve)});else if(St.fullReplot||wt.layoutReplot||ze)ve._fullLayout._skipDefaults=!0,hn.push(ie._doPlot);else{for(var cn in wt.arrays){var mn=wt.arrays[cn];if(mn.length){var nn=o.getComponentMethod(cn,"drawOne");if(nn!==y.noop)for(var Xe=0;Xe<mn.length;Xe++)nn(ve,mn[Xe]);else{var nt=o.getComponentMethod(cn,"draw");if(nt===y.noop)throw new Error("cannot draw components: "+cn);nt(ve)}}}hn.push(m.previousPromises),St.style&&hn.push(c.doTraceStyle),(St.colorbars||wt.colorbars)&&hn.push(c.doColorBars),wt.legend&&hn.push(c.doLegend),wt.layoutstyle&&hn.push(c.layoutStyles),wt.axrange&&j(hn),wt.ticks&&hn.push(c.doTicksRelayout),wt.modebar&&hn.push(c.doModeBar),wt.camera&&hn.push(c.doCamera),hn.push(M)}hn.push(m.rehover,m.redrag,m.reselect),(Be=y.syncOrAsync(hn,ve))&&Be.then||(Be=Promise.resolve(ve))}else Be=ie.newPlot(ve,Te,Le,Oe);return Be.then(function(){return ve.emit("plotly_react",{data:Te,layout:Le}),ve})},ie.redraw=function(ve){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);return _.cleanData(ve.data),_.cleanLayout(ve.layout),ve.calcdata=void 0,ie._doPlot(ve).then(function(){return ve.emit("plotly_redraw"),ve})},ie.relayout=se,ie.restyle=q,ie.setPlotConfig=function(ve){return y.extendFlat(h,ve)},ie.update=le,ie._guiRelayout=ce(se),ie._guiRestyle=ce(q),ie._guiUpdate=ce(le),ie._storeDirectGUIEdit=function(ve,Te,Le){for(var Oe in Le)ne(Oe,e(ve,Oe).get(),Le[Oe],Te)}},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(v,ae,ie){"use strict";var p={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},g={};(function b(y,e){for(var r in y){var t=y[r];t.valType?e[r]=t.dflt:(e[r]||(e[r]={}),b(t,e[r]))}})(p,g),ae.exports={configAttributes:p,dfltConfig:g}},{}],554:[function(v,ae,ie){"use strict";var p=v("../registry"),g=v("../lib"),b=v("../plots/attributes"),y=v("../plots/layout_attributes"),e=v("../plots/frame_attributes"),r=v("../plots/animation_attributes"),t=v("./plot_config").configAttributes,o=v("./edit_types"),n=g.extendDeepAll,m=g.isPlainObject,l=g.isArrayOrTypedArray,i=g.nestedProperty,f=g.valObjectMeta,u=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function s(x,w,M){if(!x)return!1;if(x._isLinkedToArray)if(d(w[M]))M++;else if(M<w.length)return!1;for(;M<w.length;M++){var D=x[w[M]];if(!m(D)||(x=D,M===w.length-1))break;if(x._isLinkedToArray){if(!d(w[++M]))return!1}else if("info_array"===x.valType){var C=w[++M];if(!d(C))return!1;var P=x.items;if(Array.isArray(P)){if(C>=P.length)return!1;if(2===x.dimensions){if(M++,w.length===M)return x;var L=w[M];if(!d(L))return!1;x=P[C][L]}else x=P[C]}else x=P}}return x}function d(x){return x===Math.round(x)&&x>=0}function h(){var x,w,M={};for(x in n(M,y),p.subplotsRegistry)if((w=p.subplotsRegistry[x]).layoutAttributes)if(Array.isArray(w.attr))for(var D=0;D<w.attr.length;D++)c(M,w,w.attr[D]);else c(M,w,"subplot"===w.attr?w.name:w.attr);for(x in p.componentsRegistry){var C=(w=p.componentsRegistry[x]).schema;if(C&&(C.subplots||C.layout)){var P=C.subplots;if(P&&P.xaxis&&!P.yaxis)for(var L in P.xaxis)delete M.yaxis[L]}else"colorscale"===w.name?n(M,w.layoutAttributes):w.layoutAttributes&&T(M,w.layoutAttributes,w.name)}return{layoutAttributes:_(M)}}function a(){var x={frames:n({},e)};return _(x),x.frames}function _(x){return ie.crawl(x,function(M,D,C){ie.isValObject(M)?!0!==M.arrayOk&&"data_array"!==M.valType||(C[D+"src"]={valType:"string",editType:"none"}):m(M)&&(M.role="object")}),ie.crawl(x,function(M,D,C){if(M){var P=M._isLinkedToArray;P&&(delete M._isLinkedToArray,C[D]={items:{}},C[D].items[P]=M,C[D].role="object")}}),function(w){!function M(D){for(var C in D)if(m(D[C]))M(D[C]);else if(Array.isArray(D[C]))for(var P=0;P<D[C].length;P++)M(D[C][P]);else D[C]instanceof RegExp&&(D[C]=D[C].toString())}(w)}(x),x}function c(x,w,M){var D=i(x,M),C=n({},w.layoutAttributes);C._isSubplotObj=!0,D.set(C)}function T(x,w,M){var D=i(x,M);D.set(n(D.get()||{},w))}ie.IS_SUBPLOT_OBJ="_isSubplotObj",ie.IS_LINKED_TO_ARRAY="_isLinkedToArray",ie.DEPRECATED="_deprecated",ie.UNDERSCORE_ATTRS=u,ie.get=function(){var x={};p.allTypes.forEach(function(M){x[M]=function(D){var C,P;P=(C=p.modules[D]._module).basePlotModule;var L={type:null},S=n({},b),E=n({},C.attributes);ie.crawl(E,function(q,G,K,ne,X){i(S,X).set(void 0),void 0===q&&i(E,X).set(void 0)}),n(L,S),p.traceIs(D,"noOpacity")&&delete L.opacity,p.traceIs(D,"showLegend")||(delete L.showlegend,delete L.legendgroup),p.traceIs(D,"noHover")&&(delete L.hoverinfo,delete L.hoverlabel),C.selectPoints||delete L.selectedpoints,n(L,E),P.attributes&&n(L,P.attributes),L.type=D;var N={meta:C.meta||{},categories:C.categories||{},animatable:Boolean(C.animatable),type:D,attributes:_(L)};if(C.layoutAttributes){var z={};n(z,C.layoutAttributes),N.layoutAttributes=_(z)}return C.animatable||ie.crawl(N,function(q){ie.isValObject(q)&&"anim"in q&&delete q.anim}),N}(M)});var w={};return Object.keys(p.transformsRegistry).forEach(function(M){var D,P;w[M]=(P=n({},p.transformsRegistry[D=M].attributes),Object.keys(p.componentsRegistry).forEach(function(L){var S=p.componentsRegistry[L];S.schema&&S.schema.transforms&&S.schema.transforms[D]&&Object.keys(S.schema.transforms[D]).forEach(function(E){T(P,S.schema.transforms[D][E],E)})}),{attributes:_(P)})}),{defs:{valObjects:f,metaKeys:u.concat(["description","role","editType","impliedEdits"]),editType:{traces:o.traces,layout:o.layout},impliedEdits:{}},traces:x,layout:h(),transforms:w,frames:a(),animation:_(r),config:_(t)}},ie.crawl=function(x,w,M,D){var C=M||0;D=D||"",Object.keys(x).forEach(function(P){var L=x[P];if(-1===u.indexOf(P)){var S=(D?D+".":"")+P;w(L,P,x,C,S),ie.isValObject(L)||m(L)&&"impliedEdits"!==P&&ie.crawl(L,w,C+1,S)}})},ie.isValObject=function(x){return x&&void 0!==x.valType},ie.findArrayAttributes=function(x){var w,M,D=[],C=[],P=[];function L(q,G,K,ne){C=C.slice(0,ne).concat([G]),P=P.slice(0,ne).concat([q&&q._isLinkedToArray]),q&&("data_array"===q.valType||!0===q.arrayOk)&&("colorbar"!==C[ne-1]||"ticktext"!==G&&"tickvals"!==G)&&function X(J,se,V){var j=J[C[se]],H=V+C[se];if(se===C.length-1)l(j)&&D.push(M+H);else if(P[se]){if(Array.isArray(j))for(var oe=0;oe<j.length;oe++)m(j[oe])&&X(j[oe],se+1,H+"["+oe+"].")}else m(j)&&X(j,se+1,H+".")}(w,0,"")}w=x,M="",ie.crawl(b,L),x._module&&x._module.attributes&&ie.crawl(x._module.attributes,L);var S=x.transforms;if(S)for(var E=0;E<S.length;E++){var N=S[E],z=N._module;z&&(M="transforms["+E+"].",w=N,ie.crawl(z.attributes,L))}return D},ie.getTraceValObject=function(x,w){var M,D,C=w[0],P=1;if("transforms"===C){if(1===w.length)return b.transforms;var L=x.transforms;if(!Array.isArray(L)||!L.length)return!1;var S=w[1];if(!d(S)||S>=L.length)return!1;D=(M=(p.transformsRegistry[L[S].type]||{}).attributes)&&M[w[2]],P=3}else{var E=x._module;if(E||(E=(p.modules[x.type||b.type.dflt]||{})._module),!E)return!1;if(!(D=(M=E.attributes)&&M[C])){var N=E.basePlotModule;N&&N.attributes&&(D=N.attributes[C])}D||(D=b[C])}return s(D,w,P)},ie.getLayoutValObject=function(x,w){return s(function(M,D){var C,P,L,S,E=M._basePlotModules;if(E){var N;for(C=0;C<E.length;C++){if((L=E[C]).attrRegex&&L.attrRegex.test(D)){if(L.layoutAttrOverrides)return L.layoutAttrOverrides;!N&&L.layoutAttributes&&(N=L.layoutAttributes)}var z=L.baseLayoutAttrOverrides;if(z&&D in z)return z[D]}if(N)return N}var q=M._modules;if(q)for(C=0;C<q.length;C++)if((S=q[C].layoutAttributes)&&D in S)return S[D];for(P in p.componentsRegistry){if("colorscale"===(L=p.componentsRegistry[P]).name&&0===D.indexOf("coloraxis"))return L.layoutAttributes[D];if(!L.schema&&D===L.name)return L.layoutAttributes}return D in y&&y[D]}(x,w[0]),w,1)}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plots/attributes"),b={name:{valType:"string",editType:"none"}};function y(r){return r&&"string"==typeof r}function e(r){return"s"!==r.charAt(r.length-1)&&p.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}b.templateitemname={valType:"string",editType:"calc"},ie.templatedArray=function(r,t){return t._isLinkedToArray=r,t.name=b.name,t.templateitemname=b.templateitemname,t},ie.traceTemplater=function(r){var t,o,n={};for(t in r)o=r[t],Array.isArray(o)&&o.length&&(n[t]=0);return{newTrace:function(m){var l={type:t=p.coerce(m,{},g,"type"),_template:null};if(t in n){var i=n[t]%(o=r[t]).length;n[t]++,l._template=o[i]}return l}}},ie.newContainer=function(r,t,o){var n=r._template,m=n&&(n[t]||o&&n[o]);return p.isPlainObject(m)||(m=null),r[t]={_template:m}},ie.arrayTemplater=function(r,t,o){var n=r._template,m=n&&n[e(t)],l=n&&n[t];Array.isArray(l)&&l.length||(l=[]);var i={};return{newItem:function(f){var u={name:f.name,_input:f},s=u.templateitemname=f.templateitemname;if(!y(s))return u._template=m,u;for(var d=0;d<l.length;d++){var h=l[d];if(h.name===s)return i[s]=1,u._template=h,u}return u[o]=f[o]||!1,u._template=!1,u},defaultItems:function(){for(var f=[],u=0;u<l.length;u++){var s=l[u],d=s.name;if(y(d)&&!i[d]){var h={_template:s,name:d,_input:{_templateitemname:d}};h.templateitemname=s.templateitemname,f.push(h),i[d]=1}}return f}}},ie.arrayDefaultKey=e,ie.arrayEditor=function(r,t,o){var n=(p.nestedProperty(r,t).get()||[]).length,m=o._index,l=m>=n&&(o._input||{})._templateitemname;l&&(m=n);var i,f=t+"["+m+"]";function u(){i={},l&&(i[f]={},i[f].templateitemname=l)}function s(h,a){l?p.nestedProperty(i[f],h).set(a):i[f+"."+h]=a}function d(){var h=i;return u(),h}return u(),{modifyBase:function(h,a){i[h]=a},modifyItem:s,getUpdateObj:d,applyUpdate:function(h,a){h&&s(h,a);var _=d();for(var c in _)p.nestedProperty(r,c).set(_[c])}}}},{"../lib":515,"../plots/attributes":562}],556:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../registry"),b=v("../plots/plots"),y=v("../lib"),e=v("../lib/clear_gl_canvases"),r=v("../components/color"),t=v("../components/drawing"),o=v("../components/titles"),n=v("../components/modebar"),m=v("../plots/cartesian/axes"),l=v("../constants/alignment"),i=v("../plots/cartesian/constraints"),f=i.enforce,u=i.clean,s=v("../plots/cartesian/autorange").doAutoRange;function d(w,M,D){for(var C=0;C<D.length;C++){var P=D[C][0],L=D[C][1];if(!(P[0]>=w[1]||P[1]<=w[0])&&L[0]<M[1]&&L[1]>M[0])return!0}return!1}function h(w){var M,D,C,P,L,S,E=w._fullLayout,N=E._size,z=N.p,q=m.list(w,"",!0);if(E._paperdiv.style({width:w._context.responsive&&E.autosize&&!w._context._hasZeroWidth&&!w.layout.width?"100%":E.width+"px",height:w._context.responsive&&E.autosize&&!w._context._hasZeroHeight&&!w.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(t.setSize,E.width,E.height),w._context.setBackground(w,E.paper_bgcolor),ie.drawMainTitle(w),n.manage(w),!E._has("cartesian"))return b.previousPromises(w);function G(Ye,ct,vt){var wt=Ye._lw/2;return"x"===Ye._id.charAt(0)?ct?"top"===vt?ct._offset-z-wt:ct._offset+ct._length+z+wt:N.t+N.h*(1-(Ye.position||0))+wt%1:ct?"right"===vt?ct._offset+ct._length+z+wt:ct._offset-z-wt:N.l+N.w*(Ye.position||0)+wt%1}for(M=0;M<q.length;M++){var K=(P=q[M])._anchorAxis;P._linepositions={},P._lw=t.crispRound(w,P.linewidth,1),P._mainLinePosition=G(P,K,P.side),P._mainMirrorPosition=P.mirror&&K?G(P,K,l.OPPOSITE_SIDE[P.side]):null}var ne=[],X=[],J=[],se=1===r.opacity(E.paper_bgcolor)&&1===r.opacity(E.plot_bgcolor)&&E.paper_bgcolor===E.plot_bgcolor;for(D in E._plots)if((C=E._plots[D]).mainplot)C.bg&&C.bg.remove(),C.bg=void 0;else{var V=C.xaxis.domain,j=C.yaxis.domain,H=C.plotgroup;if(d(V,j,J)){var oe=H.node(),U=C.bg=y.ensureSingle(H,"rect","bg");oe.insertBefore(U.node(),oe.childNodes[0]),X.push(D)}else H.select("rect.bg").remove(),J.push([V,j]),se||(ne.push(D),X.push(D))}var te,ee,le,ce,pe,de,be,he,xe,De,Se,ke,Fe,ve=E._bgLayer.selectAll(".bg").data(ne);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(Ye){E._plots[Ye].bg=p.select(this)}),M=0;M<X.length;M++)L=(C=E._plots[X[M]]).xaxis,S=C.yaxis,C.bg&&void 0!==L._offset&&void 0!==S._offset&&C.bg.call(t.setRect,L._offset-z,S._offset-z,L._length+2*z,S._length+2*z).call(r.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(D in E._plots){L=(C=E._plots[D]).xaxis,S=C.yaxis;var Te,Le,Oe=C.clipId="clip"+E._uid+D+"plot",Ne=y.ensureSingleById(E._clips,"clipPath",Oe,function(Ye){Ye.classed("plotclip",!0).append("rect")});C.clipRect=Ne.select("rect").attr({width:L._length,height:S._length}),t.setTranslate(C.plot,L._offset,S._offset),C._hasClipOnAxisFalse?(Te=null,Le=Oe):(Te=Oe,Le=null),t.setClipUrl(C.plot,Te,w),C.layerClipId=Le}function Be(Ye){return"M"+te+","+Ye+"H"+ee}function He(Ye){return"M"+L._offset+","+Ye+"h"+L._length}function Ve(Ye){return"M"+Ye+","+he+"V"+be}function it(Ye){return"M"+Ye+","+S._offset+"v"+S._length}function ze(Ye,ct,vt){if(!Ye.showline||D!==Ye._mainSubplot)return"";if(!Ye._anchorAxis)return vt(Ye._mainLinePosition);var wt=ct(Ye._mainLinePosition);return Ye.mirror&&(wt+=ct(Ye._mainMirrorPosition)),wt}for(D in E._plots){S=(C=E._plots[D]).yaxis;var je="M0,0";a(L=C.xaxis,D)&&(pe=c(L,"left",S,q),te=L._offset-(pe?z+pe:0),de=c(L,"right",S,q),ee=L._offset+L._length+(de?z+de:0),le=G(L,S,"bottom"),ce=G(L,S,"top"),!(Fe=!L._anchorAxis||D!==L._mainSubplot)||"allticks"!==L.mirror&&"all"!==L.mirror||(L._linepositions[D]=[le,ce]),je=ze(L,Be,He),Fe&&L.showline&&("all"===L.mirror||"allticks"===L.mirror)&&(je+=Be(le)+Be(ce)),C.xlines.style("stroke-width",L._lw+"px").call(r.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),C.xlines.attr("d",je);var qe="M0,0";a(S,D)&&(Se=c(S,"bottom",L,q),be=S._offset+S._length+(Se?z:0),ke=c(S,"top",L,q),he=S._offset-(ke?z:0),xe=G(S,L,"left"),De=G(S,L,"right"),!(Fe=!S._anchorAxis||D!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[D]=[xe,De]),qe=ze(S,Ve,it),Fe&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(qe+=Ve(xe)+Ve(De)),C.ylines.style("stroke-width",S._lw+"px").call(r.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),C.ylines.attr("d",qe)}return m.makeClipPaths(w),b.previousPromises(w)}function a(w,M){return(w.ticks||w.showline)&&(M===w._mainSubplot||"all"===w.mirror||"allticks"===w.mirror)}function _(w,M,D){if(!D.showline||!D._lw)return!1;if("all"===D.mirror||"allticks"===D.mirror)return!0;var C=D._anchorAxis;if(!C)return!1;var P=l.FROM_BL[M];return D.side===M?C.domain[P]===w.domain[P]:D.mirror&&C.domain[1-P]===w.domain[1-P]}function c(w,M,D,C){if(_(w,M,D))return D._lw;for(var P=0;P<C.length;P++){var L=C[P];if(L._mainAxis===D._mainAxis&&_(w,M,L))return L._lw}return 0}function T(w,M){var D=w.title,C=w._size,P=0;return"paper"===("start"===M?P=D.pad.l:"end"===M&&(P=-D.pad.r),D.xref)?C.l+C.w*D.x+P:w.width*D.x+P}function x(w,M){var D=w.title,C=w._size,P=0;return"0em"!==M&&M?M===l.CAP_SHIFT+"em"&&(P=D.pad.t):P=-D.pad.b,"auto"===D.y?C.t/2:"paper"===D.yref?C.t+C.h-C.h*D.y+P:w.height-w.height*D.y+P}ie.layoutStyles=function(w){return y.syncOrAsync([b.doAutoMargin,h],w)},ie.drawMainTitle=function(w){var L,S,M=w._fullLayout,D=(S="middle",y.isRightAnchor(L=M.title)?S="end":y.isLeftAnchor(L)&&(S="start"),S),C=function(P){var L=P.title,S="0em";return y.isTopAnchor(L)?S=l.CAP_SHIFT+"em":y.isMiddleAnchor(L)&&(S=l.MID_SHIFT+"em"),S}(M);o.draw(w,"gtitle",{propContainer:M,propName:"title.text",placeholder:M._dfltTitle.plot,attributes:{x:T(M,D),y:x(M,C),"text-anchor":D,dy:C}})},ie.doTraceStyle=function(w){var M,D=w.calcdata,C=[];for(M=0;M<D.length;M++){var P=D[M],L=P[0]||{},S=L.trace||{},E=S._module||{},N=E.arraysToCalcdata;N&&N(P,S);var z=E.editStyle;z&&C.push({fn:z,cd0:L})}if(C.length){for(M=0;M<C.length;M++){var q=C[M];q.fn(w,q.cd0)}e(w),ie.redrawReglTraces(w)}return b.style(w),g.getComponentMethod("legend","draw")(w),b.previousPromises(w)},ie.doColorBars=function(w){return g.getComponentMethod("colorbar","draw")(w),b.previousPromises(w)},ie.layoutReplot=function(w){var M=w.layout;return w.layout=void 0,g.call("_doPlot",w,"",M)},ie.doLegend=function(w){return g.getComponentMethod("legend","draw")(w),b.previousPromises(w)},ie.doTicksRelayout=function(w){return m.draw(w,"redraw"),w._fullLayout._hasOnlyLargeSploms&&(g.subplotsRegistry.splom.updateGrid(w),e(w),ie.redrawReglTraces(w)),ie.drawMainTitle(w),b.previousPromises(w)},ie.doModeBar=function(w){var M=w._fullLayout;n.manage(w);for(var D=0;D<M._basePlotModules.length;D++){var C=M._basePlotModules[D].updateFx;C&&C(w)}return b.previousPromises(w)},ie.doCamera=function(w){for(var M=w._fullLayout,D=M._subplots.gl3d,C=0;C<D.length;C++){var P=M[D[C]];P._scene.setViewport(P)}},ie.drawData=function(w){var M=w._fullLayout;e(w);for(var D=M._basePlotModules,C=0;C<D.length;C++)D[C].plot(w);return ie.redrawReglTraces(w),b.style(w),g.getComponentMethod("selections","draw")(w),g.getComponentMethod("shapes","draw")(w),g.getComponentMethod("annotations","draw")(w),g.getComponentMethod("images","draw")(w),M._replotting=!1,b.previousPromises(w)},ie.redrawReglTraces=function(w){var M=w._fullLayout;if(M._has("regl")){var D,C,P=w._fullData,L=[],S=[];for(M._hasOnlyLargeSploms&&M._splomGrid.draw(),D=0;D<P.length;D++){var E=P[D];!0===E.visible&&0!==E._length&&("splom"===E.type?M._splomScenes[E.uid].draw():"scattergl"===E.type?y.pushUnique(L,E.xaxis+E.yaxis):"scatterpolargl"===E.type&&y.pushUnique(S,E.subplot))}for(D=0;D<L.length;D++)(C=M._plots[L[D]])._scene&&C._scene.draw();for(D=0;D<S.length;D++)(C=M[S[D]]._subplot)._scene&&C._scene.draw()}},ie.doAutoRangeAndConstraints=function(w){for(var M,D=m.list(w,"",!0),C={},P=0;P<D.length;P++)if(!C[(M=D[P])._id]){C[M._id]=1,u(w,M),s(w,M);var L=M._matchGroup;if(L)for(var S in L){var E=m.getFromId(w,S);s(w,E,M.range),C[S]=1}}f(w)},ie.finalDraw=function(w){g.getComponentMethod("rangeslider","draw")(w),g.getComponentMethod("rangeselector","draw")(w)},ie.drawMarginPushers=function(w){g.getComponentMethod("legend","draw")(w),g.getComponentMethod("rangeselector","draw")(w),g.getComponentMethod("sliders","draw")(w),g.getComponentMethod("updatemenus","draw")(w),g.getComponentMethod("colorbar","draw")(w)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(v,ae,ie){"use strict";var p=v("../lib"),g=p.isPlainObject,b=v("./plot_schema"),y=v("../plots/plots"),e=v("../plots/attributes"),r=v("./plot_template"),t=v("./plot_config").dfltConfig;function o(d,h){d=p.extendDeep({},d);var a,_,c=Object.keys(d).sort();function T(C,P,L){if(g(P)&&g(C))o(C,P);else if(Array.isArray(P)&&Array.isArray(C)){var S=r.arrayTemplater({_template:d},L);for(_=0;_<P.length;_++){var E=P[_],N=S.newItem(E)._template;N&&o(N,E)}var z=S.defaultItems();for(_=0;_<z.length;_++)P.push(z[_]._template);for(_=0;_<P.length;_++)delete P[_].templateitemname}}for(a=0;a<c.length;a++){var x=c[a],w=d[x];if(x in h?T(w,h[x],x):h[x]=w,n(x)===x)for(var M in h){var D=n(M);M===D||D!==x||M in d||T(w,h[M],x)}}}function n(d){return d.replace(/[0-9]+$/,"")}function m(d,h,a,_,c){var T=c&&a(c);for(var x in d){var w=d[x],M=f(d,x,_),D=f(d,x,c),C=a(D);if(!C){var P=n(x);P!==x&&(C=a(D=f(d,P,c)))}if(!(T&&T===C||!C||C._noTemplating||"data_array"===C.valType||C.arrayOk&&Array.isArray(w)))if(!C.valType&&g(w))m(w,h,a,M,D);else if(C._isLinkedToArray&&Array.isArray(w))for(var L=!1,S=0,E={},N=0;N<w.length;N++){var z=w[N];if(g(z)){var q=z.name;if(q)E[q]||(m(z,h,a,f(w,S,M),f(w,S,D)),S++,E[q]=1);else if(!L){var G=f(d,r.arrayDefaultKey(x),_),K=f(w,S,M);m(z,h,a,K,f(w,S,D));var ne=p.nestedProperty(h,K);p.nestedProperty(h,G).set(ne.get()),ne.set(null),L=!0}}}else p.nestedProperty(h,M).set(w)}}function l(d,h){return b.getLayoutValObject(d,p.nestedProperty({},h).parts)}function i(d,h){return b.getTraceValObject(d,p.nestedProperty({},h).parts)}function f(d,h,a){return a?Array.isArray(d)?a+"["+h+"]":a+"."+h:h}function u(d){for(var h=0;h<d.length;h++)if(g(d[h]))return!0}function s(d){var h;switch(d.code){case"data":h="The template has no key data.";break;case"layout":h="The template has no key layout.";break;case"missing":h=d.path?"There are no templates for item "+d.path+" with name "+d.templateitemname:"There are no templates for trace "+d.index+", of type "+d.traceType+".";break;case"unused":h=d.path?"The template item at "+d.path+" was not used in constructing the plot.":d.dataCount?"Some of the templates of type "+d.traceType+" were not used. The template has "+d.templateCount+" traces, the data only has "+d.dataCount+" of this type.":"The template has "+d.templateCount+" traces of type "+d.traceType+" but there are none in the data.";break;case"reused":h="Some of the templates of type "+d.traceType+" were used more than once. The template has "+d.templateCount+" traces, the data has "+d.dataCount+" of this type."}return d.msg=h,d}ie.makeTemplate=function(d){d=p.isPlainObject(d)?d:p.getGraphDiv(d),d=p.extendDeep({_context:t},{data:d.data,layout:d.layout}),y.supplyDefaults(d);var h=d.data||[],a=d.layout||{};a._basePlotModules=d._fullLayout._basePlotModules,a._modules=d._fullLayout._modules;var _={data:{},layout:{}};h.forEach(function(S){var E={};m(S,E,i.bind(null,S));var N=p.coerce(S,{},e,"type"),z=_.data[N];z||(z=_.data[N]=[]),z.push(E)}),m(a,_.layout,l.bind(null,a)),delete _.layout.template;var c=a.template;if(g(c)){var T,x,w,M,D,C,P=c.layout;g(P)&&o(P,_.layout);var L=c.data;if(g(L)){for(x in _.data)if(w=L[x],Array.isArray(w)){for(C=(D=_.data[x]).length,M=w.length,T=0;T<C;T++)o(w[T%M],D[T]);for(T=C;T<M;T++)D.push(p.extendDeep({},w[T]))}for(x in L)x in _.data||(_.data[x]=p.extendDeep([],L[x]))}}return _},ie.validateTemplate=function(d,h){var a=p.extendDeep({},{_context:t,data:d.data,layout:d.layout}),_=a.layout||{};g(h)||(h=_.template||{});var c=h.layout,T=h.data,x=[];a.layout=_,a.layout.template=h,y.supplyDefaults(a);var w=a._fullLayout,M=a._fullData,D={};if(g(c)?(function z(q,G){for(var K in q)if("_"!==K.charAt(0)&&g(q[K])){var ne,X=n(K),J=[];for(ne=0;ne<G.length;ne++)J.push(f(q,K,G[ne])),X!==K&&J.push(f(q,X,G[ne]));for(ne=0;ne<J.length;ne++)D[J[ne]]=1;z(q[K],J)}}(w,["layout"]),function z(q,G){for(var K in q)if(-1===K.indexOf("defaults")&&g(q[K])){var ne=f(q,K,G);D[ne]?z(q[K],ne):x.push({code:"unused",path:ne})}}(c,"layout")):x.push({code:"layout"}),g(T)){for(var C,P={},L=0;L<M.length;L++){var S=M[L];P[C=S.type]=(P[C]||0)+1,S._fullInput._template||x.push({code:"missing",index:S._fullInput.index,traceType:C})}for(C in T){var E=T[C].length,N=P[C]||0;E>N?x.push({code:"unused",traceType:C,templateCount:E,dataCount:N}):N>E&&x.push({code:"reused",traceType:C,templateCount:E,dataCount:N})}}else x.push({code:"data"});if(function z(q,G){for(var K in q)if("_"!==K.charAt(0)){var ne=q[K],X=f(q,K,G);g(ne)?(Array.isArray(q)&&!1===ne._template&&ne.templateitemname&&x.push({code:"missing",path:X,templateitemname:ne.templateitemname}),z(ne,X)):Array.isArray(ne)&&u(ne)&&z(ne,X)}}({data:M,layout:w},""),x.length)return x.map(s)}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("./plot_api"),b=v("../plots/plots"),y=v("../lib"),e=v("../snapshot/helpers"),r=v("../snapshot/tosvg"),t=v("../snapshot/svgtoimg"),o=v("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};ae.exports=function(m,l){var i,f,u,s;function d(N){return!(N in l)||y.validate(l[N],n[N])}if(l=l||{},y.isPlainObject(m)?(i=m.data||[],f=m.layout||{},u=m.config||{},s={}):(m=y.getGraphDiv(m),i=y.extendDeep([],m.data),f=y.extendDeep({},m.layout),u=m._context,s=m._fullLayout||{}),!d("width")&&null!==l.width||!d("height")&&null!==l.height)throw new Error("Height and width should be pixel values.");if(!d("format"))throw new Error("Export format is not "+y.join2(n.format.values,", "," or ")+".");var h={};function a(N,z){return y.coerce(l,h,n,N,z)}var _=a("format"),c=a("width"),T=a("height"),x=a("scale"),w=a("setBackground"),M=a("imageDataOnly"),D=document.createElement("div");D.style.position="absolute",D.style.left="-5000px",document.body.appendChild(D);var C=y.extendFlat({},f);c?C.width=c:null===l.width&&p(s.width)&&(C.width=s.width),T?C.height=T:null===l.height&&p(s.height)&&(C.height=s.height);var P=y.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),L=e.getRedrawFunc(D);function S(){return new Promise(function(N){setTimeout(N,e.getDelay(D._fullLayout))})}function E(){return new Promise(function(N,z){var q=r(D,_,x),G=D._fullLayout.width,K=D._fullLayout.height;function ne(){g.purge(D),document.body.removeChild(D)}if("full-json"===_){var X=b.graphJson(D,!1,"keepdata","object",!0,!0);return X.version=o,X=JSON.stringify(X),ne(),N(M?X:e.encodeJSON(X))}if(ne(),"svg"===_)return N(M?q:e.encodeSVG(q));var J=document.createElement("canvas");J.id=y.randstr(),t({format:_,width:G,height:K,scale:x,canvas:J,svg:q,promise:!0}).then(N).catch(z)})}return new Promise(function(N,z){g.newPlot(D,i,C,P).then(L).then(S).then(E).then(function(q){var G;N((G=q,M?G.replace(e.IMAGE_URL_PREFIX,""):G))}).catch(function(q){z(q)})})}},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plots/plots"),b=v("./plot_schema"),y=v("./plot_config").dfltConfig,e=p.isPlainObject,r=Array.isArray,t=p.isArrayOrTypedArray;function o(h,a,_,c,T,x){x=x||[];for(var w=Object.keys(h),M=0;M<w.length;M++){var D=w[M];if("transforms"!==D){var C=x.slice();C.push(D);var P=h[D],L=a[D],S=u(_,D),E=(S||{}).valType,N="info_array"===E,z="colorscale"===E,q=(S||{}).items;if(f(_,D))if(e(P)&&e(L)&&"any"!==E)o(P,L,S,c,T,C);else if(N&&r(P)){P.length>L.length&&c.push(i("unused",T,C.concat(L.length)));var G,K,X,J,se=L.length,V=Array.isArray(q);if(V&&(se=Math.min(se,q.length)),2===S.dimensions)for(K=0;K<se;K++)if(r(P[K])){P[K].length>L[K].length&&c.push(i("unused",T,C.concat(K,L[K].length)));var j=L[K].length;for(G=0;G<(V?Math.min(j,q[K].length):j);G++)J=L[K][G],p.validate(X=P[K][G],V?q[K][G]:q)?J!==X&&J!==+X&&c.push(i("dynamic",T,C.concat(K,G),X,J)):c.push(i("value",T,C.concat(K,G),X))}else c.push(i("array",T,C.concat(K),P[K]));else for(K=0;K<se;K++)J=L[K],p.validate(X=P[K],V?q[K]:q)?J!==X&&J!==+X&&c.push(i("dynamic",T,C.concat(K),X,J)):c.push(i("value",T,C.concat(K),X))}else if(S.items&&!N&&r(P)){var H,oe,U=q[Object.keys(q)[0]],te=[];for(H=0;H<L.length;H++){var ee=L[H]._index||H;if((oe=C.slice()).push(ee),e(P[ee])&&e(L[H])){te.push(ee);var le=P[ee],ce=L[H];e(le)&&!1!==le.visible&&!1===ce.visible?c.push(i("invisible",T,oe)):o(le,ce,U,c,T,oe)}}for(H=0;H<P.length;H++)(oe=C.slice()).push(H),e(P[H])?-1===te.indexOf(H)&&c.push(i("unused",T,oe)):c.push(i("object",T,oe,P[H]))}else!e(P)&&e(L)?c.push(i("object",T,C,P)):t(P)||!t(L)||N||z?D in a?p.validate(P,S)?"enumerated"===S.valType&&(S.coerceNumber&&P!==+L||P!==L)&&c.push(i("dynamic",T,C,P,L)):c.push(i("value",T,C,P)):c.push(i("unused",T,C,P)):c.push(i("array",T,C,P));else c.push(i("schema",T,C))}}return c}function n(h,a){for(var _=h.layout.layoutAttributes,c=0;c<a.length;c++){var T=a[c],x=h.traces[T.type],w=x.layoutAttributes;w&&p.extendFlat(T.subplot?_[x.attributes.subplot.dflt]:_,w)}return _}ae.exports=function(h,a){void 0===h&&(h=[]),void 0===a&&(a={});var _,c,T=b.get(),x=[],w={_context:p.extendFlat({},y)};r(h)?(w.data=p.extendDeep([],h),_=h):(w.data=[],_=[],x.push(i("array","data"))),e(a)?(w.layout=p.extendDeep({},a),c=a):(w.layout={},c={},arguments.length>1&&x.push(i("object","layout"))),g.supplyDefaults(w);for(var M=w._fullData,D=_.length,C=0;C<D;C++){var P=_[C],L=["data",C];if(e(P)){var S=M[C],E=S.type,N=T.traces[E].attributes;N.type={valType:"enumerated",values:[E]},!1===S.visible&&!1!==P.visible&&x.push(i("invisible",L)),o(P,S,N,x,L);var z=P.transforms,q=S.transforms;if(z){r(z)||x.push(i("array",L,["transforms"])),L.push("transforms");for(var G=0;G<z.length;G++){var K=["transforms",G],ne=z[G].type;if(e(z[G])){var X=T.transforms[ne]?T.transforms[ne].attributes:{};X.type={valType:"enumerated",values:Object.keys(T.transforms)},o(z[G],q[G],X,x,L,K)}else x.push(i("object",L,K))}}}else x.push(i("object",L))}return o(c,w._fullLayout,n(T,M),x,"layout"),0===x.length?void 0:x};var m={object:function(h,a){return("layout"===h&&""===a?"The layout argument":"data"===h[0]&&""===a?"Trace "+h[1]+" in the data argument":l(h)+"key "+a)+" must be linked to an object container"},array:function(h,a){return("data"===h?"The data argument":l(h)+"key "+a)+" must be linked to an array container"},schema:function(h,a){return l(h)+"key "+a+" is not part of the schema"},unused:function(h,a,_){var c=e(_)?"container":"key";return l(h)+c+" "+a+" did not get coerced"},dynamic:function(h,a,_,c){return[l(h)+"key",a,"(set to '"+_+"')","got reset to","'"+c+"'","during defaults."].join(" ")},invisible:function(h,a){return(a?l(h)+"item "+a:"Trace "+h[1])+" got defaulted to be not visible"},value:function(h,a,_){return[l(h)+"key "+a,"is set to an invalid value ("+_+")"].join(" ")}};function l(h){return r(h)?"In data trace "+h[1]+", ":"In "+h+", "}function i(h,a,_,c,T){var x,w;_=_||"",r(a)?(x=a[0],w=a[1]):(x=a,w=null);var M=function(C){if(!r(C))return String(C);for(var P="",L=0;L<C.length;L++){var S=C[L];"number"==typeof S?P=P.substr(0,P.length-1)+"["+S+"]":P+=S,L<C.length-1&&(P+=".")}return P}(_),D=m[h](a,M,c,T);return p.log(D),{code:h,container:x,trace:w,path:_,astr:M,msg:D}}function f(h,a){var _=d(a),c=_.keyMinusId;return!!(c in h&&h[c]._isSubplotObj&&_.id)||a in h}function u(h,a){return a in h?h[a]:h[d(a).keyMinusId]}var s=p.counterRegex("([a-z]+)");function d(h){var a=h.match(s);return{keyMinusId:a&&a[1],id:a&&a[2]}}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(v,ae,ie){"use strict";ae.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plot_api/plot_template");ae.exports=function(b,y,e){var r,t,o=e.name,n=e.inclusionAttr||"visible",m=y[o],l=p.isArrayOrTypedArray(b[o])?b[o]:[],i=y[o]=[],f=g.arrayTemplater(y,o,n);for(r=0;r<l.length;r++){var u=l[r];p.isPlainObject(u)?t=f.newItem(u):(t=f.newItem({}))[n]=!1,t._index=r,!1!==t[n]&&e.handleItemDefaults(u,t,y,e),i.push(t)}var s=f.defaultItems();for(r=0;r<s.length;r++)(t=s[r])._index=i.length,e.handleItemDefaults({},t,y,e,{}),i.push(t);if(p.isArrayOrTypedArray(m)){var d=Math.min(m.length,i.length);for(r=0;r<d;r++)p.relinkPrivateKeys(i[r],m[r])}return i}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(v,ae,ie){"use strict";var p=v("./font_attributes"),g=v("../components/fx/attributes");ae.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:p({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:g.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=g.dateTime2ms,y=g.incrementMonth,e=v("../../constants/numerical").ONEAVGMONTH;ae.exports=function(r,t,o,n){if("date"!==t.type)return{vals:n};var m=r[o+"periodalignment"];if(!m)return{vals:n};var l,i=r[o+"period"];if(p(i)){if((i=+i)<=0)return{vals:n}}else if("string"==typeof i&&"M"===i.charAt(0)){var f=+i.substring(1);if(!(f>0&&Math.round(f)===f))return{vals:n};l=f}for(var u=t.calendar,s="start"===m,d="end"===m,a=b(r[o+"period0"],u)||0,_=[],c=[],T=[],x=n.length,w=0;w<x;w++){var M,D,C,P=n[w];if(l){for(M=Math.round((P-a)/(l*e)),C=y(a,l*M,u);C>P;)C=y(C,-l,u);for(;C<=P;)C=y(C,l,u);D=y(C,-l,u)}else{for(C=a+(M=Math.round((P-a)/i))*i;C>P;)C-=i;for(;C<=P;)C+=i;D=C-i}_[w]=s?D:d?C:(D+C)/2,c[w]=D,T[w]=C}return{vals:_,starts:c,ends:T}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(v,ae,ie){"use strict";ae.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../../lib"),y=v("../../constants/numerical").FP_SAFE,e=v("../../registry"),r=v("../../components/drawing"),t=v("./axis_ids"),o=t.getFromId,n=t.isLinked;function m(c,T){var x,w,M=[],D=c._fullLayout,C=i(D,T,0),P=i(D,T,1),L=f(c,T),S=L.min,E=L.max;if(0===S.length||0===E.length)return b.simpleMap(T.range,T.r2l);var N=S[0].val,z=E[0].val;for(x=1;x<S.length&&N===z;x++)N=Math.min(N,S[x].val);for(x=1;x<E.length&&N===z;x++)z=Math.max(z,E[x].val);var q=!1;if(T.range){var G=b.simpleMap(T.range,T.r2l);q=G[1]<G[0]}"reversed"===T.autorange&&(q=!0,T.autorange=!0);var K,ne,X,J,se,V,j=T.rangemode,H="tozero"===j,oe="nonnegative"===j,U=T._length,te=U/10,ee=0;for(x=0;x<S.length;x++)for(K=S[x],w=0;w<E.length;w++)(V=(ne=E[w]).val-K.val-l(T,K.val,ne.val))>0&&((se=U-C(K)-P(ne))>te?V/se>ee&&(X=K,J=ne,ee=V/se):V/U>ee&&(X={val:K.val,nopad:1},J={val:ne.val,nopad:1},ee=V/U));if(N===z){var le=N-1,ce=N+1;if(H)if(0===N)M=[0,1];else{var pe=(N>0?E:S).reduce(function(be,he){return Math.max(be,P(he))},0),de=N/(1-Math.min(.5,pe/U));M=N>0?[0,de]:[de,0]}else M=oe?[Math.max(0,le),Math.max(1,ce)]:[le,ce]}else H?(X.val>=0&&(X={val:0,nopad:1}),J.val<=0&&(J={val:0,nopad:1})):oe&&(X.val-ee*C(X)<0&&(X={val:0,nopad:1}),J.val<=0&&(J={val:1,nopad:1})),ee=(J.val-X.val-l(T,K.val,ne.val))/(U-C(X)-P(J)),M=[X.val-ee*C(X),J.val+ee*P(J)];return q&&M.reverse(),b.simpleMap(M,T.l2r||Number)}function l(c,T,x){var w=0;if(c.rangebreaks)for(var M=c.locateBreaks(T,x),D=0;D<M.length;D++){var C=M[D];w+=C.max-C.min}return w}function i(c,T,x){var w=.05*T._length,M=T._anchorAxis||{};if(-1!==(T.ticklabelposition||"").indexOf("inside")||-1!==(M.ticklabelposition||"").indexOf("inside")){var D="reversed"===T.autorange;if(!D){var C=b.simpleMap(T.range,T.r2l);D=C[1]<C[0]}D&&(x=!x)}var P=0;return n(c,T._id)||(P=function(L,S,E){var N=0,z="x"===S._id.charAt(0);for(var q in L._plots){var G=L._plots[q];if(S._id===G.xaxis._id||S._id===G.yaxis._id){var K=(z?G.yaxis:G.xaxis)||{};if(-1!==(K.ticklabelposition||"").indexOf("inside")&&(!E&&("left"===K.side||"bottom"===K.side)||E&&("top"===K.side||"right"===K.side))){if(K._vals){var ne=b.deg2rad(K._tickAngles[K._id+"tick"]||0),X=Math.abs(Math.cos(ne)),J=Math.abs(Math.sin(ne));K._vals[0].bb||K._selections[K._id+"tick"].each(function(U){var te=p.select(this);te.select(".text-math-group").empty()&&(U.bb=r.bBox(te.node()))});for(var V=0;V<K._vals.length;V++){var j=K._vals[V].bb;if(j){var H=6+j.width,oe=6+j.height;N=Math.max(N,z?Math.max(H*X,oe*J):Math.max(oe*X,H*J))}}}"inside"===K.ticks&&"inside"===K.ticklabelposition&&(N+=K.ticklen||0)}}}return N}(c,T,x)),w=Math.max(P,w),"domain"===T.constrain&&T._inputDomain&&(w*=(T._inputDomain[1]-T._inputDomain[0])/(T.domain[1]-T.domain[0])),function(L){return L.nopad?0:L.pad+(L.extrapad?w:P)}}function f(c,T,x){var w,M,D,C=T._id,L=c._fullLayout,S=[],E=[];function N(ne,X){for(w=0;w<X.length;w++){var J=ne[X[w]],se=(J._extremes||{})[C];if(!0===J.visible&&se){for(M=0;M<se.min.length;M++)u(S,(D=se.min[M]).val,D.pad,{extrapad:D.extrapad});for(M=0;M<se.max.length;M++)s(E,(D=se.max[M]).val,D.pad,{extrapad:D.extrapad})}}}if(N(c._fullData,T._traceIndices),N(L.annotations||[],T._annIndices||[]),N(L.shapes||[],T._shapeIndices||[]),T._matchGroup&&!x)for(var z in T._matchGroup)if(z!==T._id){var q=o(c,z),G=f(c,q,!0),K=T._length/q._length;for(M=0;M<G.min.length;M++)u(S,(D=G.min[M]).val,D.pad*K,{extrapad:D.extrapad});for(M=0;M<G.max.length;M++)s(E,(D=G.max[M]).val,D.pad*K,{extrapad:D.extrapad})}return{min:S,max:E}}function u(c,T,x,w){d(c,T,x,w,a)}function s(c,T,x,w){d(c,T,x,w,_)}function d(c,T,x,w,M){for(var D=w.tozero,C=w.extrapad,P=!0,L=0;L<c.length&&P;L++){var S=c[L];if(M(S.val,T)&&S.pad>=x&&(S.extrapad||!C)){P=!1;break}M(T,S.val)&&S.pad<=x&&(C||!S.extrapad)&&(c.splice(L,1),L--)}if(P){var E=D&&0===T;c.push({val:T,pad:E?0:x,extrapad:!E&&C})}}function h(c){return g(c)&&Math.abs(c)<y}function a(c,T){return c<=T}function _(c,T){return c>=T}ae.exports={getAutoRange:m,makePadFn:i,doAutoRange:function(c,T,x){if(T.setScale(),T.autorange){T.range=x?x.slice():m(c,T),T._r=T.range.slice(),T._rl=b.simpleMap(T._r,T.r2l);var w=T._input,M={};M[T._attr+".range"]=T.range,M[T._attr+".autorange"]=T.autorange,e.call("_storeDirectGUIEdit",c.layout,c._fullLayout._preGUI,M),w.range=T.range.slice(),w.autorange=T.autorange}var D=T._anchorAxis;if(D&&D.rangeslider){var C=D.rangeslider[T._name];C&&"auto"===C.rangemode&&(C.range=m(c,T)),D._input.rangeslider[T._name]=b.extendFlat({},C)}},findExtremes:function(c,T,x){x||(x={}),c._m||c.setScale();var w,M,D,C,P,L,S,E,N,z=[],q=[],G=T.length,K=x.padded||!1,ne=x.tozero&&("linear"===c.type||"-"===c.type),X="log"===c.type,J=!1,se=x.vpadLinearized||!1;function V(ce){if(Array.isArray(ce))return J=!0,function(de){return Math.max(Number(ce[de]||0),0)};var pe=Math.max(Number(ce||0),0);return function(){return pe}}var j=V((c._m>0?x.ppadplus:x.ppadminus)||x.ppad||0),H=V((c._m>0?x.ppadminus:x.ppadplus)||x.ppad||0),oe=V(x.vpadplus||x.vpad),U=V(x.vpadminus||x.vpad);if(!J){if(E=1/0,N=-1/0,X)for(w=0;w<G;w++)(M=T[w])<E&&M>0&&(E=M),M>N&&M<y&&(N=M);else for(w=0;w<G;w++)(M=T[w])<E&&M>-y&&(E=M),M>N&&M<y&&(N=M);T=[E,N],G=2}var te={tozero:ne,extrapad:K};function ee(ce){g(D=T[ce])&&(L=j(ce),S=H(ce),se?(C=c.c2l(D)-U(ce),P=c.c2l(D)+oe(ce)):(E=D-U(ce),N=D+oe(ce),X&&E<N/10&&(E=N/10),C=c.c2l(E),P=c.c2l(N)),ne&&(C=Math.min(0,C),P=Math.max(0,P)),h(C)&&u(z,C,S,te),h(P)&&s(q,P,L,te))}var le=Math.min(6,G);for(w=0;w<le;w++)ee(w);for(w=G-1;w>=le;w--)ee(w);return{min:z,max:q,opts:x}},concatExtremes:f}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../lib"),r=e.strTranslate,t=v("../../lib/svg_text_utils"),o=v("../../components/titles"),n=v("../../components/color"),m=v("../../components/drawing"),l=v("./layout_attributes"),i=v("./clean_ticks"),f=v("../../constants/numerical"),u=f.ONEMAXYEAR,s=f.ONEAVGYEAR,d=f.ONEMINYEAR,h=f.ONEMAXQUARTER,a=f.ONEAVGQUARTER,_=f.ONEMINQUARTER,c=f.ONEMAXMONTH,T=f.ONEAVGMONTH,x=f.ONEMINMONTH,w=f.ONEWEEK,M=f.ONEDAY,D=M/2,C=f.ONEHOUR,P=f.ONEMIN,L=f.ONESEC,S=f.MINUS_SIGN,E=f.BADNUM,N={K:"zeroline"},z={K:"gridline",L:"path"},q={K:"minor-gridline",L:"path"},G={K:"tick",L:"path"},K={K:"tick",L:"text"},ne={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},X=v("../../constants/alignment"),J=X.MID_SHIFT,se=X.CAP_SHIFT,V=X.LINE_SPACING,j=X.OPPOSITE_SIDE,H=ae.exports={};H.setConvert=v("./set_convert");var oe=v("./axis_autotype"),U=v("./axis_ids"),te=U.idSort,ee=U.isLinked;H.id2name=U.id2name,H.name2id=U.name2id,H.cleanId=U.cleanId,H.list=U.list,H.listIds=U.listIds,H.getFromId=U.getFromId,H.getFromTrace=U.getFromTrace;var le=v("./autorange");function ce(ye){var Ce=1e-4*(ye[1]-ye[0]);return[ye[0]-Ce,ye[1]+Ce]}H.getAutoRange=le.getAutoRange,H.findExtremes=le.findExtremes,H.coerceRef=function(ye,Ce,Ue,Qe,rt,Ke){var gt=Qe.charAt(Qe.length-1),mt=Ue._fullLayout._subplots[gt+"axis"],Lt=Qe+"ref",Vt={};return rt||(rt=mt[0]||("string"==typeof Ke?Ke:Ke[0])),Ke||(Ke=rt),mt=mt.concat(mt.map(function(dt){return dt+" domain"})),Vt[Lt]={valType:"enumerated",values:mt.concat(Ke?"string"==typeof Ke?[Ke]:Ke:[]),dflt:rt},e.coerce(ye,Ce,Vt,Lt)},H.getRefType=function(ye){return void 0===ye?ye:"paper"===ye?"paper":"pixel"===ye?"pixel":/( domain)$/.test(ye)?"domain":"range"},H.coercePosition=function(ye,Ce,Ue,Qe,rt,Ke){var gt,mt;if("range"!==H.getRefType(Qe))gt=e.ensureNumber,mt=Ue(rt,Ke);else{var Lt=H.getFromId(Ce,Qe);mt=Ue(rt,Ke=Lt.fraction2r(Ke)),gt=Lt.cleanPos}ye[rt]=gt(mt)},H.cleanPosition=function(ye,Ce,Ue){return("paper"===Ue||"pixel"===Ue?e.ensureNumber:H.getFromId(Ce,Ue).cleanPos)(ye)},H.redrawComponents=function(ye,Ce){Ce=Ce||H.listIds(ye);var Ue=ye._fullLayout;function Qe(rt,Ke,gt,mt){for(var Lt=y.getComponentMethod(rt,Ke),Vt={},dt=0;dt<Ce.length;dt++)for(var bt=Ue[H.id2name(Ce[dt])][gt],Yt=0;Yt<bt.length;Yt++){var It=bt[Yt];if(!Vt[It]&&(Lt(ye,It),Vt[It]=1,mt))return}}Qe("annotations","drawOne","_annIndices"),Qe("shapes","drawOne","_shapeIndices"),Qe("images","draw","_imgIndices",!0),Qe("selections","drawOne","_selectionIndices")};var pe=H.getDataConversions=function(ye,Ce,Ue,Qe){var rt,Ke="x"===Ue||"y"===Ue||"z"===Ue?Ue:Qe;if(Array.isArray(Ke)){if(rt={type:oe(Qe,void 0,{autotypenumbers:ye._fullLayout.autotypenumbers}),_categories:[]},H.setConvert(rt),"category"===rt.type)for(var gt=0;gt<Qe.length;gt++)rt.d2c(Qe[gt])}else rt=H.getFromTrace(ye,Ce,Ke);return rt?{d2c:rt.d2c,c2d:rt.c2d}:"ids"===Ke?{d2c:be,c2d:be}:{d2c:de,c2d:de}};function de(ye){return+ye}function be(ye){return String(ye)}function he(ye,Ce){return Math.abs((ye/Ce+.5)%1-.5)<.001}function xe(ye,Ce){return Math.abs(ye/Ce-1)<.001}function De(ye){return+ye.substring(1)}function Se(ye){var Ce=ce(e.simpleMap(ye.range,ye.r2l)),Ue=Math.min(Ce[0],Ce[1]),Qe=Math.max(Ce[0],Ce[1]),rt="category"===ye.type?ye.d2l_noadd:ye.d2l;"log"===ye.type&&"L"!==String(ye.dtick).charAt(0)&&(ye.dtick="L"+Math.pow(10,Math.floor(Math.min(ye.range[0],ye.range[1]))-1));for(var Ke=[],gt=0;gt<=1;gt++)if(!gt||ye.minor){var mt=gt?ye.minor.tickvals:ye.tickvals,Lt=gt?[]:ye.ticktext;if(mt){Array.isArray(Lt)||(Lt=[]);for(var Vt=0;Vt<mt.length;Vt++){var dt=rt(mt[Vt]);if(dt>Ue&&dt<Qe){var bt=void 0===Lt[Vt]?H.tickText(ye,dt):Ve(ye,dt,String(Lt[Vt]));gt&&(bt.minor=!0,bt.text=""),Ke.push(bt)}}}}return ye.rangebreaks&&(Ke=Ke.filter(function(Yt){return ye.maskBreaks(Yt.x)!==E})),Ke}H.getDataToCoordFunc=function(ye,Ce,Ue,Qe){return pe(ye,Ce,Ue,Qe).d2c},H.counterLetter=function(ye){var Ce=ye.charAt(0);return"x"===Ce?"y":"y"===Ce?"x":void 0},H.minDtick=function(ye,Ce,Ue,Qe){-1===["log","category","multicategory"].indexOf(ye.type)&&Qe?void 0===ye._minDtick?(ye._minDtick=Ce,ye._forceTick0=Ue):ye._minDtick&&((ye._minDtick/Ce+1e-6)%1<2e-6&&((Ue-ye._forceTick0)/Ce%1+1.000001)%1<2e-6?(ye._minDtick=Ce,ye._forceTick0=Ue):((Ce/ye._minDtick+1e-6)%1>2e-6||((Ue-ye._forceTick0)/ye._minDtick%1+1.000001)%1>2e-6)&&(ye._minDtick=0)):ye._minDtick=0},H.saveRangeInitial=function(ye,Ce){for(var Ue=H.list(ye,"",!0),Qe=!1,rt=0;rt<Ue.length;rt++){var Ke=Ue[rt],gt=void 0===Ke._rangeInitial;(gt&&!1===Ke.autorange||Ce&&(gt||Ke.range[0]!==Ke._rangeInitial[0]||Ke.range[1]!==Ke._rangeInitial[1]))&&(Ke._rangeInitial=Ke.range.slice(),Qe=!0)}return Qe},H.saveShowSpikeInitial=function(ye,Ce){for(var Ue=H.list(ye,"",!0),Qe=!1,rt="on",Ke=0;Ke<Ue.length;Ke++){var gt=Ue[Ke],mt=void 0===gt._showSpikeInitial;(mt||Ce&&(mt||gt.showspikes!==gt._showspikes))&&(gt._showSpikeInitial=gt.showspikes,Qe=!0),"on"!==rt||gt.showspikes||(rt="off")}return ye._fullLayout._cartesianSpikesEnabled=rt,Qe},H.autoBin=function(ye,Ce,Ue,Qe,rt,Ke){var gt,mt=e.aggNums(Math.min,null,ye),Lt=e.aggNums(Math.max,null,ye);if("category"===Ce.type||"multicategory"===Ce.type)return{start:mt-.5,end:Lt+.5,size:Math.max(1,Math.round(Ke)||1),_dataSpan:Lt-mt};if(rt||(rt=Ce.calendar),gt="log"===Ce.type?{type:"linear",range:[mt,Lt]}:{type:Ce.type,range:e.simpleMap([mt,Lt],Ce.c2r,0,rt),calendar:rt},H.setConvert(gt),Ke=Ke&&i.dtick(Ke,gt.type))gt.dtick=Ke,gt.tick0=i.tick0(void 0,gt.type,rt);else{var Vt;if(Ue)Vt=(Lt-mt)/Ue;else{var dt=e.distinctVals(ye),bt=Math.pow(10,Math.floor(Math.log(dt.minDiff)/Math.LN10)),Yt=bt*e.roundUp(dt.minDiff/bt,[.9,1.9,4.9,9.9],!0);Vt=Math.max(Yt,2*e.stdev(ye)/Math.pow(ye.length,Qe?.25:.4)),g(Vt)||(Vt=1)}H.autoTicks(gt,Vt)}var It,jt=gt.dtick,Ie=H.tickIncrement(H.tickFirst(gt),jt,"reverse",rt);if("number"==typeof jt)It=(Ie=function(et,ht,xt,Rt,Xt){var tn=0,Kt=0,kn=0,Vn=0;function Tn(Mn){return(1+100*(Mn-et)/xt.dtick)%100<2}for(var sn=0;sn<ht.length;sn++)ht[sn]%1==0?kn++:g(ht[sn])||Vn++,Tn(ht[sn])&&tn++,Tn(ht[sn]+xt.dtick/2)&&Kt++;var fn=ht.length-Vn;if(kn===fn&&"date"!==xt.type)xt.dtick<1?et=Rt-.5*xt.dtick:(et-=.5)+xt.dtick<Rt&&(et+=xt.dtick);else if(Kt<.1*fn&&(tn>.3*fn||Tn(Rt)||Tn(Xt))){var dn=xt.dtick/2;et+=et+dn<Rt?dn:-dn}return et}(Ie,ye,gt,mt,Lt))+(1+Math.floor((Lt-Ie)/jt))*jt;else for("M"===gt.dtick.charAt(0)&&(Ie=function(et,ht,xt,Rt,Xt){var tn=e.findExactDates(ht,Xt);if(tn.exactDays>.8){var Kt=Number(xt.substr(1));tn.exactYears>.8&&Kt%12==0?et=H.tickIncrement(et,"M6","reverse")+1.5*M:tn.exactMonths>.8?et=H.tickIncrement(et,"M1","reverse")+15.5*M:et-=D;var kn=H.tickIncrement(et,xt);if(kn<=Rt)return kn}return et}(Ie,ye,jt,mt,rt)),It=Ie;It<=Lt;)It=H.tickIncrement(It,jt,!1,rt);return{start:Ce.c2r(Ie,0,rt),end:Ce.c2r(It,0,rt),size:jt,_dataSpan:Lt-mt}},H.prepMinorTicks=function(ye,Ce,Ue){if(!Ce.minor.dtick){delete ye.dtick;var Qe,rt=Ce.dtick&&g(Ce._tmin);if(rt){var Ke=H.tickIncrement(Ce._tmin,Ce.dtick,!0);Qe=[Ce._tmin,.99*Ke+.01*Ce._tmin]}else{var gt=e.simpleMap(Ce.range,Ce.r2l);Qe=[gt[0],.8*gt[0]+.2*gt[1]]}if(ye.range=e.simpleMap(Qe,Ce.l2r),ye._isMinor=!0,H.prepTicks(ye,Ue),rt){var mt=g(Ce.dtick),Lt=g(ye.dtick),Vt=mt?Ce.dtick:+Ce.dtick.substring(1),dt=Lt?ye.dtick:+ye.dtick.substring(1);mt&&Lt?he(Vt,dt)?Vt===2*w&&dt===2*M&&(ye.dtick=w):ye.dtick=Vt===2*w&&dt===3*M?w:Vt!==w||(Ce._input.minor||{}).nticks?xe(Vt/dt,2.5)?Vt/2:Vt:M:"M"===String(Ce.dtick).charAt(0)?Lt?ye.dtick="M1":he(Vt,dt)?Vt>=12&&2===dt&&(ye.dtick="M3"):ye.dtick=Ce.dtick:"L"===String(ye.dtick).charAt(0)?"L"===String(Ce.dtick).charAt(0)?he(Vt,dt)||(ye.dtick=xe(Vt/dt,2.5)?Ce.dtick/2:Ce.dtick):ye.dtick="D1":"D2"===ye.dtick&&+Ce.dtick>1&&(ye.dtick=1)}ye.range=Ce.range}void 0===Ce.minor._tick0Init&&(ye.tick0=Ce.tick0)},H.prepTicks=function(ye,Ce){var Ue=e.simpleMap(ye.range,ye.r2l,void 0,void 0,Ce);if("auto"===ye.tickmode||!ye.dtick){var Qe,rt=ye.nticks;rt||("category"===ye.type||"multicategory"===ye.type?(Qe=ye.tickfont?e.bigFont(ye.tickfont.size||12):15,rt=ye._length/Qe):(Qe="y"===ye._id.charAt(0)?40:80,rt=e.constrain(ye._length/Qe,4,9)+1),"radialaxis"===ye._name&&(rt*=2)),ye.minor&&"array"!==ye.minor.tickmode||"array"===ye.tickmode&&(rt*=100),ye._roughDTick=Math.abs(Ue[1]-Ue[0])/rt,H.autoTicks(ye,ye._roughDTick),ye._minDtick>0&&ye.dtick<2*ye._minDtick&&(ye.dtick=ye._minDtick,ye.tick0=ye.l2r(ye._forceTick0))}"period"===ye.ticklabelmode&&function(Ke){var gt;function mt(){return!(g(Ke.dtick)||"M"!==Ke.dtick.charAt(0))}var Lt=mt(),Vt=H.getTickFormat(Ke);if(Vt){var dt=Ke._dtickInit!==Ke.dtick;/%[fLQsSMX]/.test(Vt)||(/%[HI]/.test(Vt)?(gt=C,dt&&!Lt&&Ke.dtick<C&&(Ke.dtick=C)):/%p/.test(Vt)?(gt=D,dt&&!Lt&&Ke.dtick<D&&(Ke.dtick=D)):/%[Aadejuwx]/.test(Vt)?(gt=M,dt&&!Lt&&Ke.dtick<M&&(Ke.dtick=M)):/%[UVW]/.test(Vt)?(gt=w,dt&&!Lt&&Ke.dtick<w&&(Ke.dtick=w)):/%[Bbm]/.test(Vt)?(gt=T,dt&&(Lt?De(Ke.dtick)<1:Ke.dtick<x)&&(Ke.dtick="M1")):/%[q]/.test(Vt)?(gt=a,dt&&(Lt?De(Ke.dtick)<3:Ke.dtick<_)&&(Ke.dtick="M3")):/%[Yy]/.test(Vt)&&(gt=s,dt&&(Lt?De(Ke.dtick)<12:Ke.dtick<d)&&(Ke.dtick="M12")))}(Lt=mt())&&Ke.tick0===Ke._dowTick0&&(Ke.tick0=Ke._rawTick0),Ke._definedDelta=gt}(ye),ye.tick0||(ye.tick0="date"===ye.type?"2000-01-01":0),"date"===ye.type&&ye.dtick<.1&&(ye.dtick=.1),He(ye)},H.calcTicks=function(ye,Ce){for(var Ue,Qe,rt=ye.type,Ke=ye.calendar,gt=ye.ticklabelstep,mt="period"===ye.ticklabelmode,Lt=e.simpleMap(ye.range,ye.r2l,void 0,void 0,Ce),Vt=Lt[1]<Lt[0],dt=Math.min(Lt[0],Lt[1]),bt=Math.max(Lt[0],Lt[1]),Yt=Math.max(1e3,ye._length||0),It=[],jt=[],Ie=[],et=[],ht=ye.minor&&(ye.minor.ticks||ye.minor.showgrid),xt=1;xt>=(ht?0:1);xt--){var Rt=!xt;xt?(ye._dtickInit=ye.dtick,ye._tick0Init=ye.tick0):(ye.minor._dtickInit=ye.minor.dtick,ye.minor._tick0Init=ye.minor.tick0);var Xt=xt?ye:e.extendFlat({},ye,ye.minor);if(Rt?H.prepMinorTicks(Xt,ye,Ce):H.prepTicks(Xt,Ce),"array"!==Xt.tickmode){var tn=ce(Lt),Kt=tn[0],kn=tn[1],Vn=g(Xt.dtick),Tn="log"===rt&&!(Vn||"L"===Xt.dtick.charAt(0)),sn=H.tickFirst(Xt,Ce);if(xt){if(ye._tmin=sn,sn<Kt!==Vt)break;"category"!==rt&&"multicategory"!==rt||(kn=Vt?Math.max(-.5,kn):Math.min(ye._categories.length-.5,kn))}var fn,dn,Mn=null,En=sn;xt&&(Vn?dn=ye.dtick:"date"===rt?"string"==typeof ye.dtick&&"M"===ye.dtick.charAt(0)&&(dn=T*ye.dtick.substring(1)):dn=ye._roughDTick,fn=Math.round((ye.r2l(En)-ye.r2l(ye.tick0))/dn)-1);var jn=Xt.dtick;for(Xt.rangebreaks&&Xt._tick0Init!==Xt.tick0&&(En=nn(En,ye),Vt||(En=H.tickIncrement(En,jn,!Vt,Ke))),xt&&mt&&(En=H.tickIncrement(En,jn,!Vt,Ke),fn--);Vt?En>=kn:En<=kn;En=H.tickIncrement(En,jn,Vt,Ke)){if(xt&&fn++,Xt.rangebreaks&&!Vt){if(En<Kt)continue;if(Xt.maskBreaks(En)===E&&nn(En,Xt)>=bt)break}if(Ie.length>Yt||En===Mn)break;Mn=En;var er={value:En};xt?(Tn&&En!==(0|En)&&(er.simpleLabel=!0),gt>1&&fn%gt&&(er.skipLabel=!0),Ie.push(er)):(er.minor=!0,et.push(er))}}else xt?(Ie=[],It=Se(ye)):(et=[],jt=Se(ye))}if(ht&&!("inside"===ye.minor.ticks&&"outside"===ye.ticks||"outside"===ye.minor.ticks&&"inside"===ye.ticks)){for(var nr=Ie.map(function(Yr){return Yr.value}),mr=[],Dr=0;Dr<et.length;Dr++){var yr=et[Dr],Wr=yr.value;if(-1===nr.indexOf(Wr)){for(var kr=!1,Or=0;!kr&&Or<Ie.length;Or++)1e7+Ie[Or].value===1e7+Wr&&(kr=!0);kr||mr.push(yr)}}et=mr}if(mt&&function(Yr,Ci,pn){for(var Ln=0;Ln<Yr.length;Ln++){var Ut=Yr[Ln].value,xn=Ln,Sn=Ln+1;Ln<Yr.length-1?(xn=Ln,Sn=Ln+1):Ln>0?(xn=Ln-1,Sn=Ln):(xn=Ln,Sn=Ln);var Kn,Un=Math.abs(Yr[Sn].value-Yr[xn].value),In=pn||Un,Pn=0;In>=d?Pn=Un>=d&&Un<=u?Un:s:pn===a&&In>=_?Pn=Un>=_&&Un<=h?Un:a:In>=x?Pn=Un>=x&&Un<=c?Un:T:pn===w&&In>=w?Pn=w:In>=M?Pn=M:pn===D&&In>=D?Pn=D:pn===C&&In>=C&&(Pn=C),Pn>=Un&&(Pn=Un,Kn=!0);var Bn=Ut+Pn;if(Ci.rangebreaks&&Pn>0){for(var Gn=0,or=0;or<84;or++){var sr=(or+.5)/84;Ci.maskBreaks(Ut*(1-sr)+sr*Bn)!==E&&Gn++}(Pn*=Gn/84)||(Yr[Ln].drop=!0),Kn&&Un>w&&(Pn=Un)}(Pn>0||0===Ln)&&(Yr[Ln].periodX=Ut+Pn/2)}}(Ie,ye,ye._definedDelta),ye.rangebreaks){var Hr="y"===ye._id.charAt(0),oi=1;"auto"===ye.tickmode&&(oi=ye.tickfont?ye.tickfont.size:12);var Qn=NaN;for(Ue=Ie.length-1;Ue>-1;Ue--)if(Ie[Ue].drop)Ie.splice(Ue,1);else{Ie[Ue].value=nn(Ie[Ue].value,ye);var Ir=ye.c2p(Ie[Ue].value);(Hr?Qn>Ir-oi:Qn<Ir+oi)?Ie.splice(Vt?Ue+1:Ue,1):Qn=Ir}}mn(ye)&&360===Math.abs(Lt[1]-Lt[0])&&Ie.pop(),ye._tmax=(Ie[Ie.length-1]||{}).value,ye._prevDateHead="",ye._inCalcTicks=!0;var Tr,ar,Jr=function(Yr){Yr.text="",ye._prevDateHead=Qe};for(Ie=Ie.concat(et),Ue=0;Ue<Ie.length;Ue++){var Rr=Ie[Ue].value;Ie[Ue].minor?jt.push({x:Rr,minor:!0}):(Qe=ye._prevDateHead,Tr=H.tickText(ye,Rr,!1,Ie[Ue].simpleLabel),void 0!==(ar=Ie[Ue].periodX)&&(Tr.periodX=ar,(ar>bt||ar<dt)&&(ar>bt&&(Tr.periodX=bt),ar<dt&&(Tr.periodX=dt),Jr(Tr))),Ie[Ue].skipLabel&&Jr(Tr),It.push(Tr))}return It=It.concat(jt),ye._inCalcTicks=!1,mt&&It.length&&(It[0].noTick=!0),It};var ke=[2,5,10],Fe=[1,2,3,6,12],ve=[1,2,5,10,15,30],Te=[1,2,3,7,14],Le=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Oe=[-.301,0,.301,.699,1],Ne=[15,30,45,90,180];function Be(ye,Ce,Ue){return Ce*e.roundUp(ye/Ce,Ue)}function He(ye){var Ce=ye.dtick;if(ye._tickexponent=0,g(Ce)||"string"==typeof Ce||(Ce=1),"category"!==ye.type&&"multicategory"!==ye.type||(ye._tickround=null),"date"===ye.type){var Ue=ye.r2l(ye.tick0),Qe=ye.l2r(Ue).replace(/(^-|i)/g,""),rt=Qe.length;if("M"===String(Ce).charAt(0))ye._tickround=rt>10||"01-01"!==Qe.substr(5)?"d":+Ce.substr(1)%12==0?"y":"m";else if(Ce>=M&&rt<=10||Ce>=15*M)ye._tickround="d";else if(Ce>=P&&rt<=16||Ce>=C)ye._tickround="M";else if(Ce>=L&&rt<=19||Ce>=P)ye._tickround="S";else{var Ke=ye.l2r(Ue+Ce).replace(/^-/,"").length;ye._tickround=Math.max(rt,Ke)-20,ye._tickround<0&&(ye._tickround=4)}}else if(g(Ce)||"L"===Ce.charAt(0)){var gt=ye.range.map(ye.r2d||Number);g(Ce)||(Ce=Number(Ce.substr(1))),ye._tickround=2-Math.floor(Math.log(Ce)/Math.LN10+.01);var mt=Math.max(Math.abs(gt[0]),Math.abs(gt[1])),Lt=Math.floor(Math.log(mt)/Math.LN10+.01),Vt=void 0===ye.minexponent?3:ye.minexponent;Math.abs(Lt)>Vt&&(ye._tickexponent=ze(ye.exponentformat)&&!je(Lt)?3*Math.round((Lt-1)/3):Lt)}else ye._tickround=null}function Ve(ye,Ce,Ue){var Qe=ye.tickfont||{};return{x:Ce,dx:0,dy:0,text:Ue||"",fontSize:Qe.size,font:Qe.family,fontColor:Qe.color}}H.autoTicks=function(ye,Ce,Ue){var Qe;function rt(bt){return Math.pow(bt,Math.floor(Math.log(Ce)/Math.LN10))}if("date"===ye.type){ye.tick0=e.dateTick0(ye.calendar,0);var Ke=2*Ce;if(Ke>s)Ce/=s,Qe=rt(10),ye.dtick="M"+12*Be(Ce,Qe,ke);else if(Ke>T)ye.dtick="M"+Be(Ce/=T,1,Fe);else if(Ke>M){if(ye.dtick=Be(Ce,M,ye._hasDayOfWeekBreaks?[1,2,7,14]:Te),!Ue){var gt=H.getTickFormat(ye),mt="period"===ye.ticklabelmode;mt&&(ye._rawTick0=ye.tick0),ye.tick0=/%[uVW]/.test(gt)?e.dateTick0(ye.calendar,2):e.dateTick0(ye.calendar,1),mt&&(ye._dowTick0=ye.tick0)}}else Ke>C?ye.dtick=Be(Ce,C,Fe):Ke>P?ye.dtick=Be(Ce,P,ve):Ke>L?ye.dtick=Be(Ce,L,ve):(Qe=rt(10),ye.dtick=Be(Ce,Qe,ke))}else if("log"===ye.type){ye.tick0=0;var Lt=e.simpleMap(ye.range,ye.r2l);if(ye._isMinor&&(Ce*=1.5),Ce>.7)ye.dtick=Math.ceil(Ce);else if(Math.abs(Lt[1]-Lt[0])<1){var Vt=1.5*Math.abs((Lt[1]-Lt[0])/Ce);Ce=Math.abs(Math.pow(10,Lt[1])-Math.pow(10,Lt[0]))/Vt,Qe=rt(10),ye.dtick="L"+Be(Ce,Qe,ke)}else ye.dtick=Ce>.3?"D2":"D1"}else"category"===ye.type||"multicategory"===ye.type?(ye.tick0=0,ye.dtick=Math.ceil(Math.max(Ce,1))):mn(ye)?(ye.tick0=0,ye.dtick=Be(Ce,Qe=1,Ne)):(ye.tick0=0,Qe=rt(10),ye.dtick=Be(Ce,Qe,ke));if(0===ye.dtick&&(ye.dtick=1),!g(ye.dtick)&&"string"!=typeof ye.dtick){var dt=ye.dtick;throw ye.dtick=1,"ax.dtick error: "+String(dt)}},H.tickIncrement=function(ye,Ce,Ue,Qe){var rt=Ue?-1:1;if(g(Ce))return e.increment(ye,rt*Ce);var Ke=Ce.charAt(0),gt=rt*Number(Ce.substr(1));if("M"===Ke)return e.incrementMonth(ye,gt,Qe);if("L"===Ke)return Math.log(Math.pow(10,ye)+gt)/Math.LN10;if("D"===Ke){var mt="D2"===Ce?Oe:Le,Lt=ye+.01*rt,Vt=e.roundUp(e.mod(Lt,1),mt,Ue);return Math.floor(Lt)+Math.log(p.round(Math.pow(10,Vt),1))/Math.LN10}throw"unrecognized dtick "+String(Ce)},H.tickFirst=function(ye,Ce){var Ue=ye.r2l||Number,Qe=e.simpleMap(ye.range,Ue,void 0,void 0,Ce),rt=Qe[1]<Qe[0],Ke=rt?Math.floor:Math.ceil,gt=ce(Qe)[0],mt=ye.dtick,Lt=Ue(ye.tick0);if(g(mt)){var Vt=Ke((gt-Lt)/mt)*mt+Lt;return"category"!==ye.type&&"multicategory"!==ye.type||(Vt=e.constrain(Vt,0,ye._categories.length-1)),Vt}var dt=mt.charAt(0),bt=Number(mt.substr(1));if("M"===dt){for(var Yt,It,jt,Ie=0,et=Lt;Ie<10;){if(((Yt=H.tickIncrement(et,mt,rt,ye.calendar))-gt)*(et-gt)<=0)return rt?Math.min(et,Yt):Math.max(et,Yt);It=(gt-(et+Yt)/2)/(Yt-et),jt=dt+(Math.abs(Math.round(It))||1)*bt,et=H.tickIncrement(et,jt,It<0?!rt:rt,ye.calendar),Ie++}return e.error("tickFirst did not converge",ye),et}if("L"===dt)return Math.log(Ke((Math.pow(10,gt)-Lt)/bt)*bt+Lt)/Math.LN10;if("D"===dt){var ht="D2"===mt?Oe:Le,xt=e.roundUp(e.mod(gt,1),ht,rt);return Math.floor(gt)+Math.log(p.round(Math.pow(10,xt),1))/Math.LN10}throw"unrecognized dtick "+String(mt)},H.tickText=function(ye,Ce,Ue,Qe){var rt,Ke=Ve(ye,Ce),gt="array"===ye.tickmode,mt=Ue||gt,Lt=ye.type,Vt="category"===Lt?ye.d2l_noadd:ye.d2l;if(gt&&Array.isArray(ye.ticktext)){var dt=e.simpleMap(ye.range,ye.r2l),bt=(Math.abs(dt[1]-dt[0])-(ye._lBreaks||0))/1e4;for(rt=0;rt<ye.ticktext.length&&!(Math.abs(Ce-Vt(ye.tickvals[rt]))<bt);rt++);if(rt<ye.ticktext.length)return Ke.text=String(ye.ticktext[rt]),Ke}function Yt(Ie){return void 0===Ie||(Ue?"none"===Ie:"all"!==Ie&&Ce!=={first:ye._tmin,last:ye._tmax}[Ie])}var et,ht,It=Ue?"never":"none"!==ye.exponentformat&&Yt(ye.showexponent)?"hide":"";if("date"===Lt?function(Ie,et,ht,xt){var Rt=Ie._tickround,Xt=ht&&Ie.hoverformat||H.getTickFormat(Ie);xt&&(Rt=g(Rt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Rt]);var tn,Kt=e.formatDate(et.x,Xt,Rt,Ie._dateFormat,Ie.calendar,Ie._extraFormat),kn=Kt.indexOf("\n");if(-1!==kn&&(tn=Kt.substr(kn+1),Kt=Kt.substr(0,kn)),xt&&("00:00:00"===Kt||"00:00"===Kt?(Kt=tn,tn=""):8===Kt.length&&(Kt=Kt.replace(/:00$/,""))),tn)if(ht)"d"===Rt?Kt+=", "+tn:Kt=tn+(Kt?", "+Kt:"");else if(Ie._inCalcTicks&&Ie._prevDateHead===tn){var Vn=Xe(Ie),Tn=Ie._trueSide||Ie.side;(!Vn&&"top"===Tn||Vn&&"bottom"===Tn)&&(Kt+="<br> ")}else Ie._prevDateHead=tn,Kt+="<br>"+tn;et.text=Kt}(ye,Ke,Ue,mt):"log"===Lt?function(Ie,et,ht,xt,Rt){var Xt=Ie.dtick,tn=et.x,Kt=Ie.tickformat,kn="string"==typeof Xt&&Xt.charAt(0);if("never"===Rt&&(Rt=""),xt&&"L"!==kn&&(Xt="L3",kn="L"),Kt||"L"===kn)et.text=qe(Math.pow(10,tn),Ie,Rt,xt);else if(g(Xt)||"D"===kn&&e.mod(tn+.01,1)<.1){var Vn=Math.round(tn),Tn=Math.abs(Vn),sn=Ie.exponentformat;"power"===sn||ze(sn)&&je(Vn)?(et.text=0===Vn?1:1===Vn?"10":"10<sup>"+(Vn>1?"":S)+Tn+"</sup>",et.fontSize*=1.25):("e"===sn||"E"===sn)&&Tn>2?et.text="1"+sn+(Vn>0?"+":S)+Tn:(et.text=qe(Math.pow(10,tn),Ie,"","fakehover"),"D1"===Xt&&"y"===Ie._id.charAt(0)&&(et.dy-=et.fontSize/6))}else{if("D"!==kn)throw"unrecognized dtick "+String(Xt);et.text=String(Math.round(Math.pow(10,e.mod(tn,1)))),et.fontSize*=.75}if("D1"===Ie.dtick){var fn=String(et.text).charAt(0);"0"!==fn&&"1"!==fn||("y"===Ie._id.charAt(0)?et.dx-=et.fontSize/4:(et.dy+=et.fontSize/2,et.dx+=(Ie.range[1]>Ie.range[0]?1:-1)*et.fontSize*(tn<0?.5:.25)))}}(ye,Ke,0,mt,It):"category"===Lt?(et=Ke,void 0===(ht=ye._categories[Math.round(et.x)])&&(ht=""),et.text=String(ht)):"multicategory"===Lt?function(Ie,et,ht){var xt=Math.round(et.x),Rt=Ie._categories[xt]||[],Xt=void 0===Rt[1]?"":String(Rt[1]),tn=void 0===Rt[0]?"":String(Rt[0]);ht?et.text=tn+" - "+Xt:(et.text=Xt,et.text2=tn)}(ye,Ke,Ue):mn(ye)?function(Ie,et,ht,xt,Rt){if("radians"!==Ie.thetaunit||ht)et.text=qe(et.x,Ie,Rt,xt);else{var Xt=et.x/180;if(0===Xt)et.text="0";else{var tn=function(kn){function Vn(dn,Mn){return Math.abs(dn-Mn)<=1e-6}var Tn=function(dn){for(var Mn=1;!Vn(Math.round(dn*Mn)/Mn,dn);)Mn*=10;return Mn}(kn),sn=kn*Tn,fn=Math.abs(function dn(Mn,En){return Vn(En,0)?Mn:dn(En,Mn%En)}(sn,Tn));return[Math.round(sn/fn),Math.round(Tn/fn)]}(Xt);if(tn[1]>=100)et.text=qe(e.deg2rad(et.x),Ie,Rt,xt);else{var Kt=et.x<0;et.text=1===tn[1]?1===tn[0]?"\u03c0":tn[0]+"\u03c0":["<sup>",tn[0],"</sup>","\u2044","<sub>",tn[1],"</sub>","\u03c0"].join(""),Kt&&(et.text=S+et.text)}}}}(ye,Ke,Ue,mt,It):function(Ie,et,ht,xt,Rt){"never"===Rt?Rt="":"all"===Ie.showexponent&&Math.abs(et.x/Ie.dtick)<1e-6&&(Rt="hide"),et.text=qe(et.x,Ie,Rt,xt)}(ye,Ke,0,mt,It),Qe||(ye.tickprefix&&!Yt(ye.showtickprefix)&&(Ke.text=ye.tickprefix+Ke.text),ye.ticksuffix&&!Yt(ye.showticksuffix)&&(Ke.text+=ye.ticksuffix)),"boundaries"===ye.tickson||ye.showdividers){var jt=function(Ie){var et=ye.l2p(Ie);return et>=0&&et<=ye._length?Ie:null};Ke.xbnd=[jt(Ke.x-.5),jt(Ke.x+ye.dtick-.5)]}return Ke},H.hoverLabelText=function(ye,Ce,Ue){Ue&&(ye=e.extendFlat({},ye,{hoverformat:Ue}));var Qe=Array.isArray(Ce)?Ce[0]:Ce,rt=Array.isArray(Ce)?Ce[1]:void 0;if(void 0!==rt&&rt!==Qe)return H.hoverLabelText(ye,Qe,Ue)+" - "+H.hoverLabelText(ye,rt,Ue);var Ke="log"===ye.type&&Qe<=0,gt=H.tickText(ye,ye.c2l(Ke?-Qe:Qe),"hover").text;return Ke?0===Qe?"0":S+gt:gt};var it=["f","p","n","\u03bc","m","","k","M","G","T"];function ze(ye){return"SI"===ye||"B"===ye}function je(ye){return ye>14||ye<-15}function qe(ye,Ce,Ue,Qe){var rt=ye<0,Ke=Ce._tickround,gt=Ue||Ce.exponentformat||"B",mt=Ce._tickexponent,Lt=H.getTickFormat(Ce),Vt=Ce.separatethousands;if(Qe){var dt={exponentformat:gt,minexponent:Ce.minexponent,dtick:"none"===Ce.showexponent?Ce.dtick:g(ye)&&Math.abs(ye)||1,range:"none"===Ce.showexponent?Ce.range.map(Ce.r2d):[0,ye||1]};He(dt),Ke=(Number(dt._tickround)||0)+4,mt=dt._tickexponent,Ce.hoverformat&&(Lt=Ce.hoverformat)}if(Lt)return Ce._numFormat(Lt)(ye).replace(/-/g,S);var bt,Yt=Math.pow(10,-Ke)/2;if("none"===gt&&(mt=0),(ye=Math.abs(ye))<Yt)ye="0",rt=!1;else{if(ye+=Yt,mt&&(ye*=Math.pow(10,-mt),Ke+=mt),0===Ke)ye=String(Math.floor(ye));else if(Ke<0){ye=(ye=String(Math.round(ye))).substr(0,ye.length+Ke);for(var It=Ke;It<0;It++)ye+="0"}else{var jt=(ye=String(ye)).indexOf(".")+1;jt&&(ye=ye.substr(0,jt+Ke).replace(/\.?0+$/,""))}ye=e.numSeparate(ye,Ce._separators,Vt)}return mt&&"hide"!==gt&&(ze(gt)&&je(mt)&&(gt="power"),bt=mt<0?S+-mt:"power"!==gt?"+"+mt:String(mt),"e"===gt||"E"===gt?ye+=gt+bt:"power"===gt?ye+="\xd710<sup>"+bt+"</sup>":"B"===gt&&9===mt?ye+="B":ze(gt)&&(ye+=it[mt/3+5])),rt?S+ye:ye}function Ye(ye,Ce){if(ye){var Ue=Object.keys(ne).reduce(function(Qe,rt){return-1!==Ce.indexOf(rt)&&ne[rt].forEach(function(Ke){Qe[Ke]=1}),Qe},{});Object.keys(ye).forEach(function(Qe){Ue[Qe]||(1===Qe.length?ye[Qe]=0:delete ye[Qe])})}}function ct(ye,Ce){for(var Ue=[],Qe={},rt=0;rt<Ce.length;rt++){var Ke=Ce[rt];Qe[Ke.text2]?Qe[Ke.text2].push(Ke.x):Qe[Ke.text2]=[Ke.x]}for(var gt in Qe)Ue.push(Ve(ye,e.interp(Qe[gt],.5),gt));return Ue}function vt(ye){return void 0!==ye.periodX?ye.periodX:ye.x}function wt(ye){return[ye.text,ye.x,ye.axInfo,ye.font,ye.fontSize,ye.fontColor].join("_")}function Ot(ye){var Ce=ye.title.font.size,Ue=(ye.title.text.match(t.BR_TAG_ALL)||[]).length;return ye.title.hasOwnProperty("standoff")?Ue?Ce*(se+Ue*V):Ce*se:Ue?Ce*(Ue+1)*V:Ce}function St(ye,Ce){var Ue=ye.l2p(Ce);return Ue>1&&Ue<ye._length-1}function ft(ye){var Ce=p.select(ye),Ue=Ce.select(".text-math-group");return Ue.empty()?Ce.select("text"):Ue}function st(ye){return ye._id+".automargin"}function Ct(ye){return st(ye)+".mirror"}function $t(ye){return ye._id+".rangeslider"}function rn(ye,Ce){for(var Ue=0;Ue<Ce.length;Ue++)-1===ye.indexOf(Ce[Ue])&&ye.push(Ce[Ue])}function hn(ye,Ce,Ue){var Qe,rt,Ke=[],gt=[],mt=ye.layout;for(Qe=0;Qe<Ce.length;Qe++)Ke.push(H.getFromId(ye,Ce[Qe]));for(Qe=0;Qe<Ue.length;Qe++)gt.push(H.getFromId(ye,Ue[Qe]));var Lt=Object.keys(l),Vt=["anchor","domain","overlaying","position","side","tickangle","editType"],dt=["linear","log"];for(Qe=0;Qe<Lt.length;Qe++){var bt=Lt[Qe],Yt=Ke[0][bt],It=gt[0][bt],jt=!0,Ie=!1,et=!1;if("_"!==bt.charAt(0)&&"function"!=typeof Yt&&-1===Vt.indexOf(bt)){for(rt=1;rt<Ke.length&&jt;rt++){var ht=Ke[rt][bt];"type"===bt&&-1!==dt.indexOf(Yt)&&-1!==dt.indexOf(ht)&&Yt!==ht?Ie=!0:ht!==Yt&&(jt=!1)}for(rt=1;rt<gt.length&&jt;rt++){var xt=gt[rt][bt];"type"===bt&&-1!==dt.indexOf(It)&&-1!==dt.indexOf(xt)&&It!==xt?et=!0:gt[rt][bt]!==It&&(jt=!1)}jt&&(Ie&&(mt[Ke[0]._name].type="linear"),et&&(mt[gt[0]._name].type="linear"),cn(mt,bt,Ke,gt,ye._fullLayout._dfltTitle))}}for(Qe=0;Qe<ye._fullLayout.annotations.length;Qe++){var Rt=ye._fullLayout.annotations[Qe];-1!==Ce.indexOf(Rt.xref)&&-1!==Ue.indexOf(Rt.yref)&&e.swapAttrs(mt.annotations[Qe],["?"])}}function cn(ye,Ce,Ue,Qe,rt){var Ke,gt=e.nestedProperty,mt=gt(ye[Ue[0]._name],Ce).get(),Lt=gt(ye[Qe[0]._name],Ce).get();for("title"===Ce&&(mt&&mt.text===rt.x&&(mt.text=rt.y),Lt&&Lt.text===rt.y&&(Lt.text=rt.x)),Ke=0;Ke<Ue.length;Ke++)gt(ye,Ue[Ke]._name+"."+Ce).set(Lt);for(Ke=0;Ke<Qe.length;Ke++)gt(ye,Qe[Ke]._name+"."+Ce).set(mt)}function mn(ye){return"angularaxis"===ye._id}function nn(ye,Ce){for(var Ue=Ce._rangebreaks.length,Qe=0;Qe<Ue;Qe++){var rt=Ce._rangebreaks[Qe];if(ye>=rt.min&&ye<rt.max)return rt.max}return ye}function Xe(ye){return-1!==(ye.ticklabelposition||"").indexOf("inside")}function nt(ye,Ce){Xe(ye._anchorAxis||{})&&ye._hideCounterAxisInsideTickLabels&&ye._hideCounterAxisInsideTickLabels(Ce)}H.getTickFormat=function(ye){var Ce,Ue,Qe,rt,Ke,gt,mt,Lt,Yt,It,jt,Ie,et,ht;function Vt(Yt){return"string"!=typeof Yt?Yt:Number(Yt.replace("M",""))*T}function dt(Yt,It){var jt=["L","D"];if(typeof Yt==typeof It){if("number"==typeof Yt)return Yt-It;var Ie=jt.indexOf(Yt.charAt(0)),et=jt.indexOf(It.charAt(0));return Ie===et?Number(Yt.replace(/(L|D)/g,""))-Number(It.replace(/(L|D)/g,"")):Ie-et}return"number"==typeof Yt?1:-1}if(ye.tickformatstops&&ye.tickformatstops.length>0)switch(ye.type){case"date":case"linear":for(Ce=0;Ce<ye.tickformatstops.length;Ce++)if((Qe=ye.tickformatstops[Ce]).enabled&&(rt=ye.dtick,gt=void 0,void 0,void 0,gt=Vt||function(Yt){return Yt},Lt=(Ke=Qe.dtickrange)[1],(!(mt=Ke[0])&&"number"!=typeof mt||gt(mt)<=gt(rt))&&(!Lt&&"number"!=typeof Lt||gt(Lt)>=gt(rt)))){Ue=Qe;break}break;case"log":for(Ce=0;Ce<ye.tickformatstops.length;Ce++)if((Qe=ye.tickformatstops[Ce]).enabled&&(jt=void 0,Ie=void 0,et=void 0,ht=void 0,jt=null===(It=Qe.dtickrange)[0],Ie=null===It[1],et=dt(Yt=ye.dtick,It[0])>=0,ht=dt(Yt,It[1])<=0,(jt||et)&&(Ie||ht))){Ue=Qe;break}}return Ue?Ue.value:ye.tickformat},H.getSubplots=function(ye,Ce){var Ue=ye._fullLayout._subplots,Qe=Ue.cartesian.concat(Ue.gl2d||[]),rt=Ce?H.findSubplotsWithAxis(Qe,Ce):Qe;return rt.sort(function(Ke,gt){var mt=Ke.substr(1).split("y"),Lt=gt.substr(1).split("y");return mt[0]===Lt[0]?+mt[1]-+Lt[1]:+mt[0]-+Lt[0]}),rt},H.findSubplotsWithAxis=function(ye,Ce){for(var Ue=new RegExp("x"===Ce._id.charAt(0)?"^"+Ce._id+"y":Ce._id+"$"),Qe=[],rt=0;rt<ye.length;rt++){var Ke=ye[rt];Ue.test(Ke)&&Qe.push(Ke)}return Qe},H.makeClipPaths=function(ye){var Ce=ye._fullLayout;if(!Ce._hasOnlyLargeSploms){var Ue,Qe,rt={_offset:0,_length:Ce.width,_id:""},Ke={_offset:0,_length:Ce.height,_id:""},gt=H.list(ye,"x",!0),mt=H.list(ye,"y",!0),Lt=[];for(Ue=0;Ue<gt.length;Ue++)for(Lt.push({x:gt[Ue],y:Ke}),Qe=0;Qe<mt.length;Qe++)0===Ue&&Lt.push({x:rt,y:mt[Qe]}),Lt.push({x:gt[Ue],y:mt[Qe]});var Vt=Ce._clips.selectAll(".axesclip").data(Lt,function(dt){return dt.x._id+dt.y._id});Vt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(dt){return"clip"+Ce._uid+dt.x._id+dt.y._id}).append("rect"),Vt.exit().remove(),Vt.each(function(dt){p.select(this).select("rect").attr({x:dt.x._offset||0,y:dt.y._offset||0,width:dt.x._length||1,height:dt.y._length||1})})}},H.draw=function(ye,Ce,Ue){var Qe=ye._fullLayout;"redraw"===Ce&&Qe._paper.selectAll("g.subplot").each(function(Ke){var mt=Qe._plots[Ke[0]];if(mt){var Lt=mt.xaxis,Vt=mt.yaxis;mt.xaxislayer.selectAll("."+Lt._id+"tick").remove(),mt.yaxislayer.selectAll("."+Vt._id+"tick").remove(),mt.xaxislayer.selectAll("."+Lt._id+"tick2").remove(),mt.yaxislayer.selectAll("."+Vt._id+"tick2").remove(),mt.xaxislayer.selectAll("."+Lt._id+"divider").remove(),mt.yaxislayer.selectAll("."+Vt._id+"divider").remove(),mt.minorGridlayer&&mt.minorGridlayer.selectAll("path").remove(),mt.gridlayer&&mt.gridlayer.selectAll("path").remove(),mt.zerolinelayer&&mt.zerolinelayer.selectAll("path").remove(),Qe._infolayer.select(".g-"+Lt._id+"title").remove(),Qe._infolayer.select(".g-"+Vt._id+"title").remove()}});var rt=Ce&&"redraw"!==Ce?Ce:H.listIds(ye);return e.syncOrAsync(rt.map(function(Ke){return function(){if(Ke){var gt=H.getFromId(ye,Ke),mt=H.drawOne(ye,gt,Ue);return gt._r=gt.range.slice(),gt._rl=e.simpleMap(gt._r,gt.r2l),mt}}}))},H.drawOne=function(ye,Ce,Ue){var Qe,rt,Ke;Ue=Ue||{},Ce.setScale();var gt=ye._fullLayout,mt=Ce._id,Lt=mt.charAt(0),Vt=H.counterLetter(mt),dt=gt._plots[Ce._mainSubplot];if(dt){var bt=dt[Lt+"axislayer"],Yt=Ce._mainLinePosition,It=Ce._mainMirrorPosition,jt=Ce._vals=H.calcTicks(Ce),Ie=[Ce.mirror,Yt,It].join("_");for(Qe=0;Qe<jt.length;Qe++)jt[Qe].axInfo=Ie;Ce._selections={},Ce._tickAngles&&(Ce._prevTickAngles=Ce._tickAngles),Ce._tickAngles={},Ce._depth=null;var et={};if(Ce.visible){var ht,xt,Rt=H.makeTransTickFn(Ce),Xt=H.makeTransTickLabelFn(Ce),tn="inside"===Ce.ticks,Kt="outside"===Ce.ticks;if("boundaries"===Ce.tickson){var kn=function(pn,Ln){var Ut,xn=[],Sn=function(Kn,Jn){var Xn=Kn.xbnd[Jn];null!==Xn&&xn.push(e.extendFlat({},Kn,{x:Xn}))};if(Ln.length){for(Ut=0;Ut<Ln.length;Ut++)Sn(Ln[Ut],0);Sn(Ln[Ut-1],1)}return xn}(0,jt);xt=H.clipEnds(Ce,kn),ht=tn?xt:kn}else xt=H.clipEnds(Ce,jt),ht=tn&&"period"!==Ce.ticklabelmode?xt:jt;var Vn,Tn=Ce._gridVals=xt,sn=function(pn,Ln){var Ut,xn,Sn=[],Kn=Ln.length&&Ln[Ln.length-1].x<Ln[0].x,Jn=function(Un,In){var Pn=Un.xbnd[In];null!==Pn&&Sn.push(e.extendFlat({},Un,{x:Pn}))};if(pn.showdividers&&Ln.length){for(Ut=0;Ut<Ln.length;Ut++){var Xn=Ln[Ut];Xn.text2!==xn&&Jn(Xn,Kn?1:0),xn=Xn.text2}Jn(Ln[Ut-1],Kn?0:1)}return Sn}(Ce,jt);if(!gt._hasOnlyLargeSploms){var fn=Ce._subplotsWith,dn={};for(Qe=0;Qe<fn.length;Qe++){var Mn=(Ke=gt._plots[rt=fn[Qe]])[Vt+"axis"],En=Mn._mainAxis._id;if(!dn[En]){dn[En]=1;var jn="x"===Lt?"M0,"+Mn._offset+"v"+Mn._length:"M"+Mn._offset+",0h"+Mn._length;H.drawGrid(ye,Ce,{vals:Tn,counterAxis:Mn,layer:Ke.gridlayer.select("."+mt),minorLayer:Ke.minorGridlayer.select("."+mt),path:jn,transFn:Rt}),H.drawZeroLine(ye,Ce,{counterAxis:Mn,layer:Ke.zerolinelayer,path:jn,transFn:Rt})}}}var er=H.getTickSigns(Ce),nr=H.getTickSigns(Ce,"minor");if(Ce.ticks||Ce.minor&&Ce.minor.ticks){var mr,Dr,yr,Wr,kr=H.makeTickPath(Ce,Yt,er[2]),Or=H.makeTickPath(Ce,Yt,nr[2],{minor:!0});if(Ce._anchorAxis&&Ce.mirror&&!0!==Ce.mirror?(mr=H.makeTickPath(Ce,It,er[3]),Dr=H.makeTickPath(Ce,It,nr[3],{minor:!0}),yr=kr+mr,Wr=Or+Dr):(mr="",Dr="",yr=kr,Wr=Or),Ce.showdividers&&Kt&&"boundaries"===Ce.tickson){var Hr={};for(Qe=0;Qe<sn.length;Qe++)Hr[sn[Qe].x]=1;Vn=function(pn){return Hr[pn.x]?mr:yr}}else Vn=function(pn){return pn.minor?Wr:yr}}if(H.drawTicks(ye,Ce,{vals:ht,layer:bt,path:Vn,transFn:Rt}),"allticks"===Ce.mirror){var oi=Object.keys(Ce._linepositions||{});for(Qe=0;Qe<oi.length;Qe++){Ke=gt._plots[rt=oi[Qe]];var Qn=Ce._linepositions[rt]||[],Tr=Qn[1],ar=Qn[2],Jr=H.makeTickPath(Ce,Qn[0],ar?er[0]:nr[0],{minor:ar})+H.makeTickPath(Ce,Tr,ar?er[1]:nr[1],{minor:ar});H.drawTicks(ye,Ce,{vals:ht,layer:Ke[Lt+"axislayer"],path:Jr,transFn:Rt})}}var ri=[];if(ri.push(function(){return H.drawLabels(ye,Ce,{vals:jt,layer:bt,plotinfo:Ke,transFn:Xt,labelFns:H.makeLabelFns(Ce,Yt)})}),"multicategory"===Ce.type){var Rr={x:2,y:10}[Lt];ri.push(function(){var pn={x:"height",y:"width"}[Lt],Ln=Ci()[pn]+Rr+(Ce._tickAngles[mt+"tick"]?Ce.tickfont.size*V:0);return H.drawLabels(ye,Ce,{vals:ct(Ce,jt),layer:bt,cls:mt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Rt,labelFns:H.makeLabelFns(Ce,Yt+Ln*er[4])})}),ri.push(function(){return Ce._depth=er[4]*(Ci("tick2")[Ce.side]-Yt),pn=ye,Ln=Ce,Sn=(Ut={vals:sn,layer:bt,path:H.makeTickPath(Ce,Yt,er[4],{len:Ce._depth}),transFn:Rt}).vals,(Kn=Ut.layer.selectAll("path."+(xn=Ln._id+"divider")).data(Sn,wt)).exit().remove(),Kn.enter().insert("path",":first-child").classed(xn,1).classed("crisp",1).call(n.stroke,Ln.dividercolor).style("stroke-width",m.crispRound(pn,Ln.dividerwidth,1)+"px"),void Kn.attr("transform",Ut.transFn).attr("d",Ut.path);var pn,Ln,Ut,xn,Sn,Kn})}else Ce.title.hasOwnProperty("standoff")&&ri.push(function(){Ce._depth=er[4]*(Ci()[Ce.side]-Yt)});var Yr=y.getComponentMethod("rangeslider","isVisible")(Ce);return ri.push(function(){var pn,Ln,Ut,xn,Sn=Ce.side.charAt(0),Kn=j[Ce.side].charAt(0),Jn=H.getPxPosition(ye,Ce),Xn=Kt?Ce.ticklen:0;if((Ce.automargin||Yr)&&("multicategory"===Ce.type?pn=Ci("tick2"):(pn=Ci(),"x"===Lt&&"b"===Sn&&(Ce._depth=Math.max(pn.width>0?pn.bottom-Jn:0,Xn)))),Ce.automargin){Ln={x:0,y:0,r:0,l:0,t:0,b:0};var Un=[0,1];if("x"===Lt){if("b"===Sn?Ln[Sn]=Ce._depth:(Ln[Sn]=Ce._depth=Math.max(pn.width>0?Jn-pn.top:0,Xn),Un.reverse()),pn.width>0){var In=pn.right-(Ce._offset+Ce._length);In>0&&(Ln.xr=1,Ln.r=In);var Pn=Ce._offset-pn.left;Pn>0&&(Ln.xl=0,Ln.l=Pn)}}else if("l"===Sn?Ln[Sn]=Ce._depth=Math.max(pn.height>0?Jn-pn.left:0,Xn):(Ln[Sn]=Ce._depth=Math.max(pn.height>0?pn.right-Jn:0,Xn),Un.reverse()),pn.height>0){var Bn=pn.bottom-(Ce._offset+Ce._length);Bn>0&&(Ln.yb=0,Ln.b=Bn);var Gn=Ce._offset-pn.top;Gn>0&&(Ln.yt=1,Ln.t=Gn)}Ln[Vt]="free"===Ce.anchor?Ce.position:Ce._anchorAxis.domain[Un[0]],Ce.title.text!==gt._dfltTitle[Lt]&&(Ln[Sn]+=Ot(Ce)+(Ce.title.standoff||0)),Ce.mirror&&"free"!==Ce.anchor&&((Ut={x:0,y:0,r:0,l:0,t:0,b:0})[Kn]=Ce.linewidth,Ce.mirror&&!0!==Ce.mirror&&(Ut[Kn]+=Xn),!0===Ce.mirror||"ticks"===Ce.mirror?Ut[Vt]=Ce._anchorAxis.domain[Un[1]]:"all"!==Ce.mirror&&"allticks"!==Ce.mirror||(Ut[Vt]=[Ce._counterDomainMin,Ce._counterDomainMax][Un[1]]))}Yr&&(xn=y.getComponentMethod("rangeslider","autoMarginOpts")(ye,Ce)),"string"==typeof Ce.automargin&&(Ye(Ln,Ce.automargin),Ye(Ut,Ce.automargin)),b.autoMargin(ye,st(Ce),Ln),b.autoMargin(ye,Ct(Ce),Ut),b.autoMargin(ye,$t(Ce),xn)}),Ue.skipTitle||Yr&&"bottom"===Ce.side||ri.push(function(){return function(pn,Ln){var Ut,xn=pn._fullLayout,Sn=Ln._id,Kn=Sn.charAt(0),Jn=Ln.title.font.size;if(Ln.title.hasOwnProperty("standoff"))Ut=Ln._depth+Ln.title.standoff+Ot(Ln);else{var Xn=Xe(Ln);if("multicategory"===Ln.type)Ut=Ln._depth;else{var Un=1.5*Jn;Xn&&(Un=.5*Jn,"outside"===Ln.ticks&&(Un+=Ln.ticklen)),Ut=10+Un+(Ln.linewidth?Ln.linewidth-1:0)}Xn||(Ut+="x"===Kn?"top"===Ln.side?Jn*(Ln.showticklabels?1:0):Jn*(Ln.showticklabels?1.5:.5):"right"===Ln.side?Jn*(Ln.showticklabels?1:.5):Jn*(Ln.showticklabels?.5:0))}var In,Pn,Bn,Gn,or=H.getPxPosition(pn,Ln);if("x"===Kn?(Pn=Ln._offset+Ln._length/2,Bn="top"===Ln.side?or-Ut:or+Ut):(Bn=Ln._offset+Ln._length/2,Pn="right"===Ln.side?or+Ut:or-Ut,In={rotate:"-90",offset:0}),"multicategory"!==Ln.type){var sr=Ln._selections[Ln._id+"tick"];if(Gn={selection:sr,side:Ln.side},sr&&sr.node()&&sr.node().parentNode){var xr=m.getTranslate(sr.node().parentNode);Gn.offsetLeft=xr.x,Gn.offsetTop=xr.y}Ln.title.hasOwnProperty("standoff")&&(Gn.pad=0)}return o.draw(pn,Sn+"title",{propContainer:Ln,propName:Ln._name+".title.text",placeholder:xn._dfltTitle[Kn],avoid:Gn,transform:In,attributes:{x:Pn,y:Bn,"text-anchor":"middle"}})}(ye,Ce)}),e.syncOrAsync(ri)}}function Ci(pn){var Ut,xn,Sn,Kn,Jn,Xn,Ln=mt+(pn||"tick");return et[Ln]||(et[Ln]=((Ut=Ce)._selections[xn=Ln].size()?(Sn=1/0,Kn=-1/0,Jn=1/0,Xn=-1/0,Ut._selections[xn].each(function(){var Un=ft(this),In=m.bBox(Un.node().parentNode);Sn=Math.min(Sn,In.top),Kn=Math.max(Kn,In.bottom),Jn=Math.min(Jn,In.left),Xn=Math.max(Xn,In.right)})):(Sn=0,Kn=0,Jn=0,Xn=0),{top:Sn,bottom:Kn,left:Jn,right:Xn,height:Kn-Sn,width:Xn-Jn})),et[Ln]}},H.getTickSigns=function(ye,Ce){var Ue=ye._id.charAt(0),rt=ye.side==={x:"top",y:"right"}[Ue]?1:-1,Ke=[-1,1,rt,-rt];return"inside"!==(Ce?(ye.minor||{}).ticks:ye.ticks)==("x"===Ue)&&(Ke=Ke.map(function(gt){return-gt})),ye.side&&Ke.push({l:-1,t:-1,r:1,b:1}[ye.side.charAt(0)]),Ke},H.makeTransTickFn=function(ye){return"x"===ye._id.charAt(0)?function(Ce){return r(ye._offset+ye.l2p(Ce.x),0)}:function(Ce){return r(0,ye._offset+ye.l2p(Ce.x))}},H.makeTransTickLabelFn=function(ye){var Ce=function(rt){var Ke=rt.ticklabelposition||"",gt=function(ht){return-1!==Ke.indexOf(ht)},mt=gt("top"),Lt=gt("left"),Vt=gt("right"),dt=gt("bottom"),bt=gt("inside"),Yt=dt||Lt||mt||Vt;if(!Yt&&!bt)return[0,0];var It=rt.side,jt=Yt?(rt.tickwidth||0)/2:0,Ie=3,et=rt.tickfont?rt.tickfont.size:12;return(dt||mt)&&(jt+=et*se,Ie+=(rt.linewidth||0)/2),(Lt||Vt)&&(jt+=(rt.linewidth||0)/2,Ie+=3),bt&&"top"===It&&(Ie-=et*(1-se)),(Lt||mt)&&(jt=-jt),"bottom"!==It&&"right"!==It||(Ie=-Ie),[Yt?jt:0,bt?Ie:0]}(ye),Ue=Ce[0],Qe=Ce[1];return"x"===ye._id.charAt(0)?function(rt){return r(Ue+ye._offset+ye.l2p(vt(rt)),Qe)}:function(rt){return r(Qe,Ue+ye._offset+ye.l2p(vt(rt)))}},H.makeTickPath=function(ye,Ce,Ue,Qe){Qe||(Qe={});var rt=Qe.minor;if(rt&&!ye.minor)return"";var Ke=void 0!==Qe.len?Qe.len:rt?ye.minor.ticklen:ye.ticklen,gt=ye._id.charAt(0),mt=(ye.linewidth||1)/2;return"x"===gt?"M0,"+(Ce+mt*Ue)+"v"+Ke*Ue:"M"+(Ce+mt*Ue)+",0h"+Ke*Ue},H.makeLabelFns=function(ye,Ce,Ue){var Qe=ye.ticklabelposition||"",rt=function(fn){return-1!==Qe.indexOf(fn)},Ke=rt("top"),gt=rt("left"),mt=rt("right"),Lt=rt("bottom")||gt||Ke||mt,Vt=rt("inside"),dt="inside"===Qe&&"inside"===ye.ticks||!Vt&&"outside"===ye.ticks&&"boundaries"!==ye.tickson,bt=0,Yt=0,It=dt?ye.ticklen:0;if(Vt?It*=-1:Lt&&(It=0),dt&&(bt+=It,Ue)){var jt=e.deg2rad(Ue);bt=It*Math.cos(jt)+1,Yt=It*Math.sin(jt)}ye.showticklabels&&(dt||ye.showline)&&(bt+=.2*ye.tickfont.size);var Ie,et,ht,xt,Rt,Xt={labelStandoff:bt+=(ye.linewidth||1)/2*(Vt?-1:1),labelShift:Yt},tn=0,Kt=ye.side,kn=ye._id.charAt(0),Vn=ye.tickangle;if("x"===kn)xt=(Rt=!Vt&&"bottom"===Kt||Vt&&"top"===Kt)?1:-1,Vt&&(xt*=-1),Ie=Yt*xt,et=Ce+bt*xt,ht=Rt?1:-.2,90===Math.abs(Vn)&&(Vt?ht+=J:ht=-90===Vn&&"bottom"===Kt?se:90===Vn&&"top"===Kt?J:.5,tn=J/2*(Vn/90)),Xt.xFn=function(fn){return fn.dx+Ie+tn*fn.fontSize},Xt.yFn=function(fn){return fn.dy+et+fn.fontSize*ht},Xt.anchorFn=function(fn,dn){if(Lt){if(gt)return"end";if(mt)return"start"}return g(dn)&&0!==dn&&180!==dn?dn*xt<0!==Vt?"end":"start":"middle"},Xt.heightFn=function(fn,dn,Mn){return dn<-60||dn>60?-.5*Mn:"top"===ye.side!==Vt?-Mn:0};else if("y"===kn){if(xt=(Rt=!Vt&&"left"===Kt||Vt&&"right"===Kt)?1:-1,Vt&&(xt*=-1),Ie=bt,et=Yt*xt,ht=0,Vt||90!==Math.abs(Vn)||(ht=-90===Vn&&"left"===Kt||90===Vn&&"right"===Kt?se:.5),Vt){var Tn=g(Vn)?+Vn:0;if(0!==Tn){var sn=e.deg2rad(Tn);tn=Math.abs(Math.sin(sn))*se*xt,ht=0}}Xt.xFn=function(fn){return fn.dx+Ce-(Ie+fn.fontSize*ht)*xt+tn*fn.fontSize},Xt.yFn=function(fn){return fn.dy+et+fn.fontSize*J},Xt.anchorFn=function(fn,dn){return g(dn)&&90===Math.abs(dn)?"middle":Rt?"end":"start"},Xt.heightFn=function(fn,dn,Mn){return"right"===ye.side&&(dn*=-1),dn<-30?-Mn:dn<30?-.5*Mn:0}}return Xt},H.drawTicks=function(ye,Ce,Ue){Ue=Ue||{};var Qe=Ce._id+"tick",rt=[].concat(Ce.minor&&Ce.minor.ticks?Ue.vals.filter(function(gt){return gt.minor&&!gt.noTick}):[]).concat(Ce.ticks?Ue.vals.filter(function(gt){return!gt.minor&&!gt.noTick}):[]),Ke=Ue.layer.selectAll("path."+Qe).data(rt,wt);Ke.exit().remove(),Ke.enter().append("path").classed(Qe,1).classed("ticks",1).classed("crisp",!1!==Ue.crisp).each(function(gt){return n.stroke(p.select(this),gt.minor?Ce.minor.tickcolor:Ce.tickcolor)}).style("stroke-width",function(gt){return m.crispRound(ye,gt.minor?Ce.minor.tickwidth:Ce.tickwidth,1)+"px"}).attr("d",Ue.path).style("display",null),nt(Ce,[G]),Ke.attr("transform",Ue.transFn)},H.drawGrid=function(ye,Ce,Ue){Ue=Ue||{};var Qe=Ce._id+"grid",rt=Ce.minor&&Ce.minor.showgrid,Ke=rt?Ue.vals.filter(function(ht){return ht.minor}):[],gt=Ce.showgrid?Ue.vals.filter(function(ht){return!ht.minor}):[],mt=Ue.counterAxis;if(mt&&H.shouldShowZeroLine(ye,Ce,mt))for(var Lt="array"===Ce.tickmode,Vt=0;Vt<gt.length;Vt++){var dt=gt[Vt].x;if(Lt?!dt:Math.abs(dt)<Ce.dtick/100){if(gt=gt.slice(0,Vt).concat(gt.slice(Vt+1)),!Lt)break;Vt--}}Ce._gw=m.crispRound(ye,Ce.gridwidth,1);for(var bt=rt?m.crispRound(ye,Ce.minor.gridwidth,1):0,Yt=Ue.layer,It=Ue.minorLayer,jt=1;jt>=0;jt--){var Ie=jt?Yt:It;if(Ie){var et=Ie.selectAll("path."+Qe).data(jt?gt:Ke,wt);et.exit().remove(),et.enter().append("path").classed(Qe,1).classed("crisp",!1!==Ue.crisp),et.attr("transform",Ue.transFn).attr("d",Ue.path).each(function(ht){return n.stroke(p.select(this),ht.minor?Ce.minor.gridcolor:Ce.gridcolor||"#ddd")}).style("stroke-dasharray",function(ht){return m.dashStyle(ht.minor?Ce.minor.griddash:Ce.griddash,ht.minor?Ce.minor.gridwidth:Ce.gridwidth)}).style("stroke-width",function(ht){return(ht.minor?bt:Ce._gw)+"px"}).style("display",null),"function"==typeof Ue.path&&et.attr("d",Ue.path)}}nt(Ce,[z,q])},H.drawZeroLine=function(ye,Ce,Ue){var Qe=Ce._id+"zl",rt=H.shouldShowZeroLine(ye,Ce,(Ue=Ue||Ue).counterAxis),Ke=Ue.layer.selectAll("path."+Qe).data(rt?[{x:0,id:Ce._id}]:[]);Ke.exit().remove(),Ke.enter().append("path").classed(Qe,1).classed("zl",1).classed("crisp",!1!==Ue.crisp).each(function(){Ue.layer.selectAll("path").sort(function(gt,mt){return te(gt.id,mt.id)})}),Ke.attr("transform",Ue.transFn).attr("d",Ue.path).call(n.stroke,Ce.zerolinecolor||n.defaultLine).style("stroke-width",m.crispRound(ye,Ce.zerolinewidth,Ce._gw||1)+"px").style("display",null),nt(Ce,[N])},H.drawLabels=function(ye,Ce,Ue){Ue=Ue||{};var Qe=ye._fullLayout,rt=Ce._id,Ke=rt.charAt(0),gt=Ue.cls||rt+"tick",mt=Ue.vals.filter(function(xt){return xt.text}),Lt=Ue.labelFns,Vt=Ue.secondary?0:Ce.tickangle,dt=(Ce._prevTickAngles||{})[gt],bt=Ue.layer.selectAll("g."+gt).data(Ce.showticklabels?mt:[],wt),Yt=[];function It(xt,Rt){xt.each(function(Xt){var tn=p.select(this),Kt=tn.select(".text-math-group"),kn=Lt.anchorFn(Xt,Rt),Vn=Ue.transFn.call(tn.node(),Xt)+(g(Rt)&&0!=+Rt?" rotate("+Rt+","+Lt.xFn(Xt)+","+(Lt.yFn(Xt)-Xt.fontSize/2)+")":""),Tn=t.lineCount(tn),sn=V*Xt.fontSize,fn=Lt.heightFn(Xt,g(Rt)?+Rt:0,(Tn-1)*sn);if(fn&&(Vn+=r(0,fn)),Kt.empty()){var dn=tn.select("text");dn.attr({transform:Vn,"text-anchor":kn}),dn.style("opacity",1),Ce._adjustTickLabelsOverflow&&Ce._adjustTickLabelsOverflow()}else{var Mn=m.bBox(Kt.node()).width*{end:-.5,start:.5}[kn];Kt.attr("transform",Vn+r(Mn,0))}})}bt.enter().append("g").classed(gt,1).append("text").attr("text-anchor","middle").each(function(xt){var Rt=p.select(this),Xt=ye._promises.length;Rt.call(t.positionText,Lt.xFn(xt),Lt.yFn(xt)).call(m.font,xt.font,xt.fontSize,xt.fontColor).text(xt.text).call(t.convertToTspans,ye),ye._promises[Xt]?Yt.push(ye._promises.pop().then(function(){It(Rt,Vt)})):It(Rt,Vt)}),nt(Ce,[K]),bt.exit().remove(),Ue.repositionOnUpdate&&bt.each(function(xt){p.select(this).select("text").call(t.positionText,Lt.xFn(xt),Lt.yFn(xt))}),Ce._adjustTickLabelsOverflow=function(){var xt=Ce.ticklabeloverflow;if(xt&&"allow"!==xt){var Rt=-1!==xt.indexOf("hide"),Xt="x"===Ce._id.charAt(0),tn=0,Kt=Xt?ye._fullLayout.width:ye._fullLayout.height;if(-1!==xt.indexOf("domain")){var kn=e.simpleMap(Ce.range,Ce.r2l);tn=Ce.l2p(kn[0])+Ce._offset,Kt=Ce.l2p(kn[1])+Ce._offset}var Vn=Math.min(tn,Kt),Tn=Math.max(tn,Kt),sn=Ce.side,fn=1/0,dn=-1/0;for(var Mn in bt.each(function(er){var nr=p.select(this);if(nr.select(".text-math-group").empty()){var mr=m.bBox(nr.node()),Dr=0;Xt?(mr.right>Tn||mr.left<Vn)&&(Dr=1):(mr.bottom>Tn||mr.top+(Ce.tickangle?0:er.fontSize/4)<Vn)&&(Dr=1);var yr=nr.select("text");Dr?Rt&&yr.style("opacity",0):(yr.style("opacity",1),fn="bottom"===sn||"right"===sn?Math.min(fn,Xt?mr.top:mr.left):-1/0,dn="top"===sn||"left"===sn?Math.max(dn,Xt?mr.bottom:mr.right):1/0)}}),Qe._plots){var En=Qe._plots[Mn];if(Ce._id===En.xaxis._id||Ce._id===En.yaxis._id){var jn=Xt?En.yaxis:En.xaxis;jn&&(jn["_visibleLabelMin_"+Ce._id]=fn,jn["_visibleLabelMax_"+Ce._id]=dn)}}}},Ce._hideCounterAxisInsideTickLabels=function(xt){var Rt="x"===Ce._id.charAt(0),Xt=[];for(var tn in Qe._plots){var Kt=Qe._plots[tn];Ce._id!==Kt.xaxis._id&&Ce._id!==Kt.yaxis._id||Xt.push(Rt?Kt.yaxis:Kt.xaxis)}Xt.forEach(function(kn,Vn){kn&&Xe(kn)&&(xt||[N,q,z,G,K]).forEach(function(Tn){var sn="tick"===Tn.K&&"text"===Tn.L&&"period"===Ce.ticklabelmode,fn=Qe._plots[Ce._mainSubplot];(Tn.K===N.K?fn.zerolinelayer.selectAll("."+Ce._id+"zl"):Tn.K===q.K?fn.minorGridlayer.selectAll("."+Ce._id):Tn.K===z.K?fn.gridlayer.selectAll("."+Ce._id):fn[Ce._id.charAt(0)+"axislayer"]).each(function(){var dn=p.select(this);Tn.L&&(dn=dn.selectAll(Tn.L)),dn.each(function(Mn){var En=Ce.l2p(sn?vt(Mn):Mn.x)+Ce._offset,jn=p.select(this);En<Ce["_visibleLabelMax_"+kn._id]&&En>Ce["_visibleLabelMin_"+kn._id]?jn.style("display","none"):"tick"!==Tn.K||Vn||jn.style("display",null)})})})})},It(bt,dt+1?dt:Vt);var jt=null;Ce._selections&&(Ce._selections[gt]=bt);var Ie=[function(){return Yt.length&&Promise.all(Yt)}];Ce.automargin&&Qe._redrawFromAutoMarginCount&&90===dt?(jt=90,Ie.push(function(){It(bt,dt)})):Ie.push(function(){if(It(bt,Vt),mt.length&&"x"===Ke&&!g(Vt)&&("log"!==Ce.type||"D"!==String(Ce.dtick).charAt(0))){jt=0;var xt,Rt=0,Xt=[];if(bt.each(function(nr){Rt=Math.max(Rt,nr.fontSize);var mr=Ce.l2p(nr.x),Dr=ft(this),yr=m.bBox(Dr.node());Xt.push({top:0,bottom:10,height:10,left:mr-yr.width/2,right:mr+yr.width/2+2,width:yr.width+2})}),"boundaries"!==Ce.tickson&&!Ce.showdividers||Ue.secondary){var tn=mt.length,Kt=Math.abs((mt[tn-1].x-mt[0].x)*Ce._m)/(tn-1),kn=Ce.ticklabelposition||"",Vn=function(nr){return-1!==kn.indexOf(nr)},Tn=Vn("top"),sn=Vn("left"),fn=Vn("right"),dn=Vn("bottom")||sn||Tn||fn?(Ce.tickwidth||0)+6:0,Mn=Kt<2.5*Rt||"multicategory"===Ce.type||"realaxis"===Ce._name;for(xt=0;xt<Xt.length-1;xt++)if(e.bBoxIntersect(Xt[xt],Xt[xt+1],dn)){jt=Mn?90:30;break}}else{var En=2;for(Ce.ticks&&(En+=Ce.tickwidth/2),xt=0;xt<Xt.length;xt++){var jn=mt[xt].xbnd,er=Xt[xt];if(null!==jn[0]&&er.left-Ce.l2p(jn[0])<En||null!==jn[1]&&Ce.l2p(jn[1])-er.right<En){jt=90;break}}}jt&&It(bt,jt)}}),Ce._tickAngles&&Ie.push(function(){Ce._tickAngles[gt]=null===jt?g(Vt)?Vt:0:jt});var et=Ce._anchorAxis;et&&et.autorange&&Xe(Ce)&&!ee(Qe,Ce._id)&&(Qe._insideTickLabelsAutorange||(Qe._insideTickLabelsAutorange={}),Qe._insideTickLabelsAutorange[et._name+".autorange"]=et.autorange,Ie.push(function(){bt.each(function(xt,Rt){var Xt=ft(this);Xt.select(".text-math-group").empty()&&(Ce._vals[Rt].bb=m.bBox(Xt.node()))})}));var ht=e.syncOrAsync(Ie);return ht&&ht.then&&ye._promises.push(ht),ht},H.getPxPosition=function(ye,Ce){var Ue,Qe=ye._fullLayout._size,rt=Ce._id.charAt(0),Ke=Ce.side;return"free"!==Ce.anchor?Ue=Ce._anchorAxis:"x"===rt?Ue={_offset:Qe.t+(1-(Ce.position||0))*Qe.h,_length:0}:"y"===rt&&(Ue={_offset:Qe.l+(Ce.position||0)*Qe.w,_length:0}),"top"===Ke||"left"===Ke?Ue._offset:"bottom"===Ke||"right"===Ke?Ue._offset+Ue._length:void 0},H.shouldShowZeroLine=function(ye,Ce,Ue){var Qe=e.simpleMap(Ce.range,Ce.r2l);return Qe[0]*Qe[1]<=0&&Ce.zeroline&&("linear"===Ce.type||"-"===Ce.type)&&!(Ce.rangebreaks&&Ce.maskBreaks(0)===E)&&(St(Ce,0)||!function(rt,Ke,gt,mt){var Lt=gt._mainAxis;if(Lt){var Vt=rt._fullLayout,dt=Ke._id.charAt(0),bt=H.counterLetter(Ke._id),Yt=Ke._offset+(Math.abs(mt[0])<Math.abs(mt[1])==("x"===dt)?0:Ke._length),jt=Vt._plots[gt._mainSubplot];if(!(jt.mainplotinfo||jt).overlays.length)return It(gt);for(var Ie=H.list(rt,bt),et=0;et<Ie.length;et++){var ht=Ie[et];if(ht._mainAxis===Lt&&It(ht))return!0}}function It(xt){if(!xt.showline||!xt.linewidth)return!1;var Rt=Math.max((xt.linewidth+Ke.zerolinewidth)/2,1);function Xt(kn){return"number"==typeof kn&&Math.abs(kn-Yt)<Rt}if(Xt(xt._mainLinePosition)||Xt(xt._mainMirrorPosition))return!0;var tn=xt._linepositions||{};for(var Kt in tn)if(Xt(tn[Kt][0])||Xt(tn[Kt][1]))return!0}}(ye,Ce,Ue,Qe)||function(rt,Ke){for(var gt=rt._fullData,mt=Ke._mainSubplot,Lt=Ke._id.charAt(0),Vt=0;Vt<gt.length;Vt++){var dt=gt[Vt];if(!0===dt.visible&&dt.xaxis+dt.yaxis===mt&&(y.traceIs(dt,"bar-like")&&dt.orientation==={x:"h",y:"v"}[Lt]||dt.fill&&dt.fill.charAt(dt.fill.length-1)===Lt))return!0}return!1}(ye,Ce))},H.clipEnds=function(ye,Ce){return Ce.filter(function(Ue){return St(ye,Ue.x)})},H.allowAutoMargin=function(ye){for(var Ce=H.list(ye,"",!0),Ue=0;Ue<Ce.length;Ue++){var Qe=Ce[Ue];Qe.automargin&&(b.allowAutoMargin(ye,st(Qe)),Qe.mirror&&b.allowAutoMargin(ye,Ct(Qe))),y.getComponentMethod("rangeslider","isVisible")(Qe)&&b.allowAutoMargin(ye,$t(Qe))}},H.swap=function(ye,Ce){for(var Ue=function(rt,Ke){var gt,mt,Lt=[];for(gt=0;gt<Ke.length;gt++){var Vt=[],dt=rt._fullData[Ke[gt]].xaxis,bt=rt._fullData[Ke[gt]].yaxis;if(dt&&bt){for(mt=0;mt<Lt.length;mt++)-1===Lt[mt].x.indexOf(dt)&&-1===Lt[mt].y.indexOf(bt)||Vt.push(mt);if(Vt.length){var Yt,It=Lt[Vt[0]];if(Vt.length>1)for(mt=1;mt<Vt.length;mt++)rn(It.x,(Yt=Lt[Vt[mt]]).x),rn(It.y,Yt.y);rn(It.x,[dt]),rn(It.y,[bt])}else Lt.push({x:[dt],y:[bt]})}}return Lt}(ye,Ce),Qe=0;Qe<Ue.length;Qe++)hn(ye,Ue[Qe].x,Ue[Qe].y)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../constants/numerical").BADNUM,y=g.isArrayOrTypedArray,e=g.isDateTime,r=g.cleanNumber,t=Math.round;function o(m,l){return l?p(m):"number"==typeof m}function n(m){return Math.max(1,(m-1)/1e3)}ae.exports=function(m,l,i){var _,f=m,u=i.noMultiCategory;if(y(f)&&!f.length)return"-";if(!u&&y((_=f)[0])&&y(_[1]))return"multicategory";if(u&&Array.isArray(f[0])){for(var s=[],d=0;d<f.length;d++)if(y(f[d]))for(var h=0;h<f[d].length;h++)s.push(f[d][h]);f=s}if(function(_,c){for(var T=_.length,x=n(T),w=0,M=0,D={},C=0;C<T;C+=x){var L=_[t(C)],S=String(L);D[S]||(D[S]=1,e(L,c)&&w++,p(L)&&M++)}return w>2*M}(f,l))return"date";var a="strict"!==i.autotypenumbers;return function(_,c){for(var T=_.length,x=n(T),w=0,M=0,D={},C=0;C<T;C+=x){var L=_[t(C)],S=String(L);if(!D[S]){D[S]=1;var E=typeof L;"boolean"===E?M++:(c?r(L)!==b:"number"===E)?w++:"string"===E&&M++}}return M>2*w}(f,a)?"category":function(_,c){for(var T=_.length,x=0;x<T;x++)if(o(_[x],c))return!0;return!1}(f,a)?"linear":"-"}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../registry"),b=v("../../lib"),y=v("../../plot_api/plot_template"),e=v("../array_container_defaults"),r=v("./layout_attributes"),t=v("./tick_value_defaults"),o=v("./tick_mark_defaults"),n=v("./tick_label_defaults"),m=v("./prefix_suffix_defaults"),l=v("./category_order_defaults"),i=v("./line_grid_defaults"),f=v("./set_convert"),u=v("./constants").WEEKDAY_PATTERN,s=v("./constants").HOUR_PATTERN;function d(_,c,T){function x(E,N){return b.coerce(_,c,r.rangebreaks,E,N)}if(x("enabled")){var w=x("bounds");if(w&&w.length>=2){var M,D,C="";if(2===w.length)for(M=0;M<2;M++)if(D=a(w[M])){C=u;break}var P=x("pattern",C);if(P===u)for(M=0;M<2;M++)(D=a(w[M]))&&(c.bounds[M]=w[M]=D-1);if(P)for(M=0;M<2;M++)switch(D=w[M],P){case u:if(!p(D)||(D=+D)!==Math.floor(D)||D<0||D>=7)return void(c.enabled=!1);c.bounds[M]=w[M]=D;break;case s:if(!p(D)||(D=+D)<0||D>24)return void(c.enabled=!1);c.bounds[M]=w[M]=D}if(!1===T.autorange){var L=T.range;if(L[0]<L[1]){if(w[0]<L[0]&&w[1]>L[1])return void(c.enabled=!1)}else if(w[0]>L[0]&&w[1]<L[1])return void(c.enabled=!1)}}else{var S=x("values");if(!S||!S.length)return void(c.enabled=!1);x("dvalue")}}}ae.exports=function(_,c,T,x,w){var M,D=x.letter,C=x.font||{},P=x.splomStash||{},L=T("visible",!x.visibleDflt),E=c.type||(c._template||{}).type||"-";"date"===E&&(g.getComponentMethod("calendars","handleDefaults")(_,c,"calendar",x.calendar),x.noTicklabelmode||(M=T("ticklabelmode")));var N="";x.noTicklabelposition&&"multicategory"!==E||(N=b.coerce(_,c,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===M?["outside","inside"]:"x"===D?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),x.noTicklabeloverflow||T("ticklabeloverflow",-1!==N.indexOf("inside")?"hide past domain":"category"===E||"multicategory"===E?"allow":"hide past div"),f(c,w);var z=!c.isValidRange(_.range);z&&x.reverseDflt&&(z="reversed"),!T("autorange",z)||"linear"!==E&&"-"!==E||T("rangemode"),T("range"),c.cleanRange(),l(_,c,T,x),"category"===E||x.noHover||T("hoverformat");var q=T("color"),G=q!==r.color.dflt?q:C.color,K=P.label||w._dfltTitle[D];if(m(_,c,T,E,x),!L)return c;T("title.text",K),b.coerceFont(T,"title.font",{family:C.family,size:b.bigFont(C.size),color:G}),t(_,c,T,E);var ne=x.hasMinor;if(ne&&(y.newContainer(c,"minor"),t(_,c,T,E,{isMinor:!0})),n(_,c,T,E,x),o(_,c,T,x),ne){var X=x.isMinor;x.isMinor=!0,o(_,c,T,x),x.isMinor=X}i(_,c,T,{dfltColor:q,bgColor:x.bgColor,showGrid:x.showGrid,hasMinor:ne,attributes:r}),!ne||c.minor.ticks||c.minor.showgrid||delete c.minor,(c.showline||c.ticks)&&T("mirror"),x.automargin&&T("automargin");var J,se="multicategory"===E;if(x.noTickson||"category"!==E&&!se||!c.ticks&&!c.showgrid||(se&&(J="boundaries"),"boundaries"===T("tickson",J)&&delete c.ticklabelposition),se&&T("showdividers")&&(T("dividercolor"),T("dividerwidth")),"date"===E)if(e(_,c,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:d}),c.rangebreaks.length){for(var V=0;V<c.rangebreaks.length;V++)if(c.rangebreaks[V].pattern===u){c._hasDayOfWeekBreaks=!0;break}if(f(c,w),w._has("scattergl")||w._has("splom"))for(var j=0;j<x.data.length;j++){var H=x.data[j];"scattergl"!==H.type&&"splom"!==H.type||(H.visible=!1,b.warn(H.type+" traces do not work on axes with rangebreaks. Setting trace "+H.index+" to `visible: false`."))}}else delete c.rangebreaks;return c};var h={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function a(_){if("string"==typeof _)return h[_.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(v,ae,ie){"use strict";var p=v("../../constants/docs"),g=p.FORMAT_LINK,b=p.DATE_FORMAT_LINK;function y(r,t){return["Sets the "+r+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+g+"."].join(" ")}function e(r,t){return y(r,t)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ae.exports={axisHoverFormat:function(r,t){return{valType:"string",dflt:"",editType:"none",description:(t?y:e)("hover text",r)+["By default the values are formatted using "+(t?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:y,descriptionWithDates:e}},{"../../constants/docs":486}],570:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("./constants");function b(y,e){if(e&&e.length)for(var r=0;r<e.length;r++)if(e[r][y])return!0;return!1}ie.id2name=function(y){if("string"==typeof y&&y.match(g.AX_ID_PATTERN)){var e=y.split(" ")[0].substr(1);return"1"===e&&(e=""),y.charAt(0)+"axis"+e}},ie.name2id=function(y){if(y.match(g.AX_NAME_PATTERN)){var e=y.substr(5);return"1"===e&&(e=""),y.charAt(0)+e}},ie.cleanId=function(y,e,r){var t=/( domain)$/.test(y);if("string"==typeof y&&y.match(g.AX_ID_PATTERN)&&(!e||y.charAt(0)===e)&&(!t||r)){var o=y.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===o&&(o=""),y.charAt(0)+o+(t&&r?" domain":"")}},ie.list=function(y,e,r){var t=y._fullLayout;if(!t)return[];var o,n=ie.listIds(y,e),m=new Array(n.length);for(o=0;o<n.length;o++){var l=n[o];m[o]=t[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var i=t._subplots.gl3d||[];for(o=0;o<i.length;o++){var f=t[i[o]];e?m.push(f[e+"axis"]):m.push(f.xaxis,f.yaxis,f.zaxis)}}return m},ie.listIds=function(y,e){var r=y._fullLayout;if(!r)return[];var t=r._subplots;return e?t[e+"axis"]:t.xaxis.concat(t.yaxis)},ie.getFromId=function(y,e,r){var t=y._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),t[ie.id2name(e)]},ie.getFromTrace=function(y,e,r){var t=y._fullLayout,o=null;if(p.traceIs(e,"gl3d")){var n=e.scene;"scene"===n.substr(0,5)&&(o=t[n][r+"axis"])}else o=ie.getFromId(y,e[r+"axis"]||r);return o},ie.idSort=function(y,e){var r=y.charAt(0),t=e.charAt(0);return r!==t?r>t?1:-1:+(y.substr(1)||1)-+(e.substr(1)||1)},ie.ref2id=function(y){return!!/^[xyz]/.test(y)&&y.split(" ")[0]},ie.isLinked=function(y,e){return b(e,y._axisMatchGroups)||b(e,y._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y){if("category"===g.type){var e,r=p.categoryarray,t=Array.isArray(r)&&r.length>0;t&&(e="array");var o,n=b("categoryorder",e);"array"===n&&(o=b("categoryarray")),t||"array"!==n||(n=g.categoryorder="trace"),"trace"===n?g._initialCategories=[]:"array"===n?g._initialCategories=o.slice():(o=function(m,l){var i,f,u,s=l.dataAttr||m._id.charAt(0),d={};if(l.axData)i=l.axData;else for(i=[],f=0;f<l.data.length;f++){var h=l.data[f];h[s+"axis"]===m._id&&i.push(h)}for(f=0;f<i.length;f++){var a=i[f][s];for(u=0;u<a.length;u++){var _=a[u];null!=_&&(d[_]=1)}}return Object.keys(d)}(g,y).sort(),"category ascending"===n?g._initialCategories=o:"category descending"===n&&(g._initialCategories=o.reverse()))}}},{}],572:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../constants/numerical"),y=b.ONEDAY,e=b.ONEWEEK;ie.dtick=function(r,t){var o="log"===t,n="date"===t,m="category"===t,l=n?y:1;if(!r)return l;if(p(r))return(r=Number(r))<=0?l:m?Math.max(1,Math.round(r)):n?Math.max(.1,r):r;if("string"!=typeof r||!n&&!o)return l;var i=r.charAt(0),f=r.substr(1);return(f=p(f)?Number(f):0)<=0||!(n&&"M"===i&&f===Math.round(f)||o&&"L"===i||o&&"D"===i&&(1===f||2===f))?l:r},ie.tick0=function(r,t,o,n){return"date"===t?g.cleanDate(r,g.dateTick0(o,n%e==0?1:0)):"D1"!==n&&"D2"!==n?p(r)?Number(r):0:void 0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(v,ae,ie){"use strict";var p=v("../../lib/regex").counter;ae.exports={idRegex:{x:p("x","( domain)?"),y:p("y","( domain)?")},attrRegex:p("[xy]axis"),xAxisMatch:p("xaxis"),yAxisMatch:p("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./autorange"),b=v("./axis_ids").id2name,y=v("./layout_attributes"),e=v("./scale_zoom"),r=v("./set_convert"),t=v("../../constants/numerical").ALMOST_EQUAL,o=v("../../constants/alignment").FROM_BL;function n(d,h,a){var _=a.axIds,c=a.layoutOut,T=a.hasImage,x=c._axisConstraintGroups,w=c._axisMatchGroups,M=h._id,D=M.charAt(0),C=((c._splomAxes||{})[D]||{})[M]||{},P=h._id,L="x"===P.charAt(0);function S(oe,U){return p.coerce(d,h,y,oe,U)}h._matchGroup=null,h._constraintGroup=null,S("constrain",T?"domain":"range"),p.coerce(d,h,{constraintoward:{valType:"enumerated",values:L?["left","center","right"]:["bottom","middle","top"],dflt:L?"center":"middle"}},"constraintoward");var E,N,z=h.type,q=[];for(E=0;E<_.length;E++)(N=_[E])!==P&&c[b(N)].type===z&&q.push(N);var G=l(x,P);if(G){var K=[];for(E=0;E<q.length;E++)G[N=q[E]]||K.push(N);q=K}var ne,X,J=q.length;J&&(d.matches||C.matches)&&(ne=p.coerce(d,h,{matches:{valType:"enumerated",values:q,dflt:-1!==q.indexOf(C.matches)?C.matches:void 0}},"matches"));var se=T&&!L?h.anchor:void 0;if(J&&!ne&&(d.scaleanchor||se)&&(X=p.coerce(d,h,{scaleanchor:{valType:"enumerated",values:q}},"scaleanchor",se)),ne){h._matchGroup=i(w,P,ne,1);var V=c[b(ne)],j=m(c,h)/m(c,V);L!==("x"===ne.charAt(0))&&(j=(L?"x":"y")+j),i(x,P,ne,j)}else d.matches&&-1!==_.indexOf(d.matches)&&p.warn("ignored "+h._name+'.matches: "'+d.matches+'" to avoid an infinite loop');if(X){var H=S("scaleratio");H||(H=h.scaleratio=1),i(x,P,X,H)}else d.scaleanchor&&-1!==_.indexOf(d.scaleanchor)&&p.warn("ignored "+h._name+'.scaleanchor: "'+d.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function m(d,h){var a=h.domain;return a||(a=d[b(h.overlaying)].domain),a[1]-a[0]}function l(d,h){for(var a=0;a<d.length;a++)if(d[a][h])return d[a];return null}function i(d,h,a,_){var c,T,x,w,M,D=l(d,h);null===D?((D={})[h]=1,M=d.length,d.push(D)):M=d.indexOf(D);var C=Object.keys(D);for(c=0;c<d.length;c++)if(x=d[c],c!==M&&x[a]){var P=x[a];for(T=0;T<C.length;T++)x[w=C[T]]=f(P,f(_,D[w]));return void d.splice(M,1)}if(1!==_)for(T=0;T<C.length;T++){var L=C[T];D[L]=f(_,D[L])}D[a]=1}function f(d,h){var a,_,c="",T="";"string"==typeof d&&(a=(c=d.match(/^[xy]*/)[0]).length,d=+d.substr(a)),"string"==typeof h&&(_=(T=h.match(/^[xy]*/)[0]).length,h=+h.substr(_));var x=d*h;return a||_?a&&_&&c.charAt(0)!==T.charAt(0)?a===_?x:(a>_?c.substr(_):T.substr(a))+x:c+T+d*h:x}function u(d,h){for(var a=h._size,_=a.h/a.w,c={},T=Object.keys(d),x=0;x<T.length;x++){var w=T[x],M=d[w];if("string"==typeof M){var D=M.match(/^[xy]*/)[0],C=D.length;M=+M.substr(C);for(var P="y"===D.charAt(0)?_:1/_,L=0;L<C;L++)M*=P}c[w]=M}return c}function s(d,h){var a=d._inputDomain,c=a[0]+(a[1]-a[0])*o[d.constraintoward];d.domain=d._input.domain=[c+(a[0]-c)/h,c+(a[1]-c)/h],d.setScale()}ie.handleDefaults=function(d,h,a){var _,c,T,x,w,M,D,C,P=a.axIds,L=a.axHasImage,S=h._axisConstraintGroups=[],E=h._axisMatchGroups=[];for(_=0;_<P.length;_++)n(w=d[x=b(P[_])],M=h[x],{axIds:P,layoutOut:h,hasImage:L[x]});function N(V,j){for(_=0;_<V.length;_++)for(T in c=V[_])h[b(T)][j]=c}for(N(E,"_matchGroup"),_=0;_<S.length;_++)for(T in c=S[_])if((M=h[b(T)]).fixedrange){for(var z in c){var q=b(z);!1===(d[q]||{}).fixedrange&&p.warn("fixedrange was specified as false for axis "+q+" but was overridden because another axis in its constraint group has fixedrange true"),h[q].fixedrange=!0}break}for(_=0;_<S.length;){for(T in c=S[_]){(M=h[b(T)])._matchGroup&&Object.keys(M._matchGroup).length===Object.keys(c).length&&(S.splice(_,1),_--);break}_++}N(S,"_constraintGroup");var G=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],K=!1,ne=!1;function X(){C=M[D],"rangebreaks"===D&&(ne=M._hasDayOfWeekBreaks)}for(_=0;_<E.length;_++){c=E[_];for(var J=0;J<G.length;J++){var se;for(T in D=G[J],C=null,c)if(w=d[x=b(T)],D in(M=h[x])){if(!M.matches&&(se=M,D in w)){X();break}null===C&&D in w&&X()}if("range"===D&&C&&(K=!0),"autorange"===D&&null===C&&K&&(C=!1),null===C&&D in se&&(C=se[D]),null!==C)for(T in c)(M=h[b(T)])[D]="range"===D?C.slice():C,"rangebreaks"===D&&(M._hasDayOfWeekBreaks=ne,r(M,h))}}},ie.enforce=function(d){var h,a,_,c,T,x,w,M,D=d._fullLayout,C=D._axisConstraintGroups||[];for(h=0;h<C.length;h++){_=u(C[h],D);var P=Object.keys(_),L=1/0,S=0,E=1/0,N={},z={},q=!1;for(a=0;a<P.length;a++)z[c=P[a]]=T=D[b(c)],T._inputDomain?T.domain=T._inputDomain.slice():T._inputDomain=T.domain.slice(),T._inputRange||(T._inputRange=T.range.slice()),T.setScale(),N[c]=x=Math.abs(T._m)/_[c],L=Math.min(L,x),"domain"!==T.constrain&&T._constraintShrinkable||(E=Math.min(E,x)),delete T._constraintShrinkable,S=Math.max(S,x),"domain"===T.constrain&&(q=!0);if(!(L>t*S)||q)for(a=0;a<P.length;a++)if(x=N[c=P[a]],w=(T=z[c]).constrain,x!==E||"domain"===w)if(M=x/E,"range"===w)e(T,M);else{var G=T._inputDomain,K=(T.domain[1]-T.domain[0])/(G[1]-G[0]),ne=(T.r2l(T.range[1])-T.r2l(T.range[0]))/(T.r2l(T._inputRange[1])-T.r2l(T._inputRange[0]));if((M/=K)*ne<1){T.domain=T._input.domain=G.slice(),e(T,M);continue}if(ne<1&&(T.range=T._input.range=T._inputRange.slice(),M*=ne),T.autorange){var X=T.r2l(T.range[0]),J=T.r2l(T.range[1]),se=(X+J)/2,V=se,j=se,H=Math.abs(J-se),oe=se-H*M*1.0001,U=se+H*M*1.0001,te=g.makePadFn(D,T,0),ee=g.makePadFn(D,T,1);s(T,M);var le,ce,pe=Math.abs(T._m),de=g.concatExtremes(d,T),be=de.min,he=de.max;for(ce=0;ce<be.length;ce++)(le=be[ce].val-te(be[ce])/pe)>oe&&le<V&&(V=le);for(ce=0;ce<he.length;ce++)(le=he[ce].val+ee(he[ce])/pe)<U&&le>j&&(j=le);M/=(j-V)/(2*H),V=T.l2r(V),j=T.l2r(j),T.range=T._input.range=X<J?[V,j]:[j,V]}s(T,M)}}},ie.getAxisGroup=function(d,h){for(var a=d._axisMatchGroups,_=0;_<a.length;_++)if(a[_][h])return"g"+_;return h},ie.clean=function(d,h){if(h._inputDomain){for(var a=!1,_=h._id,c=d._fullLayout._axisConstraintGroups,T=0;T<c.length;T++)if(c[T][_]){a=!0;break}a&&"domain"===h.constrain||(h._input.domain=h.domain=h._inputDomain,delete h._inputDomain)}}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=g.numberFormat,y=v("tinycolor2"),e=v("has-passive-events"),r=v("../../registry"),t=g.strTranslate,o=v("../../lib/svg_text_utils"),n=v("../../components/color"),m=v("../../components/drawing"),l=v("../../components/fx"),i=v("./axes"),f=v("../../lib/setcursor"),u=v("../../components/dragelement"),s=v("../../components/dragelement/helpers"),d=s.selectingOrDrawing,h=s.freeMode,a=v("../../constants/alignment").FROM_TL,_=v("../../lib/clear_gl_canvases"),c=v("../../plot_api/subroutines").redrawReglTraces,T=v("../plots"),x=v("./axis_ids").getFromId,w=v("../../components/selections").prepSelect,M=v("../../components/selections").clearOutline,D=v("../../components/selections").selectOnClick,C=v("./scale_zoom"),P=v("./constants"),L=P.MINDRAG,S=P.MINZOOM,E=!0;function N(le,ce,pe,de){var be=g.ensureSingle(le.draglayer,ce,pe,function(he){he.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",le.id)});return be.call(f,de),be.node()}function z(le,ce,pe,de,be,he,xe){var De=N(le,"rect",ce,pe);return p.select(De).call(m.setRect,de,be,he,xe),De}function q(le,ce){for(var pe=0;pe<le.length;pe++)if(!le[pe].fixedrange)return ce;return""}function G(le,ce,pe,de,be){for(var he=0;he<le.length;he++){var xe=le[he];if(!xe.fixedrange)if(xe.rangebreaks){var De="y"===xe._id.charAt(0),ke=De?1-pe:pe;de[xe._name+".range[0]"]=xe.l2r(xe.p2l((De?1-ce:ce)*xe._length)),de[xe._name+".range[1]"]=xe.l2r(xe.p2l(ke*xe._length))}else{var Fe=xe._rl[0],ve=xe._rl[1]-Fe;de[xe._name+".range[0]"]=xe.l2r(Fe+ve*ce),de[xe._name+".range[1]"]=xe.l2r(Fe+ve*pe)}}if(be&&be.length){var Te=(ce+(1-pe))/2;G(be,Te,1-Te,de,[])}}function K(le,ce){for(var pe=0;pe<le.length;pe++){var de=le[pe];if(!de.fixedrange)if(de.rangebreaks){var be=de._length,he=(de.p2l(0+ce)-de.p2l(0)+(de.p2l(be+ce)-de.p2l(be)))/2;de.range=[de.l2r(de._rl[0]-he),de.l2r(de._rl[1]-he)]}else de.range=[de.l2r(de._rl[0]-ce/de._m),de.l2r(de._rl[1]-ce/de._m)]}}function ne(le){return 1-(le>=0?Math.min(le,.9):1/(1/Math.max(le,-.3)+3.222))}function X(le,ce,pe,de,be){return le.append("path").attr("class","zoombox").style({fill:ce>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",t(pe,de)).attr("d",be+"Z")}function J(le,ce,pe){return le.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",t(ce,pe)).attr("d","M0,0Z")}function se(le,ce,pe,de,be,he){le.attr("d",de+"M"+pe.l+","+pe.t+"v"+pe.h+"h"+pe.w+"v-"+pe.h+"h-"+pe.w+"Z"),V(le,ce,be,he)}function V(le,ce,pe,de){pe||(le.transition().style("fill",de>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ce.transition().style("opacity",1).duration(200))}function j(le){p.select(le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function H(le){E&&le.data&&le._context.showTips&&(g.notifier(g._(le,"Double-click to zoom back out"),"long"),E=!1)}function oe(le){var ce=Math.floor(Math.min(le.b-le.t,le.r-le.l,S)/2);return"M"+(le.l-3.5)+","+(le.t-.5+ce)+"h3v"+-ce+"h"+ce+"v-3h-"+(ce+3)+"ZM"+(le.r+3.5)+","+(le.t-.5+ce)+"h-3v"+-ce+"h"+-ce+"v-3h"+(ce+3)+"ZM"+(le.r+3.5)+","+(le.b+.5-ce)+"h-3v"+ce+"h"+-ce+"v3h"+(ce+3)+"ZM"+(le.l-3.5)+","+(le.b+.5-ce)+"h3v"+ce+"h"+ce+"v3h-"+(ce+3)+"Z"}function U(le,ce,pe,de,be){for(var he,xe,De,Se,ke=!1,Fe={},ve={},Te=(be||{}).xaHash,Le=(be||{}).yaHash,Oe=0;Oe<ce.length;Oe++){var Ne=ce[Oe];for(he in pe)if(Ne[he]){for(De in Ne)be&&(Te[De]||Le[De])||("x"===De.charAt(0)?pe:de)[De]||(Fe[De]=he);for(xe in de)be&&(Te[xe]||Le[xe])||!Ne[xe]||(ke=!0)}for(xe in de)if(Ne[xe])for(Se in Ne)be&&(Te[Se]||Le[Se])||("x"===Se.charAt(0)?pe:de)[Se]||(ve[Se]=xe)}ke&&(g.extendFlat(Fe,ve),ve={});var Be={},He=[];for(De in Fe){var Ve=x(le,De);He.push(Ve),Be[Ve._id]=Ve}var it={},ze=[];for(Se in ve){var je=x(le,Se);ze.push(je),it[je._id]=je}return{xaHash:Be,yaHash:it,xaxes:He,yaxes:ze,xLinks:Fe,yLinks:ve,isSubplotConstrained:ke}}function te(le,ce){if(e){var pe=void 0!==le.onwheel?"wheel":"mousewheel";le._onwheel&&le.removeEventListener(pe,le._onwheel),le._onwheel=ce,le.addEventListener(pe,ce,{passive:!1})}else void 0!==le.onwheel?le.onwheel=ce:void 0!==le.onmousewheel?le.onmousewheel=ce:le.isAddedWheelEvent||(le.isAddedWheelEvent=!0,le.addEventListener("wheel",ce,{passive:!1}))}function ee(le){var ce=[];for(var pe in le)ce.push(le[pe]);return ce}ae.exports={makeDragBox:function(le,ce,pe,de,be,he,xe,De){var Se,ke,Fe,ve,Te,Le,Oe,Ne,Be,He,Ve,it,ze,je,qe,Ye,ct,vt,wt,Ot,St,ft,st,Ct=le._fullLayout._zoomlayer,$t=xe+De==="nsew",rn=1===(xe+De).length;function hn(){if(Be=(Se=ce.xaxis)._length,He=(ke=ce.yaxis)._length,Oe=Se._offset,Ne=ke._offset,(Fe={})[Se._id]=Se,(ve={})[ke._id]=ke,xe&&De)for(var sn=ce.overlays,fn=0;fn<sn.length;fn++){var dn=sn[fn].xaxis;Fe[dn._id]=dn;var Mn=sn[fn].yaxis;ve[Mn._id]=Mn}Te=ee(Fe),Le=ee(ve),ze=q(Te,De),je=q(Le,xe),qe=!je&&!ze,it=U(le,le._fullLayout._axisMatchGroups,Fe,ve);var En=(Ve=U(le,le._fullLayout._axisConstraintGroups,Fe,ve,it)).isSubplotConstrained||it.isSubplotConstrained;Ye=De||En,ct=xe||En;var jn=le._fullLayout;vt=jn._has("scattergl"),wt=jn._has("splom"),Ot=jn._has("svg")}hn();var sn,cn=(sn=je+ze)?"nsew"===sn?$t?"":"pan"===le._fullLayout.dragmode?"move":"crosshair":sn.toLowerCase()+"-resize":"pointer",mn=z(ce,xe+De+"drag",cn,pe,de,be,he);if(qe&&!$t)return mn.onmousedown=null,mn.style.pointerEvents="none",mn;var nn,Xe,nt,ye,Ce,Ue,Qe,rt,Ke,gt,mt={element:mn,gd:le,plotinfo:ce};function Lt(){mt.plotinfo.selection=!1,M(le)}function Vt(sn,fn){var yr,Wr,kr,Or,Hr,dn=mt.gd;if(dn._fullLayout._activeShapeIndex>=0)dn._fullLayout._deactivateShape(dn);else{var Mn=dn._fullLayout.clickmode;if(j(dn),2!==sn||rn||function Xt(){if(!le._transitioningWithDuration){var sn=le._context.doubleClick,fn=[];ze&&(fn=fn.concat(Te)),je&&(fn=fn.concat(Le)),it.xaxes&&(fn=fn.concat(it.xaxes)),it.yaxes&&(fn=fn.concat(it.yaxes));var dn,Mn,En,jn={};if("reset+autosize"===sn)for(sn="autosize",Mn=0;Mn<fn.length;Mn++)if((dn=fn[Mn])._rangeInitial&&(dn.range[0]!==dn._rangeInitial[0]||dn.range[1]!==dn._rangeInitial[1])||!dn._rangeInitial&&!dn.autorange){sn="reset";break}if("autosize"===sn)for(Mn=0;Mn<fn.length;Mn++)(dn=fn[Mn]).fixedrange||(jn[dn._name+".autorange"]=!0);else if("reset"===sn)for((ze||Ve.isSubplotConstrained)&&(fn=fn.concat(Ve.xaxes)),je&&!Ve.isSubplotConstrained&&(fn=fn.concat(Ve.yaxes)),Ve.isSubplotConstrained&&(ze?je||(fn=fn.concat(Le)):fn=fn.concat(Te)),Mn=0;Mn<fn.length;Mn++)(dn=fn[Mn]).fixedrange||(dn._rangeInitial?(jn[dn._name+".range[0]"]=(En=dn._rangeInitial)[0],jn[dn._name+".range[1]"]=En[1]):jn[dn._name+".autorange"]=!0);le.emit("plotly_doubleclick",null),r.call("_guiRelayout",le,jn)}}(),$t)Mn.indexOf("select")>-1&&D(fn,dn,Te,Le,ce.id,mt),Mn.indexOf("event")>-1&&l.click(dn,fn,ce.id);else if(1===sn&&rn){var En=xe?ke:Se,jn="s"===xe||"w"===De?0:1,er=En._name+".range["+jn+"]",nr=(Or=(yr=En).range[Wr=jn],Hr=Math.abs(Or-yr.range[1-Wr]),"date"===yr.type?Or:"log"===yr.type?(kr=Math.ceil(Math.max(0,-Math.log(Hr)/Math.LN10))+3,b("."+kr+"g")(Math.pow(10,Or))):(kr=Math.floor(Math.log(Math.abs(Or))/Math.LN10)-Math.floor(Math.log(Hr)/Math.LN10)+4,b("."+String(kr)+"g")(Or))),mr="left",Dr="middle";if(En.fixedrange)return;xe?(Dr="n"===xe?"top":"bottom","right"===En.side&&(mr="right")):"e"===De&&(mr="right"),dn._context.showAxisRangeEntryBoxes&&p.select(mn).call(o.makeEditable,{gd:dn,immediate:!0,background:dn._fullLayout.paper_bgcolor,text:String(nr),fill:En.tickfont?En.tickfont.color:"#444",horizontalAlign:mr,verticalAlign:Dr}).on("edit",function(yr){var Wr=En.d2r(yr);void 0!==Wr&&r.call("_guiRelayout",dn,er,Wr)})}}}function dt(sn,fn){if(le._transitioningWithDuration)return!1;var Dr,yr,dn=Math.max(0,Math.min(Be,ft*sn+nn)),Mn=Math.max(0,Math.min(He,st*fn+Xe)),En=Math.abs(dn-nn),jn=Math.abs(Mn-Xe);function er(){Qe="",nt.r=nt.l,nt.t=nt.b,Ke.attr("d","M0,0Z")}if(nt.l=Math.min(nn,dn),nt.r=Math.max(nn,dn),nt.t=Math.min(Xe,Mn),nt.b=Math.max(Xe,Mn),Ve.isSubplotConstrained)En>S||jn>S?(Qe="xy",En/Be>jn/He?(jn=En*He/Be,Xe>Mn?nt.t=Xe-jn:nt.b=Xe+jn):(En=jn*Be/He,nn>dn?nt.l=nn-En:nt.r=nn+En),Ke.attr("d",oe(nt))):er();else if(it.isSubplotConstrained)if(En>S||jn>S){Qe="xy";var nr=Math.min(nt.l/Be,(He-nt.b)/He),mr=Math.max(nt.r/Be,(He-nt.t)/He);nt.l=nr*Be,nt.r=mr*Be,nt.b=(1-nr)*He,nt.t=(1-mr)*He,Ke.attr("d",oe(nt))}else er();else!je||jn<Math.min(Math.max(.6*En,L),S)?En<L||!ze?er():(nt.t=0,nt.b=He,Qe="x",Ke.attr("d","M"+((Dr=nt).l-.5)+","+((yr=Xe)-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Dr.r+.5)+","+(yr-S-.5)+"h3v"+(2*S+1)+"h-3Z")):!ze||En<Math.min(.6*jn,S)?(nt.l=0,nt.r=Be,Qe="y",Ke.attr("d",function(Dr,yr){return"M"+(yr-S-.5)+","+(Dr.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(yr-S-.5)+","+(Dr.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(nt,nn))):(Qe="xy",Ke.attr("d",oe(nt)));nt.w=nt.r-nt.l,nt.h=nt.b-nt.t,Qe&&(gt=!0),le._dragged=gt,se(rt,Ke,nt,Ce,Ue,ye),bt(),le.emit("plotly_relayouting",St),Ue=!0}function bt(){St={},"xy"!==Qe&&"x"!==Qe||(G(Te,nt.l/Be,nt.r/Be,St,Ve.xaxes),xt("x",St)),"xy"!==Qe&&"y"!==Qe||(G(Le,(He-nt.b)/He,(He-nt.t)/He,St,Ve.yaxes),xt("y",St))}function Yt(){bt(),j(le),tn(),H(le)}mt.prepFn=function(sn,fn,dn){var Mn=mt.dragmode,En=le._fullLayout.dragmode;En!==Mn&&(mt.dragmode=En),hn(),ft=le._fullLayout._invScaleX,st=le._fullLayout._invScaleY,qe||($t?sn.shiftKey?"pan"===En?En="zoom":d(En)||(En="pan"):sn.ctrlKey&&(En="pan"):En="pan"),mt.minDrag=h(En)?1:void 0,d(En)?(mt.xaxes=Te,mt.yaxes=Le,w(sn,fn,dn,mt,En)):(mt.clickFn=Vt,d(Mn)&&Lt(),qe||("zoom"===En?(mt.moveFn=dt,mt.doneFn=Yt,mt.minDrag=1,function(jn,er,nr){var mr=mn.getBoundingClientRect();nn=er-mr.left,Xe=nr-mr.top,le._fullLayout._calcInverseTransform(le);var Dr=g.apply3DTransform(le._fullLayout._invTransform)(nn,Xe);nt={l:nn=Dr[0],r:nn,w:0,t:Xe=Dr[1],b:Xe,h:0},ye=le._hmpixcount?le._hmlumcount/le._hmpixcount:y(le._fullLayout.plot_bgcolor).getLuminance(),Ue=!1,Qe="xy",gt=!1,rt=X(Ct,ye,Oe,Ne,Ce="M0,0H"+Be+"V"+He+"H0V0"),Ke=J(Ct,Oe,Ne)}(0,fn,dn)):"pan"===En&&(mt.moveFn=ht,mt.doneFn=tn))),le._fullLayout._redrag=function(){var jn=le._dragdata;jn&&jn.element===mn&&(d(le._fullLayout.dragmode)||(hn(),Kt([0,0,Be,He]),mt.moveFn(jn.dx,jn.dy)))}},u.init(mt);var It=[0,0,Be,He],jt=null,Ie=P.REDRAWDELAY,et=ce.mainplot?le._fullLayout._plots[ce.mainplot]:ce;function ht(sn,fn){if(sn*=ft,fn*=st,!le._transitioningWithDuration){if(le._fullLayout._replotting=!0,"ew"===ze||"ns"===je){var dn=ze?-sn:0,Mn=je?-fn:0;if(it.isSubplotConstrained){if(ze&&je){var En=(sn/Be-fn/He)/2;dn=-(sn=En*Be),Mn=-(fn=-En*He)}je?dn=-Mn*Be/He:Mn=-dn*He/Be}return ze&&(K(Te,sn),xt("x")),je&&(K(Le,fn),xt("y")),Kt([dn,Mn,Be,He]),Rt(),void le.emit("plotly_relayouting",St)}var jn,er,nr="w"===ze==("n"===je)?1:-1;if(ze&&je&&(Ve.isSubplotConstrained||it.isSubplotConstrained)){var mr=(sn/Be+nr*fn/He)/2;sn=mr*Be,fn=nr*mr*He}if("w"===ze?sn=kr(Te,0,sn):"e"===ze?sn=kr(Te,1,-sn):ze||(sn=0),"n"===je?fn=kr(Le,1,fn):"s"===je?fn=kr(Le,0,-fn):je||(fn=0),jn="w"===ze?sn:0,er="n"===je?fn:0,Ve.isSubplotConstrained&&!it.isSubplotConstrained||it.isSubplotConstrained&&ze&&je&&nr>0){var Dr;if(it.isSubplotConstrained||!ze&&1===je.length){for(Dr=0;Dr<Te.length;Dr++)Te[Dr].range=Te[Dr]._r.slice(),C(Te[Dr],1-fn/He);jn=(sn=fn*Be/He)/2}if(it.isSubplotConstrained||!je&&1===ze.length){for(Dr=0;Dr<Le.length;Dr++)Le[Dr].range=Le[Dr]._r.slice(),C(Le[Dr],1-sn/Be);er=(fn=sn*He/Be)/2}}it.isSubplotConstrained&&je||xt("x"),it.isSubplotConstrained&&ze||xt("y");var yr=Be-sn,Wr=He-fn;!it.isSubplotConstrained||ze&&je||(ze?(er=jn?0:sn*He/Be,Wr=yr*He/Be):(jn=er?0:fn*Be/He,yr=Wr*Be/He)),Kt([jn,er,yr,Wr]),Rt(),le.emit("plotly_relayouting",St)}function kr(Or,Hr,oi){for(var Qn,Ir,Tr=1-Hr,ar=0;ar<Or.length;ar++){var Jr=Or[ar];if(!Jr.fixedrange){Qn=Jr,Ir=Jr._rl[Tr]+(Jr._rl[Hr]-Jr._rl[Tr])/ne(oi/Jr._length);var ri=Jr.l2r(Ir);!1!==ri&&void 0!==ri&&(Jr.range[Hr]=ri)}}return Qn._length*(Qn._rl[Hr]-Ir)/(Qn._rl[Hr]-Qn._rl[Tr])}}function xt(sn,fn){for(var dn=it.isSubplotConstrained?{x:Le,y:Te}[sn]:it[sn+"axes"],Mn=it.isSubplotConstrained?{x:Te,y:Le}[sn]:[],En=0;En<dn.length;En++){var jn=dn[En],er=jn._id,nr=it.xLinks[er]||it.yLinks[er],mr=Mn[0]||Fe[nr]||ve[nr];mr&&(fn?(fn[jn._name+".range[0]"]=fn[mr._name+".range[0]"],fn[jn._name+".range[1]"]=fn[mr._name+".range[1]"]):jn.range=mr.range.slice())}}function Rt(){var sn,fn=[];function dn(jn){for(sn=0;sn<jn.length;sn++)jn[sn].fixedrange||fn.push(jn[sn]._id)}for(Ye&&(dn(Te),dn(Ve.xaxes),dn(it.xaxes)),ct&&(dn(Le),dn(Ve.yaxes),dn(it.yaxes)),St={},sn=0;sn<fn.length;sn++){var En=x(le,fn[sn]);i.drawOne(le,En,{skipTitle:!0}),St[En._name+".range[0]"]=En.range[0],St[En._name+".range[1]"]=En.range[1]}i.redrawComponents(le,fn)}function tn(){Kt([0,0,Be,He]),g.syncOrAsync([T.previousPromises,function(){le._fullLayout._replotting=!1,r.call("_guiRelayout",le,St)}],le)}function Kt(sn){var fn,dn,Mn,En,jn=le._fullLayout,er=jn._plots,nr=jn._subplots.cartesian;if(wt&&r.subplotsRegistry.splom.drag(le),vt)for(fn=0;fn<nr.length;fn++)if(Mn=(dn=er[nr[fn]]).xaxis,En=dn.yaxis,dn._scene){var mr=g.simpleMap(Mn.range,Mn.r2l),Dr=g.simpleMap(En.range,En.r2l);dn._scene.update({range:[mr[0],Dr[0],mr[1],Dr[1]]})}if((wt||vt)&&(_(le),c(le)),Ot){var yr=sn[2]/Se._length,Wr=sn[3]/ke._length;for(fn=0;fn<nr.length;fn++){Mn=(dn=er[nr[fn]]).xaxis,En=dn.yaxis;var kr,Or,Hr,oi,Ir=(ct||it.isSubplotConstrained)&&!En.fixedrange&&ve[En._id];if((Ye||it.isSubplotConstrained)&&!Mn.fixedrange&&Fe[Mn._id]?(kr=yr,Hr=De||it.isSubplotConstrained?sn[0]:Tn(Mn,kr)):it.xaHash[Mn._id]?(kr=yr,Hr=sn[0]*Mn._length/Se._length):it.yaHash[Mn._id]?(kr=Wr,Hr="ns"===je?-sn[1]*Mn._length/ke._length:Tn(Mn,kr,{n:"top",s:"bottom"}[je])):Hr=Vn(Mn,kr=kn(Mn,yr,Wr)),Ir?(Or=Wr,oi=xe||it.isSubplotConstrained?sn[1]:Tn(En,Or)):it.yaHash[En._id]?(Or=Wr,oi=sn[1]*En._length/ke._length):it.xaHash[En._id]?(Or=yr,oi="ew"===ze?-sn[0]*En._length/Se._length:Tn(En,Or,{e:"right",w:"left"}[ze])):oi=Vn(En,Or=kn(En,yr,Wr)),kr||Or){kr||(kr=1),Or||(Or=1);var Tr=Mn._offset-Hr/kr,ar=En._offset-oi/Or;dn.clipRect.call(m.setTranslate,Hr,oi).call(m.setScale,kr,Or),dn.plot.call(m.setTranslate,Tr,ar).call(m.setScale,1/kr,1/Or),kr===dn.xScaleFactor&&Or===dn.yScaleFactor||(m.setPointGroupScale(dn.zoomScalePts,kr,Or),m.setTextPointsScale(dn.zoomScaleTxt,kr,Or)),m.hideOutsideRangePoints(dn.clipOnAxisFalseTraces,dn),dn.xScaleFactor=kr,dn.yScaleFactor=Or}}}}function kn(sn,fn,dn){return sn.fixedrange?0:Ye&&Ve.xaHash[sn._id]?fn:ct&&(Ve.isSubplotConstrained?Ve.xaHash:Ve.yaHash)[sn._id]?dn:0}function Vn(sn,fn){return fn?(sn.range=sn._r.slice(),C(sn,fn),Tn(sn,fn)):0}function Tn(sn,fn,dn){return sn._length*(1-fn)*a[dn||sn.constraintoward||"middle"]}return xe.length*De.length!=1&&te(mn,function(sn){if(le._context._scrollZoom.cartesian||le._fullLayout._enablescrollzoom){if(Lt(),le._transitioningWithDuration)return sn.preventDefault(),void sn.stopPropagation();hn(),clearTimeout(jt);var fn=-sn.deltaY;if(isFinite(fn)||(fn=sn.wheelDelta/10),isFinite(fn)){var dn,Mn=Math.exp(-Math.min(Math.max(fn,-20),20)/200),En=et.draglayer.select(".nsewdrag").node().getBoundingClientRect(),jn=(sn.clientX-En.left)/En.width,er=(En.bottom-sn.clientY)/En.height;if(Ye){for(De||(jn=.5),dn=0;dn<Te.length;dn++)nr(Te[dn],jn,Mn);xt("x"),It[2]*=Mn,It[0]+=It[2]*jn*(1/Mn-1)}if(ct){for(xe||(er=.5),dn=0;dn<Le.length;dn++)nr(Le[dn],er,Mn);xt("y"),It[3]*=Mn,It[1]+=It[3]*(1-er)*(1/Mn-1)}Kt(It),Rt(),le.emit("plotly_relayouting",St),jt=setTimeout(function(){le._fullLayout&&(It=[0,0,Be,He],tn())},Ie),sn.preventDefault()}else g.log("Did not find wheel motion attributes: ",sn)}function nr(mr,Dr,yr){if(!mr.fixedrange){var Wr=g.simpleMap(mr.range,mr.r2l),kr=Wr[0]+(Wr[1]-Wr[0])*Dr;mr.range=Wr.map(function(Or){return mr.l2r(kr+(Or-kr)*yr)})}}}),mn},makeDragger:N,makeRectDragger:z,makeZoombox:X,makeCorners:J,updateZoombox:se,xyCorners:oe,transitionZoombox:V,removeZoombox:j,showDoubleClickNotifier:H,attachWheelEventHandler:te}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/fx"),b=v("../../components/dragelement"),y=v("../../lib/setcursor"),e=v("./dragbox").makeDragBox,r=v("./constants").DRAGGERSIZE;ie.initInteractions=function(t){var o=t._fullLayout;if(t._context.staticPlot)p.select(t).selectAll(".drag").remove();else if(o._has("cartesian")||o._has("splom")){Object.keys(o._plots||{}).sort(function(m,l){if((o._plots[m].mainplot&&!0)===(o._plots[l].mainplot&&!0)){var i=m.split("y"),f=l.split("y");return i[0]===f[0]?Number(i[1]||1)-Number(f[1]||1):Number(i[0]||1)-Number(f[0]||1)}return o._plots[m].mainplot?1:-1}).forEach(function(m){var l=o._plots[m],i=l.xaxis,f=l.yaxis;if(!l.mainplot){var u=e(t,l,i._offset,f._offset,i._length,f._length,"ns","ew");u.onmousemove=function(h){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===m&&t._fullLayout._plots[m]&&g.hover(t,h,m)},g.hover(t,h,m),t._fullLayout._lasthover=u,t._fullLayout._hoversubplot=m},u.onmouseout=function(h){t._dragging||(t._fullLayout._hoversubplot=null,b.unhover(t,h))},t._context.showAxisDragHandles&&(e(t,l,i._offset-r,f._offset-r,r,r,"n","w"),e(t,l,i._offset+i._length,f._offset-r,r,r,"n","e"),e(t,l,i._offset-r,f._offset+f._length,r,r,"s","w"),e(t,l,i._offset+i._length,f._offset+f._length,r,r,"s","e"))}if(t._context.showAxisDragHandles){if(m===i._mainSubplot){var s=i._mainLinePosition;"top"===i.side&&(s-=r),e(t,l,i._offset+.1*i._length,s,.8*i._length,r,"","ew"),e(t,l,i._offset,s,.1*i._length,r,"","w"),e(t,l,i._offset+.9*i._length,s,.1*i._length,r,"","e")}if(m===f._mainSubplot){var d=f._mainLinePosition;"right"!==f.side&&(d-=r),e(t,l,d,f._offset+.1*f._length,r,.8*f._length,"ns",""),e(t,l,d,f._offset+.9*f._length,r,.1*f._length,"s",""),e(t,l,d,f._offset,r,.1*f._length,"n","")}}});var n=o._hoverlayer.node();n.onmousemove=function(m){m.target=t._fullLayout._lasthover,g.hover(t,m,o._hoversubplot)},n.onclick=function(m){m.target=t._fullLayout._lasthover,g.click(t,m)},n.onmousedown=function(m){t._fullLayout._lasthover.onmousedown(m)},ie.updateFx(t)}},ie.updateFx=function(t){var o=t._fullLayout;y(o._draggers,"pan"===o.dragmode?"move":"crosshair")}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("./axis_ids");ae.exports=function(y){return function(e,r){var t=e[y];if(Array.isArray(t))for(var o=p.subplotsRegistry.cartesian,n=o.idRegex,m=r._subplots,l=m.xaxis,i=m.yaxis,f=m.cartesian,u=r._has("cartesian")||r._has("gl2d"),s=0;s<t.length;s++){var d=t[s];if(g.isPlainObject(d)){var h=b.cleanId(d.xref,"x",!1),a=b.cleanId(d.yref,"y",!1),_=n.x.test(h),c=n.y.test(a);if(_||c){u||g.pushUnique(r._basePlotModules,o);var T=!1;_&&-1===l.indexOf(h)&&(l.push(h),T=!0),c&&-1===i.indexOf(a)&&(i.push(a),T=!0),T&&_&&c&&f.push(h+a)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../lib"),y=v("../plots"),e=v("../../components/drawing"),r=v("../get_data").getModuleCalcData,t=v("./axis_ids"),o=v("./constants"),n=v("../../constants/xmlns_namespaces"),m=b.ensureSingle;function l(d,h,a){return b.ensureSingle(d,h,a,function(_){_.datum(a)})}function i(d,h,a,_,c){for(var T,x,w,M=o.traceLayerClasses,D=d._fullLayout,C=D._modules,P=[],L=[],S=0;S<C.length;S++){var E=(T=C[S]).name,N=g.modules[E].categories;if(N.svg){var z=T.layerName||E+"layer",q=T.plot;w=(x=r(a,q))[0],a=x[1],w.length&&P.push({i:M.indexOf(z),className:z,plotMethod:q,cdModule:w}),N.zoomScale&&L.push("."+z)}}P.sort(function(ne,X){return ne.i-X.i});var G=h.plot.selectAll("g.mlayer").data(P,function(ne){return ne.className});if(G.enter().append("g").attr("class",function(ne){return ne.className}).classed("mlayer",!0).classed("rangeplot",h.isRangePlot),G.exit().remove(),G.order(),G.each(function(ne){var X=p.select(this),J=ne.className;ne.plotMethod(d,h,ne.cdModule,X,_,c),-1===o.clipOnAxisFalseQuery.indexOf("."+J)&&e.setClipUrl(X,h.layerClipId,d)}),D._has("scattergl")&&(T=g.getModule("scattergl"),w=r(a,T)[0],T.plot(d,h,w)),!d._context.staticPlot&&(h._hasClipOnAxisFalse&&(h.clipOnAxisFalseTraces=h.plot.selectAll(o.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),L.length)){var K=h.plot.selectAll(L.join(",")).selectAll(".trace");h.zoomScalePts=K.selectAll("path.point"),h.zoomScaleTxt=K.selectAll(".textpoint")}}function f(d,h){var a=h.plotgroup,_=h.id,c=o.layerValue2layerClass[h.xaxis.layer],T=o.layerValue2layerClass[h.yaxis.layer],x=d._fullLayout._hasOnlyLargeSploms;if(h.mainplot){var w=h.mainplotinfo,M=w.plotgroup,D=_+"-x",C=_+"-y";h.minorGridlayer=w.minorGridlayer,h.gridlayer=w.gridlayer,h.zerolinelayer=w.zerolinelayer,m(w.overlinesBelow,"path",D),m(w.overlinesBelow,"path",C),m(w.overaxesBelow,"g",D),m(w.overaxesBelow,"g",C),h.plot=m(w.overplot,"g",_),m(w.overlinesAbove,"path",D),m(w.overlinesAbove,"path",C),m(w.overaxesAbove,"g",D),m(w.overaxesAbove,"g",C),h.xlines=M.select(".overlines-"+c).select("."+D),h.ylines=M.select(".overlines-"+T).select("."+C),h.xaxislayer=M.select(".overaxes-"+c).select("."+D),h.yaxislayer=M.select(".overaxes-"+T).select("."+C)}else if(x)h.xlines=m(a,"path","xlines-above"),h.ylines=m(a,"path","ylines-above"),h.xaxislayer=m(a,"g","xaxislayer-above"),h.yaxislayer=m(a,"g","yaxislayer-above");else{var P=m(a,"g","layer-subplot");h.shapelayer=m(P,"g","shapelayer"),h.imagelayer=m(P,"g","imagelayer"),h.minorGridlayer=m(a,"g","minor-gridlayer"),h.gridlayer=m(a,"g","gridlayer"),h.zerolinelayer=m(a,"g","zerolinelayer"),m(a,"path","xlines-below"),m(a,"path","ylines-below"),h.overlinesBelow=m(a,"g","overlines-below"),m(a,"g","xaxislayer-below"),m(a,"g","yaxislayer-below"),h.overaxesBelow=m(a,"g","overaxes-below"),h.plot=m(a,"g","plot"),h.overplot=m(a,"g","overplot"),h.xlines=m(a,"path","xlines-above"),h.ylines=m(a,"path","ylines-above"),h.overlinesAbove=m(a,"g","overlines-above"),m(a,"g","xaxislayer-above"),m(a,"g","yaxislayer-above"),h.overaxesAbove=m(a,"g","overaxes-above"),h.xlines=a.select(".xlines-"+c),h.ylines=a.select(".ylines-"+T),h.xaxislayer=a.select(".xaxislayer-"+c),h.yaxislayer=a.select(".yaxislayer-"+T)}x||(l(h.minorGridlayer,"g",h.xaxis._id),l(h.minorGridlayer,"g",h.yaxis._id),h.minorGridlayer.selectAll("g").map(function(L){return L[0]}).sort(t.idSort),l(h.gridlayer,"g",h.xaxis._id),l(h.gridlayer,"g",h.yaxis._id),h.gridlayer.selectAll("g").map(function(L){return L[0]}).sort(t.idSort)),h.xlines.style("fill","none").classed("crisp",!0),h.ylines.style("fill","none").classed("crisp",!0)}function u(d,h){if(d){var a={};for(var _ in d.each(function(w){var M=w[0];p.select(this).remove(),s(M,h),a[M]=!0}),h._plots)for(var c=h._plots[_].overlays||[],T=0;T<c.length;T++){var x=c[T];a[x.id]&&x.plot.selectAll(".trace").remove()}}}function s(d,h){h._draggers.selectAll("g."+d).remove(),h._defs.select("#clip"+h._uid+d+"plot").remove()}ie.name="cartesian",ie.attr=["xaxis","yaxis"],ie.idRoot=["x","y"],ie.idRegex=o.idRegex,ie.attrRegex=o.attrRegex,ie.attributes=v("./attributes"),ie.layoutAttributes=v("./layout_attributes"),ie.supplyLayoutDefaults=v("./layout_defaults"),ie.transitionAxes=v("./transition_axes"),ie.finalizeSubplots=function(d,h){var a,_,c,T=h._subplots,x=T.xaxis,w=T.yaxis,M=T.cartesian,D=M.concat(T.gl2d||[]),C={},P={};for(a=0;a<D.length;a++){var L=D[a].split("y");C[L[0]]=1,P["y"+L[1]]=1}for(a=0;a<x.length;a++)C[_=x[a]]||(c=(d[t.id2name(_)]||{}).anchor,o.idRegex.y.test(c)||(c="y"),M.push(_+c),D.push(_+c),P[c]||(P[c]=1,b.pushUnique(w,c)));for(a=0;a<w.length;a++)P[c=w[a]]||(_=(d[t.id2name(c)]||{}).anchor,o.idRegex.x.test(_)||(_="x"),M.push(_+c),D.push(_+c),C[_]||(C[_]=1,b.pushUnique(x,_)));if(!D.length){for(var S in _="",c="",d)o.attrRegex.test(S)&&("x"===S.charAt(0)?(!_||+S.substr(5)<+_.substr(5))&&(_=S):(!c||+S.substr(5)<+c.substr(5))&&(c=S));_=_?t.name2id(_):"x",c=c?t.name2id(c):"y",x.push(_),w.push(c),M.push(_+c)}},ie.plot=function(d,h,a,_){var c,T=d._fullLayout,x=T._subplots.cartesian,w=d.calcdata;if(!Array.isArray(h))for(h=[],c=0;c<w.length;c++)h.push(c);for(c=0;c<x.length;c++){for(var M,D=x[c],C=T._plots[D],P=[],L=0;L<w.length;L++){var S=w[L],E=S[0].trace;E.xaxis+E.yaxis===D&&((-1!==h.indexOf(E.index)||E.carpet)&&(M&&M[0].trace.xaxis+M[0].trace.yaxis===D&&-1!==["tonextx","tonexty","tonext"].indexOf(E.fill)&&-1===P.indexOf(M)&&P.push(M),P.push(S)),M=S)}i(d,C,P,a,_)}},ie.clean=function(d,h,a,_){var c,T,x,w=_._plots||{},M=h._plots||{},D=_._subplots||{};if(_._hasOnlyLargeSploms&&!h._hasOnlyLargeSploms)for(x in w)(c=w[x]).plotgroup&&c.plotgroup.remove();var C=_._has&&_._has("gl"),P=h._has&&h._has("gl");if(C&&!P)for(x in w)(c=w[x])._scene&&c._scene.destroy();if(D.xaxis&&D.yaxis){var L=t.listIds({_fullLayout:_});for(T=0;T<L.length;T++){var S=L[T];h[t.id2name(S)]||_._infolayer.selectAll(".g-"+S+"title").remove()}}var E=_._has&&_._has("cartesian"),N=h._has&&h._has("cartesian");if(E&&!N)u(_._cartesianlayer.selectAll(".subplot"),_),_._defs.selectAll(".axesclip").remove(),delete _._axisConstraintGroups,delete _._axisMatchGroups;else if(D.cartesian)for(T=0;T<D.cartesian.length;T++){var z=D.cartesian[T];M[z]||(_._cartesianlayer.selectAll("."+z+",."+z+"-x,."+z+"-y").remove(),s(z,_))}},ie.drawFramework=function(d){var h=d._fullLayout,a=function(c){var T,x,w,M,D,C,P=c._fullLayout,L=P._subplots.cartesian,S=L.length,E=[],N=[];for(T=0;T<S;T++){var G=(D=(M=P._plots[w=L[T]]).xaxis)._mainAxis._id+(C=M.yaxis)._mainAxis._id,K=P._plots[G];M.overlays=[],G!==w&&K?(M.mainplot=G,M.mainplotinfo=K,N.push(w)):(M.mainplot=void 0,M.mainplotinfo=void 0,E.push(w))}for(T=0;T<N.length;T++)(M=P._plots[w=N[T]]).mainplotinfo.overlays.push(M);var ne=E.concat(N),X=new Array(S);for(T=0;T<S;T++){var J=[w=ne[T],(D=(M=P._plots[w]).xaxis).layer,(C=M.yaxis).layer,D.overlaying||"",C.overlaying||""];for(x=0;x<M.overlays.length;x++)J.push(M.overlays[x].id);X[T]=J}return X}(d),_=h._cartesianlayer.selectAll(".subplot").data(a,String);_.enter().append("g").attr("class",function(c){return"subplot "+c[0]}),_.order(),_.exit().call(u,h),_.each(function(c){var T=c[0],x=h._plots[T];x.plotgroup=p.select(this),f(d,x),x.draglayer=m(h._draggers,"g",T)})},ie.rangePlot=function(d,h,a){f(d,h),i(d,h,a),y.style(d)},ie.toSVG=function(d){var h=d._fullLayout._glimages,a=p.select(d).selectAll(".svg-container");a.filter(function(_,c){return c===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var _=this.toDataURL("image/png");h.append("svg:image").attr({xmlns:n.svg,"xlink:href":_,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ie.updateFx=v("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(v,ae,ie){"use strict";var p=v("../font_attributes"),g=v("../../components/color/attributes"),b=v("../../components/drawing/attributes").dash,y=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray,r=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=v("../../constants/numerical").ONEDAY,o=v("./constants"),n=o.HOUR_PATTERN,m=o.WEEKDAY_PATTERN,l={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function i(M){return{valType:"integer",min:0,dflt:M?5:0,editType:"ticks"}}var f={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},s={valType:"data_array",editType:"ticks"},d={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function h(M){var D={valType:"number",min:0,editType:"ticks"};return M||(D.dflt=5),D}function a(M){var D={valType:"number",min:0,editType:"ticks"};return M||(D.dflt=1),D}var _={valType:"color",dflt:g.defaultLine,editType:"ticks"},c={valType:"color",dflt:g.lightLine,editType:"ticks"};function T(M){var D={valType:"number",min:0,editType:"ticks"};return M||(D.dflt=1),D}var x=y({},b,{editType:"ticks"}),w={valType:"boolean",editType:"ticks"};ae.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:g.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:p({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[m,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:t},editType:"calc"}),tickmode:l,nticks:i(),tick0:f,dtick:u,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:s,ticktext:{valType:"data_array",editType:"ticks"},ticks:d,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:h(),tickwidth:a(),tickcolor:_,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:y({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:p({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:r("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:r("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:w,gridcolor:c,gridwidth:T(),griddash:x,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:g.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",o.idRegex.x.toString(),o.idRegex.y.toString()],editType:"plot"},minor:{tickmode:l,nticks:i("minor"),tick0:f,dtick:u,tickvals:s,ticks:d,ticklen:h("minor"),tickwidth:a("minor"),tickcolor:_,gridcolor:c,gridwidth:T("minor"),griddash:x,showgrid:w,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:p({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../../components/fx/helpers").isUnifiedHover,y=v("../../components/fx/hovermode_defaults"),e=v("../../plot_api/plot_template"),r=v("../layout_attributes"),t=v("./layout_attributes"),o=v("./type_defaults"),n=v("./axis_defaults"),m=v("./constraints"),l=v("./position_defaults"),i=v("./axis_ids"),f=i.id2name,u=i.name2id,s=v("./constants").AX_ID_PATTERN,d=v("../../registry"),h=d.traceIs,a=d.getComponentMethod;function _(c,T,x){Array.isArray(c[T])?c[T].push(x):c[T]=[x]}ae.exports=function(c,T,x){var w,M,D=T.autotypenumbers,C={},P={},L={},S={},E={},N={},z={},q={},G={},K={};for(w=0;w<x.length;w++){var ne=x[w];if(h(ne,"cartesian")||h(ne,"gl2d")){var X,J;if(ne.xaxis)X=f(ne.xaxis),_(C,X,ne);else if(ne.xaxes)for(M=0;M<ne.xaxes.length;M++)_(C,f(ne.xaxes[M]),ne);if(ne.yaxis)J=f(ne.yaxis),_(C,J,ne);else if(ne.yaxes)for(M=0;M<ne.yaxes.length;M++)_(C,f(ne.yaxes[M]),ne);"funnel"===ne.type?"h"===ne.orientation?(X&&(P[X]=!0),J&&(z[J]=!0)):J&&(L[J]=!0):"image"===ne.type?(J&&(q[J]=!0),X&&(q[X]=!0)):(J&&(E[J]=!0,N[J]=!0),h(ne,"carpet")&&("carpet"!==ne.type||ne._cheater)||X&&(S[X]=!0)),"carpet"===ne.type&&ne._cheater&&X&&(P[X]=!0),h(ne,"2dMap")&&(G[X]=!0,G[J]=!0),h(ne,"oriented")&&(K["h"===ne.orientation?J:X]=!0)}}var se=T._subplots,V=se.xaxis,j=se.yaxis,H=p.simpleMap(V,f),oe=p.simpleMap(j,f),U=H.concat(oe),te=g.background;V.length&&j.length&&(te=p.coerce(c,T,r,"plot_bgcolor"));var ee,le,ce,pe,de,be=g.combine(te,T.paper_bgcolor);function he(){de._traceIndices=(C[ee]||[]).map(function(Ct){return Ct._expandedIndex}),de._annIndices=[],de._shapeIndices=[],de._selectionIndices=[],de._imgIndices=[],de._subplotsWith=[],de._counterAxes=[],de._name=de._attr=ee,de._id=le}function xe(st,Ct){return p.coerce(pe,de,t,st,Ct)}function De(st,Ct){return p.coerce2(pe,de,t,st,Ct)}function Se(st){return"x"===st?j:V}function ke(st,Ct){for(var $t="x"===st?H:oe,rn=[],hn=0;hn<$t.length;hn++){var cn=$t[hn];cn===Ct||(c[cn]||{}).overlaying||rn.push(u(cn))}return rn}var Fe={x:Se("x"),y:Se("y")},ve=Fe.x.concat(Fe.y),Te={},Le=[];function Oe(){var st=pe.matches;s.test(st)&&-1===ve.indexOf(st)&&(Te[st]=pe.type,Le=Object.keys(Te))}var Ne=y(c,T),Be=b(Ne);for(w=0;w<U.length;w++){le=u(ee=U[w]),ce=ee.charAt(0),p.isPlainObject(c[ee])||(c[ee]={}),pe=c[ee],de=e.newContainer(T,ee,ce+"axis"),he();var it={hasMinor:!0,letter:ce,font:T.font,outerTicks:G[ee],showGrid:!K[ee],data:C[ee]||[],bgColor:be,calendar:T.calendar,automargin:!0,visibleDflt:"x"===ce&&!S[ee]&&P[ee]||"y"===ce&&!E[ee]&&L[ee],reverseDflt:"y"===ce&&(!N[ee]&&z[ee]||q[ee]),autotypenumbersDflt:D,splomStash:((T._splomAxes||{})[ce]||{})[le]};xe("uirevision",T.uirevision),o(pe,de,xe,it),n(pe,de,xe,it,T);var ze=Be&&ce===Ne.charAt(0),je=De("spikecolor",Be?de.color:void 0),qe=De("spikethickness",Be?1.5:void 0),Ye=De("spikedash",Be?"dot":void 0),ct=De("spikemode",Be?"across":void 0),vt=De("spikesnap");xe("showspikes",!!(ze||je||qe||Ye||ct||vt))||(delete de.spikecolor,delete de.spikethickness,delete de.spikedash,delete de.spikemode,delete de.spikesnap),l(pe,de,xe,{letter:ce,counterAxes:Fe[ce],overlayableAxes:ke(ce,ee),grid:T.grid}),xe("title.standoff"),Oe(),de._input=pe}for(w=0;w<Le.length;){le=Le[w++],ce=(ee=f(le)).charAt(0),p.isPlainObject(c[ee])||(c[ee]={}),pe=c[ee],de=e.newContainer(T,ee,ce+"axis"),he();var wt={letter:ce,font:T.font,outerTicks:G[ee],showGrid:!K[ee],data:[],bgColor:be,calendar:T.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:D,splomStash:((T._splomAxes||{})[ce]||{})[le]};xe("uirevision",T.uirevision),de.type=Te[le]||"linear",n(pe,de,xe,wt,T),l(pe,de,xe,{letter:ce,counterAxes:Fe[ce],overlayableAxes:ke(ce,ee),grid:T.grid}),xe("fixedrange"),Oe(),de._input=pe}var Ot=a("rangeslider","handleDefaults"),St=a("rangeselector","handleDefaults");for(w=0;w<H.length;w++)pe=c[ee=H[w]],de=T[ee],Ot(c,T,ee),"date"===de.type&&St(pe,de,T,oe,de.calendar),xe("fixedrange");for(w=0;w<oe.length;w++){pe=c[ee=oe[w]];var ft=T[f((de=T[ee]).anchor)];xe("fixedrange",a("rangeslider","isVisible")(ft))}m.handleDefaults(c,T,{axIds:ve.concat(Le).sort(i.idSort),axHasImage:q})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(v,ae,ie){"use strict";var p=v("tinycolor2").mix,g=v("../../components/color/attributes"),b=v("../../lib");ae.exports=function(y,e,r,t){var o=(t=t||{}).dfltColor;function n(c,T){return b.coerce2(y,e,t.attributes,c,T)}var m=n("linecolor",o),l=n("linewidth");r("showline",t.showLine||!!m||!!l)||(delete e.linecolor,delete e.linewidth);var i=n("gridcolor",p(o,t.bgColor,t.blend||g.lightFraction).toRgbString()),f=n("gridwidth"),u=n("griddash");if(r("showgrid",t.showGrid||!!i||!!f||!!u)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),t.hasMinor){var s=n("minor.gridcolor",p(e.gridcolor,t.bgColor,67).toRgbString()),d=n("minor.gridwidth",e.gridwidth||1),h=n("minor.griddash",e.griddash||"solid");r("minor.showgrid",!!s||!!d||!!h)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!t.noZeroLine){var a=n("zerolinecolor",o),_=n("zerolinewidth");r("zeroline",t.showGrid||!!a||!!_)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib");ae.exports=function(b,y,e,r){var t,o,n,m,l=r.counterAxes||[],i=r.overlayableAxes||[],f=r.letter,u=r.grid;u&&(t=u._anchors[y._id],(o=u._domains[f][u._axisMap[y._id]])&&(n=u[f+"side"].split(" ")[0],m=u.domain[f]["right"===n||"top"===n?1:0])),o=o||[0,1],t=t||(p(b.position)?"free":l[0]||"free"),n=n||("x"===f?"bottom":"left"),m=m||0,"free"===g.coerce(b,y,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:t}},"anchor")&&e("position",m),g.coerce(b,y,{side:{valType:"enumerated",values:"x"===f?["bottom","top"]:["left","right"],dflt:n}},"side");var s=!1;if(i.length&&(s=g.coerce(b,y,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!s){var d=e("domain",o);d[0]>d[1]-1/4096&&(y.domain=o),g.noneOrAll(b.domain,y.domain,o)}return e("layer"),y}},{"../../lib":515,"fast-isnumeric":190}],583:[function(v,ae,ie){"use strict";var p=v("./show_dflt");ae.exports=function(g,b,y,e,r){r||(r={});var t=r.tickSuffixDflt,o=p(g);y("tickprefix")&&y("showtickprefix",o),y("ticksuffix",t)&&y("showticksuffix",o)}},{"./show_dflt":586}],584:[function(v,ae,ie){"use strict";var p=v("../../constants/alignment").FROM_BL;ae.exports=function(g,b,y){void 0===y&&(y=p[g.constraintoward||"center"]);var e=[g.r2l(g.range[0]),g.r2l(g.range[1])],r=e[0]+(e[1]-e[0])*y;g.range=g._input.range=[g.l2r(r+(e[0]-r)*b),g.l2r(r+(e[1]-r)*b)],g.setScale()}},{"../../constants/alignment":483}],585:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-time-format").utcFormat,b=v("../../lib"),y=b.numberFormat,e=v("fast-isnumeric"),r=b.cleanNumber,t=b.ms2DateTime,o=b.dateTime2ms,n=b.ensureNumber,m=b.isArrayOrTypedArray,l=v("../../constants/numerical"),i=l.FP_SAFE,f=l.BADNUM,u=l.LOG_CLIP,s=l.ONEWEEK,d=l.ONEDAY,h=l.ONEHOUR,a=l.ONEMIN,_=l.ONESEC,c=v("./axis_ids"),T=v("./constants"),x=T.HOUR_PATTERN,w=T.WEEKDAY_PATTERN;function M(C){return Math.pow(10,C)}function D(C){return null!=C}ae.exports=function(C,P){P=P||{};var L=C._id||"x",S=L.charAt(0);function E(U,te){if(U>0)return Math.log(U)/Math.LN10;if(U<=0&&te&&C.range&&2===C.range.length){var ee=C.range[0],le=C.range[1];return.5*(ee+le-2*u*Math.abs(ee-le))}return f}function N(U,te,ee,le){if((le||{}).msUTC&&e(U))return+U;var ce=o(U,ee||C.calendar);if(ce===f){if(!e(U))return f;U=+U;var pe=Math.floor(10*b.mod(U+.05,1)),de=Math.round(U-pe/10);ce=o(new Date(de))+pe/10}return ce}function z(U,te,ee){return t(U,te,ee||C.calendar)}function q(U){return C._categories[Math.round(U)]}function G(U){if(D(U)){if(void 0===C._categoriesMap&&(C._categoriesMap={}),void 0!==C._categoriesMap[U])return C._categoriesMap[U];C._categories.push("number"==typeof U?String(U):U);var te=C._categories.length-1;return C._categoriesMap[U]=te,te}return f}function K(U){if(C._categoriesMap)return C._categoriesMap[U]}function ne(U){var te=K(U);return void 0!==te?te:e(U)?+U:void 0}function X(U){return e(U)?+U:K(U)}function J(U,te,ee){return p.round(ee+te*U,2)}function se(U,te,ee){return(U-ee)/te}var V=function(U){return e(U)?J(U,C._m,C._b):f},j=function(U){return se(U,C._m,C._b)};if(C.rangebreaks){var H="y"===S;V=function(U){if(!e(U))return f;var te=C._rangebreaks.length;if(!te)return J(U,C._m,C._b);var ee=H;C.range[0]>C.range[1]&&(ee=!ee);for(var le=ee?-1:1,ce=le*U,pe=0,de=0;de<te;de++){var be=le*C._rangebreaks[de].min,he=le*C._rangebreaks[de].max;if(ce<be)break;if(!(ce>he)){pe=ce<(be+he)/2?de:de+1;break}pe=de+1}var xe=C._B[pe]||0;return isFinite(xe)?J(U,C._m2,xe):0},j=function(U){var te=C._rangebreaks.length;if(!te)return se(U,C._m,C._b);for(var ee=0,le=0;le<te&&!(U<C._rangebreaks[le].pmin);le++)U>C._rangebreaks[le].pmax&&(ee=le+1);return se(U,C._m2,C._B[ee])}}C.c2l="log"===C.type?E:n,C.l2c="log"===C.type?M:n,C.l2p=V,C.p2l=j,C.c2p="log"===C.type?function(U,te){return V(E(U,te))}:V,C.p2c="log"===C.type?function(U){return M(j(U))}:j,-1!==["linear","-"].indexOf(C.type)?(C.d2r=C.r2d=C.d2c=C.r2c=C.d2l=C.r2l=r,C.c2d=C.c2r=C.l2d=C.l2r=n,C.d2p=C.r2p=function(U){return C.l2p(r(U))},C.p2d=C.p2r=j,C.cleanPos=n):"log"===C.type?(C.d2r=C.d2l=function(U,te){return E(r(U),te)},C.r2d=C.r2c=function(U){return M(r(U))},C.d2c=C.r2l=r,C.c2d=C.l2r=n,C.c2r=E,C.l2d=M,C.d2p=function(U,te){return C.l2p(C.d2r(U,te))},C.p2d=function(U){return M(j(U))},C.r2p=function(U){return C.l2p(r(U))},C.p2r=j,C.cleanPos=n):"date"===C.type?(C.d2r=C.r2d=b.identity,C.d2c=C.r2c=C.d2l=C.r2l=N,C.c2d=C.c2r=C.l2d=C.l2r=z,C.d2p=C.r2p=function(U,te,ee){return C.l2p(N(U,0,ee))},C.p2d=C.p2r=function(U,te,ee){return z(j(U),te,ee)},C.cleanPos=function(U){return b.cleanDate(U,f,C.calendar)}):"category"===C.type?(C.d2c=C.d2l=G,C.r2d=C.c2d=C.l2d=q,C.d2r=C.d2l_noadd=ne,C.r2c=function(U){var te=X(U);return void 0!==te?te:C.fraction2r(.5)},C.l2r=C.c2r=n,C.r2l=X,C.d2p=function(U){return C.l2p(C.r2c(U))},C.p2d=function(U){return q(j(U))},C.r2p=C.d2p,C.p2r=j,C.cleanPos=function(U){return"string"==typeof U&&""!==U?U:n(U)}):"multicategory"===C.type&&(C.r2d=C.c2d=C.l2d=q,C.d2r=C.d2l_noadd=ne,C.r2c=function(U){var te=ne(U);return void 0!==te?te:C.fraction2r(.5)},C.r2c_just_indices=K,C.l2r=C.c2r=n,C.r2l=ne,C.d2p=function(U){return C.l2p(C.r2c(U))},C.p2d=function(U){return q(j(U))},C.r2p=C.d2p,C.p2r=j,C.cleanPos=function(U){return Array.isArray(U)||"string"==typeof U&&""!==U?U:n(U)},C.setupMultiCategory=function(U){var te,ee,le=C._traceIndices,ce=C._matchGroup;if(ce&&0===C._categories.length)for(var pe in ce)if(pe!==L){var de=P[c.id2name(pe)];le=le.concat(de._traceIndices)}var be=[[0,{}],[0,{}]],he=[];for(te=0;te<le.length;te++){var xe=U[le[te]];if(S in xe){var De=xe[S],Se=xe._length||b.minRowLength(De);if(m(De[0])&&m(De[1]))for(ee=0;ee<Se;ee++){var ke=De[0][ee],Fe=De[1][ee];D(ke)&&D(Fe)&&(he.push([ke,Fe]),ke in be[0][1]||(be[0][1][ke]=be[0][0]++),Fe in be[1][1]||(be[1][1][Fe]=be[1][0]++))}}}for(he.sort(function(ve,Te){var Le=be[0][1],Oe=Le[ve[0]]-Le[Te[0]];if(Oe)return Oe;var Ne=be[1][1];return Ne[ve[1]]-Ne[Te[1]]}),te=0;te<he.length;te++)G(he[te])}),C.fraction2r=function(U){var te=C.r2l(C.range[0]),ee=C.r2l(C.range[1]);return C.l2r(te+U*(ee-te))},C.r2fraction=function(U){var te=C.r2l(C.range[0]),ee=C.r2l(C.range[1]);return(C.r2l(U)-te)/(ee-te)},C.cleanRange=function(U,te){te||(te={}),U||(U="range");var ee,le,ce=b.nestedProperty(C,U).get();if(le=(le="date"===C.type?b.dfltRange(C.calendar):"y"===S?T.DFLTRANGEY:"realaxis"===C._name?[0,1]:te.dfltRange||T.DFLTRANGEX).slice(),"tozero"!==C.rangemode&&"nonnegative"!==C.rangemode||(le[0]=0),ce&&2===ce.length)for("date"!==C.type||C.autorange||(ce[0]=b.cleanDate(ce[0],f,C.calendar),ce[1]=b.cleanDate(ce[1],f,C.calendar)),ee=0;ee<2;ee++)if("date"===C.type){if(!b.isDateTime(ce[ee],C.calendar)){C[U]=le;break}if(C.r2l(ce[0])===C.r2l(ce[1])){var pe=b.constrain(C.r2l(ce[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);ce[0]=C.l2r(pe-1e3),ce[1]=C.l2r(pe+1e3);break}}else{if(!e(ce[ee])){if(!e(ce[1-ee])){C[U]=le;break}ce[ee]=ce[1-ee]*(ee?10:.1)}if(ce[ee]<-i?ce[ee]=-i:ce[ee]>i&&(ce[ee]=i),ce[0]===ce[1]){var de=Math.max(1,Math.abs(1e-6*ce[0]));ce[0]-=de,ce[1]+=de}}else b.nestedProperty(C,U).set(le)},C.setScale=function(U){var te=P._size;if(C.overlaying){var ee=c.getFromId({_fullLayout:P},C.overlaying);C.domain=ee.domain}var le=U&&C._r?"_r":"range",ce=C.calendar;C.cleanRange(le);var pe,de,be=C.r2l(C[le][0],ce),he=C.r2l(C[le][1],ce),xe="y"===S;if(xe?(C._offset=te.t+(1-C.domain[1])*te.h,C._length=te.h*(C.domain[1]-C.domain[0]),C._m=C._length/(be-he),C._b=-C._m*he):(C._offset=te.l+C.domain[0]*te.w,C._length=te.w*(C.domain[1]-C.domain[0]),C._m=C._length/(he-be),C._b=-C._m*be),C._rangebreaks=[],C._lBreaks=0,C._m2=0,C._B=[],C.rangebreaks&&(C._rangebreaks=C.locateBreaks(Math.min(be,he),Math.max(be,he)),C._rangebreaks.length)){for(pe=0;pe<C._rangebreaks.length;pe++)de=C._rangebreaks[pe],C._lBreaks+=Math.abs(de.max-de.min);var De=xe;be>he&&(De=!De),De&&C._rangebreaks.reverse();var Se=De?-1:1;for(C._m2=Se*C._length/(Math.abs(he-be)-C._lBreaks),C._B.push(-C._m2*(xe?he:be)),pe=0;pe<C._rangebreaks.length;pe++)C._B.push(C._B[C._B.length-1]-Se*C._m2*((de=C._rangebreaks[pe]).max-de.min));for(pe=0;pe<C._rangebreaks.length;pe++)(de=C._rangebreaks[pe]).pmin=V(de.min),de.pmax=V(de.max)}if(!isFinite(C._m)||!isFinite(C._b)||C._length<0)throw P._replotting=!1,new Error("Something went wrong with axis scaling")},C.maskBreaks=function(U){var te,ee,le,ce,pe,de=C.rangebreaks||[];de._cachedPatterns||(de._cachedPatterns=de.map(function(ke){return ke.enabled&&ke.bounds?b.simpleMap(ke.bounds,ke.pattern?r:C.d2c):null})),de._cachedValues||(de._cachedValues=de.map(function(ke){return ke.enabled&&ke.values?b.simpleMap(ke.values,C.d2c).sort(b.sorterAsc):null}));for(var be=0;be<de.length;be++){var he=de[be];if(he.enabled)if(he.bounds){switch(ee=(te=de._cachedPatterns[be])[0],le=te[1],he.pattern){case w:ce=(pe=new Date(U)).getUTCDay(),ee>le&&(le+=7,ce<ee&&(ce+=7));break;case x:ce=(pe=new Date(U)).getUTCHours()+(pe.getUTCMinutes()/60+pe.getUTCSeconds()/3600+pe.getUTCMilliseconds()/36e5),ee>le&&(le+=24,ce<ee&&(ce+=24));break;case"":ce=U}if(ce>=ee&&ce<le)return f}else for(var De=de._cachedValues[be],Se=0;Se<De.length;Se++)if(le=(ee=De[Se])+he.dvalue,U>=ee&&U<le)return f}return U},C.locateBreaks=function(U,te){var ee,le,ce,pe,de=[];if(!C.rangebreaks)return de;var be=C.rangebreaks.slice().sort(function(Ne,Be){return Ne.pattern===w&&Be.pattern===x?-1:Be.pattern===w&&Ne.pattern===x?1:0}),he=function(Ne,Be){if((Ne=b.constrain(Ne,U,te))!==(Be=b.constrain(Be,U,te))){for(var He=!0,Ve=0;Ve<de.length;Ve++){var it=de[Ve];Ne<it.max&&Be>=it.min&&(Ne<it.min&&(it.min=Ne),Be>it.max&&(it.max=Be),He=!1)}He&&de.push({min:Ne,max:Be})}};for(ee=0;ee<be.length;ee++){var xe=be[ee];if(xe.enabled)if(xe.bounds){var De=U,Se=te;xe.pattern&&(De=Math.floor(De)),ce=(le=b.simpleMap(xe.bounds,xe.pattern?r:C.r2l))[0],pe=le[1];var ke,Fe,ve=new Date(De);switch(xe.pattern){case w:Fe=s,ke=(pe-ce+(pe<ce?7:0))*d,De+=ce*d-(ve.getUTCDay()*d+ve.getUTCHours()*h+ve.getUTCMinutes()*a+ve.getUTCSeconds()*_+ve.getUTCMilliseconds());break;case x:Fe=d,ke=(pe-ce+(pe<ce?24:0))*h,De+=ce*h-(ve.getUTCHours()*h+ve.getUTCMinutes()*a+ve.getUTCSeconds()*_+ve.getUTCMilliseconds());break;default:De=Math.min(le[0],le[1]),ke=Fe=(Se=Math.max(le[0],le[1]))-De}for(var Te=De;Te<Se;Te+=Fe)he(Te,Te+ke)}else for(var Le=b.simpleMap(xe.values,C.d2c),Oe=0;Oe<Le.length;Oe++)he(ce=Le[Oe],pe=ce+xe.dvalue)}return de.sort(function(Ne,Be){return Ne.min-Be.min}),de},C.makeCalcdata=function(U,te,ee){var le,ce,pe,de,be=C.type,he="date"===be&&U[te+"calendar"];if(te in U){if(le=U[te],de=U._length||b.minRowLength(le),b.isTypedArray(le)&&("linear"===be||"log"===be)){if(de===le.length)return le;if(le.subarray)return le.subarray(0,de)}if("multicategory"===be)return function(Se,ke){for(var Fe=new Array(ke),ve=0;ve<ke;ve++)Fe[ve]=K([(Se[0]||[])[ve],(Se[1]||[])[ve]]);return Fe}(le,de);for(ce=new Array(de),pe=0;pe<de;pe++)ce[pe]=C.d2c(le[pe],0,he,ee)}else{var xe=te+"0"in U?C.d2c(U[te+"0"],0,he):0,De=U["d"+te]?Number(U["d"+te]):1;for(le=U[{x:"y",y:"x"}[te]],de=U._length||le.length,ce=new Array(de),pe=0;pe<de;pe++)ce[pe]=xe+pe*De}if(C.rangebreaks)for(pe=0;pe<de;pe++)ce[pe]=C.maskBreaks(ce[pe]);return ce},C.isValidRange=function(U){return Array.isArray(U)&&2===U.length&&e(C.r2l(U[0]))&&e(C.r2l(U[1]))},C.isPtWithinRange=function(U,te){var ee=C.c2l(U[S],null,te),le=C.r2l(C.range[0]),ce=C.r2l(C.range[1]);return le<ce?le<=ee&&ee<=ce:ce<=ee&&ee<=le},C._emptyCategories=function(){C._categories=[],C._categoriesMap={}},C.clearCalc=function(){var U=C._matchGroup;if(U){var te=null,ee=null;for(var le in U){var ce=P[c.id2name(le)];if(ce._categories){te=ce._categories,ee=ce._categoriesMap;break}}te&&ee?(C._categories=te,C._categoriesMap=ee):C._emptyCategories()}else C._emptyCategories();if(C._initialCategories)for(var pe=0;pe<C._initialCategories.length;pe++)G(C._initialCategories[pe])},C.sortByInitialCategories=function(){var U=[];if(C._emptyCategories(),C._initialCategories)for(var te=0;te<C._initialCategories.length;te++)G(C._initialCategories[te]);U=U.concat(C._traceIndices);var ee=C._matchGroup;for(var le in ee)if(L!==le){var ce=P[c.id2name(le)];ce._categories=C._categories,ce._categoriesMap=C._categoriesMap,U=U.concat(ce._traceIndices)}return U};var oe=P._d3locale;"date"===C.type&&(C._dateFormat=oe?oe.timeFormat:g,C._extraFormat=P._extraFormat),C._separators=P.separators,C._numFormat=oe?oe.numberFormat:y,delete C._minDtick,delete C._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(v,ae,ie){"use strict";ae.exports=function(p){var g=["showexponent","showtickprefix","showticksuffix"].filter(function(b){return void 0!==p[b]});if(g.every(function(b){return p[b]===p[g[0]]})||1===g.length)return p[g[0]]}},{}],587:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color").contrast,b=v("./layout_attributes"),y=v("./show_dflt"),e=v("../array_container_defaults");function r(t,o){function n(m,l){return p.coerce(t,o,b.tickformatstops,m,l)}n("enabled")&&(n("dtickrange"),n("value"))}ae.exports=function(t,o,n,m,l){l||(l={});var i=y(t);if(n("showticklabels")){var f=l.font||{},u=o.color,s=-1!==(o.ticklabelposition||"").indexOf("inside")?g(l.bgColor):u&&u!==b.color.dflt?u:f.color;if(p.coerceFont(n,"tickfont",{family:f.family,size:f.size,color:s}),l.noTicklabelstep||"multicategory"===m||"log"===m||n("ticklabelstep"),l.noAng||n("tickangle"),"category"!==m){var d=n("tickformat");e(t,o,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:r}),o.tickformatstops.length||delete o.tickformatstops,l.noExp||d||"date"===m||(n("showexponent",i),n("exponentformat"),n("minexponent"),n("separatethousands"))}}}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y,e,r){var t=r.isMinor,o=t?b.minor||{}:b,n=t?y.minor:y,m=t?g.minor:g,l=t?"minor.":"",i=p.coerce2(o,n,m,"ticklen",t?.6*(y.ticklen||5):void 0),f=p.coerce2(o,n,m,"tickwidth",t?y.tickwidth||1:void 0),u=p.coerce2(o,n,m,"tickcolor",(t?y.tickcolor:void 0)||n.color);e(l+"ticks",!t&&r.outerTicks||i||f||u?"outside":"")||(delete n.ticklen,delete n.tickwidth,delete n.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(v,ae,ie){"use strict";var p=v("./clean_ticks"),g=v("../../lib").isArrayOrTypedArray;ae.exports=function(b,y,e,r,t){t||(t={});var o=t.isMinor,n=o?b.minor||{}:b,m=o?y.minor:y,l=o?"minor.":"";function i(a){var _=n[a];return void 0!==_?_:(m._template||{})[a]}var f=i("tick0"),u=i("dtick"),s=i("tickvals"),d=e(l+"tickmode",g(s)?"array":u?"linear":"auto");if("auto"===d)e(l+"nticks");else if("linear"===d){var h=m.dtick=p.dtick(u,r);m.tick0=p.tick0(f,r,y.calendar,h)}else"multicategory"!==r&&(void 0===e(l+"tickvals")?m.tickmode="auto":o||e("ticktext"))}},{"../../lib":515,"./clean_ticks":572}],590:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../lib"),y=v("../../components/drawing"),e=v("./axes");ae.exports=function(r,t,o,n){var m=r._fullLayout;if(0!==t.length){var l,i,f,u;n&&(l=n());var s=p.ease(o.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var a={},_=0;_<t.length;_++){var c=t[_],x=c.plotinfo.yaxis;c.xr0&&(a[c.plotinfo.xaxis._name+".range"]=c.xr0.slice()),c.yr0&&(a[x._name+".range"]=c.yr0.slice())}return g.call("relayout",r,a).then(function(){for(var w=0;w<t.length;w++)d(t[w].plotinfo)})}()}),i=Date.now(),u=window.requestAnimationFrame(function a(){f=Date.now();for(var _=Math.min(1,(f-i)/o.duration),c=s(_),T=0;T<t.length;T++)h(t[T],c);f-i>o.duration?(function(){for(var x={},w=0;w<t.length;w++){var M=t[w],C=M.plotinfo.yaxis;M.xr1&&(x[M.plotinfo.xaxis._name+".range"]=M.xr1.slice()),M.yr1&&(x[C._name+".range"]=M.yr1.slice())}l&&l(),g.call("relayout",r,x).then(function(){for(var P=0;P<t.length;P++)d(t[P].plotinfo)})}(),u=window.cancelAnimationFrame(a)):u=window.requestAnimationFrame(a)}),Promise.resolve()}function d(a){var _=a.xaxis,c=a.yaxis;m._defs.select("#"+a.clipId+"> rect").call(y.setTranslate,0,0).call(y.setScale,1,1),a.plot.call(y.setTranslate,_._offset,c._offset).call(y.setScale,1,1);var T=a.plot.selectAll(".scatterlayer .trace");T.selectAll(".point").call(y.setPointGroupScale,1,1),T.selectAll(".textpoint").call(y.setTextPointsScale,1,1),T.call(y.hideOutsideRangePoints,a)}function h(a,_){var c=a.plotinfo,T=c.xaxis,x=c.yaxis,w=T._length,M=x._length,D=!!a.xr1,C=!!a.yr1,P=[];if(D){var L=b.simpleMap(a.xr0,T.r2l),S=b.simpleMap(a.xr1,T.r2l),E=L[1]-L[0],N=S[1]-S[0];P[0]=(L[0]*(1-_)+_*S[0]-L[0])/(L[1]-L[0])*w,P[2]=w*(1-_+_*N/E),T.range[0]=T.l2r(L[0]*(1-_)+_*S[0]),T.range[1]=T.l2r(L[1]*(1-_)+_*S[1])}else P[0]=0,P[2]=w;if(C){var z=b.simpleMap(a.yr0,x.r2l),q=b.simpleMap(a.yr1,x.r2l),G=z[1]-z[0],K=q[1]-q[0];P[1]=(z[1]*(1-_)+_*q[1]-z[1])/(z[0]-z[1])*M,P[3]=M*(1-_+_*K/G),x.range[0]=T.l2r(z[0]*(1-_)+_*q[0]),x.range[1]=x.l2r(z[1]*(1-_)+_*q[1])}else P[1]=0,P[3]=M;e.drawOne(r,T,{skipTitle:!0}),e.drawOne(r,x,{skipTitle:!0}),e.redrawComponents(r,[T._id,x._id]);var ne=D?w/P[2]:1,X=C?M/P[3]:1,H=T._offset-(D?P[0]/P[2]*w:0),oe=x._offset-(C?P[1]/P[3]*M:0);c.clipRect.call(y.setTranslate,D?P[0]:0,C?P[1]:0).call(y.setScale,1/ne,1/X),c.plot.call(y.setTranslate,H,oe).call(y.setScale,ne,X),y.setPointGroupScale(c.zoomScalePts,1/ne,1/X),y.setTextPointsScale(c.zoomScaleTxt,1/ne,1/X)}e.redrawComponents(r)}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(v,ae,ie){"use strict";var p=v("../../registry").traceIs,g=v("./axis_autotype");function b(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,r){var t=b(e),o=p(e,"box-violin"),n=p(e._fullInput||{},"candlestick");return o&&!n&&r===t&&void 0===e[t]&&void 0===e[t+"0"]}ae.exports=function(e,r,t,o){t("autotypenumbers",o.autotypenumbersDflt),"-"===t("type",(o.splomStash||{}).type)&&(function(n,m){if("-"===n.type){var l,i=n._id,f=i.charAt(0);-1!==i.indexOf("scene")&&(i=f);var u=function(x,w,M){for(var D=0;D<x.length;D++){var C=x[D];if("splom"===C.type&&C._length>0&&(C["_"+M+"axes"]||{})[w]||(C[M+"axis"]||M)===w&&(y(C,M)||(C[M]||[]).length||C[M+"0"]))return C}}(m,i,f);if(u){if("histogram"===u.type&&f==={v:"y",h:"x"}[u.orientation||"v"])return void(n.type="linear");var s=f+"calendar",d=u[s],h={noMultiCategory:!p(u,"cartesian")||p(u,"noMultiCategory")};if("box"===u.type&&u._hasPreCompStats&&f==={h:"x",v:"y"}[u.orientation||"v"]&&(h.noMultiCategory=!0),h.autotypenumbers=n.autotypenumbers,y(u,f)){var a=b(u),_=[];for(l=0;l<m.length;l++){var c=m[l];p(c,"box-violin")&&(c[f+"axis"]||f)===i&&(_.push(void 0!==c[a]?c[a][0]:void 0!==c.name?c.name:"text"),c[s]!==d&&(d=void 0))}n.type=g(_,d,h)}else if("splom"===u.type){var T=u.dimensions[u._axesDim[i]];T.visible&&(n.type=g(T.values,d,h))}else n.type=g(u[f]||[u[f+"0"]],d,h)}}}(r,o.data),"-"===r.type?r.type="linear":e.type=r.type)}},{"../../registry":647,"./axis_autotype":567}],592:[function(v,ae,ie){"use strict";var p=v("../registry"),g=v("../lib");function b(t,o,n){var m,l,i,f=!1;if("data"===o.type)m=t._fullData[null!==o.traces?o.traces[0]:0];else{if("layout"!==o.type)return!1;m=t._fullLayout}return l=g.nestedProperty(m,o.prop).get(),(i=n[o.type]=n[o.type]||{}).hasOwnProperty(o.prop)&&i[o.prop]!==l&&(f=!0),i[o.prop]=l,{changed:f,value:l}}function y(t,o){var n=[],m=o[0],l={};if("string"==typeof m)l[m]=o[1];else{if(!g.isPlainObject(m))return n;l=m}return r(l,function(i,f,u){n.push({type:"layout",prop:i,value:u})},"",0),n}function e(t,o){var n,m,l,i,f=[];if(l=o[1],n=o[2],i={},"string"==typeof(m=o[0]))i[m]=l;else{if(!g.isPlainObject(m))return f;i=m,void 0===n&&(n=l)}return void 0===n&&(n=null),r(i,function(u,s,d){var h,a;if(Array.isArray(d)){a=d.slice();var _=Math.min(a.length,t.data.length);n&&(_=Math.min(_,n.length)),h=[];for(var c=0;c<_;c++)h[c]=n?n[c]:c}else a=d,h=n?n.slice():null;if(null===h)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(h)){if(!Array.isArray(a)){var T=a;a=[];for(var x=0;x<h.length;x++)a[x]=T}a.length=Math.min(h.length,a.length)}f.push({type:"data",prop:u,traces:h,value:a})},"",0),f}function r(t,o,n,m){Object.keys(t).forEach(function(l){var i=t[l];if("_"!==l[0]){var f=n+(m>0?".":"")+l;g.isPlainObject(i)?r(i,o,f,m+1):o(f,l,i)}})}ie.manageCommandObserver=function(t,o,n,m){var l={},i=!0;o&&o._commandObserver&&(l=o._commandObserver),l.cache||(l.cache={}),l.lookupTable={};var f=ie.hasSimpleAPICommandBindings(t,n,l.lookupTable);if(o&&o._commandObserver){if(f)return l;if(o._commandObserver.remove)return o._commandObserver.remove(),o._commandObserver=null,l}if(f){b(t,f,l.cache),l.check=function(){if(i){var d=b(t,f,l.cache);return d.changed&&m&&void 0!==l.lookupTable[d.value]&&(l.disable(),Promise.resolve(m({value:d.value,type:f.type,prop:f.prop,traces:f.traces,index:l.lookupTable[d.value]})).then(l.enable,l.enable)),d.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],s=0;s<u.length;s++)t._internalOn(u[s],l.check);l.remove=function(){for(var d=0;d<u.length;d++)t._removeInternalListener(u[d],l.check)}}else g.log("Unable to automatically bind plot updates to API command"),l.lookupTable={},l.remove=function(){};return l.disable=function(){i=!1},l.enable=function(){i=!0},o&&(o._commandObserver=l),l},ie.hasSimpleAPICommandBindings=function(t,o,n){var m,l,i=o.length;for(m=0;m<i;m++){var f,u=o[m],s=u.method,d=u.args;if(Array.isArray(d)||(d=[]),!s)return!1;var h=ie.computeAPICommandBindings(t,s,d);if(1!==h.length)return!1;if(l){if((f=h[0]).type!==l.type||f.prop!==l.prop)return!1;if(Array.isArray(l.traces)){if(!Array.isArray(f.traces))return!1;f.traces.sort();for(var a=0;a<l.traces.length;a++)if(l.traces[a]!==f.traces[a])return!1}else if(f.prop!==l.prop)return!1}else l=h[0],Array.isArray(l.traces)&&l.traces.sort();var _=(f=h[0]).value;if(Array.isArray(_)){if(1!==_.length)return!1;_=_[0]}n&&(n[_]=m)}return l},ie.executeAPICommand=function(t,o,n){if("skip"===o)return Promise.resolve();var m=p.apiMethodRegistry[o],l=[t];Array.isArray(n)||(n=[]);for(var i=0;i<n.length;i++)l.push(n[i]);return m.apply(null,l).catch(function(f){return g.warn("API call to Plotly."+o+" rejected.",f),Promise.reject(f)})},ie.computeAPICommandBindings=function(t,o,n){var m,i;switch(Array.isArray(n)||(n=[]),o){case"restyle":m=e(t,n);break;case"relayout":m=y(0,n);break;case"update":m=e(t,[n[0],n[2]]).concat(y(0,[n[1]]));break;case"animate":i=n,m=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:m=[]}return m}},{"../lib":515,"../registry":647}],593:[function(v,ae,ie){"use strict";var p=v("../lib/extend").extendFlat;ie.attributes=function(g,b){b=b||{};var y={valType:"info_array",editType:(g=g||{}).editType,items:[{valType:"number",min:0,max:1,editType:g.editType},{valType:"number",min:0,max:1,editType:g.editType}],dflt:[0,1]},e={x:p({},y,{}),y:p({},y,{}),editType:g.editType};return g.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:g.editType},e.column={valType:"integer",min:0,dflt:0,editType:g.editType}),e},ie.defaults=function(g,b,y,e){var r=e&&e.x||[0,1],t=e&&e.y||[0,1],o=b.grid;if(o){var n=y("domain.column");void 0!==n&&(n<o.columns?r=o._domains.x[n]:delete g.domain.column);var m=y("domain.row");void 0!==m&&(m<o.rows?t=o._domains.y[m]:delete g.domain.row)}var l=y("domain.x",r),i=y("domain.y",t);l[0]<l[1]||(g.domain.x=r.slice()),i[0]<i[1]||(g.domain.y=t.slice())}},{"../lib/extend":505}],594:[function(v,ae,ie){"use strict";ae.exports=function(p){var g=p.editType,b=p.colorEditType;void 0===b&&(b=g);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:g},size:{valType:"number",min:1,editType:g},color:{valType:"color",editType:b},editType:g};return p.autoSize&&(y.size.dflt="auto"),p.autoColor&&(y.color.dflt="auto"),p.arrayOk&&(y.family.arrayOk=!0,y.size.arrayOk=!0,y.color.arrayOk=!0),y}},{}],595:[function(v,ae,ie){"use strict";ae.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(v,ae,ie){"use strict";ie.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ie.axesNames=["lonaxis","lataxis"],ie.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ie.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ie.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ie.clipPad=.001,ie.precision=.1,ie.landColor="#F0DC82",ie.waterColor="#3399FF",ie.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ie.sphereSVG={type:"Sphere"},ie.fillLayers={ocean:1,land:1,lakes:1},ie.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ie.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ie.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ie.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-geo"),b=g.geoPath,y=g.geoDistance,e=v("d3-geo-projection"),r=v("../../registry"),t=v("../../lib"),o=t.strTranslate,n=v("../../components/color"),m=v("../../components/drawing"),l=v("../../components/fx"),i=v("../plots"),f=v("../cartesian/axes"),u=v("../cartesian/autorange").getAutoRange,s=v("../../components/dragelement"),d=v("../../components/selections").prepSelect,h=v("../../components/selections").clearOutline,a=v("../../components/selections").selectOnClick,_=v("./zoom"),c=v("./constants"),T=v("../../lib/geo_location_utils"),x=v("../../lib/topojson_utils"),w=v("topojson-client").feature;function M(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var D=M.prototype;function C(P,L){var S=c.clipPad,E=P[0]+S,N=P[1]-S,z=L[0]+S,q=L[1]-S;E>0&&N<0&&(N+=360);var G=(N-E)/4;return{type:"Polygon",coordinates:[[[E,z],[E,q],[E+G,q],[E+2*G,q],[E+3*G,q],[N,q],[N,z],[N-G,z],[N-2*G,z],[N-3*G,z],[E,z]]]}}ae.exports=function(P){return new M(P)},D.plot=function(P,L,S){var E=this,N=L[this.id],z=[],q=!1;for(var G in c.layerNameToAdjective)if("frame"!==G&&N["show"+G]){q=!0;break}for(var K=0;K<P.length;K++)if(P[0][0].trace.locationmode){q=!0;break}if(q){var ne=x.getTopojsonName(N);null!==E.topojson&&ne===E.topojsonName||(E.topojsonName=ne,void 0===PlotlyGeoAssets.topojson[E.topojsonName]&&z.push(E.fetchTopojson()))}z=z.concat(T.fetchTraceGeoData(P)),S.push(new Promise(function(X,J){Promise.all(z).then(function(){E.topojson=PlotlyGeoAssets.topojson[E.topojsonName],E.update(P,L),X()}).catch(J)}))},D.fetchTopojson=function(){var P=this,L=x.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(S,E){p.json(L,function(N,z){if(N)return E(404===N.status?new Error(["plotly.js could not find topojson file at",L+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",L].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=z,S()})})},D.update=function(P,L){var S=L[this.id];this.hasChoropleth=!1;for(var E=0;E<P.length;E++){var N=P[E],z=N[0].trace;"choropleth"===z.type&&(this.hasChoropleth=!0),!0===z.visible&&z._length>0&&z._module.calcGeoJSON(N,L)}if(!this.updateProjection(P,L)){this.viewInitial&&this.scope===S.scope||this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(L,S),this.updateDims(L,S),this.updateFx(L,S),i.generalUpdatePerTraceModule(this.graphDiv,this,P,S);var q=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=q.selectAll(".point"),this.dataPoints.text=q.selectAll("text"),this.dataPaths.line=q.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this.render()}},D.updateProjection=function(P,L){var S=this.graphDiv,E=L[this.id],N=L._size,z=E.domain,q=E.projection,G=E.lonaxis,K=E.lataxis,ne=G._ax,X=K._ax,J=this.projection=function(ve){var Te=ve.projection,Le=Te.type,Oe=c.projNames[Le];Oe="geo"+t.titleCase(Oe);for(var Ne=(g[Oe]||e[Oe])(),Be=ve._isSatellite?180*Math.acos(1/Te.distance)/Math.PI:ve._isClipped?c.lonaxisSpan[Le]/2:null,He=["center","rotate","parallels","clipExtent"],Ve=function(je){return je?Ne:[]},it=0;it<He.length;it++){var ze=He[it];"function"!=typeof Ne[ze]&&(Ne[ze]=Ve)}return Ne.isLonLatOverEdges=function(je){if(null===Ne(je))return!0;if(Be){var qe=Ne.rotate();return y(je,[-qe[0],-qe[1]])>Be*Math.PI/180}return!1},Ne.getPath=function(){return b().projection(Ne)},Ne.getBounds=function(je){return Ne.getPath().bounds(je)},Ne.precision(c.precision),ve._isSatellite&&Ne.tilt(Te.tilt).distance(Te.distance),Be&&Ne.clipAngle(Be-c.clipPad),Ne}(E),se=[[N.l+N.w*z.x[0],N.t+N.h*(1-z.y[1])],[N.l+N.w*z.x[1],N.t+N.h*(1-z.y[0])]],V=E.center||{},j=q.rotation||{},H=G.range||[],oe=K.range||[];if(E.fitbounds){ne._length=se[1][0]-se[0][0],X._length=se[1][1]-se[0][1],ne.range=u(S,ne),X.range=u(S,X);var U=(ne.range[0]+ne.range[1])/2,te=(X.range[0]+X.range[1])/2;if(E._isScoped)V={lon:U,lat:te};else if(E._isClipped){V={lon:U,lat:te},j={lon:U,lat:te,roll:j.roll};var ee=q.type,le=c.lonaxisSpan[ee]/2||180,ce=c.lataxisSpan[ee]/2||90;H=[U-le,U+le],oe=[te-ce,te+ce]}else V={lon:U,lat:te},j={lon:U,lat:j.lat,roll:j.roll}}J.center([V.lon-j.lon,V.lat-j.lat]).rotate([-j.lon,-j.lat,j.roll]).parallels(q.parallels);var pe=C(H,oe);J.fitExtent(se,pe);var de=this.bounds=J.getBounds(pe),be=this.fitScale=J.scale(),he=J.translate();if(E.fitbounds){var xe=J.getBounds(C(ne.range,X.range)),De=Math.min((de[1][0]-de[0][0])/(xe[1][0]-xe[0][0]),(de[1][1]-de[0][1])/(xe[1][1]-xe[0][1]));isFinite(De)?J.scale(De*be):t.warn("Something went wrong during"+this.id+"fitbounds computations.")}else J.scale(q.scale*be);var Se=this.midPt=[(de[0][0]+de[1][0])/2,(de[0][1]+de[1][1])/2];if(J.translate([he[0]+(Se[0]-he[0]),he[1]+(Se[1]-he[1])]).clipExtent(de),E._isAlbersUsa){var ke=J([V.lon,V.lat]),Fe=J.translate();J.translate([Fe[0]-(ke[0]-Fe[0]),Fe[1]-(ke[1]-Fe[1])])}},D.updateBaseLayers=function(P,L){var S=this,E=S.topojson,N=S.layers,z=S.basePaths;function q(J){return"lonaxis"===J||"lataxis"===J}function G(J){return Boolean(c.lineLayers[J])}function K(J){return Boolean(c.fillLayers[J])}var ne=(this.hasChoropleth?c.layersForChoropleth:c.layers).filter(function(J){return G(J)||K(J)?L["show"+J]:!q(J)||L[J].showgrid}),X=S.framework.selectAll(".layer").data(ne,String);X.exit().each(function(J){delete N[J],delete z[J],p.select(this).remove()}),X.enter().append("g").attr("class",function(J){return"layer "+J}).each(function(J){var se=N[J]=p.select(this);"bg"===J?S.bgRect=se.append("rect").style("pointer-events","all"):q(J)?z[J]=se.append("path").style("fill","none"):"backplot"===J?se.append("g").classed("choroplethlayer",!0):"frontplot"===J?se.append("g").classed("scatterlayer",!0):G(J)?z[J]=se.append("path").style("fill","none").style("stroke-miterlimit",2):K(J)&&(z[J]=se.append("path").style("stroke","none"))}),X.order(),X.each(function(J){var se=z[J],V=c.layerNameToAdjective[J];"frame"===J?se.datum(c.sphereSVG):G(J)||K(J)?se.datum(w(E,E.objects[J])):q(J)&&se.datum(function(j,H,oe){var U,te,ee,le=H[j],ce=c.scopeDefaults[H.scope];"lonaxis"===j?(U=ce.lonaxisRange,te=ce.lataxisRange,ee=function(Fe,ve){return[Fe,ve]}):"lataxis"===j&&(U=ce.lataxisRange,te=ce.lonaxisRange,ee=function(Fe,ve){return[ve,Fe]});var pe={type:"linear",range:[U[0],U[1]-1e-6],tick0:le.tick0,dtick:le.dtick};f.setConvert(pe,oe);var de=f.calcTicks(pe);H.isScoped||"lonaxis"!==j||de.pop();for(var be=de.length,he=new Array(be),xe=0;xe<be;xe++)for(var De=de[xe].x,Se=he[xe]=[],ke=te[0];ke<te[1]+2.5;ke+=2.5)Se.push(ee(De,ke));return{type:"MultiLineString",coordinates:he}}(J,L,P)).call(n.stroke,L[J].gridcolor).call(m.dashLine,L[J].griddash,L[J].gridwidth),G(J)?se.call(n.stroke,L[V+"color"]).call(m.dashLine,"",L[V+"width"]):K(J)&&se.call(n.fill,L[V+"color"])})},D.updateDims=function(P,L){var S=this.bounds,E=(L.framewidth||0)/2,N=S[0][0]-E,z=S[0][1]-E,q=S[1][0]-N+E,G=S[1][1]-z+E;m.setRect(this.clipRect,N,z,q,G),this.bgRect.call(m.setRect,N,z,q,G).call(n.fill,L.bgcolor),this.xaxis._offset=N,this.xaxis._length=q,this.yaxis._offset=z,this.yaxis._length=G},D.updateFx=function(P,L){var S=this,E=S.graphDiv,N=S.bgRect,z=P.dragmode,q=P.clickmode;if(!S.isStatic){var G={element:S.bgRect.node(),gd:E,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:function(ne,X){X.isRect?(ne.range={})[S.id]=[K([X.xmin,X.ymin]),K([X.xmax,X.ymax])]:(ne.lassoPoints={})[S.id]=X.map(K)}},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(ne){2===ne&&h(E)}};"pan"===z?(N.node().onmousedown=null,N.call(_(S,L)),N.on("dblclick.zoom",function(){var ne=S.viewInitial,X={};for(var J in ne)X[S.id+"."+J]=ne[J];r.call("_guiRelayout",E,X),E.emit("plotly_doubleclick",null)}),E._context._scrollZoom.geo||N.on("wheel.zoom",null)):"select"!==z&&"lasso"!==z||(N.on(".zoom",null),G.prepFn=function(ne,X,J){d(ne,X,J,G,z)},s.init(G)),N.on("mousemove",function(){var ne=S.projection.invert(t.getPositionFromD3Event());if(!ne)return s.unhover(E,p.event);S.xaxis.p2c=function(){return ne[0]},S.yaxis.p2c=function(){return ne[1]},l.hover(E,p.event,S.id)}),N.on("mouseout",function(){E._dragging||s.unhover(E,p.event)}),N.on("click",function(){"select"!==z&&"lasso"!==z&&(q.indexOf("select")>-1&&a(p.event,E,[S.xaxis],[S.yaxis],S.id,G),q.indexOf("event")>-1&&l.click(E,p.event))})}function K(ne){return S.projection.invert([ne[0]+S.xaxis._offset,ne[1]+S.yaxis._offset])}},D.makeFramework=function(){var P=this,L=P.graphDiv,S=L._fullLayout,E="clip"+S._uid+P.id;P.clipDef=S._clips.append("clipPath").attr("id",E),P.clipRect=P.clipDef.append("rect"),P.framework=p.select(P.container).append("g").attr("class","geo "+P.id).call(m.setClipUrl,E,L),P.project=function(N){var z=P.projection(N);return z?[z[0]-P.xaxis._offset,z[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(N){return P.project(N)[0]}},P.yaxis={_id:"y",c2p:function(N){return P.project(N)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(P.mockAxis,S)},D.saveViewInitial=function(P){var S=P.center||{},E=P.projection,N=E.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":E.scale},t.extendFlat(this.viewInitial,P._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:P._isClipped?{"projection.rotation.lon":N.lon,"projection.rotation.lat":N.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":N.lon})},D.render=function(){var P,L=this.projection,S=L.getPath();function E(z){var q=L(z.lonlat);return q?o(q[0],q[1]):null}function N(z){return L.isLonLatOverEdges(z.lonlat)?"none":null}for(P in this.basePaths)this.basePaths[P].attr("d",S);for(P in this.dataPaths)this.dataPaths[P].attr("d",function(z){return S(z.geojson)});for(P in this.dataPoints)this.dataPoints[P].attr("display",N).attr("transform",E)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(v,ae,ie){"use strict";var p=v("../../plots/get_data").getSubplotCalcData,g=v("../../lib").counterRegex,b=v("./geo"),y="geo",e=g(y),r={};r.geo={valType:"subplotid",dflt:y,editType:"calc"},ae.exports={attr:y,name:y,idRoot:y,idRegex:e,attrRegex:e,attributes:r,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(t){for(var o=t._fullLayout,n=t.calcdata,m=o._subplots.geo,l=0;l<m.length;l++){var i=m[l],f=p(n,y,i),u=o[i]._subplot;u||(u=b({id:i,graphDiv:t,container:o._geolayer.node(),topojsonURL:t._context.topojsonURL,staticPlot:t._context.staticPlot}),o[i]._subplot=u),u.plot(f,o,t._promises)}},updateFx:function(t){for(var o=t._fullLayout,n=o._subplots.geo,m=0;m<n.length;m++){var l=o[n[m]];l._subplot.updateFx(o,l)}},clean:function(t,o,n,m){for(var l=m._subplots.geo||[],i=0;i<l.length;i++){var f=l[i],u=m[f]._subplot;!o[f]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(v,ae,ie){"use strict";var p=v("../../components/color/attributes"),g=v("../domain").attributes,b=v("../../components/drawing/attributes").dash,y=v("./constants"),e=v("../../plot_api/edit_types").overrideAll,r=v("../../lib/sort_object_keys"),t={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:p.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:b};(ae.exports=e({domain:g({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:r(y.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:r(y.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:p.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:y.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:y.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:y.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:y.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:p.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:p.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:p.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:p.background},lonaxis:t,lataxis:t},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../subplot_defaults"),b=v("../get_data").getSubplotData,y=v("./constants"),e=v("./layout_attributes"),r=y.axesNames;function t(o,n,m,l){var i=b(l.fullData,"geo",l.id).map(function(j){return j._expandedIndex}),f=m("resolution"),u=m("scope"),s=y.scopeDefaults[u],d=m("projection.type",s.projType),h=n._isAlbersUsa="albers usa"===d;h&&(u=n.scope="usa");var a=n._isScoped="world"!==u,_=n._isSatellite="satellite"===d,c=n._isConic=-1!==d.indexOf("conic")||"albers"===d,T=n._isClipped=!!y.lonaxisSpan[d];if(!1===o.visible){var x=p.extendDeep({},n._template);x.showcoastlines=!1,x.showcountries=!1,x.showframe=!1,x.showlakes=!1,x.showland=!1,x.showocean=!1,x.showrivers=!1,x.showsubunits=!1,x.lonaxis&&(x.lonaxis.showgrid=!1),x.lataxis&&(x.lataxis.showgrid=!1),n._template=x}for(var w=m("visible"),M=0;M<r.length;M++){var D,C=r[M],P=[30,10][M];if(a)D=s[C+"Range"];else{var L=y[C+"Span"],S=(L[d]||L["*"])/2,E=m("projection.rotation."+C.substr(0,3),s.projRotate[M]);D=[E-S,E+S]}var N=m(C+".range",D);m(C+".tick0"),m(C+".dtick",P),m(C+".showgrid",!!w&&void 0)&&(m(C+".gridcolor"),m(C+".gridwidth"),m(C+".griddash")),n[C]._ax={type:"linear",_id:C.slice(0,3),_traceIndices:i,setScale:p.identity,c2l:p.identity,r2l:p.identity,autorange:!0,range:N.slice(),_m:1,_input:{}}}var z=n.lonaxis.range,q=n.lataxis.range,G=z[0],K=z[1];G>0&&K<0&&(K+=360);var ne,X,J,se=(G+K)/2;if(!h){var V=a?s.projRotate:[se,0,0];ne=m("projection.rotation.lon",V[0]),m("projection.rotation.lat",V[1]),m("projection.rotation.roll",V[2]),m("showcoastlines",!a&&w)&&(m("coastlinecolor"),m("coastlinewidth")),m("showocean",!!w&&void 0)&&m("oceancolor")}h?(X=-96.6,J=38.7):(X=a?se:ne,J=(q[0]+q[1])/2),m("center.lon",X),m("center.lat",J),_&&(m("projection.tilt"),m("projection.distance")),c&&m("projection.parallels",s.projParallels||[0,60]),m("projection.scale"),m("showland",!!w&&void 0)&&m("landcolor"),m("showlakes",!!w&&void 0)&&m("lakecolor"),m("showrivers",!!w&&void 0)&&(m("rivercolor"),m("riverwidth")),m("showcountries",a&&"usa"!==u&&w)&&(m("countrycolor"),m("countrywidth")),("usa"===u||"north america"===u&&50===f)&&(m("showsubunits",w),m("subunitcolor"),m("subunitwidth")),a||m("showframe",w)&&(m("framecolor"),m("framewidth")),m("bgcolor"),m("fitbounds")&&(delete n.projection.scale,a?(delete n.center.lon,delete n.center.lat):T?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}ae.exports=function(o,n,m){g(o,n,m,{type:"geo",attributes:e,handleDefaults:t,fullData:m,partition:"y"})}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../registry"),y=Math.PI/180,e=180/Math.PI,r={cursor:"pointer"},t={cursor:"auto"};function o(w,M){return p.behavior.zoom().translate(M.translate()).scale(M.scale())}function n(w,M,D){var C=w.id,P=w.graphDiv,L=P.layout,S=L[C],E=P._fullLayout,N=E[C],z={},q={};function G(K,ne){z[C+"."+K]=g.nestedProperty(S,K).get(),b.call("_storeDirectGUIEdit",L,E._preGUI,z);var X=g.nestedProperty(N,K);X.get()!==ne&&(X.set(ne),g.nestedProperty(S,K).set(ne),q[C+"."+K]=ne)}D(G),G("projection.scale",M.scale()/w.fitScale),G("fitbounds",!1),P.emit("plotly_relayout",q)}function m(w,M){var D=o(0,M);function C(P){var L=M.invert(w.midPt);P("center.lon",L[0]),P("center.lat",L[1])}return D.on("zoomstart",function(){p.select(this).style(r)}).on("zoom",function(){M.scale(p.event.scale).translate(p.event.translate),w.render();var P=M.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/w.fitScale,"geo.center.lon":P[0],"geo.center.lat":P[1]})}).on("zoomend",function(){p.select(this).style(t),n(w,M,C)}),D}function l(w,M){var D,C,P,L,S,E,N,z,q,G=o(0,M);function K(X){return M.invert(X)}function ne(X){var J=M.rotate(),se=M.invert(w.midPt);X("projection.rotation.lon",-J[0]),X("center.lon",se[0]),X("center.lat",se[1])}return G.on("zoomstart",function(){p.select(this).style(r),D=p.mouse(this),C=M.rotate(),P=M.translate(),L=C,S=K(D)}).on("zoom",function(){if(E=p.mouse(this),function(se){var V=K(se);if(!V)return!0;var j=M(V);return Math.abs(j[0]-se[0])>2||Math.abs(j[1]-se[1])>2}(D))return G.scale(M.scale()),void G.translate(M.translate());M.scale(p.event.scale),M.translate([P[0],p.event.translate[1]]),S?K(E)&&(z=K(E),M.rotate(N=[L[0]+(z[0]-S[0]),C[1],C[2]]),L=N):S=K(D=E),q=!0,w.render();var X=M.rotate(),J=M.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/w.fitScale,"geo.center.lon":J[0],"geo.center.lat":J[1],"geo.projection.rotation.lon":-X[0]})}).on("zoomend",function(){p.select(this).style(t),q&&n(w,M,ne)}),G}function i(w,M){var D,C={r:M.rotate(),k:M.scale()},P=o(0,M),L=function(K){for(var ne=0,X=arguments.length,J=[];++ne<X;)J.push(arguments[ne]);var se=p.dispatch.apply(null,J);return se.of=function(V,j){return function(H){var oe;try{oe=H.sourceEvent=p.event,H.target=K,p.event=H,se[H.type].apply(V,j)}finally{p.event=oe}}},se}(P,"zoomstart","zoom","zoomend"),S=0,E=P.on;function N(K){S++||K({type:"zoomstart"})}function z(K){K({type:"zoom"})}function q(K){--S||K({type:"zoomend"})}function G(K){var ne=M.rotate();K("projection.rotation.lon",-ne[0]),K("projection.rotation.lat",-ne[1])}return P.on("zoomstart",function(){p.select(this).style(r);var K=p.mouse(this),ne=M.rotate(),X=ne,J=M.translate(),se=u(ne);D=f(M,K),E.call(P,"zoom",function(){var V=p.mouse(this);if(M.scale(C.k=p.event.scale),D){if(f(M,V)){M.rotate(ne).translate(J);var j=f(M,V),H=d(D,j),oe=T(s(se,H)),U=C.r=h(oe,D,X);isFinite(U[0])&&isFinite(U[1])&&isFinite(U[2])||(U=X),M.rotate(U),X=U}}else D=f(M,K=V);z(L.of(this,arguments))}),N(L.of(this,arguments))}).on("zoomend",function(){p.select(this).style(t),E.call(P,"zoom",null),q(L.of(this,arguments)),n(w,M,G)}).on("zoom.redraw",function(){w.render();var K=M.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/w.fitScale,"geo.projection.rotation.lon":-K[0],"geo.projection.rotation.lat":-K[1]})}),p.rebind(P,L,"on")}function f(w,M){var C,P,L,S,D=w.invert(M);return D&&isFinite(D[0])&&isFinite(D[1])&&(P=(C=D)[0]*y,L=C[1]*y,[(S=Math.cos(L))*Math.cos(P),S*Math.sin(P),Math.sin(L)])}function u(w){var M=.5*w[0]*y,D=.5*w[1]*y,C=.5*w[2]*y,P=Math.sin(M),L=Math.cos(M),S=Math.sin(D),E=Math.cos(D),N=Math.sin(C),z=Math.cos(C);return[L*E*z+P*S*N,P*E*z-L*S*N,L*S*z+P*E*N,L*E*N-P*S*z]}function s(w,M){var D=w[0],C=w[1],P=w[2],L=w[3],S=M[0],E=M[1],N=M[2],z=M[3];return[D*S-C*E-P*N-L*z,D*E+C*S+P*z-L*N,D*N-C*z+P*S+L*E,D*z+C*N-P*E+L*S]}function d(w,M){if(w&&M){var D=[(S=w)[1]*(E=M)[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]],C=Math.sqrt(x(D,D)),P=.5*Math.acos(Math.max(-1,Math.min(1,x(w,M)))),L=Math.sin(P)/C;return C&&[Math.cos(P),D[2]*L,-D[1]*L,D[0]*L]}var S,E}function h(w,M,D){var C=c(M,2,w[0]);C=c(C,1,w[1]),C=c(C,0,w[2]-D[2]);var P,L,S=M[0],E=M[1],N=M[2],z=C[0],q=C[1],G=C[2],K=Math.atan2(E,S)*e,ne=Math.sqrt(S*S+E*E);Math.abs(q)>ne?(L=(q>0?90:-90)-K,P=0):(L=Math.asin(q/ne)*e-K,P=Math.sqrt(ne*ne-q*q));var X=180-L-2*K,J=(Math.atan2(G,z)-Math.atan2(N,P))*e,se=(Math.atan2(G,z)-Math.atan2(N,-P))*e;return a(D[0],D[1],L,J)<=a(D[0],D[1],X,se)?[L,J,D[2]]:[X,se,D[2]]}function a(w,M,D,C){var P=_(D-w),L=_(C-M);return Math.sqrt(P*P+L*L)}function _(w){return(w%360+540)%360-180}function c(w,M,D){var C=D*y,P=w.slice(),L=0===M?1:0,S=2===M?1:2,E=Math.cos(C),N=Math.sin(C);return P[L]=w[L]*E-w[S]*N,P[S]=w[S]*E+w[L]*N,P}function T(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*e,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*e]}function x(w,M){for(var D=0,C=0,P=w.length;C<P;++C)D+=w[C]*M[C];return D}ae.exports=function(w,M){return(M._isScoped?m:M._isClipped?i:l)(w,w.projection)}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(v,ae,ie){"use strict";var p=v("../registry"),g=v("./cartesian/constants").SUBPLOT_PATTERN;ie.getSubplotCalcData=function(b,y,e){var r=p.subplotsRegistry[y];if(!r)return[];for(var t=r.attr,o=[],n=0;n<b.length;n++){var m=b[n];m[0].trace[t]===e&&o.push(m)}return o},ie.getModuleCalcData=function(b,y){var e,r=[],t=[];if(!(e="string"==typeof y?p.getModule(y).plot:"function"==typeof y?y:y.plot))return[r,b];for(var o=0;o<b.length;o++){var n=b[o],m=n[0].trace;!0===m.visible&&0!==m._length&&(m._module.plot===e?r.push(n):t.push(n))}return[r,t]},ie.getSubplotData=function(b,y,e){if(!p.subplotsRegistry[y])return[];var r,t,o,n=p.subplotsRegistry[y].attr,m=[];if("gl2d"===y){var l=e.match(g);t="x"+l[1],o="y"+l[2]}for(var i=0;i<b.length;i++)r=b[i],"gl2d"===y&&p.traceIs(r,"gl2d")?r[n[0]]===t&&r[n[1]]===o&&m.push(r):r[n]===e&&m.push(r);return m}},{"../registry":647,"./cartesian/constants":573}],603:[function(v,ae,ie){"use strict";var p=v("mouse-change"),g=v("mouse-wheel"),b=v("mouse-event-offset"),y=v("../cartesian/constants"),e=v("has-passive-events");function r(t,o){this.element=t,this.plot=o,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}ae.exports=function(t){var o=t.mouseContainer,n=t.glplot,m=new r(o,n);function l(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function i(f,u,s){var d,h,a=t.calcDataBox(),_=n.viewBox,c=m.lastPos[0],T=m.lastPos[1],x=y.MINDRAG*n.pixelRatio,w=y.MINZOOM*n.pixelRatio;function M(E,N,z){var q=Math.min(N,z),G=Math.max(N,z);q!==G?(a[E]=q,a[E+2]=G,m.dataBox=a,t.setRanges(a)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(u*=n.pixelRatio,s=_[3]-_[1]-(s*=n.pixelRatio),t.fullLayout.dragmode){case"zoom":if(f){var D=u/(_[2]-_[0])*(a[2]-a[0])+a[0],C=s/(_[3]-_[1])*(a[3]-a[1])+a[1];m.boxInited||(m.boxStart[0]=D,m.boxStart[1]=C,m.dragStart[0]=u,m.dragStart[1]=s),m.boxEnd[0]=D,m.boxEnd[1]=C,m.boxInited=!0,m.boxEnabled||m.boxStart[0]===m.boxEnd[0]&&m.boxStart[1]===m.boxEnd[1]||(m.boxEnabled=!0);var P=Math.abs(m.dragStart[0]-u)<w,L=Math.abs(m.dragStart[1]-s)<w;if(!function(){for(var E=t.graphDiv._fullLayout._axisConstraintGroups,N=t.xaxis._id,z=t.yaxis._id,q=0;q<E.length;q++)if(-1!==E[q][N]){if(-1!==E[q][z])return!0;break}return!1}()||P&&L)P&&(m.boxEnd[0]=m.boxStart[0]),L&&(m.boxEnd[1]=m.boxStart[1]);else{d=m.boxEnd[0]-m.boxStart[0],h=m.boxEnd[1]-m.boxStart[1];var S=(a[3]-a[1])/(a[2]-a[0]);Math.abs(d*S)>Math.abs(h)?(m.boxEnd[1]=m.boxStart[1]+Math.abs(d)*S*(h>=0?1:-1),m.boxEnd[1]<a[1]?(m.boxEnd[1]=a[1],m.boxEnd[0]=m.boxStart[0]+(a[1]-m.boxStart[1])/Math.abs(S)):m.boxEnd[1]>a[3]&&(m.boxEnd[1]=a[3],m.boxEnd[0]=m.boxStart[0]+(a[3]-m.boxStart[1])/Math.abs(S))):(m.boxEnd[0]=m.boxStart[0]+Math.abs(h)/S*(d>=0?1:-1),m.boxEnd[0]<a[0]?(m.boxEnd[0]=a[0],m.boxEnd[1]=m.boxStart[1]+(a[0]-m.boxStart[0])*Math.abs(S)):m.boxEnd[0]>a[2]&&(m.boxEnd[0]=a[2],m.boxEnd[1]=m.boxStart[1]+(a[2]-m.boxStart[0])*Math.abs(S)))}}else m.boxEnabled?(h=m.boxStart[1]!==m.boxEnd[1],(d=m.boxStart[0]!==m.boxEnd[0])||h?(d&&(M(0,m.boxStart[0],m.boxEnd[0]),t.xaxis.autorange=!1),h&&(M(1,m.boxStart[1],m.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),m.boxEnabled=!1,m.boxInited=!1):m.boxInited&&(m.boxInited=!1);break;case"pan":m.boxEnabled=!1,m.boxInited=!1,f?(m.panning||(m.dragStart[0]=u,m.dragStart[1]=s),Math.abs(m.dragStart[0]-u)<x&&(u=m.dragStart[0]),Math.abs(m.dragStart[1]-s)<x&&(s=m.dragStart[1]),h=(T-s)*(a[3]-a[1])/(n.viewBox[3]-n.viewBox[1]),a[0]+=d=(c-u)*(a[2]-a[0])/(n.viewBox[2]-n.viewBox[0]),a[2]+=d,a[1]+=h,a[3]+=h,t.setRanges(a),m.panning=!0,m.lastInputTime=Date.now(),l(),t.cameraChanged(),t.handleAnnotations()):m.panning&&(m.panning=!1,t.relayoutCallback())}m.lastPos[0]=u,m.lastPos[1]=s}return m.mouseListener=p(o,i),o.addEventListener("touchstart",function(f){var u=b(f.changedTouches[0],o);i(0,u[0],u[1]),i(1,u[0],u[1]),f.preventDefault()},!!e&&{passive:!1}),o.addEventListener("touchmove",function(f){f.preventDefault();var u=b(f.changedTouches[0],o);i(1,u[0],u[1]),f.preventDefault()},!!e&&{passive:!1}),o.addEventListener("touchend",function(f){i(0,m.lastPos[0],m.lastPos[1]),f.preventDefault()},!!e&&{passive:!1}),m.wheelListener=g(o,function(f,u){if(!t.scrollZoom)return!1;var s=t.calcDataBox(),d=n.viewBox,h=m.lastPos[0],a=m.lastPos[1],_=Math.exp(5*u/(d[3]-d[1])),c=h/(d[2]-d[0])*(s[2]-s[0])+s[0],T=a/(d[3]-d[1])*(s[3]-s[1])+s[1];return s[0]=(s[0]-c)*_+c,s[2]=(s[2]-c)*_+c,s[1]=(s[1]-T)*_+T,s[3]=(s[3]-T)*_+T,t.setRanges(s),m.lastInputTime=Date.now(),l(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),m}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(v,ae,ie){"use strict";var p=v("../cartesian/axes"),g=v("../../lib/str2rgbarray");function b(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var y=b.prototype,e=["xaxis","yaxis"];y.merge=function(r){var t,o,n,m,l,i,f,u,s,d,h;for(this.titleEnable=!1,this.backgroundColor=g(r.plot_bgcolor),d=0;d<2;++d){var a=(t=e[d]).charAt(0);for(n=(o=r[this.scene[t]._name]).title.text===this.scene.fullLayout._dfltTitle[a]?"":o.title.text,h=0;h<=2;h+=2)this.labelEnable[d+h]=!1,this.labels[d+h]=n,this.labelColor[d+h]=g(o.title.font.color),this.labelFont[d+h]=o.title.font.family,this.labelSize[d+h]=o.title.font.size,this.labelPad[d+h]=this.getLabelPad(t,o),this.tickEnable[d+h]=!1,this.tickColor[d+h]=g((o.tickfont||{}).color),this.tickAngle[d+h]="auto"===o.tickangle?0:Math.PI*-o.tickangle/180,this.tickPad[d+h]=this.getTickPad(o),this.tickMarkLength[d+h]=0,this.tickMarkWidth[d+h]=o.tickwidth||0,this.tickMarkColor[d+h]=g(o.tickcolor),this.borderLineEnable[d+h]=!1,this.borderLineColor[d+h]=g(o.linecolor),this.borderLineWidth[d+h]=o.linewidth||0;f=this.hasSharedAxis(o),l=this.hasAxisInDfltPos(t,o)&&!f,i=this.hasAxisInAltrPos(t,o)&&!f,m=o.mirror||!1,u=f?-1!==String(m).indexOf("all"):!!m,s=f?"allticks"===m:-1!==String(m).indexOf("ticks"),l?this.labelEnable[d]=!0:i&&(this.labelEnable[d+2]=!0),l?this.tickEnable[d]=o.showticklabels:i&&(this.tickEnable[d+2]=o.showticklabels),(l||u)&&(this.borderLineEnable[d]=o.showline),(i||u)&&(this.borderLineEnable[d+2]=o.showline),(l||s)&&(this.tickMarkLength[d]=this.getTickMarkLength(o)),(i||s)&&(this.tickMarkLength[d+2]=this.getTickMarkLength(o)),this.gridLineEnable[d]=o.showgrid,this.gridLineColor[d]=g(o.gridcolor),this.gridLineWidth[d]=o.gridwidth,this.zeroLineEnable[d]=o.zeroline,this.zeroLineColor[d]=g(o.zerolinecolor),this.zeroLineWidth[d]=o.zerolinewidth}},y.hasSharedAxis=function(r){var t=this.scene;return 0!==p.findSubplotsWithAxis(t.fullLayout._subplots.gl2d,r).indexOf(t.id)},y.hasAxisInDfltPos=function(r,t){var o=t.side;return"xaxis"===r?"bottom"===o:"yaxis"===r?"left"===o:void 0},y.hasAxisInAltrPos=function(r,t){var o=t.side;return"xaxis"===r?"top"===o:"yaxis"===r?"right"===o:void 0},y.getLabelPad=function(r,t){var o=t.title.font.size,n=t.showticklabels;return"xaxis"===r?"top"===t.side?o*(1.5+(n?1:0))-10:o*(1.5+(n?.5:0))-10:"yaxis"===r?"right"===t.side?10+o*(1.5+(n?1:.5)):10+o*(1.5+(n?.5:0)):void 0},y.getTickPad=function(r){return"outside"===r.ticks?10+r.ticklen:15},y.getTickMarkLength=function(r){if(!r.ticks)return 0;var t=r.ticklen;return"inside"===r.ticks?-t:t},ae.exports=function(r){return new b(r)}},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(v,ae,ie){"use strict";var p=v("../../plot_api/edit_types").overrideAll,g=v("./scene2d"),b=v("../layout_attributes"),y=v("../../constants/xmlns_namespaces"),e=v("../cartesian/constants"),r=v("../cartesian"),t=v("../../components/fx/layout_attributes"),o=v("../get_data").getSubplotData;ie.name="gl2d",ie.attr=["xaxis","yaxis"],ie.idRoot=["x","y"],ie.idRegex=e.idRegex,ie.attrRegex=e.attrRegex,ie.attributes=v("../cartesian/attributes"),ie.supplyLayoutDefaults=function(n,m,l){m._has("cartesian")||r.supplyLayoutDefaults(n,m,l)},ie.layoutAttrOverrides=p(r.layoutAttributes,"plot","from-root"),ie.baseLayoutAttrOverrides=p({plot_bgcolor:b.plot_bgcolor,hoverlabel:t.hoverlabel},"plot","nested"),ie.plot=function(n){for(var m=n._fullLayout,l=n._fullData,i=m._subplots.gl2d,f=0;f<i.length;f++){var u=i[f],s=m._plots[u],d=o(l,"gl2d",u),h=s._scene2d;void 0===h&&(h=new g({id:u,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio},m),s._scene2d=h),h.plot(d,n.calcdata,m,n.layout)}},ie.clean=function(n,m,l,i){for(var f=i._subplots.gl2d||[],u=0;u<f.length;u++){var s=f[u],d=i._plots[s];d._scene2d&&0===o(n,"gl2d",s).length&&(d._scene2d.destroy(),delete i._plots[s])}r.clean.apply(this,arguments)},ie.drawFramework=function(n){n._context.staticPlot||r.drawFramework(n)},ie.toSVG=function(n){for(var m=n._fullLayout,l=m._subplots.gl2d,i=0;i<l.length;i++){var f=m._plots[l[i]]._scene2d,u=f.toImage("png");m._glimages.append("svg:image").attr({xmlns:y.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),f.destroy()}},ie.updateFx=function(n){for(var m=n._fullLayout,l=m._subplots.gl2d,i=0;i<l.length;i++)m._plots[l[i]]._scene2d.updateFx(m.dragmode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(v,ae,ie){"use strict";var p,g,b=v("../../registry"),y=v("../../plots/cartesian/axes"),e=v("../../components/fx"),r=v("../../../stackgl_modules").gl_plot2d,t=v("../../../stackgl_modules").gl_spikes2d,o=v("../../../stackgl_modules").gl_select_box,n=v("webgl-context"),m=v("./convert"),l=v("./camera"),i=v("../../lib/show_no_webgl_msg"),f=v("../cartesian/constraints"),u=f.enforce,s=f.clean,d=v("../cartesian/autorange").doAutoRange,h=v("../../components/dragelement/helpers"),a=h.drawMode,_=h.selectMode,c=["xaxis","yaxis"],T=v("../cartesian/constants").SUBPLOT_PATTERN;function x(M,D){this.container=M.container,this.graphDiv=M.graphDiv,this.pixelRatio=M.plotGlPixelRatio||window.devicePixelRatio,this.id=M.id,this.staticPlot=!!M.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(D),this.makeFramework(),this.stopped||(this.glplotOptions=m(this),this.glplotOptions.merge(D),this.glplot=r(this.glplotOptions),this.camera=l(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=o(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ae.exports=x;var w=x.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(g||(p=document.createElement("canvas"),g=n({canvas:p,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=p,this.gl=g}else{var M=this.container.querySelector(".gl-canvas-focus"),D=n({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!D)return i(this),void(this.stopped=!0);this.canvas=M,this.gl=D}var C=this.canvas;C.style.width="100%",C.style.height="100%",C.style.position="absolute",C.style.top="0px",C.style.left="0px",C.style["pointer-events"]="none",this.updateSize(C);var P=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none";var L=this.mouseContainer=document.createElement("div");L.style.position="absolute",L.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(P),S.appendChild(L);var E=this;L.addEventListener("mouseout",function(){E.isMouseOver=!1,E.unhover()}),L.addEventListener("mouseover",function(){E.isMouseOver=!0})},w.toImage=function(M){M||(M="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(p),this.updateSize(this.canvas);var D=this.glplot.gl,C=D.drawingBufferWidth,P=D.drawingBufferHeight;D.clearColor(1,1,1,0),D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),D.bindFramebuffer(D.FRAMEBUFFER,null);var L=new Uint8Array(C*P*4);D.readPixels(0,0,C,P,D.RGBA,D.UNSIGNED_BYTE,L);for(var S=0,E=P-1;S<E;++S,--E)for(var N=0;N<C;++N)for(var z=0;z<4;++z){var q=L[4*(C*S+N)+z];L[4*(C*S+N)+z]=L[4*(C*E+N)+z],L[4*(C*E+N)+z]=q}var G=document.createElement("canvas");G.width=C,G.height=P;var K,ne=G.getContext("2d",{willReadFrequently:!0}),X=ne.createImageData(C,P);switch(X.data.set(L),ne.putImageData(X,0,0),M){case"jpeg":K=G.toDataURL("image/jpeg");break;case"webp":K=G.toDataURL("image/webp");break;default:K=G.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(p),K},w.updateSize=function(M){M||(M=this.canvas);var D=this.pixelRatio,C=this.fullLayout,L=C.height,S=0|Math.ceil(D*C.width),E=0|Math.ceil(D*L);return M.width===S&&M.height===E||(M.width=S,M.height=E),M},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var M=[y.calcTicks(this.xaxis),y.calcTicks(this.yaxis)],D=0;D<2;++D)for(var C=0;C<M[D].length;++C)M[D][C].text=M[D][C].text+"";return M},w.updateRefs=function(M){this.fullLayout=M;var D=this.id.match(T),P="yaxis"+D[2];this.xaxis=this.fullLayout["xaxis"+D[1]],this.yaxis=this.fullLayout[P]},w.relayoutCallback=function(){var M=this.graphDiv,D=this.xaxis,C=this.yaxis,P=M.layout,L={},S=L[D._name+".range"]=D.range.slice(),E=L[C._name+".range"]=C.range.slice();L[D._name+".autorange"]=D.autorange,L[C._name+".autorange"]=C.autorange,b.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,L);var N=P[D._name];N.range=S,N.autorange=D.autorange;var z=P[C._name];z.range=E,z.autorange=C.autorange,L.lastInputTime=this.camera.lastInputTime,M.emit("plotly_relayout",L)},w.cameraChanged=function(){var M=this.camera;this.glplot.setDataBox(this.calcDataBox());var D=this.computeTickMarks();(function(C,P){for(var L=0;L<2;++L){var S=C[L],E=P[L];if(S.length!==E.length)return!0;for(var N=0;N<S.length;++N)if(S[N].x!==E[N].x)return!0}return!1})(D,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=D,this.glplotOptions.dataBox=M.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var M=this.graphDiv,D=this.fullLayout.annotations,C=0;C<D.length;C++){var P=D[C];P.xref===this.xaxis._id&&P.yref===this.yaxis._id&&b.getComponentMethod("annotations","drawOne")(M,C)}},w.destroy=function(){if(this.glplot){var M=this.traces;M&&Object.keys(M).map(function(D){M[D].dispose(),delete M[D]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(M,D,C){var P=this.glplot;this.updateRefs(C),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(M,D),this.updateFx(C.dragmode);var L=C.width,S=C.height;this.updateSize(this.canvas);var E=this.glplotOptions;E.merge(C),E.screenBox=[0,0,L,S];var N={_fullLayout:{_axisConstraintGroups:C._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:C._size}};s(N,this.xaxis),s(N,this.yaxis);var z,q,G=C._size,K=this.xaxis.domain,ne=this.yaxis.domain;for(E.viewBox=[G.l+K[0]*G.w,G.b+ne[0]*G.h,L-G.r-(1-K[1])*G.w,S-G.t-(1-ne[1])*G.h],this.mouseContainer.style.width=G.w*(K[1]-K[0])+"px",this.mouseContainer.style.height=G.h*(ne[1]-ne[0])+"px",this.mouseContainer.height=G.h*(ne[1]-ne[0]),this.mouseContainer.style.left=G.l+K[0]*G.w+"px",this.mouseContainer.style.top=G.t+(1-ne[1])*G.h+"px",q=0;q<2;++q)(z=this[c[q]])._length=E.viewBox[q+2]-E.viewBox[q],d(this.graphDiv,z),z.setScale();u(N),E.ticks=this.computeTickMarks(),E.dataBox=this.calcDataBox(),E.merge(C),P.update(E),this.glplot.draw()},w.calcDataBox=function(){var M=this.xaxis,D=this.yaxis,C=M.range,P=D.range,L=M.r2l,S=D.r2l;return[L(C[0]),S(P[0]),L(C[1]),S(P[1])]},w.setRanges=function(M){var D=this.xaxis,C=this.yaxis,P=D.l2r,L=C.l2r;D.range=[P(M[0]),P(M[2])],C.range=[L(M[1]),L(M[3])]},w.updateTraces=function(M,D){var C,P,L,S=Object.keys(this.traces);this.fullData=M;e:for(C=0;C<S.length;C++){var E=S[C],N=this.traces[E];for(P=0;P<M.length;P++)if((L=M[P]).uid===E&&L.type===N.type)continue e;N.dispose(),delete this.traces[E]}for(C=0;C<M.length;C++){var z=D[C],q=this.traces[(L=M[C]).uid];q?q.update(L,z):(q=L._module.plot(this,L,z),this.traces[L.uid]=q)}this.glplot.objects.sort(function(G,K){return G._trace.index-K._trace.index})},w.updateFx=function(M){_(M)||a(M)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===M?"move":"zoom"===M?"crosshair":null},w.emitPointAction=function(M,D){for(var C,P=M.trace.uid,L=M.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===P&&(C=this.fullData[S]);var E={x:M.traceCoord[0],y:M.traceCoord[1],curveNumber:C.index,pointNumber:L,data:C._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,C,L),this.graphDiv.emit(D,{points:[E]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var M=this.glplot,D=this.camera,C=D.mouseListener,P=1===this.lastButtonState&&0===C.buttons,L=this.fullLayout;this.lastButtonState=C.buttons,this.cameraChanged();var S,E=C.x*M.pixelRatio,N=this.canvas.height-M.pixelRatio*C.y;if(D.boxEnabled&&"zoom"===L.dragmode){this.selectBox.enabled=!0;for(var z=this.selectBox.selectBox=[Math.min(D.boxStart[0],D.boxEnd[0]),Math.min(D.boxStart[1],D.boxEnd[1]),Math.max(D.boxStart[0],D.boxEnd[0]),Math.max(D.boxStart[1],D.boxEnd[1])],q=0;q<2;q++)D.boxStart[q]===D.boxEnd[q]&&(z[q]=M.dataBox[q],z[q+2]=M.dataBox[q+2]);M.setDirty()}else if(!D.panning&&this.isMouseOver){this.selectBox.enabled=!1;var G=L._size,X=(S=M.pick(E/M.pixelRatio+G.l+this.xaxis.domain[0]*G.w,N/M.pixelRatio-(G.t+(1-this.yaxis.domain[1])*G.h)))&&S.object._trace.handlePick(S);if(X&&P&&this.emitPointAction(X,"plotly_click"),S&&"skip"!==S.object._trace.hoverinfo&&L.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var J=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),J.screenCoord=[((M.viewBox[2]-M.viewBox[0])*(S.dataCoord[0]-M.dataBox[0])/(M.dataBox[2]-M.dataBox[0])+M.viewBox[0])/M.pixelRatio,(this.canvas.height-(M.viewBox[3]-M.viewBox[1])*(S.dataCoord[1]-M.dataBox[1])/(M.dataBox[3]-M.dataBox[1])-M.viewBox[1])/M.pixelRatio],this.emitPointAction(X,"plotly_hover");var se=this.fullData[J.trace.index]||{},V=J.pointIndex,j=e.castHoverinfo(se,L,V);if(j&&"all"!==j){var H=j.split("+");-1===H.indexOf("x")&&(J.traceCoord[0]=void 0),-1===H.indexOf("y")&&(J.traceCoord[1]=void 0),-1===H.indexOf("z")&&(J.traceCoord[2]=void 0),-1===H.indexOf("text")&&(J.textLabel=void 0),-1===H.indexOf("name")&&(J.name=void 0)}e.loneHover({x:J.screenCoord[0],y:J.screenCoord[1],xLabel:this.hoverFormatter("xaxis",J.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",J.traceCoord[1]),zLabel:J.traceCoord[2],text:J.textLabel,name:J.name,color:e.castHoverOption(se,V,"bgcolor")||J.color,borderColor:e.castHoverOption(se,V,"bordercolor"),fontFamily:e.castHoverOption(se,V,"font.family"),fontSize:e.castHoverOption(se,V,"font.size"),fontColor:e.castHoverOption(se,V,"font.color"),nameLength:e.castHoverOption(se,V,"namelength"),textAlign:e.castHoverOption(se,V,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),M.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},w.hoverFormatter=function(M,D){if(void 0!==D){var C=this[M];return y.tickText(C,C.c2l(D),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(v,ae,ie){"use strict";var p=v("../../plot_api/edit_types").overrideAll,g=v("../../components/fx/layout_attributes"),b=v("./scene"),y=v("../get_data").getSubplotData,e=v("../../lib"),r=v("../../constants/xmlns_namespaces");ie.name="gl3d",ie.attr="scene",ie.idRoot="scene",ie.idRegex=ie.attrRegex=e.counterRegex("scene"),ie.attributes=v("./layout/attributes"),ie.layoutAttributes=v("./layout/layout_attributes"),ie.baseLayoutAttrOverrides=p({hoverlabel:g.hoverlabel},"plot","nested"),ie.supplyLayoutDefaults=v("./layout/defaults"),ie.plot=function(t){for(var o=t._fullLayout,n=t._fullData,m=o._subplots.gl3d,l=0;l<m.length;l++){var i=m[l],f=y(n,"gl3d",i),u=o[i],s=u.camera,d=u._scene;d||(d=new b({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:s},o),u._scene=d),d.viewInitial||(d.viewInitial={up:{x:s.up.x,y:s.up.y,z:s.up.z},eye:{x:s.eye.x,y:s.eye.y,z:s.eye.z},center:{x:s.center.x,y:s.center.y,z:s.center.z}}),d.plot(f,o,t.layout)}},ie.clean=function(t,o,n,m){for(var l=m._subplots.gl3d||[],i=0;i<l.length;i++){var f=l[i];!o[f]&&m[f]._scene&&(m[f]._scene.destroy(),m._infolayer&&m._infolayer.selectAll(".annotation-"+f).remove())}},ie.toSVG=function(t){for(var o=t._fullLayout,n=o._subplots.gl3d,m=o._size,l=0;l<n.length;l++){var i=o[n[l]],f=i.domain,u=i._scene,s=u.toImage("png");o._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":s,x:m.l+m.w*f.x[0],y:m.t+m.h*(1-f.y[1]),width:m.w*(f.x[1]-f.x[0]),height:m.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"}),u.destroy()}},ie.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var o=t.substr(5);return"1"===o&&(o=""),"scene"+o}},ie.updateFx=function(t){for(var o=t._fullLayout,n=o._subplots.gl3d,m=0;m<n.length;m++)o[n[m]]._scene.updateFx(o.dragmode,o.hovermode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(v,ae,ie){"use strict";ae.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(v,ae,ie){"use strict";var p=v("../../../components/color"),g=v("../../cartesian/layout_attributes"),b=v("../../../lib/extend").extendFlat,y=v("../../../plot_api/edit_types").overrideAll;ae.exports=y({visible:g.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:p.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:g.color,categoryorder:g.categoryorder,categoryarray:g.categoryarray,title:{text:g.title.text,font:g.title.font},type:b({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:g.autorange,rangemode:g.rangemode,range:b({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,mirror:g.mirror,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickformat:g.tickformat,tickformatstops:g.tickformatstops,hoverformat:g.hoverformat,showline:g.showline,linecolor:g.linecolor,linewidth:g.linewidth,showgrid:g.showgrid,gridcolor:b({},g.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:g.gridwidth,zeroline:g.zeroline,zerolinecolor:g.zerolinecolor,zerolinewidth:g.zerolinewidth,_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(v,ae,ie){"use strict";var p=v("tinycolor2").mix,g=v("../../../lib"),b=v("../../../plot_api/plot_template"),y=v("./axis_attributes"),e=v("../../cartesian/type_defaults"),r=v("../../cartesian/axis_defaults"),t=["xaxis","yaxis","zaxis"];ae.exports=function(o,n,m){var l,i;function f(d,h){return g.coerce(l,i,y,d,h)}for(var u=0;u<t.length;u++){var s=t[u];l=o[s]||{},(i=b.newContainer(n,s))._id=s[0]+m.scene,i._name=s,e(l,i,f,m),r(l,i,f,{font:m.font,letter:s[0],data:m.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:m.bgColor,calendar:m.calendar},m.fullLayout),f("gridcolor",p(i.color,m.bgColor,13600/187).toRgbString()),f("title.text",s[0]),i.setScale=g.noop,f("showspikes")&&(f("spikesides"),f("spikethickness"),f("spikecolor",i.color)),f("showaxeslabels"),f("showbackground")&&f("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(v,ae,ie){"use strict";var p=v("../../../lib/str2rgbarray"),g=v("../../../lib"),b=["xaxis","yaxis","zaxis"];function y(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}y.prototype.merge=function(e,r){for(var t=0;t<3;++t){var o=r[b[t]];o.visible?(this.labels[t]=e._meta?g.templateString(o.title.text,e._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(this.labelColor[t]=p(o.title.font.color)),o.title.font.family&&(this.labelFont[t]=o.title.font.family),o.title.font.size&&(this.labelSize[t]=o.title.font.size)),"showline"in o&&(this.lineEnable[t]=o.showline),"linecolor"in o&&(this.lineColor[t]=p(o.linecolor)),"linewidth"in o&&(this.lineWidth[t]=o.linewidth),"showgrid"in o&&(this.gridEnable[t]=o.showgrid),"gridcolor"in o&&(this.gridColor[t]=p(o.gridcolor)),"gridwidth"in o&&(this.gridWidth[t]=o.gridwidth),"log"===o.type?this.zeroEnable[t]=!1:"zeroline"in o&&(this.zeroEnable[t]=o.zeroline),"zerolinecolor"in o&&(this.zeroLineColor[t]=p(o.zerolinecolor)),"zerolinewidth"in o&&(this.zeroLineWidth[t]=o.zerolinewidth),this.lineTickEnable[t]=!(!("ticks"in o)||!o.ticks),"ticklen"in o&&(this.lineTickLength[t]=this._defaultLineTickLength[t]=o.ticklen),"tickcolor"in o&&(this.lineTickColor[t]=p(o.tickcolor)),"tickwidth"in o&&(this.lineTickWidth[t]=o.tickwidth),"tickangle"in o&&(this.tickAngle[t]="auto"===o.tickangle?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(this.tickEnable[t]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(this.tickColor[t]=p(o.tickfont.color)),o.tickfont.family&&(this.tickFont[t]=o.tickfont.family),o.tickfont.size&&(this.tickSize[t]=o.tickfont.size)),"mirror"in o?-1!==["ticks","all","allticks"].indexOf(o.mirror)?(this.lineTickMirror[t]=!0,this.lineMirror[t]=!0):!0===o.mirror?(this.lineTickMirror[t]=!1,this.lineMirror[t]=!0):(this.lineTickMirror[t]=!1,this.lineMirror[t]=!1):this.lineMirror[t]=!1,"showbackground"in o&&!1!==o.showbackground?(this.backgroundEnable[t]=!0,this.backgroundColor[t]=p(o.backgroundcolor)):this.backgroundEnable[t]=!1):(this.tickEnable[t]=!1,this.labelEnable[t]=!1,this.lineEnable[t]=!1,this.lineTickEnable[t]=!1,this.gridEnable[t]=!1,this.zeroEnable[t]=!1,this.backgroundEnable[t]=!1)}},ae.exports=function(e,r){var t=new y;return t.merge(e,r),t}},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(v,ae,ie){"use strict";var p=v("../../../lib"),g=v("../../../components/color"),b=v("../../../registry"),y=v("../../subplot_defaults"),e=v("./axis_defaults"),r=v("./layout_attributes"),t=v("../../get_data").getSubplotData;function o(n,m,l,i){for(var f=l("bgcolor"),u=g.combine(f,i.paper_bgcolor),s=["up","center","eye"],d=0;d<s.length;d++)l("camera."+s[d]+".x"),l("camera."+s[d]+".y"),l("camera."+s[d]+".z");l("camera.projection.type");var h=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),a=l("aspectmode",h?"manual":"auto");h||(n.aspectratio=m.aspectratio={x:1,y:1,z:1},"manual"===a&&(m.aspectmode="auto"),n.aspectmode=m.aspectmode);var _=t(i.fullData,"gl3d",i.id);e(n,m,{font:i.font,scene:i.id,data:_,bgColor:u,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(n,m,i);var c=i.getDfltFromLayout("dragmode");if(!1!==c&&!c)if(c="orbit",n.camera&&n.camera.up){var T=n.camera.up.x,x=n.camera.up.y,w=n.camera.up.z;0!==w&&(T&&x&&w?w/Math.sqrt(T*T+x*x+w*w)>.999&&(c="turntable"):c="turntable")}else c="turntable";l("dragmode",c),l("hovermode",i.getDfltFromLayout("hovermode"))}ae.exports=function(n,m,l){var i=m._basePlotModules.length>1;y(n,m,l,{type:"gl3d",attributes:r,handleDefaults:o,fullLayout:m,font:m.font,fullData:l,getDfltFromLayout:function(f){if(!i)return p.validate(n[f],r[f])?n[f]:void 0},autotypenumbersDflt:m.autotypenumbers,paper_bgcolor:m.paper_bgcolor,calendar:m.calendar})}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(v,ae,ie){"use strict";var p=v("./axis_attributes"),g=v("../../domain").attributes,b=v("../../../lib/extend").extendFlat,y=v("../../../lib").counterRegex;function e(r,t,o){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:o,editType:"camera"},editType:"camera"}}ae.exports={_arrayAttrRegexps:[y("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(e(0,0,1),{}),center:b(e(0,0,0),{}),eye:b(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:g({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:p,yaxis:p,zaxis:p,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(v,ae,ie){"use strict";var p=v("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}b.prototype.merge=function(y){for(var e=0;e<3;++e){var r=y[g[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=p(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},ae.exports=function(y){var e=new b;return e.merge(y),e}},{"../../../lib/str2rgbarray":540}],615:[function(v,ae,ie){"use strict";ae.exports=function(e){for(var r=e.axesOptions,t=e.glplot.axesPixels,o=e.fullSceneLayout,n=[[],[],[]],m=0;m<3;++m){var l=o[b[m]];if(l._length=(t[m].hi-t[m].lo)*t[m].pixelsPerDataUnit/e.dataScale[m],Math.abs(l._length)===1/0||isNaN(l._length))n[m]=[];else{l._input_range=l.range.slice(),l.range[0]=t[m].lo/e.dataScale[m],l.range[1]=t[m].hi/e.dataScale[m],l._m=1/(e.dataScale[m]*t[m].pixelsPerDataUnit),l.range[0]===l.range[1]&&(l.range[0]-=1,l.range[1]+=1);var i=l.tickmode;if("auto"===l.tickmode){l.tickmode="linear";var f=l.nticks||g.constrain(l._length/40,4,9);p.autoTicks(l,Math.abs(l.range[1]-l.range[0])/f)}for(var u=p.calcTicks(l,{msUTC:!0}),s=0;s<u.length;++s)u[s].x=u[s].x*e.dataScale[m],"date"===l.type&&(u[s].text=u[s].text.replace(/\<br\>/g," "));n[m]=u,l.tickmode=i}}for(r.ticks=n,m=0;m<3;++m)for(y[m]=.5*(e.glplot.bounds[0][m]+e.glplot.bounds[1][m]),s=0;s<2;++s)r.bounds[s][m]=e.glplot.bounds[s][m];e.contourLevels=function(d){for(var h=new Array(3),a=0;a<3;++a){for(var _=d[a],c=new Array(_.length),T=0;T<_.length;++T)c[T]=_[T].x;h[a]=c}return h}(n)};var p=v("../../cartesian/axes"),g=v("../../../lib"),b=["xaxis","yaxis","zaxis"],y=[0,0,0]},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(v,ae,ie){"use strict";function p(g,b){var y,e,r=[0,0,0,0];for(y=0;y<4;++y)for(e=0;e<4;++e)r[e]+=g[4*y+e]*b[y];return r}ae.exports=function(g,b){return p(g.projection,p(g.view,p(g.model,[b[0],b[1],b[2],1])))}},{}],617:[function(v,ae,ie){"use strict";var p,g,b=v("../../../stackgl_modules").gl_plot3d,y=b.createCamera,e=b.createScene,r=v("webgl-context"),t=v("has-passive-events"),o=v("../../registry"),n=v("../../lib"),m=n.preserveDrawingBuffer(),l=v("../../plots/cartesian/axes"),i=v("../../components/fx"),f=v("../../lib/str2rgbarray"),u=v("../../lib/show_no_webgl_msg"),s=v("./project"),d=v("./layout/convert"),h=v("./layout/spikes"),a=v("./layout/tick_marks");function _(M,D){var C=document.createElement("div"),P=M.container;this.graphDiv=M.graphDiv;var L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.style.position="absolute",L.style.top=L.style.left="0px",L.style.width=L.style.height="100%",L.style["z-index"]=20,L.style["pointer-events"]="none",C.appendChild(L),this.svgContainer=L,C.id=M.id,C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",P.appendChild(C),this.fullLayout=D,this.id=M.id||"scene",this.fullSceneLayout=D[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(D,D[this.id]),this.spikeOptions=h(D[this.id]),this.container=C,this.staticMode=!!M.staticPlot,this.pixelRatio=this.pixelRatio||M.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=o.getComponentMethod("annotations3d","convert"),this.drawAnnotations=o.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var c=_.prototype;c.prepareOptions=function(){var M={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:m,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(g||(p=document.createElement("canvas"),g=r({canvas:p,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");M.gl=g,M.canvas=p}return M};var T=!0;c.tryCreatePlot=function(){var M=this.prepareOptions(),D=!0;try{this.glplot=e(M)}catch{if(this.staticMode||!T||m)D=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{m=M.glOptions.preserveDrawingBuffer=!0,this.glplot=e(M)}catch{m=M.glOptions.preserveDrawingBuffer=!1,D=!1}}}return T=!1,D},c.initializeGLCamera=function(){var M=this.fullSceneLayout.camera;this.camera=y(this.container,{center:[M.center.x,M.center.y,M.center.z],eye:[M.eye.x,M.eye.y,M.eye.z],up:[M.up.x,M.up.y,M.up.z],_ortho:"orthographic"===M.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},c.initializeGLPlot=function(){var M=this;if(M.initializeGLCamera(),!M.tryCreatePlot())return u(M);M.traces={},M.make4thDimension();var D=M.graphDiv,C=D.layout,P=function(){var S={};return M.isCameraChanged(C)&&(S[M.id+".camera"]=M.getCamera()),M.isAspectChanged(C)&&(S[M.id+".aspectratio"]=M.glplot.getAspectratio(),"manual"!==C[M.id].aspectmode&&(M.fullSceneLayout.aspectmode=C[M.id].aspectmode=S[M.id+".aspectmode"]="manual")),S},L=function(S){if(!1!==S.fullSceneLayout.dragmode){var E=P();S.saveLayout(C),S.graphDiv.emit("plotly_relayout",E)}};return M.glplot.canvas&&(M.glplot.canvas.addEventListener("mouseup",function(){L(M)}),M.glplot.canvas.addEventListener("wheel",function(S){if(D._context._scrollZoom.gl3d){if(M.camera._ortho){var E=S.deltaX>S.deltaY?1.1:.9090909090909091,N=M.glplot.getAspectratio();M.glplot.setAspectratio({x:E*N.x,y:E*N.y,z:E*N.z})}L(M)}},!!t&&{passive:!1}),M.glplot.canvas.addEventListener("mousemove",function(){if(!1!==M.fullSceneLayout.dragmode&&0!==M.camera.mouseListener.buttons){var S=P();M.graphDiv.emit("plotly_relayouting",S)}}),M.staticMode||M.glplot.canvas.addEventListener("webglcontextlost",function(S){D&&D.emit&&D.emit("plotly_webglcontextlost",{event:S,layer:M.id})},!1)),M.glplot.oncontextloss=function(){M.recoverContext()},M.glplot.onrender=function(){M.render()},!0},c.render=function(){var M,D=this,C=D.graphDiv,P=D.svgContainer,L=D.container.getBoundingClientRect();C._fullLayout._calcInverseTransform(C);var N=L.width*C._fullLayout._invScaleX,z=L.height*C._fullLayout._invScaleY;P.setAttributeNS(null,"viewBox","0 0 "+N+" "+z),P.setAttributeNS(null,"width",N),P.setAttributeNS(null,"height",z),a(D),D.glplot.axes.update(D.axesOptions);for(var q=Object.keys(D.traces),G=null,K=D.glplot.selection,ne=0;ne<q.length;++ne)"skip"!==(M=D.traces[q[ne]]).data.hoverinfo&&M.handlePick(K)&&(G=M),M.setContourLevels&&M.setContourLevels();function X(de,be,he){var xe=D.fullSceneLayout[de+"axis"];return"log"!==xe.type&&(be=xe.d2l(be)),l.hoverLabelText(xe,be,he)}if(null!==G){var se,J=s(D.glplot.cameraParams,K.dataCoordinate),V=C._fullData[(M=G.data).index],j=K.index,H={xLabel:X("x",K.traceCoordinate[0],M.xhoverformat),yLabel:X("y",K.traceCoordinate[1],M.yhoverformat),zLabel:X("z",K.traceCoordinate[2],M.zhoverformat)},oe=i.castHoverinfo(V,D.fullLayout,j),U=(oe||"").split("+"),te=oe&&"all"===oe;V.hovertemplate||te||(-1===U.indexOf("x")&&(H.xLabel=void 0),-1===U.indexOf("y")&&(H.yLabel=void 0),-1===U.indexOf("z")&&(H.zLabel=void 0),-1===U.indexOf("text")&&(K.textLabel=void 0),-1===U.indexOf("name")&&(G.name=void 0));var ee=[];"cone"===M.type||"streamtube"===M.type?(H.uLabel=X("x",K.traceCoordinate[3],M.uhoverformat),(te||-1!==U.indexOf("u"))&&ee.push("u: "+H.uLabel),H.vLabel=X("y",K.traceCoordinate[4],M.vhoverformat),(te||-1!==U.indexOf("v"))&&ee.push("v: "+H.vLabel),H.wLabel=X("z",K.traceCoordinate[5],M.whoverformat),(te||-1!==U.indexOf("w"))&&ee.push("w: "+H.wLabel),H.normLabel=K.traceCoordinate[6].toPrecision(3),(te||-1!==U.indexOf("norm"))&&ee.push("norm: "+H.normLabel),"streamtube"===M.type&&(H.divergenceLabel=K.traceCoordinate[7].toPrecision(3),(te||-1!==U.indexOf("divergence"))&&ee.push("divergence: "+H.divergenceLabel)),K.textLabel&&ee.push(K.textLabel),se=ee.join("<br>")):"isosurface"===M.type||"volume"===M.type?(H.valueLabel=l.hoverLabelText(D._mockAxis,D._mockAxis.d2l(K.traceCoordinate[3]),M.valuehoverformat),ee.push("value: "+H.valueLabel),K.textLabel&&ee.push(K.textLabel),se=ee.join("<br>")):se=K.textLabel;var le={x:K.traceCoordinate[0],y:K.traceCoordinate[1],z:K.traceCoordinate[2],data:V._input,fullData:V,curveNumber:V.index,pointNumber:j};i.appendArrayPointValue(le,V,j),M._module.eventData&&(le=V._module.eventData(le,K,V,{},j));var ce={points:[le]};if(D.fullSceneLayout.hovermode){var pe=[];i.loneHover({trace:V,x:(.5+.5*J[0]/J[3])*N,y:(.5-.5*J[1]/J[3])*z,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:se,name:G.name,color:i.castHoverOption(V,j,"bgcolor")||G.color,borderColor:i.castHoverOption(V,j,"bordercolor"),fontFamily:i.castHoverOption(V,j,"font.family"),fontSize:i.castHoverOption(V,j,"font.size"),fontColor:i.castHoverOption(V,j,"font.color"),nameLength:i.castHoverOption(V,j,"namelength"),textAlign:i.castHoverOption(V,j,"align"),hovertemplate:n.castOption(V,j,"hovertemplate"),hovertemplateLabels:n.extendFlat({},le,H),eventData:[le]},{container:P,gd:C,inOut_bbox:pe}),le.bbox=pe[0]}C.emit(K.buttons&&K.distance<5?"plotly_click":"plotly_hover",ce),this.oldEventData=ce}else i.loneUnhover(P),this.oldEventData&&C.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;D.drawAnnotations(D)},c.recoverContext=function(){var M=this;M.glplot.dispose();var D=function(){M.glplot.gl.isContextLost()?requestAnimationFrame(D):M.initializeGLPlot()?M.plot.apply(M,M.plotArgs):n.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(D)};var x=["xaxis","yaxis","zaxis"];function w(M,D,C){for(var P=M.fullSceneLayout,L=0;L<3;L++){var S=x[L],E=S.charAt(0),N=P[S],z=D[E],q=D[E+"calendar"],G=D["_"+E+"length"];if(n.isArrayOrTypedArray(z))for(var K,ne=0;ne<(G||z.length);ne++)if(n.isArrayOrTypedArray(z[ne]))for(var X=0;X<z[ne].length;++X)K=N.d2l(z[ne][X],0,q),!isNaN(K)&&isFinite(K)&&(C[0][L]=Math.min(C[0][L],K),C[1][L]=Math.max(C[1][L],K));else K=N.d2l(z[ne],0,q),!isNaN(K)&&isFinite(K)&&(C[0][L]=Math.min(C[0][L],K),C[1][L]=Math.max(C[1][L],K));else C[0][L]=Math.min(C[0][L],0),C[1][L]=Math.max(C[1][L],G-1)}}c.plot=function(M,D,C){if(this.plotArgs=[M,D,C],!this.glplot.contextLost){var P,L,S,E,N,z,q=D[this.id],G=C[this.id];this.fullLayout=D,this.fullSceneLayout=q,this.axesOptions.merge(D,q),this.spikeOptions.merge(q),this.setViewport(q),this.updateFx(q.dragmode,q.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(f(q.bgcolor)),this.setConvert(N),M?Array.isArray(M)||(M=[M]):M=[];var K=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<M.length;++S)!0===(P=M[S]).visible&&0!==P._length&&w(this,P,K);!function(Le,Oe){for(var Ne=Le.fullSceneLayout,Be=Ne.annotations||[],He=0;He<3;He++)for(var Ve=x[He],it=Ve.charAt(0),ze=Ne[Ve],je=0;je<Be.length;je++){var qe=Be[je];if(qe.visible){var Ye=ze.r2l(qe[it]);!isNaN(Ye)&&isFinite(Ye)&&(Oe[0][He]=Math.min(Oe[0][He],Ye),Oe[1][He]=Math.max(Oe[1][He],Ye))}}}(this,K);var ne=[1,1,1];for(E=0;E<3;++E)ne[E]=K[1][E]===K[0][E]?1:1/(K[1][E]-K[0][E]);for(this.dataScale=ne,this.convertAnnotations(this),S=0;S<M.length;++S)!0===(P=M[S]).visible&&0!==P._length&&((L=this.traces[P.uid])?L.data.type===P.type?L.update(P):(L.dispose(),L=P._module.plot(this,P),this.traces[P.uid]=L):(L=P._module.plot(this,P),this.traces[P.uid]=L),L.name=P.name);var X=Object.keys(this.traces);e:for(S=0;S<X.length;++S){for(E=0;E<M.length;++E)if(M[E].uid===X[S]&&!0===M[E].visible&&0!==M[E]._length)continue e;(L=this.traces[X[S]]).dispose(),delete this.traces[X[S]]}this.glplot.objects.sort(function(Le,Oe){return Le._trace.data.index-Oe._trace.data.index});var J,se=[[0,0,0],[0,0,0]],V=[],j={};for(S=0;S<3;++S){if((z=(N=q[x[S]]).type)in j?(j[z].acc*=ne[S],j[z].count+=1):j[z]={acc:ne[S],count:1},N.autorange){se[0][S]=1/0,se[1][S]=-1/0;var H=this.glplot.objects,oe=this.fullSceneLayout.annotations||[],U=N._name.charAt(0);for(E=0;E<H.length;E++){var te=H[E],ee=te.bounds,le=te._trace.data._pad||0;se[0][S]="ErrorBars"===te.constructor.name&&N._lowerLogErrorBound?Math.min(se[0][S],N._lowerLogErrorBound):Math.min(se[0][S],ee[0][S]/ne[S]-le),se[1][S]=Math.max(se[1][S],ee[1][S]/ne[S]+le)}for(E=0;E<oe.length;E++){var ce=oe[E];if(ce.visible){var pe=N.r2l(ce[U]);se[0][S]=Math.min(se[0][S],pe),se[1][S]=Math.max(se[1][S],pe)}}if("rangemode"in N&&"tozero"===N.rangemode&&(se[0][S]=Math.min(se[0][S],0),se[1][S]=Math.max(se[1][S],0)),se[0][S]>se[1][S])se[0][S]=-1,se[1][S]=1;else{var de=se[1][S]-se[0][S];se[0][S]-=de/32,se[1][S]+=de/32}if("reversed"===N.autorange){var be=se[0][S];se[0][S]=se[1][S],se[1][S]=be}}else{var he=N.range;se[0][S]=N.r2l(he[0]),se[1][S]=N.r2l(he[1])}se[0][S]===se[1][S]&&(se[0][S]-=1,se[1][S]+=1),V[S]=se[1][S]-se[0][S],this.glplot.setBounds(S,{min:se[0][S]*ne[S],max:se[1][S]*ne[S]})}var xe=q.aspectmode;if("cube"===xe)J=[1,1,1];else if("manual"===xe){var De=q.aspectratio;J=[De.x,De.y,De.z]}else{if("auto"!==xe&&"data"!==xe)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Se=[1,1,1];for(S=0;S<3;++S){var ke=j[z=(N=q[x[S]]).type];Se[S]=Math.pow(ke.acc,1/ke.count)/ne[S]}J="data"===xe||Math.max.apply(null,Se)/Math.min.apply(null,Se)<=4?Se:[1,1,1]}q.aspectratio.x=G.aspectratio.x=J[0],q.aspectratio.y=G.aspectratio.y=J[1],q.aspectratio.z=G.aspectratio.z=J[2],this.glplot.setAspectratio(q.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:q.aspectratio.x,y:q.aspectratio.y,z:q.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=q.aspectmode);var Fe=q.domain||null,ve=D._size||null;if(Fe&&ve){var Te=this.container.style;Te.position="absolute",Te.left=ve.l+Fe.x[0]*ve.w+"px",Te.top=ve.t+(1-Fe.y[1])*ve.h+"px",Te.width=ve.w*(Fe.x[1]-Fe.x[0])+"px",Te.height=ve.h*(Fe.y[1]-Fe.y[0])+"px"}this.glplot.redraw()}},c.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},c.getCamera=function(){var M;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(M=this.camera).up[0],y:M.up[1],z:M.up[2]},center:{x:M.center[0],y:M.center[1],z:M.center[2]},eye:{x:M.eye[0],y:M.eye[1],z:M.eye[2]},projection:{type:!0===M._ortho?"orthographic":"perspective"}}},c.setViewport=function(M){var D,C=M.camera;this.camera.lookAt.apply(this,[[(D=C).eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]),this.glplot.setAspectratio(M.aspectratio),"orthographic"===C.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},c.isCameraChanged=function(M){var D=this.getCamera(),C=n.nestedProperty(M,this.id+".camera").get();var N,z,q,G,K,ne,L=!1;if(void 0===C)L=!0;else{for(var S=0;S<3;S++)for(var E=0;E<3;E++)if(N=D,G=E,K=void 0,ne=void 0,ne=["x","y","z"],!(z=C)[(K=["up","center","eye"])[q=S]]||N[K[q]][ne[G]]!==z[K[q]][ne[G]]){L=!0;break}(!C.projection||D.projection&&D.projection.type!==C.projection.type)&&(L=!0)}return L},c.isAspectChanged=function(M){var D=this.glplot.getAspectratio(),C=n.nestedProperty(M,this.id+".aspectratio").get();return void 0===C||C.x!==D.x||C.y!==D.y||C.z!==D.z},c.saveLayout=function(M){var D,C,P,L,S,E,N=this.fullLayout,z=this.isCameraChanged(M),q=this.isAspectChanged(M),G=z||q;if(G){var K={};z&&(D=this.getCamera(),P=(C=n.nestedProperty(M,this.id+".camera")).get(),K[this.id+".camera"]=P),q&&(L=this.glplot.getAspectratio(),E=(S=n.nestedProperty(M,this.id+".aspectratio")).get(),K[this.id+".aspectratio"]=E),o.call("_storeDirectGUIEdit",M,N._preGUI,K),z&&(C.set(D),n.nestedProperty(N,this.id+".camera").set(D)),q&&(S.set(L),n.nestedProperty(N,this.id+".aspectratio").set(L),this.glplot.redraw())}return G},c.updateFx=function(M,D){var C=this.camera;if(C)if("orbit"===M)C.mode="orbit",C.keyBindingMode="rotate";else if("turntable"===M){C.up=[0,0,1],C.mode="turntable",C.keyBindingMode="rotate";var P=this.graphDiv,L=P._fullLayout,S=this.fullSceneLayout.camera,E=S.up.x,N=S.up.y,z=S.up.z;if(z/Math.sqrt(E*E+N*N+z*z)<.999){var q=this.id+".camera.up",G={x:0,y:0,z:1},K={};K[q]=G;var ne=P.layout;o.call("_storeDirectGUIEdit",ne,L._preGUI,K),S.up=G,n.nestedProperty(ne,q).set(G)}}else C.keyBindingMode=M;this.fullSceneLayout.hovermode=D},c.toImage=function(M){M||(M="png"),this.staticMode&&this.container.appendChild(p),this.glplot.redraw();var D=this.glplot.gl,C=D.drawingBufferWidth,P=D.drawingBufferHeight;D.bindFramebuffer(D.FRAMEBUFFER,null);var L=new Uint8Array(C*P*4);D.readPixels(0,0,C,P,D.RGBA,D.UNSIGNED_BYTE,L),function(q,G,K){for(var ne=0,X=K-1;ne<X;++ne,--X)for(var J=0;J<G;++J)for(var se=0;se<4;++se){var V=4*(G*ne+J)+se,j=4*(G*X+J)+se,H=q[V];q[V]=q[j],q[j]=H}}(L,C,P),function(q,G,K){for(var ne=0;ne<K;++ne)for(var X=0;X<G;++X){var J=4*(G*ne+X),se=q[J+3];if(se>0)for(var V=255/se,j=0;j<3;++j)q[J+j]=Math.min(V*q[J+j],255)}}(L,C,P);var S=document.createElement("canvas");S.width=C,S.height=P;var E,N=S.getContext("2d",{willReadFrequently:!0}),z=N.createImageData(C,P);switch(z.data.set(L),N.putImageData(z,0,0),M){case"jpeg":E=S.toDataURL("image/jpeg");break;case"webp":E=S.toDataURL("image/webp");break;default:E=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(p),E},c.setConvert=function(){for(var M=0;M<3;M++){var D=this.fullSceneLayout[x[M]];l.setConvert(D,this.fullLayout),D.setScale=n.noop}},c.make4thDimension=function(){var M=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(this._mockAxis,M)},ae.exports=_},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y){y=y||p.length;for(var e=new Array(y),r=0;r<y;r++)e[r]=[p[r],g[r],b[r]];return e}},{}],619:[function(v,ae,ie){"use strict";var p=v("./font_attributes"),g=v("./animation_attributes"),b=v("../components/color/attributes"),y=v("../components/shapes/draw_newshape/attributes"),e=v("../components/selections/draw_newselection/attributes"),r=v("./pad_attributes"),t=v("../lib/extend").extendFlat,o=p({editType:"calc"});o.family.dflt='"Open Sans", verdana, arial, sans-serif',o.size.dflt=12,o.color.dflt=b.defaultLine,ae.exports={font:o,title:{text:{valType:"string",editType:"layoutstyle"},font:p({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:t(r({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:y.newshape,activeshape:y.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:t({},g.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:p({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(v,ae,ie){"use strict";var p=v("../../lib/sort_object_keys"),g='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',b=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',g].join(" "),y=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:g,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=p(e);ae.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":538}],621:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){var y=g.split(" "),e=y[0],r=y[1],t=p.isArrayOrTypedArray(b)?p.mean(b):b,o=.5+t/100,n=1.5+t/100,m=["",""],l=[0,0];switch(e){case"top":m[0]="top",l[1]=-n;break;case"bottom":m[0]="bottom",l[1]=n}switch(r){case"left":m[1]="right",l[0]=-o;break;case"right":m[1]="left",l[0]=o}return{anchor:m[0]&&m[1]?m.join("-"):m[0]?m[0]:m[1]?m[1]:"center",offset:l}}},{"../../lib":515}],622:[function(v,ae,ie){"use strict";var p=v("mapbox-gl/dist/mapbox-gl-unminified"),g=v("../../lib"),b=g.strTranslate,y=g.strScale,e=v("../../plots/get_data").getSubplotCalcData,r=v("../../constants/xmlns_namespaces"),t=v("@plotly/d3"),o=v("../../components/drawing"),n=v("../../lib/svg_text_utils"),m=v("./mapbox"),l=ie.constants=v("./constants");function i(f){return"string"==typeof f&&(-1!==l.styleValuesMapbox.indexOf(f)||0===f.indexOf("mapbox://"))}ie.name="mapbox",ie.attr="subplot",ie.idRoot="mapbox",ie.idRegex=ie.attrRegex=g.counterRegex("mapbox"),ie.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ie.layoutAttributes=v("./layout_attributes"),ie.supplyLayoutDefaults=v("./layout_defaults"),ie.plot=function(f){var u=f._fullLayout,s=f.calcdata,d=u._subplots.mapbox;if(p.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var h=function(w,M){var D=w._fullLayout;if(""===w._context.mapboxAccessToken)return"";for(var C=[],P=[],L=!1,S=!1,E=0;E<M.length;E++){var N=D[M[E]],z=N.accesstoken;i(N.style)&&(z?g.pushUnique(C,z):(i(N._input.style)&&(g.error("Uses Mapbox map style, but did not set an access token."),L=!0),S=!0)),z&&g.pushUnique(P,z)}if(S){var q=L?l.noAccessTokenErrorMsg:l.missingStyleErrorMsg;throw g.error(q),new Error(q)}return C.length?(C.length>1&&g.warn(l.multipleTokensErrorMsg),C[0]):(P.length&&g.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(f,d);p.accessToken=h;for(var a=0;a<d.length;a++){var _=d[a],c=e(s,"mapbox",_),T=u[_],x=T._subplot;x||(x=new m(f,_),u[_]._subplot=x),x.viewInitial||(x.viewInitial={center:g.extendFlat({},T.center),zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}),x.plot(c,u,f._promises)}},ie.clean=function(f,u,s,d){for(var h=d._subplots.mapbox||[],a=0;a<h.length;a++){var _=h[a];!u[_]&&d[_]._subplot&&d[_]._subplot.destroy()}},ie.toSVG=function(f){for(var u=f._fullLayout,s=u._subplots.mapbox,d=u._size,h=0;h<s.length;h++){var a=u[s[h]],_=a.domain,c=a._subplot.toImage("png");u._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":c,x:d.l+d.w*_.x[0],y:d.t+d.h*(1-_.y[1]),width:d.w*(_.x[1]-_.x[0]),height:d.h*(_.y[1]-_.y[0]),preserveAspectRatio:"none"});var T=t.select(a._subplot.div);if(null!==T.select(".mapboxgl-ctrl-logo").node().offsetParent){var x=u._glimages.append("g");x.attr("transform",b(d.l+d.w*_.x[0]+10,d.t+d.h*(1-_.y[0])-31)),x.append("path").attr("d",l.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),x.append("path").attr("d",l.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),x.append("path").attr("d",l.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),x.append("polygon").attr("points",l.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var w=T.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),M=u._glimages.append("g"),D=M.append("text");D.text(w).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":w});var C=o.bBox(D.node()),P=d.w*(_.x[1]-_.x[0]);if(C.width>P/2){var L=w.split("|").join("<br>");D.text(L).attr("data-unformatted",L).call(n.convertToTspans,f),C=o.bBox(D.node())}D.attr("transform",b(-3,8-C.height)),M.insert("rect",".static-attribution").attr({x:-C.width-6,y:-C.height-3,width:C.width+6,height:C.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;C.width+6>P&&(S=P/(C.width+6));var E=[d.l+d.w*_.x[1],d.t+d.h*(1-_.y[0])];M.attr("transform",b(E[0],E[1])+y(S))}},ie.updateFx=function(f){for(var u=f._fullLayout,s=u._subplots.mapbox,d=0;d<s.length;d++)u[s[d]]._subplot.updateFx(u)}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../lib/svg_text_utils").sanitizeHTML,b=v("./convert_text_opts"),y=v("./constants");function e(n,m){this.subplot=n,this.uid=n.uid+"-"+m,this.index=m,this.idSource="source-"+this.uid,this.idLayer=y.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var r=e.prototype;function t(n){if(!n.visible)return!1;var m=n.source;if(Array.isArray(m)&&m.length>0){for(var l=0;l<m.length;l++)if("string"!=typeof m[l]||0===m[l].length)return!1;return!0}return p.isPlainObject(m)||"string"==typeof m&&m.length>0}function o(n){var m={},l={};switch(n.type){case"circle":p.extendFlat(l,{"circle-radius":n.circle.radius,"circle-color":n.color,"circle-opacity":n.opacity});break;case"line":p.extendFlat(l,{"line-width":n.line.width,"line-color":n.color,"line-opacity":n.opacity,"line-dasharray":n.line.dash});break;case"fill":p.extendFlat(l,{"fill-color":n.color,"fill-outline-color":n.fill.outlinecolor,"fill-opacity":n.opacity});break;case"symbol":var i=n.symbol,f=b(i.textposition,i.iconsize);p.extendFlat(m,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":f.anchor,"text-offset":f.offset,"symbol-placement":i.placement}),p.extendFlat(l,{"icon-color":n.color,"text-color":i.textfont.color,"text-opacity":n.opacity});break;case"raster":p.extendFlat(l,{"raster-fade-duration":0,"raster-opacity":n.opacity})}return{layout:m,paint:l}}r.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=t(n)},r.needsNewImage=function(n){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===n.sourcetype&&(this.source!==n.source||JSON.stringify(this.coordinates)!==JSON.stringify(n.coordinates))},r.needsNewSource=function(n){return this.sourceType!==n.sourcetype||JSON.stringify(this.source)!==JSON.stringify(n.source)||this.layerType!==n.type},r.needsNewLayer=function(n){return this.layerType!==n.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},r.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},r.updateImage=function(n){this.subplot.map.getSource(this.idSource).updateImage({url:n.source,coordinates:n.coordinates});var m=this.findFollowingMapboxLayerId(this.lookupBelow());null!==m&&this.subplot.map.moveLayer(this.idLayer,m)},r.updateSource=function(n){var i,f,u,s,d,m=this.subplot.map;if(m.getSource(this.idSource)&&m.removeSource(this.idSource),this.sourceType=n.sourcetype,this.source=n.source,t(n)){var l=(s=(i=n).source,d={type:u=i.sourcetype},"geojson"===u?f="data":"vector"===u?f="string"==typeof s?"url":"tiles":"raster"===u?(f="tiles",d.tileSize=256):"image"===u&&(f="url",d.coordinates=i.coordinates),d[f]=s,i.sourceattribution&&(d.attribution=g(i.sourceattribution)),d);m.addSource(this.idSource,l)}},r.findFollowingMapboxLayerId=function(n){if("traces"===n)for(var m=this.subplot.getMapLayers(),l=0;l<m.length;l++){var i=m[l].id;if("string"==typeof i&&0===i.indexOf(y.traceLayerPrefix)){n=i;break}}return n},r.updateLayer=function(n){var m=this.subplot,l=o(n),i=this.lookupBelow(),f=this.findFollowingMapboxLayerId(i);this.removeLayer(),t(n)&&m.addLayer({id:this.idLayer,source:this.idSource,"source-layer":n.sourcelayer||"",type:n.type,minzoom:n.minzoom,maxzoom:n.maxzoom,layout:l.layout,paint:l.paint},f),this.layerType=n.type,this.below=i},r.updateStyle=function(n){if(t(n)){var m=o(n);this.subplot.setOptions(this.idLayer,"setLayoutProperty",m.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",m.paint)}},r.removeLayer=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer)},r.dispose=function(){var n=this.subplot.map;n.getLayer(this.idLayer)&&n.removeLayer(this.idLayer),n.getSource(this.idSource)&&n.removeSource(this.idSource)},ae.exports=function(n,m,l){var i=new e(n,m);return i.update(l),i}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color").defaultLine,b=v("../domain").attributes,y=v("../font_attributes"),e=v("../../traces/scatter/attributes").textposition,r=v("../../plot_api/edit_types").overrideAll,t=v("../../plot_api/plot_template").templatedArray,o=v("./constants"),n=y({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(ae.exports=r({_arrayAttrRegexps:[p.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:o.styleValuesMapbox.concat(o.styleValuesNonMapbox),dflt:o.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:t("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:g},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:g}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:p.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../subplot_defaults"),b=v("../array_container_defaults"),y=v("./layout_attributes");function e(t,o,n,m){n("accesstoken",m.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),b(t,o,{name:"layers",handleItemDefaults:r}),o._input=t}function r(t,o){function n(u,s){return p.coerce(t,o,y.layers,u,s)}if(n("visible")){var m,l=n("sourcetype"),i="raster"===l||"image"===l;n("source"),n("sourceattribution"),"vector"===l&&n("sourcelayer"),"image"===l&&n("coordinates"),i&&(m="raster");var f=n("type",m);i&&"raster"!==f&&(f=o.type="raster",p.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),"circle"===f&&n("circle.radius"),"line"===f&&(n("line.width"),n("line.dash")),"fill"===f&&n("fill.outlinecolor"),"symbol"===f&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),p.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}ae.exports=function(t,o,n){g(t,o,n,{type:"mapbox",attributes:y,handleDefaults:e,partition:"y",accessToken:o._mapboxAccessToken})}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(v,ae,ie){"use strict";var p=v("mapbox-gl/dist/mapbox-gl-unminified"),g=v("../../lib"),b=v("../../lib/geo_location_utils"),y=v("../../registry"),e=v("../cartesian/axes"),r=v("../../components/dragelement"),t=v("../../components/fx"),o=v("../../components/dragelement/helpers"),n=o.drawMode,m=o.selectMode,l=v("../../components/selections").prepSelect,i=v("../../components/selections").clearOutline,f=v("../../components/selections").clearSelectionsCache,u=v("../../components/selections").selectOnClick,s=v("./constants"),d=v("./layers");function h(w,M){this.id=M,this.gd=w;var D=w._fullLayout,C=w._context;this.container=D._glcontainer.node(),this.isStatic=C.staticPlot,this.uid=D._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(D),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var a=h.prototype;a.plot=function(w,M,D){var C,P=this;P.map&&M[P.id].accesstoken!==P.accessToken&&(P.map.remove(),P.map=null,P.styleObj=null,P.traceHash={},P.layerList=[]),C=new Promise(P.map?function(S,E){P.updateMap(w,M,S,E)}:function(S,E){P.createMap(w,M,S,E)}),D.push(C)},a.createMap=function(w,M,D,C){var P=this,L=M[P.id],S=P.styleObj=c(L.style);P.accessToken=L.accesstoken;var E=P.map=new p.Map({container:P.div,style:S.style,center:x(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,interactive:!P.isStatic,preserveDrawingBuffer:P.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new p.AttributionControl({compact:!0}));E._canvas.style.left="0px",E._canvas.style.top="0px",P.rejectOnError(C),P.isStatic||P.initFx(w,M);var N=[];N.push(new Promise(function(z){E.once("load",z)})),N=N.concat(b.fetchTraceGeoData(w)),Promise.all(N).then(function(){P.fillBelowLookup(w,M),P.updateData(w),P.updateLayout(M),P.resolveOnRender(D)}).catch(C)},a.updateMap=function(w,M,D,C){var P=this,L=P.map,S=M[this.id];P.rejectOnError(C);var E=[],N=c(S.style);JSON.stringify(P.styleObj)!==JSON.stringify(N)&&(P.styleObj=N,L.setStyle(N.style),P.traceHash={},E.push(new Promise(function(z){L.once("styledata",z)}))),E=E.concat(b.fetchTraceGeoData(w)),Promise.all(E).then(function(){P.fillBelowLookup(w,M),P.updateData(w),P.updateLayout(M),P.resolveOnRender(D)}).catch(C)},a.fillBelowLookup=function(w,M){var D,C,P=M[this.id].layers,L=this.belowLookup={},S=!1;for(D=0;D<w.length;D++){var E=w[D][0].trace,N=E._module;"string"==typeof E.below?C=E.below:N.getBelow&&(C=N.getBelow(E,this)),""===C&&(S=!0),L["trace-"+E.uid]=C||""}for(D=0;D<P.length;D++){var z=P[D];L["layout-"+D]=C="string"==typeof z.below?z.below:S?"traces":""}var q,G,K={};for(q in L)K[C=L[q]]?K[C].push(q):K[C]=[q];for(C in K){var ne=K[C];if(ne.length>1)for(D=0;D<ne.length;D++)0===(q=ne[D]).indexOf("trace-")?(G=q.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):0===q.indexOf("layout-")&&(G=q.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var _={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function c(w){var M={};return g.isPlainObject(w)?(M.id=w.id,M.style=w):"string"==typeof w?(M.id=w,M.style=-1!==s.styleValuesMapbox.indexOf(w)?T(w):s.stylesNonMapbox[w]?s.stylesNonMapbox[w]:w):(M.id=s.styleValueDflt,M.style=T(s.styleValueDflt)),M.transition={duration:0,delay:0},M}function T(w){return s.styleUrlPrefix+w+"-"+s.styleUrlSuffix}function x(w){return[w.lon,w.lat]}a.updateData=function(w){var M,D,C,P,L=this.traceHash,S=w.slice().sort(function(G,K){return _[G[0].trace.type]-_[K[0].trace.type]});for(C=0;C<S.length;C++){var E=S[C],N=!1;(M=L[(D=E[0].trace).uid])&&(M.type===D.type?(M.update(E),N=!0):M.dispose()),!N&&D._module&&(L[D.uid]=D._module.plot(this,E))}var z=Object.keys(L);e:for(C=0;C<z.length;C++){var q=z[C];for(P=0;P<w.length;P++)if(q===(D=w[P][0].trace).uid)continue e;(M=L[q]).dispose(),delete L[q]}},a.updateLayout=function(w){var M=this.map,D=w[this.id];this.dragging||this.wheeling||(M.setCenter(x(D.center)),M.setZoom(D.zoom),M.setBearing(D.bearing),M.setPitch(D.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?M.scrollZoom.enable():M.scrollZoom.disable()},a.resolveOnRender=function(w){var M=this.map;M.on("render",function D(){M.loaded()&&(M.off("render",D),setTimeout(w,10))})},a.rejectOnError=function(w){var M=this.map;function D(){w(new Error(s.mapOnErrorMsg))}M.once("error",D),M.once("style.error",D),M.once("source.error",D),M.once("tile.error",D),M.once("layer.error",D)},a.createFramework=function(w){var M=this,D=M.div=document.createElement("div");D.id=M.uid,D.style.position="absolute",M.container.appendChild(D),M.xaxis={_id:"x",c2p:function(C){return M.project(C).x}},M.yaxis={_id:"y",c2p:function(C){return M.project(C).y}},M.updateFramework(w),M.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(M.mockAxis,w)},a.initFx=function(w,M){var D=this,C=D.gd,P=D.map;function L(){t.loneUnhover(M._hoverlayer)}function S(){var E=D.getView();C.emit("plotly_relayouting",D.getViewEditsWithDerived(E))}P.on("moveend",function(E){if(D.map){var N=C._fullLayout;if(E.originalEvent||D.wheeling){var z=N[D.id];y.call("_storeDirectGUIEdit",C.layout,N._preGUI,D.getViewEdits(z));var q=D.getView();z._input.center=z.center=q.center,z._input.zoom=z.zoom=q.zoom,z._input.bearing=z.bearing=q.bearing,z._input.pitch=z.pitch=q.pitch,C.emit("plotly_relayout",D.getViewEditsWithDerived(q))}E.originalEvent&&"mouseup"===E.originalEvent.type?D.dragging=!1:D.wheeling&&(D.wheeling=!1),N._rehover&&N._rehover()}}),P.on("wheel",function(){D.wheeling=!0}),P.on("mousemove",function(E){var N=D.div.getBoundingClientRect(),z=[E.originalEvent.offsetX,E.originalEvent.offsetY];E.target.getBoundingClientRect=function(){return N},D.xaxis.p2c=function(){return P.unproject(z).lng},D.yaxis.p2c=function(){return P.unproject(z).lat},C._fullLayout._rehover=function(){C._fullLayout._hoversubplot===D.id&&C._fullLayout[D.id]&&t.hover(C,E,D.id)},t.hover(C,E,D.id),C._fullLayout._hoversubplot=D.id}),P.on("dragstart",function(){D.dragging=!0,L()}),P.on("zoomstart",L),P.on("mouseout",function(){C._fullLayout._hoversubplot=null}),P.on("drag",S),P.on("zoom",S),P.on("dblclick",function(){var E=C._fullLayout[D.id];y.call("_storeDirectGUIEdit",C.layout,C._fullLayout._preGUI,D.getViewEdits(E));var N=D.viewInitial;P.setCenter(x(N.center)),P.setZoom(N.zoom),P.setBearing(N.bearing),P.setPitch(N.pitch);var z=D.getView();E._input.center=E.center=z.center,E._input.zoom=E.zoom=z.zoom,E._input.bearing=E.bearing=z.bearing,E._input.pitch=E.pitch=z.pitch,C.emit("plotly_doubleclick",null),C.emit("plotly_relayout",D.getViewEditsWithDerived(z))}),D.clearOutline=function(){f(D.dragOptions),i(D.dragOptions.gd)},D.onClickInPanFn=function(E){return function(N){var z=C._fullLayout.clickmode;z.indexOf("select")>-1&&u(N.originalEvent,C,[D.xaxis],[D.yaxis],D.id,E),z.indexOf("event")>-1&&t.click(C,N.originalEvent)}}},a.updateFx=function(w){var M=this,D=M.map;if(!M.isStatic){var L=w.dragmode;M.dragOptions=g.extendDeep(M.dragOptions||{},{dragmode:w.dragmode,element:M.div,gd:M.gd,plotinfo:{id:M.id,domain:w[M.id].domain,xaxis:M.xaxis,yaxis:M.yaxis,fillRangeItems:function(N,z){z.isRect?(N.range={})[M.id]=[E([z.xmin,z.ymin]),E([z.xmax,z.ymax])]:(N.lassoPoints={})[M.id]=z.map(E)}},xaxes:[M.xaxis],yaxes:[M.yaxis],subplot:M.id}),D.off("click",M.onClickInPanHandler),m(L)||n(L)?(D.dragPan.disable(),D.on("zoomstart",M.clearSelect),M.dragOptions.prepFn=function(N,z,q){l(N,z,q,M.dragOptions,L)},r.init(M.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",M.clearSelect),M.div.onmousedown=null,M.onClickInPanHandler=M.onClickInPanFn(M.dragOptions),D.on("click",M.onClickInPanHandler))}function E(N){var z=M.map.unproject(N);return[z.lng,z.lat]}},a.updateFramework=function(w){var M=w[this.id].domain,D=w._size,C=this.div.style;C.width=D.w*(M.x[1]-M.x[0])+"px",C.height=D.h*(M.y[1]-M.y[0])+"px",C.left=D.l+M.x[0]*D.w+"px",C.top=D.t+(1-M.y[1])*D.h+"px",this.xaxis._offset=D.l+M.x[0]*D.w,this.xaxis._length=D.w*(M.x[1]-M.x[0]),this.yaxis._offset=D.t+(1-M.y[1])*D.h,this.yaxis._length=D.h*(M.y[1]-M.y[0])},a.updateLayers=function(w){var M,D=w[this.id].layers,C=this.layerList;if(D.length!==C.length){for(M=0;M<C.length;M++)C[M].dispose();for(C=this.layerList=[],M=0;M<D.length;M++)C.push(d(this,M,D[M]))}else for(M=0;M<D.length;M++)C[M].update(D[M])},a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},a.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},a.setOptions=function(w,M,D){for(var C in D)this.map[M](w,C,D[C])},a.getMapLayers=function(){return this.map.getStyle().layers},a.addLayer=function(w,M){var D=this.map;if("string"==typeof M){if(""===M)return void D.addLayer(w,M);for(var C=this.getMapLayers(),P=0;P<C.length;P++)if(M===C[P].id)return void D.addLayer(w,M);g.warn(["Trying to add layer with *below* value",M,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}D.addLayer(w)},a.project=function(w){return this.map.project(new p.LngLat(w[0],w[1]))},a.getView=function(){var w=this.map,M=w.getCenter(),D={lon:M.lng,lat:M.lat},C=w.getCanvas(),P=parseInt(C.style.width),L=parseInt(C.style.height);return{center:D,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([P,0]).toArray(),w.unproject([P,L]).toArray(),w.unproject([0,L]).toArray()]}}},a.getViewEdits=function(w){for(var M=this.id,D=["center","zoom","bearing","pitch"],C={},P=0;P<D.length;P++){var L=D[P];C[M+"."+L]=w[L]}return C},a.getViewEditsWithDerived=function(w){var M=this.id,D=this.getViewEdits(w);return D[M+"._derived"]=w._derived,D},ae.exports=h},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(v,ae,ie){"use strict";ae.exports=function(p){var g=p.editType;return{t:{valType:"number",dflt:0,editType:g},r:{valType:"number",dflt:0,editType:g},b:{valType:"number",dflt:0,editType:g},l:{valType:"number",dflt:0,editType:g},editType:g}}},{}],628:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-time-format").timeFormatLocale,b=v("d3-format").formatLocale,y=v("fast-isnumeric"),e=v("../registry"),r=v("../plot_api/plot_schema"),t=v("../plot_api/plot_template"),o=v("../lib"),n=v("../components/color"),m=v("../constants/numerical").BADNUM,l=v("./cartesian/axis_ids"),i=v("../components/shapes/handle_outline").clearOutline,f=v("./animation_attributes"),u=v("./frame_attributes"),s=v("../plots/get_data").getModuleCalcData,d=o.relinkPrivateKeys,h=o._,a=ae.exports={};o.extendFlat(a,e),a.attributes=v("./attributes"),a.attributes.type.values=a.allTypes,a.fontAttrs=v("./font_attributes"),a.layoutAttributes=v("./layout_attributes"),a.fontWeight="normal";var _=a.transformsRegistry,c=v("./command");a.executeAPICommand=c.executeAPICommand,a.computeAPICommandBindings=c.computeAPICommandBindings,a.manageCommandObserver=c.manageCommandObserver,a.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,a.redrawText=function(G){return G=o.getGraphDiv(G),new Promise(function(K){setTimeout(function(){G._fullLayout&&(e.getComponentMethod("annotations","draw")(G),e.getComponentMethod("legend","draw")(G),e.getComponentMethod("colorbar","draw")(G),K(a.previousPromises(G)))},300)})},a.resize=function(G){var K;G=o.getGraphDiv(G);var ne=new Promise(function(X,J){G&&!o.isHidden(G)||J(new Error("Resize must be passed a displayed plot div element.")),G._redrawTimer&&clearTimeout(G._redrawTimer),G._resolveResize&&(K=G._resolveResize),G._resolveResize=X,G._redrawTimer=setTimeout(function(){if(!G.layout||G.layout.width&&G.layout.height||o.isHidden(G))X(G);else{delete G.layout.width,delete G.layout.height;var se=G.changed;G.autoplay=!0,e.call("relayout",G,{autosize:!0}).then(function(){G.changed=se,G._resolveResize===X&&(delete G._resolveResize,X(G))})}},100)});return K&&K(ne),ne},a.previousPromises=function(G){if((G._promises||[]).length)return Promise.all(G._promises).then(function(){G._promises=[]})},a.addLinks=function(G){if(G._context.showLink||G._context.showSources){var K=G._fullLayout,ne=o.ensureSingle(K._paper,"text","js-plot-link-container",function(H){H.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var oe=p.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),X=ne.node(),J={y:K._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=K.width-20?(J["text-anchor"]="start",J.x=5):(J["text-anchor"]="end",J.x=K._paper.attr("width")-7),ne.attr(J);var se=ne.select(".js-link-to-tool"),V=ne.select(".js-link-spacer"),j=ne.select(".js-sourcelinks");G._context.showSources&&G._context.showSources(G),G._context.showLink&&function(H,oe){oe.text("");var U=oe.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(H._context.linkText+" "+String.fromCharCode(187));if(H._context.sendData)U.on("click",function(){a.sendDataToCloud(H)});else{var te=window.location.pathname.split("/"),ee=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+ee})}}(G,se),V.text(se.text()&&j.text()?" - ":"")}},a.sendDataToCloud=function(G){var K=(window.PLOTLYENV||{}).BASE_URL||G._context.plotlyServerURL;if(K){G.emit("plotly_beforeexport");var ne=p.select(G).append("div").attr("id","hiddenform").style("display","none"),X=ne.append("form").attr({action:K+"/external",method:"post",target:"_blank"});return X.append("input").attr({type:"text",name:"data"}).node().value=a.graphJson(G,!1,"keepdata"),X.node().submit(),ne.remove(),G.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],x=["year","month","dayMonth","dayMonthYear"];function w(G,K){var ne=G._context.locale;ne||(ne="en-US");var X=!1,J={};function se(te){for(var ee=!0,le=0;le<K.length;le++){var ce=K[le];J[ce]||(te[ce]?J[ce]=te[ce]:ee=!1)}ee&&(X=!0)}for(var V=0;V<2;V++){for(var j=G._context.locales,H=0;H<2;H++){var oe=(j[ne]||{}).format;if(oe&&(se(oe),X))break;j=e.localeRegistry}var U=ne.split("-")[0];if(X||U===ne)break;ne=U}return X||se(e.localeRegistry.en.format),J}function M(G,K){var ne={_fullLayout:K},X="x"===G._id.charAt(0),J=G._mainAxis._anchorAxis,se="",V="",j="";if(J&&(j=J._mainAxis._id,se=X?G._id+j:j+G._id),!se||!K._plots[se]){se="";for(var H=G._counterAxes,oe=0;oe<H.length;oe++){var U=H[oe],te=X?G._id+U:U+G._id;V||(V=te);var ee=l.getFromId(ne,U);if(j&&ee.overlaying===j){se=te;break}}}return se||V}function D(G){var K=G.transforms;if(Array.isArray(K)&&K.length)for(var ne=0;ne<K.length;ne++){var X=K[ne],J=X._module||_[X.type];if(J&&J.makesData)return!0}return!1}function C(G,K,ne,X){for(var J=G.transforms,se=[G],V=0;V<J.length;V++){var j=J[V],H=_[j.type];H&&H.transform&&(se=H.transform(se,{transform:j,fullTrace:G,fullData:K,layout:ne,fullLayout:X,transformIndex:V}))}return se}function P(G){return"string"==typeof G&&"px"===G.substr(G.length-2)&&parseFloat(G)}function L(G){var K=G.margin;if(!G._size){var ne=G._size={l:Math.round(K.l),r:Math.round(K.r),t:Math.round(K.t),b:Math.round(K.b),p:Math.round(K.pad)};ne.w=Math.round(G.width)-ne.l-ne.r,ne.h=Math.round(G.height)-ne.t-ne.b}G._pushmargin||(G._pushmargin={}),G._pushmarginIds||(G._pushmarginIds={})}a.supplyDefaults=function(G,K){var je,qe,ne=K&&K.skipUpdateCalc,X=G._fullLayout||{};if(X._skipDefaults)delete X._skipDefaults;else{var J,se=G._fullLayout={},V=G.layout||{},j=G._fullData||[],H=G._fullData=[],oe=G.data||[],U=G.calcdata||[],te=G._context||{};G._transitionData||a.createTransitionData(G),se._dfltTitle={plot:h(G,"Click to enter Plot title"),x:h(G,"Click to enter X axis title"),y:h(G,"Click to enter Y axis title"),colorbar:h(G,"Click to enter Colorscale title"),annotation:h(G,"new text")},se._traceWord=h(G,"trace");var ee=w(G,T);if(se._mapboxAccessToken=te.mapboxAccessToken,X._initialAutoSizeIsDone){var le=X.width,ce=X.height;a.supplyLayoutGlobalDefaults(V,se,ee),V.width||(se.width=le),V.height||(se.height=ce),a.sanitizeMargins(se)}else{a.supplyLayoutGlobalDefaults(V,se,ee);var pe=!V.width||!V.height,de=se.autosize;pe&&(de||te.autosizable)?a.plotAutoSize(G,V,se):pe&&a.sanitizeMargins(se),!de&&pe&&(V.width=se.width,V.height=se.height)}se._d3locale=((je=ee).decimal=(qe=se.separators).charAt(0),je.thousands=qe.charAt(1),{numberFormat:function(Ye){try{Ye=b(je).format(o.adjustFormat(Ye))}catch{return o.warnBadFormat(Ye),o.noFormat}return Ye},timeFormat:g(je).utcFormat}),se._extraFormat=w(G,x),se._initialAutoSizeIsDone=!0,se._dataLength=oe.length,se._modules=[],se._visibleModules=[],se._basePlotModules=[];var he=se._subplots=function(){var je,qe,Ye=e.collectableSubplotTypes,ct={};if(!Ye){Ye=[];var vt=e.subplotsRegistry;for(var wt in vt){var Ot=vt[wt].attr;if(Ot&&(Ye.push(wt),Array.isArray(Ot)))for(qe=0;qe<Ot.length;qe++)o.pushUnique(Ye,Ot[qe])}}for(je=0;je<Ye.length;je++)ct[Ye[je]]=[];return ct}(),xe=se._splomAxes={x:{},y:{}},De=se._splomSubplots={};se._splomGridDflt={},se._scatterStackOpts={},se._firstScatter={},se._alignmentOpts={},se._colorAxes={},se._requestRangeslider={},se._traceUids=function(je,qe){var Ye,ct,vt=qe.length,wt=[];for(Ye=0;Ye<je.length;Ye++){var Ot=je[Ye]._fullInput;Ot!==ct&&wt.push(Ot),ct=Ot}var St=wt.length,ft=new Array(vt),st={};function Ct(hn,cn){ft[cn]=hn,st[hn]=1}function $t(hn,cn){if(hn&&"string"==typeof hn&&!st[hn])return Ct(hn,cn),!0}for(Ye=0;Ye<vt;Ye++){var rn=qe[Ye].uid;"number"==typeof rn&&(rn=String(rn)),$t(rn,Ye)||Ye<St&&$t(wt[Ye].uid,Ye)||Ct(o.randstr(st),Ye)}return ft}(j,oe),se._globalTransforms=(G._context||{}).globalTransforms,a.supplyDataDefaults(oe,H,V,se);var Se=Object.keys(xe.x),ke=Object.keys(xe.y);if(Se.length>1&&ke.length>1){for(e.getComponentMethod("grid","sizeDefaults")(V,se),J=0;J<Se.length;J++)o.pushUnique(he.xaxis,Se[J]);for(J=0;J<ke.length;J++)o.pushUnique(he.yaxis,ke[J]);for(var Fe in De)o.pushUnique(he.cartesian,Fe)}if(se._has=a._hasPlotType.bind(se),j.length===H.length)for(J=0;J<H.length;J++)d(H[J],j[J]);a.supplyLayoutModuleDefaults(V,se,H,G._transitionData);var ve=se._visibleModules,Te=[];for(J=0;J<ve.length;J++){var Le=ve[J].crossTraceDefaults;Le&&o.pushUnique(Te,Le)}for(J=0;J<Te.length;J++)Te[J](H,se);se._hasOnlyLargeSploms=1===se._basePlotModules.length&&"splom"===se._basePlotModules[0].name&&Se.length>15&&ke.length>15&&0===se.shapes.length&&0===se.images.length,a.linkSubplots(H,se,j,X),a.cleanPlot(H,se,j,X);var Oe=!(!X._has||!X._has("gl2d")),Ne=!(!se._has||!se._has("gl2d")),Be=!(!X._has||!X._has("cartesian"))||Oe,He=!(!se._has||!se._has("cartesian"))||Ne;Be&&!He?X._bgLayer.remove():He&&!Be&&(se._shouldCreateBgLayer=!0),X._zoomlayer&&!G._dragging&&i({_fullLayout:X}),function(je,qe){var Ye,ct=[];qe.meta&&(Ye=qe._meta={meta:qe.meta,layout:{meta:qe.meta}});for(var vt=0;vt<je.length;vt++){var wt=je[vt];wt.meta?ct[wt.index]=wt._meta={meta:wt.meta}:qe.meta&&(wt._meta={meta:qe.meta}),qe.meta&&(wt._meta.layout={meta:qe.meta})}ct.length&&(Ye||(Ye=qe._meta={}),Ye.data=ct)}(H,se),d(se,X),e.getComponentMethod("colorscale","crossTraceDefaults")(H,se),se._preGUI||(se._preGUI={}),se._tracePreGUI||(se._tracePreGUI={});var Ve,it=se._tracePreGUI,ze={};for(Ve in it)ze[Ve]="old";for(J=0;J<H.length;J++)ze[Ve=H[J]._fullInput.uid]||(it[Ve]={}),ze[Ve]="new";for(Ve in ze)"old"===ze[Ve]&&delete it[Ve];L(se),e.getComponentMethod("rangeslider","makeData")(se),ne||U.length!==H.length||a.supplyDefaultsUpdateCalc(U,H)}},a.supplyDefaultsUpdateCalc=function(G,K){for(var ne=0;ne<K.length;ne++){var X=K[ne],J=(G[ne]||[])[0];if(J&&J.trace){var se=J.trace;if(se._hasCalcTransform){var V,j,H,oe=se._arrayAttrs;for(V=0;V<oe.length;V++)H=o.nestedProperty(se,j=oe[V]).get().slice(),o.nestedProperty(X,j).set(H)}J.trace=X}}},a.createTransitionData=function(G){G._transitionData||(G._transitionData={}),G._transitionData._frames||(G._transitionData._frames=[]),G._transitionData._frameHash||(G._transitionData._frameHash={}),G._transitionData._counter||(G._transitionData._counter=0),G._transitionData._interruptCallbacks||(G._transitionData._interruptCallbacks=[])},a._hasPlotType=function(G){var K,ne=this._basePlotModules||[];for(K=0;K<ne.length;K++)if(ne[K].name===G)return!0;var X=this._modules||[];for(K=0;K<X.length;K++){var J=X[K].name;if(J===G)return!0;var se=e.modules[J];if(se&&se.categories[G])return!0}return!1},a.cleanPlot=function(G,K,ne,X){var J,se,V=X._basePlotModules||[];for(J=0;J<V.length;J++){var j=V[J];j.clean&&j.clean(G,K,ne,X)}var H=X._has&&X._has("gl"),oe=K._has&&K._has("gl");H&&!oe&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);var U=!!X._infolayer;e:for(J=0;J<ne.length;J++){var te=ne[J].uid;for(se=0;se<G.length;se++)if(te===G[se].uid)continue e;U&&X._infolayer.select(".cb"+te).remove()}},a.linkSubplots=function(G,K,ne,X){var J,se,V=X._plots||{},j=K._plots={},H=K._subplots,oe={_fullData:G,_fullLayout:K},U=H.cartesian.concat(H.gl2d||[]);for(J=0;J<U.length;J++){var te,ee=U[J],le=V[ee],ce=l.getFromId(oe,ee,"x"),pe=l.getFromId(oe,ee,"y");for(le?te=j[ee]=le:(te=j[ee]={}).id=ee,ce._counterAxes.push(pe._id),pe._counterAxes.push(ce._id),ce._subplotsWith.push(ee),pe._subplotsWith.push(ee),te.xaxis=ce,te.yaxis=pe,te._hasClipOnAxisFalse=!1,se=0;se<G.length;se++){var de=G[se];if(de.xaxis===te.xaxis._id&&de.yaxis===te.yaxis._id&&!1===de.cliponaxis){te._hasClipOnAxisFalse=!0;break}}}var be,he=l.list(oe,null,!0);for(J=0;J<he.length;J++){var xe=null;(be=he[J]).overlaying&&(xe=l.getFromId(oe,be.overlaying))&&xe.overlaying&&(be.overlaying=!1,xe=null),be._mainAxis=xe||be,xe&&(be.domain=xe.domain.slice()),be._anchorAxis="free"===be.anchor?null:l.getFromId(oe,be.anchor)}for(J=0;J<he.length;J++)if((be=he[J])._counterAxes.sort(l.idSort),be._subplotsWith.sort(o.subplotSort),be._mainSubplot=M(be,K),be._counterAxes.length&&(be.spikemode&&-1!==be.spikemode.indexOf("across")||be.automargin&&be.mirror&&"free"!==be.anchor||e.getComponentMethod("rangeslider","isVisible")(be))){var De=1,Se=0;for(se=0;se<be._counterAxes.length;se++){var ke=l.getFromId(oe,be._counterAxes[se]);De=Math.min(De,ke.domain[0]),Se=Math.max(Se,ke.domain[1])}De<Se&&(be._counterDomainMin=De,be._counterDomainMax=Se)}},a.clearExpandedTraceDefaultColors=function(G){var K,ne,X;for(ne=[],(K=G._module._colorAttrs)||(G._module._colorAttrs=K=[],r.crawl(G._module.attributes,function(J,se,V,j){ne[j]=se,ne.length=j+1,"color"===J.valType&&void 0===J.dflt&&K.push(ne.join("."))})),X=0;X<K.length;X++)o.nestedProperty(G,"_input."+K[X]).get()||o.nestedProperty(G,K[X]).set(null)},a.supplyDataDefaults=function(G,K,ne,X){var J,se,V,j=X._modules,H=X._visibleModules,oe=X._basePlotModules,U=0,te=0;function ee(Fe){K.push(Fe);var ve=Fe._module;ve&&(o.pushUnique(j,ve),!0===Fe.visible&&o.pushUnique(H,ve),o.pushUnique(oe,Fe._module.basePlotModule),U++,!1!==Fe._input.visible&&te++)}X._transformModules=[];var le={},ce=[],de=t.traceTemplater((ne.template||{}).data||{});for(J=0;J<G.length;J++){if((se=de.newTrace(V=G[J])).uid=X._traceUids[J],a.supplyTraceDefaults(V,se,te,X,J),se.index=J,se._input=V,se._expandedIndex=U,se.transforms&&se.transforms.length)for(var be=!1!==V.visible&&!1===se.visible,he=C(se,K,ne,X),xe=0;xe<he.length;xe++){var De=he[xe],Se={_template:se._template,type:se.type,uid:se.uid+xe};be&&!1===De.visible&&delete De.visible,a.supplyTraceDefaults(De,Se,U,X,J),d(Se,De),Se.index=J,Se._input=V,Se._fullInput=se,Se._expandedIndex=U,Se._expandedInput=De,ee(Se)}else se._fullInput=se,se._expandedInput=se,ee(se);e.traceIs(se,"carpetAxis")&&(le[se.carpet]=se),e.traceIs(se,"carpetDependent")&&ce.push(J)}for(J=0;J<ce.length;J++)if((se=K[ce[J]]).visible){var ke=le[se.carpet];se._carpet=ke,ke&&ke.visible?(se.xaxis=ke.xaxis,se.yaxis=ke.yaxis):se.visible=!1}},a.supplyAnimationDefaults=function(G){var K;G=G||{};var ne={};function X(J,se){return o.coerce(G||{},ne,f,J,se)}if(X("mode"),X("direction"),X("fromcurrent"),Array.isArray(G.frame))for(ne.frame=[],K=0;K<G.frame.length;K++)ne.frame[K]=a.supplyAnimationFrameDefaults(G.frame[K]||{});else ne.frame=a.supplyAnimationFrameDefaults(G.frame||{});if(Array.isArray(G.transition))for(ne.transition=[],K=0;K<G.transition.length;K++)ne.transition[K]=a.supplyAnimationTransitionDefaults(G.transition[K]||{});else ne.transition=a.supplyAnimationTransitionDefaults(G.transition||{});return ne},a.supplyAnimationFrameDefaults=function(G){var K={};function ne(X,J){return o.coerce(G||{},K,f.frame,X,J)}return ne("duration"),ne("redraw"),K},a.supplyAnimationTransitionDefaults=function(G){var K={};function ne(X,J){return o.coerce(G||{},K,f.transition,X,J)}return ne("duration"),ne("easing"),K},a.supplyFrameDefaults=function(G){var K={};function ne(X,J){return o.coerce(G,K,u,X,J)}return ne("group"),ne("name"),ne("traces"),ne("baseframe"),ne("data"),ne("layout"),K},a.supplyTraceDefaults=function(G,K,ne,X,J){var se,V=X.colorway||n.defaults,j=V[ne%V.length];function H(he,xe){return o.coerce(G,K,a.attributes,he,xe)}var oe=H("visible");H("type"),H("name",X._traceWord+" "+J),H("uirevision",X.uirevision);var U=a.getModule(K);if(K._module=U,U){var te=U.basePlotModule,ee=te.attr,le=te.attributes;if(ee&&le){var ce=X._subplots,pe="";if(oe||"gl2d"!==te.name){if(Array.isArray(ee))for(se=0;se<ee.length;se++){var de=ee[se],be=o.coerce(G,K,le,de);ce[de]&&o.pushUnique(ce[de],be),pe+=be}else pe=o.coerce(G,K,le,ee);ce[te.name]&&o.pushUnique(ce[te.name],pe)}}}return oe&&(H("customdata"),H("ids"),H("meta"),e.traceIs(K,"showLegend")?(o.coerce(G,K,U.attributes.showlegend?U.attributes:a.attributes,"showlegend"),H("legendgroup"),H("legendgrouptitle.text"),H("legendrank"),K._dfltShowLegend=!0):K._dfltShowLegend=!1,U&&U.supplyDefaults(G,K,j,X),e.traceIs(K,"noOpacity")||H("opacity"),e.traceIs(K,"notLegendIsolatable")&&(K.visible=!!K.visible),e.traceIs(K,"noHover")||(K.hovertemplate||o.coerceHoverinfo(G,K,X),"parcats"!==K.type&&e.getComponentMethod("fx","supplyDefaults")(G,K,j,X)),U&&U.selectPoints&&H("selectedpoints"),a.supplyTransformDefaults(G,K,X)),K},a.hasMakesDataTransform=D,a.supplyTransformDefaults=function(G,K,ne){if(K._length||D(G)){var X=ne._globalTransforms||[],J=ne._transformModules||[];if(Array.isArray(G.transforms)||0!==X.length)for(var V=X.concat(G.transforms||[]),j=K.transforms=[],H=0;H<V.length;H++){var oe,U=V[H],te=U.type,ee=_[te],le=!(U._module&&U._module===ee),ce=ee&&"function"==typeof ee.transform;ee||o.warn("Unrecognized transform type "+te+"."),ee&&ee.supplyDefaults&&(le||ce)?((oe=ee.supplyDefaults(U,K,ne,G)).type=te,oe._module=ee,o.pushUnique(J,ee)):oe=o.extendFlat({},U),j.push(oe)}}},a.supplyLayoutGlobalDefaults=function(G,K,ne){function X(H,oe){return o.coerce(G,K,a.layoutAttributes,H,oe)}var J=G.template;o.isPlainObject(J)&&(K.template=J,K._template=J.layout,K._dataTemplate=J.data),X("autotypenumbers");var se=o.coerceFont(X,"font");o.coerceFont(X,"title.font",o.extendFlat({},se,{size:Math.round(1.4*se.size)})),X("title.text",K._dfltTitle.plot),X("title.xref"),X("title.yref"),X("title.x"),X("title.y"),X("title.xanchor"),X("title.yanchor"),X("title.pad.t"),X("title.pad.r"),X("title.pad.b"),X("title.pad.l"),X("uniformtext.mode")&&X("uniformtext.minsize"),X("autosize",!(G.width&&G.height)),X("width"),X("height"),X("margin.l"),X("margin.r"),X("margin.t"),X("margin.b"),X("margin.pad"),X("margin.autoexpand"),G.width&&G.height&&a.sanitizeMargins(K),e.getComponentMethod("grid","sizeDefaults")(G,K),X("paper_bgcolor"),X("separators",ne.decimal+ne.thousands),X("hidesources"),X("colorway"),X("datarevision");var j=X("uirevision");X("editrevision",j),X("selectionrevision",j),e.getComponentMethod("modebar","supplyLayoutDefaults")(G,K),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(G,K,X),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(G,K,X),X("meta"),o.isPlainObject(G.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(G,K,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(G,K,X)},a.plotAutoSize=function(G,K,ne){var X,J,se=G._context||{},V=se.frameMargins,j=o.isPlotDiv(G);if(j&&G.emit("plotly_autosize"),se.fillFrame)X=window.innerWidth,J=window.innerHeight,document.body.style.overflow="hidden";else{var H=j?window.getComputedStyle(G):{};if(X=P(H.width)||P(H.maxWidth)||ne.width,J=P(H.height)||P(H.maxHeight)||ne.height,y(V)&&V>0){var oe=1-2*V;X=Math.round(oe*X),J=Math.round(oe*J)}}var U=a.layoutAttributes.width.min,te=a.layoutAttributes.height.min;X<U&&(X=U),J<te&&(J=te);var ee=!K.width&&Math.abs(ne.width-X)>1,le=!K.height&&Math.abs(ne.height-J)>1;(le||ee)&&(ee&&(ne.width=X),le&&(ne.height=J)),G._initialAutoSize||(G._initialAutoSize={width:X,height:J}),a.sanitizeMargins(ne)},a.supplyLayoutModuleDefaults=function(G,K,ne,X){var J,se,V,j=e.componentsRegistry,H=K._basePlotModules,oe=e.subplotsRegistry.cartesian;for(J in j)(V=j[J]).includeBasePlot&&V.includeBasePlot(G,K);for(var U in H.length||H.push(oe),K._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(G,K),oe.finalizeSubplots(G,K)),K._subplots)K._subplots[U].sort(o.subplotSort);for(se=0;se<H.length;se++)(V=H[se]).supplyLayoutDefaults&&V.supplyLayoutDefaults(G,K,ne);var te=K._modules;for(se=0;se<te.length;se++)(V=te[se]).supplyLayoutDefaults&&V.supplyLayoutDefaults(G,K,ne);var ee=K._transformModules;for(se=0;se<ee.length;se++)(V=ee[se]).supplyLayoutDefaults&&V.supplyLayoutDefaults(G,K,ne,X);for(J in j)(V=j[J]).supplyLayoutDefaults&&V.supplyLayoutDefaults(G,K,ne)},a.purge=function(G){var K=G._fullLayout||{};void 0!==K._glcontainer&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.remove(),K._glcanvas=null),K._modeBar&&K._modeBar.destroy(),G._transitionData&&(G._transitionData._interruptCallbacks&&(G._transitionData._interruptCallbacks.length=0),G._transitionData._animationRaf&&window.cancelAnimationFrame(G._transitionData._animationRaf)),o.clearThrottle(),o.clearResponsive(G),delete G.data,delete G.layout,delete G._fullData,delete G._fullLayout,delete G.calcdata,delete G.empty,delete G.fid,delete G.undoqueue,delete G.undonum,delete G.autoplay,delete G.changed,delete G._promises,delete G._redrawTimer,delete G._hmlumcount,delete G._hmpixcount,delete G._transitionData,delete G._transitioning,delete G._initialAutoSize,delete G._transitioningWithDuration,delete G._dragging,delete G._dragged,delete G._dragdata,delete G._hoverdata,delete G._snapshotInProgress,delete G._editing,delete G._mouseDownTime,delete G._legendMouseDownTime,G.removeAllListeners&&G.removeAllListeners()},a.style=function(G){var K,ne=G._fullLayout._visibleModules,X=[];for(K=0;K<ne.length;K++){var J=ne[K];J.style&&o.pushUnique(X,J.style)}for(K=0;K<X.length;K++)X[K](G)},a.sanitizeMargins=function(G){if(G&&G.margin){var K,ne=G.width,X=G.height,J=G.margin,V=X-(J.t+J.b);ne-(J.l+J.r)<0&&(K=(ne-1)/(J.l+J.r),J.l=Math.floor(K*J.l),J.r=Math.floor(K*J.r)),V<0&&(K=(X-1)/(J.t+J.b),J.t=Math.floor(K*J.t),J.b=Math.floor(K*J.b))}},a.clearAutoMarginIds=function(G){G._fullLayout._pushmarginIds={}},a.allowAutoMargin=function(G,K){G._fullLayout._pushmarginIds[K]=1},a.autoMargin=function(G,K,ne){var X=G._fullLayout,J=X.width,se=X.height,V=X.margin,j=o.constrain(J-V.l-V.r,2,64),H=o.constrain(se-V.t-V.b,2,64),oe=Math.max(0,J-j),U=Math.max(0,se-H),te=X._pushmargin,ee=X._pushmarginIds;if(!1!==V.autoexpand){if(ne){var le=ne.pad;if(void 0===le&&(le=Math.min(12,V.l,V.r,V.t,V.b)),oe){var ce=(ne.l+ne.r)/oe;ce>1&&(ne.l/=ce,ne.r/=ce)}if(U){var pe=(ne.t+ne.b)/U;pe>1&&(ne.t/=pe,ne.b/=pe)}te[K]={l:{val:void 0!==ne.xl?ne.xl:ne.x,size:ne.l+le},r:{val:void 0!==ne.xr?ne.xr:ne.x,size:ne.r+le},b:{val:void 0!==ne.yb?ne.yb:ne.y,size:ne.b+le},t:{val:void 0!==ne.yt?ne.yt:ne.y,size:ne.t+le}},ee[K]=1}else delete te[K],delete ee[K];if(!X._replotting)return a.doAutoMargin(G)}},a.doAutoMargin=function(G){var K=G._fullLayout,ne=K.width,X=K.height;K._size||(K._size={}),L(K);var J=K._size,se=K.margin,V=o.extendFlat({},J),j=se.l,H=se.r,oe=se.t,U=se.b,te=K._pushmargin,ee=K._pushmarginIds;if(!1!==K.margin.autoexpand){for(var le in te)ee[le]||delete te[le];for(var ce in te.base={l:{val:0,size:j},r:{val:1,size:H},t:{val:1,size:oe},b:{val:0,size:U}},te){var pe=te[ce].l||{},de=te[ce].b||{},be=pe.val,he=pe.size,xe=de.val,De=de.size;for(var Se in te){if(y(he)&&te[Se].r){var ke=te[Se].r.val,Fe=te[Se].r.size;if(ke>be){var ve=(he*ke+(Fe-ne)*be)/(ke-be),Te=(Fe*(1-be)+(he-ne)*(1-ke))/(ke-be);ve+Te>j+H&&(j=ve,H=Te)}}if(y(De)&&te[Se].t){var Le=te[Se].t.val,Oe=te[Se].t.size;if(Le>xe){var Ne=(De*Le+(Oe-X)*xe)/(Le-xe),Be=(Oe*(1-xe)+(De-X)*(1-Le))/(Le-xe);Ne+Be>U+oe&&(U=Ne,oe=Be)}}}}}var vt,He=o.constrain(ne-se.l-se.r,2,64),Ve=o.constrain(X-se.t-se.b,2,64),it=Math.max(0,ne-He),ze=Math.max(0,X-Ve);if(it){var je=(j+H)/it;je>1&&(j/=je,H/=je)}if(ze){var qe=(U+oe)/ze;qe>1&&(U/=qe,oe/=qe)}if(J.l=Math.round(j),J.r=Math.round(H),J.t=Math.round(oe),J.b=Math.round(U),J.p=Math.round(se.pad),J.w=Math.round(ne)-J.l-J.r,J.h=Math.round(X)-J.t-J.b,!K._replotting&&a.didMarginChange(V,J)){"_redrawFromAutoMarginCount"in K?K._redrawFromAutoMarginCount++:K._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys(ee).length);if(K._redrawFromAutoMarginCount<Ye)return e.call("_doPlot",G);K._size=V,o.warn("Too many auto-margin redraws.")}vt=l.list(G,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(wt){for(var Ot=0;Ot<vt.length;Ot++){var St=vt[Ot][wt];St&&St()}})};var S=["l","r","t","b","p","w","h"];function E(G,K,ne){var X=!1,se=o.syncOrAsync([a.previousPromises,function(){if(G._transitionData)return G._transitioning=!1,function(V){var j=Promise.resolve();if(!V)return j;for(;V.length;)j=j.then(V.shift());return j}(G._transitionData._interruptCallbacks)},ne.prepareFn,a.rehover,a.reselect,function(){return G.emit("plotly_transitioning",[]),new Promise(function(V){G._transitioning=!0,K.duration>0&&(G._transitioningWithDuration=!0),G._transitionData._interruptCallbacks.push(function(){X=!0}),ne.redraw&&G._transitionData._interruptCallbacks.push(function(){return e.call("redraw",G)}),G._transitionData._interruptCallbacks.push(function(){G.emit("plotly_transitioninterrupted",[])});var j=0,H=0;function oe(){return j++,function(){var U;H++,X||H!==j||(U=V,!G._transitionData||(function(te){if(te)for(;te.length;)te.shift()}(G._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ne.redraw)return e.call("redraw",G)}).then(function(){G._transitioning=!1,G._transitioningWithDuration=!1,G.emit("plotly_transitioned",[])}).then(U)))}}ne.runFn(oe),setTimeout(oe())})}],G);return se&&se.then||(se=Promise.resolve()),se.then(function(){return G})}a.didMarginChange=function(G,K){for(var ne=0;ne<S.length;ne++){var X=S[ne],J=G[X],se=K[X];if(!y(J)||Math.abs(se-J)>1)return!0}return!1},a.graphJson=function(G,K,ne,X,J,se){(J&&K&&!G._fullData||J&&!K&&!G._fullLayout)&&a.supplyDefaults(G);var j=J?G._fullLayout:G.layout,H=(G._transitionData||{})._frames;function oe(ee,le){if("function"==typeof ee)return le?"_function_":null;if(o.isPlainObject(ee)){var ce,pe={};return Object.keys(ee).sort().forEach(function(de){if(-1===["_","["].indexOf(de.charAt(0)))if("function"!=typeof ee[de]){if("keepdata"===ne){if("src"===de.substr(de.length-3))return}else if("keepstream"===ne){if("string"==typeof(ce=ee[de+"src"])&&ce.indexOf(":")>0&&!o.isPlainObject(ee.stream))return}else if("keepall"!==ne&&"string"==typeof(ce=ee[de+"src"])&&ce.indexOf(":")>0)return;pe[de]=oe(ee[de],le)}else le&&(pe[de]="_function")}),pe}return Array.isArray(ee)?ee.map(function(de){return oe(de,le)}):o.isTypedArray(ee)?o.simpleMap(ee,o.identity):o.isJSDate(ee)?o.ms2DateTimeLocal(+ee):ee}var U={data:((J?G._fullData:G.data)||[]).map(function(ee){var le=oe(ee);return K&&delete le.fit,le})};if(!K&&(U.layout=oe(j),J)){var te=j._size;U.layout.computed={margin:{b:te.b,l:te.l,r:te.r,t:te.t}}}return H&&(U.frames=oe(H)),se&&(U.config=oe(G._context,!0)),"object"===X?U:JSON.stringify(U)},a.modifyFrames=function(G,K){var ne,X,J,se=G._transitionData._frames,V=G._transitionData._frameHash;for(ne=0;ne<K.length;ne++)switch((X=K[ne]).type){case"replace":var j=(se[X.index]||{}).name,H=(J=X.value).name;se[X.index]=V[H]=J,H!==j&&(delete V[j],V[H]=J);break;case"insert":V[(J=X.value).name]=J,se.splice(X.index,0,J);break;case"delete":delete V[(J=se[X.index]).name],se.splice(X.index,1)}return Promise.resolve()},a.computeFrame=function(G,K){var ne,X,J,se,V=G._transitionData._frameHash;if(!K)throw new Error("computeFrame must be given a string frame name");var j=V[K.toString()];if(!j)return!1;for(var H=[j],oe=[j.name];j.baseframe&&(j=V[j.baseframe.toString()])&&-1===oe.indexOf(j.name);)H.push(j),oe.push(j.name);for(var U={};j=H.pop();)if(j.layout&&(U.layout=a.extendLayout(U.layout,j.layout)),j.data){if(U.data||(U.data=[]),!(X=j.traces))for(X=[],ne=0;ne<j.data.length;ne++)X[ne]=ne;for(U.traces||(U.traces=[]),ne=0;ne<j.data.length;ne++)null!=(J=X[ne])&&(-1===(se=U.traces.indexOf(J))&&(U.traces[se=U.data.length]=J),U.data[se]=a.extendTrace(U.data[se],j.data[ne]))}return U},a.recomputeFrameHash=function(G){for(var K=G._transitionData._frameHash={},ne=G._transitionData._frames,X=0;X<ne.length;X++){var J=ne[X];J&&J.name&&(K[J.name]=J)}},a.extendObjectWithContainers=function(G,K,ne){var X,J,se,V,j,H,oe,U=o.extendDeepNoArrays({},K||{}),te=o.expandObjectPaths(U),ee={};if(ne&&ne.length)for(se=0;se<ne.length;se++)void 0===(J=(X=o.nestedProperty(te,ne[se])).get())?o.nestedProperty(ee,ne[se]).set(null):(X.set(null),o.nestedProperty(ee,ne[se]).set(J));if(G=o.extendDeepNoArrays(G||{},te),ne&&ne.length)for(se=0;se<ne.length;se++)if(H=o.nestedProperty(ee,ne[se]).get()){for(oe=(j=o.nestedProperty(G,ne[se])).get(),Array.isArray(oe)||j.set(oe=[]),V=0;V<H.length;V++){var le=H[V];oe[V]=null===le?null:a.extendObjectWithContainers(oe[V],le)}j.set(oe)}return G},a.dataArrayContainers=["transforms","dimensions"],a.layoutArrayContainers=e.layoutArrayContainers,a.extendTrace=function(G,K){return a.extendObjectWithContainers(G,K,a.dataArrayContainers)},a.extendLayout=function(G,K){return a.extendObjectWithContainers(G,K,a.layoutArrayContainers)},a.transition=function(G,K,ne,X,J,se){var V={redraw:J.redraw},j={},H=[];return V.prepareFn=function(){for(var oe=Array.isArray(K)?K.length:0,U=X.slice(0,oe),te=0;te<U.length;te++){var ee=U[te],le=G._fullData[ee]._module;if(le){if(le.animatable){var ce=le.basePlotModule.name;j[ce]||(j[ce]=[]),j[ce].push(ee)}G.data[U[te]]=a.extendTrace(G.data[U[te]],K[te])}}var pe=o.expandObjectPaths(o.extendDeepNoArrays({},ne)),de=/^[xy]axis[0-9]*$/;for(var be in pe)de.test(be)&&delete pe[be].range;a.extendLayout(G.layout,pe),delete G.calcdata,a.supplyDefaults(G),a.doCalcdata(G);var he=o.expandObjectPaths(ne);if(he){var xe=G._fullLayout._plots;for(var De in xe){var Se=xe[De],ke=Se.xaxis,Fe=Se.yaxis,ve=ke.range.slice(),Te=Fe.range.slice(),Le=null,Oe=null,Ne=null,Be=null;Array.isArray(he[ke._name+".range"])?Le=he[ke._name+".range"].slice():Array.isArray((he[ke._name]||{}).range)&&(Le=he[ke._name].range.slice()),Array.isArray(he[Fe._name+".range"])?Oe=he[Fe._name+".range"].slice():Array.isArray((he[Fe._name]||{}).range)&&(Oe=he[Fe._name].range.slice()),ve&&Le&&(ke.r2l(ve[0])!==ke.r2l(Le[0])||ke.r2l(ve[1])!==ke.r2l(Le[1]))&&(Ne={xr0:ve,xr1:Le}),Te&&Oe&&(Fe.r2l(Te[0])!==Fe.r2l(Oe[0])||Fe.r2l(Te[1])!==Fe.r2l(Oe[1]))&&(Be={yr0:Te,yr1:Oe}),(Ne||Be)&&H.push(o.extendFlat({plotinfo:Se},Ne,Be))}}return Promise.resolve()},V.runFn=function(oe){var U,te,ee=G._fullLayout._basePlotModules,le=H.length;if(ne)for(te=0;te<ee.length;te++)ee[te].transitionAxes&&ee[te].transitionAxes(G,H,se,oe);for(var ce in le?((U=o.extendFlat({},se)).duration=0,delete j.cartesian):U=se,j){var pe=j[ce];G._fullData[pe[0]]._module.basePlotModule.plot(G,pe,U,oe)}},E(G,se,V)},a.transitionFromReact=function(G,K,ne,X){var J=G._fullLayout,se=J.transition,V={},j=[];return V.prepareFn=function(){var H=J._plots;for(var oe in V.redraw=!1,"some"===K.anim&&(V.redraw=!0),"some"===ne.anim&&(V.redraw=!0),H){var U=H[oe],te=U.xaxis,ee=U.yaxis,le=X[te._name].range.slice(),ce=X[ee._name].range.slice(),pe=te.range.slice(),de=ee.range.slice();te.setScale(),ee.setScale();var be=null,he=null;te.r2l(le[0])===te.r2l(pe[0])&&te.r2l(le[1])===te.r2l(pe[1])||(be={xr0:le,xr1:pe}),ee.r2l(ce[0])===ee.r2l(de[0])&&ee.r2l(ce[1])===ee.r2l(de[1])||(he={yr0:ce,yr1:de}),(be||he)&&j.push(o.extendFlat({plotinfo:U},be,he))}return Promise.resolve()},V.runFn=function(H){for(var oe,U,te,ee=G._fullData,le=G._fullLayout._basePlotModules,ce=[],pe=0;pe<ee.length;pe++)ce.push(pe);function de(){if(G._fullLayout)for(var he=0;he<le.length;he++)le[he].transitionAxes&&le[he].transitionAxes(G,j,oe,H)}function be(){if(G._fullLayout)for(var he=0;he<le.length;he++)le[he].plot(G,te,U,H)}j.length&&K.anim?"traces first"===se.ordering?(oe=o.extendFlat({},se,{duration:0}),te=ce,U=se,setTimeout(de,se.duration),be()):(oe=se,te=null,U=o.extendFlat({},se,{duration:0}),setTimeout(be,oe.duration),de()):j.length?(oe=se,de()):K.anim&&(te=ce,U=se,be())},E(G,se,V)},a.doCalcdata=function(G,K){var ne,X,J,se,V=l.list(G),j=G._fullData,H=G._fullLayout,oe=new Array(j.length),U=(G.calcdata||[]).slice();for(G.calcdata=oe,H._numBoxes=0,H._numViolins=0,H._violinScaleGroupStats={},G._hmpixcount=0,G._hmlumcount=0,H._piecolormap={},H._sunburstcolormap={},H._treemapcolormap={},H._iciclecolormap={},H._funnelareacolormap={},J=0;J<j.length;J++)Array.isArray(K)&&-1===K.indexOf(J)&&(oe[J]=U[J]);for(J=0;J<j.length;J++)(ne=j[J])._arrayAttrs=r.findArrayAttributes(ne),ne._extremes={};var te=H._subplots.polar||[];for(J=0;J<te.length;J++)V.push(H[te[J]].radialaxis,H[te[J]].angularaxis);for(var ee in H._colorAxes){var le=H[ee];!1!==le.cauto&&(delete le.cmin,delete le.cmax)}var ce=!1;function pe(he){if(X=(ne=j[he])._module,!0===ne.visible&&ne.transforms){if(X&&X.calc){var xe=X.calc(G,ne);xe[0]&&xe[0].t&&xe[0].t._scene&&delete xe[0].t._scene.dirty}for(se=0;se<ne.transforms.length;se++){var De=ne.transforms[se];(X=_[De.type])&&X.calcTransform&&(ne._hasCalcTransform=!0,ce=!0,X.calcTransform(G,ne,De))}}}function de(he,xe){if(!!(X=(ne=j[he])._module).isContainer===xe){var De=[];if(!0===ne.visible&&0!==ne._length){delete ne._indexToPoints;var Se=ne.transforms||[];for(se=Se.length-1;se>=0;se--)if(Se[se].enabled){ne._indexToPoints=Se[se]._indexToPoints;break}X&&X.calc&&(De=X.calc(G,ne))}Array.isArray(De)&&De[0]||(De=[{x:m,y:m}]),De[0].t||(De[0].t={}),De[0].trace=ne,oe[he]=De}}for(z(V,j,H),J=0;J<j.length;J++)de(J,!0);for(J=0;J<j.length;J++)pe(J);for(ce&&z(V,j,H),J=0;J<j.length;J++)de(J,!0);for(J=0;J<j.length;J++)de(J,!1);q(G);var be=function(he,xe){var De,Se,ke,Fe,ve,Te=[];function Le(nn,Xe,nt){var ye=Xe._id.charAt(0);if("histogram2dcontour"===nn){var Ce=Xe._counterAxes[0],Ue=l.getFromId(xe,Ce),Qe="x"===ye||"x"===Ce&&"category"===Ue.type,rt="y"===ye||"y"===Ce&&"category"===Ue.type;return function(Ke,gt){return 0===Ke||0===gt||Qe&&Ke===nt[gt].length-1||rt&&gt===nt.length-1?-1:("y"===ye?gt:Ke)-1}}return function(Ke,gt){return"y"===ye?gt:Ke}}var Oe={min:function(nn){return o.aggNums(Math.min,null,nn)},max:function(nn){return o.aggNums(Math.max,null,nn)},sum:function(nn){return o.aggNums(function(Xe,nt){return Xe+nt},null,nn)},total:function(nn){return o.aggNums(function(Xe,nt){return Xe+nt},null,nn)},mean:function(nn){return o.mean(nn)},median:function(nn){return o.median(nn)}};for(De=0;De<he.length;De++){var Ne=he[De];if("category"===Ne.type){var Be=Ne.categoryorder.match(N);if(Be){var He=Be[1],Ve=Be[2],it=Ne._id.charAt(0),ze="x"===it,je=[];for(Se=0;Se<Ne._categories.length;Se++)je.push([Ne._categories[Se],[]]);for(Se=0;Se<Ne._traceIndices.length;Se++){var qe=Ne._traceIndices[Se],Ye=xe._fullData[qe];if(!0===Ye.visible){var ct=Ye.type;e.traceIs(Ye,"histogram")&&(delete Ye._xautoBinFinished,delete Ye._yautoBinFinished);var vt="splom"===ct,wt="scattergl"===ct,Ot=xe.calcdata[qe];for(ke=0;ke<Ot.length;ke++){var St,ft,st=Ot[ke];if(vt){var Ct=Ye._axesDim[Ne._id];if(!ze){var $t=Ye._diag[Ct][0];$t&&(Ne=xe._fullLayout[l.id2name($t)])}var rn=st.trace.dimensions[Ct].values;for(Fe=0;Fe<rn.length;Fe++)for(St=Ne._categoriesMap[rn[Fe]],ve=0;ve<st.trace.dimensions.length;ve++)ve!==Ct&&je[St][1].push(st.trace.dimensions[ve].values[Fe])}else if(wt){for(Fe=0;Fe<st.t.x.length;Fe++)ze?(St=st.t.x[Fe],ft=st.t.y[Fe]):(St=st.t.y[Fe],ft=st.t.x[Fe]),je[St][1].push(ft);st.t&&st.t._scene&&delete st.t._scene.dirty}else if(st.hasOwnProperty("z")){var cn=Le(Ye.type,Ne,ft=st.z);for(Fe=0;Fe<ft.length;Fe++)for(ve=0;ve<ft[Fe].length;ve++)(St=cn(ve,Fe))+1&&je[St][1].push(ft[Fe][ve])}else for(void 0===(St=st.p)&&(St=st[it]),void 0===(ft=st.s)&&(ft=st.v),void 0===ft&&(ft=ze?st.y:st.x),Array.isArray(ft)||(ft=void 0===ft?[]:[ft]),Fe=0;Fe<ft.length;Fe++)je[St][1].push(ft[Fe])}}}Ne._categoriesValue=je;var mn=[];for(Se=0;Se<je.length;Se++)mn.push([je[Se][0],Oe[He](je[Se][1])]);mn.sort(function(nn,Xe){return nn[1]-Xe[1]}),Ne._categoriesAggregatedValue=mn,Ne._initialCategories=mn.map(function(nn){return nn[0]}),"descending"===Ve&&Ne._initialCategories.reverse(),Te=Te.concat(Ne.sortByInitialCategories())}}}return Te}(V,G);if(be.length){for(H._numBoxes=0,H._numViolins=0,J=0;J<be.length;J++)de(be[J],!0);for(J=0;J<be.length;J++)de(be[J],!1);q(G)}e.getComponentMethod("fx","calc")(G),e.getComponentMethod("errorbars","calc")(G)};var N=/(total|sum|min|max|mean|median) (ascending|descending)/;function z(G,K,ne){var X={};function J(H){H.clearCalc(),"multicategory"===H.type&&H.setupMultiCategory(K),X[H._id]=1}o.simpleMap(G,J);for(var se=ne._axisMatchGroups||[],V=0;V<se.length;V++)for(var j in se[V])X[j]||J(ne[l.id2name(j)])}function q(G){var K,ne,X,J=G._fullLayout,se=J._visibleModules,V={};for(ne=0;ne<se.length;ne++){var j=se[ne],H=j.crossTraceCalc;if(H){var oe=j.basePlotModule.name;V[oe]?o.pushUnique(V[oe],H):V[oe]=[H]}}for(X in V){var U=V[X],te=J._subplots[X];if(Array.isArray(te))for(K=0;K<te.length;K++){var ee=te[K],le="cartesian"===X?J._plots[ee]:J[ee];for(ne=0;ne<U.length;ne++)U[ne](G,le,ee)}else for(ne=0;ne<U.length;ne++)U[ne](G)}}a.rehover=function(G){G._fullLayout._rehover&&G._fullLayout._rehover()},a.redrag=function(G){G._fullLayout._redrag&&G._fullLayout._redrag()},a.reselect=function(G){var K=G._fullLayout,ne=(G.layout||{}).selections,X=K._previousSelections;K._previousSelections=ne;var J=K._reselect||JSON.stringify(ne)!==JSON.stringify(X);e.getComponentMethod("selections","reselect")(G,J)},a.generalUpdatePerTraceModule=function(G,K,ne,X){var J,se=K.traceHash,V={};for(J=0;J<ne.length;J++){var j=ne[J],H=j[0].trace;H.visible&&(V[H.type]=V[H.type]||[],V[H.type].push(j))}for(var oe in se)if(!V[oe]){var U=se[oe][0];U[0].trace.visible=!1,V[oe]=[U]}for(var te in V){var ee=V[te];ee[0][0].trace._module.plot(G,K,o.filterVisible(ee),X)}K.traceHash=V},a.plotBasePlot=function(G,K,ne,X,J){var se=e.getModule(G),V=s(K.calcdata,se)[0];se.plot(K,V,X,J)},a.cleanBasePlot=function(G,K,ne,X,J){var se=J._has&&J._has(G),V=ne._has&&ne._has(G);se&&!V&&J["_"+G+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(v,ae,ie){"use strict";ae.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../lib/polygon").tester,b=p.findIndexOfMin,y=p.isAngleInsideSector,e=p.angleDelta,r=p.angleDist;function t(l,i,f,u){var s,d,h=u[0],a=u[1],_=n(Math.sin(i)-Math.sin(l)),c=n(Math.cos(i)-Math.cos(l)),T=Math.tan(f),x=n(1/T),w=_/c,M=a-w*h;return x?_&&c?d=T*(s=M/(T-w)):c?(s=a*x,d=a):(s=h,d=h*T):_&&c?(s=0,d=M):c?(s=0,d=a):s=d=NaN,[s,d]}function o(l,i,f,u){return p.isFullCircle([i,f])?function(s,d){var h,a=d.length,_=new Array(a+1);for(h=0;h<a;h++){var c=d[h];_[h]=[s*Math.cos(c),s*Math.sin(c)]}return _[h]=_[0].slice(),_}(l,u):function(s,d,h,a){var _,c,T=a.length,x=[];function w(z){return[s*Math.cos(z),s*Math.sin(z)]}function M(z,q,G){return t(z,q,G,w(z))}function D(z){return p.mod(z,T)}function C(z){return y(z,[d,h])}var P=b(a,function(z){return C(z)?r(z,d):1/0}),L=M(a[P],a[D(P-1)],d);for(x.push(L),_=P,c=0;c<T;_++,c++){var S=a[D(_)];if(!C(S))break;x.push(w(S))}var E=b(a,function(z){return C(z)?r(z,h):1/0}),N=M(a[E],a[D(E+1)],h);return x.push(N),x.push([0,0]),x.push(x[0].slice()),x}(l,i,f,u)}function n(l){return Math.abs(l)>1e-10?l:0}function m(l,i,f){i=i||0,f=f||0;for(var u=l.length,s=new Array(u),d=0;d<u;d++){var h=l[d];s[d]=[i+h[0],f-h[1]]}return s}ae.exports={isPtInsidePolygon:function(l,i,f,u,s){if(!y(i,u))return!1;var d,h;f[0]<f[1]?(d=f[0],h=f[1]):(d=f[1],h=f[0]);var a=g(o(d,u[0],u[1],s)),_=g(o(h,u[0],u[1],s)),c=[l*Math.cos(i),l*Math.sin(i)];return _.contains(c)&&!a.contains(c)},findPolygonOffset:function(l,i,f,u){for(var s=1/0,d=1/0,h=o(l,i,f,u),a=0;a<h.length;a++){var _=h[a];s=Math.min(s,_[0]),d=Math.min(d,-_[1])}return[s,d]},findEnclosingVertexAngles:function(l,i){var f=b(i,function(s){var d=e(s,l);return d>0?d:1/0}),u=p.mod(f+1,i.length);return[i[f],i[u]]},findIntersectionXY:t,findXYatLength:function(l,i,f,u){var s=-i*f,d=i*i+1,h=2*(i*s-f),_=Math.sqrt(h*h-4*d*(s*s+f*f-l*l)),c=(-h+_)/(2*d),T=(-h-_)/(2*d);return[[c,i*c+s+u],[T,i*T+s+u]]},clampTiny:n,pathPolygon:function(l,i,f,u,s,d){return"M"+m(o(l,i,f,u),s,d).join("L")},pathPolygonAnnulus:function(l,i,f,u,s,d,h){var a,_;l<i?(a=l,_=i):(a=i,_=l);var c=m(o(a,f,u,s),d,h);return"M"+m(o(_,f,u,s),d,h).reverse().join("L")+"M"+c.join("L")}}},{"../../lib":515,"../../lib/polygon":527}],631:[function(v,ae,ie){"use strict";var p=v("../get_data").getSubplotCalcData,g=v("../../lib").counterRegex,b=v("./polar"),y=v("./constants"),e=y.attr,r=y.name,t=g(r),o={};o[e]={valType:"subplotid",dflt:r,editType:"calc"},ae.exports={attr:e,name:r,idRoot:r,idRegex:t,attrRegex:t,attributes:o,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(n){for(var m=n._fullLayout,l=n.calcdata,i=m._subplots[r],f=0;f<i.length;f++){var u=i[f],s=p(l,r,u),d=m[u]._subplot;d||(d=b(n,u),m[u]._subplot=d),d.plot(s,m,n._promises)}},clean:function(n,m,l,i){for(var f=i._subplots[r]||[],u=i._has&&i._has("gl"),s=m._has&&m._has("gl"),d=u&&!s,h=0;h<f.length;h++){var a=f[h],_=i[a]._subplot;if(!m[a]&&_)for(var c in _.framework.remove(),_.layers["radial-axis-title"].remove(),_.clipPaths)_.clipPaths[c].remove();d&&_._scene&&(_._scene.destroy(),_._scene=null)}},toSVG:v("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(v,ae,ie){"use strict";var p=v("../../components/color/attributes"),g=v("../cartesian/layout_attributes"),b=v("../domain").attributes,y=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,r=e({color:g.color,showline:y({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:y({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,griddash:g.griddash},"plot","from-root"),t=e({tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,showexponent:g.showexponent,exponentformat:g.exponentformat,minexponent:g.minexponent,separatethousands:g.separatethousands,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,layer:g.layer},"plot","from-root"),o={visible:y({},g.visible,{dflt:!0}),type:y({},g.type,{values:["-","linear","log","date","category"]}),autotypenumbers:g.autotypenumbers,autorange:y({},g.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:y({},g.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:g.categoryorder,categoryarray:g.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:y({},g.title.text,{editType:"plot",dflt:""}),font:y({},g.title.font,{editType:"plot"}),editType:"plot"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:g._deprecated.title,titlefont:g._deprecated.titlefont}};y(o,r,t);var n={visible:y({},g.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:g.autotypenumbers,categoryorder:g.categoryorder,categoryarray:g.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:g.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};y(n,r,t),ae.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:p.background},radialaxis:o,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../../plot_api/plot_template"),y=v("../subplot_defaults"),e=v("../get_data").getSubplotData,r=v("../cartesian/tick_value_defaults"),t=v("../cartesian/tick_mark_defaults"),o=v("../cartesian/tick_label_defaults"),n=v("../cartesian/prefix_suffix_defaults"),m=v("../cartesian/category_order_defaults"),l=v("../cartesian/line_grid_defaults"),i=v("../cartesian/axis_autotype"),f=v("./layout_attributes"),u=v("./set_convert"),s=v("./constants"),d=s.axisNames;function h(_,c,T,x){var w=T("bgcolor");x.bgColor=g.combine(w,x.paper_bgcolor);var M=T("sector");T("hole");var D,C=e(x.fullData,s.name,x.id),P=x.layoutOut;function L(oe,U){return T(D+"."+oe,U)}for(var S=0;S<d.length;S++){p.isPlainObject(_[D=d[S]])||(_[D]={});var E=_[D],N=b.newContainer(c,D);N._id=N._name=D,N._attr=x.id+"."+D,N._traceIndices=C.map(function(oe){return oe._expandedIndex});var z=s.axisName2dataArray[D],q=a(E,N,L,C,z,x);m(E,N,L,{axData:C,dataAttr:z});var G=L("visible");switch(u(N,c,P),L("uirevision",c.uirevision),N._m=1,D){case"radialaxis":var K=L("autorange",!N.isValidRange(E.range));E.autorange=K,!K||"linear"!==q&&"-"!==q||L("rangemode"),"reversed"===K&&(N._m=-1),L("range"),N.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===q){p.log("Polar plots do not support date angular axes yet.");for(var ne=0;ne<C.length;ne++)C[ne].visible=!1;q=E.type=N.type="linear"}L("linear"===q?"thetaunit":"period");var X=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[X])}if(n(E,N,L,N.type,{tickSuffixDflt:"degrees"===N.thetaunit?"\xb0":void 0}),G){var J,se,V,j,H=x.font||{};se=(J=L("color"))===E.color?J:H.color,V=H.size,j=H.family,r(E,N,L,N.type),o(E,N,L,N.type,{font:{color:se,size:V,family:j}}),t(E,N,L,{outerTicks:!0}),l(E,N,L,{dfltColor:J,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[D]}),L("layer"),"radialaxis"===D&&(L("side"),L("angle",M[0]),L("title.text"),p.coerceFont(L,"title.font",{color:se,size:p.bigFont(V),family:j}))}"category"!==q&&L("hoverformat"),N._input=E}"category"===c.angularaxis.type&&T("gridshape")}function a(_,c,T,x,w,M){var D=T("autotypenumbers",M.autotypenumbersDflt);if("-"===T("type")){for(var C,P=0;P<x.length;P++)if(x[P].visible){C=x[P];break}C&&C[w]&&(c.type=i(C[w],"gregorian",{noMultiCategory:!0,autotypenumbers:D})),"-"===c.type?c.type="linear":_.type=c.type}return c.type}ae.exports=function(_,c,T){y(_,c,T,{type:s.name,attributes:f,handleDefaults:h,font:c.font,autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,fullData:T,layoutOut:c})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("tinycolor2"),b=v("../../registry"),y=v("../../lib"),e=y.strRotate,r=y.strTranslate,t=v("../../components/color"),o=v("../../components/drawing"),n=v("../plots"),m=v("../../plots/cartesian/axes"),l=v("../cartesian/set_convert"),i=v("./set_convert"),f=v("../cartesian/autorange").doAutoRange,u=v("../cartesian/dragbox"),s=v("../../components/dragelement"),d=v("../../components/fx"),h=v("../../components/titles"),a=v("../../components/selections").prepSelect,_=v("../../components/selections").selectOnClick,c=v("../../components/selections").clearOutline,T=v("../../lib/setcursor"),x=v("../../lib/clear_gl_canvases"),w=v("../../plot_api/subroutines").redrawReglTraces,M=v("../../constants/alignment").MID_SHIFT,D=v("./constants"),C=v("./helpers"),P=v("../smith/helpers"),L=P.smith,S=P.reactanceArc,E=P.resistanceArc,N=P.smithTransform,z=y._,q=y.mod,G=y.deg2rad,K=y.rad2deg;function ne(j,H,oe){this.isSmith=oe||!1,this.id=H,this.gd=j,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=j._fullLayout;this.clipIds.forTraces="clip"+U._uid+H+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",H),this.getHole=function(ee){return this.isSmith?0:ee.hole},this.getSector=function(ee){return this.isSmith?[0,360]:ee.sector},this.getRadial=function(ee){return this.isSmith?ee.realaxis:ee.radialaxis},this.getAngular=function(ee){return this.isSmith?ee.imaginaryaxis:ee.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var X=ne.prototype;function J(j){var H=j.ticks+String(j.ticklen)+String(j.showticklabels);return"side"in j&&(H+=j.side),H}function se(j,H){return H[y.findIndexOfMin(H,function(oe){return y.angleDist(j,oe)})]}function V(j,H,oe){return H?(j.attr("display",null),j.attr(oe)):j&&j.attr("display","none"),j}ae.exports=function(j,H,oe){return new ne(j,H,oe)},X.plot=function(j,H){for(var oe=H[this.id],U=!1,te=0;te<j.length;te++)if(!1===j[te][0].trace.cliponaxis){U=!0;break}this._hasClipOnAxisFalse=U,this.updateLayers(H,oe),this.updateLayout(H,oe),n.generalUpdatePerTraceModule(this.gd,this,j,oe),this.updateFx(H,oe),this.isSmith&&(delete oe.realaxis.range,delete oe.imaginaryaxis.range)},X.updateLayers=function(j,H){var oe=this.isSmith,U=this.layers,te=this.getRadial(H),ee=this.getAngular(H),le=D.layerNames,ce=le.indexOf("frontplot"),pe=le.slice(0,ce),de="below traces"===ee.layer,be="below traces"===te.layer;de&&pe.push("angular-line"),be&&pe.push("radial-line"),de&&pe.push("angular-axis"),be&&pe.push("radial-axis"),pe.push("frontplot"),de||pe.push("angular-line"),be||pe.push("radial-line"),de||pe.push("angular-axis"),be||pe.push("radial-axis");var he=(oe?"smith":"polar")+"sublayer",xe=this.framework.selectAll("."+he).data(pe,String);xe.enter().append("g").attr("class",function(De){return he+" "+De}).each(function(De){var Se=U[De]=p.select(this);switch(De){case"frontplot":oe||Se.append("g").classed("barlayer",!0),Se.append("g").classed("scatterlayer",!0);break;case"backplot":Se.append("g").classed("maplayer",!0);break;case"plotbg":U.bg=Se.append("path");break;case"radial-grid":case"angular-grid":Se.style("fill","none");break;case"radial-line":Se.append("line").style("fill","none");break;case"angular-line":Se.append("path").style("fill","none")}}),xe.order()},X.updateLayout=function(j,H){var oe=this.layers,U=j._size,te=this.getRadial(H),ee=this.getAngular(H),le=H.domain.x,ce=H.domain.y;this.xOffset=U.l+U.w*le[0],this.yOffset=U.t+U.h*(1-ce[1]);var pe=this.xLength=U.w*(le[1]-le[0]),de=this.yLength=U.h*(ce[1]-ce[0]),be=this.getSector(H);this.sectorInRad=be.map(G);var he,xe,De,Se,ke,wt,st,Ct,$t,rn,hn,cn,mn,nn,Xe,Fe=this.sectorBBox=($t=(wt=be)[1]-(Ct=wt[0]),hn=(rn=q(Ct,360))+$t,cn=Math.cos(G(rn)),mn=Math.sin(G(rn)),nn=Math.cos(G(hn)),Xe=Math.sin(G(hn)),st=rn<=90&&hn>=90||rn>90&&hn>=450?1:mn<=0&&Xe<=0?0:Math.max(mn,Xe),[rn<=180&&hn>=180||rn>180&&hn>=540?-1:cn>=0&&nn>=0?0:Math.min(cn,nn),rn<=270&&hn>=270||rn>270&&hn>=630?-1:mn>=0&&Xe>=0?0:Math.min(mn,Xe),hn>=360?1:cn<=0&&nn<=0?0:Math.max(cn,nn),st]),ve=Fe[2]-Fe[0],Le=de/pe,Oe=Math.abs((Fe[3]-Fe[1])/ve);Le>Oe?(he=pe,ke=(de-(xe=pe*Oe))/U.h/2,De=[le[0],le[1]],Se=[ce[0]+ke,ce[1]-ke]):(xe=de,ke=(pe-(he=de/Oe))/U.w/2,De=[le[0]+ke,le[1]-ke],Se=[ce[0],ce[1]]),this.xLength2=he,this.yLength2=xe,this.xDomain2=De,this.yDomain2=Se;var Ne,Be=this.xOffset2=U.l+U.w*De[0],He=this.yOffset2=U.t+U.h*(1-Se[1]),Ve=this.radius=he/ve,it=this.innerRadius=this.getHole(H)*Ve,ze=this.cx=Be-Ve*Fe[0],je=this.cy=He+Ve*Fe[3],qe=this.cxx=ze-Be,Ye=this.cyy=je-He,ct=te.side;"counterclockwise"===ct?(Ne=ct,ct="top"):"clockwise"===ct&&(Ne=ct,ct="bottom"),this.radialAxis=this.mockAxis(j,H,te,{_id:"x",side:ct,_trueSide:Ne,domain:[it/U.w,Ve/U.w]}),this.angularAxis=this.mockAxis(j,H,ee,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(j,H),this.updateAngularAxis(j,H),this.updateRadialAxis(j,H),this.updateRadialAxisTitle(j,H),this.xaxis=this.mockCartesianAxis(j,H,{_id:"x",domain:De}),this.yaxis=this.mockCartesianAxis(j,H,{_id:"y",domain:Se});var vt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",vt).attr("transform",r(qe,Ye)),oe.frontplot.attr("transform",r(Be,He)).call(o.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),oe.bg.attr("d",vt).attr("transform",r(ze,je)).call(t.fill,H.bgcolor)},X.mockAxis=function(j,H,oe,U){var te=y.extendFlat({},oe,U);return i(te,H,j),te},X.mockCartesianAxis=function(j,H,oe){var U=this,te=U.isSmith,ee=oe._id,le=y.extendFlat({type:"linear"},oe);l(le,j);var ce={x:[0,2],y:[1,3]};return le.setRange=function(){var pe=U.sectorBBox,de=ce[ee],be=U.radialAxis._rl,he=(be[1]-be[0])/(1-U.getHole(H));le.range=[pe[de[0]]*he,pe[de[1]]*he]},le.isPtWithinRange="x"!==ee||te?function(){return!0}:function(pe){return U.isPtInside(pe)},le.setRange(),le.setScale(),le},X.doAutoRange=function(j,H){var oe=this.gd,U=this.radialAxis,te=this.getRadial(H);f(oe,U);var ee=U.range;te.range=ee.slice(),te._input.range=ee.slice(),U._rl=[U.r2l(ee[0],null,"gregorian"),U.r2l(ee[1],null,"gregorian")]},X.updateRadialAxis=function(j,H){var oe=this,U=oe.gd,te=oe.layers,ee=oe.radius,le=oe.innerRadius,ce=oe.cx,pe=oe.cy,de=oe.getRadial(H),be=q(oe.getSector(H)[0],360),he=oe.radialAxis,xe=le<ee,De=oe.isSmith;De||(oe.fillViewInitialKey("radialaxis.angle",de.angle),oe.fillViewInitialKey("radialaxis.range",he.range.slice()),he.setGeometry()),"auto"===he.tickangle&&be>90&&be<=270&&(he.tickangle=180);var Se=De?function(Ve){var it=N(oe,L([Ve.x,0]));return r(it[0]-ce,it[1]-pe)}:function(Ve){return r(he.l2p(Ve.x)+le,0)},ke=De?function(Ve){return E(oe,Ve.x,-1/0,1/0)}:function(Ve){return oe.pathArc(he.r2p(Ve.x)+le)},Fe=J(de);if(oe.radialTickLayout!==Fe&&(te["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=Fe),xe){he.setScale();var ve=0,Te=De?(he.tickvals||[]).filter(function(Ve){return Ve>=0}).map(function(Ve){return m.tickText(he,Ve,!0,!1)}):m.calcTicks(he),Le=De?Te:m.clipEnds(he,Te),Oe=m.getTickSigns(he)[2];De&&(("top"===he.ticks&&"bottom"===he.side||"bottom"===he.ticks&&"top"===he.side)&&(Oe=-Oe),"top"===he.ticks&&"top"===he.side&&(ve=-he.ticklen),"bottom"===he.ticks&&"bottom"===he.side&&(ve=he.ticklen)),m.drawTicks(U,he,{vals:Te,layer:te["radial-axis"],path:m.makeTickPath(he,0,Oe),transFn:Se,crisp:!1}),m.drawGrid(U,he,{vals:Le,layer:te["radial-grid"],path:ke,transFn:y.noop,crisp:!1}),m.drawLabels(U,he,{vals:Te,layer:te["radial-axis"],transFn:Se,labelFns:m.makeLabelFns(he,ve)})}var Ne=oe.radialAxisAngle=oe.vangles?K(se(G(de.angle),oe.vangles)):de.angle,Be=r(ce,pe),He=Be+e(-Ne);V(te["radial-axis"],xe&&(de.showticklabels||de.ticks),{transform:He}),V(te["radial-grid"],xe&&de.showgrid,{transform:De?"":Be}),V(te["radial-line"].select("line"),xe&&de.showline,{x1:De?-ee:le,y1:0,x2:ee,y2:0,transform:He}).attr("stroke-width",de.linewidth).call(t.stroke,de.linecolor)},X.updateRadialAxisTitle=function(j,H,oe){if(!this.isSmith){var U=this.gd,te=this.radius,ee=this.cx,le=this.cy,ce=this.getRadial(H),pe=this.id+"title",de=0;if(ce.title){var be=o.bBox(this.layers["radial-axis"].node()).height,he=ce.title.font.size,xe=ce.side;de="top"===xe?he:"counterclockwise"===xe?-(be+.4*he):be+.8*he}var De=void 0!==oe?oe:this.radialAxisAngle,Se=G(De),ke=Math.cos(Se),Fe=Math.sin(Se),ve=ee+te/2*ke+de*Fe,Te=le-te/2*Fe+de*ke;this.layers["radial-axis-title"]=h.draw(U,pe,{propContainer:ce,propName:this.id+".radialaxis.title",placeholder:z(U,"Click to enter radial axis title"),attributes:{x:ve,y:Te,"text-anchor":"middle"},transform:{rotate:-De}})}},X.updateAngularAxis=function(j,H){var oe=this,U=oe.gd,te=oe.layers,ee=oe.radius,le=oe.innerRadius,ce=oe.cx,pe=oe.cy,de=oe.getAngular(H),be=oe.angularAxis,he=oe.isSmith;he||(oe.fillViewInitialKey("angularaxis.rotation",de.rotation),be.setGeometry(),be.setScale());var xe=he?function(Ve){var it=N(oe,L([0,Ve.x]));return Math.atan2(it[0]-ce,it[1]-pe)-Math.PI/2}:function(Ve){return be.t2g(Ve.x)};"linear"===be.type&&"radians"===be.thetaunit&&(be.tick0=K(be.tick0),be.dtick=K(be.dtick));var De=function(Ve){return r(ce+ee*Math.cos(Ve),pe-ee*Math.sin(Ve))},Se=he?function(Ve){var it=N(oe,L([0,Ve.x]));return r(it[0],it[1])}:function(Ve){return De(xe(Ve))},ke=he?function(Ve){var it=N(oe,L([0,Ve.x])),ze=Math.atan2(it[0]-ce,it[1]-pe)-Math.PI/2;return r(it[0],it[1])+e(-K(ze))}:function(Ve){var it=xe(Ve);return De(it)+e(-K(it))},Fe=he?function(Ve){return S(oe,Ve.x,0,1/0)}:function(Ve){var it=xe(Ve),ze=Math.cos(it),je=Math.sin(it);return"M"+[ce+le*ze,pe-le*je]+"L"+[ce+ee*ze,pe-ee*je]},ve=m.makeLabelFns(be,0).labelStandoff,Te={xFn:function(Ve){var it=xe(Ve);return Math.cos(it)*ve},yFn:function(Ve){var it=xe(Ve),ze=Math.sin(it)>0?.2:1;return-Math.sin(it)*(ve+Ve.fontSize*ze)+Math.abs(Math.cos(it))*(Ve.fontSize*M)},anchorFn:function(Ve){var it=xe(Ve),ze=Math.cos(it);return Math.abs(ze)<.1?"middle":ze>0?"start":"end"},heightFn:function(Ve,it,ze){var je=xe(Ve);return-.5*(1+Math.sin(je))*ze}},Le=J(de);oe.angularTickLayout!==Le&&(te["angular-axis"].selectAll("."+be._id+"tick").remove(),oe.angularTickLayout=Le);var Oe,Ne=he?[1/0].concat(be.tickvals||[]).map(function(Ve){return m.tickText(be,Ve,!0,!1)}):m.calcTicks(be);if(he&&(Ne[0].text="\u221e",Ne[0].fontSize*=1.75),"linear"===H.gridshape?(Oe=Ne.map(xe),y.angleDelta(Oe[0],Oe[1])<0&&(Oe=Oe.slice().reverse())):Oe=null,oe.vangles=Oe,"category"===be.type&&(Ne=Ne.filter(function(Ve){return y.isAngleInsideSector(xe(Ve),oe.sectorInRad)})),be.visible){var Be="inside"===be.ticks?-1:1;m.drawTicks(U,be,{vals:Ne,layer:te["angular-axis"],path:"M"+Be*((be.linewidth||1)/2)+",0h"+Be*be.ticklen,transFn:ke,crisp:!1}),m.drawGrid(U,be,{vals:Ne,layer:te["angular-grid"],path:Fe,transFn:y.noop,crisp:!1}),m.drawLabels(U,be,{vals:Ne,layer:te["angular-axis"],repositionOnUpdate:!0,transFn:Se,labelFns:Te})}V(te["angular-line"].select("path"),de.showline,{d:oe.pathSubplot(),transform:r(ce,pe)}).attr("stroke-width",de.linewidth).call(t.stroke,de.linecolor)},X.updateFx=function(j,H){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(j),this.updateRadialDrag(j,H,0),this.updateRadialDrag(j,H,1)),this.updateHoverAndMainDrag(j))},X.updateHoverAndMainDrag=function(j){var H,oe,U=this,te=U.isSmith,ee=U.gd,ce=j._zoomlayer,pe=D.MINZOOM,de=D.OFFEDGE,be=U.radius,he=U.innerRadius,xe=U.cx,De=U.cy,Se=U.cxx,ke=U.cyy,Fe=U.sectorInRad,ve=U.vangles,Te=U.radialAxis,Le=C.clampTiny,Oe=C.findXYatLength,Ne=C.findEnclosingVertexAngles,Be=D.cornerHalfWidth,He=D.cornerLen/2,Ve=u.makeDragger(U.layers,"path","maindrag",!1===j.dragmode?"none":"crosshair");p.select(Ve).attr("d",U.pathSubplot()).attr("transform",r(xe,De)),Ve.onmousemove=function(Qe){d.hover(ee,Qe,U.id),ee._fullLayout._lasthover=Ve,ee._fullLayout._hoversubplot=U.id},Ve.onmouseout=function(Qe){ee._dragging||s.unhover(ee,Qe)};var it,ze,je,qe,Ye,ct,vt,wt,Ot,St={element:Ve,gd:ee,subplot:U.id,plotinfo:{id:U.id,xaxis:U.xaxis,yaxis:U.yaxis},xaxes:[U.xaxis],yaxes:[U.yaxis]};function ft(Qe,rt){return Math.sqrt(Qe*Qe+rt*rt)}function st(Qe,rt){return ft(Qe-Se,rt-ke)}function Ct(Qe,rt){return Math.atan2(ke-rt,Qe-Se)}function $t(Qe,rt){return[Qe*Math.cos(rt),Qe*Math.sin(-rt)]}function rn(Qe,rt){if(0===Qe)return U.pathSector(2*Be);var Ke=He/Qe,gt=rt-Ke,mt=rt+Ke,Lt=Math.max(0,Math.min(Qe,be)),Vt=Lt-Be,dt=Lt+Be;return"M"+$t(Vt,gt)+"A"+[Vt,Vt]+" 0,0,0 "+$t(Vt,mt)+"L"+$t(dt,mt)+"A"+[dt,dt]+" 0,0,1 "+$t(dt,gt)+"Z"}function hn(Qe,rt,Ke){if(0===Qe)return U.pathSector(2*Be);var gt,mt,Lt=$t(Qe,rt),Vt=$t(Qe,Ke),dt=Le((Lt[0]+Vt[0])/2),bt=Le((Lt[1]+Vt[1])/2);if(dt&&bt){var Yt=bt/dt,It=-1/Yt,jt=Oe(Be,Yt,dt,bt);gt=Oe(He,It,jt[0][0],jt[0][1]),mt=Oe(He,It,jt[1][0],jt[1][1])}else{var Ie,et;bt?(Ie=He,et=Be):(Ie=Be,et=He),gt=[[dt-Ie,bt-et],[dt+Ie,bt-et]],mt=[[dt-Ie,bt+et],[dt+Ie,bt+et]]}return"M"+gt.join("L")+"L"+mt.reverse().join("L")+"Z"}function cn(Qe,rt){return rt=Math.max(Math.min(rt,be),he),Qe<de?Qe=0:be-Qe<de?Qe=be:rt<de?rt=0:be-rt<de&&(rt=be),Math.abs(rt-Qe)>pe?(Qe<rt?(je=Qe,qe=rt):(je=rt,qe=Qe),!0):(je=null,qe=null,!1)}function mn(Qe,rt){rt=rt||"M0,0Z",wt.attr("d",Qe=Qe||Ye),Ot.attr("d",rt),u.transitionZoombox(wt,Ot,ct,vt),ct=!0;var Ke={};Ce(Ke),ee.emit("plotly_relayouting",Ke)}function nn(Qe,rt){var Ke,gt,mt=it+(Qe*=H),Lt=ze+(rt*=oe),Vt=st(it,ze),dt=Math.min(st(mt,Lt),be),bt=Ct(it,ze);cn(Vt,dt)&&(Ke=Ye+U.pathSector(qe),je&&(Ke+=U.pathSector(je)),gt=rn(je,bt)+rn(qe,bt)),mn(Ke,gt)}function Xe(Qe,rt,Ke,gt){var mt=C.findIntersectionXY(Ke,gt,Ke,[Qe-Se,ke-rt]);return ft(mt[0],mt[1])}function nt(Qe,rt){var Ke,gt,mt=it+Qe,Lt=ze+rt,Vt=Ct(it,ze),dt=Ct(mt,Lt),bt=Ne(Vt,ve),Yt=Ne(dt,ve);cn(Xe(it,ze,bt[0],bt[1]),Math.min(Xe(mt,Lt,Yt[0],Yt[1]),be))&&(Ke=Ye+U.pathSector(qe),je&&(Ke+=U.pathSector(je)),gt=[hn(je,bt[0],bt[1]),hn(qe,bt[0],bt[1])].join(" ")),mn(Ke,gt)}function ye(){if(u.removeZoombox(ee),null!==je&&null!==qe){var Qe={};Ce(Qe),u.showDoubleClickNotifier(ee),b.call("_guiRelayout",ee,Qe)}}function Ce(Qe){var rt=Te._rl,Ke=(rt[1]-rt[0])/(1-he/be)/be;Qe[U.id+".radialaxis.range"]=[rt[0]+(je-he)*Ke,rt[0]+(qe-he)*Ke]}function Ue(Qe,rt){var Ke=ee._fullLayout.clickmode;if(u.removeZoombox(ee),2===Qe){var gt={};for(var mt in U.viewInitial)gt[U.id+"."+mt]=U.viewInitial[mt];ee.emit("plotly_doubleclick",null),b.call("_guiRelayout",ee,gt)}Ke.indexOf("select")>-1&&1===Qe&&_(rt,ee,[U.xaxis],[U.yaxis],U.id,St),Ke.indexOf("event")>-1&&d.click(ee,rt,U.id)}St.prepFn=function(Qe,rt,Ke){var gt=ee._fullLayout.dragmode,mt=Ve.getBoundingClientRect();ee._fullLayout._calcInverseTransform(ee),H=ee._fullLayout._invScaleX,oe=ee._fullLayout._invScaleY;var Vt=y.apply3DTransform(ee._fullLayout._invTransform)(rt-mt.left,Ke-mt.top);if(it=Vt[0],ze=Vt[1],ve){var dt=C.findPolygonOffset(be,Fe[0],Fe[1],ve);it+=Se+dt[0],ze+=ke+dt[1]}switch(gt){case"zoom":St.clickFn=Ue,te||(St.moveFn=ve?nt:nn,St.doneFn=ye,je=null,qe=null,Ye=U.pathSubplot(),ct=!1,vt=g(ee._fullLayout[U.id].bgcolor).getLuminance(),(wt=u.makeZoombox(ce,vt,xe,De,Ye)).attr("fill-rule","evenodd"),Ot=u.makeCorners(ce,xe,De),c(ee));break;case"select":case"lasso":a(Qe,rt,Ke,St,gt)}},s.init(St)},X.updateRadialDrag=function(j,H,oe){var U=this,te=U.gd,ee=U.layers,le=U.radius,ce=U.innerRadius,pe=U.cx,de=U.cy,be=U.radialAxis,he=D.radialDragBoxSize,xe=he/2;if(be.visible){var De,Se,ke,Fe=G(U.radialAxisAngle),ve=be._rl,Te=ve[0],Le=ve[1],Oe=ve[oe],Ne=.75*(ve[1]-ve[0])/(1-U.getHole(H))/le;oe?(De=pe+(le+xe)*Math.cos(Fe),Se=de-(le+xe)*Math.sin(Fe),ke="radialdrag"):(De=pe+(ce-xe)*Math.cos(Fe),Se=de-(ce-xe)*Math.sin(Fe),ke="radialdrag-inner");var Be,He,Ve,it=u.makeRectDragger(ee,ke,"crosshair",-xe,-xe,he,he),ze={element:it,gd:te};!1===j.dragmode&&(ze.dragmode=!1),V(p.select(it),be.visible&&ce<le,{transform:r(De,Se)}),ze.prepFn=function(){Be=null,He=null,Ve=null,ze.moveFn=je,ze.doneFn=qe,c(te)},ze.clampFn=function(vt,wt){return Math.sqrt(vt*vt+wt*wt)<D.MINDRAG&&(vt=0,wt=0),[vt,wt]},s.init(ze)}function je(vt,wt){if(Be)Be(vt,wt);else{var Ot=[vt,-wt],St=[Math.cos(Fe),Math.sin(Fe)],ft=Math.abs(y.dot(Ot,St)/Math.sqrt(y.dot(Ot,Ot)));isNaN(ft)||(Be=ft<.5?Ye:ct)}var Ct,st={};Ct=st,null!==He?Ct[U.id+".radialaxis.angle"]=He:null!==Ve&&(Ct[U.id+".radialaxis.range["+oe+"]"]=Ve),te.emit("plotly_relayouting",st)}function qe(){null!==He?b.call("_guiRelayout",te,U.id+".radialaxis.angle",He):null!==Ve&&b.call("_guiRelayout",te,U.id+".radialaxis.range["+oe+"]",Ve)}function Ye(vt,wt){if(0!==oe){He=Math.atan2(de-(Se+wt),De+vt-pe),U.vangles&&(He=se(He,U.vangles)),He=K(He);var ft=r(pe,de)+e(-He);ee["radial-axis"].attr("transform",ft),ee["radial-line"].select("line").attr("transform",ft);var st=U.gd._fullLayout;U.updateRadialAxisTitle(st,st[U.id],He)}}function ct(vt,wt){var Ot=y.dot([vt,-wt],[Math.cos(Fe),Math.sin(Fe)]);if(Ve=Oe-Ne*Ot,Ne>0==(oe?Ve>Te:Ve<Le)){var St=te._fullLayout,ft=St[U.id];be.range[oe]=Ve,be._rl[oe]=Ve,U.updateRadialAxis(St,ft),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var st=!1;for(var Ct in U.traceHash){var $t=U.traceHash[Ct],rn=y.filterVisible($t);$t[0][0].trace._module.plot(te,U,rn,ft),b.traceIs(Ct,"gl")&&rn.length&&(st=!0)}st&&(x(te),w(te))}else Ve=null}},X.updateAngularDrag=function(j){var H=this,oe=H.gd,U=H.layers,te=H.radius,ee=H.angularAxis,le=H.cx,ce=H.cy,pe=H.cxx,de=H.cyy,be=D.angularDragBoxSize,he=u.makeDragger(U,"path","angulardrag",!1===j.dragmode?"none":"move"),xe={element:he,gd:oe};function De(ze,je){return Math.atan2(de+be-je,ze-pe-be)}!1===j.dragmode?xe.dragmode=!1:p.select(he).attr("d",H.pathAnnulus(te,te+be)).attr("transform",r(le,ce)).call(T,"move");var Se,ke,Fe,ve,Te,Le,Oe=U.frontplot.select(".scatterlayer").selectAll(".trace"),Ne=Oe.selectAll(".point"),Be=Oe.selectAll(".textpoint");function He(ze,je){var qe=H.gd._fullLayout,Ye=qe[H.id],ct=De(Se+ze*j._invScaleX,ke+je*j._invScaleY),vt=K(ct-Le);if(ve=Fe+vt,U.frontplot.attr("transform",r(H.xOffset2,H.yOffset2)+e([-vt,pe,de])),H.vangles){Te=H.radialAxisAngle+vt;var wt=r(le,ce)+e(-vt),Ot=r(le,ce)+e(-Te);U.bg.attr("transform",wt),U["radial-grid"].attr("transform",wt),U["radial-axis"].attr("transform",Ot),U["radial-line"].select("line").attr("transform",Ot),H.updateRadialAxisTitle(qe,Ye,Te)}else H.clipPaths.forTraces.select("path").attr("transform",r(pe,de)+e(vt));Ne.each(function(){var rn=p.select(this),hn=o.getTranslate(rn);rn.attr("transform",r(hn.x,hn.y)+e([vt]))}),Be.each(function(){var rn=p.select(this),hn=rn.select("text"),cn=o.getTranslate(rn);rn.attr("transform",e([vt,hn.attr("x"),hn.attr("y")])+r(cn.x,cn.y))}),ee.rotation=y.modHalf(ve,360),H.updateAngularAxis(qe,Ye),H._hasClipOnAxisFalse&&!y.isFullCircle(H.sectorInRad)&&Oe.call(o.hideOutsideRangePoints,H);var St=!1;for(var ft in H.traceHash)if(b.traceIs(ft,"gl")){var st=H.traceHash[ft],Ct=y.filterVisible(st);st[0][0].trace._module.plot(oe,H,Ct,Ye),Ct.length&&(St=!0)}St&&(x(oe),w(oe));var $t={};Ve($t),oe.emit("plotly_relayouting",$t)}function Ve(ze){ze[H.id+".angularaxis.rotation"]=ve,H.vangles&&(ze[H.id+".radialaxis.angle"]=Te)}function it(){Be.select("text").attr("transform",null);var ze={};Ve(ze),b.call("_guiRelayout",oe,ze)}xe.prepFn=function(ze,je,qe){Fe=j[H.id].angularaxis.rotation;var ct=he.getBoundingClientRect();Se=je-ct.left,ke=qe-ct.top,oe._fullLayout._calcInverseTransform(oe);var vt=y.apply3DTransform(j._invTransform)(Se,ke);Le=De(Se=vt[0],ke=vt[1]),xe.moveFn=He,xe.doneFn=it,c(oe)},H.vangles&&!y.isFullCircle(H.sectorInRad)&&(xe.prepFn=y.noop,T(p.select(he),null)),s.init(xe)},X.isPtInside=function(j){if(this.isSmith)return!0;var H=this.sectorInRad,oe=this.vangles,U=this.angularAxis.c2g(j.theta),te=this.radialAxis,ee=te.c2l(j.r);return(oe?C.isPtInsidePolygon:y.isPtInsideSector)(ee,U,te._rl,H,oe)},X.pathArc=function(j){var H=this.sectorInRad,oe=this.vangles;return(oe?C.pathPolygon:y.pathArc)(j,H[0],H[1],oe)},X.pathSector=function(j){var H=this.sectorInRad,oe=this.vangles;return(oe?C.pathPolygon:y.pathSector)(j,H[0],H[1],oe)},X.pathAnnulus=function(j,H){var oe=this.sectorInRad,U=this.vangles;return(U?C.pathPolygonAnnulus:y.pathAnnulus)(j,H,oe[0],oe[1],U)},X.pathSubplot=function(){var j=this.innerRadius,H=this.radius;return j?this.pathAnnulus(j,H):this.pathSector(H)},X.fillViewInitialKey=function(j,H){j in this.viewInitial||(this.viewInitial[j]=H)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../cartesian/set_convert"),b=p.deg2rad,y=p.rad2deg;ae.exports=function(e,r,t){switch(g(e,t),e._id){case"x":case"radialaxis":m=r._subplot,(o=e).setGeometry=function(){var l=o._rl[0],i=o._rl[1],f=m.innerRadius,u=(m.radius-f)/(i-l),s=f/u,d=l>i?function(h){return h<=0}:function(h){return h>=0};o.c2g=function(h){var a=o.c2l(h)-l;return(d(a)?a:0)+s},o.g2c=function(h){return o.l2c(h+l-s)},o.g2p=function(h){return h*u},o.c2p=function(h){return o.g2p(o.c2g(h))}};break;case"angularaxis":!function(o,n){var m=o.type;if("linear"===m){var l=o.d2c,i=o.c2d;o.d2c=function(f,u){return s=l(f),"degrees"===u?b(s):s;var s},o.c2d=function(f,u){return i((s=f,"degrees"===u?y(s):s));var s}}o.makeCalcdata=function(f,u){var s,d,h=f[u],a=f._length,_=function(M){return o.d2c(M,f.thetaunit)};if(h){if(p.isTypedArray(h)&&"linear"===m){if(a===h.length)return h;if(h.subarray)return h.subarray(0,a)}for(s=new Array(a),d=0;d<a;d++)s[d]=_(h[d])}else{var c=u+"0",T="d"+u,x=c in f?_(f[c]):0,w=f[T]?_(f[T]):(o.period||2*Math.PI)/a;for(s=new Array(a),d=0;d<a;d++)s[d]=x+d*w}return s},o.setGeometry=function(){var f,u,s,d,h=n.sector,a=h.map(b),_={clockwise:-1,counterclockwise:1}[o.direction],c=b(o.rotation),T=function(D){return _*D+c},x=function(D){return(D-c)/_};switch(m){case"linear":u=f=p.identity,d=b,s=y,o.range=p.isFullCircle(a)?[h[0],h[0]+360]:a.map(x).map(y);break;case"category":var w=o._categories.length,M=o.period?Math.max(o.period,w):w;0===M&&(M=1),u=d=function(D){return 2*D*Math.PI/M},f=s=function(D){return D*M/Math.PI/2},o.range=[0,M]}o.c2g=function(D){return T(u(D))},o.g2c=function(D){return f(x(D))},o.t2g=function(D){return T(d(D))},o.g2t=function(D){return s(x(D))}}}(e,r)}var o,m}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(v,ae,ie){"use strict";ae.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(v,ae,ie){"use strict";function p(e){return e<0?-1:e>0?1:0}function g(e){var r=e[0],t=e[1];if(!isFinite(r)||!isFinite(t))return[1,0];var o=(r+1)*(r+1)+t*t;return[(r*r+t*t-1)/o,2*t/o]}function b(e,r){return[r[0]*e.radius+e.cx,-r[1]*e.radius+e.cy]}function y(e,r){return r*e.radius}ae.exports={smith:g,reactanceArc:function(e,r,t,o){var n=b(e,g([t,r])),m=n[0],l=n[1],i=b(e,g([o,r])),f=i[0],u=i[1];if(0===r)return["M"+m+","+l,"L"+f+","+u].join(" ");var s=y(e,1/Math.abs(r));return["M"+m+","+l,"A"+s+","+s+" 0 0,"+(r<0?1:0)+" "+f+","+u].join(" ")},resistanceArc:function(e,r,t,o){var n=y(e,1/(r+1)),m=b(e,g([r,t])),l=m[0],i=m[1],f=b(e,g([r,o])),u=f[0],s=f[1];if(p(t)!==p(o)){var d=b(e,g([r,0]));return["M"+l+","+i,"A"+n+","+n+" 0 0,"+(0<t?0:1)+" "+d[0]+","+d[1],"A"+n+","+n+" 0 0,"+(o<0?0:1)+u+","+s].join(" ")}return["M"+l+","+i,"A"+n+","+n+" 0 0,"+(o<t?0:1)+" "+u+","+s].join(" ")},smithTransform:b}},{}],638:[function(v,ae,ie){"use strict";var p=v("../get_data").getSubplotCalcData,g=v("../../lib").counterRegex,b=v("../polar/polar"),y=v("./constants"),e=y.attr,r=y.name,t=g(r),o={};o[e]={valType:"subplotid",dflt:r,editType:"calc"},ae.exports={attr:e,name:r,idRoot:r,idRegex:t,attrRegex:t,attributes:o,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(n){for(var m=n._fullLayout,l=n.calcdata,i=m._subplots[r],f=0;f<i.length;f++){var u=i[f],s=p(l,r,u),d=m[u]._subplot;d||(d=b(n,u,!0),m[u]._subplot=d),d.plot(s,m,n._promises)}},clean:function(n,m,l,i){for(var f=i._subplots[r]||[],u=0;u<f.length;u++){var s=f[u],d=i[s]._subplot;if(!m[s]&&d)for(var h in d.framework.remove(),d.clipPaths)d.clipPaths[h].remove()}},toSVG:v("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(v,ae,ie){"use strict";var p=v("../../components/color/attributes"),g=v("../cartesian/layout_attributes"),b=v("../domain").attributes,y=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,r=e({color:g.color,showline:y({},g.showline,{dflt:!0}),linecolor:g.linecolor,linewidth:g.linewidth,showgrid:y({},g.showgrid,{dflt:!0}),gridcolor:g.gridcolor,gridwidth:g.gridwidth,griddash:g.griddash},"plot","from-root"),t=e({ticklen:g.ticklen,tickwidth:y({},g.tickwidth,{dflt:2}),tickcolor:g.tickcolor,showticklabels:g.showticklabels,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,tickfont:g.tickfont,tickformat:g.tickformat,hoverformat:g.hoverformat,layer:g.layer},"plot","from-root"),o=y({visible:y({},g.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:y({},g.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},r,t),n=y({visible:y({},g.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:g.ticks,editType:"calc"},r,t);ae.exports={domain:b({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:p.background},realaxis:o,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(v,ae,ie){"use strict";var p,g,b,y=v("../../lib"),e=v("../../components/color"),r=v("../../plot_api/plot_template"),t=v("../subplot_defaults"),o=v("../get_data").getSubplotData,n=v("../cartesian/prefix_suffix_defaults"),m=v("../cartesian/tick_label_defaults"),l=v("../cartesian/line_grid_defaults"),i=v("../cartesian/set_convert"),f=v("./layout_attributes"),u=v("./constants"),s=u.axisNames,d=(p=function(a){return a.slice().reverse().map(function(_){return-_}).concat([0]).concat(a)},g=String,b={},function(a){var _=g?g(a):a;if(_ in b)return b[_];var c=p(a);return b[_]=c,c});function h(a,_,c,T){var x=c("bgcolor");T.bgColor=e.combine(x,T.paper_bgcolor);var w,M=o(T.fullData,u.name,T.id),D=T.layoutOut;function C(X,J){return c(w+"."+X,J)}for(var P=0;P<s.length;P++){y.isPlainObject(a[w=s[P]])||(a[w]={});var L=a[w],S=r.newContainer(_,w);S._id=S._name=w,S._attr=T.id+"."+w,S._traceIndices=M.map(function(X){return X._expandedIndex});var E=C("visible");if(S.type="linear",i(S,D),n(L,S,C,S.type),E){var N,z,q,G,K="realaxis"===w;K&&C("side"),K?C("tickvals"):C("tickvals",d(_.realaxis.tickvals||f.realaxis.tickvals.dflt));var ne=T.font||{};E&&(z=(N=C("color"))===L.color?N:ne.color,q=ne.size,G=ne.family),m(L,S,C,S.type,{noTicklabelstep:!0,noAng:!K,noExp:!0,font:{color:z,size:q,family:G}}),y.coerce2(a,_,f,w+".ticklen"),y.coerce2(a,_,f,w+".tickwidth"),y.coerce2(a,_,f,w+".tickcolor",_.color),C("ticks")||(delete _[w].ticklen,delete _[w].tickwidth,delete _[w].tickcolor),l(L,S,C,{dfltColor:N,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[w]}),C("layer")}C("hoverformat"),delete S.type,S._input=L}}ae.exports=function(a,_,c){t(a,_,c,{noUirevision:!0,type:u.name,attributes:f,handleDefaults:h,font:_.font,paper_bgcolor:_.paper_bgcolor,fullData:c,layoutOut:_})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plot_api/plot_template"),b=v("./domain").defaults;ae.exports=function(y,e,r,t){var o,n,l=t.attributes,i=t.handleDefaults,f=t.partition||"x",u=e._subplots[t.type],s=u.length,d=s&&u[0].replace(/\d+$/,"");function h(T,x){return p.coerce(o,n,l,T,x)}for(var a=0;a<s;a++){var _=u[a];o=y[_]?y[_]:y[_]={},n=g.newContainer(e,_,d),t.noUirevision||h("uirevision",e.uirevision);var c={};c[f]=[a/s,(a+1)/s],b(n,e,h,c),t.id=_,i(o,n,h,t)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(v,ae,ie){"use strict";function g(b){var y=b.description?" "+b.description:"",e=b.keys||[];if(e.length>0){for(var r=[],t=0;t<e.length;t++)r[t]="`"+e[t]+"`";y+="Finally, the template string has access to ",y=1===e.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return y}v("../constants/docs"),ie.hovertemplateAttrs=function(b,y){b=b||{},g(y=y||{});var e={valType:"string",dflt:"",editType:b.editType||"none"};return!1!==b.arrayOk&&(e.arrayOk=!0),e},ie.texttemplateAttrs=function(b,y){b=b||{},g(y=y||{});var e={valType:"string",dflt:"",editType:b.editType||"calc"};return!1!==b.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(v,ae,ie){"use strict";var p=v("./ternary"),g=v("../../plots/get_data").getSubplotCalcData,b=v("../../lib").counterRegex;ie.name="ternary";var y=ie.attr="subplot";ie.idRoot="ternary",ie.idRegex=ie.attrRegex=b("ternary"),(ie.attributes={})[y]={valType:"subplotid",dflt:"ternary",editType:"calc"},ie.layoutAttributes=v("./layout_attributes"),ie.supplyLayoutDefaults=v("./layout_defaults"),ie.plot=function(e){for(var r=e._fullLayout,t=e.calcdata,o=r._subplots.ternary,n=0;n<o.length;n++){var m=o[n],l=g(t,"ternary",m),i=r[m]._subplot;i||(i=new p({id:m,graphDiv:e,container:r._ternarylayer.node()},r),r[m]._subplot=i),i.plot(l,r,e._promises)}},ie.clean=function(e,r,t,o){for(var n=o._subplots.ternary||[],m=0;m<n.length;m++){var l=n[m],i=o[l]._subplot;!r[l]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(v,ae,ie){"use strict";var p=v("../../components/color/attributes"),g=v("../domain").attributes,b=v("../cartesian/layout_attributes"),y=v("../../plot_api/edit_types").overrideAll,e=v("../../lib/extend").extendFlat,r={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:e({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:e({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:e({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},t=ae.exports=y({domain:g({name:"ternary"}),bgcolor:{valType:"color",dflt:p.background},sum:{valType:"number",dflt:1,min:0},aaxis:r,baxis:r,caxis:r},"plot","from-root");t.uirevision={valType:"any",editType:"none"},t.aaxis.uirevision=t.baxis.uirevision=t.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("../../plot_api/plot_template"),b=v("../../lib"),y=v("../subplot_defaults"),e=v("../cartesian/tick_label_defaults"),r=v("../cartesian/prefix_suffix_defaults"),t=v("../cartesian/tick_mark_defaults"),o=v("../cartesian/tick_value_defaults"),n=v("../cartesian/line_grid_defaults"),m=v("./layout_attributes"),l=["aaxis","baxis","caxis"];function i(u,s,d,h){var a,_,c,T=d("bgcolor"),x=d("sum");h.bgColor=p.combine(T,h.paper_bgcolor);for(var w=0;w<l.length;w++)_=u[a=l[w]]||{},(c=g.newContainer(s,a))._name=a,f(_,c,h,s);var M=s.aaxis,D=s.baxis,C=s.caxis;M.min+D.min+C.min>=x&&(M.min=0,D.min=0,C.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function f(u,s,d,h){var a=m[s._name];function _(D,C){return b.coerce(u,s,a,D,C)}_("uirevision",h.uirevision),s.type="linear";var c=_("color"),T=c!==a.color.dflt?c:d.font.color,x=s._name.charAt(0).toUpperCase(),w="Component "+x,M=_("title.text",w);s._hovertitle=M===w?M:x,b.coerceFont(_,"title.font",{family:d.font.family,size:b.bigFont(d.font.size),color:T}),_("min"),o(u,s,_,"linear"),r(u,s,_,"linear"),e(u,s,_,"linear"),t(u,s,_,{outerTicks:!0}),_("showticklabels")&&(b.coerceFont(_,"tickfont",{family:d.font.family,size:d.font.size,color:T}),_("tickangle"),_("tickformat")),n(u,s,_,{dfltColor:c,bgColor:d.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a}),_("hoverformat"),_("layer")}ae.exports=function(u,s,d){y(u,s,d,{type:"ternary",attributes:m,handleDefaults:i,font:s.font,paper_bgcolor:s.paper_bgcolor})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("tinycolor2"),b=v("../../registry"),y=v("../../lib"),e=y.strTranslate,r=y._,t=v("../../components/color"),o=v("../../components/drawing"),n=v("../cartesian/set_convert"),m=v("../../lib/extend").extendFlat,l=v("../plots"),i=v("../cartesian/axes"),f=v("../../components/dragelement"),u=v("../../components/fx"),s=v("../../components/dragelement/helpers"),d=s.freeMode,h=s.rectMode,a=v("../../components/titles"),_=v("../../components/selections").prepSelect,c=v("../../components/selections").selectOnClick,T=v("../../components/selections").clearOutline,x=v("../../components/selections").clearSelectionsCache,w=v("../cartesian/constants");function M(q,G){this.id=q.id,this.graphDiv=q.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ae.exports=M;var D=M.prototype;D.init=function(q){this.container=q._ternarylayer,this.defs=q._defs,this.layoutId=q._uid,this.traceHash={},this.layers={}},D.plot=function(q,G){var K=G[this.id],ne=G._size;this._hasClipOnAxisFalse=!1;for(var X=0;X<q.length;X++)if(!1===q[X][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(K),this.adjustLayout(K,ne),l.generalUpdatePerTraceModule(this.graphDiv,this,q,K),this.layers.plotbg.select("path").call(t.fill,K.bgcolor)},D.makeFramework=function(q){var G=this.graphDiv,K=q[this.id],ne=this.clipId="clip"+this.layoutId+this.id,X=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=y.ensureSingleById(q._clips,"clipPath",ne,function(J){J.append("path").attr("d","M0,0Z")}),this.clipDefRelative=y.ensureSingleById(q._clips,"clipPath",X,function(J){J.append("path").attr("d","M0,0Z")}),this.plotContainer=y.ensureSingle(this.container,"g",this.id),this.updateLayers(K),o.setClipUrl(this.layers.backplot,ne,G),o.setClipUrl(this.layers.grids,ne,G)},D.updateLayers=function(q){var G=this.layers,K=["draglayer","plotbg","backplot","grids"];"below traces"===q.aaxis.layer&&K.push("aaxis","aline"),"below traces"===q.baxis.layer&&K.push("baxis","bline"),"below traces"===q.caxis.layer&&K.push("caxis","cline"),K.push("frontplot"),"above traces"===q.aaxis.layer&&K.push("aaxis","aline"),"above traces"===q.baxis.layer&&K.push("baxis","bline"),"above traces"===q.caxis.layer&&K.push("caxis","cline");var ne=this.plotContainer.selectAll("g.toplevel").data(K,String),X=["agrid","bgrid","cgrid"];ne.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var se=p.select(this);G[J]=se,"frontplot"===J?se.append("g").classed("scatterlayer",!0):"backplot"===J?se.append("g").classed("maplayer",!0):"plotbg"===J?se.append("path").attr("d","M0,0Z"):"aline"===J||"bline"===J||"cline"===J?se.append("path"):"grids"===J&&X.forEach(function(V){G[V]=se.append("g").classed("grid "+V,!0)})}),ne.order()};var C=Math.sqrt(4/3);D.adjustLayout=function(q,G){var K,ne,X,J,se,V,j=this,H=q.domain,oe=(H.x[0]+H.x[1])/2,U=(H.y[0]+H.y[1])/2,te=H.x[1]-H.x[0],ee=H.y[1]-H.y[0],le=te*G.w,ce=ee*G.h,pe=q.sum,de=q.aaxis.min,be=q.baxis.min,he=q.caxis.min;le>C*ce?X=(J=ce)*C:J=(X=le)/C,se=te*X/le,V=ee*J/ce,ne=G.t+G.h*(1-U)-J/2,j.x0=K=G.l+G.w*oe-X/2,j.y0=ne,j.w=X,j.h=J,j.sum=pe,j.xaxis={type:"linear",range:[de+2*he-pe,pe-de-2*be],domain:[oe-se/2,oe+se/2],_id:"x"},n(j.xaxis,j.graphDiv._fullLayout),j.xaxis.setScale(),j.xaxis.isPtWithinRange=function(Be){return Be.a>=j.aaxis.range[0]&&Be.a<=j.aaxis.range[1]&&Be.b>=j.baxis.range[1]&&Be.b<=j.baxis.range[0]&&Be.c>=j.caxis.range[1]&&Be.c<=j.caxis.range[0]},j.yaxis={type:"linear",range:[de,pe-be-he],domain:[U-V/2,U+V/2],_id:"y"},n(j.yaxis,j.graphDiv._fullLayout),j.yaxis.setScale(),j.yaxis.isPtWithinRange=function(){return!0};var xe=j.yaxis.domain[0],De=j.aaxis=m({},q.aaxis,{range:[de,pe-be-he],side:"left",tickangle:(+q.aaxis.tickangle||0)-30,domain:[xe,xe+V*C],anchor:"free",position:0,_id:"y",_length:X});n(De,j.graphDiv._fullLayout),De.setScale();var Se=j.baxis=m({},q.baxis,{range:[pe-de-he,be],side:"bottom",domain:j.xaxis.domain,anchor:"free",position:0,_id:"x",_length:X});n(Se,j.graphDiv._fullLayout),Se.setScale();var ke=j.caxis=m({},q.caxis,{range:[pe-de-be,he],side:"right",tickangle:(+q.caxis.tickangle||0)+30,domain:[xe,xe+V*C],anchor:"free",position:0,_id:"y",_length:X});n(ke,j.graphDiv._fullLayout),ke.setScale();var Fe="M"+K+","+(ne+J)+"h"+X+"l-"+X/2+",-"+J+"Z";j.clipDef.select("path").attr("d",Fe),j.layers.plotbg.select("path").attr("d",Fe);var ve="M0,"+J+"h"+X+"l-"+X/2+",-"+J+"Z";j.clipDefRelative.select("path").attr("d",ve);var Te=e(K,ne);j.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te),j.clipDefRelative.select("path").attr("transform",null);var Le=e(K-Se._offset,ne+J);j.layers.baxis.attr("transform",Le),j.layers.bgrid.attr("transform",Le);var Oe=e(K+X/2,ne)+"rotate(30)"+e(0,-De._offset);j.layers.aaxis.attr("transform",Oe),j.layers.agrid.attr("transform",Oe);var Ne=e(K+X/2,ne)+"rotate(-30)"+e(0,-ke._offset);j.layers.caxis.attr("transform",Ne),j.layers.cgrid.attr("transform",Ne),j.drawAxes(!0),j.layers.aline.select("path").attr("d",De.showline?"M"+K+","+(ne+J)+"l"+X/2+",-"+J:"M0,0").call(t.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),j.layers.bline.select("path").attr("d",Se.showline?"M"+K+","+(ne+J)+"h"+X:"M0,0").call(t.stroke,Se.linecolor||"#000").style("stroke-width",(Se.linewidth||0)+"px"),j.layers.cline.select("path").attr("d",ke.showline?"M"+(K+X/2)+","+ne+"l"+X/2+","+J:"M0,0").call(t.stroke,ke.linecolor||"#000").style("stroke-width",(ke.linewidth||0)+"px"),j.graphDiv._context.staticPlot||j.initInteractions(),o.setClipUrl(j.layers.frontplot,j._hasClipOnAxisFalse?null:j.clipId,j.graphDiv)},D.drawAxes=function(q){var G=this.graphDiv,K=this.id.substr(7)+"title",ne=this.layers,X=this.aaxis,J=this.baxis,se=this.caxis;if(this.drawAx(X),this.drawAx(J),this.drawAx(se),q){var V=Math.max(X.showticklabels?X.tickfont.size/2:0,(se.showticklabels?.75*se.tickfont.size:0)+("outside"===se.ticks?.87*se.ticklen:0)),j=(J.showticklabels?J.tickfont.size:0)+("outside"===J.ticks?J.ticklen:0)+3;ne["a-title"]=a.draw(G,"a"+K,{propContainer:X,propName:this.id+".aaxis.title",placeholder:r(G,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-X.title.font.size/3-V,"text-anchor":"middle"}}),ne["b-title"]=a.draw(G,"b"+K,{propContainer:J,propName:this.id+".baxis.title",placeholder:r(G,"Click to enter Component B title"),attributes:{x:this.x0-j,y:this.y0+this.h+.83*J.title.font.size+j,"text-anchor":"middle"}}),ne["c-title"]=a.draw(G,"c"+K,{propContainer:se,propName:this.id+".caxis.title",placeholder:r(G,"Click to enter Component C title"),attributes:{x:this.x0+this.w+j,y:this.y0+this.h+.83*se.title.font.size+j,"text-anchor":"middle"}})}},D.drawAx=function(q){var G,K=this.graphDiv,ne=q._name,X=ne.charAt(0),J=q._id,se=this.layers[ne],V=X+"tickLayout",j=(G=q).ticks+String(G.ticklen)+String(G.showticklabels);this[V]!==j&&(se.selectAll("."+J+"tick").remove(),this[V]=j),q.setScale();var H=i.calcTicks(q),oe=i.clipEnds(q,H),U=i.makeTransTickFn(q),te=i.getTickSigns(q)[2],ee=y.deg2rad(30),le=te*(q.linewidth||1)/2,ce=te*q.ticklen,pe=this.w,de=this.h,be="b"===X?"M0,"+le+"l"+Math.sin(ee)*ce+","+Math.cos(ee)*ce:"M"+le+",0l"+Math.cos(ee)*ce+","+-Math.sin(ee)*ce,he={a:"M0,0l"+de+",-"+pe/2,b:"M0,0l-"+pe/2+",-"+de,c:"M0,0l-"+de+","+pe/2}[X];i.drawTicks(K,q,{vals:"inside"===q.ticks?oe:H,layer:se,path:be,transFn:U,crisp:!1}),i.drawGrid(K,q,{vals:oe,layer:this.layers[X+"grid"],path:he,transFn:U,crisp:!1}),i.drawLabels(K,q,{vals:H,layer:se,transFn:U,labelFns:i.makeLabelFns(q,0,30)})};var P=w.MINZOOM/2+.87,L="m-0.87,.5h"+P+"v3h-"+(P+5.2)+"l"+(P/2+2.6)+",-"+(.87*P+4.5)+"l2.6,1.5l-"+P/2+","+.87*P+"Z",S="m0.87,.5h-"+P+"v3h"+(P+5.2)+"l-"+(P/2+2.6)+",-"+(.87*P+4.5)+"l-2.6,1.5l"+P/2+","+.87*P+"Z",E="m0,1l"+P/2+","+.87*P+"l2.6,-1.5l-"+(P/2+2.6)+",-"+(.87*P+4.5)+"l-"+(P/2+2.6)+","+(.87*P+4.5)+"l2.6,1.5l"+P/2+",-"+.87*P+"Z",N=!0;function z(q){p.select(q).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}D.clearOutline=function(){x(this.dragOptions),T(this.dragOptions.gd)},D.initInteractions=function(){var q,G,K,ne,X,J,se,V,j,H,oe,U,te=this,ee=te.layers.plotbg.select("path").node(),le=te.graphDiv,ce=le._fullLayout._zoomlayer;function pe(ve){var Te={};return Te[te.id+".aaxis.min"]=ve.a,Te[te.id+".baxis.min"]=ve.b,Te[te.id+".caxis.min"]=ve.c,Te}function de(ve,Te){var Le=le._fullLayout.clickmode;z(le),2===ve&&(le.emit("plotly_doubleclick",null),b.call("_guiRelayout",le,pe({a:0,b:0,c:0}))),Le.indexOf("select")>-1&&1===ve&&c(Te,le,[te.xaxis],[te.yaxis],te.id,te.dragOptions),Le.indexOf("event")>-1&&u.click(le,Te,te.id)}function be(ve,Te){return 1-Te/te.h}function he(ve,Te){return 1-(ve+(te.h-Te)/Math.sqrt(3))/te.w}function xe(ve,Te){return(ve-(te.h-Te)/Math.sqrt(3))/te.w}function De(ve,Te){var Le=K+ve*q,Oe=ne+Te*G,Ne=Math.max(0,Math.min(1,be(0,ne),be(0,Oe))),Be=Math.max(0,Math.min(1,he(K,ne),he(Le,Oe))),He=Math.max(0,Math.min(1,xe(K,ne),xe(Le,Oe))),Ve=(Ne/2+He)*te.w,it=(1-Ne/2-Be)*te.w,ze=(Ve+it)/2,je=it-Ve,qe=(1-Ne)*te.h,Ye=qe-je/C;je<w.MINZOOM?(se=X,oe.attr("d",j),U.attr("d","M0,0Z")):(se={a:X.a+Ne*J,b:X.b+Be*J,c:X.c+He*J},oe.attr("d",j+"M"+Ve+","+qe+"H"+it+"L"+ze+","+Ye+"L"+Ve+","+qe+"Z"),U.attr("d","M"+K+","+ne+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ve+","+qe+L+"M"+it+","+qe+S+"M"+ze+","+Ye+E)),H||(oe.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),U.transition().style("opacity",1).duration(200),H=!0),le.emit("plotly_relayouting",pe(se))}function Se(){z(le),se!==X&&(b.call("_guiRelayout",le,pe(se)),N&&le.data&&le._context.showTips&&(y.notifier(r(le,"Double-click to zoom back out"),"long"),N=!1))}function ke(ve,Te){var Le=ve/te.xaxis._m,Oe=Te/te.yaxis._m,Ne=[(se={a:X.a-Oe,b:X.b+(Le+Oe)/2,c:X.c-(Le-Oe)/2}).a,se.b,se.c].sort(y.sorterAsc),Be=Ne.indexOf(se.a),He=Ne.indexOf(se.b),Ve=Ne.indexOf(se.c);Ne[0]<0&&(Ne[1]+Ne[0]/2<0?(Ne[2]+=Ne[0]+Ne[1],Ne[0]=Ne[1]=0):(Ne[2]+=Ne[0]/2,Ne[1]+=Ne[0]/2,Ne[0]=0),Te=(X.a-(se={a:Ne[Be],b:Ne[He],c:Ne[Ve]}).a)*te.yaxis._m,ve=(X.c-se.c-X.b+se.b)*te.xaxis._m);var it=e(te.x0+ve,te.y0+Te);te.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",it);var ze=e(-ve,-Te);te.clipDefRelative.select("path").attr("transform",ze),te.aaxis.range=[se.a,te.sum-se.b-se.c],te.baxis.range=[te.sum-se.a-se.c,se.b],te.caxis.range=[te.sum-se.a-se.b,se.c],te.drawAxes(!1),te._hasClipOnAxisFalse&&te.plotContainer.select(".scatterlayer").selectAll(".trace").call(o.hideOutsideRangePoints,te),le.emit("plotly_relayouting",pe(se))}function Fe(){b.call("_guiRelayout",le,pe(se))}this.dragOptions={element:ee,gd:le,plotinfo:{id:te.id,domain:le._fullLayout[te.id].domain,xaxis:te.xaxis,yaxis:te.yaxis},subplot:te.id,prepFn:function(ve,Te,Le){te.dragOptions.xaxes=[te.xaxis],te.dragOptions.yaxes=[te.yaxis],q=le._fullLayout._invScaleX,G=le._fullLayout._invScaleY;var Oe=te.dragOptions.dragmode=le._fullLayout.dragmode;te.dragOptions.minDrag=d(Oe)?1:void 0,"zoom"===Oe?(te.dragOptions.moveFn=De,te.dragOptions.clickFn=de,te.dragOptions.doneFn=Se,function(Ne,Be,He){var Ve=ee.getBoundingClientRect();K=Be-Ve.left,ne=He-Ve.top,le._fullLayout._calcInverseTransform(le);var ze=y.apply3DTransform(le._fullLayout._invTransform)(K,ne);K=ze[0],ne=ze[1],se=X={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},J=te.aaxis.range[1]-X.a,V=g(te.graphDiv._fullLayout[te.id].bgcolor).getLuminance(),j="M0,"+te.h+"L"+te.w/2+", 0L"+te.w+","+te.h+"Z",H=!1,oe=ce.append("path").attr("class","zoombox").attr("transform",e(te.x0,te.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",j),U=ce.append("path").attr("class","zoombox-corners").attr("transform",e(te.x0,te.y0)).style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),te.clearOutline(le)}(0,Te,Le)):"pan"===Oe?(te.dragOptions.moveFn=ke,te.dragOptions.clickFn=de,te.dragOptions.doneFn=Fe,se=X={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},te.clearOutline(le)):(h(Oe)||d(Oe))&&_(ve,Te,Le,te.dragOptions,Oe)}},ee.onmousemove=function(ve){u.hover(le,ve,te.id),le._fullLayout._lasthover=ee,le._fullLayout._hoversubplot=te.id},ee.onmouseout=function(ve){le._dragging||f.unhover(le,ve)},f.init(this.dragOptions)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(v,ae,ie){"use strict";var p=v("./lib/loggers"),g=v("./lib/noop"),b=v("./lib/push_unique"),y=v("./lib/is_plain_object"),e=v("./lib/dom").addStyleRule,r=v("./lib/extend"),t=v("./plots/attributes"),o=v("./plots/layout_attributes"),n=r.extendFlat,m=r.extendDeepAll;function l(c){var T=c.name,x=c.categories,w=c.meta;if(ie.modules[T])p.log("Type "+T+" already registered");else{ie.subplotsRegistry[c.basePlotModule.name]||function(N){var z=N.name;if(ie.subplotsRegistry[z])p.log("Plot type "+z+" already registered.");else for(var q in s(N),ie.subplotsRegistry[z]=N,ie.componentsRegistry)a(q,N.name)}(c.basePlotModule);for(var M={},D=0;D<x.length;D++)M[x[D]]=!0,ie.allCategories[x[D]]=!0;for(var C in ie.modules[T]={_module:c,categories:M},w&&Object.keys(w).length&&(ie.modules[T].meta=w),ie.allTypes.push(T),ie.componentsRegistry)d(C,T);c.layoutAttributes&&n(ie.traceLayoutAttributes,c.layoutAttributes);var P=c.basePlotModule,L=P.name;if("mapbox"===L){var S=P.constants.styleRules;for(var E in S)e(".js-plotly-plot .plotly .mapboxgl-"+E,S[E])}"geo"!==L&&"mapbox"!==L||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(c){if("string"!=typeof c.name)throw new Error("Component module *name* must be a string.");var T=c.name;for(var x in ie.componentsRegistry[T]=c,c.layoutAttributes&&(c.layoutAttributes._isLinkedToArray&&b(ie.layoutArrayContainers,T),s(c)),ie.modules)d(T,x);for(var w in ie.subplotsRegistry)a(T,w);for(var M in ie.transformsRegistry)h(T,M);c.schema&&c.schema.layout&&m(o,c.schema.layout)}function f(c){if("string"!=typeof c.name)throw new Error("Transform module *name* must be a string.");var T="Transform module "+c.name,x="function"==typeof c.transform,w="function"==typeof c.calcTransform;if(!x&&!w)throw new Error(T+" is missing a *transform* or *calcTransform* method.");for(var M in x&&w&&p.log([T+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(c.attributes)||p.log(T+" registered without an *attributes* object."),"function"!=typeof c.supplyDefaults&&p.log(T+" registered without a *supplyDefaults* method."),ie.transformsRegistry[c.name]=c,ie.componentsRegistry)h(M,c.name)}function u(c){var T=c.name,x=T.split("-")[0],w=c.dictionary,M=c.format,D=w&&Object.keys(w).length,C=M&&Object.keys(M).length,P=ie.localeRegistry,L=P[T];if(L||(P[T]=L={}),x!==T){var S=P[x];S||(P[x]=S={}),D&&S.dictionary===L.dictionary&&(S.dictionary=w),C&&S.format===L.format&&(S.format=M)}D&&(L.dictionary=w),C&&(L.format=M)}function s(c){if(c.layoutAttributes){var T=c.layoutAttributes._arrayAttrRegexps;if(T)for(var x=0;x<T.length;x++)b(ie.layoutArrayRegexes,T[x])}}function d(c,T){var x=ie.componentsRegistry[c].schema;if(x&&x.traces){var w=x.traces[T];w&&m(ie.modules[T]._module.attributes,w)}}function h(c,T){var x=ie.componentsRegistry[c].schema;if(x&&x.transforms){var w=x.transforms[T];w&&m(ie.transformsRegistry[T].attributes,w)}}function a(c,T){var x=ie.componentsRegistry[c].schema;if(x&&x.subplots){var w=ie.subplotsRegistry[T],M=w.layoutAttributes,D="subplot"===w.attr?w.name:w.attr;Array.isArray(D)&&(D=D[0]);var C=x.subplots[D];M&&C&&m(M,C)}}function _(c){return"object"==typeof c&&(c=c.type),c}ie.modules={},ie.allCategories={},ie.allTypes=[],ie.subplotsRegistry={},ie.transformsRegistry={},ie.componentsRegistry={},ie.layoutArrayContainers=[],ie.layoutArrayRegexes=[],ie.traceLayoutAttributes={},ie.localeRegistry={},ie.apiMethodRegistry={},ie.collectableSubplotTypes=null,ie.register=function(c){if(ie.collectableSubplotTypes=null,!c)throw new Error("No argument passed to Plotly.register.");c&&!Array.isArray(c)&&(c=[c]);for(var T=0;T<c.length;T++){var x=c[T];if(!x)throw new Error("Invalid module was attempted to be registered!");switch(x.moduleType){case"trace":l(x);break;case"transform":f(x);break;case"component":i(x);break;case"locale":u(x);break;case"apiMethod":ie.apiMethodRegistry[x.name]=x.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ie.getModule=function(c){var T=ie.modules[_(c)];return!!T&&T._module},ie.traceIs=function(c,T){if("various"===(c=_(c)))return!1;var x=ie.modules[c];return x||(c&&p.log("Unrecognized trace type "+c+"."),x=ie.modules[t.type.dflt]),!!x.categories[T]},ie.getTransformIndices=function(c,T){for(var x=[],w=c.transforms||[],M=0;M<w.length;M++)w[M].type===T&&x.push(M);return x},ie.hasTransform=function(c,T){for(var x=c.transforms||[],w=0;w<x.length;w++)if(x[w].type===T)return!0;return!1},ie.getComponentMethod=function(c,T){var x=ie.componentsRegistry[c];return x&&x[T]||g},ie.call=function(){var c=arguments[0],T=[].slice.call(arguments,1);return ie.apiMethodRegistry[c].apply(null,T)}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(v,ae,ie){"use strict";var p=v("../registry"),g=v("../lib"),b=g.extendFlat,y=g.extendDeep;function e(r){var t;switch(r){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}ae.exports=function(r,t){var o,l=r.layout,i=y([],r.data),f=y({},l,e(t.tileClass)),u=r._context||{};if(t.width&&(f.width=t.width),t.height&&(f.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){f.annotations=[];var s=Object.keys(f);for(o=0;o<s.length;o++)["xaxis","yaxis","zaxis"].indexOf(s[o].slice(0,5))>-1&&(f[s[o]].title={text:""});for(o=0;o<i.length;o++){var d=i[o];d.showscale=!1,d.marker&&(d.marker.showscale=!1),p.traceIs(d,"pie-like")&&(d.textposition="none")}}if(Array.isArray(t.annotations))for(o=0;o<t.annotations.length;o++)f.annotations.push(t.annotations[o]);var h=Object.keys(f).filter(function(x){return x.match(/^scene\d*$/)});if(h.length){var a={};for("thumbnail"===t.tileClass&&(a={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),o=0;o<h.length;o++){var _=f[h[o]];_.xaxis||(_.xaxis={}),_.yaxis||(_.yaxis={}),_.zaxis||(_.zaxis={}),b(_.xaxis,a),b(_.yaxis,a),b(_.zaxis,a),_._scene=null}}var c=document.createElement("div");t.tileClass&&(c.className=t.tileClass);var T={gd:c,td:c,layout:f,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return"transparent"!==t.setBackground&&(T.config.setBackground=t.setBackground||"opaque"),T.gd.defaultLayout=e(t.tileClass),T}},{"../lib":515,"../registry":647}],649:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plot_api/to_image"),b=v("./filesaver"),y=v("./helpers");ae.exports=function(e,r){var t;return p.isPlainObject(e)||(t=p.getGraphDiv(e)),(r=r||{}).format=r.format||"png",r.width=r.width||null,r.height=r.height||null,r.imageDataOnly=!0,new Promise(function(o,n){t&&t._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),p.isIE()&&"svg"!==r.format&&n(new Error(y.MSG_IE_BAD_FORMAT)),t&&(t._snapshotInProgress=!0);var m=g(e,r),l=r.filename||e.fn||"newplot";l+="."+r.format.replace("-","."),m.then(function(i){return t&&(t._snapshotInProgress=!1),b(i,l,r.format)}).then(function(i){o(i)}).catch(function(i){t&&(t._snapshotInProgress=!1),n(i)})})}},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("./helpers");ae.exports=function(b,y,e){var r=document.createElement("a"),t="download"in r;return new Promise(function(o,n){var m,l;return p.isIE()?(m=g.createBlob(b,"svg"),window.navigator.msSaveBlob(m,y),m=null,o(y)):t?(m=g.createBlob(b,e),l=g.createObjectURL(m),r.href=l,r.download=y,document.body.appendChild(r),r.click(),document.body.removeChild(r),g.revokeObjectURL(l),m=null,o(y)):p.isSafari()?(g.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(b)),o(y)):void n(new Error("download error"))})}},{"../lib":515,"./helpers":651}],651:[function(v,ae,ie){"use strict";var p=v("../registry");ie.getDelay=function(b){return b._has&&(b._has("gl3d")||b._has("gl2d")||b._has("mapbox"))?500:0},ie.getRedrawFunc=function(b){return function(){p.getComponentMethod("colorbar","draw")(b)}},ie.encodeSVG=function(b){return"data:image/svg+xml,"+encodeURIComponent(b)},ie.encodeJSON=function(b){return"data:application/json,"+encodeURIComponent(b)};var g=window.URL||window.webkitURL;ie.createObjectURL=function(b){return g.createObjectURL(b)},ie.revokeObjectURL=function(b){return g.revokeObjectURL(b)},ie.createBlob=function(b,y){if("svg"===y)return new window.Blob([b],{type:"image/svg+xml;charset=utf-8"});if("full-json"===y)return new window.Blob([b],{type:"application/json;charset=utf-8"});var e=function(r){for(var t=r.length,o=new ArrayBuffer(t),n=new Uint8Array(o),m=0;m<t;m++)n[m]=r.charCodeAt(m);return o}(window.atob(b));return new window.Blob([e],{type:"image/"+y})},ie.octetStream=function(b){document.location.href="data:application/octet-stream"+b},ie.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ie.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(v,ae,ie){"use strict";var p=v("./helpers"),g={getDelay:p.getDelay,getRedrawFunc:p.getRedrawFunc,clone:v("./cloneplot"),toSVG:v("./tosvg"),svgToImg:v("./svgtoimg"),toImage:v("./toimage"),downloadImage:v("./download")};ae.exports=g},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("events").EventEmitter,b=v("./helpers");ae.exports=function(y){var e=y.emitter||new g,r=new Promise(function(t,o){var n=window.Image,m=y.svg,l=y.format||"png";if(p.isIE()&&"svg"!==l){var i=new Error(b.MSG_IE_BAD_FORMAT);return o(i),y.promise?r:e.emit("error",i)}var f,u,s=y.canvas,d=y.scale||1,_=d*(y.width||300),c=d*(y.height||150),T=s.getContext("2d",{willReadFrequently:!0}),x=new n;"svg"===l||p.isSafari()?u=b.encodeSVG(m):(f=b.createBlob(m,"svg"),u=b.createObjectURL(f)),s.width=_,s.height=c,x.onload=function(){var w;switch(f=null,b.revokeObjectURL(u),"svg"!==l&&T.drawImage(x,0,0,_,c),l){case"jpeg":w=s.toDataURL("image/jpeg");break;case"png":w=s.toDataURL("image/png");break;case"webp":w=s.toDataURL("image/webp");break;case"svg":w=u;break;default:var M="Image format is not jpeg, png, svg or webp.";if(o(new Error(M)),!y.promise)return e.emit("error",M)}t(w),y.promise||e.emit("success",w)},x.onerror=function(w){if(f=null,b.revokeObjectURL(u),o(w),!y.promise)return e.emit("error",w)},x.src=u});return y.promise?r:e}},{"../lib":515,"./helpers":651,events:84}],654:[function(v,ae,ie){"use strict";var p=v("events").EventEmitter,g=v("../registry"),b=v("../lib"),y=v("./helpers"),e=v("./cloneplot"),r=v("./tosvg"),t=v("./svgtoimg");ae.exports=function(o,n){var m=new p,l=e(o,{format:"png"}),i=l.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var f=y.getRedrawFunc(i);return g.call("_doPlot",i,l.data,l.layout,l.config).then(f).then(function(){var u=y.getDelay(i._fullLayout);setTimeout(function(){var s=r(i),d=document.createElement("canvas");d.id=b.randstr(),(m=t({format:n.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:d,emitter:m,svg:s})).clean=function(){i&&document.body.removeChild(i)}},u)}).catch(function(u){m.emit("error",u)}),m}},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../lib"),b=v("../components/drawing"),y=v("../components/color"),e=v("../constants/xmlns_namespaces"),r=/"/g,t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");ae.exports=function(o,n,m){var l,i=o._fullLayout,f=i._paper,u=i._toppaper,s=i.width,d=i.height;f.insert("rect",":first-child").call(b.setRect,0,0,s,d).call(y.fill,i.paper_bgcolor);var h=i._basePlotModules||[];for(l=0;l<h.length;l++){var a=h[l];a.toSVG&&a.toSVG(o)}if(u){var _=u.node().childNodes,c=Array.prototype.slice.call(_);for(l=0;l<c.length;l++){var T=c[l];T.childNodes.length&&f.node().appendChild(T)}}i._draggers&&i._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var w=p.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){w.style({visibility:null,display:null});var M=this.style.fontFamily;M&&-1!==M.indexOf('"')&&w.style("font-family",M.replace(r,"TOBESTRIPPED"))}else w.remove()}),f.selectAll(".gradient_filled,.pattern_filled").each(function(){var w=p.select(this),M=this.style.fill;M&&-1!==M.indexOf("url(")&&w.style("fill",M.replace(r,"TOBESTRIPPED"));var D=this.style.stroke;D&&-1!==D.indexOf("url(")&&w.style("stroke",D.replace(r,"TOBESTRIPPED"))}),"pdf"!==n&&"eps"!==n||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===n&&m&&(f.attr("width",m*s),f.attr("height",m*d),f.attr("viewBox","0 0 "+s+" "+d));var w,M,D,x=(new window.XMLSerializer).serializeToString(f.node());return w=x,M=p.select("body").append("div").style({display:"none"}).html(""),D=w.replace(/(&[^;]*;)/gi,function(C){return"&lt;"===C?"&#60;":"&rt;"===C?"&#62;":-1!==C.indexOf("<")||-1!==C.indexOf(">")?"":M.html(C).text()}),M.remove(),x=(x=(x=D).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),g.isIE()&&(x=(x=(x=x.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),x}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){for(var y=0;y<g.length;y++)g[y].i=y;p.mergeArray(b.text,g,"tx"),p.mergeArray(b.hovertext,g,"htx");var e=b.marker;if(e){p.mergeArray(e.opacity,g,"mo",!0),p.mergeArray(e.color,g,"mc");var r=e.line;r&&(p.mergeArray(r.color,g,"mlc"),p.mergeArrayCastPositive(r.width,g,"mlw"))}}},{"../../lib":515}],657:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),r=v("../../plots/font_attributes"),t=v("./constants"),o=v("../../components/drawing/attributes").pattern,n=v("../../lib/extend").extendFlat,m=r({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=n({},p.marker.line.width,{dflt:0}),i=n({width:l,editType:"calc"},e("marker.line")),f=n({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:o});ae.exports={x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),text:p.text,texttemplate:y({editType:"plot"},{keys:t.eventDataKeys}),hovertext:p.hovertext,hovertemplate:b({},{keys:t.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},m,{}),insidetextfont:n({},m,{}),outsidetextfont:n({},m,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},p.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:f,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,color:p.selected.marker.color,editType:"style"},textfont:p.selected.textfont,editType:"style"},unselected:{marker:{opacity:p.unselected.marker.opacity,color:p.unselected.marker.color,editType:"style"},textfont:p.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/align_period"),b=v("../../components/colorscale/helpers").hasColorscale,y=v("../../components/colorscale/calc"),e=v("./arrays_to_calcdata"),r=v("../scatter/calc_selection");ae.exports=function(t,o){var n,m,l,i,f,u,s=p.getFromId(t,o.xaxis||"x"),d=p.getFromId(t,o.yaxis||"y"),h={msUTC:!(!o.base&&0!==o.base)};"h"===o.orientation?(n=s.makeCalcdata(o,"x",h),l=d.makeCalcdata(o,"y"),i=g(o,d,"y",l),f=!!o.yperiodalignment,u="y"):(n=d.makeCalcdata(o,"y",h),l=s.makeCalcdata(o,"x"),i=g(o,s,"x",l),f=!!o.xperiodalignment,u="x"),m=i.vals;for(var a=Math.min(m.length,n.length),_=new Array(a),c=0;c<a;c++)_[c]={p:m[c],s:n[c]},f&&(_[c].orig_p=l[c],_[c][u+"End"]=i.ends[c],_[c][u+"Start"]=i.starts[c]),o.ids&&(_[c].id=String(o.ids[c]));return b(o,"marker")&&y(t,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),b(o,"marker.line")&&y(t,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(_,o),r(_,o),_}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(v,ae,ie){"use strict";ae.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib").isArrayOrTypedArray,b=v("../../constants/numerical").BADNUM,y=v("../../registry"),e=v("../../plots/cartesian/axes"),r=v("../../plots/cartesian/constraints").getAxisGroup,t=v("./sieve.js");function o(a,_,c,T,x){if(T.length){var w,M,D,C;switch(function(P,L){var S,E;for(S=0;S<L.length;S++){var N,z=L[S],q=z[0].trace,G="funnel"===q.type?q._base:q.base,K="h"===q.orientation?q.xcalendar:q.ycalendar,ne="category"===P.type||"multicategory"===P.type?function(){return null}:P.d2c;if(g(G)){for(E=0;E<Math.min(G.length,z.length);E++)N=ne(G[E],0,K),p(N)?(z[E].b=+N,z[E].hasB=1):z[E].b=0;for(;E<z.length;E++)z[E].b=0}else{N=ne(G,0,K);var X=p(N);for(N=X?N:0,E=0;E<z.length;E++)z[E].b=N,X&&(z[E].hasB=1)}}}(c,T),x.mode){case"overlay":n(_,c,T,x);break;case"group":for(w=[],M=[],D=0;D<T.length;D++)void 0===(C=T[D])[0].trace.offset?M.push(C):w.push(C);M.length&&(P=a,S=c,z=new t(M,{posAxis:L=_,sepNegVal:!1,overlapNoMerge:!(N=x).norm}),function(q,G,K,ne){for(var X=q._fullLayout,V=K.minDiff,j=K.traces,H=j.length,oe=K.positions.length!==K.distinctPositions.length,U=V*(1-ne.gap),te=r(X,G._id)+j[0][0].trace.orientation,ee=X._alignmentOpts[te]||{},le=0;le<H;le++){var ce,pe,de=j[le],be=de[0].trace,xe=Object.keys((ee[be.alignmentgroup]||{}).offsetGroups||{}).length,De=(ce=xe?U/xe:oe?U/H:U)*(1-(ne.groupgap||0));pe=xe?((2*be._offsetIndex+1-xe)*ce-De)/2:oe?((2*le+1-H)*ce-De)/2:-De/2;var Se=de[0].t;Se.barwidth=De,Se.poffset=pe,Se.bargroupwidth=U,Se.bardelta=V}K.binWidth=j[0][0].t.barwidth/100,l(K),i(G,K),f(G,K,oe)}(P,L,z,N),function(q,G){for(var K=q.traces,ne=0;ne<K.length;ne++){var X=K[ne];if(void 0===X[0].trace.base)for(var J=new t([X],{posAxis:G,sepNegVal:!0,overlapNoMerge:!0}),se=0;se<X.length;se++){var V=X[se];if(V.p!==b){var j=J.put(V.p,V.b+V.s);j&&(V.b=j)}}}}(z,L),N.norm?(s(z),d(S,z,N)):u(S,z)),w.length&&n(_,c,w,x);break;case"stack":case"relative":for(w=[],M=[],D=0;D<T.length;D++)void 0===(C=T[D])[0].trace.base?M.push(C):w.push(C);M.length&&function(P,L,S,E,N){var z=new t(E,{posAxis:L,sepNegVal:"relative"===N.mode,overlapNoMerge:!(N.norm||"stack"===N.mode||"relative"===N.mode)});m(L,z,N),function(X,J,se){var V,j,H,oe,U,te,ee=h(X),le=J.traces;for(oe=0;oe<le.length;oe++)if("funnel"===(j=(V=le[oe])[0].trace).type)for(U=0;U<V.length;U++)(te=V[U]).s!==b&&J.put(te.p,-.5*te.s);for(oe=0;oe<le.length;oe++){H="funnel"===(j=(V=le[oe])[0].trace).type;var ce=[];for(U=0;U<V.length;U++)if((te=V[U]).s!==b){var pe,de=J.put(te.p,pe=H?te.s:te.s+te.b),be=de+pe;te.b=de,te[ee]=be,se.norm||(ce.push(be),te.hasB&&ce.push(de))}se.norm||(j._extremes[X._id]=e.findExtremes(X,ce,{tozero:!0,padded:!0}))}}(S,z,N);for(var q=0;q<E.length;q++)for(var G=E[q],K=0;K<G.length;K++){var ne=G[K];ne.s!==b&&ne.b+ne.s===z.get(ne.p,ne.s)&&(ne._outmost=!0)}N.norm&&d(S,z,N)}(0,_,c,M,x),w.length&&n(_,c,w,x)}!function(P,L){var S,E,N,z=h(L),q={},G=1/0,K=-1/0;for(S=0;S<P.length;S++)for(N=P[S],E=0;E<N.length;E++){var ne=N[E].p;p(ne)&&(G=Math.min(G,ne),K=Math.max(K,ne))}var X=1e4/(K-G),J=q.round=function(te){return String(Math.round(X*(te-G)))};for(S=0;S<P.length;S++){(N=P[S])[0].t.extents=q;var se=N[0].t.poffset,V=Array.isArray(se);for(E=0;E<N.length;E++){var j=N[E],H=j[z]-j.w/2;if(p(H)){var oe=j[z]+j.w/2,U=J(j.p);q[U]=q[U]?[Math.min(H,q[U][0]),Math.max(oe,q[U][1])]:[H,oe]}j.p0=j.p+(V?se[E]:se),j.p1=j.p0+j.w,j.s0=j.b,j.s1=j.s0+j.s}}}(T,_)}var P,L,S,N,z}function n(a,_,c,T){for(var x=0;x<c.length;x++){var M=new t([c[x]],{posAxis:a,sepNegVal:!1,overlapNoMerge:!T.norm});m(a,M,T),T.norm?(s(M),d(_,M,T)):u(_,M)}}function m(a,_,c){for(var T=_.minDiff,x=_.traces,w=T*(1-c.gap),M=w*(1-(c.groupgap||0)),D=-M/2,C=0;C<x.length;C++){var P=x[C][0].t;P.barwidth=M,P.poffset=D,P.bargroupwidth=w,P.bardelta=T}_.binWidth=x[0][0].t.barwidth/100,l(_),i(a,_),f(a,_)}function l(a){var _,c,T=a.traces;for(_=0;_<T.length;_++){var x,w=T[_],M=w[0],D=M.trace,C=M.t,P=D._offset||D.offset,L=C.poffset;if(g(P)){for(x=Array.prototype.slice.call(P,0,w.length),c=0;c<x.length;c++)p(x[c])||(x[c]=L);for(c=x.length;c<w.length;c++)x.push(L);C.poffset=x}else void 0!==P&&(C.poffset=P);var S=D._width||D.width,E=C.barwidth;if(g(S)){var N=Array.prototype.slice.call(S,0,w.length);for(c=0;c<N.length;c++)p(N[c])||(N[c]=E);for(c=N.length;c<w.length;c++)N.push(E);if(C.barwidth=N,void 0===P){for(x=[],c=0;c<w.length;c++)x.push(L+(E-N[c])/2);C.poffset=x}}else void 0!==S&&(C.barwidth=S,void 0===P&&(C.poffset=L+(E-S)/2))}}function i(a,_){for(var c=_.traces,T=h(a),x=0;x<c.length;x++)for(var w=c[x],M=w[0].t,D=M.poffset,C=Array.isArray(D),P=M.barwidth,L=Array.isArray(P),S=0;S<w.length;S++){var E=w[S],N=E.w=L?P[S]:P;E[T]=E.p+(C?D[S]:D)+N/2}}function f(a,_,c){var T=_.traces,x=_.minDiff/2;e.minDtick(a,_.minDiff,_.distinctPositions[0],c);for(var w=0;w<T.length;w++){var M,D,C,P,L=T[w],S=L[0],E=S.trace,N=[];for(P=0;P<L.length;P++)D=(M=L[P]).p-x,N.push(D,C=M.p+x);if(E.width||E.offset){var z=S.t,q=z.poffset,G=z.barwidth,K=Array.isArray(q),ne=Array.isArray(G);for(P=0;P<L.length;P++)C=(D=(M=L[P]).p+(K?q[P]:q))+(ne?G[P]:G),N.push(D,C)}E._extremes[a._id]=e.findExtremes(a,N,{padded:!1})}}function u(a,_){for(var c=_.traces,T=h(a),x=0;x<c.length;x++){for(var w=c[x],M=w[0].trace,D=[],C=!1,P=0;P<w.length;P++){var L=w[P],S=L.b,E=S+L.s;L[T]=E,D.push(E),L.hasB&&D.push(S),L.hasB&&L.b||(C=!0)}M._extremes[a._id]=e.findExtremes(a,D,{tozero:C,padded:!0})}}function s(a){for(var _=a.traces,c=0;c<_.length;c++)for(var T=_[c],x=0;x<T.length;x++){var w=T[x];w.s!==b&&a.put(w.p,w.b+w.s)}}function d(a,_,c){var T=_.traces,x=h(a),w="fraction"===c.norm?1:100,M=w/1e9,D=a.l2c(a.c2l(0)),C="stack"===c.mode?w:D;function P(se){return p(a.c2l(se))&&(se<D-M||se>C+M||!p(D))}for(var L=0;L<T.length;L++){for(var S=T[L],E=S[0].trace,N=[],z=!1,q=!1,G=0;G<S.length;G++){var K=S[G];if(K.s!==b){var ne=Math.abs(w/_.get(K.p,K.s));K.b*=ne,K.s*=ne;var X=K.b,J=X+K.s;K[x]=J,N.push(J),q=q||P(J),K.hasB&&(N.push(X),q=q||P(X)),K.hasB&&K.b||(z=!0)}}E._extremes[a._id]=e.findExtremes(a,N,{tozero:z,padded:q})}}function h(a){return a._id.charAt(0)}ae.exports={crossTraceCalc:function(a,_){for(var c=_.xaxis,T=_.yaxis,x=a._fullLayout,w=a._fullData,M=a.calcdata,D=[],C=[],P=0;P<w.length;P++){var L=w[P];if(!0===L.visible&&y.traceIs(L,"bar")&&L.xaxis===c._id&&L.yaxis===T._id&&("h"===L.orientation?D.push(M[P]):C.push(M[P]),L._computePh))for(var S=a.calcdata[P],E=0;E<S.length;E++)"function"==typeof S[E].ph0&&(S[E].ph0=S[E].ph0()),"function"==typeof S[E].ph1&&(S[E].ph1=S[E].ph1())}var N={xCat:"category"===c.type||"multicategory"===c.type,yCat:"category"===T.type||"multicategory"===T.type,mode:x.barmode,norm:x.barnorm,gap:x.bargap,groupgap:x.bargroupgap};o(a,c,T,C,N),o(a,T,c,D,N)},setGroupPositions:o}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../../registry"),y=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),r=v("./style_defaults"),t=v("../../plots/cartesian/constraints").getAxisGroup,o=v("./attributes"),n=p.coerceFont;function m(i,f,u,s){var d=f.orientation,a=t(u,f[{v:"x",h:"y"}[d]+"axis"])+d,_=u._alignmentOpts||{},c=s("alignmentgroup"),T=_[a];T||(T=_[a]={});var x=T[c];x?x.traces.push(f):x=T[c]={traces:[f],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var w=s("offsetgroup"),M=x.offsetGroups,D=M[w];w&&(D||(D=M[w]={offsetIndex:Object.keys(M).length}),f._offsetIndex=D.offsetIndex)}function l(i,f,u,s,d,h){var a=!1!==(h=h||{}).moduleHasSelected,_=!1!==h.moduleHasUnselected,c=!1!==h.moduleHasConstrain,T=!1!==h.moduleHasCliponaxis,x=!1!==h.moduleHasTextangle,w=!1!==h.moduleHasInsideanchor,M=!!h.hasPathbar,D=Array.isArray(d)||"auto"===d,C=D||"inside"===d,P=D||"outside"===d;if(C||P){var L=n(s,"textfont",u.font),S=p.extendFlat({},L),E=!(i.textfont&&i.textfont.color);if(E&&delete S.color,n(s,"insidetextfont",S),M){var N=p.extendFlat({},L);E&&delete N.color,n(s,"pathbar.textfont",N)}P&&n(s,"outsidetextfont",L),a&&s("selected.textfont.color"),_&&s("unselected.textfont.color"),c&&s("constraintext"),T&&s("cliponaxis"),x&&s("textangle"),s("texttemplate")}C&&w&&s("insidetextanchor")}ae.exports={supplyDefaults:function(i,f,u,s){function d(c,T){return p.coerce(i,f,o,c,T)}if(y(i,f,s,d)){e(i,f,s,d),d("xhoverformat"),d("yhoverformat"),d("orientation",f.x&&!f.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var h=d("textposition");l(i,0,s,d,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r(i,f,d,u,s);var a=(f.marker.line||{}).color,_=b.getComponentMethod("errorbars","supplyDefaults");_(i,f,a||g.defaultLine,{axis:"y"}),_(i,f,a||g.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(f,d)}else f.visible=!1},crossTraceDefaults:function(i,f){var u;function s(h){return p.coerce(u._input,u,o,h)}if("group"===f.barmode)for(var d=0;d<i.length;d++)"bar"===(u=i[d]).type&&m(0,u,f,s)},handleGroupingDefaults:m,handleText:l}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){return p.x="xVal"in g?g.xVal:g.x,p.y="yVal"in g?g.yVal:g.y,g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),"h"===b.orientation?(p.label=p.y,p.value=p.x):(p.label=p.x,p.value=p.y),p}},{}],663:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("tinycolor2"),b=v("../../lib").isArrayOrTypedArray;ie.coerceString=function(y,e,r){if("string"==typeof e){if(e||!y.noBlank)return e}else if(("number"==typeof e||!0===e)&&!y.strict)return String(e);return void 0!==r?r:y.dflt},ie.coerceNumber=function(y,e,r){if(p(e)){e=+e;var t=y.min,o=y.max;if(!(void 0!==t&&e<t||void 0!==o&&e>o))return e}return void 0!==r?r:y.dflt},ie.coerceColor=function(y,e,r){return g(e).isValid()?e:void 0!==r?r:y.dflt},ie.coerceEnumerated=function(y,e,r){return y.coerceNumber&&(e=+e),-1!==y.values.indexOf(e)?e:void 0!==r?r:y.dflt},ie.getValue=function(y,e){var r;return Array.isArray(y)?e<y.length&&(r=y[e]):r=y,r},ie.getLineWidth=function(y,e){return 0<e.mlw?e.mlw:b(y.marker.line.width)?0:y.marker.line.width}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(v,ae,ie){"use strict";var p=v("../../components/fx"),g=v("../../registry"),b=v("../../components/color"),y=v("../../lib").fillText,e=v("./helpers").getLineWidth,r=v("../../plots/cartesian/axes").hoverLabelText,t=v("../../constants/numerical").BADNUM;function o(m,l,i,f,u){var s,d,h,a,_,c,T,x=m.cd,w=x[0].trace,M=x[0].t,D="closest"===f,C="waterfall"===w.type,P=m.maxHoverDistance,L=m.maxSpikeDistance;"h"===w.orientation?(s=i,d=l,h="y",a="x",_=V,c=J):(s=l,d=i,h="x",a="y",c=V,_=J);var S=w[h+"period"],E=D||S;function N(ce){return q(ce,-1)}function z(ce){return q(ce,1)}function q(ce,pe){return ce[h]+pe*ce.w/2}function G(ce){return ce[h+"End"]-ce[h+"Start"]}var K=D?N:S?function(ce){return ce.p-G(ce)/2}:function(ce){return Math.min(N(ce),ce.p-M.bardelta/2)},ne=D?z:S?function(ce){return ce.p+G(ce)/2}:function(ce){return Math.max(z(ce),ce.p+M.bardelta/2)};function X(ce,pe,de){return u.finiteRange&&(de=0),p.inbox(ce-s,pe-s,de+Math.min(1,Math.abs(pe-ce)/T)-1)}function J(ce){return X(K(ce),ne(ce),P)}function se(ce){var pe=ce[a];if(C){var de=Math.abs(ce.rawS)||0;d>0?pe+=de:d<0&&(pe-=de)}return pe}function V(ce){var pe=d,de=ce.b,be=se(ce);return p.inbox(de-pe,be-pe,P+(be-pe)/(be-de)-1)}var j=m[h+"a"],H=m[a+"a"];T=Math.abs(j.r2c(j.range[1])-j.r2c(j.range[0]));var ce,pe,de,be,oe=p.getDistanceFunction(f,_,c,function(ce){return(_(ce)+c(ce))/2});if(p.getClosest(x,oe,m),!1!==m.index&&x[m.index].p!==t){E||(K=function(ce){return Math.min(N(ce),ce.p-M.bargroupwidth/2)},ne=function(ce){return Math.max(z(ce),ce.p+M.bargroupwidth/2)});var U=x[m.index],te=w.base?U.b+U.s:U.s;m[a+"0"]=m[a+"1"]=H.c2p(U[a],!0),m[a+"LabelVal"]=te;var ee=M.extents[M.extents.round(U.p)];return m[h+"0"]=j.c2p(D?K(U):ee[0],!0),m[h+"1"]=j.c2p(D?ne(U):ee[1],!0),m[h+"LabelVal"]=void 0!==U.orig_p?U.orig_p:U.p,m.labelLabel=r(j,m[h+"LabelVal"],w[h+"hoverformat"]),m.valueLabel=r(H,m[a+"LabelVal"],w[a+"hoverformat"]),m.baseLabel=r(H,U.b,w[a+"hoverformat"]),m.spikeDistance=(pe=d,de=(ce=U).b,be=se(ce),(p.inbox(de-pe,be-pe,L+(be-pe)/(be-de)-1)+function(ce){return X(N(ce),z(ce),L)}(U))/2),m[h+"Spike"]=j.c2p(U.p,!0),y(U,w,m),m.hovertemplate=w.hovertemplate,m}}function n(m,l){var i=l.mcc||m.marker.color,f=l.mlcc||m.marker.line.color,u=e(m,l);return b.opacity(i)?i:b.opacity(f)&&u?f:void 0}ae.exports={hoverPoints:function(m,l,i,f,u){var s=o(m,l,i,f,u);if(s){var d=s.cd,h=d[0].trace,a=d[s.index];return s.color=n(h,a),g.getComponentMethod("errorbars","hoverInfo")(a,h,s),[s]}},hoverOnBars:o,getTraceColor:n}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,colorbar:v("../scatter/marker_colorbar"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"bar",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(v,ae,ie){"use strict";ae.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../plots/cartesian/axes"),b=v("../../lib"),y=v("./layout_attributes");ae.exports=function(e,r,t){function o(h,a){return b.coerce(e,r,y,h,a)}for(var n=!1,m=!1,l=!1,i={},f=o("barmode"),u=0;u<t.length;u++){var s=t[u];if(p.traceIs(s,"bar")&&s.visible){if(n=!0,"group"===f){var d=s.xaxis+s.yaxis;i[d]&&(l=!0),i[d]=!0}s.visible&&"histogram"===s.type&&"category"!==g.getFromId({_fullLayout:r},s["v"===s.orientation?"xaxis":"yaxis"]).type&&(m=!0)}}n?("overlay"!==f&&o("barnorm"),o("bargap",m&&!l?0:.2),o("bargroupgap")):delete r.barmode}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../../lib"),y=v("../../lib/svg_text_utils"),e=v("../../components/color"),r=v("../../components/drawing"),t=v("../../registry"),o=v("../../plots/cartesian/axes").tickText,n=v("./uniform_text"),m=n.recordMinTextSize,l=n.clearMinTextSize,i=v("./style"),f=v("./helpers"),u=v("./constants"),s=v("./attributes"),d=s.text,h=s.textposition,a=v("../../components/fx/helpers").appendArrayPointValue,_=u.TEXTPAD;function c(L){return L.id}function x(L,S){return L<S?1:-1}function w(L,S,E,N){var z;return!S.uniformtext.mode&&M(E)?(N&&(z=N()),L.transition().duration(E.duration).ease(E.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()})):L}function M(L){return L&&L.duration>0}function D(L){return"auto"===L?0:L}function C(L,S){var E=Math.PI/180*S,N=Math.abs(Math.sin(E)),z=Math.abs(Math.cos(E));return{x:L.width*z+L.height*N,y:L.width*N+L.height*z}}function P(L,S,E,N,z,q){var G=!!q.isHorizontal,K=!!q.constrained,ne=q.angle||0,X=q.anchor||"end",J="end"===X,se="start"===X,V=((q.leftToRight||0)+1)/2,j=1-V,H=z.width,oe=z.height,U=Math.abs(S-L),te=Math.abs(N-E),ee=U>2*_&&te>2*_?_:0;U-=2*ee,te-=2*ee;var le=D(ne);"auto"!==ne||H<=U&&oe<=te||!(H>U||oe>te)||(H>te||oe>U)&&H<oe==U<te||(le+=90);var ce=C(z,le),pe=1;K&&(pe=Math.min(1,U/ce.x,te/ce.y));var de=z.left*j+z.right*V,be=(z.top+z.bottom)/2,he=(L+_)*j+(S-_)*V,xe=(E+N)/2,De=0,Se=0;if(se||J){var ke=(G?ce.x:ce.y)/2,Fe=G?x(L,S):x(E,N);G?se?(he=L+Fe*ee,De=-Fe*ke):(he=S-Fe*ee,De=Fe*ke):se?(xe=E+Fe*ee,Se=-Fe*ke):(xe=N-Fe*ee,Se=Fe*ke)}return{textX:de,textY:be,targetX:he,targetY:xe,anchorX:De,anchorY:Se,scale:pe,rotate:le}}ae.exports={plot:function(L,S,E,N,z,q){var G=S.xaxis,K=S.yaxis,ne=L._fullLayout;z||(z={mode:ne.barmode,norm:ne.barmode,gap:ne.bargap,groupgap:ne.bargroupgap},l("bar",ne));var X=b.makeTraceGroups(N,E,"trace bars").each(function(J){var se=p.select(this),V=J[0].trace,oe="bar"===V.type||"funnel"===V.type,U=0;"waterfall"===V.type&&V.connector.visible&&"between"===V.connector.mode&&(U=V.connector.line.width/2);var te="h"===V.orientation,ee=M(z),le=b.ensureSingle(se,"g","points"),ce=function T(L){if(L.ids)return c}(V),pe=le.selectAll("g.point").data(b.identity,ce);pe.enter().append("g").classed("point",!0),pe.exit().remove(),pe.each(function(be,he){var xe,De,ze,je,qe,Ye,ct,vt,wt,Ot,Se=p.select(this),ke=(je=G,qe=K,vt=[],Ot=(Ye=te)?qe:je,(ct=[])[0]=(wt=Ye?je:qe).c2p((ze=be).s0,!0),vt[0]=Ot.c2p(ze.p0,!0),ct[1]=wt.c2p(ze.s1,!0),vt[1]=Ot.c2p(ze.p1,!0),Ye?[ct,vt]:[vt,ct]),Fe=ke[0][0],ve=ke[0][1],Te=ke[1][0],Le=ke[1][1],Oe=0==(te?ve-Fe:Le-Te);if(Oe&&oe&&f.getLineWidth(V,be)&&(Oe=!1),Oe||(Oe=!(g(Fe)&&g(ve)&&g(Te)&&g(Le))),be.isBlank=Oe,Oe&&(te?ve=Fe:Le=Te),U&&!Oe&&(te?(Fe-=x(Fe,ve)*U,ve+=x(Fe,ve)*U):(Te-=x(Te,Le)*U,Le+=x(Te,Le)*U)),"waterfall"===V.type){if(!Oe){var Ne=V[be.dir].marker;xe=Ne.line.width,De=Ne.color}}else xe=f.getLineWidth(V,be),De=be.mc||V.marker.color;function Be(ze){var je=p.round(xe/2%1,2);return 0===z.gap&&0===z.groupgap?p.round(Math.round(ze)-je,2):ze}if(!L._context.staticPlot){var He=e.opacity(De)<1||xe>.01?Be:function(ze,je,qe){return qe&&ze===je?ze:Math.abs(ze-je)>=2?Be(ze):ze>je?Math.ceil(ze):Math.floor(ze)};Fe=He(Fe,ve,te),ve=He(ve,Fe,te),Te=He(Te,Le,!te),Le=He(Le,Te,!te)}var Ve=w(b.ensureSingle(Se,"path"),ne,z,q);if(Ve.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ve-Fe)*(Le-Te))||Oe&&L._context.staticPlot?"M0,0Z":"M"+Fe+","+Te+"V"+Le+"H"+ve+"V"+Te+"Z").call(r.setClipUrl,S.layerClipId,L),!ne.uniformtext.mode&&ee){var it=r.makePointStyleFns(V);r.singlePointStyle(be,Ve,V,it,L)}(function(ze,je,qe,Ye,ct,vt,wt,Ot,St,ft,st){var Ct,$t=je.xaxis,rn=je.yaxis,hn=ze._fullLayout;function cn(tn,Kt,kn){return b.ensureSingle(tn,"text").text(Kt).attr({class:"bartext bartext-"+Ct,"text-anchor":"middle","data-notex":1}).call(r.font,kn).call(y.convertToTspans,ze)}var Kt,kn,Vn,Tn,sn,fn,mn=Ye[0].trace,nn="h"===mn.orientation,Xe=(kn=ct,Vn=$t,Tn=rn,sn=(fn=(Kt=Ye)[0].trace).texttemplate?function(dn,Mn,En,jn,er){var nr=Mn[0].trace,mr=b.castOption(nr,En,"texttemplate");if(!mr)return"";var Dr,yr,Wr,kr,Or="histogram"===nr.type,Hr="waterfall"===nr.type,oi="funnel"===nr.type,Qn="h"===nr.orientation;function Ir(Ci){return o(kr,kr.c2l(Ci),!0).text}Qn?(Dr="y",yr=er,Wr="x",kr=jn):(Dr="x",yr=jn,Wr="y",kr=er);var Tr=Mn[En],ar={};ar.label=Tr.p,ar.labelLabel=ar[Dr+"Label"]=o(yr,yr.c2l(Tr.p),!0).text;var ri=b.castOption(nr,Tr.i,"text");(0===ri||ri)&&(ar.text=ri),ar.value=Tr.s,ar.valueLabel=ar[Wr+"Label"]=Ir(Tr.s);var Rr={};a(Rr,nr,Tr.i),(Or||void 0===Rr.x)&&(Rr.x=Qn?ar.value:ar.label),(Or||void 0===Rr.y)&&(Rr.y=Qn?ar.label:ar.value),(Or||void 0===Rr.xLabel)&&(Rr.xLabel=Qn?ar.valueLabel:ar.labelLabel),(Or||void 0===Rr.yLabel)&&(Rr.yLabel=Qn?ar.labelLabel:ar.valueLabel),Hr&&(ar.delta=+Tr.rawS||Tr.s,ar.deltaLabel=Ir(ar.delta),ar.final=Tr.v,ar.finalLabel=Ir(ar.final),ar.initial=ar.final-ar.delta,ar.initialLabel=Ir(ar.initial)),oi&&(ar.value=Tr.s,ar.valueLabel=Ir(ar.value),ar.percentInitial=Tr.begR,ar.percentInitialLabel=b.formatPercent(Tr.begR),ar.percentPrevious=Tr.difR,ar.percentPreviousLabel=b.formatPercent(Tr.difR),ar.percentTotal=Tr.sumR,ar.percenTotalLabel=b.formatPercent(Tr.sumR));var Yr=b.castOption(nr,Tr.i,"customdata");return Yr&&(ar.customdata=Yr),b.texttemplateString(mr,ar,dn._d3locale,Rr,ar,nr._meta||{})}(hn,Kt,kn,Vn,Tn):fn.textinfo?function(dn,Mn,En,jn){var er=dn[0].trace,nr="h"===er.orientation,mr="waterfall"===er.type,Dr="funnel"===er.type;function yr(Yr){return o(nr?En:jn,+Yr,!0).text}var Wr,Or=dn[Mn],Hr=er.textinfo.split("+"),oi=[],Qn=function(Yr){return-1!==Hr.indexOf(Yr)};if(Qn("label")&&oi.push(o(nr?jn:En,dn[Mn].p,!0).text),Qn("text")&&(0===(Wr=b.castOption(er,Or.i,"text"))||Wr)&&oi.push(Wr),mr){var Tr=+Or.rawS||Or.s,ar=Or.v,Jr=ar-Tr;Qn("initial")&&oi.push(yr(Jr)),Qn("delta")&&oi.push(yr(Tr)),Qn("final")&&oi.push(yr(ar))}if(Dr){Qn("value")&&oi.push(yr(Or.s));var ri=0;Qn("percent initial")&&ri++,Qn("percent previous")&&ri++,Qn("percent total")&&ri++;var Rr=ri>1;Qn("percent initial")&&(Wr=b.formatPercent(Or.begR),Rr&&(Wr+=" of initial"),oi.push(Wr)),Qn("percent previous")&&(Wr=b.formatPercent(Or.difR),Rr&&(Wr+=" of previous"),oi.push(Wr)),Qn("percent total")&&(Wr=b.formatPercent(Or.sumR),Rr&&(Wr+=" of total"),oi.push(Wr))}return oi.join("<br>")}(Kt,kn,Vn,Tn):f.getValue(fn.text,kn),f.coerceString(d,sn));Ct=function(tn,Kt){var kn=f.getValue(tn.textposition,Kt);return f.coerceEnumerated(h,kn)}(mn,ct);var ye=Ye[ct],Ce=!("stack"===ft.mode||"relative"===ft.mode)||ye._outmost;if(Xe&&"none"!==Ct&&(!ye.isBlank&&vt!==wt&&Ot!==St||"auto"!==Ct&&"inside"!==Ct)){var Ue=hn.font,Qe=i.getBarColor(Ye[ct],mn),rt=i.getInsideTextFont(mn,ct,Ue,Qe),Ke=i.getOutsideTextFont(mn,ct,Ue),gt=qe.datum();nn?"log"===$t.type&&gt.s0<=0&&(vt=$t.range[0]<$t.range[1]?0:$t._length):"log"===rn.type&&gt.s0<=0&&(Ot=rn.range[0]<rn.range[1]?rn._length:0);var mt,Lt,Vt,dt,bt,Yt=Math.abs(wt-vt)-2*_,It=Math.abs(St-Ot)-2*_;if("outside"===Ct&&(Ce||ye.hasB||(Ct="inside")),"auto"===Ct&&(Ce?(Ct="inside",mt=cn(qe,Xe,bt=b.ensureUniformFontSize(ze,rt)),dt=(Lt=r.bBox(mt.node())).height,(Vt=Lt.width)>0&&dt>0&&(Vt<=Yt&&dt<=It||Vt<=It&&dt<=Yt||(nn?Yt>=Vt*(It/dt):It>=dt*(Yt/Vt)))?Ct="inside":(Ct="outside",mt.remove(),mt=null)):Ct="inside"),!mt){var ht=(mt=cn(qe,Xe,bt=b.ensureUniformFontSize(ze,"outside"===Ct?Ke:rt))).attr("transform");if(mt.attr("transform",""),Vt=(Lt=r.bBox(mt.node())).width,dt=Lt.height,mt.attr("transform",ht),Vt<=0||dt<=0)return void mt.remove()}var xt,Xt=mn.textangle;xt="outside"===Ct?function(tn,Kt,kn,Vn,Tn,sn){var fn,dn=!!sn.isHorizontal,Mn=!!sn.constrained,En=sn.angle||0,jn=Tn.width,er=Tn.height,nr=Math.abs(Kt-tn),mr=Math.abs(Vn-kn);fn=dn?mr>2*_?_:0:nr>2*_?_:0;var Dr=1;Mn&&(Dr=dn?Math.min(1,mr/er):Math.min(1,nr/jn));var yr=D(En),Wr=C(Tn,yr),kr=(dn?Wr.x:Wr.y)/2,Or=(Tn.left+Tn.right)/2,Hr=(Tn.top+Tn.bottom)/2,oi=(tn+Kt)/2,Qn=(kn+Vn)/2,Ir=0,Tr=0,ar=dn?x(Kt,tn):x(kn,Vn);return dn?(oi=Kt-ar*fn,Ir=ar*kr):(Qn=Vn+ar*fn,Tr=-ar*kr),{textX:Or,textY:Hr,targetX:oi,targetY:Qn,anchorX:Ir,anchorY:Tr,scale:Dr,rotate:yr}}(vt,wt,Ot,St,Lt,{isHorizontal:nn,constrained:"both"===mn.constraintext||"outside"===mn.constraintext,angle:Xt}):P(vt,wt,Ot,St,Lt,{isHorizontal:nn,constrained:"both"===mn.constraintext||"inside"===mn.constraintext,angle:Xt,anchor:mn.insidetextanchor}),xt.fontSize=bt.size,m("histogram"===mn.type?"bar":mn.type,xt,hn),ye.transform=xt,w(mt,hn,ft,st).attr("transform",b.getTextTransform(xt))}else qe.select("text").remove()})(L,S,Se,J,he,Fe,ve,Te,Le,z,q),S.layerClipId&&r.hideOutsideRangePoint(be,Se.select("text"),G,K,V.xcalendar,V.ycalendar)}),r.setClipUrl(se,!1===V.cliponaxis?null:S.layerClipId,L)});t.getComponentMethod("errorbars","plot")(L,X,S,z)},toMoveInsideBar:P}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(v,ae,ie){"use strict";function p(g,b,y,e,r){var t=b.c2p(e?g.s0:g.p0,!0),o=b.c2p(e?g.s1:g.p1,!0),n=y.c2p(e?g.p0:g.s0,!0),m=y.c2p(e?g.p1:g.s1,!0);return r?[(t+o)/2,(n+m)/2]:e?[o,(n+m)/2]:[(t+o)/2,m]}ae.exports=function(g,b){var y,e=g.cd,r=g.xaxis,t=g.yaxis,o=e[0].trace,n="funnel"===o.type,m="h"===o.orientation,l=[];if(!1===b)for(y=0;y<e.length;y++)e[y].selected=0;else for(y=0;y<e.length;y++){var i=e[y],f="ct"in i?i.ct:p(i,r,t,m,n);b.contains(f,!1,y,g)?(l.push({pointNumber:y,x:r.c2d(i.x),y:t.c2d(i.y)}),i.selected=1):i.selected=0}return l}},{}],670:[function(v,ae,ie){"use strict";ae.exports=b;var p=v("../../lib").distinctVals,g=v("../../constants/numerical").BADNUM;function b(y,e){this.traces=y,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,t=[],o=0;o<y.length;o++){for(var n=y[o],m=0;m<n.length;m++){var l=n[m];l.p!==g&&t.push(l.p)}n[0]&&n[0].width1&&(r=Math.min(n[0].width1,r))}this.positions=t;var i=p(t);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&r!==1/0?r:Math.min(i.minDiff,r);var f=(e.posAxis||{}).type;"category"!==f&&"multicategory"!==f||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(y,e){var r=this.getLabel(y,e),t=this.bins[r]||0;return this.bins[r]=t+e,t},b.prototype.get=function(y,e){var r=this.getLabel(y,e);return this.bins[r]||0},b.prototype.getLabel=function(y,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?y:Math.round(y/this.binWidth))}},{"../../constants/numerical":491,"../../lib":515}],671:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../../components/drawing"),y=v("../../lib"),e=v("../../registry"),r=v("./uniform_text").resizeText,t=v("./attributes"),o=t.textfont,n=t.insidetextfont,m=t.outsidetextfont,l=v("./helpers");function i(c,T,x){b.pointStyle(c.selectAll("path"),T,x),f(c,T,x)}function f(c,T,x){c.selectAll("text").each(function(w){var M=p.select(this),D=y.ensureUniformFontSize(x,u(M,w,T,x));b.font(M,D)})}function u(c,T,x,w){var M=w._fullLayout.font,D=x.textfont;if(c.classed("bartext-inside")){var C=_(T,x);D=d(x,T.i,M,C)}else c.classed("bartext-outside")&&(D=h(x,T.i,M));return D}function s(c,T,x){return a(o,c.textfont,T,x)}function d(c,T,x,w){var M=s(c,T,x);return(void 0===c._input.textfont||void 0===c._input.textfont.color||Array.isArray(c.textfont.color)&&void 0===c.textfont.color[T])&&(M={color:g.contrast(w),family:M.family,size:M.size}),a(n,c.insidetextfont,T,M)}function h(c,T,x){var w=s(c,T,x);return a(m,c.outsidetextfont,T,w)}function a(c,T,x,w){var M=l.getValue((T=T||{}).family,x),D=l.getValue(T.size,x),C=l.getValue(T.color,x);return{family:l.coerceString(c.family,M,w.family),size:l.coerceNumber(c.size,D,w.size),color:l.coerceColor(c.color,C,w.color)}}function _(c,T){return"waterfall"===T.type?T[c.dir].marker.color:c.mcc||c.mc||T.marker.color}ae.exports={style:function(c){var T=p.select(c).selectAll("g.barlayer").selectAll("g.trace");r(c,T,"bar");var x=T.size(),w=c._fullLayout;T.style("opacity",function(M){return M[0].trace.opacity}).each(function(M){("stack"===w.barmode&&x>1||0===w.bargap&&0===w.bargroupgap&&!M[0].trace.marker.line.width)&&p.select(this).attr("shape-rendering","crispEdges")}),T.selectAll("g.points").each(function(M){i(p.select(this),M[0].trace,c)}),e.getComponentMethod("errorbars","style")(T)},styleTextPoints:f,styleOnSelect:function(c,T,x){var M,D,C,P,L,S,w=T[0].trace;w.selectedpoints?(D=w,C=c,b.selectedPointStyle((M=x).selectAll("path"),D),P=M.selectAll("text"),L=D,S=C,P.each(function(E){var N,z=p.select(this);if(E.selected){N=y.ensureUniformFontSize(S,u(z,E,L,S));var q=L.selected.textfont&&L.selected.textfont.color;q&&(N.color=q),b.font(z,N)}else b.selectedTextStyle(z,L)})):(i(x,w,c),e.getComponentMethod("errorbars","style")(x))},getInsideTextFont:d,getOutsideTextFont:h,getBarColor:_,resizeText:r}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("../../lib").coercePattern;ae.exports=function(e,r,t,o,n){var m=t("marker.color",o),l=g(e,"marker");l&&b(e,r,n,t,{prefix:"marker.",cLetter:"c"}),t("marker.line.color",p.defaultLine),g(e,"marker.line")&&b(e,r,n,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width"),t("marker.opacity"),y(t,"marker.pattern",m,l),t("selected.marker.color"),t("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib");function b(y){return"_"+y+"Text_minsize"}ae.exports={recordMinTextSize:function(y,e,r){if(r.uniformtext.mode){var t=b(y),o=r.uniformtext.minsize,n=e.scale*e.fontSize;e.hide=n<o,r[t]=r[t]||1/0,e.hide||(r[t]=Math.min(r[t],Math.max(n,o)))}},clearMinTextSize:function(y,e){e[b(y)]=void 0},resizeText:function(y,e,r){var t=y._fullLayout,o=t["_"+r+"Text_minsize"];if(o){var n,m="hide"===t.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":n="g.slice";break;case"treemap":case"icicle":n="g.slice, g.pathbar";break;default:n="g.points > g.point"}e.selectAll(n).each(function(l){var i=l.transform;i&&(i.scale=m&&i.hide?0:o/i.fontSize,p.select(this).select("text").attr("transform",g.getTextTransform(i)))})}}}},{"../../lib":515,"@plotly/d3":58}],674:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../lib/extend").extendFlat,b=v("../scatterpolar/attributes"),y=v("../bar/attributes");ae.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:g({},y.base,{}),offset:g({},y.offset,{}),width:g({},y.width,{}),text:g({},y.text,{}),hovertext:g({},y.hovertext,{}),marker:y.marker,hoverinfo:b.hoverinfo,hovertemplate:p(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/helpers").hasColorscale,g=v("../../components/colorscale/calc"),b=v("../bar/arrays_to_calcdata"),y=v("../bar/cross_trace_calc").setGroupPositions,e=v("../scatter/calc_selection"),r=v("../../registry").traceIs,t=v("../../lib").extendFlat;ae.exports={calc:function(o,n){for(var m=o._fullLayout,l=n.subplot,f=m[l].angularaxis,u=m[l].radialaxis.makeCalcdata(n,"r"),s=f.makeCalcdata(n,"theta"),d=n._length,h=new Array(d),a=u,_=s,c=0;c<d;c++)h[c]={p:_[c],s:a[c]};function T(x){var w=n[x];void 0!==w&&(n["_"+x]=Array.isArray(w)?f.makeCalcdata(n,x):f.d2c(w,n.thetaunit))}return"linear"===f.type&&(T("width"),T("offset")),p(n,"marker")&&g(o,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),p(n,"marker.line")&&g(o,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(h,n),e(h,n),h},crossTraceCalc:function(o,n,m){for(var l=o.calcdata,i=[],f=0;f<l.length;f++){var u=l[f],s=u[0].trace;!0===s.visible&&r(s,"bar")&&s.subplot===m&&i.push(u)}var d=t({},n.radialaxis,{_id:"x"});y(o,n.angularaxis,d,i,{mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap})}}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatterpolar/defaults").handleRThetaDefaults,b=v("../bar/style_defaults"),y=v("./attributes");ae.exports=function(e,r,t,o){function n(m,l){return p.coerce(e,r,y,m,l)}g(e,r,o,n)?(n("thetaunit"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate"),b(e,r,n,t,o),p.coerceSelectionMarkerOpacity(r,n)):r.visible=!1}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(v,ae,ie){"use strict";var p=v("../../components/fx"),g=v("../../lib"),b=v("../bar/hover").getTraceColor,y=g.fillText,e=v("../scatterpolar/hover").makeHoverPointText,r=v("../../plots/polar/helpers").isPtInsidePolygon;ae.exports=function(t,o,n){var m=t.cd,l=m[0].trace,i=t.subplot,f=i.radialAxis,s=i.vangles,d=s?r:g.isPtInsideSector,h=t.maxHoverDistance,a=i.angularAxis._period||2*Math.PI,_=Math.abs(f.g2p(Math.sqrt(o*o+n*n))),c=Math.atan2(n,o);if(f.range[0]>f.range[1]&&(c+=Math.PI),p.getClosest(m,function(w){return d(_,c,[w.rp0,w.rp1],[w.thetag0,w.thetag1],s)?h+Math.min(1,Math.abs(w.thetag1-w.thetag0)/a)-1+(w.rp1-_)/(w.rp1-w.rp0)-1:1/0},t),!1!==t.index){var T=m[t.index];t.x0=t.x1=T.ct[0],t.y0=t.y1=T.ct[1];var x=g.extendFlat({},T,{r:T.s,theta:T.p});return y(T,l,t),e(x,l,i,t),t.hovertemplate=l.hovertemplate,t.color=b(l,T),t.xLabelVal=t.yLabelVal=void 0,T.s<0&&(t.idealAlign="left"),[t]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"barpolar",basePlotModule:v("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("../scatterpolar/format_labels"),style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(v,ae,ie){"use strict";ae.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y,e){var r,t={};function o(l,i){return p.coerce(b[r]||{},y[r],g,l,i)}for(var n=0;n<e.length;n++){var m=e[n];"barpolar"===m.type&&!0===m.visible&&(t[r=m.subplot]||(o("barmode"),o("bargap"),t[r]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("fast-isnumeric"),b=v("../../lib"),y=v("../../components/drawing"),e=v("../../plots/polar/helpers");ae.exports=function(r,t,o){var s,d,h,n=t.xaxis,m=t.yaxis,l=t.radialAxis,i=t.angularAxis,f=(d=(s=t).cxx,h=s.cyy,s.vangles?function(a,_,c,T){var x,w;b.angleDelta(c,T)>0?(x=c,w=T):(x=T,w=c);var M=[e.findEnclosingVertexAngles(x,s.vangles)[0],(x+w)/2,e.findEnclosingVertexAngles(w,s.vangles)[1]];return e.pathPolygonAnnulus(a,_,x,w,M,d,h)}:function(a,_,c,T){return b.pathAnnulus(a,_,c,T,d,h)}),u=t.layers.frontplot.select("g.barlayer");b.makeTraceGroups(u,o,"trace bars").each(function(){var s=p.select(this),d=b.ensureSingle(s,"g","points").selectAll("g.point").data(b.identity);d.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),d.exit().remove(),d.each(function(h){var a,_=p.select(this),c=h.rp0=l.c2p(h.s0),T=h.rp1=l.c2p(h.s1),x=h.thetag0=i.c2g(h.p0),w=h.thetag1=i.c2g(h.p1);if(g(c)&&g(T)&&g(x)&&g(w)&&c!==T&&x!==w){var M=l.c2g(h.s1),D=(x+w)/2;h.ct=[n.c2p(M*Math.cos(D)),m.c2p(M*Math.sin(D))],a=f(c,T,x,w)}else a="M0,0Z";b.ensureSingle(_,"path").attr("d",a)}),y.setClipUrl(s,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes"),g=v("../bar/attributes"),b=v("../../components/color/attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../lib/extend").extendFlat,t=p.marker,o=t.line;ae.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:r({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:r({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:r({},t.size,{arrayOk:!1,editType:"calc"}),color:r({},t.color,{arrayOk:!1,editType:"style"}),line:{color:r({},o.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:r({},o.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:{marker:p.selected.marker,editType:"style"},unselected:{marker:p.unselected.marker,editType:"style"},text:r({},p.text,{}),hovertext:r({},p.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../plots/cartesian/axes"),b=v("../../plots/cartesian/align_period"),y=v("../../lib"),e=v("../../constants/numerical").BADNUM,r=y._;ae.exports=function(d,h){var a,_,c,T,x,w,M,D=d._fullLayout,C=g.getFromId(d,h.xaxis||"x"),P=g.getFromId(d,h.yaxis||"y"),L=[],S="violin"===h.type?"_numViolins":"_numBoxes";"h"===h.orientation?(c=C,T="x",x=P,w="y",M=!!h.yperiodalignment):(c=P,T="y",x=C,w="x",M=!!h.xperiodalignment);var E,N,z,q,G,K,ne=function(qe,Ye,ct,vt){var wt,Ot=Ye+"0"in qe;if(Ye in qe||Ot&&"d"+Ye in qe){var ft=ct.makeCalcdata(qe,Ye);return[b(qe,ct,Ye,ft).vals,ft]}wt=Ot?qe[Ye+"0"]:"name"in qe&&("category"===ct.type||p(qe.name)&&-1!==["linear","log"].indexOf(ct.type)||y.isDateTime(qe.name)&&"date"===ct.type)?qe.name:vt;for(var st="multicategory"===ct.type?ct.r2c_just_indices(wt):ct.d2c(wt,0,qe[Ye+"calendar"]),Ct=qe._length,$t=new Array(Ct),rn=0;rn<Ct;rn++)$t[rn]=st;return[$t]}(h,w,x,D[S]),X=ne[0],J=ne[1],se=y.distinctVals(X,x),V=se.vals,j=se.minDiff/2,H="all"===(h.boxpoints||h.points)?y.identity:function(qe){return qe.v<E.lf||qe.v>E.uf};if(h._hasPreCompStats){var oe=h[T],U=function(qe){return c.d2c((h[qe]||[])[a])},te=1/0,ee=-1/0;for(a=0;a<h._length;a++){var le=X[a];if(p(le)){if((E={}).pos=E[w]=le,M&&J&&(E.orig_p=J[a]),E.q1=U("q1"),E.med=U("median"),E.q3=U("q3"),N=[],oe&&y.isArrayOrTypedArray(oe[a]))for(_=0;_<oe[a].length;_++)(K=c.d2c(oe[a][_]))!==e&&(o(G={v:K,i:[a,_]},h,[a,_]),N.push(G));if(E.pts=N.sort(n),q=(z=E[T]=N.map(m)).length,E.med!==e&&E.q1!==e&&E.q3!==e&&E.med>=E.q1&&E.q3>=E.med){var ce=U("lowerfence");E.lf=ce!==e&&ce<=E.q1?ce:l(E,z,q);var pe=U("upperfence");E.uf=pe!==e&&pe>=E.q3?pe:i(E,z,q);var de=U("mean");E.mean=de!==e?de:q?y.mean(z,q):(E.q1+E.q3)/2;var be=U("sd");E.sd=de!==e&&be>=0?be:q?y.stdev(z,q,E.mean):E.q3-E.q1,E.lo=f(E),E.uo=u(E);var he=U("notchspan");he=he!==e&&he>0?he:s(E,q),E.ln=E.med-he,E.un=E.med+he;var xe=E.lf,De=E.uf;h.boxpoints&&z.length&&(xe=Math.min(xe,z[0]),De=Math.max(De,z[q-1])),h.notched&&(xe=Math.min(xe,E.ln),De=Math.max(De,E.un)),E.min=xe,E.max=De}else{var Se;y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+E.q1,"median = "+E.med,"q3 = "+E.q3].join("\n")),E.med=Se=E.med!==e?E.med:E.q1!==e?E.q3!==e?(E.q1+E.q3)/2:E.q1:E.q3!==e?E.q3:0,E.q1=E.q3=Se,E.lf=E.uf=Se,E.mean=E.sd=Se,E.ln=E.un=Se,E.min=E.max=Se}te=Math.min(te,E.min),ee=Math.max(ee,E.max),E.pts2=N.filter(H),L.push(E)}}h._extremes[c._id]=g.findExtremes(c,[te,ee],{padded:!0})}else{var ke=c.makeCalcdata(h,T),Fe=function(qe,Ye){for(var ct=qe.length,vt=new Array(ct+1),wt=0;wt<ct;wt++)vt[wt]=qe[wt]-Ye;return vt[ct]=qe[ct-1]+Ye,vt}(V,j),ve=V.length,Te=function(qe){for(var Ye=new Array(qe),ct=0;ct<qe;ct++)Ye[ct]=[];return Ye}(ve);for(a=0;a<h._length;a++)if(p(K=ke[a])){var Le=y.findBin(X[a],Fe);Le>=0&&Le<ve&&(o(G={v:K,i:a},h,a),Te[Le].push(G))}var Oe=1/0,Ne=-1/0,Be=h.quartilemethod,He="exclusive"===Be,Ve="inclusive"===Be;for(a=0;a<ve;a++)if(Te[a].length>0){var it,ze;(E={}).pos=E[w]=V[a],N=E.pts=Te[a].sort(n),q=(z=E[T]=N.map(m)).length,E.min=z[0],E.max=z[q-1],E.mean=y.mean(z,q),E.sd=y.stdev(z,q,E.mean),E.med=y.interp(z,.5),q%2&&(He||Ve)?(He?(it=z.slice(0,q/2),ze=z.slice(q/2+1)):Ve&&(it=z.slice(0,q/2+1),ze=z.slice(q/2)),E.q1=y.interp(it,.5),E.q3=y.interp(ze,.5)):(E.q1=y.interp(z,.25),E.q3=y.interp(z,.75)),E.lf=l(E,z,q),E.uf=i(E,z,q),E.lo=f(E),E.uo=u(E);var je=s(E,q);E.ln=E.med-je,E.un=E.med+je,Oe=Math.min(Oe,E.ln),Ne=Math.max(Ne,E.un),E.pts2=N.filter(H),L.push(E)}h._extremes[c._id]=g.findExtremes(c,h.notched?ke.concat([Oe,Ne]):ke,{padded:!0})}return function(qe,Ye){if(y.isArrayOrTypedArray(Ye.selectedpoints))for(var ct=0;ct<qe.length;ct++){for(var vt=qe[ct].pts||[],wt={},Ot=0;Ot<vt.length;Ot++)wt[vt[Ot].i]=Ot;y.tagSelected(vt,Ye,wt)}}(L,h),L.length>0?(L[0].t={num:D[S],dPos:j,posLetter:w,valLetter:T,labels:{med:r(d,"median:"),min:r(d,"min:"),q1:r(d,"q1:"),q3:r(d,"q3:"),max:r(d,"max:"),mean:r(d,"sd"===h.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:r(d,"lower fence:"),uf:r(d,"upper fence:")}},D[S]++,L):[{t:{empty:!0}}]};var t={text:"tx",hovertext:"htx"};function o(d,h,a){for(var _ in t)y.isArrayOrTypedArray(h[_])&&(Array.isArray(a)?y.isArrayOrTypedArray(h[_][a[0]])&&(d[t[_]]=h[_][a[0]][a[1]]):d[t[_]]=h[_][a])}function n(d,h){return d.v-h.v}function m(d){return d.v}function l(d,h,a){return 0===a?d.q1:Math.min(d.q1,h[Math.min(y.findBin(2.5*d.q1-1.5*d.q3,h,!0)+1,a-1)])}function i(d,h,a){return 0===a?d.q3:Math.max(d.q3,h[Math.max(y.findBin(2.5*d.q3-1.5*d.q1,h),0)])}function f(d){return 4*d.q1-3*d.q3}function u(d){return 4*d.q3-3*d.q1}function s(d,h){return 0===h?0:1.57*(d.q3-d.q1)/Math.sqrt(h)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib"),b=v("../../plots/cartesian/constraints").getAxisGroup,y=["v","h"];function e(r,t,o,n){var m,l,i,f=t.calcdata,u=t._fullLayout,s=n._id,d=s.charAt(0),h=[],a=0;for(m=0;m<o.length;m++)for(i=f[o[m]],l=0;l<i.length;l++)h.push(n.c2l(i[l].pos,!0)),a+=(i[l].pts2||[]).length;if(h.length){var _=g.distinctVals(h);"category"!==n.type&&"multicategory"!==n.type||(_.minDiff=1);var c=_.minDiff/2;p.minDtick(n,_.minDiff,_.vals[0],!0);var T=u["violin"===r?"_numViolins":"_numBoxes"],x="group"===u[r+"mode"]&&T>1,w=1-u[r+"gap"],M=1-u[r+"groupgap"];for(m=0;m<o.length;m++){var D,C,P,L,S,E,N=(i=f[o[m]])[0].trace,z=i[0].t,q=N.width,G=N.side;if(q)D=C=L=q/2,P=0;else if(D=c,x){var K=b(u,n._id)+N.orientation,X=Object.keys(((u._alignmentOpts[K]||{})[N.alignmentgroup]||{}).offsetGroups||{}).length,J=X||T;C=D*w*M/J,P=2*D*(((X?N._offsetIndex:z.num)+.5)/J-.5)*w,L=D*w/J}else C=D*w*M,P=0,L=D;z.dPos=D,z.bPos=P,z.bdPos=C,z.wHover=L;var se,V,j,H,oe,U,te=P+C,ee=Boolean(q);if("positive"===G?(S=D*(q?1:.5),se=te,E=se=P):"negative"===G?(S=se=P,E=D*(q?1:.5),V=te):(S=E=D,se=V=te),(N.boxpoints||N.points)&&a>0){var le=N.pointpos,ce=N.jitter,pe=N.marker.size/2,de=0;le+ce>=0&&((de=te*(le+ce))>S?(ee=!0,oe=pe,j=de):de>se&&(oe=pe,j=S)),de<=S&&(j=S);var be=0;le-ce<=0&&((be=-te*(le-ce))>E?(ee=!0,U=pe,H=be):be>V&&(U=pe,H=E)),be<=E&&(H=E)}else j=S,H=E;var he=new Array(i.length);for(l=0;l<i.length;l++)he[l]=i[l].pos;N._extremes[s]=p.findExtremes(n,he,{padded:ee,vpadminus:H,vpadplus:j,vpadLinearized:!0,ppadminus:{x:U,y:oe}[d],ppadplus:{x:oe,y:U}[d]})}}}ae.exports={crossTraceCalc:function(r,t){for(var o=r.calcdata,n=t.xaxis,m=t.yaxis,l=0;l<y.length;l++){for(var i=y[l],f="h"===i?m:n,u=[],s=0;s<o.length;s++){var d=o[s],a=d[0].trace;!0!==a.visible||"box"!==a.type&&"candlestick"!==a.type||d[0].t.empty||(a.orientation||"v")!==i||a.xaxis!==n._id||a.yaxis!==m._id||u.push(s)}e("box",r,u,f)}},setPositionOffset:e}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry"),b=v("../../components/color"),y=v("../scatter/period_defaults"),e=v("../bar/defaults").handleGroupingDefaults,r=v("../../plots/cartesian/axis_autotype"),t=v("./attributes");function o(m,l,i,f){function u(G){var K=0;return G&&G.length&&(K+=1,p.isArrayOrTypedArray(G[0])&&G[0].length&&(K+=1)),K}function s(G){return p.validate(m[G],t[G])}var d,h=i("y"),a=i("x");if("box"===l.type){var _=i("q1"),c=i("median"),T=i("q3");l._hasPreCompStats=_&&_.length&&c&&c.length&&T&&T.length,d=Math.min(p.minRowLength(_),p.minRowLength(c),p.minRowLength(T))}var x,w,M=u(h),D=u(a),C=M&&p.minRowLength(h),P=D&&p.minRowLength(a),L=f.calendar,S={autotypenumbers:f.autotypenumbers};if(l._hasPreCompStats)switch(String(D)+String(M)){case"00":var E=s("x0")||s("dx");x=!s("y0")&&!s("dy")||E?"v":"h",w=d;break;case"10":x="v",w=Math.min(d,P);break;case"20":x="h",w=Math.min(d,a.length);break;case"01":x="h",w=Math.min(d,C);break;case"02":x="v",w=Math.min(d,h.length);break;case"12":x="v",w=Math.min(d,P,h.length);break;case"21":x="h",w=Math.min(d,a.length,C);break;case"11":w=0;break;case"22":var N,z=!1;for(N=0;N<a.length;N++)if("category"===r(a[N],L,S)){z=!0;break}if(z)x="v",w=Math.min(d,P,h.length);else{for(N=0;N<h.length;N++)if("category"===r(h[N],L,S)){z=!0;break}z?(x="h",w=Math.min(d,a.length,C)):(x="v",w=Math.min(d,P,h.length))}}else M>0?(x="v",w=D>0?Math.min(P,C):Math.min(C)):D>0?(x="h",w=Math.min(P)):w=0;if(w){l._length=w;var q=i("orientation",x);l._hasPreCompStats?"v"===q&&0===D?(i("x0",0),i("dx",1)):"h"===q&&0===M&&(i("y0",0),i("dy",1)):"v"===q&&0===D?i("x0"):"h"===q&&0===M&&i("y0"),g.getComponentMethod("calendars","handleTraceDefaults")(m,l,["x","y"],f)}else l.visible=!1}function n(m,l,i,f){var u=f.prefix,s=p.coerce2(m,l,t,"marker.outliercolor"),d=i("marker.line.outliercolor"),h="outliers";l._hasPreCompStats?h="all":(s||d)&&(h="suspectedoutliers");var a=i(u+"points",h);a?(i("jitter","all"===a?.3:0),i("pointpos","all"===a?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",l.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===a&&(i("marker.line.outliercolor",l.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete l.marker;var _=i("hoveron");"all"!==_&&-1===_.indexOf("points")||i("hovertemplate"),p.coerceSelectionMarkerOpacity(l,i)}ae.exports={supplyDefaults:function(m,l,i,f){function u(T,x){return p.coerce(m,l,t,T,x)}if(o(m,l,u,f),!1!==l.visible){y(m,l,f,u),u("xhoverformat"),u("yhoverformat");var s=l._hasPreCompStats;s&&(u("lowerfence"),u("upperfence")),u("line.color",(m.marker||{}).color||i),u("line.width"),u("fillcolor",b.addOpacity(l.line.color,.5));var d=!1;if(s){var h=u("mean"),a=u("sd");h&&h.length&&(d=!0,a&&a.length&&(d="sd"))}u("boxmean",d),u("whiskerwidth"),u("width"),u("quartilemethod");var _=!1;if(s){var c=u("notchspan");c&&c.length&&(_=!0)}else p.validate(m.notchwidth,t.notchwidth)&&(_=!0);u("notched",_)&&u("notchwidth"),n(m,l,u,{prefix:"box"})}},crossTraceDefaults:function(m,l){var f;function u(h){return p.coerce(f._input,f,t,h)}for(var s=0;s<m.length;s++){var d=(f=m[s]).type;"box"!==d&&"violin"!==d||"group"===l[d+"mode"]&&e(f._input,f,l,u)}},handleSampleDefaults:o,handlePointsDefaults:n}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return g.hoverOnBox&&(p.hoverOnBox=g.hoverOnBox),"xVal"in g&&(p.x=g.xVal),"yVal"in g&&(p.y=g.yVal),g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),p}},{}],687:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib"),b=v("../../components/fx"),y=v("../../components/color"),e=g.fillText;function r(o,n,m,l){var i,f,u,s,d,h,a,_,c,T,x,w,M,D,C=o.cd,P=o.xa,L=o.ya,S=C[0].trace,E=C[0].t,N="violin"===S.type,z=E.bdPos,q=E.wHover,G=function(Se){return u.c2l(Se.pos)+E.bPos-u.c2l(h)};N&&"both"!==S.side?("positive"===S.side&&(c=function(Se){var ke=G(Se);return b.inbox(ke,ke+q,T)},w=z,M=0),"negative"===S.side&&(c=function(Se){var ke=G(Se);return b.inbox(ke-q,ke,T)},w=0,M=z)):(c=function(Se){var ke=G(Se);return b.inbox(ke-q,ke+q,T)},w=M=z),D=N?function(Se){return b.inbox(Se.span[0]-d,Se.span[1]-d,T)}:function(Se){return b.inbox(Se.min-d,Se.max-d,T)},"h"===S.orientation?(d=n,h=m,a=D,_=c,i="y",u=L,f="x",s=P):(d=m,h=n,a=c,_=D,i="x",u=P,f="y",s=L);var K=Math.min(1,z/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function ne(Se){return(a(Se)+_(Se))/2}T=o.maxHoverDistance-K,x=o.maxSpikeDistance-K;var X=b.getDistanceFunction(l,a,_,ne);if(b.getClosest(C,X,o),!1===o.index)return[];var J=C[o.index],se=S.line.color,V=(S.marker||{}).color;o.color=y.opacity(se)&&S.line.width?se:y.opacity(V)&&S.boxpoints?V:S.fillcolor,o[i+"0"]=u.c2p(J.pos+E.bPos-M,!0),o[i+"1"]=u.c2p(J.pos+E.bPos+w,!0),o[i+"LabelVal"]=void 0!==J.orig_p?J.orig_p:J.pos;var j=i+"Spike";o.spikeDistance=ne(J)*x/T,o[j]=u.c2p(J.pos,!0);var H=S.boxmean||(S.meanline||{}).visible,oe=S.boxpoints||S.points,U=oe&&H?["max","uf","q3","med","mean","q1","lf","min"]:oe&&!H?["max","uf","q3","med","q1","lf","min"]:!oe&&H?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];S.orientation===(s.range[1]<s.range[0]?"v":"h")&&U.reverse();for(var ee=o.spikeDistance,le=o[j],ce=[],pe=0;pe<U.length;pe++){var de=U[pe];if(de in J){var be=J[de],he=s.c2p(be,!0),xe=g.extendFlat({},o);xe.attr=de,xe[f+"0"]=xe[f+"1"]=he,xe[f+"LabelVal"]=be,xe[f+"Label"]=(E.labels?E.labels[de]+" ":"")+p.hoverLabelText(s,be,S[f+"hoverformat"]),xe.hoverOnBox=!0,"mean"===de&&"sd"in J&&"sd"===S.boxmean&&(xe[f+"err"]=J.sd),xe.hovertemplate=!1,ce.push(xe)}}o.name="",o.spikeDistance=void 0,o[j]=void 0;for(var De=0;De<ce.length;De++)"med"!==ce[De].attr?(ce[De].name="",ce[De].spikeDistance=void 0,ce[De][j]=void 0):(ce[De].spikeDistance=ee,ce[De][j]=le);return ce}function t(o,n,m){for(var l,i,f,u=o.cd,s=o.xa,d=o.ya,h=u[0].trace,a=s.c2p(n),_=d.c2p(m),c=b.quadrature(function(N){var z=Math.max(3,N.mrc||0);return Math.max(Math.abs(s.c2p(N.x)-a)-z,1-3/z)},function(N){var z=Math.max(3,N.mrc||0);return Math.max(Math.abs(d.c2p(N.y)-_)-z,1-3/z)}),T=!1,x=0;x<u.length;x++){i=u[x];for(var w=0;w<(i.pts||[]).length;w++){var M=c(f=i.pts[w]);M<=o.distance&&(o.distance=M,T=[x,w])}}if(!T)return!1;f=(i=u[T[0]]).pts[T[1]];var D=s.c2p(f.x,!0),C=d.c2p(f.y,!0),P=f.mrc||1;l=g.extendFlat({},o,{index:f.i,color:(h.marker||{}).color,name:h.name,x0:D-P,x1:D+P,y0:C-P,y1:C+P,spikeDistance:o.distance,hovertemplate:h.hovertemplate});var L,S=i.orig_p,E=void 0!==S?S:i.pos;return"h"===h.orientation?(L=d,l.xLabelVal=f.x,l.yLabelVal=E):(L=s,l.xLabelVal=E,l.yLabelVal=f.y),l[L._id.charAt(0)+"Spike"]=L.c2p(i.pos,!0),e(f,h,l),l}ae.exports={hoverPoints:function(o,n,m,l){var i,f=o.cd[0].trace.hoveron,u=[];return-1!==f.indexOf("boxes")&&(u=u.concat(r(o,n,m,l))),-1!==f.indexOf("points")&&(i=t(o,n,m)),"closest"===l?i?[i]:u:(i&&u.push(i),u)},hoverOnBoxes:r,hoverOnPoints:t}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults").supplyLayoutDefaults,calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"box",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(v,ae,ie){"use strict";ae.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("./layout_attributes");function y(e,r,t,o,n){for(var m=n+"Layout",l=!1,i=0;i<t.length;i++)if(p.traceIs(t[i],m)){l=!0;break}l&&(o(n+"mode"),o(n+"gap"),o(n+"groupgap"))}ae.exports={supplyLayoutDefaults:function(e,r,t){y(0,0,t,function(o,n){return g.coerce(e,r,b,o,n)},"box")},_supply:y}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing");function y(t,o,n,m){var l,i,f="h"===n.orientation,u=o.val,s=o.pos,d=!!s.rangebreaks,h=m.bPos,a=m.wdPos||0,_=m.bPosPxOffset||0,c=n.whiskerwidth||0,T=n.notched||!1,x=T?1-2*n.notchwidth:1;Array.isArray(m.bdPos)?(l=m.bdPos[0],i=m.bdPos[1]):(l=m.bdPos,i=m.bdPos);var w=t.selectAll("path.box").data("violin"!==n.type||n.box.visible?g.identity:[]);w.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(M){if(M.empty)return"M0,0Z";var D=s.c2l(M.pos+h,!0),C=s.l2p(D-l)+_,P=s.l2p(D+i)+_,L=d?(C+P)/2:s.l2p(D)+_,S=n.whiskerwidth,E=d?C*S+(1-S)*L:s.l2p(D-a)+_,N=d?P*S+(1-S)*L:s.l2p(D+a)+_,z=s.l2p(D-l*x)+_,q=s.l2p(D+i*x)+_,G=u.c2p(M.q1,!0),K=u.c2p(M.q3,!0),ne=g.constrain(u.c2p(M.med,!0),Math.min(G,K)+1,Math.max(G,K)-1),X=void 0===M.lf||!1===n.boxpoints,J=u.c2p(X?M.min:M.lf,!0),se=u.c2p(X?M.max:M.uf,!0),V=u.c2p(M.ln,!0),j=u.c2p(M.un,!0);f?p.select(this).attr("d","M"+ne+","+z+"V"+q+"M"+G+","+C+"V"+P+(T?"H"+V+"L"+ne+","+q+"L"+j+","+P:"")+"H"+K+"V"+C+(T?"H"+j+"L"+ne+","+z+"L"+V+","+C:"")+"ZM"+G+","+L+"H"+J+"M"+K+","+L+"H"+se+(0===c?"":"M"+J+","+E+"V"+N+"M"+se+","+E+"V"+N)):p.select(this).attr("d","M"+z+","+ne+"H"+q+"M"+C+","+G+"H"+P+(T?"V"+V+"L"+q+","+ne+"L"+P+","+j:"")+"V"+K+"H"+C+(T?"V"+j+"L"+z+","+ne+"L"+C+","+V:"")+"ZM"+L+","+G+"V"+J+"M"+L+","+K+"V"+se+(0===c?"":"M"+E+","+J+"H"+N+"M"+E+","+se+"H"+N))})}function e(t,o,n,m){var l=o.x,i=o.y,f=m.bdPos,u=m.bPos,s=n.boxpoints||n.points;g.seedPseudoRandom();var d=t.selectAll("g.points").data(s?function(a){return a.forEach(function(_){_.t=m,_.trace=n}),a}:[]);d.enter().append("g").attr("class","points"),d.exit().remove();var h=d.selectAll("path").data(function(a){var _,c,T=a.pts2,x=Math.max((a.max-a.min)/10,a.q3-a.q1),w=1e-9*x,M=.01*x,D=[],C=0;if(n.jitter){if(0===x)for(C=1,D=new Array(T.length),_=0;_<T.length;_++)D[_]=1;else for(_=0;_<T.length;_++){var P=Math.max(0,_-5),L=T[P].v,S=Math.min(T.length-1,_+5),E=T[S].v;"all"!==s&&(T[_].v<a.lf?E=Math.min(E,a.lf):L=Math.max(L,a.uf));var N=Math.sqrt(M*(S-P)/(E-L+w))||0;N=g.constrain(Math.abs(N),0,1),D.push(N),C=Math.max(N,C)}c=2*n.jitter/(C||1)}for(_=0;_<T.length;_++){var z=T[_],q=z.v,G=n.jitter?c*D[_]*(g.pseudoRandom()-.5):0,K=a.pos+u+f*(n.pointpos+G);"h"===n.orientation?(z.y=K,z.x=q):(z.x=K,z.y=q),"suspectedoutliers"===s&&q<a.uo&&q>a.lo&&(z.so=!0)}return T});h.enter().append("path").classed("point",!0),h.exit().remove(),h.call(b.translatePoints,l,i)}function r(t,o,n,m){var l,i,f=o.val,u=o.pos,s=!!u.rangebreaks,d=m.bPos,h=m.bPosPxOffset||0,a=n.boxmean||(n.meanline||{}).visible;Array.isArray(m.bdPos)?(l=m.bdPos[0],i=m.bdPos[1]):(l=m.bdPos,i=m.bdPos);var _=t.selectAll("path.mean").data("box"===n.type&&n.boxmean||"violin"===n.type&&n.box.visible&&n.meanline.visible?g.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(c){var T=u.c2l(c.pos+d,!0),x=u.l2p(T-l)+h,w=u.l2p(T+i)+h,M=s?(x+w)/2:u.l2p(T)+h,D=f.c2p(c.mean,!0),C=f.c2p(c.mean-c.sd,!0),P=f.c2p(c.mean+c.sd,!0);"h"===n.orientation?p.select(this).attr("d","M"+D+","+x+"V"+w+("sd"===a?"m0,0L"+C+","+M+"L"+D+","+x+"L"+P+","+M+"Z":"")):p.select(this).attr("d","M"+x+","+D+"H"+w+("sd"===a?"m0,0L"+M+","+C+"L"+x+","+D+"L"+M+","+P+"Z":""))})}ae.exports={plot:function(t,o,n,m){var l=o.xaxis,i=o.yaxis;g.makeTraceGroups(m,n,"trace boxes").each(function(f){var u,s,d=p.select(this),h=f[0],a=h.t,_=h.trace;a.wdPos=a.bdPos*_.whiskerwidth,!0!==_.visible||a.empty?d.remove():("h"===_.orientation?(u=i,s=l):(u=l,s=i),y(d,{pos:u,val:s},_,a),e(d,{x:l,y:i},_,a),r(d,{pos:u,val:s},_,a))})},plotBoxAndWhiskers:y,plotPoints:e,plotBoxMean:r}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(v,ae,ie){"use strict";ae.exports=function(p,g){var b,y,e=p.cd,r=p.xaxis,t=p.yaxis,o=[];if(!1===g)for(b=0;b<e.length;b++)for(y=0;y<(e[b].pts||[]).length;y++)e[b].pts[y].selected=0;else for(b=0;b<e.length;b++)for(y=0;y<(e[b].pts||[]).length;y++){var n=e[b].pts[y],m=r.c2p(n.x),l=t.c2p(n.y);g.contains([m,l],null,n.i,p)?(o.push({pointNumber:n.i,x:r.c2d(n.x),y:t.c2d(n.y)}),n.selected=1):n.selected=0}return o}},{}],693:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../../components/drawing");ae.exports={style:function(y,e,r){var t=r||p.select(y).selectAll("g.trace.boxes");t.style("opacity",function(o){return o[0].trace.opacity}),t.each(function(o){var n=p.select(this),m=o[0].trace,l=m.line.width;function i(s,d,h,a){s.style("stroke-width",d+"px").call(g.stroke,h).call(g.fill,a)}var f=n.selectAll("path.box");if("candlestick"===m.type)f.each(function(s){if(!s.empty){var d=p.select(this),h=m[s.dir];i(d,h.line.width,h.line.color,h.fillcolor),d.style("opacity",m.selectedpoints&&!s.selected?.3:1)}});else{i(f,l,m.line.color,m.fillcolor),n.selectAll("path.mean").style({"stroke-width":l,"stroke-dasharray":2*l+"px,"+l+"px"}).call(g.stroke,m.line.color);var u=n.selectAll("path.point");b.pointStyle(u,m,y)}})},styleOnSelect:function(y,e,r){var t=e[0].trace,o=r.selectAll("path.point");t.selectedpoints?b.selectedPointStyle(o,t):b.pointStyle(o,t,y)}}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(v,ae,ie){"use strict";var p=v("../../lib").extendFlat,g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../ohlc/attributes"),y=v("../box/attributes");function e(r){return{line:{color:p({},y.line.color,{dflt:r}),width:y.line.width,editType:"style"},fillcolor:y.fillcolor,editType:"style"}}ae.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:g("x"),yhoverformat:g("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:p({},y.line.width,{}),editType:"style"},increasing:e(b.increasing.line.color.dflt),decreasing:e(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:p({},y.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../../plots/cartesian/align_period"),y=v("../ohlc/calc").calcCommon;function e(r,t,o,n){return{min:o,q1:Math.min(r,n),med:n,q3:Math.max(r,n),max:t}}ae.exports=function(r,t){var o=r._fullLayout,n=g.getFromId(r,t.xaxis),m=g.getFromId(r,t.yaxis),l=n.makeCalcdata(t,"x"),i=b(t,n,"x",l).vals,f=y(r,t,l,i,m,e);return f.length?(p.extendFlat(f[0].t,{num:o._numBoxes,dPos:p.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),o._numBoxes++,f):[{t:{empty:!0}}]}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../ohlc/ohlc_defaults"),y=v("../scatter/period_defaults"),e=v("./attributes");function r(t,o,n,m){var l=n(m+".line.color");n(m+".line.width",o.line.width),n(m+".fillcolor",g.addOpacity(l,.5))}ae.exports=function(t,o,n,m){function l(i,f){return p.coerce(t,o,e,i,f)}b(t,o,l,m)?(y(t,o,m,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),r(0,o,l,"increasing"),r(0,o,l,"decreasing"),l("text"),l("hovertext"),l("whiskerwidth"),m._requestRangeslider[o.xaxis]=!0):o.visible=!1}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"candlestick",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:v("./attributes"),layoutAttributes:v("../box/layout_attributes"),supplyLayoutDefaults:v("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:v("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("../box/plot").plot,layerName:"boxlayer",style:v("../box/style").style,hoverPoints:v("../ohlc/hover").hoverPoints,selectPoints:v("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(v,ae,ie){"use strict";var p=v("./axis_defaults"),g=v("../../plot_api/plot_template");ae.exports=function(b,y,e,r,t){var o,n,m,l;r("a")||(r("da"),r("a0")),r("b")||(r("db"),r("b0")),o=b,n=y,m=e,l=t,["aaxis","baxis"].forEach(function(i){var f=i.charAt(0),u=o[i]||{},s=g.newContainer(n,i);p(u,s,{noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:n.font,name:i,data:o[f],calendar:n.calendar,dfltColor:l,bgColor:m.paper_bgcolor,autotypenumbersDflt:m.autotypenumbers,fullLayout:m}),s._categories=s._categories||[],o[i]||"-"===u.type||(o[i]={type:u.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(v,ae,ie){"use strict";var p=v("../../lib").isArrayOrTypedArray;ae.exports=function(g){return function b(y,e){if(!p(y)||e>=10)return null;for(var r=1/0,t=-1/0,o=y.length,n=0;n<o;n++){var m=y[n];if(p(m)){var l=b(m,e+1);l&&(r=Math.min(l[0],r),t=Math.max(l[1],t))}else r=Math.min(m,r),t=Math.max(m,t)}return[r,t]}(g,0)}},{"../../lib":515}],700:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("./axis_attributes"),b=v("../../components/color/attributes"),y=p({editType:"calc"});y.family.dflt='"Open Sans", verdana, arial, sans-serif',y.size.dflt=12,y.color.dflt=b.defaultLine,ae.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:g,baxis:g,font:y,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(v,ae,ie){"use strict";var p=v("../../lib").isArrayOrTypedArray;ae.exports=function(g,b,y,e){var r,t,o,n,m,l,i,f,u,s,d,h,a,_=p(y)?"a":"b",c=("a"===_?g.aaxis:g.baxis).smoothing,T="a"===_?g.a2i:g.b2j,x="a"===_?y:e,w="a"===_?e:y,M="a"===_?b.a.length:b.b.length,D="a"===_?b.b.length:b.a.length,C=Math.floor("a"===_?g.b2j(w):g.a2i(w)),P="a"===_?function(se){return g.evalxy([],se,C)}:function(se){return g.evalxy([],C,se)};c&&(o=Math.max(0,Math.min(D-2,C)),n=C-o,t="a"===_?function(se,V){return g.dxydi([],se,o,V,n)}:function(se,V){return g.dxydj([],o,se,n,V)});var L=T(x[0]),S=T(x[1]),E=L<S?1:-1,N=1e-8*(S-L),z=E>0?Math.floor:Math.ceil,q=E>0?Math.ceil:Math.floor,G=E>0?Math.min:Math.max,K=E>0?Math.max:Math.min,ne=z(L+N),X=q(S-N),J=[[i=P(L)]];for(r=ne;r*E<X*E;r+=E)m=[],d=K(L,r),a=(h=G(S,r+E))-d,l=Math.max(0,Math.min(M-2,Math.floor(.5*(d+h)))),f=P(h),c&&(u=t(l,d-l),s=t(l,h-l),m.push([i[0]+u[0]/3*a,i[1]+u[1]/3*a]),m.push([f[0]-s[0]/3*a,f[1]-s[1]/3*a])),m.push(f),J.push(m),i=f;return J}},{"../../lib":515}],702:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("../../components/color/attributes"),b=v("../../plots/cartesian/layout_attributes"),y=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=v("../../plot_api/edit_types").overrideAll,r=v("../../components/drawing/attributes").dash,t=v("../../lib/extend").extendFlat;ae.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:p({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:p({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:y("tick label")},tickformatstops:e(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:g.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:t({},r,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:t({},r,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:g.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:p({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(v,ae,ie){"use strict";var p=v("./attributes"),g=v("../../components/color").addOpacity,b=v("../../registry"),y=v("../../lib"),e=v("../../plots/cartesian/tick_value_defaults"),r=v("../../plots/cartesian/tick_label_defaults"),t=v("../../plots/cartesian/prefix_suffix_defaults"),o=v("../../plots/cartesian/category_order_defaults"),n=v("../../plots/cartesian/set_convert"),m=v("../../plots/cartesian/axis_autotype");ae.exports=function(l,i,f){var u=f.letter,s=f.font||{},d=p[u+"axis"];function h(E,N){return y.coerce(l,i,d,E,N)}function a(E,N){return y.coerce2(l,i,d,E,N)}f.name&&(i._name=f.name,i._id=f.name),h("autotypenumbers",f.autotypenumbersDflt);var _=h("type");"-"===_&&(f.data&&function(E,N){if("-"===E.type){var z=E._id.charAt(0);E.type=m(N,E[z+"calendar"],{autotypenumbers:E.autotypenumbers})}}(i,f.data),"-"===i.type?i.type="linear":_=l.type=i.type),h("smoothing"),h("cheatertype"),h("showticklabels"),h("labelprefix",u+" = "),h("labelsuffix"),h("showtickprefix"),h("showticksuffix"),h("separatethousands"),h("tickformat"),h("exponentformat"),h("minexponent"),h("showexponent"),h("categoryorder"),h("tickmode"),h("tickvals"),h("ticktext"),h("tick0"),h("dtick"),"array"===i.tickmode&&(h("arraytick0"),h("arraydtick")),h("labelpadding"),i._hovertitle=u,"date"===_&&b.getComponentMethod("calendars","handleDefaults")(l,i,"calendar",f.calendar),n(i,f.fullLayout),i.c2p=y.identity;var c=h("color",f.dfltColor),T=c===l.color?c:s.color;h("title.text")&&(y.coerceFont(h,"title.font",{family:s.family,size:y.bigFont(s.size),color:T}),h("title.offset")),h("tickangle"),h("autorange",!i.isValidRange(l.range))&&h("rangemode"),h("range"),i.cleanRange(),h("fixedrange"),e(l,i,h,_),t(l,i,h,_,f),r(l,i,h,_,f),o(l,i,h,{data:f.data,dataAttr:u});var x=a("gridcolor",g(c,.3)),w=a("gridwidth"),M=a("griddash"),D=h("showgrid");D||(delete i.gridcolor,delete i.gridwidth,delete i.griddash);var C=a("startlinecolor",c),P=a("startlinewidth",w);h("startline",i.showgrid||!!C||!!P)||(delete i.startlinecolor,delete i.startlinewidth);var L=a("endlinecolor",c),S=a("endlinewidth",w);return h("endline",i.showgrid||!!L||!!S)||(delete i.endlinecolor,delete i.endlinewidth),D?(h("minorgridcount"),h("minorgridwidth",w),h("minorgriddash",M),h("minorgridcolor",g(x,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgriddash,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridwidth,delete i.griddash),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,h("tickmode"),i}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib").isArray1D,b=v("./cheater_basis"),y=v("./array_minmax"),e=v("./calc_gridlines"),r=v("./calc_labels"),t=v("./calc_clippath"),o=v("../heatmap/clean_2d_array"),n=v("./smooth_fill_2d_array"),m=v("../heatmap/convert_column_xyz"),l=v("./set_convert");ae.exports=function(i,f){var u=p.getFromId(i,f.xaxis),s=p.getFromId(i,f.yaxis),d=f.aaxis,h=f.baxis,a=f.x,_=f.y,c=[];a&&g(a)&&c.push("x"),_&&g(_)&&c.push("y"),c.length&&m(f,d,h,"a","b",c);var T=f._a=f._a||f.a,x=f._b=f._b||f.b;a=f._x||f.x,_=f._y||f.y;var w={};f._cheater&&(a=b("index"===d.cheatertype?T.length:T,"index"===h.cheatertype?x.length:x,f.cheaterslope)),f._x=a=o(a),f._y=_=o(_),n(a,T,x),n(_,T,x),l(f),f.setScale();var C=y(a),P=y(_),L=.5*(C[1]-C[0]),S=.5*(C[1]+C[0]),E=.5*(P[1]-P[0]),N=.5*(P[1]+P[0]);return P=[N-1.3*E,N+1.3*E],f._extremes[u._id]=p.findExtremes(u,C=[S-1.3*L,S+1.3*L],{padded:!0}),f._extremes[s._id]=p.findExtremes(s,P,{padded:!0}),e(f,"a","b"),e(f,"b","a"),r(f,d),r(f,h),w.clipsegments=t(f._xctrl,f._yctrl,d,h),w.x=a,w.y=_,w.a=T,w.b=x,[w]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y){var e,r,t,o=[],n=!!b.smoothing,m=!!y.smoothing,l=p[0].length-1,i=p.length-1;for(e=0,r=[],t=[];e<=l;e++)r[e]=p[0][e],t[e]=g[0][e];for(o.push({x:r,y:t,bicubic:n}),e=0,r=[],t=[];e<=i;e++)r[e]=p[e][l],t[e]=g[e][l];for(o.push({x:r,y:t,bicubic:m}),e=l,r=[],t=[];e>=0;e--)r[l-e]=p[i][e],t[l-e]=g[i][e];for(o.push({x:r,y:t,bicubic:n}),e=i,r=[],t=[];e>=0;e--)r[i-e]=p[e][0],t[i-e]=g[e][0];return o.push({x:r,y:t,bicubic:m}),o}},{}],706:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib/extend").extendFlat;ae.exports=function(b,y,e){var r,t,o,n,m,l,i,f,u,s,d,h,a,_,c=b["_"+y],T=b[y+"axis"],x=T._gridlines=[],w=T._minorgridlines=[],M=T._boundarylines=[],D=b["_"+e],C=b[e+"axis"];"array"===T.tickmode&&(T.tickvals=c.slice());var P=b._xctrl,L=b._yctrl,S=P[0].length,E=P.length,N=b._a.length,z=b._b.length;p.prepTicks(T),"array"===T.tickmode&&delete T.tickvals;var q=T.smoothing?3:1;function G(ne){var X,J,se,V,j,H,oe,U,te,ee,le,ce,pe=[],de=[],be={};if("b"===y)for(J=b.b2j(ne),se=Math.floor(Math.max(0,Math.min(z-2,J))),V=J-se,be.length=z,be.crossLength=N,be.xy=function(he){return b.evalxy([],he,J)},be.dxy=function(he,xe){return b.dxydi([],he,se,xe,V)},X=0;X<N;X++)H=Math.min(N-2,X),oe=X-H,U=b.evalxy([],X,J),C.smoothing&&X>0&&(te=b.dxydi([],X-1,se,0,V),pe.push(j[0]+te[0]/3),de.push(j[1]+te[1]/3),ee=b.dxydi([],X-1,se,1,V),pe.push(U[0]-ee[0]/3),de.push(U[1]-ee[1]/3)),pe.push(U[0]),de.push(U[1]),j=U;else for(X=b.a2i(ne),H=Math.floor(Math.max(0,Math.min(N-2,X))),oe=X-H,be.length=N,be.crossLength=z,be.xy=function(he){return b.evalxy([],X,he)},be.dxy=function(he,xe){return b.dxydj([],H,he,oe,xe)},J=0;J<z;J++)se=Math.min(z-2,J),V=J-se,U=b.evalxy([],X,J),C.smoothing&&J>0&&(le=b.dxydj([],H,J-1,oe,0),pe.push(j[0]+le[0]/3),de.push(j[1]+le[1]/3),ce=b.dxydj([],H,J-1,oe,1),pe.push(U[0]-ce[0]/3),de.push(U[1]-ce[1]/3)),pe.push(U[0]),de.push(U[1]),j=U;return be.axisLetter=y,be.axis=T,be.crossAxis=C,be.value=ne,be.constvar=e,be.index=f,be.x=pe,be.y=de,be.smoothing=C.smoothing,be}function K(ne){var X,J,se,V,j,H=[],oe=[],U={};if(U.length=c.length,U.crossLength=D.length,"b"===y)for(se=Math.max(0,Math.min(z-2,ne)),j=Math.min(1,Math.max(0,ne-se)),U.xy=function(te){return b.evalxy([],te,ne)},U.dxy=function(te,ee){return b.dxydi([],te,se,ee,j)},X=0;X<S;X++)H[X]=P[ne*q][X],oe[X]=L[ne*q][X];else for(J=Math.max(0,Math.min(N-2,ne)),V=Math.min(1,Math.max(0,ne-J)),U.xy=function(te){return b.evalxy([],ne,te)},U.dxy=function(te,ee){return b.dxydj([],J,te,V,ee)},X=0;X<E;X++)H[X]=P[X][ne*q],oe[X]=L[X][ne*q];return U.axisLetter=y,U.axis=T,U.crossAxis=C,U.value=c[ne],U.constvar=e,U.index=ne,U.x=H,U.y=oe,U.smoothing=C.smoothing,U}if("array"===T.tickmode){for(n=5e-15,l=(m=[Math.floor((c.length-1-T.arraytick0)/T.arraydtick*(1+n)),Math.ceil(-T.arraytick0/T.arraydtick/(1+n))].sort(function(ne,X){return ne-X}))[0]-1,i=m[1]+1,f=l;f<i;f++)(t=T.arraytick0+T.arraydtick*f)<0||t>c.length-1||x.push(g(K(t),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(f=l;f<i;f++)if(o=T.arraytick0+T.arraydtick*f,d=Math.min(o+T.arraydtick,c.length-1),!(o<0||o>c.length-1||d<0||d>c.length-1))for(h=c[o],a=c[d],r=0;r<T.minorgridcount;r++)(_=d-o)<=0||(s=h+(a-h)*(r+1)/(T.minorgridcount+1)*(T.arraydtick/_))<c[0]||s>c[c.length-1]||w.push(g(G(s),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&M.push(g(K(0),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&M.push(g(K(c.length-1),{color:T.endlinecolor,width:T.endlinewidth}))}else{for(n=5e-15,l=(m=[Math.floor((c[c.length-1]-T.tick0)/T.dtick*(1+n)),Math.ceil((c[0]-T.tick0)/T.dtick/(1+n))].sort(function(ne,X){return ne-X}))[0],i=m[1],f=l;f<=i;f++)x.push(g(G(u=T.tick0+T.dtick*f),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(f=l-1;f<i+1;f++)for(u=T.tick0+T.dtick*f,r=0;r<T.minorgridcount;r++)(s=u+T.dtick*(r+1)/(T.minorgridcount+1))<c[0]||s>c[c.length-1]||w.push(g(G(s),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&M.push(g(G(c[0]),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&M.push(g(G(c[c.length-1]),{color:T.endlinecolor,width:T.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib/extend").extendFlat;ae.exports=function(b,y){var e,r,t,o=y._labels=[],n=y._gridlines;for(e=0;e<n.length;e++)t=n[e],-1!==["start","both"].indexOf(y.showticklabels)&&(r=p.tickText(y,t.value),g(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:t.xy(0),dxy:t.dxy(0,0),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===n.length-1}),o.push(r)),-1!==["end","both"].indexOf(y.showticklabels)&&(r=p.tickText(y,t.value),g(r,{endAnchor:!1,xy:t.xy(t.crossLength-1),dxy:t.dxy(t.crossLength-2,1),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===n.length-1}),o.push(r))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y){var e=p[0]-g[0],r=p[1]-g[1],t=b[0]-g[0],o=b[1]-g[1],n=Math.pow(e*e+r*r,.25),m=Math.pow(t*t+o*o,.25),l=(m*m*e-n*n*t)*y,i=(m*m*r-n*n*o)*y,f=m*(n+m)*3,u=n*(n+m)*3;return[[g[0]+(f&&l/f),g[1]+(f&&i/f)],[g[0]-(u&&l/u),g[1]-(u&&i/u)]]}},{}],709:[function(v,ae,ie){"use strict";var p=v("../../lib").isArrayOrTypedArray;ae.exports=function(g,b,y){var e,r,t,o,n,m,l=[],i=p(g)?g.length:g,f=p(b)?b.length:b,u=p(g)?g:null,s=p(b)?b:null;u&&(t=(u.length-1)/(u[u.length-1]-u[0])/(i-1)),s&&(o=(s.length-1)/(s[s.length-1]-s[0])/(f-1));var d=1/0,h=-1/0;for(r=0;r<f;r++)for(l[r]=[],n=s?(s[r]-s[0])*o:r/(f-1),e=0;e<i;e++)m=(u?(u[e]-u[0])*t:e/(i-1))-n*y,d=Math.min(m,d),h=Math.max(m,h),l[r][e]=m;var a=1/(h-d),_=-d*a;for(r=0;r<f;r++)for(e=0;e<i;e++)l[r][e]=a*l[r][e]+_;return l}},{"../../lib":515}],710:[function(v,ae,ie){"use strict";var p=v("./catmull_rom"),g=v("../../lib").ensureArray;function b(y,e,r){return[(2*(-.5*r[0]+1.5*e[0])+y[0])/3,(2*(-.5*r[1]+1.5*e[1])+y[1])/3]}ae.exports=function(y,e,r,t,o,n){var m,l,i,f,u,s,d,h,a,_,c=r[0].length,T=r.length,x=o?3*c-2:c,w=n?3*T-2:T;for(y=g(y,w),e=g(e,w),i=0;i<w;i++)y[i]=g(y[i],x),e[i]=g(e[i],x);for(l=0,f=0;l<T;l++,f+=n?3:1)for(u=y[f],s=e[f],d=r[l],h=t[l],m=0,i=0;m<c;m++,i+=o?3:1)u[i]=d[m],s[i]=h[m];if(o)for(l=0,f=0;l<T;l++,f+=n?3:1){for(m=1,i=3;m<c-1;m++,i+=3)a=p([r[l][m-1],t[l][m-1]],[r[l][m],t[l][m]],[r[l][m+1],t[l][m+1]],o),y[f][i-1]=a[0][0],e[f][i-1]=a[0][1],y[f][i+1]=a[1][0],e[f][i+1]=a[1][1];_=b([y[f][0],e[f][0]],[y[f][2],e[f][2]],[y[f][3],e[f][3]]),y[f][1]=_[0],e[f][1]=_[1],_=b([y[f][x-1],e[f][x-1]],[y[f][x-3],e[f][x-3]],[y[f][x-4],e[f][x-4]]),y[f][x-2]=_[0],e[f][x-2]=_[1]}if(n)for(i=0;i<x;i++){for(f=3;f<w-3;f+=3)a=p([y[f-3][i],e[f-3][i]],[y[f][i],e[f][i]],[y[f+3][i],e[f+3][i]],n),y[f-1][i]=a[0][0],e[f-1][i]=a[0][1],y[f+1][i]=a[1][0],e[f+1][i]=a[1][1];_=b([y[0][i],e[0][i]],[y[2][i],e[2][i]],[y[3][i],e[3][i]]),y[1][i]=_[0],e[1][i]=_[1],_=b([y[w-1][i],e[w-1][i]],[y[w-3][i],e[w-3][i]],[y[w-4][i],e[w-4][i]]),y[w-2][i]=_[0],e[w-2][i]=_[1]}if(o&&n)for(f=1;f<w;f+=(f+1)%3==0?2:1){for(i=3;i<x-3;i+=3)a=p([y[f][i-3],e[f][i-3]],[y[f][i],e[f][i]],[y[f][i+3],e[f][i+3]],o),y[f][i-1]=.5*(y[f][i-1]+a[0][0]),e[f][i-1]=.5*(e[f][i-1]+a[0][1]),y[f][i+1]=.5*(y[f][i+1]+a[1][0]),e[f][i+1]=.5*(e[f][i+1]+a[1][1]);_=b([y[f][0],e[f][0]],[y[f][2],e[f][2]],[y[f][3],e[f][3]]),y[f][1]=.5*(y[f][1]+_[0]),e[f][1]=.5*(e[f][1]+_[1]),_=b([y[f][x-1],e[f][x-1]],[y[f][x-3],e[f][x-3]],[y[f][x-4],e[f][x-4]]),y[f][x-2]=.5*(y[f][x-2]+_[0]),e[f][x-2]=.5*(e[f][x-2]+_[1])}return[y,e]}},{"../../lib":515,"./catmull_rom":708}],711:[function(v,ae,ie){"use strict";ae.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){return g&&b?function(y,e,r,t,o){var n,f,u;y||(y=[]),e*=3,r*=3;var s=t*t,d=1-t,h=d*d,a=d*t*2,_=-3*h,c=3*(h-a),T=3*(a-s),x=3*s,w=o*o,M=w*o,D=1-o,C=D*D,P=C*D;for(u=0;u<p.length;u++)n=_*(f=p[u])[r][e]+c*f[r][e+1]+T*f[r][e+2]+x*f[r][e+3],y[u]=P*n+3*(C*o*(_*f[r+1][e]+c*f[r+1][e+1]+T*f[r+1][e+2]+x*f[r+1][e+3])+D*w*(_*f[r+2][e]+c*f[r+2][e+1]+T*f[r+2][e+2]+x*f[r+2][e+3]))+M*(_*f[r+3][e]+c*f[r+3][e+1]+T*f[r+3][e+2]+x*f[r+3][e+3]);return y}:g?function(y,e,r,t,o){var n,l,i;y||(y=[]),e*=3;var f=t*t,u=1-t,s=u*u,d=u*t*2,h=-3*s,a=3*(s-d),_=3*(d-f),c=3*f,T=1-o;for(l=0;l<p.length;l++)n=h*(i=p[l])[r][e]+a*i[r][e+1]+_*i[r][e+2]+c*i[r][e+3],y[l]=T*n+o*(h*i[r+1][e]+a*i[r+1][e+1]+_*i[r+1][e+2]+c*i[r+1][e+3]);return y}:b?function(y,e,r,t,o){var n,f,u;y||(y=[]),r*=3;var s=o*o,d=s*o,h=1-o,a=h*h,_=a*h;for(f=0;f<p.length;f++)n=(u=p[f])[r][e+1]-u[r][e],y[f]=_*n+3*(a*o*(u[r+1][e+1]-u[r+1][e])+h*s*(u[r+2][e+1]-u[r+2][e]))+d*(u[r+3][e+1]-u[r+3][e]);return y}:function(y,e,r,t,o){var n,l,i;y||(y=[]);var f=1-o;for(l=0;l<p.length;l++)n=(i=p[l])[r][e+1]-i[r][e],y[l]=f*n+o*(i[r+1][e+1]-i[r+1][e]);return y}}},{}],713:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){return g&&b?function(y,e,r,t,o){var n,f,u;y||(y=[]),e*=3,r*=3;var s=t*t,d=s*t,h=1-t,a=h*h,_=a*h,c=o*o,T=1-o,x=T*T,w=T*o*2,M=-3*x,D=3*(x-w),C=3*(w-c),P=3*c;for(u=0;u<p.length;u++)n=M*(f=p[u])[r][e]+D*f[r+1][e]+C*f[r+2][e]+P*f[r+3][e],y[u]=_*n+3*(a*t*(M*f[r][e+1]+D*f[r+1][e+1]+C*f[r+2][e+1]+P*f[r+3][e+1])+h*s*(M*f[r][e+2]+D*f[r+1][e+2]+C*f[r+2][e+2]+P*f[r+3][e+2]))+d*(M*f[r][e+3]+D*f[r+1][e+3]+C*f[r+2][e+3]+P*f[r+3][e+3]);return y}:g?function(y,e,r,t,o){var n,f,u;y||(y=[]),e*=3;var s=o*o,d=s*o,h=1-o,a=h*h,_=a*h;for(f=0;f<p.length;f++)n=(u=p[f])[r+1][e]-u[r][e],y[f]=_*n+3*(a*o*(u[r+1][e+1]-u[r][e+1])+h*s*(u[r+1][e+2]-u[r][e+2]))+d*(u[r+1][e+3]-u[r][e+3]);return y}:b?function(y,e,r,t,o){var n,l,i;y||(y=[]),r*=3;var f=1-t,u=o*o,s=1-o,d=s*s,h=s*o*2,a=-3*d,_=3*(d-h),c=3*(h-u),T=3*u;for(l=0;l<p.length;l++)n=a*(i=p[l])[r][e]+_*i[r+1][e]+c*i[r+2][e]+T*i[r+3][e],y[l]=f*n+t*(a*i[r][e+1]+_*i[r+1][e+1]+c*i[r+2][e+1]+T*i[r+3][e+1]);return y}:function(y,e,r,t,o){var n,l,i;y||(y=[]);var f=1-t;for(l=0;l<p.length;l++)n=(i=p[l])[r+1][e]-i[r][e],y[l]=f*n+t*(i[r+1][e+1]-i[r][e+1]);return y}}},{}],714:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){var r=g-2,t=b-2;return y&&e?function(o,n,m){var l,s,d;o||(o=[]);var h=Math.max(0,Math.min(Math.floor(n),r)),a=Math.max(0,Math.min(Math.floor(m),t)),_=Math.max(0,Math.min(1,n-h)),c=Math.max(0,Math.min(1,m-a));h*=3,a*=3;var T=_*_,x=T*_,w=1-_,M=w*w,D=M*w,C=c*c,P=C*c,L=1-c,S=L*L,E=S*L;for(d=0;d<p.length;d++)l=D*(s=p[d])[a][h]+3*(M*_*s[a][h+1]+w*T*s[a][h+2])+x*s[a][h+3],o[d]=E*l+3*(S*c*(D*s[a+1][h]+3*(M*_*s[a+1][h+1]+w*T*s[a+1][h+2])+x*s[a+1][h+3])+L*C*(D*s[a+2][h]+3*(M*_*s[a+2][h+1]+w*T*s[a+2][h+2])+x*s[a+2][h+3]))+P*(D*s[a+3][h]+3*(M*_*s[a+3][h+1]+w*T*s[a+3][h+2])+x*s[a+3][h+3]);return o}:y?function(o,n,m){o||(o=[]);var l,s,d,h=Math.max(0,Math.min(Math.floor(n),r)),a=Math.max(0,Math.min(Math.floor(m),t)),_=Math.max(0,Math.min(1,n-h)),c=Math.max(0,Math.min(1,m-a));h*=3;var T=_*_,x=T*_,w=1-_,M=w*w,D=M*w,C=1-c;for(s=0;s<p.length;s++)l=C*(d=p[s])[a][h]+c*d[a+1][h],o[s]=D*l+3*(M*_*(C*d[a][h+1]+c*d[a+1][h+1])+w*T*(C*d[a][h+2]+c*d[a+1][h+1]))+x*(C*d[a][h+3]+c*d[a+1][h+1]);return o}:e?function(o,n,m){o||(o=[]);var l,s,d,h=Math.max(0,Math.min(Math.floor(n),r)),a=Math.max(0,Math.min(Math.floor(m),t)),_=Math.max(0,Math.min(1,n-h)),c=Math.max(0,Math.min(1,m-a));a*=3;var T=c*c,x=T*c,w=1-c,M=w*w,D=M*w,C=1-_;for(s=0;s<p.length;s++)l=C*(d=p[s])[a][h]+_*d[a][h+1],o[s]=D*l+3*(M*c*(C*d[a+1][h]+_*d[a+1][h+1])+w*T*(C*d[a+2][h]+_*d[a+2][h+1]))+x*(C*d[a+3][h]+_*d[a+3][h+1]);return o}:function(o,n,m){o||(o=[]);var l,f,u,s=Math.max(0,Math.min(Math.floor(n),r)),d=Math.max(0,Math.min(Math.floor(m),t)),h=Math.max(0,Math.min(1,n-s)),a=Math.max(0,Math.min(1,m-d)),_=1-a,c=1-h;for(f=0;f<p.length;f++)l=c*(u=p[f])[d][s]+h*u[d][s+1],o[f]=_*l+a*(c*u[d+1][s]+h*u[d+1][s+1]);return o}}},{}],715:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./xy_defaults"),b=v("./ab_defaults"),y=v("./attributes"),e=v("../../components/color/attributes");ae.exports=function(r,t,o,n){function m(i,f){return p.coerce(r,t,y,i,f)}t._clipPathId="clip"+t.uid+"carpet";var l=m("color",e.defaultLine);p.coerceFont(m,"font"),m("carpet"),b(r,t,n,m,l),t.a&&t.b?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),g(r,t,m)||(t.visible=!1),t._cheater&&m("cheaterslope")):t.visible=!1}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),plot:v("./plot"),calc:v("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(v,ae,ie){"use strict";ae.exports=function(p,g){for(var b,y=p._fullData.length,e=0;e<y;e++){var r=p._fullData[e];if(r.index!==g.index&&"carpet"===r.type&&(b||(b=r),r.carpet===g.carpet))return r}return b}},{}],718:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){if(0===p.length)return"";var y,e=[],r=b?3:1;for(y=0;y<p.length;y+=r)e.push(p[y]+","+g[y]),b&&y<p.length-r&&(e.push("C"),e.push([p[y+1]+","+g[y+1],p[y+2]+","+g[y+2]+" "].join(" ")));return e.join(b?"":"L")}},{}],719:[function(v,ae,ie){"use strict";var p=v("../../lib").isArrayOrTypedArray;ae.exports=function(g,b,y){var e;for(p(g)?g.length>b.length&&(g=g.slice(0,b.length)):g=[],e=0;e<b.length;e++)g[e]=y(b[e]);return g}},{"../../lib":515}],720:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e,r){var t=e[0]*p.dpdx(g),o=e[1]*p.dpdy(b),n=1,m=1;if(r){var l=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]);m=Math.max(0,(e[0]*r[0]+e[1]*r[1])/l/i)}var u=180*Math.atan2(o,t)/Math.PI;return u<-90?(u+=180,n=-n):u>90&&(u-=180,n=-n),{angle:u,flip:n,p:p.c2p(y,g,b),offsetMultplier:m}}},{}],721:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("./map_1d_array"),y=v("./makepath"),e=v("./orient_text"),r=v("../../lib/svg_text_utils"),t=v("../../lib"),o=t.strRotate,n=t.strTranslate,m=v("../../constants/alignment");function l(d,h,a,_,c,T){var x="const-"+c+"-lines",w=a.selectAll("."+x).data(T);w.enter().append("path").classed(x,!0).style("vector-effect","non-scaling-stroke"),w.each(function(M){var D=M,P=D.y,L=b([],D.x,d.c2p),S=b([],P,h.c2p),E="M"+y(L,S,D.smoothing);p.select(this).attr("d",E).style("stroke-width",D.width).style("stroke",D.color).style("stroke-dasharray",g.dashStyle(D.dash,D.width)).style("fill","none")}),w.exit().remove()}function i(d,h,a,_,c,T,x,w){var M=T.selectAll("text."+w).data(x);M.enter().append("text").classed(w,!0);var D=0,C={};return M.each(function(P,L){var S;if("auto"===P.axis.tickangle)S=e(_,h,a,P.xy,P.dxy);else{var E=(P.axis.tickangle+180)*Math.PI/180;S=e(_,h,a,P.xy,[Math.cos(E),Math.sin(E)])}L||(C={angle:S.angle,flip:S.flip});var N=(P.endAnchor?-1:1)*S.flip,z=p.select(this).attr({"text-anchor":N>0?"start":"end","data-notex":1}).call(g.font,P.font).text(P.text).call(r.convertToTspans,d),q=g.bBox(this);z.attr("transform",n(S.p[0],S.p[1])+o(S.angle)+n(P.axis.labelpadding*N,.3*q.height)),D=Math.max(D,q.width+P.axis.labelpadding)}),M.exit().remove(),C.maxExtent=D,C}ae.exports=function(d,h,a,_){var c=h.xaxis,T=h.yaxis,x=d._fullLayout._clips;t.makeTraceGroups(_,a,"trace").each(function(w){var M=p.select(this),D=w[0],C=D.trace,P=C.aaxis,L=C.baxis,S=t.ensureSingle(M,"g","minorlayer"),E=t.ensureSingle(M,"g","majorlayer"),N=t.ensureSingle(M,"g","boundarylayer"),z=t.ensureSingle(M,"g","labellayer");M.style("opacity",C.opacity),l(c,T,E,0,"a",P._gridlines),l(c,T,E,0,"b",L._gridlines),l(c,T,S,0,"a",P._minorgridlines),l(c,T,S,0,"b",L._minorgridlines),l(c,T,N,0,"a-boundary",P._boundarylines),l(c,T,N,0,"b-boundary",L._boundarylines);var K,ne,X,se,V,j,H,oe,U,te,ee,le,ce,pe,de,q=i(d,c,T,C,0,z,P._labels,"a-label"),G=i(d,c,T,C,0,z,L._labels,"b-label");K=d,ne=z,X=C,se=c,V=T,j=q,H=G,le=t.aggNums(Math.min,null,X.a),ce=t.aggNums(Math.max,null,X.a),pe=t.aggNums(Math.min,null,X.b),de=t.aggNums(Math.max,null,X.b),te=X.ab2xy(oe=.5*(le+ce),U=pe,!0),ee=X.dxyda_rough(oe,U),void 0===j.angle&&t.extendFlat(j,e(X,se,V,te,X.dxydb_rough(oe,U))),s(K,ne,X,0,te,ee,X.aaxis,se,V,j,"a-title"),te=X.ab2xy(oe=le,U=.5*(pe+de),!0),ee=X.dxydb_rough(oe,U),void 0===H.angle&&t.extendFlat(H,e(X,se,V,te,X.dxyda_rough(oe,U))),s(K,ne,X,0,te,ee,X.baxis,se,V,H,"b-title"),function(K,ne,X,J,se){var V,j,H,oe,U=X.select("#"+K._clipPathId);U.size()||(U=X.append("clipPath").classed("carpetclip",!0));var te=t.ensureSingle(U,"path","carpetboundary"),ee=ne.clipsegments,le=[];for(oe=0;oe<ee.length;oe++)j=b([],(V=ee[oe]).x,J.c2p),H=b([],V.y,se.c2p),le.push(y(j,H,V.bicubic));var ce="M"+le.join("L")+"Z";U.attr("id",K._clipPathId),te.attr("d",ce)}(C,D,x,c,T)})};var f=m.LINE_SPACING,u=(1-m.MID_SHIFT)/f+1;function s(d,h,a,_,c,T,x,w,M,D,C){var P=[];x.title.text&&P.push(x.title.text);var L=h.selectAll("text."+C).data(P),S=D.maxExtent;L.enter().append("text").classed(C,!0),L.each(function(){var E=e(a,w,M,c,T);-1===["start","both"].indexOf(x.showticklabels)&&(S=0);var N=x.title.font.size;S+=N+x.title.offset;var z=(D.angle+(D.flip<0?180:0)-E.angle+450)%360,q=z>90&&z<270,G=p.select(this);G.text(x.title.text).call(r.convertToTspans,d),q&&(S=(-r.lineCount(G)+u)*f*N-S),G.attr("transform",n(E.p[0],E.p[1])+o(E.angle)+n(0,S)).attr("text-anchor","middle").call(g.font,x.title.font)}),L.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(v,ae,ie){"use strict";var p=v("./constants"),g=v("../../lib/search").findBin,b=v("./compute_control_points"),y=v("./create_spline_evaluator"),e=v("./create_i_derivative_evaluator"),r=v("./create_j_derivative_evaluator");ae.exports=function(t){var o=t._a,n=t._b,m=o.length,l=n.length,i=t.aaxis,f=t.baxis,u=o[0],s=o[m-1],d=n[0],h=n[l-1],a=o[o.length-1]-o[0],_=n[n.length-1]-n[0],c=a*p.RELATIVE_CULL_TOLERANCE,T=_*p.RELATIVE_CULL_TOLERANCE;u-=c,s+=c,d-=T,h+=T,t.isVisible=function(x,w){return x>u&&x<s&&w>d&&w<h},t.isOccluded=function(x,w){return x<u||x>s||w<d||w>h},t.setScale=function(){var M=b(t._xctrl,t._yctrl,t._x,t._y,i.smoothing,f.smoothing);t._xctrl=M[0],t._yctrl=M[1],t.evalxy=y([t._xctrl,t._yctrl],m,l,i.smoothing,f.smoothing),t.dxydi=e([t._xctrl,t._yctrl],i.smoothing,f.smoothing),t.dxydj=r([t._xctrl,t._yctrl],i.smoothing,f.smoothing)},t.i2a=function(x){var w=Math.max(0,Math.floor(x[0]),m-2),M=x[0]-w;return(1-M)*o[w]+M*o[w+1]},t.j2b=function(x){var w=Math.max(0,Math.floor(x[1]),m-2),M=x[1]-w;return(1-M)*n[w]+M*n[w+1]},t.ij2ab=function(x){return[t.i2a(x[0]),t.j2b(x[1])]},t.a2i=function(x){var w=Math.max(0,Math.min(g(x,o),m-2)),M=o[w];return Math.max(0,Math.min(m-1,w+(x-M)/(o[w+1]-M)))},t.b2j=function(x){var w=Math.max(0,Math.min(g(x,n),l-2)),M=n[w];return Math.max(0,Math.min(l-1,w+(x-M)/(n[w+1]-M)))},t.ab2ij=function(x){return[t.a2i(x[0]),t.b2j(x[1])]},t.i2c=function(x,w){return t.evalxy([],x,w)},t.ab2xy=function(x,w,M){if(!M&&(x<o[0]||x>o[m-1]|w<n[0]||w>n[l-1]))return[!1,!1];var D=t.a2i(x),C=t.b2j(w),P=t.evalxy([],D,C);if(M){var L,S,E,N,z=0,q=0,G=[];x<o[0]?(L=0,S=0,z=(x-o[0])/(o[1]-o[0])):x>o[m-1]?(L=m-2,S=1,z=(x-o[m-1])/(o[m-1]-o[m-2])):S=D-(L=Math.max(0,Math.min(m-2,Math.floor(D)))),w<n[0]?(E=0,N=0,q=(w-n[0])/(n[1]-n[0])):w>n[l-1]?(E=l-2,N=1,q=(w-n[l-1])/(n[l-1]-n[l-2])):N=C-(E=Math.max(0,Math.min(l-2,Math.floor(C)))),z&&(t.dxydi(G,L,E,S,N),P[0]+=G[0]*z,P[1]+=G[1]*z),q&&(t.dxydj(G,L,E,S,N),P[0]+=G[0]*q,P[1]+=G[1]*q)}return P},t.c2p=function(x,w,M){return[w.c2p(x[0]),M.c2p(x[1])]},t.p2x=function(x,w,M){return[w.p2c(x[0]),M.p2c(x[1])]},t.dadi=function(x){var w=Math.max(0,Math.min(o.length-2,x));return o[w+1]-o[w]},t.dbdj=function(x){var w=Math.max(0,Math.min(n.length-2,x));return n[w+1]-n[w]},t.dxyda=function(x,w,M,D){var C=t.dxydi(null,x,w,M,D),P=t.dadi(x,M);return[C[0]/P,C[1]/P]},t.dxydb=function(x,w,M,D){var C=t.dxydj(null,x,w,M,D),P=t.dbdj(w,D);return[C[0]/P,C[1]/P]},t.dxyda_rough=function(x,w,M){var D=a*(M||.1),C=t.ab2xy(x+D,w,!0),P=t.ab2xy(x-D,w,!0);return[.5*(C[0]-P[0])/D,.5*(C[1]-P[1])/D]},t.dxydb_rough=function(x,w,M){var D=_*(M||.1),C=t.ab2xy(x,w+D,!0),P=t.ab2xy(x,w-D,!0);return[.5*(C[0]-P[0])/D,.5*(C[1]-P[1])/D]},t.dpdx=function(x){return x._m},t.dpdy=function(x){return x._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b,y){var e,r,t,o=[],n=[],m=g[0].length,l=g.length;var f,u,s,d,h,a,_,c,T,x,ne,X,J,se,V,M=0;for(e=0;e<m;e++)for(r=0;r<l;r++)void 0===g[r][e]&&(o.push(e),n.push(r),g[r][e]=(X=r,J=void 0,se=void 0,V=void 0,se=0,V=0,(ne=e)>0&&void 0!==(J=g[X][ne-1])&&(V++,se+=J),ne<m-1&&void 0!==(J=g[X][ne+1])&&(V++,se+=J),X>0&&void 0!==(J=g[X-1][ne])&&(V++,se+=J),X<l-1&&void 0!==(J=g[X+1][ne])&&(V++,se+=J),se/Math.max(1,V))),M=Math.max(M,Math.abs(g[r][e]));if(!o.length)return g;var D=0,C=0,P=o.length;do{for(D=0,t=0;t<P;t++){r=n[t];var S,E,N,z,q,G=0,K=0;0===(e=o[t])?(E=b[z=Math.min(m-1,2)],K+=(S=g[r][1])+(S-g[r][z])*(b[0]-(N=b[1]))/(N-E),G++):e===m-1&&(E=b[z=Math.max(0,m-3)],K+=(S=g[r][m-2])+(S-g[r][z])*(b[m-1]-(N=b[m-2]))/(N-E),G++),(0===e||e===m-1)&&r>0&&r<l-1&&(K+=((u=y[r]-y[r-1])*g[r+1][e]+(f=y[r+1]-y[r])*g[r-1][e])/(u+f),G++),0===r?(E=y[q=Math.min(l-1,2)],K+=(S=g[1][e])+(S-g[q][e])*(y[0]-(N=y[1]))/(N-E),G++):r===l-1&&(E=y[q=Math.max(0,l-3)],K+=(S=g[l-2][e])+(S-g[q][e])*(y[l-1]-(N=y[l-2]))/(N-E),G++),(0===r||r===l-1)&&e>0&&e<m-1&&(K+=((u=b[e]-b[e-1])*g[r][e+1]+(f=b[e+1]-b[e])*g[r][e-1])/(u+f),G++),G?K/=G:(c=(h=y[r+1]-y[r])*(a=y[r]-y[r-1])*(h+a),K=((_=(s=b[e+1]-b[e])*(d=b[e]-b[e-1])*(s+d))*(a*g[r+1][e]+h*g[r-1][e])+c*(d*g[r][e+1]+s*g[r][e-1]))/(c*(d+s)+_*(a+h))),D+=(x=(T=K-g[r][e])/M)*x,g[r][e]+=T*(1+(G?0:.85))}D=Math.sqrt(D)}while(C++<100&&D>1e-5);return p.log("Smoother converged to",D,"after",C,"iterations"),g}},{"../../lib":515}],724:[function(v,ae,ie){"use strict";var p=v("../../lib").isArray1D;ae.exports=function(g,b,y){var e=y("x"),r=e&&e.length,t=y("y"),o=t&&t.length;if(!r&&!o)return!1;if(b._cheater=!e,r&&!p(e)||o&&!p(t))b._length=null;else{var n=r?e.length:1/0;o&&(n=Math.min(n,t.length)),b.a&&b.a.length&&(n=Math.min(n,b.a.length)),b.b&&b.b.length&&(n=Math.min(n,b.b.length)),b._length=n}return!0}},{"../../lib":515}],725:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../scattergeo/attributes"),b=v("../../components/colorscale/attributes"),y=v("../../plots/attributes"),e=v("../../components/color/attributes").defaultLine,r=v("../../lib/extend").extendFlat,t=g.marker.line;ae.exports=r({locations:{valType:"data_array",editType:"calc"},locationmode:g.locationmode,z:{valType:"data_array",editType:"calc"},geojson:r({},g.geojson,{}),featureidkey:g.featureidkey,text:r({},g.text,{}),hovertext:r({},g.hovertext,{}),marker:{line:{color:r({},t.color,{dflt:e}),width:r({},t.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:g.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:r({},y.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:p(),showlegend:r({},y.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,b=v("../../components/colorscale/calc"),y=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection");function r(t){return t&&"string"==typeof t}ae.exports=function(t,o){var n,m=o._length,l=new Array(m);n=o.geojson?function(d){return r(d)||p(d)}:r;for(var i=0;i<m;i++){var f=l[i]={},u=o.locations[i],s=o.z[i];n(u)&&p(s)?(f.loc=u,f.z=s):(f.loc=null,f.z=g),f.index=i}return y(l,o),b(t,o,{vals:o.z,containerStr:"",cLetter:"z"}),e(l,o),l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/defaults"),b=v("./attributes");ae.exports=function(y,e,r,t){function o(f,u){return p.coerce(y,e,b,f,u)}var n=o("locations"),m=o("z");if(n&&n.length&&p.isArrayOrTypedArray(m)&&m.length){e._length=Math.min(n.length,m.length);var l,i=o("geojson");("string"==typeof i&&""!==i||p.isPlainObject(i))&&(l="geojson-id"),"geojson-id"===o("locationmode",l)&&o("featureidkey"),o("text"),o("hovertext"),o("hovertemplate"),o("marker.line.width")&&o("marker.line.color"),o("marker.opacity"),g(y,e,t,o,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(e,o)}else e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){p.location=g.location,p.z=g.z;var r=y[e];return r.fIn&&r.fIn.properties&&(p.properties=r.fIn.properties),p.ct=r.ct,p}},{}],729:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("./attributes"),b=v("../../lib").fillText;ae.exports=function(y,e,r){var t,o,n,m,l=y.cd,i=l[0].trace,f=y.subplot,u=[e,r],s=[e+360,r];for(o=0;o<l.length;o++)if(m=!1,(t=l[o])._polygons){for(n=0;n<t._polygons.length;n++)t._polygons[n].contains(u)&&(m=!m),t._polygons[n].contains(s)&&(m=!m);if(m)break}if(m&&t)return y.x0=y.x1=y.xa.c2p(t.ct),y.y0=y.y1=y.ya.c2p(t.ct),y.index=t.index,y.location=t.loc,y.z=t.z,y.zLabel=p.tickText(f.mockAxis,f.mockAxis.c2l(t.z),"hover").text,y.hovertemplate=t.hovertemplate,function(d,h,a){if(!h.hovertemplate){var _=a.hi||h.hoverinfo,c=String(a.loc),T="all"===_?g.hoverinfo.flags:_.split("+"),x=-1!==T.indexOf("name"),w=-1!==T.indexOf("location"),M=-1!==T.indexOf("z"),D=-1!==T.indexOf("text"),C=[];!x&&w?d.nameOverride=c:(x&&(d.nameOverride=h.name),w&&C.push(c)),M&&C.push(d.zLabel),D&&b(a,h,C),d.extraText=C.join("<br>")}}(y,i,t),[y]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"choropleth",basePlotModule:v("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../lib/geo_location_utils"),y=v("../../lib/topojson_utils").getTopojsonFeatures,e=v("../../plots/cartesian/autorange").findExtremes,r=v("./style").style;ae.exports={calcGeoJSON:function(t,o){for(var n=t[0].trace,m=o[n.geo],l=m._subplot,i=n.locationmode,f=n._length,u="geojson-id"===i?b.extractTraceFeature(t):y(n,l.topojson),s=[],d=[],h=0;h<f;h++){var a=t[h],_="geojson-id"===i?a.fOut:b.locationToFeature(i,a.loc,u);if(_){a.geojson=_,a.ct=_.properties.ct,a._polygons=b.feature2polygons(_);var c=b.computeBbox(_);s.push(c[0],c[2]),d.push(c[1],c[3])}else a.geojson=null}if("geojson"===m.fitbounds&&"geojson-id"===i){var T=b.computeBbox(b.getTraceGeojson(n));s=[T[0],T[2]],d=[T[1],T[3]]}var x={padded:!0};n._extremes.lon=e(m.lonaxis._ax,s,x),n._extremes.lat=e(m.lataxis._ax,d,x)},plot:function(t,o,n){var m=o.layers.backplot.select(".choroplethlayer");g.makeTraceGroups(m,n,"trace choropleth").each(function(l){var i=p.select(this).selectAll("path.choroplethlocation").data(g.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),r(t,l)})}}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(v,ae,ie){"use strict";ae.exports=function(p,g){var b,y,e,r,t,o=p.cd,n=p.xaxis,m=p.yaxis,l=[];if(!1===g)for(b=0;b<o.length;b++)o[b].selected=0;else for(b=0;b<o.length;b++)(e=(y=o[b]).ct)&&(r=n.c2p(e),t=m.c2p(e),g.contains([r,t],null,b,p)?(l.push({pointNumber:b,lon:e[0],lat:e[1]}),y.selected=1):y.selected=0);return l}},{}],733:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../../components/drawing"),y=v("../../components/colorscale");function e(r,t){var o=t[0].trace,n=t[0].node3.selectAll(".choroplethlocation"),m=o.marker||{},l=m.line||{},i=y.makeColorScaleFuncFromTrace(o);n.each(function(f){p.select(this).attr("fill",i(f.z)).call(g.stroke,f.mlc||l.color).call(b.dashLine,"",f.mlw||l.width||0).style("opacity",m.opacity)}),b.selectedPointStyle(n,o,r)}ae.exports={style:function(r,t){t&&e(r,t)},styleOnSelect:function(r,t){var n=t[0].trace;n.selectedpoints?b.selectedPointStyle(t[0].node3.selectAll(".choroplethlocation"),n,r):e(r,t)}}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(v,ae,ie){"use strict";var p=v("../choropleth/attributes"),g=v("../../components/colorscale/attributes"),b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat;ae.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},p.featureidkey,{}),below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,marker:{line:{color:e({},p.marker.line.color,{editType:"plot"}),width:e({},p.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},p.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},p.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},p.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:p.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:e({},y.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../components/colorscale"),y=v("../../components/drawing"),e=v("../../lib/geojson_utils").makeBlank,r=v("../../lib/geo_location_utils");function t(o){var n,m=o[0].trace,l=m._opts;if(m.selectedpoints){for(var i=y.makeSelectedPointStyleFns(m),f=0;f<o.length;f++){var u=o[f];u.fOut&&(u.fOut.properties.mo2=i.selectedOpacityFn(u))}n={type:"identity",property:"mo2"}}else n=g.isArrayOrTypedArray(m.marker.opacity)?{type:"identity",property:"mo"}:m.marker.opacity;return g.extendFlat(l.fill.paint,{"fill-opacity":n}),g.extendFlat(l.line.paint,{"line-opacity":n}),l}ae.exports={convert:function(o){var n=o[0].trace,m=!0===n.visible&&0!==n._length,l={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},f=n._opts={fill:l,line:i,geojson:e()};if(!m)return f;var u=r.extractTraceFeature(o);if(!u)return f;var s,d,h,a=b.makeColorScaleFuncFromTrace(n),_=n.marker,c=_.line||{};g.isArrayOrTypedArray(_.opacity)&&(s=function(C){var P=C.mo;return p(P)?+g.constrain(P,0,1):0}),g.isArrayOrTypedArray(c.color)&&(d=function(C){return C.mlc}),g.isArrayOrTypedArray(c.width)&&(h=function(C){return C.mlw});for(var T=0;T<o.length;T++){var x=o[T],w=x.fOut;if(w){var M=w.properties;M.fc=a(x.z),s&&(M.mo=s(x)),d&&(M.mlc=d(x)),h&&(M.mlw=h(x)),x.ct=M.ct,x._polygons=r.feature2polygons(w)}}var D=s?{type:"identity",property:"mo"}:_.opacity;return g.extendFlat(l.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":D}),g.extendFlat(i.paint,{"line-color":d?{type:"identity",property:"mlc"}:c.color,"line-width":h?{type:"identity",property:"mlw"}:c.width,"line-opacity":D}),l.layout.visibility="visible",i.layout.visibility="visible",f.geojson={type:"FeatureCollection",features:u},t(o),f},convertOnSelect:t}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/defaults"),b=v("./attributes");ae.exports=function(y,e,r,t){function o(i,f){return p.coerce(y,e,b,i,f)}var n=o("locations"),m=o("z"),l=o("geojson");p.isArrayOrTypedArray(n)&&n.length&&p.isArrayOrTypedArray(m)&&m.length&&("string"==typeof l&&""!==l||p.isPlainObject(l))?(o("featureidkey"),e._length=Math.min(n.length,m.length),o("below"),o("text"),o("hovertext"),o("hovertemplate"),o("marker.line.width")&&o("marker.line.color"),o("marker.opacity"),g(y,e,t,o,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(e,o)):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../choropleth/calc"),plot:v("./plot"),hoverPoints:v("../choropleth/hover"),eventData:v("../choropleth/event_data"),selectPoints:v("../choropleth/select"),styleOnSelect:function(p,g){g&&g[0].trace._glTrace.updateOnSelect(g)},getBelow:function(p,g){for(var b=g.getMapLayers(),y=b.length-2;y>=0;y--){var e=b[y].id;if("string"==typeof e&&0===e.indexOf("water"))for(var r=y+1;r<b.length;r++)if("string"==typeof(e=b[r].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(v,ae,ie){"use strict";var p=v("./convert").convert,g=v("./convert").convertOnSelect,b=v("../../plots/mapbox/constants").traceLayerPrefix;function y(r,t){this.type="choroplethmapbox",this.subplot=r,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",b+t+"-fill"],["line",b+t+"-line"]],this.below=null}var e=y.prototype;e.update=function(r){this._update(p(r))},e.updateOnSelect=function(r){this._update(g(r))},e._update=function(r){var t=this.subplot,o=this.layerList,n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var m=0;m<o.length;m++){var l=o[m],f=l[1],u=r[l[0]];t.setOptions(f,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&t.setOptions(f,"setPaintProperty",u.paint)}},e._addLayers=function(r,t){for(var o=this.subplot,n=this.layerList,m=this.sourceId,l=0;l<n.length;l++){var i=n[l],f=i[0],u=r[f];o.addLayer({type:f,id:i[1],source:m,layout:u.layout,paint:u.paint},t)}},e._removeLayers=function(){for(var r=this.subplot.map,t=this.layerList,o=t.length-1;o>=0;o--)r.removeLayer(t[o][1])},e.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},ae.exports=function(r,t){var o=t[0].trace,n=new y(r,o.uid),m=n.sourceId,l=p(t),i=n.below=r.belowLookup["trace-"+o.uid];return r.map.addSource(m,{type:"geojson",data:l.geojson}),n._addLayers(l,i),t[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../mesh3d/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(t,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(o){t[o]=y[o]}),t.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,ae.exports=t},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/calc");ae.exports=function(g,b){for(var y=b.u,e=b.v,r=b.w,t=Math.min(b.x.length,b.y.length,b.z.length,y.length,e.length,r.length),o=-1/0,n=1/0,m=0;m<t;m++){var l=y[m],i=e[m],f=r[m],u=Math.sqrt(l*l+i*i+f*f);o=Math.max(o,u),n=Math.min(n,u)}b._len=t,b._normMax=o,p(g,b,{vals:[n,o],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_cone3d,g=v("../../../stackgl_modules").gl_cone3d.createConeMesh,b=v("../../lib").simpleMap,y=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,r=v("../../plots/gl3d/zip3");function t(f,u){this.scene=f,this.uid=u,this.mesh=null,this.data=null}var o=t.prototype;o.handlePick=function(f){if(f.object===this.mesh){var u=f.index=f.data.index,a=this.data.u[u],_=this.data.v[u],c=this.data.w[u];f.traceCoordinate=[this.data.x[u],this.data.y[u],this.data.z[u],a,_,c,Math.sqrt(a*a+_*_+c*c)];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[u]?f.textLabel=T[u]:T&&(f.textLabel=T),!0}};var n={xaxis:0,yaxis:1,zaxis:2},m={tip:1,tail:0,cm:.25,center:.5},l={tip:1,tail:1,cm:.75,center:.5};function i(f,u){var s=f.fullSceneLayout,d=f.dataScale,h={};function a(x,w){var M=s[w],D=d[n[w]];return b(x,function(C){return M.d2l(C)*D})}h.vectors=r(a(u.u,"xaxis"),a(u.v,"yaxis"),a(u.w,"zaxis"),u._len),h.positions=r(a(u.x,"xaxis"),a(u.y,"yaxis"),a(u.z,"zaxis"),u._len);var _=e(u);h.colormap=y(u),h.vertexIntensityBounds=[_.min/u._normMax,_.max/u._normMax],h.coneOffset=m[u.anchor],h.coneSize="scaled"===u.sizemode?u.sizeref||.5:u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var c=p(h),T=u.lightposition;return c.lightPosition=[T.x,T.y,T.z],c.ambient=u.lighting.ambient,c.diffuse=u.lighting.diffuse,c.specular=u.lighting.specular,c.roughness=u.lighting.roughness,c.fresnel=u.lighting.fresnel,c.opacity=u.opacity,u._pad=l[u.anchor]*c.vectorScale*c.coneScale*u._normMax,c}o.update=function(f){this.data=f;var u=i(this.scene,f);this.mesh.update(u)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(f,u){var s=f.glplot.gl,d=i(f,u),h=g(s,d),a=new t(f,u.uid);return a.mesh=h,a.data=u,h._trace=a,f.glplot.add(h),a}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/defaults"),b=v("./attributes");ae.exports=function(y,e,r,t){function o(s,d){return p.coerce(y,e,b,s,d)}var n=o("u"),m=o("v"),l=o("w"),i=o("x"),f=o("y"),u=o("z");n&&n.length&&m&&m.length&&l&&l.length&&i&&i.length&&f&&f.length&&u&&u.length?(o("sizeref"),o("sizemode"),o("anchor"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),g(y,e,t,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"cone",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),eventData:function(p,g){return p.norm=g.traceCoordinate[6],p},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(v,ae,ie){"use strict";var p=v("../heatmap/attributes"),g=v("../scatter/attributes"),b=v("../../plots/cartesian/axis_format_attributes"),y=b.axisHoverFormat,e=b.descriptionOnlyNumbers,r=v("../../components/colorscale/attributes"),t=v("../../components/drawing/attributes").dash,o=v("../../plots/font_attributes"),n=v("../../lib/extend").extendFlat,m=v("../../constants/filter_ops"),l=m.COMPARISON_OPS2,i=m.INTERVAL_OPS,f=g.line;ae.exports=n({z:p.z,x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,text:p.text,hovertext:p.hovertext,transpose:p.transpose,xtype:p.xtype,ytype:p.ytype,xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:p.hovertemplate,texttemplate:n({},p.texttemplate,{}),textfont:n({},p.textfont,{}),hoverongaps:p.hoverongaps,connectgaps:n({},p.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:o({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(l).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},f.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:t,smoothing:n({},f.smoothing,{}),editType:"plot"}},r("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale"),g=v("../heatmap/calc"),b=v("./set_contours"),y=v("./end_plus");ae.exports=function(e,r){var t=g(e,r),o=t[0].z;b(r,o);var n,m=r.contours,l=p.extractOpts(r);if("heatmap"===m.coloring&&l.auto&&!1===r.autocontour){var i=m.start,f=y(m),u=m.size||1,s=Math.floor((f-i)/u)+1;isFinite(u)||(u=1,s=1);var d=i-u/2;n=[d,d+s*u]}else n=o;return p.calc(e,r,{vals:n,cLetter:"z"}),t}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(v,ae,ie){"use strict";ae.exports=function(p,g){var b,y=p[0],e=y.z;switch(g.type){case"levels":var r=Math.min(e[0][0],e[0][1]);for(b=0;b<p.length;b++){var t=p[b];t.prefixBoundary=!t.edgepaths.length&&(r>t.level||t.starts.length&&r===t.level)}break;case"constraint":if(y.prefixBoundary=!1,y.edgepaths.length)return;var o=y.x.length,n=y.y.length,m=-1/0,l=1/0;for(b=0;b<n;b++)l=Math.min(l,e[b][0]),l=Math.min(l,e[b][o-1]),m=Math.max(m,e[b][0]),m=Math.max(m,e[b][o-1]);for(b=1;b<o-1;b++)l=Math.min(l,e[0][b]),l=Math.min(l,e[n-1][b]),m=Math.max(m,e[0][b]),m=Math.max(m,e[n-1][b]);var i,f,u=g.value;switch(g._operation){case">":u>m&&(y.prefixBoundary=!0);break;case"<":(u<l||y.starts.length&&u===l)&&(y.prefixBoundary=!0);break;case"[]":i=Math.min(u[0],u[1]),((f=Math.max(u[0],u[1]))<l||i>m||y.starts.length&&f===l)&&(y.prefixBoundary=!0);break;case"][":i=Math.min(u[0],u[1]),f=Math.max(u[0],u[1]),i<l&&f>m&&(y.prefixBoundary=!0)}}}},{}],747:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale"),g=v("./make_color_map"),b=v("./end_plus");ae.exports={min:"zmin",max:"zmax",calc:function(y,e,r){var t=e.contours,o=e.line,n=t.size||1,m=t.coloring,l=g(e,{isColorbar:!0});if("heatmap"===m){var i=p.extractOpts(e);r._fillgradient=i.reversescale?p.flipScale(i.colorscale):i.colorscale,r._zrange=[i.min,i.max]}else"fill"===m&&(r._fillcolor=l);r._line={color:"lines"===m?l:o.color,width:!1!==t.showlines?o.width:0,dash:o.dash},r._levels={start:t.start,end:b(t),size:n}}}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(v,ae,ie){"use strict";ae.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("./label_defaults"),b=v("../../components/color"),y=b.addOpacity,e=b.opacity,r=v("../../constants/filter_ops"),t=r.CONSTRAINT_REDUCTION,o=r.COMPARISON_OPS2;ae.exports=function(n,m,l,i,f,u){var s,d,h,c,T,x,a=m.contours,_=l("contours.operation");a._operation=t[_],c=l,-1===o.indexOf((T=a).operation)?(c("contours.value",[0,1]),Array.isArray(T.value)?T.value.length>2?T.value=T.value.slice(2):0===T.length?T.value=[0,1]:T.length<2?(x=parseFloat(T.value[0]),T.value=[x,x+1]):T.value=[parseFloat(T.value[0]),parseFloat(T.value[1])]:p(T.value)&&(x=parseFloat(T.value),T.value=[x,x+1])):(c("contours.value",0),p(T.value)||(T.value=Array.isArray(T.value)?parseFloat(T.value[0]):0)),"="===_?s=a.showlines=!0:(s=l("contours.showlines"),h=l("fillcolor",y((n.line||{}).color||f,.5))),s&&(d=l("line.color",h&&e(h)?y(m.fillcolor,1):f),l("line.width",2),l("line.dash")),l("line.smoothing"),g(l,i,d,u)}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(v,ae,ie){"use strict";var p=v("../../constants/filter_ops"),g=v("fast-isnumeric");function b(r,t){var o,n=Array.isArray(t);function m(l){return g(l)?+l:null}return-1!==p.COMPARISON_OPS2.indexOf(r)?o=m(n?t[0]:t):-1!==p.INTERVAL_OPS.indexOf(r)?o=n?[m(t[0]),m(t[1])]:[m(t),m(t)]:-1!==p.SET_OPS.indexOf(r)&&(o=n?t.map(m):[m(t)]),o}function y(r){return function(t){t=b(r,t);var o=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return{start:o,end:n,size:n-o}}}function e(r){return function(t){return{start:t=b(r,t),end:1/0,size:1/0}}}ae.exports={"[]":y("[]"),"][":y("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y){var e=y("contours.start"),r=y("contours.end"),t=!1===e||!1===r,o=b("contours.size");!(t?g.autocontour=!0:b("autocontour",!1))&&o||b("ncontours")}},{}],752:[function(v,ae,ie){"use strict";var p=v("../../lib");function g(b){return p.extendFlat({},b,{edgepaths:p.extendDeep([],b.edgepaths),paths:p.extendDeep([],b.paths),starts:p.extendDeep([],b.starts)})}ae.exports=function(b,y){var e,r,t,o=function(l){return l.reverse()},n=function(l){return l};switch(y){case"=":case"<":return b;case">":for(1!==b.length&&p.warn("Contour data invalid for the specified inequality operation."),r=b[0],e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=o(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=o(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=o(r.starts[e]);return b;case"][":var m=o;o=n,n=m;case"[]":for(2!==b.length&&p.warn("Contour data invalid for the specified inequality range operation."),r=g(b[0]),t=g(b[1]),e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=o(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=o(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=o(r.starts[e]);for(;t.edgepaths.length;)r.edgepaths.push(n(t.edgepaths.shift()));for(;t.paths.length;)r.paths.push(n(t.paths.shift()));for(;t.starts.length;)r.starts.push(n(t.starts.shift()));return[r]}}},{"../../lib":515}],753:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../heatmap/xyz_defaults"),b=v("../scatter/period_defaults"),y=v("./constraint_defaults"),e=v("./contours_defaults"),r=v("./style_defaults"),t=v("../heatmap/label_defaults"),o=v("./attributes");ae.exports=function(n,m,l,i){function f(s,d){return p.coerce(n,m,o,s,d)}if(g(n,m,f,i)){b(n,m,i,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hoverongaps"),f("hovertemplate");var u="constraint"===f("contours.type");f("connectgaps",p.isArray1D(m.z)),u?y(n,m,f,i,l):(e(n,m,f,function(s){return p.coerce2(n,m,o,s)}),r(n,m,f,i)),m.contours&&"heatmap"===m.contours.coloring&&t(f,i)}else m.visible=!1}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./constraint_mapping"),b=v("./end_plus");ae.exports=function(y,e,r){for(var t="constraint"===y.type?g[y._operation](y.value):y,o=t.size,n=[],m=b(t),l=r.trace._carpetTrace,i=l?{xaxis:l.aaxis,yaxis:l.baxis,x:r.a,y:r.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:r.x,y:r.y},f=t.start;f<m;f+=o)if(n.push(p.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:r.z,smoothing:r.trace.line.smoothing},i)),n.length>1e3){p.warn("Too many contours, clipping at 1000",y);break}return n}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(v,ae,ie){"use strict";ae.exports=function(p){return p.end+p.size/1e6}},{}],756:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./constants");function b(r,t,o,n){return Math.abs(r[0]-t[0])<o&&Math.abs(r[1]-t[1])<n}function y(r,t,o,n,m){var l,te,le,ce,pe,i=t.join(","),f=r.crossings[i],u=(le=t,ce=0,pe=0,(te=f)>20&&o?208===te||1114===te?ce=0===le[0]?1:-1:pe=0===le[1]?1:-1:-1!==g.BOTTOMSTART.indexOf(te)?pe=1:-1!==g.LEFTSTART.indexOf(te)?ce=1:-1!==g.TOPSTART.indexOf(te)?pe=-1:ce=-1,[ce,pe]),s=[e(r,t,[-u[0],-u[1]])],d=r.z.length,h=r.z[0].length,a=t.slice(),_=u.slice();for(l=0;l<1e4;l++){if(f>20?r.crossings[i]=g.SADDLEREMAINDER[f=g.CHOOSESADDLE[f][(u[0]||u[1])<0?0:1]]:delete r.crossings[i],!(u=g.NEWDELTA[f])){p.log("Found bad marching index:",f,t,r.level);break}if(s.push(e(r,t,u)),t[0]+=u[0],t[1]+=u[1],i=t.join(","),b(s[s.length-1],s[s.length-2],n,m)&&s.pop(),t[0]===a[0]&&t[1]===a[1]&&u[0]===_[0]&&u[1]===_[1]||o&&(u[0]&&(t[0]<0||t[0]>h-2)||u[1]&&(t[1]<0||t[1]>d-2)))break;f=r.crossings[i]}1e4===l&&p.log("Infinite loop in contour?");var T,x,w,M,D,C,P,L,S,E,N,z,q,G,K,ne=b(s[0],s[s.length-1],n,m),X=0,J=.2*r.smoothing,se=[],V=0;for(l=1;l<s.length;l++)void 0,void 0,G=(z=s[l])[2]-(q=s[l-1])[2],K=z[3]-q[3],X+=P=Math.sqrt(G*G+K*K),se.push(P);var j=X/se.length*J;function H(te){return s[te%s.length]}for(l=s.length-2;l>=V;l--)if((T=se[l])<j){for(w=0,x=l-1;x>=V&&T+se[x]<j;x--)T+=se[x];if(ne&&l===s.length-2)for(w=0;w<x&&T+se[w]<j;w++)T+=se[w];D=l-x+w+1,C=Math.floor((l+x+w+2)/2),M=ne||l!==s.length-2?ne||-1!==x?D%2?H(C):[(H(C)[0]+H(C+1)[0])/2,(H(C)[1]+H(C+1)[1])/2]:s[0]:s[s.length-1],s.splice(x+1,l-x+1,M),l=x+1,w&&(V=w),ne&&(l===s.length-2?s[w]=s[s.length-1]:0===l&&(s[s.length-1]=s[0]))}for(s.splice(0,V),l=0;l<s.length;l++)s[l].length=2;if(!(s.length<2))if(ne)s.pop(),r.paths.push(s);else{o||p.log("Unclosed interior contour?",r.level,a.join(","),s.join("L"));var oe=!1;for(L=0;L<r.edgepaths.length;L++)if(E=r.edgepaths[L],!oe&&b(E[0],s[s.length-1],n,m)){s.pop(),oe=!0;var U=!1;for(S=0;S<r.edgepaths.length;S++)if(b((N=r.edgepaths[S])[N.length-1],s[0],n,m)){U=!0,s.shift(),r.edgepaths.splice(L,1),S===L?r.paths.push(s.concat(N)):(S>L&&S--,r.edgepaths[S]=N.concat(s,E));break}U||(r.edgepaths[L]=s.concat(E))}for(L=0;L<r.edgepaths.length&&!oe;L++)b((E=r.edgepaths[L])[E.length-1],s[0],n,m)&&(s.shift(),r.edgepaths[L]=E.concat(s),oe=!0);oe||r.edgepaths.push(s)}}function e(r,t,o){var n=t[0]+Math.max(o[0],0),m=t[1]+Math.max(o[1],0),l=r.z[m][n],i=r.xaxis,f=r.yaxis;if(o[1]){var u=(r.level-l)/(r.z[m][n+1]-l),s=(1!==u?(1-u)*i.c2l(r.x[n]):0)+(0!==u?u*i.c2l(r.x[n+1]):0);return[i.c2p(i.l2c(s),!0),f.c2p(r.y[m],!0),n+u,m]}var d=(r.level-l)/(r.z[m+1][n]-l),h=(1!==d?(1-d)*f.c2l(r.y[m]):0)+(0!==d?d*f.c2l(r.y[m+1]):0);return[i.c2p(r.x[n],!0),f.c2p(f.l2c(h),!0),n,m+d]}ae.exports=function(r,t,o){var n,m,l,i;for(t=t||.01,o=o||.01,m=0;m<r.length;m++){for(l=r[m],i=0;i<l.starts.length;i++)y(l,l.starts[i],"edge",t,o);for(n=0;Object.keys(l.crossings).length&&n<1e4;)n++,y(l,Object.keys(l.crossings)[0].split(",").map(Number),void 0,t,o);1e4===n&&p.log("Infinite loop in contour?")}}},{"../../lib":515,"./constants":748}],757:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("../heatmap/hover");ae.exports=function(b,y,e,r,t){t||(t={}),t.isContour=!0;var o=g(b,y,e,r,t);return o&&o.forEach(function(n){var m=n.trace;"constraint"===m.contours.type&&(m.fillcolor&&p.opacity(m.fillcolor)?n.color=p.addOpacity(m.fillcolor,1):m.contours.showlines&&p.opacity(m.line.color)&&(n.color=p.addOpacity(m.line.color,1)))}),o}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot").plot,style:v("./style"),colorbar:v("./colorbar"),hoverPoints:v("./hover"),moduleType:"trace",name:"contour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b,y,e){if(e||(e={}),g("contours.showlabels")){var r=b.font;p.coerceFont(g,"contours.labelfont",{family:r.family,size:r.size,color:y}),g("contours.labelformat")}!1!==e.hasHover&&g("zhoverformat")}},{"../../lib":515}],760:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/colorscale"),b=v("./end_plus");ae.exports=function(y){var e=y.contours,r=e.start,t=b(e),o=e.size||1,n=Math.floor((t-r)/o)+1,m="lines"===e.coloring?0:1,l=g.extractOpts(y);isFinite(o)||(o=1,n=1);var i,f,u=l.reversescale?g.flipScale(l.colorscale):l.colorscale,s=u.length,d=new Array(s),h=new Array(s);if("heatmap"===e.coloring){var a=l.min,_=l.max;for(f=0;f<s;f++)d[f]=(i=u[f])[0]*(_-a)+a,h[f]=i[1];var c=p.extent([a,_,e.start,e.start+o*(n-1)]),T=c[a<_?0:1],x=c[a<_?1:0];T!==a&&(d.splice(0,0,T),h.splice(0,0,h[0])),x!==_&&(d.push(x),h.push(h[h.length-1]))}else for(f=0;f<s;f++)d[f]=((i=u[f])[0]*(n+m-1)-m/2)*o+r,h[f]=i[1];return g.makeColorScaleFunc({domain:d,range:h},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(v,ae,ie){"use strict";var p=v("./constants");function g(b,y){var e=(y[0][0]>b?0:1)+(y[0][1]>b?0:2)+(y[1][1]>b?0:4)+(y[1][0]>b?0:8);return 5===e||10===e?b>(y[0][0]+y[0][1]+y[1][0]+y[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}ae.exports=function(b){var y,e,r,t,o,n,m,l,i,f=b[0].z,u=f.length,s=f[0].length,d=2===u||2===s;for(e=0;e<u-1;e++)for(t=[],0===e&&(t=t.concat(p.BOTTOMSTART)),e===u-2&&(t=t.concat(p.TOPSTART)),y=0;y<s-1;y++)for(r=t.slice(),0===y&&(r=r.concat(p.LEFTSTART)),y===s-2&&(r=r.concat(p.RIGHTSTART)),o=y+","+e,n=[[f[e][y],f[e][y+1]],[f[e+1][y],f[e+1][y+1]]],i=0;i<b.length;i++)(m=g((l=b[i]).level,n))&&(l.crossings[o]=m,-1!==r.indexOf(m)&&(l.starts.push([y,e]),d&&-1!==r.indexOf(m,r.indexOf(m)+1)&&l.starts.push([y,e])))}},{"./constants":748}],762:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../../components/colorscale"),e=v("../../lib/svg_text_utils"),r=v("../../plots/cartesian/axes"),t=v("../../plots/cartesian/set_convert"),o=v("../heatmap/plot"),n=v("./make_crossings"),m=v("./find_all_paths"),l=v("./empty_pathinfo"),i=v("./convert_to_constraints"),f=v("./close_boundaries"),u=v("./constants"),s=u.LABELOPTIMIZER;function d(_,c){var T,x,w,M,D,C,L="",S=0,E=_.edgepaths.map(function(ne,X){return X}),N=!0;function z(ne){return Math.abs(ne[1]-c[2][1])<.01}function G(ne){return Math.abs(ne[0]-c[2][0])<.01}for(;E.length;){for(C=b.smoothopen(_.edgepaths[S],_.smoothing),L+=N?C:C.replace(/^M/,"L"),E.splice(E.indexOf(S),1),T=_.edgepaths[S][_.edgepaths[S].length-1],M=-1,w=0;w<4;w++){if(!T){g.log("Missing end?",S,_);break}for(Math.abs(T[1]-c[0][1])<.01&&!G(T)?x=c[1]:Math.abs(T[0]-c[0][0])<.01?x=c[0]:z(T)?x=c[3]:G(T)&&(x=c[2]),D=0;D<_.edgepaths.length;D++){var K=_.edgepaths[D][0];Math.abs(T[0]-x[0])<.01?Math.abs(T[0]-K[0])<.01&&(K[1]-T[1])*(x[1]-K[1])>=0&&(x=K,M=D):Math.abs(T[1]-x[1])<.01?Math.abs(T[1]-K[1])<.01&&(K[0]-T[0])*(x[0]-K[0])>=0&&(x=K,M=D):g.log("endpt to newendpt is not vert. or horz.",T,x,K)}if(T=x,M>=0)break;L+="L"+x}if(M===_.edgepaths.length){g.log("unclosed perimeter path");break}(N=-1===E.indexOf(S=M))&&(S=E[0],L+="Z")}for(S=0;S<_.paths.length;S++)L+=b.smoothclosed(_.paths[S],_.smoothing);return L}function h(_,c,T,x){var w=c.width/2,M=c.height/2,D=_.x,C=_.y,P=_.theta,L=Math.cos(P)*w,S=Math.sin(P)*w,E=(D>x.center?x.right-D:D-x.left)/(L+Math.abs(Math.sin(P)*M)),N=(C>x.middle?x.bottom-C:C-x.top)/(Math.abs(S)+Math.cos(P)*M);if(E<1||N<1)return 1/0;var z=s.EDGECOST*(1/(E-1)+1/(N-1));z+=s.ANGLECOST*P*P;for(var q=D-L,G=C-S,K=D+L,ne=C+S,X=0;X<T.length;X++){var J=T[X],se=Math.cos(J.theta)*J.width/2,V=Math.sin(J.theta)*J.width/2,j=2*g.segmentDistance(q,G,K,ne,J.x-se,J.y-V,J.x+se,J.y+V)/(c.height+J.height),H=J.level===c.level,oe=H?s.SAMELEVELDISTANCE:1;if(j<=oe)return 1/0;z+=s.NEIGHBORCOST*(H?s.SAMELEVELFACTOR:1)/(j-oe)}return z}function a(_){var c,T,x=_.trace._emptypoints,w=[],M=_.z.length,D=_.z[0].length,C=[];for(c=0;c<D;c++)C.push(1);for(c=0;c<M;c++)w.push(C.slice());for(c=0;c<x.length;c++)w[(T=x[c])[0]][T[1]]=0;return _.zmask=w,w}ie.plot=function(_,c,T,x){var w=c.xaxis,M=c.yaxis;g.makeTraceGroups(x,T,"contour").each(function(D){var C=p.select(this),P=D[0],S=P.x,E=P.y,N=P.trace.contours,z=l(N,c,P),q=g.ensureSingle(C,"g","heatmapcoloring"),G=[];"heatmap"===N.coloring&&(G=[D]),o(_,c,G,q),n(z),m(z);var H,oe,U,K=w.c2p(S[0],!0),ne=w.c2p(S[S.length-1],!0),X=M.c2p(E[0],!0),J=M.c2p(E[E.length-1],!0),se=[[K,J],[ne,J],[ne,X],[K,X]],V=z;"constraint"===N.type&&(V=i(z,N._operation)),H=se,oe=N,(U=g.ensureSingle(C,"g","contourbg").selectAll("path").data("fill"===oe.coloring?[0]:[])).enter().append("path"),U.exit().remove(),U.attr("d","M"+H.join("L")+"Z").style("stroke","none"),function(j,H,oe,U){var te="fill"===U.coloring||"constraint"===U.type&&"="!==U._operation,ee="M"+oe.join("L")+"Z";te&&f(H,U);var le=g.ensureSingle(j,"g","contourfill").selectAll("path").data(te?H:[]);le.enter().append("path"),le.exit().remove(),le.each(function(ce){var pe=(ce.prefixBoundary?ee:"")+d(ce,oe);pe?p.select(this).attr("d",pe).style("stroke","none"):p.select(this).remove()})}(C,V,se,N),function(j,H,oe,U,te){var ee=g.ensureSingle(j,"g","contourlines"),le=!1!==te.showlines,ce=te.showlabels,pe=le&&ce,de=ie.createLines(ee,le||ce,H),be=ie.createLineClip(ee,pe,oe,U.trace.uid),he=j.selectAll("g.contourlabels").data(ce?[0]:[]);if(he.exit().remove(),he.enter().append("g").classed("contourlabels",!0),ce){var xe=[],De=[];g.clearLocationCache();var Se=ie.labelFormatter(oe,U),ke=b.tester.append("text").attr("data-notex",1).call(b.font,te.labelfont),Fe=H[0].xaxis,ve=H[0].yaxis,Te=Fe._length,Le=ve._length,Oe=Fe.range,Ne=ve.range,Be=g.aggNums(Math.min,null,U.x),He=g.aggNums(Math.max,null,U.x),Ve=g.aggNums(Math.min,null,U.y),it=g.aggNums(Math.max,null,U.y),ze=Math.max(Fe.c2p(Be,!0),0),je=Math.min(Fe.c2p(He,!0),Te),qe=Math.max(ve.c2p(it,!0),0),Ye=Math.min(ve.c2p(Ve,!0),Le),ct={};Oe[0]<Oe[1]?(ct.left=ze,ct.right=je):(ct.left=je,ct.right=ze),Ne[0]<Ne[1]?(ct.top=qe,ct.bottom=Ye):(ct.top=Ye,ct.bottom=qe),ct.middle=(ct.top+ct.bottom)/2,ct.center=(ct.left+ct.right)/2,xe.push([[ct.left,ct.top],[ct.right,ct.top],[ct.right,ct.bottom],[ct.left,ct.bottom]]);var vt=Math.sqrt(Te*Te+Le*Le),wt=u.LABELDISTANCE*vt/Math.max(1,H.length/u.LABELINCREASE);de.each(function(Ot){var St=ie.calcTextOpts(Ot.level,Se,ke,oe);p.select(this).selectAll("path").each(function(){var ft=g.getVisibleSegment(this,ct,St.height/2);if(ft&&!(ft.len<(St.width+St.height)*u.LABELMIN))for(var st=Math.min(Math.ceil(ft.len/wt),u.LABELMAX),Ct=0;Ct<st;Ct++){var $t=ie.findBestTextLocation(this,ft,St,De,ct);if(!$t)break;ie.addLabelData($t,St,De,xe)}})}),ke.remove(),ie.drawLabels(he,De,oe,be,pe?xe:null)}ce&&!le&&de.remove()}(C,z,_,P,N),function(j,H,oe,U,te){var ee=U.trace,ce="clip"+ee.uid,pe=oe._fullLayout._clips.selectAll("#"+ce).data(ee.connectgaps?[]:[0]);if(pe.enter().append("clipPath").classed("contourclip",!0).attr("id",ce),pe.exit().remove(),!1===ee.connectgaps){var de={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:H.xaxis,yaxis:H.yaxis,x:U.x,y:U.y,z:a(U),smoothing:0};n([de]),m([de]),f([de],{type:"levels"}),g.ensureSingle(pe,"path","").attr("d",(de.prefixBoundary?"M"+te.join("L")+"Z":"")+d(de,te))}else ce=null;b.setClipUrl(j,ce,oe)}(C,c,_,P,se)})},ie.createLines=function(_,c,T){var x=T[0].smoothing,w=_.selectAll("g.contourlevel").data(c?T:[]);if(w.exit().remove(),w.enter().append("g").classed("contourlevel",!0),c){var M=w.selectAll("path.openline").data(function(C){return C.pedgepaths||C.edgepaths});M.exit().remove(),M.enter().append("path").classed("openline",!0),M.attr("d",function(C){return b.smoothopen(C,x)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var D=w.selectAll("path.closedline").data(function(C){return C.ppaths||C.paths});D.exit().remove(),D.enter().append("path").classed("closedline",!0),D.attr("d",function(C){return b.smoothclosed(C,x)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return w},ie.createLineClip=function(_,c,T,x){var w=c?"clipline"+x:null,M=T._fullLayout._clips.selectAll("#"+w).data(c?[0]:[]);return M.exit().remove(),M.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),b.setClipUrl(_,w,T),M},ie.labelFormatter=function(_,c){var T=_._fullLayout,x=c.trace,w=x.contours,M={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)M.tickformat=w.labelformat,t(M,T);else{var D=y.extractOpts(x);if(D&&D.colorbar&&D.colorbar._axis)M=D.colorbar._axis;else{if("constraint"===w.type){var C=w.value;M.range=Array.isArray(C)?[C[0],C[C.length-1]]:[C,C]}else M.range=[w.start,w.end],M.nticks=(w.end-w.start)/w.size;M.range[0]===M.range[1]&&(M.range[1]+=M.range[0]||1),M.nticks||(M.nticks=1e3),t(M,T),r.prepTicks(M),M._tmin=null,M._tmax=null}}return function(P){return r.tickText(M,P).text}},ie.calcTextOpts=function(_,c,T,x){var w=c(_);T.text(w).call(e.convertToTspans,x);var M=T.node(),D=b.bBox(M,!0);return{text:w,width:D.width,height:D.height,fontSize:+M.style["font-size"].replace("px",""),level:_,dy:(D.top+D.bottom)/2}},ie.findBestTextLocation=function(_,c,T,x,w){var M,D,C,P,L,S=T.width;c.isClosed?(M=c.min+(D=c.len/s.INITIALSEARCHPOINTS)/2,C=c.max):(M=c.min+(D=(c.len-S)/(s.INITIALSEARCHPOINTS+1))+S/2,C=c.max-(D+S)/2);for(var E=1/0,N=0;N<s.ITERATIONS;N++){for(var z=M;z<C;z+=D){var q=g.getTextLocation(_,c.total,z,S),G=h(q,T,x,w);G<E&&(E=G,L=q,P=z)}if(E>2*s.MAXCOST)break;N&&(D/=2),C=(M=P-D/2)+1.5*D}if(E<=s.MAXCOST)return L},ie.addLabelData=function(_,c,T,x){var w=c.fontSize,M=c.width+w/3,D=Math.max(0,c.height-w/3),C=_.x,P=_.y,L=_.theta,S=Math.sin(L),E=Math.cos(L),N=function(q,G){return[C+q*E-G*S,P+q*S+G*E]},z=[N(-M/2,-D/2),N(-M/2,D/2),N(M/2,D/2),N(M/2,-D/2)];T.push({text:c.text,x:C,y:P,dy:c.dy,theta:L,level:c.level,width:M,height:D}),x.push(z)},ie.drawLabels=function(_,c,T,x,w){var M=_.selectAll("text").data(c,function(P){return P.text+","+P.x+","+P.y+","+P.theta});if(M.exit().remove(),M.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(P){var L=P.x+Math.sin(P.theta)*P.dy,S=P.y-Math.cos(P.theta)*P.dy;p.select(this).text(P.text).attr({x:L,y:S,transform:"rotate("+180*P.theta/Math.PI+" "+L+" "+S+")"}).call(e.convertToTspans,T)}),w){for(var D="",C=0;C<w.length;C++)D+="M"+w[C].join("L")+"Z";g.ensureSingle(x,"path","").attr("d",D)}}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib");function b(y,e,r){var t={type:"linear",range:[y,e]};return p.autoTicks(t,(e-y)/(r||15)),t}ae.exports=function(y,e){var r=y.contours;if(y.autocontour){var t=y.zmin,o=y.zmax;(y.zauto||void 0===t)&&(t=g.aggNums(Math.min,null,e)),(y.zauto||void 0===o)&&(o=g.aggNums(Math.max,null,e));var n=b(t,o,y.ncontours);r.size=n.dtick,r.start=p.tickFirst(n),n.range.reverse(),r.end=p.tickFirst(n),r.start===t&&(r.start+=r.size),r.end===o&&(r.end-=r.size),r.start>r.end&&(r.start=r.end=(r.start+r.end)/2),y._input.contours||(y._input.contours={}),g.extendFlat(y._input.contours,{start:r.start,end:r.end,size:r.size}),y._input.autocontour=!0}else if("constraint"!==r.type){var m,l=r.start,i=r.end,f=y._input.contours;l>i&&(r.start=f.start=i,i=r.end=f.end=l,l=r.start),!(r.size>0)&&(m=l===i?1:b(l,i,y.ncontours).dtick,f.size=r.size=m)}}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../heatmap/style"),y=v("./make_color_map");ae.exports=function(e){var r=p.select(e).selectAll("g.contour");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var o=p.select(this),n=t[0].trace,m=n.contours,l=n.line,i=m.size||1,f=m.start,u="constraint"===m.type,s=!u&&"lines"===m.coloring,d=!u&&"fill"===m.coloring,h=s||d?y(n):null;o.selectAll("g.contourlevel").each(function(c){p.select(this).selectAll("path").call(g.lineGroupStyle,l.width,s?h(c.level):l.color,l.dash)});var a=m.labelfont;if(o.selectAll("g.contourlabels text").each(function(c){g.font(p.select(this),{family:a.family,size:a.size,color:a.color||(s?h(c.level):l.color)})}),u)o.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(d){var _;o.selectAll("g.contourfill path").style("fill",function(c){return void 0===_&&(_=c.level),h(c.level+.5*i)}),void 0===_&&(_=f),o.selectAll("g.contourbg path").style("fill",h(_-.5*i))}}),b(e)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/defaults"),g=v("./label_defaults");ae.exports=function(b,y,e,r,t){var o,n=e("contours.coloring"),m="";"fill"===n&&(o=e("contours.showlines")),!1!==o&&("lines"!==n&&(m=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==n&&(!0!==b.showlegend&&(y.showlegend=!1),y._dfltShowLegend=!1,p(b,y,r,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),g(e,r,m,t)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(v,ae,ie){"use strict";var p=v("../heatmap/attributes"),g=v("../contour/attributes"),b=v("../../components/colorscale/attributes"),y=v("../../lib/extend").extendFlat,e=g.contours;ae.exports=y({carpet:{valType:"string",editType:"calc"},z:p.z,a:p.x,a0:p.x0,da:p.dx,b:p.y,b0:p.y0,db:p.dy,text:p.text,hovertext:p.hovertext,transpose:p.transpose,atype:p.xtype,btype:p.ytype,fillcolor:g.fillcolor,autocontour:g.autocontour,ncontours:g.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:g.line.color,width:g.line.width,dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/calc"),g=v("../../lib"),b=v("../heatmap/convert_column_xyz"),y=v("../heatmap/clean_2d_array"),e=v("../heatmap/interp2d"),r=v("../heatmap/find_empties"),t=v("../heatmap/make_bound_array"),o=v("./defaults"),n=v("../carpet/lookup_carpetid"),m=v("../contour/set_contours");ae.exports=function(l,i){var f=i._carpetTrace=n(l,i);if(f&&f.visible&&"legendonly"!==f.visible){if(!i.a||!i.b){var u=l.data[f.index],s=l.data[i.index];s.a||(s.a=u.a),s.b||(s.b=u.b),o(s,i,i._defaultColor,l._fullLayout)}var d=function(h,a){var _,c,T,x,w,M,D,C=a._carpetTrace,P=C.aaxis,L=C.baxis;P._minDtick=0,L._minDtick=0,g.isArray1D(a.z)&&b(a,P,L,"a","b",["z"]),_=a._a=a._a||a.a,x=a._b=a._b||a.b,_=_?P.makeCalcdata(a,"_a"):[],x=x?L.makeCalcdata(a,"_b"):[],c=a.a0||0,T=a.da||1,w=a.b0||0,M=a.db||1,D=a._z=y(a._z||a.z,a.transpose),a._emptypoints=r(D),e(D,a._emptypoints);var S=g.maxRowLength(D),G={a:t(a,"scaled"===a.xtype?"":_,c,T,S,P),b:t(a,"scaled"===a.ytype?"":x,w,M,D.length,L),z:D};return"levels"===a.contours.type&&"none"!==a.contours.coloring&&p(h,a,{vals:D,containerStr:"",cLetter:"z"}),[G]}(l,i);return m(i,i._z),d}}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../heatmap/xyz_defaults"),b=v("./attributes"),y=v("../contour/constraint_defaults"),e=v("../contour/contours_defaults"),r=v("../contour/style_defaults");ae.exports=function(t,o,n,m){function l(i,f){return p.coerce(t,o,b,i,f)}if(l("carpet"),t.a&&t.b){if(!g(t,o,l,m,"a","b"))return void(o.visible=!1);l("text"),"constraint"===l("contours.type")?y(t,o,l,m,n,{hasHover:!1}):(e(t,o,l,function(i){return p.coerce2(t,o,b,i)}),r(t,o,l,m,{hasHover:!1}))}else o._defaultColor=n,o._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../contour/colorbar"),calc:v("./calc"),plot:v("./plot"),style:v("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../carpet/map_1d_array"),b=v("../carpet/makepath"),y=v("../../components/drawing"),e=v("../../lib"),r=v("../contour/make_crossings"),t=v("../contour/find_all_paths"),o=v("../contour/plot"),n=v("../contour/constants"),m=v("../contour/convert_to_constraints"),l=v("../contour/empty_pathinfo"),i=v("../contour/close_boundaries"),f=v("../carpet/lookup_carpetid"),u=v("../carpet/axis_aligned_line");function s(a,_,c){var T=a.getPointAtLength(_),x=a.getPointAtLength(c),w=x.x-T.x,M=x.y-T.y,D=Math.sqrt(w*w+M*M);return[w/D,M/D]}function d(a){var _=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return[a[0]/_,a[1]/_]}function h(a,_){var c=Math.abs(a[0]*_[0]+a[1]*_[1]);return Math.sqrt(1-c*c)/c}ae.exports=function(a,_,c,T){var x=_.xaxis,w=_.yaxis;e.makeTraceGroups(T,c,"contour").each(function(M){var D=p.select(this),C=M[0],P=C.trace,L=P._carpetTrace=f(a,P),S=a.calcdata[L.index][0];if(L.visible&&"legendonly"!==L.visible){var E=C.a,N=C.b,z=P.contours,q=l(z,_,C),G="constraint"===z.type,K=z._operation,ne=G?"="===K?"lines":"fill":z.coloring,X=[[E[0],N[N.length-1]],[E[E.length-1],N[N.length-1]],[E[E.length-1],N[0]],[E[0],N[0]]];r(q),t(q,1e-8*(E[E.length-1]-E[0]),1e-8*(N[N.length-1]-N[0]));var V,j,H,oe,U=q;"constraint"===z.type&&(U=m(q,K)),function(ce,pe){var de,be,he,xe,De,Se,ke,Fe,ve;for(de=0;de<ce.length;de++){for(De=(xe=ce[de]).pedgepaths=[],Se=xe.ppaths=[],be=0;be<xe.edgepaths.length;be++){for(ve=xe.edgepaths[be],ke=[],he=0;he<ve.length;he++)ke[he]=pe(ve[he]);De.push(ke)}for(be=0;be<xe.paths.length;be++){for(ve=xe.paths[be],Fe=[],he=0;he<ve.length;he++)Fe[he]=pe(ve[he]);Se.push(Fe)}}}(q,le);var te=[];for(oe=S.clipsegments.length-1;oe>=0;oe--)j=g([],(V=S.clipsegments[oe]).x,x.c2p),H=g([],V.y,w.c2p),j.reverse(),H.reverse(),te.push(b(j,H,V.bicubic));var ee="M"+te.join("L")+"Z";(function(ce,pe,de,be,he,xe){var De,Se,ke,Fe,ve=e.ensureSingle(ce,"g","contourbg").selectAll("path").data("fill"!==xe||he?[]:[0]);ve.enter().append("path"),ve.exit().remove();var Te=[];for(Fe=0;Fe<pe.length;Fe++)Se=g([],(De=pe[Fe]).x,de.c2p),ke=g([],De.y,be.c2p),Te.push(b(Se,ke,De.bicubic));ve.attr("d","M"+Te.join("L")+"Z").style("stroke","none")})(D,S.clipsegments,x,w,G,ne),function(ce,pe,de,be,he,xe,De,Se,ke,Fe,ve){var Te="fill"===Fe;Te&&i(he,ce.contours);var Le=e.ensureSingle(pe,"g","contourfill").selectAll("path").data(Te?he:[]);Le.enter().append("path"),Le.exit().remove(),Le.each(function(Oe){var Ne=(Oe.prefixBoundary?ve:"")+function(Be,He,Ve,it,ze,je,qe,Ye){var ct,vt,wt,Ot,St,ft,st,Ct="",$t=He.edgepaths.map(function(Qe,rt){return rt}),rn=!0,hn=1e-4*Math.abs(Ve[0][0]-Ve[2][0]),cn=1e-4*Math.abs(Ve[0][1]-Ve[2][1]);function mn(Qe){return Math.abs(Qe[1]-Ve[0][1])<cn}function nn(Qe){return Math.abs(Qe[1]-Ve[2][1])<cn}function Xe(Qe){return Math.abs(Qe[0]-Ve[0][0])<hn}function nt(Qe){return Math.abs(Qe[0]-Ve[2][0])<hn}function ye(Qe,rt){var Ke,gt,mt,Lt,Vt="";for(mn(Qe)&&!nt(Qe)||nn(Qe)&&!Xe(Qe)?(Lt=ze.aaxis,mt=u(ze,je,[Qe[0],rt[0]],.5*(Qe[1]+rt[1]))):(Lt=ze.baxis,mt=u(ze,je,.5*(Qe[0]+rt[0]),[Qe[1],rt[1]])),Ke=1;Ke<mt.length;Ke++)for(Vt+=Lt.smoothing?"C":"L",gt=0;gt<mt[Ke].length;gt++){var dt=mt[Ke][gt];Vt+=[qe.c2p(dt[0]),Ye.c2p(dt[1])]+" "}return Vt}for(ct=0,vt=null;$t.length;){for(vt&&(Ct+=ye(vt,He.edgepaths[ct][0])),st=y.smoothopen(He.edgepaths[ct].map(it),He.smoothing),Ct+=rn?st:st.replace(/^M/,"L"),$t.splice($t.indexOf(ct),1),vt=He.edgepaths[ct][He.edgepaths[ct].length-1],St=-1,Ot=0;Ot<4;Ot++){if(!vt){e.log("Missing end?",ct,He);break}for(mn(vt)&&!nt(vt)?wt=Ve[1]:Xe(vt)?wt=Ve[0]:nn(vt)?wt=Ve[3]:nt(vt)&&(wt=Ve[2]),ft=0;ft<He.edgepaths.length;ft++){var Ue=He.edgepaths[ft][0];Math.abs(vt[0]-wt[0])<hn?Math.abs(vt[0]-Ue[0])<hn&&(Ue[1]-vt[1])*(wt[1]-Ue[1])>=0&&(wt=Ue,St=ft):Math.abs(vt[1]-wt[1])<cn?Math.abs(vt[1]-Ue[1])<cn&&(Ue[0]-vt[0])*(wt[0]-Ue[0])>=0&&(wt=Ue,St=ft):e.log("endpt to newendpt is not vert. or horz.",vt,wt,Ue)}if(St>=0)break;Ct+=ye(vt,wt),vt=wt}if(St===He.edgepaths.length){e.log("unclosed perimeter path");break}(rn=-1===$t.indexOf(ct=St))&&(ct=$t[0],Ct+=ye(vt,wt)+"Z",vt=null)}for(ct=0;ct<He.paths.length;ct++)Ct+=y.smoothclosed(He.paths[ct].map(it),He.smoothing);return Ct}(0,Oe,xe,De,Se,ke,de,be);Ne?p.select(this).attr("d",Ne).style("stroke","none"):p.select(this).remove()})}(P,D,x,w,U,X,le,L,S,ne,ee),function(ce,pe,de,be,he,xe,De){var Se=e.ensureSingle(ce,"g","contourlines"),ke=!1!==he.showlines,Fe=he.showlabels,ve=ke&&Fe,Te=o.createLines(Se,ke||Fe,pe),Le=o.createLineClip(Se,ve,de,be.trace.uid),Oe=ce.selectAll("g.contourlabels").data(Fe?[0]:[]);if(Oe.exit().remove(),Oe.enter().append("g").classed("contourlabels",!0),Fe){var He=xe.xaxis._length,Ve=xe.yaxis._length,it=[[[0,0],[He,0],[He,Ve],[0,Ve]]],ze=[];e.clearLocationCache();var je=o.labelFormatter(de,be),qe=y.tester.append("text").attr("data-notex",1).call(y.font,he.labelfont),Ye={left:0,right:He,center:He/2,top:0,bottom:Ve,middle:Ve/2},ct=Math.sqrt(He*He+Ve*Ve),vt=n.LABELDISTANCE*ct/Math.max(1,pe.length/n.LABELINCREASE);Te.each(function(wt){var Ot=o.calcTextOpts(wt.level,je,qe,de);p.select(this).selectAll("path").each(function(St){var ft=e.getVisibleSegment(this,Ye,Ot.height/2);if(ft&&(function(rn,hn,cn,mn,nn,Xe){for(var nt,ye=0;ye<cn.pedgepaths.length;ye++)hn===cn.pedgepaths[ye]&&(nt=cn.edgepaths[ye]);if(nt){var Ce=nn.a[0],Ue=nn.a[nn.a.length-1],Qe=nn.b[0],rt=nn.b[nn.b.length-1],gt=s(rn,0,1),mt=s(rn,mn.total,mn.total-1),Lt=Ke(nt[0],gt),Vt=mn.total-Ke(nt[nt.length-1],mt);mn.min<Lt&&(mn.min=Lt),mn.max>Vt&&(mn.max=Vt),mn.len=mn.max-mn.min}function Ke(dt,bt){var Yt,It=0;return(Math.abs(dt[0]-Ce)<.1||Math.abs(dt[0]-Ue)<.1)&&(Yt=d(nn.dxydb_rough(dt[0],dt[1],.1)),It=Math.max(It,Xe*h(bt,Yt)/2)),(Math.abs(dt[1]-Qe)<.1||Math.abs(dt[1]-rt)<.1)&&(Yt=d(nn.dxyda_rough(dt[0],dt[1],.1)),It=Math.max(It,Xe*h(bt,Yt)/2)),It}}(this,St,wt,ft,De,Ot.height),!(ft.len<(Ot.width+Ot.height)*n.LABELMIN)))for(var st=Math.min(Math.ceil(ft.len/vt),n.LABELMAX),Ct=0;Ct<st;Ct++){var $t=o.findBestTextLocation(this,ft,Ot,ze,Ye);if(!$t)break;o.addLabelData($t,Ot,ze,it)}})}),qe.remove(),o.drawLabels(Oe,ze,de,Le,ve?it:null)}Fe&&!ke&&Te.remove()}(D,q,a,C,z,_,L),y.setClipUrl(D,L._clipPathId,a)}function le(ce){var pe=L.ab2xy(ce[0],ce[1],!0);return[x.c2p(pe[0]),w.c2p(pe[1])]}})}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../../plots/template_attributes").hovertemplateAttrs,b=v("../../plots/attributes"),y=v("../scattermapbox/attributes"),e=v("../../lib/extend").extendFlat;ae.exports=e({lon:y.lon,lat:y.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:g(),showlegend:e({},b.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib").isArrayOrTypedArray,b=v("../../constants/numerical").BADNUM,y=v("../../components/colorscale/calc"),e=v("../../lib")._;ae.exports=function(r,t){for(var o=t._length,n=new Array(o),m=t.z,l=g(m)&&m.length,i=0;i<o;i++){var f=n[i]={},u=t.lon[i],s=t.lat[i];if(f.lonlat=p(u)&&p(s)?[+u,+s]:[b,b],l){var d=m[i];f.z=p(d)?d:b}}return y(r,t,{vals:l?m:[0,1],containerStr:"",cLetter:"z"}),o&&(n[0].t={labels:{lat:e(r,"lat:")+" ",lon:e(r,"lon:")+" "}}),n}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../components/color"),y=v("../../components/colorscale"),e=v("../../constants/numerical").BADNUM,r=v("../../lib/geojson_utils").makeBlank;ae.exports=function(t){var o=t[0].trace,n=!0===o.visible&&0!==o._length,m=o._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:r()};if(!n)return m;var l,i=[],f=o.z,u=o.radius,s=g.isArrayOrTypedArray(f)&&f.length,d=g.isArrayOrTypedArray(u);for(l=0;l<t.length;l++){var h=t[l],a=h.lonlat;if(a[0]!==e){var _={};if(s){var c=h.z;_.z=c!==e?c:0}d&&(_.r=p(u[l])&&u[l]>0?+u[l]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:a},properties:_})}}var T=y.extractOpts(o),x=T.reversescale?y.flipScale(T.colorscale):T.colorscale,w=x[0][1],M=["interpolate",["linear"],["heatmap-density"],0,b.opacity(w)<1?w:b.addOpacity(w,0)];for(l=1;l<x.length;l++)M.push(x[l][0],x[l][1]);return g.extendFlat(m.heatmap.paint,{"heatmap-weight":s?["interpolate",["linear"],["get","z"],T.min,0,T.max,1]:1/(T.max-T.min),"heatmap-color":M,"heatmap-radius":d?{type:"identity",property:"r"}:o.radius,"heatmap-opacity":o.opacity}),m.geojson={type:"FeatureCollection",features:i},m.heatmap.layout.visibility="visible",m}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/defaults"),b=v("./attributes");ae.exports=function(y,e,r,t){function o(i,f){return p.coerce(y,e,b,i,f)}var n=o("lon")||[],m=o("lat")||[],l=Math.min(n.length,m.length);l?(e._length=l,o("z"),o("radius"),o("below"),o("text"),o("hovertext"),o("hovertemplate"),g(y,e,t,o,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return p.lon=g.lon,p.lat=g.lat,p.z=g.z,p}},{}],776:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../scattermapbox/hover").hoverPoints,b=v("../scattermapbox/hover").getExtraText;ae.exports=function(y,e,r){var t=g(y,e,r);if(t){var o=t[0],n=o.cd,m=n[0].trace,l=n[o.index];if(delete o.color,"z"in l){var i=o.subplot.mockAxis;o.z=l.z,o.zLabel=p.tickText(i,i.c2l(l.z),"hover").text}return o.extraText=b(m,l,n[0].t.labels),[o]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),formatLabels:v("../scattermapbox/format_labels"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover"),eventData:v("./event_data"),getBelow:function(p,g){for(var b=g.getMapLayers(),y=0;y<b.length;y++){var e=b[y],r=e.id;if("symbol"===e.type&&"string"==typeof r&&-1===r.indexOf("plotly-"))return r}},moduleType:"trace",name:"densitymapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(v,ae,ie){"use strict";var p=v("./convert"),g=v("../../plots/mapbox/constants").traceLayerPrefix;function b(e,r){this.type="densitymapbox",this.subplot=e,this.uid=r,this.sourceId="source-"+r,this.layerList=[["heatmap",g+r+"-heatmap"]],this.below=null}var y=b.prototype;y.update=function(e){var r=this.subplot,t=this.layerList,o=p(e),n=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(o.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(o,n),this.below=n);for(var m=0;m<t.length;m++){var l=t[m],f=l[1],u=o[l[0]];r.setOptions(f,"setLayoutProperty",u.layout),"visible"===u.layout.visibility&&r.setOptions(f,"setPaintProperty",u.paint)}},y._addLayers=function(e,r){for(var t=this.subplot,o=this.layerList,n=this.sourceId,m=0;m<o.length;m++){var l=o[m],i=l[0],f=e[i];t.addLayer({type:i,id:l[1],source:n,layout:f.layout,paint:f.paint},r)}},y._removeLayers=function(){for(var e=this.subplot.map,r=this.layerList,t=r.length-1;t>=0;t--)e.removeLayer(r[t][1])},y.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},ae.exports=function(e,r){var t=r[0].trace,o=new b(e,t.uid),n=o.sourceId,m=p(r),l=o.below=e.belowLookup["trace-"+t.uid];return e.map.addSource(n,{type:"geojson",data:m.geojson}),o._addLayers(m,l),o}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){for(var y=0;y<g.length;y++)g[y].i=y;p.mergeArray(b.text,g,"tx"),p.mergeArray(b.hovertext,g,"htx");var e=b.marker;if(e){p.mergeArray(e.opacity,g,"mo"),p.mergeArray(e.color,g,"mc");var r=e.line;r&&(p.mergeArray(r.color,g,"mlc"),p.mergeArrayCastPositive(r.width,g,"mlw"))}}},{"../../lib":515}],780:[function(v,ae,ie){"use strict";var p,g=v("../bar/attributes"),b=v("../scatter/attributes").line,y=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=v("../../plots/template_attributes").hovertemplateAttrs,t=v("../../plots/template_attributes").texttemplateAttrs,o=v("./constants"),n=v("../../lib/extend").extendFlat,m=v("../../components/color");ae.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:g.hovertext,hovertemplate:r({},{keys:o.eventDataKeys}),hoverinfo:n({},y.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),text:g.text,textposition:g.textposition,insidetextanchor:n({},g.insidetextanchor,{dflt:"middle"}),textangle:n({},g.textangle,{dflt:0}),textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:n({},g.orientation,{}),offset:n({},g.offset,{arrayOk:!1}),width:n({},g.width,{arrayOk:!1}),marker:(p=n({},g.marker),delete p.pattern,p),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},b.color,{dflt:m.defaultLine}),width:n({},b.width,{dflt:0,editType:"plot"}),dash:b.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/align_period"),b=v("./arrays_to_calcdata"),y=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function r(t){return t===e?0:t}ae.exports=function(t,o){var n,m,l,i,f,u,s,d,h=p.getFromId(t,o.xaxis||"x"),a=p.getFromId(t,o.yaxis||"y");"h"===o.orientation?(n=h.makeCalcdata(o,"x"),l=a.makeCalcdata(o,"y"),i=g(o,a,"y",l),f=!!o.yperiodalignment,u="y"):(n=a.makeCalcdata(o,"y"),l=h.makeCalcdata(o,"x"),i=g(o,h,"x",l),f=!!o.xperiodalignment,u="x"),m=i.vals;var _,c=Math.min(m.length,n.length),T=new Array(c);for(o._base=[],s=0;s<c;s++){n[s]<0&&(n[s]=e);var x=!1;n[s]!==e&&s+1<c&&n[s+1]!==e&&(x=!0),d=T[s]={p:m[s],s:n[s],cNext:x},o._base[s]=-.5*d.s,f&&(T[s].orig_p=l[s],T[s][u+"End"]=i.ends[s],T[s][u+"Start"]=i.starts[s]),o.ids&&(d.id=String(o.ids[s])),0===s&&(T[0].vTotal=0),T[0].vTotal+=r(d.s),d.begR=r(d.s)/r(T[0].s)}for(s=0;s<c;s++)(d=T[s]).s!==e&&(d.sumR=d.s/T[0].vTotal,d.difR=void 0!==_?d.s/_:1,_=d.s);return b(T,o),y(T,o),T}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(v,ae,ie){"use strict";ae.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(v,ae,ie){"use strict";var p=v("../bar/cross_trace_calc").setGroupPositions;ae.exports=function(g,b){var y,e,r=g._fullLayout,t=g._fullData,o=g.calcdata,n=b.xaxis,m=b.yaxis,l=[],i=[],f=[];for(e=0;e<t.length;e++){var u=t[e];!0===u.visible&&u.xaxis===n._id&&u.yaxis===m._id&&"funnel"===u.type&&(y=o[e],"h"===u.orientation?f.push(y):i.push(y),l.push(y))}var d={mode:r.funnelmode,norm:r.funnelnorm,gap:r.funnelgap,groupgap:r.funnelgroupgap};for(p(g,n,m,i,d),p(g,m,n,f,d),e=0;e<l.length;e++){y=l[e];for(var h=0;h<y.length;h++)h+1<y.length&&(y[h].nextP0=y[h+1].p0,y[h].nextS0=y[h+1].s0,y[h].nextP1=y[h+1].p1,y[h].nextS1=y[h+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../bar/defaults").handleGroupingDefaults,b=v("../bar/defaults").handleText,y=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),r=v("./attributes"),t=v("../../components/color");ae.exports={supplyDefaults:function(o,n,m,l){function i(d,h){return p.coerce(o,n,r,d,h)}if(y(o,n,l,i)){e(o,n,l,i),i("xhoverformat"),i("yhoverformat"),i("orientation",n.y&&!n.x?"v":"h"),i("offset"),i("width");var f=i("text");i("hovertext"),i("hovertemplate");var u=i("textposition");b(o,n,l,i,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===n.textposition||n.texttemplate||i("textinfo",Array.isArray(f)?"text+value":"value");var s=i("marker.color",m);i("marker.line.color",t.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(h=p.isArrayOrTypedArray(d=s)?"#000":d,t.addOpacity(h,.5*t.opacity(h)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else n.visible=!1;var d,h},crossTraceDefaults:function(o,n){var m,l;function i(u){return p.coerce(l._input,l,r,u)}if("group"===n.funnelmode)for(var f=0;f<o.length;f++)m=(l=o[f])._input,g(m,l,n,i)}}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return p.x="xVal"in g?g.xVal:g.x,p.y="yVal"in g?g.yVal:g.y,"percentInitial"in g&&(p.percentInitial=g.percentInitial),"percentPrevious"in g&&(p.percentPrevious=g.percentPrevious),"percentTotal"in g&&(p.percentTotal=g.percentTotal),g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),p}},{}],786:[function(v,ae,ie){"use strict";var p=v("../../components/color").opacity,g=v("../bar/hover").hoverOnBars,b=v("../../lib").formatPercent;ae.exports=function(y,e,r,t,o){var c,T,x,w,M,n=g(y,e,r,t,o);if(n){var m=n.cd,l=m[0].trace,f=m[n.index];n[("h"===l.orientation?"x":"y")+"LabelVal"]=f.s,n.percentInitial=f.begR,n.percentInitialLabel=b(f.begR,1),n.percentPrevious=f.difR,n.percentPreviousLabel=b(f.difR,1),n.percentTotal=f.sumR,n.percentTotalLabel=b(f.sumR,1);var u=f.hi||l.hoverinfo,s=[];if(u&&"none"!==u&&"skip"!==u){var d="all"===u,h=u.split("+"),a=function(_){return d||-1!==h.indexOf(_)};a("percent initial")&&s.push(n.percentInitialLabel+" of initial"),a("percent previous")&&s.push(n.percentPreviousLabel+" of previous"),a("percent total")&&s.push(n.percentTotalLabel+" of total")}return n.extraText=s.join("<br>"),n.color=(T=l.marker,w=(c=f).mlc||T.line.color,M=c.mlw||T.line.width,p(x=c.mc||T.color)?x:p(w)&&M?w:void 0),[n]}}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(v,ae,ie){"use strict";ae.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y,e){var r=!1;function t(m,l){return p.coerce(b,y,g,m,l)}for(var o=0;o<e.length;o++){var n=e[o];if(n.visible&&"funnel"===n.type){r=!0;break}}r&&(t("funnelmode"),t("funnelgap",.2),t("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),r=v("../bar/uniform_text").clearMinTextSize;function t(o,n,m,l){var i=[],f=[],u=l?n:m,s=l?m:n;return i[0]=u.c2p(o.s0,!0),f[0]=s.c2p(o.p0,!0),i[1]=u.c2p(o.s1,!0),f[1]=s.c2p(o.p1,!0),i[2]=u.c2p(o.nextS0,!0),f[2]=s.c2p(o.nextP0,!0),i[3]=u.c2p(o.nextS1,!0),f[3]=s.c2p(o.nextP1,!0),l?[i,f]:[f,i]}ae.exports=function(o,n,m,l){var f,u,h,a,i=o._fullLayout;r("funnel",i),f=o,h=(u=n).xaxis,a=u.yaxis,g.makeTraceGroups(l,m,"trace bars").each(function(_){var c=p.select(this),T=_[0].trace,x=g.ensureSingle(c,"g","regions");if(T.connector&&T.connector.visible){var w="h"===T.orientation,M=x.selectAll("g.region").data(g.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var D=M.size();M.each(function(C,P){if(P===D-1||C.cNext){var L=t(C,h,a,w),S=L[0],E=L[1],N="";S[0]!==y&&E[0]!==y&&S[1]!==y&&E[1]!==y&&S[2]!==y&&E[2]!==y&&S[3]!==y&&E[3]!==y&&(N+=w?"M"+S[0]+","+E[1]+"L"+S[2]+","+E[2]+"H"+S[3]+"L"+S[1]+","+E[1]+"Z":"M"+S[1]+","+E[1]+"L"+S[2]+","+E[3]+"V"+E[2]+"L"+S[1]+","+E[0]+"Z"),""===N&&(N="M0,0Z"),g.ensureSingle(p.select(this),"path").attr("d",N).call(b.setClipUrl,u.layerClipId,f)}})}else x.remove()}),function(f,u,s,d){var h=u.xaxis,a=u.yaxis;g.makeTraceGroups(d,s,"trace bars").each(function(_){var c=p.select(this),T=_[0].trace,x=g.ensureSingle(c,"g","lines");if(T.connector&&T.connector.visible&&T.connector.line.width){var w="h"===T.orientation,M=x.selectAll("g.line").data(g.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var D=M.size();M.each(function(C,P){if(P===D-1||C.cNext){var L=t(C,h,a,w),S=L[0],E=L[1],N="";void 0!==S[3]&&void 0!==E[3]&&(w?(N+="M"+S[0]+","+E[1]+"L"+S[2]+","+E[2],N+="M"+S[1]+","+E[1]+"L"+S[3]+","+E[2]):(N+="M"+S[1]+","+E[1]+"L"+S[2]+","+E[3],N+="M"+S[1]+","+E[0]+"L"+S[2]+","+E[2])),""===N&&(N="M0,0Z"),g.ensureSingle(p.select(this),"path").attr("d",N).call(b.setClipUrl,u.layerClipId,f)}})}else x.remove()})}(o,n,m,l),e.plot(o,n,m,l,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../../components/color"),y=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),r=v("../bar/uniform_text").resizeText,t=e.styleTextPoints;ae.exports={style:function(o,n,m){var l=m||p.select(o).selectAll("g.funnellayer").selectAll("g.trace");r(o,l,"funnel"),l.style("opacity",function(i){return i[0].trace.opacity}),l.each(function(i){var f=p.select(this),u=i[0].trace;f.selectAll(".point > path").each(function(s){if(!s.isBlank){var d=u.marker;p.select(this).call(b.fill,s.mc||d.color).call(b.stroke,s.mlc||d.line.color).call(g.dashLine,d.line.dash,s.mlw||d.line.width).style("opacity",u.selectedpoints&&!s.selected?y:1)}}),t(f,u,o),f.selectAll(".regions").each(function(){p.select(this).selectAll("path").style("stroke-width",0).call(b.fill,u.connector.fillcolor)}),f.selectAll(".lines").each(function(){var s=u.connector.line;g.lineGroupStyle(p.select(this).selectAll("path"),s.width,s.color,s.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(v,ae,ie){"use strict";var p=v("../pie/attributes"),g=v("../../plots/attributes"),b=v("../../plots/domain").attributes,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,r=v("../../lib/extend").extendFlat;ae.exports={labels:p.labels,label0:p.label0,dlabel:p.dlabel,values:p.values,marker:{colors:p.marker.colors,line:{color:r({},p.marker.line.color,{dflt:null}),width:r({},p.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:p.text,hovertext:p.hovertext,scalegroup:r({},p.scalegroup,{}),textinfo:r({},p.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:r({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","text","percent"]}),textposition:r({},p.textposition,{values:["inside","none"],dflt:"inside"}),textfont:p.textfont,insidetextfont:p.insidetextfont,title:{text:p.title.text,font:p.title.font,position:r({},p.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(v,ae,ie){"use strict";var p=v("../../plots/plots");ie.name="funnelarea",ie.plot=function(g,b,y,e){p.plotBasePlot(ie.name,g,b,y,e)},ie.clean=function(g,b,y,e){p.cleanBasePlot(ie.name,g,b,y,e)}},{"../../plots/plots":628}],794:[function(v,ae,ie){"use strict";var p=v("../pie/calc");ae.exports={calc:function(g,b){return p.calc(g,b)},crossTraceCalc:function(g){p.crossTraceCalc(g,{type:"funnelarea"})}}},{"../pie/calc":912}],795:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../plots/domain").defaults,y=v("../bar/defaults").handleText,e=v("../pie/defaults").handleLabelsAndValues;ae.exports=function(r,t,o,n){function m(_,c){return p.coerce(r,t,g,_,c)}var l=m("labels"),i=m("values"),f=e(l,i),u=f.len;if(t._hasLabels=f.hasLabels,t._hasValues=f.hasValues,!t._hasLabels&&t._hasValues&&(m("label0"),m("dlabel")),u){t._length=u,m("marker.line.width")&&m("marker.line.color",n.paper_bgcolor),m("marker.colors"),m("scalegroup");var s,d=m("text"),h=m("texttemplate");if(h||(s=m("textinfo",Array.isArray(d)?"text+percent":"percent")),m("hovertext"),m("hovertemplate"),h||s&&"none"!==s){var a=m("textposition");y(r,t,n,m,a,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(t,n,m),m("title.text")&&(m("title.position"),p.coerceFont(m,"title.font",n.font)),m("aspectratio"),m("baseratio")}else t.visible=!1}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"funnelarea",basePlotModule:v("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style"),styleOne:v("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(v,ae,ie){"use strict";var p=v("../pie/layout_attributes").hiddenlabels;ae.exports={hiddenlabels:p,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y){function e(r,t){return p.coerce(b,y,g,r,t)}e("hiddenlabels"),e("funnelareacolorway",y.colorway),e("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../../lib"),y=b.strScale,e=b.strTranslate,r=v("../../lib/svg_text_utils"),t=v("../bar/plot").toMoveInsideBar,o=v("../bar/uniform_text"),n=o.recordMinTextSize,m=o.clearMinTextSize,l=v("../pie/helpers"),i=v("../pie/plot"),f=i.attachFxHandlers,u=i.determineInsideTextFont,s=i.layoutAreas,d=i.prerenderTitles,h=i.positionTitleOutside,a=i.formatSliceLabel;function _(c,T){return"l"+(T[0]-c[0])+","+(T[1]-c[1])}ae.exports=function(c,T){var x=c._fullLayout;m("funnelarea",x),d(T,c),s(T,x._size),b.makeTraceGroups(x._funnelarealayer,T,"trace").each(function(w){var M=p.select(this),D=w[0],C=D.trace;(function(P){if(P.length){var L=P[0],S=L.trace,E=S.aspectratio,N=S.baseratio;N>.999&&(N=.999);var z,J,se,q=Math.pow(N,2),G=L.vTotal,K=G,ne=G*q/(1-q)/G,V=[];for(V.push(X()),J=P.length-1;J>-1;J--)(se=P[J]).hidden||(ne+=se.v/K,V.push(X()));var H=1/0,oe=-1/0;for(J=0;J<V.length;J++)z=V[J],H=Math.min(H,z[1]),oe=Math.max(oe,z[1]);for(J=0;J<V.length;J++)V[J][1]-=(oe+H)/2;var te=L.r,ee=(oe-H)/2,le=te/V[V.length-1][0],ce=te/ee*E;for(L.r=ce*ee,J=0;J<V.length;J++)V[J][0]*=le,V[J][1]*=ce;var De,Se,pe=[-(z=V[0])[0],z[1]],de=[z[0],z[1]],be=0;for(J=P.length-1;J>-1;J--)if(!(se=P[J]).hidden){var he=V[be+=1][0],xe=V[be][1];se.TL=[-he,xe],se.TR=[he,xe],se.BL=pe,se.BR=de,se.pxmid=[.5*((De=se.TR)[0]+(Se=se.BR)[0]),.5*(De[1]+Se[1])],pe=se.TL,de=se.TR}}function X(){var ke,Fe={x:ke=Math.sqrt(ne),y:-ke};return[Fe.x,Fe.y]}})(w),M.each(function(){var P=p.select(this).selectAll("g.slice").data(w);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(S,E){if(S.hidden)p.select(this).selectAll("path,g").remove();else{S.pointNumber=S.i,S.curveNumber=C.index;var N=D.cx,z=D.cy,q=p.select(this),G=q.selectAll("path.surface").data([S]);G.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),q.call(f,c,w);var K="M"+(N+S.TR[0])+","+(z+S.TR[1])+_(S.TR,S.BR)+_(S.BR,S.BL)+_(S.BL,S.TL)+"Z";G.attr("d",K),a(c,S,D);var ne=l.castOption(C.textposition,S.pts),X=q.selectAll("g.slicetext").data(S.text&&"none"!==ne?[0]:[]);X.enter().append("g").classed("slicetext",!0),X.exit().remove(),X.each(function(){var J=b.ensureSingle(p.select(this),"text","",function(ee){ee.attr("data-notex",1)}),se=b.ensureUniformFontSize(c,u(C,S,x.font));J.text(S.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(g.font,se).call(r.convertToTspans,c);var V,j,H,oe=g.bBox(J.node()),U=Math.min(S.BL[1],S.BR[1])+z,te=Math.max(S.TL[1],S.TR[1])+z;j=Math.max(S.TL[0],S.BL[0])+N,H=Math.min(S.TR[0],S.BR[0])+N,(V=t(j,H,U,te,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=se.size,n(C.type,V,x),w[E].transform=V,J.attr("transform",b.getTextTransform(V))})}});var L=p.select(this).selectAll("g.titletext").data(C.title.text?[0]:[]);L.enter().append("g").classed("titletext",!0),L.exit().remove(),L.each(function(){var S=b.ensureSingle(p.select(this),"text","",function(z){z.attr("data-notex",1)}),E=C.title.text;C._meta&&(E=b.templateString(E,C._meta)),S.text(E).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(g.font,C.title.font).call(r.convertToTspans,c);var N=h(D,x._size);S.attr("transform",e(N.x,N.y)+y(Math.min(1,N.scale))+e(N.tx,N.ty))})})})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../pie/style_one"),b=v("../bar/uniform_text").resizeText;ae.exports=function(y){var e=y._fullLayout._funnelarealayer.selectAll(".trace");b(y,e,"funnelarea"),e.each(function(r){var t=r[0].trace,o=p.select(this);o.style({opacity:t.opacity}),o.selectAll("path.surface").each(function(n){p.select(this).call(g,n,t)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes"),g=v("../../plots/attributes"),b=v("../../plots/font_attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/template_attributes").texttemplateAttrs,t=v("../../components/colorscale/attributes"),o=v("../../lib/extend").extendFlat;ae.exports=o({z:{valType:"data_array",editType:"calc"},x:o({},p.x,{impliedEdits:{xtype:"array"}}),x0:o({},p.x0,{impliedEdits:{xtype:"scaled"}}),dx:o({},p.dx,{impliedEdits:{xtype:"scaled"}}),y:o({},p.y,{impliedEdits:{ytype:"array"}}),y0:o({},p.y0,{impliedEdits:{ytype:"scaled"}}),dy:o({},p.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:o({},p.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:o({},p.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:o({},p.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:o({},p.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:o({},p.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:o({},p.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:e(),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:b({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:o({},g.showlegend,{dflt:!1})},{transforms:void 0},t("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/align_period"),e=v("../histogram2d/calc"),r=v("../../components/colorscale/calc"),t=v("./convert_column_xyz"),o=v("./clean_2d_array"),n=v("./interp2d"),m=v("./find_empties"),l=v("./make_bound_array"),i=v("../../constants/numerical").BADNUM;function f(u){for(var s=[],d=u.length,h=0;h<d;h++){var a=u[h];a!==i&&s.push(a)}return s}ae.exports=function(u,s){var d,h,a,_,c,T,x,w,M,D,C,P=b.getFromId(u,s.xaxis||"x"),L=b.getFromId(u,s.yaxis||"y"),S=p.traceIs(s,"contour"),E=p.traceIs(s,"histogram"),N=p.traceIs(s,"gl2d"),z=S?"best":s.zsmooth;if(P._minDtick=0,L._minDtick=0,E)_=(C=e(u,s)).orig_x,d=C.x,h=C.x0,a=C.dx,w=C.orig_y,c=C.y,T=C.y0,x=C.dy,M=C.z;else{var q=s.z;g.isArray1D(q)?(t(s,P,L,"x","y",["z"]),d=s._x,c=s._y,q=s._z):(_=s.x?P.makeCalcdata(s,"x"):[],w=s.y?L.makeCalcdata(s,"y"):[],d=y(s,P,"x",_).vals,c=y(s,L,"y",w).vals,s._x=d,s._y=c),h=s.x0,a=s.dx,T=s.y0,x=s.dy,M=o(q,s,P,L)}function G(ee){z=s._input.zsmooth=s.zsmooth=!1,g.warn('cannot use zsmooth: "fast": '+ee)}if((P.rangebreaks||L.rangebreaks)&&(M=function(ee,le,ce){for(var pe=[],de=-1,be=0;be<ce.length;be++)if(le[be]!==i){pe[++de]=[];for(var he=0;he<ce[be].length;he++)ee[he]!==i&&pe[de].push(ce[be][he])}return pe}(d,c,M),E||(d=f(d),c=f(c),s._x=d,s._y=c)),E||!S&&!s.connectgaps||(s._emptypoints=m(M),n(M,s._emptypoints)),"fast"===z)if("log"===P.type||"log"===L.type)G("log axis found");else if(!E){if(d.length){var K=(d[d.length-1]-d[0])/(d.length-1),ne=Math.abs(K/100);for(D=0;D<d.length-1;D++)if(Math.abs(d[D+1]-d[D]-K)>ne){G("x scale is not linear");break}}if(c.length&&"fast"===z){var X=(c[c.length-1]-c[0])/(c.length-1),J=Math.abs(X/100);for(D=0;D<c.length-1;D++)if(Math.abs(c[D+1]-c[D]-X)>J){G("y scale is not linear");break}}}var se=g.maxRowLength(M),V="scaled"===s.xtype?"":d,j=l(s,V,h,a,se,P),H="scaled"===s.ytype?"":c,oe=l(s,H,T,x,M.length,L);N||(s._extremes[P._id]=b.findExtremes(P,j),s._extremes[L._id]=b.findExtremes(L,oe));var U={x:j,y:oe,z:M,text:s._text||s.text,hovertext:s._hovertext||s.hovertext};if(s.xperiodalignment&&_&&(U.orig_x=_),s.yperiodalignment&&w&&(U.orig_y=w),V&&V.length===j.length-1&&(U.xCenter=V),H&&H.length===oe.length-1&&(U.yCenter=H),E&&(U.xRanges=C.xRanges,U.yRanges=C.yRanges,U.pts=C.pts),S||r(u,s,{vals:M,cLetter:"z"}),S&&s.contours&&"heatmap"===s.contours.coloring){var te={type:"contour"===s.type?"heatmap":"histogram2d",xcalendar:s.xcalendar,ycalendar:s.ycalendar};U.xfill=l(te,V,h,a,se,P),U.yfill=l(te,H,T,x,M.length,L)}return[U]}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../constants/numerical").BADNUM;ae.exports=function(y,e,r,t){var o,n,m,l,i,f;function u(c){if(p(c))return+c}if(e&&e.transpose){for(o=0,i=0;i<y.length;i++)o=Math.max(o,y[i].length);if(0===o)return!1;m=function(c){return c.length},l=function(c,T,x){return(c[x]||[])[T]}}else o=y.length,m=function(c,T){return c[T].length},l=function(c,T,x){return(c[T]||[])[x]};function d(c){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&c&&"category"===c.type&&e["_"+c._id.charAt(0)].length){var T=c._id.charAt(0),x={},w=e["_"+T+"CategoryMap"]||e[T];for(i=0;i<w.length;i++)x[w[i]]=i;return function(M){var D=x[c._categories[M]];return D+1?D:b}}return g.identity}var h=d(r),a=d(t);t&&"category"===t.type&&(o=t._categories.length);var c,T,x,_=new Array(o);for(i=0;i<o;i++)for(n=r&&"category"===r.type?r._categories.length:m(y,i),_[i]=new Array(n),f=0;f<n;f++)_[i][f]=u((c=y,T=a(i),x=h(f),T===b||x===b?b:l(c,T,x)));return _}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(v,ae,ie){"use strict";ae.exports={min:"zmin",max:"zmax"}},{}],805:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../constants/numerical").BADNUM,b=v("../../plots/cartesian/align_period");ae.exports=function(y,e,r,t,o,n){var m=y._length,l=e.makeCalcdata(y,t),i=r.makeCalcdata(y,o);l=b(y,e,t,l).vals,i=b(y,r,o,i).vals;var f,u,s,d,h=y.text,a=void 0!==h&&p.isArray1D(h),_=y.hovertext,c=void 0!==_&&p.isArray1D(_),T=p.distinctVals(l),x=T.vals,w=p.distinctVals(i),M=w.vals,D=[],C=M.length,P=x.length;for(f=0;f<n.length;f++)D[f]=p.init2dArray(C,P);a&&(s=p.init2dArray(C,P)),c&&(d=p.init2dArray(C,P));var L=p.init2dArray(C,P);for(f=0;f<m;f++)if(l[f]!==g&&i[f]!==g){var S=p.findBin(l[f]+T.minDiff/2,x),E=p.findBin(i[f]+w.minDiff/2,M);for(u=0;u<n.length;u++)D[u][E][S]=y[n[u]][f],L[E][S]=f;a&&(s[E][S]=h[f]),c&&(d[E][S]=_[f])}for(y["_"+t]=x,y["_"+o]=M,u=0;u<n.length;u++)y["_"+n[u]]=D[u];a&&(y._text=s),c&&(y._hovertext=d),e&&"category"===e.type&&(y["_"+t+"CategoryMap"]=x.map(function(z){return e._categories[z]})),r&&"category"===r.type&&(y["_"+o+"CategoryMap"]=M.map(function(z){return r._categories[z]})),y._after2before=L}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./xyz_defaults"),b=v("./label_defaults"),y=v("../scatter/period_defaults"),e=v("./style_defaults"),r=v("../../components/colorscale/defaults"),t=v("./attributes");ae.exports=function(o,n,m,l){function i(f,u){return p.coerce(o,n,t,f,u)}g(o,n,i,l)?(y(o,n,l,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),b(i,l),e(o,n,i,l),i("hoverongaps"),i("connectgaps",p.isArray1D(n.z)&&!1!==n.zsmooth),r(o,n,l,i,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(v,ae,ie){"use strict";var p=v("../../lib").maxRowLength;ae.exports=function(g){var b,y,e,r,t,o,n,m,l=[],i={},f=[],u=g[0],s=[],d=[0,0,0],h=p(g);for(y=0;y<g.length;y++)for(b=s,s=u,u=g[y+1]||[],e=0;e<h;e++)void 0===s[e]&&((o=(void 0!==s[e-1]?1:0)+(void 0!==s[e+1]?1:0)+(void 0!==b[e]?1:0)+(void 0!==u[e]?1:0))?(0===y&&o++,0===e&&o++,y===g.length-1&&o++,e===s.length-1&&o++,o<4&&(i[[y,e]]=[y,e,o]),l.push([y,e,o])):f.push([y,e]));for(;f.length;){for(n={},m=!1,t=f.length-1;t>=0;t--)(o=((i[[(y=(r=f[t])[0])-1,e=r[1]]]||d)[2]+(i[[y+1,e]]||d)[2]+(i[[y,e-1]]||d)[2]+(i[[y,e+1]]||d)[2])/20)&&(n[r]=[y,e,o],f.splice(t,1),m=!0);if(!m)throw"findEmpties iterated with no new neighbors";for(r in n)i[r]=n[r],l.push(n[r])}return l.sort(function(a,_){return _[2]-a[2]})}},{"../../lib":515}],808:[function(v,ae,ie){"use strict";var p=v("../../components/fx"),g=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("../../components/colorscale").extractOpts;ae.exports=function(e,r,t,o,n){n||(n={});var m,l,i,f,u=n.isContour,s=e.cd[0],d=s.trace,h=e.xa,a=e.ya,_=s.x,c=s.y,T=s.z,x=s.xCenter,w=s.yCenter,M=s.zmask,D=d.zhoverformat,C=_,P=c;if(!1!==e.index){try{i=Math.round(e.index[1]),f=Math.round(e.index[0])}catch{return void g.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=T[0].length||f<0||f>T.length)return}else{if(p.inbox(r-_[0],r-_[_.length-1],0)>0||p.inbox(t-c[0],t-c[c.length-1],0)>0)return;if(u){var L;for(C=[2*_[0]-_[1]],L=1;L<_.length;L++)C.push((_[L]+_[L-1])/2);for(C.push([2*_[_.length-1]-_[_.length-2]]),P=[2*c[0]-c[1]],L=1;L<c.length;L++)P.push((c[L]+c[L-1])/2);P.push([2*c[c.length-1]-c[c.length-2]])}i=Math.max(0,Math.min(C.length-2,g.findBin(r,C))),f=Math.max(0,Math.min(P.length-2,g.findBin(t,P)))}var S,E,N=h.c2p(_[i]),z=h.c2p(_[i+1]),q=a.c2p(c[f]),G=a.c2p(c[f+1]);u?(z=N,m=(S=s.orig_x||_)[i],G=q,l=(E=s.orig_y||c)[f]):(S=s.orig_x||x||_,E=s.orig_y||w||c,m=x?S[i]:(S[i]+S[i+1])/2,l=w?E[f]:(E[f]+E[f+1])/2,h&&"category"===h.type&&(m=_[i]),a&&"category"===a.type&&(l=c[f]),d.zsmooth&&(N=z=h.c2p(m),q=G=a.c2p(l)));var K=T[f][i];if(M&&!M[f][i]&&(K=void 0),void 0!==K||d.hoverongaps){var ne;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[f])?ne=s.hovertext[f][i]:Array.isArray(s.text)&&Array.isArray(s.text[f])&&(ne=s.text[f][i]);var X=y(d),se=b.tickText({type:"linear",range:[X.min,X.max],hoverformat:D,_separators:h._separators,_numFormat:h._numFormat},K,"hover").text;return[g.extendFlat(e,{index:d._after2before?d._after2before[f][i]:[f,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:N,x1:z,y0:q,y1:G,xLabelVal:m,yLabelVal:l,zLabelVal:K,zLabel:se,text:ne})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:v("./colorbar"),style:v("./style"),hoverPoints:v("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=[[-1,0],[1,0],[0,-1],[0,1]];function b(e){return.5-.25*Math.min(1,.5*e)}function y(e,r,t){var o,n,m,l,i,f,u,s,d,h,a,_,c,T=0;for(l=0;l<r.length;l++){for(a=e[n=(o=r[l])[0]][m=o[1]],h=0,d=0,i=0;i<4;i++)(u=e[n+(f=g[i])[0]])&&void 0!==(s=u[m+f[1]])&&(0===h?_=c=s:(_=Math.min(_,s),c=Math.max(c,s)),d++,h+=s);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";e[n][m]=h/d,void 0===a?d<4&&(T=1):(e[n][m]=(1+t)*e[n][m]-t*a,c>_&&(T=Math.max(T,Math.abs(e[n][m]-a)/(c-_))))}return T}ae.exports=function(e,r){var t,o=1;for(y(e,r),t=0;t<r.length&&!(r[t][2]<4);t++);for(r=r.slice(t),t=0;t<100&&o>.01;t++)o=y(e,r,b(o));return o>.01&&p.log("interp2d didn't converge quickly",o),e}},{"../../lib":515}],811:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){g("texttemplate");var y=p.extendFlat({},b.font,{color:"auto",size:"auto"});p.coerceFont(g,"textfont",y)}},{"../../lib":515}],812:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib").isArrayOrTypedArray;ae.exports=function(b,y,e,r,t,o){var n,m,l,i=[],f=p.traceIs(b,"contour"),u=p.traceIs(b,"histogram"),s=p.traceIs(b,"gl2d");if(g(y)&&y.length>1&&!u&&"category"!==o.type){var d=y.length;if(!(d<=t))return y.slice(0,f?t:t+1);if(f||s)i=y.slice(0,t);else if(1===t)i=[y[0]-.5,y[0]+.5];else{for(i=[1.5*y[0]-.5*y[1]],l=1;l<d;l++)i.push(.5*(y[l-1]+y[l]));i.push(1.5*y[d-1]-.5*y[d-2])}if(d<t){var h=i[i.length-1],a=h-i[i.length-2];for(l=d;l<t;l++)i.push(h+=a)}}else{var _=b[o._id.charAt(0)+"calendar"];for(n=u?o.r2c(e,0,_):g(y)&&1===y.length?y[0]:void 0===e?0:("log"===o.type?o.d2c:o.r2c)(e,0,_),m=r||1,l=f||s?0:-.5;l<t;l++)i.push(n+m*l)}return i}},{"../../lib":515,"../../registry":647}],813:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("tinycolor2"),b=v("../../registry"),y=v("../../components/drawing"),e=v("../../plots/cartesian/axes"),r=v("../../lib"),t=v("../../lib/svg_text_utils"),o=v("../scatter/format_labels"),n=v("../../components/color"),m=v("../../components/colorscale").extractOpts,l=v("../../components/colorscale").makeColorScaleFuncFromTrace,i=v("../../constants/xmlns_namespaces"),f=v("../../constants/alignment").LINE_SPACING;function u(_){return _.selectAll("g.heatmap-label")}function s(_){u(_).remove()}function d(_,c){var T=c.length-2,x=r.constrain(r.findBin(_,c),0,T),w=c[x],D=r.constrain(x+(_-w)/(c[x+1]-w)-.5,0,T),C=Math.round(D),P=Math.abs(D-C);return D&&D!==T&&P?{bin0:C,frac:P,bin1:Math.round(C+P/(D-C))}:{bin0:C,bin1:C,frac:0}}function h(_,c){var T=c.length-1,x=r.constrain(r.findBin(_,c),0,T),w=c[x],M=(_-w)/(c[x+1]-w)||0;return M<=0?{bin0:x,bin1:x,frac:0}:M<.5?{bin0:x,bin1:x+1,frac:M}:{bin0:x+1,bin1:x,frac:1-M}}function a(_,c,T){_[c]=T[0],_[c+1]=T[1],_[c+2]=T[2],_[c+3]=Math.round(255*T[3])}ae.exports=function(_,c,T,x){var w=c.xaxis,M=c.yaxis;r.makeTraceGroups(x,T,"hm").each(function(D){var C,P,L,S,E,N,z,q,G=p.select(this),K=D[0],ne=K.trace,X=ne.xgap||0,J=ne.ygap||0,se=K.z,V=K.x,j=K.y,H=K.xCenter,oe=K.yCenter,U=b.traceIs(ne,"contour"),te=U?"best":ne.zsmooth,ee=se.length,le=r.maxRowLength(se),ce=!1,pe=!1;for(N=0;void 0===C&&N<V.length-1;)C=w.c2p(V[N]),N++;for(N=V.length-1;void 0===P&&N>0;)P=w.c2p(V[N]),N--;for(P<C&&(L=P,P=C,C=L,ce=!0),N=0;void 0===S&&N<j.length-1;)S=M.c2p(j[N]),N++;for(N=j.length-1;void 0===E&&N>0;)E=M.c2p(j[N]),N--;if(E<S&&(L=S,S=E,E=L,pe=!0),U&&(H=V,oe=j,V=K.xfill,j=K.yfill),"fast"!==te){var de="best"===te?0:.5;C=Math.max(-de*w._length,C),P=Math.min((1+de)*w._length,P),S=Math.max(-de*M._length,S),E=Math.min((1+de)*M._length,E)}var be,he,xe=Math.round(P-C),De=Math.round(E-S);if(xe<=0||De<=0)return G.selectAll("image").data([]).exit().remove(),void s(G);"fast"===te?(be=le,he=ee):(be=xe,he=De);var Se=document.createElement("canvas");Se.width=be,Se.height=he;var ke,Fe,ve=Se.getContext("2d"),Te=l(ne,{noNumericCheck:!0,returnArray:!0});"fast"===te?(ke=ce?function(kr){return le-1-kr}:r.identity,Fe=pe?function(kr){return ee-1-kr}:r.identity):(ke=function(kr){return r.constrain(Math.round(w.c2p(V[kr])-C),0,xe)},Fe=function(kr){return r.constrain(Math.round(M.c2p(j[kr])-S),0,De)});var Le,Oe,Ne,Be,He=Fe(0),Ve=[He,He],it=ce?0:1,ze=pe?0:1,je=0,qe=0,Ye=0,ct=0;function vt(kr,Or){if(void 0!==kr){var Hr=Te(kr);return Hr[0]=Math.round(Hr[0]),Hr[1]=Math.round(Hr[1]),Hr[2]=Math.round(Hr[2]),je+=Or,qe+=Hr[0]*Or,Ye+=Hr[1]*Or,ct+=Hr[2]*Or,Hr}return[0,0,0,0]}function wt(kr,Or,Hr,oi){var Qn=kr[Hr.bin0];if(void 0===Qn)return vt(void 0,1);var Tr=kr[Hr.bin1],ar=Or[Hr.bin0],Jr=Or[Hr.bin1];return vt(Qn+Hr.frac*(Tr-Qn||0)+oi.frac*((ar-Qn||0)+Hr.frac*(void 0===Tr?void 0===Jr?0:void 0===ar?2*(Jr-Qn):2*(2*Jr-ar-Qn)/3:void 0===Jr?void 0===ar?0:2*(2*Qn-Tr-ar)/3:void 0===ar?2*(2*Jr-Tr-Qn)/3:Jr+Qn-Tr-ar)))}if(te){var Ot,St=0;try{Ot=new Uint8Array(xe*De*4)}catch{Ot=new Array(xe*De*4)}if("best"===te){var ft,st,Ct,$t=H||V,rn=oe||j,hn=new Array($t.length),cn=new Array(rn.length),mn=new Array(xe),nn=H?h:d,Xe=oe?h:d;for(N=0;N<$t.length;N++)hn[N]=Math.round(w.c2p($t[N])-C);for(N=0;N<rn.length;N++)cn[N]=Math.round(M.c2p(rn[N])-S);for(N=0;N<xe;N++)mn[N]=nn(N,hn);for(z=0;z<De;z++)for(st=se[(ft=Xe(z,cn)).bin0],Ct=se[ft.bin1],N=0;N<xe;N++,St+=4)a(Ot,St,Be=wt(st,Ct,mn[N],ft))}else for(z=0;z<ee;z++)for(Ne=se[z],Ve=Fe(z),N=0;N<xe;N++)Be=vt(Ne[N],1),a(Ot,St=4*(Ve*xe+ke(N)),Be);var nt=ve.createImageData(xe,De);try{nt.data.set(Ot)}catch{var ye=nt.data,Ce=ye.length;for(z=0;z<Ce;z++)ye[z]=Ot[z]}ve.putImageData(nt,0,0)}else{var Ue=Math.floor(X/2),Qe=Math.floor(J/2);for(z=0;z<ee;z++)if(Ne=se[z],Ve.reverse(),Ve[ze]=Fe(z+1),Ve[0]!==Ve[1]&&void 0!==Ve[0]&&void 0!==Ve[1])for(Le=[Oe=ke(0),Oe],N=0;N<le;N++)Le.reverse(),Le[it]=ke(N+1),Le[0]!==Le[1]&&void 0!==Le[0]&&void 0!==Le[1]&&(Be=vt(Ne[N],(Le[1]-Le[0])*(Ve[1]-Ve[0])),ve.fillStyle="rgba("+Be.join(",")+")",ve.fillRect(Le[0]+Ue,Ve[0]+Qe,Le[1]-Le[0]-X,Ve[1]-Ve[0]-J))}qe=Math.round(qe/je),Ye=Math.round(Ye/je),ct=Math.round(ct/je);var rt=g("rgb("+qe+","+Ye+","+ct+")");_._hmpixcount=(_._hmpixcount||0)+je,_._hmlumcount=(_._hmlumcount||0)+je*rt.getLuminance();var Ke=G.selectAll("image").data(D);Ke.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),Ke.attr({height:De,width:xe,x:C,y:S,"xlink:href":Se.toDataURL("image/png")}),s(G);var gt=ne.texttemplate;if(gt){var mt=m(ne),Lt={type:"linear",range:[mt.min,mt.max],_separators:w._separators,_numFormat:w._numFormat},Vt="histogram2dcontour"===ne.type,dt="contour"===ne.type,bt=dt?ee-1:ee,Yt=dt?1:0,It=dt?le-1:le,jt=[];for(N=dt?1:0;N<bt;N++){var Ie;if(dt)Ie=K.y[N];else if(Vt){if(0===N||N===ee-1)continue;Ie=K.y[N]}else if(K.yCenter)Ie=K.yCenter[N];else{if(N+1===ee&&void 0===K.y[N+1])continue;Ie=(K.y[N]+K.y[N+1])/2}var et=Math.round(M.c2p(Ie));if(!(0>et||et>M._length))for(z=Yt;z<It;z++){var ht;if(dt)ht=K.x[z];else if(Vt){if(0===z||z===le-1)continue;ht=K.x[z]}else if(K.xCenter)ht=K.xCenter[z];else{if(z+1===le&&void 0===K.x[z+1])continue;ht=(K.x[z]+K.x[z+1])/2}var xt=Math.round(w.c2p(ht));if(!(0>xt||xt>w._length)){var Rt=o({x:ht,y:Ie},ne,_._fullLayout);Rt.x=ht,Rt.y=Ie;var Xt=K.z[N][z];void 0===Xt?(Rt.z="",Rt.zLabel=""):(Rt.z=Xt,Rt.zLabel=e.tickText(Lt,Xt,"hover").text);var tn=K.text&&K.text[N]&&K.text[N][z];void 0!==tn&&!1!==tn||(tn=""),Rt.text=tn;var Kt=r.texttemplateString(gt,Rt,_._fullLayout._d3locale,Rt,ne._meta||{});if(Kt){var kn=Kt.split("<br>"),Vn=kn.length,Tn=0;for(q=0;q<Vn;q++)Tn=Math.max(Tn,kn[q].length);jt.push({l:Vn,c:Tn,t:Kt,x:xt,y:et,z:Xt})}}}}var sn=ne.textfont,fn=sn.family,dn=sn.size,Mn=_._fullLayout.font.size;if(!dn||"auto"===dn){var En=1/0,jn=1/0,er=0,nr=0;for(q=0;q<jt.length;q++){var mr=jt[q];if(er=Math.max(er,mr.l),nr=Math.max(nr,mr.c),q<jt.length-1){var Dr=jt[q+1],yr=Math.abs(Dr.x-mr.x),Wr=Math.abs(Dr.y-mr.y);yr&&(En=Math.min(En,yr)),Wr&&(jn=Math.min(jn,Wr))}}isFinite(En)&&isFinite(jn)?(En-=X,jn-=J,En/=nr,jn/=er,En/=f/2,jn/=f,dn=Math.min(Math.floor(En),Math.floor(jn),Mn)):dn=Mn}if(dn<=0||!isFinite(dn))return;u(G).data(jt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(kr){var oi,Or=p.select(this),Hr=sn.color;Hr&&"auto"!==Hr||(Hr=n.contrast("rgba("+Te(kr.z).join()+")")),Or.attr("data-notex",1).call(t.positionText,(oi=kr,oi.x),function(oi){return oi.y-dn*(oi.l*f/2-1)}(kr)).call(y.font,fn,dn,Hr).text(kr.t).call(t.convertToTspans,_)})}})}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(v,ae,ie){"use strict";var p=v("@plotly/d3");ae.exports=function(g){p.select(g).selectAll(".hm image").style("opacity",function(b){return b.trace.opacity})}},{"@plotly/d3":58}],815:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){!1===b("zsmooth")&&(b("xgap"),b("ygap")),b("zhoverformat")}},{}],816:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../registry");function y(e,r){var t=r(e);return"scaled"===(t?r(e+"type","array"):"scaled")&&(r(e+"0"),r("d"+e)),t}ae.exports=function(e,r,t,o,n,m){var l,i,f=t("z");if(n=n||"x",m=m||"y",void 0===f||!f.length)return 0;if(g.isArray1D(e.z)){l=t(n),i=t(m);var u=g.minRowLength(l),s=g.minRowLength(i);if(0===u||0===s)return 0;r._length=Math.min(u,s,f.length)}else{if(l=y(n,t),i=y(m,t),!function(d){for(var h,a=!0,_=!1,c=!1,T=0;T<d.length;T++){if(!g.isArrayOrTypedArray(h=d[T])){a=!1;break}h.length>0&&(_=!0);for(var x=0;x<h.length;x++)if(p(h[x])){c=!0;break}}return a&&_&&c}(f))return 0;t("transpose"),r._length=null}return"heatmapgl"===e.type||b.getComponentMethod("calendars","handleTraceDefaults")(e,r,[n,m],o),!0}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(v,ae,ie){"use strict";for(var p=v("../heatmap/attributes"),g=v("../../components/colorscale/attributes"),b=v("../../lib/extend").extendFlat,y=v("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],r={},t=0;t<e.length;t++){var o=e[t];r[o]=p[o]}r.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(r,g("",{cLetter:"z",autoColorDflt:!1})),ae.exports=y(r,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_heatmap2d,g=v("../../plots/cartesian/axes"),b=v("../../lib/str2rgbarray");function y(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=p(r.glplot,this.options),this.heatmap._trace=this}var e=y.prototype;e.handlePick=function(r){var t=this.options,o=t.shape,n=r.pointId,m=n%o[0],l=Math.floor(n/o[0]);return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[m],t.y[l],t.z[n]],textLabel:this.textLabels[n],name:this.name,pointIndex:[l,m],hoverinfo:this.hoverinfo}},e.update=function(r,t){var o=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var n=o.z;this.options.z=[].concat.apply([],n),this.options.shape=[n[0].length,n.length],this.options.x=o.x,this.options.y=o.y,this.options.zsmooth=r.zsmooth;var i=function(h){for(var a=h.colorscale,_=h.zmin,c=h.zmax,T=a.length,x=new Array(T),w=new Array(4*T),M=0;M<T;M++){var D=a[M],C=b(D[1]);x[M]=_+D[0]*(c-_);for(var P=0;P<4;P++)w[4*M+P]=C[P]}return{colorLevels:x,colorValues:w}}(r);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var f,u,s=this.scene.xaxis,d=this.scene.yaxis;!1===r.zsmooth&&(f={ppad:o.x[1]-o.x[0]},u={ppad:o.y[1]-o.y[0]}),r._extremes[s._id]=g.findExtremes(s,o.x,f),r._extremes[d._id]=g.findExtremes(d,o.y,u)},e.dispose=function(){this.heatmap.dispose()},ae.exports=function(r,t,o){var n=new y(r,t.uid);return n.update(t,o),n}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../heatmap/xyz_defaults"),b=v("../../components/colorscale/defaults"),y=v("./attributes");ae.exports=function(e,r,t,o){function n(m,l){return p.coerce(e,r,y,m,l)}g(e,r,n,o)?(n("text"),n("zsmooth"),b(e,r,o,n,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(v,ae,ie){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../heatmap/calc"),plot:v("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(v,ae,ie){"use strict";var p=v("../bar/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../plots/font_attributes"),r=v("./bin_attributes"),t=v("./constants"),o=v("../../lib/extend").extendFlat;ae.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:g("x"),yhoverformat:g("y"),text:o({},p.text,{}),hovertext:o({},p.hovertext,{}),orientation:p.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:r("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:r("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:t.eventDataKeys}),texttemplate:y({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:o({},p.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:p.insidetextanchor,textangle:p.textangle,cliponaxis:p.cliponaxis,constraintext:p.constraintext,marker:p.marker,offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,_deprecated:{bardir:p._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(v,ae,ie){"use strict";ae.exports=function(p,g){for(var b=p.length,y=0,e=0;e<b;e++)g[e]?(p[e]/=g[e],y+=p[e]):p[e]=null;return y}},{}],823:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric");ae.exports={count:function(g,b,y){return y[g]++,1},sum:function(g,b,y,e){var r=e[b];return p(r)?(r=Number(r),y[g]+=r,r):0},avg:function(g,b,y,e,r){var t=e[b];return p(t)&&(t=Number(t),y[g]+=t,r[g]++),0},min:function(g,b,y,e){var r=e[b];if(p(r)){if(r=Number(r),!p(y[g]))return y[g]=r,r;if(y[g]>r){var t=r-y[g];return y[g]=r,t}}return 0},max:function(g,b,y,e){var r=e[b];if(p(r)){if(r=Number(r),!p(y[g]))return y[g]=r,r;if(y[g]<r){var t=r-y[g];return y[g]=r,t}}return 0}}},{"fast-isnumeric":190}],825:[function(v,ae,ie){"use strict";var p=v("../../constants/numerical"),g=p.ONEAVGYEAR,b=p.ONEAVGMONTH,y=p.ONEDAY,e=p.ONEHOUR,r=p.ONEMIN,t=p.ONESEC,o=v("../../plots/cartesian/axes").tickIncrement;function n(f,u,s,d){if(f*u<=0)return 1/0;for(var h=Math.abs(u-f),a="date"===s.type,_=m(h,a),c=0;c<10;c++){var T=m(80*_,a);if(_===T||!l(T,f,u,a,s,d))break;_=T}return _}function m(f,u){return u&&f>t?f>y?f>1.1*g?g:f>1.1*b?b:y:f>e?e:f>r?r:t:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function l(f,u,s,d,h,a){if(d&&f>y){var _=i(u,h,a),c=i(s,h,a),T=f===g?0:1;return _[T]!==c[T]}return Math.floor(s/f)-Math.floor(u/f)>.1}function i(f,u,s){var d=u.c2d(f,g,s).split("-");return""===d[0]&&(d.unshift(),d[0]="-"+d[0]),d}ae.exports=function(f,u,s,d,h){var a,_,c=-1.1*u,T=-.1*u,x=f-T,w=s[0],M=s[1],D=Math.min(n(w+T,w+x,d,h),n(M+T,M+x,d,h)),C=Math.min(n(w+c,w+T,d,h),n(M+c,M+T,d,h));if(D>C&&C<Math.abs(M-w)/4e3?(a=D,_=!1):(a=Math.min(D,C),_=!0),"date"===d.type&&a>y){var P=a===g?1:6,L=a===g?"M12":"M1";return function(S,E){var N=d.c2d(S,g,h),z=N.indexOf("-",P);z>0&&(N=N.substr(0,z));var q=d.d2c(N,0,h);if(q<S){var G=o(q,L,!1,h);(q+G)/2<S+f&&(q=G)}return E&&_?o(q,L,!0,h):q}}return function(S,E){var N=a*Math.round(S/a);return N+a/10<S&&N+.9*a<S+f&&(N+=a),E&&_&&(N-=a),N}}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../registry"),y=v("../../plots/cartesian/axes"),e=v("../bar/arrays_to_calcdata"),r=v("./bin_functions"),t=v("./norm_functions"),o=v("./average"),n=v("./bin_label_vals");function m(l,i,f,u,s){var d,h,a,_,c,T,x,w=u+"bins",M=l._fullLayout,C=M._histogramBinOpts[i["_"+u+"bingroup"]],P="overlay"===M.barmode,L=function(he){return f.r2c(he,0,_)},S=function(he){return f.c2r(he,0,_)},E="date"===f.type?function(he){return he||0===he?g.cleanDate(he,null,_):null}:function(he){return p(he)?Number(he):null};function N(he,xe,De){xe[he+"Found"]?(xe[he]=E(xe[he]),null===xe[he]&&(xe[he]=De[he])):(T[he]=xe[he]=De[he],g.nestedProperty(h[0],w+"."+he).set(De[he]))}if(i["_"+u+"autoBinFinished"])delete i["_"+u+"autoBinFinished"];else{h=C.traces;var z=[],q=!0,G=!1,K=!1;for(d=0;d<h.length;d++)if((a=h[d]).visible){var ne=C.dirs[d];c=a["_"+ne+"pos0"]=f.makeCalcdata(a,ne),z=g.concat(z,c),delete a["_"+u+"autoBinFinished"],!0===i.visible&&(q?q=!1:(delete a._autoBin,a["_"+u+"autoBinFinished"]=1),b.traceIs(a,"2dMap")&&(G=!0),"histogram2dcontour"===a.type&&(K=!0))}var X=y.autoBin(z,f,C.nbins,G,_=h[0][u+"calendar"],C.sizeFound&&C.size),J=h[0]._autoBin={};if(T=J[C.dirs[0]]={},K&&(C.size||(X.start=S(y.tickIncrement(L(X.start),X.size,!0,_))),void 0===C.end&&(X.end=S(y.tickIncrement(L(X.end),X.size,!1,_)))),P&&!b.traceIs(i,"2dMap")&&0===X._dataSpan&&"category"!==f.type&&"multicategory"!==f.type){if(s)return[X,c,!0];X=function(he,xe,De,Se,ke){var Fe,ve,Te,Le=he._fullLayout,Oe=function(wt,Ot){for(var St=Ot.xaxis,ft=Ot.yaxis,st=Ot.orientation,Ct=[],$t=wt._fullData,rn=0;rn<$t.length;rn++){var hn=$t[rn];"histogram"===hn.type&&!0===hn.visible&&hn.orientation===st&&hn.xaxis===St&&hn.yaxis===ft&&Ct.push(hn)}return Ct}(he,xe),Ne=!1,Be=1/0,He=[xe];for(Fe=0;Fe<Oe.length;Fe++)if((ve=Oe[Fe])===xe)Ne=!0;else if(Ne){var Ve=m(he,ve,De,Se,!0),it=Ve[0],ze=Ve[2];ve["_"+Se+"autoBinFinished"]=1,ve["_"+Se+"pos0"]=Ve[1],ze?He.push(ve):Be=Math.min(Be,it.size)}else Te=Le._histogramBinOpts[ve["_"+Se+"bingroup"]],Be=Math.min(Be,Te.size||ve[ke].size);var je=new Array(He.length);for(Fe=0;Fe<He.length;Fe++)for(var qe=He[Fe]["_"+Se+"pos0"],Ye=0;Ye<qe.length;Ye++)if(void 0!==qe[Ye]){je[Fe]=qe[Ye];break}for(isFinite(Be)||(Be=g.distinctVals(je).minDiff),Fe=0;Fe<He.length;Fe++){var ct=(ve=He[Fe])[Se+"calendar"],vt={start:De.c2r(je[Fe]-Be/2,0,ct),end:De.c2r(je[Fe]+Be/2,0,ct),size:Be};ve._input[ke]=ve[ke]=vt,(Te=Le._histogramBinOpts[ve["_"+Se+"bingroup"]])&&g.extendFlat(Te,vt)}return xe[ke]}(l,i,f,u,w)}(x=a.cumulative||{}).enabled&&"include"!==x.currentbin&&("decreasing"===x.direction?X.start=S(y.tickIncrement(L(X.start),X.size,!0,_)):X.end=S(y.tickIncrement(L(X.end),X.size,!1,_))),C.size=X.size,C.sizeFound||(T.size=X.size,g.nestedProperty(h[0],w+".size").set(X.size)),N("start",C,X),N("end",C,X)}c=i["_"+u+"pos0"],delete i["_"+u+"pos0"];var se=i._input[w]||{},V=g.extendFlat({},C),j=C.start,H=f.r2l(se.start),oe=void 0!==H;if((C.startFound||oe)&&H!==f.r2l(j)){var U=oe?H:g.aggNums(Math.min,null,c),te={type:"category"===f.type||"multicategory"===f.type?"linear":f.type,r2l:f.r2l,dtick:C.size,tick0:j,calendar:_,range:[U,y.tickIncrement(U,C.size,!1,_)].map(f.l2r)},ee=y.tickFirst(te);ee>f.r2l(U)&&(ee=y.tickIncrement(ee,C.size,!0,_)),V.start=f.l2r(ee),oe||g.nestedProperty(i,w+".start").set(V.start)}var le=C.end,ce=f.r2l(se.end),pe=void 0!==ce;if((C.endFound||pe)&&ce!==f.r2l(le)){var de=pe?ce:g.aggNums(Math.max,null,c);V.end=f.l2r(de),pe||g.nestedProperty(i,w+".start").set(V.end)}var be="autobin"+u;return!1===i._input[be]&&(i._input[w]=g.extendFlat({},i[w]||{}),delete i._input[be],delete i[be]),[V,c]}ae.exports={calc:function(l,i){var f,u,s,d,h=[],a=[],_="h"===i.orientation,c=y.getFromId(l,_?i.yaxis:i.xaxis),T=_?"y":"x",x={x:"y",y:"x"}[T],w=i[T+"calendar"],M=i.cumulative,D=m(l,i,c,T),C=D[0],P=D[1],L="string"==typeof C.size,S=[],E=L?S:C,N=[],z=[],q=[],G=0,K=i.histnorm,ne=i.histfunc,X=-1!==K.indexOf("density");M.enabled&&X&&(K=K.replace(/ ?density$/,""),X=!1);var J,se="max"===ne||"min"===ne?null:0,V=r.count,j=t[K],H=!1,oe=function(ve){return c.r2c(ve,0,w)};for(g.isArrayOrTypedArray(i[x])&&"count"!==ne&&(J=i[x],H="avg"===ne,V=r[ne]),f=oe(C.start),s=oe(C.end)+(f-y.tickIncrement(f,C.size,!1,w))/1e6;f<s&&h.length<1e6&&(u=y.tickIncrement(f,C.size,!1,w),h.push((f+u)/2),a.push(se),q.push([]),S.push(f),X&&N.push(1/(u-f)),H&&z.push(0),!(u<=f));)f=u;S.push(f),L||"date"!==c.type||(E={start:oe(E.start),end:oe(E.end),size:E.size}),l._fullLayout._roundFnOpts||(l._fullLayout._roundFnOpts={});var U=i["_"+T+"bingroup"],te={leftGap:1/0,rightGap:1/0};U&&(l._fullLayout._roundFnOpts[U]||(l._fullLayout._roundFnOpts[U]=te),te=l._fullLayout._roundFnOpts[U]);var ee,le=a.length,ce=!0,pe=te.leftGap,de=te.rightGap,be={};for(f=0;f<P.length;f++){var he=P[f];(d=g.findBin(he,E))>=0&&d<le&&(G+=V(d,f,a,J,z),ce&&q[d].length&&he!==P[q[d][0]]&&(ce=!1),q[d].push(f),be[f]=d,pe=Math.min(pe,he-S[d]),de=Math.min(de,S[d+1]-he))}te.leftGap=pe,te.rightGap=de,ce||(ee=function(ve,Te){return function(){var Le=l._fullLayout._roundFnOpts[U];return n(Le.leftGap,Le.rightGap,S,c,w)(ve,Te)}}),H&&(G=o(a,z)),j&&j(a,G,N),M.enabled&&function(ve,Te,Le){var Oe,Ne,Be;function He(it){Be=ve[it],ve[it]/=2}function Ve(it){ve[it]=Be+(Ne=ve[it])/2,Be+=Ne}if("half"===Le)if("increasing"===Te)for(He(0),Oe=1;Oe<ve.length;Oe++)Ve(Oe);else for(He(ve.length-1),Oe=ve.length-2;Oe>=0;Oe--)Ve(Oe);else if("increasing"===Te){for(Oe=1;Oe<ve.length;Oe++)ve[Oe]+=ve[Oe-1];"exclude"===Le&&(ve.unshift(0),ve.pop())}else{for(Oe=ve.length-2;Oe>=0;Oe--)ve[Oe]+=ve[Oe+1];"exclude"===Le&&(ve.push(0),ve.shift())}}(a,M.direction,M.currentbin);var xe=Math.min(h.length,a.length),De=[],Se=0,ke=xe-1;for(f=0;f<xe;f++)if(a[f]){Se=f;break}for(f=xe-1;f>=Se;f--)if(a[f]){ke=f;break}for(f=Se;f<=ke;f++)if(p(h[f])&&p(a[f])){var Fe={p:h[f],s:a[f],b:0};M.enabled||(Fe.pts=q[f],ce?Fe.ph0=Fe.ph1=q[f].length?P[q[f][0]]:h[f]:(i._computePh=!0,Fe.ph0=ee(S[f]),Fe.ph1=ee(S[f+1],!0))),De.push(Fe)}return 1===De.length&&(De[0].width1=y.tickIncrement(De[0].p,C.size,!1,w)-De[0].p),e(De,i),g.isArrayOrTypedArray(i.selectedpoints)&&g.tagSelected(De,i,be),De},calcAllAutoBins:m}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(v,ae,ie){"use strict";ae.exports={eventDataKeys:["binNumber"]}},{}],828:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axis_ids"),b=v("../../registry").traceIs,y=v("../bar/defaults").handleGroupingDefaults,e=p.nestedProperty,r=v("../../plots/cartesian/constraints").getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],o=["x","y"];ae.exports=function(n,m){var l,i,f,u,s,d,h,a=m._histogramBinOpts={},_=[],c={},T=[];function x(X,J){return p.coerce(l._input,l,l._module.attributes,X,J)}function w(X){return"v"===X.orientation?"x":"y"}function M(X,J,se){var V=X.uid+"__"+se;J||(J=V);var j=g.getFromTrace({_fullLayout:m},X,se).type,H=X[se+"calendar"]||"",oe=a[J],U=!0;oe&&(j===oe.axType&&H===oe.calendar?(U=!1,oe.traces.push(X),oe.dirs.push(se)):(J=V,j!==oe.axType&&p.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+j,"axis","with bins on","type:"+oe.axType,"axis."].join(" ")),H!==oe.calendar&&p.warn(["Attempted to group the bins of trace",X.index,"set with a",H,"calendar","with bins",oe.calendar?"on a "+oe.calendar+" calendar":"w/o a set calendar"].join(" ")))),U&&(a[J]={traces:[X],dirs:[se],axType:j,calendar:X[se+"calendar"]||""}),X["_"+se+"bingroup"]=J}for(s=0;s<n.length;s++)b(l=n[s],"histogram")&&(_.push(l),delete l._xautoBinFinished,delete l._yautoBinFinished,b(l,"2dMap")||y(l._input,l,m,x));var D=m._alignmentOpts||{};for(s=0;s<_.length;s++){if(f="",!b(l=_[s],"2dMap")){if(u=w(l),"group"===m.barmode&&l.alignmentgroup){var P=r(m,l[u+"axis"])+l.orientation;(D[P]||{})[l.alignmentgroup]&&(f=P)}f||"overlay"===m.barmode||(f=r(m,l.xaxis)+r(m,l.yaxis)+w(l))}f?(c[f]||(c[f]=[]),c[f].push(l)):T.push(l)}for(f in c)if(1!==(i=c[f]).length){var L=!1;for(i.length&&(l=i[0],L=x("bingroup")),f=L||f,s=0;s<i.length;s++){var S=(l=i[s])._input.bingroup;S&&S!==f&&p.warn(["Trace",l.index,"must match","within bingroup",f+".","Ignoring its bingroup:",S,"setting."].join(" ")),l.bingroup=f,M(l,f,w(l))}}else T.push(i[0]);for(s=0;s<T.length;s++){l=T[s];var E=x("bingroup");if(b(l,"2dMap"))for(h=0;h<2;h++){var N=x((u=o[h])+"bingroup",E?E+"__"+u:null);M(l,N,u)}else M(l,E,w(l))}for(f in a){var z=a[f];for(i=z.traces,d=0;d<t.length;d++){var q,G,K=t[d],ne=K.name;if("nbins"!==ne||!z.sizeFound){for(s=0;s<i.length;s++){if(void 0!==e((l=i[s])._input,q=K.aStr[u=z.dirs[s]]).get()){z[ne]=x(q),z[ne+"Found"]=!0;break}(G=(l._autoBin||{})[u]||{})[ne]&&e(l,q).set(G[ne])}if("start"===ne||"end"===ne)for(;s<i.length;s++)(l=i[s])["_"+u+"bingroup"]&&x(q,(G=(l._autoBin||{})[u]||{})[ne]);"nbins"!==ne||z.sizeFound||z.nbinsFound||(l=i[0],z[ne]=x(q))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../../components/color"),y=v("../bar/defaults").handleText,e=v("../bar/style_defaults"),r=v("./attributes");ae.exports=function(t,o,n,m){function l(T,x){return g.coerce(t,o,r,T,x)}var i=l("x"),f=l("y");l("cumulative.enabled")&&(l("cumulative.direction"),l("cumulative.currentbin")),l("text");var u=l("textposition");y(t,o,m,l,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat");var s=l("orientation",f&&!i?"h":"v"),d="v"===s?"x":"y",h="v"===s?"y":"x",a=i&&f?Math.min(g.minRowLength(i)&&g.minRowLength(f)):g.minRowLength(o[d]||[]);if(a){o._length=a,p.getComponentMethod("calendars","handleTraceDefaults")(t,o,["x","y"],m),o[h]&&l("histfunc"),l("histnorm"),l("autobin"+d),e(t,o,l,n,m),g.coerceSelectionMarkerOpacity(o,l);var _=(o.marker.line||{}).color,c=p.getComponentMethod("errorbars","supplyDefaults");c(t,o,_||b.defaultLine,{axis:"y"}),c(t,o,_||b.defaultLine,{axis:"x",inherit:"y"})}else o.visible=!1}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){if(p.x="xVal"in g?g.xVal:g.x,p.y="yVal"in g?g.yVal:g.y,"zLabelVal"in g&&(p.z=g.zLabelVal),g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),!(b.cumulative||{}).enabled){var r,t=Array.isArray(e)?y[0].pts[e[0]][e[1]]:y[e].pts;if(p.pointNumbers=t,p.binNumber=p.pointNumber,delete p.pointNumber,delete p.pointIndex,b._indexToPoints){r=[];for(var o=0;o<t.length;o++)r=r.concat(b._indexToPoints[t[o]])}else r=t;p.pointIndices=r}return p}},{}],831:[function(v,ae,ie){"use strict";var p=v("../bar/hover").hoverPoints,g=v("../../plots/cartesian/axes").hoverLabelText;ae.exports=function(b,y,e,r,t){var o=p(b,y,e,r,t);if(o){var n=(b=o[0]).cd[b.index],m=b.cd[0].trace;if(!m.cumulative.enabled){var l="h"===m.orientation?"y":"x";b[l+"Label"]=g(b[l+"a"],[n.ph0,n.ph1],m[l+"hoverformat"])}return o}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),layoutAttributes:v("../bar/layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),supplyLayoutDefaults:v("../bar/layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("../bar/cross_trace_calc").crossTraceCalc,plot:v("../bar/plot").plot,layerName:"barlayer",style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,colorbar:v("../scatter/marker_colorbar"),hoverPoints:v("./hover"),selectPoints:v("../bar/select"),eventData:v("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(v,ae,ie){"use strict";ae.exports={percent:function(p,g){for(var b=p.length,y=100/g,e=0;e<b;e++)p[e]*=y},probability:function(p,g){for(var b=p.length,y=0;y<b;y++)p[y]/=g},density:function(p,g,b,y){var e=p.length;y=y||1;for(var r=0;r<e;r++)p[r]*=b[r]*y},"probability density":function(p,g,b,y){var e=p.length;y&&(g/=y);for(var r=0;r<e;r++)p[r]*=b[r]/g}}},{}],834:[function(v,ae,ie){"use strict";var p=v("../histogram/attributes"),g=v("../histogram/bin_attributes"),b=v("../heatmap/attributes"),y=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=v("../../plots/template_attributes").hovertemplateAttrs,t=v("../../plots/template_attributes").texttemplateAttrs,o=v("../../components/colorscale/attributes"),n=v("../../lib/extend").extendFlat;ae.exports=n({x:p.x,y:p.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:g("x"),nbinsy:p.nbinsy,ybins:g("y"),autobinx:p.autobinx,autobiny:p.autobiny,bingroup:n({},p.bingroup,{}),xbingroup:n({},p.bingroup,{}),ybingroup:n({},p.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:r({},{keys:"z"}),texttemplate:t({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:b.textfont,showlegend:n({},y.showlegend,{dflt:!1})},o("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../histogram/bin_functions"),y=v("../histogram/norm_functions"),e=v("../histogram/average"),r=v("../histogram/bin_label_vals"),t=v("../histogram/calc").calcAllAutoBins;function o(l,i,f,u){var s,d=new Array(l);if(u)for(s=0;s<l;s++)d[s]=1/(i[s+1]-i[s]);else{var h=1/f;for(s=0;s<l;s++)d[s]=h}return d}function n(l,i){return{start:l(i.start),end:l(i.end),size:i.size}}function m(l,i,f,u,s,d){var h,a=l.length-1,_=new Array(a),c=r(f,u,l,s,d);for(h=0;h<a;h++){var T=(i||[])[h];_[h]=void 0===T?[c(l[h]),c(l[h+1],!0)]:[T,T]}return _}ae.exports=function(l,i){var f,u,s,d,h=g.getFromId(l,i.xaxis),a=g.getFromId(l,i.yaxis),_=i.xcalendar,c=i.ycalendar,T=function(ft){return h.r2c(ft,0,_)},x=function(ft){return a.r2c(ft,0,c)},w=t(l,i,h,"x"),M=w[0],D=w[1],C=t(l,i,a,"y"),P=C[0],L=C[1],S=i._length;D.length>S&&D.splice(S,D.length-S),L.length>S&&L.splice(S,L.length-S);var E=[],N=[],z=[],q="string"==typeof M.size,G="string"==typeof P.size,K=[],ne=[],X=q?K:M,J=G?ne:P,se=0,V=[],j=[],H=i.histnorm,oe=i.histfunc,U=-1!==H.indexOf("density"),te="max"===oe||"min"===oe?null:0,ee=b.count,le=y[H],ce=!1,pe=[],de=[],be="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";be&&"count"!==oe&&(ce="avg"===oe,ee=b[oe]);var he=M.size,xe=T(M.start),De=T(M.end)+(xe-g.tickIncrement(xe,he,!1,_))/1e6;for(f=xe;f<De;f=g.tickIncrement(f,he,!1,_))N.push(te),K.push(f),ce&&z.push(0);K.push(f);var ke=N.length,Fe=(f-xe)/ke,ve=h.c2r(xe+Fe/2,0,_),Te=P.size,Le=x(P.start),Oe=x(P.end)+(Le-g.tickIncrement(Le,Te,!1,c))/1e6;for(f=Le;f<Oe;f=g.tickIncrement(f,Te,!1,c)){E.push(N.slice()),ne.push(f);var Ne=new Array(ke);for(u=0;u<ke;u++)Ne[u]=[];j.push(Ne),ce&&V.push(z.slice())}ne.push(f);var Be=E.length,He=(f-Le)/Be,Ve=a.c2r(Le+He/2,0,c);U&&(pe=o(N.length,X,Fe,q),de=o(E.length,J,He,G)),q||"date"!==h.type||(X=n(T,X)),G||"date"!==a.type||(J=n(x,J));var it=!0,ze=!0,je=new Array(ke),qe=new Array(Be),Ye=1/0,ct=1/0,vt=1/0,wt=1/0;for(f=0;f<S;f++){var Ot=D[f],St=L[f];s=p.findBin(Ot,X),d=p.findBin(St,J),s>=0&&s<ke&&d>=0&&d<Be&&(se+=ee(s,f,E[d],be,V[d]),j[d][s].push(f),it&&(void 0===je[s]?je[s]=Ot:je[s]!==Ot&&(it=!1)),ze&&(void 0===qe[d]?qe[d]=St:qe[d]!==St&&(ze=!1)),Ye=Math.min(Ye,Ot-K[s]),ct=Math.min(ct,K[s+1]-Ot),vt=Math.min(vt,St-ne[d]),wt=Math.min(wt,ne[d+1]-St))}if(ce)for(d=0;d<Be;d++)se+=e(E[d],V[d]);if(le)for(d=0;d<Be;d++)le(E[d],se,pe,de[d]);return{x:D,xRanges:m(K,it&&je,Ye,ct,h,_),x0:ve,dx:Fe,y:L,yRanges:m(ne,ze&&qe,vt,wt,a,c),y0:Ve,dy:He,z:E,pts:j}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./sample_defaults"),b=v("../heatmap/style_defaults"),y=v("../../components/colorscale/defaults"),e=v("../heatmap/label_defaults"),r=v("./attributes");ae.exports=function(t,o,n,m){function l(i,f){return p.coerce(t,o,r,i,f)}g(t,o,l,m),!1!==o.visible&&(b(t,o,l,m),y(t,o,m,l,{prefix:"",cLetter:"z"}),l("hovertemplate"),e(l,m),l("xhoverformat"),l("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(v,ae,ie){"use strict";var p=v("../heatmap/hover"),g=v("../../plots/cartesian/axes").hoverLabelText;ae.exports=function(b,y,e,r,t){var o=p(b,y,e,r,t);if(o){var n=(b=o[0]).index,i=b.cd[0],f=i.trace,u=i.xRanges[n[1]],s=i.yRanges[n[0]];return b.xLabel=g(b.xa,[u[0],u[1]],f.xhoverformat),b.yLabel=g(b.ya,[s[0],s[1]],f.yhoverformat),o}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../heatmap/calc"),plot:v("../heatmap/plot"),layerName:"heatmaplayer",colorbar:v("../heatmap/colorbar"),style:v("../heatmap/style"),hoverPoints:v("./hover"),eventData:v("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib");ae.exports=function(b,y,e,r){var t=e("x"),o=e("y"),n=g.minRowLength(t),m=g.minRowLength(o);n&&m?(y._length=Math.min(n,m),p.getComponentMethod("calendars","handleTraceDefaults")(b,y,["x","y"],r),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):y.visible=!1}},{"../../lib":515,"../../registry":647}],840:[function(v,ae,ie){"use strict";var p=v("../histogram2d/attributes"),g=v("../contour/attributes"),b=v("../../components/colorscale/attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../lib/extend").extendFlat;ae.exports=e({x:p.x,y:p.y,z:p.z,marker:p.marker,histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:p.xbins,nbinsy:p.nbinsy,ybins:p.ybins,autobinx:p.autobinx,autobiny:p.autobiny,bingroup:p.bingroup,xbingroup:p.xbingroup,ybingroup:p.ybingroup,autocontour:g.autocontour,ncontours:g.ncontours,contours:g.contours,line:{color:g.line.color,width:e({},g.line.width,{dflt:.5}),dash:g.line.dash,smoothing:g.line.smoothing,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:p.hovertemplate,texttemplate:g.texttemplate,textfont:g.textfont},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../histogram2d/sample_defaults"),b=v("../contour/contours_defaults"),y=v("../contour/style_defaults"),e=v("../heatmap/label_defaults"),r=v("./attributes");ae.exports=function(t,o,n,m){function l(i,f){return p.coerce(t,o,r,i,f)}g(t,o,l,m),!1!==o.visible&&(b(t,o,l,function(i){return p.coerce2(t,o,r,i)}),y(t,o,l,m),l("xhoverformat"),l("yhoverformat"),l("hovertemplate"),o.contours&&"heatmap"===o.contours.coloring&&e(l,m))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../contour/calc"),plot:v("../contour/plot").plot,layerName:"contourlayer",style:v("../contour/style"),colorbar:v("../contour/colorbar"),hoverPoints:v("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../components/colorscale/attributes"),y=v("../../plots/domain").attributes,e=v("../pie/attributes"),r=v("../sunburst/attributes"),t=v("../treemap/attributes"),o=v("../treemap/constants"),n=v("../../lib/extend").extendFlat;ae.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:t.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:r.marker.colors,line:r.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:r.leaf,pathbar:t.pathbar,text:e.text,textinfo:r.textinfo,texttemplate:g({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:p({},{keys:o.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:t.outsidetextfont,textposition:t.textposition,sort:e.sort,root:r.root,domain:y({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(v,ae,ie){"use strict";var p=v("../../plots/plots");ie.name="icicle",ie.plot=function(g,b,y,e){p.plotBasePlot(ie.name,g,b,y,e)},ie.clean=function(g,b,y,e){p.cleanBasePlot(ie.name,g,b,y,e)}},{"../../plots/plots":628}],845:[function(v,ae,ie){"use strict";var p=v("../sunburst/calc");ie.calc=function(g,b){return p.calc(g,b)},ie.crossTraceCalc=function(g){return p._runCrossTraceCalc("icicle",g)}},{"../sunburst/calc":1060}],846:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../components/color"),y=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,r=v("../bar/constants").TEXTPAD,t=v("../../components/colorscale"),o=t.hasColorscale,n=t.handleDefaults;ae.exports=function(m,l,i,f){function u(T,x){return p.coerce(m,l,g,T,x)}var s=u("labels"),d=u("parents");if(s&&s.length&&d&&d.length){var h=u("values");u(h&&h.length?"branchvalues":"count"),u("level"),u("maxdepth"),u("tiling.orientation"),u("tiling.flip"),u("tiling.pad");var a=u("text");u("texttemplate"),l.texttemplate||u("textinfo",Array.isArray(a)?"text+label":"label"),u("hovertext"),u("hovertemplate");var _=u("pathbar.visible");e(m,l,f,u,"auto",{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition"),u("marker.line.width")&&u("marker.line.color",f.paper_bgcolor),u("marker.colors");var c=l._hasColorscale=o(m,"marker","colors")||(m.marker||{}).coloraxis;c&&n(m,l,f,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",c?1:.7),l._hovered={marker:{line:{width:2,color:b.contrast(f.paper_bgcolor)}}},_&&(u("pathbar.thickness",l.pathbar.textfont.size+2*r),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),y(l,f,u),l._length=null}else l.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../../lib/svg_text_utils"),e=v("./partition"),r=v("./style").styleOne,t=v("../treemap/constants"),o=v("../sunburst/helpers"),n=v("../sunburst/fx"),m=v("../sunburst/plot").formatSliceLabel;ae.exports=function(l,i,f,u,s){var d=s.width,h=s.height,a=s.viewX,_=s.viewY,c=s.pathSlice,T=s.toMoveInsideSlice,x=s.strTransform,w=s.hasTransition,M=s.handleSlicesExit,D=s.makeUpdateSliceInterpolator,C=s.makeUpdateTextInterpolator,P=s.prevEntry,L=l._fullLayout,S=i[0].trace,E=-1!==S.textposition.indexOf("left"),N=-1!==S.textposition.indexOf("right"),z=-1!==S.textposition.indexOf("bottom"),q=e(f,[d,h],{flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,orientation:S.tiling.orientation,pad:{inner:S.tiling.pad},maxDepth:S._maxDepth}).descendants(),G=1/0,K=-1/0;q.forEach(function(V){var j=V.depth;j>=S._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(G=Math.min(G,j),K=Math.max(K,j))}),u=u.data(q,o.getPtId),S._maxVisibleLayers=isFinite(K)?K-G+1:0,u.enter().append("g").classed("slice",!0),M(u,!1,{},[d,h],c),u.order();var ne=null;if(w&&P){var X=o.getPtId(P);u.each(function(V){null===ne&&o.getPtId(V)===X&&(ne={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var J=function(){return ne||{x0:0,x1:d,y0:0,y1:h}},se=u;return w&&(se=se.transition().each("end",function(){var V=p.select(this);o.setSliceCursor(V,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(V){V._x0=a(V.x0),V._x1=a(V.x1),V._y0=_(V.y0),V._y1=_(V.y1),V._hoverX=a(V.x1-S.tiling.pad),V._hoverY=_(z?V.y1-S.tiling.pad/2:V.y0+S.tiling.pad/2);var j=p.select(this),H=g.ensureSingle(j,"path","surface",function(ee){ee.style("pointer-events","all")});w?H.transition().attrTween("d",function(ee){var le=D(ee,!1,J(),[d,h],{orientation:S.tiling.orientation,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1});return function(ce){return c(le(ce))}}):H.attr("d",c),j.call(n,f,l,i,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,l,{isTransitioning:l._transitioning}),H.call(r,V,S,{hovered:!1}),V._text=V.x0===V.x1||V.y0===V.y1?"":m(V,f,S,i,L)||"";var oe=g.ensureSingle(j,"g","slicetext"),U=g.ensureSingle(oe,"text","",function(ee){ee.attr("data-notex",1)}),te=g.ensureUniformFontSize(l,o.determineTextFont(S,V,L.font));U.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",N?"end":E?"start":"middle").call(b.font,te).call(y.convertToTspans,l),V.textBB=b.bBox(U.node()),V.transform=T(V,{fontSize:te.size}),V.transform.fontSize=te.size,w?U.transition().attrTween("transform",function(ee){var le=C(ee,!1,J(),[d,h]);return function(ce){return x(le(ce))}}):U.attr("transform",x(V))}),ne}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"icicle",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(v,ae,ie){"use strict";ae.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y){function e(r,t){return p.coerce(b,y,g,r,t)}e("iciclecolorway",y.colorway),e("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(v,ae,ie){"use strict";var p=v("d3-hierarchy"),g=v("../treemap/flip_tree");ae.exports=function(b,y,e){var r=e.flipX,t=e.flipY,o="h"===e.orientation,n=e.maxDepth,m=y[0],l=y[1];n&&(m=(b.height+1)*y[0]/Math.min(b.height+1,n),l=(b.height+1)*y[1]/Math.min(b.height+1,n));var i=p.partition().padding(e.pad.inner).size(o?[y[1],m]:[y[0],l])(b);return(o||r||t)&&g(i,y,{swapXY:o,flipX:r,flipY:t}),i}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(v,ae,ie){"use strict";var p=v("../treemap/draw"),g=v("./draw_descendants");ae.exports=function(b,y,e,r){return p(b,y,e,r,{type:"icicle",drawDescendants:g})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../../lib"),y=v("../bar/uniform_text").resizeText;function e(r,t,o){var n=t.data.data,m=!t.children,l=n.i,i=b.castOption(o,l,"marker.line.color")||g.defaultLine,f=b.castOption(o,l,"marker.line.width")||0;r.style("stroke-width",f).call(g.fill,n.color).call(g.stroke,i).style("opacity",m?o.leaf.opacity:null)}ae.exports={style:function(r){var t=r._fullLayout._iciclelayer.selectAll(".trace");y(r,t,"icicle"),t.each(function(o){var n=p.select(this),m=o[0].trace;n.style("opacity",m.opacity),n.selectAll("path.surface").each(function(l){p.select(this).call(e,l,m)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(v,ae,ie){"use strict";for(var p=v("../../plots/attributes"),g=v("../../plots/template_attributes").hovertemplateAttrs,b=v("../../lib/extend").extendFlat,y=v("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],r=[],t=[],o=0;o<e.length;o++){var n=y[e[o]];r.push("For the `"+e[o]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),t.push("For the `"+e[o]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}ae.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},p.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:g({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./constants"),b=v("fast-isnumeric"),y=v("../../plots/cartesian/axes"),e=v("../../lib").maxRowLength,r=v("./helpers").getImageSize;function t(n,m,l,i){return function(f){return p.constrain((f-n)*m,l,i)}}function o(n,m){return function(l){return p.constrain(l,n,m)}}ae.exports=function(n,m){var l,i;if(m._hasZ)l=m.z.length,i=e(m.z);else if(m._hasSource){var f=r(m.source);l=f.height,i=f.width}var u,s=y.getFromId(n,m.xaxis||"x"),d=y.getFromId(n,m.yaxis||"y"),h=s.d2c(m.x0)-m.dx/2,a=d.d2c(m.y0)-m.dy/2,_=[h,h+i*m.dx],c=[a,a+l*m.dy];if(s&&"log"===s.type)for(u=0;u<i;u++)_.push(h+u*m.dx);if(d&&"log"===d.type)for(u=0;u<l;u++)c.push(a+u*m.dy);return m._extremes[s._id]=y.findExtremes(s,_),m._extremes[d._id]=y.findExtremes(d,c),m._scaler=function(T){var x=g.colormodel[T.colormodel],w=(x.colormodel||T.colormodel).length;T._sArray=[];for(var M=0;M<w;M++)T._sArray.push(x.min[M]!==T.zmin[M]||x.max[M]!==T.zmax[M]?t(T.zmin[M],(x.max[M]-x.min[M])/(T.zmax[M]-T.zmin[M]),x.min[M],x.max[M]):o(x.min[M],x.max[M]));return function(D){for(var C=D.slice(0,w),P=0;P<w;P++){var L=C[P];if(!b(L))return!1;C[P]=T._sArray[P](L)}return C}}(m),[{x0:h,y0:a,z:m.z,w:i,h:l}]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(v,ae,ie){"use strict";ae.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(p){return p.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(p){var g=p.slice(0,3);return g[1]=g[1]+"%",g[2]=g[2]+"%",g},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(p){var g=p.slice(0,4);return g[1]=g[1]+"%",g[2]=g[2]+"%",g},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("./constants"),y=v("../../snapshot/helpers").IMAGE_URL_PREFIX;ae.exports=function(e,r){function t(m,l){return p.coerce(e,r,g,m,l)}t("source"),r.source&&!r.source.match(y)&&delete r.source,r._hasSource=!!r.source;var o,n=t("z");r._hasZ=!(void 0===n||!n.length||!n[0]||!n[0].length),r._hasZ||r._hasSource?(t("x0"),t("y0"),t("dx"),t("dy"),r._hasZ?(t("colormodel","rgb"),t("zmin",(o=b.colormodel[r.colormodel]).zminDflt||o.min),t("zmax",o.zmaxDflt||o.max)):r._hasSource&&(r.colormodel="rgba256",r.zmin=(o=b.colormodel[r.colormodel]).zminDflt,r.zmax=o.zmaxDflt),t("zsmooth"),t("text"),t("hovertext"),t("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return"xVal"in g&&(p.x=g.xVal),"yVal"in g&&(p.y=g.yVal),g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),p.color=g.color,p.colormodel=g.trace.colormodel,p.z||(p.z=g.color),p}},{}],859:[function(v,ae,ie){"use strict";var p=v("probe-image-size/sync"),g=v("../../snapshot/helpers").IMAGE_URL_PREFIX,b=v("buffer/").Buffer;ie.getImageSize=function(y){var e=y.replace(g,""),r=new b(e,"base64");return p(r)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(v,ae,ie){"use strict";var p=v("../../components/fx"),g=v("../../lib"),b=v("./constants");ae.exports=function(y,e,r){var t=y.cd[0],o=t.trace,n=y.xa,m=y.ya;if(!(p.inbox(e-t.x0,e-(t.x0+t.w*o.dx),0)>0||p.inbox(r-t.y0,r-(t.y0+t.h*o.dy),0)>0)){var l,i=Math.floor((e-t.x0)/o.dx),f=Math.floor(Math.abs(r-t.y0)/o.dy);if(o._hasZ?l=t.z[f][i]:o._hasSource&&(l=o._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(i,f,1,1).data),l){var u,s=t.hi||o.hoverinfo;if(s){var d=s.split("+");-1!==d.indexOf("all")&&(d=["color"]),-1!==d.indexOf("color")&&(u=!0)}var h,a=b.colormodel[o.colormodel],_=a.colormodel||o.colormodel,c=_.length,T=o._scaler(l),x=a.suffix,w=[];(o.hovertemplate||u)&&(w.push("["+[T[0]+x[0],T[1]+x[1],T[2]+x[2]].join(", ")),4===c&&w.push(", "+T[3]+x[3]),w.push("]"),w=w.join(""),y.extraText=_.toUpperCase()+": "+w),Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[f])?h=o.hovertext[f][i]:Array.isArray(o.text)&&Array.isArray(o.text[f])&&(h=o.text[f][i]);var M=m.c2p(t.y0+(f+.5)*o.dy),D=t.x0+(i+.5)*o.dx,C=t.y0+(f+.5)*o.dy,P="["+l.slice(0,o.colormodel.length).join(", ")+"]";return[g.extendFlat(y,{index:[f,i],x0:n.c2p(t.x0+i*o.dx),x1:n.c2p(t.x0+(i+1)*o.dx),y0:M,y1:M,color:T,xVal:D,xLabelVal:D,yVal:C,yLabelVal:C,zLabelVal:P,text:h,hovertemplateLabels:{zLabel:P,colorLabel:w,"color[0]Label":T[0]+x[0],"color[1]Label":T[1]+x[1],"color[2]Label":T[2]+x[2],"color[3]Label":T[3]+x[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover"),eventData:v("./event_data"),moduleType:"trace",name:"image",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=g.strTranslate,y=v("../../constants/xmlns_namespaces"),e=v("./constants"),r=g.isIOS()||g.isSafari()||g.isIE();ae.exports=function(t,o,n,m){var l=o.xaxis,i=o.yaxis,f=!(r||t._context._exportedPlot);g.makeTraceGroups(m,n,"im").each(function(u){var s=p.select(this),d=u[0],h=d.trace,a=("fast"===h.zsmooth||!1===h.zsmooth&&f)&&!h._hasZ&&h._hasSource&&"linear"===l.type&&"linear"===i.type;h._realImage=a;var _,c,T,x,w,M,D=d.z,C=d.x0,P=d.y0,L=d.w,S=d.h,E=h.dx,N=h.dy;for(M=0;void 0===_&&M<L;)_=l.c2p(C+M*E),M++;for(M=L;void 0===c&&M>0;)c=l.c2p(C+M*E),M--;for(M=0;void 0===x&&M<S;)x=i.c2p(P+M*N),M++;for(M=S;void 0===w&&M>0;)w=i.c2p(P+M*N),M--;c<_&&(T=c,c=_,_=T),w<x&&(T=x,x=w,w=T),!a&&(_=Math.max(-.5*l._length,_),c=Math.min(1.5*l._length,c),x=Math.max(-.5*i._length,x),w=Math.min(1.5*i._length,w));var z=Math.round(c-_),q=Math.round(w-x);if(z<=0||q<=0)s.selectAll("image").data([]).exit().remove();else{var G=s.selectAll("image").data([u]);G.enter().append("svg:image").attr({xmlns:y.svg,preserveAspectRatio:"none"}),G.exit().remove();var K=!1===h.zsmooth?e.pixelatedStyle:"";if(a){var ne=g.simpleMap(l.range,l.r2l),X=g.simpleMap(i.range,i.r2l),J=ne[1]<ne[0],se=X[1]>X[0];if(J||se){var V=_+z/2,j=x+q/2;K+="transform:"+b(V+"px",j+"px")+"scale("+(J?-1:1)+","+(se?-1:1)+")"+b(-V+"px",-j+"px")+";"}}G.attr("style",K);var H=new Promise(function(U){if(h._hasZ)U();else if(h._hasSource)if(h._canvas&&h._canvas.el.width===L&&h._canvas.el.height===S&&h._canvas.source===h.source)U();else{var te=document.createElement("canvas");te.width=L,te.height=S;var ee=te.getContext("2d",{willReadFrequently:!0});h._image=h._image||new Image;var le=h._image;le.onload=function(){ee.drawImage(le,0,0),h._canvas={el:te,source:h.source},U()},le.setAttribute("src",h.source)}}).then(function(){var U;if(h._hasZ)U=oe(function(ee,le){return D[le][ee]}).toDataURL("image/png");else if(h._hasSource)if(a)U=h.source;else{var te=h._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,S).data;U=oe(function(ee,le){var ce=4*(le*L+ee);return[te[ce],te[ce+1],te[ce+2],te[ce+3]]}).toDataURL("image/png")}G.attr({"xlink:href":U,height:q,width:z,x:_,y:x})});t._promises.push(H)}function oe(U){var te=document.createElement("canvas");te.width=z,te.height=q;var ee,le=te.getContext("2d",{willReadFrequently:!0}),ce=function(ve){return g.constrain(Math.round(l.c2p(C+ve*E)-_),0,z)},pe=function(ve){return g.constrain(Math.round(i.c2p(P+ve*N)-x),0,q)},de=e.colormodel[h.colormodel],be=de.colormodel||h.colormodel,he=de.fmt;for(M=0;M<d.w;M++){var xe=ce(M),De=ce(M+1);if(De!==xe&&!isNaN(De)&&!isNaN(xe))for(var Se=0;Se<d.h;Se++){var ke=pe(Se),Fe=pe(Se+1);Fe===ke||isNaN(Fe)||isNaN(ke)||!U(M,Se)||(ee=h._scaler(U(M,Se)),le.fillStyle=ee?be+"("+he(ee).join(",")+")":"rgba(0,0,0,0)",le.fillRect(xe,ke,De-xe,Fe-ke))}}return te}})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(v,ae,ie){"use strict";var p=v("@plotly/d3");ae.exports=function(g){p.select(g).selectAll(".im image").style("opacity",function(b){return b[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(v,ae,ie){"use strict";var p=v("../../lib/extend").extendFlat,g=v("../../lib/extend").extendDeep,b=v("../../plot_api/edit_types").overrideAll,y=v("../../plots/font_attributes"),e=v("../../components/color/attributes"),r=v("../../plots/domain").attributes,t=v("../../plots/cartesian/layout_attributes"),o=v("../../plot_api/plot_template").templatedArray,n=v("../../constants/delta.js"),m=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,l=y({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},f={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=o("step",g({},i,{range:f}));ae.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:r({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:p({},l,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:m("value")},font:p({},l,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:m("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:p({},l,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:g({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:f,visible:p({},t.visible,{dflt:!0}),tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:p({},t.ticks,{dflt:"outside"}),ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,ticklabelstep:t.ticklabelstep,showticklabels:t.showticklabels,tickfont:y({}),tickangle:t.tickangle,tickformat:t.tickformat,tickformatstops:t.tickformatstops,tickprefix:t.tickprefix,showtickprefix:t.showtickprefix,ticksuffix:t.ticksuffix,showticksuffix:t.showticksuffix,separatethousands:t.separatethousands,exponentformat:t.exponentformat,minexponent:t.minexponent,showexponent:t.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:p({},i.line.color,{}),width:p({},i.line.width,{dflt:1}),editType:"plot"},thickness:p({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(v,ae,ie){"use strict";var p=v("../../plots/plots");ie.name="indicator",ie.plot=function(g,b,y,e){p.plotBasePlot(ie.name,g,b,y,e)},ie.clean=function(g,b,y,e){p.cleanBasePlot(ie.name,g,b,y,e)}},{"../../plots/plots":628}],866:[function(v,ae,ie){"use strict";ae.exports={calc:function(p,g){var b=[],y=g.value;"number"!=typeof g._lastValue&&(g._lastValue=g.value);var e=g._lastValue,r=e;return g._hasDelta&&"number"==typeof g.delta.reference&&(r=g.delta.reference),b[0]={y,lastY:e,delta:y-r,relativeDelta:(y-r)/r},b}}},{}],867:[function(v,ae,ie){"use strict";ae.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../plots/domain").defaults,y=v("../../plot_api/plot_template"),e=v("../../plots/array_container_defaults"),r=v("./constants.js"),t=v("../../plots/cartesian/tick_value_defaults"),o=v("../../plots/cartesian/tick_mark_defaults"),n=v("../../plots/cartesian/tick_label_defaults"),m=v("../../plots/cartesian/prefix_suffix_defaults");function l(i,f){function u(s,d){return p.coerce(i,f,g.gauge.steps,s,d)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}ae.exports={supplyDefaults:function(i,f,u,s){function d(L,S){return p.coerce(i,f,g,L,S)}b(f,s,d),d("mode"),f._hasNumber=-1!==f.mode.indexOf("number"),f._hasDelta=-1!==f.mode.indexOf("delta"),f._hasGauge=-1!==f.mode.indexOf("gauge");var h=d("value");f._range=[0,"number"==typeof h?1.5*h:1];var a,_,c,T,x,w,M=new Array(2);function D(L,S){return p.coerce(c,T,g.gauge,L,S)}function C(L,S){return p.coerce(x,w,g.gauge.axis,L,S)}if(f._hasNumber&&(d("number.valueformat"),d("number.font.color",s.font.color),d("number.font.family",s.font.family),d("number.font.size"),void 0===f.number.font.size&&(f.number.font.size=r.defaultNumberFontSize,M[0]=!0),d("number.prefix"),d("number.suffix"),a=f.number.font.size),f._hasDelta&&(d("delta.font.color",s.font.color),d("delta.font.family",s.font.family),d("delta.font.size"),void 0===f.delta.font.size&&(f.delta.font.size=(f._hasNumber?.5:1)*(a||r.defaultNumberFontSize),M[1]=!0),d("delta.reference",f.value),d("delta.relative"),d("delta.valueformat",f.delta.relative?"2%":""),d("delta.increasing.symbol"),d("delta.increasing.color"),d("delta.decreasing.symbol"),d("delta.decreasing.color"),d("delta.position"),d("delta.prefix"),d("delta.suffix"),_=f.delta.font.size),f._scaleNumbers=(!f._hasNumber||M[0])&&(!f._hasDelta||M[1])||!1,d("title.font.color",s.font.color),d("title.font.family",s.font.family),d("title.font.size",.25*(a||_||r.defaultNumberFontSize)),d("title.text"),f._hasGauge){(c=i.gauge)||(c={}),T=y.newContainer(f,"gauge"),D("shape"),(f._isBullet="bullet"===f.gauge.shape)||d("title.align","center"),(f._isAngular="angular"===f.gauge.shape)||d("align","center"),D("bgcolor",s.paper_bgcolor),D("borderwidth"),D("bordercolor"),D("bar.color"),D("bar.line.color"),D("bar.line.width"),D("bar.thickness",r.valueThickness*("bullet"===f.gauge.shape?.5:1)),e(c,T,{name:"steps",handleItemDefaults:l}),D("threshold.value"),D("threshold.thickness"),D("threshold.line.width"),D("threshold.line.color"),x={},c&&(x=c.axis||{}),w=y.newContainer(T,"axis"),C("visible"),f._range=C("range",f._range);var P={outerTicks:!0};t(x,w,C,"linear"),m(x,w,C,"linear",P),n(x,w,C,"linear",P),o(x,w,C,P)}else d("title.align","center"),d("align","center"),f._isAngular=f._isBullet=!1;f._length=null}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"indicator",basePlotModule:v("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc").calc,plot:v("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-interpolate").interpolate,b=v("d3-interpolate").interpolateNumber,y=v("../../lib"),e=y.strScale,r=y.strTranslate,t=y.rad2deg,o=v("../../constants/alignment").MID_SHIFT,n=v("../../components/drawing"),m=v("./constants"),l=v("../../lib/svg_text_utils"),i=v("../../plots/cartesian/axes"),f=v("../../plots/cartesian/axis_defaults"),u=v("../../plots/cartesian/position_defaults"),s=v("../../plots/cartesian/layout_attributes"),d=v("../../components/color"),h={left:"start",center:"middle",right:"end"},a={left:0,center:.5,right:1},_=/[yzafpn\xb5mkMGTPEZY]/;function c(C){return C&&C.duration>0}function T(C){C.each(function(P){d.stroke(p.select(this),P.line.color)}).each(function(P){d.fill(p.select(this),P.color)}).style("stroke-width",function(P){return P.line.width})}function x(C,P,L){var S=C._fullLayout,E=y.extendFlat({type:"linear",ticks:"outside",range:L,showline:!0},P),N={type:"linear",_id:"x"+P._id},z={letter:"x",font:S.font,noHover:!0,noTickson:!0};function q(G,K){return y.coerce(E,N,s,G,K)}return f(E,N,q,z,S),u(E,N,q,z),N}function w(C,P,L){return[Math.min(P/C.width,L/C.height),C,P+"x"+L]}function M(C,P,L,S){var E=document.createElementNS("http://www.w3.org/2000/svg","text"),N=p.select(E);return N.text(C).attr("x",0).attr("y",0).attr("text-anchor",L).attr("data-unformatted",C).call(l.convertToTspans,S).call(n.font,P),n.bBox(N.node())}function D(C,P,L,S,E,N){var z="_cache"+P;C[z]&&C[z].key===E||(C[z]={key:E,value:L});var q=y.aggNums(N,null,[C[z].value,S],2);return C[z].value=q,q}ae.exports=function(C,P,L,S){var E,N=C._fullLayout;c(L)&&S&&(E=S()),y.makeTraceGroups(N._indicatorlayer,P,"trace").each(function(z){var q,G,K,ne,X,J=z[0].trace,se=p.select(this),V=J._hasGauge,j=J._isAngular,H=J._isBullet,oe=J.domain,U={w:N._size.w*(oe.x[1]-oe.x[0]),h:N._size.h*(oe.y[1]-oe.y[0]),l:N._size.l+N._size.w*oe.x[0],r:N._size.r+N._size.w*(1-oe.x[1]),t:N._size.t+N._size.h*(1-oe.y[1]),b:N._size.b+N._size.h*oe.y[0]},te=U.l+U.w/2,ee=U.t+U.h/2,le=Math.min(U.w/2,U.h),ce=m.innerRadius*le,pe=J.align||"center";if(G=ee,V){if(j&&(q=te,G=ee+le/2,K=function(Fe){return ve=Fe,[(Te=.9*ce)/Math.sqrt(ve.width/2*(ve.width/2)+ve.height*ve.height),ve,Te];var ve,Te}),H){var de=m.bulletPadding,be=1-m.bulletNumberDomainSize+de;q=U.l+(be+(1-be)*a[pe])*U.w,K=function(Fe){return w(Fe,(m.bulletNumberDomainSize-de)*U.w,U.h)}}}else q=U.l+a[pe]*U.w,K=function(Fe){return w(Fe,U.w,U.h)};(function(Fe,ve,Te,Le){var Oe,Ne,Be,He=Te[0].trace,Ve=Le.numbersX,it=Le.numbersY,ze=He.align||"center",je=h[ze],qe=Le.transitionOpts,Ye=Le.onComplete,ct=y.ensureSingle(ve,"g","numbers"),vt=[];He._hasNumber&&vt.push("number"),He._hasDelta&&(vt.push("delta"),"left"===He.delta.position&&vt.reverse());var wt=ct.selectAll("text").data(vt);function Ot(cn,mn,nn,Xe){if(!cn.match("s")||nn>=0==Xe>=0||mn(nn).slice(-1).match(_)||mn(Xe).slice(-1).match(_))return mn;var nt=cn.slice().replace("s","f").replace(/\d+/,function(Ce){return parseInt(Ce)-1}),ye=x(Fe,{tickformat:nt});return function(Ce){return Math.abs(Ce)<1?i.tickText(ye,Ce).text:mn(Ce)}}wt.enter().append("text"),wt.attr("text-anchor",function(){return je}).attr("class",function(cn){return cn}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),wt.exit().remove();var St,ft=He.mode+He.align;if(He._hasDelta&&(St=function(){var cn=x(Fe,{tickformat:He.delta.valueformat},He._range);cn.setScale(),i.prepTicks(cn);var mn=function(rt){return i.tickText(cn,rt).text},nn=He.delta.suffix,Xe=He.delta.prefix,nt=function(rt){return He.delta.relative?rt.relativeDelta:rt.delta},ye=function(rt,Ke){return 0===rt||"number"!=typeof rt||isNaN(rt)?"-":(rt>0?He.delta.increasing.symbol:He.delta.decreasing.symbol)+Xe+Ke(rt)+nn},Ce=function(rt){return rt.delta>=0?He.delta.increasing.color:He.delta.decreasing.color};void 0===He._deltaLastValue&&(He._deltaLastValue=nt(Te[0]));var Ue=ct.select("text.delta");function Qe(){Ue.text(ye(nt(Te[0]),mn)).call(d.fill,Ce(Te[0])).call(l.convertToTspans,Fe)}return Ue.call(n.font,He.delta.font).call(d.fill,Ce({delta:He._deltaLastValue})),c(qe)?Ue.transition().duration(qe.duration).ease(qe.easing).tween("text",function(){var rt=p.select(this),Ke=nt(Te[0]),gt=He._deltaLastValue,mt=Ot(He.delta.valueformat,mn,gt,Ke),Lt=b(gt,Ke);return He._deltaLastValue=Ke,function(Vt){rt.text(ye(Lt(Vt),mt)),rt.call(d.fill,Ce({delta:Lt(Vt)}))}}).each("end",function(){Qe(),Ye&&Ye()}).each("interrupt",function(){Qe(),Ye&&Ye()}):Qe(),Ne=M(ye(nt(Te[0]),mn),He.delta.font,je,Fe),Ue}(),ft+=He.delta.position+He.delta.font.size+He.delta.font.family+He.delta.valueformat,ft+=He.delta.increasing.symbol+He.delta.decreasing.symbol,Be=Ne),He._hasNumber&&(function(){var cn=x(Fe,{tickformat:He.number.valueformat},He._range);cn.setScale(),i.prepTicks(cn);var mn=function(Ce){return i.tickText(cn,Ce).text},nn=He.number.suffix,Xe=He.number.prefix,nt=ct.select("text.number");function ye(){var Ce="number"==typeof Te[0].y?Xe+mn(Te[0].y)+nn:"-";nt.text(Ce).call(n.font,He.number.font).call(l.convertToTspans,Fe)}c(qe)?nt.transition().duration(qe.duration).ease(qe.easing).each("end",function(){ye(),Ye&&Ye()}).each("interrupt",function(){ye(),Ye&&Ye()}).attrTween("text",function(){var Ce=p.select(this),Ue=b(Te[0].lastY,Te[0].y);He._lastValue=Te[0].y;var Qe=Ot(He.number.valueformat,mn,Te[0].lastY,Te[0].y);return function(rt){Ce.text(Xe+Qe(Ue(rt))+nn)}}):ye(),Oe=M(Xe+mn(Te[0].y)+nn,He.number.font,je,Fe)}(),ft+=He.number.font.size+He.number.font.family+He.number.valueformat+He.number.suffix+He.number.prefix,Be=Oe),He._hasDelta&&He._hasNumber){var st,Ct,$t=[(Oe.left+Oe.right)/2,(Oe.top+Oe.bottom)/2],rn=[(Ne.left+Ne.right)/2,(Ne.top+Ne.bottom)/2],hn=.75*He.delta.font.size;"left"===He.delta.position&&(st=D(He,"deltaPos",0,-1*(Oe.width*a[He.align]+Ne.width*(1-a[He.align])+hn),ft,Math.min),Ct=$t[1]-rn[1],Be={width:Oe.width+Ne.width+hn,height:Math.max(Oe.height,Ne.height),left:Ne.left+st,right:Oe.right,top:Math.min(Oe.top,Ne.top+Ct),bottom:Math.max(Oe.bottom,Ne.bottom+Ct)}),"right"===He.delta.position&&(st=D(He,"deltaPos",0,Oe.width*(1-a[He.align])+Ne.width*a[He.align]+hn,ft,Math.max),Ct=$t[1]-rn[1],Be={width:Oe.width+Ne.width+hn,height:Math.max(Oe.height,Ne.height),left:Oe.left,right:Ne.right+st,top:Math.min(Oe.top,Ne.top+Ct),bottom:Math.max(Oe.bottom,Ne.bottom+Ct)}),"bottom"===He.delta.position&&(st=null,Ct=Ne.height,Be={width:Math.max(Oe.width,Ne.width),height:Oe.height+Ne.height,left:Math.min(Oe.left,Ne.left),right:Math.max(Oe.right,Ne.right),top:Oe.bottom-Oe.height,bottom:Oe.bottom+Ne.height}),"top"===He.delta.position&&(st=null,Ct=Oe.top,Be={width:Math.max(Oe.width,Ne.width),height:Oe.height+Ne.height,left:Math.min(Oe.left,Ne.left),right:Math.max(Oe.right,Ne.right),top:Oe.bottom-Oe.height-Ne.height,bottom:Oe.bottom}),St.attr({dx:st,dy:Ct})}(He._hasNumber||He._hasDelta)&&ct.attr("transform",function(){var mn,cn=Le.numbersScaler(Be),nn=D(He,"numbersScale",1,cn[0],ft+=cn[2],Math.min);He._scaleNumbers||(nn=1),He._numbersTop=nn*Be.top+(mn=He._isAngular?it-nn*Be.bottom:it-nn*(Be.top+Be.bottom)/2);var Xe=Be[ze];"center"===ze&&(Xe=(Be.left+Be.right)/2);var nt=Ve-nn*Xe;return nt=D(He,"numbersTranslate",0,nt,ft,Math.max),r(nt,mn)+e(nn)})})(C,se,z,{numbersX:q,numbersY:G,numbersScaler:K,transitionOpts:L,onComplete:E}),V&&(ne={range:J.gauge.axis.range,color:J.gauge.bgcolor,line:{color:J.gauge.bordercolor,width:0},thickness:1},X={range:J.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:J.gauge.bordercolor,width:J.gauge.borderwidth},thickness:1});var he=se.selectAll("g.angular").data(j?z:[]);he.exit().remove();var xe=se.selectAll("g.angularaxis").data(j?z:[]);xe.exit().remove(),j&&function(Fe,ve,Te,Le){var Oe,Ne,Be,He,Ve=Te[0].trace,it=Le.size,ze=Le.radius,je=Le.innerRadius,qe=Le.gaugeBg,Ye=Le.gaugeOutline,ct=[it.l+it.w/2,it.t+it.h/2+ze/2],vt=Le.gauge,wt=Le.layer,Ot=Le.transitionOpts,St=Le.onComplete,ft=Math.PI/2;function st(Vt){var dt=Ve.gauge.axis.range[0],bt=(Vt-dt)/(Ve.gauge.axis.range[1]-dt)*Math.PI-ft;return bt<-ft?-ft:bt>ft?ft:bt}function Ct(Vt){return p.svg.arc().innerRadius((je+ze)/2-Vt/2*(ze-je)).outerRadius((je+ze)/2+Vt/2*(ze-je)).startAngle(-ft)}function $t(Vt){Vt.attr("d",function(dt){return Ct(dt.thickness).startAngle(st(dt.range[0])).endAngle(st(dt.range[1]))()})}vt.enter().append("g").classed("angular",!0),vt.attr("transform",r(ct[0],ct[1])),wt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),wt.selectAll("g.xangularaxistick,path,text").remove(),(Oe=x(Fe,Ve.gauge.axis)).type="linear",Oe.range=Ve.gauge.axis.range,Oe._id="xangularaxis",Oe.ticklabeloverflow="allow",Oe.setScale();var rn=function(Vt){return(Oe.range[0]-Vt.x)/(Oe.range[1]-Oe.range[0])*Math.PI+Math.PI},hn={},cn=i.makeLabelFns(Oe,0).labelStandoff;hn.xFn=function(Vt){var dt=rn(Vt);return Math.cos(dt)*cn},hn.yFn=function(Vt){var dt=rn(Vt),bt=Math.sin(dt)>0?.2:1;return-Math.sin(dt)*(cn+Vt.fontSize*bt)+Math.abs(Math.cos(dt))*(Vt.fontSize*o)},hn.anchorFn=function(Vt){var dt=rn(Vt),bt=Math.cos(dt);return Math.abs(bt)<.1?"middle":bt>0?"start":"end"},hn.heightFn=function(Vt,dt,bt){var Yt=rn(Vt);return-.5*(1+Math.sin(Yt))*bt};var mn=function(Vt){return r(ct[0]+ze*Math.cos(Vt),ct[1]-ze*Math.sin(Vt))};Be=function(Vt){return mn(rn(Vt))},Ne=i.calcTicks(Oe),He=i.getTickSigns(Oe)[2],Oe.visible&&(i.drawTicks(Fe,Oe,{vals:Ne,layer:wt,path:"M"+(He="inside"===Oe.ticks?-1:1)*((Oe.linewidth||1)/2)+",0h"+He*Oe.ticklen,transFn:function(Vt){var dt=rn(Vt);return mn(dt)+"rotate("+-t(dt)+")"}}),i.drawLabels(Fe,Oe,{vals:Ne,layer:wt,transFn:Be,labelFns:hn}));var Xe=[qe].concat(Ve.gauge.steps),nt=vt.selectAll("g.bg-arc").data(Xe);nt.enter().append("g").classed("bg-arc",!0).append("path"),nt.select("path").call($t).call(T),nt.exit().remove();var ye=Ct(Ve.gauge.bar.thickness),Ce=vt.selectAll("g.value-arc").data([Ve.gauge.bar]);Ce.enter().append("g").classed("value-arc",!0).append("path");var Qe,rt,Ke,Ue=Ce.select("path");c(Ot)?(Ue.transition().duration(Ot.duration).ease(Ot.easing).each("end",function(){St&&St()}).each("interrupt",function(){St&&St()}).attrTween("d",(Qe=ye,rt=st(Te[0].lastY),Ke=st(Te[0].y),function(){var Vt=g(rt,Ke);return function(dt){return Qe.endAngle(Vt(dt))()}})),Ve._lastValue=Te[0].y):Ue.attr("d","number"==typeof Te[0].y?ye.endAngle(st(Te[0].y)):"M0,0Z"),Ue.call(T),Ce.exit().remove(),Xe=[];var gt=Ve.gauge.threshold.value;(gt||0===gt)&&Xe.push({range:[gt,gt],color:Ve.gauge.threshold.color,line:{color:Ve.gauge.threshold.line.color,width:Ve.gauge.threshold.line.width},thickness:Ve.gauge.threshold.thickness});var mt=vt.selectAll("g.threshold-arc").data(Xe);mt.enter().append("g").classed("threshold-arc",!0).append("path"),mt.select("path").call($t).call(T),mt.exit().remove();var Lt=vt.selectAll("g.gauge-outline").data([Ye]);Lt.enter().append("g").classed("gauge-outline",!0).append("path"),Lt.select("path").call($t).call(T),Lt.exit().remove()}(C,0,z,{radius:le,innerRadius:ce,gauge:he,layer:xe,size:U,gaugeBg:ne,gaugeOutline:X,transitionOpts:L,onComplete:E});var De=se.selectAll("g.bullet").data(H?z:[]);De.exit().remove();var Se=se.selectAll("g.bulletaxis").data(H?z:[]);Se.exit().remove(),H&&function(Fe,ve,Te,Le){var Oe,Ne,Be,He,Ve,it=Te[0].trace,ze=Le.gauge,je=Le.layer,qe=Le.gaugeBg,Ye=Le.gaugeOutline,ct=Le.size,vt=it.domain,wt=Le.transitionOpts,Ot=Le.onComplete;ze.enter().append("g").classed("bullet",!0),ze.attr("transform",r(ct.l,ct.t)),je.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),je.selectAll("g.xbulletaxistick,path,text").remove();var St=ct.h,ft=it.gauge.bar.thickness*St,st=vt.x[0],Ct=vt.x[0]+(vt.x[1]-vt.x[0])*(it._hasNumber||it._hasDelta?1-m.bulletNumberDomainSize:1);function $t(nt){nt.attr("width",function(ye){return Math.max(0,Oe.c2p(ye.range[1])-Oe.c2p(ye.range[0]))}).attr("x",function(ye){return Oe.c2p(ye.range[0])}).attr("y",function(ye){return.5*(1-ye.thickness)*St}).attr("height",function(ye){return ye.thickness*St})}(Oe=x(Fe,it.gauge.axis))._id="xbulletaxis",Oe.domain=[st,Ct],Oe.setScale(),Ne=i.calcTicks(Oe),Be=i.makeTransTickFn(Oe),He=i.getTickSigns(Oe)[2],Ve=ct.t+ct.h,Oe.visible&&(i.drawTicks(Fe,Oe,{vals:"inside"===Oe.ticks?i.clipEnds(Oe,Ne):Ne,layer:je,path:i.makeTickPath(Oe,Ve,He),transFn:Be}),i.drawLabels(Fe,Oe,{vals:Ne,layer:je,transFn:Be,labelFns:i.makeLabelFns(Oe,Ve)}));var rn=[qe].concat(it.gauge.steps),hn=ze.selectAll("g.bg-bullet").data(rn);hn.enter().append("g").classed("bg-bullet",!0).append("rect"),hn.select("rect").call($t).call(T),hn.exit().remove();var cn=ze.selectAll("g.value-bullet").data([it.gauge.bar]);cn.enter().append("g").classed("value-bullet",!0).append("rect"),cn.select("rect").attr("height",ft).attr("y",(St-ft)/2).call(T),c(wt)?cn.select("rect").transition().duration(wt.duration).ease(wt.easing).each("end",function(){Ot&&Ot()}).each("interrupt",function(){Ot&&Ot()}).attr("width",Math.max(0,Oe.c2p(Math.min(it.gauge.axis.range[1],Te[0].y)))):cn.select("rect").attr("width","number"==typeof Te[0].y?Math.max(0,Oe.c2p(Math.min(it.gauge.axis.range[1],Te[0].y))):0),cn.exit().remove();var mn=Te.filter(function(){return it.gauge.threshold.value||0===it.gauge.threshold.value}),nn=ze.selectAll("g.threshold-bullet").data(mn);nn.enter().append("g").classed("threshold-bullet",!0).append("line"),nn.select("line").attr("x1",Oe.c2p(it.gauge.threshold.value)).attr("x2",Oe.c2p(it.gauge.threshold.value)).attr("y1",(1-it.gauge.threshold.thickness)/2*St).attr("y2",(1-(1-it.gauge.threshold.thickness)/2)*St).call(d.stroke,it.gauge.threshold.line.color).style("stroke-width",it.gauge.threshold.line.width),nn.exit().remove();var Xe=ze.selectAll("g.gauge-outline").data([Ye]);Xe.enter().append("g").classed("gauge-outline",!0).append("rect"),Xe.select("rect").call($t).call(T),Xe.exit().remove()}(C,0,z,{gauge:De,layer:Se,size:U,gaugeBg:ne,gaugeOutline:X,transitionOpts:L,onComplete:E});var ke=se.selectAll("text.title").data(z);ke.exit().remove(),ke.enter().append("text").classed("title",!0),ke.attr("text-anchor",function(){return H?h.right:h[J.title.align]}).text(J.title.text).call(n.font,J.title.font).call(l.convertToTspans,C),ke.attr("transform",function(){var Fe,ve=U.l+U.w*a[J.title.align],Te=m.titlePadding,Le=n.bBox(ke.node());return V?(j&&(Fe=J.gauge.axis.visible?n.bBox(xe.node()).top-Te-Le.bottom:U.t+U.h/2-le/2-Le.bottom-Te),H&&(Fe=G-(Le.top+Le.bottom)/2,ve=U.l-m.bulletPadding*U.w)):Fe=J._numbersTop-Te-Le.bottom,r(ve,Fe)})})}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../mesh3d/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,t=v("../../plot_api/edit_types").overrideAll,o=ae.exports=t(r({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),valuehoverformat:g("value",1),showlegend:r({},e.showlegend,{dflt:!1})},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,lightposition:y.lightposition,lighting:y.lighting,flatshading:y.flatshading,contour:y.contour,hoverinfo:r({},e.hoverinfo)}),"calc","nested");o.flatshading.dflt=!0,o.lighting.facenormalsepsilon.dflt=0,o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/calc"),g=v("../streamtube/calc").processGrid,b=v("../streamtube/calc").filter;ae.exports=function(y,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=b(e.x,e._len),e._y=b(e.y,e._len),e._z=b(e.z,e._len),e._value=b(e.value,e._len);var r=g(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var t=1/0,o=-1/0,n=0;n<e._len;n++){var m=e._value[n];t=Math.min(t,m),o=Math.max(o,m)}e._minValues=t,e._maxValues=o,e._vMin=e.isomin??t,e._vMax=void 0===e.isomax||null===e.isomin?o:e.isomax,p(y,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_mesh3d,g=v("../../lib/gl_format_color").parseColorScale,b=v("../../lib/str2rgbarray"),y=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),r=function(l,i){for(var f=i.length-1;f>0;f--){var u=Math.min(i[f],i[f-1]),s=Math.max(i[f],i[f-1]);if(s>u&&u<l&&l<=s)return{id:f,distRatio:(s-l)/(s-u)}}return{id:0,distRatio:0}};function t(l,i,f){this.scene=l,this.uid=f,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var o=t.prototype;o.handlePick=function(l){if(l.object===this.mesh){var i=l.data.index,u=this.data._meshY[i],s=this.data._meshZ[i],d=this.data._Ys.length,h=this.data._Zs.length,a=r(this.data._meshX[i],this.data._Xs).id,_=r(u,this.data._Ys).id,c=r(s,this.data._Zs).id,T=l.index=c+h*_+h*d*a;l.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&void 0!==x[T]?l.textLabel=x[T]:x&&(l.textLabel=x),!0}},o.update=function(l){var i=this.scene,f=i.fullSceneLayout;function u(h,a,_,c){return a.map(function(T){return h.d2l(T,0,c)*_})}this.data=m(l);var s={positions:e(u(f.xaxis,l._meshX,i.dataScale[0],l.xcalendar),u(f.yaxis,l._meshY,i.dataScale[1],l.ycalendar),u(f.zaxis,l._meshZ,i.dataScale[2],l.zcalendar)),cells:e(l._meshI,l._meshJ,l._meshK),lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:b(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},d=y(l);s.vertexIntensity=l._meshIntensity,s.vertexIntensityBounds=[d.min,d.max],s.colormap=g(l),this.mesh.update(s)},o.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function m(l){l._meshI=[],l._meshJ=[],l._meshK=[];var i,f,u,s,d,h,a,_=l.surface.show,c=l.spaceframe.show,T=l.surface.fill,x=l.spaceframe.fill,w=!1,M=!1,D=0,C=l._Xs,P=l._Ys,L=l._Zs,S=C.length,E=P.length,N=L.length,z=n.indexOf(l._gridFill.replace(/-/g,"").replace(/\+/g,"")),q=function(ze,je,qe){switch(z){case 5:return qe+N*je+N*E*ze;case 4:return qe+N*ze+N*S*je;case 3:return je+E*qe+E*N*ze;case 2:return je+E*ze+E*S*qe;case 1:return ze+S*qe+S*N*je;default:return ze+S*je+S*E*qe}},G=l._minValues,K=l._maxValues,ne=l._vMin,X=l._vMax;function J(ze,je,qe){for(var Ye=h.length,ct=f;ct<Ye;ct++)if(ze===u[ct]&&je===s[ct]&&qe===d[ct])return ct;return-1}function se(){f=i}function V(){u=[],s=[],d=[],h=[],i=0,se()}function j(ze,je,qe,Ye){return u.push(ze),s.push(je),d.push(qe),h.push(Ye),++i-1}function H(ze,je,qe){for(var Ye=[],ct=0;ct<ze.length;ct++)Ye[ct]=ze[ct]*(1-qe)+qe*je[ct];return Ye}function oe(ze){a=ze}function U(ze,je){return"all"===ze||null===ze||ze.indexOf(je)>-1}function te(ze,je){return null===ze?je:ze}function ee(ze,je,qe){se();var ct,vt,nn,Xe,nt,ye,Ce,Ue,Qe,rt,Ke,gt,mt,Lt,Vt,wt=[je],Ot=[qe];if(a>=1)wt=[je],Ot=[qe];else if(a>0){var St=(Xe=qe,rt=H(Ue=function(dt,bt,Yt){for(var It=[],jt=0;jt<dt.length;jt++)It[jt]=(dt[jt]+bt[jt]+Yt[jt])/3;return It}(nt=(nn=je)[0],ye=nn[1],Ce=nn[2]),nt,Qe=Math.sqrt(1-a)),{xyzv:[[nt,ye,Ke=H(Ue,ye,Qe)],[Ke,rt,nt],[ye,Ce,gt=H(Ue,Ce,Qe)],[gt,Ke,ye],[Ce,nt,rt],[rt,gt,Ce]],abc:[[mt=Xe[0],Lt=Xe[1],-1],[-1,-1,mt],[Lt,Vt=Xe[2],-1],[-1,-1,Lt],[Vt,mt,-1],[-1,-1,Vt]]});wt=St.xyzv,Ot=St.abc}for(var ft=0;ft<wt.length;ft++){je=wt[ft],qe=Ot[ft];for(var st=[],Ct=0;Ct<3;Ct++){var $t=je[Ct][0],rn=je[Ct][1],hn=je[Ct][2],cn=je[Ct][3],mn=qe[Ct]>-1?qe[Ct]:J($t,rn,hn);st[Ct]=mn>-1?mn:j($t,rn,hn,te(ze,cn))}ct=st[1],vt=st[2],l._meshI.push(st[0]),l._meshJ.push(ct),l._meshK.push(vt),++D}}function le(ze,je,qe,Ye){var ct=ze[3];ct<qe&&(ct=qe),ct>Ye&&(ct=Ye);for(var vt=(ze[3]-ct)/(ze[3]-je[3]+1e-9),wt=[],Ot=0;Ot<4;Ot++)wt[Ot]=(1-vt)*ze[Ot]+vt*je[Ot];return wt}function ce(ze,je,qe){return ze>=je&&ze<=qe}function pe(ze){var je=.001*(X-ne);return ze>=ne-je&&ze<=X+je}function de(ze){for(var je=[],qe=0;qe<4;qe++){var Ye=ze[qe];je.push([l._x[Ye],l._y[Ye],l._z[Ye],l._value[Ye]])}return je}function be(ze,je,qe,Ye,ct,vt){vt||(vt=1),qe=[-1,-1,-1];var wt=!1,Ot=[ce(je[0][3],Ye,ct),ce(je[1][3],Ye,ct),ce(je[2][3],Ye,ct)];if(!Ot[0]&&!Ot[1]&&!Ot[2])return!1;var St=function(st,Ct,$t){return pe(Ct[0][3])&&pe(Ct[1][3])&&pe(Ct[2][3])?(ee(st,Ct,$t),!0):vt<3&&be(st,Ct,$t,ne,X,++vt)};if(Ot[0]&&Ot[1]&&Ot[2])return St(ze,je,qe)||wt;var ft=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(st){if(Ot[st[0]]&&Ot[st[1]]&&!Ot[st[2]]){var Ct=je[st[0]],$t=je[st[1]],rn=je[st[2]],hn=le(rn,Ct,Ye,ct),cn=le(rn,$t,Ye,ct);wt=St(ze,[cn,hn,Ct],[-1,-1,qe[st[0]]])||wt,wt=St(ze,[Ct,$t,cn],[qe[st[0]],qe[st[1]],-1])||wt,ft=!0}}),ft||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(st){if(Ot[st[0]]&&!Ot[st[1]]&&!Ot[st[2]]){var Ct=je[st[0]],rn=je[st[2]],hn=le(je[st[1]],Ct,Ye,ct),cn=le(rn,Ct,Ye,ct);wt=St(ze,[cn,hn,Ct],[-1,-1,qe[st[0]]])||wt,ft=!0}}),wt}function he(ze,je,qe,Ye){var St,ft,st,Ct,ct=!1,vt=de(je),wt=[ce(vt[0][3],qe,Ye),ce(vt[1][3],qe,Ye),ce(vt[2][3],qe,Ye),ce(vt[3][3],qe,Ye)];if(!(wt[0]||wt[1]||wt[2]||wt[3]))return ct;if(wt[0]&&wt[1]&&wt[2]&&wt[3])return M&&(St=ze,ft=vt,st=je,(Ct=function($t,rn,hn){ee(St,[ft[$t],ft[rn],ft[hn]],[st[$t],st[rn],st[hn]])})(0,1,2),Ct(3,0,1),Ct(2,3,0),ct=void Ct(1,2,3)||ct),ct;var Ot=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(St){if(wt[St[0]]&&wt[St[1]]&&wt[St[2]]&&!wt[St[3]]){var ft=vt[St[0]],st=vt[St[1]],Ct=vt[St[2]],$t=vt[St[3]];if(M)ct=ee(ze,[ft,st,Ct],[je[St[0]],je[St[1]],je[St[2]]])||ct;else{var rn=le($t,ft,qe,Ye),hn=le($t,st,qe,Ye),cn=le($t,Ct,qe,Ye);ct=ee(null,[rn,hn,cn],[-1,-1,-1])||ct}Ot=!0}}),Ot||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(St){if(wt[St[0]]&&wt[St[1]]&&!wt[St[2]]&&!wt[St[3]]){var ft=vt[St[0]],st=vt[St[1]],Ct=vt[St[2]],$t=vt[St[3]],rn=le(Ct,ft,qe,Ye),hn=le(Ct,st,qe,Ye),cn=le($t,st,qe,Ye),mn=le($t,ft,qe,Ye);M?(ct=ee(ze,[ft,mn,rn],[je[St[0]],-1,-1])||ct,ct=ee(ze,[st,hn,cn],[je[St[1]],-1,-1])||ct):(null,Xe=[rn,hn,cn,mn],nt=[-1,-1,-1,-1],(ye=function(Ce,Ue,Qe){ee(null,[Xe[Ce],Xe[Ue],Xe[Qe]],[nt[Ce],nt[Ue],nt[Qe]])})(0,1,2),ct=void ye(2,3,0)||ct),Ot=!0}var Xe,nt,ye}),Ot||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(St){if(wt[St[0]]&&!wt[St[1]]&&!wt[St[2]]&&!wt[St[3]]){var ft=vt[St[0]],Ct=vt[St[2]],$t=vt[St[3]],rn=le(vt[St[1]],ft,qe,Ye),hn=le(Ct,ft,qe,Ye),cn=le($t,ft,qe,Ye);M?(ct=ee(ze,[ft,rn,hn],[je[St[0]],-1,-1])||ct,ct=ee(ze,[ft,hn,cn],[je[St[0]],-1,-1])||ct,ct=ee(ze,[ft,cn,rn],[je[St[0]],-1,-1])||ct):ct=ee(null,[rn,hn,cn],[-1,-1,-1])||ct,Ot=!0}})),ct}function xe(ze,je,qe,Ye,ct,vt,wt,Ot,St,ft,st){var Ct=!1;return w&&(U(ze,"A")&&(Ct=he(null,[je,qe,Ye,vt],ft,st)||Ct),U(ze,"B")&&(Ct=he(null,[qe,Ye,ct,St],ft,st)||Ct),U(ze,"C")&&(Ct=he(null,[qe,vt,wt,St],ft,st)||Ct),U(ze,"D")&&(Ct=he(null,[Ye,vt,Ot,St],ft,st)||Ct),U(ze,"E")&&(Ct=he(null,[qe,Ye,vt,St],ft,st)||Ct)),M&&(Ct=he(ze,[qe,Ye,vt,St],ft,st)||Ct),Ct}function De(ze,je,qe,Ye,ct,vt,wt,Ot){return[!0===Ot[0]||be(ze,de([je,qe,Ye]),[je,qe,Ye],vt,wt),!0===Ot[1]||be(ze,de([Ye,ct,je]),[Ye,ct,je],vt,wt)]}function Se(ze,je,qe,Ye,ct,vt,wt,Ot,St){return Ot?De(ze,je,qe,ct,Ye,vt,wt,St):De(ze,qe,ct,Ye,je,vt,wt,St)}function ke(ze,je,qe,Ye,ct,vt,wt){var Ot,St,ft,st,Ct=!1,$t=function(){Ct=be(ze,[Ot,St,ft],[-1,-1,-1],ct,vt)||Ct,Ct=be(ze,[ft,st,Ot],[-1,-1,-1],ct,vt)||Ct},rn=wt[0],hn=wt[1],cn=wt[2];return rn&&(Ot=H(de([q(je,qe-0,Ye-0)])[0],de([q(je-1,qe-0,Ye-0)])[0],rn),St=H(de([q(je,qe-0,Ye-1)])[0],de([q(je-1,qe-0,Ye-1)])[0],rn),ft=H(de([q(je,qe-1,Ye-1)])[0],de([q(je-1,qe-1,Ye-1)])[0],rn),st=H(de([q(je,qe-1,Ye-0)])[0],de([q(je-1,qe-1,Ye-0)])[0],rn),$t()),hn&&(Ot=H(de([q(je-0,qe,Ye-0)])[0],de([q(je-0,qe-1,Ye-0)])[0],hn),St=H(de([q(je-0,qe,Ye-1)])[0],de([q(je-0,qe-1,Ye-1)])[0],hn),ft=H(de([q(je-1,qe,Ye-1)])[0],de([q(je-1,qe-1,Ye-1)])[0],hn),st=H(de([q(je-1,qe,Ye-0)])[0],de([q(je-1,qe-1,Ye-0)])[0],hn),$t()),cn&&(Ot=H(de([q(je-0,qe-0,Ye)])[0],de([q(je-0,qe-0,Ye-1)])[0],cn),St=H(de([q(je-0,qe-1,Ye)])[0],de([q(je-0,qe-1,Ye-1)])[0],cn),ft=H(de([q(je-1,qe-1,Ye)])[0],de([q(je-1,qe-1,Ye-1)])[0],cn),st=H(de([q(je-1,qe-0,Ye)])[0],de([q(je-1,qe-0,Ye-1)])[0],cn),$t()),Ct}function Fe(ze,je,qe,Ye,ct,vt,wt,Ot,St,ft,st,Ct){var $t=ze;return Ct?(w&&"even"===ze&&($t=null),xe($t,je,qe,Ye,ct,vt,wt,Ot,St,ft,st)):(w&&"odd"===ze&&($t=null),xe($t,St,Ot,wt,vt,ct,Ye,qe,je,ft,st))}function ve(ze,je,qe,Ye,ct){for(var vt=[],wt=0,Ot=0;Ot<je.length;Ot++)for(var St=je[Ot],ft=1;ft<N;ft++)for(var st=1;st<E;st++)vt.push(Se(ze,q(St,st-1,ft-1),q(St,st-1,ft),q(St,st,ft-1),q(St,st,ft),qe,Ye,(St+st+ft)%2,ct&&ct[wt]?ct[wt]:[])),wt++;return vt}function Te(ze,je,qe,Ye,ct){for(var vt=[],wt=0,Ot=0;Ot<je.length;Ot++)for(var St=je[Ot],ft=1;ft<S;ft++)for(var st=1;st<N;st++)vt.push(Se(ze,q(ft-1,St,st-1),q(ft,St,st-1),q(ft-1,St,st),q(ft,St,st),qe,Ye,(ft+St+st)%2,ct&&ct[wt]?ct[wt]:[])),wt++;return vt}function Le(ze,je,qe,Ye,ct){for(var vt=[],wt=0,Ot=0;Ot<je.length;Ot++)for(var St=je[Ot],ft=1;ft<E;ft++)for(var st=1;st<S;st++)vt.push(Se(ze,q(st-1,ft-1,St),q(st-1,ft,St),q(st,ft-1,St),q(st,ft,St),qe,Ye,(st+ft+St)%2,ct&&ct[wt]?ct[wt]:[])),wt++;return vt}function Oe(ze,je,qe){for(var Ye=1;Ye<N;Ye++)for(var ct=1;ct<E;ct++)for(var vt=1;vt<S;vt++)Fe(ze,q(vt-1,ct-1,Ye-1),q(vt-1,ct-1,Ye),q(vt-1,ct,Ye-1),q(vt-1,ct,Ye),q(vt,ct-1,Ye-1),q(vt,ct-1,Ye),q(vt,ct,Ye-1),q(vt,ct,Ye),je,qe,(vt+ct+Ye)%2)}function Ne(ze,je,qe){w=!0,Oe(ze,je,qe),w=!1}function Be(ze,je,qe,Ye,ct,vt){for(var wt=[],St=0;St<je.length;St++)for(var ft=je[St],st=1;st<N;st++)for(var Ct=1;Ct<E;Ct++)wt.push(ke(ze,ft,Ct,st,qe,Ye,ct[St]));return wt}function He(ze,je,qe,Ye,ct,vt){for(var wt=[],St=0;St<je.length;St++)for(var ft=je[St],st=1;st<S;st++)for(var Ct=1;Ct<N;Ct++)wt.push(ke(ze,st,ft,Ct,qe,Ye,ct[St]));return wt}function Ve(ze,je,qe,Ye,ct,vt){for(var wt=[],St=0;St<je.length;St++)for(var ft=je[St],st=1;st<E;st++)for(var Ct=1;Ct<S;Ct++)wt.push(ke(ze,Ct,st,ft,qe,Ye,ct[St]));return wt}function it(ze,je){for(var qe=[],Ye=ze;Ye<je;Ye++)qe.push(Ye);return qe}return function(){if(V(),function(){for(var Ot=0;Ot<S;Ot++)for(var St=0;St<E;St++)for(var ft=0;ft<N;ft++){var st=q(Ot,St,ft);j(l._x[st],l._y[st],l._z[st],l._value[st])}}(),c&&x&&(oe(x),M=!0,Oe(null,ne,X),M=!1),_&&T){oe(T);for(var ze=l.surface.pattern,je=l.surface.count,qe=0;qe<je;qe++){var Ye=1===je?.5:qe/(je-1),ct=(1-Ye)*ne+Ye*X,vt=Math.abs(ct-G)>Math.abs(ct-K)?[G,ct]:[ct,K];Ne(ze,vt[0],vt[1])}}var wt=[[Math.min(ne,K),Math.max(ne,K)],[Math.min(G,X),Math.max(G,X)]];["x","y","z"].forEach(function(Ot){for(var St=[],ft=0;ft<wt.length;ft++){var st=0,Ct=wt[ft][0],$t=wt[ft][1],rn=l.slices[Ot];if(rn.show&&rn.fill){oe(rn.fill);var hn=[],cn=[],mn=[];if(rn.locations.length)for(var nn=0;nn<rn.locations.length;nn++){var Xe=r(rn.locations[nn],"x"===Ot?C:"y"===Ot?P:L);0===Xe.distRatio?hn.push(Xe.id):Xe.id>0&&(cn.push(Xe.id),mn.push("x"===Ot?[Xe.distRatio,0,0]:"y"===Ot?[0,Xe.distRatio,0]:[0,0,Xe.distRatio]))}else hn=it(1,"x"===Ot?S-1:"y"===Ot?E-1:N-1);cn.length>0&&(St[st]="x"===Ot?Be(null,cn,Ct,$t,mn):"y"===Ot?He(null,cn,Ct,$t,mn):Ve(null,cn,Ct,$t,mn),st++),hn.length>0&&(St[st]="x"===Ot?ve(null,hn,Ct,$t,St[st]):"y"===Ot?Te(null,hn,Ct,$t,St[st]):Le(null,hn,Ct,$t,St[st]),st++)}var nt=l.caps[Ot];nt.show&&nt.fill&&(oe(nt.fill),St[st]="x"===Ot?ve(null,[0,S-1],Ct,$t,St[st]):"y"===Ot?Te(null,[0,E-1],Ct,$t,St[st]):Le(null,[0,N-1],Ct,$t,St[st]),st++)}}),0===D&&V(),l._meshX=u,l._meshY=s,l._meshZ=d,l._meshIntensity=h,l._Xs=C,l._Ys=P,l._Zs=L}(),l}ae.exports={findNearestOnAxis:r,generateIsoMeshes:m,createIsosurfaceTrace:function(l,i){var u=p({gl:l.glplot.gl}),s=new t(l,u,i.uid);return u._trace=s,s.update(i),l.glplot.add(u),s}}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry"),b=v("./attributes"),y=v("../../components/colorscale/defaults");function e(r,t,o,n,m){var l=m("isomin"),i=m("isomax");null!=i&&null!=l&&l>i&&(t.isomin=null,t.isomax=null);var f=m("x"),u=m("y"),s=m("z"),d=m("value");f&&f.length&&u&&u.length&&s&&s.length&&d&&d.length?(g.getComponentMethod("calendars","handleTraceDefaults")(r,t,["x","y","z"],n),m("valuehoverformat"),["x","y","z"].forEach(function(h){m(h+"hoverformat");var a="caps."+h;m(a+".show")&&m(a+".fill");var _="slices."+h;m(_+".show")&&(m(_+".fill"),m(_+".locations"))}),m("spaceframe.show")&&m("spaceframe.fill"),m("surface.show")&&(m("surface.count"),m("surface.fill"),m("surface.pattern")),m("contour.show")&&(m("contour.color"),m("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(h){m(h)}),y(r,t,n,m,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}ae.exports={supplyDefaults:function(r,t,o,n){e(r,t,0,n,function(m,l){return p.coerce(r,t,b,m,l)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../surface/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat;ae.exports=r({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},p("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:r({},y.contours.x.show,{}),color:y.contours.x.color,width:y.contours.x.width,editType:"calc"},lightposition:{x:r({},y.lightposition.x,{dflt:1e5}),y:r({},y.lightposition.y,{dflt:1e5}),z:r({},y.lightposition.z,{dflt:0}),editType:"calc"},lighting:r({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},y.lighting),hoverinfo:r({},e.hoverinfo,{editType:"calc"}),showlegend:r({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/calc");ae.exports=function(g,b){b.intensity&&p(g,b,{vals:b.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_mesh3d,g=v("../../../stackgl_modules").delaunay_triangulate,b=v("../../../stackgl_modules").alpha_shape,y=v("../../../stackgl_modules").convex_hull,e=v("../../lib/gl_format_color").parseColorScale,r=v("../../lib/str2rgbarray"),t=v("../../components/colorscale").extractOpts,o=v("../../plots/gl3d/zip3");function n(s,d,h){this.scene=s,this.uid=h,this.mesh=d,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var m=n.prototype;function l(s){for(var d=[],h=s.length,a=0;a<h;a++)d[a]=r(s[a]);return d}function i(s,d,h,a){for(var _=[],c=d.length,T=0;T<c;T++)_[T]=s.d2l(d[T],0,a)*h;return _}function f(s){for(var d=[],h=s.length,a=0;a<h;a++)d[a]=Math.round(s[a]);return d}function u(s,d){for(var h=s.length,a=0;a<h;a++)if(s[a]<=-.5||s[a]>=d-.5)return!1;return!0}m.handlePick=function(s){if(s.object===this.mesh){var d=s.index=s.data.index;s.traceCoordinate=s.data._cellCenter?s.data.dataCoordinate:[this.data.x[d],this.data.y[d],this.data.z[d]];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&void 0!==h[d]?s.textLabel=h[d]:h&&(s.textLabel=h),!0}},m.update=function(s){var d=this.scene,h=d.fullSceneLayout;this.data=s;var a,_=s.x.length,c=o(i(h.xaxis,s.x,d.dataScale[0],s.xcalendar),i(h.yaxis,s.y,d.dataScale[1],s.ycalendar),i(h.zaxis,s.z,d.dataScale[2],s.zcalendar));if(s.i&&s.j&&s.k){if(s.i.length!==s.j.length||s.j.length!==s.k.length||!u(s.i,_)||!u(s.j,_)||!u(s.k,_))return;a=o(f(s.i),f(s.j),f(s.k))}else a=0===s.alphahull?y(c):s.alphahull>0?b(s.alphahull,c):function(M,D){for(var C=["x","y","z"].indexOf(M),P=[],L=D.length,S=0;S<L;S++)P[S]=[D[S][(C+1)%3],D[S][(C+2)%3]];return g(P)}(s.delaunayaxis,c);var T={positions:c,cells:a,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:r(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading};if(s.intensity){var x=t(s);this.color="#fff";var w=s.intensitymode;T[w+"Intensity"]=s.intensity,T[w+"IntensityBounds"]=[x.min,x.max],T.colormap=e(s)}else s.vertexcolor?(this.color=s.vertexcolor[0],T.vertexColors=l(s.vertexcolor)):s.facecolor?(this.color=s.facecolor[0],T.cellColors=l(s.facecolor)):(this.color=s.color,T.meshColor=r(s.color));this.mesh.update(T)},m.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(s,d){var a=p({gl:s.glplot.gl}),_=new n(s,a,d.uid);return a._trace=_,_.update(d),s.glplot.add(a),_}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../../components/colorscale/defaults"),y=v("./attributes");ae.exports=function(e,r,t,o){function n(l,i){return g.coerce(e,r,y,l,i)}function m(l){var i=l.map(function(f){var u=n(f);return u&&g.isArrayOrTypedArray(u)?u:null});return i.every(function(f){return f&&f.length===i[0].length})&&i}m(["x","y","z"])?(m(["i","j","k"]),(!r.i||r.j&&r.k)&&(!r.j||r.k&&r.i)&&(!r.k||r.i&&r.j)?(p.getComponentMethod("calendars","handleTraceDefaults")(e,r,["x","y","z"],o),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(l){n(l)}),n("contour.show")&&(n("contour.color"),n("contour.width")),"intensity"in e?(n("intensity"),n("intensitymode"),b(e,r,o,n,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in e?n("facecolor"):"vertexcolor"in e?n("vertexcolor"):n("color",t)),n("text"),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),r._length=null):r.visible=!1):r.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(v,ae,ie){"use strict";var p=v("../../lib").extendFlat,g=v("../scatter/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../components/drawing/attributes").dash,e=v("../../components/fx/attributes"),r=v("../../constants/delta.js"),t=r.INCREASING.COLOR,o=r.DECREASING.COLOR,n=g.line;function m(l){return{line:{color:p({},n.color,{dflt:l}),width:n.width,dash:y,editType:"style"},editType:"style"}}ae.exports={xperiod:g.xperiod,xperiod0:g.xperiod0,xperiodalignment:g.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:p({},n.width,{}),dash:p({},y,{}),editType:"style"},increasing:m(t),decreasing:m(o),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:p({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=p._,b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM;function r(o,n,m,l){return{o,h:n,l:m,c:l}}function t(o,n,m,l,i,f){for(var u=i.makeCalcdata(n,"open"),s=i.makeCalcdata(n,"high"),d=i.makeCalcdata(n,"low"),h=i.makeCalcdata(n,"close"),a=Array.isArray(n.text),_=Array.isArray(n.hovertext),c=!0,T=null,x=!!n.xperiodalignment,w=[],M=0;M<l.length;M++){var D=l[M],C=u[M],P=s[M],L=d[M],S=h[M];if(D!==e&&C!==e&&P!==e&&L!==e&&S!==e){S===C?null!==T&&S!==T&&(c=S>T):c=S>C,T=S;var E=f(C,P,L,S);E.pos=D,E.yc=(C+S)/2,E.i=M,E.dir=c?"increasing":"decreasing",E.x=E.pos,E.y=[L,P],x&&(E.orig_p=m[M]),a&&(E.tx=n.text[M]),_&&(E.htx=n.hovertext[M]),w.push(E)}else w.push({pos:D,empty:!0})}return n._extremes[i._id]=b.findExtremes(i,p.concat(d,s),{padded:!0}),w.length&&(w[0].t={labels:{open:g(o,"open:")+" ",high:g(o,"high:")+" ",low:g(o,"low:")+" ",close:g(o,"close:")+" "}}),w}ae.exports={calc:function(o,n){var m=b.getFromId(o,n.xaxis),l=b.getFromId(o,n.yaxis),i=function(h,a,_){var c=_._minDiff;if(!c){var T,x=h._fullData,w=[];for(c=1/0,T=0;T<x.length;T++){var M=x[T];if("ohlc"===M.type&&!0===M.visible&&M.xaxis===a._id){w.push(M);var D=a.makeCalcdata(M,"x");M._origX=D;var C=y(_,a,"x",D).vals;M._xcalc=C;var P=p.distinctVals(C).minDiff;P&&isFinite(P)&&(c=Math.min(c,P))}}for(c===1/0&&(c=1),T=0;T<w.length;T++)w[T]._minDiff=c}return c*_.tickwidth}(o,m,n),f=n._minDiff;n._minDiff=null;var u=n._origX;n._origX=null;var s=n._xcalc;n._xcalc=null;var d=t(o,n,u,s,l,r);return n._extremes[m._id]=b.findExtremes(m,s,{vpad:f/2}),d.length?(p.extendFlat(d[0].t,{wHover:f/2,tickLen:i}),d):[{t:{empty:!0}}]},calcCommon:t}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./ohlc_defaults"),b=v("../scatter/period_defaults"),y=v("./attributes");function e(r,t,o,n){o(n+".line.color"),o(n+".line.width",t.line.width),o(n+".line.dash",t.line.dash)}ae.exports=function(r,t,o,n){function m(l,i){return p.coerce(r,t,y,l,i)}g(r,t,m,n)?(b(r,t,n,m,{x:!0}),m("xhoverformat"),m("yhoverformat"),m("line.width"),m("line.dash"),e(0,t,m,"increasing"),e(0,t,m,"decreasing"),m("text"),m("hovertext"),m("tickwidth"),n._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../lib"),b=v("../../components/fx"),y=v("../../components/color"),e=v("../../lib").fillText,r=v("../../constants/delta.js"),t={increasing:r.INCREASING.SYMBOL,decreasing:r.DECREASING.SYMBOL};function o(l,i,f,u){var s,d,h=l.cd,a=l.xa,_=h[0].trace,c=h[0].t,T=_.type,x="ohlc"===T?"l":"min",w="ohlc"===T?"h":"max",M=c.bPos||0,D=c.bdPos||c.tickLen,C=c.wHover,P=Math.min(1,D/Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0])));function L(K){var ne=K.pos+M-i;return b.inbox(ne-C,ne+C,s)}function S(K){var ne=K[x],X=K[w];return ne===X||b.inbox(ne-f,X-f,s)}function E(K){return(L(K)+S(K))/2}s=l.maxHoverDistance-P,d=l.maxSpikeDistance-P;var N=b.getDistanceFunction(u,L,S,E);if(b.getClosest(h,N,l),!1===l.index)return null;var z=h[l.index];if(z.empty)return null;var q=_[z.dir],G=q.line.color;return l.color=y.opacity(G)&&q.line.width?G:q.fillcolor,l.x0=a.c2p(z.pos+M-D,!0),l.x1=a.c2p(z.pos+M+D,!0),l.xLabelVal=void 0!==z.orig_p?z.orig_p:z.pos,l.spikeDistance=E(z)*d/s,l.xSpike=a.c2p(z.pos,!0),l}function n(l,i,f,u){var s=l.cd,d=l.ya,h=s[0].trace,a=s[0].t,_=[],c=o(l,i,f,u);if(!c)return[];var T=s[c.index].hi||h.hoverinfo,x=T.split("+");if("all"!==T&&-1===x.indexOf("y"))return[];for(var w=["high","open","close","low"],M={},D=0;D<w.length;D++){var C,P=w[D],L=h[P][c.index],S=d.c2p(L,!0);L in M?(C=M[L]).yLabel+="<br>"+a.labels[P]+p.hoverLabelText(d,L,h.yhoverformat):((C=g.extendFlat({},c)).y0=C.y1=S,C.yLabelVal=L,C.yLabel=a.labels[P]+p.hoverLabelText(d,L,h.yhoverformat),C.name="",_.push(C),M[L]=C)}return _}function m(l,i,f,u){var s=l.cd,d=l.ya,h=s[0].trace,a=s[0].t,_=o(l,i,f,u);if(!_)return[];var c=s[_.index],T=_.index=c.i,x=c.dir;function w(E){return a.labels[E]+p.hoverLabelText(d,h[E][T],h.yhoverformat)}var M=c.hi||h.hoverinfo,D=M.split("+"),C="all"===M,P=C||-1!==D.indexOf("y"),L=C||-1!==D.indexOf("text"),S=P?[w("open"),w("high"),w("low"),w("close")+"  "+t[x]]:[];return L&&e(c,h,S),_.extraText=S.join("<br>"),_.y0=_.y1=d.c2p(c.yc,!0),[_]}ae.exports={hoverPoints:function(l,i,f,u){return l.cd[0].trace.hoverlabel.split?n(l,i,f,u):m(l,i,f,u)},hoverSplit:n,hoverOnPoints:m}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"ohlc",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc").calc,plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib");ae.exports=function(b,y,e,r){var t=e("x"),o=e("open"),n=e("high"),m=e("low"),l=e("close");if(e("hoverlabel.split"),p.getComponentMethod("calendars","handleTraceDefaults")(b,y,["x"],r),o&&n&&m&&l){var i=Math.min(o.length,n.length,m.length,l.length);return t&&(i=Math.min(i,g.minRowLength(t))),y._length=i,i}}},{"../../lib":515,"../../registry":647}],887:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib");ae.exports=function(b,y,e,r){var t=y.yaxis,o=y.xaxis,n=!!o.rangebreaks;g.makeTraceGroups(r,e,"trace ohlc").each(function(m){var l=p.select(this),i=m[0],f=i.t;if(!0!==i.trace.visible||f.empty)l.remove();else{var u=f.tickLen,s=l.selectAll("path").data(g.identity);s.enter().append("path"),s.exit().remove(),s.attr("d",function(d){if(d.empty)return"M0,0Z";var h=o.c2p(d.pos-u,!0),a=o.c2p(d.pos+u,!0),_=n?(h+a)/2:o.c2p(d.pos,!0);return"M"+h+","+t.c2p(d.o,!0)+"H"+_+"M"+_+","+t.c2p(d.h,!0)+"V"+t.c2p(d.l,!0)+"M"+a+","+t.c2p(d.c,!0)+"H"+_})}})}},{"../../lib":515,"@plotly/d3":58}],888:[function(v,ae,ie){"use strict";ae.exports=function(p,g){var b,y=p.cd,e=p.xaxis,r=p.yaxis,t=[],o=y[0].t.bPos||0;if(!1===g)for(b=0;b<y.length;b++)y[b].selected=0;else for(b=0;b<y.length;b++){var n=y[b];g.contains([e.c2p(n.pos+o),r.c2p(n.yc)],null,n.i,p)?(t.push({pointNumber:n.i,x:e.c2d(n.pos),y:r.c2d(n.yc)}),n.selected=1):n.selected=0}return t}},{}],889:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../../components/color");ae.exports=function(y,e,r){var t=r||p.select(y).selectAll("g.ohlclayer").selectAll("g.trace");t.style("opacity",function(o){return o[0].trace.opacity}),t.each(function(o){var n=o[0].trace;p.select(this).selectAll("path").each(function(m){if(!m.empty){var l=n[m.dir].line;p.select(this).style("fill","none").call(b.stroke,l.color).call(g.dashLine,l.dash,l.width).style("opacity",n.selectedpoints&&!m.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(v,ae,ie){"use strict";var p=v("../../lib/extend").extendFlat,g=v("../../plots/attributes"),b=v("../../plots/font_attributes"),y=v("../../components/colorscale/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/domain").attributes,t=p({editType:"calc"},y("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ae.exports={domain:r({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:p({},g.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:t,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(v,ae,ie){"use strict";var p=v("../../plots/get_data").getModuleCalcData,g=v("./plot");ie.name="parcats",ie.plot=function(b,y,e,r){var t=p(b.calcdata,"parcats");t.length&&g(b,t[0],e,r)},ie.clean=function(b,y,e,r){var t=r._has&&r._has("parcats"),o=y._has&&y._has("parcats");t&&!o&&r._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(v,ae,ie){"use strict";var p=v("../../lib/gup").wrap,g=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/calc"),y=v("../../lib/filter_unique.js"),e=v("../../components/drawing"),r=v("../../lib"),t=v("fast-isnumeric");function o(l,i,f){l.valueInds.push(i),l.count+=f}function n(l,i,f){return{categoryInds:l,color:i,rawColor:f,valueInds:[],count:0}}function m(l,i,f){l.valueInds.push(i),l.count+=f}ae.exports=function(l,i){var f=r.filterVisible(i.dimensions);if(0===f.length)return[];var u,s,d,h=f.map(function(J){var se;if("trace"===J.categoryorder)se=null;else if("array"===J.categoryorder)se=J.categoryarray;else{se=y(J.values);for(var V=!0,j=0;j<se.length;j++)if(!t(se[j])){V=!1;break}se.sort(V?r.sorterAsc:void 0),"category descending"===J.categoryorder&&(se=se.reverse())}return function(H,oe){oe=null==oe?[]:oe.map(function(be){return be});var U={},te={},ee=[];oe.forEach(function(be,he){U[be]=0,te[be]=he});for(var le=0;le<H.length;le++){var ce,pe=H[le];void 0===U[pe]?(U[pe]=1,ce=oe.push(pe)-1,te[pe]=ce):(U[pe]++,ce=te[pe]),ee.push(ce)}var de=oe.map(function(be){return U[be]});return{uniqueValues:oe,uniqueCounts:de,inds:ee}}(J.values,se)});u=r.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(J){var se;if(function(V){for(var j=new Array(V.length),H=0;H<V.length;H++){if(V[H]<0||V[H]>=V.length||void 0!==j[V[H]])return!1;j[V[H]]=!0}return!0}(J.map(function(V){return V.displayindex})))for(se=0;se<J.length;se++)J[se]._displayindex=J[se].displayindex;else for(se=0;se<J.length;se++)J[se]._displayindex=se}(f),f.forEach(function(J,se){!function(V,j){V._categoryarray=j.uniqueValues,V._ticktext=null==V.ticktext?[]:V.ticktext.slice();for(var H=V._ticktext.length;H<j.uniqueValues.length;H++)V._ticktext.push(j.uniqueValues[H])}(J,h[se])});var a,_=i.line;_?(g(i,"line")&&b(l,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),a=e.tryColorscale(_)):a=r.identity;var c,T,x,w,M,D=f[0].values.length,C={},P=h.map(function(J){return J.inds});for(d=0,c=0;c<D;c++){var L=[];for(T=0;T<P.length;T++)L.push(P[T][c]);d+=s=u[c%u.length];var S=(x=c,w=void 0,M=void 0,r.isArrayOrTypedArray(_.color)?M=w=_.color[x%_.color.length]:w=_.color,{color:a(w),rawColor:M}),E=L+"-"+S.rawColor;void 0===C[E]&&(C[E]=n(L,S.color,S.rawColor)),m(C[E],c,s)}var N,J,se,V,j,z=f.map(function(J,se){return{dimensionInd:se,containerInd:J._index,displayInd:J._displayindex,dimensionLabel:J.label,count:d,categories:[],dragX:null}});for(c=0;c<D;c++)for(s=u[c%u.length],T=0;T<z.length;T++){var q=z[T].containerInd,G=h[T].inds[c],K=z[T].categories;void 0===K[G]&&(K[G]={dimensionInd:T,categoryInd:N=G,categoryValue:i.dimensions[q]._categoryarray[G],displayInd:N,categoryLabel:i.dimensions[q]._ticktext[G],valueInds:[],count:0,dragY:null}),o(K[G],c,s)}return p((se=C,V=d,j=(J=z).map(function(H){return H.categories.length}).reduce(function(H,oe){return Math.max(H,oe)}),{dimensions:J,paths:se,trace:void 0,maxCats:j,count:V}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),r=v("./attributes"),t=v("../parcoords/merge_length");function o(n,m){function l(a,_){return p.coerce(n,m,r.dimensions,a,_)}var i=l("values"),f=l("visible");if(i&&i.length||(f=m.visible=!1),f){l("label"),l("displayindex",m._index);var u,s=n.categoryarray,d=Array.isArray(s)&&s.length>0;d&&(u="array");var h=l("categoryorder",u);"array"===h?(l("categoryarray"),l("ticktext")):(delete n.categoryarray,delete n.ticktext),d||"array"!==h||(m.categoryorder="trace")}}ae.exports=function(n,m,l,i){function f(a,_){return p.coerce(n,m,r,a,_)}var u=e(n,m,{name:"dimensions",handleItemDefaults:o}),s=function(a,_,c,T,x){x("line.shape"),x("line.hovertemplate");var w=x("line.color",T.colorway[0]);if(g(a,"line")&&p.isArrayOrTypedArray(w)){if(w.length)return x("line.colorscale"),b(a,_,T,x,{prefix:"line.",cLetter:"c"}),w.length;_.line.color=c}return 1/0}(n,m,l,i,f);y(m,i,f),Array.isArray(u)&&u.length||(m.visible=!1),t(m,u,"values",s),f("hoveron"),f("hovertemplate"),f("arrangement"),f("bundlecolors"),f("sortpaths"),f("counts");var d={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};p.coerceFont(f,"labelfont",d);var h={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};p.coerceFont(f,"tickfont",h)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-interpolate").interpolateNumber,b=v("../../plot_api/plot_api"),y=v("../../components/fx"),e=v("../../lib"),r=e.strTranslate,t=v("../../components/drawing"),o=v("tinycolor2"),n=v("../../lib/svg_text_utils");function m(V,j,H,oe){var U=V.map(K.bind(0,j,H)),te=oe.selectAll("g.parcatslayer").data([null]);te.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ee=te.selectAll("g.trace.parcats").data(U,l),le=ee.enter().append("g").attr("class","trace parcats");ee.attr("transform",function(ke){return r(ke.x,ke.y)}),le.append("g").attr("class","paths");var ce=ee.select("g.paths").selectAll("path.path").data(function(ke){return ke.paths},l);ce.attr("fill",function(ke){return ke.model.color});var pe=ce.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ke){return ke.model.color}).attr("fill-opacity",0);_(pe),ce.attr("d",function(ke){return ke.svgD}),pe.empty()||ce.sort(f),ce.exit().remove(),ce.on("mouseover",u).on("mouseout",s).on("click",a),le.append("g").attr("class","dimensions");var de=ee.select("g.dimensions").selectAll("g.dimension").data(function(ke){return ke.dimensions},l);de.enter().append("g").attr("class","dimension"),de.attr("transform",function(ke){return r(ke.x,0)}),de.exit().remove();var be=de.selectAll("g.category").data(function(ke){return ke.categories},l),he=be.enter().append("g").attr("class","category");be.attr("transform",function(ke){return r(0,ke.y)}),he.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}),T(he);var xe=be.selectAll("rect.bandrect").data(function(ke){return ke.bands},l);xe.each(function(){e.raiseToTop(this)}),xe.attr("fill",function(ke){return ke.color});var De=xe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ke){return ke.color}).attr("fill-opacity",0);xe.attr("fill",function(ke){return ke.color}).attr("width",function(ke){return ke.width}).attr("height",function(ke){return ke.height}).attr("y",function(ke){return ke.y}).attr("cursor",function(ke){return"fixed"===ke.parcatsViewModel.arrangement?"default":"perpendicular"===ke.parcatsViewModel.arrangement?"ns-resize":"move"}),x(De),xe.exit().remove(),he.append("text").attr("class","catlabel").attr("pointer-events","none");var Se=j._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(ke){return i(ke)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(Se)).style("fill","rgb(0, 0, 0)").attr("x",function(ke){return i(ke)?ke.width+5:-5}).attr("y",function(ke){return ke.height/2}).text(function(ke){return ke.model.categoryLabel}).each(function(ke){t.font(p.select(this),ke.parcatsViewModel.categorylabelfont),n.convertToTspans(p.select(this),j)}),he.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ke){return"fixed"===ke.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ke){return ke.width/2}).attr("y",-5).text(function(ke,Fe){return 0===Fe?ke.parcatsViewModel.model.dimensions[ke.model.dimensionInd].dimensionLabel:null}).each(function(ke){t.font(p.select(this),ke.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",P).on("mouseout",L),be.exit().remove(),de.call(p.behavior.drag().origin(function(ke){return{x:ke.x,y:0}}).on("dragstart",S).on("drag",E).on("dragend",N)),ee.each(function(ke){ke.traceSelection=p.select(this),ke.pathSelection=p.select(this).selectAll("g.paths").selectAll("path.path"),ke.dimensionSelection=p.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ee.exit().remove()}function l(V){return V.key}function i(V){return V.model.dimensionInd===V.parcatsViewModel.dimensions[V.parcatsViewModel.dimensions.length-1].model.dimensionInd}function f(V,j){return V.model.rawColor>j.model.rawColor?1:V.model.rawColor<j.model.rawColor?-1:0}function u(V){if(!V.parcatsViewModel.dragDimension&&-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),c(p.select(this));var j=d(V),H=h(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:j,event:p.event,constraints:H}),-1===V.parcatsViewModel.hoverinfoItems.indexOf("none")){var oe,U,te,ee=p.mouse(this)[0],le=V.parcatsViewModel.graphDiv,ce=V.parcatsViewModel.trace,pe=le._fullLayout,de=pe._paperdiv.node().getBoundingClientRect(),be=V.parcatsViewModel.graphDiv.getBoundingClientRect();for(te=0;te<V.leftXs.length-1;te++)if(V.leftXs[te]+V.dimWidths[te]-2<=ee&&ee<=V.leftXs[te+1]+2){var he=V.parcatsViewModel.dimensions[te];oe=(he.x+he.width+V.parcatsViewModel.dimensions[te+1].x)/2,U=(V.topYs[te]+V.topYs[te+1]+V.height)/2;break}var De=V.parcatsViewModel.x+oe,Se=V.parcatsViewModel.y+U,ke=o.mostReadable(V.model.color,["black","white"]),Fe=V.model.count,ve=Fe/V.parcatsViewModel.model.count,Te={countLabel:Fe,probabilityLabel:ve.toFixed(3)},Le=[];-1!==V.parcatsViewModel.hoverinfoItems.indexOf("count")&&Le.push(["Count:",Te.countLabel].join(" ")),-1!==V.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Le.push(["P:",Te.probabilityLabel].join(" "));var Oe=Le.join("<br>"),Ne=p.mouse(le)[0];y.loneHover({trace:ce,x:De-de.left+be.left,y:Se-de.top+be.top,text:Oe,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ke,idealAlign:Ne<De?"right":"left",hovertemplate:(ce.line||{}).hovertemplate,hovertemplateLabels:Te,eventData:[{data:ce._input,fullData:ce,count:Fe,probability:ve}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:le})}}}function s(V){if(!V.parcatsViewModel.dragDimension&&(_(p.select(this)),y.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(f),-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var j=d(V),H=h(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:j,event:p.event,constraints:H})}}function d(V){for(var j=[],H=z(V.parcatsViewModel),oe=0;oe<V.model.valueInds.length;oe++)j.push({curveNumber:H,pointNumber:V.model.valueInds[oe]});return j}function h(V){for(var j={},H=V.parcatsViewModel.model.dimensions,oe=0;oe<H.length;oe++){var U=H[oe];j[U.containerInd]=U.categories[V.model.categoryInds[oe]].categoryValue}return void 0!==V.model.rawColor&&(j.color=V.model.rawColor),j}function a(V){if(-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){var j=d(V),H=h(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:j,event:p.event,constraints:H})}}function _(V){V.attr("fill",function(j){return j.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(V){V.attr("fill-opacity",.8).attr("stroke",function(j){return o.mostReadable(j.model.color,["black","white"])}).attr("stroke-width",.3)}function T(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function x(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(V){var H=V.categoryViewModel.model.dimensionInd,oe=V.categoryViewModel.model.categoryInd;return V.parcatsViewModel.pathSelection.filter(function(U){return U.model.categoryInds[H]===oe&&U.model.color===V.color})}function M(V,j,H){var oe=p.select(V).datum(),U=oe.categoryViewModel.model,te=oe.parcatsViewModel.graphDiv,ee=p.select(V.parentNode).selectAll("rect.bandrect"),le=[];ee.each(function(pe){w(pe).each(function(de){Array.prototype.push.apply(le,d(de))})});var ce={};ce[U.dimensionInd]=U.categoryValue,te.emit(j,{points:le,event:H,constraints:ce})}function D(V,j,H){var oe=p.select(V).datum(),U=oe.categoryViewModel.model,te=oe.parcatsViewModel.graphDiv,ee=w(oe),le=[];ee.each(function(pe){Array.prototype.push.apply(le,d(pe))});var ce={};ce[U.dimensionInd]=U.categoryValue,void 0!==oe.rawColor&&(ce.color=oe.rawColor),te.emit(j,{points:le,event:H,constraints:ce})}function C(V,j,H){V._fullLayout._calcInverseTransform(V);var oe,U,te=V._fullLayout._invScaleX,ee=V._fullLayout._invScaleY,le=p.select(H.parentNode).select("rect.catrect"),ce=le.node().getBoundingClientRect(),pe=le.datum(),de=pe.parcatsViewModel,he=de.trace,xe=ce.top+ce.height/2;de.dimensions.length>1&&de.model.dimensions[pe.model.dimensionInd].displayInd===de.dimensions.length-1?(oe=ce.left,U="left"):(oe=ce.left+ce.width,U="right");var De=pe.model.count,Se=pe.model.categoryLabel,ke=De/pe.parcatsViewModel.model.count,Fe={countLabel:De,categoryLabel:Se,probabilityLabel:ke.toFixed(3)},ve=[];-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("count")&&ve.push(["Count:",Fe.countLabel].join(" ")),-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ve.push(["P("+Fe.categoryLabel+"):",Fe.probabilityLabel].join(" "));var Te=ve.join("<br>");return{trace:he,x:te*(oe-j.left),y:ee*(xe-j.top),text:Te,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:U,hovertemplate:he.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:he._input,fullData:he,count:De,category:Se,probability:ke}]}}function P(V){if(!V.parcatsViewModel.dragDimension&&-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(p.mouse(this)[1]<-1)return;var j,H=V.parcatsViewModel.graphDiv,oe=H._fullLayout,U=oe._paperdiv.node().getBoundingClientRect(),te=V.parcatsViewModel.hoveron;"color"===te?(c(ce=w(le=p.select(this).datum())),ce.each(function(){e.raiseToTop(this)}),p.select(this.parentNode).selectAll("rect.bandrect").filter(function(pe){return pe.color===le.color}).each(function(){e.raiseToTop(this),p.select(this).attr("stroke","black").attr("stroke-width",1.5)}),D(this,"plotly_hover",p.event)):(function(ee){p.select(ee.parentNode).selectAll("rect.bandrect").each(function(le){var ce=w(le);c(ce),ce.each(function(){e.raiseToTop(this)})}),p.select(ee.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),M(this,"plotly_hover",p.event)),-1===V.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===te?j=C(H,U,this):"color"===te?j=function(ee,le,ce){ee._fullLayout._calcInverseTransform(ee);var pe,de,be=ee._fullLayout._invScaleX,he=ee._fullLayout._invScaleY,xe=ce.getBoundingClientRect(),De=p.select(ce).datum(),Se=De.categoryViewModel,ke=Se.parcatsViewModel,ve=ke.trace,Te=xe.y+xe.height/2;ke.dimensions.length>1&&ke.model.dimensions[Se.model.dimensionInd].displayInd===ke.dimensions.length-1?(pe=xe.left,de="left"):(pe=xe.left+xe.width,de="right");var Le=Se.model.categoryLabel,Oe=De.parcatsViewModel.model.count,Ne=0;De.categoryViewModel.bands.forEach(function(vt){vt.color===De.color&&(Ne+=vt.count)});var Be=Se.model.count,He=0;ke.pathSelection.each(function(vt){vt.model.color===De.color&&(He+=vt.model.count)});var Ve=Ne/Oe,it=Ne/He,ze=Ne/Be,je={countLabel:Oe,categoryLabel:Le,probabilityLabel:Ve.toFixed(3)},qe=[];-1!==Se.parcatsViewModel.hoverinfoItems.indexOf("count")&&qe.push(["Count:",je.countLabel].join(" ")),-1!==Se.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(qe.push("P(color \u2229 "+Le+"): "+je.probabilityLabel),qe.push("P("+Le+" | color): "+it.toFixed(3)),qe.push("P(color | "+Le+"): "+ze.toFixed(3)));var Ye=qe.join("<br>"),ct=o.mostReadable(De.color,["black","white"]);return{trace:ve,x:be*(pe-le.left),y:he*(Te-le.top),text:Ye,color:De.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:de,hovertemplate:ve.hovertemplate,hovertemplateLabels:je,eventData:[{data:ve._input,fullData:ve,category:Le,count:Oe,probability:Ve,categorycount:Be,colorcount:He,bandcolorcount:Ne}]}}(H,U,this):"dimension"===te&&(j=function(ee,le,ce){var pe=[];return p.select(ce.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pe.push(C(ee,le,this))}),pe}(H,U,this)),j&&y.loneHover(j,{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:H}))}var le,ce}function L(V){var j=V.parcatsViewModel;!j.dragDimension&&(_(j.pathSelection),T(j.dimensionSelection.selectAll("g.category")),x(j.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),y.loneUnhover(j.graphDiv._fullLayout._hoverlayer.node()),j.pathSelection.sort(f),-1===j.hoverinfoItems.indexOf("skip"))&&("color"===V.parcatsViewModel.hoveron?D(this,"plotly_unhover",p.event):M(this,"plotly_unhover",p.event))}function S(V){"fixed"!==V.parcatsViewModel.arrangement&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(j){return j.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,p.select(this).selectAll("g.category").select("rect.catrect").each(function(j){var H=p.mouse(this)[0],oe=p.mouse(this)[1];-2<=H&&H<=j.width+2&&-2<=oe&&oe<=j.height+2&&(V.dragCategoryDisplayInd=j.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(U){return U.displayInd}),j.model.dragY=j.y,e.raiseToTop(this.parentNode),p.select(this.parentNode).selectAll("rect.bandrect").each(function(U){U.y<oe&&oe<=U.y+U.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,y.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(V){if("fixed"!==V.parcatsViewModel.arrangement&&(V.dragHasMoved=!0,null!==V.dragDimensionDisplayInd)){var j=V.dragDimensionDisplayInd,H=j-1,oe=j+1,U=V.parcatsViewModel.dimensions[j];if(null!==V.dragCategoryDisplayInd){var te=U.categories[V.dragCategoryDisplayInd];te.model.dragY+=p.event.dy;var ee=te.model.dragY,le=te.model.displayInd,ce=U.categories,pe=ce[le-1],de=ce[le+1];void 0!==pe&&ee<pe.y+pe.height/2&&(te.model.displayInd=pe.model.displayInd,pe.model.displayInd=le),void 0!==de&&ee+te.height>de.y+de.height/2&&(te.model.displayInd=de.model.displayInd,de.model.displayInd=le),V.dragCategoryDisplayInd=te.model.displayInd}if(null===V.dragCategoryDisplayInd||"freeform"===V.parcatsViewModel.arrangement){U.model.dragX=p.event.x;var be=V.parcatsViewModel.dimensions[H],he=V.parcatsViewModel.dimensions[oe];void 0!==be&&U.model.dragX<be.x+be.width&&(U.model.displayInd=be.model.displayInd,be.model.displayInd=j),void 0!==he&&U.model.dragX+U.width>he.x&&(U.model.displayInd=he.model.displayInd,he.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=U.model.displayInd}J(V.parcatsViewModel),X(V.parcatsViewModel),G(V.parcatsViewModel),q(V.parcatsViewModel)}}function N(V){if("fixed"!==V.parcatsViewModel.arrangement&&null!==V.dragDimensionDisplayInd){p.select(this).selectAll("text").attr("font-weight","normal");var j={},H=z(V.parcatsViewModel),oe=V.parcatsViewModel.model.dimensions.map(function(de){return de.displayInd}),U=V.initialDragDimensionDisplayInds.some(function(de,be){return de!==oe[be]});U&&oe.forEach(function(de,be){j["dimensions["+V.parcatsViewModel.model.dimensions[be].containerInd+"].displayindex"]=de});var te=!1;if(null!==V.dragCategoryDisplayInd){var ee=V.model.categories.map(function(de){return de.displayInd});if(te=V.initialDragCategoryDisplayInds.some(function(de,be){return de!==ee[be]})){var le=V.model.categories.slice().sort(function(de,be){return de.displayInd-be.displayInd}),ce=le.map(function(de){return de.categoryValue}),pe=le.map(function(de){return de.categoryLabel});j["dimensions["+V.model.containerInd+"].categoryarray"]=[ce],j["dimensions["+V.model.containerInd+"].ticktext"]=[pe],j["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}-1===V.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!V.dragHasMoved&&V.potentialClickBand&&("color"===V.parcatsViewModel.hoveron?D(V.potentialClickBand,"plotly_click",p.event.sourceEvent):M(V.potentialClickBand,"plotly_click",p.event.sourceEvent)),V.model.dragX=null,null!==V.dragCategoryDisplayInd&&(V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd].model.dragY=null,V.dragCategoryDisplayInd=null),V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,J(V.parcatsViewModel),X(V.parcatsViewModel),p.transition().duration(300).ease("cubic-in-out").each(function(){G(V.parcatsViewModel,!0),q(V.parcatsViewModel,!0)}).each("end",function(){(U||te)&&b.restyle(V.parcatsViewModel.graphDiv,j,[H])})}}function z(V){for(var j,H=V.graphDiv._fullData,oe=0;oe<H.length;oe++)if(V.key===H[oe].uid){j=oe;break}return j}function q(V,j){var H;void 0===j&&(j=!1),V.pathSelection.data(function(oe){return oe.paths},l),(H=V.pathSelection,j?H.transition():H).attr("d",function(oe){return oe.svgD})}function G(V,j){function H(ee){return j?ee.transition():ee}void 0===j&&(j=!1),V.dimensionSelection.data(function(ee){return ee.dimensions},l);var oe=V.dimensionSelection.selectAll("g.category").data(function(ee){return ee.categories},l);H(V.dimensionSelection).attr("transform",function(ee){return r(ee.x,0)}),H(oe).attr("transform",function(ee){return r(0,ee.y)}),oe.select(".dimlabel").text(function(ee,le){return 0===le?ee.parcatsViewModel.model.dimensions[ee.model.dimensionInd].dimensionLabel:null}),oe.select(".catlabel").attr("text-anchor",function(ee){return i(ee)?"start":"end"}).attr("x",function(ee){return i(ee)?ee.width+5:-5}).each(function(ee){var le,ce;i(ee)?(le=ee.width+5,ce="start"):(le=-5,ce="end"),p.select(this).selectAll("tspan").attr("x",le).attr("text-anchor",ce)});var U=oe.selectAll("rect.bandrect").data(function(ee){return ee.bands},l),te=U.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ee){return ee.color}).attr("fill-opacity",0);U.attr("fill",function(ee){return ee.color}).attr("width",function(ee){return ee.width}).attr("height",function(ee){return ee.height}).attr("y",function(ee){return ee.y}),x(te),U.each(function(){e.raiseToTop(this)}),U.exit().remove()}function K(V,j,H){var oe,U=H[0],te=j.margin||{l:80,r:80,t:100,b:80},ee=U.trace,le=ee.domain,ce=j.width,pe=j.height,de=Math.floor(ce*(le.x[1]-le.x[0])),be=Math.floor(pe*(le.y[1]-le.y[0])),he=le.x[0]*ce+te.l,xe=j.height-le.y[1]*j.height+te.t,De=ee.line.shape;oe="all"===ee.hoverinfo?["count","probability"]:(ee.hoverinfo||"").split("+");var Se={trace:ee,key:ee.uid,model:U,x:he,y:xe,width:de,height:be,hoveron:ee.hoveron,hoverinfoItems:oe,arrangement:ee.arrangement,bundlecolors:ee.bundlecolors,sortpaths:ee.sortpaths,labelfont:ee.labelfont,categorylabelfont:ee.tickfont,pathShape:De,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return U.dimensions&&(J(Se),X(Se)),Se}function ne(V,j,H,oe,U){var te,ee,le=[],ce=[];for(ee=0;ee<H.length-1;ee++)te=g(H[ee]+V[ee],V[ee+1]),le.push(te(U)),ce.push(te(1-U));var pe="M "+V[0]+","+j[0];for(pe+="l"+H[0]+",0 ",ee=1;ee<H.length;ee++)pe+="C"+le[ee-1]+","+j[ee-1]+" "+ce[ee-1]+","+j[ee]+" "+V[ee]+","+j[ee],pe+="l"+H[ee]+",0 ";for(pe+="l0,"+oe+" ",pe+="l -"+H[H.length-1]+",0 ",ee=H.length-2;ee>=0;ee--)pe+="C"+ce[ee]+","+(j[ee+1]+oe)+" "+le[ee]+","+(j[ee]+oe)+" "+(V[ee]+H[ee])+","+(j[ee]+oe),pe+="l-"+H[ee]+",0 ";return pe+"Z"}function X(V){var j=V.dimensions,H=V.model,oe=j.map(function(qe){return qe.categories.map(function(Ye){return Ye.y})}),U=V.model.dimensions.map(function(qe){return qe.categories.map(function(Ye){return Ye.displayInd})}),te=V.model.dimensions.map(function(qe){return qe.displayInd}),ee=V.dimensions.map(function(qe){return qe.model.dimensionInd}),le=j.map(function(qe){return qe.x}),ce=j.map(function(qe){return qe.width}),pe=[];for(var de in H.paths)H.paths.hasOwnProperty(de)&&pe.push(H.paths[de]);function be(qe){var Ye=qe.categoryInds.map(function(ct,vt){return U[vt][ct]});return ee.map(function(ct){return Ye[ct]})}pe.sort(function(qe,Ye){var ct=be(qe),vt=be(Ye);return"backward"===V.sortpaths&&(ct.reverse(),vt.reverse()),ct.push(qe.valueInds[0]),vt.push(Ye.valueInds[0]),V.bundlecolors&&(ct.unshift(qe.rawColor),vt.unshift(Ye.rawColor)),ct<vt?-1:ct>vt?1:0});for(var he=new Array(pe.length),xe=j[0].model.count,De=j[0].categories.map(function(qe){return qe.height}).reduce(function(qe,Ye){return qe+Ye}),Se=0;Se<pe.length;Se++){var ke,Fe=pe[Se];ke=xe>0?De*(Fe.count/xe):0;for(var ve,Te=new Array(oe.length),Le=0;Le<Fe.categoryInds.length;Le++){var Ne=U[Le][Fe.categoryInds[Le]],Be=te[Le];Te[Be]=oe[Be][Ne],oe[Be][Ne]+=ke;var He=V.dimensions[Be].categories[Ne],Ve=He.bands.length,it=He.bands[Ve-1];if(void 0===it||Fe.rawColor!==it.rawColor){var ze=void 0===it?0:it.y+it.height;He.bands.push({key:ze,color:Fe.color,rawColor:Fe.rawColor,height:ke,width:He.width,count:Fe.count,y:ze,categoryViewModel:He,parcatsViewModel:V})}else{var je=He.bands[Ve-1];je.height+=ke,je.count+=Fe.count}}ve=ne(le,Te,ce,ke,"hspline"===V.pathShape?.5:0),he[Se]={key:Fe.valueInds[0],model:Fe,height:ke,leftXs:le,topYs:Te,dimWidths:ce,svgD:ve,parcatsViewModel:V}}V.paths=he}function J(V){var j=V.model.dimensions.map(function(ee){return{displayInd:ee.displayInd,dimensionInd:ee.dimensionInd}});j.sort(function(ee,le){return ee.displayInd-le.displayInd});var H=[];for(var oe in j)H.push(se(V,V.model.dimensions[j[oe].dimensionInd]));V.dimensions=H}function se(V,j){var H,oe=V.model.dimensions.length;H=40+(oe>1?(V.width-80-16)/(oe-1):0)*j.displayInd;var te,ee,le,pe,de=[],be=V.model.maxCats,he=j.categories.length,xe=j.count,De=V.height-8*(be-1),Se=8*(be-he)/2,ke=j.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(ke.sort(function(Fe,ve){return Fe.displayInd-ve.displayInd}),pe=0;pe<he;pe++)le={key:(ee=j.categories[ke[pe].categoryInd]).valueInds[0],model:ee,width:16,height:te=xe>0?ee.count/xe*De:0,y:null!==ee.dragY?ee.dragY:Se,bands:[],parcatsViewModel:V},Se=Se+te+8,de.push(le);return{key:j.dimensionInd,x:null!==j.dragX?j.dragX:H,y:0,width:16,model:j,categories:de,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}ae.exports=function(V,j,H,oe){m(H,V,oe,j)}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(v,ae,ie){"use strict";var p=v("./parcats");ae.exports=function(g,b,y,e){var r=g._fullLayout,o=r._size;p(g,r._paper,b,{width:o.w,height:o.h,margin:{t:o.t,r:o.r,b:o.b,l:o.l}},y,e)}},{"./parcats":895}],897:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/layout_attributes"),b=v("../../plots/font_attributes"),y=v("../../plots/domain").attributes,e=v("../../lib/extend").extendFlat,r=v("../../plot_api/plot_template").templatedArray;ae.exports={domain:y({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:r("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},g.tickvals,{editType:"plot"}),ticktext:e({},g.ticktext,{editType:"plot"}),tickformat:e({},g.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},p("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(v,ae,ie){"use strict";var p=v("./constants"),g=v("@plotly/d3"),b=v("../../lib/gup").keyFun,y=v("../../lib/gup").repeat,e=v("../../lib").sorterAsc,r=v("../../lib").strTranslate,t=p.bar.snapRatio;function o(C,P){return C*(1-t)+P*t}var n=p.bar.snapClose;function m(C,P){return C*(1-n)+P*n}function l(C,P,L,S){if(function(se,V){for(var j=0;j<V.length;j++)if(se>=V[j][0]&&se<=V[j][1])return!0;return!1}(L,S))return L;var E=C?-1:1,N=0,z=P.length-1;if(E<0){var q=N;N=z,z=q}for(var G=P[N],K=G,ne=N;E*ne<E*z;ne+=E){var X=ne+E,J=P[X];if(E*L<E*m(G,J))return o(G,K);if(E*L<E*J||X===z)return o(J,G);K=G,G=J}}function i(C){C.attr("x",-p.bar.captureWidth/2).attr("width",p.bar.captureWidth)}function f(C){C.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(C){if(!C.brush.filterSpecified)return"0,"+C.height;for(var P,L,S,E=s(C.brush.filter.getConsolidated(),C.height),N=[0],z=E.length?E[0][0]:null,q=0;q<E.length;q++)L=(P=E[q])[1]-P[0],N.push(z),N.push(L),(S=q+1)<E.length&&(z=E[S][0]-P[1]);return N.push(C.height),N}function s(C,P){return C.map(function(L){return L.map(function(S){return Math.max(0,S*P)}).sort(e)})}function d(){g.select(document.body).style("cursor",null)}function h(C){C.attr("stroke-dasharray",u)}function a(C,P){var L=g.select(C).selectAll(".highlight, .highlight-shadow");h(P?L.transition().duration(p.bar.snapDuration).each("end",P):L)}function _(C,P){var L,S=C.brush,E=NaN,N={};if(S.filterSpecified){var z=C.height,q=S.filter.getConsolidated(),G=s(q,z),K=NaN,ne=NaN,X=NaN;for(L=0;L<=G.length;L++){var J=G[L];if(J&&J[0]<=P&&P<=J[1]){K=L;break}if(ne=L?L-1:NaN,J&&J[0]>P){X=L;break}}if(E=K,isNaN(E)&&(E=isNaN(ne)||isNaN(X)?isNaN(ne)?X:ne:P-G[ne][1]<G[X][0]-P?ne:X),!isNaN(E)){var se=G[E],V=function(U,te){var ee=p.bar.handleHeight;if(!(te>U[1]+ee||te<U[0]-ee))return te>=.9*U[1]+.1*U[0]?"n":te<=.9*U[0]+.1*U[1]?"s":"ns"}(se,P);V&&(N.interval=q[E],N.intervalPix=se,N.region=V)}}if(C.ordinal&&!N.region){var j=C.unitTickvals,H=C.unitToPaddedPx.invert(P);for(L=0;L<j.length;L++){var oe=[.25*j[Math.max(L-1,0)]+.75*j[L],.25*j[Math.min(L+1,j.length-1)]+.75*j[L]];if(H>=oe[0]&&H<=oe[1]){N.clickableOrdinalRange=oe;break}}}return N}function c(C,P){g.event.sourceEvent.stopPropagation();var L=P.height-g.mouse(C)[1]-2*p.verticalPadding,S=P.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.newExtent=S.grabbingBar?[L-S.grabPoint,L+S.barLength-S.grabPoint].map(P.unitToPaddedPx.invert):[S.startExtent,P.unitToPaddedPx.invert(L)].sort(e),P.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(P),a(C.parentNode)}function T(C,P){var L=_(P,P.height-g.mouse(C)[1]-2*p.verticalPadding),S="crosshair";L.clickableOrdinalRange?S="pointer":L.region&&(S=L.region+"-resize"),g.select(document.body).style("cursor",S)}function x(C){C.on("mousemove",function(P){g.event.preventDefault(),P.parent.inBrushDrag||T(this,P)}).on("mouseleave",function(P){P.parent.inBrushDrag||d()}).call(g.behavior.drag().on("dragstart",function(P){!function(L,S){g.event.sourceEvent.stopPropagation();var E=S.height-g.mouse(L)[1]-2*p.verticalPadding,N=S.unitToPaddedPx.invert(E),z=S.brush,q=_(S,E),G=q.interval,K=z.svgBrush;if(K.wasDragged=!1,K.grabbingBar="ns"===q.region,K.grabbingBar){var ne=G.map(S.unitToPaddedPx);K.grabPoint=E-ne[0]-p.verticalPadding,K.barLength=ne[1]-ne[0]}K.clickableOrdinalRange=q.clickableOrdinalRange,K.stayingIntervals=S.multiselect&&z.filterSpecified?z.filter.getConsolidated():[],G&&(K.stayingIntervals=K.stayingIntervals.filter(function(X){return X[0]!==G[0]&&X[1]!==G[1]})),K.startExtent=q.region?G["s"===q.region?1:0]:N,S.parent.inBrushDrag=!0,K.brushStartCallback()}(this,P)}).on("drag",function(P){c(this,P)}).on("dragend",function(P){!function(L,S){var E=S.brush,N=E.filter,z=E.svgBrush;z._dragging||(T(L,S),c(L,S),S.brush.svgBrush.wasDragged=!1),z._dragging=!1,g.event.sourceEvent.stopPropagation();var q=z.grabbingBar;if(z.grabbingBar=!1,z.grabLocation=void 0,S.parent.inBrushDrag=!1,d(),!z.wasDragged)return z.wasDragged=void 0,z.clickableOrdinalRange?E.filterSpecified&&S.multiselect?z.extent.push(z.clickableOrdinalRange):(z.extent=[z.clickableOrdinalRange],E.filterSpecified=!0):q?(z.extent=z.stayingIntervals,0===z.extent.length&&M(E)):M(E),z.brushCallback(S),a(L.parentNode),void z.brushEndCallback(E.filterSpecified?N.getConsolidated():[]);var G=function(){N.set(N.getConsolidated())};if(S.ordinal){var K=S.unitTickvals;K[K.length-1]<K[0]&&K.reverse(),z.newExtent=[l(0,K,z.newExtent[0],z.stayingIntervals),l(1,K,z.newExtent[1],z.stayingIntervals)];var ne=z.newExtent[1]>z.newExtent[0];z.extent=z.stayingIntervals.concat(ne?[z.newExtent]:[]),z.extent.length||M(E),z.brushCallback(S),ne?a(L.parentNode,G):(G(),a(L.parentNode))}else G();z.brushEndCallback(E.filterSpecified?N.getConsolidated():[])}(this,P)}))}function w(C,P){return C[0]-P[0]}function M(C){C.filterSpecified=!1,C.svgBrush.extent=[[-1/0,1/0]]}function D(C){for(var P,L=C.slice(),S=[],E=L.shift();E;){for(P=E.slice();(E=L.shift())&&E[0]<=P[1];)P[1]=Math.max(P[1],E[1]);S.push(P)}return 1===S.length&&S[0][0]>S[0][1]&&(S=[]),S}ae.exports={makeBrush:function(C,P,L,S,E,N){var z,G,K,ne,q=(ne=[],{set:function(X){1===(ne=X.map(function(J){return J.slice().sort(e)}).sort(w)).length&&ne[0][0]===-1/0&&ne[0][1]===1/0&&(ne=[[0,-1]]),G=D(ne),K=ne.reduce(function(J,se){return[Math.min(J[0],se[0]),Math.max(J[1],se[1])]},[1/0,-1/0])},get:function(){return ne.slice()},getConsolidated:function(){return G},getBounds:function(){return K}});return q.set(L),{filter:q,filterSpecified:P,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(z=E,function(G){var X,K=G.brush,ne=(X=K,X.svgBrush.extent.map(function(J){return J.slice()})).slice();K.filter.set(ne),z()}),brushEndCallback:N}}},ensureAxisBrush:function(C,P){var L=C.selectAll("."+p.cn.axisBrush).data(y,b);L.enter().append("g").classed(p.cn.axisBrush,!0),function(S,E){var N=S.selectAll(".background").data(y);N.enter().append("rect").classed("background",!0).call(i).call(f).style("pointer-events","auto").attr("transform",r(0,p.verticalPadding)),N.call(x).attr("height",function(G){return G.height-p.verticalPadding});var z=S.selectAll(".highlight-shadow").data(y);z.enter().append("line").classed("highlight-shadow",!0).attr("x",-p.bar.width/2).attr("stroke-width",p.bar.width+p.bar.strokeWidth).attr("stroke",E).attr("opacity",p.bar.strokeOpacity).attr("stroke-linecap","butt"),z.attr("y1",function(G){return G.height}).call(h);var q=S.selectAll(".highlight").data(y);q.enter().append("line").classed("highlight",!0).attr("x",-p.bar.width/2).attr("stroke-width",p.bar.width-p.bar.strokeWidth).attr("stroke",p.bar.fillColor).attr("opacity",p.bar.fillOpacity).attr("stroke-linecap","butt"),q.attr("y1",function(G){return G.height}).call(h)}(L,P)},cleanRanges:function(C,P){if(Array.isArray(C[0])?(C=C.map(function(S){return S.sort(e)}),C=P.multiselect?D(C.sort(w)):[C[0]]):C=[C.sort(e)],P.tickvals){var L=P.tickvals.slice().sort(e);if(!(C=C.map(function(S){var E=[l(0,L,S[0],[]),l(1,L,S[1],[])];if(E[1]>E[0])return E}).filter(function(S){return S})).length)return}return C.length>1?C:C[0]}}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:v("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../plots/get_data").getModuleCalcData,b=v("./plot"),y=v("../../constants/xmlns_namespaces");ie.name="parcoords",ie.plot=function(e){var r=g(e.calcdata,"parcoords")[0];r.length&&b(e,r)},ie.clean=function(e,r,t,o){var n=o._has&&o._has("parcoords"),m=r._has&&r._has("parcoords");n&&!m&&(o._paperdiv.selectAll(".parcoords").remove(),o._glimages.selectAll("*").remove())},ie.toSVG=function(e){var r=e._fullLayout._glimages,t=p.select(e).selectAll(".svg-container");t.filter(function(o,n){return n===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var o=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:y.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){p.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(v,ae,ie){"use strict";var p=v("../../lib").isArrayOrTypedArray,g=v("../../components/colorscale"),b=v("../../lib/gup").wrap;ae.exports=function(y,e){var r,t;return g.hasColorscale(e,"line")&&p(e.line.color)?(r=e.line.color,t=g.extractOpts(e.line).colorscale,g.calc(y,e,{vals:r,containerStr:"line",cLetter:"c"})):(r=function(o){for(var n=new Array(o),m=0;m<o;m++)n[m]=.5;return n}(e._length),t=[[0,e.line.color],[1,e.line.color]]),b({lineColor:r,cscale:t})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(v,ae,ie){"use strict";ae.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),r=v("../../plots/cartesian/axes"),t=v("./attributes"),o=v("./axisbrush"),n=v("./constants").maxDimensionCount,m=v("./merge_length");function l(i,f,u,s){function d(T,x){return p.coerce(i,f,t.dimensions,T,x)}var h=d("values"),a=d("visible");if(h&&h.length||(a=f.visible=!1),a){d("label"),d("tickvals"),d("ticktext"),d("tickformat");var _=d("range");f._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:_},r.setConvert(f._ax,s.layout),d("multiselect");var c=d("constraintrange");c&&(f.constraintrange=o.cleanRanges(c,f))}}ae.exports=function(i,f,u,s){function d(T,x){return p.coerce(i,f,t,T,x)}var h=i.dimensions;Array.isArray(h)&&h.length>n&&(p.log("parcoords traces support up to "+n+" dimensions at the moment"),h.splice(n));var a=e(i,f,{name:"dimensions",layout:s,handleItemDefaults:l}),_=function(T,x,w,M,D){var C=D("line.color",w);if(g(T,"line")&&p.isArrayOrTypedArray(C)){if(C.length)return D("line.colorscale"),b(T,x,M,D,{prefix:"line.",cLetter:"c"}),C.length;x.line.color=w}return 1/0}(i,f,u,s,d);y(f,s,d),Array.isArray(a)&&a.length||(f.visible=!1),m(f,a,"values",_);var c={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};p.coerceFont(d,"labelfont",c),p.coerceFont(d,"tickfont",c),p.coerceFont(d,"rangefont",c),d("labelangle"),d("labelside"),d("unselected.line.color"),d("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(v,ae,ie){"use strict";var p=v("../../lib").isTypedArray;ie.convertTypedArray=function(g){return p(g)?Array.prototype.slice.call(g):g},ie.isOrdinal=function(g){return!!g.tickvals},ie.isVisible=function(g){return g.visible||!("visible"in g)}},{"../../lib":515}],905:[function(v,ae,ie){"use strict";var p=v("./base_index");p.plot=v("./plot"),ae.exports=p},{"./base_index":899,"./plot":909}],906:[function(v,ae,ie){"use strict";var p=v("glslify"),g=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),b=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),y=v("./constants").maxDimensionCount,e=v("../../lib"),r=new Uint8Array(4),t=new Uint8Array(4),o={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function n(a,_,c,T,x){var w=a._gl;w.enable(w.SCISSOR_TEST),w.scissor(_,c,T,x),a.clear({color:[0,0,0,0],depth:1})}function m(a,_,c,T,x,w){var M=w.key;c.drawCompleted||(a.read({x:0,y:0,width:1,height:1,data:r}),c.drawCompleted=!0),function D(C){var P=Math.min(T,x-C*T);0===C&&(window.cancelAnimationFrame(c.currentRafs[M]),delete c.currentRafs[M],n(a,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),c.clearOnly||(w.count=2*P,w.offset=2*C*T,_(w),C*T+P<x&&(c.currentRafs[M]=window.requestAnimationFrame(function(){D(C+1)})),c.drawCompleted=!1)}(0)}function l(a,_){for(var c=new Array(256),T=0;T<256;T++)c[T]=a(T/255).concat(_);return c}function i(a,_){return(a>>>8*_)%256/255}function f(a,_,c){for(var T=new Array(8*_),x=0,w=0;w<_;w++)for(var M=0;M<2;M++)for(var D=0;D<4;D++){var C=4*a+D,P=c[64*w+C];63===C&&0===M&&(P*=-1),T[x++]=P}return T}function u(a){var _="0"+a;return _.substr(_.length-2)}function s(a){return a<y?"p"+u(a+1)+"_"+u(a+4):"colors"}function d(a,_,c,T,x,w,M,D,C,P,L,S,E,N){for(var z=[[],[]],q=0;q<64;q++)z[0][q]=q===x?1:0,z[1][q]=q===w?1:0;var G=a.lines.canvasOverdrag*N,K=a.domain,ne=a.canvasWidth*N,X=a.canvasHeight*N,J=a.pad.l*N,se=a.pad.b*N,V=a.layoutHeight*N,j=a.layoutWidth*N,H=a.deselectedLines.color,oe=a.deselectedLines.opacity;return e.extendFlat({key:L,resolution:[ne,X],viewBoxPos:[(M*=N)+G,D*=N],viewBoxSize:[C*=N,P*=N],i0:x,i1:w,dim0A:z[0].slice(0,16),dim0B:z[0].slice(16,32),dim0C:z[0].slice(32,48),dim0D:z[0].slice(48,64),dim1A:z[1].slice(0,16),dim1B:z[1].slice(16,32),dim1C:z[1].slice(32,48),dim1D:z[1].slice(48,64),drwLayer:S,contextColor:[H[0]/255,H[1]/255,H[2]/255,"auto"!==oe?H[3]*oe:Math.max(1/255,Math.pow(1/a.lines.color.length,1/3))],scissorX:(T===_?0:M+G)+(J-G)+j*K.x[0],scissorWidth:(T===c?ne-M+G:C+.5)+(T===_?M+G:0),scissorY:D+se+V*K.y[0],scissorHeight:P,viewportX:J-G+j*K.x[0],viewportY:se+V*K.y[0],viewportWidth:ne,viewportHeight:X},E)}function h(a){var _=Math.max(0,Math.floor(2047*a[0]),0),c=Math.min(2047,Math.ceil(2047*a[1]),2047);return[Math.min(_,c),Math.max(_,c)]}ae.exports=function(a,_){var c,x,w,M,D=_.context,C=_.pick,P=_.regl,L=P._gl,S=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),E=Math.max(S[0],Math.min(S[1],_.viewModel.plotGlPixelRatio)),N={currentRafs:{},drawCompleted:!0,clearOnly:!1},z=function(X){for(var J={},se=0;se<=y;se+=4)J[s(se)]=X.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return J}(P),q=P.texture(o),G=[];ne(_);var K=P({profile:!1,blend:{enable:D,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!D,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:g,frag:b,primitive:"lines",lineWidth:E,attributes:z,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:q,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function ne(X){c=X.model,x=X.viewModel.dimensions.slice(),w=x[0]?x[0].values.length:0;var J=c.lines,se=C?J.color.map(function(j,H){return H/J.color.length}):J.color,V=function(j,H,oe){for(var te=new Array(j*(y+4)),ee=0,le=0;le<j;le++){for(var ce=0;ce<y;ce++)te[ee++]=ce<H.length?H[ce].paddedUnitValues[le]:.5;te[ee++]=i(le,2),te[ee++]=i(le,1),te[ee++]=i(le,0),te[ee++]=Math.max(1e-6,Math.min(.999999,oe[le]))}return te}(w,x,se);(function(j,H,oe){for(var U=0;U<=y;U+=4)j[s(U)](f(U/4,H,oe))})(z,w,V),D||C||(q=P.texture(e.extendFlat({data:l(c.unitToColor,255)},o)))}return{render:function(X,J,se){var V,j,H,oe=X.length,U=1/0,te=-1/0;for(V=0;V<oe;V++)X[V].dim0.canvasX<U&&(U=X[V].dim0.canvasX,j=V),X[V].dim1.canvasX>te&&(te=X[V].dim1.canvasX,H=V);0===oe&&n(P,0,0,c.canvasWidth,c.canvasHeight);var ee=function(ke){var Fe,ve,Te,Le=[[],[]];for(Te=0;Te<64;Te++){var Oe=!ke&&Te<x.length?x[Te].brush.filter.getBounds():[-1/0,1/0];Le[0][Te]=Oe[0],Le[1][Te]=Oe[1]}var Ne=new Array(16384);for(Fe=0;Fe<16384;Fe++)Ne[Fe]=255;if(!ke)for(Fe=0;Fe<x.length;Fe++){var Be=Fe%8,He=(Fe-Be)/8,Ve=Math.pow(2,Be),it=x[Fe].brush.filter.get();if(!(it.length<2)){var ze=h(it[0])[1];for(ve=1;ve<it.length;ve++){var je=h(it[ve]);for(Te=ze+1;Te<je[0];Te++)Ne[8*Te+He]&=~Ve;ze=Math.max(ze,je[1])}}}var qe={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ne};return M?M(qe):M=P.texture(qe),{maskTexture:M,maskHeight:2048,loA:Le[0].slice(0,16),loB:Le[0].slice(16,32),loC:Le[0].slice(32,48),loD:Le[0].slice(48,64),hiA:Le[1].slice(0,16),hiB:Le[1].slice(16,32),hiC:Le[1].slice(32,48),hiD:Le[1].slice(48,64)}}(D);for(V=0;V<oe;V++){var le=X[V],ce=le.dim0.crossfilterDimensionIndex,pe=le.dim1.crossfilterDimensionIndex,de=le.canvasX,be=le.canvasY,he=de+le.panelSizeX,xe=le.plotGlPixelRatio;if(J||!G[ce]||G[ce][0]!==de||G[ce][1]!==he){G[ce]=[de,he];var De=d(c,j,H,V,ce,pe,de,be,le.panelSizeX,le.panelSizeY,le.dim0.crossfilterDimensionIndex,D?0:C?2:1,ee,xe);N.clearOnly=se,m(P,K,N,J?c.lines.blockLineCount:w,w,De)}}},readPixel:function(X,J){return P.read({x:X,y:J,width:1,height:1,data:t}),t},readPixels:function(X,J,se,V){var j=new Uint8Array(4*se*V);return P.read({x:X,y:J,width:se,height:V,data:j}),j},destroy:function(){for(var X in a.style["pointer-events"]="none",q.destroy(),M&&M.destroy(),z)z[X].destroy()},update:ne}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y){var e,r;for(y||(y=1/0),e=0;e<g.length;e++)(r=g[e]).visible&&(y=Math.min(y,r[b].length));for(y===1/0&&(y=0),p._length=y,e=0;e<g.length;e++)(r=g[e]).visible&&(r._length=y);return y}},{}],908:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=g.numberFormat,y=v("color-rgba"),e=v("../../plots/cartesian/axes"),r=g.strRotate,t=g.strTranslate,o=v("../../lib/svg_text_utils"),n=v("../../components/drawing"),m=v("../../components/colorscale"),l=v("../../lib/gup"),i=l.keyFun,f=l.repeat,u=l.unwrap,s=v("./helpers"),d=v("./constants"),h=v("./axisbrush"),a=v("./lines");function _(G,K,ne){return g.aggNums(G,null,K,ne)}function c(G,K){return x(_(Math.min,G,K),_(Math.max,G,K))}function T(G){var K=G.range;return K?x(K[0],K[1]):c(G.values,G._length)}function x(G,K){return!isNaN(G)&&isFinite(G)||(G=0),!isNaN(K)&&isFinite(K)||(K=0),G===K&&(0===G?(G-=1,K+=1):(G*=.9,K*=1.1)),[G,K]}function w(G,K,ne,X,J){var se,V,j=T(ne);return X?p.scale.ordinal().domain(X.map((se=b(ne.tickformat),V=J,V?function(H,oe){return V[oe]??se(H)}:se))).range(X.map(function(H){return G-K+(H-j[0])/(j[1]-j[0])*(2*K-G)})):p.scale.linear().domain(j).range([G-K,K])}function M(G){if(G.tickvals){var K=T(G);return p.scale.ordinal().domain(G.tickvals).range(G.tickvals.map(function(ne){return(ne-K[0])/(K[1]-K[0])}))}}function D(G){var K=G.map(function(J){return J[0]}),ne=G.map(function(J){var se=y(J[1]);return p.rgb("rgb("+se[0]+","+se[1]+","+se[2]+")")}),X="rgb".split("").map(function(J){return p.scale.linear().clamp(!0).domain(K).range(ne.map((se=J,function(V){return V[se]})));var se});return function(J){return X.map(function(se){return se(J)})}}function C(G){return G.dimensions.some(function(K){return K.brush.filterSpecified})}function P(G,K,ne){var X=u(K),J=X.trace,se=s.convertTypedArray(X.lineColor),V=J.line,j={color:y(J.unselected.line.color),opacity:J.unselected.line.opacity},H=m.extractOpts(V),oe=H.reversescale?m.flipScale(X.cscale):X.cscale,U=J.domain,te=J.dimensions,ee=G.width,le=J.labelangle,ce=J.labelside,pe=J.labelfont,de=J.tickfont,be=J.rangefont,he=g.extendDeepNoArrays({},V,{color:se.map(p.scale.linear().domain(T({values:se,range:[H.min,H.max],_length:J._length}))),blockLineCount:d.blockLineCount,canvasOverdrag:d.overdrag*d.canvasPixelRatio}),xe=Math.floor(ee*(U.x[1]-U.x[0])),De=Math.floor(G.height*(U.y[1]-U.y[0])),Se=G.margin||{l:80,r:80,t:100,b:80},ke=xe,Fe=De;return{key:ne,colCount:te.filter(s.isVisible).length,dimensions:te,tickDistance:d.tickDistance,unitToColor:D(oe),lines:he,deselectedLines:j,labelAngle:le,labelSide:ce,labelFont:pe,tickFont:de,rangeFont:be,layoutWidth:ee,layoutHeight:G.height,domain:U,translateX:U.x[0]*ee,translateY:G.height-U.y[1]*G.height,pad:Se,canvasWidth:ke*d.canvasPixelRatio+2*he.canvasOverdrag,canvasHeight:Fe*d.canvasPixelRatio,width:ke,height:Fe,canvasPixelRatio:d.canvasPixelRatio}}function L(G,K,ne){var ee,le,X=ne.width,J=ne.height,se=ne.dimensions,V=ne.canvasPixelRatio,j=function(ee){return X*ee/Math.max(1,ne.colCount-1)},H=d.verticalPadding/J,oe=(ee=J,le=d.verticalPadding,p.scale.linear().range([le,ee-le])),U={key:ne.key,xScale:j,model:ne,inBrushDrag:!1},te={};return U.dimensions=se.filter(s.isVisible).map(function(ee,le){var Ne,Be,ce=(Ne=ee,Be=H,p.scale.linear().domain(T(Ne)).range([Be,1-Be])),pe=te[ee.label];te[ee.label]=(pe||0)+1;var de=ee.label+(pe?"__"+pe:""),be=ee.constraintrange,he=be&&be.length;he&&!Array.isArray(be[0])&&(be=[be]);var xe=he?be.map(function(Ne){return Ne.map(ce)}):[[-1/0,1/0]],De=ee.values;De.length>ee._length&&(De=De.slice(0,ee._length));var Se,ke=ee.tickvals;function Fe(Ne,Be){return{val:Ne,text:Se[Be]}}function ve(Ne,Be){return Ne.val-Be.val}if(Array.isArray(ke)&&ke.length){Se=ee.ticktext,Array.isArray(Se)&&Se.length?Se.length>ke.length?Se=Se.slice(0,ke.length):ke.length>Se.length&&(ke=ke.slice(0,Se.length)):Se=ke.map(b(ee.tickformat));for(var Te=1;Te<ke.length;Te++)if(ke[Te]<ke[Te-1]){for(var Le=ke.map(Fe).sort(ve),Oe=0;Oe<ke.length;Oe++)ke[Oe]=Le[Oe].val,Se[Oe]=Le[Oe].text;break}}else ke=void 0;return De=s.convertTypedArray(De),{key:de,label:ee.label,tickFormat:ee.tickformat,tickvals:ke,ticktext:Se,ordinal:s.isOrdinal(ee),multiselect:ee.multiselect,xIndex:le,crossfilterDimensionIndex:le,visibleIndex:ee._index,height:J,values:De,paddedUnitValues:De.map(ce),unitTickvals:ke&&ke.map(ce),xScale:j,x:j(le),canvasX:j(le)*V,unitToPaddedPx:oe,domainScale:w(J,d.verticalPadding,ee,ke,Se),ordinalScale:M(ee),parent:U,model:ne,brush:h.makeBrush(G,he,xe,function(){G.linePickActive(!1)},function(){var Ne=U;Ne.focusLayer&&Ne.focusLayer.render(Ne.panels,!0);var Be=C(Ne);!G.contextShown()&&Be?(Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!0),G.contextShown(!0)):G.contextShown()&&!Be&&(Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!0,!0),G.contextShown(!1))},function(Ne){if(U.focusLayer.render(U.panels,!0),U.pickLayer&&U.pickLayer.render(U.panels,!0),G.linePickActive(!0),K&&K.filterChanged){var Be=ce.invert,He=Ne.map(function(Ve){return Ve.map(Be).sort(g.sorterAsc)}).sort(function(Ve,it){return Ve[0]-it[0]});K.filterChanged(U.key,ee._index,He)}})}}),U}function S(G){G.classed(d.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(G,K){var X=G*Math.PI/180;return{dir:"top"===K?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:G}}function N(G,K,ne){for(var X=K.panels||(K.panels=[]),J=G.data(),se=0;se<J.length-1;se++){var V=X[se]||(X[se]={}),j=J[se],H=J[se+1];V.dim0=j,V.dim1=H,V.canvasX=j.canvasX,V.panelSizeX=H.canvasX-j.canvasX,V.panelSizeY=K.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=ne}}function z(G,K){return e.tickText(G._ax,K,!1).text}function q(G,K){if(G.ordinal)return"";var ne=G.domainScale.domain();return z(G.model.dimensions[G.visibleIndex],ne[K?ne.length-1:0])}ae.exports=function(G,K,ne,X){var J=G._fullLayout,se=J._toppaper,V=J._glcontainer,j=G._context.plotGlPixelRatio,H=G._fullLayout.paper_bgcolor;!function(Oe){for(var Ne=0;Ne<Oe.length;Ne++)for(var Be=0;Be<Oe[Ne].length;Be++)for(var He=Oe[Ne][Be].trace,Ve=He.dimensions,it=0;it<Ve.length;it++){var ze=Ve[it].values,je=Ve[it]._ax;je&&(je.range=je.range?x(je.range[0],je.range[1]):c(ze,He._length),je.dtick||(je.dtick=.01*(Math.abs(je.range[1]-je.range[0])||1)),je.tickformat=Ve[it].tickformat,e.calcTicks(je),je.cleanRange())}}(K);var oe,U,te=(oe=!0,U=!1,{linePickActive:function(Oe){return arguments.length?oe=!!Oe:oe},contextShown:function(Oe){return arguments.length?U=!!Oe:U}}),ee=K.filter(function(Oe){return u(Oe).trace.visible}).map(P.bind(0,ne)).map(L.bind(0,te,X));V.each(function(Oe,Ne){return g.extendFlat(Oe,ee[Ne])});var le=V.selectAll(".gl-canvas").each(function(Oe){Oe.viewModel=ee[0],Oe.viewModel.plotGlPixelRatio=j,Oe.viewModel.paperColor=H,Oe.model=Oe.viewModel?Oe.viewModel.model:null}),ce=null;le.filter(function(Oe){return Oe.pick}).style("pointer-events","auto").on("mousemove",function(Oe){if(te.linePickActive()&&Oe.lineLayer&&X&&X.hover){var Ne=p.event,Be=this.width,He=this.height,Ve=p.mouse(this),it=Ve[0],ze=Ve[1];if(it<0||ze<0||it>=Be||ze>=He)return;var je=Oe.lineLayer.readPixel(it,He-1-ze),qe=0!==je[3],Ye=qe?je[2]+256*(je[1]+256*je[0]):null,ct={x:it,y:ze,clientX:Ne.clientX,clientY:Ne.clientY,dataIndex:Oe.model.key,curveNumber:Ye};Ye!==ce&&(qe?X.hover(ct):X.unhover&&X.unhover(ct),ce=Ye)}}),le.style("opacity",function(Oe){return Oe.pick?0:1}),se.style("background","rgba(255, 255, 255, 0)");var pe=se.selectAll("."+d.cn.parcoords).data(ee,i);pe.exit().remove(),pe.enter().append("g").classed(d.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),pe.attr("transform",function(Oe){return t(Oe.model.translateX,Oe.model.translateY)});var de=pe.selectAll("."+d.cn.parcoordsControlView).data(f,i);de.enter().append("g").classed(d.cn.parcoordsControlView,!0),de.attr("transform",function(Oe){return t(Oe.model.pad.l,Oe.model.pad.t)});var be=de.selectAll("."+d.cn.yAxis).data(function(Oe){return Oe.dimensions},i);be.enter().append("g").classed(d.cn.yAxis,!0),de.each(function(Oe){N(be,Oe,j)}),le.each(function(Oe){Oe.viewModel&&(!Oe.lineLayer||X?Oe.lineLayer=a(this,Oe):Oe.lineLayer.update(Oe),(Oe.key||0===Oe.key)&&(Oe.viewModel[Oe.key]=Oe.lineLayer),Oe.lineLayer.render(Oe.viewModel.panels,!Oe.context||X))}),be.attr("transform",function(Oe){return t(Oe.xScale(Oe.xIndex),0)}),be.call(p.behavior.drag().origin(function(Oe){return Oe}).on("drag",function(Oe){var Ne=Oe.parent;te.linePickActive(!1),Oe.x=Math.max(-d.overdrag,Math.min(Oe.model.width+d.overdrag,p.event.x)),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,be.sort(function(Be,He){return Be.x-He.x}).each(function(Be,He){Be.xIndex=He,Be.x=Oe===Be?Be.x:Be.xScale(Be.xIndex),Be.canvasX=Be.x*Be.model.canvasPixelRatio}),N(be,Ne,j),be.filter(function(Be){return 0!==Math.abs(Oe.xIndex-Be.xIndex)}).attr("transform",function(Be){return t(Be.xScale(Be.xIndex),0)}),p.select(this).attr("transform",t(Oe.x,0)),be.each(function(Be,He,Ve){Ve===Oe.parent.key&&(Ne.dimensions[He]=Be)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!C(Ne)),Ne.focusLayer.render&&Ne.focusLayer.render(Ne.panels)}).on("dragend",function(Oe){var Ne=Oe.parent;Oe.x=Oe.xScale(Oe.xIndex),Oe.canvasX=Oe.x*Oe.model.canvasPixelRatio,N(be,Ne,j),p.select(this).attr("transform",function(Be){return t(Be.x,0)}),Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!1,!C(Ne)),Ne.focusLayer&&Ne.focusLayer.render(Ne.panels),Ne.pickLayer&&Ne.pickLayer.render(Ne.panels,!0),te.linePickActive(!0),X&&X.axesMoved&&X.axesMoved(Ne.key,Ne.dimensions.map(function(Be){return Be.crossfilterDimensionIndex}))})),be.exit().remove();var he=be.selectAll("."+d.cn.axisOverlays).data(f,i);he.enter().append("g").classed(d.cn.axisOverlays,!0),he.selectAll("."+d.cn.axis).remove();var xe=he.selectAll("."+d.cn.axis).data(f,i);xe.enter().append("g").classed(d.cn.axis,!0),xe.each(function(Oe){var Ne=Oe.model.height/Oe.model.tickDistance,Be=Oe.domainScale,He=Be.domain();p.select(this).call(p.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ne,Oe.tickFormat).tickValues(Oe.ordinal?He:null).tickFormat(function(Ve){return s.isOrdinal(Oe)?Ve:z(Oe.model.dimensions[Oe.visibleIndex],Ve)}).scale(Be)),n.font(xe.selectAll("text"),Oe.model.tickFont)}),xe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),xe.selectAll("text").style("text-shadow",o.makeTextShadow(H)).style("cursor","default");var De=he.selectAll("."+d.cn.axisHeading).data(f,i);De.enter().append("g").classed(d.cn.axisHeading,!0);var Se=De.selectAll("."+d.cn.axisTitle).data(f,i);Se.enter().append("text").classed(d.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Se.text(function(Oe){return Oe.label}).each(function(Oe){var Ne=p.select(this);n.font(Ne,Oe.model.labelFont),o.convertToTspans(Ne,G)}).attr("transform",function(Oe){var Ne=E(Oe.model.labelAngle,Oe.model.labelSide),Be=d.axisTitleOffset;return(Ne.dir>0?"":t(0,2*Be+Oe.model.height))+r(Ne.degrees)+t(-Be*Ne.dx,-Be*Ne.dy)}).attr("text-anchor",function(Oe){var Ne=E(Oe.model.labelAngle,Oe.model.labelSide);return 2*Math.abs(Ne.dx)>Math.abs(Ne.dy)?Ne.dir*Ne.dx<0?"start":"end":"middle"});var ke=he.selectAll("."+d.cn.axisExtent).data(f,i);ke.enter().append("g").classed(d.cn.axisExtent,!0);var Fe=ke.selectAll("."+d.cn.axisExtentTop).data(f,i);Fe.enter().append("g").classed(d.cn.axisExtentTop,!0),Fe.attr("transform",t(0,-d.axisExtentOffset));var ve=Fe.selectAll("."+d.cn.axisExtentTopText).data(f,i);ve.enter().append("text").classed(d.cn.axisExtentTopText,!0).call(S),ve.text(function(Oe){return q(Oe,!0)}).each(function(Oe){n.font(p.select(this),Oe.model.rangeFont)});var Te=ke.selectAll("."+d.cn.axisExtentBottom).data(f,i);Te.enter().append("g").classed(d.cn.axisExtentBottom,!0),Te.attr("transform",function(Oe){return t(0,Oe.model.height+d.axisExtentOffset)});var Le=Te.selectAll("."+d.cn.axisExtentBottomText).data(f,i);Le.enter().append("text").classed(d.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Le.text(function(Oe){return q(Oe,!1)}).each(function(Oe){n.font(p.select(this),Oe.model.rangeFont)}),h.ensureAxisBrush(he,H)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(v,ae,ie){"use strict";var p=v("./parcoords"),g=v("../../lib/prepare_regl"),b=v("./helpers").isVisible,y={};function e(r,t,o){var n=t.indexOf(o),m=r.indexOf(n);return-1===m&&(m+=t.length),m}(ae.exports=function(r,t){var o=r._fullLayout;if(g(r,[],y)){var n={},m={},l={},i={},f=o._size;t.forEach(function(u,s){var d=u[0].trace;l[s]=d.index;var h=i[s]=d._fullInput.index;n[s]=r.data[h].dimensions,m[s]=r.data[h].dimensions.slice()}),p(r,t,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{filterChanged:function(u,s,d){var h=m[u][s],a=d.map(function(M){return M.slice()}),_="dimensions["+s+"].constraintrange",c=o._tracePreGUI[r._fullData[l[u]]._fullInput.uid];void 0===c[_]&&(c[_]=h.constraintrange||null);var x=r._fullData[l[u]].dimensions[s];a.length?(1===a.length&&(a=a[0]),h.constraintrange=a,x.constraintrange=a.slice(),a=[a]):(delete h.constraintrange,delete x.constraintrange,a=null);var w={};w[_]=a,r.emit("plotly_restyle",[w,[i[u]]])},hover:function(u){r.emit("plotly_hover",u)},unhover:function(u){r.emit("plotly_unhover",u)},axesMoved:function(u,s){var h,a,d=(h=s,a=m[u].filter(b),function(_,c){return e(h,a,_)-e(h,a,c)});n[u].sort(d),m[u].filter(function(h){return!b(h)}).sort(function(h){return m[u].indexOf(h)}).forEach(function(h){n[u].splice(n[u].indexOf(h),1),n[u].splice(m[u].indexOf(h),0,h)}),r.emit("plotly_restyle",[{dimensions:[n[u]]},[i[u]]])}})}}).reglPrecompiled=y},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(v,ae,ie){"use strict";var p=v("../../plots/attributes"),g=v("../../plots/domain").attributes,b=v("../../plots/font_attributes"),y=v("../../components/color/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/template_attributes").texttemplateAttrs,t=v("../../lib/extend").extendFlat,o=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});ae.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:y.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:t({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:r({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:t({},o,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:t({},o,{}),outsidetextfont:t({},o,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:t({},o,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:g({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:t({},o,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(v,ae,ie){"use strict";var p=v("../../plots/plots");ie.name="pie",ie.plot=function(g,b,y,e){p.plotBasePlot(ie.name,g,b,y,e)},ie.clean=function(g,b,y,e){p.cleanBasePlot(ie.name,g,b,y,e)}},{"../../plots/plots":628}],912:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("tinycolor2"),b=v("../../components/color"),y={};function e(t){return function(o,n){return!!o&&!!(o=g(o)).isValid()&&(o=b.addOpacity(o,o.getAlpha()),t[n]||(t[n]=o),o)}}function r(t,o){var n,m=JSON.stringify(t),l=o[m];if(!l){for(l=t.slice(),n=0;n<t.length;n++)l.push(g(t[n]).lighten(20).toHexString());for(n=0;n<t.length;n++)l.push(g(t[n]).darken(20).toHexString());o[m]=l}return l}ae.exports={calc:function(t,o){var n,m,l=[],i=t._fullLayout,f=i.hiddenlabels||[],u=o.labels,s=o.marker.colors||[],d=o.values,h=o._length,a=o._hasValues&&h;if(o.dlabel)for(u=new Array(h),n=0;n<h;n++)u[n]=String(o.label0+n*o.dlabel);var _={},c=e(i["_"+o.type+"colormap"]),T=0,x=!1;for(n=0;n<h;n++){var w,M,D;if(a){if(!p(w=d[n]))continue;w=+w}else w=1;void 0!==(M=u[n])&&""!==M||(M=n);var C=_[M=String(M)];void 0===C?(_[M]=l.length,(D=-1!==f.indexOf(M))||(T+=w),l.push({v:w,label:M,color:c(s[n],M),i:n,pts:[n],hidden:D})):(x=!0,(m=l[C]).v+=w,m.pts.push(n),m.hidden||(T+=w),!1===m.color&&s[n]&&(m.color=c(s[n],M)))}return l=l.filter(function(P){return P.v>=0}),("funnelarea"===o.type?x:o.sort)&&l.sort(function(P,L){return L.v-P.v}),l[0]&&(l[0].vTotal=T),l},crossTraceCalc:function(t,o){var n=(o||{}).type;n||(n="pie");var m=t._fullLayout,l=t.calcdata,i=m[n+"colorway"],f=m["_"+n+"colormap"];m["extend"+n+"colors"]&&(i=r(i,y));for(var u=0,s=0;s<l.length;s++){var d=l[s];if(d[0].trace.type===n)for(var h=0;h<d.length;h++){var a=d[h];!1===a.color&&(f[a.label]?a.color=f[a.label]:(f[a.label]=a.color=i[u%i.length],u++))}}},makePullColorFn:e,generateExtendedColors:r}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("./attributes"),y=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText;function r(t,o){var n=Array.isArray(t),m=g.isArrayOrTypedArray(o),l=Math.min(n?t.length:1/0,m?o.length:1/0);if(isFinite(l)||(l=0),l&&m){for(var i,f=0;f<l;f++){var u=o[f];if(p(u)&&u>0){i=!0;break}}i||(l=0)}return{hasLabels:n,hasValues:m,len:l}}ae.exports={handleLabelsAndValues:r,supplyDefaults:function(t,o,n,m){function l(c,T){return g.coerce(t,o,b,c,T)}var i=r(l("labels"),l("values")),f=i.len;if(o._hasLabels=i.hasLabels,o._hasValues=i.hasValues,!o._hasLabels&&o._hasValues&&(l("label0"),l("dlabel")),f){o._length=f,l("marker.line.width")&&l("marker.line.color"),l("marker.colors"),l("scalegroup");var u,s=l("text"),d=l("texttemplate");if(d||(u=l("textinfo",Array.isArray(s)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),d||u&&"none"!==u){var h=l("textposition");e(t,o,m,l,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(h)||"auto"===h||"outside"===h)&&l("automargin"),("inside"===h||"auto"===h||Array.isArray(h))&&l("insidetextorientation")}y(o,m,l);var a=l("hole");if(l("title.text")){var _=l("title.position",a?"middle center":"top center");a||"middle center"!==_||(o.title.position="top center"),g.coerceFont(l,"title.font",m.font)}l("sort"),l("direction"),l("rotation"),l("pull")}else o.visible=!1}}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(v,ae,ie){"use strict";var p=v("../../components/fx/helpers").appendArrayMultiPointValues;ae.exports=function(g,b){var y={curveNumber:b.index,pointNumbers:g.pts,data:b._input,fullData:b,label:g.label,color:g.color,value:g.v,percent:g.percent,text:g.text,bbox:g.bbox,v:g.v};return 1===g.pts.length&&(y.pointNumber=y.i=g.pts[0]),p(y,b,g.pts),"funnelarea"===b.type&&(delete y.v,delete y.i),y}},{"../../components/fx/helpers":403}],915:[function(v,ae,ie){"use strict";var p=v("../../lib");function g(b){return-1!==b.indexOf("e")?b.replace(/[.]?0+e/,"e"):-1!==b.indexOf(".")?b.replace(/[.]?0+$/,""):b}ie.formatPiePercent=function(b,y){var e=g((100*b).toPrecision(3));return p.numSeparate(e,y)+"%"},ie.formatPieValue=function(b,y){var e=g(b.toPrecision(10));return p.numSeparate(e,y)},ie.getFirstFilled=function(b,y){if(Array.isArray(b))for(var e=0;e<y.length;e++){var r=b[y[e]];if(r||0===r||""===r)return r}},ie.castOption=function(b,y){return Array.isArray(b)?ie.getFirstFilled(b,y):b||void 0},ie.getRotationAngle=function(b){return("auto"===b?0:b)*Math.PI/180}},{"../../lib":515}],916:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,supplyLayoutDefaults:v("./layout_defaults"),layoutAttributes:v("./layout_attributes"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style"),styleOne:v("./style_one"),moduleType:"trace",name:"pie",basePlotModule:v("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(v,ae,ie){"use strict";ae.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y){function e(r,t){return p.coerce(b,y,g,r,t)}e("hiddenlabels"),e("piecolorway",y.colorway),e("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../plots/plots"),b=v("../../components/fx"),y=v("../../components/color"),e=v("../../components/drawing"),r=v("../../lib"),t=r.strScale,o=r.strTranslate,n=v("../../lib/svg_text_utils"),m=v("../bar/uniform_text"),l=m.recordMinTextSize,i=m.clearMinTextSize,f=v("../bar/constants").TEXTPAD,u=v("./helpers"),s=v("./event_data"),d=v("../../lib").isValidTextValue;function h(K,ne,X){var J=X[0],se=J.cx,V=J.cy,j=J.trace,H="funnelarea"===j.type;"_hasHoverLabel"in j||(j._hasHoverLabel=!1),"_hasHoverEvent"in j||(j._hasHoverEvent=!1),K.on("mouseover",function(oe){var U=ne._fullLayout,te=ne._fullData[j.index];if(!ne._dragging&&!1!==U.hovermode){var ee=te.hoverinfo;if(Array.isArray(ee)&&(ee=b.castHoverinfo({hoverinfo:[u.castOption(ee,oe.pts)],_module:j._module},U,0)),"all"===ee&&(ee="label+text+value+percent+name"),te.hovertemplate||"none"!==ee&&"skip"!==ee&&ee){var le=oe.rInscribed||0,ce=se+oe.pxmid[0]*(1-le),pe=V+oe.pxmid[1]*(1-le),de=U.separators,be=[];if(ee&&-1!==ee.indexOf("label")&&be.push(oe.label),oe.text=u.castOption(te.hovertext||te.text,oe.pts),ee&&-1!==ee.indexOf("text")){var he=oe.text;r.isValidTextValue(he)&&be.push(he)}oe.value=oe.v,oe.valueLabel=u.formatPieValue(oe.v,de),ee&&-1!==ee.indexOf("value")&&be.push(oe.valueLabel),oe.percent=oe.v/J.vTotal,oe.percentLabel=u.formatPiePercent(oe.percent,de),ee&&-1!==ee.indexOf("percent")&&be.push(oe.percentLabel);var xe=te.hoverlabel,De=xe.font,Se=[];b.loneHover({trace:j,x0:ce-le*J.r,x1:ce+le*J.r,y:pe,_x0:H?se+oe.TL[0]:ce-le*J.r,_x1:H?se+oe.TR[0]:ce+le*J.r,_y0:H?V+oe.TL[1]:pe-le*J.r,_y1:H?V+oe.BL[1]:pe+le*J.r,text:be.join("<br>"),name:te.hovertemplate||-1!==ee.indexOf("name")?te.name:void 0,idealAlign:oe.pxmid[0]<0?"left":"right",color:u.castOption(xe.bgcolor,oe.pts)||oe.color,borderColor:u.castOption(xe.bordercolor,oe.pts),fontFamily:u.castOption(De.family,oe.pts),fontSize:u.castOption(De.size,oe.pts),fontColor:u.castOption(De.color,oe.pts),nameLength:u.castOption(xe.namelength,oe.pts),textAlign:u.castOption(xe.align,oe.pts),hovertemplate:u.castOption(te.hovertemplate,oe.pts),hovertemplateLabels:oe,eventData:[s(oe,te)]},{container:U._hoverlayer.node(),outerContainer:U._paper.node(),gd:ne,inOut_bbox:Se}),oe.bbox=Se[0],j._hasHoverLabel=!0}j._hasHoverEvent=!0,ne.emit("plotly_hover",{points:[s(oe,te)],event:p.event})}}),K.on("mouseout",function(oe){var U=ne._fullLayout,te=ne._fullData[j.index],ee=p.select(this).datum();j._hasHoverEvent&&(oe.originalEvent=p.event,ne.emit("plotly_unhover",{points:[s(ee,te)],event:p.event}),j._hasHoverEvent=!1),j._hasHoverLabel&&(b.loneUnhover(U._hoverlayer.node()),j._hasHoverLabel=!1)}),K.on("click",function(oe){ne._dragging||!1===ne._fullLayout.hovermode||(ne._hoverdata=[s(oe,ne._fullData[j.index])],b.click(ne,p.event))})}function a(K,ne,X){var J=u.castOption(K.insidetextfont.color,ne.pts);!J&&K._input.textfont&&(J=u.castOption(K._input.textfont.color,ne.pts));var se=u.castOption(K.insidetextfont.family,ne.pts)||u.castOption(K.textfont.family,ne.pts)||X.family,V=u.castOption(K.insidetextfont.size,ne.pts)||u.castOption(K.textfont.size,ne.pts)||X.size;return{color:J||y.contrast(ne.color),family:se,size:V}}function _(K,ne){for(var X,J,se=0;se<K.length;se++)if((J=(X=K[se][0]).trace).title.text){var V=J.title.text;J._meta&&(V=r.templateString(V,J._meta));var j=e.tester.append("text").attr("data-notex",1).text(V).call(e.font,J.title.font).call(n.convertToTspans,ne),H=e.bBox(j.node(),!0);X.titleBox={width:H.width,height:H.height},j.remove()}}function c(K,ne,X){var J=X.r||ne.rpx1,se=ne.rInscribed;if(ne.startangle===ne.stopangle)return{rCenter:1-se,scale:0,rotate:0,textPosAngle:0};var V,j=ne.ring,H=1===j&&Math.abs(ne.startangle-ne.stopangle)===2*Math.PI,oe=ne.halfangle,U=ne.midangle,te=X.trace.insidetextorientation,ee="horizontal"===te,le="tangential"===te,ce="radial"===te,pe="auto"===te,de=[];if(!pe){var be,he=function(ve,Te){if(it=(Be=ne).stopangle,(Ve=Be.startangle)>(He=ve)&&He>it||Ve<He&&He<it){var Le=Math.abs(ve-ne.startangle),Oe=Math.abs(ve-ne.stopangle),Ne=Le<Oe?Le:Oe;(V="tan"===Te?x(K,J,j,Ne,0):T(K,J,j,Ne,Math.PI/2)).textPosAngle=ve,de.push(V)}var Be,He,Ve,it};if(ee||le){for(be=4;be>=-4;be-=2)he(Math.PI*be,"tan");for(be=4;be>=-4;be-=2)he(Math.PI*(be+1),"tan")}if(ee||ce){for(be=4;be>=-4;be-=2)he(Math.PI*(be+1.5),"rad");for(be=4;be>=-4;be-=2)he(Math.PI*(be+.5),"rad")}}if(H||pe||ee){var xe=Math.sqrt(K.width*K.width+K.height*K.height);if((V={scale:se*J*2/xe,rCenter:1-se,rotate:0}).textPosAngle=(ne.startangle+ne.stopangle)/2,V.scale>=1)return V;de.push(V)}(pe||ce)&&((V=T(K,J,j,oe,U)).textPosAngle=(ne.startangle+ne.stopangle)/2,de.push(V)),(pe||le)&&((V=x(K,J,j,oe,U)).textPosAngle=(ne.startangle+ne.stopangle)/2,de.push(V));for(var De=0,Se=0,ke=0;ke<de.length;ke++){var Fe=de[ke].scale;if(Se<Fe&&(Se=Fe,De=ke),!pe&&Se>=1)break}return de[De]}function T(K,ne,X,J,se){ne=Math.max(0,ne-2*f);var V=K.width/K.height,j=D(V,J,ne,X);return{scale:2*j/K.height,rCenter:w(V,j/ne),rotate:M(se)}}function x(K,ne,X,J,se){ne=Math.max(0,ne-2*f);var V=K.height/K.width,j=D(V,J,ne,X);return{scale:2*j/K.width,rCenter:w(V,j/ne),rotate:M(se+Math.PI/2)}}function w(K,ne){return Math.cos(ne)-K*ne}function M(K){return(180/Math.PI*K+720)%180-90}function D(K,ne,X,J){var se=K+1/(2*Math.tan(ne));return X*Math.min(1/(Math.sqrt(se*se+.5)+se),J/(Math.sqrt(K*K+J/2)+K))}function C(K,ne){return K.v!==ne.vTotal||ne.trace.hole?Math.min(1/(1+1/Math.sin(K.halfangle)),K.ring/2):1}function P(K,ne){var X=ne.pxmid[0],J=ne.pxmid[1],se=K.width/2,V=K.height/2;return X<0&&(se*=-1),J<0&&(V*=-1),{scale:1,rCenter:1,rotate:0,x:se+Math.abs(V)*(se>0?1:-1)/2,y:V/(1+X*X/(J*J)),outside:!0}}function L(K,ne){var X,J,se,V=K.trace,j={x:K.cx,y:K.cy},H={tx:0,ty:0};H.ty+=V.title.font.size,se=E(V),-1!==V.title.position.indexOf("top")?(j.y-=(1+se)*K.r,H.ty-=K.titleBox.height):-1!==V.title.position.indexOf("bottom")&&(j.y+=(1+se)*K.r);var U,te=K.r/(void 0===(U=K.trace.aspectratio)?1:U),ee=ne.w*(V.domain.x[1]-V.domain.x[0])/2;return-1!==V.title.position.indexOf("left")?(ee+=te,j.x-=(1+se)*te,H.tx+=K.titleBox.width/2):-1!==V.title.position.indexOf("center")?ee*=2:-1!==V.title.position.indexOf("right")&&(ee+=te,j.x+=(1+se)*te,H.tx-=K.titleBox.width/2),X=ee/K.titleBox.width,J=S(K,ne)/K.titleBox.height,{x:j.x,y:j.y,scale:Math.min(X,J),tx:H.tx,ty:H.ty}}function S(K,ne){var X=K.trace;return Math.min(K.titleBox.height,ne.h*(X.domain.y[1]-X.domain.y[0])/2)}function E(K){var ne,X=K.pull;if(!X)return 0;if(Array.isArray(X))for(X=0,ne=0;ne<K.pull.length;ne++)K.pull[ne]>X&&(X=K.pull[ne]);return X}function N(K,ne){for(var X=[],J=0;J<K.length;J++){var se=K[J][0],V=se.trace,j=V.domain,H=ne.w*(j.x[1]-j.x[0]),oe=ne.h*(j.y[1]-j.y[0]);V.title.text&&"middle center"!==V.title.position&&(oe-=S(se,ne));var te=oe/2;"funnelarea"!==V.type||V.scalegroup||(te/=V.aspectratio),se.r=Math.min(H/2,te)/(1+E(V)),se.cx=ne.l+ne.w*(V.domain.x[1]+V.domain.x[0])/2,se.cy=ne.t+ne.h*(1-V.domain.y[0])-oe/2,V.title.text&&-1!==V.title.position.indexOf("bottom")&&(se.cy-=S(se,ne)),V.scalegroup&&-1===X.indexOf(V.scalegroup)&&X.push(V.scalegroup)}!function(ee,le){for(var ce,pe,de,be=0;be<le.length;be++){var he=1/0,xe=le[be];for(pe=0;pe<ee.length;pe++)if((de=(ce=ee[pe][0]).trace).scalegroup===xe){var De;if("pie"===de.type)De=ce.r*ce.r;else if("funnelarea"===de.type){var Se,ke;de.aspectratio>1?ke=(Se=ce.r)/de.aspectratio:Se=(ke=ce.r)*de.aspectratio,De=(Se*=(1+de.baseratio)/2)*ke}he=Math.min(he,De/ce.vTotal)}for(pe=0;pe<ee.length;pe++)if((de=(ce=ee[pe][0]).trace).scalegroup===xe){var Fe=he*ce.vTotal;"funnelarea"===de.type&&(Fe/=(1+de.baseratio)/2,Fe/=de.aspectratio),ce.r=Math.sqrt(Fe)}}}(K,X)}function z(K,ne){return[K*Math.sin(ne),-K*Math.cos(ne)]}function q(K,ne,X){var De,J=K._fullLayout,se=X.trace,V=se.texttemplate,j=se.textinfo;if(!V&&j&&"none"!==j){var H,oe=j.split("+"),U=function(De){return-1!==oe.indexOf(De)},te=U("label"),ee=U("text"),le=U("value"),ce=U("percent"),pe=J.separators;if(H=te?[ne.label]:[],ee){var de=u.getFirstFilled(se.text,ne.pts);d(de)&&H.push(de)}le&&H.push(u.formatPieValue(ne.v,pe)),ce&&H.push(u.formatPiePercent(ne.v/X.vTotal,pe)),ne.text=H.join("<br>")}if(V){var be=r.castOption(se,ne.i,"texttemplate");if(be){var he={label:(De=ne).label,value:De.v,valueLabel:u.formatPieValue(De.v,J.separators),percent:De.v/X.vTotal,percentLabel:u.formatPiePercent(De.v/X.vTotal,J.separators),color:De.color,text:De.text,customdata:r.castOption(se,De.i,"customdata")},xe=u.getFirstFilled(se.text,ne.pts);(d(xe)||""===xe)&&(he.text=xe),ne.text=r.texttemplateString(be,he,K._fullLayout._d3locale,he,se._meta||{})}else ne.text=""}}function G(K,ne){var X=K.rotate*Math.PI/180,J=Math.cos(X),se=Math.sin(X),V=(ne.left+ne.right)/2,j=(ne.top+ne.bottom)/2;K.textX=V*J-j*se,K.textY=V*se+j*J,K.noCenter=!0}ae.exports={plot:function(K,ne){var X=K._fullLayout,J=X._size;i("pie",X),_(ne,K),N(ne,J);var se=r.makeTraceGroups(X._pielayer,ne,"trace").each(function(V){var j=p.select(this),H=V[0],oe=H.trace;(function(U){var te,ee,le,ce=U[0],pe=ce.r,de=ce.trace,be=u.getRotationAngle(de.rotation),he=2*Math.PI/ce.vTotal,xe="px0",De="px1";if("counterclockwise"===de.direction){for(te=0;te<U.length&&U[te].hidden;te++);if(te===U.length)return;be+=he*U[te].v,he*=-1,xe="px1",De="px0"}for(le=z(pe,be),te=0;te<U.length;te++)(ee=U[te]).hidden||(ee[xe]=le,ee.startangle=be,ee.pxmid=z(pe,be+=he*ee.v/2),ee.midangle=be,le=z(pe,be+=he*ee.v/2),ee.stopangle=be,ee[De]=le,ee.largeArc=ee.v>ce.vTotal/2?1:0,ee.halfangle=Math.PI*Math.min(ee.v/ce.vTotal,.5),ee.ring=1-de.hole,ee.rInscribed=C(ee,ce))})(V),j.attr("stroke-linejoin","round"),j.each(function(){var U=p.select(this).selectAll("g.slice").data(V);U.enter().append("g").classed("slice",!0),U.exit().remove();var te=[[[],[]],[[],[]]],ee=!1;U.each(function(De,Se){if(De.hidden)p.select(this).selectAll("path,g").remove();else{De.pointNumber=De.i,De.curveNumber=oe.index,te[De.pxmid[1]<0?0:1][De.pxmid[0]<0?0:1].push(De);var ke=H.cx,Fe=H.cy,ve=p.select(this),Te=ve.selectAll("path.surface").data([De]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ve.call(h,K,V),oe.pull){var Le=+u.castOption(oe.pull,De.pts)||0;Le>0&&(ke+=Le*De.pxmid[0],Fe+=Le*De.pxmid[1])}De.cxFinal=ke,De.cyFinal=Fe;var Oe=oe.hole;if(De.v===H.vTotal){var Ne="M"+(ke+De.px0[0])+","+(Fe+De.px0[1])+ze(De.px0,De.pxmid,!0,1)+ze(De.pxmid,De.px0,!0,1)+"Z";Te.attr("d",Oe?"M"+(ke+Oe*De.px0[0])+","+(Fe+Oe*De.px0[1])+ze(De.px0,De.pxmid,!1,Oe)+ze(De.pxmid,De.px0,!1,Oe)+"Z"+Ne:Ne)}else{var Be=ze(De.px0,De.px1,!0,1);if(Oe){var He=1-Oe;Te.attr("d","M"+(ke+Oe*De.px1[0])+","+(Fe+Oe*De.px1[1])+ze(De.px1,De.px0,!1,Oe)+"l"+He*De.px0[0]+","+He*De.px0[1]+Be+"Z")}else Te.attr("d","M"+ke+","+Fe+"l"+De.px0[0]+","+De.px0[1]+Be+"Z")}q(K,De,H);var Ve=u.castOption(oe.textposition,De.pts),it=ve.selectAll("g.slicetext").data(De.text&&"none"!==Ve?[0]:[]);it.enter().append("g").classed("slicetext",!0),it.exit().remove(),it.each(function(){var ft,st,Ct,je=r.ensureSingle(p.select(this),"text","",function(ft){ft.attr("data-notex",1)}),qe=r.ensureUniformFontSize(K,"outside"===Ve?(Ct=X.font,{color:u.castOption((ft=oe).outsidetextfont.color,(st=De).pts)||u.castOption(ft.textfont.color,st.pts)||Ct.color,family:u.castOption(ft.outsidetextfont.family,st.pts)||u.castOption(ft.textfont.family,st.pts)||Ct.family,size:u.castOption(ft.outsidetextfont.size,st.pts)||u.castOption(ft.textfont.size,st.pts)||Ct.size}):a(oe,De,X.font));je.text(De.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,qe).call(n.convertToTspans,K);var Ye,ct=e.bBox(je.node());if("outside"===Ve)Ye=P(ct,De);else if(Ye=c(ct,De,H),"auto"===Ve&&Ye.scale<1){var vt=r.ensureUniformFontSize(K,oe.outsidetextfont);je.call(e.font,vt),Ye=P(ct=e.bBox(je.node()),De)}var wt=Ye.textPosAngle,Ot=void 0===wt?De.pxmid:z(H.r,wt);if(Ye.targetX=ke+Ot[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=Fe+Ot[1]*Ye.rCenter+(Ye.y||0),G(Ye,ct),Ye.outside){var St=Ye.targetY;De.yLabelMin=St-ct.height/2,De.yLabelMid=St,De.yLabelMax=St+ct.height/2,De.labelExtraX=0,De.labelExtraY=0,ee=!0}Ye.fontSize=qe.size,l(oe.type,Ye,X),V[Se].transform=Ye,je.attr("transform",r.getTextTransform(Ye))})}function ze(je,qe,Ye,ct){return"a"+ct*H.r+","+ct*H.r+" 0 "+De.largeArc+(Ye?" 1 ":" 0 ")+ct*(qe[0]-je[0])+","+ct*(qe[1]-je[1])}});var Se,le=p.select(this).selectAll("g.titletext").data(oe.title.text?[0]:[]);if(le.enter().append("g").classed("titletext",!0),le.exit().remove(),le.each(function(){var De,Fe,ve,Se=r.ensureSingle(p.select(this),"text","",function(Fe){Fe.attr("data-notex",1)}),ke=oe.title.text;oe._meta&&(ke=r.templateString(ke,oe._meta)),Se.text(ke).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,oe.title.font).call(n.convertToTspans,K),De="middle center"===oe.title.position?(Fe=H,ve=Math.sqrt(Fe.titleBox.width*Fe.titleBox.width+Fe.titleBox.height*Fe.titleBox.height),{x:Fe.cx,y:Fe.cy,scale:Fe.trace.hole*Fe.r*2/ve,tx:0,ty:-Fe.titleBox.height/2+Fe.trace.title.font.size}):L(H,J),Se.attr("transform",o(De.x,De.y)+t(Math.min(1,De.scale))+o(De.tx,De.ty))}),ee&&function(De,Se){var ke,Fe,ve,Te,Le,Oe,Ne,Be,He,Ve,it,ze,je;function qe(wt,Ot){return wt.pxmid[1]-Ot.pxmid[1]}function Ye(wt,Ot){return Ot.pxmid[1]-wt.pxmid[1]}function ct(wt,Ot){Ot||(Ot={});var St,ft,st,Ct,$t=Ot.labelExtraY+(Fe?Ot.yLabelMax:Ot.yLabelMin),rn=Fe?wt.yLabelMin:wt.yLabelMax,hn=Fe?wt.yLabelMax:wt.yLabelMin,cn=wt.cyFinal+Le(wt.px0[1],wt.px1[1]),mn=$t-rn;if(mn*Ne>0&&(wt.labelExtraY=mn),Array.isArray(Se.pull))for(ft=0;ft<Ve.length;ft++)(st=Ve[ft])===wt||(u.castOption(Se.pull,wt.pts)||0)>=(u.castOption(Se.pull,st.pts)||0)||((wt.pxmid[1]-st.pxmid[1])*Ne>0?(mn=st.cyFinal+Le(st.px0[1],st.px1[1])-rn-wt.labelExtraY)*Ne>0&&(wt.labelExtraY+=mn):(hn+wt.labelExtraY-cn)*Ne>0&&(St=3*Oe*Math.abs(ft-Ve.indexOf(wt)),(Ct=st.cxFinal+Te(st.px0[0],st.px1[0])+St-(wt.cxFinal+wt.pxmid[0])-wt.labelExtraX)*Oe>0&&(wt.labelExtraX+=Ct)))}for(Fe=0;Fe<2;Fe++)for(ve=Fe?qe:Ye,Le=Fe?Math.max:Math.min,Ne=Fe?1:-1,ke=0;ke<2;ke++){for(Te=ke?Math.max:Math.min,Oe=ke?1:-1,(Be=De[Fe][ke]).sort(ve),Ve=(He=De[1-Fe][ke]).concat(Be),ze=[],it=0;it<Be.length;it++)void 0!==Be[it].yLabelMid&&ze.push(Be[it]);for(je=!1,it=0;Fe&&it<He.length;it++)if(void 0!==He[it].yLabelMid){je=He[it];break}for(it=0;it<ze.length;it++){var vt=it&&ze[it-1];je&&!it&&(vt=je),ct(ze[it],vt)}}}(te,oe),Se=oe,U.each(function(ke){var Fe=p.select(this);if(ke.labelExtraX||ke.labelExtraY){var ve=Fe.select("g.slicetext text");ke.transform.targetX+=ke.labelExtraX,ke.transform.targetY+=ke.labelExtraY,ve.attr("transform",r.getTextTransform(ke.transform));var Te=ke.cxFinal+ke.pxmid[0],Le="M"+Te+","+(ke.cyFinal+ke.pxmid[1]),Oe=(ke.yLabelMax-ke.yLabelMin)*(ke.pxmid[0]<0?-1:1)/4;if(ke.labelExtraX){var Ne=ke.labelExtraX*ke.pxmid[1]/ke.pxmid[0],Be=ke.yLabelMid+ke.labelExtraY-(ke.cyFinal+ke.pxmid[1]);Math.abs(Ne)>Math.abs(Be)?Le+="l"+Be*ke.pxmid[0]/ke.pxmid[1]+","+Be+"H"+(Te+ke.labelExtraX+Oe):Le+="l"+ke.labelExtraX+","+Ne+"v"+(Be-Ne)+"h"+Oe}else Le+="V"+(ke.yLabelMid+ke.labelExtraY)+"h"+Oe;r.ensureSingle(Fe,"path","textline").call(y.stroke,Se.outsidetextfont.color).attr({"stroke-width":Math.min(2,Se.outsidetextfont.size/8),d:Le,fill:"none"})}else Fe.select("path.textline").remove()}),ee&&oe.automargin){var ce=e.bBox(j.node()),pe=oe.domain,he=(J.w*(pe.x[1]-pe.x[0])*.5-H.r)/J.w,xe=(J.h*(pe.y[1]-pe.y[0])*.5-H.r)/J.h;g.autoMargin(K,"pie."+oe.uid+".automargin",{xl:pe.x[0]-he,xr:pe.x[1]+he,yb:pe.y[0]-xe,yt:pe.y[1]+xe,l:Math.max(H.cx-H.r-ce.left,0),r:Math.max(ce.right-(H.cx+H.r),0),b:Math.max(ce.bottom-(H.cy+H.r),0),t:Math.max(H.cy-H.r-ce.top,0),pad:5})}})});setTimeout(function(){se.selectAll("tspan").each(function(){var V=p.select(this);V.attr("dy")&&V.attr("dy",V.attr("dy"))})},0)},formatSliceLabel:q,transformInsideText:c,determineInsideTextFont:a,positionTitleOutside:L,prerenderTitles:_,layoutAreas:N,attachFxHandlers:h,computeTransform:G}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("./style_one"),b=v("../bar/uniform_text").resizeText;ae.exports=function(y){var e=y._fullLayout._pielayer.selectAll(".trace");b(y,e,"pie"),e.each(function(r){var t=r[0].trace,o=p.select(this);o.style({opacity:t.opacity}),o.selectAll("path.surface").each(function(n){p.select(this).call(g,n,t)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("./helpers").castOption;ae.exports=function(b,y,e){var r=e.marker.line,t=g(r.color,y.pts)||p.defaultLine,o=g(r.width,y.pts)||0;b.style("stroke-width",o).call(p.fill,y.color).call(p.stroke,t)}},{"../../components/color":367,"./helpers":915}],922:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes");ae.exports={x:p.x,y:p.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:p.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_pointcloud2d,g=v("../../lib/str2rgbarray"),b=v("../../plots/cartesian/autorange").findExtremes,y=v("../scatter/get_trace_color");function e(t,o){this.scene=t,this.uid=o,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=p(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var r=e.prototype;r.handlePick=function(t){var o=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*o],this.pickXYData[2*o+1]]:[this.pickXData[o],this.pickYData[o]],textLabel:Array.isArray(this.textLabels)?this.textLabels[o]:this.textLabels,color:this.color,name:this.name,pointIndex:o,hoverinfo:this.hoverinfo}},r.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=y(t,{})},r.updateFast=function(t){var o,n,m,l,i,f,u=this.xData=this.pickXData=t.x,s=this.yData=this.pickYData=t.y,d=this.pickXYData=t.xy,a=t.indices,_=this.bounds;if(d){if(m=d,o=d.length>>>1,t.xbounds&&t.ybounds)_[0]=t.xbounds[0],_[2]=t.xbounds[1],_[1]=t.ybounds[0],_[3]=t.ybounds[1];else for(f=0;f<o;f++)i=m[2*f+1],(l=m[2*f])<_[0]&&(_[0]=l),l>_[2]&&(_[2]=l),i<_[1]&&(_[1]=i),i>_[3]&&(_[3]=i);if(a)n=a;else for(n=new Int32Array(o),f=0;f<o;f++)n[f]=f}else for(o=u.length,m=new Float32Array(2*o),n=new Int32Array(o),f=0;f<o;f++)l=u[f],i=s[f],n[f]=f,m[2*f]=l,m[2*f+1]=i,l<_[0]&&(_[0]=l),l>_[2]&&(_[2]=l),i<_[1]&&(_[1]=i),i>_[3]&&(_[3]=i);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=m;var c=g(t.marker.color),T=g(t.marker.border.color),x=t.opacity*t.marker.opacity;c[3]*=x,this.pointcloudOptions.color=c;var w=t.marker.blend;null===w&&(w=u.length<100||s.length<100),this.pointcloudOptions.blend=w,T[3]*=x,this.pointcloudOptions.borderColor=T;var M=t.marker.sizemin,D=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=M,this.pointcloudOptions.sizeMax=D,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var C=this.scene.xaxis,P=this.scene.yaxis,L=D/2||.5;t._extremes[C._id]=b(C,[_[0],_[2]],{ppad:L}),t._extremes[P._id]=b(P,[_[1],_[3]],{ppad:L})},r.dispose=function(){this.pointcloud.dispose()},ae.exports=function(t,o){var n=new e(t,o.uid);return n.update(o),n}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes");ae.exports=function(b,y,e){function r(t,o){return p.coerce(b,y,g,t,o)}r("x"),r("y"),r("xbounds"),r("ybounds"),b.xy&&b.xy instanceof Float32Array&&(y.xy=b.xy),b.indices&&b.indices instanceof Int32Array&&(y.indices=b.indices),r("text"),r("marker.color",e),r("marker.opacity"),r("marker.blend"),r("marker.sizemin"),r("marker.sizemax"),r("marker.border.color",e),r("marker.border.arearatio"),y._length=null}},{"../../lib":515,"./attributes":922}],925:[function(v,ae,ie){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../scatter3d/calc"),plot:v("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(v,ae,ie){"use strict";var p=v("../../plots/font_attributes"),g=v("../../plots/attributes"),b=v("../../components/color/attributes"),y=v("../../components/fx/attributes"),e=v("../../plots/domain").attributes,r=v("../../plots/template_attributes").hovertemplateAttrs,t=v("../../components/colorscale/attributes"),o=v("../../plot_api/plot_template").templatedArray,n=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,m=v("../../lib/extend").extendFlat,l=v("../../plot_api/edit_types").overrideAll;(ae.exports=l({hoverinfo:m({},g.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:y.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:p({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]}),colorscales:o("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:m(t().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(v,ae,ie){"use strict";var p=v("../../plot_api/edit_types").overrideAll,g=v("../../plots/get_data").getModuleCalcData,b=v("./plot"),y=v("../../components/fx/layout_attributes"),e=v("../../lib/setcursor"),r=v("../../components/dragelement"),t=v("../../components/selections").prepSelect,o=v("../../lib"),n=v("../../registry");function m(l,i){var f=l._fullData[i],u=l._fullLayout,s=u.dragmode,h=f._bgRect;if(h&&"pan"!==s&&"zoom"!==s){e(h,"pan"===u.dragmode?"move":"crosshair");var a={_id:"x",c2p:o.identity,_offset:f._sankey.translateX,_length:f._sankey.width},_={_id:"y",c2p:o.identity,_offset:f._sankey.translateY,_length:f._sankey.height},c={gd:l,element:h.node(),plotinfo:{id:i,xaxis:a,yaxis:_,fillRangeItems:o.noop},subplot:i,xaxes:[a],yaxes:[_],doneFnCompleted:function(T){var x,w=l._fullData[i],M=w.node.groups.slice(),D=[];function C(E){for(var N=w._sankey.graph.nodes,z=0;z<N.length;z++)if(N[z].pointNumber===E)return N[z]}for(var P=0;P<T.length;P++){var L=C(T[P].pointNumber);if(L)if(L.group){for(var S=0;S<L.childrenNodes.length;S++)D.push(L.childrenNodes[S].pointNumber);M[L.pointNumber-w.node._count]=!1}else D.push(L.pointNumber)}x=M.filter(Boolean).concat([D]),n.call("_guiRestyle",l,{"node.groups":[x]},i)},prepFn:function(T,x,w){t(T,x,w,c,s)}};r.init(c)}}ie.name="sankey",ie.baseLayoutAttrOverrides=p({hoverlabel:y.hoverlabel},"plot","nested"),ie.plot=function(l){var i=g(l.calcdata,"sankey")[0];b(l,i),ie.updateFx(l)},ie.clean=function(l,i,f,u){var s=u._has&&u._has("sankey"),d=i._has&&i._has("sankey");s&&!d&&(u._paperdiv.selectAll(".sankey").remove(),u._paperdiv.selectAll(".bgsankey").remove())},ie.updateFx=function(l){for(var i=0;i<l._fullData.length;i++)m(l,i)}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(v,ae,ie){"use strict";var p=v("strongly-connected-components"),g=v("../../lib"),b=v("../../lib/gup").wrap,y=g.isArrayOrTypedArray,e=g.isIndex,r=v("../../components/colorscale");ae.exports=function(o,n){var m=function t(o){var n,m=o.node,l=o.link,i=[],f=y(l.color),u=y(l.customdata),s={},d={},h=l.colorscales.length;for(n=0;n<h;n++){var a=l.colorscales[n],_=r.extractScale(a,{cLetter:"c"}),c=r.makeColorScaleFunc(_);d[a.label]=c}var T=0;for(n=0;n<l.value.length;n++)l.source[n]>T&&(T=l.source[n]),l.target[n]>T&&(T=l.target[n]);var x,w=T+1;o.node._count=w;var M=o.node.groups,D={};for(n=0;n<M.length;n++){var C=M[n];for(x=0;x<C.length;x++){var P=C[x],L=w+n;D.hasOwnProperty(P)?g.warn("Node "+P+" is already part of a group."):D[P]=L}}var S={source:[],target:[]};for(n=0;n<l.value.length;n++){var E=l.value[n],N=l.source[n],z=l.target[n];if(E>0&&e(N,w)&&e(z,w)&&(!D.hasOwnProperty(N)||!D.hasOwnProperty(z)||D[N]!==D[z])){D.hasOwnProperty(z)&&(z=D[z]),D.hasOwnProperty(N)&&(N=D[N]),s[N=+N]=s[z=+z]=!0;var q="";l.label&&l.label[n]&&(q=l.label[n]);var G=null;q&&d.hasOwnProperty(q)&&(G=d[q]),i.push({pointNumber:n,label:q,color:f?l.color[n]:l.color,customdata:u?l.customdata[n]:l.customdata,concentrationscale:G,source:N,target:z,value:+E}),S.source.push(N),S.target.push(z)}}var K=w+M.length,ne=y(m.color),X=y(m.customdata),J=[];for(n=0;n<K;n++)s[n]&&J.push({group:n>w-1,childrenNodes:[],pointNumber:n,label:m.label[n],color:ne?m.color[n]:m.color,customdata:X?m.customdata[n]:m.customdata});var V=!1;return function(j,H,oe){for(var U=g.init2dArray(j,0),te=0;te<Math.min(H.length,oe.length);te++)if(g.isIndex(H[te],j)&&g.isIndex(oe[te],j)){if(H[te]===oe[te])return!0;U[H[te]].push(oe[te])}return p(U).components.some(function(ee){return ee.length>1})}(K,S.source,S.target)&&(V=!0),{circular:V,links:i,nodes:J,groups:M,groupLookup:D}}(n);return b({circular:m.circular,_nodes:m.nodes,_links:m.links,_groups:m.groups,_groupLookup:m.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(v,ae,ie){"use strict";ae.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../components/color"),y=v("tinycolor2"),e=v("../../plots/domain").defaults,r=v("../../components/fx/hoverlabel_defaults"),t=v("../../plot_api/plot_template"),o=v("../../plots/array_container_defaults");function n(m,l){function i(f,u){return p.coerce(m,l,g.link.colorscales,f,u)}i("label"),i("cmin"),i("cmax"),i("colorscale")}ae.exports=function(m,l,i,f){function u(D,C){return p.coerce(m,l,g,D,C)}var s=p.extendDeep(f.hoverlabel,m.hoverlabel),d=m.node,h=t.newContainer(l,"node");function a(D,C){return p.coerce(d,h,g.node,D,C)}a("label"),a("groups"),a("x"),a("y"),a("pad"),a("thickness"),a("line.color"),a("line.width"),a("hoverinfo",m.hoverinfo),r(d,h,a,s),a("hovertemplate");var _=f.colorway;a("color",h.label.map(function(D,C){return b.addOpacity(_[C%_.length],.8)})),a("customdata");var c=m.link||{},T=t.newContainer(l,"link");function x(D,C){return p.coerce(c,T,g.link,D,C)}x("label"),x("arrowlen"),x("source"),x("target"),x("value"),x("line.color"),x("line.width"),x("hoverinfo",m.hoverinfo),r(c,T,x,s),x("hovertemplate");var w,M=y(f.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";x("color",p.repeat(M,T.value.length)),x("customdata"),o(c,T,{name:"colorscales",handleItemDefaults:n}),e(l,f,u),u("orientation"),u("valueformat"),u("valuesuffix"),h.x.length&&h.y.length&&(w="freeform"),u("arrangement",w),p.coerceFont(u,"textfont",p.extendFlat({},f.font)),l._length=null}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"sankey",basePlotModule:v("./base_plot"),selectPoints:v("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=g.numberFormat,y=v("./render"),e=v("../../components/fx"),r=v("../../components/color"),t=v("./constants").cn,o=g._;function n(c){return""!==c}function m(c,T){return c.filter(function(x){return x.key===T.traceId})}function l(c,T){p.select(c).select("path").style("fill-opacity",T),p.select(c).select("rect").style("fill-opacity",T)}function i(c){p.select(c).select("text.name").style("fill","black")}function f(c){return function(T){return-1!==c.node.sourceLinks.indexOf(T.link)||-1!==c.node.targetLinks.indexOf(T.link)}}function u(c){return function(T){return-1!==T.node.sourceLinks.indexOf(c.link)||-1!==T.node.targetLinks.indexOf(c.link)}}function s(c,T,x){T&&x&&m(x,T).selectAll("."+t.sankeyLink).filter(f(T)).call(h.bind(0,T,x,!1))}function d(c,T,x){T&&x&&m(x,T).selectAll("."+t.sankeyLink).filter(f(T)).call(a.bind(0,T,x,!1))}function h(c,T,x,w){var M=w.datum().link.label;w.style("fill-opacity",function(D){if(!D.link.concentrationscale)return.4}),M&&m(T,c).selectAll("."+t.sankeyLink).filter(function(D){return D.link.label===M}).style("fill-opacity",function(D){if(!D.link.concentrationscale)return.4}),x&&m(T,c).selectAll("."+t.sankeyNode).filter(u(c)).call(s)}function a(c,T,x,w){var M=w.datum().link.label;w.style("fill-opacity",function(D){return D.tinyColorAlpha}),M&&m(T,c).selectAll("."+t.sankeyLink).filter(function(D){return D.link.label===M}).style("fill-opacity",function(D){return D.tinyColorAlpha}),x&&m(T,c).selectAll(t.sankeyNode).filter(u(c)).call(d)}function _(c,T){var w=g.nestedProperty(c.hoverlabel||{},T).get();return!Array.isArray(w)&&w}ae.exports=function(c,T){for(var x=c._fullLayout,w=x._paper,M=x._size,D=0;D<c._fullData.length;D++)if(c._fullData[D].visible&&c._fullData[D].type===t.sankey&&!c._fullData[D]._viewInitial){var C=c._fullData[D].node;c._fullData[D]._viewInitial={node:{groups:C.groups.slice(),x:C.x.slice(),y:C.y.slice()}}}var P=o(c,"source:")+" ",L=o(c,"target:")+" ",S=o(c,"concentration:")+" ",E=o(c,"incoming flow count:")+" ",N=o(c,"outgoing flow count:")+" ";y(c,w,T,{width:M.w,height:M.h,margin:{t:M.t,r:M.r,b:M.b,l:M.l}},{linkEvents:{hover:function(z,q,G){!1!==c._fullLayout.hovermode&&(p.select(z).call(h.bind(0,q,G,!0)),"skip"!==q.link.trace.link.hoverinfo&&(q.link.fullData=q.link.trace,c.emit("plotly_hover",{event:p.event,points:[q.link]})))},follow:function(z,q){if(!1!==c._fullLayout.hovermode){var G=q.link.trace.link;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){for(var K=[],ne=0,X=0;X<q.flow.links.length;X++){var J=q.flow.links[X];if("closest"!==c._fullLayout.hovermode||q.link.pointNumber===J.pointNumber){q.link.pointNumber===J.pointNumber&&(ne=X),J.fullData=J.trace,G=q.link.trace.link;var se=j(J),V={valueLabel:b(q.valueFormat)(J.value)+q.valueSuffix};K.push({x:se[0],y:se[1],name:V.valueLabel,text:[J.label||"",P+J.source.label,L+J.target.label,J.concentrationscale?S+b("%0.2f")(J.flow.labelConcentration):""].filter(n).join("<br>"),color:_(G,"bgcolor")||r.addOpacity(J.color,1),borderColor:_(G,"bordercolor"),fontFamily:_(G,"font.family"),fontSize:_(G,"font.size"),fontColor:_(G,"font.color"),nameLength:_(G,"namelength"),textAlign:_(G,"align"),idealAlign:p.event.x<se[0]?"right":"left",hovertemplate:G.hovertemplate,hovertemplateLabels:V,eventData:[J]})}}e.loneHover(K,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:c,anchorIndex:ne}).each(function(){q.link.concentrationscale||l(this,.65),i(this)})}}function j(H){var oe,U;H.circular?(oe=(H.circularPathData.leftInnerExtent+H.circularPathData.rightInnerExtent)/2,U=H.circularPathData.verticalFullExtent):(oe=(H.source.x1+H.target.x0)/2,U=(H.y0+H.y1)/2);var te=[oe,U];return"v"===H.trace.orientation&&te.reverse(),te[0]+=q.parent.translateX,te[1]+=q.parent.translateY,te}},unhover:function(z,q,G){!1!==c._fullLayout.hovermode&&(p.select(z).call(a.bind(0,q,G,!0)),"skip"!==q.link.trace.link.hoverinfo&&(q.link.fullData=q.link.trace,c.emit("plotly_unhover",{event:p.event,points:[q.link]})),e.loneUnhover(x._hoverlayer.node()))},select:function(z,q){var G=q.link;G.originalEvent=p.event,c._hoverdata=[G],e.click(c,{target:!0})}},nodeEvents:{hover:function(z,q,G){!1!==c._fullLayout.hovermode&&(p.select(z).call(s,q,G),"skip"!==q.node.trace.node.hoverinfo&&(q.node.fullData=q.node.trace,c.emit("plotly_hover",{event:p.event,points:[q.node]})))},follow:function(z,q){if(!1!==c._fullLayout.hovermode){var G=q.node.trace.node;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){var K=p.select(z).select("."+t.nodeRect),ne=c._fullLayout._paperdiv.node().getBoundingClientRect(),X=K.node().getBoundingClientRect(),J=X.left-2-ne.left,se=X.right+2-ne.left,V=X.top+X.height/4-ne.top,j={valueLabel:b(q.valueFormat)(q.node.value)+q.valueSuffix};q.node.fullData=q.node.trace,c._fullLayout._calcInverseTransform(c);var H=c._fullLayout._invScaleX,U=e.loneHover({x0:H*J,x1:H*se,y:c._fullLayout._invScaleY*V,name:b(q.valueFormat)(q.node.value)+q.valueSuffix,text:[q.node.label,E+q.node.targetLinks.length,N+q.node.sourceLinks.length].filter(n).join("<br>"),color:_(G,"bgcolor")||q.tinyColorHue,borderColor:_(G,"bordercolor"),fontFamily:_(G,"font.family"),fontSize:_(G,"font.size"),fontColor:_(G,"font.color"),nameLength:_(G,"namelength"),textAlign:_(G,"align"),idealAlign:"left",hovertemplate:G.hovertemplate,hovertemplateLabels:j,eventData:[q.node]},{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:c});l(U,.85),i(U)}}},unhover:function(z,q,G){!1!==c._fullLayout.hovermode&&(p.select(z).call(d,q,G),"skip"!==q.node.trace.node.hoverinfo&&(q.node.fullData=q.node.trace,c.emit("plotly_unhover",{event:p.event,points:[q.node]})),e.loneUnhover(x._hoverlayer.node()))},select:function(z,q,G){var K=q.node;K.originalEvent=p.event,c._hoverdata=[K],p.select(z).call(d,q,G),e.click(c,{target:!0})}}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(v,ae,ie){"use strict";var p=v("d3-force"),g=v("d3-interpolate").interpolateNumber,b=v("@plotly/d3"),y=v("@plotly/d3-sankey"),e=v("@plotly/d3-sankey-circular"),r=v("./constants"),t=v("tinycolor2"),o=v("../../components/color"),n=v("../../components/drawing"),m=v("../../lib"),l=m.strTranslate,i=m.strRotate,f=v("../../lib/gup"),u=f.keyFun,s=f.repeat,d=f.unwrap,h=v("../../lib/svg_text_utils"),a=v("../../registry"),_=v("../../constants/alignment"),c=_.CAP_SHIFT,T=_.LINE_SPACING;function x(X,J,se){var V,j=d(J),H=j.trace,oe=H.domain,U="h"===H.orientation,te=H.node.pad,ee=H.node.thickness,le=X.width*(oe.x[1]-oe.x[0]),ce=X.height*(oe.y[1]-oe.y[0]),pe=j._nodes,de=j._links,be=j.circular;(V=be?e.sankeyCircular().circularLinkGap(0):y.sankey()).iterations(r.sankeyIterations).size(U?[le,ce]:[ce,le]).nodeWidth(ee).nodePadding(te).nodeId(function(Ne){return Ne.pointNumber}).nodes(pe).links(de);var he,xe,De,Se=V();for(var ke in V.nodePadding()<te&&m.warn("node.pad was reduced to ",V.nodePadding()," to fit within the figure."),j._groupLookup){var Fe,ve=parseInt(j._groupLookup[ke]);for(he=0;he<Se.nodes.length;he++)if(Se.nodes[he].pointNumber===ve){Fe=Se.nodes[he];break}if(Fe){var Te={pointNumber:parseInt(ke),x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Se.nodes.unshift(Te),Fe.childrenNodes.unshift(Te)}}if(function(){for(he=0;he<Se.nodes.length;he++){var Ne,Be,He=Se.nodes[he],Ve={};for(xe=0;xe<He.targetLinks.length;xe++)Ne=(Be=He.targetLinks[xe]).source.pointNumber+":"+Be.target.pointNumber,Ve.hasOwnProperty(Ne)||(Ve[Ne]=[]),Ve[Ne].push(Be);var it=Object.keys(Ve);for(xe=0;xe<it.length;xe++){var ze=Ve[Ne=it[xe]],je=0,qe={};for(De=0;De<ze.length;De++)qe[(Be=ze[De]).label]||(qe[Be.label]=0),qe[Be.label]+=Be.value,je+=Be.value;for(De=0;De<ze.length;De++)(Be=ze[De]).flow={value:je,labelConcentration:qe[Be.label]/je,concentration:Be.value/je,links:ze},Be.concentrationscale&&(Be.color=t(Be.concentrationscale(Be.flow.labelConcentration)))}var Ye=0;for(xe=0;xe<He.sourceLinks.length;xe++)Ye+=He.sourceLinks[xe].value;for(xe=0;xe<He.sourceLinks.length;xe++)(Be=He.sourceLinks[xe]).concentrationOut=Be.value/Ye;var ct=0;for(xe=0;xe<He.targetLinks.length;xe++)ct+=He.targetLinks[xe].value;for(xe=0;xe<He.targetLinks.length;xe++)(Be=He.targetLinks[xe]).concenrationIn=Be.value/ct}}(),H.node.x.length&&H.node.y.length){for(he=0;he<Math.min(H.node.x.length,H.node.y.length,Se.nodes.length);he++)if(H.node.x[he]&&H.node.y[he]){var Le=[H.node.x[he]*le,H.node.y[he]*ce];Se.nodes[he].x0=Le[0]-ee/2,Se.nodes[he].x1=Le[0]+ee/2;var Oe=Se.nodes[he].y1-Se.nodes[he].y0;Se.nodes[he].y0=Le[1]-Oe/2,Se.nodes[he].y1=Le[1]+Oe/2}"snap"===H.arrangement&&function(Ne){var Be,He,Ve=Ne.map(function(Ye,ct){return{x0:Ye.x0,index:ct}}).sort(function(Ye,ct){return Ye.x0-ct.x0}),it=[],ze=-1,je=-1/0;for(he=0;he<Ve.length;he++){var qe=Ne[Ve[he].index];qe.x0>je+ee&&(ze+=1,Be=qe.x0),je=qe.x0,it[ze]||(it[ze]=[]),it[ze].push(qe),qe.x0+=He=Be-qe.x0,qe.x1+=He}return it}(pe=Se.nodes).forEach(function(Be){var He,Ve,it,ze=0,je=Be.length;for(Be.sort(function(qe,Ye){return qe.y0-Ye.y0}),it=0;it<je;++it)(He=Be[it]).y0>=ze||(Ve=ze-He.y0)>1e-6&&(He.y0+=Ve,He.y1+=Ve),ze=He.y1+te}),V.update(Se)}return{circular:be,key:se,trace:H,guid:m.randstr(),horizontal:U,width:le,height:ce,nodePad:H.node.pad,nodeLineColor:H.node.line.color,nodeLineWidth:H.node.line.width,linkLineColor:H.link.line.color,linkLineWidth:H.link.line.width,linkArrowLength:H.link.arrowlen,valueFormat:H.valueformat,valueSuffix:H.valuesuffix,textFont:H.textfont,translateX:oe.x[0]*X.width+X.margin.l,translateY:X.height-oe.y[1]*X.height+X.margin.t,dragParallel:U?ce:le,dragPerpendicular:U?le:ce,arrangement:H.arrangement,sankey:V,graph:Se,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(X,J,se){var V=t(J.color),j=J.source.label+"|"+J.target.label+"__"+se;return J.trace=X.trace,J.curveNumber=X.trace.index,{circular:X.circular,key:j,traceId:X.key,pointNumber:J.pointNumber,link:J,tinyColorHue:o.tinyRGB(V),tinyColorAlpha:V.getAlpha(),linkPath:M,linkLineColor:X.linkLineColor,linkLineWidth:X.linkLineWidth,linkArrowLength:X.linkArrowLength,valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,parent:X,interactionState:X.interactionState,flow:J.flow}}function M(){return function(X){var xe,De,Se,ke,J=X.linkArrowLength;if(X.link.circular)return De=J,Se=(xe=X.link).width/2,ke=xe.circularPathData,"top"===xe.circularLinkType?"M "+(ke.targetX-De)+" "+(ke.targetY+Se)+" L"+(ke.rightInnerExtent-De)+" "+(ke.targetY+Se)+"A"+(ke.rightLargeArcRadius+Se)+" "+(ke.rightSmallArcRadius+Se)+" 0 0 1 "+(ke.rightFullExtent-Se-De)+" "+(ke.targetY-ke.rightSmallArcRadius)+"L"+(ke.rightFullExtent-Se-De)+" "+ke.verticalRightInnerExtent+"A"+(ke.rightLargeArcRadius+Se)+" "+(ke.rightLargeArcRadius+Se)+" 0 0 1 "+(ke.rightInnerExtent-De)+" "+(ke.verticalFullExtent-Se)+"L"+ke.leftInnerExtent+" "+(ke.verticalFullExtent-Se)+"A"+(ke.leftLargeArcRadius+Se)+" "+(ke.leftLargeArcRadius+Se)+" 0 0 1 "+(ke.leftFullExtent+Se)+" "+ke.verticalLeftInnerExtent+"L"+(ke.leftFullExtent+Se)+" "+(ke.sourceY-ke.leftSmallArcRadius)+"A"+(ke.leftLargeArcRadius+Se)+" "+(ke.leftSmallArcRadius+Se)+" 0 0 1 "+ke.leftInnerExtent+" "+(ke.sourceY+Se)+"L"+ke.sourceX+" "+(ke.sourceY+Se)+"L"+ke.sourceX+" "+(ke.sourceY-Se)+"L"+ke.leftInnerExtent+" "+(ke.sourceY-Se)+"A"+(ke.leftLargeArcRadius-Se)+" "+(ke.leftSmallArcRadius-Se)+" 0 0 0 "+(ke.leftFullExtent-Se)+" "+(ke.sourceY-ke.leftSmallArcRadius)+"L"+(ke.leftFullExtent-Se)+" "+ke.verticalLeftInnerExtent+"A"+(ke.leftLargeArcRadius-Se)+" "+(ke.leftLargeArcRadius-Se)+" 0 0 0 "+ke.leftInnerExtent+" "+(ke.verticalFullExtent+Se)+"L"+(ke.rightInnerExtent-De)+" "+(ke.verticalFullExtent+Se)+"A"+(ke.rightLargeArcRadius-Se)+" "+(ke.rightLargeArcRadius-Se)+" 0 0 0 "+(ke.rightFullExtent+Se-De)+" "+ke.verticalRightInnerExtent+"L"+(ke.rightFullExtent+Se-De)+" "+(ke.targetY-ke.rightSmallArcRadius)+"A"+(ke.rightLargeArcRadius-Se)+" "+(ke.rightSmallArcRadius-Se)+" 0 0 0 "+(ke.rightInnerExtent-De)+" "+(ke.targetY-Se)+"L"+(ke.targetX-De)+" "+(ke.targetY-Se)+(De>0?"L"+ke.targetX+" "+ke.targetY:"")+"Z":"M "+(ke.targetX-De)+" "+(ke.targetY-Se)+" L"+(ke.rightInnerExtent-De)+" "+(ke.targetY-Se)+"A"+(ke.rightLargeArcRadius+Se)+" "+(ke.rightSmallArcRadius+Se)+" 0 0 0 "+(ke.rightFullExtent-Se-De)+" "+(ke.targetY+ke.rightSmallArcRadius)+"L"+(ke.rightFullExtent-Se-De)+" "+ke.verticalRightInnerExtent+"A"+(ke.rightLargeArcRadius+Se)+" "+(ke.rightLargeArcRadius+Se)+" 0 0 0 "+(ke.rightInnerExtent-De)+" "+(ke.verticalFullExtent+Se)+"L"+ke.leftInnerExtent+" "+(ke.verticalFullExtent+Se)+"A"+(ke.leftLargeArcRadius+Se)+" "+(ke.leftLargeArcRadius+Se)+" 0 0 0 "+(ke.leftFullExtent+Se)+" "+ke.verticalLeftInnerExtent+"L"+(ke.leftFullExtent+Se)+" "+(ke.sourceY+ke.leftSmallArcRadius)+"A"+(ke.leftLargeArcRadius+Se)+" "+(ke.leftSmallArcRadius+Se)+" 0 0 0 "+ke.leftInnerExtent+" "+(ke.sourceY-Se)+"L"+ke.sourceX+" "+(ke.sourceY-Se)+"L"+ke.sourceX+" "+(ke.sourceY+Se)+"L"+ke.leftInnerExtent+" "+(ke.sourceY+Se)+"A"+(ke.leftLargeArcRadius-Se)+" "+(ke.leftSmallArcRadius-Se)+" 0 0 1 "+(ke.leftFullExtent-Se)+" "+(ke.sourceY+ke.leftSmallArcRadius)+"L"+(ke.leftFullExtent-Se)+" "+ke.verticalLeftInnerExtent+"A"+(ke.leftLargeArcRadius-Se)+" "+(ke.leftLargeArcRadius-Se)+" 0 0 1 "+ke.leftInnerExtent+" "+(ke.verticalFullExtent-Se)+"L"+(ke.rightInnerExtent-De)+" "+(ke.verticalFullExtent-Se)+"A"+(ke.rightLargeArcRadius-Se)+" "+(ke.rightLargeArcRadius-Se)+" 0 0 1 "+(ke.rightFullExtent+Se-De)+" "+ke.verticalRightInnerExtent+"L"+(ke.rightFullExtent+Se-De)+" "+(ke.targetY+ke.rightSmallArcRadius)+"A"+(ke.rightLargeArcRadius-Se)+" "+(ke.rightSmallArcRadius-Se)+" 0 0 1 "+(ke.rightInnerExtent-De)+" "+(ke.targetY+Se)+"L"+(ke.targetX-De)+" "+(ke.targetY+Se)+(De>0?"L"+ke.targetX+" "+ke.targetY:"")+"Z";var se=Math.abs((X.link.target.x0-X.link.source.x1)/2);J>se&&(J=se);var V=X.link.source.x1,j=X.link.target.x0-J,H=g(V,j),oe=H(.5),U=H(.5),te=X.link.y0-X.link.width/2,ee=X.link.y0+X.link.width/2,le=X.link.y1-X.link.width/2,ce=X.link.y1+X.link.width/2,he=J>0?"L"+(j+J)+","+(le+X.link.width/2):"";return"M"+V+","+te+"C"+oe+","+te+" "+U+","+le+" "+j+","+le+(he+="L"+j+","+ce)+"C"+U+","+ce+" "+oe+","+ee+" "+V+","+ee+"Z"}}function D(X,J){var se=t(J.color),V=r.nodePadAcross,j=X.nodePad/2;J.dx=J.x1-J.x0,J.dy=J.y1-J.y0;var H=J.dx,oe=Math.max(.5,J.dy),U="node_"+J.pointNumber;return J.group&&(U=m.randstr()),J.trace=X.trace,J.curveNumber=X.trace.index,{index:J.pointNumber,key:U,partOfGroup:J.partOfGroup||!1,group:J.group,traceId:X.key,trace:X.trace,node:J,nodePad:X.nodePad,nodeLineColor:X.nodeLineColor,nodeLineWidth:X.nodeLineWidth,textFont:X.textFont,size:X.horizontal?X.height:X.width,visibleWidth:Math.ceil(H),visibleHeight:oe,zoneX:-V,zoneY:-j,zoneWidth:H+2*V,zoneHeight:oe+2*j,labelY:X.horizontal?J.dy/2+1:J.dx/2+1,left:1===J.originalLayer,sizeAcross:X.width,forceLayouts:X.forceLayouts,horizontal:X.horizontal,darkBackground:se.getBrightness()<=128,tinyColorHue:o.tinyRGB(se),tinyColorAlpha:se.getAlpha(),valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,graph:X.graph,arrangement:X.arrangement,uniqueNodeLabelPathId:[X.guid,X.key,U].join("_"),interactionState:X.interactionState,figure:X}}function C(X){X.attr("transform",function(J){return l(J.node.x0.toFixed(3),J.node.y0.toFixed(3))})}function P(X){X.call(C)}function L(X,J){X.call(P),J.attr("d",M())}function S(X){X.attr("width",function(J){return J.node.x1-J.node.x0}).attr("height",function(J){return J.visibleHeight})}function E(X){return X.link.width>1||X.linkLineWidth>0}function N(X){return l(X.translateX,X.translateY)+(X.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function z(X,J,se){X.on(".basic",null).on("mouseover.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(se.hover(this,V,J),V.interactionState.hovered=[this,V])}).on("mousemove.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(se.follow(this,V),V.interactionState.hovered=[this,V])}).on("mouseout.basic",function(V){V.interactionState.dragInProgress||V.partOfGroup||(se.unhover(this,V,J),V.interactionState.hovered=!1)}).on("click.basic",function(V){V.interactionState.hovered&&(se.unhover(this,V,J),V.interactionState.hovered=!1),V.interactionState.dragInProgress||V.partOfGroup||se.select(this,V,J)})}function q(X,J,se,V){var j=b.behavior.drag().origin(function(H){return{x:H.node.x0+H.visibleWidth/2,y:H.node.y0+H.visibleHeight/2}}).on("dragstart",function(H){if("fixed"!==H.arrangement&&(m.ensureSingle(V._fullLayout._infolayer,"g","dragcover",function(U){V._fullLayout._dragCover=U}),m.raiseToTop(this),H.interactionState.dragInProgress=H.node,K(H.node),H.interactionState.hovered&&(se.nodeEvents.unhover.apply(0,H.interactionState.hovered),H.interactionState.hovered=!1),"snap"===H.arrangement)){var oe=H.traceId+"|"+H.key;H.forceLayouts[oe]?H.forceLayouts[oe].alpha(1):function(U,te,ee,le){!function(pe){for(var de=0;de<pe.length;de++)pe[de].y=(pe[de].y0+pe[de].y1)/2,pe[de].x=(pe[de].x0+pe[de].x1)/2}(ee.graph.nodes);var de,be,he,ce=ee.graph.nodes.filter(function(pe){return pe.originalX===ee.node.originalX}).filter(function(pe){return!pe.partOfGroup});ee.forceLayouts[te]=p.forceSimulation(ce).alphaDecay(0).force("collide",p.forceCollide().radius(function(pe){return pe.dy/2+ee.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",(de=te,be=ce,he=ee,function(){for(var xe=0,De=0;De<be.length;De++){var Se=be[De];Se===he.interactionState.dragInProgress?(Se.x=Se.lastDraggedX,Se.y=Se.lastDraggedY):(Se.vx=(Se.originalX-Se.x)/r.forceTicksPerFrame,Se.y=Math.min(he.size-Se.dy/2,Math.max(Se.dy/2,Se.y))),xe=Math.max(xe,Math.abs(Se.vx),Math.abs(Se.vy))}!he.interactionState.dragInProgress&&xe<.1&&he.forceLayouts[de].alpha()>0&&he.forceLayouts[de].alpha(0)})).stop()}(0,oe,H),U=X,te=J,ee=H,le=oe,ce=V,window.requestAnimationFrame(function pe(){var de;for(de=0;de<r.forceTicksPerFrame;de++)ee.forceLayouts[le].tick();if(function(he){for(var xe=0;xe<he.length;xe++)he[xe].y0=he[xe].y-he[xe].dy/2,he[xe].y1=he[xe].y0+he[xe].dy,he[xe].x0=he[xe].x-he[xe].dx/2,he[xe].x1=he[xe].x0+he[xe].dx}(ee.graph.nodes),ee.sankey.update(ee.graph),L(U.filter(ne(ee)),te),ee.forceLayouts[le].alpha()>0)window.requestAnimationFrame(pe);else{var be=ee.node.originalX;ee.node.x0=be-ee.visibleWidth/2,ee.node.x1=be+ee.visibleWidth/2,G(ee,ce)}})}var U,te,ee,le,ce}).on("drag",function(H){if("fixed"!==H.arrangement){var oe=b.event.x,U=b.event.y;"snap"===H.arrangement?(H.node.x0=oe-H.visibleWidth/2,H.node.x1=oe+H.visibleWidth/2,H.node.y0=U-H.visibleHeight/2,H.node.y1=U+H.visibleHeight/2):("freeform"===H.arrangement&&(H.node.x0=oe-H.visibleWidth/2,H.node.x1=oe+H.visibleWidth/2),U=Math.max(0,Math.min(H.size-H.visibleHeight/2,U)),H.node.y0=U-H.visibleHeight/2,H.node.y1=U+H.visibleHeight/2),K(H.node),"snap"!==H.arrangement&&(H.sankey.update(H.graph),L(X.filter(ne(H)),J))}}).on("dragend",function(H){if("fixed"!==H.arrangement){H.interactionState.dragInProgress=!1;for(var oe=0;oe<H.node.childrenNodes.length;oe++)H.node.childrenNodes[oe].x=H.node.x,H.node.childrenNodes[oe].y=H.node.y;"snap"!==H.arrangement&&G(H,V)}});X.on(".drag",null).call(j)}function G(X,J){for(var se=[],V=[],j=0;j<X.graph.nodes.length;j++){var oe=(X.graph.nodes[j].y0+X.graph.nodes[j].y1)/2;se.push((X.graph.nodes[j].x0+X.graph.nodes[j].x1)/2/X.figure.width),V.push(oe/X.figure.height)}a.call("_guiRestyle",J,{"node.x":[se],"node.y":[V]},X.trace.index).then(function(){J._fullLayout._dragCover&&J._fullLayout._dragCover.remove()})}function K(X){X.lastDraggedX=X.x0+X.dx/2,X.lastDraggedY=X.y0+X.dy/2}function ne(X){return function(J){return J.node.originalX===X.node.originalX}}ae.exports=function(X,J,se,V,j){var H=!1;m.ensureSingle(X._fullLayout._infolayer,"g","first-render",function(){H=!0});var oe=X._fullLayout._dragCover,U=se.filter(function(he){return d(he).trace.visible}).map(x.bind(null,V)),te=J.selectAll("."+r.cn.sankey).data(U,u);te.exit().remove(),te.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",N),te.each(function(he,xe){X._fullData[xe]._sankey=he;var De="bgsankey-"+he.trace.uid+"-"+xe;m.ensureSingle(X._fullLayout._draggers,"rect",De),X._fullData[xe]._bgRect=b.select("."+De),X._fullData[xe]._bgRect.style("pointer-events","all").attr("width",he.width).attr("height",he.height).attr("x",he.translateX).attr("y",he.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),te.transition().ease(r.ease).duration(r.duration).attr("transform",N);var ee=te.selectAll("."+r.cn.sankeyLinks).data(s,u);ee.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var le=ee.selectAll("."+r.cn.sankeyLink).data(function(he){return he.graph.links.filter(function(xe){return xe.value}).map(w.bind(null,he))},u);le.enter().append("path").classed(r.cn.sankeyLink,!0).call(z,te,j.linkEvents),le.style("stroke",function(he){return E(he)?o.tinyRGB(t(he.linkLineColor)):he.tinyColorHue}).style("stroke-opacity",function(he){return E(he)?o.opacity(he.linkLineColor):he.tinyColorAlpha}).style("fill",function(he){return he.tinyColorHue}).style("fill-opacity",function(he){return he.tinyColorAlpha}).style("stroke-width",function(he){return E(he)?he.linkLineWidth:1}).attr("d",M()),le.style("opacity",function(){return X._context.staticPlot||H||oe?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),le.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var ce=te.selectAll("."+r.cn.sankeyNodeSet).data(s,u);ce.enter().append("g").classed(r.cn.sankeyNodeSet,!0),ce.style("cursor",function(he){switch(he.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=ce.selectAll("."+r.cn.sankeyNode).data(function(he){var xe=he.graph.nodes;return function(De){var Se,ke=[];for(Se=0;Se<De.length;Se++)De[Se].originalX=(De[Se].x0+De[Se].x1)/2,De[Se].originalY=(De[Se].y0+De[Se].y1)/2,-1===ke.indexOf(De[Se].originalX)&&ke.push(De[Se].originalX);for(ke.sort(function(Fe,ve){return Fe-ve}),Se=0;Se<De.length;Se++)De[Se].originalLayerIndex=ke.indexOf(De[Se].originalX),De[Se].originalLayer=De[Se].originalLayerIndex/(ke.length-1)}(xe),xe.map(D.bind(null,he))},u);pe.enter().append("g").classed(r.cn.sankeyNode,!0).call(C).style("opacity",function(he){return!X._context.staticPlot&&!H||he.partOfGroup?0:1}),pe.call(z,te,j.nodeEvents).call(q,le,j,X),pe.transition().ease(r.ease).duration(r.duration).call(C).style("opacity",function(he){return he.partOfGroup?0:1}),pe.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var de=pe.selectAll("."+r.cn.nodeRect).data(s);de.enter().append("rect").classed(r.cn.nodeRect,!0).call(S),de.style("stroke-width",function(he){return he.nodeLineWidth}).style("stroke",function(he){return o.tinyRGB(t(he.nodeLineColor))}).style("stroke-opacity",function(he){return o.opacity(he.nodeLineColor)}).style("fill",function(he){return he.tinyColorHue}).style("fill-opacity",function(he){return he.tinyColorAlpha}),de.transition().ease(r.ease).duration(r.duration).call(S);var be=pe.selectAll("."+r.cn.nodeLabel).data(s);be.enter().append("text").classed(r.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(he){return he.node.label}).each(function(he){var xe=b.select(this);n.font(xe,he.textFont),h.convertToTspans(xe,X)}).style("text-shadow",h.makeTextShadow(X._fullLayout.paper_bgcolor)).attr("text-anchor",function(he){return he.horizontal&&he.left?"end":"start"}).attr("transform",function(he){var xe=b.select(this),De=h.lineCount(xe),ke=he.nodeLineWidth/2+3,Fe=((he.horizontal?he.visibleHeight:he.visibleWidth)-he.textFont.size*((De-1)*T-c))/2;he.horizontal&&(he.left?ke=-ke:ke+=he.visibleWidth);var ve=he.horizontal?"":"scale(-1,1)"+i(90);return l(he.horizontal?ke:Fe,he.horizontal?Fe:ke)+ve}),be.transition().ease(r.ease).duration(r.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(v,ae,ie){"use strict";ae.exports=function(p,g){for(var b=[],y=p.cd[0].trace,e=y._sankey.graph.nodes,r=0;r<e.length;r++){var t=e[r];if(!t.partOfGroup){var o=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];"v"===y.orientation&&o.reverse(),g&&g.contains(o,!1,r,p)&&b.push({pointNumber:t.pointNumber})}}return b}},{}],935:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){for(var y=0;y<g.length;y++)g[y].i=y;p.mergeArray(b.text,g,"tx"),p.mergeArray(b.texttemplate,g,"txt"),p.mergeArray(b.hovertext,g,"htx"),p.mergeArray(b.customdata,g,"data"),p.mergeArray(b.textposition,g,"tp"),b.textfont&&(p.mergeArrayCastPositive(b.textfont.size,g,"ts"),p.mergeArray(b.textfont.color,g,"tc"),p.mergeArray(b.textfont.family,g,"tf"));var e=b.marker;if(e){p.mergeArrayCastPositive(e.size,g,"ms"),p.mergeArrayCastPositive(e.opacity,g,"mo"),p.mergeArray(e.symbol,g,"mx"),p.mergeArray(e.color,g,"mc");var r=e.line;e.line&&(p.mergeArray(r.color,g,"mlc"),p.mergeArrayCastPositive(r.width,g,"mlw"));var t=e.gradient;t&&"none"!==t.type&&(p.mergeArray(t.type,g,"mgt"),p.mergeArray(t.color,g,"mgc"))}}},{"../../lib":515}],936:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../components/colorscale/attributes"),e=v("../../plots/font_attributes"),r=v("../../components/drawing/attributes").dash,t=v("../../components/drawing/attributes").pattern,o=v("../../components/drawing"),n=v("./constants"),m=v("../../lib/extend").extendFlat;ae.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:p("x"),yhoverformat:p("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:g({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:n.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:m({},r,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:t,marker:m({symbol:{valType:"enumerated",values:o.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:m({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},y("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},y("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM,r=v("./subtypes"),t=v("./colorscale_calc"),o=v("./arrays_to_calcdata"),n=v("./calc_selection");function m(s,d,h,a,_,c,T){var x=d._length,w=s._fullLayout,M=h._id,D=a._id,C=w._firstScatter[f(d)]===d.uid,P=(u(d,w,h,a)||{}).orientation,L=d.fill;h._minDtick=0,a._minDtick=0;var S={padded:!0},E={padded:!0};T&&(S.ppad=E.ppad=T);var N=x<2||_[0]!==_[x-1]||c[0]!==c[x-1];N&&("tozerox"===L||"tonextx"===L&&(C||"h"===P))?S.tozero=!0:(d.error_y||{}).visible||"tonexty"!==L&&"tozeroy"!==L&&(r.hasMarkers(d)||r.hasText(d))||(S.padded=!1,S.ppad=0),N&&("tozeroy"===L||"tonexty"===L&&(C||"v"===P))?E.tozero=!0:"tonextx"!==L&&"tozerox"!==L||(E.padded=!1),M&&(d._extremes[M]=b.findExtremes(h,_,S)),D&&(d._extremes[D]=b.findExtremes(a,c,E))}function l(s,d){if(r.hasMarkers(s)){var h,a=s.marker,_=1.6*(s.marker.sizeref||1);if(h="area"===s.marker.sizemode?function(M){return Math.max(Math.sqrt((M||0)/_),3)}:function(M){return Math.max((M||0)/_,3)},g.isArrayOrTypedArray(a.size)){var c={type:"linear"};b.setConvert(c);for(var T=c.makeCalcdata(s.marker,"size"),x=new Array(d),w=0;w<d;w++)x[w]=h(T[w]);return x}return h(a.size)}}function i(s,d){var h=f(d),a=s._firstScatter;a[h]||(a[h]=d.uid)}function f(s){var d=s.stackgroup;return s.xaxis+s.yaxis+s.type+(d?"-"+d:"")}function u(s,d,h,a){var _=s.stackgroup;if(_){var c=d._scatterStackOpts[h._id+a._id][_],T="v"===c.orientation?a:h;return"linear"===T.type||"log"===T.type?c:void 0}}ae.exports={calc:function(s,d){var h,a,_,c,T,x,w=s._fullLayout,M=b.getFromId(s,d.xaxis||"x"),D=b.getFromId(s,d.yaxis||"y"),C=M.makeCalcdata(d,"x"),P=D.makeCalcdata(d,"y"),L=y(d,M,"x",C),S=y(d,D,"y",P),E=L.vals,N=S.vals,z=d._length,q=new Array(z),G=d.ids,K=u(d,w,M,D),ne=!1;i(w,d);var X,J="x",se="y";K?(g.pushUnique(K.traceIndices,d._expandedIndex),(h="v"===K.orientation)?(se="s",X="x"):(J="s",X="y"),T="interpolate"===K.stackgaps):m(s,d,M,D,E,N,l(d,z));var V=!!d.xperiodalignment,j=!!d.yperiodalignment;for(a=0;a<z;a++){var H=q[a]={},oe=p(E[a]),U=p(N[a]);oe&&U?(H[J]=E[a],H[se]=N[a],V&&(H.orig_x=C[a],H.xEnd=L.ends[a],H.xStart=L.starts[a]),j&&(H.orig_y=P[a],H.yEnd=S.ends[a],H.yStart=S.starts[a])):K&&(h?oe:U)?(H[X]=h?E[a]:N[a],H.gap=!0,T?(H.s=e,ne=!0):H.s=0):H[J]=H[se]=e,G&&(H.id=String(G[a]))}if(o(q,d),t(s,d),n(q,d),K){for(a=0;a<q.length;)q[a][X]===e?q.splice(a,1):a++;if(g.sort(q,function(ce,pe){return ce[X]-pe[X]||ce.i-pe.i}),ne){for(a=0;a<q.length-1&&q[a].gap;)a++;for((x=q[a].s)||(x=q[a].s=0),_=0;_<a;_++)q[_].s=x;for(c=q.length-1;c>a&&q[c].gap;)c--;for(x=q[c].s,_=q.length-1;_>c;_--)q[_].s=x;for(;a<c;)if(q[++a].gap){for(_=a+1;q[_].gap;)_++;for(var te=q[a-1][X],ee=q[a-1].s,le=(q[_].s-ee)/(q[_][X]-te);a<_;)q[a].s=ee+(q[a][X]-te)*le,a++}}}return q},calcMarkerSize:l,calcAxisExpansion:m,setFirstScatter:i,getStackOpts:u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){p.isArrayOrTypedArray(b.selectedpoints)&&p.tagSelected(g,b)}},{"../../lib":515}],939:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/helpers").hasColorscale,g=v("../../components/colorscale/calc"),b=v("./subtypes");ae.exports=function(y,e){b.hasLines(e)&&p(e,"line")&&g(y,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(e)&&(p(e,"marker")&&g(y,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),p(e,"marker.line")&&g(y,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(v,ae,ie){"use strict";ae.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(v,ae,ie){"use strict";var p=v("./calc");function g(b,y,e,r,t,o,n){t[r]=!0;var i,f,s,d,h,m={i:null,gap:!0,s:0};if(m[n]=e,b.splice(y,0,m),y&&e===b[y-1][n]){var l=b[y-1];m.s=l.s,m.i=l.i,m.gap=l.gap}else o&&(m.s=(s=n,d=(i=b)[(f=y)-1],(h=i[f+1])?d?d.s+(h.s-d.s)*(e-d[s])/(h[s]-d[s]):h.s:d.s));y||(b[0].t=b[1].t,b[0].trace=b[1].trace,delete b[1].t,delete b[1].trace)}ae.exports=function(b,y){var e=y.xaxis,r=y.yaxis,o=b._fullLayout._scatterStackOpts[e._id+r._id];if(o){var n,m,l,i,f,u,s,d,h,a,_,c,T,x,w,M=b.calcdata;for(var D in o){var C=(a=o[D]).traceIndices;if(C.length){for(_="interpolate"===a.stackgaps,c=a.groupnorm,"v"===a.orientation?(T="x",x="y"):(T="y",x="x"),w=new Array(C.length),n=0;n<w.length;n++)w[n]=!1;u=M[C[0]];var P=new Array(u.length);for(n=0;n<u.length;n++)P[n]=u[n][T];for(n=1;n<C.length;n++){for(f=M[C[n]],m=l=0;m<f.length;m++){for(s=f[m][T];s>P[l]&&l<P.length;l++)g(f,m,P[l],n,w,_,T),m++;if(s!==P[l]){for(i=0;i<n;i++)g(M[C[i]],l,s,i,w,_,T);P.splice(l,0,s)}l++}for(;l<P.length;l++)g(f,m,P[l],n,w,_,T),m++}var L=P.length;for(m=0;m<u.length;m++){for(d=u[m][x]=u[m].s,n=1;n<C.length;n++)(f=M[C[n]])[0].trace._rawLength=f[0].trace._length,f[0].trace._length=L,f[m][x]=d+=f[m].s;if(c)for(h=("fraction"===c?d:d/100)||1,n=0;n<C.length;n++){var S=M[C[n]][m];S[x]/=h,S.sNorm=S.s/h}}for(n=0;n<C.length;n++){var E=(f=M[C[n]])[0].trace,N=p.calcMarkerSize(E,E._rawLength),z=Array.isArray(N);if(N&&w[n]||z){var q=N;for(N=new Array(L),m=0;m<L;m++)N[m]=f[m].gap?0:z?q[f[m].i]:q}var G=new Array(L),K=new Array(L);for(m=0;m<L;m++)G[m]=f[m].x,K[m]=f[m].y;p.calcAxisExpansion(b,E,e,r,G,K,N),f[0].t.orientation=a.orientation}}}}}},{"./calc":937}],942:[function(v,ae,ie){"use strict";ae.exports=function(p){for(var g=0;g<p.length;g++){var b=p[g];if("scatter"===b.type){var y=b.fill;if("none"!==y&&"toself"!==y&&(b.opacity=void 0,"tonexty"===y||"tonextx"===y))for(var e=g-1;e>=0;e--){var r=p[e];if("scatter"===r.type&&r.xaxis===b.xaxis&&r.yaxis===b.yaxis){r.opacity=void 0;break}}}}}},{}],943:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry"),b=v("./attributes"),y=v("./constants"),e=v("./subtypes"),r=v("./xy_defaults"),t=v("./period_defaults"),o=v("./stack_defaults"),n=v("./marker_defaults"),m=v("./line_defaults"),l=v("./line_shape_defaults"),i=v("./text_defaults"),f=v("./fillcolor_defaults"),u=v("../../lib").coercePattern;ae.exports=function(s,d,h,a){function _(P,L){return p.coerce(s,d,b,P,L)}var c=r(s,d,a,_);if(c||(d.visible=!1),d.visible){t(s,d,a,_),_("xhoverformat"),_("yhoverformat");var T=o(s,d,a,_),x=!T&&c<y.PTS_LINESONLY?"lines+markers":"lines";_("text"),_("hovertext"),_("mode",x),e.hasLines(d)&&(m(s,d,h,a,_),l(s,d,_),_("connectgaps"),_("line.simplify")),e.hasMarkers(d)&&n(s,d,h,a,_,{gradient:!0}),e.hasText(d)&&(_("texttemplate"),i(s,d,a,_));var w=[];(e.hasMarkers(d)||e.hasText(d))&&(_("cliponaxis"),_("marker.maxdisplayed"),w.push("points")),_("fill",T?T.fillDflt:"none"),"none"!==d.fill&&(f(s,d,h,_),e.hasLines(d)||l(s,d,_),u(_,"fillpattern",d.fillcolor,!1));var M=(d.line||{}).color,D=(d.marker||{}).color;"tonext"!==d.fill&&"toself"!==d.fill||w.push("fills"),_("hoveron",w.join("+")||"points"),"fills"!==d.hoveron&&_("hovertemplate");var C=g.getComponentMethod("errorbars","supplyDefaults");C(s,d,M||D||h,{axis:"y"}),C(s,d,M||D||h,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(d,_)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("../../lib").isArrayOrTypedArray;ae.exports=function(b,y,e,r){var t=!1;if(y.marker){var o=y.marker.color,n=(y.marker.line||{}).color;o&&!g(o)?t=o:n&&!g(n)&&(t=n)}r("fillcolor",p.addOpacity((y.line||{}).color||t||e,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes");ae.exports=function(g,b,y){var e={},r={_fullLayout:y},t=p.getFromTrace(r,b,"x"),o=p.getFromTrace(r,b,"y");return e.xLabel=p.tickText(t,t.c2l(g.x),!0).text,e.yLabel=p.tickText(o,o.c2l(g.y),!0).text,e}},{"../../plots/cartesian/axes":566}],946:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("./subtypes");ae.exports=function(b,y){var e,r;if("lines"===b.mode)return(e=b.line.color)&&p.opacity(e)?e:b.fillcolor;if("none"===b.mode)return b.fill?b.fillcolor:"";var t=y.mcc||(b.marker||{}).color,o=y.mlcc||((b.marker||{}).line||{}).color;return(r=t&&p.opacity(t)?t:o&&p.opacity(o)&&(y.mlw||((b.marker||{}).line||{}).width)?o:"")?p.opacity(r)<.3?p.addOpacity(r,.3):r:(e=(b.line||{}).color)&&p.opacity(e)&&g.hasLines(b)&&b.line.width?e:b.fillcolor}},{"../../components/color":367,"./subtypes":961}],947:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/fx"),b=v("../../registry"),y=v("./get_trace_color"),e=v("../../components/color"),r=p.fillText;ae.exports=function(t,o,n,m){var l=t.cd,i=l[0].trace,f=t.xa,u=t.ya,s=f.c2p(o),d=u.c2p(n),h=[s,d],a=i.hoveron||"",_=-1!==i.mode.indexOf("markers")?3:.5,c=!!i.xperiodalignment,T=!!i.yperiodalignment;if(-1!==a.indexOf("points")){var x=function(de){var be=Math.max(_,de.mrc||0),he=f.c2p(de.x)-s,xe=u.c2p(de.y)-d;return Math.max(Math.sqrt(he*he+xe*xe)-be,1-_/be)},w=g.getDistanceFunction(m,function(de){if(c){var be=f.c2p(de.xStart),he=f.c2p(de.xEnd);return s>=Math.min(be,he)&&s<=Math.max(be,he)?0:1/0}var xe=Math.max(3,de.mrc||0),De=1-1/xe,Se=Math.abs(f.c2p(de.x)-s);return Se<xe?De*Se/xe:Se-xe+De},function(de){if(T){var be=u.c2p(de.yStart),he=u.c2p(de.yEnd);return d>=Math.min(be,he)&&d<=Math.max(be,he)?0:1/0}var xe=Math.max(3,de.mrc||0),De=1-1/xe,Se=Math.abs(u.c2p(de.y)-d);return Se<xe?De*Se/xe:Se-xe+De},x);if(g.getClosest(l,w,t),!1!==t.index){var M=l[t.index],D=f.c2p(M.x,!0),C=u.c2p(M.y,!0),P=M.mrc||1;t.index=M.i;var L=l[0].t.orientation,S=L&&(M.sNorm||M.s),E="h"===L?S:void 0!==M.orig_x?M.orig_x:M.x,N="v"===L?S:void 0!==M.orig_y?M.orig_y:M.y;return p.extendFlat(t,{color:y(i,M),x0:D-P,x1:D+P,xLabelVal:E,y0:C-P,y1:C+P,yLabelVal:N,spikeDistance:x(M),hovertemplate:i.hovertemplate}),r(M,i,t),b.getComponentMethod("errorbars","hoverInfo")(M,i,t),[t]}}if(-1!==a.indexOf("fills")&&i._polygons){var z,q,G,K,ne,X,se,V,j=i._polygons,H=[],oe=!1,U=1/0,te=-1/0,ee=1/0,le=-1/0;for(z=0;z<j.length;z++)(G=j[z]).contains(h)&&(oe=!oe,H.push(G),ee=Math.min(ee,G.ymin),le=Math.max(le,G.ymax));if(oe){var ce=((ee=Math.max(ee,0))+(le=Math.min(le,u._length)))/2;for(z=0;z<H.length;z++)for(K=H[z].pts,q=1;q<K.length;q++)(se=K[q-1][1])>ce!=(V=K[q][1])>=ce&&(X=K[q-1][0],V-se&&(ne=X+(K[q][0]-X)*(ce-se)/(V-se),U=Math.min(U,ne),te=Math.max(te,ne)));U=Math.max(U,0),te=Math.min(te,f._length);var pe=e.defaultLine;return e.opacity(i.fillcolor)?pe=i.fillcolor:e.opacity((i.line||{}).color)&&(pe=i.line.color),p.extendFlat(t,{distance:t.maxHoverDistance,x0:U,x1:te,y0:ce,y1:ce,color:pe,hovertemplate:!1}),delete t.index,t.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[t]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(v,ae,ie){"use strict";var p=v("./subtypes");ae.exports={hasLines:p.hasLines,hasMarkers:p.hasMarkers,hasText:p.hasText,isBubble:p.isBubble,attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./cross_trace_calc"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot"),colorbar:v("./marker_colorbar"),formatLabels:v("./format_labels"),style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(v,ae,ie){"use strict";var p=v("../../lib").isArrayOrTypedArray,g=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults");ae.exports=function(y,e,r,t,o,n){var m=(y.marker||{}).color;o("line.color",r),g(y,"line")?b(y,e,t,o,{prefix:"line.",cLetter:"c"}):o("line.color",!p(m)&&m||r),o("line.width"),(n||{}).noDash||o("line.dash")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(v,ae,ie){"use strict";var p=v("../../constants/numerical"),g=p.BADNUM,b=p.LOG_CLIP,y=b+.5,e=b-.5,r=v("../../lib"),t=r.segmentsIntersect,o=r.constrain,n=v("./constants");ae.exports=function(m,l){var i,f,u,s,d,h,a,_,c,T,x,w,M,D,C,P,L,S,E=l.xaxis,N=l.yaxis,z="log"===E.type,q="log"===N.type,G=E._length,K=N._length,ne=l.connectGaps,X=l.baseTolerance,J=l.shape,se="linear"===J,V=l.fill&&"none"!==l.fill,j=[],H=n.minTolerance,oe=m.length,U=new Array(oe),te=0;function ee(Ye){var ct=m[Ye];if(!ct)return!1;var vt=l.linearized?E.l2p(ct.x):E.c2p(ct.x),wt=l.linearized?N.l2p(ct.y):N.c2p(ct.y);if(vt===g){if(z&&(vt=E.c2p(ct.x,!0)),vt===g)return!1;q&&wt===g&&(vt*=Math.abs(E._m*K*(E._m>0?y:e)/(N._m*G*(N._m>0?y:e)))),vt*=1e3}if(wt===g){if(q&&(wt=N.c2p(ct.y,!0)),wt===g)return!1;wt*=1e3}return[vt,wt]}function le(Ye,ct,vt,wt){var Ot=vt-Ye,St=wt-ct,ft=.5-Ye,st=.5-ct,Ct=Ot*Ot+St*St,$t=Ot*ft+St*st;if($t>0&&$t<Ct){var rn=ft*St-st*Ot;if(rn*rn<Ct)return!0}}function ce(Ye,ct){var vt=Ye[0]/G,wt=Ye[1]/K,Ot=Math.max(0,-vt,vt-1,-wt,wt-1);return Ot&&void 0!==L&&le(vt,wt,L,S)&&(Ot=0),Ot&&ct&&le(vt,wt,ct[0]/G,ct[1]/K)&&(Ot=0),(1+n.toleranceGrowth*Ot)*X}function pe(Ye,ct){var vt=Ye[0]-ct[0],wt=Ye[1]-ct[1];return Math.sqrt(vt*vt+wt*wt)}var de,be,he,xe,De,Se,ke,Fe=n.maxScreensAway,ve=-G*Fe,Te=G*(1+Fe),Le=-K*Fe,Oe=K*(1+Fe),Ne=[[ve,Le,Te,Le],[Te,Le,Te,Oe],[Te,Oe,ve,Oe],[ve,Oe,ve,Le]];function Be(Ye){if(Ye[0]<ve||Ye[0]>Te||Ye[1]<Le||Ye[1]>Oe)return[o(Ye[0],ve,Te),o(Ye[1],Le,Oe)]}function He(Ye,ct){return Ye[0]===ct[0]&&(Ye[0]===ve||Ye[0]===Te)||Ye[1]===ct[1]&&(Ye[1]===Le||Ye[1]===Oe)||void 0}function Ve(Ye,ct,vt){return function(wt,Ot){var St=Be(wt),ft=Be(Ot),st=[];if(St&&ft&&He(St,ft))return st;St&&st.push(St),ft&&st.push(ft);var Ct=2*r.constrain((wt[Ye]+Ot[Ye])/2,ct,vt)-((St||wt)[Ye]+(ft||Ot)[Ye]);return Ct&&((St&&ft?Ct>0==St[Ye]>ft[Ye]?St:ft:St||ft)[Ye]+=Ct),st}}function it(Ye){var ct=Ye[0],vt=Ye[1],wt=ct===U[te-1][0],Ot=vt===U[te-1][1];if(!wt||!Ot)if(te>1){var St=ct===U[te-2][0],ft=vt===U[te-2][1];wt&&(ct===ve||ct===Te)&&St?ft?te--:U[te-1]=Ye:Ot&&(vt===Le||vt===Oe)&&ft?St?te--:U[te-1]=Ye:U[te++]=Ye}else U[te++]=Ye}function ze(Ye){U[te-1][0]!==Ye[0]&&U[te-1][1]!==Ye[1]&&it([he,xe]),it(Ye),De=null,he=xe=0}function je(Ye){if(L=Ye[0]/G,S=Ye[1]/K,be=Ye[1]<Le?Le:Ye[1]>Oe?Oe:0,(de=Ye[0]<ve?ve:Ye[0]>Te?Te:0)||be){if(te)if(De){var ct=ke(De,Ye);ct.length>1&&(ze(ct[0]),U[te++]=ct[1])}else Se=ke(U[te-1],Ye)[0],U[te++]=Se;else U[te++]=[de||Ye[0],be||Ye[1]];var vt=U[te-1];de&&be&&(vt[0]!==de||vt[1]!==be)?(De&&(he!==de&&xe!==be?it(he&&xe?(St=(Ot=Ye)[0]-(wt=De)[0],ft=(Ot[1]-wt[1])/St,(wt[1]*Ot[0]-Ot[1]*wt[0])/St>0?[ft>0?ve:Te,Oe]:[ft>0?Te:ve,Le]):[he||de,xe||be]):he&&xe&&it([he,xe])),it([de,be])):he-de&&xe-be&&it([de||he,be||xe]),De=Ye,he=de,xe=be}else De&&ze(ke(De,Ye)[0]),U[te++]=Ye;var wt,Ot,St,ft}for("linear"===J||"spline"===J?ke=function(Ye,ct){for(var vt=[],wt=0,Ot=0;Ot<4;Ot++){var St=Ne[Ot],ft=t(Ye[0],Ye[1],ct[0],ct[1],St[0],St[1],St[2],St[3]);ft&&(!wt||Math.abs(ft.x-vt[0][0])>1||Math.abs(ft.y-vt[0][1])>1)&&(ft=[ft.x,ft.y],wt&&pe(ft,Ye)<pe(vt[0],Ye)?vt.unshift(ft):vt.push(ft),wt++)}return vt}:"hv"===J||"vh"===J?ke=function(Ye,ct){var vt=[],wt=Be(Ye),Ot=Be(ct);return wt&&Ot&&He(wt,Ot)||(wt&&vt.push(wt),Ot&&vt.push(Ot)),vt}:"hvh"===J?ke=Ve(0,ve,Te):"vhv"===J&&(ke=Ve(1,Le,Oe)),i=0;i<oe;i++)if(f=ee(i)){for(te=0,De=null,je(f),i++;i<oe;i++){if(!(s=ee(i))){if(ne)continue;break}if(se&&l.simplify){var qe=ee(i+1);if(T=pe(s,f),V&&(0===te||te===oe-1)||!(T<ce(s,qe)*H)){for(_=[(s[0]-f[0])/T,(s[1]-f[1])/T],d=f,x=T,w=D=C=0,a=!1,u=s,i++;i<m.length;i++){if(h=qe,qe=ee(i+1),!h){if(ne)continue;break}if(P=(c=[h[0]-f[0],h[1]-f[1]])[0]*_[1]-c[1]*_[0],D=Math.min(D,P),(C=Math.max(C,P))-D>ce(h,qe))break;u=h,(M=c[0]*_[0]+c[1]*_[1])>x?(x=M,s=h,a=!1):M<w&&(w=M,d=h,a=!0)}if(a?(je(s),u!==d&&je(d)):(d!==f&&je(d),u!==s&&je(s)),je(u),i>=m.length||!h)break;je(h),f=h}}else je(s)}De&&it([he||De[0],xe||De[1]]),j.push(U.slice(0,te))}return j}},{"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b){"spline"===b("line.shape")&&b("line.smoothing")}},{}],952:[function(v,ae,ie){"use strict";var p={tonextx:1,tonexty:1,tonext:1};ae.exports=function(g,b,y){var e,r,t,o,n,m={},l=!1,i=-1,f=0,u=-1;for(r=0;r<y.length;r++)(t=(e=y[r][0].trace).stackgroup||"")?t in m?n=m[t]:(n=m[t]=f,f++):e.fill in p&&u>=0?n=u:(n=u=f,f++),n<i&&(l=!0),e._groupIndex=i=n;var s=y.slice();l&&s.sort(function(h,a){var _=h[0].trace,c=a[0].trace;return _._groupIndex-c._groupIndex||_.index-c.index});var d={};for(r=0;r<s.length;r++)t=(e=s[r][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in p&&(e._prevtrace=(o=d[t])||null,o&&(o._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),d[t]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return s}},{}],953:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric");ae.exports=function(g,b){b||(b=2);var y=g.marker,e=y.sizeref||1,r=y.sizemin||0,t="area"===y.sizemode?function(o){return Math.sqrt(o/e)}:function(o){return o/e};return function(o){var n=t(o/b);return p(n)&&n>0?Math.max(n,r):0}}},{"fast-isnumeric":190}],954:[function(v,ae,ie){"use strict";ae.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("./subtypes");ae.exports=function(e,r,t,o,n,m){var l=y.isBubble(e),i=(e.line||{}).color;m=m||{},i&&(t=i),n("marker.symbol"),n("marker.opacity",l?.7:1),n("marker.size"),n("marker.color",t),g(e,"marker")&&b(e,r,o,n,{prefix:"marker.",cLetter:"c"}),m.noSelect||(n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size")),m.noLine||(n("marker.line.color",i&&!Array.isArray(i)&&r.marker.color!==i?i:l?p.background:p.defaultLine),g(e,"marker.line")&&b(e,r,o,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width",l?1:0)),l&&(n("marker.sizeref"),n("marker.sizemin"),n("marker.sizemode")),m.gradient&&"none"!==n("marker.gradient.type")&&n("marker.gradient.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(v,ae,ie){"use strict";var p=v("../../lib").dateTick0,g=v("../../constants/numerical").ONEWEEK;function b(y,e){return p(e,y%g==0?1:0)}ae.exports=function(y,e,r,t,o){if(o||(o={x:!0,y:!0}),o.x){var n=t("xperiod");n&&(t("xperiod0",b(n,e.xcalendar)),t("xperiodalignment"))}if(o.y){var m=t("yperiod");m&&(t("yperiod0",b(m,e.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../lib"),y=b.ensureSingle,e=b.identity,r=v("../../components/drawing"),t=v("./subtypes"),o=v("./line_points"),n=v("./link_traces"),m=v("../../lib/polygon").tester;function l(i,f,u,s,d,h,a){var _;!function(Te,Le,Oe,Ne,Be){var He=Oe.xaxis,Ve=Oe.yaxis,it=p.extent(b.simpleMap(He.range,He.r2c)),ze=p.extent(b.simpleMap(Ve.range,Ve.r2c)),je=Ne[0].trace;if(t.hasMarkers(je)){var qe=je.marker.maxdisplayed;if(0!==qe){var Ye=Ne.filter(function(Ot){return Ot.x>=it[0]&&Ot.x<=it[1]&&Ot.y>=ze[0]&&Ot.y<=ze[1]}),ct=Math.ceil(Ye.length/qe),vt=0;Be.forEach(function(Ot,St){var ft=Ot[0].trace;t.hasMarkers(ft)&&ft.marker.maxdisplayed>0&&St<Le&&vt++});var wt=Math.round(vt*ct/3+Math.floor(vt/3)*ct/7.1);Ne.forEach(function(Ot){delete Ot.vis}),Ye.forEach(function(Ot,St){0===Math.round((St+wt)%ct)&&(Ot.vis=!0)})}}}(0,f,u,s,d);var c=!!a&&a.duration>0;function T(Te){return c?Te.transition():Te}var x=u.xaxis,w=u.yaxis,M=s[0].trace,D=M.line,C=p.select(h),P=y(C,"g","errorbars"),L=y(C,"g","lines"),S=y(C,"g","points"),E=y(C,"g","text");if(g.getComponentMethod("errorbars","plot")(i,P,u,a),!0===M.visible){var N,z;T(C).style("opacity",M.opacity);var q=M.fill.charAt(M.fill.length-1);"x"!==q&&"y"!==q&&(q=""),s[0][u.isRangePlot?"nodeRangePlot3":"node3"]=C;var G,K,ne="",X=[],J=M._prevtrace;J&&(ne=J._prevRevpath||"",z=J._nextFill,X=J._polygons);var se,V,j,H,oe,U,te,ee="",le="",ce=[],pe=b.noop;if(N=M._ownFill,t.hasLines(M)||"none"!==M.fill){for(z&&z.datum(s),-1!==["hv","vh","hvh","vhv"].indexOf(D.shape)?(se=r.steps(D.shape),V=r.steps(D.shape.split("").reverse().join(""))):se=V="spline"===D.shape?function(Te){var Le=Te[Te.length-1];return Te.length>1&&Te[0][0]===Le[0]&&Te[0][1]===Le[1]?r.smoothclosed(Te.slice(1),D.smoothing):r.smoothopen(Te,D.smoothing)}:function(Te){return"M"+Te.join("L")},j=function(Te){return V(Te.reverse())},ce=o(s,{xaxis:x,yaxis:w,connectGaps:M.connectgaps,baseTolerance:Math.max(D.width||1,3)/4,shape:D.shape,simplify:D.simplify,fill:M.fill}),te=M._polygons=new Array(ce.length),_=0;_<ce.length;_++)M._polygons[_]=m(ce[_]);ce.length&&(H=ce[0][0],U=(oe=ce[ce.length-1])[oe.length-1]),pe=function(Te){return function(Le){if(G=se(Le),K=j(Le),ee?q?(ee+="L"+G.substr(1),le=K+"L"+le.substr(1)):(ee+="Z"+G,le=K+"Z"+le):(ee=G,le=K),t.hasLines(M)&&Le.length>1){var Oe=p.select(this);if(Oe.datum(s),Te)T(Oe.style("opacity",0).attr("d",G).call(r.lineGroupStyle)).style("opacity",1);else{var Ne=T(Oe);Ne.attr("d",G),r.singleLineStyle(s,Ne)}}}}}var de=L.selectAll(".js-line").data(ce);T(de.exit()).style("opacity",0).remove(),de.each(pe(!1)),de.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(r.lineGroupStyle).each(pe(!0)),r.setClipUrl(de,u.layerClipId,i),ce.length?(N?(N.datum(s),H&&U&&(q?("y"===q?H[1]=U[1]=w.c2p(0,!0):"x"===q&&(H[0]=U[0]=x.c2p(0,!0)),T(N).attr("d","M"+U+"L"+H+"L"+ee.substr(1)).call(r.singleFillStyle,i)):T(N).attr("d",ee+"Z").call(r.singleFillStyle,i))):z&&("tonext"===M.fill.substr(0,6)&&ee&&ne?("tonext"===M.fill?T(z).attr("d",ee+"Z"+ne+"Z").call(r.singleFillStyle,i):T(z).attr("d",ee+"L"+ne.substr(1)+"Z").call(r.singleFillStyle,i),M._polygons=M._polygons.concat(X)):(he(z),M._polygons=null)),M._prevRevpath=le,M._prevPolygons=te):(N?he(N):z&&he(z),M._polygons=M._prevRevpath=M._prevPolygons=null),S.datum(s),E.datum(s),function(Te,Le,Oe){var Ne,Be=Oe[0].trace,He=t.hasMarkers(Be),Ve=t.hasText(Be),it=function Fe(Te){if(Te.ids)return ke}(Be),ze=ve,je=ve;if(He||Ve){var qe=e,Ye=Be.stackgroup,ct=Ye&&"infer zero"===i._fullLayout._scatterStackOpts[x._id+w._id][Ye].stackgaps;Be.marker.maxdisplayed||Be._needsCull?qe=ct?De:xe:Ye&&!ct&&(qe=Se),He&&(ze=qe),Ve&&(je=qe)}var vt,wt=(Ne=Te.selectAll("path.point").data(ze,it)).enter().append("path").classed("point",!0);c&&wt.call(r.pointStyle,Be,i).call(r.translatePoints,x,w).style("opacity",0).transition().style("opacity",1),Ne.order(),He&&(vt=r.makePointStyleFns(Be)),Ne.each(function(Ot){var St=p.select(this),ft=T(St);r.translatePoint(Ot,ft,x,w)?(r.singlePointStyle(Ot,ft,Be,vt,i),u.layerClipId&&r.hideOutsideRangePoint(Ot,ft,x,w,Be.xcalendar,Be.ycalendar),Be.customdata&&St.classed("plotly-customdata",null!=Ot.data)):ft.remove()}),c?Ne.exit().transition().style("opacity",0).remove():Ne.exit().remove(),(Ne=Le.selectAll("g").data(je,it)).enter().append("g").classed("textpoint",!0).append("text"),Ne.order(),Ne.each(function(Ot){var St=p.select(this),ft=T(St.select("text"));r.translatePoint(Ot,ft,x,w)?u.layerClipId&&r.hideOutsideRangePoint(Ot,St,x,w,Be.xcalendar,Be.ycalendar):St.remove()}),Ne.selectAll("text").call(r.textPointStyle,Be,i).each(function(Ot){var St=x.c2p(Ot.x),ft=w.c2p(Ot.y);p.select(this).selectAll("tspan.line").each(function(){T(p.select(this)).attr({x:St,y:ft})})}),Ne.exit().remove()}(S,E,s);var be=!1===M.cliponaxis?null:u.layerClipId;r.setClipUrl(S,be,i),r.setClipUrl(E,be,i)}function he(Te){T(Te).attr("d","M0,0Z")}function xe(Te){return Te.filter(function(Le){return!Le.gap&&Le.vis})}function De(Te){return Te.filter(function(Le){return Le.vis})}function Se(Te){return Te.filter(function(Le){return!Le.gap})}function ke(Te){return Te.id}function ve(){return!1}}ae.exports=function(i,f,u,s,d,h){var a,_,w,D,c=!d,T=!!d&&d.duration>0,x=n(i,f,u);(a=s.selectAll("g.trace").data(x,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),a.order(),w=i,D=f,a.each(function(C){var P=y(p.select(this),"g","fills");r.setClipUrl(P,D.layerClipId,w);var L=C[0].trace,S=[];L._ownfill&&S.push("_ownFill"),L._nexttrace&&S.push("_nextFill");var E=P.selectAll("g").data(S,e);E.enter().append("g"),E.exit().each(function(N){L[N]=null}).remove(),E.order().each(function(N){L[N]=y(p.select(this),"path","js-fill")})}),T?(h&&(_=h()),p.transition().duration(d.duration).ease(d.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()}).each(function(){s.selectAll("g.trace").each(function(w,M){l(i,M,f,w,x,this,d)})})):a.each(function(w,M){l(i,M,f,w,x,this,d)}),c&&a.exit().remove(),s.selectAll("path:not([d])").remove()}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(v,ae,ie){"use strict";var p=v("./subtypes");ae.exports=function(g,b){var y,e,r,t,o=g.cd,n=g.xaxis,m=g.yaxis,l=[],i=o[0].trace;if(!p.hasMarkers(i)&&!p.hasText(i))return[];if(!1===b)for(y=0;y<o.length;y++)o[y].selected=0;else for(y=0;y<o.length;y++)r=n.c2p((e=o[y]).x),t=m.c2p(e.y),null!==e.i&&b.contains([r,t],!1,y,g)?(l.push({pointNumber:e.i,x:n.c2d(e.x),y:m.c2d(e.y)}),e.selected=1):e.selected=0;return l}},{"./subtypes":961}],959:[function(v,ae,ie){"use strict";var p=["orientation","groupnorm","stackgaps"];ae.exports=function(g,b,y,e){var r=y._scatterStackOpts,t=e("stackgroup");if(t){var o=b.xaxis+b.yaxis,n=r[o];n||(n=r[o]={});var m=n[t],l=!1;m?m.traces.push(b):(m=n[t]={traceIndices:[],traces:[b]},l=!0);for(var i={orientation:b.x&&!b.y?"h":"v"},f=0;f<p.length;f++){var u=p[f],s=u+"Found";if(!m[s]){var d=void 0!==g[u],h="orientation"===u;if((d||l)&&(m[u]=e(u,i[u]),h&&(m.fillDflt="h"===m[u]?"tonextx":"tonexty"),d&&(m[s]=!0,!l&&(delete m.traces[0][u],h))))for(var a=0;a<m.traces.length-1;a++){var _=m.traces[a];_._input.fill!==_.fill&&(_.fill=m.fillDflt)}}}return m}}},{}],960:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../../registry");function y(r,t,o){g.pointStyle(r.selectAll("path.point"),t,o)}function e(r,t,o){g.textPointStyle(r.selectAll("text"),t,o)}ae.exports={style:function(r){var t=p.select(r).selectAll("g.trace.scatter");t.style("opacity",function(o){return o[0].trace.opacity}),t.selectAll("g.points").each(function(o){y(p.select(this),o.trace||o[0].trace,r)}),t.selectAll("g.text").each(function(o){e(p.select(this),o.trace||o[0].trace,r)}),t.selectAll("g.trace path.js-line").call(g.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(g.fillGroupStyle,r),b.getComponentMethod("errorbars","style")(t)},stylePoints:y,styleText:e,styleOnSelect:function(r,t,o){var n=t[0].trace;n.selectedpoints?(g.selectedPointStyle(o.selectAll("path.point"),n),g.selectedTextStyle(o.selectAll("text"),n)):(y(o,n,r),e(o,n,r))}}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports={hasLines:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("lines")},hasMarkers:function(g){return g.visible&&(g.mode&&-1!==g.mode.indexOf("markers")||"splom"===g.type)},hasText:function(g){return g.visible&&g.mode&&-1!==g.mode.indexOf("text")},isBubble:function(g){return p.isPlainObject(g.marker)&&p.isArrayOrTypedArray(g.marker.size)}}},{"../../lib":515}],962:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b,y,e,r){r=r||{},e("textposition"),p.coerceFont(e,"textfont",y.font),r.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry");ae.exports=function(b,y,e,r){var t,o=r("x"),n=r("y");if(g.getComponentMethod("calendars","handleTraceDefaults")(b,y,["x","y"],e),o){var m=p.minRowLength(o);n?t=Math.min(m,p.minRowLength(n)):(t=m,r("y0"),r("dy"))}else{if(!n)return 0;t=p.minRowLength(n),r("x0"),r("dx")}return y._length=t,t}},{"../../lib":515,"../../registry":647}],964:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes"),g=v("../../components/colorscale/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,r=v("../../plots/attributes"),t=v("../../constants/gl3d_dashes"),o=v("../../constants/gl3d_markers"),n=v("../../lib/extend").extendFlat,m=v("../../plot_api/edit_types").overrideAll,l=v("../../lib/sort_object_keys"),f=p.marker,u=f.line,s=n({width:p.line.width,dash:{valType:"enumerated",values:l(t),dflt:"solid"}},g("line")),d=ae.exports=m({x:p.x,y:p.y,z:{valType:"data_array"},text:n({},p.text,{}),texttemplate:e({},{}),hovertext:n({},p.hovertext,{}),hovertemplate:y(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:n({},p.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:p.connectgaps,line:s,marker:n({symbol:{valType:"enumerated",values:l(o),dflt:"circle",arrayOk:!0},size:n({},f.size,{dflt:8}),sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:n({},f.opacity,{arrayOk:!1}),colorbar:f.colorbar,line:n({width:n({},u.width,{arrayOk:!1})},g("marker.line"))},g("marker")),textposition:n({},p.textposition,{dflt:"top center"}),textfont:{color:p.textfont.color,size:p.textfont.size,family:n({},p.textfont.family,{arrayOk:!1})},opacity:r.opacity,hoverinfo:n({},r.hoverinfo)},"calc","nested");d.x.editType=d.y.editType=d.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(v,ae,ie){"use strict";var p=v("../scatter/arrays_to_calcdata"),g=v("../scatter/colorscale_calc");ae.exports=function(b,y){var e=[{x:!1,y:!1,trace:y,t:{}}];return p(e,y),g(b,y),e}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(v,ae,ie){"use strict";var p=v("../../registry");function g(b,y,e,r){if(!y||!y.visible)return null;for(var t=p.getComponentMethod("errorbars","makeComputeError")(y),o=new Array(b.length),n=0;n<b.length;n++){var m=t(+b[n],n);if("log"===r.type){var l=r.c2l(b[n]),i=b[n]-m[0],f=b[n]+m[1];if(o[n]=[(r.c2l(i,!0)-l)*e,(r.c2l(f,!0)-l)*e],i>0){var u=r.c2l(i);r._lowerLogErrorBound||(r._lowerLogErrorBound=u),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,u)}}else o[n]=[-m[0]*e,m[1]*e]}return o}ae.exports=function(b,y,e){var r=[g(b.x,b.error_x,y[0],e.xaxis),g(b.y,b.error_y,y[1],e.yaxis),g(b.z,b.error_z,y[2],e.zaxis)],t=function(f){for(var u=0;u<f.length;u++)if(f[u])return f[u].length;return 0}(r);if(0===t)return null;for(var o=new Array(t),n=0;n<t;n++){for(var m=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(r[l])for(var i=0;i<2;i++)m[i][l]=r[l][n][i];o[n]=m}return o}},{"../../registry":647}],967:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_line3d,g=v("../../../stackgl_modules").gl_scatter3d,b=v("../../../stackgl_modules").gl_error3d,y=v("../../../stackgl_modules").gl_mesh3d,e=v("../../../stackgl_modules").delaunay_triangulate,r=v("../../lib"),t=v("../../lib/str2rgbarray"),o=v("../../lib/gl_format_color").formatColor,n=v("../scatter/make_bubble_size_func"),m=v("../../constants/gl3d_dashes"),l=v("../../constants/gl3d_markers"),i=v("../../plots/cartesian/axes"),f=v("../../components/fx/helpers").appendArrayPointValue,u=v("./calc_errors");function s(D,C){this.scene=D,this.uid=C,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var d=s.prototype;function h(D){return null==D?0:D.indexOf("left")>-1?-1:D.indexOf("right")>-1?1:0}function a(D){return null==D?0:D.indexOf("top")>-1?-1:D.indexOf("bottom")>-1?1:0}function _(D,C){return C(4*D)}function c(D){return l[D]}function T(D,C,P,L,S){var E=null;if(r.isArrayOrTypedArray(D)){E=[];for(var N=0;N<C;N++)E[N]=void 0===D[N]?L:P(D[N],S)}else E=P(D,r.identity);return E}function w(D){if(r.isArrayOrTypedArray(D)){var C=D[0];return r.isArrayOrTypedArray(C)&&(D=C),"rgb("+D.slice(0,3).map(function(P){return Math.round(255*P)})+")"}return null}function M(D){return r.isArrayOrTypedArray(D)?4===D.length&&"number"==typeof D[0]?w(D):D.map(w):null}d.handlePick=function(D){if(D.object&&(D.object===this.linePlot||D.object===this.delaunayMesh||D.object===this.textMarkers||D.object===this.scatterPlot)){var C=D.index=D.data.index;return D.object.highlight&&D.object.highlight(null),this.scatterPlot&&(D.object=this.scatterPlot,this.scatterPlot.highlight(D.data)),D.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[C]||0===this.textLabels[C])&&(D.textLabel=this.textLabels[C]):D.textLabel=this.textLabels),D.traceCoordinate=[this.data.x[C],this.data.y[C],this.data.z[C]],!0}},d.update=function(D){var C,P,L,S,E=this.scene.glplot.gl,N=m.solid;this.data=D;var z=function x(D,C){var P,L,S,E,N,z,q=[],G=D.fullSceneLayout,K=D.dataScale,ne=G.xaxis,X=G.yaxis,J=G.zaxis,se=C.marker,V=C.line,j=C.x||[],H=C.y||[],oe=C.z||[],U=j.length,te=C.xcalendar,ee=C.ycalendar,le=C.zcalendar;for(N=0;N<U;N++)P=ne.d2l(j[N],0,te)*K[0],L=X.d2l(H[N],0,ee)*K[1],S=J.d2l(oe[N],0,le)*K[2],q[N]=[P,L,S];if(Array.isArray(C.text))z=C.text;else if(void 0!==C.text)for(z=new Array(U),N=0;N<U;N++)z[N]=C.text;function ce(Ne,Be){var He=G[Ne];return i.tickText(He,He.d2l(Be),!0).text}var pe=C.texttemplate;if(pe){var de=D.fullLayout._d3locale,be=Array.isArray(pe),he=be?Math.min(pe.length,U):U,xe=be?function(Ne){return pe[Ne]}:function(){return pe};for(z=new Array(he),N=0;N<he;N++){var De={x:j[N],y:H[N],z:oe[N]},Se={xLabel:ce("xaxis",j[N]),yLabel:ce("yaxis",H[N]),zLabel:ce("zaxis",oe[N])},ke={};f(ke,C,N);var Fe=C._meta||{};z[N]=r.texttemplateString(xe(N),Se,de,ke,De,Fe)}}if(E={position:q,mode:C.mode,text:z},"line"in C&&(E.lineColor=o(V,1,U),E.lineWidth=V.width,E.lineDashes=V.dash),"marker"in C){var ve=n(C);E.scatterColor=o(se,1,U),E.scatterSize=T(se.size,U,_,20,ve),E.scatterMarker=T(se.symbol,U,c,"\u25cf"),E.scatterLineWidth=se.line.width,E.scatterLineColor=o(se.line,1,U),E.scatterAngle=0}"textposition"in C&&(E.textOffset=function(Ne){var Be=[0,0];if(Array.isArray(Ne))for(var He=0;He<Ne.length;He++)Be[He]=[0,0],Ne[He]&&(Be[He][0]=h(Ne[He]),Be[He][1]=a(Ne[He]));else Be[0]=h(Ne),Be[1]=a(Ne);return Be}(C.textposition),E.textColor=o(C.textfont,1,U),E.textSize=T(C.textfont.size,U,r.identity,12),E.textFont=C.textfont.family,E.textAngle=0);var Te=["x","y","z"];for(E.project=[!1,!1,!1],E.projectScale=[1,1,1],E.projectOpacity=[1,1,1],N=0;N<3;++N){var Le=C.projection[Te[N]];(E.project[N]=Le.show)&&(E.projectOpacity[N]=Le.opacity,E.projectScale[N]=Le.scale)}E.errorBounds=u(C,K,G);var Oe=function(Ne){for(var Be=[0,0,0],He=[[0,0,0],[0,0,0],[0,0,0]],Ve=[1,1,1],it=0;it<3;it++){var ze=Ne[it];ze&&!1!==ze.copy_zstyle&&!1!==Ne[2].visible&&(ze=Ne[2]),ze&&ze.visible&&(Be[it]=ze.width/2,He[it]=t(ze.color),Ve[it]=ze.thickness)}return{capSize:Be,color:He,lineWidth:Ve}}([C.error_x,C.error_y,C.error_z]);return E.errorColor=Oe.color,E.errorLineWidth=Oe.lineWidth,E.errorCapSize=Oe.capSize,E.delaunayAxis=C.surfaceaxis,E.delaunayColor=t(C.surfacecolor),E}(this.scene,D);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in m&&(N=m[z.lineDashes]),this.color=M(z.scatterColor)||M(z.lineColor),this.dataPoints=z.position,C={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:N[0],dashScale:N[1],opacity:D.opacity,connectGaps:D.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(C):(this.linePlot=p(C),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var q=D.opacity;if(D.marker&&D.marker.opacity&&(q*=D.marker.opacity),P={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:q,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(P):(this.scatterPlot=g(P),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:D.opacity},this.textLabels=D.hovertext||D.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=g(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),L={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:D.opacity},this.errorBars?z.errorBounds?this.errorBars.update(L):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=b(L),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var G=function(K,ne,X){var J,se=(X+1)%3,V=(X+2)%3,j=[],H=[];for(J=0;J<K.length;++J){var oe=K[J];!isNaN(oe[se])&&isFinite(oe[se])&&!isNaN(oe[V])&&isFinite(oe[V])&&(j.push([oe[se],oe[V]]),H.push(J))}var U=e(j);for(J=0;J<U.length;++J)for(var te=U[J],ee=0;ee<te.length;++ee)te[ee]=H[te[ee]];return{positions:K,cells:U,meshColor:ne}}(z.position,z.delaunayColor,z.delaunayAxis);G.opacity=D.opacity,this.delaunayMesh?this.delaunayMesh.update(G):(G.gl=E,this.delaunayMesh=y(G),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},d.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},ae.exports=function(D,C){var P=new s(D,C.uid);return P.update(C),P}},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../scatter/subtypes"),y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/text_defaults"),t=v("./attributes");ae.exports=function(o,n,m,l){function i(_,c){return g.coerce(o,n,t,_,c)}if(_=o,c=n,x=l,w=0,M=(T=i)("x"),D=T("y"),C=T("z"),p.getComponentMethod("calendars","handleTraceDefaults")(_,c,["x","y","z"],x),M&&D&&C&&(w=Math.min(M.length,D.length,C.length),c._length=c._xlength=c._ylength=c._zlength=w),w){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),b.hasLines(n)&&(i("connectgaps"),e(o,n,m,l,i)),b.hasMarkers(n)&&y(o,n,m,l,i,{noSelect:!0}),b.hasText(n)&&(i("texttemplate"),r(o,n,l,i,{noSelect:!0}));var f=(n.line||{}).color,u=(n.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",f||u);for(var s=["x","y","z"],d=0;d<3;++d){var h="projection."+s[d];i(h+".show")&&(i(h+".opacity"),i(h+".scale"))}var a=p.getComponentMethod("errorbars","supplyDefaults");a(o,n,f||u||m,{axis:"z"}),a(o,n,f||u||m,{axis:"y",inherit:"z"}),a(o,n,f||u||m,{axis:"x",inherit:"z"})}else n.visible=!1;var _,c,T,x,w,M,D,C}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(v,ae,ie){"use strict";ae.exports={plot:v("./convert"),attributes:v("./attributes"),markerSymbols:v("../../constants/gl3d_markers"),supplyDefaults:v("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:v("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes"),g=v("../../plots/attributes"),b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),r=v("../../lib/extend").extendFlat,t=p.marker,o=p.line,n=t.line;ae.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:r({},p.mode,{dflt:"markers"}),text:r({},p.text,{}),texttemplate:y({editType:"plot"},{keys:["a","b","text"]}),hovertext:r({},p.hovertext,{}),line:{color:o.color,width:o.width,dash:o.dash,shape:r({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:p.connectgaps,fill:r({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,marker:r({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:r({width:n.width,editType:"calc"},e("marker.line")),gradient:t.gradient,editType:"calc"},e("marker")),textfont:p.textfont,textposition:p.textposition,selected:p.selected,unselected:p.unselected,hoverinfo:r({},g.hoverinfo,{flags:["a","b","text","name"]}),hoveron:p.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../scatter/colorscale_calc"),b=v("../scatter/arrays_to_calcdata"),y=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,r=v("../carpet/lookup_carpetid");ae.exports=function(t,o){var n=o._carpetTrace=r(t,o);if(n&&n.visible&&"legendonly"!==n.visible){var m;o.xaxis=n.xaxis,o.yaxis=n.yaxis;var l,i,f=o._length,u=new Array(f),s=!1;for(m=0;m<f;m++)if(i=o.b[m],p(l=o.a[m])&&p(i)){var d=n.ab2xy(+l,+i,!0),h=n.isVisible(+l,+i);h||(s=!0),u[m]={x:d[0],y:d[1],a:l,b:i,vis:h}}else u[m]={x:!1,y:!1};return o._needsCull=s,u[0].carpet=n,u[0].trace=o,e(o,f),g(t,o),b(u,o),y(u,o),u}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/constants"),b=v("../scatter/subtypes"),y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/line_shape_defaults"),t=v("../scatter/text_defaults"),o=v("../scatter/fillcolor_defaults"),n=v("./attributes");ae.exports=function(m,l,i,f){function u(_,c){return p.coerce(m,l,n,_,c)}u("carpet"),l.xaxis="x",l.yaxis="y";var s=u("a"),d=u("b"),h=Math.min(s.length,d.length);if(h){l._length=h,u("text"),u("texttemplate"),u("hovertext"),u("mode",h<g.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(l)&&(e(m,l,i,f,u),r(m,l,u),u("connectgaps")),b.hasMarkers(l)&&y(m,l,i,f,u,{gradient:!0}),b.hasText(l)&&t(m,l,f,u);var a=[];(b.hasMarkers(l)||b.hasText(l))&&(u("marker.maxdisplayed"),a.push("points")),u("fill"),"none"!==l.fill&&(o(m,l,i,u),b.hasLines(l)||r(m,l,u)),"tonext"!==l.fill&&"toself"!==l.fill||a.push("fills"),"fills"!==u("hoveron",a.join("+")||"points")&&u("hovertemplate"),p.coerceSelectionMarkerOpacity(l,u)}else l.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){var r=y[e];return p.a=r.a,p.b=r.b,p.y=r.y,p}},{}],974:[function(v,ae,ie){"use strict";ae.exports=function(p,g){var b={},y=g._carpet,e=y.ab2ij([p.a,p.b]),r=Math.floor(e[0]),t=e[0]-r,o=Math.floor(e[1]),m=y.evalxy([],r,o,t,e[1]-o);return b.yLabel=m[1].toFixed(3),b}},{}],975:[function(v,ae,ie){"use strict";var p=v("../scatter/hover"),g=v("../../lib").fillText;ae.exports=function(b,y,e,r){var t=p(b,y,e,r);if(t&&!1!==t[0].index){var o=t[0];if(void 0===o.index){var m=b.xa._length,l=m*(1-o.y0/b.ya._length)/2,i=m-l;return o.x0=Math.max(Math.min(o.x0,i),l),o.x1=Math.max(Math.min(o.x1,i),l),t}var f=o.cd[o.index];o.a=f.a,o.b=f.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var u=o.trace,s=u._carpet,d=u._module.formatLabels(f,u);o.yLabel=d.yLabel,delete o.text;var h=[];if(!u.hovertemplate){var a=(f.hi||u.hoverinfo).split("+");-1!==a.indexOf("all")&&(a=["a","b","text"]),-1!==a.indexOf("a")&&_(s.aaxis,f.a),-1!==a.indexOf("b")&&_(s.baxis,f.b),h.push("y: "+o.yLabel),-1!==a.indexOf("text")&&g(f,u,h),o.extraText=h.join("<br>")}return t}function _(c,T){var x;x=c.labelprefix&&c.labelprefix.length>0?c.labelprefix.replace(/ = $/,""):c._hovertitle,h.push(x+": "+T.toFixed(3)+c.labelsuffix)}}},{"../../lib":515,"../scatter/hover":947}],976:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:v("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(v,ae,ie){"use strict";var p=v("../scatter/plot"),g=v("../../plots/cartesian/axes"),b=v("../../components/drawing");ae.exports=function(y,e,r,t){var o,m,l=r[0][0].carpet,i={xaxis:g.getFromId(y,l.xaxis||"x"),yaxis:g.getFromId(y,l.yaxis||"y"),plot:e.plot};for(p(y,i,r,t),o=0;o<r.length;o++)m=t.selectAll("g.trace"+r[o][0].trace.uid+" .js-line"),b.setClipUrl(m,r[o][0].carpet._clipPathId,y)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../scatter/attributes"),y=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),r=v("../../components/drawing/attributes").dash,t=v("../../lib/extend").extendFlat,o=v("../../plot_api/edit_types").overrideAll,n=b.marker,m=b.line,l=n.line;ae.exports=o({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},b.mode,{dflt:"markers"}),text:t({},b.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:m.color,width:m.width,dash:r},connectgaps:b.connectgaps,marker:t({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:t({width:l.width},e("marker.line")),gradient:n.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:t({},y.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,b=v("../scatter/colorscale_calc"),y=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),r=v("../../lib")._;function t(o){return o&&"string"==typeof o}ae.exports=function(o,n){var m,l=Array.isArray(n.locations),i=l?n.locations.length:n._length,f=new Array(i);m=n.geojson?function(_){return t(_)||p(_)}:t;for(var u=0;u<i;u++){var s=f[u]={};if(l){var d=n.locations[u];s.loc=m(d)?d:null}else{var h=n.lon[u],a=n.lat[u];s.lonlat=p(h)&&p(a)?[+h,+a]:[g,g]}}return y(f,n),b(o,n),e(f,n),i&&(f[0].t={labels:{lat:r(o,"lat:")+" ",lon:r(o,"lon:")+" "}}),f}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),r=v("../scatter/fillcolor_defaults"),t=v("./attributes");ae.exports=function(o,n,m,l){function i(_,c){return p.coerce(o,n,t,_,c)}var f,u=i("locations");if(u&&u.length){var s,d=i("geojson");("string"==typeof d&&""!==d||p.isPlainObject(d))&&(s="geojson-id"),"geojson-id"===i("locationmode",s)&&i("featureidkey"),f=u.length}else{var h=i("lon")||[],a=i("lat")||[];f=Math.min(h.length,a.length)}f?(n._length=f,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),g.hasLines(n)&&(y(o,n,m,l,i),i("connectgaps")),g.hasMarkers(n)&&b(o,n,m,l,i,{gradient:!0}),g.hasText(n)&&(i("texttemplate"),e(o,n,l,i)),i("fill"),"none"!==n.fill&&r(o,n,m,i),p.coerceSelectionMarkerOpacity(n,i)):n.visible=!1}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){p.lon=g.lon,p.lat=g.lat,p.location=g.loc?g.loc:null;var r=y[e];return r.fIn&&r.fIn.properties&&(p.properties=r.fIn.properties),p}},{}],982:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes");ae.exports=function(g,b,y){var e={},r=y[b.geo]._subplot.mockAxis,t=g.lonlat;return e.lonLabel=p.tickText(r,r.c2l(t[0]),!0).text,e.latLabel=p.tickText(r,r.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],983:[function(v,ae,ie){"use strict";var p=v("../../components/fx"),g=v("../../constants/numerical").BADNUM,b=v("../scatter/get_trace_color"),y=v("../../lib").fillText,e=v("./attributes");ae.exports=function(r,t,o){var n=r.cd,m=n[0].trace,l=r.xa,i=r.ya,f=r.subplot,u=f.projection.isLonLatOverEdges,s=f.project;if(p.getClosest(n,function(x){var w=x.lonlat;if(w[0]===g||u(w))return 1/0;var M=s(w),D=s([t,o]),C=Math.abs(M[0]-D[0]),P=Math.abs(M[1]-D[1]),L=Math.max(3,x.mrc||0);return Math.max(Math.sqrt(C*C+P*P)-L,1-3/L)},r),!1!==r.index){var d=n[r.index],h=d.lonlat,a=[l.c2p(h),i.c2p(h)],_=d.mrc||1;r.x0=a[0]-_,r.x1=a[0]+_,r.y0=a[1]-_,r.y1=a[1]+_,r.loc=d.loc,r.lon=h[0],r.lat=h[1];var c={};c[m.geo]={_subplot:f};var T=m._module.formatLabels(d,m,c);return r.lonLabel=T.lonLabel,r.latLabel=T.latLabel,r.color=b(m,d),r.extraText=function(x,w,M,D){if(!x.hovertemplate){var C=w.hi||x.hoverinfo,P="all"===C?e.hoverinfo.flags:C.split("+"),L=-1!==P.indexOf("location")&&Array.isArray(x.locations),S=-1!==P.indexOf("lon"),E=-1!==P.indexOf("lat"),N=-1!==P.indexOf("text"),z=[];return L?z.push(w.loc):S&&E?z.push("("+q(M.latLabel)+", "+q(M.lonLabel)+")"):S?z.push(D.lon+q(M.lonLabel)):E&&z.push(D.lat+q(M.latLabel)),N&&y(w,x,z),z.join("<br>")}function q(G){return G+"\xb0"}}(m,d,r,n[0].t.labels),r.hovertemplate=m.hovertemplate,[r]}}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:v("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../lib/topojson_utils").getTopojsonFeatures,y=v("../../lib/geojson_utils"),e=v("../../lib/geo_location_utils"),r=v("../../plots/cartesian/autorange").findExtremes,t=v("../../constants/numerical").BADNUM,o=v("../scatter/calc").calcMarkerSize,n=v("../scatter/subtypes"),m=v("./style");ae.exports={calcGeoJSON:function(l,i){var f,u,s=l[0].trace,d=i[s.geo],h=d._subplot,a=s._length;if(Array.isArray(s.locations)){var _=s.locationmode,c="geojson-id"===_?e.extractTraceFeature(l):b(s,h.topojson);for(f=0;f<a;f++){u=l[f];var T="geojson-id"===_?u.fOut:e.locationToFeature(_,u.loc,c);u.lonlat=T?T.properties.ct:[t,t]}}var x,w,M={padded:!0};if("geojson"===d.fitbounds&&"geojson-id"===s.locationmode){var D=e.computeBbox(e.getTraceGeojson(s));x=[D[0],D[2]],w=[D[1],D[3]]}else{for(x=new Array(a),w=new Array(a),f=0;f<a;f++)x[f]=(u=l[f]).lonlat[0],w[f]=u.lonlat[1];M.ppad=o(s,a)}s._extremes.lon=r(d.lonaxis._ax,x,M),s._extremes.lat=r(d.lataxis._ax,w,M)},plot:function(l,i,f){var u=i.layers.frontplot.select(".scatterlayer"),s=g.makeTraceGroups(u,f,"trace scattergeo");function d(h,a){h.lonlat[0]===t&&p.select(a).remove()}s.selectAll("*").remove(),s.each(function(h){var a=p.select(this),_=h[0].trace;if(n.hasLines(_)||"none"!==_.fill){var c=y.calcTraceToLineCoords(h),T="none"!==_.fill?y.makePolygon(c):y.makeLine(c);a.selectAll("path.js-line").data([{geojson:T,trace:_}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(_)&&a.selectAll("path.point").data(g.identity).enter().append("path").classed("point",!0).each(function(x){d(x,this)}),n.hasText(_)&&a.selectAll("g").data(g.identity).enter().append("g").append("text").each(function(x){d(x,this)}),m(l,h)})}}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(v,ae,ie){"use strict";var p=v("../scatter/subtypes"),g=v("../../constants/numerical").BADNUM;ae.exports=function(b,y){var e,r,t,o,n,m=b.cd,l=b.xaxis,i=b.yaxis,f=[],u=m[0].trace;if(!p.hasMarkers(u)&&!p.hasText(u))return[];if(!1===y)for(n=0;n<m.length;n++)m[n].selected=0;else for(n=0;n<m.length;n++)(r=(e=m[n]).lonlat)[0]!==g&&(t=l.c2p(r),o=i.c2p(r),y.contains([t,o],null,n,b)?(f.push({pointNumber:n,lon:r[0],lat:r[1]}),e.selected=1):e.selected=0);return f}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../../components/color"),y=v("../scatter/style"),e=y.stylePoints,r=y.styleText;ae.exports=function(t,o){var n,m,l,i;o&&(n=t,l=(m=o)[0].trace,(i=m[0].node3).style("opacity",m[0].trace.opacity),e(i,l,n),r(i,l,n),i.selectAll("path.js-line").style("fill","none").each(function(f){var u=p.select(this),s=f.trace,d=s.line||{};u.call(b.stroke,d.color).call(g.dashLine,d.dash||"",d.width||0),"none"!==s.fill&&u.call(b.fill,s.fillcolor)}))}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(v,ae,ie){"use strict";var p=v("../../plots/attributes"),g=v("../scatter/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../components/colorscale/attributes"),e=v("../../lib/sort_object_keys"),r=v("../../lib/extend").extendFlat,t=v("../../plot_api/edit_types").overrideAll,o=v("./constants").DASHES,n=g.line,m=g.marker,l=m.line,i=ae.exports=t({x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:g.text,hovertext:g.hovertext,textposition:g.textposition,textfont:g.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(o),dflt:"solid"}},marker:r({},y("marker"),{symbol:m.symbol,size:m.size,sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:m.opacity,colorbar:m.colorbar,line:r({},y("marker.line"),{width:l.width})}),connectgaps:g.connectgaps,fill:r({},g.fill,{dflt:"none"}),fillcolor:g.fillcolor,selected:{marker:g.selected.marker,textfont:g.selected.textfont},unselected:{marker:g.unselected.marker,textfont:g.unselected.textfont},opacity:p.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=g.hovertemplate,i.texttemplate=g.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(v,ae,ie){"use strict";var p=v("./hover");ae.exports={moduleType:"trace",name:"scattergl",basePlotModule:v("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../scatter/cross_trace_defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:p.hoverPoints,selectPoints:v("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(v,ae,ie){"use strict";var p=v("@plotly/point-cluster"),g=v("../../lib"),b=v("../../plots/cartesian/axis_ids"),y=v("../../plots/cartesian/autorange").findExtremes,e=v("../../plots/cartesian/align_period"),r=v("../scatter/calc"),t=r.calcMarkerSize,o=r.calcAxisExpansion,n=r.setFirstScatter,m=v("../scatter/colorscale_calc"),l=v("./convert"),i=v("./scene_update"),f=v("../../constants/numerical").BADNUM,u=v("./constants").TOO_MANY_POINTS;function s(d,h,a){var _=d._extremes[h._id],c=y(h,a._bnds,{padded:!0});_.min=_.min.concat(c.min),_.max=_.max.concat(c.max)}ae.exports=function(d,h){var a,_=d._fullLayout,c=b.getFromId(d,h.xaxis),T=b.getFromId(d,h.yaxis),x=_._plots[h.xaxis+h.yaxis],w=h._length,M=w>=u,D=2*w,C={},P=c.makeCalcdata(h,"x"),L=T.makeCalcdata(h,"y"),S=e(h,c,"x",P),E=e(h,T,"y",L),N=S.vals,z=E.vals;h._x=N,h._y=z,h.xperiodalignment&&(h._origX=P,h._xStarts=S.starts,h._xEnds=S.ends),h.yperiodalignment&&(h._origY=L,h._yStarts=E.starts,h._yEnds=E.ends);var q=new Array(D),G=new Array(w);for(a=0;a<w;a++)q[2*a]=N[a]===f?NaN:N[a],q[2*a+1]=z[a]===f?NaN:z[a],G[a]=a;if("log"===c.type)for(a=0;a<D;a+=2)q[a]=c.c2l(q[a]);if("log"===T.type)for(a=1;a<D;a+=2)q[a]=T.c2l(q[a]);M&&"log"!==c.type&&"log"!==T.type?C.tree=p(q):C.ids=G,m(d,h);var K,ne=function(J,se,V,j,H,oe){var U=l.style(J,V);if(U.marker&&(U.marker.positions=j),U.line&&j.length>1&&g.extendFlat(U.line,l.linePositions(J,V,j)),U.errorX||U.errorY){var te=l.errorBarPositions(J,V,j,H,oe);U.errorX&&g.extendFlat(U.errorX,te.x),U.errorY&&g.extendFlat(U.errorY,te.y)}return U.text&&(g.extendFlat(U.text,{positions:j},l.textPosition(J,V,U.text,U.marker)),g.extendFlat(U.textSel,{positions:j},l.textPosition(J,V,U.text,U.markerSel)),g.extendFlat(U.textUnsel,{positions:j},l.textPosition(J,V,U.text,U.markerUnsel))),U}(d,0,h,q,N,z),X=i(d,x);return n(_,h),M?ne.marker&&(K=ne.marker.sizeAvg||Math.max(ne.marker.size,3)):K=t(h,w),o(d,h,c,T,N,z,K),ne.errorX&&s(h,c,ne.errorX),ne.errorY&&s(h,T,ne.errorY),ne.fill&&!X.fill2d&&(X.fill2d=!0),ne.marker&&!X.scatter2d&&(X.scatter2d=!0),ne.line&&!X.line2d&&(X.line2d=!0),!ne.errorX&&!ne.errorY||X.error2d||(X.error2d=!0),ne.text&&!X.glText&&(X.glText=!0),ne.marker&&(ne.marker.snap=w),X.lineOptions.push(ne.line),X.errorXOptions.push(ne.errorX),X.errorYOptions.push(ne.errorY),X.fillOptions.push(ne.fill),X.markerOptions.push(ne.marker),X.markerSelectedOptions.push(ne.markerSel),X.markerUnselectedOptions.push(ne.markerUnsel),X.textOptions.push(ne.text),X.textSelectedOptions.push(ne.textSel),X.textUnselectedOptions.push(ne.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),C._scene=X,C.index=X.count,C.x=N,C.y=z,C.positions=q,X.count++,[{x:!1,y:!1,t:C,trace:h}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(v,ae,ie){"use strict";ae.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("svg-path-sdf"),b=v("color-normalize"),y=v("../../registry"),e=v("../../lib"),r=v("../../components/drawing"),t=v("../../plots/cartesian/axis_ids"),o=v("../../lib/gl_format_color").formatColor,n=v("../scatter/subtypes"),m=v("../scatter/make_bubble_size_func"),l=v("./helpers"),i=v("./constants"),f=v("../../constants/interactions").DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},s=v("../../components/fx/helpers").appendArrayPointValue;function d(P,L){var S,E=P._fullLayout,N=L._length,z=L.textfont,q=L.textposition,G=Array.isArray(q)?q:[q],K=z.color,ne=z.size,X=z.family,J={},se=P._context.plotGlPixelRatio,V=L.texttemplate;if(V){J.text=[];var j=E._d3locale,H=Array.isArray(V),oe=H?Math.min(V.length,N):N,U=H?function(be){return V[be]}:function(){return V};for(S=0;S<oe;S++){var te={i:S},ee=L._module.formatLabels(te,L,E),le={};s(le,L,S);var ce=L._meta||{};J.text.push(e.texttemplateString(U(S),ee,j,le,te,ce))}}else J.text=Array.isArray(L.text)&&L.text.length<N?L.text.slice():L.text;if(Array.isArray(J.text))for(S=J.text.length;S<N;S++)J.text[S]="";for(J.opacity=L.opacity,J.font={},J.align=[],J.baseline=[],S=0;S<G.length;S++){var pe=G[S].split(/\s+/);switch(pe[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(pe[1])}switch(pe[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(pe[0])}}if(Array.isArray(K))for(J.color=new Array(N),S=0;S<N;S++)J.color[S]=K[S];else J.color=K;if(e.isArrayOrTypedArray(ne)||Array.isArray(X))for(J.font=new Array(N),S=0;S<N;S++){var de=J.font[S]={};de.size=(e.isTypedArray(ne)?ne[S]:Array.isArray(ne)?p(ne[S])?ne[S]:0:ne)*se,de.family=Array.isArray(X)?X[S]:X}else J.font={size:ne*se,family:X};return J}function h(P){var L,S,E=P._length,N=P.marker,z={},q=e.isArrayOrTypedArray(N.symbol),G=e.isArrayOrTypedArray(N.color),K=e.isArrayOrTypedArray(N.line.color),ne=e.isArrayOrTypedArray(N.opacity),X=e.isArrayOrTypedArray(N.size),J=e.isArrayOrTypedArray(N.line.width);if(q||(S=l.isOpenSymbol(N.symbol)),q||G||K||ne){z.colors=new Array(E),z.borderColors=new Array(E);var se=o(N,N.opacity,E),V=o(N.line,N.opacity,E);if(!Array.isArray(V[0])){var j=V;for(V=Array(E),L=0;L<E;L++)V[L]=j}if(!Array.isArray(se[0])){var H=se;for(se=Array(E),L=0;L<E;L++)se[L]=H}for(z.colors=se,z.borderColors=V,L=0;L<E;L++)q&&(S=l.isOpenSymbol(N.symbol[L])),S&&(V[L]=se[L].slice(),se[L]=se[L].slice(),se[L][3]=0);z.opacity=P.opacity}else S?(z.color=b(N.color,"uint8"),z.color[3]=0,z.borderColor=b(N.color,"uint8")):(z.color=b(N.color,"uint8"),z.borderColor=b(N.line.color,"uint8")),z.opacity=P.opacity*N.opacity;if(q)for(z.markers=new Array(E),L=0;L<E;L++)z.markers[L]=C(N.symbol[L]);else z.marker=C(N.symbol);var U,te=m(P,1);if(X||J){var ee,le=z.sizes=new Array(E),ce=z.borderSizes=new Array(E),pe=0;if(X){for(L=0;L<E;L++)le[L]=te(N.size[L]),pe+=le[L];ee=pe/E}else for(U=te(N.size),L=0;L<E;L++)le[L]=U;if(J)for(L=0;L<E;L++)ce[L]=N.line.width[L];else for(U=N.line.width,L=0;L<E;L++)ce[L]=U;z.sizeAvg=ee}else z.size=te(N&&N.size||10),z.borderSizes=te(N.line.width);return z}function a(P,L){var E={};return L&&(L.marker&&L.marker.symbol?E=h(e.extendFlat({},P.marker,L.marker)):L.marker&&(L.marker.size&&(E.size=L.marker.size),L.marker.color&&(E.colors=L.marker.color),void 0!==L.marker.opacity&&(E.opacity=L.marker.opacity))),E}function _(P,L,S){var E={};if(!S)return E;if(S.textfont){var N={opacity:1,text:L.text,texttemplate:L.texttemplate,textposition:L.textposition,textfont:e.extendFlat({},L.textfont)};S.textfont&&e.extendFlat(N.textfont,S.textfont),E=d(P,N)}return E}function c(P,L,S){var E={capSize:2*L.width*S,lineWidth:L.thickness*S,color:L.color};return L.copy_ystyle&&(E=P.error_y),E}var T=i.SYMBOL_SDF_SIZE,x=i.SYMBOL_SIZE,w=i.SYMBOL_STROKE,M={},D=r.symbolFuncs[0](.05*x);function C(P){if("circle"===P)return null;var L,S,E=r.symbolNumber(P),N=r.symbolFuncs[E%100],z=!!r.symbolNoDot[E%100],q=!!r.symbolNoFill[E%100],G=l.isDotSymbol(P);return M[P]?M[P]:(L=G&&!z?N(1.1*x)+D:N(x),S=g(L,{w:T,h:T,viewBox:[-x,-x,x,x],stroke:q?w:-w}),M[P]=S,S||null)}ae.exports={style:function(P,L){var S,E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},N=P._context.plotGlPixelRatio;if(!0!==L.visible)return E;if(n.hasText(L)&&(E.text=d(P,L),E.textSel=_(P,L,L.selected),E.textUnsel=_(P,L,L.unselected)),n.hasMarkers(L)&&(E.marker=h(L),E.markerSel=a(L,L.selected),E.markerUnsel=a(L,L.unselected),!L.unselected&&e.isArrayOrTypedArray(L.marker.opacity))){var z=L.marker.opacity;for(E.markerUnsel.opacity=new Array(z.length),S=0;S<z.length;S++)E.markerUnsel.opacity[S]=f*z[S]}if(n.hasLines(L)){E.line={overlay:!0,thickness:L.line.width*N,color:L.line.color,opacity:L.opacity};var q=(i.DASHES[L.line.dash]||[1]).slice();for(S=0;S<q.length;++S)q[S]*=L.line.width*N;E.line.dashes=q}return L.error_x&&L.error_x.visible&&(E.errorX=c(L,L.error_x,N)),L.error_y&&L.error_y.visible&&(E.errorY=c(L,L.error_y,N)),L.fill&&"none"!==L.fill&&(E.fill={closed:!0,fill:L.fillcolor,thickness:0}),E},markerStyle:h,markerSelection:a,linePositions:function(P,L,S){var E,N,z=S.length,q=z/2;if(n.hasLines(L)&&q)if("hv"===L.line.shape){for(E=[],N=0;N<q-1;N++)isNaN(S[2*N])||isNaN(S[2*N+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*N],S[2*N+1]),isNaN(S[2*N+2])||isNaN(S[2*N+3])?E.push(NaN,NaN):E.push(S[2*N+2],S[2*N+1]));E.push(S[z-2],S[z-1])}else if("hvh"===L.line.shape){for(E=[],N=0;N<q-1;N++)if(isNaN(S[2*N])||isNaN(S[2*N+1])||isNaN(S[2*N+2])||isNaN(S[2*N+3]))isNaN(S[2*N])||isNaN(S[2*N+1])?E.push(NaN,NaN):E.push(S[2*N],S[2*N+1]),E.push(NaN,NaN);else{var G=(S[2*N]+S[2*N+2])/2;E.push(S[2*N],S[2*N+1],G,S[2*N+1],G,S[2*N+3])}E.push(S[z-2],S[z-1])}else if("vhv"===L.line.shape){for(E=[],N=0;N<q-1;N++)if(isNaN(S[2*N])||isNaN(S[2*N+1])||isNaN(S[2*N+2])||isNaN(S[2*N+3]))isNaN(S[2*N])||isNaN(S[2*N+1])?E.push(NaN,NaN):E.push(S[2*N],S[2*N+1]),E.push(NaN,NaN);else{var K=(S[2*N+1]+S[2*N+3])/2;E.push(S[2*N],S[2*N+1],S[2*N],K,S[2*N+2],K)}E.push(S[z-2],S[z-1])}else if("vh"===L.line.shape){for(E=[],N=0;N<q-1;N++)isNaN(S[2*N])||isNaN(S[2*N+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*N],S[2*N+1]),isNaN(S[2*N+2])||isNaN(S[2*N+3])?E.push(NaN,NaN):E.push(S[2*N],S[2*N+3]));E.push(S[z-2],S[z-1])}else E=S;var ne=!1;for(N=0;N<E.length;N++)if(isNaN(E[N])){ne=!0;break}var X=ne||E.length>i.TOO_MANY_POINTS||n.hasMarkers(L)?"rect":"round";if(ne&&L.connectgaps){var J=E[0],se=E[1];for(N=0;N<E.length;N+=2)isNaN(E[N])||isNaN(E[N+1])?(E[N]=J,E[N+1]=se):(J=E[N],se=E[N+1])}return{join:X,positions:E}},errorBarPositions:function(P,L,S,E,N){var z=y.getComponentMethod("errorbars","makeComputeError"),q=t.getFromId(P,L.xaxis),G=t.getFromId(P,L.yaxis),K=S.length/2,ne={};function X(J,se){var V=se._id.charAt(0),j=L["error_"+V];if(j&&j.visible&&("linear"===se.type||"log"===se.type)){for(var H=z(j),oe={x:0,y:1}[V],U={x:[0,1,2,3],y:[2,3,0,1]}[V],te=new Float64Array(4*K),ee=1/0,le=-1/0,ce=0,pe=0;ce<K;ce++,pe+=4){var de=J[ce];if(p(de)){var be=S[2*ce+oe],he=H(de,ce),xe=he[0],De=he[1];if(p(xe)&&p(De)){var ke=de+De;te[pe+U[0]]=be-se.c2l(de-xe),te[pe+U[1]]=se.c2l(ke)-be,te[pe+U[2]]=0,te[pe+U[3]]=0,ee=Math.min(ee,de-xe),le=Math.max(le,de+De)}}}ne[V]={positions:S,errors:te,_bnds:[ee,le]}}}return X(E,q),X(N,G),ne},textPosition:function(P,L,S,E){var N,z=L._length,q={};if(n.hasMarkers(L)){var G=S.font,K=S.align,ne=S.baseline;for(q.offset=new Array(z),N=0;N<z;N++){var X=E.sizes?E.sizes[N]:E.size,J=Array.isArray(G)?G[N].size:G.size,se=Array.isArray(K)?K.length>1?K[N]:K[0]:K,V=Array.isArray(ne)?ne.length>1?ne[N]:ne[0]:ne,H=u[V],oe=X?X/.8+1:0;q.offset[N]=[u[se]*oe/J,(-H*oe-.5*H)/J]}}return q}}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../registry"),b=v("./helpers"),y=v("./attributes"),e=v("../scatter/constants"),r=v("../scatter/subtypes"),t=v("../scatter/xy_defaults"),o=v("../scatter/period_defaults"),n=v("../scatter/marker_defaults"),m=v("../scatter/line_defaults"),l=v("../scatter/fillcolor_defaults"),i=v("../scatter/text_defaults");ae.exports=function(f,u,s,d){function h(D,C){return p.coerce(f,u,y,D,C)}var a=!!f.marker&&b.isOpenSymbol(f.marker.symbol),_=r.isBubble(f),c=t(f,u,d,h);if(c){o(f,u,d,h),h("xhoverformat"),h("yhoverformat");var T=c<e.PTS_LINESONLY?"lines+markers":"lines";h("text"),h("hovertext"),h("hovertemplate"),h("mode",T),r.hasLines(u)&&(h("connectgaps"),m(f,u,s,d,h),h("line.shape")),r.hasMarkers(u)&&(n(f,u,s,d,h),h("marker.line.width",a||_?1:0)),r.hasText(u)&&(h("texttemplate"),i(f,u,d,h));var x=(u.line||{}).color,w=(u.marker||{}).color;h("fill"),"none"!==u.fill&&l(f,u,s,h);var M=g.getComponentMethod("errorbars","supplyDefaults");M(f,u,x||w||s,{axis:"y"}),M(f,u,x||w||s,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(u,h)}else u.visible=!1}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../../constants/interactions").DESELECTDIM;ae.exports={styleTextSelection:function(y){var e,r,t=y[0],o=t.trace,n=t.t,m=n._scene,l=n.index,i=m.selectBatch[l],f=m.unselectBatch[l],u=m.textOptions[l],s=m.textSelectedOptions[l]||{},d=m.textUnselectedOptions[l]||{},h=p.extendFlat({},u);if(i.length||f.length){var a=s.color,_=d.color,c=u.color,T=Array.isArray(c);for(h.color=new Array(o._length),e=0;e<i.length;e++)h.color[r=i[e]]=a||(T?c[r]:c);for(e=0;e<f.length;e++){r=f[e];var x=T?c[r]:c;h.color[r]=_||(a?x:g.addOpacity(x,b))}}m.glText[l].update(h)}}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(v,ae,ie){"use strict";var p=v("../scatter/format_labels");ae.exports=function(g,b,y){var e=g.i;return"x"in g||(g.x=b._x[e]),"y"in g||(g.y=b._y[e]),p(g,b,y)}},{"../scatter/format_labels":945}],996:[function(v,ae,ie){"use strict";var p=v("./constants");ie.isOpenSymbol=function(g){return"string"==typeof g?p.OPEN_RE.test(g):g%200>100},ie.isDotSymbol=function(g){return"string"==typeof g?p.DOT_RE.test(g):g>200}},{"./constants":991}],997:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../scatter/get_trace_color");function y(e,r,t,o){var n=e.xa,m=e.ya,l=e.distance,i=e.dxy,f=e.index,u={pointNumber:f,x:r[f],y:t[f]};u.tx=Array.isArray(o.text)?o.text[f]:o.text,u.htx=Array.isArray(o.hovertext)?o.hovertext[f]:o.hovertext,u.data=Array.isArray(o.customdata)?o.customdata[f]:o.customdata,u.tp=Array.isArray(o.textposition)?o.textposition[f]:o.textposition;var s=o.textfont;s&&(u.ts=g.isArrayOrTypedArray(s.size)?s.size[f]:s.size,u.tc=Array.isArray(s.color)?s.color[f]:s.color,u.tf=Array.isArray(s.family)?s.family[f]:s.family);var d=o.marker;d&&(u.ms=g.isArrayOrTypedArray(d.size)?d.size[f]:d.size,u.mo=g.isArrayOrTypedArray(d.opacity)?d.opacity[f]:d.opacity,u.mx=g.isArrayOrTypedArray(d.symbol)?d.symbol[f]:d.symbol,u.mc=g.isArrayOrTypedArray(d.color)?d.color[f]:d.color);var h=d&&d.line;h&&(u.mlc=Array.isArray(h.color)?h.color[f]:h.color,u.mlw=g.isArrayOrTypedArray(h.width)?h.width[f]:h.width);var a=d&&d.gradient;a&&"none"!==a.type&&(u.mgt=Array.isArray(a.type)?a.type[f]:a.type,u.mgc=Array.isArray(a.color)?a.color[f]:a.color);var _=n.c2p(u.x,!0),c=m.c2p(u.y,!0),T=u.mrc||1,x=o.hoverlabel;x&&(u.hbg=Array.isArray(x.bgcolor)?x.bgcolor[f]:x.bgcolor,u.hbc=Array.isArray(x.bordercolor)?x.bordercolor[f]:x.bordercolor,u.hts=g.isArrayOrTypedArray(x.font.size)?x.font.size[f]:x.font.size,u.htc=Array.isArray(x.font.color)?x.font.color[f]:x.font.color,u.htf=Array.isArray(x.font.family)?x.font.family[f]:x.font.family,u.hnl=g.isArrayOrTypedArray(x.namelength)?x.namelength[f]:x.namelength);var w=o.hoverinfo;w&&(u.hi=Array.isArray(w)?w[f]:w);var M=o.hovertemplate;M&&(u.ht=Array.isArray(M)?M[f]:M);var D={};D[e.index]=u;var C=o._origX,P=o._origY,L=g.extendFlat({},e,{color:b(o,u),x0:_-T,x1:_+T,xLabelVal:C?C[f]:u.x,y0:c-T,y1:c+T,yLabelVal:P?P[f]:u.y,cd:D,distance:l,spikeDistance:i,hovertemplate:u.ht});return u.htx?L.text=u.htx:u.tx?L.text=u.tx:o.text&&(L.text=o.text),g.fillText(u,o,L),p.getComponentMethod("errorbars","hoverInfo")(u,o,L),L}ae.exports={hoverPoints:function(e,r,t,o){var n,m,l,i,f,u,s,d,h,a,_=e.cd,c=_[0].t,T=_[0].trace,x=e.xa,w=e.ya,M=c.x,D=c.y,C=x.c2p(r),P=w.c2p(t),L=e.distance;if(c.tree){var S=x.p2c(C-L),E=x.p2c(C+L),N=w.p2c(P-L),z=w.p2c(P+L);n="x"===o?c.tree.range(Math.min(S,E),Math.min(w._rl[0],w._rl[1]),Math.max(S,E),Math.max(w._rl[0],w._rl[1])):c.tree.range(Math.min(S,E),Math.min(N,z),Math.max(S,E),Math.max(N,z))}else n=c.ids;var q=L;if("x"===o){var G=!!T.xperiodalignment,K=!!T.yperiodalignment;for(u=0;u<n.length;u++){if(i=M[m=n[u]],s=Math.abs(x.c2p(i)-C),G){var ne=x.c2p(T._xStarts[m]),X=x.c2p(T._xEnds[m]);s=C>=Math.min(ne,X)&&C<=Math.max(ne,X)?0:1/0}if(s<q){if(q=s,d=w.c2p(f=D[m])-P,K){var J=w.c2p(T._yStarts[m]),se=w.c2p(T._yEnds[m]);d=P>=Math.min(J,se)&&P<=Math.max(J,se)?0:1/0}a=Math.sqrt(s*s+d*d),l=n[u]}}}else for(u=n.length-1;u>-1;u--)i=M[m=n[u]],f=D[m],s=x.c2p(i)-C,d=w.c2p(f)-P,(h=Math.sqrt(s*s+d*d))<q&&(q=a=h,l=m);return e.index=l,e.distance=q,e.dxy=a,void 0===l?[e]:[y(e,M,D,T)]},calcHover:y}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(v,ae,ie){arguments[4][905][0].apply(ie,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(v,ae,ie){"use strict";var p=v("regl-scatter2d"),g=v("regl-line2d"),b=v("regl-error2d"),y=v("gl-text"),e=v("../../lib"),r=v("../../components/dragelement/helpers").selectMode,t=v("../../lib/prepare_regl"),o=v("../scatter/subtypes"),n=v("../scatter/link_traces"),m=v("./edit_style").styleTextSelection,l={};function i(f,u,s,d){var h=f._size,M=h.w*d,D=h.h*d;return[h.l*d+u.domain[0]*M,h.b*d+s.domain[0]*D,f.width*d-h.r*d-(1-u.domain[1])*M,f.height*d-h.t*d-(1-s.domain[1])*D]}(ae.exports=function(f,u,s){if(s.length){var d,h,a=f._fullLayout,_=u._scene,c=u.xaxis,T=u.yaxis;if(_)if(t(f,["ANGLE_instanced_arrays","OES_element_index_uint"],l)){var x=_.count,w=a._glcanvas.data()[0].regl;if(n(f,u,s),_.dirty){if(!0===_.error2d&&(_.error2d=b(w)),!0===_.line2d&&(_.line2d=g(w)),!0===_.scatter2d&&(_.scatter2d=p(w)),!0===_.fill2d&&(_.fill2d=g(w)),!0===_.glText)for(_.glText=new Array(x),d=0;d<x;d++)_.glText[d]=new y(w);if(_.glText){if(x>_.glText.length){var M=x-_.glText.length;for(d=0;d<M;d++)_.glText.push(new y(w))}else x<_.glText.length&&_.glText.splice(x,_.glText.length-x).forEach(function(te){te.destroy()});for(d=0;d<x;d++)_.glText[d].update(_.textOptions[d])}if(_.line2d&&(_.line2d.update(_.lineOptions),_.lineOptions=_.lineOptions.map(function(te){if(te&&te.positions){for(var ee=te.positions,le=0;le<ee.length&&(isNaN(ee[le])||isNaN(ee[le+1]));)le+=2;for(var ce=ee.length-2;ce>le&&(isNaN(ee[ce])||isNaN(ee[ce+1]));)ce-=2;te.positions=ee.slice(le,ce+2)}return te}),_.line2d.update(_.lineOptions)),_.error2d){var C=(_.errorXOptions||[]).concat(_.errorYOptions||[]);_.error2d.update(C)}_.scatter2d&&_.scatter2d.update(_.markerOptions),_.fillOrder=e.repeat(null,x),_.fill2d&&(_.fillOptions=_.fillOptions.map(function(te,ee){var le=s[ee];if(te&&le&&le[0]&&le[0].trace){var ce,pe,de=le[0],be=de.trace,he=de.t,xe=_.lineOptions[ee],De=[];be._ownfill&&De.push(ee),be._nexttrace&&De.push(ee+1),De.length&&(_.fillOrder[ee]=De);var Se,ke,Fe=[],ve=xe&&xe.positions||he.positions;if("tozeroy"===be.fill){for(Se=0;Se<ve.length&&isNaN(ve[Se+1]);)Se+=2;for(ke=ve.length-2;ke>Se&&isNaN(ve[ke+1]);)ke-=2;0!==ve[Se+1]&&(Fe=[ve[Se],0]),Fe=Fe.concat(ve.slice(Se,ke+2)),0!==ve[ke+1]&&(Fe=Fe.concat([ve[ke],0]))}else if("tozerox"===be.fill){for(Se=0;Se<ve.length&&isNaN(ve[Se]);)Se+=2;for(ke=ve.length-2;ke>Se&&isNaN(ve[ke]);)ke-=2;0!==ve[Se]&&(Fe=[0,ve[Se+1]]),Fe=Fe.concat(ve.slice(Se,ke+2)),0!==ve[ke]&&(Fe=Fe.concat([0,ve[ke+1]]))}else if("toself"===be.fill||"tonext"===be.fill){for(Fe=[],ce=0,te.splitNull=!0,pe=0;pe<ve.length;pe+=2)(isNaN(ve[pe])||isNaN(ve[pe+1]))&&((Fe=Fe.concat(ve.slice(ce,pe))).push(ve[ce],ve[ce+1]),Fe.push(null,null),ce=pe+2);Fe=Fe.concat(ve.slice(ce)),ce&&Fe.push(ve[ce],ve[ce+1])}else{var Te=be._nexttrace;if(Te){var Le=_.lineOptions[ee+1];if(Le){var Oe=Le.positions;if("tonexty"===be.fill){for(Fe=ve.slice(),ee=Math.floor(Oe.length/2);ee--;){var Ne=Oe[2*ee],Be=Oe[2*ee+1];isNaN(Ne)||isNaN(Be)||Fe.push(Ne,Be)}te.fill=Te.fillcolor}}}}if(be._prevtrace&&"tonext"===be._prevtrace.fill){var He=_.lineOptions[ee-1].positions,Ve=Fe.length/2,it=[ce=Ve];for(pe=0;pe<He.length;pe+=2)(isNaN(He[pe])||isNaN(He[pe+1]))&&(it.push(pe/2+Ve+1),ce=pe+2);Fe=Fe.concat(He),te.hole=it}return te.fillmode=be.fill,te.opacity=be.opacity,te.positions=Fe,te}}),_.fill2d.update(_.fillOptions))}var L=r(a.dragmode),S=a.clickmode.indexOf("select")>-1;for(d=0;d<x;d++){var E=s[d][0],N=E.trace,z=E.t,q=z.index,G=N._length,K=z.x,ne=z.y;if(N.selectedpoints||L||S){if(L||(L=!0),N.selectedpoints){var X=_.selectBatch[q]=e.selIndices2selPoints(N),J={};for(h=0;h<X.length;h++)J[X[h]]=1;var se=[];for(h=0;h<G;h++)J[h]||se.push(h);_.unselectBatch[q]=se}var V=z.xpx=new Array(G),j=z.ypx=new Array(G);for(h=0;h<G;h++)V[h]=c.c2p(K[h]),j[h]=T.c2p(ne[h])}else z.xpx=z.ypx=null}if(L){if(_.select2d||(_.select2d=p(a._glcanvas.data()[1].regl)),_.scatter2d){var H=new Array(x);for(d=0;d<x;d++)H[d]=_.selectBatch[d].length||_.unselectBatch[d].length?_.markerUnselectedOptions[d]:{};_.scatter2d.update(H)}_.select2d&&(_.select2d.update(_.markerOptions),_.select2d.update(_.markerSelectedOptions)),_.glText&&s.forEach(function(te){o.hasText(((te||[])[0]||{}).trace||{})&&m(te)})}else _.scatter2d&&_.scatter2d.update(_.markerOptions);var oe={viewport:i(a,c,T,f._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(T._rl||T.range)[0],(c._rl||c.range)[1],(T._rl||T.range)[1]]},U=e.repeat(oe,_.count);_.fill2d&&_.fill2d.update(U),_.line2d&&_.line2d.update(U),_.error2d&&_.error2d.update(U.concat(U)),_.scatter2d&&_.scatter2d.update(U),_.select2d&&_.select2d.update(U),_.glText&&_.glText.forEach(function(te){te.update(oe)})}else _.init()}}).reglPrecompiled=l},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){var y=b._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},r={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return b._scene||((y=b._scene={}).init=function(){p.extendFlat(y,r,e)},y.init(),y.update=function(t){var o=p.repeat(t,y.count);if(y.fill2d&&y.fill2d.update(o),y.scatter2d&&y.scatter2d.update(o),y.line2d&&y.line2d.update(o),y.error2d&&y.error2d.update(o.concat(o)),y.select2d&&y.select2d.update(o),y.glText)for(var n=0;n<y.count;n++)y.glText[n].update(t)},y.draw=function(){for(var t=y.count,o=y.fill2d,n=y.error2d,m=y.line2d,l=y.scatter2d,i=y.glText,f=y.select2d,u=y.selectBatch,s=y.unselectBatch,d=0;d<t;d++){if(o&&y.fillOrder[d]&&o.draw(y.fillOrder[d]),m&&y.lineOptions[d]&&m.draw(d),n&&(y.errorXOptions[d]&&n.draw(d),y.errorYOptions[d]&&n.draw(d+t)),l&&y.markerOptions[d])if(s[d].length){var h=p.repeat([],y.count);h[d]=s[d],l.draw(h)}else u[d].length||l.draw(d);i[d]&&y.textOptions[d]&&i[d].render()}f&&f.draw(u),y.dirty=!1},y.destroy=function(){y.fill2d&&y.fill2d.destroy&&y.fill2d.destroy(),y.scatter2d&&y.scatter2d.destroy&&y.scatter2d.destroy(),y.error2d&&y.error2d.destroy&&y.error2d.destroy(),y.line2d&&y.line2d.destroy&&y.line2d.destroy(),y.select2d&&y.select2d.destroy&&y.select2d.destroy(),y.glText&&y.glText.forEach(function(t){t.destroy&&t.destroy()}),y.lineOptions=null,y.fillOptions=null,y.markerOptions=null,y.markerSelectedOptions=null,y.markerUnselectedOptions=null,y.errorXOptions=null,y.errorYOptions=null,y.textOptions=null,y.textSelectedOptions=null,y.textUnselectedOptions=null,y.selectBatch=null,y.unselectBatch=null,b._scene=null}),y.dirty||p.extendFlat(y,e),y}},{"../../lib":515}],1001:[function(v,ae,ie){"use strict";var p=v("../scatter/subtypes"),g=v("./edit_style").styleTextSelection;ae.exports=function(b,y){var e=b.cd,r=b.xaxis,t=b.yaxis,o=[],n=e[0].trace,m=e[0].t,l=n._length,i=m.x,f=m.y,u=m._scene,s=m.index;if(!u)return o;var d=p.hasText(n),h=p.hasMarkers(n);if(!0!==n.visible||!h&&!d)return o;var _=[],c=[];if(!1!==y&&!y.degenerate)for(var T=0;T<l;T++)y.contains([m.xpx[T],m.ypx[T]],!1,T,b)?(_.push(T),o.push({pointNumber:T,x:r.c2d(i[T]),y:t.c2d(f[T])})):c.push(T);if(h){var x=u.scatter2d;if(_.length||c.length){if(!u.selectBatch[s].length&&!u.unselectBatch[s].length){var w=new Array(u.count);w[s]=u.markerUnselectedOptions[s],x.update.apply(x,w)}}else{var M=new Array(u.count);M[s]=u.markerOptions[s],x.update.apply(x,M)}}return u.selectBatch[s]=_,u.unselectBatch[s]=c,d&&g(e),o}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../scattergeo/attributes"),y=v("../scatter/attributes"),e=v("../../plots/mapbox/layout_attributes"),r=v("../../plots/attributes"),t=v("../../components/colorscale/attributes"),o=v("../../lib/extend").extendFlat,n=v("../../plot_api/edit_types").overrideAll,m=b.line,l=b.marker;ae.exports=n({lon:b.lon,lat:b.lat,mode:o({},y.mode,{dflt:"markers"}),text:o({},y.text,{}),texttemplate:g({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:o({},y.hovertext,{}),line:{color:m.color,width:m.width},connectgaps:y.connectgaps,marker:o({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},t("marker")),fill:b.fill,fillcolor:y.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:y.selected.marker},unselected:{marker:y.unselected.marker},hoverinfo:o({},r.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../lib"),b=v("../../constants/numerical").BADNUM,y=v("../../lib/geojson_utils"),e=v("../../components/colorscale"),r=v("../../components/drawing"),t=v("../scatter/make_bubble_size_func"),o=v("../scatter/subtypes"),n=v("../../plots/mapbox/convert_text_opts"),m=v("../../components/fx/helpers").appendArrayPointValue,l=v("../../lib/svg_text_utils").NEWLINES,i=v("../../lib/svg_text_utils").BR_TAG_ALL;function f(){return{geojson:y.makeBlank(),layout:{visibility:"none"},paint:{}}}function u(h,a){return g.isArrayOrTypedArray(h)?a?function(_){return p(h[_])?+h[_]:0}:function(_){return h[_]}:h?function(){return h}:s}function s(){return""}function d(h){return h[0]===b}ae.exports=function(h,a){var _,c=a[0].trace,T=!0===c.visible&&0!==c._length,x="none"!==c.fill,w=o.hasLines(c),M=o.hasMarkers(c),D=o.hasText(c),C=M&&"circle"===c.marker.symbol,P=M&&"circle"!==c.marker.symbol,L=f(),S=f(),E=f(),N=f(),z={fill:L,line:S,circle:E,symbol:N};if(!T)return z;if((x||w)&&(_=y.calcTraceToLineCoords(a)),x&&(L.geojson=y.makePolygon(_),L.layout.visibility="visible",g.extendFlat(L.paint,{"fill-color":c.fillcolor})),w&&(S.geojson=y.makeLine(_),S.layout.visibility="visible",g.extendFlat(S.paint,{"line-width":c.line.width,"line-color":c.line.color,"line-opacity":c.opacity})),C){var q=function(ne){var X,J,se,V,j=ne[0].trace,H=j.marker,oe=j.selectedpoints,U=g.isArrayOrTypedArray(H.color),te=g.isArrayOrTypedArray(H.size),ee=g.isArrayOrTypedArray(H.opacity);function le(Se){return j.opacity*Se}U&&(J=e.hasColorscale(j,"marker")?e.makeColorScaleFuncFromTrace(H):g.identity),te&&(se=t(j)),ee&&(V=function(Se){return le(p(Se)?+g.constrain(Se,0,1):0)});var ce,De,pe=[];for(X=0;X<ne.length;X++){var de=ne[X],be=de.lonlat;if(!d(be)){var he={};J&&(he.mcc=de.mcc=J(de.mc)),se&&(he.mrc=de.mrc=se(de.ms)),V&&(he.mo=V(de.mo)),oe&&(he.selected=de.selected||0),pe.push({type:"Feature",geometry:{type:"Point",coordinates:be},properties:he})}}if(oe)for(ce=r.makeSelectedPointStyleFns(j),X=0;X<pe.length;X++){var xe=pe[X].properties;ce.selectedOpacityFn&&(xe.mo=le(ce.selectedOpacityFn(xe))),ce.selectedColorFn&&(xe.mcc=ce.selectedColorFn(xe)),ce.selectedSizeFn&&(xe.mrc=ce.selectedSizeFn(xe))}return{geojson:{type:"FeatureCollection",features:pe},mcc:U||ce&&ce.selectedColorFn?{type:"identity",property:"mcc"}:H.color,mrc:te||ce&&ce.selectedSizeFn?{type:"identity",property:"mrc"}:(De=H.size,De/2),mo:ee||ce&&ce.selectedOpacityFn?{type:"identity",property:"mo"}:le(H.opacity)}}(a);E.geojson=q.geojson,E.layout.visibility="visible",g.extendFlat(E.paint,{"circle-color":q.mcc,"circle-radius":q.mrc,"circle-opacity":q.mo})}if((P||D)&&(N.geojson=function(ne,X){for(var J=X._fullLayout,se=ne[0].trace,V=se.marker||{},j=V.symbol,H=V.angle,oe="circle"!==j?u(j):s,U="auto"!==H?u(H,!0):s,te=o.hasText(se)?u(se.text):s,ee=[],le=0;le<ne.length;le++){var ce=ne[le];if(!d(ce.lonlat)){var pe,de=se.texttemplate;if(de){var be=Array.isArray(de)?de[le]||"":de,he=se._module.formatLabels(ce,se,J),xe={};m(xe,se,ce.i),pe=g.texttemplateString(be,he,J._d3locale,xe,ce,se._meta||{})}else pe=te(le);pe&&(pe=pe.replace(l,"").replace(i,"\n")),ee.push({type:"Feature",geometry:{type:"Point",coordinates:ce.lonlat},properties:{symbol:oe(le),angle:U(le),text:pe}})}}return{type:"FeatureCollection",features:ee}}(a,h),g.extendFlat(N.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(g.extendFlat(N.layout,{"icon-size":c.marker.size/10}),"angle"in c.marker&&"auto"!==c.marker.angle&&g.extendFlat(N.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),N.layout["icon-allow-overlap"]=c.marker.allowoverlap,g.extendFlat(N.paint,{"icon-opacity":c.opacity*c.marker.opacity,"icon-color":c.marker.color})),D)){var K=n(c.textposition,(c.marker||{}).size);g.extendFlat(N.layout,{"text-size":c.textfont.size,"text-anchor":K.anchor,"text-offset":K.offset}),g.extendFlat(N.paint,{"text-color":c.textfont.color,"text-opacity":c.opacity})}return z}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),r=v("../scatter/fillcolor_defaults"),t=v("./attributes");ae.exports=function(o,n,m,l){function i(u,s){return p.coerce(o,n,t,u,s)}if(s=n,h=(d=i)("lon")||[],a=d("lat")||[],_=Math.min(h.length,a.length),s._length=_,_){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),g.hasLines(n)&&(y(o,n,m,l,i,{noDash:!0}),i("connectgaps")),g.hasMarkers(n)){b(o,n,m,l,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var f=n.marker;"circle"!==f.symbol&&(p.isArrayOrTypedArray(f.size)&&(f.size=f.size[0]),p.isArrayOrTypedArray(f.color)&&(f.color=f.color[0]))}g.hasText(n)&&e(o,n,l,i,{noSelect:!0}),i("fill"),"none"!==n.fill&&r(o,n,m,i),p.coerceSelectionMarkerOpacity(n,i)}else n.visible=!1;var s,d,h,a,_}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return p.lon=g.lon,p.lat=g.lat,p}},{}],1006:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes");ae.exports=function(g,b,y){var e={},r=y[b.subplot]._subplot.mockAxis,t=g.lonlat;return e.lonLabel=p.tickText(r,r.c2l(t[0]),!0).text,e.latLabel=p.tickText(r,r.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],1007:[function(v,ae,ie){"use strict";var p=v("../../components/fx"),g=v("../../lib"),b=v("../scatter/get_trace_color"),y=g.fillText,e=v("../../constants/numerical").BADNUM;function r(t,o,n){if(!t.hovertemplate){var m=(o.hi||t.hoverinfo).split("+"),l=-1!==m.indexOf("all"),i=-1!==m.indexOf("lon"),f=-1!==m.indexOf("lat"),u=o.lonlat,s=[];return l||i&&f?s.push("("+d(u[1])+", "+d(u[0])+")"):i?s.push(n.lon+d(u[0])):f&&s.push(n.lat+d(u[1])),(l||-1!==m.indexOf("text"))&&y(o,t,s),s.join("<br>")}function d(h){return h+"\xb0"}}ae.exports={hoverPoints:function(t,o,n){var m=t.cd,l=m[0].trace,i=t.xa,f=t.ya,u=t.subplot,s=360*(o>=0?Math.floor((o+180)/360):Math.ceil((o-180)/360)),d=o-s;if(p.getClosest(m,function(D){var C=D.lonlat;if(C[0]===e)return 1/0;var P=g.modHalf(C[0],360),L=C[1],S=u.project([P,L]),E=S.x-i.c2p([d,L]),N=S.y-f.c2p([P,n]),z=Math.max(3,D.mrc||0);return Math.max(Math.sqrt(E*E+N*N)-z,1-3/z)},t),!1!==t.index){var h=m[t.index],a=h.lonlat,_=[g.modHalf(a[0],360)+s,a[1]],c=i.c2p(_),T=f.c2p(_),x=h.mrc||1;t.x0=c-x,t.x1=c+x,t.y0=T-x,t.y1=T+x;var w={};w[l.subplot]={_subplot:u};var M=l._module.formatLabels(h,l,w);return t.lonLabel=M.lonLabel,t.latLabel=M.latLabel,t.color=b(l,h),t.extraText=r(l,h,m[0].t.labels),t.hovertemplate=l.hovertemplate,[t]}},getExtraText:r}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946}],1008:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("../scattergeo/calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),styleOnSelect:function(p,g){g&&g[0].trace._glTrace.update(g)},moduleType:"trace",name:"scattermapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(v,ae,ie){"use strict";var p=v("./convert"),g=v("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function y(r,t){this.type="scattermapbox",this.subplot=r,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:g+t+"-fill",line:g+t+"-line",circle:g+t+"-circle",symbol:g+t+"-symbol"},this.below=null}var e=y.prototype;e.addSource=function(r,t){this.subplot.map.addSource(this.sourceIds[r],{type:"geojson",data:t.geojson})},e.setSourceData=function(r,t){this.subplot.map.getSource(this.sourceIds[r]).setData(t.geojson)},e.addLayer=function(r,t,o){this.subplot.addLayer({type:r,id:this.layerIds[r],source:this.sourceIds[r],layout:t.layout,paint:t.paint},o)},e.update=function(r){var t,o,n,m=this.subplot,l=m.map,i=p(m.gd,r),f=m.belowLookup["trace-"+this.uid];if(f!==this.below){for(t=b.length-1;t>=0;t--)l.removeLayer(this.layerIds[o=b[t]]);for(t=0;t<b.length;t++)n=i[o=b[t]],this.addLayer(o,n,f);this.below=f}for(t=0;t<b.length;t++)n=i[o=b[t]],m.setOptions(this.layerIds[o],"setLayoutProperty",n.layout),"visible"===n.layout.visibility&&(this.setSourceData(o,n),m.setOptions(this.layerIds[o],"setPaintProperty",n.paint));r[0].trace._glTrace=this},e.dispose=function(){for(var r=this.subplot.map,t=b.length-1;t>=0;t--){var o=b[t];r.removeLayer(this.layerIds[o]),r.removeSource(this.sourceIds[o])}},ae.exports=function(r,t){for(var o=t[0].trace,n=new y(r,o.uid),m=p(r.gd,t),l=n.below=r.belowLookup["trace-"+o.uid],i=0;i<b.length;i++){var f=b[i],u=m[f];n.addSource(f,u),n.addLayer(f,u,l)}return t[0].trace._glTrace=n,n}},{"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/subtypes"),b=v("../../constants/numerical").BADNUM;ae.exports=function(y,e){var r,t=y.cd,o=y.xaxis,n=y.yaxis,m=[];if(!g.hasMarkers(t[0].trace))return[];if(!1===e)for(r=0;r<t.length;r++)t[r].selected=0;else for(r=0;r<t.length;r++){var i=t[r],f=i.lonlat;if(f[0]!==b){var u=[p.modHalf(f[0],360),f[1]],s=[o.c2p(u),n.c2p(u)];e.contains(s,null,r,y)?(m.push({pointNumber:r,lon:f[0],lat:f[1]}),i.selected=1):i.selected=0}}return m}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../lib/extend").extendFlat,y=v("../scatter/attributes"),e=v("../../plots/attributes"),r=y.line;ae.exports={mode:y.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:g({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:b({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:b({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:b({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:y.hoveron,hovertemplate:p(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,b=v("../../plots/cartesian/axes"),y=v("../scatter/colorscale_calc"),e=v("../scatter/arrays_to_calcdata"),r=v("../scatter/calc_selection"),t=v("../scatter/calc").calcMarkerSize;ae.exports=function(o,n){for(var m=o._fullLayout,l=n.subplot,i=m[l].radialaxis,f=m[l].angularaxis,u=i.makeCalcdata(n,"r"),s=f.makeCalcdata(n,"theta"),d=n._length,h=new Array(d),a=0;a<d;a++){var _=u[a],c=s[a],T=h[a]={};p(_)&&p(c)?(T.r=_,T.theta=c):T.r=g}var x=t(n,d);return n._extremes.x=b.findExtremes(i,u,{ppad:x}),y(o,n),e(h,n),r(h,n),h}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),r=v("../scatter/text_defaults"),t=v("../scatter/fillcolor_defaults"),o=v("../scatter/constants").PTS_LINESONLY,n=v("./attributes");function m(l,i,f,u){var s,d=u("r"),h=u("theta");if(d)h?s=Math.min(d.length,h.length):(s=d.length,u("theta0"),u("dtheta"));else{if(!h)return 0;s=i.theta.length,u("r0"),u("dr")}return i._length=s,s}ae.exports={handleRThetaDefaults:m,supplyDefaults:function(l,i,f,u){function s(a,_){return p.coerce(l,i,n,a,_)}var d=m(0,i,0,s);if(d){s("thetaunit"),s("mode",d<o?"lines+markers":"lines"),s("text"),s("hovertext"),"fills"!==i.hoveron&&s("hovertemplate"),g.hasLines(i)&&(y(l,i,f,u,s),e(l,i,s),s("connectgaps")),g.hasMarkers(i)&&b(l,i,f,u,s,{gradient:!0}),g.hasText(i)&&(s("texttemplate"),r(l,i,u,s));var h=[];(g.hasMarkers(i)||g.hasText(i))&&(s("cliponaxis"),s("marker.maxdisplayed"),h.push("points")),s("fill"),"none"!==i.fill&&(t(l,i,f,s),g.hasLines(i)||e(l,i,s)),"tonext"!==i.fill&&"toself"!==i.fill||h.push("fills"),s("hoveron",h.join("+")||"points"),p.coerceSelectionMarkerOpacity(i,s)}else i.visible=!1}}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes");ae.exports=function(b,y,e){var r,t,o={},n=e[y.subplot]._subplot;n?(r=n.radialAxis,t=n.angularAxis):(r=(n=e[y.subplot]).radialaxis,t=n.angularaxis);var m=r.c2l(b.r);o.rLabel=g.tickText(r,m,!0).text;var l="degrees"===t.thetaunit?p.rad2deg(b.theta):b.theta;return o.thetaLabel=g.tickText(t,l,!0).text,o}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(v,ae,ie){"use strict";var p=v("../scatter/hover");function g(b,y,e,r){var t=e.radialAxis,o=e.angularAxis;t._hovertitle="r",o._hovertitle="\u03b8";var n={};n[y.subplot]={_subplot:e};var m=y._module.formatLabels(b,y,n);r.rLabel=m.rLabel,r.thetaLabel=m.thetaLabel;var i=[];function f(s,d){i.push(s._hovertitle+": "+d)}if(!y.hovertemplate){var u=(b.hi||y.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["r","theta","text"]),-1!==u.indexOf("r")&&f(t,r.rLabel),-1!==u.indexOf("theta")&&f(o,r.thetaLabel),-1!==u.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}ae.exports={hoverPoints:function(b,y,e,r){var t=p(b,y,e,r);if(t&&!1!==t[0].index){var o=t[0];if(void 0===o.index)return t;var n=b.subplot,m=o.cd[o.index],l=o.trace;if(n.isPtInside(m))return o.xLabelVal=void 0,o.yLabelVal=void 0,g(m,l,n,o),o.hovertemplate=l.hovertemplate,t}},makeHoverPointText:g}},{"../scatter/hover":947}],1016:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:v("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(v,ae,ie){"use strict";var p=v("../scatter/plot"),g=v("../../constants/numerical").BADNUM;ae.exports=function(b,y,e){for(var r=y.layers.frontplot.select("g.scatterlayer"),t={xaxis:y.xaxis,yaxis:y.yaxis,plot:y.framework,layerClipId:y._hasClipOnAxisFalse?y.clipIds.forTraces:null},o=y.radialAxis,n=y.angularAxis,m=0;m<e.length;m++)for(var l=e[m],i=0;i<l.length;i++){var f=l[i],u=f.r;if(u===g)f.x=f.y=g;else{var s=o.c2g(u),d=n.c2g(f.theta);f.x=s*Math.cos(d),f.y=s*Math.sin(d)}}p(b,t,e,r)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(v,ae,ie){"use strict";var p=v("../scatterpolar/attributes"),g=v("../scattergl/attributes"),b=v("../../plots/template_attributes").texttemplateAttrs;ae.exports={mode:p.mode,r:p.r,theta:p.theta,r0:p.r0,dr:p.dr,theta0:p.theta0,dtheta:p.dtheta,thetaunit:p.thetaunit,text:p.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,hovertemplate:p.hovertemplate,line:g.line,connectgaps:g.connectgaps,marker:g.marker,fill:g.fill,fillcolor:g.fillcolor,textposition:g.textposition,textfont:g.textfont,hoverinfo:p.hoverinfo,selected:p.selected,unselected:p.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:v("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(v,ae,ie){"use strict";var p=v("../scatter/colorscale_calc"),g=v("../scatter/calc").calcMarkerSize,b=v("../scattergl/convert"),y=v("../../plots/cartesian/axes"),e=v("../scattergl/constants").TOO_MANY_POINTS;ae.exports=function(r,t){var o=r._fullLayout,n=t.subplot,m=o[n].radialaxis,l=o[n].angularaxis,i=t._r=m.makeCalcdata(t,"r"),f=t._theta=l.makeCalcdata(t,"theta"),u=t._length,s={};u<i.length&&(i=i.slice(0,u)),u<f.length&&(f=f.slice(0,u)),s.r=i,s.theta=f,p(r,t);var d,h=s.opts=b.style(r,t);return u<e?d=g(t,u):h.marker&&(d=2*(h.marker.sizeAvg||Math.max(h.marker.size,3))),t._extremes.x=y.findExtremes(m,i,{ppad:d}),[{x:!1,y:!1,t:s,trace:t}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/subtypes"),b=v("../scatterpolar/defaults").handleRThetaDefaults,y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/text_defaults"),t=v("../scatter/fillcolor_defaults"),o=v("../scatter/constants").PTS_LINESONLY,n=v("./attributes");ae.exports=function(m,l,i,f){function u(d,h){return p.coerce(m,l,n,d,h)}var s=b(m,l,f,u);s?(u("thetaunit"),u("mode",s<o?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==l.hoveron&&u("hovertemplate"),g.hasLines(l)&&(e(m,l,i,f,u),u("connectgaps")),g.hasMarkers(l)&&y(m,l,i,f,u),g.hasText(l)&&(u("texttemplate"),r(m,l,f,u)),u("fill"),"none"!==l.fill&&t(m,l,i,u),p.coerceSelectionMarkerOpacity(l,u)):l.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(v,ae,ie){"use strict";var p=v("../scatterpolar/format_labels");ae.exports=function(g,b,y){var e=g.i;return"r"in g||(g.r=b._r[e]),"theta"in g||(g.theta=b._theta[e]),p(g,b,y)}},{"../scatterpolar/format_labels":1014}],1023:[function(v,ae,ie){"use strict";var p=v("../scattergl/hover"),g=v("../scatterpolar/hover").makeHoverPointText;ae.exports={hoverPoints:function(b,y,e,r){var t=b.cd[0].t,o=t.r,n=t.theta,m=p.hoverPoints(b,y,e,r);if(m&&!1!==m[0].index){var l=m[0];if(void 0===l.index)return m;var i=b.subplot,f=l.cd[l.index],u=l.trace;if(f.r=o[l.index],f.theta=n[l.index],i.isPtInside(f))return l.xLabelVal=void 0,l.yLabelVal=void 0,g(f,u,i,l),m}}}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(v,ae,ie){arguments[4][905][0].apply(ie,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(v,ae,ie){"use strict";var p=v("@plotly/point-cluster"),g=v("fast-isnumeric"),b=v("../scattergl/plot"),y=v("../scattergl/scene_update"),e=v("../scattergl/convert"),r=v("../../lib"),t=v("../scattergl/constants").TOO_MANY_POINTS;ae.exports=function(o,n,m){if(m.length){var l=n.radialAxis,i=n.angularAxis,f=y(o,n);return m.forEach(function(u){if(u&&u[0]&&u[0].trace){var s,d=u[0],h=d.trace,a=d.t,_=h._length,c=a.r,T=a.theta,x=a.opts,w=c.slice(),M=T.slice();for(s=0;s<c.length;s++)n.isPtInside({r:c[s],theta:T[s]})||(w[s]=NaN,M[s]=NaN);var D=new Array(2*_),C=Array(_),P=Array(_);for(s=0;s<_;s++){var L,S,E=w[s];if(g(E)){var N=l.c2g(E),z=i.c2g(M[s],h.thetaunit);L=N*Math.cos(z),S=N*Math.sin(z)}else L=S=NaN;C[s]=D[2*s]=L,P[s]=D[2*s+1]=S}a.tree=p(D),x.marker&&_>=t&&(x.marker.cluster=a.tree),x.marker&&(x.markerSel.positions=x.markerUnsel.positions=x.marker.positions=D),x.line&&D.length>1&&r.extendFlat(x.line,e.linePositions(o,h,D)),x.text&&(r.extendFlat(x.text,{positions:D},e.textPosition(o,h,x.text,x.marker)),r.extendFlat(x.textSel,{positions:D},e.textPosition(o,h,x.text,x.markerSel)),r.extendFlat(x.textUnsel,{positions:D},e.textPosition(o,h,x.text,x.markerUnsel))),x.fill&&!f.fill2d&&(f.fill2d=!0),x.marker&&!f.scatter2d&&(f.scatter2d=!0),x.line&&!f.line2d&&(f.line2d=!0),x.text&&!f.glText&&(f.glText=!0),f.lineOptions.push(x.line),f.fillOptions.push(x.fill),f.markerOptions.push(x.marker),f.markerSelectedOptions.push(x.markerSel),f.markerUnselectedOptions.push(x.markerUnsel),f.textOptions.push(x.text),f.textSelectedOptions.push(x.textSel),f.textUnselectedOptions.push(x.textUnsel),f.selectBatch.push([]),f.unselectBatch.push([]),a.x=C,a.y=P,a.rawx=C,a.rawy=P,a.r=c,a.theta=T,a.positions=D,a._scene=f,a.index=f.count,f.count++}}),b(o,n,m)}},ae.exports.reglPrecompiled={}},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../lib/extend").extendFlat,y=v("../scatter/attributes"),e=v("../../plots/attributes"),r=y.line;ae.exports={mode:y.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:g({editType:"plot"},{keys:["real","imag","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:b({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:b({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:b({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:y.hoveron,hovertemplate:p(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../../constants/numerical").BADNUM,b=v("../scatter/colorscale_calc"),y=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),r=v("../scatter/calc").calcMarkerSize;ae.exports=function(t,o){for(var n=t._fullLayout,m=o.subplot,i=n[m].imaginaryaxis,f=n[m].realaxis.makeCalcdata(o,"real"),u=i.makeCalcdata(o,"imag"),s=o._length,d=new Array(s),h=0;h<s;h++){var a=f[h],_=u[h],c=d[h]={};p(a)&&p(_)?(c.real=a,c.imag=_):c.real=g}return r(o,s),b(t,o),y(d,o),e(d,o),d}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),r=v("../scatter/text_defaults"),t=v("../scatter/fillcolor_defaults"),o=v("../scatter/constants").PTS_LINESONLY,n=v("./attributes");ae.exports=function(m,l,i,f){function u(h,a){return p.coerce(m,l,n,h,a)}var a,c,T,x,w,s=(a=l,x=(c=u)("real"),w=c("imag"),x&&w&&(T=Math.min(x.length,w.length)),a._length=T,T);if(s){u("mode",s<o?"lines+markers":"lines"),u("text"),u("hovertext"),"fills"!==l.hoveron&&u("hovertemplate"),g.hasLines(l)&&(y(m,l,i,f,u),e(m,l,u),u("connectgaps")),g.hasMarkers(l)&&b(m,l,i,f,u,{gradient:!0}),g.hasText(l)&&(u("texttemplate"),r(m,l,f,u));var d=[];(g.hasMarkers(l)||g.hasText(l))&&(u("cliponaxis"),u("marker.maxdisplayed"),d.push("points")),u("fill"),"none"!==l.fill&&(t(m,l,i,u),g.hasLines(l)||e(m,l,u)),"tonext"!==l.fill&&"toself"!==l.fill||d.push("fills"),u("hoveron",d.join("+")||"points"),p.coerceSelectionMarkerOpacity(l,u)}else l.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes");ae.exports=function(g,b,y){var e={},r=y[b.subplot]._subplot;return e.realLabel=p.tickText(r.radialAxis,g.real,!0).text,e.imagLabel=p.tickText(r.angularAxis,g.imag,!0).text,e}},{"../../plots/cartesian/axes":566}],1030:[function(v,ae,ie){"use strict";var p=v("../scatter/hover");function g(b,y,e,r){var t=e.radialAxis,o=e.angularAxis;t._hovertitle="real",o._hovertitle="imag";var n={};n[y.subplot]={_subplot:e};var m=y._module.formatLabels(b,y,n);r.realLabel=m.realLabel,r.imagLabel=m.imagLabel;var i=[];function f(s,d){i.push(s._hovertitle+": "+d)}if(!y.hovertemplate){var u=(b.hi||y.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["real","imag","text"]),-1!==u.indexOf("real")&&f(t,r.realLabel),-1!==u.indexOf("imag")&&f(o,r.imagLabel),-1!==u.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}ae.exports={hoverPoints:function(b,y,e,r){var t=p(b,y,e,r);if(t&&!1!==t[0].index){var o=t[0];if(void 0===o.index)return t;var n=b.subplot,m=o.cd[o.index],l=o.trace;if(n.isPtInside(m))return o.xLabelVal=void 0,o.yLabelVal=void 0,g(m,l,n,o),o.hovertemplate=l.hovertemplate,t}},makeHoverPointText:g}},{"../scatter/hover":947}],1031:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"scattersmith",basePlotModule:v("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(v,ae,ie){"use strict";var p=v("../scatter/plot"),g=v("../../constants/numerical").BADNUM,b=v("../../plots/smith/helpers").smith;ae.exports=function(y,e,r){for(var t=e.layers.frontplot.select("g.scatterlayer"),o={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},n=0;n<r.length;n++)for(var m=r[n],l=0;l<m.length;l++){var i=m[l],f=i.real;if(f===g)i.x=i.y=g;else{var u=b([f,i.imag]);i.x=u[0],i.y=u[1]}}p(y,o,r,t)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../scatter/attributes"),y=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),r=v("../../components/drawing/attributes").dash,t=v("../../lib/extend").extendFlat,o=b.marker,n=b.line,m=o.line;ae.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},b.mode,{dflt:"markers"}),text:t({},b.text,{}),texttemplate:g({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},b.hovertext,{}),line:{color:n.color,width:n.width,dash:r,shape:t({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:t({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:t({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:t({width:m.width,editType:"calc"},e("marker.line")),gradient:o.gradient,editType:"calc"},e("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:t({},y.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:p()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(v,ae,ie){"use strict";var p=v("fast-isnumeric"),g=v("../scatter/colorscale_calc"),b=v("../scatter/arrays_to_calcdata"),y=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,r=["a","b","c"],t={a:["b","c"],b:["a","c"],c:["a","b"]};ae.exports=function(o,n){var m,l,i,f,u,s,d=o._fullLayout[n.subplot].sum,h=n.sum||d,a={a:n.a,b:n.b,c:n.c};for(m=0;m<r.length;m++)if(!a[i=r[m]]){for(u=a[t[i][0]],s=a[t[i][1]],f=new Array(u.length),l=0;l<u.length;l++)f[l]=h-u[l]-s[l];a[i]=f}var _,c,T,x,D=n._length,C=new Array(D);for(m=0;m<D;m++)c=a.b[m],T=a.c[m],p(_=a.a[m])&&p(c)&&p(T)?(1!=(x=d/((_=+_)+(c=+c)+(T=+T)))&&(_*=x,c*=x,T*=x),C[m]={x:T-c,y:_,a:_,b:c,c:T}):C[m]={x:!1,y:!1};return e(n,D),g(o,n),b(C,n),y(C,n),C}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/constants"),b=v("../scatter/subtypes"),y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/line_shape_defaults"),t=v("../scatter/text_defaults"),o=v("../scatter/fillcolor_defaults"),n=v("./attributes");ae.exports=function(m,l,i,f){function u(c,T){return p.coerce(m,l,n,c,T)}var s,d=u("a"),h=u("b"),a=u("c");if(d?(s=d.length,h?(s=Math.min(s,h.length),a&&(s=Math.min(s,a.length))):s=a?Math.min(s,a.length):0):h&&a&&(s=Math.min(h.length,a.length)),s){l._length=s,u("sum"),u("text"),u("hovertext"),"fills"!==l.hoveron&&u("hovertemplate"),u("mode",s<g.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(l)&&(e(m,l,i,f,u),r(m,l,u),u("connectgaps")),b.hasMarkers(l)&&y(m,l,i,f,u,{gradient:!0}),b.hasText(l)&&(u("texttemplate"),t(m,l,f,u));var _=[];(b.hasMarkers(l)||b.hasText(l))&&(u("cliponaxis"),u("marker.maxdisplayed"),_.push("points")),u("fill"),"none"!==l.fill&&(o(m,l,i,u),b.hasLines(l)||r(m,l,u)),"tonext"!==l.fill&&"toself"!==l.fill||_.push("fills"),u("hoveron",_.join("+")||"points"),p.coerceSelectionMarkerOpacity(l,u)}else l.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(v,ae,ie){"use strict";ae.exports=function(p,g,b,y,e){if(g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),y[e]){var r=y[e];p.a=r.a,p.b=r.b,p.c=r.c}else p.a=g.a,p.b=g.b,p.c=g.c;return p}},{}],1037:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes");ae.exports=function(g,b,y){var e={},r=y[b.subplot]._subplot;return e.aLabel=p.tickText(r.aaxis,g.a,!0).text,e.bLabel=p.tickText(r.baxis,g.b,!0).text,e.cLabel=p.tickText(r.caxis,g.c,!0).text,e}},{"../../plots/cartesian/axes":566}],1038:[function(v,ae,ie){"use strict";var p=v("../scatter/hover");ae.exports=function(g,b,y,e){var r=p(g,b,y,e);if(r&&!1!==r[0].index){var t=r[0];if(void 0===t.index){var n=g.xa._length,m=n*(1-t.y0/g.ya._length)/2,l=n-m;return t.x0=Math.max(Math.min(t.x0,l),m),t.x1=Math.max(Math.min(t.x1,l),m),r}var i=t.cd[t.index],f=t.trace,u=t.subplot;t.a=i.a,t.b=i.b,t.c=i.c,t.xLabelVal=void 0,t.yLabelVal=void 0;var s={};s[f.subplot]={_subplot:u};var d=f._module.formatLabels(i,f,s);t.aLabel=d.aLabel,t.bLabel=d.bLabel,t.cLabel=d.cLabel;var a=[];if(!f.hovertemplate){var _=(i.hi||f.hoverinfo).split("+");-1!==_.indexOf("all")&&(_=["a","b","c"]),-1!==_.indexOf("a")&&c(u.aaxis,t.aLabel),-1!==_.indexOf("b")&&c(u.baxis,t.bLabel),-1!==_.indexOf("c")&&c(u.caxis,t.cLabel)}return t.extraText=a.join("<br>"),t.hovertemplate=f.hovertemplate,r}function c(T,x){a.push(T._hovertitle+": "+x)}}},{"../scatter/hover":947}],1039:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:v("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(v,ae,ie){"use strict";var p=v("../scatter/plot");ae.exports=function(g,b,y){var e=b.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var r={xaxis:b.xaxis,yaxis:b.yaxis,plot:e,layerClipId:b._hasClipOnAxisFalse?b.clipIdRelative:null},t=b.layers.frontplot.select("g.scatterlayer");p(g,r,y,t)}},{"../scatter/plot":957}],1041:[function(v,ae,ie){"use strict";var p=v("../scatter/attributes"),g=v("../../components/colorscale/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../scattergl/attributes"),r=v("../../plots/cartesian/constants").idRegex,t=v("../../plot_api/plot_template").templatedArray,o=v("../../lib/extend").extendFlat,n=p.marker,m=n.line,l=o(g("marker.line",{editTypeOverride:"calc"}),{width:o({},m.width,{editType:"calc"}),editType:"calc"}),i=o(g("marker"),{symbol:n.symbol,size:o({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:l,editType:"calc"});function f(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:r[u],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",ae.exports={dimensions:t("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:o({},e.text,{}),hovertext:o({},e.hovertext,{}),hovertemplate:y(),xhoverformat:b("x"),yhoverformat:b("y"),marker:i,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../components/grid");ae.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select"),editStyle:v("./edit_style"),meta:{}},p.register(g)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(v,ae,ie){"use strict";var p=v("regl-line2d"),g=v("../../registry"),b=v("../../lib/prepare_regl"),y=v("../../plots/get_data").getModuleCalcData,e=v("../../plots/cartesian"),r=v("../../plots/cartesian/axis_ids").getFromId,t=v("../../plots/cartesian/axes").shouldShowZeroLine,o={};function n(l,i,f){for(var s=i._visibleDims,d=f.viewOpts.ranges=new Array(f.matrixOptions.data.length),h=0;h<s.length;h++){var a=s[h],_=d[h]=new Array(4),c=r(l,i._diag[a][0]);c&&(_[0]=c.r2l(c.range[0]),_[2]=c.r2l(c.range[1]));var T=r(l,i._diag[a][1]);T&&(_[1]=T.r2l(T.range[0]),_[3]=T.r2l(T.range[1]))}f.selectBatch.length||f.unselectBatch.length?f.matrix.update({ranges:d},{ranges:d}):f.matrix.update({ranges:d})}function m(l){var i=l._fullLayout,f=i._glcanvas.data()[0].regl,u=i._splomGrid;u||(u=i._splomGrid=p(f)),u.update(function(s){var d,h=s._context.plotGlPixelRatio,a=s._fullLayout,_=a._size,c=[0,0,a.width*h,a.height*h],T={};function x(X,J,se,V,j,H){se*=h,V*=h,j*=h,H*=h;var oe=J[X+"color"],U=J[X+"width"],te=String(oe+U);te in T?T[te].data.push(NaN,NaN,se,V,j,H):T[te]={data:[se,V,j,H],join:"rect",thickness:U*h,color:oe,viewport:c,range:c,overlay:!1}}for(d in a._splomSubplots){var w,M,D=a._plots[d],C=D.xaxis,P=D.yaxis,L=C._gridVals,S=P._gridVals,E=C._offset,N=C._length,z=P._length,q=_.b+P.domain[0]*_.h,G=-P._m,K=-G*P.r2l(P.range[0],P.calendar);if(C.showgrid)for(d=0;d<L.length;d++)w=E+C.l2p(L[d].x),x("grid",C,w,q,w,q+z);if(P.showgrid)for(d=0;d<S.length;d++)x("grid",P,E,M=q+K+G*S[d].x,E+N,M);t(s,C,P)&&(w=E+C.l2p(0),x("zeroline",C,w,q,w,q+z)),t(s,P,C)&&x("zeroline",P,E,M=q+K+0,E+N,M)}var ne=[];for(d in T)ne.push(T[d]);return ne}(l))}ae.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(l){var i=l._fullLayout,f=g.getModule("splom"),u=y(l.calcdata,f)[0];b(l,["ANGLE_instanced_arrays","OES_element_index_uint"],o)&&(i._hasOnlyLargeSploms&&m(l),f.plot(l,{},u))},drag:function(l){var i=l.calcdata,f=l._fullLayout;f._hasOnlyLargeSploms&&m(l);for(var u=0;u<i.length;u++){var s=i[u][0].trace,d=f._splomScenes[s.uid];"splom"===s.type&&d&&d.matrix&&n(l,s,d)}},updateGrid:m,clean:function(l,i,f,u){var s,d={};if(u._splomScenes){for(s=0;s<l.length;s++){var h=l[s];"splom"===h.type&&(d[h.uid]=1)}for(s=0;s<f.length;s++){var a=f[s];if(!d[a.uid]){var _=u._splomScenes[a.uid];_&&_.destroy&&_.destroy(),u._splomScenes[a.uid]=null,delete u._splomScenes[a.uid]}}}0===Object.keys(u._splomScenes||{}).length&&delete u._splomScenes,u._splomGrid&&!i._hasOnlyLargeSploms&&u._hasOnlyLargeSploms&&(u._splomGrid.destroy(),u._splomGrid=null,delete u._splomGrid),e.clean(l,i,f,u)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:o}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axis_ids"),b=v("../scatter/calc").calcMarkerSize,y=v("../scatter/calc").calcAxisExpansion,e=v("../scatter/colorscale_calc"),r=v("../scattergl/convert").markerSelection,t=v("../scattergl/convert").markerStyle,o=v("./scene_update"),n=v("../../constants/numerical").BADNUM,m=v("../scattergl/constants").TOO_MANY_POINTS;ae.exports=function(l,i){var f,u,s,d,h,a,_=i.dimensions,c=i._length,T={},x=T.cdata=[],w=T.data=[],M=i._visibleDims=[];function D(P,L){for(var S=P.makeCalcdata({v:L.values,vcalendar:i.calendar},"v"),E=0;E<S.length;E++)S[E]=S[E]===n?NaN:S[E];x.push(S),w.push("log"===P.type?p.simpleMap(S,P.c2l):S)}for(f=0;f<_.length;f++)if((s=_[f]).visible){if(d=g.getFromId(l,i._diag[f][0]),h=g.getFromId(l,i._diag[f][1]),d&&h&&d.type!==h.type){p.log("Skipping splom dimension "+f+" with conflicting axis types");continue}d?(D(d,s),h&&"category"===h.type&&(h._categories=d._categories.slice())):D(h,s),M.push(f)}for(e(l,i),p.extendFlat(T,t(i)),a=x.length*c>m?T.sizeAvg||Math.max(T.size,3):b(i,c),u=0;u<M.length;u++)s=_[f=M[u]],d=g.getFromId(l,i._diag[f][0])||{},h=g.getFromId(l,i._diag[f][1])||{},y(l,i,d,h,x[u],x[u],a);var C=o(l,i);return C.matrix||(C.matrix=!0),C.matrixOptions=T,C.selectedOptions=r(i,i.selected),C.unselectedOptions=r(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/array_container_defaults"),b=v("./attributes"),y=v("../scatter/subtypes"),e=v("../scatter/marker_defaults"),r=v("../parcoords/merge_length"),t=v("../scattergl/helpers").isOpenSymbol;function o(n,m){function l(f,u){return p.coerce(n,m,b.dimensions,f,u)}l("label");var i=l("values");i&&i.length?l("visible"):m.visible=!1,l("axis.type"),l("axis.matches")}ae.exports=function(n,m,l,i){function f(c,T){return p.coerce(n,m,b,c,T)}var u=g(n,m,{name:"dimensions",handleItemDefaults:o}),s=f("diagonal.visible"),d=f("showupperhalf"),h=f("showlowerhalf");if(r(m,u,"values")&&(s||d||h)){f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),e(n,m,l,i,f);var a=t(m.marker.symbol),_=y.isBubble(m);f("marker.line.width",a||_?1:0),function(c,T,x,w){var M,D,C=T.dimensions,P=C.length,L=T.showupperhalf,S=T.showlowerhalf,E=T.diagonal.visible,N=new Array(P),z=new Array(P);for(M=0;M<P;M++){var q=M?M+1:"";N[M]="x"+q,z[M]="y"+q}var G=w("xaxes",N),K=w("yaxes",z),ne=T._diag=new Array(P);T._xaxes={},T._yaxes={};var X=[],J=[];function se(ce,pe,de,be){if(ce){var he=ce.charAt(0),xe=x._splomAxes[he];if(T["_"+he+"axes"][ce]=1,be.push(ce),!(ce in xe)){var De=xe[ce]={};de&&(De.label=de.label||"",de.visible&&de.axis&&(de.axis.type&&(De.type=de.axis.type),de.axis.matches&&(De.matches=pe)))}}}var V=!E&&!S,j=!E&&!L;for(T._axesDim={},M=0;M<P;M++){var H=C[M],oe=0===M,U=M===P-1,te=oe&&V||U&&j?void 0:G[M],ee=oe&&j||U&&V?void 0:K[M];se(te,ee,H,X),se(ee,te,H,J),ne[M]=[te,ee],T._axesDim[te]=M,T._axesDim[ee]=M}for(M=0;M<X.length;M++)for(D=0;D<J.length;D++){var le=X[M]+J[D];M>D&&L||M<D&&S?x._splomSubplots[le]=1:M!==D||!E&&S&&L||(x._splomSubplots[le]=1)}(!S||!E&&L&&S)&&(x._splomGridDflt.xside="bottom",x._splomGridDflt.yside="left")}(0,m,i,f),p.coerceSelectionMarkerOpacity(m,f)}else m.visible=!1}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../scatter/colorscale_calc"),b=v("../scattergl/convert").markerStyle;ae.exports=function(y,e){var r=e.trace,t=y._fullLayout._splomScenes[r.uid];if(t){g(y,r),p.extendFlat(t.matrixOptions,b(r));var o=p.extendFlat({},t.matrixOptions,t.viewOpts);t.matrix.update(o,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(v,ae,ie){"use strict";ie.getDimIndex=function(p,g){for(var b=g._id,y={x:0,y:1}[b.charAt(0)],e=p._visibleDims,r=0;r<e.length;r++)if(p._diag[e[r]][y]===b)return r;return!1}},{}],1048:[function(v,ae,ie){"use strict";var p=v("./helpers"),g=v("../scattergl/hover").calcHover;ae.exports={hoverPoints:function(b,y,e){var r=b.cd[0].trace,t=b.scene.matrixOptions.cdata,o=b.xa,n=b.ya,m=o.c2p(y),l=n.c2p(e),i=b.distance,f=p.getDimIndex(r,o),u=p.getDimIndex(r,n);if(!1===f||!1===u)return[b];for(var s,d,h=t[f],a=t[u],_=i,c=0;c<h.length;c++){var x=a[c],w=o.c2p(h[c])-m,M=n.c2p(x)-l,D=Math.sqrt(w*w+M*M);D<_&&(_=d=D,s=c)}return b.index=s,b.distance=_,b.dxy=d,void 0===s?[b]:[g(b,h,a,r)]}}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(v,ae,ie){"use strict";var p=v("./base_index");p.basePlotModule=v("./base_plot"),ae.exports=p},{"./base_index":1042,"./base_plot":1043}],1050:[function(v,ae,ie){"use strict";var p=v("regl-splom"),g=v("../../lib"),b=v("../../plots/cartesian/axis_ids"),y=v("../../components/dragelement/helpers").selectMode;function e(r,t){var o,n,m,l,i,f=r._fullLayout,u=f._size,s=t.trace,d=t.t,h=f._splomScenes[s.uid],a=h.matrixOptions,_=a.cdata,c=f._glcanvas.data()[0].regl,T=f.dragmode;if(0!==_.length){a.lower=s.showupperhalf,a.upper=s.showlowerhalf,a.diagonal=s.diagonal.visible;var x=s._visibleDims,w=_.length,M=h.viewOpts={};for(M.ranges=new Array(w),M.domains=new Array(w),i=0;i<x.length;i++){m=x[i];var D=M.ranges[i]=new Array(4),C=M.domains[i]=new Array(4);(o=b.getFromId(r,s._diag[m][0]))&&(D[0]=o._rl[0],D[2]=o._rl[1],C[0]=o.domain[0],C[2]=o.domain[1]),(n=b.getFromId(r,s._diag[m][1]))&&(D[1]=n._rl[0],D[3]=n._rl[1],C[1]=n.domain[0],C[3]=n.domain[1])}var P=r._context.plotGlPixelRatio,L=u.l*P,S=u.b*P;M.viewport=[L,S,u.w*P+L,u.h*P+S],!0===h.matrix&&(h.matrix=p(c));var z=f.clickmode.indexOf("select")>-1,q=!0;if(y(T)||s.selectedpoints||z){var G=s._length;if(s.selectedpoints){h.selectBatch=s.selectedpoints;var K=s.selectedpoints,ne={};for(m=0;m<K.length;m++)ne[K[m]]=!0;var X=[];for(m=0;m<G;m++)ne[m]||X.push(m);h.unselectBatch=X}var J=d.xpx=new Array(w),se=d.ypx=new Array(w);for(i=0;i<x.length;i++){if(o=b.getFromId(r,s._diag[m=x[i]][0]))for(J[i]=new Array(G),l=0;l<G;l++)J[i][l]=o.c2p(_[i][l]);if(n=b.getFromId(r,s._diag[m][1]))for(se[i]=new Array(G),l=0;l<G;l++)se[i][l]=n.c2p(_[i][l])}if(h.selectBatch.length||h.unselectBatch.length){var V=g.extendFlat({},a,h.unselectedOptions,M),j=g.extendFlat({},a,h.selectedOptions,M);h.matrix.update(V,j),q=!1}}else d.xpx=d.ypx=null;if(q){var H=g.extendFlat({},a,M);h.matrix.update(H,null)}}}ae.exports=function(r,t,o){if(o.length)for(var n=0;n<o.length;n++)e(r,o[n][0])}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(v,ae,ie){"use strict";var p=v("../../lib");ae.exports=function(g,b){var y=g._fullLayout,e=b.uid,r=y._splomScenes;r||(r=y._splomScenes={});var t={dirty:!0,selectBatch:[],unselectBatch:[]},o=r[b.uid];return o||((o=r[e]=p.extendFlat({},t,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){o.matrix&&o.matrix.draw&&(o.selectBatch.length||o.unselectBatch.length?o.matrix.draw(o.unselectBatch,o.selectBatch):o.matrix.draw()),o.dirty=!1},o.destroy=function(){o.matrix&&o.matrix.destroy&&o.matrix.destroy(),o.matrixOptions=null,o.selectBatch=null,o.unselectBatch=null,o=null}),o.dirty||p.extendFlat(o,t),o}},{"../../lib":515}],1052:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=p.pushUnique,b=v("../scatter/subtypes"),y=v("./helpers");ae.exports=function(e,r){var t=e.cd,o=t[0].trace,n=t[0].t,m=e.scene,l=m.matrixOptions.cdata,i=e.xaxis,f=e.yaxis,u=[];if(!m)return u;var s=!b.hasMarkers(o)&&!b.hasText(o);if(!0!==o.visible||s)return u;var d=y.getDimIndex(o,i),h=y.getDimIndex(o,f);if(!1===d||!1===h)return u;var a=n.xpx[d],_=n.ypx[h],c=l[d],T=l[h],x=(e.scene.selectBatch||[]).slice(),w=[];if(!1!==r&&!r.degenerate)for(var M=0;M<c.length;M++)r.contains([a[M],_[M]],null,M,e)?(u.push({pointNumber:M,x:c[M],y:T[M]}),g(x,M)):-1!==x.indexOf(M)?g(x,M):w.push(M);var D=m.matrixOptions;return x.length||w.length?m.selectBatch.length||m.unselectBatch.length||m.matrix.update(m.unselectedOptions,p.extendFlat({},D,m.selectedOptions,m.viewOpts)):m.matrix.update(D,null),m.selectBatch=x,m.unselectBatch=w,u}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../mesh3d/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:g("u",1),vhoverformat:g("v",1),whoverformat:g("w",1),xhoverformat:g("x"),yhoverformat:g("y"),zhoverformat:g("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(t,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(o){t[o]=y[o]}),t.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,ae.exports=t},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/calc");function b(r){var t,o,n,m,l,i,f,u,s,d,h,a,_=r._x,c=r._y,T=r._z,x=r._len,w=-1/0,M=1/0,D=-1/0,C=1/0,P=-1/0,L=1/0,S="";for(x&&(f=_[0],s=c[0],h=T[0]),x>1&&(u=_[x-1],d=c[x-1],a=T[x-1]),t=0;t<x;t++)w=Math.max(w,_[t]),M=Math.min(M,_[t]),D=Math.max(D,c[t]),C=Math.min(C,c[t]),P=Math.max(P,T[t]),L=Math.min(L,T[t]),m||_[t]===f||(m=!0,S+="x"),l||c[t]===s||(l=!0,S+="y"),i||T[t]===h||(i=!0,S+="z");m||(S+="x"),l||(S+="y"),i||(S+="z");var E=y(r._x),N=y(r._y),z=y(r._z);S=(S=(S=S.replace("x",(f>u?"-":"+")+"x")).replace("y",(s>d?"-":"+")+"y")).replace("z",(h>a?"-":"+")+"z");var q=function(){x=0,E=[],N=[],z=[]};(!x||x<E.length*N.length*z.length)&&q();var G=function(he){return"x"===he?_:"y"===he?c:T},K=function(he){return"x"===he?E:"y"===he?N:z},ne=function(he){return he[x-1]<he[0]?-1:1},X=G(S[1]),J=G(S[3]),se=G(S[5]),V=K(S[1]).length,j=K(S[3]).length,H=K(S[5]).length,oe=!1,U=function(he,xe,De){return V*(j*he+xe)+De},te=ne(G(S[1])),ee=ne(G(S[3])),le=ne(G(S[5]));for(t=0;t<H-1;t++){for(o=0;o<j-1;o++){for(n=0;n<V-1;n++){var ce=U(t,o,n),pe=U(t,o,n+1),de=U(t,o+1,n),be=U(t+1,o,n);if(X[ce]*te<X[pe]*te&&J[ce]*ee<J[de]*ee&&se[ce]*le<se[be]*le||(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(p.warn("Encountered arbitrary coordinates! Unable to input data grid."),q()),{xMin:M,yMin:C,zMin:L,xMax:w,yMax:D,zMax:P,Xs:E,Ys:N,Zs:z,len:x,fill:S}}function y(r){return p.distinctVals(r).vals}function e(r,t){if(void 0===t&&(t=r.length),p.isTypedArray(r))return r.subarray(0,t);for(var o=[],n=0;n<t;n++)o[n]=+r[n];return o}ae.exports={calc:function(r,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=e(t.u,t._len),t._v=e(t.v,t._len),t._w=e(t.w,t._len),t._x=e(t.x,t._len),t._y=e(t.y,t._len),t._z=e(t.z,t._len);var o=b(t);t._gridFill=o.fill,t._Xs=o.Xs,t._Ys=o.Ys,t._Zs=o.Zs,t._len=o.len;var n,m,l,i=0;t.starts&&(n=e(t.starts.x||[]),m=e(t.starts.y||[]),l=e(t.starts.z||[]),i=Math.min(n.length,m.length,l.length)),t._startsX=n||[],t._startsY=m||[],t._startsZ=l||[];var f,u=0,s=1/0;for(f=0;f<t._len;f++){var d=t._u[f],h=t._v[f],a=t._w[f],_=Math.sqrt(d*d+h*h+a*a);u=Math.max(u,_),s=Math.min(s,_)}for(g(r,t,{vals:[s,u],containerStr:"",cLetter:"c"}),f=0;f<i;f++){var c=n[f];o.xMax=Math.max(o.xMax,c),o.xMin=Math.min(o.xMin,c);var T=m[f];o.yMax=Math.max(o.yMax,T),o.yMin=Math.min(o.yMin,T);var x=l[f];o.zMax=Math.max(o.zMax,x),o.zMin=Math.min(o.zMin,x)}t._slen=i,t._normMax=u,t._xbnds=[o.xMin,o.xMax],t._ybnds=[o.yMin,o.yMax],t._zbnds=[o.zMin,o.zMax]},filter:e,processGrid:b}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_streamtube3d,g=p.createTubeMesh,b=v("../../lib"),y=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,r=v("../../plots/gl3d/zip3"),t={xaxis:0,yaxis:1,zaxis:2};function o(f,u){this.scene=f,this.uid=u,this.mesh=null,this.data=null}var n=o.prototype;function m(f){var u=f.length;return u>2?f.slice(1,u-1):2===u?[(f[0]+f[1])/2]:f}function l(f){var u=f.length;return 1===u?[.5,.5]:[f[1]-f[0],f[u-1]-f[u-2]]}function i(f,u){var s=f.fullSceneLayout,d=f.dataScale,h=u._len,a={};function _(V,j){var H=s[j],oe=d[t[j]];return b.simpleMap(V,function(U){return H.d2l(U)*oe})}if(a.vectors=r(_(u._u,"xaxis"),_(u._v,"yaxis"),_(u._w,"zaxis"),h),!h)return{positions:[],cells:[]};var c=_(u._Xs,"xaxis"),T=_(u._Ys,"yaxis"),x=_(u._Zs,"zaxis");if(a.meshgrid=[c,T,x],a.gridFill=u._gridFill,u._slen)a.startingPositions=r(_(u._startsX,"xaxis"),_(u._startsY,"yaxis"),_(u._startsZ,"zaxis"));else{for(var w=T[0],M=m(c),D=m(x),C=new Array(M.length*D.length),P=0,L=0;L<M.length;L++)for(var S=0;S<D.length;S++)C[P++]=[M[L],w,D[S]];a.startingPositions=C}a.colormap=y(u),a.tubeSize=u.sizeref,a.maxLength=u.maxdisplayed;var E=_(u._xbnds,"xaxis"),N=_(u._ybnds,"yaxis"),z=_(u._zbnds,"zaxis"),q=l(c),G=l(T),K=l(x),X=p(a,[[E[0]-q[0],N[0]-G[0],z[0]-K[0]],[E[1]+q[1],N[1]+G[1],z[1]+K[1]]]),J=e(u);X.vertexIntensityBounds=[J.min/u._normMax,J.max/u._normMax];var se=u.lightposition;return X.lightPosition=[se.x,se.y,se.z],X.ambient=u.lighting.ambient,X.diffuse=u.lighting.diffuse,X.specular=u.lighting.specular,X.roughness=u.lighting.roughness,X.fresnel=u.lighting.fresnel,X.opacity=u.opacity,u._pad=X.tubeScale*u.sizeref*2,X}n.handlePick=function(f){var u=this.scene.fullSceneLayout,s=this.scene.dataScale;function d(_,c){var x=s[t[c]];return u[c].l2c(_)/x}if(f.object===this.mesh){var h=f.data.position,a=f.data.velocity;return f.traceCoordinate=[d(h[0],"xaxis"),d(h[1],"yaxis"),d(h[2],"zaxis"),d(a[0],"xaxis"),d(a[1],"yaxis"),d(a[2],"zaxis"),f.data.intensity*this.data._normMax,f.data.divergence],f.textLabel=this.data.hovertext||this.data.text,!0}},n.update=function(f){this.data=f;var u=i(this.scene,f);this.mesh.update(u)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(f,u){var s=f.glplot.gl,d=i(f,u),h=g(s,d),a=new o(f,u.uid);return a.mesh=h,a.data=u,h._trace=a,f.glplot.add(h),a}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/colorscale/defaults"),b=v("./attributes");ae.exports=function(y,e,r,t){function o(s,d){return p.coerce(y,e,b,s,d)}var n=o("u"),m=o("v"),l=o("w"),i=o("x"),f=o("y"),u=o("z");n&&n.length&&m&&m.length&&l&&l.length&&i&&i.length&&f&&f.length&&u&&u.length?(o("starts.x"),o("starts.y"),o("starts.z"),o("maxdisplayed"),o("sizeref"),o("lighting.ambient"),o("lighting.diffuse"),o("lighting.specular"),o("lighting.roughness"),o("lighting.fresnel"),o("lightposition.x"),o("lightposition.y"),o("lightposition.z"),g(y,e,t,o,{prefix:"",cLetter:"c"}),o("text"),o("hovertext"),o("hovertemplate"),o("uhoverformat"),o("vhoverformat"),o("whoverformat"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"streamtube",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc").calc,plot:v("./convert"),eventData:function(p,g){return p.tubex=p.x,p.tubey=p.y,p.tubez=p.z,p.tubeu=g.traceCoordinate[3],p.tubev=g.traceCoordinate[4],p.tubew=g.traceCoordinate[5],p.norm=g.traceCoordinate[6],p.divergence=g.traceCoordinate[7],delete p.x,delete p.y,delete p.z,p},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(v,ae,ie){"use strict";var p=v("../../plots/attributes"),g=v("../../plots/template_attributes").hovertemplateAttrs,b=v("../../plots/template_attributes").texttemplateAttrs,y=v("../../components/colorscale/attributes"),e=v("../../plots/domain").attributes,r=v("../pie/attributes"),t=v("./constants"),o=v("../../lib/extend").extendFlat;ae.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:o({colors:{valType:"data_array",editType:"calc"},line:{color:o({},r.marker.line.color,{dflt:null}),width:o({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},y("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:r.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:o({},p.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:g({},{keys:t.eventDataKeys}),textfont:r.textfont,insidetextorientation:r.insidetextorientation,insidetextfont:r.insidetextfont,outsidetextfont:o({},r.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:r.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(v,ae,ie){"use strict";var p=v("../../plots/plots");ie.name="sunburst",ie.plot=function(g,b,y,e){p.plotBasePlot(ie.name,g,b,y,e)},ie.clean=function(g,b,y,e){p.cleanBasePlot(ie.name,g,b,y,e)}},{"../../plots/plots":628}],1060:[function(v,ae,ie){"use strict";var p=v("d3-hierarchy"),g=v("fast-isnumeric"),b=v("../../lib"),y=v("../../components/colorscale").makeColorScaleFuncFromTrace,e=v("../pie/calc").makePullColorFn,r=v("../pie/calc").generateExtendedColors,t=v("../../components/colorscale").calc,o=v("../../constants/numerical").ALMOST_EQUAL,n={},m={},l={};ie.calc=function(i,f){var u,s,d,h,a,_,c=i._fullLayout,T=f.ids,x=b.isArrayOrTypedArray(T),w=f.labels,M=f.parents,D=f.values,C=b.isArrayOrTypedArray(D),P=[],L={},S={},E=function(ee){return ee||"number"==typeof ee},N=function(ee){return!C||g(D[ee])&&D[ee]>=0};x?(u=Math.min(T.length,M.length),s=function(ee){return E(T[ee])&&N(ee)},d=function(ee){return String(T[ee])}):(u=Math.min(w.length,M.length),s=function(ee){return E(w[ee])&&N(ee)},d=function(ee){return String(w[ee])}),C&&(u=Math.min(u,D.length));for(var z=0;z<u;z++)if(s(z)){var q=d(z),G=E(M[z])?String(M[z]):"",K={i:z,id:q,pid:G,label:E(w[z])?String(w[z]):""};C&&(K.v=+D[z]),P.push(K),a=q,L[h=G]?L[h].push(a):L[h]=[a],S[a]=1}if(L[""]){if(L[""].length>1){for(var ne=b.randstr(),X=0;X<P.length;X++)""===P[X].pid&&(P[X].pid=ne);P.unshift({hasMultipleRoots:!0,id:ne,pid:"",label:""})}}else{var J,se=[];for(J in L)S[J]||se.push(J);if(1!==se.length)return b.warn(["Multiple implied roots, cannot build",f.type,"hierarchy of",f.name+".","These roots include:",se.join(", ")].join(" "));P.unshift({hasImpliedRoot:!0,id:J=se[0],pid:"",label:J})}try{_=p.stratify().id(function(ee){return ee.id}).parentId(function(ee){return ee.pid})(P)}catch(ee){return b.warn(["Failed to build",f.type,"hierarchy of",f.name+".","Error:",ee.message].join(" "))}var V=p.hierarchy(_),j=!1;if(C)switch(f.branchvalues){case"remainder":V.sum(function(ee){return ee.data.v});break;case"total":V.each(function(ee){var le=ee.data.data,ce=le.v;if(ee.children){var pe=ee.children.reduce(function(de,be){return de+be.data.data.v},0);if((le.hasImpliedRoot||le.hasMultipleRoots)&&(ce=pe),ce<pe*o)return j=!0,b.warn(["Total value for node",ee.data.data.id,"of",f.name,"is smaller than the sum of its children.","\nparent value =",ce,"\nchildren sum =",pe].join(" "))}ee.value=ce})}else!function ee(le,ce,pe){var de=0,be=le.children;if(be){for(var he=be.length,xe=0;xe<he;xe++)de+=ee(be[xe],ce,pe);pe.branches&&de++}else pe.leaves&&de++;return le.value=le.data.data.value=de,ce._values||(ce._values=[]),ce._values[le.data.data.i]=de,de}(V,f,{branches:-1!==f.count.indexOf("branches"),leaves:-1!==f.count.indexOf("leaves")});if(!j){var H,oe;f.sort&&V.sort(function(ee,le){return le.value-ee.value});var U=f.marker.colors||[];return f._hasColorscale?(!!U.length||(U=C?f.values:f._values),t(i,f,{vals:U,containerStr:"marker",cLetter:"c"}),oe=y(f.marker)):H=e(c["_"+f.type+"colormap"]),V.each(function(ee){var le=ee.data.data;le.color=f._hasColorscale?oe(U[le.i]):H(U[le.i],le.id)}),P[0].hierarchy=V,P}},ie._runCrossTraceCalc=function(i,f){var u=f._fullLayout,s=f.calcdata,d=u[i+"colorway"],h=u["_"+i+"colormap"];u["extend"+i+"colors"]&&(d=r(d,"icicle"===i?l:"treemap"===i?m:n));var a,_=0;function c(w){var M=w.data.data,D=M.id;!1===M.color&&(h[D]?M.color=h[D]:w.parent?w.parent.parent?M.color=w.parent.data.data.color:(h[D]=M.color=d[_%d.length],_++):M.color=a)}for(var T=0;T<s.length;T++){var x=s[T][0];x.trace.type===i&&x.hierarchy&&(a=x.trace.root.color,x.hierarchy.each(c))}},ie.crossTraceCalc=function(i){return ie._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(v,ae,ie){"use strict";ae.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../plots/domain").defaults,y=v("../bar/defaults").handleText,e=v("../../components/colorscale"),r=e.hasColorscale,t=e.handleDefaults;ae.exports=function(o,n,m,l){function i(a,_){return p.coerce(o,n,g,a,_)}var f=i("labels"),u=i("parents");if(f&&f.length&&u&&u.length){var s=i("values");i(s&&s.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",l.paper_bgcolor),i("marker.colors");var d=n._hasColorscale=r(o,"marker","colors")||(o.marker||{}).coloraxis;d&&t(o,n,l,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",d?1:.7);var h=i("text");i("texttemplate"),n.texttemplate||i("textinfo",Array.isArray(h)?"text+label":"label"),i("hovertext"),i("hovertemplate"),y(o,n,l,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),b(n,l,i),n._length=null}else n.visible=!1}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../registry"),b=v("../../components/fx/helpers").appendArrayPointValue,y=v("../../components/fx"),e=v("../../lib"),r=v("../../lib/events"),t=v("./helpers"),o=v("../pie/helpers").formatPieValue;function n(m,l,i){for(var f=m.data.data,u={curveNumber:l.index,pointNumber:f.i,data:l._input,fullData:l},s=0;s<i.length;s++){var d=i[s];d in m&&(u[d]=m[d])}return"parentString"in m&&!t.isHierarchyRoot(m)&&(u.parent=m.parentString),b(u,l,f.i),u}ae.exports=function(m,l,i,f,u){var s=f[0],d=s.trace,h=s.hierarchy,a="sunburst"===d.type,_="treemap"===d.type||"icicle"===d.type;"_hasHoverLabel"in d||(d._hasHoverLabel=!1),"_hasHoverEvent"in d||(d._hasHoverEvent=!1),m.on("mouseover",function(c){var T=i._fullLayout;if(!i._dragging&&!1!==T.hovermode){var x,w=i._fullData[d.index],M=c.data.data,D=M.i,C=t.isHierarchyRoot(c),P=t.getParent(h,c),L=t.getValue(c),S=function(te){return e.castOption(w,D,te)},E=S("hovertemplate"),N=y.castHoverinfo(w,T,D),z=T.separators;if(E||N&&"none"!==N&&"skip"!==N){var q,G;a&&(q=s.cx+c.pxmid[0]*(1-c.rInscribed),G=s.cy+c.pxmid[1]*(1-c.rInscribed)),_&&(q=c._hoverX,G=c._hoverY);var K,ne={},X=[],J=[],se=function(te){return-1!==X.indexOf(te)};N&&(X="all"===N?w._module.attributes.hoverinfo.flags:N.split("+")),ne.label=M.label,se("label")&&ne.label&&J.push(ne.label),M.hasOwnProperty("v")&&(ne.value=M.v,ne.valueLabel=o(ne.value,z),se("value")&&J.push(ne.valueLabel)),ne.currentPath=c.currentPath=t.getPath(c.data),se("current path")&&!C&&J.push(ne.currentPath);var V=[],j=function(){-1===V.indexOf(K)&&(J.push(K),V.push(K))};ne.percentParent=c.percentParent=L/t.getValue(P),ne.parent=c.parentString=t.getPtLabel(P),se("percent parent")&&(K=t.formatPercent(ne.percentParent,z)+" of "+ne.parent,j()),ne.percentEntry=c.percentEntry=L/t.getValue(l),ne.entry=c.entry=t.getPtLabel(l),!se("percent entry")||C||c.onPathbar||(K=t.formatPercent(ne.percentEntry,z)+" of "+ne.entry,j()),ne.percentRoot=c.percentRoot=L/t.getValue(h),ne.root=c.root=t.getPtLabel(h),se("percent root")&&!C&&(K=t.formatPercent(ne.percentRoot,z)+" of "+ne.root,j()),ne.text=S("hovertext")||S("text"),se("text")&&e.isValidTextValue(K=ne.text)&&J.push(K),x=[n(c,w,u.eventDataKeys)];var H={trace:w,y:G,_x0:c._x0,_x1:c._x1,_y0:c._y0,_y1:c._y1,text:J.join("<br>"),name:E||se("name")?w.name:void 0,color:S("hoverlabel.bgcolor")||M.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:ne,eventData:x};a&&(H.x0=q-c.rInscribed*c.rpx1,H.x1=q+c.rInscribed*c.rpx1,H.idealAlign=c.pxmid[0]<0?"left":"right"),_&&(H.x=q,H.idealAlign=q<0?"left":"right");var oe=[];y.loneHover(H,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:i,inOut_bbox:oe}),x[0].bbox=oe[0],d._hasHoverLabel=!0}if(_){var U=m.select("path.surface");u.styleOne(U,c,w,{hovered:!0})}d._hasHoverEvent=!0,i.emit("plotly_hover",{points:x||[n(c,w,u.eventDataKeys)],event:p.event})}}),m.on("mouseout",function(c){var T=i._fullLayout,x=i._fullData[d.index],w=p.select(this).datum();if(d._hasHoverEvent&&(c.originalEvent=p.event,i.emit("plotly_unhover",{points:[n(w,x,u.eventDataKeys)],event:p.event}),d._hasHoverEvent=!1),d._hasHoverLabel&&(y.loneUnhover(T._hoverlayer.node()),d._hasHoverLabel=!1),_){var M=m.select("path.surface");u.styleOne(M,w,x,{hovered:!1})}}),m.on("click",function(c){var T=i._fullLayout,x=i._fullData[d.index],w=a&&(t.isHierarchyRoot(c)||t.isLeaf(c)),M=t.getPtId(c),D=t.isEntry(c)?t.findEntryWithChild(h,M):t.findEntryWithLevel(h,M),C=t.getPtId(D),P={points:[n(c,x,u.eventDataKeys)],event:p.event};w||(P.nextLevel=C);var L=r.triggerHandler(i,"plotly_"+d.type+"click",P);if(!1!==L&&T.hovermode&&(i._hoverdata=[n(c,x,u.eventDataKeys)],y.click(i,p.event)),!w&&!1!==L&&!i._dragging&&!i._transitioning){g.call("_storeDirectGUIEdit",x,T._tracePreGUI[x.uid],{level:x.level});var S={data:[{level:C}],traces:[d.index]},E={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};y.loneUnhover(T._hoverlayer.node()),g.call("animate",i,S,E)}})}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../../lib/setcursor"),y=v("../pie/helpers");function e(r){return r.data.data.pid}ie.findEntryWithLevel=function(r,t){var o;return t&&r.eachAfter(function(n){if(ie.getPtId(n)===t)return o=n.copy()}),o||r},ie.findEntryWithChild=function(r,t){var o;return r.eachAfter(function(n){for(var m=n.children||[],l=0;l<m.length;l++)if(ie.getPtId(m[l])===t)return o=n.copy()}),o||r},ie.isEntry=function(r){return!r.parent},ie.isLeaf=function(r){return!r.children},ie.getPtId=function(r){return r.data.data.id},ie.getPtLabel=function(r){return r.data.data.label},ie.getValue=function(r){return r.value},ie.isHierarchyRoot=function(r){return""===e(r)},ie.setSliceCursor=function(r,t,o){var n=o.isTransitioning;if(!n){var m=r.datum();n=o.hideOnRoot&&ie.isHierarchyRoot(m)||o.hideOnLeaves&&ie.isLeaf(m)}b(r,n?null:"pointer")},ie.getInsideTextFontKey=function(r,t,o,n,m){var i=o.data.data.i;return p.castOption(t,i,((m||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+r)||p.castOption(t,i,"textfont."+r)||n.size},ie.getOutsideTextFontKey=function(r,t,o,n){var m=o.data.data.i;return p.castOption(t,m,"outsidetextfont."+r)||p.castOption(t,m,"textfont."+r)||n.size},ie.isOutsideText=function(r,t){return!r._hasColorscale&&ie.isHierarchyRoot(t)},ie.determineTextFont=function(r,t,o,n){return ie.isOutsideText(r,t)?{color:ie.getOutsideTextFontKey("color",m=r,l=t,i=o),family:ie.getOutsideTextFontKey("family",m,l,i),size:ie.getOutsideTextFontKey("size",m,l,i)}:function(m,l,i,f){var s=l.data.data,d=s.i,h=p.castOption(m,d,((f||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!h&&m._input.textfont&&(h=p.castOption(m._input,d,"textfont.color")),{color:h||g.contrast(s.color),family:ie.getInsideTextFontKey("family",m,l,i,f),size:ie.getInsideTextFontKey("size",m,l,i,f)}}(r,t,o,n);var m,l,i},ie.hasTransition=function(r){return!!(r&&r.duration>0)},ie.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},ie.isHeader=function(r,t){return!(ie.isLeaf(r)||r.depth===t._maxDepth-1)},ie.getParent=function(r,t){return ie.findEntryWithLevel(r,e(t))},ie.listPath=function(r,t){var o=r.parent;if(!o)return[];var n=t?[o.data[t]]:[o];return ie.listPath(o,t).concat(n)},ie.getPath=function(r){return ie.listPath(r,"label").join("/")+"/"},ie.formatValue=y.formatPieValue,ie.formatPercent=function(r,t){var o=p.formatPercent(r,0);return"0%"===o&&(o=y.formatPiePercent(r,t)),o}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"sunburst",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(v,ae,ie){"use strict";ae.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y){function e(r,t){return p.coerce(b,y,g,r,t)}e("sunburstcolorway",y.colorway),e("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-hierarchy"),b=v("d3-interpolate").interpolate,y=v("../../components/drawing"),e=v("../../lib"),r=v("../../lib/svg_text_utils"),t=v("../bar/uniform_text"),o=t.recordMinTextSize,n=t.clearMinTextSize,m=v("../pie/plot"),l=v("../pie/helpers").getRotationAngle,i=m.computeTransform,f=m.transformInsideText,u=v("./style").styleOne,s=v("../bar/style").resizeText,d=v("./fx"),h=v("./constants"),a=v("./helpers");function _(T,x,w,M){var D=T._fullLayout,C=!D.uniformtext.mode&&a.hasTransition(M),P=p.select(w).selectAll("g.slice"),L=x[0],S=L.trace,N=a.findEntryWithLevel(L.hierarchy,S.level),z=a.getMaxDepth(S),q=D._size,G=S.domain,ne=q.h*(G.y[1]-G.y[0]),X=.5*Math.min(q.w*(G.x[1]-G.x[0]),ne),J=L.cx=q.l+q.w*(G.x[1]+G.x[0])/2,se=L.cy=q.t+q.h*(1-G.y[0])-ne/2;if(!N)return P.remove();var V=null,j={};C&&P.each(function(Fe){j[a.getPtId(Fe)]={rpx0:Fe.rpx0,rpx1:Fe.rpx1,x0:Fe.x0,x1:Fe.x1,transform:Fe.transform},!V&&a.isEntry(Fe)&&(V=Fe)});var Fe,H=(Fe=N,g.partition().size([2*Math.PI,Fe.height+1])(Fe)).descendants(),oe=N.height+1,U=0,te=z;L.hasMultipleRoots&&a.isHierarchyRoot(N)&&(H=H.slice(1),oe-=1,U=1,te+=1),H=H.filter(function(Fe){return Fe.y1<=te});var ee=l(S.rotation);ee&&H.forEach(function(Fe){Fe.x0+=ee,Fe.x1+=ee});var le=Math.min(oe,z),ce=function(Fe){return(Fe-U)/le*X},pe=function(Fe,ve){return[Fe*Math.cos(ve),-Fe*Math.sin(ve)]},de=function(Fe){return e.pathAnnulus(Fe.rpx0,Fe.rpx1,Fe.x0,Fe.x1,J,se)},be=function(Fe){return J+c(Fe)[0]*(Fe.transform.rCenter||0)+(Fe.transform.x||0)},he=function(Fe){return se+c(Fe)[1]*(Fe.transform.rCenter||0)+(Fe.transform.y||0)};(P=P.data(H,a.getPtId)).enter().append("g").classed("slice",!0),C?P.exit().transition().each(function(){var Fe=p.select(this);Fe.select("path.surface").transition().attrTween("d",function(ve){var Te=function(Le){var Oe,Ne=a.getPtId(Le),Be=j[Ne],He=j[a.getPtId(N)];if(He){var Ve=(Le.x1>He.x1?2*Math.PI:0)+ee;Oe=Le.rpx1<He.rpx1?{x0:Le.x0,x1:Le.x1,rpx0:0,rpx1:0}:{x0:Ve,x1:Ve,rpx0:Le.rpx0,rpx1:Le.rpx1}}else{var it,ze=a.getPtId(Le.parent);P.each(function(vt){if(a.getPtId(vt)===ze)return it=vt});var je,qe=it.children;qe.forEach(function(vt,wt){if(a.getPtId(vt)===Ne)return je=wt});var Ye=qe.length,ct=b(it.x0,it.x1);Oe={rpx0:X,rpx1:X,x0:ct(je/Ye),x1:ct((je+1)/Ye)}}return b(Be,Oe)}(ve);return function(Le){return de(Te(Le))}}),Fe.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var xe=null;if(C&&V){var De=a.getPtId(V);P.each(function(Fe){null===xe&&a.getPtId(Fe)===De&&(xe=Fe.x1)})}var Se=P;function ke(Fe){var ve=Fe.parent,Te=j[a.getPtId(ve)],Le={};if(Te){var Oe=ve.children,Ne=Oe.indexOf(Fe),Be=Oe.length,He=b(Te.x0,Te.x1);Le.x0=He(Ne/Be),Le.x1=He(Ne/Be)}else Le.x0=Le.x1=0;return Le}C&&(Se=Se.transition().each("end",function(){var Fe=p.select(this);a.setSliceCursor(Fe,T,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Se.each(function(Fe){var Ve,ve=p.select(this),Te=e.ensureSingle(ve,"path","surface",function(Ve){Ve.style("pointer-events","all")});Fe.rpx0=ce(Fe.y0),Fe.rpx1=ce(Fe.y1),Fe.xmid=(Fe.x0+Fe.x1)/2,Fe.pxmid=pe(Fe.rpx1,Fe.xmid),Fe.midangle=-(Fe.xmid-Math.PI/2),Fe.startangle=-(Fe.x0-Math.PI/2),Fe.stopangle=-(Fe.x1-Math.PI/2),Fe.halfangle=.5*Math.min(e.angleDelta(Fe.x0,Fe.x1)||Math.PI,Math.PI),Fe.ring=1-Fe.rpx0/Fe.rpx1,Fe.rInscribed=0===(Ve=Fe).rpx0&&e.isFullCircle([Ve.x0,Ve.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Ve.halfangle)),Ve.ring/2)),C?Te.transition().attrTween("d",function(Ve){var it=function(ze){var je,qe=j[a.getPtId(ze)],Ye={x0:ze.x0,x1:ze.x1,rpx0:ze.rpx0,rpx1:ze.rpx1};if(qe)je=qe;else if(V)if(ze.parent)if(xe){var ct=(ze.x1>xe?2*Math.PI:0)+ee;je={x0:ct,x1:ct}}else e.extendFlat(je={rpx0:X,rpx1:X},ke(ze));else je={rpx0:0,rpx1:0};else je={x0:ee,x1:ee};return b(je,Ye)}(Ve);return function(ze){return de(it(ze))}}):Te.attr("d",de),ve.call(d,N,T,x,{eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,T,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:T._transitioning}),Te.call(u,Fe,S);var Le=e.ensureSingle(ve,"g","slicetext"),Oe=e.ensureSingle(Le,"text","",function(Ve){Ve.attr("data-notex",1)}),Ne=e.ensureUniformFontSize(T,a.determineTextFont(S,Fe,D.font));Oe.text(ie.formatSliceLabel(Fe,N,S,x,D)).classed("slicetext",!0).attr("text-anchor","middle").call(y.font,Ne).call(r.convertToTspans,T);var Be=y.bBox(Oe.node());Fe.transform=f(Be,Fe,L),Fe.transform.targetX=be(Fe),Fe.transform.targetY=he(Fe);var He=function(Ve,it){var ze=Ve.transform;return i(ze,it),ze.fontSize=Ne.size,o(S.type,ze,D),e.getTextTransform(ze)};C?Oe.transition().attrTween("transform",function(Ve){var it=function(ze){var je,qe=j[a.getPtId(ze)],Ye=ze.transform;if(qe)je=qe;else if(je={rpx1:ze.rpx1,transform:{textPosAngle:Ye.textPosAngle,scale:0,rotate:Ye.rotate,rCenter:Ye.rCenter,x:Ye.x,y:Ye.y}},V)if(ze.parent)if(xe){var ct=ze.x1>xe?2*Math.PI:0;je.x0=je.x1=ct}else e.extendFlat(je,ke(ze));else je.x0=je.x1=ee;else je.x0=je.x1=ee;var vt=b(je.transform.textPosAngle,ze.transform.textPosAngle),wt=b(je.rpx1,ze.rpx1),Ot=b(je.x0,ze.x0),St=b(je.x1,ze.x1),ft=b(je.transform.scale,Ye.scale),st=b(je.transform.rotate,Ye.rotate),Ct=0===Ye.rCenter?3:0===je.transform.rCenter?1/3:1,$t=b(je.transform.rCenter,Ye.rCenter);return function(rn){var hn=wt(rn),cn=Ot(rn),mn=St(rn),nn=$t(Math.pow(rn,Ct)),Xe={pxmid:pe(hn,(cn+mn)/2),rpx1:hn,transform:{textPosAngle:vt(rn),rCenter:nn,x:Ye.x,y:Ye.y}};return o(S.type,Ye,D),{transform:{targetX:be(Xe),targetY:he(Xe),scale:ft(rn),rotate:st(rn),rCenter:nn}}}}(Ve);return function(ze){return He(it(ze),Be)}}):Oe.attr("transform",He(Fe,Be))})}function c(T){return w=T.transform.textPosAngle,[(x=T.rpx1)*Math.sin(w),-x*Math.cos(w)];var x,w}ie.plot=function(T,x,w,M){var D,C,P=T._fullLayout,L=P._sunburstlayer,S=!w,E=!P.uniformtext.mode&&a.hasTransition(w);n("sunburst",P),(D=L.selectAll("g.trace.sunburst").data(x,function(N){return N[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),D.order(),E?(M&&(C=M()),p.transition().duration(w.duration).ease(w.easing).each("end",function(){C&&C()}).each("interrupt",function(){C&&C()}).each(function(){L.selectAll("g.trace").each(function(N){_(T,N,this,w)})})):(D.each(function(N){_(T,N,this,w)}),P.uniformtext.mode&&s(T,P._sunburstlayer.selectAll(".trace"),"sunburst")),S&&D.exit().remove()},ie.formatSliceLabel=function(T,x,w,M,D){var C=w.texttemplate,P=w.textinfo;if(!(C||P&&"none"!==P))return"";var L=D.separators,E=T.data.data,N=M[0].hierarchy,z=a.isHierarchyRoot(T),q=a.getParent(N,T),G=a.getValue(T);if(!C){var K,ne=P.split("+"),X=function(ee){return-1!==ne.indexOf(ee)},J=[];if(X("label")&&E.label&&J.push(E.label),E.hasOwnProperty("v")&&X("value")&&J.push(a.formatValue(E.v,L)),!z){X("current path")&&J.push(a.getPath(T.data));var se=0;X("percent parent")&&se++,X("percent entry")&&se++,X("percent root")&&se++;var V=se>1;if(se){var j,H=function(ee){K=a.formatPercent(j,L),V&&(K+=" of "+ee),J.push(K)};X("percent parent")&&!z&&(j=G/a.getValue(q),H("parent")),X("percent entry")&&(j=G/a.getValue(x),H("entry")),X("percent root")&&(j=G/a.getValue(N),H("root"))}}return X("text")&&(K=e.castOption(w,E.i,"text"),e.isValidTextValue(K)&&J.push(K)),J.join("<br>")}var oe=e.castOption(w,E.i,"texttemplate");if(!oe)return"";var U={};E.label&&(U.label=E.label),E.hasOwnProperty("v")&&(U.value=E.v,U.valueLabel=a.formatValue(E.v,L)),U.currentPath=a.getPath(T.data),z||(U.percentParent=G/a.getValue(q),U.percentParentLabel=a.formatPercent(U.percentParent,L),U.parent=a.getPtLabel(q)),U.percentEntry=G/a.getValue(x),U.percentEntryLabel=a.formatPercent(U.percentEntry,L),U.entry=a.getPtLabel(x),U.percentRoot=G/a.getValue(N),U.percentRootLabel=a.formatPercent(U.percentRoot,L),U.root=a.getPtLabel(N),E.hasOwnProperty("color")&&(U.color=E.color);var te=e.castOption(w,E.i,"text");return(e.isValidTextValue(te)||""===te)&&(U.text=te),U.customdata=e.castOption(w,E.i,"customdata"),e.texttemplateString(oe,U,D._d3locale,U,w._meta||{})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../../lib"),y=v("../bar/uniform_text").resizeText;function e(r,t,o){var n=t.data.data,m=!t.children,l=n.i,i=b.castOption(o,l,"marker.line.color")||g.defaultLine,f=b.castOption(o,l,"marker.line.width")||0;r.style("stroke-width",f).call(g.fill,n.color).call(g.stroke,i).style("opacity",m?o.leaf.opacity:null)}ae.exports={style:function(r){var t=r._fullLayout._sunburstlayer.selectAll(".trace");y(r,t,"sunburst"),t.each(function(o){var n=p.select(this),m=o[0].trace;n.style("opacity",m.opacity),n.selectAll("path.surface").each(function(l){p.select(this).call(e,l,m)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(v,ae,ie){"use strict";var p=v("../../components/color"),g=v("../../components/colorscale/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,t=v("../../plot_api/edit_types").overrideAll;function o(m){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:p.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:p.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var n=ae.exports=t(r({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:y(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},g("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:o(),y:o(),z:o()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:r({},g.zauto,{}),zmin:r({},g.zmin,{}),zmax:r({},g.zmax,{})},hoverinfo:r({},e.hoverinfo),showlegend:r({},e.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/calc");ae.exports=function(g,b){p(g,b,b.surfacecolor?{vals:b.surfacecolor,containerStr:"",cLetter:"c"}:{vals:b.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_surface3d,g=v("../../../stackgl_modules").ndarray,b=v("../../../stackgl_modules").ndarray_linear_interpolate.d2,y=v("../heatmap/interp2d"),e=v("../heatmap/find_empties"),r=v("../../lib").isArrayOrTypedArray,t=v("../../lib/gl_format_color").parseColorScale,o=v("../../lib/str2rgbarray"),n=v("../../components/colorscale").extractOpts;function m(w,M,D){this.scene=w,this.uid=D,this.surface=M,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var l=m.prototype;l.getXat=function(w,M,D,C){var P=r(this.data.x)?r(this.data.x[0])?this.data.x[M][w]:this.data.x[w]:w;return void 0===D?P:C.d2l(P,0,D)},l.getYat=function(w,M,D,C){var P=r(this.data.y)?r(this.data.y[0])?this.data.y[M][w]:this.data.y[M]:M;return void 0===D?P:C.d2l(P,0,D)},l.getZat=function(w,M,D,C){var P=this.data.z[M][w];return null===P&&this.data.connectgaps&&this.data._interpolatedZ&&(P=this.data._interpolatedZ[M][w]),void 0===D?P:C.d2l(P,0,D)},l.handlePick=function(w){if(w.object===this.surface){var D=(w.data.index[1]-1)/this.dataScaleY-1,C=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),P=Math.max(Math.min(Math.round(D),this.data._ylength-1),0);w.index=[C,P],w.traceCoordinate=[this.getXat(C,P),this.getYat(C,P),this.getZat(C,P)],w.dataCoordinate=[this.getXat(C,P,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(C,P,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(C,P,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var L=0;L<3;L++)null!=w.dataCoordinate[L]&&(w.dataCoordinate[L]*=this.scene.dataScale[L]);var E=this.data.hovertext||this.data.text;return w.textLabel=Array.isArray(E)&&E[P]&&void 0!==E[P][C]?E[P][C]:E||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function f(w,M){if(w<M)return 0;for(var D=0;0===Math.floor(w%M);)w/=M,D++;return D}function u(w){for(var M=[],D=0;D<i.length;D++)M.push(f(w,i[D]));return M}function s(w){for(var M=u(w),D=w,C=0;C<i.length;C++)if(M[C]>0){D=i[C];break}return D}function d(w,M){if(!(w<1||M<1)){for(var D=u(w),C=u(M),P=1,L=0;L<i.length;L++)P*=Math.pow(i[L],Math.max(D[L],C[L]));return P}}l.calcXnums=function(w){var M,D=[];for(M=1;M<w;M++){var C=this.getXat(M-1,0),P=this.getXat(M,0);D[M-1]=P!==C&&null!=C&&null!=P?Math.abs(P-C):0}var L=0;for(M=1;M<w;M++)L+=D[M-1];for(M=1;M<w;M++)D[M-1]=0===D[M-1]?1:Math.round(L/D[M-1]);return D},l.calcYnums=function(w){var M,D=[];for(M=1;M<w;M++){var C=this.getYat(0,M-1),P=this.getYat(0,M);D[M-1]=P!==C&&null!=C&&null!=P?Math.abs(P-C):0}var L=0;for(M=1;M<w;M++)L+=D[M-1];for(M=1;M<w;M++)D[M-1]=0===D[M-1]?1:Math.round(L/D[M-1]);return D};var h=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],a=h[9],_=h[13];function c(w,M,D){var C=D[8]+D[2]*M[0]+D[5]*M[1];return w[0]=(D[6]+D[0]*M[0]+D[3]*M[1])/C,w[1]=(D[7]+D[1]*M[0]+D[4]*M[1])/C,w}function T(w,M,D){return function(C,P,L,S){for(var E=[0,0],N=C.shape[0],z=C.shape[1],q=0;q<N;q++)for(var G=0;G<z;G++)L(E,[q,G],S),C.set(q,G,b(P,E[0],E[1]))}(w,M,c,D),w}function x(w,M){for(var D=!1,C=0;C<w.length;C++)if(M===w[C]){D=!0;break}!1===D&&w.push(M)}l.estimateScale=function(w,M){for(var D=1+function(P){if(0!==P.length){for(var L=1,S=0;S<P.length;S++)L=d(L,P[S]);return L}}(0===M?this.calcXnums(w):this.calcYnums(w));D<a;)D*=2;for(;D>_;)D--,D/=s(D),++D<a&&(D=_);var C=Math.round(D/w);return C>1?C:1},l.refineCoords=function(w){for(var M=this.dataScaleX,D=this.dataScaleY,C=w[0].shape[0],P=w[0].shape[1],L=0|Math.floor(w[0].shape[0]*M+1),S=0|Math.floor(w[0].shape[1]*D+1),E=1+C+1,N=1+P+1,z=g(new Float32Array(E*N),[E,N]),q=[1/M,0,0,0,1/D,0,0,0,1],G=0;G<w.length;++G){this.surface.padField(z,w[G]);var K=g(new Float32Array(L*S),[L,S]);T(K,z,q),w[G]=K}},l.setContourLevels=function(){var w,M,C=[[],[],[]],P=[!1,!1,!1],L=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(L=!0,this.contourSize[w]>0&&null!==this.contourStart[w]&&null!==this.contourEnd[w]&&this.contourEnd[w]>this.contourStart[w]))for(P[w]=!0,M=this.contourStart[w];M<this.contourEnd[w];M+=this.contourSize[w])x(C[w],M*this.scene.dataScale[w]);if(L){var S=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(S[w]=P[w]?C[w]:this.scene.contourLevels[w]);this.surface.update({levels:S})}},l.update=function(w){var M,D,C,P,L=this.scene,S=L.fullSceneLayout,E=this.surface,N=t(w),z=L.dataScale,q=w.z[0].length,G=w._ylength,K=L.contourLevels;this.data=w;var ne=[];for(M=0;M<3;M++)for(ne[M]=[],D=0;D<q;D++)ne[M][D]=[];for(D=0;D<q;D++)for(C=0;C<G;C++)ne[0][D][C]=this.getXat(D,C,w.xcalendar,S.xaxis),ne[1][D][C]=this.getYat(D,C,w.ycalendar,S.yaxis),ne[2][D][C]=this.getZat(D,C,w.zcalendar,S.zaxis);if(w.connectgaps)for(w._emptypoints=e(ne[2]),y(ne[2],w._emptypoints),w._interpolatedZ=[],D=0;D<q;D++)for(w._interpolatedZ[D]=[],C=0;C<G;C++)w._interpolatedZ[D][C]=ne[2][D][C];for(M=0;M<3;M++)for(D=0;D<q;D++)for(C=0;C<G;C++)null==(P=ne[M][D][C])?ne[M][D][C]=NaN:P=ne[M][D][C]*=z[M];for(M=0;M<3;M++)for(D=0;D<q;D++)for(C=0;C<G;C++)null!=(P=ne[M][D][C])&&(this.minValues[M]>P&&(this.minValues[M]=P),this.maxValues[M]<P&&(this.maxValues[M]=P));for(M=0;M<3;M++)this.objectOffset[M]=.5*(this.minValues[M]+this.maxValues[M]);for(M=0;M<3;M++)for(D=0;D<q;D++)for(C=0;C<G;C++)null!=(P=ne[M][D][C])&&(ne[M][D][C]-=this.objectOffset[M]);var X=[g(new Float32Array(q*G),[q,G]),g(new Float32Array(q*G),[q,G]),g(new Float32Array(q*G),[q,G])];for(M=0;M<3;M++)for(D=0;D<q;D++)for(C=0;C<G;C++)X[M].set(D,C,ne[M][D][C]);ne=[];var J={colormap:N,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},se=n(w);if(J.intensityBounds=[se.min,se.max],w.surfacecolor){var V=g(new Float32Array(q*G),[q,G]);for(D=0;D<q;D++)for(C=0;C<G;C++)V.set(D,C,w.surfacecolor[C][D]);X.push(V)}else J.intensityBounds[0]*=z[2],J.intensityBounds[1]*=z[2];(_<X[0].shape[0]||_<X[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(X[0].shape[0],0),this.dataScaleY=this.estimateScale(X[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(X)),w.surfacecolor&&(J.intensity=X.pop());var U,te,ee,j=[!0,!0,!0],H=["x","y","z"];for(M=0;M<3;++M){var oe=w.contours[H[M]];j[M]=oe.highlight,J.showContour[M]=oe.show||oe.highlight,J.showContour[M]&&(J.contourProject[M]=[oe.project.x,oe.project.y,oe.project.z],oe.show?(this.showContour[M]=!0,J.levels[M]=K[M],E.highlightColor[M]=J.contourColor[M]=o(oe.color),E.highlightTint[M]=J.contourTint[M]=oe.usecolormap?0:1,J.contourWidth[M]=oe.width,this.contourStart[M]=oe.start,this.contourEnd[M]=oe.end,this.contourSize[M]=oe.size):(this.showContour[M]=!1,this.contourStart[M]=null,this.contourEnd[M]=null,this.contourSize[M]=0),oe.highlight&&(J.dynamicColor[M]=o(oe.highlightcolor),J.dynamicWidth[M]=oe.highlightwidth))}(te=(U=N)[0].rgb)[0]===(ee=U[U.length-1].rgb)[0]&&te[1]===ee[1]&&te[2]===ee[2]&&te[3]===ee[3]&&(J.vertexColor=!0),J.objectOffset=this.objectOffset,J.coords=X,E.update(J),E.visible=w.visible,E.enableDynamic=j,E.enableHighlight=j,E.snapToData=!0,"lighting"in w&&(E.ambientLight=w.lighting.ambient,E.diffuseLight=w.lighting.diffuse,E.specularLight=w.lighting.specular,E.roughness=w.lighting.roughness,E.fresnel=w.lighting.fresnel),"lightposition"in w&&(E.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},l.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},ae.exports=function(w,M){var C=p({gl:w.glplot.gl}),P=new m(w,C,M.uid);return C._trace=P,P.update(M),w.glplot.add(C),P}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(v,ae,ie){"use strict";var p=v("../../registry"),g=v("../../lib"),b=v("../../components/colorscale/defaults"),y=v("./attributes");function e(t,o,n,m){var l=m("opacityscale");"max"===l?o.opacityscale=[[0,.1],[1,1]]:"min"===l?o.opacityscale=[[0,1],[1,.1]]:"extremes"===l?o.opacityscale=function(i,f){for(var u=[],s=0;s<32;s++){var d=s/31,h=.1+.9*(1-Math.pow(Math.sin(1*d*Math.PI),2));u.push([d,Math.max(0,Math.min(1,h))])}return u}():function(i){var f=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var u=0;u<i.length;u++){var s=i[u];if(2!==s.length||+s[0]<f)return!1;f=+s[0]}return!0}(l)||(o.opacityscale=void 0)}function r(t,o,n){o in t&&!(n in t)&&(t[n]=t[o])}ae.exports={supplyDefaults:function(t,o,n,m){var l,i;function f(x,w){return g.coerce(t,o,y,x,w)}var u=f("x"),s=f("y"),d=f("z");if(!d||!d.length||u&&u.length<1||s&&s.length<1)o.visible=!1;else{o._xlength=Array.isArray(u)&&g.isArrayOrTypedArray(u[0])?d.length:d[0].length,o._ylength=d.length,p.getComponentMethod("calendars","handleTraceDefaults")(t,o,["x","y","z"],m),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(x){f(x)});var h=f("surfacecolor"),a=["x","y","z"];for(l=0;l<3;++l){var _="contours."+a[l],c=f(_+".show"),T=f(_+".highlight");if(c||T)for(i=0;i<3;++i)f(_+".project."+a[i]);c&&(f(_+".color"),f(_+".width"),f(_+".usecolormap")),T&&(f(_+".highlightcolor"),f(_+".highlightwidth")),f(_+".start"),f(_+".end"),f(_+".size")}h||(r(t,"zmin","cmin"),r(t,"zmax","cmax"),r(t,"zauto","cauto")),b(t,o,m,f,{prefix:"",cLetter:"c"}),e(0,o,0,f),o._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),moduleType:"trace",name:"surface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(v,ae,ie){"use strict";var p=v("../../components/annotations/attributes"),g=v("../../lib/extend").extendFlat,b=v("../../plot_api/edit_types").overrideAll,y=v("../../plots/font_attributes"),e=v("../../plots/domain").attributes,r=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(ae.exports=b({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:g({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},y({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:g({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:g({},y({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(v,ae,ie){"use strict";var p=v("../../plots/get_data").getModuleCalcData,g=v("./plot");ie.name="table",ie.plot=function(b){var y=p(b.calcdata,"table")[0];y.length&&g(b,y)},ie.clean=function(b,y,e,r){var t=r._has&&r._has("table"),o=y._has&&y._has("table");t&&!o&&r._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(v,ae,ie){"use strict";var p=v("../../lib/gup").wrap;ae.exports=function(){return p({})}},{"../../lib/gup":512}],1078:[function(v,ae,ie){"use strict";ae.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(v,ae,ie){"use strict";var p=v("./constants"),g=v("../../lib/extend").extendFlat,b=v("fast-isnumeric");function y(l){if(Array.isArray(l)){for(var i=0,f=0;f<l.length;f++)i=Math.max(i,y(l[f]));return i}return l}function e(l,i){return l+i}function r(l){var i,f=l.slice(),u=1/0,s=0;for(i=0;i<f.length;i++)Array.isArray(f[i])||(f[i]=[f[i]]),u=Math.min(u,f[i].length),s=Math.max(s,f[i].length);if(u!==s)for(i=0;i<f.length;i++){var d=s-f[i].length;d&&(f[i]=f[i].concat(t(d)))}return f}function t(l){for(var i=new Array(l),f=0;f<l;f++)i[f]="";return i}function o(l){return l.calcdata.columns.reduce(function(i,f){return f.xIndex<l.xIndex?i+f.columnWidth:i},0)}function n(l,i){return Object.keys(l).map(function(f){return g({},l[f],{auxiliaryBlocks:i})})}function m(l,i){for(var f,u={},s=0,d=0,h={firstRowIndex:null,lastRowIndex:null,rows:[]},a=0,_=0,c=0;c<l.length;c++)h.rows.push({rowIndex:c,rowHeight:f=l[c]}),((d+=f)>=i||c===l.length-1)&&(u[s]=h,h.key=_++,h.firstRowIndex=a,h.lastRowIndex=c,h={firstRowIndex:null,lastRowIndex:null,rows:[]},s+=d,a=c+1,d=0);return u}ae.exports=function(l,i){var f=r(i.cells.values),u=function(z){return z.slice(i.header.values.length,z.length)},s=r(i.header.values);s.length&&!s[0].length&&(s[0]=[""],s=r(s));var d=s.concat(u(f).map(function(){return t((s[0]||[""]).length)})),h=i.domain,a=Math.floor(l._fullLayout._size.w*(h.x[1]-h.x[0])),_=Math.floor(l._fullLayout._size.h*(h.y[1]-h.y[0])),c=i.header.values.length?d[0].map(function(){return i.header.height}):[p.emptyHeaderHeight],T=f.length?f[0].map(function(){return i.cells.height}):[],x=c.reduce(e,0),w=m(T,_-x+p.uplift),M=n(m(c,x),[]),D=n(w,M),C={},P=i._fullInput.columnorder.concat(u(f.map(function(z,q){return q}))),L=d.map(function(z,q){var G=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(q,i.columnwidth.length-1)]:i.columnwidth;return b(G)?Number(G):1}),S=L.reduce(e,0);L=L.map(function(z){return z/S*a});var E=Math.max(y(i.header.line.width),y(i.cells.line.width)),N={key:i.uid+l._context.staticPlot,translateX:h.x[0]*l._fullLayout._size.w,translateY:l._fullLayout._size.h*(1-h.y[1]),size:l._fullLayout._size,width:a,maxLineWidth:E,height:_,columnOrder:P,groupHeight:_,rowBlocks:D,headerRowBlocks:M,scrollY:0,cells:g({},i.cells,{values:f}),headerCells:g({},i.header,{values:d}),gdColumns:d.map(function(z){return z[0]}),gdColumnsOriginalOrder:d.map(function(z){return z[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(z,q){return C[z]=(C[z]||0)+1,{key:z+"__"+C[z],label:z,specIndex:q,xIndex:P[q],xScale:o,x:void 0,calcdata:void 0,columnWidth:L[q]}})};return N.columns.forEach(function(z){z.calcdata=N,z.x=o(z)}),N}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(v,ae,ie){"use strict";var p=v("../../lib/extend").extendFlat;ie.splitToPanels=function(g){var b=[0,0],y=p({},g,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:g.calcdata.headerCells.values[g.specIndex],rowBlocks:g.calcdata.headerRowBlocks,calcdata:p({},g.calcdata,{cells:g.calcdata.headerCells})});return[p({},g,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:g.calcdata.cells.values[g.specIndex],rowBlocks:g.calcdata.rowBlocks}),p({},g,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:g.calcdata.cells.values[g.specIndex],rowBlocks:g.calcdata.rowBlocks}),y]},ie.splitToCells=function(g){var y,e,r,b=[r=(e=(y=g).rowBlocks[y.page])?e.rows[0].rowIndex:0,e?r+e.rows.length:0];return(g.values||[]).slice(b[0],b[1]).map(function(y,e){return{keyWithinBlock:e+("string"==typeof y&&y.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:b[0]+e,column:g,calcdata:g.calcdata,page:g.page,rowBlocks:g.rowBlocks,value:y}})}},{"../../lib/extend":505}],1081:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../plots/domain").defaults;ae.exports=function(y,e,r,t){function o(n,m){return p.coerce(y,e,g,n,m)}b(e,t,o),o("columnwidth"),o("header.values"),o("header.format"),o("header.align"),o("header.prefix"),o("header.suffix"),o("header.height"),o("header.line.width"),o("header.line.color"),o("header.fill.color"),p.coerceFont(o,"header.font",p.extendFlat({},t.font)),function(n,m){for(var i=n.header.values.length,f=(n.columnorder||[]).slice(0,i),u=f.slice().sort(function(h,a){return h-a}),s=f.map(function(h){return u.indexOf(h)}),d=s.length;d<i;d++)s.push(d);m("columnorder",s)}(e,o),o("cells.values"),o("cells.format"),o("cells.align"),o("cells.prefix"),o("cells.suffix"),o("cells.height"),o("cells.line.width"),o("cells.line.color"),o("cells.fill.color"),p.coerceFont(o,"cells.font",p.extendFlat({},t.font)),e._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"table",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(v,ae,ie){"use strict";var p=v("./constants"),g=v("@plotly/d3"),b=v("../../lib").numberFormat,y=v("../../lib/gup"),e=v("../../components/drawing"),r=v("../../lib/svg_text_utils"),t=v("../../lib").raiseToTop,o=v("../../lib").strTranslate,n=v("../../lib").cancelTransition,m=v("./data_preparation_helper"),l=v("./data_split_helpers"),i=v("../../components/color");function f(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function u(X,J){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+J.key}function s(X,J){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+J.calcdata.key+"_"+J.specIndex}function d(X){return[].concat.apply([],X.map(function(J){return J})).map(function(J){return J.__data__})}function h(X,J,se){var V=X.selectAll("."+p.cn.scrollbarKit).data(y.repeat,y.keyFun);V.enter().append("g").classed(p.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),V.each(function(te){var ce,ee=te.scrollbarState;ee.totalHeight=q(ce=te.rowBlocks,ce.length-1)+(ce.length?G(ce[ce.length-1],1/0):1),ee.scrollableAreaHeight=te.groupHeight-D(te),ee.currentlyVisibleHeight=Math.min(ee.totalHeight,ee.scrollableAreaHeight),ee.ratio=ee.currentlyVisibleHeight/ee.totalHeight,ee.barLength=Math.max(ee.ratio*ee.currentlyVisibleHeight,p.goldenRatio*p.scrollbarWidth),ee.barWiggleRoom=ee.currentlyVisibleHeight-ee.barLength,ee.wiggleRoom=Math.max(0,ee.totalHeight-ee.scrollableAreaHeight),ee.topY=0===ee.barWiggleRoom?0:te.scrollY/ee.wiggleRoom*ee.barWiggleRoom,ee.bottomY=ee.topY+ee.barLength,ee.dragMultiplier=ee.wiggleRoom/ee.barWiggleRoom}).attr("transform",function(te){return o(te.width+p.scrollbarWidth/2+p.scrollbarOffset,D(te))});var j=V.selectAll("."+p.cn.scrollbar).data(y.repeat,y.keyFun);j.enter().append("g").classed(p.cn.scrollbar,!0);var H=j.selectAll("."+p.cn.scrollbarSlider).data(y.repeat,y.keyFun);H.enter().append("g").classed(p.cn.scrollbarSlider,!0),H.attr("transform",function(te){return o(0,te.scrollbarState.topY||0)});var oe=H.selectAll("."+p.cn.scrollbarGlyph).data(y.repeat,y.keyFun);oe.enter().append("line").classed(p.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",p.scrollbarWidth).attr("stroke-linecap","round").attr("y1",p.scrollbarWidth/2),oe.attr("y2",function(te){return te.scrollbarState.barLength-p.scrollbarWidth/2}).attr("stroke-opacity",function(te){return te.columnDragInProgress||!te.scrollbarState.barWiggleRoom||se?0:.4}),oe.transition().delay(0).duration(0),oe.transition().delay(p.scrollbarHideDelay).duration(p.scrollbarHideDuration).attr("stroke-opacity",0);var U=j.selectAll("."+p.cn.scrollbarCaptureZone).data(y.repeat,y.keyFun);U.enter().append("line").classed(p.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",p.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(te){var ee=g.event.y,le=this.getBoundingClientRect(),ce=te.scrollbarState,pe=ee-le.top,de=g.scale.linear().domain([0,ce.scrollableAreaHeight]).range([0,ce.totalHeight]).clamp(!0);ce.topY<=pe&&pe<=ce.bottomY||P(J,X,null,de(pe-ce.barLength/2))(te)}).call(g.behavior.drag().origin(function(te){return g.event.stopPropagation(),te.scrollbarState.scrollbarScrollInProgress=!0,te}).on("drag",P(J,X)).on("dragend",function(){})),U.attr("y2",function(te){return te.scrollbarState.scrollableAreaHeight}),J._context.staticPlot&&(oe.remove(),U.remove())}function a(X,J,se,V){var U,j=function(oe){var U=oe.selectAll("."+p.cn.columnCell).data(l.splitToCells,function(te){return te.keyWithinBlock});return U.enter().append("g").classed(p.cn.columnCell,!0),U.exit().remove(),U}(((U=se.selectAll("."+p.cn.columnCells).data(y.repeat,y.keyFun)).enter().append("g").classed(p.cn.columnCells,!0),U.exit().remove(),U));j.each(function(U,te){var ee=U.calcdata.cells.font,le=U.column.specIndex,ce={size:T(ee.size,le,te),color:T(ee.color,le,te),family:T(ee.family,le,te)};U.rowNumber=U.key,U.align=T(U.calcdata.cells.align,le,te),U.cellBorderWidth=T(U.calcdata.cells.line.width,le,te),U.font=ce}),function(oe){oe.attr("width",function(U){return U.column.columnWidth}).attr("stroke-width",function(U){return U.cellBorderWidth}).each(function(U){var te=g.select(this);i.stroke(te,T(U.calcdata.cells.line.color,U.column.specIndex,U.rowNumber)),i.fill(te,T(U.calcdata.cells.fill.color,U.column.specIndex,U.rowNumber))})}(function(oe){var U=oe.selectAll("."+p.cn.cellRect).data(y.repeat,function(te){return te.keyWithinBlock});return U.enter().append("rect").classed(p.cn.cellRect,!0),U}(j));var H=function(oe){var U=oe.selectAll("."+p.cn.cellText).data(y.repeat,function(te){return te.keyWithinBlock});return U.enter().append("text").classed(p.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){g.event.stopPropagation()}),U}(function(oe){var U=oe.selectAll("."+p.cn.cellTextHolder).data(y.repeat,function(te){return te.keyWithinBlock});return U.enter().append("g").classed(p.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),U}(j));(function(oe){oe.each(function(U){e.font(g.select(this),U.font)})})(H),_(H,J,V,X),z(j)}function _(X,J,se,V){X.text(function(j){var H=j.column.specIndex,oe=j.rowNumber,U=j.value,te="string"==typeof U,ee=te&&U.match(/<br>/i),le=!te||ee;j.mayHaveMarkup=te&&U.match(/[<&>]/);var ce,pe="string"==typeof(ce=U)&&ce.match(p.latexCheck);j.latex=pe;var de,be,he=pe?"":T(j.calcdata.cells.prefix,H,oe)||"",xe=pe?"":T(j.calcdata.cells.suffix,H,oe)||"",De=pe?null:T(j.calcdata.cells.format,H,oe)||null,Se=he+(De?b(De)(j.value):j.value)+xe;if(j.wrappingNeeded=!j.wrapped&&!le&&!pe&&(de=c(Se)),j.cellHeightMayIncrease=ee||pe||j.mayHaveMarkup||(void 0===de?c(Se):de),j.needsConvertToTspans=j.mayHaveMarkup||j.wrappingNeeded||j.latex,j.wrappingNeeded){var ke=(" "===p.wrapSplitCharacter?Se.replace(/<a href=/gi,"<a_href="):Se).split(p.wrapSplitCharacter),Fe=" "===p.wrapSplitCharacter?ke.map(function(ve){return ve.replace(/<a_href=/gi,"<a href=")}):ke;j.fragments=Fe.map(function(ve){return{text:ve,width:null}}),j.fragments.push({fragment:p.wrapSpacer,width:null}),be=Fe.join(p.lineBreaker)+p.lineBreaker+p.wrapSpacer}else delete j.fragments,be=Se;return be}).attr("dy",function(j){return j.needsConvertToTspans?0:"0.75em"}).each(function(j){var H=g.select(this);j.needsConvertToTspans?r.convertToTspans(H,V,(j.wrappingNeeded?S:E)(se,this,J,V,j)):g.select(this.parentNode).attr("transform",function(U){return o(N(U),p.cellPad)}).attr("text-anchor",function(U){return{left:"start",center:"middle",right:"end"}[U.align]})})}function c(X){return-1!==X.indexOf(p.wrapSplitCharacter)}function T(X,J,se){if(Array.isArray(X)){var V=X[Math.min(J,X.length-1)];return Array.isArray(V)?V[Math.min(se,V.length-1)]:V}return X}function x(X,J,se){X.transition().ease(p.releaseTransitionEase).duration(p.releaseTransitionDuration).attr("transform",o(J.x,se))}function w(X){return"cells"===X.type}function M(X){return"header"===X.type}function D(X){return(X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(J,se){return J+G(se,1/0)},0)}function C(X,J,se){var V=d(J)[0];if(void 0!==V){var j=V.rowBlocks,H=V.calcdata,oe=q(j,j.length),U=V.calcdata.groupHeight-D(V),te=H.scrollY=Math.max(0,Math.min(oe-U,H.scrollY)),ee=function(le,ce,pe){for(var de=[],be=0,he=0;he<le.length;he++){for(var xe=le[he],De=xe.rows,Se=0,ke=0;ke<De.length;ke++)Se+=De[ke].rowHeight;xe.allRowsHeight=Se,ce<be+Se&&ce+pe>be&&de.push(he),be+=Se}return de}(j,te,U);1===ee.length&&(ee[0]===j.length-1?ee.unshift(ee[0]-1):ee.push(ee[0]+1)),ee[0]%2&&ee.reverse(),J.each(function(le,ce){le.page=ee[ce],le.scrollY=te}),J.attr("transform",function(le){var ce=q(le.rowBlocks,le.page)-le.scrollY;return o(0,ce)}),X&&(L(X,se,J,ee,V.prevPages,V,0),L(X,se,J,ee,V.prevPages,V,1),h(se,X))}}function P(X,J,se,V){return function(j){var H=j.calcdata?j.calcdata:j,oe=J.filter(function(le){return H.key===le.key}),te=H.scrollY;H.scrollY=void 0===V?H.scrollY+(se||H.scrollbarState.dragMultiplier)*g.event.dy:V;var ee=oe.selectAll("."+p.cn.yColumn).selectAll("."+p.cn.columnBlock).filter(w);return C(X,ee,oe),H.scrollY===te}}function L(X,J,se,V,j,H,oe){V[oe]!==j[oe]&&(clearTimeout(H.currentRepaint[oe]),H.currentRepaint[oe]=setTimeout(function(){var U=se.filter(function(te,ee){return ee===oe&&V[ee]!==j[ee]});a(X,J,U,se),j[oe]=V[oe]}))}function S(X,J,se,V){return function(){var j=g.select(J.parentNode);j.each(function(H){var oe=H.fragments;j.selectAll("tspan.line").each(function(be,he){oe[he].width=this.getComputedTextLength()});var U,te,ee=oe[oe.length-1].width,le=oe.slice(0,-1),ce=[],pe=0,de=H.column.columnWidth-2*p.cellPad;for(H.value="";le.length;)pe+(te=(U=le.shift()).width+ee)>de&&(H.value+=ce.join(p.wrapSpacer)+p.lineBreaker,ce=[],pe=0),ce.push(U.text),pe+=te;pe&&(H.value+=ce.join(p.wrapSpacer)),H.wrapped=!0}),j.selectAll("tspan.line").remove(),_(j.select("."+p.cn.cellText),se,X,V),g.select(J.parentNode.parentNode).call(z)}}function E(X,J,se,V,j){return function(){if(!j.settledY){var H=g.select(J.parentNode),oe=ne(j),U=j.key-oe.firstRowIndex,te=oe.rows[U].rowHeight,ee=j.cellHeightMayIncrease?J.parentNode.getBoundingClientRect().height+2*p.cellPad:te,le=Math.max(ee,te);le-oe.rows[U].rowHeight&&(oe.rows[U].rowHeight=le,X.selectAll("."+p.cn.columnCell).call(z),C(null,X.filter(w),0),h(se,V,!0)),H.attr("transform",function(){var ce=this.parentNode.getBoundingClientRect(),pe=g.select(this.parentNode).select("."+p.cn.cellRect).node().getBoundingClientRect(),de=this.transform.baseVal.consolidate(),be=pe.top-ce.top+(de?de.matrix.f:p.cellPad);return o(N(j,g.select(this.parentNode).select("."+p.cn.cellTextHolder).node().getBoundingClientRect().width),be)}),j.settledY=!0}}}function N(X,J){switch(X.align){case"left":default:return p.cellPad;case"right":return X.column.columnWidth-(J||0)-p.cellPad;case"center":return(X.column.columnWidth-(J||0))/2}}function z(X){X.attr("transform",function(J){var se=J.rowBlocks[0].auxiliaryBlocks.reduce(function(j,H){return j+G(H,1/0)},0),V=G(ne(J),J.key);return o(0,V+se)}).selectAll("."+p.cn.cellRect).attr("height",function(J){return(se=ne(J),V=J.key,se.rows[V-se.firstRowIndex]).rowHeight;var se,V})}function q(X,J){for(var se=0,V=J-1;V>=0;V--)se+=K(X[V]);return se}function G(X,J){for(var se=0,V=0;V<X.rows.length&&X.rows[V].rowIndex<J;V++)se+=X.rows[V].rowHeight;return se}function K(X){var J=X.allRowsHeight;if(void 0!==J)return J;for(var se=0,V=0;V<X.rows.length;V++)se+=X.rows[V].rowHeight;return X.allRowsHeight=se,se}function ne(X){return X.rowBlocks[X.page]}ae.exports=function(X,J){var se=!X._context.staticPlot,V=X._fullLayout._paper.selectAll("."+p.cn.table).data(J.map(function(xe){var De=y.unwrap(xe).trace;return m(X,De)}),y.keyFun);V.exit().remove(),V.enter().append("g").classed(p.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),V.attr("width",function(xe){return xe.width+xe.size.l+xe.size.r}).attr("height",function(xe){return xe.height+xe.size.t+xe.size.b}).attr("transform",function(xe){return o(xe.translateX,xe.translateY)});var j=V.selectAll("."+p.cn.tableControlView).data(y.repeat,y.keyFun),H=j.enter().append("g").classed(p.cn.tableControlView,!0).style("box-sizing","content-box");if(se){var oe="onwheel"in document?"wheel":"mousewheel";H.on("mousemove",function(xe){j.filter(function(De){return xe===De}).call(h,X)}).on(oe,function(xe){xe.scrollbarState.wheeling||(xe.scrollbarState.wheeling=!0,P(X,j,null,xe.scrollY+g.event.deltaY)(xe)||(g.event.stopPropagation(),g.event.preventDefault()),xe.scrollbarState.wheeling=!1)}).call(h,X,!0)}j.attr("transform",function(xe){return o(xe.size.l,xe.size.t)});var U=j.selectAll("."+p.cn.scrollBackground).data(y.repeat,y.keyFun);U.enter().append("rect").classed(p.cn.scrollBackground,!0).attr("fill","none"),U.attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}),j.each(function(xe){e.setClipUrl(g.select(this),u(X,xe),X)});var te=j.selectAll("."+p.cn.yColumn).data(function(xe){return xe.columns},y.keyFun);te.enter().append("g").classed(p.cn.yColumn,!0),te.exit().remove(),te.attr("transform",function(xe){return o(xe.x,0)}),se&&te.call(g.behavior.drag().origin(function(xe){return x(g.select(this),xe,-p.uplift),t(this),xe.calcdata.columnDragInProgress=!0,h(j.filter(function(De){return xe.calcdata.key===De.key}),X),xe}).on("drag",function(xe){var De=g.select(this),Se=function(ke){return(xe===ke?g.event.x:ke.x)+ke.columnWidth/2};xe.x=Math.max(-p.overdrag,Math.min(xe.calcdata.width+p.overdrag-xe.columnWidth,g.event.x)),d(te).filter(function(ke){return ke.calcdata.key===xe.calcdata.key}).sort(function(ke,Fe){return Se(ke)-Se(Fe)}).forEach(function(ke,Fe){ke.xIndex=Fe,ke.x=xe===ke?ke.x:ke.xScale(ke)}),te.filter(function(ke){return xe!==ke}).transition().ease(p.transitionEase).duration(p.transitionDuration).attr("transform",function(ke){return o(ke.x,0)}),De.call(n).attr("transform",o(xe.x,-p.uplift))}).on("dragend",function(xe){var ke,Fe,ve,Te,De=g.select(this),Se=xe.calcdata;xe.x=xe.xScale(xe),xe.calcdata.columnDragInProgress=!1,x(De,xe,0),ke=X,Fe=Se,ve=Se.columns.map(function(ke){return ke.xIndex}),Te=Fe.gdColumnsOriginalOrder,Fe.gdColumns.sort(function(Le,Oe){return ve[Te.indexOf(Le)]-ve[Te.indexOf(Oe)]}),Fe.columnorder=ve,ke.emit("plotly_restyle")})),te.each(function(xe){e.setClipUrl(g.select(this),s(X,xe),X)});var ee=te.selectAll("."+p.cn.columnBlock).data(l.splitToPanels,y.keyFun);ee.enter().append("g").classed(p.cn.columnBlock,!0).attr("id",function(xe){return xe.key}),ee.style("cursor",function(xe){return xe.dragHandle?"ew-resize":xe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var le=ee.filter(M),ce=ee.filter(w);se&&ce.call(g.behavior.drag().origin(function(xe){return g.event.stopPropagation(),xe}).on("drag",P(X,j,-1)).on("dragend",function(){})),a(X,j,le,ee),a(X,j,ce,ee);var pe=j.selectAll("."+p.cn.scrollAreaClip).data(y.repeat,y.keyFun);pe.enter().append("clipPath").classed(p.cn.scrollAreaClip,!0).attr("id",function(xe){return u(X,xe)});var de=pe.selectAll("."+p.cn.scrollAreaClipRect).data(y.repeat,y.keyFun);de.enter().append("rect").classed(p.cn.scrollAreaClipRect,!0).attr("x",-p.overdrag).attr("y",-p.uplift).attr("fill","none"),de.attr("width",function(xe){return xe.width+2*p.overdrag}).attr("height",function(xe){return xe.height+p.uplift}),te.selectAll("."+p.cn.columnBoundary).data(y.repeat,y.keyFun).enter().append("g").classed(p.cn.columnBoundary,!0);var be=te.selectAll("."+p.cn.columnBoundaryClippath).data(y.repeat,y.keyFun);be.enter().append("clipPath").classed(p.cn.columnBoundaryClippath,!0),be.attr("id",function(xe){return s(X,xe)});var he=be.selectAll("."+p.cn.columnBoundaryRect).data(y.repeat,y.keyFun);he.enter().append("rect").classed(p.cn.columnBoundaryRect,!0).attr("fill","none"),he.attr("width",function(xe){return xe.columnWidth+2*f(xe)}).attr("height",function(xe){return xe.calcdata.height+2*f(xe)+p.uplift}).attr("x",function(xe){return-f(xe)}).attr("y",function(xe){return-f(xe)}),C(null,ce,j)}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(v,ae,ie){"use strict";var p=v("../../plots/template_attributes").hovertemplateAttrs,g=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../components/colorscale/attributes"),y=v("../../plots/domain").attributes,e=v("../pie/attributes"),r=v("../sunburst/attributes"),t=v("./constants"),o=v("../../lib/extend").extendFlat;ae.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:o({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:r.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:r.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:o({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:r.textinfo,texttemplate:g({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:p({},{keys:t.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:o({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:r.root,domain:y({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(v,ae,ie){"use strict";var p=v("../../plots/plots");ie.name="treemap",ie.plot=function(g,b,y,e){p.plotBasePlot(ie.name,g,b,y,e)},ie.clean=function(g,b,y,e){p.cleanBasePlot(ie.name,g,b,y,e)}},{"../../plots/plots":628}],1086:[function(v,ae,ie){"use strict";var p=v("../sunburst/calc");ie.calc=function(g,b){return p.calc(g,b)},ie.crossTraceCalc=function(g){return p._runCrossTraceCalc("treemap",g)}},{"../sunburst/calc":1060}],1087:[function(v,ae,ie){"use strict";ae.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../../components/color"),y=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,r=v("../bar/constants").TEXTPAD,t=v("../../components/colorscale"),o=t.hasColorscale,n=t.handleDefaults;ae.exports=function(m,l,i,f){function u(w,M){return p.coerce(m,l,g,w,M)}var s=u("labels"),d=u("parents");if(s&&s.length&&d&&d.length){var h=u("values");u(h&&h.length?"branchvalues":"count"),u("level"),u("maxdepth"),"squarify"===u("tiling.packing")&&u("tiling.squarifyratio"),u("tiling.flip"),u("tiling.pad");var a=u("text");u("texttemplate"),l.texttemplate||u("textinfo",Array.isArray(a)?"text+label":"label"),u("hovertext"),u("hovertemplate");var _=u("pathbar.visible");e(m,l,f,u,"auto",{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("textposition");var c=-1!==l.textposition.indexOf("bottom");u("marker.line.width")&&u("marker.line.color",f.paper_bgcolor);var T=u("marker.colors");(l._hasColorscale=o(m,"marker","colors")||(m.marker||{}).coloraxis)?n(m,l,f,u,{prefix:"marker.",cLetter:"c"}):u("marker.depthfade",!(T||[]).length);var x=2*l.textfont.size;u("marker.pad.t",c?x/4:x),u("marker.pad.l",x/4),u("marker.pad.r",x/4),u("marker.pad.b",c?x:x/4),l._hovered={marker:{line:{width:2,color:b.contrast(f.paper_bgcolor)}}},_&&(u("pathbar.thickness",l.pathbar.textfont.size+2*r),u("pathbar.side"),u("pathbar.edgeshape")),u("sort"),u("root.color"),y(l,f,u),l._length=null}else l.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../sunburst/helpers"),b=v("../bar/uniform_text").clearMinTextSize,y=v("../bar/style").resizeText,e=v("./plot_one");ae.exports=function(r,t,o,n,m){var l,i,f=m.type,u=m.drawDescendants,s=r._fullLayout,d=s["_"+f+"layer"],h=!o;b(f,s),(l=d.selectAll("g.trace."+f).data(t,function(a){return a[0].trace.uid})).enter().append("g").classed("trace",!0).classed(f,!0),l.order(),!s.uniformtext.mode&&g.hasTransition(o)?(n&&(i=n()),p.transition().duration(o.duration).ease(o.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){d.selectAll("g.trace").each(function(a){e(r,a,this,o,u)})})):(l.each(function(a){e(r,a,this,o,u)}),s.uniformtext.mode&&y(r,d.selectAll(".trace"),f)),h&&l.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../../lib/svg_text_utils"),e=v("./partition"),r=v("./style").styleOne,t=v("./constants"),o=v("../sunburst/helpers"),n=v("../sunburst/fx");ae.exports=function(m,l,i,f,u){var s=u.barDifY,d=u.width,h=u.height,a=u.viewX,_=u.viewY,c=u.pathSlice,T=u.toMoveInsideSlice,x=u.strTransform,w=u.hasTransition,M=u.handleSlicesExit,D=u.makeUpdateSliceInterpolator,C=u.makeUpdateTextInterpolator,P={},L=m._fullLayout,S=l[0],E=S.trace,N=S.hierarchy,z=d/E._entryDepth,q=o.listPath(i.data,"id"),G=e(N.copy(),[d,h],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(G=G.filter(function(ne){var X=q.indexOf(ne.data.id);return-1!==X&&(ne.x0=z*X,ne.x1=z*(X+1),ne.y0=s,ne.y1=s+h,ne.onPathbar=!0,!0)})).reverse(),(f=f.data(G,o.getPtId)).enter().append("g").classed("pathbar",!0),M(f,!0,P,[d,h],c),f.order();var K=f;w&&(K=K.transition().each("end",function(){var ne=p.select(this);o.setSliceCursor(ne,m,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),K.each(function(ne){ne._x0=a(ne.x0),ne._x1=a(ne.x1),ne._y0=_(ne.y0),ne._y1=_(ne.y1),ne._hoverX=a(ne.x1-Math.min(d,h)/2),ne._hoverY=_(ne.y1-h/2);var X=p.select(this),J=g.ensureSingle(X,"path","surface",function(H){H.style("pointer-events","all")});w?J.transition().attrTween("d",function(H){var oe=D(H,!0,P,[d,h]);return function(U){return c(oe(U))}}):J.attr("d",c),X.call(n,i,m,l,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,m,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:m._transitioning}),J.call(r,ne,E,{hovered:!1}),ne._text=(o.getPtLabel(ne)||"").split("<br>").join(" ")||"";var se=g.ensureSingle(X,"g","slicetext"),V=g.ensureSingle(se,"text","",function(H){H.attr("data-notex",1)}),j=g.ensureUniformFontSize(m,o.determineTextFont(E,ne,L.font,{onPathbar:!0}));V.text(ne._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,j).call(y.convertToTspans,m),ne.textBB=b.bBox(V.node()),ne.transform=T(ne,{fontSize:j.size,onPathbar:!0}),ne.transform.fontSize=j.size,w?V.transition().attrTween("transform",function(H){var oe=C(H,!0,P,[d,h]);return function(U){return x(oe(U))}}):V.attr("transform",x(ne))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../../lib/svg_text_utils"),e=v("./partition"),r=v("./style").styleOne,t=v("./constants"),o=v("../sunburst/helpers"),n=v("../sunburst/fx"),m=v("../sunburst/plot").formatSliceLabel;ae.exports=function(l,i,f,u,s){var d=s.width,h=s.height,a=s.viewX,_=s.viewY,c=s.pathSlice,T=s.toMoveInsideSlice,x=s.strTransform,w=s.hasTransition,M=s.handleSlicesExit,D=s.makeUpdateSliceInterpolator,C=s.makeUpdateTextInterpolator,P=s.prevEntry,L=l._fullLayout,S=i[0].trace,E=-1!==S.textposition.indexOf("left"),N=-1!==S.textposition.indexOf("right"),z=-1!==S.textposition.indexOf("bottom"),q=!z&&!S.marker.pad.t||z&&!S.marker.pad.b,G=e(f,[d,h],{packing:S.tiling.packing,squarifyratio:S.tiling.squarifyratio,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,pad:{inner:S.tiling.pad,top:S.marker.pad.t,left:S.marker.pad.l,right:S.marker.pad.r,bottom:S.marker.pad.b}}).descendants(),K=1/0,ne=-1/0;G.forEach(function(j){var H=j.depth;H>=S._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(K=Math.min(K,H),ne=Math.max(ne,H))}),u=u.data(G,o.getPtId),S._maxVisibleLayers=isFinite(ne)?ne-K+1:0,u.enter().append("g").classed("slice",!0),M(u,!1,{},[d,h],c),u.order();var X=null;if(w&&P){var J=o.getPtId(P);u.each(function(j){null===X&&o.getPtId(j)===J&&(X={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var se=function(){return X||{x0:0,x1:d,y0:0,y1:h}},V=u;return w&&(V=V.transition().each("end",function(){var j=p.select(this);o.setSliceCursor(j,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(j){var H=o.isHeader(j,S);j._x0=a(j.x0),j._x1=a(j.x1),j._y0=_(j.y0),j._y1=_(j.y1),j._hoverX=a(j.x1-S.marker.pad.r),j._hoverY=_(z?j.y1-S.marker.pad.b/2:j.y0+S.marker.pad.t/2);var oe=p.select(this),U=g.ensureSingle(oe,"path","surface",function(ce){ce.style("pointer-events","all")});w?U.transition().attrTween("d",function(ce){var pe=D(ce,!1,se(),[d,h]);return function(de){return c(pe(de))}}):U.attr("d",c),oe.call(n,f,l,i,{styleOne:r,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,l,{isTransitioning:l._transitioning}),U.call(r,j,S,{hovered:!1}),j._text=j.x0===j.x1||j.y0===j.y1?"":H?q?"":o.getPtLabel(j)||"":m(j,f,S,i,L)||"";var te=g.ensureSingle(oe,"g","slicetext"),ee=g.ensureSingle(te,"text","",function(ce){ce.attr("data-notex",1)}),le=g.ensureUniformFontSize(l,o.determineTextFont(S,j,L.font));ee.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",N?"end":E||H?"start":"middle").call(b.font,le).call(y.convertToTspans,l),j.textBB=b.bBox(ee.node()),j.transform=T(j,{fontSize:le.size,isHeader:H}),j.transform.fontSize=le.size,w?ee.transition().attrTween("transform",function(ce){var pe=C(ce,!1,se(),[d,h]);return function(de){return x(pe(de))}}):ee.attr("transform",x(j))}),X}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(v,ae,ie){"use strict";ae.exports=function p(g,b,y){var e;y.swapXY&&(e=g.x0,g.x0=g.y0,g.y0=e,e=g.x1,g.x1=g.y1,g.y1=e),y.flipX&&(e=g.x0,g.x0=b[0]-g.x1,g.x1=b[0]-e),y.flipY&&(e=g.y0,g.y0=b[1]-g.y1,g.y1=b[1]-e);var r=g.children;if(r)for(var t=0;t<r.length;t++)p(r[t],b,y)}},{}],1093:[function(v,ae,ie){"use strict";ae.exports={moduleType:"trace",name:"treemap",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(v,ae,ie){"use strict";ae.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y){function e(r,t){return p.coerce(b,y,g,r,t)}e("treemapcolorway",y.colorway),e("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(v,ae,ie){"use strict";var p=v("d3-hierarchy"),g=v("./flip_tree");ae.exports=function(b,y,e){var r,t=e.flipX,o=e.flipY,n="dice-slice"===e.packing,m=e.pad[o?"bottom":"top"],l=e.pad[t?"right":"left"],i=e.pad[t?"left":"right"],f=e.pad[o?"top":"bottom"];n&&(r=l,l=m,m=r,r=i,i=f,f=r);var u=p.treemap().tile(function(s,d){switch(s){case"squarify":return p.treemapSquarify.ratio(d);case"binary":return p.treemapBinary;case"dice":return p.treemapDice;case"slice":return p.treemapSlice;default:return p.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(l).paddingRight(i).paddingTop(m).paddingBottom(f).size(n?[y[1],y[0]]:y)(b);return(n||t||o)&&g(u,y,{swapXY:n,flipX:t,flipY:o}),u}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(v,ae,ie){"use strict";var p=v("./draw"),g=v("./draw_descendants");ae.exports=function(b,y,e,r){return p(b,y,e,r,{type:"treemap",drawDescendants:g})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("d3-interpolate").interpolate,b=v("../sunburst/helpers"),y=v("../../lib"),e=v("../bar/constants").TEXTPAD,r=v("../bar/plot").toMoveInsideBar,t=v("../bar/uniform_text").recordMinTextSize,o=v("./constants"),n=v("./draw_ancestors");function m(l){return b.isHierarchyRoot(l)?"":b.getPtId(l)}ae.exports=function(l,i,f,u,s){var d=l._fullLayout,h=i[0],a=h.trace,_="icicle"===a.type,c=h.hierarchy,T=b.findEntryWithLevel(c,a.level),x=p.select(f),w=x.selectAll("g.pathbar"),M=x.selectAll("g.slice");if(!T)return w.remove(),void M.remove();var D=b.isHierarchyRoot(T),C=!d.uniformtext.mode&&b.hasTransition(u),P=b.getMaxDepth(a),L=d._size,S=a.domain,E=L.w*(S.x[1]-S.x[0]),N=L.h*(S.y[1]-S.y[0]),z=E,q=a.pathbar.thickness,G=a.marker.line.width+o.gapWithPathbar,K=a.pathbar.visible?a.pathbar.side.indexOf("bottom")>-1?N+G:-(q+G):0,ne={x0:z,x1:z,y0:K,y1:K+q},X=function(Ne,Be,He){var Ve=a.tiling.pad,it=function(Ye){return Ye-Ve<=Be.x0},ze=function(Ye){return Ye+Ve>=Be.x1},je=function(Ye){return Ye-Ve<=Be.y0},qe=function(Ye){return Ye+Ve>=Be.y1};return Ne.x0===Be.x0&&Ne.x1===Be.x1&&Ne.y0===Be.y0&&Ne.y1===Be.y1?{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1}:{x0:it(Ne.x0-Ve)?0:ze(Ne.x0-Ve)?He[0]:Ne.x0,x1:it(Ne.x1+Ve)?0:ze(Ne.x1+Ve)?He[0]:Ne.x1,y0:je(Ne.y0-Ve)?0:qe(Ne.y0-Ve)?He[1]:Ne.y0,y1:je(Ne.y1+Ve)?0:qe(Ne.y1+Ve)?He[1]:Ne.y1}},J=null,se={},V={},j=null,H=function(Ne,Be){return Be?se[m(Ne)]:V[m(Ne)]};h.hasMultipleRoots&&D&&P++,a._maxDepth=P,a._backgroundColor=d.paper_bgcolor,a._entryDepth=T.data.depth,a._atRootLevel=D;var U=-E/2+L.l+L.w*(S.x[1]+S.x[0])/2,te=-N/2+L.t+L.h*(1-(S.y[1]+S.y[0])/2),ee=function(Ne){return U+Ne},le=function(Ne){return te+Ne},ce=le(0),pe=ee(0),de=function(Ne){return pe+Ne},be=function(Ne){return ce+Ne};function he(Ne,Be){return Ne+","+Be}var xe=de(0),De=function(Ne){Ne.x=Math.max(xe,Ne.x)},Se=a.pathbar.edgeshape,ke=function(Ne,Be){var He=Ne.x0,Ve=Ne.x1,it=Ne.y0,ze=Ne.y1,je=Ne.textBB,qe=function(Ct){return-1!==a.textposition.indexOf(Ct)},Ye=qe("bottom"),ct=qe("top")||Be.isHeader&&!Ye?"start":Ye?"end":"middle",vt=qe("right"),wt=qe("left")||Be.onPathbar?-1:vt?1:0,Ot=a[_?"tiling":"marker"].pad;if(Be.isHeader){if((He+=(_?Ot:Ot.l)-e)>=(Ve-=(_?Ot:Ot.r)-e)){var St=(He+Ve)/2;He=St,Ve=St}var ft;Ye?it<(ft=ze-(_?Ot:Ot.b))&&ft<ze&&(it=ft):it<(ft=it+(_?Ot:Ot.t))&&ft<ze&&(ze=ft)}var st=r(He,Ve,it,ze,je,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:wt});return st.fontSize=Be.fontSize,st.targetX=ee(st.targetX),st.targetY=le(st.targetY),isNaN(st.targetX)||isNaN(st.targetY)?{}:(He!==Ve&&it!==ze&&t(a.type,st,d),{scale:st.scale,rotate:st.rotate,textX:st.textX,textY:st.textY,anchorX:st.anchorX,anchorY:st.anchorY,targetX:st.targetX,targetY:st.targetY})},Fe=function(Ne,Be){for(var He,Ve=0,it=Ne;!He&&Ve<P;)Ve++,(it=it.parent)?He=H(it,Be):Ve=P;return He||{}},ve=function(Ne,Be,He,Ve,it){var ze,je=H(Ne,Be);if(je)ze=je;else if(Be)ze=ne;else if(J)if(Ne.parent){var qe=j||He;qe&&!Be?ze=X(Ne,qe,Ve):y.extendFlat(ze={},Fe(Ne,Be))}else ze=y.extendFlat({},Ne),_&&("h"===it.orientation?it.flipX?ze.x0=Ne.x1:ze.x1=0:it.flipY?ze.y0=Ne.y1:ze.y1=0);else ze={};return g(ze,{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1})},Te=function(Ne,Be,He,Ve){var it=H(Ne,Be),ze={},je=function(Ne,Be,He,Ve){return Be?se[m(c)]||ne:Ne.data.depth-T.data.depth<P?X(Ne,V[a.level]||He,Ve):{}}(Ne,Be,He,Ve);y.extendFlat(ze,{transform:ke({x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1,textBB:Ne.textBB,_text:Ne._text},{isHeader:b.isHeader(Ne,a)})}),it?ze=it:Ne.parent&&y.extendFlat(ze,Fe(Ne,Be));var qe=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&t(a.type,qe,d),g(ze,{transform:{scale:qe.scale,rotate:qe.rotate,textX:qe.textX,textY:qe.textY,anchorX:qe.anchorX,anchorY:qe.anchorY,targetX:qe.targetX,targetY:qe.targetY}})},Le=function(Ne,Be,He,Ve,it){var ze=Ve[0],je=Ve[1];C?Ne.exit().transition().each(function(){var qe=p.select(this);qe.select("path.surface").transition().attrTween("d",function(Ye){var ct=function(vt,wt,Ot,St){var ft,st=H(vt,wt);if(wt)ft=ne;else{var Ct=H(T,wt);ft=Ct?X(vt,Ct,St):{}}return g(st,ft)}(Ye,Be,0,[ze,je]);return function(vt){return it(ct(vt))}}),qe.select("g.slicetext").attr("opacity",0)}).remove():Ne.exit().remove()},Oe=function(Ne){var Be=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&t(a.type,Be,d),y.getTextTransform({textX:Be.textX,textY:Be.textY,anchorX:Be.anchorX,anchorY:Be.anchorY,targetX:Be.targetX,targetY:Be.targetY,scale:Be.scale,rotate:Be.rotate})};C&&(w.each(function(Ne){se[m(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(se[m(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate})}),M.each(function(Ne){V[m(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(V[m(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate}),!J&&b.isEntry(Ne)&&(J=Ne)})),j=s(l,i,T,M,{width:E,height:N,viewX:ee,viewY:le,pathSlice:function(Ne){var Be=ee(Ne.x0),He=ee(Ne.x1),Ve=le(Ne.y0),it=le(Ne.y1);return He-Be&&it-Ve?"M"+he(Be,Ve+0)+"L"+he(He-0,Ve)+"L"+he(He,it-0)+"L"+he(Be+0,it)+"Z":""},toMoveInsideSlice:ke,prevEntry:J,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Le,hasTransition:C,strTransform:Oe}),a.pathbar.visible?n(l,i,T,w,{barDifY:K,width:z,height:q,viewX:de,viewY:be,pathSlice:function(Ne){var Be=de(Math.max(Math.min(Ne.x0,Ne.x0),0)),He=de(Math.min(Math.max(Ne.x1,Ne.x1),z)),Ve=be(Ne.y0),it=be(Ne.y1),ze=q/2,je={},qe={};je.x=Be,qe.x=He,je.y=qe.y=(Ve+it)/2;var Ye={x:Be,y:Ve},ct={x:He,y:Ve},vt={x:He,y:it},wt={x:Be,y:it};return">"===Se?(Ye.x-=ze,ct.x-=ze,vt.x-=ze,wt.x-=ze):"/"===Se?(vt.x-=ze,wt.x-=ze,je.x-=ze/2,qe.x-=ze/2):"\\"===Se?(Ye.x-=ze,ct.x-=ze,je.x-=ze/2,qe.x-=ze/2):"<"===Se&&(je.x-=ze,qe.x-=ze),De(Ye),De(wt),De(je),De(ct),De(vt),De(qe),"M"+he(Ye.x,Ye.y)+"L"+he(ct.x,ct.y)+"L"+he(qe.x,qe.y)+"L"+he(vt.x,vt.y)+"L"+he(wt.x,wt.y)+"L"+he(je.x,je.y)+"Z"},toMoveInsideSlice:ke,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Le,hasTransition:C,strTransform:Oe}):w.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../../lib"),y=v("../sunburst/helpers"),e=v("../bar/uniform_text").resizeText;function r(t,o,n,m){var l,i,f=(m||{}).hovered,u=o.data.data,s=u.i,d=u.color,h=y.isHierarchyRoot(o),a=1;if(f)l=n._hovered.marker.line.color,i=n._hovered.marker.line.width;else if(h&&d===n.root.color)a=100,l="rgba(0,0,0,0)",i=0;else if(l=b.castOption(n,s,"marker.line.color")||g.defaultLine,i=b.castOption(n,s,"marker.line.width")||0,!n._hasColorscale&&!o.onPathbar){var _=n.marker.depthfade;if(_){var c,T=g.combine(g.addOpacity(n._backgroundColor,.75),d);if(!0===_){var x=y.getMaxDepth(n);c=isFinite(x)?y.isLeaf(o)?0:n._maxVisibleLayers-(o.data.depth-n._entryDepth):o.data.height+1}else c=o.data.depth-n._entryDepth,n._atRootLevel||c++;if(c>0)for(var w=0;w<c;w++)d=g.combine(g.addOpacity(T,.5*w/c),d)}}t.style("stroke-width",i).call(g.fill,d).call(g.stroke,l).style("opacity",a)}ae.exports={style:function(t){var o=t._fullLayout._treemaplayer.selectAll(".trace");e(t,o,"treemap"),o.each(function(n){var m=p.select(this),l=n[0].trace;m.style("opacity",l.opacity),m.selectAll("path.surface").each(function(i){p.select(this).call(r,i,l,{hovered:!1})})})},styleOne:r}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(v,ae,ie){"use strict";var p=v("../box/attributes"),g=v("../../lib/extend").extendFlat,b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat;ae.exports={y:p.y,x:p.x,x0:p.x0,y0:p.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:g({},p.name,{}),orientation:g({},p.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,points:g({},p.boxpoints,{}),jitter:g({},p.jitter,{}),pointpos:g({},p.pointpos,{}),width:g({},p.width,{}),marker:p.marker,text:p.text,hovertext:p.hovertext,hovertemplate:p.hovertemplate,quartilemethod:p.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../box/calc"),y=v("./helpers"),e=v("../../constants/numerical").BADNUM;function r(o,n,m){var l=n.max-n.min;if(!l)return o.bandwidth?o.bandwidth:0;if(o.bandwidth)return Math.max(o.bandwidth,l/1e4);var u,i=m.length,f=p.stdev(m,i-1,n.mean);return Math.max((u=i,1.059*Math.min(f,(n.q3-n.q1)/1.349)*Math.pow(u,-.2)),l/100)}function t(o,n,m,l){var i,f=o.spanmode,u=o.span||[],d=[n.min-2*l,n.max+2*l];function h(_){var c=u[_],T="multicategory"===m.type?m.r2c(c):m.d2c(c,0,o[n.valLetter+"calendar"]);return T===e?d[_]:T}var a={type:"linear",range:i="soft"===f?d:"hard"===f?[n.min,n.max]:[h(0),h(1)]};return g.setConvert(a),a.cleanRange(),i}ae.exports=function(o,n){var m=b(o,n);if(m[0].t.empty)return m;for(var l=o._fullLayout,i=g.getFromId(o,n["h"===n.orientation?"xaxis":"yaxis"]),f=1/0,u=-1/0,s=0,d=0,h=0;h<m.length;h++){var a=m[h],_=a.pts.map(y.extractVal),c=a.bandwidth=r(n,a,_),T=a.span=t(n,a,i,c);if(a.min===a.max&&0===c)T=a.span=[a.min,a.max],a.density=[{v:1,t:T[0]}],a.bandwidth=c,s=Math.max(s,1);else{var x=T[1]-T[0],w=Math.ceil(x/(c/3)),M=x/w;if(!isFinite(M)||!isFinite(w))return p.error("Something went wrong with computing the violin span"),m[0].t.empty=!0,m;var D=y.makeKDE(a,n,_);a.density=new Array(w);for(var C=0,P=T[0];P<T[1]+M/2;C++,P+=M){var L=D(P);a.density[C]={v:L,t:P},s=Math.max(s,L)}}d=Math.max(d,_.length),f=Math.min(f,T[0]),u=Math.max(u,T[1])}var S=g.findExtremes(i,[f,u],{padded:!0});if(n._extremes[i._id]=S,n.width)m[0].t.maxKDE=s;else{var E=l._violinScaleGroupStats,N=n.scalegroup,z=E[N];z?(z.maxKDE=Math.max(z.maxKDE,s),z.maxCount=Math.max(z.maxCount,d)):E[N]={maxKDE:s,maxCount:d}}return m[0].t.labels.kde=p._(o,"kde:"),m}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(v,ae,ie){"use strict";var p=v("../box/cross_trace_calc").setPositionOffset,g=["v","h"];ae.exports=function(b,y){for(var e=b.calcdata,r=y.xaxis,t=y.yaxis,o=0;o<g.length;o++){for(var n=g[o],m="h"===n?t:r,l=[],i=0;i<e.length;i++){var f=e[i],s=f[0].trace;!0!==s.visible||"violin"!==s.type||f[0].t.empty||s.orientation!==n||s.xaxis!==r._id||s.yaxis!==t._id||l.push(i)}p("violin",b,l,m)}}},{"../box/cross_trace_calc":684}],1103:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../components/color"),b=v("../box/defaults"),y=v("./attributes");ae.exports=function(e,r,t,o){function n(x,w){return p.coerce(e,r,y,x,w)}function m(x,w){return p.coerce2(e,r,y,x,w)}if(b.handleSampleDefaults(e,r,n,o),!1!==r.visible){n("bandwidth"),n("side"),n("width")||(n("scalegroup",r.name),n("scalemode"));var l,i=n("span");Array.isArray(i)&&(l="manual"),n("spanmode",l);var f=n("line.color",(e.marker||{}).color||t),u=n("line.width"),s=n("fillcolor",g.addOpacity(r.line.color,.5));b.handlePointsDefaults(e,r,n,{prefix:""});var d=m("box.width"),h=m("box.fillcolor",s),a=m("box.line.color",f),_=m("box.line.width",u);n("box.visible",Boolean(d||h||a||_))||(r.box={visible:!1});var c=m("meanline.color",f),T=m("meanline.width",u);n("meanline.visible",Boolean(c||T))||(r.meanline={visible:!1}),n("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)};ie.makeKDE=function(b,y,e){var r=e.length,t=g,o=b.bandwidth,n=1/(r*o);return function(m){for(var l=0,i=0;i<r;i++)l+=t((m-e[i])/o);return n*l}},ie.getPositionOnKdePath=function(b,y,e){var r,t;"h"===y.orientation?(r="y",t="x"):(r="x",t="y");var o=p.findPointOnPath(b.path,e,t,{pathLength:b.pathLength}),n=b.posCenterPx,m=o[r];return[m,"both"===y.side?2*n-m:n]},ie.getKdeValue=function(b,y,e){var r=b.pts.map(ie.extractVal);return ie.makeKDE(b,y,r)(e)/b.posDensityScale},ie.extractVal=function(b){return b.v}},{"../../lib":515}],1105:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../../plots/cartesian/axes"),b=v("../box/hover"),y=v("./helpers");ae.exports=function(e,r,t,o,n){n||(n={});var m,l,i=n.hoverLayer,f=e.cd,u=f[0].trace,s=u.hoveron,d=-1!==s.indexOf("violins"),h=-1!==s.indexOf("kde"),a=[];if(d||h){var _=b.hoverOnBoxes(e,r,t,o);if(h&&_.length>0){var c,T,x,w,M,D=e.xa,C=e.ya;"h"===u.orientation?(M=r,c="y",x=C,T="x",w=D):(M=t,c="x",x=D,T="y",w=C);var P=f[e.index];if(M>=P.span[0]&&M<=P.span[1]){var L=p.extendFlat({},e),S=w.c2p(M,!0),E=y.getKdeValue(P,u,M),N=y.getPositionOnKdePath(P,u,S),z=x._offset,q=x._length;L[c+"0"]=N[0],L[c+"1"]=N[1],L[T+"0"]=L[T+"1"]=S,L[T+"Label"]=T+": "+g.hoverLabelText(w,M,u[T+"hoverformat"])+", "+f[0].t.labels.kde+" "+E.toFixed(3);for(var G=0,K=0;K<_.length;K++)if("med"===_[K].attr){G=K;break}L.spikeDistance=_[G].spikeDistance;var ne=c+"Spike";L[ne]=_[G][ne],_[G].spikeDistance=void 0,_[G][ne]=void 0,L.hovertemplate=!1,a.push(L),(l={stroke:e.color})[c+"1"]=p.constrain(z+N[0],z,z+q),l[c+"2"]=p.constrain(z+N[1],z,z+q),l[T+"1"]=l[T+"2"]=w._offset+S}}d&&(a=a.concat(_))}-1!==s.indexOf("points")&&(m=b.hoverOnPoints(e,r,t));var X=i.selectAll(".violinline-"+u.uid).data(l?[0]:[]);return X.enter().append("line").classed("violinline-"+u.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(l),"closest"===o?m?[m]:a:(m&&a.push(m),a)}},{"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../box/select"),moduleType:"trace",name:"violin",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(v,ae,ie){"use strict";var p=v("../box/layout_attributes"),g=v("../../lib").extendFlat;ae.exports={violinmode:g({},p.boxmode,{}),violingap:g({},p.boxgap,{}),violingroupgap:g({},p.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes"),b=v("../box/layout_defaults");ae.exports=function(y,e,r){b._supply(y,e,r,function(t,o){return p.coerce(y,e,g,t,o)},"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../box/plot"),e=v("../scatter/line_points"),r=v("./helpers");ae.exports=function(t,o,n,m){var l=t._fullLayout,i=o.xaxis,f=o.yaxis;function u(s){var d=e(s,{xaxis:i,yaxis:f,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(d[0],1)}g.makeTraceGroups(m,n,"trace violins").each(function(s){var d=p.select(this),h=s[0],a=h.t,_=h.trace;if(!0!==_.visible||a.empty)d.remove();else{var c=a.bPos,T=a.bdPos,x=o[a.valLetter+"axis"],w=o[a.posLetter+"axis"],M="both"===_.side,D=M||"positive"===_.side,C=M||"negative"===_.side,P=d.selectAll("path.violin").data(g.identity);P.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(K){var ne,X,J,se,V,j,H,oe,U=p.select(this),te=K.density,ee=te.length,le=w.c2l(K.pos+c,!0),ce=w.l2p(le);if(_.width)ne=a.maxKDE/T;else{var pe=l._violinScaleGroupStats[_.scalegroup];ne="count"===_.scalemode?pe.maxKDE/T*(pe.maxCount/K.pts.length):pe.maxKDE/T}if(D){for(H=new Array(ee),V=0;V<ee;V++)(oe=H[V]={})[a.posLetter]=le+te[V].v/ne,oe[a.valLetter]=x.c2l(te[V].t,!0);X=u(H)}if(C){for(H=new Array(ee),j=0,V=ee-1;j<ee;j++,V--)(oe=H[j]={})[a.posLetter]=le-te[V].v/ne,oe[a.valLetter]=x.c2l(te[V].t,!0);J=u(H)}if(M)se=X+"L"+J.substr(1)+"Z";else{var de=[ce,x.c2p(te[0].t)],be=[ce,x.c2p(te[ee-1].t)];"h"===_.orientation&&(de.reverse(),be.reverse()),se=D?"M"+de+"L"+X.substr(1)+"L"+be:"M"+be+"L"+J.substr(1)+"L"+de}U.attr("d",se),K.posCenterPx=ce,K.posDensityScale=ne*T,K.path=U.node(),K.pathLength=K.path.getTotalLength()/(M?2:1)});var L,S,E,N=_.box,z=N.width,q=(N.line||{}).width;M?(L=T*z,S=0):D?(L=[0,T*z/2],S=q*{x:1,y:-1}[a.posLetter]):(L=[T*z/2,0],S=q*{x:-1,y:1}[a.posLetter]),y.plotBoxAndWhiskers(d,{pos:w,val:x},_,{bPos:c,bdPos:L,bPosPxOffset:S}),y.plotBoxMean(d,{pos:w,val:x},_,{bPos:c,bdPos:L,bPosPxOffset:S}),!_.box.visible&&_.meanline.visible&&(E=g.identity);var G=d.selectAll("path.meanline").data(E||[]);G.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),G.exit().remove(),G.each(function(K){var ne=x.c2p(K.mean,!0),X=r.getPositionOnKdePath(K,_,ne);p.select(this).attr("d","h"===_.orientation?"M"+ne+","+X[0]+"V"+X[1]:"M"+X[0]+","+ne+"H"+X[1])}),y.plotPoints(d,{x:i,y:f},_,a)}})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/color"),b=v("../scatter/style").stylePoints;ae.exports=function(y){var e=p.select(y).selectAll("g.trace.violins");e.style("opacity",function(r){return r[0].trace.opacity}),e.each(function(r){var t=r[0].trace,o=p.select(this),n=t.box||{},m=n.line||{},l=t.meanline||{},i=l.width;o.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(g.stroke,t.line.color).call(g.fill,t.fillcolor),o.selectAll("path.box").style("stroke-width",m.width+"px").call(g.stroke,m.color).call(g.fill,n.fillcolor);var f={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};o.selectAll("path.mean").style(f).call(g.stroke,l.color),o.selectAll("path.meanline").style(f).call(g.stroke,l.color),b(o,t,y)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(v,ae,ie){"use strict";var p=v("../../components/colorscale/attributes"),g=v("../isosurface/attributes"),b=v("../surface/attributes"),y=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat,r=v("../../plot_api/edit_types").overrideAll,t=ae.exports=r(e({x:g.x,y:g.y,z:g.z,value:g.value,isomin:g.isomin,isomax:g.isomax,surface:g.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:g.slices,caps:g.caps,text:g.text,hovertext:g.hovertext,xhoverformat:g.xhoverformat,yhoverformat:g.yhoverformat,zhoverformat:g.zhoverformat,valuehoverformat:g.valuehoverformat,hovertemplate:g.hovertemplate},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:g.colorbar,opacity:g.opacity,opacityscale:b.opacityscale,lightposition:g.lightposition,lighting:g.lighting,flatshading:g.flatshading,contour:g.contour,hoverinfo:e({},y.hoverinfo),showlegend:e({},y.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(v,ae,ie){"use strict";var p=v("../../../stackgl_modules").gl_mesh3d,g=v("../../lib/gl_format_color").parseColorScale,b=v("../../lib/str2rgbarray"),y=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),r=v("../isosurface/convert").findNearestOnAxis,t=v("../isosurface/convert").generateIsoMeshes;function o(m,l,i){this.scene=m,this.uid=i,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var n=o.prototype;n.handlePick=function(m){if(m.object===this.mesh){var l=m.data.index,f=this.data._meshY[l],u=this.data._meshZ[l],s=this.data._Ys.length,d=this.data._Zs.length,h=r(this.data._meshX[l],this.data._Xs).id,a=r(f,this.data._Ys).id,_=r(u,this.data._Zs).id,c=m.index=_+d*a+d*s*h;m.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[c]?m.textLabel=T[c]:T&&(m.textLabel=T),!0}},n.update=function(m){var l=this.scene,i=l.fullSceneLayout;function f(d,h,a,_){return h.map(function(c){return d.d2l(c,0,_)*a})}this.data=t(m);var u={positions:e(f(i.xaxis,m._meshX,l.dataScale[0],m.xcalendar),f(i.yaxis,m._meshY,l.dataScale[1],m.ycalendar),f(i.zaxis,m._meshZ,l.dataScale[2],m.zcalendar)),cells:e(m._meshI,m._meshJ,m._meshK),lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,opacityscale:m.opacityscale,contourEnable:m.contour.show,contourColor:b(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading},s=y(m);u.vertexIntensity=m._meshIntensity,u.vertexIntensityBounds=[s.min,s.max],u.colormap=g(m),this.mesh.update(u)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},ae.exports=function(m,l){var f=p({gl:m.glplot.gl}),u=new o(m,f,l.uid);return f._trace=u,u.update(l),m.glplot.add(f),u}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./attributes"),b=v("../isosurface/defaults").supplyIsoDefaults,y=v("../surface/defaults").opacityscaleDefaults;ae.exports=function(e,r,t,o){function n(m,l){return p.coerce(e,r,g,m,l)}b(e,r,t,o,n),y(e,r,o,n)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"volume",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(v,ae,ie){"use strict";var p=v("../bar/attributes"),g=v("../scatter/attributes").line,b=v("../../plots/attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/template_attributes").texttemplateAttrs,t=v("./constants"),o=v("../../lib/extend").extendFlat,n=v("../../components/color");function m(l){return{marker:{color:o({},p.marker.color,{arrayOk:!1,editType:"style"}),line:{color:o({},p.marker.line.color,{arrayOk:!1,editType:"style"}),width:o({},p.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ae.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:p.hovertext,hovertemplate:e({},{keys:t.eventDataKeys}),hoverinfo:o({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:t.eventDataKeys.concat(["label"])}),text:p.text,textposition:p.textposition,insidetextanchor:p.insidetextanchor,textangle:p.textangle,textfont:p.textfont,insidetextfont:p.insidetextfont,outsidetextfont:p.outsidetextfont,constraintext:p.constraintext,cliponaxis:p.cliponaxis,orientation:p.orientation,offset:p.offset,width:p.width,increasing:m(),decreasing:m(),totals:m(),connector:{line:{color:o({},g.color,{dflt:n.defaultLine}),width:o({},g.width,{editType:"plot"}),dash:g.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes"),g=v("../../plots/cartesian/align_period"),b=v("../../lib").mergeArray,y=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function r(o){return"a"===o||"absolute"===o}function t(o){return"t"===o||"total"===o}ae.exports=function(o,n){var m,l,i,f,u,s,d=p.getFromId(o,n.xaxis||"x"),h=p.getFromId(o,n.yaxis||"y");"h"===n.orientation?(m=d.makeCalcdata(n,"x"),i=h.makeCalcdata(n,"y"),f=g(n,h,"y",i),u=!!n.yperiodalignment,s="y"):(m=h.makeCalcdata(n,"y"),i=d.makeCalcdata(n,"x"),f=g(n,d,"x",i),u=!!n.xperiodalignment,s="x"),l=f.vals;for(var a,_=Math.min(l.length,m.length),c=new Array(_),T=0,x=!1,w=0;w<_;w++){var M=m[w]||0,D=!1;(m[w]!==e||t(n.measure[w])||r(n.measure[w]))&&w+1<_&&(m[w+1]!==e||t(n.measure[w+1])||r(n.measure[w+1]))&&(D=!0);var C=c[w]={i:w,p:l[w],s:M,rawS:M,cNext:D};r(n.measure[w])?(T=C.s,C.isSum=!0,C.dir="totals",C.s=T):t(n.measure[w])?(C.isSum=!0,C.dir="totals",C.s=T):(C.isSum=!1,C.dir=C.rawS<0?"decreasing":"increasing",C.s=T+(a=C.s),T+=a),"totals"===C.dir&&(x=!0),u&&(c[w].orig_p=i[w],c[w][s+"End"]=f.ends[w],c[w][s+"Start"]=f.starts[w]),n.ids&&(C.id=String(n.ids[w])),C.v=(n.base||0)+T}return c.length&&(c[0].hasTotals=x),b(n.text,c,"tx"),b(n.hovertext,c,"htx"),y(c,n),c}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(v,ae,ie){"use strict";ae.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(v,ae,ie){"use strict";var p=v("../bar/cross_trace_calc").setGroupPositions;ae.exports=function(g,b){var y,e,r=g._fullLayout,t=g._fullData,o=g.calcdata,n=b.xaxis,m=b.yaxis,l=[],i=[],f=[];for(e=0;e<t.length;e++){var u=t[e];!0===u.visible&&u.xaxis===n._id&&u.yaxis===m._id&&"waterfall"===u.type&&(y=o[e],"h"===u.orientation?f.push(y):i.push(y),l.push(y))}var s={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(p(g,n,m,i,s),p(g,m,n,f,s),e=0;e<l.length;e++){y=l[e];for(var d=0;d<y.length;d++){var h=y[d];!1===h.isSum&&(h.s0+=0===d?0:y[d-1].s),d+1<y.length&&(y[d].nextP0=y[d+1].p0,y[d].nextS0=y[d+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("../bar/defaults").handleGroupingDefaults,b=v("../bar/defaults").handleText,y=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),r=v("./attributes"),t=v("../../components/color"),o=v("../../constants/delta.js"),n=o.INCREASING.COLOR,m=o.DECREASING.COLOR;function l(i,f,u){i(f+".marker.color",u),i(f+".marker.line.color",t.defaultLine),i(f+".marker.line.width")}ae.exports={supplyDefaults:function(i,f,u,s){function d(a,_){return p.coerce(i,f,r,a,_)}if(y(i,f,s,d)){e(i,f,s,d),d("xhoverformat"),d("yhoverformat"),d("measure"),d("orientation",f.x&&!f.y?"h":"v"),d("base"),d("offset"),d("width"),d("text"),d("hovertext"),d("hovertemplate");var h=d("textposition");b(i,f,s,d,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==f.textposition&&(d("texttemplate"),f.texttemplate||d("textinfo")),l(d,"increasing",n),l(d,"decreasing",m),l(d,"totals","#4499FF"),d("connector.visible")&&(d("connector.mode"),d("connector.line.width")&&(d("connector.line.color"),d("connector.line.dash")))}else f.visible=!1},crossTraceDefaults:function(i,f){var u,s;function d(a){return p.coerce(s._input,s,r,a)}if("group"===f.waterfallmode)for(var h=0;h<i.length;h++)u=(s=i[h])._input,g(u,s,f,d)}}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(v,ae,ie){"use strict";ae.exports=function(p,g){return p.x="xVal"in g?g.xVal:g.x,p.y="yVal"in g?g.yVal:g.y,"initial"in g&&(p.initial=g.initial),"delta"in g&&(p.delta=g.delta),"final"in g&&(p.final=g.final),g.xa&&(p.xaxis=g.xa),g.ya&&(p.yaxis=g.ya),p}},{}],1121:[function(v,ae,ie){"use strict";var p=v("../../plots/cartesian/axes").hoverLabelText,g=v("../../components/color").opacity,b=v("../bar/hover").hoverOnBars,y=v("../../constants/delta.js"),e=y.INCREASING.SYMBOL,r=y.DECREASING.SYMBOL;ae.exports=function(t,o,n,m,l){var S,E,N,z,i=b(t,o,n,m,l);if(i){var f=i.cd,u=f[0].trace,s="h"===u.orientation,d=s?"x":"y",h=s?t.xa:t.ya,a=f[i.index],_=a.isSum?a.b+a.s:a.rawS;if(!a.isSum){i.initial=a.b+a.s-_,i.delta=_,i.final=i.initial+i.delta;var c=C(Math.abs(i.delta));i.deltaLabel=_<0?"("+c+")":c,i.finalLabel=C(i.final),i.initialLabel=C(i.initial)}var T=a.hi||u.hoverinfo,x=[];if(T&&"none"!==T&&"skip"!==T){var w="all"===T,M=T.split("+"),D=function(P){return w||-1!==M.indexOf(P)};a.isSum||(!D("final")||D(s?"x":"y")||x.push(i.finalLabel),D("delta")&&x.push(_<0?i.deltaLabel+" "+r:i.deltaLabel+" "+e),D("initial")&&x.push("Initial: "+i.initialLabel))}return x.length&&(i.extraText=x.join("<br>")),i.color=(N=(S=u[a.dir].marker).line.color,z=S.line.width,g(E=S.color)?E:g(N)&&z?N:void 0),[i]}function C(P){return p(h,P,u[d+"hoverformat"])}}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(v,ae,ie){"use strict";ae.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(v,ae,ie){"use strict";ae.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(v,ae,ie){"use strict";var p=v("../../lib"),g=v("./layout_attributes");ae.exports=function(b,y,e){var r=!1;function t(m,l){return p.coerce(b,y,g,m,l)}for(var o=0;o<e.length;o++){var n=e[o];if(n.visible&&"waterfall"===n.type){r=!0;break}}r&&(t("waterfallmode"),t("waterfallgap",.2),t("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../lib"),b=v("../../components/drawing"),y=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),r=v("../bar/uniform_text").clearMinTextSize;ae.exports=function(t,o,n,m){var i,f,d,h,l=t._fullLayout;r("waterfall",l),e.plot(t,o,n,m,{mode:l.waterfallmode,norm:l.waterfallmode,gap:l.waterfallgap,groupgap:l.waterfallgroupgap}),i=t,d=(f=o).xaxis,h=f.yaxis,g.makeTraceGroups(m,n,"trace bars").each(function(a){var _=p.select(this),c=a[0].trace,T=g.ensureSingle(_,"g","lines");if(c.connector&&c.connector.visible){var x="h"===c.orientation,w=c.connector.mode,M=T.selectAll("g.line").data(g.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var D=M.size();M.each(function(C,P){if(P===D-1||C.cNext){var L=(q=d,G=h,X=[],se=(K=x)?G:q,(ne=[])[0]=(J=K?q:G).c2p((z=C).s0,!0),X[0]=se.c2p(z.p0,!0),ne[1]=J.c2p(z.s1,!0),X[1]=se.c2p(z.p1,!0),ne[2]=J.c2p(z.nextS0,!0),X[2]=se.c2p(z.nextP0,!0),K?[ne,X]:[X,ne]),S=L[0],E=L[1],N="";S[0]!==y&&E[0]!==y&&S[1]!==y&&E[1]!==y&&("spanning"===w&&!C.isSum&&P>0&&(N+=x?"M"+S[0]+","+E[1]+"V"+E[0]:"M"+S[1]+","+E[0]+"H"+S[0]),"between"!==w&&(C.isSum||P<D-1)&&(N+=x?"M"+S[1]+","+E[0]+"V"+E[1]:"M"+S[0]+","+E[1]+"H"+S[1]),S[2]!==y&&E[2]!==y&&(N+=x?"M"+S[1]+","+E[1]+"V"+E[2]:"M"+S[1]+","+E[1]+"H"+S[2])),""===N&&(N="M0,0Z"),g.ensureSingle(p.select(this),"path").attr("d",N).call(b.setClipUrl,f.layerClipId,i)}var z,q,G,K,ne,X,J,se})}else T.remove()})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(v,ae,ie){"use strict";var p=v("@plotly/d3"),g=v("../../components/drawing"),b=v("../../components/color"),y=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),r=v("../bar/uniform_text").resizeText,t=e.styleTextPoints;ae.exports={style:function(o,n,m){var l=m||p.select(o).selectAll("g.waterfalllayer").selectAll("g.trace");r(o,l,"waterfall"),l.style("opacity",function(i){return i[0].trace.opacity}),l.each(function(i){var f=p.select(this),u=i[0].trace;f.selectAll(".point > path").each(function(s){if(!s.isBlank){var d=u[s.dir].marker;p.select(this).call(b.fill,d.color).call(b.stroke,d.line.color).call(g.dashLine,d.line.dash,d.line.width).style("opacity",u.selectedpoints&&!s.selected?y:1)}}),t(f,u,o),f.selectAll(".lines").each(function(){var s=u.connector.line;g.lineGroupStyle(p.select(this).selectAll("path"),s.width,s.color,s.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(v,ae,ie){"use strict";var p=v("../plots/cartesian/axes"),g=v("../lib"),b=v("../plot_api/plot_schema"),y=v("./helpers").pointsAccessorFunction,e=v("../constants/numerical").BADNUM;ie.moduleType="transform",ie.name="aggregate";var r=ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},t=r.aggregations;function o(i,f,u,s){if(s.enabled){for(var d=s.target,h=g.nestedProperty(f,d),a=h.get(),_=function(x,w){var D=w.d2c,C=w.c2d;switch(x.func){case"count":return n;case"first":return m;case"last":return l;case"sum":return function(P,L){for(var S=0,E=0;E<L.length;E++){var N=D(P[L[E]]);N!==e&&(S+=N)}return C(S)};case"avg":return function(P,L){for(var S=0,E=0,N=0;N<L.length;N++){var z=D(P[L[N]]);z!==e&&(S+=z,E++)}return E?C(S/E):e};case"min":return function(P,L){for(var S=1/0,E=0;E<L.length;E++){var N=D(P[L[E]]);N!==e&&(S=Math.min(S,N))}return S===1/0?e:C(S)};case"max":return function(P,L){for(var S=-1/0,E=0;E<L.length;E++){var N=D(P[L[E]]);N!==e&&(S=Math.max(S,N))}return S===-1/0?e:C(S)};case"range":return function(P,L){for(var S=1/0,E=-1/0,N=0;N<L.length;N++){var z=D(P[L[N]]);z!==e&&(S=Math.min(S,z),E=Math.max(E,z))}return E===-1/0||S===1/0?e:C(E-S)};case"change":return function(P,L){var S=D(P[L[0]]),E=D(P[L[L.length-1]]);return S===e||E===e?e:C(E-S)};case"median":return function(P,L){for(var S=[],E=0;E<L.length;E++){var N=D(P[L[E]]);N!==e&&S.push(N)}if(!S.length)return e;S.sort(g.sorterAsc);var z=(S.length-1)/2;return C((S[Math.floor(z)]+S[Math.ceil(z)])/2)};case"mode":return function(P,L){for(var S={},E=0,N=e,z=0;z<L.length;z++){var q=D(P[L[z]]);if(q!==e){var G=S[q]=(S[q]||0)+1;G>E&&(E=G,N=q)}}return E?C(N):e};case"rms":return function(P,L){for(var S=0,E=0,N=0;N<L.length;N++){var z=D(P[L[N]]);z!==e&&(S+=z*z,E++)}return E?C(Math.sqrt(S/E)):e};case"stddev":return function(P,L){var S,E=0,N=0,z=1,q=e;for(S=0;S<L.length&&q===e;S++)q=D(P[L[S]]);if(q===e)return e;for(;S<L.length;S++){var G=D(P[L[S]]);if(G!==e){var K=G-q;E+=K,N+=K*K,z++}}var ne="sample"===x.funcmode?z-1:z;return ne?Math.sqrt((N-E*E/z)/ne):0}}}(s,p.getDataConversions(i,f,d,a)),c=new Array(u.length),T=0;T<u.length;T++)c[T]=_(a,u[T]);h.set(c),"count"===s.func&&g.pushUnique(f._arrayAttrs,d)}}function n(i,f){return f.length}function m(i,f){return i[f[0]]}function l(i,f){return i[f[f.length-1]]}ie.supplyDefaults=function(i,f){var u,s={};function d(C,P){return g.coerce(i,s,r,C,P)}if(!d("enabled"))return s;var h=b.findArrayAttributes(f),a={};for(u=0;u<h.length;u++)a[h[u]]=1;var _=d("groups");if(!Array.isArray(_)){if(!a[_])return s.enabled=!1,s;a[_]=0}var c,T=i.aggregations||[],x=s.aggregations=new Array(T.length);function w(C,P){return g.coerce(T[u],c,t,C,P)}for(u=0;u<T.length;u++){c={_index:u};var M=w("target"),D=w("func");w("enabled")&&M&&(a[M]||"count"===D&&void 0===a[M])?("stddev"===D&&w("funcmode"),a[M]=0,x[u]=c):x[u]={enabled:!1,_index:u}}for(u=0;u<h.length;u++)a[h[u]]&&x.push({target:h[u],func:t.func.dflt,enabled:!0,_index:-1});return s},ie.calcTransform=function(i,f,u){if(u.enabled){var s=u.groups,d=g.getTargetArray(f,{target:s});if(d){var h,a,_,T={},x={},w=[],M=y(f.transforms,u),D=d.length;for(f._length&&(D=Math.min(D,f._length)),h=0;h<D;h++)void 0===(_=T[a=d[h]])?(T[a]=w.length,w.push([h]),x[T[a]]=M(h)):(w[_].push(h),x[T[a]]=(x[T[a]]||[]).concat(M(h)));u._indexToPoints=x;var C=u.aggregations;for(h=0;h<C.length;h++)o(i,f,w,C[h]);"string"==typeof s&&o(i,f,w,{target:s,func:"first",enabled:!0}),f._length=w.length}}}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../registry"),b=v("../plots/cartesian/axes"),y=v("./helpers").pointsAccessorFunction,e=v("../constants/filter_ops"),r=e.COMPARISON_OPS,t=e.INTERVAL_OPS,o=e.SET_OPS;ie.moduleType="transform",ie.name="filter",ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(r).concat(t).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ie.supplyDefaults=function(n){var m={};function l(u,s){return p.coerce(n,m,ie.attributes,u,s)}if(l("enabled")){var i=l("target");if(p.isArrayOrTypedArray(i)&&0===i.length)return m.enabled=!1,m;l("preservegaps"),l("operation"),l("value");var f=g.getComponentMethod("calendars","handleDefaults");f(n,m,"valuecalendar",null),f(n,m,"targetcalendar",null)}return m},ie.calcTransform=function(n,m,l){if(l.enabled){var i=p.getTargetArray(m,l);if(i){var f=l.target,u=i.length;m._length&&(u=Math.min(u,m._length));var s=l.targetcalendar,d=m._arrayAttrs,h=l.preservegaps;if("string"==typeof f){var a=p.nestedProperty(m,f+"calendar").get();a&&(s=a)}var _,c,T=function(L,S,E){var N=L.operation,z=L.value,q=Array.isArray(z);function G(J){return-1!==J.indexOf(N)}var K,ne=function(J){return S(J,0,L.valuecalendar)},X=function(J){return S(J,0,E)};switch(G(r)?K=ne(q?z[0]:z):G(t)?K=q?[ne(z[0]),ne(z[1])]:[ne(z),ne(z)]:G(o)&&(K=q?z.map(ne):[ne(z)]),N){case"=":return function(J){return X(J)===K};case"!=":return function(J){return X(J)!==K};case"<":return function(J){return X(J)<K};case"<=":return function(J){return X(J)<=K};case">":return function(J){return X(J)>K};case">=":return function(J){return X(J)>=K};case"[]":return function(J){var se=X(J);return se>=K[0]&&se<=K[1]};case"()":return function(J){var se=X(J);return se>K[0]&&se<K[1]};case"[)":return function(J){var se=X(J);return se>=K[0]&&se<K[1]};case"(]":return function(J){var se=X(J);return se>K[0]&&se<=K[1]};case"][":return function(J){var se=X(J);return se<=K[0]||se>=K[1]};case")(":return function(J){var se=X(J);return se<K[0]||se>K[1]};case"](":return function(J){var se=X(J);return se<=K[0]||se>K[1]};case")[":return function(J){var se=X(J);return se<K[0]||se>=K[1]};case"{}":return function(J){return-1!==K.indexOf(X(J))};case"}{":return function(J){return-1===K.indexOf(X(J))}}}(l,b.getDataToCoordFunc(n,m,f,i),s),x={},w={},M=0;h?(_=function(L){x[L.astr]=p.extendDeep([],L.get()),L.set(new Array(u))},c=function(L,S){var E=x[L.astr][S];L.get()[S]=E}):(_=function(L){x[L.astr]=p.extendDeep([],L.get()),L.set([])},c=function(L,S){var E=x[L.astr][S];L.get().push(E)}),P(_);for(var D=y(m.transforms,l),C=0;C<u;C++)T(i[C])?(P(c,C),w[M++]=D(C)):h&&M++;l._indexToPoints=w,m._length=M}}function P(L,S){for(var E=0;E<d.length;E++)L(p.nestedProperty(m,d[E]),S)}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plot_api/plot_schema"),b=v("../plots/plots"),y=v("./helpers").pointsAccessorFunction;function e(r,t){var o,n,m,l,i,f,u,s,d,h,a=t.transform,_=t.transformIndex,c=r.transforms[_].groups,T=y(r.transforms,a);if(!p.isArrayOrTypedArray(c)||0===c.length)return[r];var x=p.filterUnique(c),w=new Array(x.length),M=c.length,D=g.findArrayAttributes(r),C=a.styles||[],P={};for(o=0;o<C.length;o++)P[C[o].target]=C[o].value;a.styles&&(h=p.keyedContainer(a,"styles","target","value.name"));var L={},S={};for(o=0;o<x.length;o++){L[f=x[o]]=o,S[f]=0,(u=w[o]=p.extendDeepNoArrays({},r))._group=f,u.transforms[_]._indexToPoints={};var E=null;for(h&&(E=h.get(f)),u.name=E||""===E?E:p.templateString(a.nameformat,{trace:r.name,group:f}),s=u.transforms,u.transforms=[],n=0;n<s.length;n++)u.transforms[n]=p.extendDeepNoArrays({},s[n]);for(n=0;n<D.length;n++)p.nestedProperty(u,D[n]).set([])}for(m=0;m<D.length;m++){for(l=D[m],n=0,d=[];n<x.length;n++)d[n]=p.nestedProperty(w[n],l).get();for(i=p.nestedProperty(r,l).get(),n=0;n<M;n++)d[L[c[n]]].push(i[n])}for(n=0;n<M;n++)(u=w[L[c[n]]]).transforms[_]._indexToPoints[S[c[n]]]=T(n),S[c[n]]++;for(o=0;o<x.length;o++)f=x[o],b.clearExpandedTraceDefaultColors(u=w[o]),u=p.extendDeepNoArrays(u,P[f]||{});return w}ie.moduleType="transform",ie.name="groupby",ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ie.supplyDefaults=function(r,t,o){var n,m={};function l(d,h){return p.coerce(r,m,ie.attributes,d,h)}if(!l("enabled"))return m;l("groups"),l("nameformat",o._dataLength>1?"%{group} (%{trace})":"%{group}");var i=r.styles,f=m.styles=[];if(i)for(n=0;n<i.length;n++){var u=f[n]={};p.coerce(i[n],f[n],ie.attributes.styles,"target");var s=p.coerce(i[n],f[n],ie.attributes.styles,"value");p.isPlainObject(s)?u.value=p.extendDeep({},s):s&&delete u.value}return m},ie.transform=function(r,t){var o,n,m,l=[];for(n=0;n<r.length;n++)for(o=e(r[n],t),m=0;m<o.length;m++)l.push(o[m]);return l}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(v,ae,ie){"use strict";ie.pointsAccessorFunction=function(p,g){for(var b,y,e=0;e<p.length&&(b=p[e])!==g;e++)b._indexToPoints&&!1!==b.enabled&&(y=b._indexToPoints);return y?function(r){return y[r]}:function(r){return[r]}}},{}],1131:[function(v,ae,ie){"use strict";var p=v("../lib"),g=v("../plots/cartesian/axes"),b=v("./helpers").pointsAccessorFunction,y=v("../constants/numerical").BADNUM;ie.moduleType="transform",ie.name="sort",ie.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ie.supplyDefaults=function(e){var r={};function t(o,n){return p.coerce(e,r,ie.attributes,o,n)}return t("enabled")&&(t("target"),t("order")),r},ie.calcTransform=function(e,r,t){if(t.enabled){var o=p.getTargetArray(r,t);if(o){var n=t.target,m=o.length;r._length&&(m=Math.min(m,r._length));var l,i,f=r._arrayAttrs,u=function(c,T,x,w){var M,D=new Array(w),C=new Array(w);for(M=0;M<w;M++)D[M]={v:T[M],i:M};for(D.sort(function(P,L){switch(P.order){case"ascending":return function(S,E){var N=L(S.v),z=L(E.v);return N===y?1:z===y?-1:N-z};case"descending":return function(S,E){var N=L(S.v),z=L(E.v);return N===y?1:z===y?-1:z-N}}}(c,x)),M=0;M<w;M++)C[M]=D[M].i;return C}(t,o,g.getDataToCoordFunc(e,r,n,o),m),s=b(r.transforms,t),d={};for(l=0;l<f.length;l++){var h=p.nestedProperty(r,f[l]),a=h.get(),_=new Array(m);for(i=0;i<m;i++)_[i]=a[u[i]];h.set(_)}for(i=0;i<m;i++)d[i]=s(u[i]);t._indexToPoints=d,r._length=m}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(v,ae,ie){"use strict";ie.version="2.14.0"},{}],1133:[function(v,ae,ie){(function(p){(function(){!function(g){"object"==typeof ie&&void 0!==ae?ae.exports=g():(typeof window<"u"?window:void 0!==p?p:typeof self<"u"?self:this).stackgl=g()}(function(){return function g(b,y,e){function r(n,m){if(!y[n]){if(!b[n]){var l="function"==typeof v&&v;if(!m&&l)return l(n,!0);if(t)return t(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var f=y[n]={exports:{}};b[n][0].call(f.exports,function(u){return r(b[n][1][u]||u)},f,f.exports,g,b,y,e)}return y[n].exports}for(var t="function"==typeof v&&v,o=0;o<e.length;o++)r(e[o]);return r}({1:[function(g,b,y){"use strict";y.byteLength=function(f){var u=l(f),d=u[1];return 3*(u[0]+d)/4-d},y.toByteArray=function(f){var u,s,M,d=l(f),h=d[0],a=d[1],_=new t(3*(h+(M=a))/4-M),c=0,T=a>0?h-4:h;for(s=0;s<T;s+=4)u=r[f.charCodeAt(s)]<<18|r[f.charCodeAt(s+1)]<<12|r[f.charCodeAt(s+2)]<<6|r[f.charCodeAt(s+3)],_[c++]=u>>16&255,_[c++]=u>>8&255,_[c++]=255&u;return 2===a&&(u=r[f.charCodeAt(s)]<<2|r[f.charCodeAt(s+1)]>>4,_[c++]=255&u),1===a&&(u=r[f.charCodeAt(s)]<<10|r[f.charCodeAt(s+1)]<<4|r[f.charCodeAt(s+2)]>>2,_[c++]=u>>8&255,_[c++]=255&u),_},y.fromByteArray=function(f){for(var u,s=f.length,d=s%3,h=[],a=0,_=s-d;a<_;a+=16383)h.push(i(f,a,a+16383>_?_:a+16383));return 1===d?h.push(e[(u=f[s-1])>>2]+e[u<<4&63]+"=="):2===d&&h.push(e[(u=(f[s-2]<<8)+f[s-1])>>10]+e[u>>4&63]+e[u<<2&63]+"="),h.join("")};for(var e=[],r=[],t=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,m=o.length;n<m;++n)e[n]=o[n],r[o.charCodeAt(n)]=n;function l(f){var u=f.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=f.indexOf("=");return-1===s&&(s=u),[s,s===u?0:4-s%4]}function i(f,u,s){for(var h,a=[],_=u;_<s;_+=3)a.push(e[(h=(f[_]<<16&16711680)+(f[_+1]<<8&65280)+(255&f[_+2]))>>18&63]+e[h>>12&63]+e[h>>6&63]+e[63&h]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(g,b,y){},{}],3:[function(g,b,y){(function(e){(function(){"use strict";var r=g("base64-js"),t=g("ieee754");function o(U){if(U>2147483647)throw new RangeError('The value "'+U+'" is invalid for option "size"');var te=new Uint8Array(U);return te.__proto__=n.prototype,te}function n(U,te,ee){if("number"==typeof U){if("string"==typeof te)throw new TypeError('The "string" argument must be of type string. Received type number');return i(U)}return m(U,te,ee)}function m(U,te,ee){if("string"==typeof U)return function(pe,de){if("string"==typeof de&&""!==de||(de="utf8"),!n.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var be=0|s(pe,de),he=o(be),xe=he.write(pe,de);return xe!==be&&(he=he.slice(0,xe)),he}(U,te);if(ArrayBuffer.isView(U))return f(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(H(U,ArrayBuffer)||U&&H(U.buffer,ArrayBuffer))return function(pe,de,be){if(de<0||pe.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<de+(be||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===de&&void 0===be?new Uint8Array(pe):void 0===be?new Uint8Array(pe,de):new Uint8Array(pe,de,be)).__proto__=n.prototype,he}(U,te,ee);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var le=U.valueOf&&U.valueOf();if(null!=le&&le!==U)return n.from(le,te,ee);var ce=function(pe){if(n.isBuffer(pe)){var de=0|u(pe.length),be=o(de);return 0===be.length||pe.copy(be,0,0,de),be}return void 0!==pe.length?"number"!=typeof pe.length||oe(pe.length)?o(0):f(pe):"Buffer"===pe.type&&Array.isArray(pe.data)?f(pe.data):void 0}(U);if(ce)return ce;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return n.from(U[Symbol.toPrimitive]("string"),te,ee);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function l(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function i(U){return l(U),o(U<0?0:0|u(U))}function f(U){for(var te=U.length<0?0:0|u(U.length),ee=o(te),le=0;le<te;le+=1)ee[le]=255&U[le];return ee}function u(U){if(U>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|U}function s(U,te){if(n.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||H(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var ee=U.length,le=arguments.length>2&&!0===arguments[2];if(!le&&0===ee)return 0;for(var ce=!1;;)switch(te){case"ascii":case"latin1":case"binary":return ee;case"utf8":case"utf-8":return se(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ee;case"hex":return ee>>>1;case"base64":return V(U).length;default:if(ce)return le?-1:se(U).length;te=(""+te).toLowerCase(),ce=!0}}function d(U,te,ee){var le=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ee||ee>this.length)&&(ee=this.length),ee<=0)||(ee>>>=0)<=(te>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return E(this,te,ee);case"utf8":case"utf-8":return P(this,te,ee);case"ascii":return L(this,te,ee);case"latin1":case"binary":return S(this,te,ee);case"base64":return C(this,te,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,te,ee);default:if(le)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),le=!0}}function h(U,te,ee){var le=U[te];U[te]=U[ee],U[ee]=le}function a(U,te,ee,le,ce){if(0===U.length)return-1;if("string"==typeof ee?(le=ee,ee=0):ee>2147483647?ee=2147483647:ee<-2147483648&&(ee=-2147483648),oe(ee=+ee)&&(ee=ce?0:U.length-1),ee<0&&(ee=U.length+ee),ee>=U.length){if(ce)return-1;ee=U.length-1}else if(ee<0){if(!ce)return-1;ee=0}if("string"==typeof te&&(te=n.from(te,le)),n.isBuffer(te))return 0===te.length?-1:_(U,te,ee,le,ce);if("number"==typeof te)return te&=255,"function"==typeof Uint8Array.prototype.indexOf?ce?Uint8Array.prototype.indexOf.call(U,te,ee):Uint8Array.prototype.lastIndexOf.call(U,te,ee):_(U,[te],ee,le,ce);throw new TypeError("val must be string, number or Buffer")}function _(U,te,ee,le,ce){var pe,de=1,be=U.length,he=te.length;if(void 0!==le&&("ucs2"===(le=String(le).toLowerCase())||"ucs-2"===le||"utf16le"===le||"utf-16le"===le)){if(U.length<2||te.length<2)return-1;de=2,be/=2,he/=2,ee/=2}function xe(Fe,ve){return 1===de?Fe[ve]:Fe.readUInt16BE(ve*de)}if(ce){var De=-1;for(pe=ee;pe<be;pe++)if(xe(U,pe)===xe(te,-1===De?0:pe-De)){if(-1===De&&(De=pe),pe-De+1===he)return De*de}else-1!==De&&(pe-=pe-De),De=-1}else for(ee+he>be&&(ee=be-he),pe=ee;pe>=0;pe--){for(var Se=!0,ke=0;ke<he;ke++)if(xe(U,pe+ke)!==xe(te,ke)){Se=!1;break}if(Se)return pe}return-1}function c(U,te,ee,le){ee=Number(ee)||0;var ce=U.length-ee;le?(le=Number(le))>ce&&(le=ce):le=ce;var pe=te.length;le>pe/2&&(le=pe/2);for(var de=0;de<le;++de){var be=parseInt(te.substr(2*de,2),16);if(oe(be))return de;U[ee+de]=be}return de}function T(U,te,ee,le){return j(se(te,U.length-ee),U,ee,le)}function x(U,te,ee,le){return j(function(ce){for(var pe=[],de=0;de<ce.length;++de)pe.push(255&ce.charCodeAt(de));return pe}(te),U,ee,le)}function w(U,te,ee,le){return x(U,te,ee,le)}function M(U,te,ee,le){return j(V(te),U,ee,le)}function D(U,te,ee,le){return j(function(ce,pe){for(var de,be,xe=[],De=0;De<ce.length&&!((pe-=2)<0);++De)be=(de=ce.charCodeAt(De))>>8,xe.push(de%256),xe.push(be);return xe}(te,U.length-ee),U,ee,le)}function C(U,te,ee){return r.fromByteArray(0===te&&ee===U.length?U:U.slice(te,ee))}function P(U,te,ee){ee=Math.min(U.length,ee);for(var le=[],ce=te;ce<ee;){var pe,de,be,he,xe=U[ce],De=null,Se=xe>239?4:xe>223?3:xe>191?2:1;if(ce+Se<=ee)switch(Se){case 1:xe<128&&(De=xe);break;case 2:128==(192&(pe=U[ce+1]))&&(he=(31&xe)<<6|63&pe)>127&&(De=he);break;case 3:de=U[ce+2],128==(192&(pe=U[ce+1]))&&128==(192&de)&&(he=(15&xe)<<12|(63&pe)<<6|63&de)>2047&&(he<55296||he>57343)&&(De=he);break;case 4:de=U[ce+2],be=U[ce+3],128==(192&(pe=U[ce+1]))&&128==(192&de)&&128==(192&be)&&(he=(15&xe)<<18|(63&pe)<<12|(63&de)<<6|63&be)>65535&&he<1114112&&(De=he)}null===De?(De=65533,Se=1):De>65535&&(le.push((De-=65536)>>>10&1023|55296),De=56320|1023&De),le.push(De),ce+=Se}return function(ke){var Fe=ke.length;if(Fe<=4096)return String.fromCharCode.apply(String,ke);for(var ve="",Te=0;Te<Fe;)ve+=String.fromCharCode.apply(String,ke.slice(Te,Te+=4096));return ve}(le)}function L(U,te,ee){var le="";ee=Math.min(U.length,ee);for(var ce=te;ce<ee;++ce)le+=String.fromCharCode(127&U[ce]);return le}function S(U,te,ee){var le="";ee=Math.min(U.length,ee);for(var ce=te;ce<ee;++ce)le+=String.fromCharCode(U[ce]);return le}function E(U,te,ee){var le=U.length;(!te||te<0)&&(te=0),(!ee||ee<0||ee>le)&&(ee=le);for(var ce="",pe=te;pe<ee;++pe)ce+=J(U[pe]);return ce}function N(U,te,ee){for(var le=U.slice(te,ee),ce="",pe=0;pe<le.length;pe+=2)ce+=String.fromCharCode(le[pe]+256*le[pe+1]);return ce}function z(U,te,ee){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+te>ee)throw new RangeError("Trying to access beyond buffer length")}function q(U,te,ee,le,ce,pe){if(!n.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ce||te<pe)throw new RangeError('"value" argument is out of bounds');if(ee+le>U.length)throw new RangeError("Index out of range")}function G(U,te,ee,le,ce,pe){if(ee+le>U.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("Index out of range")}function K(U,te,ee,le,ce){return te=+te,ee>>>=0,ce||G(U,0,ee,4),t.write(U,te,ee,le,23,4),ee+4}function ne(U,te,ee,le,ce){return te=+te,ee>>>=0,ce||G(U,0,ee,8),t.write(U,te,ee,le,52,8),ee+8}y.Buffer=n,y.SlowBuffer=function(U){return+U!=U&&(U=0),n.alloc(+U)},y.INSPECT_MAX_BYTES=50,y.kMaxLength=2147483647,(n.TYPED_ARRAY_SUPPORT=function(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(U,te,ee){return m(U,te,ee)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(U,te,ee){return ce=te,pe=ee,l(le=U),le<=0?o(le):void 0!==ce?"string"==typeof pe?o(le).fill(ce,pe):o(le).fill(ce):o(le);var le,ce,pe},n.allocUnsafe=function(U){return i(U)},n.allocUnsafeSlow=function(U){return i(U)},n.isBuffer=function(U){return null!=U&&!0===U._isBuffer&&U!==n.prototype},n.compare=function(U,te){if(H(U,Uint8Array)&&(U=n.from(U,U.offset,U.byteLength)),H(te,Uint8Array)&&(te=n.from(te,te.offset,te.byteLength)),!n.isBuffer(U)||!n.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===te)return 0;for(var ee=U.length,le=te.length,ce=0,pe=Math.min(ee,le);ce<pe;++ce)if(U[ce]!==te[ce]){ee=U[ce],le=te[ce];break}return ee<le?-1:le<ee?1:0},n.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(U,te){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(0===U.length)return n.alloc(0);var ee;if(void 0===te)for(te=0,ee=0;ee<U.length;++ee)te+=U[ee].length;var le=n.allocUnsafe(te),ce=0;for(ee=0;ee<U.length;++ee){var pe=U[ee];if(H(pe,Uint8Array)&&(pe=n.from(pe)),!n.isBuffer(pe))throw new TypeError('"list" argument must be an Array of Buffers');pe.copy(le,ce),ce+=pe.length}return le},n.byteLength=s,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var U=this.length;if(U%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<U;te+=2)h(this,te,te+1);return this},n.prototype.swap32=function(){var U=this.length;if(U%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<U;te+=4)h(this,te,te+3),h(this,te+1,te+2);return this},n.prototype.swap64=function(){var U=this.length;if(U%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<U;te+=8)h(this,te,te+7),h(this,te+1,te+6),h(this,te+2,te+5),h(this,te+3,te+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var U=this.length;return 0===U?"":0===arguments.length?P(this,0,U):d.apply(this,arguments)},n.prototype.equals=function(U){if(!n.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U||0===n.compare(this,U)},n.prototype.inspect=function(){var U="",te=y.INSPECT_MAX_BYTES;return U=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(U+=" ... "),"<Buffer "+U+">"},n.prototype.compare=function(U,te,ee,le,ce){if(H(U,Uint8Array)&&(U=n.from(U,U.offset,U.byteLength)),!n.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(void 0===te&&(te=0),void 0===ee&&(ee=U?U.length:0),void 0===le&&(le=0),void 0===ce&&(ce=this.length),te<0||ee>U.length||le<0||ce>this.length)throw new RangeError("out of range index");if(le>=ce&&te>=ee)return 0;if(le>=ce)return-1;if(te>=ee)return 1;if(this===U)return 0;for(var pe=(ce>>>=0)-(le>>>=0),de=(ee>>>=0)-(te>>>=0),be=Math.min(pe,de),he=this.slice(le,ce),xe=U.slice(te,ee),De=0;De<be;++De)if(he[De]!==xe[De]){pe=he[De],de=xe[De];break}return pe<de?-1:de<pe?1:0},n.prototype.includes=function(U,te,ee){return-1!==this.indexOf(U,te,ee)},n.prototype.indexOf=function(U,te,ee){return a(this,U,te,ee,!0)},n.prototype.lastIndexOf=function(U,te,ee){return a(this,U,te,ee,!1)},n.prototype.write=function(U,te,ee,le){if(void 0===te)le="utf8",ee=this.length,te=0;else if(void 0===ee&&"string"==typeof te)le=te,ee=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(ee)?(ee>>>=0,void 0===le&&(le="utf8")):(le=ee,ee=void 0)}var ce=this.length-te;if((void 0===ee||ee>ce)&&(ee=ce),U.length>0&&(ee<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");for(var pe=!1;;)switch(le){case"hex":return c(this,U,te,ee);case"utf8":case"utf-8":return T(this,U,te,ee);case"ascii":return x(this,U,te,ee);case"latin1":case"binary":return w(this,U,te,ee);case"base64":return M(this,U,te,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,U,te,ee);default:if(pe)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),pe=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(U,te){var ee=this.length;(U=~~U)<0?(U+=ee)<0&&(U=0):U>ee&&(U=ee),(te=void 0===te?ee:~~te)<0?(te+=ee)<0&&(te=0):te>ee&&(te=ee),te<U&&(te=U);var le=this.subarray(U,te);return le.__proto__=n.prototype,le},n.prototype.readUIntLE=function(U,te,ee){U>>>=0,te>>>=0,ee||z(U,te,this.length);for(var le=this[U],ce=1,pe=0;++pe<te&&(ce*=256);)le+=this[U+pe]*ce;return le},n.prototype.readUIntBE=function(U,te,ee){U>>>=0,te>>>=0,ee||z(U,te,this.length);for(var le=this[U+--te],ce=1;te>0&&(ce*=256);)le+=this[U+--te]*ce;return le},n.prototype.readUInt8=function(U,te){return U>>>=0,te||z(U,1,this.length),this[U]},n.prototype.readUInt16LE=function(U,te){return U>>>=0,te||z(U,2,this.length),this[U]|this[U+1]<<8},n.prototype.readUInt16BE=function(U,te){return U>>>=0,te||z(U,2,this.length),this[U]<<8|this[U+1]},n.prototype.readUInt32LE=function(U,te){return U>>>=0,te||z(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+16777216*this[U+3]},n.prototype.readUInt32BE=function(U,te){return U>>>=0,te||z(U,4,this.length),16777216*this[U]+(this[U+1]<<16|this[U+2]<<8|this[U+3])},n.prototype.readIntLE=function(U,te,ee){U>>>=0,te>>>=0,ee||z(U,te,this.length);for(var le=this[U],ce=1,pe=0;++pe<te&&(ce*=256);)le+=this[U+pe]*ce;return le>=(ce*=128)&&(le-=Math.pow(2,8*te)),le},n.prototype.readIntBE=function(U,te,ee){U>>>=0,te>>>=0,ee||z(U,te,this.length);for(var le=te,ce=1,pe=this[U+--le];le>0&&(ce*=256);)pe+=this[U+--le]*ce;return pe>=(ce*=128)&&(pe-=Math.pow(2,8*te)),pe},n.prototype.readInt8=function(U,te){return U>>>=0,te||z(U,1,this.length),128&this[U]?-1*(255-this[U]+1):this[U]},n.prototype.readInt16LE=function(U,te){U>>>=0,te||z(U,2,this.length);var ee=this[U]|this[U+1]<<8;return 32768&ee?4294901760|ee:ee},n.prototype.readInt16BE=function(U,te){U>>>=0,te||z(U,2,this.length);var ee=this[U+1]|this[U]<<8;return 32768&ee?4294901760|ee:ee},n.prototype.readInt32LE=function(U,te){return U>>>=0,te||z(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},n.prototype.readInt32BE=function(U,te){return U>>>=0,te||z(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},n.prototype.readFloatLE=function(U,te){return U>>>=0,te||z(U,4,this.length),t.read(this,U,!0,23,4)},n.prototype.readFloatBE=function(U,te){return U>>>=0,te||z(U,4,this.length),t.read(this,U,!1,23,4)},n.prototype.readDoubleLE=function(U,te){return U>>>=0,te||z(U,8,this.length),t.read(this,U,!0,52,8)},n.prototype.readDoubleBE=function(U,te){return U>>>=0,te||z(U,8,this.length),t.read(this,U,!1,52,8)},n.prototype.writeUIntLE=function(U,te,ee,le){U=+U,te>>>=0,ee>>>=0,le||q(this,U,te,ee,Math.pow(2,8*ee)-1,0);var ce=1,pe=0;for(this[te]=255&U;++pe<ee&&(ce*=256);)this[te+pe]=U/ce&255;return te+ee},n.prototype.writeUIntBE=function(U,te,ee,le){U=+U,te>>>=0,ee>>>=0,le||q(this,U,te,ee,Math.pow(2,8*ee)-1,0);var ce=ee-1,pe=1;for(this[te+ce]=255&U;--ce>=0&&(pe*=256);)this[te+ce]=U/pe&255;return te+ee},n.prototype.writeUInt8=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,1,255,0),this[te]=255&U,te+1},n.prototype.writeUInt16LE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,2,65535,0),this[te]=255&U,this[te+1]=U>>>8,te+2},n.prototype.writeUInt16BE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,2,65535,0),this[te]=U>>>8,this[te+1]=255&U,te+2},n.prototype.writeUInt32LE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,4,4294967295,0),this[te+3]=U>>>24,this[te+2]=U>>>16,this[te+1]=U>>>8,this[te]=255&U,te+4},n.prototype.writeUInt32BE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,4,4294967295,0),this[te]=U>>>24,this[te+1]=U>>>16,this[te+2]=U>>>8,this[te+3]=255&U,te+4},n.prototype.writeIntLE=function(U,te,ee,le){if(U=+U,te>>>=0,!le){var ce=Math.pow(2,8*ee-1);q(this,U,te,ee,ce-1,-ce)}var pe=0,de=1,be=0;for(this[te]=255&U;++pe<ee&&(de*=256);)U<0&&0===be&&0!==this[te+pe-1]&&(be=1),this[te+pe]=(U/de>>0)-be&255;return te+ee},n.prototype.writeIntBE=function(U,te,ee,le){if(U=+U,te>>>=0,!le){var ce=Math.pow(2,8*ee-1);q(this,U,te,ee,ce-1,-ce)}var pe=ee-1,de=1,be=0;for(this[te+pe]=255&U;--pe>=0&&(de*=256);)U<0&&0===be&&0!==this[te+pe+1]&&(be=1),this[te+pe]=(U/de>>0)-be&255;return te+ee},n.prototype.writeInt8=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,1,127,-128),U<0&&(U=255+U+1),this[te]=255&U,te+1},n.prototype.writeInt16LE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,2,32767,-32768),this[te]=255&U,this[te+1]=U>>>8,te+2},n.prototype.writeInt16BE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,2,32767,-32768),this[te]=U>>>8,this[te+1]=255&U,te+2},n.prototype.writeInt32LE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,4,2147483647,-2147483648),this[te]=255&U,this[te+1]=U>>>8,this[te+2]=U>>>16,this[te+3]=U>>>24,te+4},n.prototype.writeInt32BE=function(U,te,ee){return U=+U,te>>>=0,ee||q(this,U,te,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[te]=U>>>24,this[te+1]=U>>>16,this[te+2]=U>>>8,this[te+3]=255&U,te+4},n.prototype.writeFloatLE=function(U,te,ee){return K(this,U,te,!0,ee)},n.prototype.writeFloatBE=function(U,te,ee){return K(this,U,te,!1,ee)},n.prototype.writeDoubleLE=function(U,te,ee){return ne(this,U,te,!0,ee)},n.prototype.writeDoubleBE=function(U,te,ee){return ne(this,U,te,!1,ee)},n.prototype.copy=function(U,te,ee,le){if(!n.isBuffer(U))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),le||0===le||(le=this.length),te>=U.length&&(te=U.length),te||(te=0),le>0&&le<ee&&(le=ee),le===ee||0===U.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),U.length-te<le-ee&&(le=U.length-te+ee);var ce=le-ee;if(this===U&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(te,ee,le);else if(this===U&&ee<te&&te<le)for(var pe=ce-1;pe>=0;--pe)U[pe+te]=this[pe+ee];else Uint8Array.prototype.set.call(U,this.subarray(ee,le),te);return ce},n.prototype.fill=function(U,te,ee,le){if("string"==typeof U){if("string"==typeof te?(le=te,te=0,ee=this.length):"string"==typeof ee&&(le=ee,ee=this.length),void 0!==le&&"string"!=typeof le)throw new TypeError("encoding must be a string");if("string"==typeof le&&!n.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(1===U.length){var ce=U.charCodeAt(0);("utf8"===le&&ce<128||"latin1"===le)&&(U=ce)}}else"number"==typeof U&&(U&=255);if(te<0||this.length<te||this.length<ee)throw new RangeError("Out of range index");if(ee<=te)return this;var pe;if(te>>>=0,ee=void 0===ee?this.length:ee>>>0,U||(U=0),"number"==typeof U)for(pe=te;pe<ee;++pe)this[pe]=U;else{var de=n.isBuffer(U)?U:n.from(U,le),be=de.length;if(0===be)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(pe=0;pe<ee-te;++pe)this[pe+te]=de[pe%be]}return this};var X=/[^+/0-9A-Za-z-_]/g;function J(U){return U<16?"0"+U.toString(16):U.toString(16)}function se(U,te){var ee;te=te||1/0;for(var le=U.length,ce=null,pe=[],de=0;de<le;++de){if((ee=U.charCodeAt(de))>55295&&ee<57344){if(!ce){if(ee>56319){(te-=3)>-1&&pe.push(239,191,189);continue}if(de+1===le){(te-=3)>-1&&pe.push(239,191,189);continue}ce=ee;continue}if(ee<56320){(te-=3)>-1&&pe.push(239,191,189),ce=ee;continue}ee=65536+(ce-55296<<10|ee-56320)}else ce&&(te-=3)>-1&&pe.push(239,191,189);if(ce=null,ee<128){if((te-=1)<0)break;pe.push(ee)}else if(ee<2048){if((te-=2)<0)break;pe.push(ee>>6|192,63&ee|128)}else if(ee<65536){if((te-=3)<0)break;pe.push(ee>>12|224,ee>>6&63|128,63&ee|128)}else{if(!(ee<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;pe.push(ee>>18|240,ee>>12&63|128,ee>>6&63|128,63&ee|128)}}return pe}function V(U){return r.toByteArray(function(te){if((te=(te=te.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te}(U))}function j(U,te,ee,le){for(var ce=0;ce<le&&!(ce+ee>=te.length||ce>=U.length);++ce)te[ce+ee]=U[ce];return ce}function H(U,te){return U instanceof te||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===te.name}function oe(U){return U!=U}}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(g,b,y){y.read=function(e,r,t,o,n){var m,l,i=8*n-o-1,f=(1<<i)-1,u=f>>1,s=-7,d=t?n-1:0,h=t?-1:1,a=e[r+d];for(d+=h,m=a&(1<<-s)-1,a>>=-s,s+=i;s>0;m=256*m+e[r+d],d+=h,s-=8);for(l=m&(1<<-s)-1,m>>=-s,s+=o;s>0;l=256*l+e[r+d],d+=h,s-=8);if(0===m)m=1-u;else{if(m===f)return l?NaN:1/0*(a?-1:1);l+=Math.pow(2,o),m-=u}return(a?-1:1)*l*Math.pow(2,m-o)},y.write=function(e,r,t,o,n,m){var l,i,f,u=8*m-n-1,s=(1<<u)-1,d=s>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,a=o?0:m-1,_=o?1:-1,c=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(i=isNaN(r)?1:0,l=s):(l=Math.floor(Math.log(r)/Math.LN2),r*(f=Math.pow(2,-l))<1&&(l--,f*=2),(r+=l+d>=1?h/f:h*Math.pow(2,1-d))*f>=2&&(l++,f/=2),l+d>=s?(i=0,l=s):l+d>=1?(i=(r*f-1)*Math.pow(2,n),l+=d):(i=r*Math.pow(2,d-1)*Math.pow(2,n),l=0));n>=8;e[t+a]=255&i,a+=_,i/=256,n-=8);for(l=l<<n|i,u+=n;u>0;e[t+a]=255&l,a+=_,l/=256,u-=8);e[t+a-_]|=128*c}},{}],5:[function(g,b,y){var e,r,t=b.exports={};function o(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function m(_){if(e===setTimeout)return setTimeout(_,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(_,0);try{return e(_,0)}catch{try{return e.call(null,_,0)}catch{return e.call(this,_,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:o}catch{e=o}try{r="function"==typeof clearTimeout?clearTimeout:n}catch{r=n}}();var l,i=[],f=!1,u=-1;function s(){f&&l&&(f=!1,l.length?i=l.concat(i):u=-1,i.length&&d())}function d(){if(!f){var _=m(s);f=!0;for(var c=i.length;c;){for(l=i,i=[];++u<c;)l&&l[u].run();u=-1,c=i.length}l=null,f=!1,function(T){if(r===clearTimeout)return clearTimeout(T);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(T);try{r(T)}catch{try{return r.call(null,T)}catch{return r.call(this,T)}}}(_)}}function h(_,c){this.fun=_,this.array=c}function a(){}t.nextTick=function(_){var c=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)c[T-1]=arguments[T];i.push(new h(_,c)),1!==i.length||f||m(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=a,t.addListener=a,t.once=a,t.off=a,t.removeListener=a,t.removeAllListeners=a,t.emit=a,t.prependListener=a,t.prependOnceListener=a,t.listeners=function(_){return[]},t.binding=function(_){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(_){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(g,b,y){b.exports={alpha_shape:g("alpha-shape"),convex_hull:g("convex-hull"),delaunay_triangulate:g("delaunay-triangulate"),gl_cone3d:g("gl-cone3d"),gl_error3d:g("gl-error3d"),gl_heatmap2d:g("gl-heatmap2d"),gl_line3d:g("gl-line3d"),gl_mesh3d:g("gl-mesh3d"),gl_plot2d:g("gl-plot2d"),gl_plot3d:g("gl-plot3d"),gl_pointcloud2d:g("gl-pointcloud2d"),gl_scatter3d:g("gl-scatter3d"),gl_select_box:g("gl-select-box"),gl_spikes2d:g("gl-spikes2d"),gl_streamtube3d:g("gl-streamtube3d"),gl_surface3d:g("gl-surface3d"),ndarray:g("ndarray"),ndarray_linear_interpolate:g("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(g,b,y){"use strict";b.exports=function(m){var l=(m=m||{}).eye||[0,0,1],i=m.center||[0,0,0],f=m.up||[0,1,0],u=m.distanceLimits||[0,1/0],s=m.mode||"turntable",d=e(),h=r(),a=t();return d.setDistanceLimits(u[0],u[1]),d.lookAt(0,l,i,f),h.setDistanceLimits(u[0],u[1]),h.lookAt(0,l,i,f),a.setDistanceLimits(u[0],u[1]),a.lookAt(0,l,i,f),new o({turntable:d,orbit:h,matrix:a},s)};var e=g("turntable-camera-controller"),r=g("orbit-camera-controller"),t=g("matrix-camera-controller");function o(m,l){this._controllerNames=Object.keys(m),this._controllerList=this._controllerNames.map(function(i){return m[i]}),this._mode=l,this._active=m[l],this._active||(this._mode="turntable",this._active=m.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=o.prototype;n.flush=function(m){for(var l=this._controllerList,i=0;i<l.length;++i)l[i].flush(m)},n.idle=function(m){for(var l=this._controllerList,i=0;i<l.length;++i)l[i].idle(m)},n.lookAt=function(m,l,i,f){for(var u=this._controllerList,s=0;s<u.length;++s)u[s].lookAt(m,l,i,f)},n.rotate=function(m,l,i,f){for(var u=this._controllerList,s=0;s<u.length;++s)u[s].rotate(m,l,i,f)},n.pan=function(m,l,i,f){for(var u=this._controllerList,s=0;s<u.length;++s)u[s].pan(m,l,i,f)},n.translate=function(m,l,i,f){for(var u=this._controllerList,s=0;s<u.length;++s)u[s].translate(m,l,i,f)},n.setMatrix=function(m,l){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].setMatrix(m,l)},n.setDistanceLimits=function(m,l){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].setDistanceLimits(m,l)},n.setDistance=function(m,l){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].setDistance(m,l)},n.recalcMatrix=function(m){this._active.recalcMatrix(m)},n.getDistance=function(m){return this._active.getDistance(m)},n.getDistanceLimits=function(m){return this._active.getDistanceLimits(m)},n.lastT=function(){return this._active.lastT()},n.setMode=function(m){if(m!==this._mode){var l=this._controllerNames.indexOf(m);if(!(l<0)){var i=this._active,f=this._controllerList[l],u=Math.max(i.lastT(),f.lastT());i.recalcMatrix(u),f.setMatrix(u,i.computedMatrix),this._active=f,this._mode=m,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(g,b,y){"use strict";var e=typeof WeakMap>"u"?g("weak-map"):WeakMap,r=g("gl-buffer"),t=g("gl-vao"),o=new e;b.exports=function(n){var m=o.get(n),l=m&&(m._triangleBuffer.handle||m._triangleBuffer.buffer);if(!l||!n.isBuffer(l)){var i=r(n,new Float32Array([-1,-1,-1,4,4,-1]));(m=t(n,[{buffer:i,type:n.FLOAT,size:2}]))._triangleBuffer=i,o.set(n,m)}m.bind(),n.drawArrays(n.TRIANGLES,0,3),m.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(g,b,y){var e=g("pad-left");b.exports=function(r,t,o){t="number"==typeof t?t:1,o=o||": ";var n=r.split(/\r?\n/),m=String(n.length+t-1).length;return n.map(function(l,i){var f=i+t,u=String(f).length;return e(f,m-u)+o+l}).join("\n")}},{"pad-left":264}],10:[function(g,b,y){"use strict";b.exports=function(t){var o=t.length;if(0===o)return[];if(1===o)return[0];for(var n=t[0].length,m=[t[0]],l=[0],i=1;i<o;++i)if(m.push(t[i]),r(m,n)){if(l.push(i),l.length===n+1)return l}else m.pop();return l};var e=g("robust-orientation");function r(t,o){for(var n=new Array(o+1),m=0;m<t.length;++m)n[m]=t[m];for(m=0;m<=t.length;++m){for(var l=t.length;l<=o;++l){for(var i=new Array(o),f=0;f<o;++f)i[f]=Math.pow(l+1-m,f);n[l]=i}if(e.apply(void 0,n))return!0}return!1}},{"robust-orientation":284}],11:[function(g,b,y){"use strict";b.exports=function(t,o){return e(o).filter(function(n){for(var m=new Array(n.length),l=0;l<n.length;++l)m[l]=o[n[l]];return r(m)*t<1})};var e=g("delaunay-triangulate"),r=g("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(g,b,y){b.exports=function(t,o){return r(e(t,o))};var e=g("alpha-complex"),r=g("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(g,b,y){b.exports=function(e){return atob(e)}},{}],14:[function(g,b,y){"use strict";b.exports=function(t,o){for(var n=o.length,m=new Array(n+1),l=0;l<n;++l){for(var i=new Array(n+1),f=0;f<=n;++f)i[f]=t[f][l];m[l]=i}for(m[n]=new Array(n+1),l=0;l<=n;++l)m[n][l]=1;var u=new Array(n+1);for(l=0;l<n;++l)u[l]=o[l];u[n]=1;var s=e(m,u),d=r(s[n+1]);0===d&&(d=1);var h=new Array(n+1);for(l=0;l<=n;++l)h[l]=r(s[l])/d;return h};var e=g("robust-linear-solve");function r(t){for(var o=0,n=0;n<t.length;++n)o+=t[n];return o}},{"robust-linear-solve":283}],15:[function(g,b,y){"use strict";var e=g("./lib/rationalize");b.exports=function(r,t){return e(r[0].mul(t[1]).add(t[0].mul(r[1])),r[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(g,b,y){"use strict";b.exports=function(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},{}],17:[function(g,b,y){"use strict";var e=g("./lib/rationalize");b.exports=function(r,t){return e(r[0].mul(t[1]),r[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(g,b,y){"use strict";var e=g("./is-rat"),r=g("./lib/is-bn"),t=g("./lib/num-to-bn"),o=g("./lib/str-to-bn"),n=g("./lib/rationalize"),m=g("./div");b.exports=function l(i,f){if(e(i))return f?m(i,l(f)):[i[0].clone(),i[1].clone()];var u,s,d=0;if(r(i))u=i.clone();else if("string"==typeof i)u=o(i);else{if(0===i)return[t(0),t(1)];if(i===Math.floor(i))u=t(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),d-=256;u=t(i)}}if(e(f))u.mul(f[1]),s=f[0].clone();else if(r(f))s=f.clone();else if("string"==typeof f)s=o(f);else if(f)if(f===Math.floor(f))s=t(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),d+=256;s=t(f)}else s=t(1);return d>0?u=u.ushln(d):d<0&&(s=s.ushln(-d)),n(u,s)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(g,b,y){"use strict";var e=g("./lib/is-bn");b.exports=function(r){return Array.isArray(r)&&2===r.length&&e(r[0])&&e(r[1])}},{"./lib/is-bn":23}],20:[function(g,b,y){"use strict";var e=g("bn.js");b.exports=function(r){return r.cmp(new e(0))}},{"bn.js":33}],21:[function(g,b,y){"use strict";var e=g("./bn-sign");b.exports=function(r){var t=r.length,o=r.words,n=0;if(1===t)n=o[0];else if(2===t)n=o[0]+67108864*o[1];else for(var m=0;m<t;m++)n+=o[m]*Math.pow(67108864,m);return e(r)*n}},{"./bn-sign":20}],22:[function(g,b,y){"use strict";var e=g("double-bits"),r=g("bit-twiddle").countTrailingZeros;b.exports=function(t){var o=r(e.lo(t));if(o<32)return o;var n=r(e.hi(t));return n>20?52:n+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(g,b,y){"use strict";g("bn.js"),b.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(g,b,y){"use strict";var e=g("bn.js"),r=g("double-bits");b.exports=function(t){var o=r.exponent(t);return o<52?new e(t):new e(t*Math.pow(2,52-o)).ushln(o-52)}},{"bn.js":33,"double-bits":64}],25:[function(g,b,y){"use strict";var e=g("./num-to-bn"),r=g("./bn-sign");b.exports=function(t,o){var n=r(t),m=r(o);if(0===n)return[e(0),e(1)];if(0===m)return[e(0),e(0)];m<0&&(t=t.neg(),o=o.neg());var l=t.gcd(o);return l.cmpn(1)?[t.div(l),o.div(l)]:[t,o]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(g,b,y){"use strict";var e=g("bn.js");b.exports=function(r){return new e(r)}},{"bn.js":33}],27:[function(g,b,y){"use strict";var e=g("./lib/rationalize");b.exports=function(r,t){return e(r[0].mul(t[0]),r[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(g,b,y){"use strict";var e=g("./lib/bn-sign");b.exports=function(r){return e(r[0])*e(r[1])}},{"./lib/bn-sign":20}],29:[function(g,b,y){"use strict";var e=g("./lib/rationalize");b.exports=function(r,t){return e(r[0].mul(t[1]).sub(r[1].mul(t[0])),r[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(g,b,y){"use strict";var e=g("./lib/bn-to-num"),r=g("./lib/ctz");b.exports=function(t){var o=t[0],n=t[1];if(0===o.cmpn(0))return 0;var m=o.abs().divmod(n.abs()),i=e(m.div),f=m.mod,u=o.negative!==n.negative?-1:1;if(0===f.cmpn(0))return u*i;if(i){var s=r(i)+4,d=e(f.ushln(s).divRound(n));return u*(i+d*Math.pow(2,-s))}var h=n.bitLength()-f.bitLength()+53;return d=e(f.ushln(h).divRound(n)),h<1023?u*d*Math.pow(2,-h):u*(d*=Math.pow(2,-1023))*Math.pow(2,1023-h)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(g,b,y){"use strict";function e(l,i,f,u,s){for(var d=s+1;u<=s;){var h=u+s>>>1,a=l[h];(void 0!==f?f(a,i):a-i)>=0?(d=h,s=h-1):u=h+1}return d}function r(l,i,f,u,s){for(var d=s+1;u<=s;){var h=u+s>>>1,a=l[h];(void 0!==f?f(a,i):a-i)>0?(d=h,s=h-1):u=h+1}return d}function t(l,i,f,u,s){for(var d=u-1;u<=s;){var h=u+s>>>1,a=l[h];(void 0!==f?f(a,i):a-i)<0?(d=h,u=h+1):s=h-1}return d}function o(l,i,f,u,s){for(var d=u-1;u<=s;){var h=u+s>>>1,a=l[h];(void 0!==f?f(a,i):a-i)<=0?(d=h,u=h+1):s=h-1}return d}function n(l,i,f,u,s){for(;u<=s;){var d=u+s>>>1,h=l[d],a=void 0!==f?f(h,i):h-i;if(0===a)return d;a<=0?u=d+1:s=d-1}return-1}function m(l,i,f,u,s,d){return"function"==typeof f?d(l,i,f,void 0===u?0:0|u,void 0===s?l.length-1:0|s):d(l,i,void 0,void 0===f?0:0|f,void 0===u?l.length-1:0|u)}b.exports={ge:function(l,i,f,u,s){return m(l,i,f,u,s,e)},gt:function(l,i,f,u,s){return m(l,i,f,u,s,r)},lt:function(l,i,f,u,s){return m(l,i,f,u,s,t)},le:function(l,i,f,u,s){return m(l,i,f,u,s,o)},eq:function(l,i,f,u,s){return m(l,i,f,u,s,n)}}},{}],32:[function(g,b,y){"use strict";function e(t){var o=32;return(t&=-t)&&o--,65535&t&&(o-=16),16711935&t&&(o-=8),252645135&t&&(o-=4),858993459&t&&(o-=2),1431655765&t&&(o-=1),o}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(t){return(t>0)-(t<0)},y.abs=function(t){var o=t>>31;return(t^o)-o},y.min=function(t,o){return o^(t^o)&-(t<o)},y.max=function(t,o){return t^(t^o)&-(t<o)},y.isPow2=function(t){return!(t&t-1||!t)},y.log2=function(t){var o,n;return o=(t>65535)<<4,o|=n=((t>>>=o)>255)<<3,o|=n=((t>>>=n)>15)<<2,(o|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},y.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},y.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},y.countTrailingZeros=e,y.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)},y.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},y.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);(function(t){for(var o=0;o<256;++o){var n=o,m=o,l=7;for(n>>>=1;n;n>>>=1)m<<=1,m|=1&n,--l;t[o]=m<<l&255}})(r),y.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},y.interleave2=function(t,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},y.deinterleave2=function(t,o){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>o&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},y.interleave3=function(t,o,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},y.deinterleave3=function(t,o){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>o&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},y.nextCombination=function(t){var o=t|t-1;return o+1|(~o&-~o)-1>>>e(t)+1}},{}],33:[function(g,b,y){!function(e,r){"use strict";function t(S,E){if(!S)throw new Error(E||"Assertion failed")}function o(S,E){S.super_=E;var N=function(){};N.prototype=E.prototype,S.prototype=new N,S.prototype.constructor=S}function n(S,E,N){if(n.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,null!==S&&("le"!==E&&"be"!==E||(N=E,E=10),this._init(S||0,E||10,N||"be"))}var m;"object"==typeof e?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;try{m=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:g("buffer").Buffer}catch{}function l(S,E){var N=S.charCodeAt(E);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function i(S,E,N){var z=l(S,N);return N-1>=E&&(z|=l(S,N-1)<<4),z}function f(S,E,N,z){for(var q=0,G=Math.min(S.length,N),K=E;K<G;K++){var ne=S.charCodeAt(K)-48;q*=z,q+=ne>=49?ne-49+10:ne>=17?ne-17+10:ne}return q}n.isBN=function(S){return S instanceof n||null!==S&&"object"==typeof S&&S.constructor.wordSize===n.wordSize&&Array.isArray(S.words)},n.max=function(S,E){return S.cmp(E)>0?S:E},n.min=function(S,E){return S.cmp(E)<0?S:E},n.prototype._init=function(S,E,N){if("number"==typeof S)return this._initNumber(S,E,N);if("object"==typeof S)return this._initArray(S,E,N);"hex"===E&&(E=16),t(E===(0|E)&&E>=2&&E<=36);var z=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(z++,this.negative=1),z<S.length&&(16===E?this._parseHex(S,z,N):(this._parseBase(S,E,z),"le"===N&&this._initArray(this.toArray(),E,N)))},n.prototype._initNumber=function(S,E,N){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(t(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===N&&this._initArray(this.toArray(),E,N)},n.prototype._initArray=function(S,E,N){if(t("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var q,G,K=0;if("be"===N)for(z=S.length-1,q=0;z>=0;z-=3)this.words[q]|=(G=S[z]|S[z-1]<<8|S[z-2]<<16)<<K&67108863,this.words[q+1]=G>>>26-K&67108863,(K+=24)>=26&&(K-=26,q++);else if("le"===N)for(z=0,q=0;z<S.length;z+=3)this.words[q]|=(G=S[z]|S[z+1]<<8|S[z+2]<<16)<<K&67108863,this.words[q+1]=G>>>26-K&67108863,(K+=24)>=26&&(K-=26,q++);return this.strip()},n.prototype._parseHex=function(S,E,N){this.length=Math.ceil((S.length-E)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var q,G=0,K=0;if("be"===N)for(z=S.length-1;z>=E;z-=2)q=i(S,E,z)<<G,this.words[K]|=67108863&q,G>=18?(G-=18,this.words[K+=1]|=q>>>26):G+=8;else for(z=(S.length-E)%2==0?E+1:E;z<S.length;z+=2)q=i(S,E,z)<<G,this.words[K]|=67108863&q,G>=18?(G-=18,this.words[K+=1]|=q>>>26):G+=8;this.strip()},n.prototype._parseBase=function(S,E,N){this.words=[0],this.length=1;for(var z=0,q=1;q<=67108863;q*=E)z++;z--,q=q/E|0;for(var G=S.length-N,K=G%z,ne=Math.min(G,G-K)+N,X=0,J=N;J<ne;J+=z)X=f(S,J,J+z,E),this.imuln(q),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(0!==K){var se=1;for(X=f(S,J,S.length,E),J=0;J<K;J++)se*=E;this.imuln(se),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},n.prototype.copy=function(S){S.words=new Array(this.length);for(var E=0;E<this.length;E++)S.words[E]=this.words[E];S.length=this.length,S.negative=this.negative,S.red=this.red},n.prototype.clone=function(){var S=new n(null);return this.copy(S),S},n.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],s=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(S,E,N){N.negative=E.negative^S.negative;var z=S.length+E.length|0;N.length=z,z=z-1|0;var q=0|S.words[0],G=0|E.words[0],K=q*G,X=K/67108864|0;N.words[0]=67108863&K;for(var J=1;J<z;J++){for(var se=X>>>26,V=67108863&X,j=Math.min(J,E.length-1),H=Math.max(0,J-S.length+1);H<=j;H++)se+=(K=(q=0|S.words[J-H|0])*(G=0|E.words[H])+V)/67108864|0,V=67108863&K;N.words[J]=0|V,X=0|se}return 0!==X?N.words[J]=0|X:N.length--,N.strip()}n.prototype.toString=function(S,E){var N;if(E=0|E||1,16===(S=S||10)||"hex"===S){N="";for(var z=0,q=0,G=0;G<this.length;G++){var K=this.words[G],ne=(16777215&(K<<z|q)).toString(16);N=0!=(q=K>>>24-z&16777215)||G!==this.length-1?u[6-ne.length]+ne+N:ne+N,(z+=2)>=26&&(z-=26,G--)}for(0!==q&&(N=q.toString(16)+N);N.length%E!=0;)N="0"+N;return 0!==this.negative&&(N="-"+N),N}if(S===(0|S)&&S>=2&&S<=36){var X=s[S],J=d[S];N="";var se=this.clone();for(se.negative=0;!se.isZero();){var V=se.modn(J).toString(S);N=(se=se.idivn(J)).isZero()?V+N:u[X-V.length]+V+N}for(this.isZero()&&(N="0"+N);N.length%E!=0;)N="0"+N;return 0!==this.negative&&(N="-"+N),N}t(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(S,E){return t(void 0!==m),this.toArrayLike(m,S,E)},n.prototype.toArray=function(S,E){return this.toArrayLike(Array,S,E)},n.prototype.toArrayLike=function(S,E,N){var z=this.byteLength(),q=N||Math.max(1,z);t(z<=q,"byte array longer than desired length"),t(q>0,"Requested array length <= 0"),this.strip();var G,K,ne="le"===E,X=new S(q),J=this.clone();if(ne){for(K=0;!J.isZero();K++)G=J.andln(255),J.iushrn(8),X[K]=G;for(;K<q;K++)X[K]=0}else{for(K=0;K<q-z;K++)X[K]=0;for(K=0;!J.isZero();K++)G=J.andln(255),J.iushrn(8),X[q-K-1]=G}return X},n.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var E=S,N=0;return E>=4096&&(N+=13,E>>>=13),E>=64&&(N+=7,E>>>=7),E>=8&&(N+=4,E>>>=4),E>=2&&(N+=2,E>>>=2),N+E},n.prototype._zeroBits=function(S){if(0===S)return 26;var E=S,N=0;return 0==(8191&E)&&(N+=13,E>>>=13),0==(127&E)&&(N+=7,E>>>=7),0==(15&E)&&(N+=4,E>>>=4),0==(3&E)&&(N+=2,E>>>=2),0==(1&E)&&N++,N},n.prototype.bitLength=function(){var E=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+E},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,E=0;E<this.length;E++){var N=this._zeroBits(this.words[E]);if(S+=N,26!==N)break}return S},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},n.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var E=0;E<S.length;E++)this.words[E]=this.words[E]|S.words[E];return this.strip()},n.prototype.ior=function(S){return t(0==(this.negative|S.negative)),this.iuor(S)},n.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},n.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},n.prototype.iuand=function(S){var E;E=this.length>S.length?S:this;for(var N=0;N<E.length;N++)this.words[N]=this.words[N]&S.words[N];return this.length=E.length,this.strip()},n.prototype.iand=function(S){return t(0==(this.negative|S.negative)),this.iuand(S)},n.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},n.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},n.prototype.iuxor=function(S){var E,N;this.length>S.length?(E=this,N=S):(E=S,N=this);for(var z=0;z<N.length;z++)this.words[z]=E.words[z]^N.words[z];if(this!==E)for(;z<E.length;z++)this.words[z]=E.words[z];return this.length=E.length,this.strip()},n.prototype.ixor=function(S){return t(0==(this.negative|S.negative)),this.iuxor(S)},n.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},n.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},n.prototype.inotn=function(S){t("number"==typeof S&&S>=0);var E=0|Math.ceil(S/26),N=S%26;this._expand(E),N>0&&E--;for(var z=0;z<E;z++)this.words[z]=67108863&~this.words[z];return N>0&&(this.words[z]=~this.words[z]&67108863>>26-N),this.strip()},n.prototype.notn=function(S){return this.clone().inotn(S)},n.prototype.setn=function(S,E){t("number"==typeof S&&S>=0);var N=S/26|0,z=S%26;return this._expand(N+1),this.words[N]=E?this.words[N]|1<<z:this.words[N]&~(1<<z),this.strip()},n.prototype.iadd=function(S){var E,N,z;if(0!==this.negative&&0===S.negative)return this.negative=0,E=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,E=this.isub(S),S.negative=1,E._normSign();this.length>S.length?(N=this,z=S):(N=S,z=this);for(var q=0,G=0;G<z.length;G++)this.words[G]=67108863&(E=(0|N.words[G])+(0|z.words[G])+q),q=E>>>26;for(;0!==q&&G<N.length;G++)this.words[G]=67108863&(E=(0|N.words[G])+q),q=E>>>26;if(this.length=N.length,0!==q)this.words[this.length]=q,this.length++;else if(N!==this)for(;G<N.length;G++)this.words[G]=N.words[G];return this},n.prototype.add=function(S){var E;return 0!==S.negative&&0===this.negative?(S.negative=0,E=this.sub(S),S.negative^=1,E):0===S.negative&&0!==this.negative?(this.negative=0,E=S.sub(this),this.negative=1,E):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},n.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var E=this.iadd(S);return S.negative=1,E._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var N,z,q=this.cmp(S);if(0===q)return this.negative=0,this.length=1,this.words[0]=0,this;q>0?(N=this,z=S):(N=S,z=this);for(var G=0,K=0;K<z.length;K++)G=(E=(0|N.words[K])-(0|z.words[K])+G)>>26,this.words[K]=67108863&E;for(;0!==G&&K<N.length;K++)G=(E=(0|N.words[K])+G)>>26,this.words[K]=67108863&E;if(0===G&&K<N.length&&N!==this)for(;K<N.length;K++)this.words[K]=N.words[K];return this.length=Math.max(this.length,K),N!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(S){return this.clone().isub(S)};var a=function(S,E,N){var z,q,G,K=S.words,ne=E.words,X=N.words,J=0,se=0|K[0],V=8191&se,j=se>>>13,H=0|K[1],oe=8191&H,U=H>>>13,te=0|K[2],ee=8191&te,le=te>>>13,ce=0|K[3],pe=8191&ce,de=ce>>>13,be=0|K[4],he=8191&be,xe=be>>>13,De=0|K[5],Se=8191&De,ke=De>>>13,Fe=0|K[6],ve=8191&Fe,Te=Fe>>>13,Le=0|K[7],Oe=8191&Le,Ne=Le>>>13,Be=0|K[8],He=8191&Be,Ve=Be>>>13,it=0|K[9],ze=8191&it,je=it>>>13,qe=0|ne[0],Ye=8191&qe,ct=qe>>>13,vt=0|ne[1],wt=8191&vt,Ot=vt>>>13,St=0|ne[2],ft=8191&St,st=St>>>13,Ct=0|ne[3],$t=8191&Ct,rn=Ct>>>13,hn=0|ne[4],cn=8191&hn,mn=hn>>>13,nn=0|ne[5],Xe=8191&nn,nt=nn>>>13,ye=0|ne[6],Ce=8191&ye,Ue=ye>>>13,Qe=0|ne[7],rt=8191&Qe,Ke=Qe>>>13,gt=0|ne[8],mt=8191&gt,Lt=gt>>>13,Vt=0|ne[9],dt=8191&Vt,bt=Vt>>>13;N.negative=S.negative^E.negative,N.length=19;var Yt=(J+(z=Math.imul(V,Ye))|0)+((8191&(q=(q=Math.imul(V,ct))+Math.imul(j,Ye)|0))<<13)|0;J=((G=Math.imul(j,ct))+(q>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,z=Math.imul(oe,Ye),q=(q=Math.imul(oe,ct))+Math.imul(U,Ye)|0,G=Math.imul(U,ct);var It=(J+(z=z+Math.imul(V,wt)|0)|0)+((8191&(q=(q=q+Math.imul(V,Ot)|0)+Math.imul(j,wt)|0))<<13)|0;J=((G=G+Math.imul(j,Ot)|0)+(q>>>13)|0)+(It>>>26)|0,It&=67108863,z=Math.imul(ee,Ye),q=(q=Math.imul(ee,ct))+Math.imul(le,Ye)|0,G=Math.imul(le,ct),z=z+Math.imul(oe,wt)|0,q=(q=q+Math.imul(oe,Ot)|0)+Math.imul(U,wt)|0,G=G+Math.imul(U,Ot)|0;var jt=(J+(z=z+Math.imul(V,ft)|0)|0)+((8191&(q=(q=q+Math.imul(V,st)|0)+Math.imul(j,ft)|0))<<13)|0;J=((G=G+Math.imul(j,st)|0)+(q>>>13)|0)+(jt>>>26)|0,jt&=67108863,z=Math.imul(pe,Ye),q=(q=Math.imul(pe,ct))+Math.imul(de,Ye)|0,G=Math.imul(de,ct),z=z+Math.imul(ee,wt)|0,q=(q=q+Math.imul(ee,Ot)|0)+Math.imul(le,wt)|0,G=G+Math.imul(le,Ot)|0,z=z+Math.imul(oe,ft)|0,q=(q=q+Math.imul(oe,st)|0)+Math.imul(U,ft)|0,G=G+Math.imul(U,st)|0;var Ie=(J+(z=z+Math.imul(V,$t)|0)|0)+((8191&(q=(q=q+Math.imul(V,rn)|0)+Math.imul(j,$t)|0))<<13)|0;J=((G=G+Math.imul(j,rn)|0)+(q>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,z=Math.imul(he,Ye),q=(q=Math.imul(he,ct))+Math.imul(xe,Ye)|0,G=Math.imul(xe,ct),z=z+Math.imul(pe,wt)|0,q=(q=q+Math.imul(pe,Ot)|0)+Math.imul(de,wt)|0,G=G+Math.imul(de,Ot)|0,z=z+Math.imul(ee,ft)|0,q=(q=q+Math.imul(ee,st)|0)+Math.imul(le,ft)|0,G=G+Math.imul(le,st)|0,z=z+Math.imul(oe,$t)|0,q=(q=q+Math.imul(oe,rn)|0)+Math.imul(U,$t)|0,G=G+Math.imul(U,rn)|0;var et=(J+(z=z+Math.imul(V,cn)|0)|0)+((8191&(q=(q=q+Math.imul(V,mn)|0)+Math.imul(j,cn)|0))<<13)|0;J=((G=G+Math.imul(j,mn)|0)+(q>>>13)|0)+(et>>>26)|0,et&=67108863,z=Math.imul(Se,Ye),q=(q=Math.imul(Se,ct))+Math.imul(ke,Ye)|0,G=Math.imul(ke,ct),z=z+Math.imul(he,wt)|0,q=(q=q+Math.imul(he,Ot)|0)+Math.imul(xe,wt)|0,G=G+Math.imul(xe,Ot)|0,z=z+Math.imul(pe,ft)|0,q=(q=q+Math.imul(pe,st)|0)+Math.imul(de,ft)|0,G=G+Math.imul(de,st)|0,z=z+Math.imul(ee,$t)|0,q=(q=q+Math.imul(ee,rn)|0)+Math.imul(le,$t)|0,G=G+Math.imul(le,rn)|0,z=z+Math.imul(oe,cn)|0,q=(q=q+Math.imul(oe,mn)|0)+Math.imul(U,cn)|0,G=G+Math.imul(U,mn)|0;var ht=(J+(z=z+Math.imul(V,Xe)|0)|0)+((8191&(q=(q=q+Math.imul(V,nt)|0)+Math.imul(j,Xe)|0))<<13)|0;J=((G=G+Math.imul(j,nt)|0)+(q>>>13)|0)+(ht>>>26)|0,ht&=67108863,z=Math.imul(ve,Ye),q=(q=Math.imul(ve,ct))+Math.imul(Te,Ye)|0,G=Math.imul(Te,ct),z=z+Math.imul(Se,wt)|0,q=(q=q+Math.imul(Se,Ot)|0)+Math.imul(ke,wt)|0,G=G+Math.imul(ke,Ot)|0,z=z+Math.imul(he,ft)|0,q=(q=q+Math.imul(he,st)|0)+Math.imul(xe,ft)|0,G=G+Math.imul(xe,st)|0,z=z+Math.imul(pe,$t)|0,q=(q=q+Math.imul(pe,rn)|0)+Math.imul(de,$t)|0,G=G+Math.imul(de,rn)|0,z=z+Math.imul(ee,cn)|0,q=(q=q+Math.imul(ee,mn)|0)+Math.imul(le,cn)|0,G=G+Math.imul(le,mn)|0,z=z+Math.imul(oe,Xe)|0,q=(q=q+Math.imul(oe,nt)|0)+Math.imul(U,Xe)|0,G=G+Math.imul(U,nt)|0;var xt=(J+(z=z+Math.imul(V,Ce)|0)|0)+((8191&(q=(q=q+Math.imul(V,Ue)|0)+Math.imul(j,Ce)|0))<<13)|0;J=((G=G+Math.imul(j,Ue)|0)+(q>>>13)|0)+(xt>>>26)|0,xt&=67108863,z=Math.imul(Oe,Ye),q=(q=Math.imul(Oe,ct))+Math.imul(Ne,Ye)|0,G=Math.imul(Ne,ct),z=z+Math.imul(ve,wt)|0,q=(q=q+Math.imul(ve,Ot)|0)+Math.imul(Te,wt)|0,G=G+Math.imul(Te,Ot)|0,z=z+Math.imul(Se,ft)|0,q=(q=q+Math.imul(Se,st)|0)+Math.imul(ke,ft)|0,G=G+Math.imul(ke,st)|0,z=z+Math.imul(he,$t)|0,q=(q=q+Math.imul(he,rn)|0)+Math.imul(xe,$t)|0,G=G+Math.imul(xe,rn)|0,z=z+Math.imul(pe,cn)|0,q=(q=q+Math.imul(pe,mn)|0)+Math.imul(de,cn)|0,G=G+Math.imul(de,mn)|0,z=z+Math.imul(ee,Xe)|0,q=(q=q+Math.imul(ee,nt)|0)+Math.imul(le,Xe)|0,G=G+Math.imul(le,nt)|0,z=z+Math.imul(oe,Ce)|0,q=(q=q+Math.imul(oe,Ue)|0)+Math.imul(U,Ce)|0,G=G+Math.imul(U,Ue)|0;var Rt=(J+(z=z+Math.imul(V,rt)|0)|0)+((8191&(q=(q=q+Math.imul(V,Ke)|0)+Math.imul(j,rt)|0))<<13)|0;J=((G=G+Math.imul(j,Ke)|0)+(q>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,z=Math.imul(He,Ye),q=(q=Math.imul(He,ct))+Math.imul(Ve,Ye)|0,G=Math.imul(Ve,ct),z=z+Math.imul(Oe,wt)|0,q=(q=q+Math.imul(Oe,Ot)|0)+Math.imul(Ne,wt)|0,G=G+Math.imul(Ne,Ot)|0,z=z+Math.imul(ve,ft)|0,q=(q=q+Math.imul(ve,st)|0)+Math.imul(Te,ft)|0,G=G+Math.imul(Te,st)|0,z=z+Math.imul(Se,$t)|0,q=(q=q+Math.imul(Se,rn)|0)+Math.imul(ke,$t)|0,G=G+Math.imul(ke,rn)|0,z=z+Math.imul(he,cn)|0,q=(q=q+Math.imul(he,mn)|0)+Math.imul(xe,cn)|0,G=G+Math.imul(xe,mn)|0,z=z+Math.imul(pe,Xe)|0,q=(q=q+Math.imul(pe,nt)|0)+Math.imul(de,Xe)|0,G=G+Math.imul(de,nt)|0,z=z+Math.imul(ee,Ce)|0,q=(q=q+Math.imul(ee,Ue)|0)+Math.imul(le,Ce)|0,G=G+Math.imul(le,Ue)|0,z=z+Math.imul(oe,rt)|0,q=(q=q+Math.imul(oe,Ke)|0)+Math.imul(U,rt)|0,G=G+Math.imul(U,Ke)|0;var Xt=(J+(z=z+Math.imul(V,mt)|0)|0)+((8191&(q=(q=q+Math.imul(V,Lt)|0)+Math.imul(j,mt)|0))<<13)|0;J=((G=G+Math.imul(j,Lt)|0)+(q>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,z=Math.imul(ze,Ye),q=(q=Math.imul(ze,ct))+Math.imul(je,Ye)|0,G=Math.imul(je,ct),z=z+Math.imul(He,wt)|0,q=(q=q+Math.imul(He,Ot)|0)+Math.imul(Ve,wt)|0,G=G+Math.imul(Ve,Ot)|0,z=z+Math.imul(Oe,ft)|0,q=(q=q+Math.imul(Oe,st)|0)+Math.imul(Ne,ft)|0,G=G+Math.imul(Ne,st)|0,z=z+Math.imul(ve,$t)|0,q=(q=q+Math.imul(ve,rn)|0)+Math.imul(Te,$t)|0,G=G+Math.imul(Te,rn)|0,z=z+Math.imul(Se,cn)|0,q=(q=q+Math.imul(Se,mn)|0)+Math.imul(ke,cn)|0,G=G+Math.imul(ke,mn)|0,z=z+Math.imul(he,Xe)|0,q=(q=q+Math.imul(he,nt)|0)+Math.imul(xe,Xe)|0,G=G+Math.imul(xe,nt)|0,z=z+Math.imul(pe,Ce)|0,q=(q=q+Math.imul(pe,Ue)|0)+Math.imul(de,Ce)|0,G=G+Math.imul(de,Ue)|0,z=z+Math.imul(ee,rt)|0,q=(q=q+Math.imul(ee,Ke)|0)+Math.imul(le,rt)|0,G=G+Math.imul(le,Ke)|0,z=z+Math.imul(oe,mt)|0,q=(q=q+Math.imul(oe,Lt)|0)+Math.imul(U,mt)|0,G=G+Math.imul(U,Lt)|0;var tn=(J+(z=z+Math.imul(V,dt)|0)|0)+((8191&(q=(q=q+Math.imul(V,bt)|0)+Math.imul(j,dt)|0))<<13)|0;J=((G=G+Math.imul(j,bt)|0)+(q>>>13)|0)+(tn>>>26)|0,tn&=67108863,z=Math.imul(ze,wt),q=(q=Math.imul(ze,Ot))+Math.imul(je,wt)|0,G=Math.imul(je,Ot),z=z+Math.imul(He,ft)|0,q=(q=q+Math.imul(He,st)|0)+Math.imul(Ve,ft)|0,G=G+Math.imul(Ve,st)|0,z=z+Math.imul(Oe,$t)|0,q=(q=q+Math.imul(Oe,rn)|0)+Math.imul(Ne,$t)|0,G=G+Math.imul(Ne,rn)|0,z=z+Math.imul(ve,cn)|0,q=(q=q+Math.imul(ve,mn)|0)+Math.imul(Te,cn)|0,G=G+Math.imul(Te,mn)|0,z=z+Math.imul(Se,Xe)|0,q=(q=q+Math.imul(Se,nt)|0)+Math.imul(ke,Xe)|0,G=G+Math.imul(ke,nt)|0,z=z+Math.imul(he,Ce)|0,q=(q=q+Math.imul(he,Ue)|0)+Math.imul(xe,Ce)|0,G=G+Math.imul(xe,Ue)|0,z=z+Math.imul(pe,rt)|0,q=(q=q+Math.imul(pe,Ke)|0)+Math.imul(de,rt)|0,G=G+Math.imul(de,Ke)|0,z=z+Math.imul(ee,mt)|0,q=(q=q+Math.imul(ee,Lt)|0)+Math.imul(le,mt)|0,G=G+Math.imul(le,Lt)|0;var Kt=(J+(z=z+Math.imul(oe,dt)|0)|0)+((8191&(q=(q=q+Math.imul(oe,bt)|0)+Math.imul(U,dt)|0))<<13)|0;J=((G=G+Math.imul(U,bt)|0)+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,z=Math.imul(ze,ft),q=(q=Math.imul(ze,st))+Math.imul(je,ft)|0,G=Math.imul(je,st),z=z+Math.imul(He,$t)|0,q=(q=q+Math.imul(He,rn)|0)+Math.imul(Ve,$t)|0,G=G+Math.imul(Ve,rn)|0,z=z+Math.imul(Oe,cn)|0,q=(q=q+Math.imul(Oe,mn)|0)+Math.imul(Ne,cn)|0,G=G+Math.imul(Ne,mn)|0,z=z+Math.imul(ve,Xe)|0,q=(q=q+Math.imul(ve,nt)|0)+Math.imul(Te,Xe)|0,G=G+Math.imul(Te,nt)|0,z=z+Math.imul(Se,Ce)|0,q=(q=q+Math.imul(Se,Ue)|0)+Math.imul(ke,Ce)|0,G=G+Math.imul(ke,Ue)|0,z=z+Math.imul(he,rt)|0,q=(q=q+Math.imul(he,Ke)|0)+Math.imul(xe,rt)|0,G=G+Math.imul(xe,Ke)|0,z=z+Math.imul(pe,mt)|0,q=(q=q+Math.imul(pe,Lt)|0)+Math.imul(de,mt)|0,G=G+Math.imul(de,Lt)|0;var kn=(J+(z=z+Math.imul(ee,dt)|0)|0)+((8191&(q=(q=q+Math.imul(ee,bt)|0)+Math.imul(le,dt)|0))<<13)|0;J=((G=G+Math.imul(le,bt)|0)+(q>>>13)|0)+(kn>>>26)|0,kn&=67108863,z=Math.imul(ze,$t),q=(q=Math.imul(ze,rn))+Math.imul(je,$t)|0,G=Math.imul(je,rn),z=z+Math.imul(He,cn)|0,q=(q=q+Math.imul(He,mn)|0)+Math.imul(Ve,cn)|0,G=G+Math.imul(Ve,mn)|0,z=z+Math.imul(Oe,Xe)|0,q=(q=q+Math.imul(Oe,nt)|0)+Math.imul(Ne,Xe)|0,G=G+Math.imul(Ne,nt)|0,z=z+Math.imul(ve,Ce)|0,q=(q=q+Math.imul(ve,Ue)|0)+Math.imul(Te,Ce)|0,G=G+Math.imul(Te,Ue)|0,z=z+Math.imul(Se,rt)|0,q=(q=q+Math.imul(Se,Ke)|0)+Math.imul(ke,rt)|0,G=G+Math.imul(ke,Ke)|0,z=z+Math.imul(he,mt)|0,q=(q=q+Math.imul(he,Lt)|0)+Math.imul(xe,mt)|0,G=G+Math.imul(xe,Lt)|0;var Vn=(J+(z=z+Math.imul(pe,dt)|0)|0)+((8191&(q=(q=q+Math.imul(pe,bt)|0)+Math.imul(de,dt)|0))<<13)|0;J=((G=G+Math.imul(de,bt)|0)+(q>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,z=Math.imul(ze,cn),q=(q=Math.imul(ze,mn))+Math.imul(je,cn)|0,G=Math.imul(je,mn),z=z+Math.imul(He,Xe)|0,q=(q=q+Math.imul(He,nt)|0)+Math.imul(Ve,Xe)|0,G=G+Math.imul(Ve,nt)|0,z=z+Math.imul(Oe,Ce)|0,q=(q=q+Math.imul(Oe,Ue)|0)+Math.imul(Ne,Ce)|0,G=G+Math.imul(Ne,Ue)|0,z=z+Math.imul(ve,rt)|0,q=(q=q+Math.imul(ve,Ke)|0)+Math.imul(Te,rt)|0,G=G+Math.imul(Te,Ke)|0,z=z+Math.imul(Se,mt)|0,q=(q=q+Math.imul(Se,Lt)|0)+Math.imul(ke,mt)|0,G=G+Math.imul(ke,Lt)|0;var Tn=(J+(z=z+Math.imul(he,dt)|0)|0)+((8191&(q=(q=q+Math.imul(he,bt)|0)+Math.imul(xe,dt)|0))<<13)|0;J=((G=G+Math.imul(xe,bt)|0)+(q>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,z=Math.imul(ze,Xe),q=(q=Math.imul(ze,nt))+Math.imul(je,Xe)|0,G=Math.imul(je,nt),z=z+Math.imul(He,Ce)|0,q=(q=q+Math.imul(He,Ue)|0)+Math.imul(Ve,Ce)|0,G=G+Math.imul(Ve,Ue)|0,z=z+Math.imul(Oe,rt)|0,q=(q=q+Math.imul(Oe,Ke)|0)+Math.imul(Ne,rt)|0,G=G+Math.imul(Ne,Ke)|0,z=z+Math.imul(ve,mt)|0,q=(q=q+Math.imul(ve,Lt)|0)+Math.imul(Te,mt)|0,G=G+Math.imul(Te,Lt)|0;var sn=(J+(z=z+Math.imul(Se,dt)|0)|0)+((8191&(q=(q=q+Math.imul(Se,bt)|0)+Math.imul(ke,dt)|0))<<13)|0;J=((G=G+Math.imul(ke,bt)|0)+(q>>>13)|0)+(sn>>>26)|0,sn&=67108863,z=Math.imul(ze,Ce),q=(q=Math.imul(ze,Ue))+Math.imul(je,Ce)|0,G=Math.imul(je,Ue),z=z+Math.imul(He,rt)|0,q=(q=q+Math.imul(He,Ke)|0)+Math.imul(Ve,rt)|0,G=G+Math.imul(Ve,Ke)|0,z=z+Math.imul(Oe,mt)|0,q=(q=q+Math.imul(Oe,Lt)|0)+Math.imul(Ne,mt)|0,G=G+Math.imul(Ne,Lt)|0;var fn=(J+(z=z+Math.imul(ve,dt)|0)|0)+((8191&(q=(q=q+Math.imul(ve,bt)|0)+Math.imul(Te,dt)|0))<<13)|0;J=((G=G+Math.imul(Te,bt)|0)+(q>>>13)|0)+(fn>>>26)|0,fn&=67108863,z=Math.imul(ze,rt),q=(q=Math.imul(ze,Ke))+Math.imul(je,rt)|0,G=Math.imul(je,Ke),z=z+Math.imul(He,mt)|0,q=(q=q+Math.imul(He,Lt)|0)+Math.imul(Ve,mt)|0,G=G+Math.imul(Ve,Lt)|0;var dn=(J+(z=z+Math.imul(Oe,dt)|0)|0)+((8191&(q=(q=q+Math.imul(Oe,bt)|0)+Math.imul(Ne,dt)|0))<<13)|0;J=((G=G+Math.imul(Ne,bt)|0)+(q>>>13)|0)+(dn>>>26)|0,dn&=67108863,z=Math.imul(ze,mt),q=(q=Math.imul(ze,Lt))+Math.imul(je,mt)|0,G=Math.imul(je,Lt);var Mn=(J+(z=z+Math.imul(He,dt)|0)|0)+((8191&(q=(q=q+Math.imul(He,bt)|0)+Math.imul(Ve,dt)|0))<<13)|0;J=((G=G+Math.imul(Ve,bt)|0)+(q>>>13)|0)+(Mn>>>26)|0,Mn&=67108863;var En=(J+(z=Math.imul(ze,dt))|0)+((8191&(q=(q=Math.imul(ze,bt))+Math.imul(je,dt)|0))<<13)|0;return J=((G=Math.imul(je,bt))+(q>>>13)|0)+(En>>>26)|0,En&=67108863,X[0]=Yt,X[1]=It,X[2]=jt,X[3]=Ie,X[4]=et,X[5]=ht,X[6]=xt,X[7]=Rt,X[8]=Xt,X[9]=tn,X[10]=Kt,X[11]=kn,X[12]=Vn,X[13]=Tn,X[14]=sn,X[15]=fn,X[16]=dn,X[17]=Mn,X[18]=En,0!==J&&(X[19]=J,N.length++),N};function _(S,E,N){return(new c).mulp(S,E,N)}function c(S,E){this.x=S,this.y=E}Math.imul||(a=h),n.prototype.mulTo=function(S,E){var N=this.length+S.length;return 10===this.length&&10===S.length?a(this,S,E):N<63?h(this,S,E):N<1024?function(z,q,G){G.negative=q.negative^z.negative,G.length=z.length+q.length;for(var K=0,ne=0,X=0;X<G.length-1;X++){var J=ne;ne=0;for(var se=67108863&K,V=Math.min(X,q.length-1),j=Math.max(0,X-z.length+1);j<=V;j++){var oe=(0|z.words[X-j])*(0|q.words[j]),U=67108863&oe;se=67108863&(U=U+se|0),ne+=(J=(J=J+(oe/67108864|0)|0)+(U>>>26)|0)>>>26,J&=67108863}G.words[X]=se,K=J,J=ne}return 0!==K?G.words[X]=K:G.length--,G.strip()}(this,S,E):_(this,S,E)},c.prototype.makeRBT=function(S){for(var E=new Array(S),N=n.prototype._countBits(S)-1,z=0;z<S;z++)E[z]=this.revBin(z,N,S);return E},c.prototype.revBin=function(S,E,N){if(0===S||S===N-1)return S;for(var z=0,q=0;q<E;q++)z|=(1&S)<<E-q-1,S>>=1;return z},c.prototype.permute=function(S,E,N,z,q,G){for(var K=0;K<G;K++)z[K]=E[S[K]],q[K]=N[S[K]]},c.prototype.transform=function(S,E,N,z,q,G){this.permute(G,S,E,N,z,q);for(var K=1;K<q;K<<=1)for(var ne=K<<1,X=Math.cos(2*Math.PI/ne),J=Math.sin(2*Math.PI/ne),se=0;se<q;se+=ne)for(var V=X,j=J,H=0;H<K;H++){var oe=N[se+H],U=z[se+H],te=N[se+H+K],ee=z[se+H+K],le=V*te-j*ee;ee=V*ee+j*te,N[se+H]=oe+(te=le),z[se+H]=U+ee,N[se+H+K]=oe-te,z[se+H+K]=U-ee,H!==ne&&(le=X*V-J*j,j=X*j+J*V,V=le)}},c.prototype.guessLen13b=function(S,E){var N=1|Math.max(E,S),z=1&N,q=0;for(N=N/2|0;N;N>>>=1)q++;return 1<<q+1+z},c.prototype.conjugate=function(S,E,N){if(!(N<=1))for(var z=0;z<N/2;z++){var q=S[z];S[z]=S[N-z-1],S[N-z-1]=q,q=E[z],E[z]=-E[N-z-1],E[N-z-1]=-q}},c.prototype.normalize13b=function(S,E){for(var N=0,z=0;z<E/2;z++){var q=8192*Math.round(S[2*z+1]/E)+Math.round(S[2*z]/E)+N;S[z]=67108863&q,N=q<67108864?0:q/67108864|0}return S},c.prototype.convert13b=function(S,E,N,z){for(var q=0,G=0;G<E;G++)N[2*G]=8191&(q+=0|S[G]),N[2*G+1]=8191&(q>>>=13),q>>>=13;for(G=2*E;G<z;++G)N[G]=0;t(0===q),t(0==(-8192&q))},c.prototype.stub=function(S){for(var E=new Array(S),N=0;N<S;N++)E[N]=0;return E},c.prototype.mulp=function(S,E,N){var z=2*this.guessLen13b(S.length,E.length),q=this.makeRBT(z),G=this.stub(z),K=new Array(z),ne=new Array(z),X=new Array(z),J=new Array(z),se=new Array(z),V=new Array(z),j=N.words;j.length=z,this.convert13b(S.words,S.length,K,z),this.convert13b(E.words,E.length,J,z),this.transform(K,G,ne,X,z,q),this.transform(J,G,se,V,z,q);for(var H=0;H<z;H++){var oe=ne[H]*se[H]-X[H]*V[H];X[H]=ne[H]*V[H]+X[H]*se[H],ne[H]=oe}return this.conjugate(ne,X,z),this.transform(ne,X,j,G,z,q),this.conjugate(j,G,z),this.normalize13b(j,z),N.negative=S.negative^E.negative,N.length=S.length+E.length,N.strip()},n.prototype.mul=function(S){var E=new n(null);return E.words=new Array(this.length+S.length),this.mulTo(S,E)},n.prototype.mulf=function(S){var E=new n(null);return E.words=new Array(this.length+S.length),_(this,S,E)},n.prototype.imul=function(S){return this.clone().mulTo(S,this)},n.prototype.imuln=function(S){t("number"==typeof S),t(S<67108864);for(var E=0,N=0;N<this.length;N++){var z=(0|this.words[N])*S,q=(67108863&z)+(67108863&E);E>>=26,E+=z/67108864|0,E+=q>>>26,this.words[N]=67108863&q}return 0!==E&&(this.words[N]=E,this.length++),this},n.prototype.muln=function(S){return this.clone().imuln(S)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(S){var E=function(G){for(var K=new Array(G.bitLength()),ne=0;ne<K.length;ne++){var J=ne%26;K[ne]=(G.words[ne/26|0]&1<<J)>>>J}return K}(S);if(0===E.length)return new n(1);for(var N=this,z=0;z<E.length&&0===E[z];z++,N=N.sqr());if(++z<E.length)for(var q=N.sqr();z<E.length;z++,q=q.sqr())0!==E[z]&&(N=N.mul(q));return N},n.prototype.iushln=function(S){t("number"==typeof S&&S>=0);var E,N=S%26,z=(S-N)/26,q=67108863>>>26-N<<26-N;if(0!==N){var G=0;for(E=0;E<this.length;E++){var K=this.words[E]&q;this.words[E]=(0|this.words[E])-K<<N|G,G=K>>>26-N}G&&(this.words[E]=G,this.length++)}if(0!==z){for(E=this.length-1;E>=0;E--)this.words[E+z]=this.words[E];for(E=0;E<z;E++)this.words[E]=0;this.length+=z}return this.strip()},n.prototype.ishln=function(S){return t(0===this.negative),this.iushln(S)},n.prototype.iushrn=function(S,E,N){var z;t("number"==typeof S&&S>=0),z=E?(E-E%26)/26:0;var q=S%26,G=Math.min((S-q)/26,this.length),K=67108863^67108863>>>q<<q,ne=N;if(z-=G,z=Math.max(0,z),ne){for(var X=0;X<G;X++)ne.words[X]=this.words[X];ne.length=G}if(0!==G)if(this.length>G)for(this.length-=G,X=0;X<this.length;X++)this.words[X]=this.words[X+G];else this.words[0]=0,this.length=1;var J=0;for(X=this.length-1;X>=0&&(0!==J||X>=z);X--){var se=0|this.words[X];this.words[X]=J<<26-q|se>>>q,J=se&K}return ne&&0!==J&&(ne.words[ne.length++]=J),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(S,E,N){return t(0===this.negative),this.iushrn(S,E,N)},n.prototype.shln=function(S){return this.clone().ishln(S)},n.prototype.ushln=function(S){return this.clone().iushln(S)},n.prototype.shrn=function(S){return this.clone().ishrn(S)},n.prototype.ushrn=function(S){return this.clone().iushrn(S)},n.prototype.testn=function(S){t("number"==typeof S&&S>=0);var E=S%26,N=(S-E)/26;return!(this.length<=N||!(this.words[N]&1<<E))},n.prototype.imaskn=function(S){t("number"==typeof S&&S>=0);var E=S%26,N=(S-E)/26;return t(0===this.negative,"imaskn works only with positive numbers"),this.length<=N?this:(0!==E&&N++,this.length=Math.min(N,this.length),0!==E&&(this.words[this.length-1]&=67108863^67108863>>>E<<E),this.strip())},n.prototype.maskn=function(S){return this.clone().imaskn(S)},n.prototype.iaddn=function(S){return t("number"==typeof S),t(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},n.prototype._iaddn=function(S){this.words[0]+=S;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},n.prototype.isubn=function(S){if(t("number"==typeof S),t(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},n.prototype.addn=function(S){return this.clone().iaddn(S)},n.prototype.subn=function(S){return this.clone().isubn(S)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(S,E,N){var z,q;this._expand(S.length+N);var K=0;for(z=0;z<S.length;z++){q=(0|this.words[z+N])+K;var ne=(0|S.words[z])*E;K=((q-=67108863&ne)>>26)-(ne/67108864|0),this.words[z+N]=67108863&q}for(;z<this.length-N;z++)K=(q=(0|this.words[z+N])+K)>>26,this.words[z+N]=67108863&q;if(0===K)return this.strip();for(t(-1===K),K=0,z=0;z<this.length;z++)K=(q=-(0|this.words[z])+K)>>26,this.words[z]=67108863&q;return this.negative=1,this.strip()},n.prototype._wordDiv=function(S,E){var N,z=this.clone(),q=S,G=0|q.words[q.length-1];0!=(N=26-this._countBits(G))&&(q=q.ushln(N),z.iushln(N),G=0|q.words[q.length-1]);var K,ne=z.length-q.length;if("mod"!==E){(K=new n(null)).length=ne+1,K.words=new Array(K.length);for(var X=0;X<K.length;X++)K.words[X]=0}var J=z.clone()._ishlnsubmul(q,1,ne);0===J.negative&&(z=J,K&&(K.words[ne]=1));for(var se=ne-1;se>=0;se--){var V=67108864*(0|z.words[q.length+se])+(0|z.words[q.length+se-1]);for(V=Math.min(V/G|0,67108863),z._ishlnsubmul(q,V,se);0!==z.negative;)V--,z.negative=0,z._ishlnsubmul(q,1,se),z.isZero()||(z.negative^=1);K&&(K.words[se]=V)}return K&&K.strip(),z.strip(),"div"!==E&&0!==N&&z.iushrn(N),{div:K||null,mod:z}},n.prototype.divmod=function(S,E,N){return t(!S.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===S.negative?(G=this.neg().divmod(S,E),"mod"!==E&&(z=G.div.neg()),"div"!==E&&(q=G.mod.neg(),N&&0!==q.negative&&q.iadd(S)),{div:z,mod:q}):0===this.negative&&0!==S.negative?(G=this.divmod(S.neg(),E),"mod"!==E&&(z=G.div.neg()),{div:z,mod:G.mod}):0!=(this.negative&S.negative)?(G=this.neg().divmod(S.neg(),E),"div"!==E&&(q=G.mod.neg(),N&&0!==q.negative&&q.isub(S)),{div:G.div,mod:q}):S.length>this.length||this.cmp(S)<0?{div:new n(0),mod:this}:1===S.length?"div"===E?{div:this.divn(S.words[0]),mod:null}:"mod"===E?{div:null,mod:new n(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new n(this.modn(S.words[0]))}:this._wordDiv(S,E);var z,q,G},n.prototype.div=function(S){return this.divmod(S,"div",!1).div},n.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},n.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},n.prototype.divRound=function(S){var E=this.divmod(S);if(E.mod.isZero())return E.div;var N=0!==E.div.negative?E.mod.isub(S):E.mod,z=S.ushrn(1),q=S.andln(1),G=N.cmp(z);return G<0||1===q&&0===G?E.div:0!==E.div.negative?E.div.isubn(1):E.div.iaddn(1)},n.prototype.modn=function(S){t(S<=67108863);for(var E=(1<<26)%S,N=0,z=this.length-1;z>=0;z--)N=(E*N+(0|this.words[z]))%S;return N},n.prototype.idivn=function(S){t(S<=67108863);for(var E=0,N=this.length-1;N>=0;N--){var z=(0|this.words[N])+67108864*E;this.words[N]=z/S|0,E=z%S}return this.strip()},n.prototype.divn=function(S){return this.clone().idivn(S)},n.prototype.egcd=function(S){t(0===S.negative),t(!S.isZero());var E=this,N=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var z=new n(1),q=new n(0),G=new n(0),K=new n(1),ne=0;E.isEven()&&N.isEven();)E.iushrn(1),N.iushrn(1),++ne;for(var X=N.clone(),J=E.clone();!E.isZero();){for(var se=0,V=1;0==(E.words[0]&V)&&se<26;++se,V<<=1);if(se>0)for(E.iushrn(se);se-- >0;)(z.isOdd()||q.isOdd())&&(z.iadd(X),q.isub(J)),z.iushrn(1),q.iushrn(1);for(var j=0,H=1;0==(N.words[0]&H)&&j<26;++j,H<<=1);if(j>0)for(N.iushrn(j);j-- >0;)(G.isOdd()||K.isOdd())&&(G.iadd(X),K.isub(J)),G.iushrn(1),K.iushrn(1);E.cmp(N)>=0?(E.isub(N),z.isub(G),q.isub(K)):(N.isub(E),G.isub(z),K.isub(q))}return{a:G,b:K,gcd:N.iushln(ne)}},n.prototype._invmp=function(S){t(0===S.negative),t(!S.isZero());var E=this,N=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var z,q=new n(1),G=new n(0),K=N.clone();E.cmpn(1)>0&&N.cmpn(1)>0;){for(var ne=0,X=1;0==(E.words[0]&X)&&ne<26;++ne,X<<=1);if(ne>0)for(E.iushrn(ne);ne-- >0;)q.isOdd()&&q.iadd(K),q.iushrn(1);for(var J=0,se=1;0==(N.words[0]&se)&&J<26;++J,se<<=1);if(J>0)for(N.iushrn(J);J-- >0;)G.isOdd()&&G.iadd(K),G.iushrn(1);E.cmp(N)>=0?(E.isub(N),q.isub(G)):(N.isub(E),G.isub(q))}return(z=0===E.cmpn(1)?q:G).cmpn(0)<0&&z.iadd(S),z},n.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var E=this.clone(),N=S.clone();E.negative=0,N.negative=0;for(var z=0;E.isEven()&&N.isEven();z++)E.iushrn(1),N.iushrn(1);for(;;){for(;E.isEven();)E.iushrn(1);for(;N.isEven();)N.iushrn(1);var q=E.cmp(N);if(q<0){var G=E;E=N,N=G}else if(0===q||0===N.cmpn(1))break;E.isub(N)}return N.iushln(z)},n.prototype.invm=function(S){return this.egcd(S).a.umod(S)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(S){return this.words[0]&S},n.prototype.bincn=function(S){t("number"==typeof S);var E=S%26,N=(S-E)/26,z=1<<E;if(this.length<=N)return this._expand(N+1),this.words[N]|=z,this;for(var q=z,G=N;0!==q&&G<this.length;G++){var K=0|this.words[G];q=(K+=q)>>>26,this.words[G]=K&=67108863}return 0!==q&&(this.words[G]=q,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(S){var E,N=S<0;if(0!==this.negative&&!N)return-1;if(0===this.negative&&N)return 1;if(this.strip(),this.length>1)E=1;else{N&&(S=-S),t(S<=67108863,"Number is too big");var z=0|this.words[0];E=z===S?0:z<S?-1:1}return 0!==this.negative?0|-E:E},n.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var E=this.ucmp(S);return 0!==this.negative?0|-E:E},n.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var E=0,N=this.length-1;N>=0;N--){var z=0|this.words[N],q=0|S.words[N];if(z!==q){z<q?E=-1:z>q&&(E=1);break}}return E},n.prototype.gtn=function(S){return 1===this.cmpn(S)},n.prototype.gt=function(S){return 1===this.cmp(S)},n.prototype.gten=function(S){return this.cmpn(S)>=0},n.prototype.gte=function(S){return this.cmp(S)>=0},n.prototype.ltn=function(S){return-1===this.cmpn(S)},n.prototype.lt=function(S){return-1===this.cmp(S)},n.prototype.lten=function(S){return this.cmpn(S)<=0},n.prototype.lte=function(S){return this.cmp(S)<=0},n.prototype.eqn=function(S){return 0===this.cmpn(S)},n.prototype.eq=function(S){return 0===this.cmp(S)},n.red=function(S){return new P(S)},n.prototype.toRed=function(S){return t(!this.red,"Already a number in reduction context"),t(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},n.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(S){return this.red=S,this},n.prototype.forceRed=function(S){return t(!this.red,"Already a number in reduction context"),this._forceRed(S)},n.prototype.redAdd=function(S){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},n.prototype.redIAdd=function(S){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},n.prototype.redSub=function(S){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},n.prototype.redISub=function(S){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},n.prototype.redShl=function(S){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},n.prototype.redMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},n.prototype.redIMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},n.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(S){return t(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var T={k256:null,p224:null,p192:null,p25519:null};function x(S,E){this.name=S,this.p=new n(E,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function D(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(S){if("string"==typeof S){var E=n._prime(S);this.m=E.p,this.prime=E}else t(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function L(S){P.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype._tmp=function(){var S=new n(null);return S.words=new Array(Math.ceil(this.n/13)),S},x.prototype.ireduce=function(S){var E,N=S;do{this.split(N,this.tmp),E=(N=(N=this.imulK(N)).iadd(this.tmp)).bitLength()}while(E>this.n);var z=E<this.n?-1:N.ucmp(this.p);return 0===z?(N.words[0]=0,N.length=1):z>0?N.isub(this.p):void 0!==N.strip?N.strip():N._strip(),N},x.prototype.split=function(S,E){S.iushrn(this.n,0,E)},x.prototype.imulK=function(S){return S.imul(this.k)},o(w,x),w.prototype.split=function(S,E){for(var N=Math.min(S.length,9),z=0;z<N;z++)E.words[z]=S.words[z];if(E.length=N,S.length<=9)return S.words[0]=0,void(S.length=1);var q=S.words[9];for(E.words[E.length++]=4194303&q,z=10;z<S.length;z++){var G=0|S.words[z];S.words[z-10]=(4194303&G)<<4|q>>>22,q=G}S.words[z-10]=q>>>=22,S.length-=0===q&&S.length>10?10:9},w.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var E=0,N=0;N<S.length;N++){var z=0|S.words[N];S.words[N]=67108863&(E+=977*z),E=64*z+(E/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},o(M,x),o(D,x),o(C,x),C.prototype.imulK=function(S){for(var E=0,N=0;N<S.length;N++){var z=19*(0|S.words[N])+E,q=67108863&z;z>>>=26,S.words[N]=q,E=z}return 0!==E&&(S.words[S.length++]=E),S},n._prime=function(S){if(T[S])return T[S];var E;if("k256"===S)E=new w;else if("p224"===S)E=new M;else if("p192"===S)E=new D;else{if("p25519"!==S)throw new Error("Unknown prime "+S);E=new C}return T[S]=E,E},P.prototype._verify1=function(S){t(0===S.negative,"red works only with positives"),t(S.red,"red works only with red numbers")},P.prototype._verify2=function(S,E){t(0==(S.negative|E.negative),"red works only with positives"),t(S.red&&S.red===E.red,"red works only with red numbers")},P.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},P.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},P.prototype.add=function(S,E){this._verify2(S,E);var N=S.add(E);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},P.prototype.iadd=function(S,E){this._verify2(S,E);var N=S.iadd(E);return N.cmp(this.m)>=0&&N.isub(this.m),N},P.prototype.sub=function(S,E){this._verify2(S,E);var N=S.sub(E);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},P.prototype.isub=function(S,E){this._verify2(S,E);var N=S.isub(E);return N.cmpn(0)<0&&N.iadd(this.m),N},P.prototype.shl=function(S,E){return this._verify1(S),this.imod(S.ushln(E))},P.prototype.imul=function(S,E){return this._verify2(S,E),this.imod(S.imul(E))},P.prototype.mul=function(S,E){return this._verify2(S,E),this.imod(S.mul(E))},P.prototype.isqr=function(S){return this.imul(S,S.clone())},P.prototype.sqr=function(S){return this.mul(S,S)},P.prototype.sqrt=function(S){if(S.isZero())return S.clone();var E=this.m.andln(3);if(t(E%2==1),3===E){var N=this.m.add(new n(1)).iushrn(2);return this.pow(S,N)}for(var z=this.m.subn(1),q=0;!z.isZero()&&0===z.andln(1);)q++,z.iushrn(1);t(!z.isZero());var G=new n(1).toRed(this),K=G.redNeg(),ne=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new n(2*X*X).toRed(this);0!==this.pow(X,ne).cmp(K);)X.redIAdd(K);for(var J=this.pow(X,z),se=this.pow(S,z.addn(1).iushrn(1)),V=this.pow(S,z),j=q;0!==V.cmp(G);){for(var H=V,oe=0;0!==H.cmp(G);oe++)H=H.redSqr();t(oe<j);var U=this.pow(J,new n(1).iushln(j-oe-1));se=se.redMul(U),J=U.redSqr(),V=V.redMul(J),j=oe}return se},P.prototype.invm=function(S){var E=S._invmp(this.m);return 0!==E.negative?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},P.prototype.pow=function(S,E){if(E.isZero())return new n(1).toRed(this);if(0===E.cmpn(1))return S.clone();var N=new Array(16);N[0]=new n(1).toRed(this),N[1]=S;for(var z=2;z<N.length;z++)N[z]=this.mul(N[z-1],S);var q=N[0],G=0,K=0,ne=E.bitLength()%26;for(0===ne&&(ne=26),z=E.length-1;z>=0;z--){for(var X=E.words[z],J=ne-1;J>=0;J--){var se=X>>J&1;q!==N[0]&&(q=this.sqr(q)),0!==se||0!==G?(G<<=1,G|=se,(4==++K||0===z&&0===J)&&(q=this.mul(q,N[G]),K=0,G=0)):K=0}ne=26}return q},P.prototype.convertTo=function(S){var E=S.umod(this.m);return E===S?E.clone():E},P.prototype.convertFrom=function(S){var E=S.clone();return E.red=null,E},n.mont=function(S){return new L(S)},o(L,P),L.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},L.prototype.convertFrom=function(S){var E=this.imod(S.mul(this.rinv));return E.red=null,E},L.prototype.imul=function(S,E){if(S.isZero()||E.isZero())return S.words[0]=0,S.length=1,S;var N=S.imul(E),z=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=N.isub(z).iushrn(this.shift),G=q;return q.cmp(this.m)>=0?G=q.isub(this.m):q.cmpn(0)<0&&(G=q.iadd(this.m)),G._forceRed(this)},L.prototype.mul=function(S,E){if(S.isZero()||E.isZero())return new n(0)._forceRed(this);var N=S.mul(E),z=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=N.isub(z).iushrn(this.shift),G=q;return q.cmp(this.m)>=0?G=q.isub(this.m):q.cmpn(0)<0&&(G=q.iadd(this.m)),G._forceRed(this)},L.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===b||b,this)},{buffer:2}],34:[function(g,b,y){"use strict";b.exports=function(e){var r,t,o,n=e.length,m=0;for(r=0;r<n;++r)m+=e[r].length;var l=new Array(m),i=0;for(r=0;r<n;++r){var f=e[r],u=f.length;for(t=0;t<u;++t){var s=l[i++]=new Array(u-1),d=0;for(o=0;o<u;++o)o!==t&&(s[d++]=f[o]);if(1&t){var h=s[1];s[1]=s[0],s[0]=h}}}return l}},{}],35:[function(g,b,y){"use strict";b.exports=function(s,d,h){switch(arguments.length){case 1:return f(s);case 2:return"function"==typeof d?l(s,s,d,!0):u(s,d);case 3:return l(s,d,h,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,r=g("typedarray-pool"),t=g("./lib/sweep"),o=g("./lib/intersect");function n(s,d){for(var h=0;h<s;++h)if(!(d[h]<=d[h+s]))return!0;return!1}function m(s,d,h,a){for(var _=0,c=0,T=0,x=s.length;T<x;++T){var w=s[T];if(!n(d,w)){for(var M=0;M<2*d;++M)h[_++]=w[M];a[c++]=T}}return c}function l(s,d,h,a){var _=s.length,c=d.length;if(!(_<=0||c<=0)){var T=s[0].length>>>1;if(!(T<=0)){var x,w=r.mallocDouble(2*T*_),M=r.mallocInt32(_);if((_=m(s,T,w,M))>0){if(1===T&&a)t.init(_),x=t.sweepComplete(T,h,0,_,w,M,0,_,w,M);else{var D=r.mallocDouble(2*T*c),C=r.mallocInt32(c);(c=m(d,T,D,C))>0&&(t.init(_+c),x=1===T?t.sweepBipartite(T,h,0,_,w,M,0,c,D,C):o(T,h,a,_,w,M,c,D,C),r.free(D),r.free(C))}r.free(w),r.free(M)}return x}}}function i(s,d){e.push([s,d])}function f(s){return e=[],l(s,s,i,!0),e}function u(s,d){return e=[],l(s,d,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(g,b,y){"use strict";function e(r){return r?function(t,o,n,m,l,i,f,u,s,d,h){return l-m>s-u?function(a,_,c,T,x,w,M,D,C,P,L){for(var S=2*a,E=T,N=S*T;E<x;++E,N+=S){var z=w[_+N],q=w[_+N+a],G=M[E];e:for(var K=D,ne=S*D;K<C;++K,ne+=S){var se=L[K];if(!(P[_+ne+a]<z||q<P[_+ne])){for(var V=_+1;V<a;++V)if(w[V+a+N]<P[V+ne]||P[V+a+ne]<w[V+N])continue e;var te=c(G,se);if(void 0!==te)return te}}}}(t,o,n,m,l,i,f,u,s,d,h):function(a,_,c,T,x,w,M,D,C,P,L){for(var S=2*a,E=D,N=S*D;E<C;++E,N+=S){var z=P[_+N],q=P[_+N+a],G=L[E];e:for(var K=T,ne=S*T;K<x;++K,ne+=S){var se=M[K];if(!(q<w[_+ne]||w[_+ne+a]<z)){for(var V=_+1;V<a;++V)if(w[V+a+ne]<P[V+N]||P[V+a+N]<w[V+ne])continue e;var te=c(se,G);if(void 0!==te)return te}}}}(t,o,n,m,l,i,f,u,s,d,h)}:function(t,o,n,m,l,i,f,u,s,d,h,a){return i-l>d-s?m?function(_,c,T,x,w,M,D,C,P,L,S){for(var E=2*_,N=x,z=E*x;N<w;++N,z+=E){var q=M[c+z],G=M[c+z+_],K=D[N];e:for(var ne=C,X=E*C;ne<P;++ne,X+=E){var J=L[c+X],se=S[ne];if(!(J<=q||G<J)){for(var V=c+1;V<_;++V)if(M[V+_+z]<L[V+X]||L[V+_+X]<M[V+z])continue e;var te=T(se,K);if(void 0!==te)return te}}}}(t,o,n,l,i,f,u,s,d,h,a):function(_,c,T,x,w,M,D,C,P,L,S){for(var E=2*_,N=x,z=E*x;N<w;++N,z+=E){var q=M[c+z],G=M[c+z+_],K=D[N];e:for(var ne=C,X=E*C;ne<P;++ne,X+=E){var J=L[c+X],se=S[ne];if(!(J<q||G<J)){for(var V=c+1;V<_;++V)if(M[V+_+z]<L[V+X]||L[V+_+X]<M[V+z])continue e;var te=T(K,se);if(void 0!==te)return te}}}}(t,o,n,l,i,f,u,s,d,h,a):m?function(_,c,T,x,w,M,D,C,P,L,S){for(var E=2*_,N=C,z=E*C;N<P;++N,z+=E){var q=L[c+z],G=S[N];e:for(var K=x,ne=E*x;K<w;++K,ne+=E){var se=D[K];if(!(q<=M[c+ne]||M[c+ne+_]<q)){for(var V=c+1;V<_;++V)if(M[V+_+ne]<L[V+z]||L[V+_+z]<M[V+ne])continue e;var te=T(G,se);if(void 0!==te)return te}}}}(t,o,n,l,i,f,u,s,d,h,a):function(_,c,T,x,w,M,D,C,P,L,S){for(var E=2*_,N=C,z=E*C;N<P;++N,z+=E){var q=L[c+z],G=S[N];e:for(var K=x,ne=E*x;K<w;++K,ne+=E){var se=D[K];if(!(q<M[c+ne]||M[c+ne+_]<q)){for(var V=c+1;V<_;++V)if(M[V+_+ne]<L[V+z]||L[V+_+z]<M[V+ne])continue e;var te=T(se,G);if(void 0!==te)return te}}}}(t,o,n,l,i,f,u,s,d,h,a)}}y.partial=e(!1),y.full=e(!0)},{}],37:[function(g,b,y){"use strict";b.exports=function(M,D,C,P,L,S,E,N,z){!function(Le,Oe){var Ne=8*r.log2(Oe+1)*(Le+1)|0,Be=r.nextPow2(6*Ne);_.length<Be&&(e.free(_),_=e.mallocInt32(Be));var He=r.nextPow2(2*Ne);c.length<He&&(e.free(c),c=e.mallocDouble(He))}(M,P+E);var q,G=0,K=2*M;for(T(G++,0,0,P,0,E,C?16:0,-1/0,1/0),C||T(G++,0,0,E,0,P,1,-1/0,1/0);G>0;){var ne=6*(G-=1),X=_[ne],J=_[ne+1],se=_[ne+2],V=_[ne+3],j=_[ne+4],H=_[ne+5],oe=2*G,U=c[oe],te=c[oe+1],ee=1&H,le=!!(16&H),ce=L,pe=S,de=N,be=z;if(ee&&(ce=N,pe=z,de=L,be=S),!(2&H&&(se=s(M,X,J,se,ce,pe,te),J>=se)||4&H&&(J=d(M,X,J,se,ce,pe,U))>=se)){var he=se-J,xe=j-V;if(le){if(M*he*(he+xe)<1<<22){if(void 0!==(q=m.scanComplete(M,X,D,J,se,ce,pe,V,j,de,be)))return q;continue}}else{if(M*Math.min(he,xe)<128){if(void 0!==(q=o(M,X,D,ee,J,se,ce,pe,V,j,de,be)))return q;continue}if(M*he*xe<1<<22){if(void 0!==(q=m.scanBipartite(M,X,D,ee,J,se,ce,pe,V,j,de,be)))return q;continue}}var De=f(M,X,J,se,ce,pe,U,te);if(J<De)if(M*(De-J)<128){if(void 0!==(q=n(M,X+1,D,J,De,ce,pe,V,j,de,be)))return q}else if(X===M-2){if(void 0!==(q=ee?m.sweepBipartite(M,D,V,j,de,be,J,De,ce,pe):m.sweepBipartite(M,D,J,De,ce,pe,V,j,de,be)))return q}else T(G++,X+1,J,De,V,j,ee,-1/0,1/0),T(G++,X+1,V,j,J,De,1^ee,-1/0,1/0);if(De<se){var Se=l(M,X,V,j,de,be),ke=de[K*Se+X],Fe=u(M,X,Se,j,de,be,ke);if(Fe<j&&T(G++,X,De,se,Fe,j,(4|ee)+(le?16:0),ke,te),V<Se&&T(G++,X,De,se,V,Se,(2|ee)+(le?16:0),U,ke),Se+1===Fe){if(void 0!==(q=le?w(M,X,D,De,se,ce,pe,Se,de,be[Se]):x(M,X,D,ee,De,se,ce,pe,Se,de,be[Se])))return q}else if(Se<Fe){var ve;if(le){if(De<(ve=h(M,X,De,se,ce,pe,ke))){var Te=u(M,X,De,ve,ce,pe,ke);if(X===M-2){if(De<Te&&void 0!==(q=m.sweepComplete(M,D,De,Te,ce,pe,Se,Fe,de,be))||Te<ve&&void 0!==(q=m.sweepBipartite(M,D,Te,ve,ce,pe,Se,Fe,de,be)))return q}else De<Te&&T(G++,X+1,De,Te,Se,Fe,16,-1/0,1/0),Te<ve&&(T(G++,X+1,Te,ve,Se,Fe,0,-1/0,1/0),T(G++,X+1,Se,Fe,Te,ve,1,-1/0,1/0))}}else De<(ve=ee?a(M,X,De,se,ce,pe,ke):h(M,X,De,se,ce,pe,ke))&&(X===M-2?q=ee?m.sweepBipartite(M,D,Se,Fe,de,be,De,ve,ce,pe):m.sweepBipartite(M,D,De,ve,ce,pe,Se,Fe,de,be):(T(G++,X+1,De,ve,Se,Fe,ee,-1/0,1/0),T(G++,X+1,Se,Fe,De,ve,1^ee,-1/0,1/0)))}}}}};var e=g("typedarray-pool"),r=g("bit-twiddle"),t=g("./brute"),o=t.partial,n=t.full,m=g("./sweep"),l=g("./median"),i=g("./partition"),f=i("!(lo>=p0)&&!(p1>=hi)"),u=i("lo===p0"),s=i("lo<p0"),d=i("hi<=p0"),h=i("lo<=p0&&p0<=hi"),a=i("lo<p0&&p0<=hi"),_=e.mallocInt32(1024),c=e.mallocDouble(1024);function T(M,D,C,P,L,S,E,N,z){var q=6*M;_[q]=D,_[q+1]=C,_[q+2]=P,_[q+3]=L,_[q+4]=S,_[q+5]=E;var G=2*M;c[G]=N,c[G+1]=z}function x(M,D,C,P,L,S,E,N,z,q,G){var K=2*M,ne=z*K,X=q[ne+D];e:for(var J=L,se=L*K;J<S;++J,se+=K){var V=E[se+D],j=E[se+D+M];if(!(X<V||j<X||P&&X===V)){for(var H,oe=N[J],U=D+1;U<M;++U)if(V=E[se+U],(j=E[se+U+M])<q[ne+U]||q[ne+U+M]<V)continue e;if(void 0!==(H=P?C(G,oe):C(oe,G)))return H}}}function w(M,D,C,P,L,S,E,N,z,q){var G=2*M,K=N*G,ne=z[K+D];e:for(var X=P,J=P*G;X<L;++X,J+=G){var se=E[X];if(se!==q){var V=S[J+D],j=S[J+D+M];if(!(ne<V||j<ne)){for(var H=D+1;H<M;++H)if(V=S[J+H],(j=S[J+H+M])<z[K+H]||z[K+H+M]<V)continue e;var te=C(se,q);if(void 0!==te)return te}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(g,b,y){"use strict";b.exports=function(t,o,n,m,l,i){if(m<=n+1)return n;for(var f=n,u=m,s=m+n>>>1,d=2*t,h=s,a=l[d*s+o];f<u;){if(u-f<8){r(t,o,f,u,l,i),a=l[d*s+o];break}var _=u-f,c=Math.random()*_+f|0,T=l[d*c+o],x=Math.random()*_+f|0,w=l[d*x+o],M=Math.random()*_+f|0,D=l[d*M+o];T<=w?D>=w?(h=x,a=w):T>=D?(h=c,a=T):(h=M,a=D):w>=D?(h=x,a=w):D>=T?(h=c,a=T):(h=M,a=D);for(var C=d*(u-1),P=d*h,L=0;L<d;++L,++C,++P){var S=l[C];l[C]=l[P],l[P]=S}var E=i[u-1];for(i[u-1]=i[h],i[h]=E,C=d*(u-1),P=d*(h=e(t,o,f,u-1,l,i,a)),L=0;L<d;++L,++C,++P)S=l[C],l[C]=l[P],l[P]=S;if(E=i[u-1],i[u-1]=i[h],i[h]=E,s<h){for(u=h-1;f<u&&l[d*(u-1)+o]===a;)u-=1;u+=1}else{if(!(h<s))break;for(f=h+1;f<u&&l[d*f+o]===a;)f+=1}}return e(t,o,n,s,l,i,l[d*s+o])};var e=g("./partition")("lo<p0");function r(t,o,n,m,l,i){for(var f=2*t,u=f*(n+1)+o,s=n+1;s<m;++s,u+=f)for(var d=l[u],h=s,a=f*(s-1);h>n&&l[a+o]>d;--h,a-=f){for(var _=a,c=a+f,T=0;T<f;++T,++_,++c){var x=l[_];l[_]=l[c],l[c]=x}var w=i[h];i[h]=i[h-1],i[h-1]=w}}},{"./partition":39}],39:[function(g,b,y){"use strict";b.exports=function(r){return e[r]};var e={"lo===p0":function(r,t,o,n,m,l,i){for(var f=2*r,u=f*o,s=u,d=o,h=t,a=o;n>a;++a,u+=f)if(m[u+h]===i)if(d===a)d+=1,s+=f;else{for(var _=0;f>_;++_){var c=m[u+_];m[u+_]=m[s],m[s++]=c}var T=l[a];l[a]=l[d],l[d++]=T}return d},"lo<p0":function(r,t,o,n,m,l,i){for(var f=2*r,u=f*o,s=u,d=o,h=t,a=o;n>a;++a,u+=f)if(m[u+h]<i)if(d===a)d+=1,s+=f;else{for(var _=0;f>_;++_){var c=m[u+_];m[u+_]=m[s],m[s++]=c}var T=l[a];l[a]=l[d],l[d++]=T}return d},"lo<=p0":function(r,t,o,n,m,l,i){for(var f=2*r,u=f*o,s=u,d=o,h=r+t,a=o;n>a;++a,u+=f)if(m[u+h]<=i)if(d===a)d+=1,s+=f;else{for(var _=0;f>_;++_){var c=m[u+_];m[u+_]=m[s],m[s++]=c}var T=l[a];l[a]=l[d],l[d++]=T}return d},"hi<=p0":function(r,t,o,n,m,l,i){for(var f=2*r,u=f*o,s=u,d=o,h=r+t,a=o;n>a;++a,u+=f)if(m[u+h]<=i)if(d===a)d+=1,s+=f;else{for(var _=0;f>_;++_){var c=m[u+_];m[u+_]=m[s],m[s++]=c}var T=l[a];l[a]=l[d],l[d++]=T}return d},"lo<p0&&p0<=hi":function(r,t,o,n,m,l,i){for(var f=2*r,u=f*o,s=u,d=o,h=t,a=r+t,_=o;n>_;++_,u+=f)if(m[u+h]<i&&i<=m[u+a])if(d===_)d+=1,s+=f;else{for(var x=0;f>x;++x){var w=m[u+x];m[u+x]=m[s],m[s++]=w}var M=l[_];l[_]=l[d],l[d++]=M}return d},"lo<=p0&&p0<=hi":function(r,t,o,n,m,l,i){for(var f=2*r,u=f*o,s=u,d=o,h=t,a=r+t,_=o;n>_;++_,u+=f)if(m[u+h]<=i&&i<=m[u+a])if(d===_)d+=1,s+=f;else{for(var x=0;f>x;++x){var w=m[u+x];m[u+x]=m[s],m[s++]=w}var M=l[_];l[_]=l[d],l[d++]=M}return d},"!(lo>=p0)&&!(p1>=hi)":function(r,t,o,n,m,l,i,f){for(var u=2*r,s=u*o,d=s,h=o,a=t,_=r+t,c=o;n>c;++c,s+=u)if(!(m[s+a]>=i||f>=m[s+_]))if(h===c)h+=1,d+=u;else{for(var w=0;u>w;++w){var M=m[s+w];m[s+w]=m[d],m[d++]=M}var D=l[c];l[c]=l[h],l[h++]=D}return h}}},{}],40:[function(g,b,y){"use strict";function e(i,f,u){for(var s=2*(i+1),d=i+1;d<=f;++d){for(var h=u[s++],a=u[s++],_=d,c=s-2;_-- >i;){var T=u[c-2],x=u[c-1];if(T<h||T===h&&x<a)break;u[c]=T,u[c+1]=x,c-=2}u[c]=h,u[c+1]=a}}function r(i,f,u){var s=u[i*=2],d=u[i+1];u[i]=u[f*=2],u[i+1]=u[f+1],u[f]=s,u[f+1]=d}function t(i,f,u){u[i*=2]=u[f*=2],u[i+1]=u[f+1]}function o(i,f,u,s){u*=2;var d=s[i*=2],h=s[i+1];s[i]=s[f*=2],s[i+1]=s[f+1],s[f]=s[u],s[f+1]=s[u+1],s[u]=d,s[u+1]=h}function n(i,f,u,s,d){d[i*=2]=d[f*=2],d[f]=u,d[i+1]=d[f+1],d[f+1]=s}function m(i,f,u){var s=u[i*=2],d=u[f*=2];return!(s<d)&&(s!==d||u[i+1]>u[f+1])}function l(i,f,u,s){var d=s[i*=2];return d<f||d===f&&s[i+1]<u}b.exports=function(i,f){f<=128?e(0,f-1,i):function u(s,d,h){var a=(d-s+1)/6|0,_=s+a,c=d-a,T=s+d>>1,x=T-a,w=T+a,M=_,D=x,C=T,P=w,L=c,S=s+1,E=d-1,N=0;m(M,D,h)&&(N=M,M=D,D=N),m(P,L,h)&&(N=P,P=L,L=N),m(M,C,h)&&(N=M,M=C,C=N),m(D,C,h)&&(N=D,D=C,C=N),m(M,P,h)&&(N=M,M=P,P=N),m(C,P,h)&&(N=C,C=P,P=N),m(D,L,h)&&(N=D,D=L,L=N),m(D,C,h)&&(N=D,D=C,C=N),m(P,L,h)&&(N=P,P=L,L=N);for(var z=h[2*D],q=h[2*D+1],G=h[2*P],K=h[2*P+1],ne=2*M,X=2*C,J=2*L,se=2*_,V=2*T,j=2*c,H=0;H<2;++H){var U=h[X+H],te=h[J+H];h[se+H]=h[ne+H],h[V+H]=U,h[j+H]=te}t(x,s,h),t(w,d,h);for(var ee=S;ee<=E;++ee)if(l(ee,z,q,h))ee!==S&&r(ee,S,h),++S;else if(!l(ee,G,K,h))for(;;){if(l(E,G,K,h)){l(E,z,q,h)?(o(ee,S,E,h),++S,--E):(r(ee,E,h),--E);break}if(--E<ee)break}n(s,S-1,z,q,h),n(d,E+1,G,K,h),S-2-s<=32?e(s,S-2,h):u(s,S-2,h),d-(E+2)<=32?e(E+2,d,h):u(E+2,d,h),E-S<=32?e(S,E,h):u(S,E,h)}(0,f-1,i)}},{}],41:[function(g,b,y){"use strict";b.exports={init:function(h){var a=r.nextPow2(h);o.length<a&&(e.free(o),o=e.mallocInt32(a)),n.length<a&&(e.free(n),n=e.mallocInt32(a)),m.length<a&&(e.free(m),m=e.mallocInt32(a)),l.length<a&&(e.free(l),l=e.mallocInt32(a)),i.length<a&&(e.free(i),i=e.mallocInt32(a)),f.length<a&&(e.free(f),f=e.mallocInt32(a));var _=8*a;u.length<_&&(e.free(u),u=e.mallocDouble(_))},sweepBipartite:function(h,a,_,c,T,x,w,M,D,C){for(var P=0,L=2*h,S=h-1,E=L-1,N=_;N<c;++N){var z=x[N],q=L*N;u[P++]=T[q+S],u[P++]=-(z+1),u[P++]=T[q+E],u[P++]=z}for(N=w;N<M;++N){z=C[N]+(1<<28);var G=L*N;u[P++]=D[G+S],u[P++]=-z,u[P++]=D[G+E],u[P++]=z}var K=P>>>1;t(u,K);var ne=0,X=0;for(N=0;N<K;++N){var J=0|u[2*N+1];if(J>=1<<28)s(m,l,X--,J=J-(1<<28)|0);else if(J>=0)s(o,n,ne--,J);else if(J<=-(1<<28)){J=-J-(1<<28)|0;for(var se=0;se<ne;++se)if(void 0!==(V=a(o[se],J)))return V;d(m,l,X++,J)}else{for(J=-J-1|0,se=0;se<X;++se){var V;if(void 0!==(V=a(J,m[se])))return V}d(o,n,ne++,J)}}},sweepComplete:function(h,a,_,c,T,x,w,M,D,C){for(var P=0,L=2*h,S=h-1,E=L-1,N=_;N<c;++N){var z=x[N]+1<<1,q=L*N;u[P++]=T[q+S],u[P++]=-z,u[P++]=T[q+E],u[P++]=z}for(N=w;N<M;++N){z=C[N]+1<<1;var G=L*N;u[P++]=D[G+S],u[P++]=1|-z,u[P++]=D[G+E],u[P++]=1|z}var K=P>>>1;t(u,K);var ne=0,X=0,J=0;for(N=0;N<K;++N){var se=0|u[2*N+1],V=1&se;if(N<K-1&&se>>1==u[2*N+3]>>1&&(V=2,N+=1),se<0){for(var j=-(se>>1)-1,H=0;H<J;++H)if(void 0!==(oe=a(i[H],j)))return oe;if(0!==V)for(H=0;H<ne;++H)if(void 0!==(oe=a(o[H],j)))return oe;if(1!==V)for(H=0;H<X;++H){var oe;if(void 0!==(oe=a(m[H],j)))return oe}0===V?d(o,n,ne++,j):1===V?d(m,l,X++,j):2===V&&d(i,f,J++,j)}else j=(se>>1)-1,0===V?s(o,n,ne--,j):1===V?s(m,l,X--,j):2===V&&s(i,f,J--,j)}},scanBipartite:function(h,a,_,c,T,x,w,M,D,C,P,L){var S=0,E=2*h,N=a,z=a+h,q=1,G=1;c?G=1<<28:q=1<<28;for(var K=T;K<x;++K){var ne=K+q,X=E*K;u[S++]=w[X+N],u[S++]=-ne,u[S++]=w[X+z],u[S++]=ne}for(K=D;K<C;++K)ne=K+G,u[S++]=P[E*K+N],u[S++]=-ne;var se=S>>>1;t(u,se);var V=0;for(K=0;K<se;++K){var j=0|u[2*K+1];if(j<0){var H=!1;if((ne=-j)>=1<<28?(H=!c,ne-=1<<28):(H=!!c,ne-=1),H)d(o,n,V++,ne);else{var oe=L[ne],U=E*ne,te=P[U+a+1],ee=P[U+a+1+h];e:for(var le=0;le<V;++le){var ce=o[le],pe=E*ce;if(!(ee<w[pe+a+1]||w[pe+a+1+h]<te)){for(var de=a+2;de<h;++de)if(P[U+de+h]<w[pe+de]||w[pe+de+h]<P[U+de])continue e;var be,he=M[ce];if(void 0!==(be=c?_(oe,he):_(he,oe)))return be}}}}else s(o,n,V--,j-q)}},scanComplete:function(h,a,_,c,T,x,w,M,D,C,P){for(var L=0,S=2*h,E=a,N=a+h,z=c;z<T;++z){var q=z+268435456,G=S*z;u[L++]=x[G+E],u[L++]=-q,u[L++]=x[G+N],u[L++]=q}for(z=M;z<D;++z)q=z+1,u[L++]=C[S*z+E],u[L++]=-q;var ne=L>>>1;t(u,ne);var X=0;for(z=0;z<ne;++z){var J=0|u[2*z+1];if(J<0)if((q=-J)>=1<<28)o[X++]=q-(1<<28);else{var se=P[q-=1],V=S*q,j=C[V+a+1],H=C[V+a+1+h];e:for(var oe=0;oe<X;++oe){var U=o[oe],te=w[U];if(te===se)break;var ee=S*U;if(!(H<x[ee+a+1]||x[ee+a+1+h]<j)){for(var le=a+2;le<h;++le)if(C[V+le+h]<x[ee+le]||x[ee+le+h]<C[V+le])continue e;var ce=_(te,se);if(void 0!==ce)return ce}}}else{for(q=J-(1<<28),oe=X-1;oe>=0;--oe)if(o[oe]===q){for(le=oe+1;le<X;++le)o[le-1]=o[le];break}--X}}}};var e=g("typedarray-pool"),r=g("bit-twiddle"),t=g("./sort"),o=e.mallocInt32(1024),n=e.mallocInt32(1024),m=e.mallocInt32(1024),l=e.mallocInt32(1024),i=e.mallocInt32(1024),f=e.mallocInt32(1024),u=e.mallocDouble(8192);function s(h,a,_,c){var T=a[c],x=h[_-1];h[T]=x,a[x]=T}function d(h,a,_,c){h[_]=c,a[c]=_}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(g,b,y){"use strict";var e=g("./lib/monotone"),r=g("./lib/triangulation"),t=g("./lib/delaunay"),o=g("./lib/filter");function n(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function m(i,f){return i[0]-f[0]||i[1]-f[1]}function l(i,f,u){return f in i?i[f]:u}b.exports=function(i,f,u){Array.isArray(f)?(u=u||{},f=f||[]):(u=f||{},f=[]);var s=!!l(u,"delaunay",!0),d=!!l(u,"interior",!0),h=!!l(u,"exterior",!0),a=!!l(u,"infinity",!1);if(!d&&!h||0===i.length)return[];var _=e(i,f);if(s||d!==h||a){for(var c=r(i.length,f.map(n).sort(m)),T=0;T<_.length;++T){var x=_[T];c.addTriangle(x[0],x[1],x[2])}return s&&t(i,c),h?d?a?o(c,0,a):c.cells():o(c,1,a):o(c,-1)}return _}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(g,b,y){"use strict";var e=g("robust-in-sphere")[4];function r(t,o,n,m,l,i){var f=o.opposite(m,l);if(!(f<0)){if(l<m){var u=m;m=l,l=u,u=i,i=f,f=u}o.isConstraint(m,l)||e(t[m],t[l],t[i],t[f])<0&&n.push(m,l)}}g("binary-search-bounds"),b.exports=function(t,o){for(var n=[],m=t.length,l=o.stars,i=0;i<m;++i)for(var f=l[i],u=1;u<f.length;u+=2)if(!((a=f[u])<i||o.isConstraint(i,a))){for(var s=f[u-1],d=-1,h=1;h<f.length;h+=2)if(f[h-1]===a){d=f[h];break}d<0||e(t[i],t[a],t[s],t[d])<0&&n.push(i,a)}for(;n.length>0;){for(var a=n.pop(),_=(s=-1,d=-1,f=l[i=n.pop()],1);_<f.length;_+=2){var c=f[_-1],T=f[_];c===a?d=T:T===a&&(s=c)}s<0||d<0||e(t[i],t[a],t[s],t[d])>=0||(o.flip(i,a),r(t,o,n,s,i,d),r(t,o,n,i,d,s),r(t,o,n,d,a,s),r(t,o,n,a,s,d))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(g,b,y){"use strict";var e,r=g("binary-search-bounds");function t(n,m,l,i,f,u,s){this.cells=n,this.neighbor=m,this.flags=i,this.constraint=l,this.active=f,this.next=u,this.boundary=s}function o(n,m){return n[0]-m[0]||n[1]-m[1]||n[2]-m[2]}b.exports=function(n,m,l){var i=function(D,C){for(var P=D.cells(),L=P.length,S=0;S<L;++S){var E=(V=P[S])[0],N=V[1],z=V[2];N<z?N<E&&(V[0]=N,V[1]=z,V[2]=E):z<E&&(V[0]=z,V[1]=E,V[2]=N)}P.sort(o);var q=new Array(L);for(S=0;S<q.length;++S)q[S]=0;var G=[],K=[],ne=new Array(3*L),X=new Array(3*L),J=null;C&&(J=[]);var se=new t(P,ne,X,q,G,K,J);for(S=0;S<L;++S)for(var V=P[S],j=0;j<3;++j){var H=ne[3*S+j]=se.locate(N=V[(j+1)%3],E=V[j],D.opposite(N,E)),oe=X[3*S+j]=D.isConstraint(E,N);H<0&&(oe?K.push(S):(G.push(S),q[S]=1),C&&J.push([N,E,-1]))}return se}(n,l);if(0===m)return l?i.cells.concat(i.boundary):i.cells;for(var f=1,u=i.active,s=i.next,d=i.flags,h=i.cells,a=i.constraint,_=i.neighbor;u.length>0||s.length>0;){for(;u.length>0;){var c=u.pop();if(d[c]!==-f){d[c]=f;for(var T=0;T<3;++T){var x=_[3*c+T];x>=0&&0===d[x]&&(a[3*c+T]?s.push(x):(u.push(x),d[x]=f))}}}var w=s;s=u,u=w,s.length=0,f=-f}var M=function(D,C,P){for(var L=0,S=0;S<D.length;++S)C[S]===P&&(D[L++]=D[S]);return D.length=L,D}(h,d,m);return l?M.concat(i.boundary):M},t.prototype.locate=(e=[0,0,0],function(n,m,l){var i=n,f=m,u=l;return m<l?m<n&&(i=m,f=l,u=n):l<n&&(i=l,f=n,u=m),i<0?-1:(e[0]=i,e[1]=f,e[2]=u,r.eq(this.cells,e,o))})},{"binary-search-bounds":31}],45:[function(g,b,y){"use strict";var e=g("binary-search-bounds"),r=g("robust-orientation")[3];function t(s,d,h,a,_){this.a=s,this.b=d,this.idx=h,this.lowerIds=a,this.upperIds=_}function o(s,d,h,a){this.a=s,this.b=d,this.type=h,this.idx=a}function n(s,d){var h=s.a[0]-d.a[0]||s.a[1]-d.a[1]||s.type-d.type;return h||(0!==s.type&&(h=r(s.a,s.b,d.b))?h:s.idx-d.idx)}function m(s,d){return r(s.a,s.b,d)}function l(s,d,h,a,_){for(var c=e.lt(d,a,m),T=e.gt(d,a,m),x=c;x<T;++x){for(var w=d[x],M=w.lowerIds,D=M.length;D>1&&r(h[M[D-2]],h[M[D-1]],a)>0;)s.push([M[D-1],M[D-2],_]),D-=1;M.length=D,M.push(_);var C=w.upperIds;for(D=C.length;D>1&&r(h[C[D-2]],h[C[D-1]],a)<0;)s.push([C[D-2],C[D-1],_]),D-=1;C.length=D,C.push(_)}}function i(s,d){var h;return(h=s.a[0]<d.a[0]?r(s.a,s.b,d.a):r(d.b,d.a,s.a))?h:(h=d.b[0]<s.b[0]?r(s.a,s.b,d.b):r(d.b,d.a,s.b))||s.idx-d.idx}function f(s,d,h){var a=e.le(s,h,i),_=s[a],c=_.upperIds,T=c[c.length-1];_.upperIds=[T],s.splice(a+1,0,new t(h.a,h.b,h.idx,[T],c))}function u(s,d,h){var a=h.a;h.a=h.b,h.b=a;var _=e.eq(s,h,i);s[_-1].upperIds=s[_].upperIds,s.splice(_,1)}b.exports=function(s,d){for(var h=s.length,a=d.length,_=[],c=0;c<h;++c)_.push(new o(s[c],null,0,c));for(c=0;c<a;++c){var T=d[c],x=s[T[0]],w=s[T[1]];x[0]<w[0]?_.push(new o(x,w,2,c),new o(w,x,1,c)):x[0]>w[0]&&_.push(new o(w,x,2,c),new o(x,w,1,c))}_.sort(n);for(var M=_[0].a[0]-(1+Math.abs(_[0].a[0]))*Math.pow(2,-52),D=[new t([M,1],[M,0],-1,[],[],[],[])],C=[],P=(c=0,_.length);c<P;++c){var L=_[c],S=L.type;0===S?l(C,D,s,L.a,L.idx):2===S?f(D,0,L):u(D,0,L)}return C}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(g,b,y){"use strict";var e=g("binary-search-bounds");function r(n,m){this.stars=n,this.edges=m}b.exports=function(n,m){for(var l=new Array(n),i=0;i<n;++i)l[i]=[];return new r(l,m)};var t=r.prototype;function o(n,m,l){for(var i=1,f=n.length;i<f;i+=2)if(n[i-1]===m&&n[i]===l)return n[i-1]=n[f-2],n[i]=n[f-1],void(n.length=f-2)}t.isConstraint=function(){var n=[0,0];function m(l,i){return l[0]-i[0]||l[1]-i[1]}return function(l,i){return n[0]=Math.min(l,i),n[1]=Math.max(l,i),e.eq(this.edges,n,m)>=0}}(),t.removeTriangle=function(n,m,l){var i=this.stars;o(i[n],m,l),o(i[m],l,n),o(i[l],n,m)},t.addTriangle=function(n,m,l){var i=this.stars;i[n].push(m,l),i[m].push(l,n),i[l].push(n,m)},t.opposite=function(n,m){for(var l=this.stars[m],i=1,f=l.length;i<f;i+=2)if(l[i]===n)return l[i-1];return-1},t.flip=function(n,m){var l=this.opposite(n,m),i=this.opposite(m,n);this.removeTriangle(n,m,l),this.removeTriangle(m,n,i),this.addTriangle(n,i,l),this.addTriangle(m,l,i)},t.edges=function(){for(var n=this.stars,m=[],l=0,i=n.length;l<i;++l)for(var f=n[l],u=0,s=f.length;u<s;u+=2)m.push([f[u],f[u+1]]);return m},t.cells=function(){for(var n=this.stars,m=[],l=0,i=n.length;l<i;++l)for(var f=n[l],u=0,s=f.length;u<s;u+=2){var d=f[u],h=f[u+1];l<Math.min(d,h)&&m.push([l,d,h])}return m}},{"binary-search-bounds":31}],47:[function(g,b,y){"use strict";b.exports=function(e){for(var r=1,t=1;t<e.length;++t)for(var o=0;o<t;++o)if(e[t]<e[o])r=-r;else if(e[o]===e[t])return 0;return r}},{}],48:[function(g,b,y){"use strict";var e=g("dup"),r=g("robust-linear-solve");function t(m,l){for(var i=0,f=m.length,u=0;u<f;++u)i+=m[u]*l[u];return i}function o(m){var l=m.length;if(0===l)return[];var i=e([m.length+1,m.length+1],1),f=e([m.length+1],1);i[l][l]=0;for(var u=0;u<l;++u){for(var s=0;s<=u;++s)i[s][u]=i[u][s]=2*t(m[u],m[s]);f[u]=t(m[u],m[u])}var d=r(i,f),h=0,a=d[l+1];for(u=0;u<a.length;++u)h+=a[u];var _=new Array(l);for(u=0;u<l;++u){a=d[u];var c=0;for(s=0;s<a.length;++s)c+=a[s];_[u]=c/h}return _}function n(m){if(0===m.length)return[];for(var l=m[0].length,i=e([l]),f=o(m),u=0;u<m.length;++u)for(var s=0;s<l;++s)i[s]+=m[u][s]*f[u];return i}n.barycenetric=o,b.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(g,b,y){b.exports=function(r){for(var t=e(r),o=0,n=0;n<r.length;++n)for(var m=r[n],l=0;l<t.length;++l)o+=Math.pow(m[l]-t[l],2);return Math.sqrt(o/r.length)};var e=g("circumcenter")},{circumcenter:48}],50:[function(g,b,y){"use strict";b.exports=function(T,x,w){var M,S,N,z;if(w){M=x;for(var D=new Array(x.length),C=0;C<x.length;++C){var P=x[C];D[C]=[P[0],P[1],w[C]]}x=D}for(var L=(N=!!w,void 0,_(x,z=d(S=T,[],s(S)),N),!!z);c(T,x,!!w);)L=!0;if(w&&L)for(M.length=0,w.length=0,C=0;C<x.length;++C)M.push([(P=x[C])[0],P[1]]),w.push(P[2]);return L};var e=g("union-find"),r=g("box-intersect"),t=g("robust-segment-intersect"),o=g("big-rat"),n=g("big-rat/cmp"),m=g("big-rat/to-float"),l=g("rat-vec"),i=g("nextafter"),f=g("./lib/rat-seg-intersect");function u(T){var x=m(T);return[i(x,-1/0),i(x,1/0)]}function s(T){for(var x=new Array(T.length),w=0;w<T.length;++w){var M=T[w];x[w]=[i(M[0],-1/0),i(M[1],-1/0),i(M[0],1/0),i(M[1],1/0)]}return x}function d(T,x,w){for(var M=x.length,D=new e(M),C=[],P=0;P<x.length;++P){var L=x[P],S=u(L[0]),E=u(L[1]);C.push([i(S[0],-1/0),i(E[0],-1/0),i(S[1],1/0),i(E[1],1/0)])}r(C,function(K,ne){D.link(K,ne)});var N=!0,z=new Array(M);for(P=0;P<M;++P)(G=D.find(P))!==P&&(N=!1,T[G]=[Math.min(T[P][0],T[G][0]),Math.min(T[P][1],T[G][1])]);if(N)return null;var q=0;for(P=0;P<M;++P){var G;(G=D.find(P))===P?(z[P]=q,T[q++]=T[P]):z[P]=-1}for(T.length=q,P=0;P<M;++P)z[P]<0&&(z[P]=z[D.find(P)]);return z}function h(T,x){return T[0]-x[0]||T[1]-x[1]}function a(T,x){return T[0]-x[0]||T[1]-x[1]||(T[2]<x[2]?-1:T[2]>x[2]?1:0)}function _(T,x,w){if(0!==T.length){if(x)for(var M=0;M<T.length;++M){var D=x[(P=T[M])[0]],C=x[P[1]];P[0]=Math.min(D,C),P[1]=Math.max(D,C)}else for(M=0;M<T.length;++M){var P;D=(P=T[M])[0],C=P[1],P[0]=Math.min(D,C),P[1]=Math.max(D,C)}T.sort(w?a:h);var L=1;for(M=1;M<T.length;++M){var S=T[M-1],E=T[M];(E[0]!==S[0]||E[1]!==S[1]||w&&E[2]!==S[2])&&(T[L++]=E)}T.length=L}}function c(T,x,w){var S,E,z,M=function(S,E){for(var N=new Array(E.length),z=0;z<E.length;++z){var q=E[z],G=S[q[0]],K=S[q[1]];N[z]=[i(Math.min(G[0],K[0]),-1/0),i(Math.min(G[1],K[1]),-1/0),i(Math.max(G[0],K[0]),1/0),i(Math.max(G[1],K[1]),1/0)]}return N}(T,x),D=(S=T,E=x,z=[],r(M,function(q,G){var K=E[q],ne=E[G];K[0]!==ne[0]&&K[0]!==ne[1]&&K[1]!==ne[0]&&K[1]!==ne[1]&&t(S[K[0]],S[K[1]],S[ne[0]],S[ne[1]])&&z.push([q,G])}),z),P=function(S,E,N,z){var q=[];return r(N,z,function(G,K){var ne=E[G];if(ne[0]!==K&&ne[1]!==K){var X=S[K];t(S[ne[0]],S[ne[1]],X,X)&&q.push([G,K])}}),q}(T,x,M,s(T)),L=d(T,function(S,E,N,z,q){var G,K,ne=S.map(function(xe){return[o(xe[0]),o(xe[1])]});for(G=0;G<N.length;++G){var X=N[G],J=X[1],se=E[K=X[0]],V=E[J],j=f(l(S[se[0]]),l(S[se[1]]),l(S[V[0]]),l(S[V[1]]));if(j){var H=S.length;S.push([m(j[0]),m(j[1])]),ne.push(j),z.push([K,H],[J,H])}}for(z.sort(function(xe,De){if(xe[0]!==De[0])return xe[0]-De[0];var Se=ne[xe[1]],ke=ne[De[1]];return n(Se[0],ke[0])||n(Se[1],ke[1])}),G=z.length-1;G>=0;--G){var oe=E[K=(be=z[G])[0]],U=oe[0],te=oe[1],ee=S[U],le=S[te];if((ee[0]-le[0]||ee[1]-le[1])<0){var ce=U;U=te,te=ce}oe[0]=U;var pe,de=oe[1]=be[1];for(q&&(pe=oe[2]);G>0&&z[G-1][0]===K;){var be,he=(be=z[--G])[1];E.push(q?[de,he,pe]:[de,he]),de=he}E.push(q?[de,te,pe]:[de,te])}return ne}(T,x,D,P,w));return _(x,L,w),!!L||D.length>0||P.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(g,b,y){"use strict";b.exports=function(f,u,s,d){var h=n(u,f),a=n(d,s),_=i(h,a);if(0===o(_))return null;var T=i(a,n(f,s)),x=r(T,_),w=l(h,x);return m(f,w)};var e=g("big-rat/mul"),r=g("big-rat/div"),t=g("big-rat/sub"),o=g("big-rat/sign"),n=g("rat-vec/sub"),m=g("rat-vec/add"),l=g("rat-vec/muls");function i(f,u){return t(e(f[0],u[1]),e(f[1],u[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(g,b,y){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(g,b,y){"use strict";var e=g("./colorScale"),r=g("lerp");function t(m){return[m[0]/255,m[1]/255,m[2]/255,m[3]]}function o(m){for(var l,i="#",f=0;f<3;++f)i+=("00"+(l=(l=m[f]).toString(16))).substr(l.length);return i}function n(m){return"rgba("+m.join(",")+")"}b.exports=function(m){var l,i,f,u,s,d,h,a,_,c;if(m||(m={}),a=(m.nshades||72)-1,h=m.format||"hex",(d=m.colormap)||(d="jet"),"string"==typeof d){if(d=d.toLowerCase(),!e[d])throw Error(d+" not a supported colorscale");s=e[d]}else{if(!Array.isArray(d))throw Error("unsupported colormap option",d);s=d.slice()}if(s.length>a+1)throw new Error(d+" map requires nshades to be at least size "+s.length);_=Array.isArray(m.alpha)?2!==m.alpha.length?[1,1]:m.alpha.slice():"number"==typeof m.alpha?[m.alpha,m.alpha]:[1,1],l=s.map(function(D){return Math.round(D.index*a)}),_[0]=Math.min(Math.max(_[0],0),1),_[1]=Math.min(Math.max(_[1],0),1);var T=s.map(function(D,C){var P=s[C].index,L=s[C].rgb.slice();return 4===L.length&&L[3]>=0&&L[3]<=1||(L[3]=_[0]+(_[1]-_[0])*P),L}),x=[];for(c=0;c<l.length-1;++c){u=l[c+1]-l[c],i=T[c],f=T[c+1];for(var w=0;w<u;w++){var M=w/u;x.push([Math.round(r(i[0],f[0],M)),Math.round(r(i[1],f[1],M)),Math.round(r(i[2],f[2],M)),r(i[3],f[3],M)])}}return x.push(s[s.length-1].rgb.concat(_[1])),"hex"===h?x=x.map(o):"rgbaString"===h?x=x.map(n):"float"===h&&(x=x.map(t)),x}},{"./colorScale":52,lerp:240}],54:[function(g,b,y){"use strict";b.exports=function(l,i,f,u){var s=e(i,f,u);if(0===s){var d=r(e(l,i,f)),h=r(e(l,i,u));if(d===h){if(0===d){var a=m(l,i,f);return a===m(l,i,u)?0:a?1:-1}return 0}return 0===h?d>0||m(l,i,u)?-1:1:0===d?h>0||m(l,i,f)?1:-1:r(h-d)}var c=e(l,i,f);return c>0?s>0&&e(l,i,u)>0?1:-1:c<0?s>0||e(l,i,u)>0?1:-1:e(l,i,u)>0||m(l,i,f)?1:-1};var e=g("robust-orientation"),r=g("signum"),t=g("two-sum"),o=g("robust-product"),n=g("robust-sum");function m(l,i,f){var u=t(l[0],-i[0]),s=t(l[1],-i[1]),d=t(f[0],-i[0]),h=t(f[1],-i[1]),a=n(o(u,d),o(s,h));return a[a.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(g,b,y){"use strict";b.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(g,b,y){b.exports=function(t,o){var n=t.length,m=t.length-o.length;if(m)return m;switch(n){case 0:return 0;case 1:return t[0]-o[0];case 2:return t[0]+t[1]-o[0]-o[1]||e(t[0],t[1])-e(o[0],o[1]);case 3:var l=t[0]+t[1],i=o[0]+o[1];if(m=l+t[2]-(i+o[2]))return m;var f=e(t[0],t[1]),u=e(o[0],o[1]);return e(f,t[2])-e(u,o[2])||e(f+t[2],l)-e(u+o[2],i);case 4:var s=t[0],d=t[1],h=t[2],a=t[3],_=o[0],c=o[1],T=o[2],x=o[3];return s+d+h+a-(_+c+T+x)||e(s,d,h,a)-e(_,c,T,x,_)||e(s+d,s+h,s+a,d+h,d+a,h+a)-e(_+c,_+T,_+x,c+T,c+x,T+x)||e(s+d+h,s+d+a,s+h+a,d+h+a)-e(_+c+T,_+c+x,_+T+x,c+T+x);default:for(var w=t.slice().sort(r),M=o.slice().sort(r),D=0;D<n;++D)if(m=w[D]-M[D])return m;return 0}};var e=Math.min;function r(t,o){return t-o}},{}],57:[function(g,b,y){"use strict";var e=g("compare-cell"),r=g("cell-orientation");b.exports=function(t,o){return e(t,o)||r(t)-r(o)}},{"cell-orientation":47,"compare-cell":56}],58:[function(g,b,y){"use strict";var e=g("./lib/ch1d"),r=g("./lib/ch2d"),t=g("./lib/chnd");b.exports=function(o){var n=o.length;if(0===n)return[];if(1===n)return[[0]];var m=o[0].length;return 0===m?[]:1===m?e(o):2===m?r(o):t(o,m)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(g,b,y){"use strict";b.exports=function(e){for(var r=0,t=0,o=1;o<e.length;++o)e[o][0]<e[r][0]&&(r=o),e[o][0]>e[t][0]&&(t=o);return r<t?[[r],[t]]:r>t?[[t],[r]]:[[r]]}},{}],60:[function(g,b,y){"use strict";b.exports=function(r){var t=e(r),o=t.length;if(o<=2)return[];for(var n=new Array(o),m=t[o-1],l=0;l<o;++l){var i=t[l];n[l]=[m,i],m=i}return n};var e=g("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(g,b,y){"use strict";b.exports=function(t,o){try{return e(t,!0)}catch{var n=r(t);if(n.length<=o)return[];var m=function(i,f){for(var u=i.length,s=new Array(u),d=0;d<f.length;++d)s[d]=i[f[d]];var h=f.length;for(d=0;d<u;++d)f.indexOf(d)<0&&(s[h++]=i[d]);return s}(t,n);return function(i,f){for(var u=i.length,s=f.length,d=0;d<u;++d)for(var h=i[d],a=0;a<h.length;++a){var _=h[a];if(_<s)h[a]=f[_];else{_-=s;for(var c=0;c<s;++c)_>=f[c]&&(_+=1);h[a]=_}}return i}(e(m,!0),n)}};var e=g("incremental-convex-hull"),r=g("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(g,b,y){"use strict";b.exports=function(e,r,t,o,n,m){var l=n-1,i=n*n,f=l*l,u=(1+2*n)*f,s=n*f,d=i*(3-2*n),h=i*l;if(e.length){m||(m=new Array(e.length));for(var a=e.length-1;a>=0;--a)m[a]=u*e[a]+s*r[a]+d*t[a]+h*o[a];return m}return u*e+s*r+d*t+h*o},b.exports.derivative=function(e,r,t,o,n,m){var l=6*n*n-6*n,i=3*n*n-4*n+1,f=-6*n*n+6*n,u=3*n*n-2*n;if(e.length){m||(m=new Array(e.length));for(var s=e.length-1;s>=0;--s)m[s]=l*e[s]+i*r[s]+f*t[s]+u*o[s];return m}return l*e+i*r+f*t[s]+u*o}},{}],63:[function(g,b,y){"use strict";var e=g("incremental-convex-hull"),r=g("uniq");function t(n,m){this.point=n,this.index=m}function o(n,m){for(var l=n.point,i=m.point,f=l.length,u=0;u<f;++u){var s=i[u]-l[u];if(s)return s}return 0}b.exports=function(n,m){var l=n.length;if(0===l)return[];var i=n[0].length;if(i<1)return[];if(1===i)return function(P,L,S){if(1===P)return S?[[-1,0]]:[];var E=L.map(function(K,ne){return[K[0],ne]});E.sort(function(K,ne){return K[0]-ne[0]});for(var N=new Array(P-1),z=1;z<P;++z)N[z-1]=[E[z-1][1],E[z][1]];return S&&N.push([-1,N[0][1]],[N[P-1][1],-1]),N}(l,n,m);for(var f=new Array(l),u=1,s=0;s<l;++s){for(var d=n[s],h=new Array(i+1),a=0,_=0;_<i;++_){var c=d[_];h[_]=c,a+=c*c}h[i]=a,f[s]=new t(h,s),u=Math.max(a,u)}r(f,o),l=f.length;var T=new Array(l+i+1),x=new Array(l+i+1),w=(i+1)*(i+1)*u,M=new Array(i+1);for(s=0;s<=i;++s)M[s]=0;for(M[i]=w,T[0]=M.slice(),x[0]=-1,s=0;s<=i;++s)(h=M.slice())[s]=1,T[s+1]=h,x[s+1]=-1;for(s=0;s<l;++s){var D=f[s];T[s+i+1]=D.point,x[s+i+1]=D.index}var C=e(T,!1);if(C=C.filter(m?function(P){for(var L=0,S=0;S<=i;++S){var E=x[P[S]];if(E<0&&++L>=2)return!1;P[S]=E}return!0}:function(P){for(var L=0;L<=i;++L){var S=x[P[L]];if(S<0)return!1;P[L]=S}return!0}),1&i)for(s=0;s<C.length;++s)h=(D=C[s])[0],D[0]=D[1],D[1]=h;return C}},{"incremental-convex-hull":233,uniq:310}],64:[function(g,b,y){(function(e){(function(){var r=!1;if(typeof Float64Array<"u"){var t=new Float64Array(1),o=new Uint32Array(t.buffer);t[0]=1,r=!0,1072693248===o[1]?(b.exports=function(m){return t[0]=m,[o[0],o[1]]},b.exports.pack=function(m,l){return o[0]=m,o[1]=l,t[0]},b.exports.lo=function(m){return t[0]=m,o[0]},b.exports.hi=function(m){return t[0]=m,o[1]}):1072693248===o[0]?(b.exports=function(m){return t[0]=m,[o[1],o[0]]},b.exports.pack=function(m,l){return o[1]=m,o[0]=l,t[0]},b.exports.lo=function(m){return t[0]=m,o[1]},b.exports.hi=function(m){return t[0]=m,o[0]}):r=!1}if(!r){var n=new e(8);b.exports=function(m){return n.writeDoubleLE(m,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},b.exports.pack=function(m,l){return n.writeUInt32LE(m,0,!0),n.writeUInt32LE(l,4,!0),n.readDoubleLE(0,!0)},b.exports.lo=function(m){return n.writeDoubleLE(m,0,!0),n.readUInt32LE(0,!0)},b.exports.hi=function(m){return n.writeDoubleLE(m,0,!0),n.readUInt32LE(4,!0)}}b.exports.sign=function(m){return b.exports.hi(m)>>>31},b.exports.exponent=function(m){return(b.exports.hi(m)<<1>>>21)-1023},b.exports.fraction=function(m){var l=b.exports.lo(m),i=b.exports.hi(m),f=1048575&i;return 2146435072&i&&(f+=1<<20),[l,f]},b.exports.denormalized=function(m){return!(2146435072&b.exports.hi(m))}}).call(this)}).call(this,g("buffer").Buffer)},{buffer:3}],65:[function(g,b,y){"use strict";b.exports=function(e,r){switch(void 0===r&&(r=0),typeof e){case"number":if(e>0)return function(t,o){var n,m;for(n=new Array(t),m=0;m<t;++m)n[m]=o;return n}(0|e,r);break;case"object":if("number"==typeof e.length)return function t(o,n,m){var l=0|o[m];if(l<=0)return[];var i,f=new Array(l);if(m===o.length-1)for(i=0;i<l;++i)f[i]=n;else for(i=0;i<l;++i)f[i]=t(o,n,m+1);return f}(e,r,0)}return[]}},{}],66:[function(g,b,y){"use strict";b.exports=function(r,t){var o=r.length;if("number"!=typeof t){t=0;for(var n=0;n<o;++n){var m=r[n];t=Math.max(t,m[0],m[1])}t=1+(0|t)}t|=0;var l=new Array(t);for(n=0;n<t;++n)l[n]=[];for(n=0;n<o;++n)l[(m=r[n])[0]].push(m[1]),l[m[1]].push(m[0]);for(var i=0;i<t;++i)e(l[i],function(f,u){return f-u});return l};var e=g("uniq")},{uniq:310}],67:[function(g,b,y){"use strict";b.exports=function(e,r,t){var o=r||0,n=t||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[o*e[12]+e[8],o*e[13]+e[9],o*e[14]+e[10],o*e[15]+e[11]],[n*e[12]-e[8],n*e[13]-e[9],n*e[14]-e[10],n*e[15]-e[11]]]}},{}],68:[function(g,b,y){"use strict";b.exports=function(l,i,f){switch(arguments.length){case 0:return new o([0],[0],0);case 1:return"number"==typeof l?new o(u=m(l),u,0):new o(l,m(l.length),0);case 2:if("number"==typeof i){var u=m(l.length);return new o(l,u,+i)}f=0;case 3:if(l.length!==i.length)throw new Error("state and velocity lengths must match");return new o(l,i,f)}};var e=g("cubic-hermite"),r=g("binary-search-bounds");function t(l,i,f){return Math.min(i,Math.max(l,f))}function o(l,i,f){this.dimension=l.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var u=0;u<this.dimension;++u)this.bounds[0][u]=-1/0,this.bounds[1][u]=1/0;this._state=l.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[f],this._scratch=[l.slice(),l.slice(),l.slice(),l.slice(),l.slice()]}var n=o.prototype;function m(l){for(var i=new Array(l),f=0;f<l;++f)i[f]=0;return i}n.flush=function(l){var i=r.gt(this._time,l)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},n.curve=function(l){var i=this._time,f=i.length,u=r.le(i,l),s=this._scratch[0],d=this._state,h=this._velocity,a=this.dimension,_=this.bounds;if(u<0)for(var c=a-1,T=0;T<a;++T,--c)s[T]=d[c];else if(u>=f-1){c=d.length-1;var x=l-i[f-1];for(T=0;T<a;++T,--c)s[T]=d[c]+x*h[c]}else{c=a*(u+1)-1;var w=i[u],M=i[u+1]-w||1,D=this._scratch[1],C=this._scratch[2],P=this._scratch[3],L=this._scratch[4],S=!0;for(T=0;T<a;++T,--c)D[T]=d[c],P[T]=h[c]*M,C[T]=d[c+a],L[T]=h[c+a]*M,S=S&&D[T]===C[T]&&P[T]===L[T]&&0===P[T];if(S)for(T=0;T<a;++T)s[T]=D[T];else e(D,P,C,L,(l-w)/M,s)}var E=_[0],N=_[1];for(T=0;T<a;++T)s[T]=t(E[T],N[T],s[T]);return s},n.dcurve=function(l){var i=this._time,f=i.length,u=r.le(i,l),s=this._scratch[0],d=this._state,h=this._velocity,a=this.dimension;if(u>=f-1)for(var _=d.length-1,c=0;c<a;++c,--_)s[c]=h[_];else{_=a*(u+1)-1;var T=i[u],x=i[u+1]-T||1,w=this._scratch[1],M=this._scratch[2],D=this._scratch[3],C=this._scratch[4],P=!0;for(c=0;c<a;++c,--_)w[c]=d[_],D[c]=h[_]*x,M[c]=d[_+a],C[c]=h[_+a]*x,P=P&&w[c]===M[c]&&D[c]===C[c]&&0===D[c];if(P)for(c=0;c<a;++c)s[c]=0;else for(e.derivative(w,D,M,C,(l-T)/x,s),c=0;c<a;++c)s[c]/=x}return s},n.lastT=function(){var l=this._time;return l[l.length-1]},n.stable=function(){for(var l=this._velocity,i=l.length,f=this.dimension-1;f>=0;--f)if(l[--i])return!1;return!0},n.jump=function(l){var i=this.lastT(),f=this.dimension;if(!(l<i||arguments.length!==f+1)){var u=this._state,s=this._velocity,d=u.length-this.dimension,h=this.bounds,a=h[0],_=h[1];this._time.push(i,l);for(var c=0;c<2;++c)for(var T=0;T<f;++T)u.push(u[d++]),s.push(0);for(this._time.push(l),T=f;T>0;--T)u.push(t(a[T-1],_[T-1],arguments[T])),s.push(0)}},n.push=function(l){var i=this.lastT(),f=this.dimension;if(!(l<i||arguments.length!==f+1)){var u=this._state,s=this._velocity,d=u.length-this.dimension,h=l-i,a=this.bounds,_=a[0],c=a[1],T=h>1e-6?1/h:0;this._time.push(l);for(var x=f;x>0;--x){var w=t(_[x-1],c[x-1],arguments[x]);u.push(w),s.push((w-u[d++])*T)}}},n.set=function(l){var i=this.dimension;if(!(l<this.lastT()||arguments.length!==i+1)){var f=this._state,u=this._velocity,s=this.bounds,d=s[0],h=s[1];this._time.push(l);for(var a=i;a>0;--a)f.push(t(d[a-1],h[a-1],arguments[a])),u.push(0)}},n.move=function(l){var i=this.lastT(),f=this.dimension;if(!(l<=i||arguments.length!==f+1)){var u=this._state,s=this._velocity,d=u.length-this.dimension,h=this.bounds,a=h[0],_=h[1],c=l-i,T=c>1e-6?1/c:0;this._time.push(l);for(var x=f;x>0;--x){var w=arguments[x];u.push(t(a[x-1],_[x-1],u[d++]+w)),s.push(w*T)}}},n.idle=function(l){var i=this.lastT();if(!(l<i)){var f=this.dimension,u=this._state,s=this._velocity,d=u.length-f,h=this.bounds,a=h[0],_=h[1],c=l-i;this._time.push(l);for(var T=f-1;T>=0;--T)u.push(t(a[T],_[T],u[d]+c*s[d])),s.push(0),d+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(g,b,y){"use strict";function e(a,_,c,T,x,w){this._color=a,this.key=_,this.value=c,this.left=T,this.right=x,this._count=w}function r(a){return new e(a._color,a.key,a.value,a.left,a.right,a._count)}function t(a,_){return new e(a,_.key,_.value,_.left,_.right,_._count)}function o(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function n(a,_){this._compare=a,this.root=_}b.exports=function(a){return new n(a||h,null)};var m=n.prototype;function l(a,_){var c;return _.left&&(c=l(a,_.left))?c:(c=a(_.key,_.value))||(_.right?l(a,_.right):void 0)}function i(a,_,c,T){var x;return _(a,T.key)<=0&&(T.left&&(x=i(a,_,c,T.left))||(x=c(T.key,T.value)))?x:T.right?i(a,_,c,T.right):void 0}function f(a,_,c,T,x){var w,M=c(a,x.key),D=c(_,x.key);return M<=0&&(x.left&&(w=f(a,_,c,T,x.left))||D>0&&(w=T(x.key,x.value)))?w:D>0&&x.right?f(a,_,c,T,x.right):void 0}function u(a,_){this.tree=a,this._stack=_}Object.defineProperty(m,"keys",{get:function(){var a=[];return this.forEach(function(_,c){a.push(_)}),a}}),Object.defineProperty(m,"values",{get:function(){var a=[];return this.forEach(function(_,c){a.push(c)}),a}}),Object.defineProperty(m,"length",{get:function(){return this.root?this.root._count:0}}),m.insert=function(a,_){for(var c=this._compare,T=this.root,x=[],w=[];T;){var M=c(a,T.key);x.push(T),w.push(M),T=M<=0?T.left:T.right}x.push(new e(0,a,_,null,null,1));for(var D=x.length-2;D>=0;--D)T=x[D],x[D]=w[D]<=0?new e(T._color,T.key,T.value,x[D+1],T.right,T._count+1):new e(T._color,T.key,T.value,T.left,x[D+1],T._count+1);for(D=x.length-1;D>1;--D){var C=x[D-1];if(T=x[D],1===C._color||1===T._color)break;var P=x[D-2];if(P.left===C)if(C.left===T){if(!(L=P.right)||0!==L._color){P._color=0,P.left=C.right,C._color=1,C.right=P,x[D-2]=C,x[D-1]=T,o(P),o(C),D>=3&&((S=x[D-3]).left===P?S.left=C:S.right=C);break}C._color=1,P.right=t(1,L),P._color=0,D-=1}else{if(!(L=P.right)||0!==L._color){C.right=T.left,P._color=0,P.left=T.right,T._color=1,T.left=C,T.right=P,x[D-2]=T,x[D-1]=C,o(P),o(C),o(T),D>=3&&((S=x[D-3]).left===P?S.left=T:S.right=T);break}C._color=1,P.right=t(1,L),P._color=0,D-=1}else if(C.right===T){if(!(L=P.left)||0!==L._color){P._color=0,P.right=C.left,C._color=1,C.left=P,x[D-2]=C,x[D-1]=T,o(P),o(C),D>=3&&((S=x[D-3]).right===P?S.right=C:S.left=C);break}C._color=1,P.left=t(1,L),P._color=0,D-=1}else{var L;if(!(L=P.left)||0!==L._color){var S;C.left=T.right,P._color=0,P.right=T.left,T._color=1,T.right=C,T.left=P,x[D-2]=T,x[D-1]=C,o(P),o(C),o(T),D>=3&&((S=x[D-3]).right===P?S.right=T:S.left=T);break}C._color=1,P.left=t(1,L),P._color=0,D-=1}}return x[0]._color=1,new n(c,x[0])},m.forEach=function(a,_,c){if(this.root)switch(arguments.length){case 1:return l(a,this.root);case 2:return i(_,this._compare,a,this.root);case 3:return this._compare(_,c)>=0?void 0:f(_,c,this._compare,a,this.root)}},Object.defineProperty(m,"begin",{get:function(){for(var a=[],_=this.root;_;)a.push(_),_=_.left;return new u(this,a)}}),Object.defineProperty(m,"end",{get:function(){for(var a=[],_=this.root;_;)a.push(_),_=_.right;return new u(this,a)}}),m.at=function(a){if(a<0)return new u(this,[]);for(var _=this.root,c=[];;){if(c.push(_),_.left){if(a<_.left._count){_=_.left;continue}a-=_.left._count}if(!a)return new u(this,c);if(a-=1,!_.right||a>=_.right._count)break;_=_.right}return new u(this,[])},m.ge=function(a){for(var _=this._compare,c=this.root,T=[],x=0;c;){var w=_(a,c.key);T.push(c),w<=0&&(x=T.length),c=w<=0?c.left:c.right}return T.length=x,new u(this,T)},m.gt=function(a){for(var _=this._compare,c=this.root,T=[],x=0;c;){var w=_(a,c.key);T.push(c),w<0&&(x=T.length),c=w<0?c.left:c.right}return T.length=x,new u(this,T)},m.lt=function(a){for(var _=this._compare,c=this.root,T=[],x=0;c;){var w=_(a,c.key);T.push(c),w>0&&(x=T.length),c=w<=0?c.left:c.right}return T.length=x,new u(this,T)},m.le=function(a){for(var _=this._compare,c=this.root,T=[],x=0;c;){var w=_(a,c.key);T.push(c),w>=0&&(x=T.length),c=w<0?c.left:c.right}return T.length=x,new u(this,T)},m.find=function(a){for(var _=this._compare,c=this.root,T=[];c;){var x=_(a,c.key);if(T.push(c),0===x)return new u(this,T);c=x<=0?c.left:c.right}return new u(this,[])},m.remove=function(a){var _=this.find(a);return _?_.remove():this},m.get=function(a){for(var _=this._compare,c=this.root;c;){var T=_(a,c.key);if(0===T)return c.value;c=T<=0?c.left:c.right}};var s=u.prototype;function d(a,_){a.key=_.key,a.value=_.value,a.left=_.left,a.right=_.right,a._color=_._color,a._count=_._count}function h(a,_){return a<_?-1:a>_?1:0}Object.defineProperty(s,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(s,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),s.clone=function(){return new u(this.tree,this._stack.slice())},s.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var _=new Array(a.length),c=a[a.length-1];_[_.length-1]=new e(c._color,c.key,c.value,c.left,c.right,c._count);for(var T=a.length-2;T>=0;--T)_[T]=(c=a[T]).left===a[T+1]?new e(c._color,c.key,c.value,_[T+1],c.right,c._count):new e(c._color,c.key,c.value,c.left,_[T+1],c._count);if((c=_[_.length-1]).left&&c.right){var x=_.length;for(c=c.left;c.right;)_.push(c),c=c.right;var w=_[x-1];for(_.push(new e(c._color,w.key,w.value,c.left,c.right,c._count)),_[x-1].key=c.key,_[x-1].value=c.value,T=_.length-2;T>=x;--T)_[T]=new e((c=_[T])._color,c.key,c.value,c.left,_[T+1],c._count);_[x-1].left=_[x]}if(0===(c=_[_.length-1])._color){var M=_[_.length-2];for(M.left===c?M.left=null:M.right===c&&(M.right=null),_.pop(),T=0;T<_.length;++T)_[T]._count--;return new n(this.tree._compare,_[0])}if(c.left||c.right){for(c.left?d(c,c.left):c.right&&d(c,c.right),c._color=1,T=0;T<_.length-1;++T)_[T]._count--;return new n(this.tree._compare,_[0])}if(1===_.length)return new n(this.tree._compare,null);for(T=0;T<_.length;++T)_[T]._count--;var D=_[_.length-2];return function(C){for(var P,L,S,E,N=C.length-1;N>=0;--N){if(P=C[N],0===N)return void(P._color=1);if((L=C[N-1]).left===P){if((S=L.right).right&&0===S.right._color)return E=(S=L.right=r(S)).right=r(S.right),L.right=S.left,S.left=L,S.right=E,S._color=L._color,P._color=1,L._color=1,E._color=1,o(L),o(S),N>1&&((z=C[N-2]).left===L?z.left=S:z.right=S),void(C[N-1]=S);if(S.left&&0===S.left._color)return E=(S=L.right=r(S)).left=r(S.left),L.right=E.left,S.left=E.right,E.left=L,E.right=S,E._color=L._color,L._color=1,S._color=1,P._color=1,o(L),o(S),o(E),N>1&&((z=C[N-2]).left===L?z.left=E:z.right=E),void(C[N-1]=E);if(1===S._color){if(0===L._color)return L._color=1,void(L.right=t(0,S));L.right=t(0,S);continue}S=r(S),L.right=S.left,S.left=L,S._color=L._color,L._color=0,o(L),o(S),N>1&&((z=C[N-2]).left===L?z.left=S:z.right=S),C[N-1]=S,C[N]=L,N+1<C.length?C[N+1]=P:C.push(P),N+=2}else{if((S=L.left).left&&0===S.left._color)return E=(S=L.left=r(S)).left=r(S.left),L.left=S.right,S.right=L,S.left=E,S._color=L._color,P._color=1,L._color=1,E._color=1,o(L),o(S),N>1&&((z=C[N-2]).right===L?z.right=S:z.left=S),void(C[N-1]=S);if(S.right&&0===S.right._color)return E=(S=L.left=r(S)).right=r(S.right),L.left=E.right,S.right=E.left,E.right=L,E.left=S,E._color=L._color,L._color=1,S._color=1,P._color=1,o(L),o(S),o(E),N>1&&((z=C[N-2]).right===L?z.right=E:z.left=E),void(C[N-1]=E);if(1===S._color){if(0===L._color)return L._color=1,void(L.left=t(0,S));L.left=t(0,S);continue}var z;S=r(S),L.left=S.right,S.right=L,S._color=L._color,L._color=0,o(L),o(S),N>1&&((z=C[N-2]).right===L?z.right=S:z.left=S),C[N-1]=S,C[N]=L,N+1<C.length?C[N+1]=P:C.push(P),N+=2}}}(_),D.left===c?D.left=null:D.right=null,new n(this.tree._compare,_[0])},Object.defineProperty(s,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(s,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(s,"index",{get:function(){var a=0,_=this._stack;if(0===_.length){var c=this.tree.root;return c?c._count:0}_[_.length-1].left&&(a=_[_.length-1].left._count);for(var T=_.length-2;T>=0;--T)_[T+1]===_[T].right&&(++a,_[T].left&&(a+=_[T].left._count));return a},enumerable:!0}),s.next=function(){var a=this._stack;if(0!==a.length){var _=a[a.length-1];if(_.right)for(_=_.right;_;)a.push(_),_=_.left;else for(a.pop();a.length>0&&a[a.length-1].right===_;)_=a[a.length-1],a.pop()}},Object.defineProperty(s,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var _=a.length-1;_>0;--_)if(a[_-1].left===a[_])return!0;return!1}}),s.update=function(a){var _=this._stack;if(0===_.length)throw new Error("Can't update empty node!");var c=new Array(_.length),T=_[_.length-1];c[c.length-1]=new e(T._color,T.key,a,T.left,T.right,T._count);for(var x=_.length-2;x>=0;--x)c[x]=(T=_[x]).left===_[x+1]?new e(T._color,T.key,T.value,c[x+1],T.right,T._count):new e(T._color,T.key,T.value,T.left,c[x+1],T._count);return new n(this.tree._compare,c[0])},s.prev=function(){var a=this._stack;if(0!==a.length){var _=a[a.length-1];if(_.left)for(_=_.left;_;)a.push(_),_=_.right;else for(a.pop();a.length>0&&a[a.length-1].left===_;)_=a[a.length-1],a.pop()}},Object.defineProperty(s,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var _=a.length-1;_>0;--_)if(a[_-1].right===a[_])return!0;return!1}})},{}],70:[function(g,b,y){"use strict";b.exports=function(x,w){var M=new i(x);return M.update(w),M};var e=g("./lib/text.js"),r=g("./lib/lines.js"),t=g("./lib/background.js"),o=g("./lib/cube.js"),n=g("./lib/ticks.js"),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function l(x,w){return x[0]=w[0],x[1]=w[1],x[2]=w[2],x}function i(x){this.gl=x,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=t(x)}var f=i.prototype;function u(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}f.update=function(x){function w(K,ne,X){if(X in x){var J,se=x[X],V=this[X];this[X]=J=(K?Array.isArray(se)&&Array.isArray(se[0]):Array.isArray(se))?[ne(se[0]),ne(se[1]),ne(se[2])]:[ne(se),ne(se),ne(se)];for(var j=0;j<3;++j)if(J[j]!==V[j])return!0}return!1}x=x||{};var M,D=w.bind(this,!1,Number),C=w.bind(this,!1,Boolean),P=w.bind(this,!1,String),L=w.bind(this,!0,function(K){if(Array.isArray(K)){if(3===K.length)return[+K[0],+K[1],+K[2],1];if(4===K.length)return[+K[0],+K[1],+K[2],+K[3]]}return[0,0,0,1]}),S=!1,E=!1;if("bounds"in x)for(var N=x.bounds,z=0;z<2;++z)for(var q=0;q<3;++q)N[z][q]!==this.bounds[z][q]&&(E=!0),this.bounds[z][q]=N[z][q];if("ticks"in x)for(M=x.ticks,S=!0,this.autoTicks=!1,z=0;z<3;++z)this.tickSpacing[z]=0;else D("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in x||"tickSpacing"in x||(this.autoTicks=!0),E=!0,S=!0,this._firstInit=!1),E&&this.autoTicks&&(M=n.create(this.bounds,this.tickSpacing),S=!0),S){for(z=0;z<3;++z)M[z].sort(function(K,ne){return K.x-ne.x});n.equal(M,this.ticks)?S=!1:this.ticks=M}C("tickEnable"),P("tickFont")&&(S=!0),D("tickSize"),D("tickAngle"),D("tickPad"),L("tickColor");var G=P("labels");P("labelFont")&&(G=!0),C("labelEnable"),D("labelSize"),D("labelPad"),L("labelColor"),C("lineEnable"),C("lineMirror"),D("lineWidth"),L("lineColor"),C("lineTickEnable"),C("lineTickMirror"),D("lineTickLength"),D("lineTickWidth"),L("lineTickColor"),C("gridEnable"),D("gridWidth"),L("gridColor"),C("zeroEnable"),L("zeroLineColor"),D("zeroLineWidth"),C("backgroundEnable"),L("backgroundColor"),this._text?this._text&&(G||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var s=[new u,new u,new u];function d(x,w,M,D,C){for(var P=x.primalOffset,L=x.primalMinor,S=x.mirrorOffset,E=x.mirrorMinor,N=D[w],z=0;z<3;++z)if(w!==z){var q=P,G=S,K=L,ne=E;N&1<<z&&(q=S,G=P,K=E,ne=L),q[z]=M[0][z],G[z]=M[1][z],C[z]>0?(K[z]=-1,ne[z]=0):(K[z]=0,ne[z]=1)}}var h=[0,0,0],a={model:m,view:m,projection:m,_ortho:!1};f.isOpaque=function(){return!0},f.isTransparent=function(){return!1},f.drawTransparent=function(x){};var _=[0,0,0],c=[0,0,0],T=[0,0,0];f.draw=function(x){for(var w=this.gl,M=(x=x||a).model||m,D=x.view||m,C=x.projection||m,P=this.bounds,L=x._ortho||!1,S=o(M,D,C,P,L),E=S.cubeEdges,N=S.axis,ne=(L?2:1)*this.pixelRatio*(C[3]*D[12]+C[7]*D[13]+C[11]*D[14]+C[15]*D[15])/w.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=E[X],this.lastCubeProps.axis[X]=N[X];var J=s;for(X=0;X<3;++X)d(s[X],X,this.bounds,E,N);w=this.gl;var se,pe,de,Fe,ve,Te,Le,Oe,Ne,Be,He,Ve,V=h;for(X=0;X<3;++X)V[X]=this.backgroundEnable[X]?N[X]:0;for(this._background.draw(M,D,C,P,V,this.backgroundColor),this._lines.bind(M,D,C,this),X=0;X<3;++X){var j=[0,0,0];j[X]=N[X]>0?P[1][X]:P[0][X];for(var H=0;H<2;++H){var oe=(X+1+H)%3,U=(X+1+(1^H))%3;this.gridEnable[oe]&&this._lines.drawGrid(oe,U,this.bounds,j,this.gridColor[oe],this.gridWidth[oe]*this.pixelRatio)}for(H=0;H<2;++H)oe=(X+1+H)%3,this.zeroEnable[U=(X+1+(1^H))%3]&&Math.min(P[0][U],P[1][U])<=0&&Math.max(P[0][U],P[1][U])>=0&&this._lines.drawZero(oe,U,this.bounds,j,this.zeroLineColor[U],this.zeroLineWidth[U]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,J[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,J[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var te=l(_,J[X].primalMinor),ee=l(c,J[X].mirrorMinor),le=this.lineTickLength;for(H=0;H<3;++H){var ce=ne/M[5*H];te[H]*=le[H]*ce,ee[H]*=le[H]*ce}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,J[X].primalOffset,te,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,J[X].mirrorOffset,ee,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function be(Fe){(de=[0,0,0])[Fe]=1}for(this._lines.unbind(),this._text.bind(M,D,C,this.pixelRatio),X=0;X<3;++X){var xe=J[X].primalMinor,De=J[X].mirrorMinor,Se=l(T,J[X].primalOffset);for(H=0;H<3;++H)this.lineTickEnable[X]&&(Se[H]+=ne*xe[H]*Math.max(this.lineTickLength[H],0)/M[5*H]);var ke=[0,0,0];if(ke[X]=1,this.tickEnable[X]){for(-3600===this.tickAngle[X]?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,se[0]="auto"===(se=[this.tickAlign[X],.5,pe=1])[0]?0:parseInt(""+se[0]),de=[0,0,0],Le=void 0,Oe=void 0,Ne=void 0,Be=void 0,He=void 0,Ve=void 0,Be=(ve=xe)[Oe=((Fe=X)+2)%3],He=(Te=De)[Le=(Fe+1)%3],Ve=Te[Oe],(Ne=ve[Le])>0&&Ve>0||Ne>0&&Ve<0||Ne<0&&Ve>0||Ne<0&&Ve<0?be(Le):(Be>0&&He>0||Be>0&&He<0||Be<0&&He>0||Be<0&&He<0)&&be(Oe),H=0;H<3;++H)Se[H]+=ne*xe[H]*this.tickPad[H]/M[5*H];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],Se,this.tickColor[X],ke,de,se)}if(this.labelEnable[X]){for(pe=0,de=[0,0,0],this.labels[X].length>4&&(be(X),pe=1),se[0]="auto"===(se=[this.labelAlign[X],.5,pe])[0]?0:parseInt(""+se[0]),H=0;H<3;++H)Se[H]+=ne*xe[H]*this.labelPad[H]/M[5*H];Se[X]+=.5*(P[0][X]+P[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],Se,this.labelColor[X],[0,0,0],de,se)}}this._text.unbind()},f.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(g,b,y){"use strict";b.exports=function(m){for(var l=[],i=[],f=0,u=0;u<3;++u)for(var s=(u+1)%3,d=(u+2)%3,h=[0,0,0],a=[0,0,0],_=-1;_<=1;_+=2){i.push(f,f+2,f+1,f+1,f+2,f+3),h[u]=_,a[u]=_;for(var c=-1;c<=1;c+=2){h[s]=c;for(var T=-1;T<=1;T+=2)h[d]=T,l.push(h[0],h[1],h[2],a[0],a[1],a[2]),f+=1}var x=s;s=d,d=x}var w=e(m,new Float32Array(l)),M=e(m,new Uint16Array(i),m.ELEMENT_ARRAY_BUFFER),D=r(m,[{buffer:w,type:m.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:m.FLOAT,size:3,offset:12,stride:24}],M),C=t(m);return C.attributes.position.location=0,C.attributes.normal.location=1,new o(m,w,D,C)};var e=g("gl-buffer"),r=g("gl-vao"),t=g("./shaders").bg;function o(m,l,i,f){this.gl=m,this.buffer=l,this.vao=i,this.shader=f}var n=o.prototype;n.draw=function(m,l,i,f,u,s){for(var d=!1,h=0;h<3;++h)d=d||u[h];if(d){var a=this.gl;a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:m,view:l,projection:i,bounds:f,enable:u,colors:s},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),a.disable(a.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(g,b,y){"use strict";b.exports=function(c,T,x,w,M){r(n,T,c),r(n,x,n);for(var D=0,C=0;C<2;++C){i[2]=w[C][2];for(var P=0;P<2;++P){i[1]=w[P][1];for(var L=0;L<2;++L)i[0]=w[L][0],u(m[D],i,n),D+=1}}var S=-1;for(C=0;C<8;++C){for(var E=m[C][3],N=0;N<3;++N)l[C][N]=m[C][N]/E;M&&(l[C][2]*=-1),E<0&&(S<0||l[C][2]<l[S][2])&&(S=C)}if(S<0){S=0;for(var z=0;z<3;++z){for(var q=(z+2)%3,G=(z+1)%3,K=-1,ne=-1,X=0;X<2;++X){var J=(V=X<<z)+(X<<q)+(1-X<<G),se=V+(1-X<<q)+(X<<G);o(l[V],l[J],l[se],f)<0||(X?K=1:ne=1)}if(K<0||ne<0)ne>K&&(S|=1<<z);else{for(X=0;X<2;++X){J=(V=X<<z)+(X<<q)+(1-X<<G);var V,j=d([m[V],m[J],m[se=V+(1-X<<q)+(X<<G)],m[V+(1<<q)+(1<<G)]]);X?K=j:ne=j}ne>K&&(S|=1<<z)}}}var H=7^S,oe=-1;for(C=0;C<8;++C)C!==S&&C!==H&&(oe<0||l[oe][1]>l[C][1])&&(oe=C);var U=-1;for(C=0;C<3;++C)(ee=oe^1<<C)!==S&&ee!==H&&(U<0&&(U=ee),(G=l[ee])[0]<l[U][0]&&(U=ee));var te=-1;for(C=0;C<3;++C){var ee;(ee=oe^1<<C)!==S&&ee!==H&&ee!==U&&(te<0&&(te=ee),(G=l[ee])[0]>l[te][0]&&(te=ee))}var le=h;le[0]=le[1]=le[2]=0,le[e.log2(U^oe)]=oe&U,le[e.log2(oe^te)]=oe&te;var ce=7^te;ce===S||ce===H?le[e.log2(te^(ce=7^U))]=ce&te:le[e.log2(U^ce)]=ce&U;var pe=a,de=S;for(z=0;z<3;++z)pe[z]=de&1<<z?-1:1;return _};var e=g("bit-twiddle"),r=g("gl-mat4/multiply"),t=g("split-polygon"),o=g("robust-orientation"),n=new Array(16),m=new Array(8),l=new Array(8),i=new Array(3),f=[0,0,0];function u(c,T,x){for(var w=0;w<4;++w){c[w]=x[12+w];for(var M=0;M<3;++M)c[w]+=T[M]*x[4*M+w]}}!function(){for(var c=0;c<8;++c)m[c]=[1,1,1,1],l[c]=[1,1,1]}();var s=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function d(c){for(var T=0;T<s.length;++T)if((c=t.positive(c,s[T])).length<3)return 0;var x=c[0],w=x[0]/x[3],M=x[1]/x[3],D=0;for(T=1;T+1<c.length;++T){var C=c[T],P=c[T+1];D+=Math.abs((C[0]/C[3]-w)*(P[1]/P[3]-M)-(C[1]/C[3]-M)*(P[0]/P[3]-w))}return D}var h=[1,1,1],a=[0,0,0],_={cubeEdges:h,axis:a}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(g,b,y){"use strict";b.exports=function(h,a,_){var c=[],T=[0,0,0],x=[0,0,0],w=[0,0,0],M=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var D=0;D<3;++D){for(var C=c.length/3|0,P=0;P<_[D].length;++P){var L=+_[D][P].x;c.push(L,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1)}var S=c.length/3|0;T[D]=C,x[D]=S-C,C=c.length/3|0;for(var E=0;E<_[D].length;++E)c.push(L=+_[D][E].x,0,1,L,1,1,L,0,-1,L,0,-1,L,1,1,L,1,-1);S=c.length/3|0,w[D]=C,M[D]=S-C}var N=e(h,new Float32Array(c)),z=r(h,[{buffer:N,type:h.FLOAT,size:3,stride:0,offset:0}]),q=t(h);return q.attributes.position.location=0,new s(h,N,z,q,x,T,M,w)};var e=g("gl-buffer"),r=g("gl-vao"),t=g("./shaders").line,o=[0,0,0],n=[0,0,0],m=[0,0,0],l=[0,0,0],i=[1,1];function f(h){return h[0]=h[1]=h[2]=0,h}function u(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h}function s(h,a,_,c,T,x,w,M){this.gl=h,this.vertBuffer=a,this.vao=_,this.shader=c,this.tickCount=T,this.tickOffset=x,this.gridCount=w,this.gridOffset=M}var d=s.prototype;d.bind=function(h,a,_){this.shader.bind(),this.shader.uniforms.model=h,this.shader.uniforms.view=a,this.shader.uniforms.projection=_,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},d.unbind=function(){this.vao.unbind()},d.drawAxisLine=function(h,a,_,c,T){var x=f(n);this.shader.uniforms.majorAxis=n,x[h]=a[1][h]-a[0][h],this.shader.uniforms.minorAxis=x;var w,M=u(l,_);M[h]+=a[0][h],this.shader.uniforms.offset=M,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=c,(w=f(m))[(h+2)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6),(w=f(m))[(h+1)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6)},d.drawAxisTicks=function(h,a,_,c,T){if(this.tickCount[h]){var x=f(o);x[h]=1,this.shader.uniforms.majorAxis=x,this.shader.uniforms.offset=a,this.shader.uniforms.minorAxis=_,this.shader.uniforms.color=c,this.shader.uniforms.lineWidth=T;var w=f(m);w[h]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[h],this.tickOffset[h])}},d.drawGrid=function(h,a,_,c,T,x){if(this.gridCount[h]){var w=f(n);w[a]=_[1][a]-_[0][a],this.shader.uniforms.minorAxis=w;var M=u(l,c);M[a]+=_[0][a],this.shader.uniforms.offset=M;var D=f(o);D[h]=1,this.shader.uniforms.majorAxis=D;var C=f(m);C[h]=1,this.shader.uniforms.screenAxis=C,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,this.gridCount[h],this.gridOffset[h])}},d.drawZero=function(h,a,_,c,T,x){var w=f(n);this.shader.uniforms.majorAxis=w,w[h]=_[1][h]-_[0][h],this.shader.uniforms.minorAxis=w;var M=u(l,c);M[h]+=_[0][h],this.shader.uniforms.offset=M;var D=f(m);D[a]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=x,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,6)},d.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(g,b,y){"use strict";var e=g("glslify"),r=g("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.line=function(f){return r(f,t,o,null,[{name:"position",type:"vec3"}])};var n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),m=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.text=function(f){return r(f,n,m,null,[{name:"position",type:"vec3"}])};var l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);y.bg=function(f){return r(f,l,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(g,b,y){(function(e){(function(){"use strict";b.exports=function(s,d,h,a,_,c){var T=r(s),x=t(s,[{buffer:T,size:3}]),w=n(s);w.attributes.position.location=0;var M=new i(s,w,T,x);return M.update(d,h,a,_,c),M};var r=g("gl-buffer"),t=g("gl-vao"),o=g("vectorize-text"),n=g("./shaders").text,m=window||e.global||{},l=m.__TEXT_CACHE||{};function i(s,d,h,a){this.gl=s,this.shader=d,this.buffer=h,this.vao=a,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}m.__TEXT_CACHE={};var f=i.prototype,u=[0,0];f.bind=function(s,d,h,a){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=s,_.view=d,_.projection=h,_.pixelScale=a,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=u},f.unbind=function(){this.vao.unbind()},f.update=function(s,d,h,a,_){var c=[];function T(S,E,N,z,q,G){var K=l[N];K||(K=l[N]={});var ne=K[E];ne||(ne=K[E]=function(te,ee){try{return o(te,ee)}catch(le){return console.warn('error vectorizing text:"'+te+'" error:',le),{cells:[],positions:[]}}}(E,{triangles:!0,font:N,textAlign:"center",textBaseline:"middle",lineSpacing:q,styletags:G}));for(var X=(z||12)/12,J=ne.positions,se=ne.cells,V=0,j=se.length;V<j;++V)for(var H=se[V],oe=2;oe>=0;--oe){var U=J[H[oe]];c.push(X*U[0],-X*U[1],S)}}for(var x=[0,0,0],w=[0,0,0],M=[0,0,0],D=[0,0,0],C={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},P=0;P<3;++P){M[P]=c.length/3|0,T(.5*(s[0][P]+s[1][P]),d[P],h[P],12,1.25,C),D[P]=(c.length/3|0)-M[P],x[P]=c.length/3|0;for(var L=0;L<a[P].length;++L)a[P][L].text&&T(a[P][L].x,a[P][L].text,a[P][L].font||_,a[P][L].fontSize||12,1.25,C);w[P]=(c.length/3|0)-x[P]}this.buffer.update(c),this.tickOffset=x,this.tickCount=w,this.labelOffset=M,this.labelCount=D},f.drawTicks=function(s,d,h,a,_,c,T,x){this.tickCount[s]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=_,this.shader.uniforms.angle=h,this.shader.uniforms.scale=d,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=T,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[s],this.tickOffset[s]))},f.drawLabel=function(s,d,h,a,_,c,T,x){this.labelCount[s]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=_,this.shader.uniforms.angle=h,this.shader.uniforms.scale=d,this.shader.uniforms.offset=a,this.shader.uniforms.alignDir=T,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.labelCount[s],this.labelOffset[s]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,g("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(g,b,y){"use strict";function e(r,t){var o=r+"",n=o.indexOf("."),m=0;n>=0&&(m=o.length-n-1);var l=Math.pow(10,m),i=Math.round(r*t*l),f=i+"";if(f.indexOf("e")>=0)return f;var u=i/l,s=i%l;i<0?(u=0|-Math.ceil(u),s=0|-s):(u=0|Math.floor(u),s|=0);var d=""+u;if(i<0&&(d="-"+d),m){for(var h=""+s;h.length<m;)h="0"+h;return d+"."+h}return d}y.create=function(r,t){for(var o=[],n=0;n<3;++n){for(var m=[],l=0;l*t[n]<=r[1][n];++l)m.push({x:l*t[n],text:e(t[n],l)});for(l=-1;l*t[n]>=r[0][n];--l)m.push({x:l*t[n],text:e(t[n],l)});o.push(m)}return o},y.equal=function(r,t){for(var o=0;o<3;++o){if(r[o].length!==t[o].length)return!1;for(var n=0;n<r[o].length;++n){var m=r[o][n],l=t[o][n];if(m.x!==l.x||m.text!==l.text||m.font!==l.font||m.fontColor!==l.fontColor||m.fontSize!==l.fontSize||m.dx!==l.dx||m.dy!==l.dy)return!1}}return!0}},{}],77:[function(g,b,y){"use strict";b.exports=function(_,c,T,x,w){var M=c.model||l,D=c.view||l,C=c.projection||l,P=c._ortho||!1,L=_.bounds,S=(w=w||t(M,D,C,L,P)).axis;o(i,D,M),o(i,C,i);for(var E=h,N=0;N<3;++N)E[N].lo=1/0,E[N].hi=-1/0,E[N].pixelsPerDataUnit=1/0;var z=e(n(i,i));n(i,i);for(var q=0;q<3;++q){var G=(q+1)%3,K=(q+2)%3,ne=a;e:for(N=0;N<2;++N){var X=[];if(S[q]<0!=!!N){ne[q]=L[N][q];for(var J=0;J<2;++J){ne[G]=L[J^N][G];for(var se=0;se<2;++se)ne[K]=L[se^J^N][K],X.push(ne.slice())}var V=P?5:4;for(J=V;J===V;++J){if(0===X.length)continue e;X=r.positive(X,z[J])}for(J=0;J<X.length;++J){var j=d(a,i,K=X[J],T,x);for(se=0;se<3;++se)E[se].lo=Math.min(E[se].lo,K[se]),E[se].hi=Math.max(E[se].hi,K[se]),se!==q&&(E[se].pixelsPerDataUnit=Math.min(E[se].pixelsPerDataUnit,Math.abs(j[se])))}}}}return E};var e=g("extract-frustum-planes"),r=g("split-polygon"),t=g("./lib/cube.js"),o=g("gl-mat4/multiply"),n=g("gl-mat4/transpose"),m=g("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function f(_,c,T){this.lo=_,this.hi=c,this.pixelsPerDataUnit=T}var u=[0,0,0,1],s=[0,0,0,1];function d(_,c,T,x,w){for(var M=0;M<3;++M){for(var D=u,C=s,P=0;P<3;++P)C[P]=D[P]=T[P];C[3]=D[3]=1,C[M]+=1,m(C,C,c),C[3]<0&&(_[M]=1/0),D[M]-=1,m(D,D,c),D[3]<0&&(_[M]=1/0);var L=(D[0]/D[3]-C[0]/C[3])*x,S=(D[1]/D[3]-C[1]/C[3])*w;_[M]=.25*Math.sqrt(L*L+S*S)}return _}var h=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],a=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(g,b,y){"use strict";var e=g("typedarray-pool"),r=g("ndarray-ops"),t=g("ndarray"),o=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(f,u,s,d,h){this.gl=f,this.type=u,this.handle=s,this.length=d,this.usage=h}var m=n.prototype;function l(f,u,s,d,h,a){var _=h.length*h.BYTES_PER_ELEMENT;if(a<0)return f.bufferData(u,h,d),_;if(_+a>s)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return f.bufferSubData(u,a,h),s}m.bind=function(){this.gl.bindBuffer(this.type,this.handle)},m.unbind=function(){this.gl.bindBuffer(this.type,null)},m.dispose=function(){this.gl.deleteBuffer(this.handle)},m.update=function(f,u){if("number"!=typeof u&&(u=-1),this.bind(),"object"==typeof f&&void 0!==f.shape){var s=f.dtype;if(o.indexOf(s)<0&&(s="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(s=gl.getExtension("OES_element_index_uint")&&"uint16"!==s?"uint32":"uint16"),s===f.dtype&&function(_,c){for(var T=1,x=c.length-1;x>=0;--x){if(c[x]!==T)return!1;T*=_[x]}return!0}(f.shape,f.stride))this.length=l(this.gl,this.type,this.length,this.usage,0===f.offset&&f.data.length===f.shape[0]?f.data:f.data.subarray(f.offset,f.shape[0]),u);else{var d=e.malloc(f.size,s),h=t(d,f.shape);r.assign(h,f),this.length=l(this.gl,this.type,this.length,this.usage,u<0?d:d.subarray(0,f.size),u),e.free(d)}}else if(Array.isArray(f)){var a;a=function i(f,u){for(var s=e.malloc(f.length,u),d=f.length,h=0;h<d;++h)s[h]=f[h];return s}(f,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=l(this.gl,this.type,this.length,this.usage,u<0?a:a.subarray(0,f.length),u),e.free(a)}else if("object"==typeof f&&"number"==typeof f.length)this.length=l(this.gl,this.type,this.length,this.usage,f,u);else{if("number"!=typeof f&&void 0!==f)throw new Error("gl-buffer: Invalid data type");if(u>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(f|=0)<=0&&(f=1),this.gl.bufferData(this.type,0|f,this.usage),this.length=f}},b.exports=function(f,u,s,d){if(d=d||f.DYNAMIC_DRAW,(s=s||f.ARRAY_BUFFER)!==f.ARRAY_BUFFER&&s!==f.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==f.DYNAMIC_DRAW&&d!==f.STATIC_DRAW&&d!==f.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var h=f.createBuffer(),a=new n(f,s,h,0,d);return a.update(u),a}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(g,b,y){"use strict";var e=g("gl-vec3");b.exports=function(t,o){var n=t.positions,m=t.vectors,l={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return o&&(o[0]=[0,0,0],o[1]=[0,0,0]),l;for(var i=0,f=1/0,u=-1/0,s=1/0,d=-1/0,h=1/0,a=-1/0,_=null,c=null,T=[],x=1/0,w=!1,M=0;M<n.length;M++){var D=n[M];f=Math.min(D[0],f),u=Math.max(D[0],u),s=Math.min(D[1],s),d=Math.max(D[1],d),h=Math.min(D[2],h),a=Math.max(D[2],a);var C=m[M];if(e.length(C)>i&&(i=e.length(C)),M){var P=2*e.distance(_,D)/(e.length(c)+e.length(C));P?(x=Math.min(x,P),w=!1):w=!0}w||(_=D,c=C),T.push(C)}var S=[u,d,a];o&&(o[0]=[f,s,h],o[1]=S),0===i&&(i=1);var E=1/i;isFinite(x)||(x=1),l.vectorScale=x;var N=t.coneSize||.5;t.absoluteConeSize&&(N=t.absoluteConeSize*E),l.coneScale=N,M=0;for(var z=0;M<n.length;M++)for(var q=(D=n[M])[0],G=D[1],K=D[2],ne=T[M],X=e.length(ne)*E,J=0;J<8;J++){l.positions.push([q,G,K,z++]),l.positions.push([q,G,K,z++]),l.positions.push([q,G,K,z++]),l.positions.push([q,G,K,z++]),l.positions.push([q,G,K,z++]),l.positions.push([q,G,K,z++]),l.vectors.push(ne),l.vectors.push(ne),l.vectors.push(ne),l.vectors.push(ne),l.vectors.push(ne),l.vectors.push(ne),l.vertexIntensity.push(X,X,X),l.vertexIntensity.push(X,X,X);var se=l.positions.length;l.cells.push([se-6,se-5,se-4],[se-3,se-2,se-1])}return l};var r=g("./lib/shaders");b.exports.createMesh=g("./create_mesh"),b.exports.createConeMesh=function(t,o){return b.exports.createMesh(t,o,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(g,b,y){"use strict";var e=g("gl-shader"),r=g("gl-buffer"),t=g("gl-vao"),o=g("gl-texture2d"),n=g("gl-mat4/multiply"),m=g("gl-mat4/invert"),l=g("ndarray"),i=g("colormap"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(a,_,c,T,x,w,M,D,C,P,L){this.gl=a,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=c,this.pickShader=T,this.trianglePositions=x,this.triangleVectors=w,this.triangleColors=D,this.triangleUVs=C,this.triangleIds=M,this.triangleVAO=P,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=L,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=f,this._view=f,this._projection=f,this._resolution=[1,1]}var s=u.prototype;function d(a,_){var c=e(a,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return c.attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.vector.location=4,c}function h(a,_){var c=e(a,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return c.attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c}s.isOpaque=function(){return this.opacity>=1},s.isTransparent=function(){return this.opacity<1},s.pickSlots=1,s.setPickBase=function(a){this.pickId=a},s.update=function(a){a=a||{};var _=this.gl;this.dirty=!0,"lightPosition"in a&&(this.lightPosition=a.lightPosition),"opacity"in a&&(this.opacity=a.opacity),"ambient"in a&&(this.ambientLight=a.ambient),"diffuse"in a&&(this.diffuseLight=a.diffuse),"specular"in a&&(this.specularLight=a.specular),"roughness"in a&&(this.roughness=a.roughness),"fresnel"in a&&(this.fresnel=a.fresnel),void 0!==a.tubeScale&&(this.tubeScale=a.tubeScale),void 0!==a.vectorScale&&(this.vectorScale=a.vectorScale),void 0!==a.coneScale&&(this.coneScale=a.coneScale),void 0!==a.coneOffset&&(this.coneOffset=a.coneOffset),a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(function(oe){for(var U=i({colormap:oe,nshades:256,format:"rgba"}),te=new Uint8Array(1024),ee=0;ee<256;++ee){for(var le=U[ee],ce=0;ce<3;++ce)te[4*ee+ce]=le[ce];te[4*ee+3]=255*le[3]}return l(te,[256,256,4],[4,0,1])}(a.colormap)),this.texture.generateMipmap());var c=a.cells,T=a.positions,x=a.vectors;if(T&&c&&x){var w=[],M=[],D=[],C=[],P=[];this.cells=c,this.positions=T,this.vectors=x;var L=a.meshColor||[1,1,1,1],S=a.vertexIntensity,E=1/0,N=-1/0;if(S)if(a.vertexIntensityBounds)E=+a.vertexIntensityBounds[0],N=+a.vertexIntensityBounds[1];else for(var z=0;z<S.length;++z){var q=S[z];E=Math.min(E,q),N=Math.max(N,q)}else for(z=0;z<T.length;++z)q=T[z][2],E=Math.min(E,q),N=Math.max(N,q);for(this.intensity=S||function(oe){for(var U=oe.length,te=new Array(U),ee=0;ee<U;++ee)te[ee]=oe[ee][2];return te}(T),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],z=0;z<T.length;++z)for(var G=T[z],K=0;K<3;++K)!isNaN(G[K])&&isFinite(G[K])&&(this.bounds[0][K]=Math.min(this.bounds[0][K],G[K]),this.bounds[1][K]=Math.max(this.bounds[1][K],G[K]));var ne=0;e:for(z=0;z<c.length;++z){var X=c[z];if(3===X.length){for(K=0;K<3;++K){G=T[se=X[K]];for(var J=0;J<3;++J)if(isNaN(G[J])||!isFinite(G[J]))continue e}for(K=0;K<3;++K){var se;G=T[se=X[2-K]],w.push(G[0],G[1],G[2],G[3]);var V=x[se];M.push(V[0],V[1],V[2],V[3]||0);var j;D.push(L[0],L[1],L[2],3===L.length?1:L[3]),C.push((j=S?[(S[se]-E)/(N-E),0]:[(G[2]-E)/(N-E),0])[0],j[1]),P.push(z)}ne+=1}}this.triangleCount=ne,this.trianglePositions.update(w),this.triangleVectors.update(M),this.triangleColors.update(D),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(P))}},s.drawTransparent=s.draw=function(a){for(var _=this.gl,c=(a=a||{}).model||f,T=a.view||f,x=a.projection||f,w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)w[0][M]=Math.max(w[0][M],this.clipBounds[0][M]),w[1][M]=Math.min(w[1][M],this.clipBounds[1][M]);var D={model:c,view:T,projection:x,inverseModel:f.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};D.inverseModel=m(D.inverseModel,D.model),_.disable(_.CULL_FACE),this.texture.bind(0);var C=new Array(16);for(n(C,D.view,D.model),n(C,D.projection,C),m(C,C),M=0;M<3;++M)D.eyePosition[M]=C[12+M]/C[15];var P=C[15];for(M=0;M<3;++M)P+=this.lightPosition[M]*C[4*M+3];for(M=0;M<3;++M){for(var L=C[12+M],S=0;S<3;++S)L+=C[4*S+M]*this.lightPosition[S];D.lightPosition[M]=L/P}if(this.triangleCount>0){var E=this.triShader;E.bind(),E.uniforms=D,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},s.drawPick=function(a){for(var _=this.gl,c=(a=a||{}).model||f,T=a.view||f,x=a.projection||f,w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)w[0][M]=Math.max(w[0][M],this.clipBounds[0][M]),w[1][M]=Math.min(w[1][M],this.clipBounds[1][M]);this._model=[].slice.call(c),this._view=[].slice.call(T),this._projection=[].slice.call(x),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var D={model:c,view:T,projection:x,clipBounds:w,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},C=this.pickShader;C.bind(),C.uniforms=D,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},s.pick=function(a){if(!a||a.id!==this.pickId)return null;var _=a.value[0]+256*a.value[1]+65536*a.value[2],c=this.cells[_],T=this.positions[c[1]].slice(0,3),x={position:T,dataCoordinate:T,index:Math.floor(c[1]/48)};return"cone"===this.traceType?x.index=Math.floor(c[1]/48):"streamtube"===this.traceType&&(x.intensity=this.intensity[c[1]],x.velocity=this.vectors[c[1]].slice(0,3),x.divergence=this.vectors[c[1]][3],x.index=_),x},s.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},b.exports=function(a,_,c){var T=c.shaders;1===arguments.length&&(a=(_=a).gl);var x=d(a,T),w=h(a,T),M=o(a,l(new Uint8Array([255,255,255,255]),[1,1,4]));M.generateMipmap(),M.minFilter=a.LINEAR_MIPMAP_LINEAR,M.magFilter=a.LINEAR;var D=r(a),C=r(a),P=r(a),L=r(a),S=r(a),N=new u(a,M,x,w,D,C,S,P,L,t(a,[{buffer:D,type:a.FLOAT,size:4},{buffer:S,type:a.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:a.FLOAT,size:4},{buffer:L,type:a.FLOAT,size:2},{buffer:C,type:a.FLOAT,size:4}]),c.traceType||"cone");return N.update(_),N}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(g,b,y){var e=g("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:o,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(g,b,y){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(g,b,y){var e=g("./1.0/numbers");b.exports=function(r){return e[r]}},{"./1.0/numbers":82}],84:[function(g,b,y){"use strict";b.exports=function(u){var s=u.gl,d=e(s),h=r(s,[{buffer:d,type:s.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:s.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:s.FLOAT,size:3,offset:28,stride:40}]),a=t(s);a.attributes.position.location=0,a.attributes.color.location=1,a.attributes.offset.location=2;var _=new n(s,d,h,a);return _.update(u),_};var e=g("gl-buffer"),r=g("gl-vao"),t=g("./shaders/index"),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(u,s,d,h){this.gl=u,this.shader=h,this.buffer=s,this.vao=d,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var m=n.prototype;function l(u,s){for(var d=0;d<3;++d)u[0][d]=Math.min(u[0][d],s[d]),u[1][d]=Math.max(u[1][d],s[d])}m.isOpaque=function(){return!this.hasAlpha},m.isTransparent=function(){return this.hasAlpha},m.drawTransparent=m.draw=function(u){var s=this.gl,d=this.shader.uniforms;this.shader.bind();var h=d.view=u.view||o,a=d.projection=u.projection||o;d.model=u.model||o,d.clipBounds=this.clipBounds,d.opacity=this.opacity;var w=(u._ortho?2:1)*this.pixelRatio*(a[3]*h[12]+a[7]*h[13]+a[11]*h[14]+a[15]*h[15])/s.drawingBufferHeight;this.vao.bind();for(var M=0;M<3;++M)s.lineWidth(this.lineWidth[M]*this.pixelRatio),d.capSize=this.capSize[M]*w,this.lineCount[M]&&s.drawArrays(s.LINES,this.lineOffset[M],this.lineCount[M]);this.vao.unbind()};var i=function(){for(var u=new Array(3),s=0;s<3;++s){for(var d=[],h=1;h<=2;++h)for(var a=-1;a<=1;a+=2){var _=[0,0,0];_[(h+s)%3]=a,d.push(_)}u[s]=d}return u}();function f(u,s,d,h){for(var a=i[h],_=0;_<a.length;++_){var c=a[_];u.push(s[0],s[1],s[2],d[0],d[1],d[2],d[3],c[0],c[1],c[2])}return a.length}m.update=function(u){"lineWidth"in(u=u||{})&&(this.lineWidth=u.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in u&&(this.capSize=u.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in u&&(this.opacity=+u.opacity,this.opacity<1&&(this.hasAlpha=!0));var s=u.color||[[0,0,0],[0,0,0],[0,0,0]],d=u.position,h=u.error;if(Array.isArray(s[0])||(s=[s,s,s]),d&&h){var a=[],_=d.length,c=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var T=0;T<3;++T){this.lineOffset[T]=c;e:for(var x=0;x<_;++x){for(var w=d[x],M=0;M<3;++M)if(isNaN(w[M])||!isFinite(w[M]))continue e;var P,D=h[x],C=s[T];Array.isArray(C[0])&&(C=s[x]),3===C.length?C=[C[0],C[1],C[2],1]:4===C.length&&(C=[C[0],C[1],C[2],C[3]],!this.hasAlpha&&C[3]<1&&(this.hasAlpha=!0)),isNaN(D[0][T])||isNaN(D[1][T])||(D[0][T]<0&&((P=w.slice())[T]+=D[0][T],a.push(w[0],w[1],w[2],C[0],C[1],C[2],C[3],0,0,0,P[0],P[1],P[2],C[0],C[1],C[2],C[3],0,0,0),l(this.bounds,P),c+=2+f(a,P,C,T)),D[1][T]>0&&((P=w.slice())[T]+=D[1][T],a.push(w[0],w[1],w[2],C[0],C[1],C[2],C[3],0,0,0,P[0],P[1],P[2],C[0],C[1],C[2],C[3],0,0,0),l(this.bounds,P),c+=2+f(a,P,C,T)))}this.lineCount[T]=c-this.lineOffset[T]}this.buffer.update(a)}},m.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(g,b,y){"use strict";var e=g("glslify"),r=g("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);b.exports=function(n){return r(n,t,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(g,b,y){"use strict";var e=g("gl-texture2d");b.exports=function(_,c,T,x){r||(r=_.FRAMEBUFFER_UNSUPPORTED,t=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,n=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var w=_.getExtension("WEBGL_draw_buffers");if(!m&&w&&function(E,N){var z=E.getParameter(N.MAX_COLOR_ATTACHMENTS_WEBGL);m=new Array(z+1);for(var q=0;q<=z;++q){for(var G=new Array(z),K=0;K<q;++K)G[K]=E.COLOR_ATTACHMENT0+K;for(K=q;K<z;++K)G[K]=E.NONE;m[q]=G}}(_,w),Array.isArray(c)&&(x=T,T=0|c[1],c=0|c[0]),"number"!=typeof c)throw new Error("gl-fbo: Missing shape parameter");var M=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(c<0||c>M||T<0||T>M)throw new Error("gl-fbo: Parameters are too large for FBO");var D=1;if("color"in(x=x||{})){if((D=Math.max(0|x.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(D>1){if(!w)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(D>_.getParameter(w.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+D+" draw buffers")}}var C=_.UNSIGNED_BYTE,P=_.getExtension("OES_texture_float");if(x.float&&D>0){if(!P)throw new Error("gl-fbo: Context does not support floating point textures");C=_.FLOAT}else x.preferFloat&&D>0&&P&&(C=_.FLOAT);var L=!0;"depth"in x&&(L=!!x.depth);var S=!1;return"stencil"in x&&(S=!!x.stencil),new d(_,c,T,C,D,L,S,w)};var r,t,o,n,m=null;function l(_){return[_.getParameter(_.FRAMEBUFFER_BINDING),_.getParameter(_.RENDERBUFFER_BINDING),_.getParameter(_.TEXTURE_BINDING_2D)]}function i(_,c){_.bindFramebuffer(_.FRAMEBUFFER,c[0]),_.bindRenderbuffer(_.RENDERBUFFER,c[1]),_.bindTexture(_.TEXTURE_2D,c[2])}function f(_){switch(_){case r:throw new Error("gl-fbo: Framebuffer unsupported");case t:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case n:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function u(_,c,T,x,w,M){if(!x)return null;var D=e(_,c,T,w,x);return D.magFilter=_.NEAREST,D.minFilter=_.NEAREST,D.mipSamples=1,D.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,M,_.TEXTURE_2D,D.handle,0),D}function s(_,c,T,x,w){var M=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,M),_.renderbufferStorage(_.RENDERBUFFER,x,c,T),_.framebufferRenderbuffer(_.FRAMEBUFFER,w,_.RENDERBUFFER,M),M}function d(_,c,T,x,w,M,D,C){this.gl=_,this._shape=[0|c,0|T],this._destroyed=!1,this._ext=C,this.color=new Array(w);for(var P=0;P<w;++P)this.color[P]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=x,this._useDepth=M,this._useStencil=D;var L=this,S=[0|c,0|T];Object.defineProperties(S,{0:{get:function(){return L._shape[0]},set:function(E){return L.width=E}},1:{get:function(){return L._shape[1]},set:function(E){return L.height=E}}}),this._shapeVector=S,function(E){var N=l(E.gl),z=E.gl,q=E.handle=z.createFramebuffer(),G=E._shape[0],K=E._shape[1],ne=E.color.length,X=E._ext,J=E._useStencil,se=E._useDepth,V=E._colorType;z.bindFramebuffer(z.FRAMEBUFFER,q);for(var j=0;j<ne;++j)E.color[j]=u(z,G,K,V,z.RGBA,z.COLOR_ATTACHMENT0+j);0===ne?(E._color_rb=s(z,G,K,z.RGBA4,z.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(m[0])):ne>1&&X.drawBuffersWEBGL(m[ne]);var H=z.getExtension("WEBGL_depth_texture");H?J?E.depth=u(z,G,K,H.UNSIGNED_INT_24_8_WEBGL,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):se&&(E.depth=u(z,G,K,z.UNSIGNED_SHORT,z.DEPTH_COMPONENT,z.DEPTH_ATTACHMENT)):se&&J?E._depth_rb=s(z,G,K,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):se?E._depth_rb=s(z,G,K,z.DEPTH_COMPONENT16,z.DEPTH_ATTACHMENT):J&&(E._depth_rb=s(z,G,K,z.STENCIL_INDEX,z.STENCIL_ATTACHMENT));var oe=z.checkFramebufferStatus(z.FRAMEBUFFER);if(oe!==z.FRAMEBUFFER_COMPLETE){for(E._destroyed=!0,z.bindFramebuffer(z.FRAMEBUFFER,null),z.deleteFramebuffer(E.handle),E.handle=null,E.depth&&(E.depth.dispose(),E.depth=null),E._depth_rb&&(z.deleteRenderbuffer(E._depth_rb),E._depth_rb=null),j=0;j<E.color.length;++j)E.color[j].dispose(),E.color[j]=null;E._color_rb&&(z.deleteRenderbuffer(E._color_rb),E._color_rb=null),i(z,N),f(oe)}i(z,N)}(this)}var h=d.prototype;function a(_,c,T){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(_._shape[0]!==c||_._shape[1]!==T){var x=_.gl,w=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(c<0||c>w||T<0||T>w)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=c,_._shape[1]=T;for(var M=l(x),D=0;D<_.color.length;++D)_.color[D].shape=_._shape;_._color_rb&&(x.bindRenderbuffer(x.RENDERBUFFER,_._color_rb),x.renderbufferStorage(x.RENDERBUFFER,x.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(x.bindRenderbuffer(x.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&x.renderbufferStorage(x.RENDERBUFFER,x.STENCIL_INDEX,_._shape[0],_._shape[1])),x.bindFramebuffer(x.FRAMEBUFFER,_.handle);var C=x.checkFramebufferStatus(x.FRAMEBUFFER);C!==x.FRAMEBUFFER_COMPLETE&&(_.dispose(),i(x,M),f(C)),i(x,M)}}Object.defineProperties(h,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[0|_,0|_]),2!==_.length)throw new Error("gl-fbo: Shape vector must be length 2");var c=0|_[0],T=0|_[1];return a(this,c,T),[c,T]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return a(this,_|=0,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return a(this,this._shape[0],_|=0),_},enumerable:!1}}),h.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},h.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var c=0;c<this.color.length;++c)this.color[c].dispose(),this.color[c]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(g,b,y){var e=g("sprintf-js").sprintf,r=g("gl-constants/lookup"),t=g("glsl-shader-name"),o=g("add-line-numbers");b.exports=function(n,m,l){"use strict";var i=t(m)||"of unknown name (see npm glsl-shader-name)",f="unknown type";void 0!==l&&(f=l===r.FRAGMENT_SHADER?"fragment":"vertex");for(var u=e("Error compiling %s shader %s:\n",f,i),s=e("%s%s",u,n),d=n.split("\n"),h={},a=0;a<d.length;a++){var _=d[a];if(""!==_&&"\0"!==_){var c=parseInt(_.split(":")[2]);if(isNaN(c))throw new Error(e("Could not parse error: %s",_));h[c]=_}}var T=o(m).split("\n");for(a=0;a<T.length;a++)if((h[a+3]||h[a+2]||h[a+1])&&(u+=T[a]+"\n",h[a+1])){var w=h[a+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),u+=e("^^^ %s\n\n",w)}return{long:u.trim(),short:s.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(g,b,y){"use strict";b.exports=function(s,d){var h=s.gl,M=new l(s,o(h,m.vertex,m.fragment),o(h,m.pickVertex,m.pickFragment),n(h),n(h),n(h),n(h));return M.update(d),s.addObject(M),M};var e=g("binary-search-bounds"),r=g("iota-array"),t=g("typedarray-pool"),o=g("gl-shader"),n=g("gl-buffer"),m=g("./lib/shaders");function l(s,d,h,a,_,c,T){this.plot=s,this.shader=d,this.pickShader=h,this.positionBuffer=a,this.weightBuffer=_,this.colorBuffer=c,this.idBuffer=T,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,s,d,f=l.prototype,u=[0,0,1,0,0,1,1,0,1,1,0,1];f.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var s=this.plot,d=this.shader,h=this.bounds,a=this.numVertices;if(!(a<=0)){var _=s.gl,c=s.dataBox,x=h[3]-h[1],w=c[2]-c[0],M=c[3]-c[1];i[0]=2*(h[2]-h[0])/w,i[4]=2*x/M,i[6]=2*(h[0]-c[0])/w-1,i[7]=2*(h[1]-c[1])/M-1,d.bind();var D=d.uniforms;D.viewTransform=i,D.shape=this.shape;var C=d.attributes;this.positionBuffer.bind(),C.position.pointer(),this.weightBuffer.bind(),C.weight.pointer(_.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),C.color.pointer(_.UNSIGNED_BYTE,!0),_.drawArrays(_.TRIANGLES,0,a)}}),f.drawPick=(s=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0],function(h){var a=this.plot,_=this.pickShader,c=this.bounds,T=this.numVertices;if(!(T<=0)){var x=a.gl,w=a.dataBox,D=c[3]-c[1],C=w[2]-w[0],P=w[3]-w[1];s[0]=2*(c[2]-c[0])/C,s[4]=2*D/P,s[6]=2*(c[0]-w[0])/C-1,s[7]=2*(c[1]-w[1])/P-1;for(var L=0;L<4;++L)d[L]=h>>8*L&255;this.pickOffset=h,_.bind();var S=_.uniforms;S.viewTransform=s,S.pickOffset=d,S.shape=this.shape;var E=_.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(x.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(x.UNSIGNED_BYTE,!1),x.drawArrays(x.TRIANGLES,0,T),h+this.shape[0]*this.shape[1]}}),f.pick=function(s,d,h){var a=this.pickOffset;if(h<a||h>=a+this.shape[0]*this.shape[1])return null;var c=h-a;return{object:this,pointId:c,dataCoord:[this.xData[c%this.shape[0]],this.yData[c/this.shape[0]|0]]}},f.update=function(s){var d=(s=s||{}).shape||[0,0],h=s.x||r(d[0]),a=s.y||r(d[1]),_=s.z||new Float32Array(d[0]*d[1]),c=!1!==s.zsmooth;this.xData=h,this.yData=a;var T,x,w,M,D=s.colorLevels||[0],C=s.colorValues||[0,0,0,1],P=D.length,L=this.bounds;c?(T=L[0]=h[0],x=L[1]=a[0],w=L[2]=h[h.length-1],M=L[3]=a[a.length-1]):(T=L[0]=h[0]+(h[1]-h[0])/2,x=L[1]=a[0]+(a[1]-a[0])/2,w=L[2]=h[h.length-1]+(h[h.length-1]-h[h.length-2])/2,M=L[3]=a[a.length-1]+(a[a.length-1]-a[a.length-2])/2);var S=1/(w-T),E=1/(M-x),N=d[0],z=d[1];this.shape=[N,z];var q=(c?(N-1)*(z-1):N*z)*(u.length>>>1);this.numVertices=q;for(var G=t.mallocUint8(4*q),K=t.mallocFloat32(2*q),ne=t.mallocUint8(2*q),X=t.mallocUint32(q),J=0,se=c?N-1:N,V=c?z-1:z,j=0;j<V;++j){var H,oe;c?(H=E*(a[j]-x),oe=E*(a[j+1]-x)):(H=j<z-1?E*(a[j]-(a[j+1]-a[j])/2-x):E*(a[j]-(a[j]-a[j-1])/2-x),oe=j<z-1?E*(a[j]+(a[j+1]-a[j])/2-x):E*(a[j]+(a[j]-a[j-1])/2-x));for(var U=0;U<se;++U){var te,ee;c?(te=S*(h[U]-T),ee=S*(h[U+1]-T)):(te=U<N-1?S*(h[U]-(h[U+1]-h[U])/2-T):S*(h[U]-(h[U]-h[U-1])/2-T),ee=U<N-1?S*(h[U]+(h[U+1]-h[U])/2-T):S*(h[U]+(h[U]-h[U-1])/2-T));for(var le=0;le<u.length;le+=2){var ce,pe,de,be,he=u[le],xe=u[le+1],De=_[c?(j+xe)*N+(U+he):j*N+U],Se=e.le(D,De);if(Se<0)ce=C[0],pe=C[1],de=C[2],be=C[3];else if(Se===P-1)ce=C[4*P-4],pe=C[4*P-3],de=C[4*P-2],be=C[4*P-1];else{var ke=(De-D[Se])/(D[Se+1]-D[Se]),Fe=1-ke,ve=4*Se,Te=4*(Se+1);ce=Fe*C[ve]+ke*C[Te],pe=Fe*C[ve+1]+ke*C[Te+1],de=Fe*C[ve+2]+ke*C[Te+2],be=Fe*C[ve+3]+ke*C[Te+3]}G[4*J]=255*ce,G[4*J+1]=255*pe,G[4*J+2]=255*de,G[4*J+3]=255*be,K[2*J]=.5*te+.5*ee,K[2*J+1]=.5*H+.5*oe,ne[2*J]=he,ne[2*J+1]=xe,X[J]=j*N+U,J+=1}}}this.positionBuffer.update(K),this.weightBuffer.update(ne),this.colorBuffer.update(G),this.idBuffer.update(X),t.free(K),t.free(G),t.free(ne),t.free(X)},f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(g,b,y){"use strict";var e=g("glslify");b.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(g,b,y){var e=g("glslify"),r=g("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),m=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(l){return r(l,t,o,null,m)},y.createPickShader=function(l){return r(l,t,n,null,m)}},{"gl-shader":132,glslify:231}],91:[function(g,b,y){"use strict";b.exports=function(T){var x=T.gl||T.scene&&T.scene.gl,w=f(x);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;var M=u(x);M.attributes.position.location=0,M.attributes.nextPosition.location=1,M.attributes.arcLength.location=2,M.attributes.lineWidth.location=3,M.attributes.color.location=4;for(var D=e(x),C=r(x,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,offset:32,stride:48}]),P=l(new Array(1024),[256,1,4]),L=0;L<1024;++L)P.data[L]=255;var S=t(x,P);S.wrap=x.REPEAT;var E=new _(x,w,M,D,C,S);return E.update(T),E};var e=g("gl-buffer"),r=g("gl-vao"),t=g("gl-texture2d"),o=new Uint8Array(4),n=new Float32Array(o.buffer),m=g("binary-search-bounds"),l=g("ndarray"),i=g("./lib/shaders"),f=i.createShader,u=i.createPickShader,s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(T,x){for(var w=0,M=0;M<3;++M){var D=T[M]-x[M];w+=D*D}return Math.sqrt(w)}function h(T){for(var x=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)x[0][w]=Math.max(T[0][w],x[0][w]),x[1][w]=Math.min(T[1][w],x[1][w]);return x}function a(T,x,w,M){this.arcLength=T,this.position=x,this.index=w,this.dataCoordinate=M}function _(T,x,w,M,D,C){this.gl=T,this.shader=x,this.pickShader=w,this.buffer=M,this.vao=D,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=C,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var c=_.prototype;c.isTransparent=function(){return this.hasAlpha},c.isOpaque=function(){return!this.hasAlpha},c.pickSlots=1,c.setPickBase=function(T){this.pickId=T},c.drawTransparent=c.draw=function(T){if(this.vertexCount){var x=this.gl,w=this.shader,M=this.vao;w.bind(),w.uniforms={model:T.model||s,view:T.view||s,projection:T.projection||s,clipBounds:h(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(x.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},c.drawPick=function(T){if(this.vertexCount){var x=this.gl,w=this.pickShader,M=this.vao;w.bind(),w.uniforms={model:T.model||s,view:T.view||s,projection:T.projection||s,pickId:this.pickId,clipBounds:h(this.clipBounds),screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(x.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},c.update=function(T){var x,w;this.dirty=!0;var M=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var D=[],C=[],P=[],L=0,S=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=T.position||T.positions;if(N){var z=T.color||T.colors||[0,0,0,1],q=T.lineWidth||1,G=!1;e:for(x=1;x<N.length;++x){var K,ne,X,J=N[x-1],se=N[x];for(C.push(L),P.push(J.slice()),w=0;w<3;++w){if(isNaN(J[w])||isNaN(se[w])||!isFinite(J[w])||!isFinite(se[w])){if(!M&&D.length>0){for(var V=0;V<24;++V)D.push(D[D.length-12]);S+=2,G=!0}continue e}E[0][w]=Math.min(E[0][w],J[w],se[w]),E[1][w]=Math.max(E[1][w],J[w],se[w])}Array.isArray(z[0])?(K=z.length>x-1?z[x-1]:z.length>0?z[z.length-1]:[0,0,0,1],ne=z.length>x?z[x]:z.length>0?z[z.length-1]:[0,0,0,1]):K=ne=z,3===K.length&&(K=[K[0],K[1],K[2],1]),3===ne.length&&(ne=[ne[0],ne[1],ne[2],1]),!this.hasAlpha&&K[3]<1&&(this.hasAlpha=!0),X=Array.isArray(q)?q.length>x-1?q[x-1]:q.length>0?q[q.length-1]:[0,0,0,1]:q;var j=L;if(L+=d(J,se),G){for(w=0;w<2;++w)D.push(J[0],J[1],J[2],se[0],se[1],se[2],j,X,K[0],K[1],K[2],K[3]);S+=2,G=!1}D.push(J[0],J[1],J[2],se[0],se[1],se[2],j,X,K[0],K[1],K[2],K[3],J[0],J[1],J[2],se[0],se[1],se[2],j,-X,K[0],K[1],K[2],K[3],se[0],se[1],se[2],J[0],J[1],J[2],L,-X,ne[0],ne[1],ne[2],ne[3],se[0],se[1],se[2],J[0],J[1],J[2],L,X,ne[0],ne[1],ne[2],ne[3]),S+=4}}if(this.buffer.update(D),C.push(L),P.push(N[N.length-1].slice()),this.bounds=E,this.vertexCount=S,this.points=P,this.arcLength=C,"dashes"in T){var H=T.dashes.slice();for(H.unshift(0),x=1;x<H.length;++x)H[x]=H[x-1]+H[x];var oe=l(new Array(1024),[256,1,4]);for(x=0;x<256;++x){for(w=0;w<4;++w)oe.set(x,0,w,0);1&m.le(H,H[H.length-1]*x/255)?oe.set(x,0,0,0):oe.set(x,0,0,255)}this.texture.setPixels(oe)}},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},c.pick=function(T){if(!T||T.id!==this.pickId)return null;var N,z,q,x=(N=T.value[0],z=T.value[1],q=T.value[2],o[0]=0,o[1]=q,o[2]=z,o[3]=N,n[0]),w=m.le(this.arcLength,x);if(w<0)return null;if(w===this.arcLength.length-1)return new a(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),w);for(var M=this.points[w],D=this.points[Math.min(w+1,this.points.length-1)],C=(x-this.arcLength[w])/(this.arcLength[w+1]-this.arcLength[w]),P=1-C,L=[0,0,0],S=0;S<3;++S)L[S]=P*M[S]+C*D[S];var E=Math.min(C<.5?w:w+1,this.points.length-1);return new a(x,L,E,this.points[E])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(g,b,y){b.exports=function(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},{}],93:[function(g,b,y){b.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(g,b,y){b.exports=function(e){var r=e[0],t=e[1],o=e[2],n=e[3],m=e[4],l=e[5],i=e[6],f=e[7],u=e[8],s=e[9],d=e[10],h=e[11],a=e[12],_=e[13],c=e[14],T=e[15];return(r*l-t*m)*(d*T-h*c)-(r*i-o*m)*(s*T-h*_)+(r*f-n*m)*(s*c-d*_)+(t*i-o*l)*(u*T-h*a)-(t*f-n*l)*(u*c-d*a)+(o*f-n*i)*(u*_-s*a)}},{}],95:[function(g,b,y){b.exports=function(e,r){var t=r[0],o=r[1],n=r[2],m=r[3],l=t+t,i=o+o,f=n+n,u=t*l,s=o*l,d=o*i,h=n*l,a=n*i,_=n*f,c=m*l,T=m*i,x=m*f;return e[0]=1-d-_,e[1]=s+x,e[2]=h-T,e[3]=0,e[4]=s-x,e[5]=1-u-_,e[6]=a+c,e[7]=0,e[8]=h+T,e[9]=a-c,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=r[3],i=o+o,f=n+n,u=m+m,s=o*i,d=o*f,h=o*u,a=n*f,_=n*u,c=m*u,T=l*i,x=l*f,w=l*u;return e[0]=1-(a+c),e[1]=d+w,e[2]=h-x,e[3]=0,e[4]=d-w,e[5]=1-(s+c),e[6]=_+T,e[7]=0,e[8]=h+x,e[9]=_-T,e[10]=1-(s+a),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],97:[function(g,b,y){b.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(g,b,y){b.exports=function(e,r){var t=r[0],o=r[1],n=r[2],m=r[3],l=r[4],i=r[5],f=r[6],u=r[7],s=r[8],d=r[9],h=r[10],a=r[11],_=r[12],c=r[13],T=r[14],x=r[15],w=t*i-o*l,M=t*f-n*l,D=t*u-m*l,C=o*f-n*i,P=o*u-m*i,L=n*u-m*f,S=s*c-d*_,E=s*T-h*_,N=s*x-a*_,z=d*T-h*c,q=d*x-a*c,G=h*x-a*T,K=w*G-M*q+D*z+C*N-P*E+L*S;return K?(e[0]=(i*G-f*q+u*z)*(K=1/K),e[1]=(n*q-o*G-m*z)*K,e[2]=(c*L-T*P+x*C)*K,e[3]=(h*P-d*L-a*C)*K,e[4]=(f*N-l*G-u*E)*K,e[5]=(t*G-n*N+m*E)*K,e[6]=(T*D-_*L-x*M)*K,e[7]=(s*L-h*D+a*M)*K,e[8]=(l*q-i*N+u*S)*K,e[9]=(o*N-t*q-m*S)*K,e[10]=(_*P-c*D+x*w)*K,e[11]=(d*D-s*P-a*w)*K,e[12]=(i*E-l*z-f*S)*K,e[13]=(t*z-o*E+n*S)*K,e[14]=(c*M-_*C-T*w)*K,e[15]=(s*C-d*M+h*w)*K,e):null}},{}],99:[function(g,b,y){var e=g("./identity");b.exports=function(r,t,o,n){var m,l,i,f,u,s,d,h,a,_,c=t[0],T=t[1],x=t[2],w=n[0],M=n[1],D=n[2],C=o[0],P=o[1],L=o[2];return Math.abs(c-C)<1e-6&&Math.abs(T-P)<1e-6&&Math.abs(x-L)<1e-6?e(r):(d=c-C,h=T-P,a=x-L,m=M*(a*=_=1/Math.sqrt(d*d+h*h+a*a))-D*(h*=_),l=D*(d*=_)-w*a,i=w*h-M*d,(_=Math.sqrt(m*m+l*l+i*i))?(m*=_=1/_,l*=_,i*=_):(m=0,l=0,i=0),f=h*i-a*l,u=a*m-d*i,s=d*l-h*m,(_=Math.sqrt(f*f+u*u+s*s))?(f*=_=1/_,u*=_,s*=_):(f=0,u=0,s=0),r[0]=m,r[1]=f,r[2]=d,r[3]=0,r[4]=l,r[5]=u,r[6]=h,r[7]=0,r[8]=i,r[9]=s,r[10]=a,r[11]=0,r[12]=-(m*c+l*T+i*x),r[13]=-(f*c+u*T+s*x),r[14]=-(d*c+h*T+a*x),r[15]=1,r)}},{"./identity":97}],100:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=r[3],i=r[4],f=r[5],u=r[6],s=r[7],d=r[8],h=r[9],a=r[10],_=r[11],c=r[12],T=r[13],x=r[14],w=r[15],M=t[0],D=t[1],C=t[2],P=t[3];return e[0]=M*o+D*i+C*d+P*c,e[1]=M*n+D*f+C*h+P*T,e[2]=M*m+D*u+C*a+P*x,e[3]=M*l+D*s+C*_+P*w,e[4]=(M=t[4])*o+(D=t[5])*i+(C=t[6])*d+(P=t[7])*c,e[5]=M*n+D*f+C*h+P*T,e[6]=M*m+D*u+C*a+P*x,e[7]=M*l+D*s+C*_+P*w,e[8]=(M=t[8])*o+(D=t[9])*i+(C=t[10])*d+(P=t[11])*c,e[9]=M*n+D*f+C*h+P*T,e[10]=M*m+D*u+C*a+P*x,e[11]=M*l+D*s+C*_+P*w,e[12]=(M=t[12])*o+(D=t[13])*i+(C=t[14])*d+(P=t[15])*c,e[13]=M*n+D*f+C*h+P*T,e[14]=M*m+D*u+C*a+P*x,e[15]=M*l+D*s+C*_+P*w,e}},{}],101:[function(g,b,y){b.exports=function(e,r,t,o,n,m,l){var i=1/(r-t),f=1/(o-n),u=1/(m-l);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(r+t)*i,e[13]=(n+o)*f,e[14]=(l+m)*u,e[15]=1,e}},{}],102:[function(g,b,y){b.exports=function(e,r,t,o,n){var m=1/Math.tan(r/2),l=1/(o-n);return e[0]=m/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=m,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*o*l,e[15]=0,e}},{}],103:[function(g,b,y){b.exports=function(e,r,t,o){var n,m,l,i,f,u,s,d,h,a,_,c,T,x,w,M,D,C,P,L,S,E,N,z,q=o[0],G=o[1],K=o[2],ne=Math.sqrt(q*q+G*G+K*K);return Math.abs(ne)<1e-6?null:(q*=ne=1/ne,G*=ne,K*=ne,n=Math.sin(t),m=Math.cos(t),f=r[1],u=r[2],s=r[3],h=r[5],a=r[6],_=r[7],T=r[9],x=r[10],w=r[11],P=q*G*(l=1-m)-K*n,L=G*G*l+m,S=K*G*l+q*n,E=q*K*l+G*n,N=G*K*l-q*n,z=K*K*l+m,e[0]=(i=r[0])*(M=q*q*l+m)+(d=r[4])*(D=G*q*l+K*n)+(c=r[8])*(C=K*q*l-G*n),e[1]=f*M+h*D+T*C,e[2]=u*M+a*D+x*C,e[3]=s*M+_*D+w*C,e[4]=i*P+d*L+c*S,e[5]=f*P+h*L+T*S,e[6]=u*P+a*L+x*S,e[7]=s*P+_*L+w*S,e[8]=i*E+d*N+c*z,e[9]=f*E+h*N+T*z,e[10]=u*E+a*N+x*z,e[11]=s*E+_*N+w*z,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},{}],104:[function(g,b,y){b.exports=function(e,r,t){var o=Math.sin(t),n=Math.cos(t),m=r[4],l=r[5],i=r[6],f=r[7],u=r[8],s=r[9],d=r[10],h=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=m*n+u*o,e[5]=l*n+s*o,e[6]=i*n+d*o,e[7]=f*n+h*o,e[8]=u*n-m*o,e[9]=s*n-l*o,e[10]=d*n-i*o,e[11]=h*n-f*o,e}},{}],105:[function(g,b,y){b.exports=function(e,r,t){var o=Math.sin(t),n=Math.cos(t),m=r[0],l=r[1],i=r[2],f=r[3],u=r[8],s=r[9],d=r[10],h=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=m*n-u*o,e[1]=l*n-s*o,e[2]=i*n-d*o,e[3]=f*n-h*o,e[8]=m*o+u*n,e[9]=l*o+s*n,e[10]=i*o+d*n,e[11]=f*o+h*n,e}},{}],106:[function(g,b,y){b.exports=function(e,r,t){var o=Math.sin(t),n=Math.cos(t),m=r[0],l=r[1],i=r[2],f=r[3],u=r[4],s=r[5],d=r[6],h=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=m*n+u*o,e[1]=l*n+s*o,e[2]=i*n+d*o,e[3]=f*n+h*o,e[4]=u*n-m*o,e[5]=s*n-l*o,e[6]=d*n-i*o,e[7]=h*n-f*o,e}},{}],107:[function(g,b,y){b.exports=function(e,r,t){var o=t[0],n=t[1],m=t[2];return e[0]=r[0]*o,e[1]=r[1]*o,e[2]=r[2]*o,e[3]=r[3]*o,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*m,e[9]=r[9]*m,e[10]=r[10]*m,e[11]=r[11]*m,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},{}],108:[function(g,b,y){b.exports=function(e,r,t){var o,n,m,l,i,f,u,s,d,h,a,_,c=t[0],T=t[1],x=t[2];return r===e?(e[12]=r[0]*c+r[4]*T+r[8]*x+r[12],e[13]=r[1]*c+r[5]*T+r[9]*x+r[13],e[14]=r[2]*c+r[6]*T+r[10]*x+r[14],e[15]=r[3]*c+r[7]*T+r[11]*x+r[15]):(n=r[1],m=r[2],l=r[3],i=r[4],f=r[5],u=r[6],s=r[7],d=r[8],h=r[9],a=r[10],_=r[11],e[0]=o=r[0],e[1]=n,e[2]=m,e[3]=l,e[4]=i,e[5]=f,e[6]=u,e[7]=s,e[8]=d,e[9]=h,e[10]=a,e[11]=_,e[12]=o*c+i*T+d*x+r[12],e[13]=n*c+f*T+h*x+r[13],e[14]=m*c+u*T+a*x+r[14],e[15]=l*c+s*T+_*x+r[15]),e}},{}],109:[function(g,b,y){b.exports=function(e,r){if(e===r){var t=r[1],o=r[2],n=r[3],m=r[6],l=r[7],i=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=o,e[9]=m,e[11]=r[14],e[12]=n,e[13]=l,e[14]=i}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},{}],110:[function(g,b,y){"use strict";var e=g("barycentric"),r=g("polytope-closest-point/lib/closest_point_2d.js");function t(m,l){for(var i=[0,0,0,0],f=0;f<4;++f)for(var u=0;u<4;++u)i[u]+=m[4*f+u]*l[f];return i}function o(m,l,i,f,u){for(var s=t(f,t(i,t(l,[m[0],m[1],m[2],1]))),d=0;d<3;++d)s[d]/=s[3];return[.5*u[0]*(1+s[0]),.5*u[1]*(1-s[1])]}function n(m,l){for(var i=[0,0,0],f=0;f<m.length;++f)for(var u=m[f],s=l[f],d=0;d<3;++d)i[d]+=s*u[d];return i}b.exports=function(m,l,i,f,u,s){if(1===m.length)return[0,m[0].slice()];for(var d=new Array(m.length),h=0;h<m.length;++h)d[h]=o(m[h],i,f,u,s);var a=0,_=1/0;for(h=0;h<d.length;++h){for(var c=0,T=0;T<2;++T)c+=Math.pow(d[h][T]-l[T],2);c<_&&(_=c,a=h)}var x=function(M,D){if(2===M.length){for(var C=0,P=0,L=0;L<2;++L)C+=Math.pow(D[L]-M[0][L],2),P+=Math.pow(D[L]-M[1][L],2);return(C=Math.sqrt(C))+(P=Math.sqrt(P))<1e-6?[1,0]:[P/(C+P),C/(P+C)]}if(3===M.length){var S=[0,0];return r(M[0],M[1],M[2],D,S),e(M,S)}return[]}(d,l),w=0;for(h=0;h<3;++h){if(x[h]<-.001||x[h]>1.0001)return null;w+=x[h]}return Math.abs(w-1)>.001?null:[a,n(m,x),x]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(g,b,y){var e=g("glslify"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),m=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);y.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:o,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:m,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:i,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:u,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:s,fragment:d,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(g,b,y){"use strict";var e=g("gl-shader"),r=g("gl-buffer"),t=g("gl-vao"),o=g("gl-texture2d"),n=g("normals"),m=g("gl-mat4/multiply"),l=g("gl-mat4/invert"),i=g("ndarray"),f=g("colormap"),u=g("simplicial-complex-contour"),s=g("typedarray-pool"),d=g("./lib/shaders"),h=g("./lib/closest-point"),a=d.meshShader,_=d.wireShader,c=d.pointShader,T=d.pickShader,x=d.pointPickShader,w=d.contourShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(G,K,ne,X,J,se,V,j,H,oe,U,te,ee,le,ce,pe,de,be,he,xe,De,Se,ke,Fe,ve,Te,Le){this.gl=G,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=K,this.dirty=!0,this.triShader=ne,this.lineShader=X,this.pointShader=J,this.pickShader=se,this.pointPickShader=V,this.contourShader=j,this.trianglePositions=H,this.triangleColors=U,this.triangleNormals=ee,this.triangleUVs=te,this.triangleIds=oe,this.triangleVAO=le,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ce,this.edgeColors=de,this.edgeUVs=be,this.edgeIds=pe,this.edgeVAO=he,this.edgeCount=0,this.pointPositions=xe,this.pointColors=Se,this.pointUVs=ke,this.pointSizes=Fe,this.pointIds=De,this.pointVAO=ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Le,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=M,this._view=M,this._projection=M,this._resolution=[1,1]}var C=D.prototype;function P(G,K){if(!K||!K.length)return 1;for(var ne=0;ne<K.length;++ne){if(K.length<2)return 1;if(K[ne][0]===G)return K[ne][1];if(K[ne][0]>G&&ne>0){var X=(K[ne][0]-G)/(K[ne][0]-K[ne-1][0]);return K[ne][1]*(1-X)+X*K[ne-1][1]}}return 1}function L(G){var K=e(G,a.vertex,a.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K.attributes.normal.location=4,K}function S(G){var K=e(G,_.vertex,_.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K}function E(G){var K=e(G,c.vertex,c.fragment);return K.attributes.position.location=0,K.attributes.color.location=2,K.attributes.uv.location=3,K.attributes.pointSize.location=4,K}function N(G){var K=e(G,T.vertex,T.fragment);return K.attributes.position.location=0,K.attributes.id.location=1,K}function z(G){var K=e(G,x.vertex,x.fragment);return K.attributes.position.location=0,K.attributes.id.location=1,K.attributes.pointSize.location=4,K}function q(G){var K=e(G,w.vertex,w.fragment);return K.attributes.position.location=0,K}C.isOpaque=function(){return!this.hasAlpha},C.isTransparent=function(){return this.hasAlpha},C.pickSlots=1,C.setPickBase=function(G){this.pickId=G},C.highlight=function(G){if(G&&this.contourEnable){for(var K=u(this.cells,this.intensity,G.intensity),ne=K.cells,X=K.vertexIds,J=K.vertexWeights,se=ne.length,V=s.mallocFloat32(6*se),j=0,H=0;H<se;++H)for(var oe=ne[H],U=0;U<2;++U){var te=oe[0];2===oe.length&&(te=oe[U]);for(var ce=J[te],pe=1-ce,de=this.positions[X[te][0]],be=this.positions[X[te][1]],he=0;he<3;++he)V[j++]=ce*de[he]+pe*be[he]}this.contourCount=j/3|0,this.contourPositions.update(V.subarray(0,j)),s.free(V)}else this.contourCount=0},C.update=function(G){G=G||{};var K=this.gl;this.dirty=!0,"contourEnable"in G&&(this.contourEnable=G.contourEnable),"contourColor"in G&&(this.contourColor=G.contourColor),"lineWidth"in G&&(this.lineWidth=G.lineWidth),"lightPosition"in G&&(this.lightPosition=G.lightPosition),this.hasAlpha=!1,"opacity"in G&&(this.opacity=G.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in G&&(this.opacityscale=G.opacityscale,this.hasAlpha=!0),"ambient"in G&&(this.ambientLight=G.ambient),"diffuse"in G&&(this.diffuseLight=G.diffuse),"specular"in G&&(this.specularLight=G.specular),"roughness"in G&&(this.roughness=G.roughness),"fresnel"in G&&(this.fresnel=G.fresnel),G.texture?(this.texture.dispose(),this.texture=o(K,G.texture)):G.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=K.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=K.LINEAR,this.texture.setPixels(function(rn,hn){for(var cn=f({colormap:rn,nshades:256,format:"rgba"}),mn=new Uint8Array(1024),nn=0;nn<256;++nn){for(var Xe=cn[nn],nt=0;nt<3;++nt)mn[4*nn+nt]=Xe[nt];mn[4*nn+3]=hn?255*P(nn/255,hn):255*Xe[3]}return i(mn,[256,256,4],[4,0,1])}(G.colormap,this.opacityscale)),this.texture.generateMipmap());var ne=G.cells,X=G.positions;if(X&&ne){var J=[],se=[],V=[],j=[],H=[],oe=[],U=[],te=[],ee=[],le=[],ce=[],pe=[],de=[],be=[];this.cells=ne,this.positions=X;var he=G.vertexNormals,xe=G.cellNormals,De=void 0===G.vertexNormalsEpsilon?1e-6:G.vertexNormalsEpsilon;G.useFacetNormals&&!xe&&(xe=n.faceNormals(ne,X,void 0===G.faceNormalsEpsilon?1e-6:G.faceNormalsEpsilon)),xe||he||(he=n.vertexNormals(ne,X,De));var ke=G.vertexColors,Fe=G.cellColors,ve=G.meshColor||[1,1,1,1],Te=G.vertexUVs,Le=G.vertexIntensity,Oe=G.cellUVs,Ne=G.cellIntensity,Be=1/0,He=-1/0;if(!Te&&!Oe)if(Le)if(G.vertexIntensityBounds)Be=+G.vertexIntensityBounds[0],He=+G.vertexIntensityBounds[1];else for(var Ve=0;Ve<Le.length;++Ve){var it=Le[Ve];Be=Math.min(Be,it),He=Math.max(He,it)}else if(Ne)if(G.cellIntensityBounds)Be=+G.cellIntensityBounds[0],He=+G.cellIntensityBounds[1];else for(Ve=0;Ve<Ne.length;++Ve)it=Ne[Ve],Be=Math.min(Be,it),He=Math.max(He,it);else for(Ve=0;Ve<X.length;++Ve)it=X[Ve][2],Be=Math.min(Be,it),He=Math.max(He,it);this.intensity=Le||Ne||function(rn){for(var hn=rn.length,cn=new Array(hn),mn=0;mn<hn;++mn)cn[mn]=rn[mn][2];return cn}(X),this.pickVertex=!(Ne||Fe);var ze=G.pointSizes,je=G.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Ve=0;Ve<X.length;++Ve)for(var qe=X[Ve],Ye=0;Ye<3;++Ye)!isNaN(qe[Ye])&&isFinite(qe[Ye])&&(this.bounds[0][Ye]=Math.min(this.bounds[0][Ye],qe[Ye]),this.bounds[1][Ye]=Math.max(this.bounds[1][Ye],qe[Ye]));var ct=0,vt=0,wt=0;e:for(Ve=0;Ve<ne.length;++Ve){var Ot=ne[Ve];switch(Ot.length){case 1:for(qe=X[ft=Ot[0]],Ye=0;Ye<3;++Ye)if(isNaN(qe[Ye])||!isFinite(qe[Ye]))continue e;le.push(qe[0],qe[1],qe[2]),st=ke?ke[ft]:Fe?Fe[Ve]:ve,this.opacityscale&&Le?se.push(st[0],st[1],st[2],this.opacity*P((Le[ft]-Be)/(He-Be),this.opacityscale)):3===st.length?ce.push(st[0],st[1],st[2],this.opacity):(ce.push(st[0],st[1],st[2],st[3]*this.opacity),st[3]<1&&(this.hasAlpha=!0)),pe.push((Ct=Te?Te[ft]:Le?[(Le[ft]-Be)/(He-Be),0]:Oe?Oe[Ve]:Ne?[(Ne[Ve]-Be)/(He-Be),0]:[(qe[2]-Be)/(He-Be),0])[0],Ct[1]),de.push(ze?ze[ft]:je),be.push(Ve),wt+=1;break;case 2:for(Ye=0;Ye<2;++Ye){qe=X[ft=Ot[Ye]];for(var St=0;St<3;++St)if(isNaN(qe[St])||!isFinite(qe[St]))continue e}for(Ye=0;Ye<2;++Ye)qe=X[ft=Ot[Ye]],oe.push(qe[0],qe[1],qe[2]),st=ke?ke[ft]:Fe?Fe[Ve]:ve,this.opacityscale&&Le?se.push(st[0],st[1],st[2],this.opacity*P((Le[ft]-Be)/(He-Be),this.opacityscale)):3===st.length?U.push(st[0],st[1],st[2],this.opacity):(U.push(st[0],st[1],st[2],st[3]*this.opacity),st[3]<1&&(this.hasAlpha=!0)),te.push((Ct=Te?Te[ft]:Le?[(Le[ft]-Be)/(He-Be),0]:Oe?Oe[Ve]:Ne?[(Ne[Ve]-Be)/(He-Be),0]:[(qe[2]-Be)/(He-Be),0])[0],Ct[1]),ee.push(Ve);vt+=1;break;case 3:for(Ye=0;Ye<3;++Ye)for(qe=X[ft=Ot[Ye]],St=0;St<3;++St)if(isNaN(qe[St])||!isFinite(qe[St]))continue e;for(Ye=0;Ye<3;++Ye){var ft,st,Ct,$t;qe=X[ft=Ot[2-Ye]],J.push(qe[0],qe[1],qe[2]),(st=ke?ke[ft]:Fe?Fe[Ve]:ve)?this.opacityscale&&Le?se.push(st[0],st[1],st[2],this.opacity*P((Le[ft]-Be)/(He-Be),this.opacityscale)):3===st.length?se.push(st[0],st[1],st[2],this.opacity):(se.push(st[0],st[1],st[2],st[3]*this.opacity),st[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1),j.push((Ct=Te?Te[ft]:Le?[(Le[ft]-Be)/(He-Be),0]:Oe?Oe[Ve]:Ne?[(Ne[Ve]-Be)/(He-Be),0]:[(qe[2]-Be)/(He-Be),0])[0],Ct[1]),V.push(($t=he?he[ft]:xe[Ve])[0],$t[1],$t[2]),H.push(Ve)}ct+=1}}this.pointCount=wt,this.edgeCount=vt,this.triangleCount=ct,this.pointPositions.update(le),this.pointColors.update(ce),this.pointUVs.update(pe),this.pointSizes.update(de),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(oe),this.edgeColors.update(U),this.edgeUVs.update(te),this.edgeIds.update(new Uint32Array(ee)),this.trianglePositions.update(J),this.triangleColors.update(se),this.triangleUVs.update(j),this.triangleNormals.update(V),this.triangleIds.update(new Uint32Array(H))}},C.drawTransparent=C.draw=function(G){for(var K=this.gl,ne=(G=G||{}).model||M,X=G.view||M,J=G.projection||M,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)se[0][V]=Math.max(se[0][V],this.clipBounds[0][V]),se[1][V]=Math.min(se[1][V],this.clipBounds[1][V]);var j={model:ne,view:X,projection:J,inverseModel:M.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};j.inverseModel=l(j.inverseModel,j.model),K.disable(K.CULL_FACE),this.texture.bind(0);var H=new Array(16);for(m(H,j.view,j.model),m(H,j.projection,H),l(H,H),V=0;V<3;++V)j.eyePosition[V]=H[12+V]/H[15];var oe,U=H[15];for(V=0;V<3;++V)U+=this.lightPosition[V]*H[4*V+3];for(V=0;V<3;++V){for(var te=H[12+V],ee=0;ee<3;++ee)te+=H[4*ee+V]*this.lightPosition[ee];j.lightPosition[V]=te/U}this.triangleCount>0&&((oe=this.triShader).bind(),oe.uniforms=j,this.triangleVAO.bind(),K.drawArrays(K.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((oe=this.lineShader).bind(),oe.uniforms=j,this.edgeVAO.bind(),K.lineWidth(this.lineWidth*this.pixelRatio),K.drawArrays(K.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((oe=this.pointShader).bind(),oe.uniforms=j,this.pointVAO.bind(),K.drawArrays(K.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((oe=this.contourShader).bind(),oe.uniforms=j,this.contourVAO.bind(),K.drawArrays(K.LINES,0,this.contourCount),this.contourVAO.unbind())},C.drawPick=function(G){for(var K=this.gl,ne=(G=G||{}).model||M,X=G.view||M,J=G.projection||M,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],V=0;V<3;++V)se[0][V]=Math.max(se[0][V],this.clipBounds[0][V]),se[1][V]=Math.min(se[1][V],this.clipBounds[1][V]);this._model=[].slice.call(ne),this._view=[].slice.call(X),this._projection=[].slice.call(J),this._resolution=[K.drawingBufferWidth,K.drawingBufferHeight];var j,H={model:ne,view:X,projection:J,clipBounds:se,pickId:this.pickId/255};(j=this.pickShader).bind(),j.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),K.drawArrays(K.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),K.lineWidth(this.lineWidth*this.pixelRatio),K.drawArrays(K.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((j=this.pointPickShader).bind(),j.uniforms=H,this.pointVAO.bind(),K.drawArrays(K.POINTS,0,this.pointCount),this.pointVAO.unbind())},C.pick=function(G){if(!G||G.id!==this.pickId)return null;for(var K=G.value[0]+256*G.value[1]+65536*G.value[2],ne=this.cells[K],X=this.positions,J=new Array(ne.length),se=0;se<ne.length;++se)J[se]=X[ne[se]];var V=G.coord[0],j=G.coord[1];if(!this.pickVertex){var H=this.positions[ne[0]],oe=this.positions[ne[1]],U=this.positions[ne[2]];return{_cellCenter:!0,position:[V,j],index:K,cell:ne,cellId:K,intensity:this.intensity[K],dataCoordinate:[(H[0]+oe[0]+U[0])/3,(H[1]+oe[1]+U[1])/3,(H[2]+oe[2]+U[2])/3]}}var ee=h(J,[V*this.pixelRatio,this._resolution[1]-j*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ee)return null;var le=ee[2],ce=0;for(se=0;se<ne.length;++se)ce+=le[se]*this.intensity[ne[se]];return{position:ee[1],index:ne[ee[0]],cell:ne,cellId:K,intensity:ce,dataCoordinate:this.positions[ne[ee[0]]]}},C.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=function(G,K){if(1===arguments.length&&(G=(K=G).gl),!(G.getExtension("OES_standard_derivatives")||G.getExtension("MOZ_OES_standard_derivatives")||G.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var X=L(G),J=S(G),se=E(G),V=N(G),j=z(G),H=q(G),oe=o(G,i(new Uint8Array([255,255,255,255]),[1,1,4]));oe.generateMipmap(),oe.minFilter=G.LINEAR_MIPMAP_LINEAR,oe.magFilter=G.LINEAR;var U=r(G),te=r(G),ee=r(G),le=r(G),ce=r(G),pe=t(G,[{buffer:U,type:G.FLOAT,size:3},{buffer:ce,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:te,type:G.FLOAT,size:4},{buffer:ee,type:G.FLOAT,size:2},{buffer:le,type:G.FLOAT,size:3}]),de=r(G),be=r(G),he=r(G),xe=r(G),De=t(G,[{buffer:de,type:G.FLOAT,size:3},{buffer:xe,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:G.FLOAT,size:4},{buffer:he,type:G.FLOAT,size:2}]),Se=r(G),ke=r(G),Fe=r(G),ve=r(G),Te=r(G),Le=t(G,[{buffer:Se,type:G.FLOAT,size:3},{buffer:Te,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:G.FLOAT,size:4},{buffer:Fe,type:G.FLOAT,size:2},{buffer:ve,type:G.FLOAT,size:1}]),Oe=r(G),Be=new D(G,oe,X,J,se,V,j,H,U,ce,te,ee,le,pe,de,xe,be,he,De,Se,Te,ke,Fe,ve,Le,Oe,t(G,[{buffer:Oe,type:G.FLOAT,size:3}]));return Be.update(K),Be}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(g,b,y){"use strict";b.exports=function(i){var f=i.gl;return new o(i,e(f,[0,0,0,1,1,0,1,1]),r(f,t.boxVert,t.lineFrag))};var e=g("gl-buffer"),r=g("gl-shader"),t=g("./shaders");function o(i,f,u){this.plot=i,this.vbo=f,this.shader=u}var n,m,l=o.prototype;l.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},l.drawBox=(n=[0,0],m=[0,0],function(i,f,u,s,d){var a=this.shader,_=this.plot.gl;n[0]=i,n[1]=f,m[0]=u,m[1]=s,a.uniforms.lo=n,a.uniforms.hi=m,a.uniforms.color=d,_.drawArrays(_.TRIANGLE_STRIP,0,4)}),l.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(g,b,y){"use strict";b.exports=function(h){var a=h.gl;return new n(h,e(a),r(a,o.gridVert,o.gridFrag),r(a,o.tickVert,o.gridFrag))};var e=g("gl-buffer"),r=g("gl-shader"),t=g("binary-search-bounds"),o=g("./shaders");function n(h,a,_,c){this.plot=h,this.vbo=a,this.shader=_,this.tickShader=c,this.ticks=[[],[]]}function m(h,a){return h-a}var l,i,f,u,s,h,a,_,c,T,x,d=n.prototype;d.draw=(l=[0,0],i=[0,0],f=[0,0],function(){for(var h=this.plot,a=this.vbo,_=this.shader,c=this.ticks,T=h.gl,x=h._tickBounds,w=h.dataBox,M=h.viewBox,D=h.gridLineWidth,C=h.gridLineColor,P=h.gridLineEnable,L=h.pixelRatio,S=0;S<2;++S){var E=x[S],z=.5*(w[S+2]+w[S]),q=w[S+2]-w[S];i[S]=2*(x[S+2]-E)/q,l[S]=2*(E-z)/q}_.bind(),a.bind(),_.attributes.dataCoord.pointer(),_.uniforms.dataShift=l,_.uniforms.dataScale=i;var G=0;for(S=0;S<2;++S){f[0]=f[1]=0,f[S]=1,_.uniforms.dataAxis=f,_.uniforms.lineWidth=D[S]/(M[S+2]-M[S])*L,_.uniforms.color=C[S];var K=6*c[S].length;P[S]&&K&&T.drawArrays(T.TRIANGLES,G,K),G+=K}}),d.drawTickMarks=(h=[0,0],a=[0,0],_=[1,0],c=[0,1],T=[0,0],x=[0,0],function(){for(var w=this.plot,M=this.vbo,D=this.tickShader,C=this.ticks,P=w.gl,L=w._tickBounds,S=w.dataBox,E=w.viewBox,N=w.pixelRatio,z=w.screenBox,q=z[2]-z[0],G=z[3]-z[1],K=E[2]-E[0],ne=E[3]-E[1],X=0;X<2;++X){var J=L[X],V=.5*(S[X+2]+S[X]),j=S[X+2]-S[X];a[X]=2*(L[X+2]-J)/j,h[X]=2*(J-V)/j}a[0]*=K/q,h[0]*=K/q,a[1]*=ne/G,h[1]*=ne/G,D.bind(),M.bind(),D.attributes.dataCoord.pointer();var H=D.uniforms;H.dataShift=h,H.dataScale=a;var oe=w.tickMarkLength,U=w.tickMarkWidth,te=w.tickMarkColor,ee=6*C[0].length,le=Math.min(t.ge(C[0],(S[0]-L[0])/(L[2]-L[0]),m),C[0].length),ce=Math.min(t.gt(C[0],(S[2]-L[0])/(L[2]-L[0]),m),C[0].length),pe=0+6*le,de=6*Math.max(0,ce-le),be=Math.min(t.ge(C[1],(S[1]-L[1])/(L[3]-L[1]),m),C[1].length),he=Math.min(t.gt(C[1],(S[3]-L[1])/(L[3]-L[1]),m),C[1].length),xe=ee+6*be,De=6*Math.max(0,he-be);T[0]=2*(E[0]-oe[1])/q-1,T[1]=(E[3]+E[1])/G-1,x[0]=oe[1]*N/q,x[1]=U[1]*N/G,De&&(H.color=te[1],H.tickScale=x,H.dataAxis=c,H.screenOffset=T,P.drawArrays(P.TRIANGLES,xe,De)),T[0]=(E[2]+E[0])/q-1,T[1]=2*(E[1]-oe[0])/G-1,x[0]=U[0]*N/q,x[1]=oe[0]*N/G,de&&(H.color=te[0],H.tickScale=x,H.dataAxis=_,H.screenOffset=T,P.drawArrays(P.TRIANGLES,pe,de)),T[0]=2*(E[2]+oe[3])/q-1,T[1]=(E[3]+E[1])/G-1,x[0]=oe[3]*N/q,x[1]=U[3]*N/G,De&&(H.color=te[3],H.tickScale=x,H.dataAxis=c,H.screenOffset=T,P.drawArrays(P.TRIANGLES,xe,De)),T[0]=(E[2]+E[0])/q-1,T[1]=2*(E[3]+oe[2])/G-1,x[0]=U[2]*N/q,x[1]=oe[2]*N/G,de&&(H.color=te[2],H.tickScale=x,H.dataAxis=_,H.screenOffset=T,P.drawArrays(P.TRIANGLES,pe,de))}),d.update=(u=[1,1,-1,-1,1,-1],s=[1,-1,1,1,-1,-1],function(h){for(var a=h.ticks,_=h.bounds,c=new Float32Array(18*(a[0].length+a[1].length)),T=0,x=[[],[]],w=0;w<2;++w)for(var M=x[w],D=a[w],C=_[w],P=_[w+2],L=0;L<D.length;++L){var S=(D[L].x-C)/(P-C);M.push(S);for(var E=0;E<6;++E)c[T++]=S,c[T++]=u[E],c[T++]=s[E]}this.ticks=x,this.vbo.update(c)}),d.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(g,b,y){"use strict";b.exports=function(i){var f=i.gl;return new o(i,e(f,[-1,-1,-1,1,1,-1,1,1]),r(f,t.lineVert,t.lineFrag))};var e=g("gl-buffer"),r=g("gl-shader"),t=g("./shaders");function o(i,f,u){this.plot=i,this.vbo=f,this.shader=u}var n,m,l=o.prototype;l.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},l.drawLine=(n=[0,0],m=[0,0],function(i,f,u,s,d,h){var a=this.plot,_=this.shader,c=a.gl;n[0]=i,n[1]=f,m[0]=u,m[1]=s,_.uniforms.start=n,_.uniforms.end=m,_.uniforms.width=d*a.pixelRatio,_.uniforms.color=h,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),l.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(g,b,y){"use strict";var e=g("glslify"),r=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);b.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(g,b,y){"use strict";b.exports=function(a){var _=a.gl;return new m(a,e(_),r(_,n.textVert,n.textFrag))};var e=g("gl-buffer"),r=g("gl-shader"),t=g("text-cache"),o=g("binary-search-bounds"),n=g("./shaders");function m(a,_,c){this.plot=a,this.vbo=_,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var l,i,f,u,s,d,a,_,h=m.prototype;h.drawTicks=(l=[0,0],i=[0,0],f=[0,0],function(a){var _=this.plot,c=this.shader,T=this.tickX[a],x=this.tickOffset[a],w=_.gl,M=_.viewBox,D=_.dataBox,C=_.screenBox,P=_.pixelRatio,L=_.tickEnable,S=_.tickPad,E=_.tickColor,N=_.tickAngle,z=_.labelEnable,q=_.labelPad,G=_.labelColor,K=_.labelAngle,ne=this.labelOffset[a],X=this.labelCount[a],J=o.lt(T,D[a]),se=o.le(T,D[a+2]);l[0]=l[1]=0,l[a]=1,i[a]=(M[2+a]+M[a])/(C[2+a]-C[a])-1;var V=2/C[2+(1^a)]-C[1^a];i[1^a]=V*M[1^a]-1,L[a]&&(i[1^a]-=V*P*S[a],J<se&&x[se]>x[J]&&(c.uniforms.dataAxis=l,c.uniforms.screenOffset=i,c.uniforms.color=E[a],c.uniforms.angle=N[a],w.drawArrays(w.TRIANGLES,x[J],x[se]-x[J]))),z[a]&&X&&(i[1^a]-=V*P*q[a],c.uniforms.dataAxis=f,c.uniforms.screenOffset=i,c.uniforms.color=G[a],c.uniforms.angle=K[a],w.drawArrays(w.TRIANGLES,ne,X)),i[1^a]=V*M[2+(1^a)]-1,L[a+2]&&(i[1^a]+=V*P*S[a+2],J<se&&x[se]>x[J]&&(c.uniforms.dataAxis=l,c.uniforms.screenOffset=i,c.uniforms.color=E[a+2],c.uniforms.angle=N[a+2],w.drawArrays(w.TRIANGLES,x[J],x[se]-x[J]))),z[a+2]&&X&&(i[1^a]+=V*P*q[a+2],c.uniforms.dataAxis=f,c.uniforms.screenOffset=i,c.uniforms.color=G[a+2],c.uniforms.angle=K[a+2],w.drawArrays(w.TRIANGLES,ne,X))}),h.drawTitle=(a=[0,0],_=[0,0],function(){var c=this.plot,T=this.shader,x=c.gl,w=c.screenBox,M=c.titleCenter,D=c.titleAngle,C=c.titleColor,P=c.pixelRatio;if(this.titleCount){for(var L=0;L<2;++L)_[L]=2*(M[L]*P-w[L])/(w[2+L]-w[L])-1;T.bind(),T.uniforms.dataAxis=a,T.uniforms.screenOffset=_,T.uniforms.angle=D,T.uniforms.color=C,x.drawArrays(x.TRIANGLES,this.titleOffset,this.titleCount)}}),h.bind=(u=[0,0],s=[0,0],d=[0,0],function(){var a=this.plot,_=this.shader,c=a._tickBounds,T=a.dataBox,x=a.screenBox,w=a.viewBox;_.bind();for(var M=0;M<2;++M){var D=c[M],P=.5*(T[M+2]+T[M]),L=T[M+2]-T[M],E=w[M+2]-w[M],z=x[M+2]-x[M];s[M]=2*(c[M+2]-D)/L*E/z,u[M]=2*(D-P)/L*E/z}d[1]=2*a.pixelRatio/(x[3]-x[1]),d[0]=d[1]*(x[3]-x[1])/(x[2]-x[0]),_.uniforms.dataScale=s,_.uniforms.dataShift=u,_.uniforms.textScale=d,this.vbo.bind(),_.attributes.textCoordinate.pointer()}),h.update=function(a){var _,c,T,x,w,M=[],D=a.ticks,C=a.bounds;for(w=0;w<2;++w){var P=[Math.floor(M.length/3)],L=[-1/0],S=D[w];for(_=0;_<S.length;++_){var E=S[_],N=E.x,q=E.font||"sans-serif";x=E.fontSize||12;for(var G=1/(C[w+2]-C[w]),K=C[w],ne=E.text.split("\n"),X=0;X<ne.length;X++)for(T=t(q,ne[X]).data,c=0;c<T.length;c+=2)M.push(T[c]*x,-T[c+1]*x-X*x*1.2,(N-K)*G);P.push(Math.floor(M.length/3)),L.push(N)}this.tickOffset[w]=P,this.tickX[w]=L}for(w=0;w<2;++w){for(this.labelOffset[w]=Math.floor(M.length/3),T=t(a.labelFont[w],a.labels[w],{textAlign:"center"}).data,x=a.labelSize[w],_=0;_<T.length;_+=2)M.push(T[_]*x,-T[_+1]*x,0);this.labelCount[w]=Math.floor(M.length/3)-this.labelOffset[w]}for(this.titleOffset=Math.floor(M.length/3),T=t(a.titleFont,a.title).data,x=a.titleSize,_=0;_<T.length;_+=2)M.push(T[_]*x,-T[_+1]*x,0);this.titleCount=Math.floor(M.length/3)-this.titleOffset,this.vbo.update(M)},h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(g,b,y){"use strict";b.exports=function(u){var s=u.gl,h=new m(s,e(s,[s.drawingBufferWidth,s.drawingBufferHeight]));return h.grid=r(h),h.text=t(h),h.line=o(h),h.box=n(h),h.update(u),h};var e=g("gl-select-static"),r=g("./lib/grid"),t=g("./lib/text"),o=g("./lib/line"),n=g("./lib/box");function m(u,s){this.gl=u,this.pickBuffer=s,this.screenBox=[0,0,u.drawingBufferWidth,u.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var l=m.prototype;function i(u){for(var s=u.slice(),d=0;d<s.length;++d)s[d]=s[d].slice();return s}function f(u,s){return u.x-s.x}l.setDirty=function(){this.dirty=this.pickDirty=!0},l.setOverlayDirty=function(){this.dirty=!0},l.nextDepthValue=function(){return this._depthCounter++/65536},l.draw=function(){var u=this.gl,s=this.screenBox,d=this.viewBox,h=this.dataBox,a=this.pixelRatio,_=this.grid,c=this.line,T=this.text,x=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,u.bindFramebuffer(u.FRAMEBUFFER,null),u.enable(u.SCISSOR_TEST),u.disable(u.DEPTH_TEST),u.depthFunc(u.LESS),u.depthMask(!1),u.enable(u.BLEND),u.blendEquation(u.FUNC_ADD,u.FUNC_ADD),u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),this.borderColor){u.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]);var w=this.borderColor;u.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT)}u.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]),u.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);var M=this.backgroundColor;u.clearColor(M[0]*M[3],M[1]*M[3],M[2]*M[3],M[3]),u.clear(u.COLOR_BUFFER_BIT),_.draw();var D=this.zeroLineEnable,C=this.zeroLineColor,P=this.zeroLineWidth;if(D[0]||D[1]){c.bind();for(var L=0;L<2;++L)if(D[L]&&h[L]<=0&&h[L+2]>=0){var S=s[L]-h[L]*(s[L+2]-s[L])/(h[L+2]-h[L]);0===L?c.drawLine(S,s[1],S,s[3],P[L],C[L]):c.drawLine(s[0],S,s[2],S,P[L],C[L])}}for(L=0;L<x.length;++L)x[L].draw();u.viewport(s[0],s[1],s[2]-s[0],s[3]-s[1]),u.scissor(s[0],s[1],s[2]-s[0],s[3]-s[1]),this.grid.drawTickMarks(),c.bind();var E=this.borderLineEnable,N=this.borderLineWidth,z=this.borderLineColor;for(E[1]&&c.drawLine(d[0],d[1]-.5*N[1]*a,d[0],d[3]+.5*N[3]*a,N[1],z[1]),E[0]&&c.drawLine(d[0]-.5*N[0]*a,d[1],d[2]+.5*N[2]*a,d[1],N[0],z[0]),E[3]&&c.drawLine(d[2],d[1]-.5*N[1]*a,d[2],d[3]+.5*N[3]*a,N[3],z[3]),E[2]&&c.drawLine(d[0]-.5*N[0]*a,d[3],d[2]+.5*N[2]*a,d[3],N[2],z[2]),T.bind(),L=0;L<2;++L)T.drawTicks(L);this.titleEnable&&T.drawTitle();var q=this.overlays;for(L=0;L<q.length;++L)q[L].draw();u.disable(u.SCISSOR_TEST),u.disable(u.BLEND),u.depthMask(!0)}},l.drawPick=function(){if(!this.static){var u=this.pickBuffer;this._pickTimeout=null,u.begin();for(var s=1,d=this.objects,h=0;h<d.length;++h)s=d[h].drawPick(s);u.end()}},l.pick=function(u,s){if(!this.static){var d=this.pixelRatio,h=this.pickPixelRatio,a=this.viewBox,_=0|Math.round((u-a[0]/d)*h),c=0|Math.round((s-a[1]/d)*h),T=this.pickBuffer.query(_,c,this.pickRadius);if(!T)return null;for(var x=T.id+(T.value[0]<<8)+(T.value[1]<<16)+(T.value[2]<<24),w=this.objects,M=0;M<w.length;++M){var D=w[M].pick(_,c,x);if(D)return D}return null}},l.setScreenBox=function(u){var s=this.screenBox,d=this.pixelRatio;s[0]=0|Math.round(u[0]*d),s[1]=0|Math.round(u[1]*d),s[2]=0|Math.round(u[2]*d),s[3]=0|Math.round(u[3]*d),this.setDirty()},l.setDataBox=function(u){var s=this.dataBox;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3])&&(s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],this.setDirty())},l.setViewBox=function(u){var s=this.pixelRatio,d=this.viewBox;d[0]=0|Math.round(u[0]*s),d[1]=0|Math.round(u[1]*s),d[2]=0|Math.round(u[2]*s),d[3]=0|Math.round(u[3]*s);var h=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((u[2]-u[0])*h),0|Math.round((u[3]-u[1])*h)],this.setDirty()},l.update=function(u){var s=this.gl;this.pixelRatio=(u=u||{}).pixelRatio||1;var d=this.pixelRatio;this.pickPixelRatio=Math.max(d,1),this.setScreenBox(u.screenBox||[0,0,s.drawingBufferWidth/d,s.drawingBufferHeight/d]),this.setViewBox(u.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);var h=this.viewBox,a=(h[2]-h[0])/(h[3]-h[1]);this.setDataBox(u.dataBox||[-10,-10/a,10,10/a]),this.borderColor=!1!==u.borderColor&&(u.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(u.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(u.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(u.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(u.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(u.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(u.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(u.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(u.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(u.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(u.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(u.titleCenter||[.5*(h[0]+h[2])/d,(h[3]+120)/d]).slice(),this.titleEnable=!("titleEnable"in u)||!!u.titleEnable,this.titleAngle=u.titleAngle||0,this.titleColor=(u.titleColor||[0,0,0,1]).slice(),this.labelPad=(u.labelPad||[15,15,15,15]).slice(),this.labelAngle=(u.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(u.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(u.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(u.tickPad||[15,15,15,15]).slice(),this.tickAngle=(u.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(u.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(u.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(u.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(u.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(u.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var _=u.ticks||[[],[]],c=this._tickBounds;c[0]=c[1]=1/0,c[2]=c[3]=-1/0;for(var T=0;T<2;++T){var x=_[T].slice(0);0!==x.length&&(x.sort(f),c[T]=Math.min(c[T],x[0].x),c[T+2]=Math.max(c[T+2],x[x.length-1].x))}this.grid.update({bounds:c,ticks:_}),this.text.update({bounds:c,ticks:_,labels:u.labels||["x","y"],labelSize:u.labelSize||[12,12],labelFont:u.labelFont||["sans-serif","sans-serif"],title:u.title||"",titleSize:u.titleSize||18,titleFont:u.titleFont||"sans-serif"}),this.static=!!u.static,this.setDirty()},l.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var u=this.objects.length-1;u>=0;--u)this.objects[u].dispose();for(this.objects.length=0,u=this.overlays.length-1;u>=0;--u)this.overlays[u].dispose();this.overlays.length=0,this.gl=null},l.addObject=function(u){this.objects.indexOf(u)<0&&(this.objects.push(u),this.setDirty())},l.removeObject=function(u){for(var s=this.objects,d=0;d<s.length;++d)if(s[d]===u){s.splice(d,1),this.setDirty();break}},l.addOverlay=function(u){this.overlays.indexOf(u)<0&&(this.overlays.push(u),this.setOverlayDirty())},l.removeOverlay=function(u){for(var s=this.overlays,d=0;d<s.length;++d)if(s[d]===u){s.splice(d,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(g,b,y){"use strict";b.exports=function(l,i){l=l||document.body;var f=[.01,1/0];"distanceLimits"in(i=i||{})&&(f[0]=i.distanceLimits[0],f[1]=i.distanceLimits[1]),"zoomMin"in i&&(f[0]=i.zoomMin),"zoomMax"in i&&(f[1]=i.zoomMax);var u=r({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:f}),s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0,h=l.clientWidth,a=l.clientHeight,_={keyBindingMode:"rotate",enableWheel:!0,view:u,element:l,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:u.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var c=e(),T=this.delay,x=c-2*T;u.idle(c-T),u.recalcMatrix(x),u.flush(c-(100+2*T));for(var w=!0,M=u.computedMatrix,D=0;D<16;++D)w=w&&s[D]===M[D],s[D]=M[D];var C=l.clientWidth===h&&l.clientHeight===a;return h=l.clientWidth,a=l.clientHeight,w?!C:(d=Math.exp(u.computedRadius[0]),!0)},lookAt:function(c,T,x){u.lookAt(u.lastT(),c,T,x)},rotate:function(c,T,x){u.rotate(u.lastT(),c,T,x)},pan:function(c,T,x){u.pan(u.lastT(),c,T,x)},translate:function(c,T,x){u.translate(u.lastT(),c,T,x)}};return Object.defineProperties(_,{matrix:{get:function(){return u.computedMatrix},set:function(c){return u.setMatrix(u.lastT(),c),u.computedMatrix},enumerable:!0},mode:{get:function(){return u.getMode()},set:function(c){var T=u.computedUp.slice(),x=u.computedEye.slice(),w=u.computedCenter.slice();if(u.setMode(c),"turntable"===c){var M=e();u._active.lookAt(M,x,w,T),u._active.lookAt(M+500,x,w,[0,0,1]),u._active.flush(M)}return u.getMode()},enumerable:!0},center:{get:function(){return u.computedCenter},set:function(c){return u.lookAt(u.lastT(),null,c),u.computedCenter},enumerable:!0},eye:{get:function(){return u.computedEye},set:function(c){return u.lookAt(u.lastT(),c),u.computedEye},enumerable:!0},up:{get:function(){return u.computedUp},set:function(c){return u.lookAt(u.lastT(),null,null,c),u.computedUp},enumerable:!0},distance:{get:function(){return d},set:function(c){return u.setDistance(u.lastT(),c),c},enumerable:!0},distanceLimits:{get:function(){return u.getDistanceLimits(f)},set:function(c){return u.setDistanceLimits(c),c},enumerable:!0}}),l.addEventListener("contextmenu",function(c){return c.preventDefault(),!1}),_._lastX=-1,_._lastY=-1,_._lastMods={shift:!1,control:!1,alt:!1,meta:!1},_.enableMouseListeners=function(){function c(T,x,w,M){var D=_.keyBindingMode;if(!1!==D){var C="rotate"===D,P="pan"===D,L="zoom"===D,S=!!M.control,E=!!M.alt,N=!!M.shift,z=!!(1&T),q=!!(2&T),G=!!(4&T),K=1/l.clientHeight,ne=K*(x-_._lastX),X=K*(w-_._lastY),J=_.flipX?1:-1,se=_.flipY?1:-1,V=Math.PI*_.rotateSpeed,j=e();if(-1!==_._lastX&&-1!==_._lastY&&((C&&z&&!S&&!E&&!N||z&&!S&&!E&&N)&&u.rotate(j,J*V*ne,-se*V*X,0),(P&&z&&!S&&!E&&!N||q||z&&S&&!E&&!N)&&u.pan(j,-_.translateSpeed*ne*d,_.translateSpeed*X*d,0),L&&z&&!S&&!E&&!N||G||z&&!S&&E&&!N)){var H=-_.zoomSpeed*X/window.innerHeight*(j-u.lastT())*100;u.pan(j,0,0,d*(Math.exp(H)-1))}return _._lastX=x,_._lastY=w,_._lastMods=M,!0}}_.mouseListener=t(l,c),l.addEventListener("touchstart",function(T){var x=n(T.changedTouches[0],l);c(0,x[0],x[1],_._lastMods),c(1,x[0],x[1],_._lastMods)},!!m&&{passive:!0}),l.addEventListener("touchmove",function(T){var x=n(T.changedTouches[0],l);c(1,x[0],x[1],_._lastMods),T.preventDefault()},!!m&&{passive:!1}),l.addEventListener("touchend",function(T){c(0,_._lastX,_._lastY,_._lastMods)},!!m&&{passive:!0}),_.wheelListener=o(l,function(T,x){if(!1!==_.keyBindingMode&&_.enableWheel){var w=_.flipX?1:-1,M=_.flipY?1:-1,D=e();if(Math.abs(T)>Math.abs(x))u.rotate(D,0,0,-T*w*Math.PI*_.rotateSpeed/window.innerWidth);else if(!_._ortho){var C=-_.zoomSpeed*M*x/window.innerHeight*(D-u.lastT())/20;u.pan(D,0,0,d*(Math.exp(C)-1))}}},!0)},_.enableMouseListeners(),_};var e=g("right-now"),r=g("3d-view"),t=g("mouse-change"),o=g("mouse-wheel"),n=g("mouse-event-offset"),m=g("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(g,b,y){var e=g("glslify"),r=g("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),o=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);b.exports=function(n){return r(n,t,o,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(g,b,y){"use strict";var e=g("./camera.js"),r=g("gl-axes3d"),t=g("gl-axes3d/properties"),o=g("gl-spikes3d"),n=g("gl-select-static"),m=g("gl-fbo"),l=g("a-big-triangle"),i=g("mouse-change"),f=g("gl-mat4/perspective"),u=g("gl-mat4/ortho"),s=g("./lib/shader"),d=g("is-mobile")({tablet:!0,featureDetect:!0});function h(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function a(c){var T=Math.round(Math.log(Math.abs(c))/Math.log(10));if(T<0){var x=Math.round(Math.pow(10,-T));return Math.ceil(c*x)/x}return T>0?(x=Math.round(Math.pow(10,T)),Math.ceil(c/x)*x):Math.ceil(c)}function _(c){return"boolean"!=typeof c||c}b.exports={createScene:function(c){(c=c||{}).camera=c.camera||{};var T=c.canvas;T||(T=document.createElement("canvas"),c.container?c.container.appendChild(T):document.body.appendChild(T));var x=c.gl;if(x||(c.glOptions&&(d=!!c.glOptions.preserveDrawingBuffer),x=function(he,xe){var De=null;try{(De=he.getContext("webgl",xe))||(De=he.getContext("experimental-webgl",xe))}catch{return null}return De}(T,c.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:d})),!x)throw new Error("webgl not supported");var w=c.bounds||[[-10,-10,-10],[10,10,10]],M=new h,D=m(x,x.drawingBufferWidth,x.drawingBufferHeight,{preferFloat:!d}),C=s(x),P=c.cameraObject&&!0===c.cameraObject._ortho||c.camera.projection&&"orthographic"===c.camera.projection.type||!1,L={eye:c.camera.eye||[2,0,0],center:c.camera.center||[0,0,0],up:c.camera.up||[0,1,0],zoomMin:c.camera.zoomMax||.1,zoomMax:c.camera.zoomMin||100,mode:c.camera.mode||"turntable",_ortho:P},S=c.axes||{},E=r(x,S);E.enable=!S.disable;var z=o(x,c.spikes||{}),q=[],G=[],K=[],ne=[],X=!0,J=!0,j={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},H=(J=!0,[x.drawingBufferWidth,x.drawingBufferHeight]),oe=c.cameraObject||e(T,L),U={gl:x,contextLost:!1,pixelRatio:c.pixelRatio||1,canvas:T,selection:M,camera:oe,axes:E,axesPixels:null,spikes:z,bounds:w,objects:q,shape:H,aspect:c.aspectRatio||[1,1,1],pickRadius:c.pickRadius||10,zNear:c.zNear||.01,zFar:c.zFar||1e3,fovy:c.fovy||Math.PI/4,clearColor:c.clearColor||[0,0,0,0],autoResize:_(c.autoResize),autoBounds:_(c.autoBounds),autoScale:!!c.autoScale,autoCenter:_(c.autoCenter),clipToBounds:_(c.clipToBounds),snapToData:!!c.snapToData,onselect:c.onselect||null,onrender:c.onrender||null,onclick:c.onclick||null,cameraParams:j,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(he){this.aspect[0]=he.x,this.aspect[1]=he.y,this.aspect[2]=he.z,J=!0},setBounds:function(he,xe){this.bounds[0][he]=xe.min,this.bounds[1][he]=xe.max},setClearColor:function(he){this.clearColor=he},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},te=[x.drawingBufferWidth/U.pixelRatio|0,x.drawingBufferHeight/U.pixelRatio|0];function ee(){if(!U._stopped&&U.autoResize){var he=T.parentNode,xe=1,De=1;he&&he!==document.body?(xe=he.clientWidth,De=he.clientHeight):(xe=window.innerWidth,De=window.innerHeight);var Se=0|Math.ceil(xe*U.pixelRatio),ke=0|Math.ceil(De*U.pixelRatio);if(Se!==T.width||ke!==T.height){T.width=Se,T.height=ke;var Fe=T.style;Fe.position=Fe.position||"absolute",Fe.left="0px",Fe.top="0px",Fe.width=xe+"px",Fe.height=De+"px",X=!0}}}function le(){for(var he=q.length,xe=ne.length,De=0;De<xe;++De)K[De]=0;e:for(De=0;De<he;++De){var Se=q[De],ke=Se.pickSlots;if(ke){for(var Fe=0;Fe<xe;++Fe)if(K[Fe]+ke<255){G[De]=Fe,Se.setPickBase(K[Fe]+1),K[Fe]+=ke;continue e}var ve=n(x,H);G[De]=xe,ne.push(ve),K.push(ke),Se.setPickBase(1),xe+=1}else G[De]=-1}for(;xe>0&&0===K[xe-1];)K.pop(),ne.pop().dispose()}function ce(){if(U.contextLost)return!0;x.isContextLost()&&(U.contextLost=!0,U.mouseListener.enabled=!1,U.selection.object=null,U.oncontextloss&&U.oncontextloss())}U.autoResize&&ee(),window.addEventListener("resize",ee),U.update=function(he){U._stopped||(he=he||{},X=!0,J=!0)},U.add=function(he){U._stopped||(he.axes=E,q.push(he),G.push(-1),X=!0,J=!0,le())},U.remove=function(he){if(!U._stopped){var xe=q.indexOf(he);xe<0||(q.splice(xe,1),G.pop(),X=!0,J=!0,le())}},U.dispose=function(){if(!U._stopped&&(U._stopped=!0,window.removeEventListener("resize",ee),T.removeEventListener("webglcontextlost",ce),U.mouseListener.enabled=!1,!U.contextLost)){E.dispose(),z.dispose();for(var he=0;he<q.length;++he)q[he].dispose();for(D.dispose(),he=0;he<ne.length;++he)ne[he].dispose();C.dispose(),x=null,E=null,z=null,q=[]}},U._mouseRotating=!1,U._prevButtons=0,U.enableMouseListeners=function(){U.mouseListener=i(T,function(he,xe,De){if(!U._stopped){var Se=ne.length,ke=q.length,Fe=M.object;M.distance=1/0,M.mouse[0]=xe,M.mouse[1]=De,M.object=null,M.screen=null,M.dataCoordinate=M.dataPosition=null;var ve=!1;if(he&&U._prevButtons)U._mouseRotating=!0;else{U._mouseRotating&&(J=!0),U._mouseRotating=!1;for(var Te=0;Te<Se;++Te){var Le=ne[Te].query(xe,te[1]-De-1,U.pickRadius);if(Le){if(Le.distance>M.distance)continue;for(var Oe=0;Oe<ke;++Oe){var Ne=q[Oe];if(G[Oe]===Te){var Be=Ne.pick(Le);Be&&(M.buttons=he,M.screen=Le.coord,M.distance=Le.distance,M.object=Ne,M.index=Be.distance,M.dataPosition=Be.position,M.dataCoordinate=Be.dataCoordinate,M.data=Be,ve=!0)}}}}}Fe&&Fe!==M.object&&(Fe.highlight&&Fe.highlight(null),X=!0),M.object&&(M.object.highlight&&M.object.highlight(M.data),X=!0),(ve=ve||M.object!==Fe)&&U.onselect&&U.onselect(M),1&he&&!(1&U._prevButtons)&&U.onclick&&U.onclick(M),U._prevButtons=he}})},T.addEventListener("webglcontextlost",ce);var pe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=[pe[0].slice(),pe[1].slice()];function be(){if(!ce()){ee();var he=U.camera.tick();j.view=U.camera.matrix,X=X||he,J=J||he,E.pixelRatio=U.pixelRatio,z.pixelRatio=U.pixelRatio;var xe=q.length,De=pe[0],Se=pe[1];De[0]=De[1]=De[2]=1/0,Se[0]=Se[1]=Se[2]=-1/0;for(var ke=0;ke<xe;++ke){(je=q[ke]).pixelRatio=U.pixelRatio,je.axes=U.axes,X=X||!!je.dirty,J=J||!!je.dirty;var Fe=je.bounds;if(Fe)for(var ve=Fe[0],Te=Fe[1],Le=0;Le<3;++Le)De[Le]=Math.min(De[Le],ve[Le]),Se[Le]=Math.max(Se[Le],Te[Le])}var Oe=U.bounds;if(U.autoBounds)for(Le=0;Le<3;++Le){if(Se[Le]<De[Le])De[Le]=-1,Se[Le]=1;else{De[Le]===Se[Le]&&(De[Le]-=1,Se[Le]+=1);var Ne=.05*(Se[Le]-De[Le]);De[Le]=De[Le]-Ne,Se[Le]=Se[Le]+Ne}Oe[0][Le]=De[Le],Oe[1][Le]=Se[Le]}var Be=!1;for(Le=0;Le<3;++Le)Be=Be||de[0][Le]!==Oe[0][Le]||de[1][Le]!==Oe[1][Le],de[0][Le]=Oe[0][Le],de[1][Le]=Oe[1][Le];if(J=J||Be,X=X||Be){if(Be){var He=[0,0,0];for(ke=0;ke<3;++ke)He[ke]=a((Oe[1][ke]-Oe[0][ke])/10);E.update(E.autoTicks?{bounds:Oe,tickSpacing:He}:{bounds:Oe})}var Ve=x.drawingBufferWidth,it=x.drawingBufferHeight;for(H[0]=Ve,H[1]=it,te[0]=0|Math.max(Ve/U.pixelRatio,1),te[1]=0|Math.max(it/U.pixelRatio,1),function(qe,Ye){var ct=qe.bounds,vt=qe.cameraParams,wt=vt.projection,Ot=vt.model,st=qe.zNear,Ct=qe.zFar,$t=qe.fovy,rn=qe.gl.drawingBufferWidth/qe.gl.drawingBufferHeight;Ye?(u(wt,-rn,rn,-1,1,st,Ct),vt._ortho=!0):(f(wt,$t,rn,st,Ct),vt._ortho=!1);for(var hn=0;hn<16;++hn)Ot[hn]=0;Ot[15]=1;var cn=0;for(hn=0;hn<3;++hn)cn=Math.max(cn,ct[1][hn]-ct[0][hn]);for(hn=0;hn<3;++hn)Ot[5*hn]=qe.autoScale?qe.aspect[hn]/(ct[1][hn]-ct[0][hn]):1/cn,qe.autoCenter&&(Ot[12+hn]=.5*-Ot[5*hn]*(ct[0][hn]+ct[1][hn]))}(U,P),ke=0;ke<xe;++ke)(je=q[ke]).axesBounds=Oe,U.clipToBounds&&(je.clipBounds=Oe);M.object&&(z.position=U.snapToData?M.dataCoordinate:M.dataPosition,z.bounds=Oe),J&&(J=!1,function(){if(!ce()){x.colorMask(!0,!0,!0,!0),x.depthMask(!0),x.disable(x.BLEND),x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL);for(var qe=q.length,Ye=ne.length,ct=0;ct<Ye;++ct){var vt=ne[ct];vt.shape=te,vt.begin();for(var wt=0;wt<qe;++wt)if(G[wt]===ct){var Ot=q[wt];Ot.drawPick&&(Ot.pixelRatio=1,Ot.drawPick(j))}vt.end()}}}()),U.axesPixels=t(U.axes,j,Ve,it),U.onrender&&U.onrender(),x.bindFramebuffer(x.FRAMEBUFFER,null),x.viewport(0,0,Ve,it),U.clearRGBA(),x.depthMask(!0),x.colorMask(!0,!0,!0,!0),x.enable(x.DEPTH_TEST),x.depthFunc(x.LEQUAL),x.disable(x.BLEND),x.disable(x.CULL_FACE);var ze=!1;for(E.enable&&(ze=ze||E.isTransparent(),E.draw(j)),z.axes=E,M.object&&z.draw(j),x.disable(x.CULL_FACE),ke=0;ke<xe;++ke)(je=q[ke]).axes=E,je.pixelRatio=U.pixelRatio,je.isOpaque&&je.isOpaque()&&je.draw(j),je.isTransparent&&je.isTransparent()&&(ze=!0);if(ze){for(D.shape=H,D.bind(),x.clear(x.DEPTH_BUFFER_BIT),x.colorMask(!1,!1,!1,!1),x.depthMask(!0),x.depthFunc(x.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(j),ke=0;ke<xe;++ke)(je=q[ke]).isOpaque&&je.isOpaque()&&je.draw(j);for(x.enable(x.BLEND),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.colorMask(!0,!0,!0,!0),x.depthMask(!1),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(j),ke=0;ke<xe;++ke){var je;(je=q[ke]).isTransparent&&je.isTransparent()&&je.drawTransparent(j)}x.bindFramebuffer(x.FRAMEBUFFER,null),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.disable(x.DEPTH_TEST),C.bind(),D.color[0].bind(0),C.uniforms.accumBuffer=0,l(x),x.disable(x.BLEND)}for(X=!1,ke=0;ke<xe;++ke)q[ke].dirty=!1}}}return U.enableMouseListeners(),function he(){U._stopped||U.contextLost||(be(),requestAnimationFrame(he))}(),U.redraw=function(){U._stopped||(X=!0,be())},U},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(g,b,y){var e=g("glslify");y.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),y.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),y.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),y.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(g,b,y){"use strict";var e=g("gl-shader"),r=g("gl-buffer"),t=g("typedarray-pool"),o=g("./lib/shader");function n(f,u,s,d,h){this.plot=f,this.offsetBuffer=u,this.pickBuffer=s,this.shader=d,this.pickShader=h,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}b.exports=function(f,u){var s=f.gl,c=new n(f,r(s),r(s),e(s,o.pointVertex,o.pointFragment),e(s,o.pickVertex,o.pickFragment));return c.update(u),f.addObject(c),c};var m,l,i=n.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(f){var u;function s(x,w){return x in f?f[x]:w}f=f||{},this.sizeMin=s("sizeMin",.5),this.sizeMax=s("sizeMax",20),this.color=s("color",[1,0,0,1]).slice(),this.areaRatio=s("areaRatio",1),this.borderColor=s("borderColor",[0,0,0,1]).slice(),this.blend=s("blend",!1);var d=f.positions.length>>>1,h=f.positions instanceof Float32Array,a=f.idToIndex instanceof Int32Array&&f.idToIndex.length>=d,_=f.positions,c=h?_:t.mallocFloat32(_.length),T=a?f.idToIndex:t.mallocInt32(d);if(h||c.set(_),!a)for(c.set(_),u=0;u<d;u++)T[u]=u;this.points=_,this.offsetBuffer.update(c),this.pickBuffer.update(T),h||t.free(c),a||t.free(T),this.pointCount=d,this.pickOffset=0},i.unifiedDraw=(m=[1,0,0,0,1,0,0,0,1],l=[0,0,0,0],function(f){var u=void 0!==f,s=u?this.pickShader:this.shader,d=this.plot.gl,h=this.plot.dataBox;if(0===this.pointCount)return f;var a=h[2]-h[0],_=h[3]-h[1],c=function(M,D){var C,P=0,L=M.length>>>1;for(C=0;C<L;C++){var S=M[2*C],E=M[2*C+1];S>=D[0]&&S<=D[2]&&E>=D[1]&&E<=D[3]&&P++}return P}(this.points,h),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(c,.33333)));m[0]=2/a,m[4]=2/_,m[6]=-2*h[0]/a-1,m[7]=-2*h[1]/_-1,this.offsetBuffer.bind(),s.bind(),s.attributes.position.pointer(),s.uniforms.matrix=m,s.uniforms.color=this.color,s.uniforms.borderColor=this.borderColor,s.uniforms.pointCloud=T<5,s.uniforms.pointSize=T,s.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),u&&(l[0]=255&f,l[1]=f>>8&255,l[2]=f>>16&255,l[3]=f>>24&255,this.pickBuffer.bind(),s.attributes.pickId.pointer(d.UNSIGNED_BYTE),s.uniforms.pickOffset=l,this.pickOffset=f);var x=d.getParameter(d.BLEND),w=d.getParameter(d.DITHER);return x&&!this.blend&&d.disable(d.BLEND),w&&d.disable(d.DITHER),d.drawArrays(d.POINTS,0,this.pointCount),x&&!this.blend&&d.enable(d.BLEND),w&&d.enable(d.DITHER),f+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(f,u,s){var d=this.pickOffset;if(s<d||s>=d+this.pointCount)return null;var a=s-d,_=this.points;return{object:this,pointId:a,dataCoord:[_[2*a],_[2*a+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(g,b,y){b.exports=function(e,r,t,o){var n,m,l,i,f,u=r[0],s=r[1],d=r[2],h=r[3],a=t[0],_=t[1],c=t[2],T=t[3];return(m=u*a+s*_+d*c+h*T)<0&&(m=-m,a=-a,_=-_,c=-c,T=-T),1-m>1e-6?(n=Math.acos(m),l=Math.sin(n),i=Math.sin((1-o)*n)/l,f=Math.sin(o*n)/l):(i=1-o,f=o),e[0]=i*u+f*a,e[1]=i*s+f*_,e[2]=i*d+f*c,e[3]=i*h+f*T,e}},{}],125:[function(g,b,y){"use strict";b.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(g,b,y){"use strict";var e=g("vectorize-text");b.exports=function(t,o,n){var m=r[o];if(m||(m=r[o]={}),t in m)return m[t];var l={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(t,l);l.triangles=!1;var f,u,s=e(t,l);if(n&&1!==n){for(f=0;f<i.positions.length;++f)for(u=0;u<i.positions[f].length;++u)i.positions[f][u]/=n;for(f=0;f<s.positions.length;++f)for(u=0;u<s.positions[f].length;++u)s.positions[f][u]/=n}var d=[[1/0,1/0],[-1/0,-1/0]],h=s.positions.length;for(f=0;f<h;++f){var a=s.positions[f];for(u=0;u<2;++u)d[0][u]=Math.min(d[0][u],a[u]),d[1][u]=Math.max(d[1][u],a[u])}return m[t]=[i,s,d]};var r={}},{"vectorize-text":311}],127:[function(g,b,y){var e=g("gl-shader"),r=g("glslify"),t=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),m=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:t,fragment:m,attributes:i},u={vertex:o,fragment:m,attributes:i},s={vertex:n,fragment:m,attributes:i},d={vertex:t,fragment:l,attributes:i},h={vertex:o,fragment:l,attributes:i},a={vertex:n,fragment:l,attributes:i};function _(c,T){var x=e(c,T),w=x.attributes;return w.position.location=0,w.color.location=1,w.glyph.location=2,w.id.location=3,x}y.createPerspective=function(c){return _(c,f)},y.createOrtho=function(c){return _(c,u)},y.createProject=function(c){return _(c,s)},y.createPickPerspective=function(c){return _(c,d)},y.createPickOrtho=function(c){return _(c,h)},y.createPickProject=function(c){return _(c,a)}},{"gl-shader":132,glslify:231}],128:[function(g,b,y){"use strict";var e=g("is-string-blank"),r=g("gl-buffer"),t=g("gl-vao"),o=g("typedarray-pool"),n=g("gl-mat4/multiply"),m=g("./lib/shaders"),l=g("./lib/glyphs"),i=g("./lib/get-simple-string"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(K,ne){var X=K[0],J=K[1],se=K[2],V=K[3];return K[0]=ne[0]*X+ne[4]*J+ne[8]*se+ne[12]*V,K[1]=ne[1]*X+ne[5]*J+ne[9]*se+ne[13]*V,K[2]=ne[2]*X+ne[6]*J+ne[10]*se+ne[14]*V,K[3]=ne[3]*X+ne[7]*J+ne[11]*se+ne[15]*V,K}function s(K,ne,X,J){return u(J,J),u(J,J),u(J,J)}function d(K,ne){this.index=K,this.dataCoordinate=this.position=ne}function h(K){return!0===K||K>1?1:K}function a(K,ne,X,J,se,V,j,H,oe,U,te,ee){this.gl=K,this.pixelRatio=1,this.shader=ne,this.orthoShader=X,this.projectShader=J,this.pointBuffer=se,this.colorBuffer=V,this.glyphBuffer=j,this.idBuffer=H,this.vao=oe,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=U,this.pickOrthoShader=te,this.pickProjectShader=ee,this.points=[],this._selectResult=new d(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}b.exports=function(K){var ne=K.gl,X=m.createPerspective(ne),J=m.createOrtho(ne),se=m.createProject(ne),V=m.createPickPerspective(ne),j=m.createPickOrtho(ne),H=m.createPickProject(ne),oe=r(ne),U=r(ne),te=r(ne),ee=r(ne),ce=new a(ne,X,J,se,oe,U,te,ee,t(ne,[{buffer:oe,size:3,type:ne.FLOAT},{buffer:U,size:4,type:ne.FLOAT},{buffer:te,size:2,type:ne.FLOAT},{buffer:ee,size:4,type:ne.UNSIGNED_BYTE,normalized:!0}]),V,j,H);return ce.update(K),ce};var _=a.prototype;_.pickSlots=1,_.setPickBase=function(K){this.pickId=K},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],T=[0,0,0],x=[0,0,0],w=[0,0,0,1],M=[0,0,0,1],D=f.slice(),C=[0,0,0],P=[[0,0,0],[0,0,0]];function L(K){return K[0]=K[1]=K[2]=0,K}function S(K,ne){return K[0]=ne[0],K[1]=ne[1],K[2]=ne[2],K[3]=1,K}function E(K,ne,X,J){return K[0]=ne[0],K[1]=ne[1],K[2]=ne[2],K[X]=J,K}var z=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function q(K,ne,X,J,se,V,j){var H=X.gl;if((V===X.projectHasAlpha||j)&&function N(K,ne,X,J){var se,V=ne.axesProject,j=ne.gl,H=K.uniforms,oe=X.model||f,U=X.view||f,te=X.projection||f,ee=ne.axesBounds,le=function(Oe){for(var Ne=P,Be=0;Be<2;++Be)for(var He=0;He<3;++He)Ne[Be][He]=Math.max(Math.min(Oe[Be][He],1e8),-1e8);return Ne}(ne.clipBounds);se=ne.axes&&ne.axes.lastCubeProps?ne.axes.lastCubeProps.axis:[1,1,1],c[0]=2/j.drawingBufferWidth,c[1]=2/j.drawingBufferHeight,K.bind(),H.view=U,H.projection=te,H.screenSize=c,H.highlightId=ne.highlightId,H.highlightScale=ne.highlightScale,H.clipBounds=le,H.pickGroup=ne.pickId/255,H.pixelRatio=J;for(var ce=0;ce<3;++ce)if(V[ce]){H.scale=ne.projectScale[ce],H.opacity=ne.projectOpacity[ce];for(var pe=D,de=0;de<16;++de)pe[de]=0;for(de=0;de<4;++de)pe[5*de]=1;pe[5*ce]=0,pe[12+ce]=se[ce]<0?ee[0][ce]:ee[1][ce],n(pe,oe,pe),H.model=pe;var be=(ce+1)%3,he=(ce+2)%3,xe=L(T),De=L(x);xe[be]=1,De[he]=1;var Se=s(0,0,0,S(w,xe)),ke=s(0,0,0,S(M,De));if(Math.abs(Se[1])>Math.abs(ke[1])){var Fe=Se;Se=ke,ke=Fe,Fe=xe,xe=De,De=Fe;var ve=be;be=he,he=ve}Se[0]<0&&(xe[be]=-1),ke[1]>0&&(De[he]=-1);var Te=0,Le=0;for(de=0;de<4;++de)Te+=Math.pow(oe[4*be+de],2),Le+=Math.pow(oe[4*he+de],2);xe[be]/=Math.sqrt(Te),De[he]/=Math.sqrt(Le),H.axes[0]=xe,H.axes[1]=De,H.fragClipBounds[0]=E(C,le[0],ce,-1e8),H.fragClipBounds[1]=E(C,le[1],ce,1e8),ne.vao.bind(),ne.vao.draw(j.TRIANGLES,ne.vertexCount),ne.lineWidth>0&&(j.lineWidth(ne.lineWidth*J),ne.vao.draw(j.LINES,ne.lineVertexCount,ne.vertexCount)),ne.vao.unbind()}}(ne,X,J,se),V===X.hasAlpha||j){K.bind();var oe=K.uniforms;oe.model=J.model||f,oe.view=J.view||f,oe.projection=J.projection||f,c[0]=2/H.drawingBufferWidth,c[1]=2/H.drawingBufferHeight,oe.screenSize=c,oe.highlightId=X.highlightId,oe.highlightScale=X.highlightScale,oe.fragClipBounds=z,oe.clipBounds=X.axes.bounds,oe.opacity=X.opacity,oe.pickGroup=X.pickId/255,oe.pixelRatio=se,X.vao.bind(),X.vao.draw(H.TRIANGLES,X.vertexCount),X.lineWidth>0&&(H.lineWidth(X.lineWidth*se),X.vao.draw(H.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}function G(K,ne,X,J){var se;se=Array.isArray(K)?ne<K.length?K[ne]:void 0:K,se=i(se);var V=!0;e(se)&&(se="\u25bc",V=!1);var j=l(se,X,J);return{mesh:j[0],lines:j[1],bounds:j[2],visible:V}}_.draw=function(K){q(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!1,!1)},_.drawTransparent=function(K){q(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!0,!1)},_.drawPick=function(K){q(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,K,1,!0,!0)},_.pick=function(K){if(!K||K.id!==this.pickId)return null;var ne=K.value[2]+(K.value[1]<<8)+(K.value[0]<<16);if(ne>=this.pointCount||ne<0)return null;var X=this.points[ne],J=this._selectResult;J.index=ne;for(var se=0;se<3;++se)J.position[se]=J.dataCoordinate[se]=X[se];return J},_.highlight=function(K){if(K){var ne=K.index;this.highlightId=[(255&ne)/255,(ne>>8&255)/255,(ne>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},_.update=function(K){if("perspective"in(K=K||{})&&(this.useOrtho=!K.perspective),"orthographic"in K&&(this.useOrtho=!!K.orthographic),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"project"in K)if(Array.isArray(K.project))this.axesProject=K.project;else{var ne=!!K.project;this.axesProject=[ne,ne,ne]}if("projectScale"in K)if(Array.isArray(K.projectScale))this.projectScale=K.projectScale.slice();else{var X=+K.projectScale;this.projectScale=[X,X,X]}if(this.projectHasAlpha=!1,"projectOpacity"in K){this.projectOpacity=Array.isArray(K.projectOpacity)?K.projectOpacity.slice():[X=+K.projectOpacity,X,X];for(var J=0;J<3;++J)this.projectOpacity[J]=h(this.projectOpacity[J]),this.projectOpacity[J]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in K&&(this.opacity=h(K.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var se,V,j=K.position,H=K.font||"normal",oe=K.alignment||[0,0];if(2===oe.length)se=oe[0],V=oe[1];else for(se=[],V=[],J=0;J<oe.length;++J)se[J]=oe[J][0],V[J]=oe[J][1];var U=[1/0,1/0,1/0],te=[-1/0,-1/0,-1/0],ee=K.glyph,le=K.color,ce=K.size,pe=K.angle,de=K.lineColor,be=-1,he=0,xe=0,De=0;if(j.length){De=j.length;e:for(J=0;J<De;++J){for(var Se=j[J],ke=0;ke<3;++ke)if(isNaN(Se[ke])||!isFinite(Se[ke]))continue e;var Fe=(ct=G(ee,J,H,this.pixelRatio)).mesh,ve=ct.lines,Te=ct.bounds;he+=3*Fe.cells.length,xe+=2*ve.edges.length}}var Le=he+xe,Oe=o.mallocFloat(3*Le),Ne=o.mallocFloat(4*Le),Be=o.mallocFloat(2*Le),He=o.mallocUint32(Le);if(Le>0){var Ve=0,it=he,ze=[0,0,0,1],je=[0,0,0,1],qe=Array.isArray(le)&&Array.isArray(le[0]),Ye=Array.isArray(de)&&Array.isArray(de[0]);e:for(J=0;J<De;++J){for(be+=1,Se=j[J],ke=0;ke<3;++ke){if(isNaN(Se[ke])||!isFinite(Se[ke]))continue e;te[ke]=Math.max(te[ke],Se[ke]),U[ke]=Math.min(U[ke],Se[ke])}Fe=(ct=G(ee,J,H,this.pixelRatio)).mesh,ve=ct.lines,Te=ct.bounds;var ct,vt=ct.visible;if(vt)if(Array.isArray(le)){if(3===(wt=qe?J<le.length?le[J]:[0,0,0,0]:le).length){for(ke=0;ke<3;++ke)ze[ke]=wt[ke];ze[3]=1}else if(4===wt.length){for(ke=0;ke<4;++ke)ze[ke]=wt[ke];!this.hasAlpha&&wt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];if(vt)if(Array.isArray(de)){var wt;if(3===(wt=Ye?J<de.length?de[J]:[0,0,0,0]:de).length){for(ke=0;ke<3;++ke)je[ke]=wt[ke];je[ke]=1}else if(4===wt.length){for(ke=0;ke<4;++ke)je[ke]=wt[ke];!this.hasAlpha&&wt[3]<1&&(this.hasAlpha=!0)}}else je[0]=je[1]=je[2]=0,je[3]=1;else je=[1,1,1,0];var Ot=.5;vt?Array.isArray(ce)?Ot=J<ce.length?+ce[J]:12:ce?Ot=+ce:this.useOrtho&&(Ot=12):Ot=0;var St=0;Array.isArray(pe)?St=J<pe.length?+pe[J]:0:pe&&(St=+pe);var ft=Math.cos(St),st=Math.sin(St);for(Se=j[J],ke=0;ke<3;++ke)te[ke]=Math.max(te[ke],Se[ke]),U[ke]=Math.min(U[ke],Se[ke]);var Ct=se,$t=V;Ct=0,Array.isArray(se)?Ct=J<se.length?se[J]:0:se&&(Ct=se),$t=0,Array.isArray(V)?$t=J<V.length?V[J]:0:V&&($t=V);var rn=[Ct*=Ct>0?1-Te[0][0]:Ct<0?1+Te[1][0]:1,$t*=$t>0?1-Te[0][1]:$t<0?1+Te[1][1]:1],hn=Fe.cells||[],cn=Fe.positions||[];for(ke=0;ke<hn.length;++ke)for(var mn=hn[ke],nn=0;nn<3;++nn){for(var Xe=0;Xe<3;++Xe)Oe[3*Ve+Xe]=Se[Xe];for(Xe=0;Xe<4;++Xe)Ne[4*Ve+Xe]=ze[Xe];He[Ve]=be;var nt=cn[mn[nn]];Be[2*Ve]=Ot*(ft*nt[0]-st*nt[1]+rn[0]),Be[2*Ve+1]=Ot*(st*nt[0]+ft*nt[1]+rn[1]),Ve+=1}for(hn=ve.edges,cn=ve.positions,ke=0;ke<hn.length;++ke)for(mn=hn[ke],nn=0;nn<2;++nn){for(Xe=0;Xe<3;++Xe)Oe[3*it+Xe]=Se[Xe];for(Xe=0;Xe<4;++Xe)Ne[4*it+Xe]=je[Xe];He[it]=be,Be[2*it]=Ot*(ft*(nt=cn[mn[nn]])[0]-st*nt[1]+rn[0]),Be[2*it+1]=Ot*(st*nt[0]+ft*nt[1]+rn[1]),it+=1}}}this.bounds=[U,te],this.points=j,this.pointCount=j.length,this.vertexCount=he,this.lineVertexCount=xe,this.pointBuffer.update(Oe),this.colorBuffer.update(Ne),this.glyphBuffer.update(Be),this.idBuffer.update(He),o.free(Oe),o.free(Ne),o.free(Be),o.free(He)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(g,b,y){"use strict";var e=g("glslify");y.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),y.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(g,b,y){"use strict";var e=g("gl-shader"),r=g("gl-buffer"),t=g("./lib/shaders");function o(m,l,i){this.plot=m,this.boxBuffer=l,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}b.exports=function(m,l){var i=m.gl,s=new o(m,r(i,[0,0,0,1,1,0,1,1]),e(i,t.boxVertex,t.boxFragment));return s.update(l),m.addOverlay(s),s};var n=o.prototype;n.draw=function(){if(this.enabled){var m=this.plot,l=this.selectBox,i=this.borderWidth,f=this.innerColor,u=this.outerColor,s=this.borderColor,d=m.box,h=m.screenBox,a=m.dataBox,_=m.viewBox,c=m.pixelRatio,T=(l[0]-a[0])*(_[2]-_[0])/(a[2]-a[0])+_[0],x=(l[1]-a[1])*(_[3]-_[1])/(a[3]-a[1])+_[1],w=(l[2]-a[0])*(_[2]-_[0])/(a[2]-a[0])+_[0],M=(l[3]-a[1])*(_[3]-_[1])/(a[3]-a[1])+_[1];if(T=Math.max(T,_[0]),x=Math.max(x,_[1]),w=Math.min(w,_[2]),M=Math.min(M,_[3]),!(w<T||M<x)){d.bind();var D=h[2]-h[0],C=h[3]-h[1];if(this.outerFill&&(d.drawBox(0,0,D,x,u),d.drawBox(0,x,T,M,u),d.drawBox(0,M,D,C,u),d.drawBox(w,x,D,M,u)),this.innerFill&&d.drawBox(T,x,w,M,f),i>0){var P=i*c;d.drawBox(T-P,x-P,w+P,x+P,s),d.drawBox(T-P,M-P,w+P,M+P,s),d.drawBox(T-P,x-P,T+P,M+P,s),d.drawBox(w-P,x-P,w+P,M+P,s)}}}},n.update=function(m){this.innerFill=!!(m=m||{}).innerFill,this.outerFill=!!m.outerFill,this.innerColor=(m.innerColor||[0,0,0,.5]).slice(),this.outerColor=(m.outerColor||[0,0,0,.5]).slice(),this.borderColor=(m.borderColor||[0,0,0,1]).slice(),this.borderWidth=m.borderWidth||0,this.selectBox=(m.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(g,b,y){"use strict";b.exports=function(i,f){var u=f[0],s=f[1];return new m(i,e(i,u,s,{}),r.mallocUint8(u*s*4))};var e=g("gl-fbo"),r=g("typedarray-pool"),t=g("ndarray"),o=g("bit-twiddle").nextPow2;function n(i,f,u,s,d){this.coord=[i,f],this.id=u,this.value=s,this.distance=d}function m(i,f,u){this.gl=i,this.fbo=f,this.buffer=u,this._readTimeout=null;var s=this;this._readCallback=function(){s.gl&&(f.bind(),i.readPixels(0,0,f.shape[0],f.shape[1],i.RGBA,i.UNSIGNED_BYTE,s.buffer),s._readTimeout=null)}}var l=m.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var f=this.fbo.shape[0],u=this.fbo.shape[1];if(u*f*4>this.buffer.length){r.free(this.buffer);for(var s=this.buffer=r.mallocUint8(o(u*f*4)),d=0;d<u*f*4;++d)s[d]=255}return i}}}),l.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},l.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(i,f,u){if(!this.gl)return null;var s=this.fbo.shape.slice();i|=0,f|=0,"number"!=typeof u&&(u=1);var d=0|Math.min(Math.max(i-u,0),s[0]),h=0|Math.min(Math.max(i+u,0),s[0]),a=0|Math.min(Math.max(f-u,0),s[1]),_=0|Math.min(Math.max(f+u,0),s[1]);if(h<=d||_<=a)return null;var c=[h-d,_-a],T=t(this.buffer,[c[0],c[1],4],[4,4*s[0],1],4*(d+s[0]*a)),x=function(D,C,P){for(var L=1e8,S=-1,E=-1,N=D.shape[0],z=D.shape[1],q=0;q<N;q++)for(var G=0;G<z;G++){var K=D.get(q,G,0),ne=D.get(q,G,1),X=D.get(q,G,2),J=D.get(q,G,3);if(K<255||ne<255||X<255||J<255){var se=C-q,V=P-G,j=se*se+V*V;j<L&&(L=j,S=q,E=G)}}return[S,E,L]}(T.hi(c[0],c[1],1),u,u),w=x[0],M=x[1];return w<0||Math.pow(this.radius,2)<x[2]?null:new n(w+d|0,M+a|0,T.get(w,M,0),[T.get(w,M,1),T.get(w,M,2),T.get(w,M,3)],Math.sqrt(x[2]))},l.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(g,b,y){"use strict";var e=g("./lib/create-uniforms"),r=g("./lib/create-attributes"),t=g("./lib/reflect"),o=g("./lib/shader-cache"),n=g("./lib/runtime-reflect"),m=g("./lib/GLError");function l(u){this.gl=u,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=l.prototype;function f(u,s){return u.name<s.name?-1:1}i.bind=function(){var u;this.program||this._relink();var s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(s>d)for(u=d;u<s;u++)this.gl.enableVertexAttribArray(u);else if(d>s)for(u=s;u<d;u++)this.gl.disableVertexAttribArray(u);this.gl.lastAttribCount=s,this.gl.useProgram(this.program)},i.dispose=function(){for(var u=this.gl.lastAttribCount,s=0;s<u;s++)this.gl.disableVertexAttribArray(s);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(u,s,d,h){if(!s||1===arguments.length){var a=u;u=a.vertex,s=a.fragment,d=a.uniforms,h=a.attributes}var _=this,c=_.gl,T=_._vref;_._vref=o.shader(c,c.VERTEX_SHADER,u),T&&T.dispose(),_.vertShader=_._vref.shader;var x=this._fref;if(_._fref=o.shader(c,c.FRAGMENT_SHADER,s),x&&x.dispose(),_.fragShader=_._fref.shader,!d||!h){var w=c.createProgram();if(c.attachShader(w,_.fragShader),c.attachShader(w,_.vertShader),c.linkProgram(w),!c.getProgramParameter(w,c.LINK_STATUS)){var M=c.getProgramInfoLog(w);throw new m(M,"Error linking program:"+M)}d=d||n.uniforms(c,w),h=h||n.attributes(c,w),c.deleteProgram(w)}(h=h.slice()).sort(f);var D,C=[],P=[],L=[];for(D=0;D<h.length;++D){var S=h[D];if(S.type.indexOf("mat")>=0){for(var E=0|S.type.charAt(S.type.length-1),N=new Array(E),z=0;z<E;++z)N[z]=L.length,P.push(S.name+"["+z+"]"),"number"==typeof S.location?L.push(S.location+z):Array.isArray(S.location)&&S.location.length===E&&"number"==typeof S.location[z]?L.push(0|S.location[z]):L.push(-1);C.push({name:S.name,type:S.type,locations:N})}else C.push({name:S.name,type:S.type,locations:[L.length]}),P.push(S.name),L.push("number"==typeof S.location?0|S.location:-1)}var q=0;for(D=0;D<L.length;++D)if(L[D]<0){for(;L.indexOf(q)>=0;)q+=1;L[D]=q}var G=new Array(d.length);function K(){_.program=o.program(c,_._vref,_._fref,P,L);for(var ne=0;ne<d.length;++ne)G[ne]=c.getUniformLocation(_.program,d[ne].name)}K(),_._relink=K,_.types={uniforms:t(d),attributes:t(h)},_.attributes=r(c,_,C,L),Object.defineProperty(_,"uniforms",e(c,_,d,G))},b.exports=function(u,s,d,h,a){var _=new l(u);return _.update(s,d,h,a),_}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(g,b,y){function e(r,t,o){this.shortMessage=t||"",this.longMessage=o||"",this.rawError=r||"",this.message="gl-shader: "+(t||r||"")+(o?"\n"+o:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,b.exports=e},{}],134:[function(g,b,y){"use strict";b.exports=function(l,i,f,u){for(var s={},d=0,h=f.length;d<h;++d){var a=f[d],_=a.name,c=a.type,T=a.locations;switch(c){case"bool":case"int":case"float":n(l,i,T[0],u,1,s,_);break;default:if(c.indexOf("vec")>=0){if((x=c.charCodeAt(c.length-1)-48)<2||x>4)throw new e("","Invalid data type for attribute "+_+": "+c);n(l,i,T[0],u,x,s,_)}else{if(!(c.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+_+": "+c);var x;if((x=c.charCodeAt(c.length-1)-48)<2||x>4)throw new e("","Invalid data type for attribute "+_+": "+c);m(l,i,T,u,x,s,_)}}}return s};var e=g("./GLError");function r(l,i,f,u,s,d){this._gl=l,this._wrapper=i,this._index=f,this._locations=u,this._dimension=s,this._constFunc=d}var t=r.prototype;t.pointer=function(l,i,f,u){var s=this._gl,d=this._locations[this._index];s.vertexAttribPointer(d,this._dimension,l||s.FLOAT,!!i,f||0,u||0),s.enableVertexAttribArray(d)},t.set=function(l,i,f,u){return this._constFunc(this._locations[this._index],l,i,f,u)},Object.defineProperty(t,"location",{get:function(){return this._locations[this._index]},set:function(l){return l!==this._locations[this._index]&&(this._locations[this._index]=0|l,this._wrapper.program=null),0|l}});var o=[function(l,i,f){return void 0===f.length?l.vertexAttrib1f(i,f):l.vertexAttrib1fv(i,f)},function(l,i,f,u){return void 0===f.length?l.vertexAttrib2f(i,f,u):l.vertexAttrib2fv(i,f)},function(l,i,f,u,s){return void 0===f.length?l.vertexAttrib3f(i,f,u,s):l.vertexAttrib3fv(i,f)},function(l,i,f,u,s,d){return void 0===f.length?l.vertexAttrib4f(i,f,u,s,d):l.vertexAttrib4fv(i,f)}];function n(l,i,f,u,s,d,h){var a=o[s],_=new r(l,i,f,u,s,a);Object.defineProperty(d,h,{set:function(c){return l.disableVertexAttribArray(u[f]),a(l,u[f],c),c},get:function(){return _},enumerable:!0})}function m(l,i,f,u,s,d,h){for(var a=new Array(s),_=new Array(s),c=0;c<s;++c)n(l,i,f[c],u,s,a,c),_[c]=a[c];Object.defineProperty(a,"location",{set:function(w){if(Array.isArray(w))for(var M=0;M<s;++M)_[M].location=w[M];else for(M=0;M<s;++M)_[M].location=w+M;return w},get:function(){for(var w=new Array(s),M=0;M<s;++M)w[M]=u[f[M]];return w},enumerable:!0}),a.pointer=function(w,M,D,C){w=w||l.FLOAT,M=!!M,D=D||s*s,C=C||0;for(var P=0;P<s;++P){var L=u[f[P]];l.vertexAttribPointer(L,s,w,M,D,C+P*s),l.enableVertexAttribArray(L)}};var T=new Array(s),x=l["vertexAttrib"+s+"fv"];Object.defineProperty(d,h,{set:function(w){for(var M=0;M<s;++M){var D=u[f[M]];if(l.disableVertexAttribArray(D),Array.isArray(w[0]))x.call(l,D,w[M]);else{for(var C=0;C<s;++C)T[C]=w[s*M+C];x.call(l,D,T)}}return w},get:function(){return a},enumerable:!0})}},{"./GLError":133}],135:[function(g,b,y){"use strict";var e=g("./reflect"),r=g("./GLError");function t(n){return function(){return n}}function o(n,m){for(var l=new Array(n),i=0;i<n;++i)l[i]=m;return l}b.exports=function(n,m,l,i){function f(h){return function(a){for(var _=function z(q,G){if("object"!=typeof G)return[[q,G]];var K=[];for(var ne in G){var X=G[ne],J=q;parseInt(ne)+""===ne?J+="["+ne+"]":J+="."+ne,"object"==typeof X?K.push.apply(K,z(J,X)):K.push([J,X])}return K}("",h),c=0;c<_.length;++c){var T=_[c],x=T[0],w=T[1];if(i[w]){var M=a;if("string"==typeof x&&(0===x.indexOf(".")||0===x.indexOf("["))){var D=x;if(0===x.indexOf(".")&&(D=x.slice(1)),D.indexOf("]")===D.length-1){var C=D.indexOf("["),P=D.slice(0,C),L=D.slice(C+1,D.length-1);M=P?a[P][L]:a[L]}else M=a[D]}var S,E=l[w].type;switch(E){case"bool":case"int":case"sampler2D":case"samplerCube":n.uniform1i(i[w],M);break;case"float":n.uniform1f(i[w],M);break;default:var N=E.indexOf("vec");if(!(0<=N&&N<=1&&E.length===4+N)){if(0===E.indexOf("mat")&&4===E.length){if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);n["uniformMatrix"+S+"fv"](i[w],!1,M);break}throw new r("","Unknown uniform data type for "+name+": "+E)}if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new r("","Invalid data type");switch(E.charAt(0)){case"b":case"i":n["uniform"+S+"iv"](i[w],M);break;case"v":n["uniform"+S+"fv"](i[w],M);break;default:throw new r("","Unrecognized data type for vector "+name+": "+E)}}}}}}function u(h,a,_){if("object"==typeof _){var c=s(_);Object.defineProperty(h,a,{get:t(c),set:f(_),enumerable:!0,configurable:!1})}else i[_]?Object.defineProperty(h,a,{get:(T=_,function(x,w,M){return x.getUniform(w.program,M[T])}),set:f(_),enumerable:!0,configurable:!1}):h[a]=function(x){switch(x){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var w=x.indexOf("vec");if(0<=w&&w<=1&&x.length===4+w){if((M=x.charCodeAt(x.length-1)-48)<2||M>4)throw new r("","Invalid data type");return"b"===x.charAt(0)?o(M,!1):o(M,0)}if(0===x.indexOf("mat")&&4===x.length){var M;if((M=x.charCodeAt(x.length-1)-48)<2||M>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+x);return o(M*M,0)}throw new r("","Unknown uniform data type for "+name+": "+x)}}(l[_].type);var T}function s(h){var a;if(Array.isArray(h)){a=new Array(h.length);for(var _=0;_<h.length;++_)u(a,_,h[_])}else for(var c in a={},h)u(a,c,h[c]);return a}var d=e(l,!0);return{get:t(s(d)),set:f(d),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(g,b,y){"use strict";b.exports=function(e,r){for(var t={},o=0;o<e.length;++o)for(var n=e[o].name.split("."),m=t,l=0;l<n.length;++l){var i=n[l].split("[");if(i.length>1){i[0]in m||(m[i[0]]=[]),m=m[i[0]];for(var f=1;f<i.length;++f){var u=parseInt(i[f]);f<i.length-1||l<n.length-1?(u in m||(m[u]=f<i.length-1?[]:{}),m=m[u]):m[u]=r?o:e[o].type}}else l<n.length-1?(i[0]in m||(m[i[0]]={}),m=m[i[0]]):m[i[0]]=r?o:e[o].type}return t}},{}],137:[function(g,b,y){"use strict";y.uniforms=function(o,n){for(var m=o.getProgramParameter(n,o.ACTIVE_UNIFORMS),l=[],i=0;i<m;++i){var f=o.getActiveUniform(n,i);if(f){var u=t(o,f.type);if(f.size>1)for(var s=0;s<f.size;++s)l.push({name:f.name.replace("[0]","["+s+"]"),type:u});else l.push({name:f.name,type:u})}}return l},y.attributes=function(o,n){for(var m=o.getProgramParameter(n,o.ACTIVE_ATTRIBUTES),l=[],i=0;i<m;++i){var f=o.getActiveAttrib(n,i);f&&l.push({name:f.name,type:t(o,f.type)})}return l};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function t(o,n){if(!r){var m=Object.keys(e);r={};for(var l=0;l<m.length;++l){var i=m[l];r[o[i]]=e[i]}}return r[n]}},{}],138:[function(g,b,y){"use strict";y.shader=function(f,u,s){return i(f).getShaderReference(u,s)},y.program=function(f,u,s,d,h){return i(f).getProgram(u,s,d,h)};var e=g("./GLError"),r=g("gl-format-compiler-error"),t=new(typeof WeakMap>"u"?g("weakmap-shim"):WeakMap),o=0;function n(f,u,s,d,h,a,_){this.id=f,this.src=u,this.type=s,this.shader=d,this.count=a,this.programs=[],this.cache=_}function m(f){this.gl=f,this.shaders=[{},{}],this.programs={}}n.prototype.dispose=function(){if(0==--this.count){for(var f=this.cache,u=f.gl,s=this.programs,d=0,h=s.length;d<h;++d){var a=f.programs[s[d]];a&&(delete f.programs[d],u.deleteProgram(a))}u.deleteShader(this.shader),delete f.shaders[this.type===u.FRAGMENT_SHADER|0][this.src]}};var l=m.prototype;function i(f){var u=t.get(f);return u||(u=new m(f),t.set(f,u)),u}l.getShaderReference=function(f,u){var s=this.gl,d=this.shaders[f===s.FRAGMENT_SHADER|0],h=d[u];if(h&&s.isShader(h.shader))h.count+=1;else{var a=function(_,c,T){var x=_.createShader(c);if(_.shaderSource(x,T),_.compileShader(x),!_.getShaderParameter(x,_.COMPILE_STATUS)){var w=_.getShaderInfoLog(x);try{var M=r(w,T,c)}catch(D){throw console.warn("Failed to format compiler error: "+D),new e(w,"Error compiling shader:\n"+w)}throw new e(w,M.short,M.long)}return x}(s,f,u);h=d[u]=new n(o++,u,f,a,[],1,this)}return h},l.getProgram=function(f,u,s,d){var h=[f.id,u.id,s.join(":"),d.join(":")].join("@"),a=this.programs[h];return a&&this.gl.isProgram(a)||(this.programs[h]=a=function(_,c,T,x,w){var M=_.createProgram();_.attachShader(M,c),_.attachShader(M,T);for(var D=0;D<x.length;++D)_.bindAttribLocation(M,w[D],x[D]);if(_.linkProgram(M),!_.getProgramParameter(M,_.LINK_STATUS)){var C=_.getProgramInfoLog(M);throw new e(C,"Error linking program: "+C)}return M}(this.gl,f.shader,u.shader,s,d),f.programs.push(h),u.programs.push(h)),a}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(g,b,y){"use strict";function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}b.exports=function(t,o){var n=new e(t);return n.update(o),t.addOverlay(n),n};var r=e.prototype;r.update=function(t){this.enable=((t=t||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(o){return o.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var t=this.enable,o=this.width,n=this.color,m=this.center,l=this.plot,i=l.line,f=l.dataBox,u=l.viewBox;if(i.bind(),f[0]<=m[0]&&m[0]<=f[2]&&f[1]<=m[1]&&m[1]<=f[3]){var s=u[0]+(m[0]-f[0])/(f[2]-f[0])*(u[2]-u[0]),d=u[1]+(m[1]-f[1])/(f[3]-f[1])*(u[3]-u[1]);t[0]&&i.drawLine(s,d,u[0],d,o[0],n[0]),t[1]&&i.drawLine(s,d,s,u[1],o[1],n[1]),t[2]&&i.drawLine(s,d,u[2],d,o[2],n[2]),t[3]&&i.drawLine(s,d,s,u[3],o[3],n[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(g,b,y){"use strict";var e=g("glslify"),r=g("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),o=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);b.exports=function(n){return r(n,t,o,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(g,b,y){"use strict";var e=g("gl-buffer"),r=g("gl-vao"),t=g("./shaders/index");b.exports=function(u,s){var d=[];function h(x,w,M,D,C,P){var L=[x,w,M,0,0,0,1];L[D+3]=1,L[D]=C,d.push.apply(d,L),L[6]=-1,d.push.apply(d,L),L[D]=P,d.push.apply(d,L),d.push.apply(d,L),L[6]=1,d.push.apply(d,L),L[D]=C,d.push.apply(d,L)}h(0,0,0,0,0,1),h(0,0,0,1,0,1),h(0,0,0,2,0,1),h(1,0,0,1,-1,1),h(1,0,0,2,-1,1),h(0,1,0,0,-1,1),h(0,1,0,2,-1,1),h(0,0,1,0,-1,1),h(0,0,1,1,-1,1);var a=e(u,d),_=r(u,[{type:u.FLOAT,buffer:a,size:3,offset:0,stride:28},{type:u.FLOAT,buffer:a,size:3,offset:12,stride:28},{type:u.FLOAT,buffer:a,size:1,offset:24,stride:28}]),c=t(u);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.weight.location=2;var T=new n(u,a,_,c);return T.update(s),T};var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(u,s,d,h){this.gl=u,this.buffer=s,this.vao=d,this.shader=h,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var m=n.prototype,l=[0,0,0],i=[0,0,0],f=[0,0];m.isTransparent=function(){return!1},m.drawTransparent=function(u){},m.draw=function(u){var s=this.gl,d=this.vao,h=this.shader;d.bind(),h.bind();var a,_=u.model||o,c=u.view||o,T=u.projection||o;this.axes&&(a=this.axes.lastCubeProps.axis);for(var x=l,w=i,M=0;M<3;++M)a&&a[M]<0?(x[M]=this.bounds[0][M],w[M]=this.bounds[1][M]):(x[M]=this.bounds[1][M],w[M]=this.bounds[0][M]);for(f[0]=s.drawingBufferWidth,f[1]=s.drawingBufferHeight,h.uniforms.model=_,h.uniforms.view=c,h.uniforms.projection=T,h.uniforms.coordinates=[this.position,x,w],h.uniforms.colors=this.colors,h.uniforms.screenShape=f,M=0;M<3;++M)h.uniforms.lineWidth=this.lineWidth[M]*this.pixelRatio,this.enabled[M]&&(d.draw(s.TRIANGLES,6,6*M),this.drawSides[M]&&d.draw(s.TRIANGLES,12,18+12*M));d.unbind()},m.update=function(u){u&&("bounds"in u&&(this.bounds=u.bounds),"position"in u&&(this.position=u.position),"lineWidth"in u&&(this.lineWidth=u.lineWidth),"colors"in u&&(this.colors=u.colors),"enabled"in u&&(this.enabled=u.enabled),"drawSides"in u&&(this.drawSides=u.drawSides))},m.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(g,b,y){var e=g("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),n=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:o,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(g,b,y){"use strict";var e=g("gl-vec3"),r=g("gl-vec4"),t=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(u,s){var d,h=u.length;for(d=0;d<h;d++){var a=u[d];if(a===s)return d;if(a>s)return d-1}return d},m=function(u,s,d){return u<s?s:u>d?d:u},l=function(u){var s=1/0;u.sort(function(_,c){return _-c});for(var d=u.length,h=1;h<d;h++){var a=Math.abs(u[h]-u[h-1]);a<s&&(s=a)}return s};b.exports=function(u,s){var d=u.startingPositions,h=u.maxLength||1e3,a=u.tubeSize||1,_=u.absoluteTubeSize,c=u.gridFill||"+x+y+z",T={};-1!==c.indexOf("-x")&&(T.reversedX=!0),-1!==c.indexOf("-y")&&(T.reversedY=!0),-1!==c.indexOf("-z")&&(T.reversedZ=!0),T.filled=t.indexOf(c.replace(/-/g,"").replace(/\+/g,""));var de,be,he,xe,x=u.getVelocity||function(de){return function(be,he,xe){var De=he.vectors,Se=he.meshgrid,ke=be[0],Fe=be[1],ve=be[2],Te=Se[0].length,Le=Se[1].length,Oe=Se[2].length,Ne=n(Se[0],ke),Be=n(Se[1],Fe),He=n(Se[2],ve),Ve=Ne+1,it=Be+1,ze=He+1;if(Ne=m(Ne,0,Te-1),Ve=m(Ve,0,Te-1),Be=m(Be,0,Le-1),it=m(it,0,Le-1),He=m(He,0,Oe-1),ze=m(ze,0,Oe-1),Ne<0||Be<0||He<0||Ve>Te-1||it>Le-1||ze>Oe-1)return e.create();var je,qe,Ye,ct,vt,wt,Ot=Se[0][Ne],ft=Se[1][Be],Ct=Se[2][He],$t=(ke-Ot)/(Se[0][Ve]-Ot),rn=(Fe-ft)/(Se[1][it]-ft),hn=(ve-Ct)/(Se[2][ze]-Ct);switch(isFinite($t)||($t=.5),isFinite(rn)||(rn=.5),isFinite(hn)||(hn=.5),xe.reversedX&&(Ne=Te-1-Ne,Ve=Te-1-Ve),xe.reversedY&&(Be=Le-1-Be,it=Le-1-it),xe.reversedZ&&(He=Oe-1-He,ze=Oe-1-ze),xe.filled){case 5:vt=He,wt=ze,Ye=Be*Oe,ct=it*Oe,je=Ne*Oe*Le,qe=Ve*Oe*Le;break;case 4:vt=He,wt=ze,je=Ne*Oe,qe=Ve*Oe,Ye=Be*Oe*Te,ct=it*Oe*Te;break;case 3:Ye=Be,ct=it,vt=He*Le,wt=ze*Le,je=Ne*Le*Oe,qe=Ve*Le*Oe;break;case 2:Ye=Be,ct=it,je=Ne*Le,qe=Ve*Le,vt=He*Le*Te,wt=ze*Le*Te;break;case 1:je=Ne,qe=Ve,vt=He*Te,wt=ze*Te,Ye=Be*Te*Oe,ct=it*Te*Oe;break;default:je=Ne,qe=Ve,Ye=Be*Te,ct=it*Te,vt=He*Te*Le,wt=ze*Te*Le}var cn=De[je+Ye+vt],mn=De[je+Ye+wt],nn=De[je+ct+vt],Xe=De[je+ct+wt],nt=De[qe+Ye+vt],ye=De[qe+Ye+wt],Ce=De[qe+ct+vt],Ue=De[qe+ct+wt],Qe=e.create(),rt=e.create(),Ke=e.create(),gt=e.create();e.lerp(Qe,cn,nt,$t),e.lerp(rt,mn,ye,$t),e.lerp(Ke,nn,Ce,$t),e.lerp(gt,Xe,Ue,$t);var mt=e.create(),Lt=e.create();e.lerp(mt,Qe,Ke,rn),e.lerp(Lt,rt,gt,rn);var Vt=e.create();return e.lerp(Vt,mt,Lt,hn),Vt}(de,u,T)},w=u.getDivergence||function(de,be){var he=e.create(),xe=1e-4;e.add(he,de,[xe,0,0]);var De=x(he);e.subtract(De,De,be),e.scale(De,De,1/xe),e.add(he,de,[0,xe,0]);var Se=x(he);e.subtract(Se,Se,be),e.scale(Se,Se,1/xe),e.add(he,de,[0,0,xe]);var ke=x(he);return e.subtract(ke,ke,be),e.scale(ke,ke,1/xe),e.add(he,De,Se),e.add(he,he,ke),he},M=[],D=s[0][0],C=s[0][1],P=s[0][2],L=s[1][0],S=s[1][1],E=s[1][2],z=10*e.distance(s[0],s[1])/h,q=z*z,G=1,K=0,ne=d.length;ne>1&&(G=function(de){for(var be=[],he=[],xe=[],De={},Se={},ke={},Fe=de.length,ve=0;ve<Fe;ve++){var Te=de[ve],Le=Te[0],Oe=Te[1],Ne=Te[2];De[Le]||(be.push(Le),De[Le]=!0),Se[Oe]||(he.push(Oe),Se[Oe]=!0),ke[Ne]||(xe.push(Ne),ke[Ne]=!0)}var Be=l(be),He=l(he),Ve=l(xe),it=Math.min(Be,He,Ve);return isFinite(it)?it:1}(d));for(var X=0;X<ne;X++){var J=e.create();e.copy(J,d[X]);var se=[J],V=[],j=x(J),H=J;V.push(j);var oe=[],U=w(J,j),te=e.length(U);isFinite(te)&&te>K&&(K=te),oe.push(te),M.push({points:se,velocities:V,divergences:oe});for(var ee=0;ee<100*h&&se.length<h&&(be=void 0,he=void 0,xe=void 0,he=(de=J)[1],xe=de[2],!((be=de[0])<D||be>L||he<C||he>S||xe<P||xe>E));){ee++;var le=e.clone(j),ce=e.squaredLength(le);if(0===ce)break;ce>q&&e.scale(le,le,z/Math.sqrt(ce)),e.add(le,le,J),j=x(le),e.squaredDistance(H,le)-q>-1e-4*q&&(se.push(le),H=le,V.push(j),U=w(le,j),te=e.length(U),isFinite(te)&&te>K&&(K=te),oe.push(te)),J=le}}var pe=function(u,s,d,h){for(var a=0,_=0;_<u.length;_++)for(var c=u[_].velocities,T=0;T<c.length;T++)a=Math.max(a,e.length(c[T]));var x=u.map(function(z){return function(q,G,K,ne){for(var X=q.points,J=q.velocities,se=q.divergences,V=[],j=[],H=[],oe=[],U=[],te=[],ee=0,le=0,ce=r.create(),pe=r.create(),de=0;de<X.length;de++){var be=X[de],he=J[de],xe=se[de];0===G&&(xe=.05*K),le=e.length(he)/ne,ce=r.create(),e.copy(ce,he),ce[3]=xe;for(var De=0;De<8;De++)U[De]=[be[0],be[1],be[2],De];if(oe.length>0)for(De=0;De<8;De++){var Se=(De+1)%8;V.push(oe[De],U[De],U[Se],U[Se],oe[Se],oe[De]),H.push(pe,ce,ce,ce,pe,pe),te.push(ee,le,le,le,ee,ee);var ke=V.length;j.push([ke-6,ke-5,ke-4],[ke-3,ke-2,ke-1])}var Fe=oe;oe=U,U=Fe;var ve=pe;pe=ce,ce=ve;var Te=ee;ee=le,le=Te}return{positions:V,cells:j,vectors:H,vertexIntensity:te}}(z,d,h,a)}),w=[],M=[],D=[],C=[];for(_=0;_<x.length;_++){var P=x[_],L=w.length;for(w=w.concat(P.positions),D=D.concat(P.vectors),C=C.concat(P.vertexIntensity),T=0;T<P.cells.length;T++){var S=P.cells[T],E=[];M.push(E);for(var N=0;N<S.length;N++)E.push(S[N]+L)}}return{positions:w,cells:M,vectors:D,vertexIntensity:C,colormap:s}}(M,u.colormap,K,G);return _?pe.tubeScale=_:(0===K&&(K=1),pe.tubeScale=.5*a*G/K),pe};var i=g("./lib/shaders"),f=g("gl-cone3d").createMesh;b.exports.createTubeMesh=function(u,s){return f(u,s,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(g,b,y){var e=g("gl-shader"),r=g("glslify"),t=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),o=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),m=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);y.createShader=function(l){var i=e(l,t,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createPickShader=function(l){var i=e(l,t,m,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createContourShader=function(l){var i=e(l,n,o,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},y.createPickContourShader=function(l){var i=e(l,n,m,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(g,b,y){"use strict";b.exports=function(j){var H=j.gl,oe=c(H),U=x(H),te=T(H),ee=w(H),le=r(H),ce=t(H,[{buffer:le,size:4,stride:40,offset:0},{buffer:le,size:3,stride:40,offset:16},{buffer:le,size:3,stride:40,offset:28}]),pe=r(H),de=t(H,[{buffer:pe,size:4,stride:20,offset:0},{buffer:pe,size:1,stride:20,offset:16}]),be=r(H),he=t(H,[{buffer:be,size:2,type:H.FLOAT}]),xe=o(H,1,256,H.RGBA,H.UNSIGNED_BYTE);xe.minFilter=H.LINEAR,xe.magFilter=H.LINEAR;var De=new L(H,[0,0],[[0,0,0],[0,0,0]],oe,U,le,ce,xe,te,ee,pe,de,be,he,[0,0,0]),Se={levels:[[],[],[]]};for(var ke in j)Se[ke]=j[ke];return Se.colormap=Se.colormap||"jet",De.update(Se),De};var e=g("bit-twiddle"),r=g("gl-buffer"),t=g("gl-vao"),o=g("gl-texture2d"),n=g("typedarray-pool"),m=g("colormap"),l=g("ndarray-ops"),i=g("ndarray-pack"),f=g("ndarray"),u=g("surface-nets"),s=g("gl-mat4/multiply"),d=g("gl-mat4/invert"),h=g("binary-search-bounds"),a=g("ndarray-gradient"),_=g("./lib/shaders"),c=_.createShader,T=_.createContourShader,x=_.createPickShader,w=_.createPickContourShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],D=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],C=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function P(j,H,oe,U,te){this.position=j,this.index=H,this.uv=oe,this.level=U,this.dataCoordinate=te}function L(j,H,oe,U,te,ee,le,ce,pe,de,be,he,xe,De,Se){this.gl=j,this.shape=H,this.bounds=oe,this.objectOffset=Se,this.intensityBounds=[],this._shader=U,this._pickShader=te,this._coordinateBuffer=ee,this._vao=le,this._colorMap=ce,this._contourShader=pe,this._contourPickShader=de,this._contourBuffer=be,this._contourVAO=he,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new P([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=xe,this._dynamicVAO=De,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(n.mallocFloat(1024),[0,0]),f(n.mallocFloat(1024),[0,0]),f(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var j=0;j<3;++j){var H=C[j],oe=(j+2)%3;H[(j+1)%3+0]=1,H[oe+3]=1,H[j+6]=1}}();var S=L.prototype;S.genColormap=function(j,H){var oe=!1,U=i([m({colormap:j,nshades:256,format:"rgba"}).map(function(te,ee){var le=H?function(ce,pe){if(!pe||!pe.length)return 1;for(var de=0;de<pe.length;++de){if(pe.length<2)return 1;if(pe[de][0]===ce)return pe[de][1];if(pe[de][0]>ce&&de>0){var be=(pe[de][0]-ce)/(pe[de][0]-pe[de-1][0]);return pe[de][1]*(1-be)+be*pe[de-1][1]}}return 1}(ee/255,H):te[3];return le<1&&(oe=!0),[te[0],te[1],te[2],255*le]})]);return l.divseq(U,255),this.hasAlphaScale=oe,U},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(j){this.pickId=j};var E=[0,0,0],N={showSurface:!1,showContour:!1,projections:[M.slice(),M.slice(),M.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(j,H){var oe,U,te,ee=H.axes&&H.axes.lastCubeProps.axis||E,le=H.showSurface,ce=H.showContour;for(oe=0;oe<3;++oe)for(le=le||H.surfaceProject[oe],U=0;U<3;++U)ce=ce||H.contourProject[oe][U];for(oe=0;oe<3;++oe){var pe=N.projections[oe];for(U=0;U<16;++U)pe[U]=0;for(U=0;U<4;++U)pe[5*U]=1;pe[5*oe]=0,pe[12+oe]=H.axesBounds[+(ee[oe]>0)][oe],s(pe,j.model,pe);var de=N.clipBounds[oe];for(te=0;te<2;++te)for(U=0;U<3;++U)de[te][U]=j.clipBounds[te][U];de[0][oe]=-1e8,de[1][oe]=1e8}return N.showSurface=le,N.showContour=ce,N}var q={model:M,view:M,projection:M,inverseModel:M.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},G=M.slice(),K=[1,0,0,0,1,0,0,0,1];function ne(j,H){j=j||{};var oe=this.gl;oe.disable(oe.CULL_FACE),this._colorMap.bind(0);var U=q;U.model=j.model||M,U.view=j.view||M,U.projection=j.projection||M,U.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],U.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],U.objectOffset=this.objectOffset,U.contourColor=this.contourColor[0],U.inverseModel=d(U.inverseModel,U.model);for(var te=0;te<2;++te)for(var ee=U.clipBounds[te],le=0;le<3;++le)ee[le]=Math.min(Math.max(this.clipBounds[te][le],-1e8),1e8);U.kambient=this.ambientLight,U.kdiffuse=this.diffuseLight,U.kspecular=this.specularLight,U.roughness=this.roughness,U.fresnel=this.fresnel,U.opacity=this.opacity,U.height=0,U.permutation=K,U.vertexColor=this.vertexColor;var ce=G;for(s(ce,U.view,U.model),s(ce,U.projection,ce),d(ce,ce),te=0;te<3;++te)U.eyePosition[te]=ce[12+te]/ce[15];var pe=ce[15];for(te=0;te<3;++te)pe+=this.lightPosition[te]*ce[4*te+3];for(te=0;te<3;++te){var de=ce[12+te];for(le=0;le<3;++le)de+=ce[4*le+te]*this.lightPosition[le];U.lightPosition[te]=de/pe}var be=z(U,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=U,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(oe.TRIANGLES,this._vertexCount),te=0;te<3;++te)this.surfaceProject[te]&&this.vertexCount&&(this._shader.uniforms.model=be.projections[te],this._shader.uniforms.clipBounds=be.clipBounds[te],this._vao.draw(oe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var he=this._contourShader;U.kambient=1,U.kdiffuse=0,U.kspecular=0,U.opacity=1,he.bind(),he.uniforms=U;var xe=this._contourVAO;for(xe.bind(),te=0;te<3;++te)for(he.uniforms.permutation=C[te],oe.lineWidth(this.contourWidth[te]*this.pixelRatio),le=0;le<this.contourLevels[te].length;++le)le===this.highlightLevel[te]?(he.uniforms.contourColor=this.highlightColor[te],he.uniforms.contourTint=this.highlightTint[te]):0!==le&&le-1!==this.highlightLevel[te]||(he.uniforms.contourColor=this.contourColor[te],he.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][le]&&(he.uniforms.height=this.contourLevels[te][le],xe.draw(oe.LINES,this._contourCounts[te][le],this._contourOffsets[te][le]));for(te=0;te<3;++te)for(he.uniforms.model=be.projections[te],he.uniforms.clipBounds=be.clipBounds[te],le=0;le<3;++le)if(this.contourProject[te][le]){he.uniforms.permutation=C[le],oe.lineWidth(this.contourWidth[le]*this.pixelRatio);for(var De=0;De<this.contourLevels[le].length;++De)De===this.highlightLevel[le]?(he.uniforms.contourColor=this.highlightColor[le],he.uniforms.contourTint=this.highlightTint[le]):0!==De&&De-1!==this.highlightLevel[le]||(he.uniforms.contourColor=this.contourColor[le],he.uniforms.contourTint=this.contourTint[le]),this._contourCounts[le][De]&&(he.uniforms.height=this.contourLevels[le][De],xe.draw(oe.LINES,this._contourCounts[le][De],this._contourOffsets[le][De]))}for(xe.unbind(),(xe=this._dynamicVAO).bind(),te=0;te<3;++te)if(0!==this._dynamicCounts[te])for(he.uniforms.model=U.model,he.uniforms.clipBounds=U.clipBounds,he.uniforms.permutation=C[te],oe.lineWidth(this.dynamicWidth[te]*this.pixelRatio),he.uniforms.contourColor=this.dynamicColor[te],he.uniforms.contourTint=this.dynamicTint[te],he.uniforms.height=this.dynamicLevel[te],xe.draw(oe.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]),le=0;le<3;++le)this.contourProject[le][te]&&(he.uniforms.model=be.projections[le],he.uniforms.clipBounds=be.clipBounds[le],xe.draw(oe.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]));xe.unbind()}}S.draw=function(j){return ne.call(this,j,!1)},S.drawTransparent=function(j){return ne.call(this,j,!0)};var X={model:M,view:M,projection:M,inverseModel:M,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function J(j,H){return Array.isArray(j)?[H(j[0]),H(j[1]),H(j[2])]:[H(j),H(j),H(j)]}function se(j){return Array.isArray(j)?3===j.length?[j[0],j[1],j[2],1]:[j[0],j[1],j[2],j[3]]:[0,0,0,1]}function V(j){if(Array.isArray(j)){if(Array.isArray(j))return[se(j[0]),se(j[1]),se(j[2])];var H=se(j);return[H.slice(),H.slice(),H.slice()]}}S.drawPick=function(j){j=j||{};var H=this.gl;H.disable(H.CULL_FACE);var oe=X;oe.model=j.model||M,oe.view=j.view||M,oe.projection=j.projection||M,oe.shape=this._field[2].shape,oe.pickId=this.pickId/255,oe.lowerBound=this.bounds[0],oe.upperBound=this.bounds[1],oe.objectOffset=this.objectOffset,oe.permutation=K;for(var U=0;U<2;++U)for(var te=oe.clipBounds[U],ee=0;ee<3;++ee)te[ee]=Math.min(Math.max(this.clipBounds[U][ee],-1e8),1e8);var le=z(oe,this);if(le.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=oe,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),U=0;U<3;++U)this.surfaceProject[U]&&(this._pickShader.uniforms.model=le.projections[U],this._pickShader.uniforms.clipBounds=le.clipBounds[U],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ce=this._contourPickShader;ce.bind(),ce.uniforms=oe;var pe=this._contourVAO;for(pe.bind(),ee=0;ee<3;++ee)for(H.lineWidth(this.contourWidth[ee]*this.pixelRatio),ce.uniforms.permutation=C[ee],U=0;U<this.contourLevels[ee].length;++U)this._contourCounts[ee][U]&&(ce.uniforms.height=this.contourLevels[ee][U],pe.draw(H.LINES,this._contourCounts[ee][U],this._contourOffsets[ee][U]));for(U=0;U<3;++U)for(ce.uniforms.model=le.projections[U],ce.uniforms.clipBounds=le.clipBounds[U],ee=0;ee<3;++ee)if(this.contourProject[U][ee]){ce.uniforms.permutation=C[ee],H.lineWidth(this.contourWidth[ee]*this.pixelRatio);for(var de=0;de<this.contourLevels[ee].length;++de)this._contourCounts[ee][de]&&(ce.uniforms.height=this.contourLevels[ee][de],pe.draw(H.LINES,this._contourCounts[ee][de],this._contourOffsets[ee][de]))}pe.unbind()}},S.pick=function(j){if(!j||j.id!==this.pickId)return null;var H=this._field[2].shape,oe=this._pickResult,U=H[0]*(j.value[0]+(j.value[2]>>4)/16)/255,te=Math.floor(U),ee=U-te,le=H[1]*(j.value[1]+(15&j.value[2])/16)/255,ce=Math.floor(le),pe=le-ce;te+=1,ce+=1;var de=oe.position;de[0]=de[1]=de[2]=0;for(var be=0;be<2;++be)for(var he=be?ee:1-ee,xe=0;xe<2;++xe)for(var De=te+be,Se=ce+xe,ke=he*(xe?pe:1-pe),Fe=0;Fe<3;++Fe)de[Fe]+=this._field[Fe].get(De,Se)*ke;for(var ve=this._pickResult.level,Te=0;Te<3;++Te)if(ve[Te]=h.le(this.contourLevels[Te],de[Te]),ve[Te]<0)this.contourLevels[Te].length>0&&(ve[Te]=0);else if(ve[Te]<this.contourLevels[Te].length-1){var Oe=this.contourLevels[Te][ve[Te]+1];Math.abs(this.contourLevels[Te][ve[Te]]-de[Te])>Math.abs(Oe-de[Te])&&(ve[Te]+=1)}for(oe.index[0]=ee<.5?te:te+1,oe.index[1]=pe<.5?ce:ce+1,oe.uv[0]=U/H[0],oe.uv[1]=le/H[1],Fe=0;Fe<3;++Fe)oe.dataCoordinate[Fe]=this._field[Fe].get(oe.index[0],oe.index[1]);return oe},S.padField=function(j,H){var oe=H.shape.slice(),U=j.shape.slice();l.assign(j.lo(1,1).hi(oe[0],oe[1]),H),l.assign(j.lo(1).hi(oe[0],1),H.hi(oe[0],1)),l.assign(j.lo(1,U[1]-1).hi(oe[0],1),H.lo(0,oe[1]-1).hi(oe[0],1)),l.assign(j.lo(0,1).hi(1,oe[1]),H.hi(1)),l.assign(j.lo(U[0]-1,1).hi(1,oe[1]),H.lo(oe[0]-1)),j.set(0,0,H.get(0,0)),j.set(0,U[1]-1,H.get(0,oe[1]-1)),j.set(U[0]-1,0,H.get(oe[0]-1,0)),j.set(U[0]-1,U[1]-1,H.get(oe[0]-1,oe[1]-1))},S.update=function(j){this.objectOffset=(j=j||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in j&&(this.contourWidth=J(j.contourWidth,Number)),"showContour"in j&&(this.showContour=J(j.showContour,Boolean)),"showSurface"in j&&(this.showSurface=!!j.showSurface),"contourTint"in j&&(this.contourTint=J(j.contourTint,Boolean)),"contourColor"in j&&(this.contourColor=V(j.contourColor)),"contourProject"in j&&(this.contourProject=J(j.contourProject,function(tn){return J(tn,Boolean)})),"surfaceProject"in j&&(this.surfaceProject=j.surfaceProject),"dynamicColor"in j&&(this.dynamicColor=V(j.dynamicColor)),"dynamicTint"in j&&(this.dynamicTint=J(j.dynamicTint,Number)),"dynamicWidth"in j&&(this.dynamicWidth=J(j.dynamicWidth,Number)),"opacity"in j&&(this.opacity=j.opacity),"opacityscale"in j&&(this.opacityscale=j.opacityscale),"colorBounds"in j&&(this.colorBounds=j.colorBounds),"vertexColor"in j&&(this.vertexColor=j.vertexColor?1:0),"colormap"in j&&this._colorMap.setPixels(this.genColormap(j.colormap,this.opacityscale));var H=j.field||j.coords&&j.coords[2]||null,oe=!1;if(H||(H=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in j||"coords"in j){var U=(H.shape[0]+2)*(H.shape[1]+2);U>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(e.nextPow2(U))),this._field[2]=f(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var te=this.shape,ee=0;ee<2;++ee)this._field[2].size>this._field[ee].data.length&&(n.freeFloat(this._field[ee].data),this._field[ee].data=n.mallocFloat(this._field[2].size)),this._field[ee]=f(this._field[ee].data,[te[0]+2,te[1]+2]);if(j.coords){var le=j.coords;if(!Array.isArray(le)||3!==le.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ee=0;ee<2;++ee){var ce=le[ee];for(xe=0;xe<2;++xe)if(ce.shape[xe]!==te[xe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ee],ce)}}else if(j.ticks){var pe=j.ticks;if(!Array.isArray(pe)||2!==pe.length)throw new Error("gl-surface: invalid ticks");for(ee=0;ee<2;++ee){var de=pe[ee];if((Array.isArray(de)||de.length)&&(de=f(de)),de.shape[0]!==te[ee])throw new Error("gl-surface: invalid tick length");var be=f(de.data,te);be.stride[ee]=de.stride[0],be.stride[1^ee]=0,this.padField(this._field[ee],be)}}else{for(ee=0;ee<2;++ee){var he=[0,0];he[ee]=1,this._field[ee]=f(this._field[ee].data,[te[0]+2,te[1]+2],he,0)}this._field[0].set(0,0,0);for(var xe=0;xe<te[0];++xe)this._field[0].set(xe+1,0,xe);for(this._field[0].set(te[0]+1,0,te[0]-1),this._field[1].set(0,0,0),xe=0;xe<te[1];++xe)this._field[1].set(0,xe+1,xe);this._field[1].set(0,te[1]+1,te[1]-1)}var De=this._field,Se=f(n.mallocFloat(3*De[2].size*2),[3,te[0]+2,te[1]+2,2]);for(ee=0;ee<3;++ee)a(Se.pick(ee),De[ee],"mirror");var ke=f(n.mallocFloat(3*De[2].size),[te[0]+2,te[1]+2,3]);for(ee=0;ee<te[0]+2;++ee)for(xe=0;xe<te[1]+2;++xe){var Fe=Se.get(0,ee,xe,0),ve=Se.get(0,ee,xe,1),Te=Se.get(1,ee,xe,0),Le=Se.get(1,ee,xe,1),Oe=Se.get(2,ee,xe,0),Ne=Se.get(2,ee,xe,1),Be=Te*Ne-Le*Oe,He=Oe*ve-Ne*Fe,Ve=Fe*Le-ve*Te,it=Math.sqrt(Be*Be+He*He+Ve*Ve);it<1e-8?(it=Math.max(Math.abs(Be),Math.abs(He),Math.abs(Ve)))<1e-8?(Ve=1,He=Be=0,it=1):it=1/it:it=1/Math.sqrt(it),ke.set(ee,xe,0,Be*it),ke.set(ee,xe,1,He*it),ke.set(ee,xe,2,Ve*it)}n.free(Se.data);var ze=[1/0,1/0,1/0],je=[-1/0,-1/0,-1/0],qe=1/0,Ye=-1/0,vt=n.mallocFloat(e.nextPow2((te[0]-1)*(te[1]-1)*6*10)),wt=0,Ot=0;for(ee=0;ee<te[0]-1;++ee)e:for(xe=0;xe<te[1]-1;++xe){for(var St=0;St<2;++St)for(var ft=0;ft<2;++ft)for(var st=0;st<3;++st){var Ct=this._field[st].get(1+ee+St,1+xe+ft);if(isNaN(Ct)||!isFinite(Ct))continue e}for(st=0;st<6;++st){var $t=ee+D[st][0],rn=xe+D[st][1],hn=this._field[0].get($t+1,rn+1),cn=this._field[1].get($t+1,rn+1);Ct=this._field[2].get($t+1,rn+1),Be=ke.get($t+1,rn+1,0),He=ke.get($t+1,rn+1,1),Ve=ke.get($t+1,rn+1,2),j.intensity&&(mn=j.intensity.get($t,rn));var mn=j.intensity?j.intensity.get($t,rn):Ct+this.objectOffset[2];vt[wt++]=$t,vt[wt++]=rn,vt[wt++]=hn,vt[wt++]=cn,vt[wt++]=Ct,vt[wt++]=0,vt[wt++]=mn,vt[wt++]=Be,vt[wt++]=He,vt[wt++]=Ve,ze[0]=Math.min(ze[0],hn+this.objectOffset[0]),ze[1]=Math.min(ze[1],cn+this.objectOffset[1]),ze[2]=Math.min(ze[2],Ct+this.objectOffset[2]),qe=Math.min(qe,mn),je[0]=Math.max(je[0],hn+this.objectOffset[0]),je[1]=Math.max(je[1],cn+this.objectOffset[1]),je[2]=Math.max(je[2],Ct+this.objectOffset[2]),Ye=Math.max(Ye,mn),Ot+=1}}for(j.intensityBounds&&(qe=+j.intensityBounds[0],Ye=+j.intensityBounds[1]),ee=6;ee<wt;ee+=10)vt[ee]=(vt[ee]-qe)/(Ye-qe);this._vertexCount=Ot,this._coordinateBuffer.update(vt.subarray(0,wt)),n.freeFloat(vt),n.free(ke.data),this.bounds=[ze,je],this.intensity=j.intensity||this._field[2],this.intensityBounds[0]===qe&&this.intensityBounds[1]===Ye||(oe=!0),this.intensityBounds=[qe,Ye]}if("levels"in j){var nn=j.levels;for(nn=Array.isArray(nn[0])?nn.slice():[[],[],nn],ee=0;ee<3;++ee)nn[ee]=nn[ee].slice(),nn[ee].sort(function(tn,Kt){return tn-Kt});for(ee=0;ee<3;++ee)for(xe=0;xe<nn[ee].length;++xe)nn[ee][xe]-=this.objectOffset[ee];e:for(ee=0;ee<3;++ee){if(nn[ee].length!==this.contourLevels[ee].length){oe=!0;break}for(xe=0;xe<nn[ee].length;++xe)if(nn[ee][xe]!==this.contourLevels[ee][xe]){oe=!0;break e}}this.contourLevels=nn}if(oe){De=this._field,te=this.shape;for(var Xe=[],nt=0;nt<3;++nt){var ye=this.contourLevels[nt],Ce=[],Ue=[],Qe=[0,0,0];for(ee=0;ee<ye.length;++ee){var rt=u(this._field[nt],ye[ee]);Ce.push(Xe.length/5|0),Ot=0;e:for(xe=0;xe<rt.cells.length;++xe){var Ke=rt.cells[xe];for(st=0;st<2;++st){var gt=rt.positions[Ke[st]],mt=gt[0],Lt=0|Math.floor(mt),Vt=mt-Lt,dt=gt[1],bt=0|Math.floor(dt),Yt=dt-bt,It=!1;t:for(var jt=0;jt<3;++jt){Qe[jt]=0;var Ie=(nt+jt+1)%3;for(St=0;St<2;++St){var et=St?Vt:1-Vt;for($t=0|Math.min(Math.max(Lt+St,0),te[0]),ft=0;ft<2;++ft){var ht=ft?Yt:1-Yt;if(rn=0|Math.min(Math.max(bt+ft,0),te[1]),Ct=jt<2?this._field[Ie].get($t,rn):(this.intensity.get($t,rn)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ct)||isNaN(Ct)){It=!0;break t}Qe[jt]+=et*ht*Ct}}}if(It){if(st>0){for(var Rt=0;Rt<5;++Rt)Xe.pop();Ot-=1}continue e}Xe.push(Qe[0],Qe[1],gt[0],gt[1],Qe[2]),Ot+=1}}Ue.push(Ot)}this._contourOffsets[nt]=Ce,this._contourCounts[nt]=Ue}var Xt=n.mallocFloat(Xe.length);for(ee=0;ee<Xe.length;++ee)Xt[ee]=Xe[ee];this._contourBuffer.update(Xt),n.freeFloat(Xt)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var j=0;j<3;++j)n.freeFloat(this._field[j].data)},S.highlight=function(j){var H,oe;if(!j)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(H=0;H<3;++H)this.highlightLevel[H]=this.enableHighlight[H]?j.level[H]:-1;for(oe=this.snapToData?j.dataCoordinate:j.position,H=0;H<3;++H)oe[H]-=this.objectOffset[H];if(this.enableDynamic[0]&&oe[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&oe[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&oe[2]!==this.dynamicLevel[2]){for(var U=0,te=this.shape,ee=n.mallocFloat(12*te[0]*te[1]),le=0;le<3;++le)if(this.enableDynamic[le]){this.dynamicLevel[le]=oe[le];var be=this._field[(le+1)%3],he=this._field[(le+2)%3],xe=u(this._field[le],oe[le]),De=xe.cells,Se=xe.positions;for(this._dynamicOffsets[le]=U,H=0;H<De.length;++H)for(var ke=De[H],Fe=0;Fe<2;++Fe){var ve=Se[ke[Fe]],Te=+ve[0],Le=0|Te,Oe=0|Math.min(Le+1,te[0]),Ne=Te-Le,Be=1-Ne,He=+ve[1],Ve=0|He,it=0|Math.min(Ve+1,te[1]),ze=He-Ve,je=1-ze,qe=Be*je,Ye=Be*ze,ct=Ne*je,vt=Ne*ze,wt=qe*be.get(Le,Ve)+Ye*be.get(Le,it)+ct*be.get(Oe,Ve)+vt*be.get(Oe,it),Ot=qe*he.get(Le,Ve)+Ye*he.get(Le,it)+ct*he.get(Oe,Ve)+vt*he.get(Oe,it);if(isNaN(wt)||isNaN(Ot)){Fe&&(U-=1);break}ee[2*U+0]=wt,ee[2*U+1]=Ot,U+=1}this._dynamicCounts[le]=U-this._dynamicOffsets[le]}else this.dynamicLevel[le]=NaN,this._dynamicCounts[le]=0;this._dynamicBuffer.update(ee.subarray(0,2*U)),n.freeFloat(ee)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(g,b,y){"use strict";var e=g("ndarray"),r=g("ndarray-ops"),t=g("typedarray-pool");b.exports=function(x){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(o||l(x),"number"==typeof arguments[1])return _(x,arguments[1],arguments[2],arguments[3]||x.RGBA,arguments[4]||x.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return _(x,0|arguments[1][0],0|arguments[1][1],arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var w=arguments[1],M=i(w)?w:w.raw;if(M)return c(x,M,0|w.width,0|w.height,arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if(w.shape&&w.data&&w.stride)return T(x,w)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var o=null,n=null,m=null;function l(x){o=[x.LINEAR,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_NEAREST],n=[x.NEAREST,x.LINEAR,x.NEAREST_MIPMAP_NEAREST,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_LINEAR],m=[x.REPEAT,x.CLAMP_TO_EDGE,x.MIRRORED_REPEAT]}function i(x){return typeof HTMLCanvasElement<"u"&&x instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&x instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&x instanceof HTMLVideoElement||typeof ImageData<"u"&&x instanceof ImageData}var f=function(x,w){r.muls(x,w,255)};function u(x,w,M){var D=x.gl,C=D.getParameter(D.MAX_TEXTURE_SIZE);if(w<0||w>C||M<0||M>C)throw new Error("gl-texture2d: Invalid texture size");return x._shape=[w,M],x.bind(),D.texImage2D(D.TEXTURE_2D,0,x.format,w,M,0,x.format,x.type,null),x._mipLevels=[0],x}function s(x,w,M,D,C,P){this.gl=x,this.handle=w,this.format=C,this.type=P,this._shape=[M,D],this._mipLevels=[0],this._magFilter=x.NEAREST,this._minFilter=x.NEAREST,this._wrapS=x.CLAMP_TO_EDGE,this._wrapT=x.CLAMP_TO_EDGE,this._anisoSamples=1;var L=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return L._wrapS},set:function(N){return L.wrapS=N}},{get:function(){return L._wrapT},set:function(N){return L.wrapT=N}}]),this._wrapVector=S;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return L._shape[0]},set:function(N){return L.width=N}},{get:function(){return L._shape[1]},set:function(N){return L.height=N}}]),this._shapeVector=E}var d=s.prototype;function h(x,w){return 3===x.length?1===w[2]&&w[1]===x[0]*x[2]&&w[0]===x[2]:1===w[0]&&w[1]===x[0]}function a(x){var w=x.createTexture();return x.bindTexture(x.TEXTURE_2D,w),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),w}function _(x,w,M,D,C){var P=x.getParameter(x.MAX_TEXTURE_SIZE);if(w<0||w>P||M<0||M>P)throw new Error("gl-texture2d: Invalid texture shape");if(C===x.FLOAT&&!x.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var L=a(x);return x.texImage2D(x.TEXTURE_2D,0,D,w,M,0,D,C,null),new s(x,L,w,M,D,C)}function c(x,w,M,D,C,P){var L=a(x);return x.texImage2D(x.TEXTURE_2D,0,C,C,P,w),new s(x,L,M,D,C,P)}function T(x,w){var M=w.dtype,D=w.shape.slice(),C=x.getParameter(x.MAX_TEXTURE_SIZE);if(D[0]<0||D[0]>C||D[1]<0||D[1]>C)throw new Error("gl-texture2d: Invalid texture size");var P=h(D,w.stride.slice()),L=0;"float32"===M?L=x.FLOAT:"float64"===M?(L=x.FLOAT,P=!1,M="float32"):"uint8"===M?L=x.UNSIGNED_BYTE:(L=x.UNSIGNED_BYTE,P=!1,M="uint8");var S,E,N=0;if(2===D.length)N=x.LUMINANCE,w=e(w.data,D=[D[0],D[1],1],[w.stride[0],w.stride[1],1],w.offset);else{if(3!==D.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===D[2])N=x.ALPHA;else if(2===D[2])N=x.LUMINANCE_ALPHA;else if(3===D[2])N=x.RGB;else{if(4!==D[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");N=x.RGBA}}L!==x.FLOAT||x.getExtension("OES_texture_float")||(L=x.UNSIGNED_BYTE,P=!1);var z=w.size;if(P)S=0===w.offset&&w.data.length===z?w.data:w.data.subarray(w.offset,w.offset+z);else{var q=[D[2],D[2]*D[0],1];E=t.malloc(z,M);var G=e(E,D,q,0);"float32"!==M&&"float64"!==M||L!==x.UNSIGNED_BYTE?r.assign(G,w):f(G,w),S=E.subarray(0,z)}var K=a(x);return x.texImage2D(x.TEXTURE_2D,0,N,D[0],D[1],0,N,L,S),P||t.free(E),new s(x,K,D[0],D[1],N,L)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(x){this.bind();var w=this.gl;if(this.type===w.FLOAT&&o.indexOf(x)>=0&&(w.getExtension("OES_texture_float_linear")||(x=w.NEAREST)),n.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,x),this._minFilter=x}},magFilter:{get:function(){return this._magFilter},set:function(x){this.bind();var w=this.gl;if(this.type===w.FLOAT&&o.indexOf(x)>=0&&(w.getExtension("OES_texture_float_linear")||(x=w.NEAREST)),n.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,x),this._magFilter=x}},mipSamples:{get:function(){return this._anisoSamples},set:function(x){var w=this._anisoSamples;if(this._anisoSamples=0|Math.max(x,1),w!==this._anisoSamples){var M=this.gl.getExtension("EXT_texture_filter_anisotropic");M&&this.gl.texParameterf(this.gl.TEXTURE_2D,M.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(x){if(this.bind(),m.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,x),this._wrapS=x}},wrapT:{get:function(){return this._wrapT},set:function(x){if(this.bind(),m.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,x),this._wrapT=x}},wrap:{get:function(){return this._wrapVector},set:function(x){if(Array.isArray(x)||(x=[x,x]),2!==x.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var w=0;w<2;++w)if(m.indexOf(x[w])<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);this._wrapS=x[0],this._wrapT=x[1];var M=this.gl;return this.bind(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,this._wrapS),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,this._wrapT),x}},shape:{get:function(){return this._shapeVector},set:function(x){if(Array.isArray(x)){if(2!==x.length)throw new Error("gl-texture2d: Invalid texture shape")}else x=[0|x,0|x];return u(this,0|x[0],0|x[1]),[0|x[0],0|x[1]]}},width:{get:function(){return this._shape[0]},set:function(x){return u(this,x|=0,this._shape[1]),x}},height:{get:function(){return this._shape[1]},set:function(x){return u(this,this._shape[0],x|=0),x}}}),d.bind=function(x){var w=this.gl;return void 0!==x&&w.activeTexture(w.TEXTURE0+(0|x)),w.bindTexture(w.TEXTURE_2D,this.handle),void 0!==x?0|x:w.getParameter(w.ACTIVE_TEXTURE)-w.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var x=Math.min(this._shape[0],this._shape[1]),w=0;x>0;++w,x>>>=1)this._mipLevels.indexOf(w)<0&&this._mipLevels.push(w)},d.setPixels=function(x,w,M,D){var C=this.gl;this.bind(),Array.isArray(w)?(D=M,M=0|w[1],w=0|w[0]):(w=w||0,M=M||0),D=D||0;var P=i(x)?x:x.raw;if(P)this._mipLevels.indexOf(D)<0?(C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(D)):C.texSubImage2D(C.TEXTURE_2D,D,w,M,this.format,this.type,P);else{if(!(x.shape&&x.stride&&x.data))throw new Error("gl-texture2d: Unsupported data type");if(x.shape.length<2||w+x.shape[1]>this._shape[1]>>>D||M+x.shape[0]>this._shape[0]>>>D||w<0||M<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(L,S,E,N,z,q,G,K){var ne=K.dtype,X=K.shape.slice();if(X.length<2||X.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var J=0,se=0,V=h(X,K.stride.slice());if("float32"===ne?J=L.FLOAT:"float64"===ne?(J=L.FLOAT,V=!1,ne="float32"):"uint8"===ne?J=L.UNSIGNED_BYTE:(J=L.UNSIGNED_BYTE,V=!1,ne="uint8"),2===X.length)se=L.LUMINANCE,K=e(K.data,X=[X[0],X[1],1],[K.stride[0],K.stride[1],1],K.offset);else{if(3!==X.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===X[2])se=L.ALPHA;else if(2===X[2])se=L.LUMINANCE_ALPHA;else if(3===X[2])se=L.RGB;else{if(4!==X[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");se=L.RGBA}}if(se!==L.LUMINANCE&&se!==L.ALPHA||z!==L.LUMINANCE&&z!==L.ALPHA||(se=z),se!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var j=K.size,H=G.indexOf(N)<0;if(H&&G.push(N),J===q&&V)0===K.offset&&K.data.length===j?H?L.texImage2D(L.TEXTURE_2D,N,z,X[0],X[1],0,z,q,K.data):L.texSubImage2D(L.TEXTURE_2D,N,S,E,X[0],X[1],z,q,K.data):H?L.texImage2D(L.TEXTURE_2D,N,z,X[0],X[1],0,z,q,K.data.subarray(K.offset,K.offset+j)):L.texSubImage2D(L.TEXTURE_2D,N,S,E,X[0],X[1],z,q,K.data.subarray(K.offset,K.offset+j));else{var oe;oe=q===L.FLOAT?t.mallocFloat32(j):t.mallocUint8(j);var U=e(oe,X,[X[2],X[2]*X[0],1]);J===L.FLOAT&&q===L.UNSIGNED_BYTE?f(U,K):r.assign(U,K),H?L.texImage2D(L.TEXTURE_2D,N,z,X[0],X[1],0,z,q,oe.subarray(0,j)):L.texSubImage2D(L.TEXTURE_2D,N,S,E,X[0],X[1],z,q,oe.subarray(0,j)),q===L.FLOAT?t.freeFloat32(oe):t.freeUint8(oe)}}(C,w,M,D,this.format,this.type,this._mipLevels,x)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(g,b,y){"use strict";b.exports=function(e,r,t){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var o=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(t){if(t.length>o)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<t.length;++n){var m=t[n];if(m.buffer){var i=m.size||4,f=m.type||e.FLOAT,u=!!m.normalized,s=m.stride||0,d=m.offset||0;m.buffer.bind(),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,i,f,u,s,d)}else{if("number"==typeof m)e.vertexAttrib1f(n,m);else if(1===m.length)e.vertexAttrib1f(n,m[0]);else if(2===m.length)e.vertexAttrib2f(n,m[0],m[1]);else if(3===m.length)e.vertexAttrib3f(n,m[0],m[1],m[2]);else{if(4!==m.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(n,m[0],m[1],m[2],m[3])}e.disableVertexAttribArray(n)}}for(;n<o;++n)e.disableVertexAttribArray(n)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),n=0;n<o;++n)e.disableVertexAttribArray(n)}},{}],148:[function(g,b,y){"use strict";var e=g("./do-bind.js");function r(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}r.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},r.prototype.update=function(t,o,n){this._elements=o,this._attributes=t,this._elementsType=n||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(t,o,n){n=n||0;var m=this.gl;this._elements?m.drawElements(t,o,this._elementsType,n):m.drawArrays(t,n,o)},b.exports=function(t){return new r(t)}},{"./do-bind.js":147}],149:[function(g,b,y){"use strict";var e=g("./do-bind.js");function r(o,n,m,l,i,f){this.location=o,this.dimension=n,this.a=m,this.b=l,this.c=i,this.d=f}function t(o,n,m){this.gl=o,this._ext=n,this.handle=m,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}r.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},t.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},t.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},t.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},t.prototype.update=function(o,n,m){if(this.bind(),e(this.gl,n,o),this.unbind(),this._attribs.length=0,o)for(var l=0;l<o.length;++l){var i=o[l];"number"==typeof i?this._attribs.push(new r(l,1,i)):Array.isArray(i)&&this._attribs.push(new r(l,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!n,this._elementsType=m||this.gl.UNSIGNED_SHORT},t.prototype.draw=function(o,n,m){m=m||0;var l=this.gl;this._useElements?l.drawElements(o,n,this._elementsType,m):l.drawArrays(o,m,n)},b.exports=function(o,n){return new t(o,n,n.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(g,b,y){"use strict";var e=g("./lib/vao-native.js"),r=g("./lib/vao-emulated.js");function t(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}b.exports=function(o,n,m,l){var i,f=o.createVertexArray?new t(o):o.getExtension("OES_vertex_array_object");return(i=f?e(o,f):r(o)).update(n,m,l),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}},{}],152:[function(g,b,y){b.exports=function(o,n){var m=e(o[0],o[1],o[2]),l=e(n[0],n[1],n[2]);r(m,m),r(l,l);var i=t(m,l);return i>1?0:Math.acos(i)};var e=g("./fromValues"),r=g("./normalize"),t=g("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(g,b,y){b.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},{}],154:[function(g,b,y){b.exports=function(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},{}],155:[function(g,b,y){b.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},{}],156:[function(g,b,y){b.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=t[0],i=t[1],f=t[2];return e[0]=n*f-m*i,e[1]=m*l-o*f,e[2]=o*i-n*l,e}},{}],158:[function(g,b,y){b.exports=g("./distance")},{"./distance":159}],159:[function(g,b,y){b.exports=function(e,r){var t=r[0]-e[0],o=r[1]-e[1],n=r[2]-e[2];return Math.sqrt(t*t+o*o+n*n)}},{}],160:[function(g,b,y){b.exports=g("./divide")},{"./divide":161}],161:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e}},{}],162:[function(g,b,y){b.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},{}],163:[function(g,b,y){b.exports=1e-6},{}],164:[function(g,b,y){b.exports=function(r,t){var o=r[0],n=r[1],m=r[2],l=t[0],i=t[1],f=t[2];return Math.abs(o-l)<=e*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-i)<=e*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(m-f)<=e*Math.max(1,Math.abs(m),Math.abs(f))};var e=g("./epsilon")},{"./epsilon":163}],165:[function(g,b,y){b.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},{}],166:[function(g,b,y){b.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},{}],167:[function(g,b,y){b.exports=function(r,t,o,n,m,l){var i,f;for(t||(t=3),o||(o=0),f=n?Math.min(n*t+o,r.length):r.length,i=o;i<f;i+=t)e[0]=r[i],e[1]=r[i+1],e[2]=r[i+2],m(e,e,l),r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2];return r};var e=g("./create")()},{"./create":156}],168:[function(g,b,y){b.exports=function(e,r,t){var o=new Float32Array(3);return o[0]=e,o[1]=r,o[2]=t,o}},{}],169:[function(g,b,y){b.exports={EPSILON:g("./epsilon"),create:g("./create"),clone:g("./clone"),angle:g("./angle"),fromValues:g("./fromValues"),copy:g("./copy"),set:g("./set"),equals:g("./equals"),exactEquals:g("./exactEquals"),add:g("./add"),subtract:g("./subtract"),sub:g("./sub"),multiply:g("./multiply"),mul:g("./mul"),divide:g("./divide"),div:g("./div"),min:g("./min"),max:g("./max"),floor:g("./floor"),ceil:g("./ceil"),round:g("./round"),scale:g("./scale"),scaleAndAdd:g("./scaleAndAdd"),distance:g("./distance"),dist:g("./dist"),squaredDistance:g("./squaredDistance"),sqrDist:g("./sqrDist"),length:g("./length"),len:g("./len"),squaredLength:g("./squaredLength"),sqrLen:g("./sqrLen"),negate:g("./negate"),inverse:g("./inverse"),normalize:g("./normalize"),dot:g("./dot"),cross:g("./cross"),lerp:g("./lerp"),random:g("./random"),transformMat4:g("./transformMat4"),transformMat3:g("./transformMat3"),transformQuat:g("./transformQuat"),rotateX:g("./rotateX"),rotateY:g("./rotateY"),rotateZ:g("./rotateZ"),forEach:g("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(g,b,y){b.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},{}],171:[function(g,b,y){b.exports=g("./length")},{"./length":172}],172:[function(g,b,y){b.exports=function(e){var r=e[0],t=e[1],o=e[2];return Math.sqrt(r*r+t*t+o*o)}},{}],173:[function(g,b,y){b.exports=function(e,r,t,o){var n=r[0],m=r[1],l=r[2];return e[0]=n+o*(t[0]-n),e[1]=m+o*(t[1]-m),e[2]=l+o*(t[2]-l),e}},{}],174:[function(g,b,y){b.exports=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e}},{}],175:[function(g,b,y){b.exports=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e}},{}],176:[function(g,b,y){b.exports=g("./multiply")},{"./multiply":177}],177:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}},{}],178:[function(g,b,y){b.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},{}],179:[function(g,b,y){b.exports=function(e,r){var t=r[0],o=r[1],n=r[2],m=t*t+o*o+n*n;return m>0&&(m=1/Math.sqrt(m),e[0]=r[0]*m,e[1]=r[1]*m,e[2]=r[2]*m),e}},{}],180:[function(g,b,y){b.exports=function(e,r){r=r||1;var t=2*Math.random()*Math.PI,o=2*Math.random()-1,n=Math.sqrt(1-o*o)*r;return e[0]=Math.cos(t)*n,e[1]=Math.sin(t)*n,e[2]=o*r,e}},{}],181:[function(g,b,y){b.exports=function(e,r,t,o){var n=t[1],m=t[2],l=r[1]-n,i=r[2]-m,f=Math.sin(o),u=Math.cos(o);return e[0]=r[0],e[1]=n+l*u-i*f,e[2]=m+l*f+i*u,e}},{}],182:[function(g,b,y){b.exports=function(e,r,t,o){var n=t[0],m=t[2],l=r[0]-n,i=r[2]-m,f=Math.sin(o),u=Math.cos(o);return e[0]=n+i*f+l*u,e[1]=r[1],e[2]=m+i*u-l*f,e}},{}],183:[function(g,b,y){b.exports=function(e,r,t,o){var n=t[0],m=t[1],l=r[0]-n,i=r[1]-m,f=Math.sin(o),u=Math.cos(o);return e[0]=n+l*u-i*f,e[1]=m+l*f+i*u,e[2]=r[2],e}},{}],184:[function(g,b,y){b.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},{}],185:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e}},{}],186:[function(g,b,y){b.exports=function(e,r,t,o){return e[0]=r[0]+t[0]*o,e[1]=r[1]+t[1]*o,e[2]=r[2]+t[2]*o,e}},{}],187:[function(g,b,y){b.exports=function(e,r,t,o){return e[0]=r,e[1]=t,e[2]=o,e}},{}],188:[function(g,b,y){b.exports=g("./squaredDistance")},{"./squaredDistance":190}],189:[function(g,b,y){b.exports=g("./squaredLength")},{"./squaredLength":191}],190:[function(g,b,y){b.exports=function(e,r){var t=r[0]-e[0],o=r[1]-e[1],n=r[2]-e[2];return t*t+o*o+n*n}},{}],191:[function(g,b,y){b.exports=function(e){var r=e[0],t=e[1],o=e[2];return r*r+t*t+o*o}},{}],192:[function(g,b,y){b.exports=g("./subtract")},{"./subtract":193}],193:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e}},{}],194:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2];return e[0]=o*t[0]+n*t[3]+m*t[6],e[1]=o*t[1]+n*t[4]+m*t[7],e[2]=o*t[2]+n*t[5]+m*t[8],e}},{}],195:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=t[3]*o+t[7]*n+t[11]*m+t[15];return e[0]=(t[0]*o+t[4]*n+t[8]*m+t[12])/(l=l||1),e[1]=(t[1]*o+t[5]*n+t[9]*m+t[13])/l,e[2]=(t[2]*o+t[6]*n+t[10]*m+t[14])/l,e}},{}],196:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=t[0],i=t[1],f=t[2],u=t[3],s=u*o+i*m-f*n,d=u*n+f*o-l*m,h=u*m+l*n-i*o,a=-l*o-i*n-f*m;return e[0]=s*u+a*-l+d*-f-h*-i,e[1]=d*u+a*-i+h*-l-s*-f,e[2]=h*u+a*-f+s*-i-d*-l,e}},{}],197:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e}},{}],198:[function(g,b,y){b.exports=function(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},{}],199:[function(g,b,y){b.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},{}],200:[function(g,b,y){b.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(g,b,y){b.exports=function(e,r){var t=r[0]-e[0],o=r[1]-e[1],n=r[2]-e[2],m=r[3]-e[3];return Math.sqrt(t*t+o*o+n*n+m*m)}},{}],202:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e[3]=r[3]/t[3],e}},{}],203:[function(g,b,y){b.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},{}],204:[function(g,b,y){b.exports=function(e,r,t,o){var n=new Float32Array(4);return n[0]=e,n[1]=r,n[2]=t,n[3]=o,n}},{}],205:[function(g,b,y){b.exports={create:g("./create"),clone:g("./clone"),fromValues:g("./fromValues"),copy:g("./copy"),set:g("./set"),add:g("./add"),subtract:g("./subtract"),multiply:g("./multiply"),divide:g("./divide"),min:g("./min"),max:g("./max"),scale:g("./scale"),scaleAndAdd:g("./scaleAndAdd"),distance:g("./distance"),squaredDistance:g("./squaredDistance"),length:g("./length"),squaredLength:g("./squaredLength"),negate:g("./negate"),inverse:g("./inverse"),normalize:g("./normalize"),dot:g("./dot"),lerp:g("./lerp"),random:g("./random"),transformMat4:g("./transformMat4"),transformQuat:g("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(g,b,y){b.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},{}],207:[function(g,b,y){b.exports=function(e){var r=e[0],t=e[1],o=e[2],n=e[3];return Math.sqrt(r*r+t*t+o*o+n*n)}},{}],208:[function(g,b,y){b.exports=function(e,r,t,o){var n=r[0],m=r[1],l=r[2],i=r[3];return e[0]=n+o*(t[0]-n),e[1]=m+o*(t[1]-m),e[2]=l+o*(t[2]-l),e[3]=i+o*(t[3]-i),e}},{}],209:[function(g,b,y){b.exports=function(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e[3]=Math.max(r[3],t[3]),e}},{}],210:[function(g,b,y){b.exports=function(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e[3]=Math.min(r[3],t[3]),e}},{}],211:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e[3]=r[3]*t[3],e}},{}],212:[function(g,b,y){b.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},{}],213:[function(g,b,y){b.exports=function(e,r){var t=r[0],o=r[1],n=r[2],m=r[3],l=t*t+o*o+n*n+m*m;return l>0&&(l=1/Math.sqrt(l),e[0]=t*l,e[1]=o*l,e[2]=n*l,e[3]=m*l),e}},{}],214:[function(g,b,y){var e=g("./normalize"),r=g("./scale");b.exports=function(t,o){return o=o||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),e(t,t),r(t,t,o),t}},{"./normalize":213,"./scale":215}],215:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e}},{}],216:[function(g,b,y){b.exports=function(e,r,t,o){return e[0]=r[0]+t[0]*o,e[1]=r[1]+t[1]*o,e[2]=r[2]+t[2]*o,e[3]=r[3]+t[3]*o,e}},{}],217:[function(g,b,y){b.exports=function(e,r,t,o,n){return e[0]=r,e[1]=t,e[2]=o,e[3]=n,e}},{}],218:[function(g,b,y){b.exports=function(e,r){var t=r[0]-e[0],o=r[1]-e[1],n=r[2]-e[2],m=r[3]-e[3];return t*t+o*o+n*n+m*m}},{}],219:[function(g,b,y){b.exports=function(e){var r=e[0],t=e[1],o=e[2],n=e[3];return r*r+t*t+o*o+n*n}},{}],220:[function(g,b,y){b.exports=function(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e}},{}],221:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=r[3];return e[0]=t[0]*o+t[4]*n+t[8]*m+t[12]*l,e[1]=t[1]*o+t[5]*n+t[9]*m+t[13]*l,e[2]=t[2]*o+t[6]*n+t[10]*m+t[14]*l,e[3]=t[3]*o+t[7]*n+t[11]*m+t[15]*l,e}},{}],222:[function(g,b,y){b.exports=function(e,r,t){var o=r[0],n=r[1],m=r[2],l=t[0],i=t[1],f=t[2],u=t[3],s=u*o+i*m-f*n,d=u*n+f*o-l*m,h=u*m+l*n-i*o,a=-l*o-i*n-f*m;return e[0]=s*u+a*-l+d*-f-h*-i,e[1]=d*u+a*-i+h*-l-s*-f,e[2]=h*u+a*-f+s*-i-d*-l,e[3]=r[3],e}},{}],223:[function(g,b,y){var e=g("glsl-tokenizer"),r=g("atob-lite");b.exports=function(t){for(var o=Array.isArray(t)?t:e(t),n=0;n<o.length;n++){var m=o[n];if("preprocessor"===m.type){var l=m.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(l&&l[2]){var f=l[2];return(l[1]?r(f):f).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(g,b,y){b.exports=function(l){var i,f,u,s=0,d=0,h=999,a=[],_=[],c=1,T=0,x=0,w=!1,M=!1,D="",C=t,P=e;"300 es"===(l=l||{}).version&&(C=n,P=o);var L={},S={};for(s=0;s<C.length;s++)L[C[s]]=!0;for(s=0;s<P.length;s++)S[P[s]]=!0;return function(j){return _=[],null!==j?function(H){var oe;for(s=0,H.toString&&(H=H.toString()),D+=H.replace(/\r\n/g,"\n"),u=D.length;i=D[s],s<u;){switch(oe=s,h){case 0:s="/"===i&&"*"===f?(a.push(i),E(a.join("")),h=999,s+1):(a.push(i),f=i,s+1);break;case 1:case 2:s="\r"!==i&&"\n"!==i||"\\"===f?(a.push(i),f=i,s+1):(E(a.join("")),h=999,s);break;case 3:s=K();break;case 4:s="."===i||/[eE]/.test(i)?(a.push(i),h=5,f=i,s+1):"x"===i&&1===a.length&&"0"===a[0]?(h=11,a.push(i),f=i,s+1):/[^\d]/.test(i)?(E(a.join("")),h=999,s):(a.push(i),f=i,s+1);break;case 11:s=/[^a-fA-F0-9]/.test(i)?(E(a.join("")),h=999,s):(a.push(i),f=i,s+1);break;case 5:"f"===i&&(a.push(i),f=i,s+=1),s=/[eE]/.test(i)?(a.push(i),f=i,s+1):("-"!==i&&"+"!==i||!/[eE]/.test(f))&&/[^\d]/.test(i)?(E(a.join("")),h=999,s):(a.push(i),f=i,s+1);break;case 9999:s=V();break;case 9:s=/[^\s]/g.test(i)?(E(a.join("")),h=999,s):(a.push(i),f=i,s+1);break;case 999:a=a.length?[]:a,s="/"===f&&"*"===i?(x=d+s-1,h=0,f=i,s+1):"/"===f&&"/"===i?(x=d+s-1,h=1,f=i,s+1):"#"===i?(h=2,x=d+s,s):/\s/.test(i)?(h=9,x=d+s,s):(w=/\d/.test(i),M=/[^\w_]/.test(i),x=d+s,h=w?4:M?3:9999,s)}oe!==s&&("\n"===D[oe]?(T=0,++c):++T)}return d+=s,D=D.slice(s),_}(j):(a.length&&E(a.join("")),h=10,E("(eof)"),_)};function E(j){j.length&&_.push({type:m[h],data:j,position:x,line:c,column:T})}function K(){if("."===f&&/\d/.test(i))return h=5,s;if("/"===f&&"*"===i)return h=0,s;if("/"===f&&"/"===i)return h=1,s;if("."===i&&a.length){for(;ne(a););return h=5,s}if(";"===i||")"===i||"("===i){if(a.length)for(;ne(a););return E(i),h=999,s+1}var j=2===a.length&&"="!==i;if(/[\w_\d\s]/.test(i)||j){for(;ne(a););return h=999,s}return a.push(i),f=i,s+1}function ne(j){for(var H,oe,U=0;;){if(H=r.indexOf(j.slice(0,j.length+U).join("")),oe=r[H],-1===H){if(U--+j.length>0)continue;oe=j.slice(0,1).join("")}return E(oe),x+=oe.length,(a=a.slice(oe.length)).length}}function V(){if(/[^\d\w_]/.test(i)){var j=a.join("");return h=S[j]?8:L[j]?7:6,E(a.join("")),h=999,s}return a.push(i),f=i,s+1}};var e=g("./lib/literals"),r=g("./lib/operators"),t=g("./lib/builtins"),o=g("./lib/literals-300es"),n=g("./lib/builtins-300es"),m=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(g,b,y){var e=g("./builtins");e=e.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),b.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(g,b,y){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(g,b,y){var e=g("./literals");b.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(g,b,y){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(g,b,y){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(g,b,y){var e=g("./index");b.exports=function(r,t){var o=e(t),n=[];return(n=n.concat(o(r))).concat(o(null))}},{"./index":224}],231:[function(g,b,y){b.exports=function(e){"string"==typeof e&&(e=[e]);for(var r=[].slice.call(arguments,1),t=[],o=0;o<e.length-1;o++)t.push(e[o],r[o]||"");return t.push(e[o]),t.join("")}},{}],232:[function(g,b,y){"use strict";var e=g("is-browser");b.exports=e&&function(){var r=!1;try{var t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{r=!1}return r}()},{"is-browser":236}],233:[function(g,b,y){"use strict";b.exports=function(f,u){var s=f.length;if(0===s)throw new Error("Must have at least d+1 points");var d=f[0].length;if(s<=d)throw new Error("Must input at least d+1 points");var h=f.slice(0,d+1),a=e.apply(void 0,h);if(0===a)throw new Error("Input not in general position");for(var _=new Array(d+1),c=0;c<=d;++c)_[c]=c;a<0&&(_[0]=1,_[1]=0);var T=new t(_,new Array(d+1),!1),x=T.adjacent,w=new Array(d+2);for(c=0;c<=d;++c){for(var M=_.slice(),D=0;D<=d;++D)D===c&&(M[D]=-1);var C=M[0];M[0]=M[1],M[1]=C;var P=new t(M,new Array(d+1),!0);x[c]=P,w[c]=P}for(w[d+1]=T,c=0;c<=d;++c){M=x[c].vertices;var L=x[c].adjacent;for(D=0;D<=d;++D){var S=M[D];if(S<0)L[D]=T;else for(var E=0;E<=d;++E)x[E].vertices.indexOf(S)<0&&(L[D]=x[E])}}var N=new l(d,h,w),z=!!u;for(c=d+1;c<s;++c)N.insert(f[c],z);return N.boundary()};var e=g("robust-orientation"),r=g("simplicial-complex").compareCells;function t(f,u,s){this.vertices=f,this.adjacent=u,this.boundary=s,this.lastVisited=-1}function o(f,u,s){this.vertices=f,this.cell=u,this.index=s}function n(f,u){return r(f.vertices,u.vertices)}t.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var u=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=u};var m=[];function l(f,u,s){this.dimension=f,this.vertices=u,this.simplices=s,this.interior=s.filter(function(_){return!_.boundary}),this.tuple=new Array(f+1);for(var d=0;d<=f;++d)this.tuple[d]=this.vertices[d];var h,_,a=m[f];a||(a=m[f]=((h=e[f+1])||(h=e),_=h,function(){return _.apply(this,this.tuple)})),this.orient=a}var i=l.prototype;i.handleBoundaryDegeneracy=function(f,u){var s=this.dimension,d=this.vertices.length-1,h=this.tuple,a=this.vertices,_=[f];for(f.lastVisited=-d;_.length>0;)for(var c=(f=_.pop()).adjacent,T=0;T<=s;++T){var x=c[T];if(x.boundary&&!(x.lastVisited<=-d)){for(var w=x.vertices,M=0;M<=s;++M){var D=w[M];h[M]=D<0?u:a[D]}var C=this.orient();if(C>0)return x;x.lastVisited=-d,0===C&&_.push(x)}}return null},i.walk=function(f,u){var s=this.vertices.length-1,d=this.dimension,h=this.vertices,a=this.tuple,_=u?this.interior.length*Math.random()|0:this.interior.length-1,c=this.interior[_];e:for(;!c.boundary;){for(var T=c.vertices,x=c.adjacent,w=0;w<=d;++w)a[w]=h[T[w]];for(c.lastVisited=s,w=0;w<=d;++w){var M=x[w];if(!(M.lastVisited>=s)){var D=a[w];a[w]=f;var C=this.orient();if(a[w]=D,C<0){c=M;continue e}M.lastVisited=M.boundary?-s:s}}return}return c},i.addPeaks=function(f,u){var s=this.vertices.length-1,d=this.dimension,h=this.vertices,a=this.tuple,_=this.interior,c=this.simplices,T=[u];u.lastVisited=s,u.vertices[u.vertices.indexOf(-1)]=s,u.boundary=!1,_.push(u);for(var x=[];T.length>0;){var w=(u=T.pop()).vertices,M=u.adjacent,D=w.indexOf(s);if(!(D<0))for(var C=0;C<=d;++C)if(C!==D){var P=M[C];if(P.boundary&&!(P.lastVisited>=s)){var L=P.vertices;if(P.lastVisited!==-s){for(var S=0,E=0;E<=d;++E)L[E]<0?(S=E,a[E]=f):a[E]=h[L[E]];if(this.orient()>0){L[S]=s,P.boundary=!1,_.push(P),T.push(P),P.lastVisited=s;continue}P.lastVisited=-s}var N=P.adjacent,z=w.slice(),q=M.slice(),G=new t(z,q,!0);c.push(G);var K=N.indexOf(u);if(!(K<0))for(N[K]=G,q[D]=P,z[C]=-1,q[C]=u,M[C]=G,G.flip(),E=0;E<=d;++E){var ne=z[E];if(!(ne<0||ne===s)){for(var X=new Array(d-1),J=0,se=0;se<=d;++se){var V=z[se];V<0||se===E||(X[J++]=V)}x.push(new o(X,G,E))}}}}}for(x.sort(n),C=0;C+1<x.length;C+=2){var j=x[C],H=x[C+1];j.index<0||H.index<0||(j.cell.adjacent[j.index]=H.cell,H.cell.adjacent[H.index]=j.cell)}},i.insert=function(f,u){var s=this.vertices;s.push(f);var d=this.walk(f,u);if(d){for(var h=this.dimension,a=this.tuple,_=0;_<=h;++_){var c=d.vertices[_];a[_]=c<0?f:s[c]}var T=this.orient(a);T<0||(0!==T||(d=this.handleBoundaryDegeneracy(d,f)))&&this.addPeaks(f,d)}},i.boundary=function(){for(var f=this.dimension,u=[],s=this.simplices,d=s.length,h=0;h<d;++h){var a=s[h];if(a.boundary){for(var _=new Array(f),c=a.vertices,T=0,x=0,w=0;w<=f;++w)c[w]>=0?_[T++]=c[w]:x=1&w;if(x===(1&f)){var M=_[0];_[0]=_[1],_[1]=M}u.push(_)}}return u}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(g,b,y){"use strict";var e=g("binary-search-bounds");function r(T,x,w,M,D){this.mid=T,this.left=x,this.right=w,this.leftPoints=M,this.rightPoints=D,this.count=(x?x.count:0)+(w?w.count:0)+M.length}b.exports=function(T){return new _(T&&0!==T.length?a(T):null)};var t=r.prototype;function o(T,x){T.mid=x.mid,T.left=x.left,T.right=x.right,T.leftPoints=x.leftPoints,T.rightPoints=x.rightPoints,T.count=x.count}function n(T,x){var w=a(x);T.mid=w.mid,T.left=w.left,T.right=w.right,T.leftPoints=w.leftPoints,T.rightPoints=w.rightPoints,T.count=w.count}function m(T,x){var w=T.intervals([]);w.push(x),n(T,w)}function l(T,x){var w=T.intervals([]),M=w.indexOf(x);return M<0?0:(w.splice(M,1),n(T,w),1)}function i(T,x,w){for(var M=0;M<T.length&&T[M][0]<=x;++M){var D=w(T[M]);if(D)return D}}function f(T,x,w){for(var M=T.length-1;M>=0&&T[M][1]>=x;--M){var D=w(T[M]);if(D)return D}}function u(T,x){for(var w=0;w<T.length;++w){var M=x(T[w]);if(M)return M}}function s(T,x){return T-x}function d(T,x){return T[0]-x[0]||T[1]-x[1]}function h(T,x){return T[1]-x[1]||T[0]-x[0]}function a(T){if(0===T.length)return null;for(var x=[],w=0;w<T.length;++w)x.push(T[w][0],T[w][1]);x.sort(s);var M=x[x.length>>1],D=[],C=[],P=[];for(w=0;w<T.length;++w){var L=T[w];L[1]<M?D.push(L):M<L[0]?C.push(L):P.push(L)}var S=P,E=P.slice();return S.sort(d),E.sort(h),new r(M,a(D),a(C),S,E)}function _(T){this.root=T}t.intervals=function(T){return T.push.apply(T,this.leftPoints),this.left&&this.left.intervals(T),this.right&&this.right.intervals(T),T},t.insert=function(T){var x=this.count-this.leftPoints.length;if(this.count+=1,T[1]<this.mid)this.left?4*(this.left.count+1)>3*(x+1)?m(this,T):this.left.insert(T):this.left=a([T]);else if(T[0]>this.mid)this.right?4*(this.right.count+1)>3*(x+1)?m(this,T):this.right.insert(T):this.right=a([T]);else{var w=e.ge(this.leftPoints,T,d),M=e.ge(this.rightPoints,T,h);this.leftPoints.splice(w,0,T),this.rightPoints.splice(M,0,T)}},t.remove=function(T){var x=this.count-this.leftPoints;if(T[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(x-1)?l(this,T):2===(C=this.left.remove(T))?(this.left=null,this.count-=1,1):(1===C&&(this.count-=1),C):0;if(T[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(x-1)?l(this,T):2===(C=this.right.remove(T))?(this.right=null,this.count-=1,1):(1===C&&(this.count-=1),C):0;if(1===this.count)return this.leftPoints[0]===T?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===T){if(this.left&&this.right){for(var w=this,M=this.left;M.right;)w=M,M=M.right;if(w===this)M.right=this.right;else{var D=this.left,C=this.right;w.count-=M.count,w.right=M.left,M.left=D,M.right=C}o(this,M),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else o(this,this.left?this.left:this.right);return 1}for(D=e.ge(this.leftPoints,T,d);D<this.leftPoints.length&&this.leftPoints[D][0]===T[0];++D)if(this.leftPoints[D]===T)for(this.count-=1,this.leftPoints.splice(D,1),C=e.ge(this.rightPoints,T,h);C<this.rightPoints.length&&this.rightPoints[C][1]===T[1];++C)if(this.rightPoints[C]===T)return this.rightPoints.splice(C,1),1;return 0},t.queryPoint=function(T,x){return T<this.mid?this.left&&(w=this.left.queryPoint(T,x))?w:i(this.leftPoints,T,x):T>this.mid?this.right&&(w=this.right.queryPoint(T,x))?w:f(this.rightPoints,T,x):u(this.leftPoints,x);var w},t.queryInterval=function(T,x,w){var M;return T<this.mid&&this.left&&(M=this.left.queryInterval(T,x,w))||x>this.mid&&this.right&&(M=this.right.queryInterval(T,x,w))?M:x<this.mid?i(this.leftPoints,x,w):T>this.mid?f(this.rightPoints,T,w):u(this.leftPoints,w)};var c=_.prototype;c.insert=function(T){this.root?this.root.insert(T):this.root=new r(T[0],null,null,[T],[T])},c.remove=function(T){if(this.root){var x=this.root.remove(T);return 2===x&&(this.root=null),0!==x}return!1},c.queryPoint=function(T,x){if(this.root)return this.root.queryPoint(T,x)},c.queryInterval=function(T,x,w){if(T<=x&&this.root)return this.root.queryInterval(T,x,w)},Object.defineProperty(c,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(c,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(g,b,y){"use strict";b.exports=function(e){for(var r=new Array(e),t=0;t<e;++t)r[t]=t;return r}},{}],236:[function(g,b,y){b.exports=!0},{}],237:[function(g,b,y){function e(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}b.exports=function(r){return null!=r&&(e(r)||"function"==typeof(t=r).readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!r._isBuffer);var t}},{}],238:[function(g,b,y){"use strict";b.exports=t,b.exports.isMobile=t,b.exports.default=t;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function t(o){o||(o={});var n=o.ua;if(n||typeof navigator>"u"||(n=navigator.userAgent),n&&n.headers&&"string"==typeof n.headers["user-agent"]&&(n=n.headers["user-agent"]),"string"!=typeof n)return!1;var m=o.tablet?r.test(n):e.test(n);return!m&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==n.indexOf("Macintosh")&&-1!==n.indexOf("Safari")&&(m=!0),m}},{}],239:[function(g,b,y){"use strict";b.exports=function(e){for(var r,t=e.length,o=0;o<t;o++)if(((r=e.charCodeAt(o))<9||r>13)&&32!==r&&133!==r&&160!==r&&5760!==r&&6158!==r&&(r<8192||r>8205)&&8232!==r&&8233!==r&&8239!==r&&8287!==r&&8288!==r&&12288!==r&&65279!==r)return!1;return!0}},{}],240:[function(g,b,y){b.exports=function(e,r,t){return e*(1-t)+r*t}},{}],241:[function(g,b,y){var e=g("./normalize"),r=g("gl-mat4/create"),t=g("gl-mat4/clone"),o=g("gl-mat4/determinant"),n=g("gl-mat4/invert"),m=g("gl-mat4/transpose"),l={length:g("gl-vec3/length"),normalize:g("gl-vec3/normalize"),dot:g("gl-vec3/dot"),cross:g("gl-vec3/cross")},i=r(),f=r(),u=[0,0,0,0],s=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];function h(a,_,c,T,x){a[0]=_[0]*T+c[0]*x,a[1]=_[1]*T+c[1]*x,a[2]=_[2]*T+c[2]*x}b.exports=function(a,_,c,T,x,w){if(_||(_=[0,0,0]),c||(c=[0,0,0]),T||(T=[0,0,0]),x||(x=[0,0,0,1]),w||(w=[0,0,0,1]),!e(i,a)||(t(f,i),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(o(f)<1e-8)))return!1;var M,D,C,P,L,S,E,se,V,N=i[3],z=i[7],q=i[11],G=i[12],K=i[13],ne=i[14],X=i[15];if(0!==N||0!==z||0!==q){if(u[0]=N,u[1]=z,u[2]=q,u[3]=X,!n(f,f))return!1;m(f,f),P=(D=u)[0],(M=x)[0]=(C=f)[0]*P+C[4]*(L=D[1])+C[8]*(S=D[2])+C[12]*(E=D[3]),M[1]=C[1]*P+C[5]*L+C[9]*S+C[13]*E,M[2]=C[2]*P+C[6]*L+C[10]*S+C[14]*E,M[3]=C[3]*P+C[7]*L+C[11]*S+C[15]*E}else x[0]=x[1]=x[2]=0,x[3]=1;if(_[0]=G,_[1]=K,_[2]=ne,(se=s)[0][0]=(V=i)[0],se[0][1]=V[1],se[0][2]=V[2],se[1][0]=V[4],se[1][1]=V[5],se[1][2]=V[6],se[2][0]=V[8],se[2][1]=V[9],se[2][2]=V[10],c[0]=l.length(s[0]),l.normalize(s[0],s[0]),T[0]=l.dot(s[0],s[1]),h(s[1],s[1],s[0],1,-T[0]),c[1]=l.length(s[1]),l.normalize(s[1],s[1]),T[0]/=c[1],T[1]=l.dot(s[0],s[2]),h(s[2],s[2],s[0],1,-T[1]),T[2]=l.dot(s[1],s[2]),h(s[2],s[2],s[1],1,-T[2]),c[2]=l.length(s[2]),l.normalize(s[2],s[2]),T[1]/=c[2],T[2]/=c[2],l.cross(d,s[1],s[2]),l.dot(s[0],d)<0)for(var J=0;J<3;J++)c[J]*=-1,s[J][0]*=-1,s[J][1]*=-1,s[J][2]*=-1;return w[0]=.5*Math.sqrt(Math.max(1+s[0][0]-s[1][1]-s[2][2],0)),w[1]=.5*Math.sqrt(Math.max(1-s[0][0]+s[1][1]-s[2][2],0)),w[2]=.5*Math.sqrt(Math.max(1-s[0][0]-s[1][1]+s[2][2],0)),w[3]=.5*Math.sqrt(Math.max(1+s[0][0]+s[1][1]+s[2][2],0)),s[2][1]>s[1][2]&&(w[0]=-w[0]),s[0][2]>s[2][0]&&(w[1]=-w[1]),s[1][0]>s[0][1]&&(w[2]=-w[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(g,b,y){b.exports=function(e,r){var t=r[15];if(0===t)return!1;for(var o=1/t,n=0;n<16;n++)e[n]=r[n]*o;return!0}},{}],243:[function(g,b,y){var e=g("gl-vec3/lerp"),r=g("mat4-recompose"),t=g("mat4-decompose"),o=g("gl-mat4/determinant"),n=g("quat-slerp"),m=f(),l=f(),i=f();function f(){return{translate:u(),scale:u(1),skew:u(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function u(s){return[s||0,s||0,s||0]}b.exports=function(s,d,h,a){if(0===o(d)||0===o(h))return!1;var _=t(d,m.translate,m.scale,m.skew,m.perspective,m.quaternion),c=t(h,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!(!_||!c||(e(i.translate,m.translate,l.translate,a),e(i.skew,m.skew,l.skew,a),e(i.scale,m.scale,l.scale,a),e(i.perspective,m.perspective,l.perspective,a),n(i.quaternion,m.quaternion,l.quaternion,a),r(s,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(g,b,y){var e={identity:g("gl-mat4/identity"),translate:g("gl-mat4/translate"),multiply:g("gl-mat4/multiply"),create:g("gl-mat4/create"),scale:g("gl-mat4/scale"),fromRotationTranslation:g("gl-mat4/fromRotationTranslation")},r=(e.create(),e.create());b.exports=function(t,o,n,m,l,i){return e.identity(t),e.fromRotationTranslation(t,i,o),t[3]=l[0],t[7]=l[1],t[11]=l[2],t[15]=l[3],e.identity(r),0!==m[2]&&(r[9]=m[2],e.multiply(t,t,r)),0!==m[1]&&(r[9]=0,r[8]=m[1],e.multiply(t,t,r)),0!==m[0]&&(r[8]=0,r[4]=m[0],e.multiply(t,t,r)),e.scale(t,t,n),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(g,b,y){"use strict";var e=g("binary-search-bounds"),r=g("mat4-interpolate"),t=g("gl-mat4/invert"),o=g("gl-mat4/rotateX"),n=g("gl-mat4/rotateY"),m=g("gl-mat4/rotateZ"),l=g("gl-mat4/lookAt"),i=g("gl-mat4/translate"),f=(g("gl-mat4/scale"),g("gl-vec3/normalize")),u=[0,0,0];function s(a){this._components=a.slice(),this._time=[0],this.prevMatrix=a.slice(),this.nextMatrix=a.slice(),this.computedMatrix=a.slice(),this.computedInverse=a.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}b.exports=function(a){return new s((a=a||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var d=s.prototype;d.recalcMatrix=function(a){var _=this._time,c=e.le(_,a),T=this.computedMatrix;if(!(c<0)){var x=this._components;if(c===_.length-1)for(var w=16*c,M=0;M<16;++M)T[M]=x[w++];else{var D=_[c+1]-_[c],C=(w=16*c,this.prevMatrix),P=!0;for(M=0;M<16;++M)C[M]=x[w++];var L=this.nextMatrix;for(M=0;M<16;++M)L[M]=x[w++],P=P&&C[M]===L[M];if(D<1e-6||P)for(M=0;M<16;++M)T[M]=C[M];else r(T,C,L,(a-_[c])/D)}var S=this.computedUp;S[0]=T[1],S[1]=T[5],S[2]=T[9],f(S,S);var E=this.computedInverse;t(E,T);var N=this.computedEye,z=E[15];N[0]=E[12]/z,N[1]=E[13]/z,N[2]=E[14]/z;var q=this.computedCenter,G=Math.exp(this.computedRadius[0]);for(M=0;M<3;++M)q[M]=N[M]-T[2+4*M]*G}},d.idle=function(a){if(!(a<this.lastT())){for(var _=this._components,c=_.length-16,T=0;T<16;++T)_.push(_[c++]);this._time.push(a)}},d.flush=function(a){var _=e.gt(this._time,a)-2;_<0||(this._time.splice(0,_),this._components.splice(0,16*_))},d.lastT=function(){return this._time[this._time.length-1]},d.lookAt=function(a,_,c,T){this.recalcMatrix(a),this.setMatrix(a,l(this.computedMatrix,_=_||this.computedEye,c=c||u,T=T||this.computedUp));for(var x=0,w=0;w<3;++w)x+=Math.pow(c[w]-_[w],2);x=Math.log(Math.sqrt(x)),this.computedRadius[0]=x},d.rotate=function(a,_,c,T){this.recalcMatrix(a);var x=this.computedInverse;_&&n(x,x,_),c&&o(x,x,c),T&&m(x,x,T),this.setMatrix(a,t(this.computedMatrix,x))};var h=[0,0,0];d.pan=function(a,_,c,T){h[0]=-(_||0),h[1]=-(c||0),h[2]=-(T||0),this.recalcMatrix(a);var x=this.computedInverse;i(x,x,h),this.setMatrix(a,t(x,x))},d.translate=function(a,_,c,T){h[0]=_||0,h[1]=c||0,h[2]=T||0,this.recalcMatrix(a);var x=this.computedMatrix;i(x,x,h),this.setMatrix(a,x)},d.setMatrix=function(a,_){if(!(a<this.lastT())){this._time.push(a);for(var c=0;c<16;++c)this._components.push(_[c])}},d.setDistance=function(a,_){this.computedRadius[0]=_},d.setDistanceLimits=function(a,_){var c=this._limits;c[0]=a,c[1]=_},d.getDistanceLimits=function(a){var _=this._limits;return a?(a[0]=_[0],a[1]=_[1],a):_}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(g,b,y){"use strict";b.exports=function(r){var t=r.length;if(t<3){for(var o=new Array(t),n=0;n<t;++n)o[n]=n;return 2===t&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:o}var m=new Array(t);for(n=0;n<t;++n)m[n]=n;m.sort(function(_,c){return r[_][0]-r[c][0]||r[_][1]-r[c][1]});var l=[m[0],m[1]],i=[m[0],m[1]];for(n=2;n<t;++n){for(var f=m[n],u=r[f],s=l.length;s>1&&e(r[l[s-2]],r[l[s-1]],u)<=0;)s-=1,l.pop();for(l.push(f),s=i.length;s>1&&e(r[i[s-2]],r[i[s-1]],u)>=0;)s-=1,i.pop();i.push(f)}o=new Array(i.length+l.length-2);for(var d=0,h=(n=0,l.length);n<h;++n)o[d++]=l[n];for(var a=i.length-2;a>0;--a)o[d++]=i[a];return o};var e=g("robust-orientation")[3]},{"robust-orientation":284}],247:[function(g,b,y){"use strict";b.exports=function(r,t){t||(t=r,r=window);var o=0,n=0,m=0,l={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function f(w){var M=!1;return"altKey"in w&&(M=M||w.altKey!==l.alt,l.alt=!!w.altKey),"shiftKey"in w&&(M=M||w.shiftKey!==l.shift,l.shift=!!w.shiftKey),"ctrlKey"in w&&(M=M||w.ctrlKey!==l.control,l.control=!!w.ctrlKey),"metaKey"in w&&(M=M||w.metaKey!==l.meta,l.meta=!!w.metaKey),M}function u(w,M){var D=e.x(M),C=e.y(M);"buttons"in M&&(w=0|M.buttons),(w!==o||D!==n||C!==m||f(M))&&(o=0|w,n=D||0,m=C||0,t&&t(o,n,m,l))}function s(w){u(0,w)}function d(){(o||n||m||l.shift||l.alt||l.meta||l.control)&&(n=m=0,o=0,l.shift=l.alt=l.control=l.meta=!1,t&&t(0,0,0,l))}function h(w){f(w)&&t&&t(o,n,m,l)}function a(w){0===e.buttons(w)?u(0,w):u(o,w)}function _(w){u(o|e.buttons(w),w)}function c(w){u(o&~e.buttons(w),w)}function T(){i||(i=!0,r.addEventListener("mousemove",a),r.addEventListener("mousedown",_),r.addEventListener("mouseup",c),r.addEventListener("mouseleave",s),r.addEventListener("mouseenter",s),r.addEventListener("mouseout",s),r.addEventListener("mouseover",s),r.addEventListener("blur",d),r.addEventListener("keyup",h),r.addEventListener("keydown",h),r.addEventListener("keypress",h),r!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}T();var x={element:r};return Object.defineProperties(x,{enabled:{get:function(){return i},set:function(w){w?T():!i||(i=!1,r.removeEventListener("mousemove",a),r.removeEventListener("mousedown",_),r.removeEventListener("mouseup",c),r.removeEventListener("mouseleave",s),r.removeEventListener("mouseenter",s),r.removeEventListener("mouseout",s),r.removeEventListener("mouseover",s),r.removeEventListener("blur",d),r.removeEventListener("keyup",h),r.removeEventListener("keydown",h),r.removeEventListener("keypress",h),r!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return m},enumerable:!0},mods:{get:function(){return l},enumerable:!0}}),x};var e=g("mouse-event")},{"mouse-event":249}],248:[function(g,b,y){var e={left:0,top:0};b.exports=function(r,t,o){t=t||r.currentTarget||r.srcElement,Array.isArray(o)||(o=[0,0]);var i,n=r.clientX||0,m=r.clientY||0,l=(i=t)===window||i===document||i===document.body?e:i.getBoundingClientRect();return o[0]=n-l.left,o[1]=m-l.top,o}},{}],249:[function(g,b,y){"use strict";function e(r){return r.target||r.srcElement||window}y.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(t=r.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in r){var t;if(1===(t=r.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},y.element=e,y.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var t=e(r).getBoundingClientRect();return r.clientX-t.left}return 0},y.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var t=e(r).getBoundingClientRect();return r.clientY-t.top}return 0}},{}],250:[function(g,b,y){"use strict";var e=g("to-px");b.exports=function(r,t,o){"function"==typeof r&&(o=!!t,t=r,r=window);var n=e("ex",r),m=function(l){o&&l.preventDefault();var i=l.deltaX||0,f=l.deltaY||0,u=l.deltaZ||0,s=1;switch(l.deltaMode){case 1:s=n;break;case 2:s=window.innerHeight}if(f*=s,u*=s,(i*=s)||f||u)return t(i,f,u,l)};return r.addEventListener("wheel",m),m}},{"to-px":304}],251:[function(g,b,y){"use strict";var e=g("typedarray-pool");b.exports=function(t){function o(s){throw new Error("ndarray-extract-contour: "+s)}"object"!=typeof t&&o("Must specify arguments");var n=t.order;Array.isArray(n)||o("Must specify order");var s,d,h,T,m=t.arrayArguments||1;m<1&&o("Must have at least one array argument"),(t.scalarArguments||0)<0&&o("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&o("Must specify vertex creation function"),"function"!=typeof t.cell&&o("Must specify cell creation function"),"function"!=typeof t.phase&&o("Must specify phase function");for(var i=t.getters||[],f=new Array(m),u=0;u<m;++u)f[u]=i.indexOf(u)>=0;return s=t.vertex,d=t.cell,h=t.phase,T=[f,n].join(","),(0,r[T])(s,d,h,e.mallocUint32,e.freeUint32)};var r={"false,0,1":function(t,o,n,m,l){return function(i,f,u,s){var d,h=0|i.shape[0],a=0|i.shape[1],_=i.data,T=0|i.stride[0],x=0|i.stride[1],w=0|i.offset,M=0|-T,D=0,C=0|-x,P=0,L=-T-x|0,S=0,E=0|T,N=x-T*h|0,z=0,q=0,G=0,K=2*h|0,ne=m(K),X=m(K),J=0,se=0,V=-1,j=-1,H=0,oe=0|-h,U=0|h,te=0,ee=-h-1|0,le=h-1|0,ce=0,pe=0,de=0;for(z=0;z<h;++z)ne[J++]=n(_[w],f,u,s),w+=E;if(w+=N,a>0){if(q=1,ne[J++]=n(_[w],f,u,s),w+=E,h>0)for(z=1,se=ne[J]=n(d=_[w],f,u,s),te=ne[J+oe],ce=ne[J+ee],se===(H=ne[J+V])&&se===te&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,H,te,ce,f,u,s),pe=X[J]=G++),J+=1,w+=E,z=2;z<h;++z)se=ne[J]=n(d=_[w],f,u,s),te=ne[J+oe],ce=ne[J+ee],se===(H=ne[J+V])&&se===te&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,H,te,ce,f,u,s),pe=X[J]=G++,ce!==H&&o(X[J+V],pe,S,D,ce,H,f,u,s)),J+=1,w+=E;for(w+=N,J=0,de=V,V=j,j=de,de=oe,oe=U,U=de,de=ee,ee=le,le=de,q=2;q<a;++q){if(ne[J++]=n(_[w],f,u,s),w+=E,h>0)for(z=1,se=ne[J]=n(d=_[w],f,u,s),te=ne[J+oe],ce=ne[J+ee],se===(H=ne[J+V])&&se===te&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,H,te,ce,f,u,s),pe=X[J]=G++,ce!==te&&o(X[J+oe],pe,P,S,te,ce,f,u,s)),J+=1,w+=E,z=2;z<h;++z)se=ne[J]=n(d=_[w],f,u,s),te=ne[J+oe],ce=ne[J+ee],se===(H=ne[J+V])&&se===te&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,H,te,ce,f,u,s),pe=X[J]=G++,ce!==te&&o(X[J+oe],pe,P,S,te,ce,f,u,s),ce!==H&&o(X[J+V],pe,S,D,ce,H,f,u,s)),J+=1,w+=E;1&q&&(J=0),de=V,V=j,j=de,de=oe,oe=U,U=de,de=ee,ee=le,le=de,w+=N}}l(X),l(ne)}},"false,1,0":function(t,o,n,m,l){return function(i,f,u,s){var d,h=0|i.shape[0],a=0|i.shape[1],_=i.data,T=0|i.stride[0],x=0|i.stride[1],w=0|i.offset,M=0|-T,D=0,C=0|-x,P=0,L=-T-x|0,S=0,E=0|x,N=T-x*a|0,z=0,q=0,G=0,K=2*a|0,ne=m(K),X=m(K),J=0,se=0,V=-1,j=-1,H=0,oe=0|-a,U=0|a,te=0,ee=-a-1|0,le=a-1|0,ce=0,pe=0,de=0;for(q=0;q<a;++q)ne[J++]=n(_[w],f,u,s),w+=E;if(w+=N,h>0){if(z=1,ne[J++]=n(_[w],f,u,s),w+=E,a>0)for(q=1,se=ne[J]=n(d=_[w],f,u,s),H=ne[J+V],ce=ne[J+ee],se===(te=ne[J+oe])&&se===H&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,te,H,ce,f,u,s),pe=X[J]=G++),J+=1,w+=E,q=2;q<a;++q)se=ne[J]=n(d=_[w],f,u,s),H=ne[J+V],ce=ne[J+ee],se===(te=ne[J+oe])&&se===H&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,te,H,ce,f,u,s),pe=X[J]=G++,ce!==H&&o(X[J+V],pe,P,S,H,ce,f,u,s)),J+=1,w+=E;for(w+=N,J=0,de=oe,oe=U,U=de,de=V,V=j,j=de,de=ee,ee=le,le=de,z=2;z<h;++z){if(ne[J++]=n(_[w],f,u,s),w+=E,a>0)for(q=1,se=ne[J]=n(d=_[w],f,u,s),H=ne[J+V],ce=ne[J+ee],se===(te=ne[J+oe])&&se===H&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,te,H,ce,f,u,s),pe=X[J]=G++,ce!==te&&o(X[J+oe],pe,S,D,ce,te,f,u,s)),J+=1,w+=E,q=2;q<a;++q)se=ne[J]=n(d=_[w],f,u,s),H=ne[J+V],ce=ne[J+ee],se===(te=ne[J+oe])&&se===H&&se===ce||(t(z,q,d,D=_[w+M],P=_[w+C],S=_[w+L],se,te,H,ce,f,u,s),pe=X[J]=G++,ce!==H&&o(X[J+V],pe,P,S,H,ce,f,u,s),ce!==te&&o(X[J+oe],pe,S,D,ce,te,f,u,s)),J+=1,w+=E;1&z&&(J=0),de=oe,oe=U,U=de,de=V,V=j,j=de,de=ee,ee=le,le=de,w+=N}}l(X),l(ne)}}}},{"typedarray-pool":308}],252:[function(g,b,y){"use strict";var e=g("dup"),r={zero:function(h,a,_,c){var T=h[0];c|=0;var x=0,w=_[0];for(x=0;x<T;++x)a[c]=0,c+=w},fdTemplate1:function(h,a,_,c,T,x,w){var M=h[0],D=_[0],C=-1*D,P=D;c|=0,w|=0;var L=0,S=D,E=x[0];for(L=0;L<M;++L)T[w]=.5*(a[c+C]-a[c+P]),c+=S,w+=E},fdTemplate2:function(h,a,_,c,T,x,w,M,D,C){var P=h[0],L=h[1],S=_[0],E=_[1],z=x[1],G=D[1],K=-1*S,ne=S,X=-1*E,J=E;c|=0,w|=0,C|=0;var se=0,V=0,j=E,H=S-L*E,oe=z,U=x[0]-L*z,te=G,ee=D[0]-L*G;for(V=0;V<P;++V){for(se=0;se<L;++se)T[w]=.5*(a[c+K]-a[c+ne]),M[C]=.5*(a[c+X]-a[c+J]),c+=j,w+=oe,C+=te;c+=H,w+=U,C+=ee}}},t={cdiff:function(h){var a={};return function(_,c,T){var x=_.dtype,w=_.order,M=c.dtype,D=c.order,C=T.dtype,P=T.order,L=[x,w.join(),M,D.join(),C,P.join()].join(),S=a[L];return S||(a[L]=S=h([x,w,M,D,C,P])),S(_.shape.slice(0),_.data,_.stride,0|_.offset,c.data,c.stride,0|c.offset,T.data,T.stride,0|T.offset)}},zero:function(h){var a={};return function(_){var c=_.dtype,T=_.order,x=[c,T.join()].join(),w=a[x];return w||(a[x]=w=h([c,T])),w(_.shape.slice(0),_.data,_.stride,0|_.offset)}},fdTemplate1:function(h){var a={};return function(_,c){var T=_.dtype,x=_.order,w=c.dtype,M=c.order,D=[T,x.join(),w,M.join()].join(),C=a[D];return C||(a[D]=C=h([T,x,w,M])),C(_.shape.slice(0),_.data,_.stride,0|_.offset,c.data,c.stride,0|c.offset)}},fdTemplate2:function(h){var a={};return function(_,c,T){var x=_.dtype,w=_.order,M=c.dtype,D=c.order,C=T.dtype,P=T.order,L=[x,w.join(),M,D.join(),C,P.join()].join(),S=a[L];return S||(a[L]=S=h([x,w,M,D,C,P])),S(_.shape.slice(0),_.data,_.stride,0|_.offset,c.data,c.stride,0|c.offset,T.data,T.stride,0|T.offset)}}};function o(h){return(0,t[h.funcName])(n.bind(void 0,h))}function n(h){return r[h.funcName]}function m(h){return o({funcName:h.funcName})}var l={},i={},f=m({funcName:"cdiff"}),u=m({funcName:"zero"});function s(h){return h in l?l[h]:l[h]=m({funcName:"fdTemplate"+h})}function d(h,a,_,c){return function(T,x){var w=x.shape.slice();return w[0]>2&&w[1]>2&&c(x.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),T.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),T.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(_(x.pick(0,-1).lo(1).hi(w[1]-2),T.pick(0,-1,1).lo(1).hi(w[1]-2)),a(T.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(_(x.pick(w[0]-1,-1).lo(1).hi(w[1]-2),T.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),a(T.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(_(x.pick(-1,0).lo(1).hi(w[0]-2),T.pick(-1,0,0).lo(1).hi(w[0]-2)),a(T.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(_(x.pick(-1,w[1]-1).lo(1).hi(w[0]-2),T.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),a(T.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),T.set(0,0,0,0),T.set(0,0,1,0),T.set(w[0]-1,0,0,0),T.set(w[0]-1,0,1,0),T.set(0,w[1]-1,0,0),T.set(0,w[1]-1,1,0),T.set(w[0]-1,w[1]-1,0,0),T.set(w[0]-1,w[1]-1,1,0),T}}b.exports=function(h,a,_){return Array.isArray(_)||(_=e(a.dimension,"string"==typeof _?_:"clamp")),0===a.size?h:0===a.dimension?(h.set(0),h):function(c){var T=c.join();if(D=i[T])return D;for(var x=c.length,w=[f,u],M=1;M<=x;++M)w.push(s(M));var D=d.apply(void 0,w);return i[T]=D,D}(_)(h,a)}},{dup:65}],253:[function(g,b,y){"use strict";function e(n,m){var l=Math.floor(m),i=m-l,u=0<=l+1&&l+1<n.shape[0];return(1-i)*(0<=l&&l<n.shape[0]?+n.get(l):0)+i*(u?+n.get(l+1):0)}function r(n,m,l){var i=Math.floor(m),f=m-i,u=0<=i&&i<n.shape[0],s=0<=i+1&&i+1<n.shape[0],d=Math.floor(l),h=l-d,a=0<=d&&d<n.shape[1],_=0<=d+1&&d+1<n.shape[1],c=u&&a?n.get(i,d):0,T=u&&_?n.get(i,d+1):0;return(1-h)*((1-f)*c+f*(s&&a?n.get(i+1,d):0))+h*((1-f)*T+f*(s&&_?n.get(i+1,d+1):0))}function t(n,m,l,i){var f=Math.floor(m),u=m-f,s=0<=f&&f<n.shape[0],d=0<=f+1&&f+1<n.shape[0],h=Math.floor(l),a=l-h,_=0<=h&&h<n.shape[1],c=0<=h+1&&h+1<n.shape[1],T=Math.floor(i),x=i-T,w=0<=T&&T<n.shape[2],M=0<=T+1&&T+1<n.shape[2],D=s&&_&&w?n.get(f,h,T):0,C=s&&c&&w?n.get(f,h+1,T):0,P=d&&_&&w?n.get(f+1,h,T):0,L=d&&c&&w?n.get(f+1,h+1,T):0,S=s&&_&&M?n.get(f,h,T+1):0,E=s&&c&&M?n.get(f,h+1,T+1):0;return(1-x)*((1-a)*((1-u)*D+u*P)+a*((1-u)*C+u*L))+x*((1-a)*((1-u)*S+u*(d&&_&&M?n.get(f+1,h,T+1):0))+a*((1-u)*E+u*(d&&c&&M?n.get(f+1,h+1,T+1):0)))}function o(n){var m,l,i=0|n.shape.length,f=new Array(i),u=new Array(i),s=new Array(i),d=new Array(i);for(m=0;m<i;++m)l=+arguments[m+1],f[m]=Math.floor(l),u[m]=l-f[m],s[m]=0<=f[m]&&f[m]<n.shape[m],d[m]=0<=f[m]+1&&f[m]+1<n.shape[m];var h,a,_,c=0;e:for(m=0;m<1<<i;++m){for(a=1,_=n.offset,h=0;h<i;++h)if(m&1<<h){if(!d[h])continue e;a*=u[h],_+=n.stride[h]*(f[h]+1)}else{if(!s[h])continue e;a*=1-u[h],_+=n.stride[h]*f[h]}c+=a*n.data[_]}return c}b.exports=function(n,m,l,i){switch(n.shape.length){case 0:return 0;case 1:return e(n,m);case 2:return r(n,m,l);case 3:return t(n,m,l,i);default:return o.apply(void 0,arguments)}},b.exports.d1=e,b.exports.d2=r,b.exports.d3=t},{}],254:[function(g,b,y){"use strict";var e={"float64,2,1,0":function(){return function(m,l,i,f,u){var s=m[0],d=m[1],h=m[2],_=i[1],c=i[2];f|=0;var T=0,x=0,w=0,M=c,D=_-h*c,C=i[0]-d*_;for(w=0;w<s;++w){for(x=0;x<d;++x){for(T=0;T<h;++T)l[f]/=u,f+=M;f+=D}f+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(m,l,i,f,u,s,d,h){for(var a=m[0],_=m[1],c=m[2],T=i[0],x=i[1],w=i[2],M=s[0],D=s[1],C=s[2],P=f|=0,L=d|=0,S=0|m[0];S>0;){S<64?(a=S,S=0):(a=64,S-=64);for(var E=0|m[1];E>0;){E<64?(_=E,E=0):(_=64,E-=64),f=P+S*T+E*x,d=L+S*M+E*D;var N=0,z=0,q=0,G=w,K=T-c*w,ne=x-a*T,X=C,J=M-c*C,se=D-a*M;for(q=0;q<_;++q){for(z=0;z<a;++z){for(N=0;N<c;++N)l[f]=u[d]*h,f+=G,d+=X;f+=K,d+=J}f+=ne,d+=se}}}}},"float32,1,0,float32,1,0":function(){return function(m,l,i,f,u,s,d){var h=m[0],a=m[1],c=i[1],x=s[1];f|=0,d|=0;var w=0,M=0,D=c,C=i[0]-a*c,P=x,L=s[0]-a*x;for(M=0;M<h;++M){for(w=0;w<a;++w)l[f]=u[d],f+=D,d+=P;f+=C,d+=L}}},"float32,1,0,float32,0,1":function(){return function(m,l,i,f,u,s,d){for(var h=m[0],a=m[1],_=i[0],c=i[1],T=s[0],x=s[1],w=f|=0,M=d|=0,D=0|m[1];D>0;){D<64?(a=D,D=0):(a=64,D-=64);for(var C=0|m[0];C>0;){C<64?(h=C,C=0):(h=64,C-=64),f=w+D*c+C*_,d=M+D*x+C*T;var P=0,L=0,S=c,E=_-a*c,N=x,z=T-a*x;for(L=0;L<h;++L){for(P=0;P<a;++P)l[f]=u[d],f+=S,d+=N;f+=E,d+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(m,l,i,f,u,s,d){for(var h=m[0],a=m[1],_=m[2],c=i[0],T=i[1],x=i[2],w=s[0],M=s[1],D=s[2],C=f|=0,P=d|=0,L=0|m[2];L>0;){L<64?(_=L,L=0):(_=64,L-=64);for(var S=0|m[0];S>0;){S<64?(h=S,S=0):(h=64,S-=64);for(var E=0|m[1];E>0;){E<64?(a=E,E=0):(a=64,E-=64),f=C+L*x+S*c+E*T,d=P+L*D+S*w+E*M;var N=0,z=0,q=0,G=x,K=c-_*x,ne=T-h*c,X=D,J=w-_*D,se=M-h*w;for(q=0;q<a;++q){for(z=0;z<h;++z){for(N=0;N<_;++N)l[f]=u[d],f+=G,d+=X;f+=K,d+=J}f+=ne,d+=se}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(m,l,i,f,u,s,d){var h=m[0],a=m[1],_=m[2],c=i[0],x=i[2],w=s[0],D=s[2];f|=0,d|=0;var C=0,P=0,L=0,S=x,E=c-_*x,N=i[1]-h*c,z=D,q=w-_*D,G=s[1]-h*w;for(L=0;L<a;++L){for(P=0;P<h;++P){for(C=0;C<_;++C)l[f]=u[d],f+=S,d+=z;f+=E,d+=q}f+=N,d+=G}}}},r=function(m,l){var i=l.join(",");return(0,e[i])()},t={mul:function(m){var l={};return function(i,f,u){var s=i.dtype,d=i.order,h=f.dtype,a=f.order,_=u.dtype,c=u.order,T=[s,d.join(),h,a.join(),_,c.join()].join(),x=l[T];return x||(l[T]=x=m([s,d,h,a,_,c])),x(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,u.data,u.stride,0|u.offset)}},muls:function(m){var l={};return function(i,f,u){var s=i.dtype,d=i.order,h=f.dtype,a=f.order,_=[s,d.join(),h,a.join()].join(),c=l[_];return c||(l[_]=c=m([s,d,h,a])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,u)}},mulseq:function(m){var l={};return function(i,f){var u=i.dtype,s=i.order,d=[u,s.join()].join(),h=l[d];return h||(l[d]=h=m([u,s])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,f)}},div:function(m){var l={};return function(i,f,u){var s=i.dtype,d=i.order,h=f.dtype,a=f.order,_=u.dtype,c=u.order,T=[s,d.join(),h,a.join(),_,c.join()].join(),x=l[T];return x||(l[T]=x=m([s,d,h,a,_,c])),x(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,u.data,u.stride,0|u.offset)}},divs:function(m){var l={};return function(i,f,u){var s=i.dtype,d=i.order,h=f.dtype,a=f.order,_=[s,d.join(),h,a.join()].join(),c=l[_];return c||(l[_]=c=m([s,d,h,a])),c(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,u)}},divseq:function(m){var l={};return function(i,f){var u=i.dtype,s=i.order,d=[u,s.join()].join(),h=l[d];return h||(l[d]=h=m([u,s])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,f)}},assign:function(m){var l={};return function(i,f){var u=i.dtype,s=i.order,d=f.dtype,h=f.order,a=[u,s.join(),d,h.join()].join(),_=l[a];return _||(l[a]=_=m([u,s,d,h])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset)}}};function o(m){return(0,t[(l={funcName:m.funcName}).funcName])(r.bind(void 0,l));var l}var n={mul:"*",div:"/"};(function(){for(var m in n)y[m]=o({funcName:m}),y[m+"s"]=o({funcName:m+"s"}),y[m+"seq"]=o({funcName:m+"seq"})})(),y.assign=o({funcName:"assign"})},{}],255:[function(g,b,y){"use strict";var e=g("ndarray"),r=g("./doConvert.js");b.exports=function(t,o){for(var n=[],m=t,l=1;Array.isArray(m);)n.push(m.length),l*=m.length,m=m[0];return 0===n.length?e():(o||(o=e(new Float64Array(l),n)),r(o,t),o)}},{"./doConvert.js":256,ndarray:259}],256:[function(g,b,y){"use strict";var t,o;b.exports=(t=function(){return function(t,o,n,m,l){var i=t[0],f=t[1],u=t[2],d=n[1],h=n[2],a=[0,0,0];m|=0;var _=0,c=0,T=0,x=h,w=d-u*h,M=n[0]-f*d;for(T=0;T<i;++T){for(c=0;c<f;++c){for(_=0;_<u;++_){var D,C=l;for(D=0;D<a.length-1;++D)C=C[a[D]];o[m]=C[a[a.length-1]],m+=x,++a[2]}m+=w,a[2]-=u,++a[1]}m+=M,a[1]-=f,++a[0]}}}.bind(void 0,{funcName:"convert"}),o={},function(n,m){var l=n.dtype,i=n.order,f=[l,i.join()].join(),u=o[f];return u||(o[f]=u=t([l,i])),u(n.shape.slice(0),n.data,n.stride,0|n.offset,m)})},{}],257:[function(g,b,y){"use strict";var e=g("typedarray-pool");function r(m){return"uint32"===m?[e.mallocUint32,e.freeUint32]:null}var t={"uint32,1,0":function(m,l){return function(i,f,u,s,d,h,a,_,c,T,x){var w,M,D,C,P,L,S,E,N=i*d+s,z=m(_);for(w=i+1;w<=f;++w){for(M=w,D=N+=d,P=0,L=N,C=0;C<_;++C)z[P++]=u[L],L+=c;e:for(;M-- >i;){P=0,L=D-d;t:for(C=0;C<_;++C){if((S=u[L])<(E=z[P]))break e;if(S>E)break t;L+=T,P+=x}for(P=D,L=D-d,C=0;C<_;++C)u[P]=u[L],P+=c,L+=c;D-=d}for(P=D,L=0,C=0;C<_;++C)u[P]=z[L++],P+=c}l(z)}}},o={"uint32,1,0":function(m,l,i){return function f(u,s,d,h,a,_,c,T,x,w,M){var D,C,L,S,E,N,z,q,G,K,ne,X,J,se,V,j,H,oe,U,te,ee,le,ce,pe,de=(s-u+1)/6|0,be=u+de,he=s-de,xe=u+s>>1,De=xe-de,Se=xe+de,ke=be,Fe=De,ve=xe,Te=Se,Le=he,Oe=u+1,Ne=s-1,Be=!0,He=0,Ve=0,it=0,ze=T,je=l(ze),qe=l(ze);K=a*ke,ne=a*Fe,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=ke,ke=Fe,Fe=C;break e}if(it<0)break e;pe+=w}K=a*Te,ne=a*Le,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=Te,Te=Le,Le=C;break e}if(it<0)break e;pe+=w}K=a*ke,ne=a*ve,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=ke,ke=ve,ve=C;break e}if(it<0)break e;pe+=w}K=a*Fe,ne=a*ve,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=Fe,Fe=ve,ve=C;break e}if(it<0)break e;pe+=w}K=a*ke,ne=a*Te,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=ke,ke=Te,Te=C;break e}if(it<0)break e;pe+=w}K=a*ve,ne=a*Te,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=ve,ve=Te,Te=C;break e}if(it<0)break e;pe+=w}K=a*Fe,ne=a*Le,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=Fe,Fe=Le,Le=C;break e}if(it<0)break e;pe+=w}K=a*Fe,ne=a*ve,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=Fe,Fe=ve,ve=C;break e}if(it<0)break e;pe+=w}K=a*Te,ne=a*Le,pe=h;e:for(G=0;G<T;++G){if((it=d[N=K+pe]-d[z=ne+pe])>0){C=Te,Te=Le,Le=C;break e}if(it<0)break e;pe+=w}for(K=a*ke,ne=a*Fe,X=a*ve,J=a*Te,se=a*Le,V=a*be,j=a*xe,H=a*he,ce=0,pe=h,G=0;G<T;++G)N=K+pe,q=X+pe,oe=J+pe,U=se+pe,te=V+pe,ee=j+pe,le=H+pe,je[ce]=d[z=ne+pe],qe[ce]=d[oe],Be=Be&&je[ce]===qe[ce],L=d[q],S=d[U],d[te]=d[N],d[ee]=L,d[le]=S,++ce,pe+=x;for(K=a*De,ne=a*u,pe=h,G=0;G<T;++G)d[N=K+pe]=d[z=ne+pe],pe+=x;for(K=a*Se,ne=a*s,pe=h,G=0;G<T;++G)d[N=K+pe]=d[z=ne+pe],pe+=x;if(Be)for(E=Oe;E<=Ne;++E){for(N=h+E*a,ce=0,G=0;G<T&&0==(it=d[N]-je[ce]);++G)ce+=M,N+=w;if(0!==it)if(it<0){if(E!==Oe)for(K=a*E,ne=a*Oe,pe=h,G=0;G<T;++G)D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=D,pe+=x;++Oe}else for(;;){for(N=h+Ne*a,ce=0,G=0;G<T&&0==(it=d[N]-je[ce]);++G)ce+=M,N+=w;if(!(it>0)){if(it<0){for(K=a*E,ne=a*Oe,X=a*Ne,pe=h,G=0;G<T;++G)q=X+pe,D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=d[q],d[q]=D,pe+=x;++Oe,--Ne;break}for(K=a*E,ne=a*Ne,pe=h,G=0;G<T;++G)D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=D,pe+=x;--Ne;break}Ne--}}else for(E=Oe;E<=Ne;++E){for(N=h+E*a,ce=0,G=0;G<T&&0==(He=d[N]-je[ce]);++G)ce+=M,N+=w;if(He<0){if(E!==Oe)for(K=a*E,ne=a*Oe,pe=h,G=0;G<T;++G)D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=D,pe+=x;++Oe}else{for(N=h+E*a,ce=0,G=0;G<T&&0==(Ve=d[N]-qe[ce]);++G)ce+=M,N+=w;if(Ve>0)for(;;){for(N=h+Ne*a,ce=0,G=0;G<T&&0==(it=d[N]-qe[ce]);++G)ce+=M,N+=w;if(!(it>0)){for(N=h+Ne*a,ce=0,G=0;G<T&&0==(it=d[N]-je[ce]);++G)ce+=M,N+=w;if(it<0){for(K=a*E,ne=a*Oe,X=a*Ne,pe=h,G=0;G<T;++G)q=X+pe,D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=d[q],d[q]=D,pe+=x;++Oe,--Ne}else{for(K=a*E,ne=a*Ne,pe=h,G=0;G<T;++G)D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=D,pe+=x;--Ne}break}if(--Ne<E)break}}}for(K=a*u,ne=a*(Oe-1),ce=0,pe=h,G=0;G<T;++G)d[N=K+pe]=d[z=ne+pe],d[z]=je[ce],++ce,pe+=x;for(K=a*s,ne=a*(Ne+1),ce=0,pe=h,G=0;G<T;++G)d[N=K+pe]=d[z=ne+pe],d[z]=qe[ce],++ce,pe+=x;if(Oe-2-u<=32?m(u,Oe-2,d,h,a,_,c,T,x,w,M):f(u,Oe-2,d,h,a,_,c,T,x,w,M),s-(Ne+2)<=32?m(Ne+2,s,d,h,a,_,c,T,x,w,M):f(Ne+2,s,d,h,a,_,c,T,x,w,M),Be)return i(je),void i(qe);if(Oe<be&&Ne>he){e:for(;;){for(N=h+Oe*a,ce=0,pe=h,G=0;G<T;++G){if(d[N]!==je[ce])break e;++ce,N+=x}++Oe}e:for(;;){for(N=h+Ne*a,ce=0,pe=h,G=0;G<T;++G){if(d[N]!==qe[ce])break e;++ce,N+=x}--Ne}for(E=Oe;E<=Ne;++E){for(N=h+E*a,ce=0,G=0;G<T&&0==(He=d[N]-je[ce]);++G)ce+=M,N+=w;if(0===He){if(E!==Oe)for(K=a*E,ne=a*Oe,pe=h,G=0;G<T;++G)D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=D,pe+=x;++Oe}else{for(N=h+E*a,ce=0,G=0;G<T&&0==(Ve=d[N]-qe[ce]);++G)ce+=M,N+=w;if(0===Ve)for(;;){for(N=h+Ne*a,ce=0,G=0;G<T&&0==(it=d[N]-qe[ce]);++G)ce+=M,N+=w;if(0!==it){for(N=h+Ne*a,ce=0,G=0;G<T&&0==(it=d[N]-je[ce]);++G)ce+=M,N+=w;if(it<0){for(K=a*E,ne=a*Oe,X=a*Ne,pe=h,G=0;G<T;++G)q=X+pe,D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=d[q],d[q]=D,pe+=x;++Oe,--Ne}else{for(K=a*E,ne=a*Ne,pe=h,G=0;G<T;++G)D=d[N=K+pe],d[N]=d[z=ne+pe],d[z]=D,pe+=x;--Ne}break}if(--Ne<E)break}}}}i(je),i(qe),Ne-Oe<=32?m(Oe,Ne,d,h,a,_,c,T,x,w,M):f(Oe,Ne,d,h,a,_,c,T,x,w,M)}}},n={"uint32,1,0":function(m,l){return function(i){var f=i.data,u=0|i.offset,s=i.shape,d=i.stride,h=0|d[0],a=0|s[0],_=0|d[1],c=0|s[1],T=_,x=_;a<=32?m(0,a-1,f,u,h,_,a,c,T,x,1):l(0,a-1,f,u,h,_,a,c,T,x,1)}}};b.exports=function(m,l){var d,h,a,_,c,i=[l,m].join(","),f=n[i],u=(d=m,a=r(h=l),_=[h,d].join(","),c=t[_],a?c(a[0],a[1]):c()),s=function(d,h,a){var _=r(h),c=[h,d].join(","),T=o[c];return d.length>1&&_?T(a,_[0],_[1]):T(a)}(m,l,u);return f(u,s)}},{"typedarray-pool":308}],258:[function(g,b,y){"use strict";var e=g("./lib/compile_sort.js"),r={};b.exports=function(t){var o=t.order,n=t.dtype,m=[o,n].join(":"),l=r[m];return l||(r[m]=l=e(o,n)),l(t),t}},{"./lib/compile_sort.js":257}],259:[function(g,b,y){var e=g("is-buffer"),r=typeof Float64Array<"u";function t(i,f){return i[0]-f[0]}function o(){var i,f=this.stride,u=new Array(f.length);for(i=0;i<u.length;++i)u[i]=[Math.abs(f[i]),i];u.sort(t);var s=new Array(u.length);for(i=0;i<s.length;++i)s[i]=u[i][1];return s}var n={T:function(i){function f(s){this.data=s}var u=f.prototype;return u.dtype=i,u.index=function(){return-1},u.size=0,u.dimension=-1,u.shape=u.stride=u.order=[],u.lo=u.hi=u.transpose=u.step=function(){return new f(this.data)},u.get=u.set=function(){},u.pick=function(){return null},function(s){return new f(s)}},0:function(i,f){function u(d,h){this.data=d,this.offset=h}var s=u.prototype;return s.dtype=i,s.index=function(){return this.offset},s.dimension=0,s.size=1,s.shape=s.stride=s.order=[],s.lo=s.hi=s.transpose=s.step=function(){return new u(this.data,this.offset)},s.pick=function(){return f(this.data)},s.valueOf=s.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},s.set=function(d){return"generic"===i?this.data.set(this.offset,d):this.data[this.offset]=d},function(d,h,a,_){return new u(d,_)}},1:function(i,f,u){function s(h,a,_,c){this.data=h,this.shape=[a],this.stride=[_],this.offset=0|c}var d=s.prototype;return d.dtype=i,d.dimension=1,Object.defineProperty(d,"size",{get:function(){return this.shape[0]}}),d.order=[0],d.set=function(h,a){return"generic"===i?this.data.set(this.offset+this.stride[0]*h,a):this.data[this.offset+this.stride[0]*h]=a},d.get=function(h){return"generic"===i?this.data.get(this.offset+this.stride[0]*h):this.data[this.offset+this.stride[0]*h]},d.index=function(h){return this.offset+this.stride[0]*h},d.hi=function(h){return new s(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,this.stride[0],this.offset)},d.lo=function(h){var a=this.offset,_=0,c=this.shape[0],T=this.stride[0];return"number"==typeof h&&h>=0&&(a+=T*(_=0|h),c-=_),new s(this.data,c,T,a)},d.step=function(h){var a=this.shape[0],_=this.stride[0],c=this.offset,T=0,x=Math.ceil;return"number"==typeof h&&((T=0|h)<0?(c+=_*(a-1),a=x(-a/T)):a=x(a/T),_*=T),new s(this.data,a,_,c)},d.transpose=function(h){return new s(this.data,this.shape[h=void 0===h?0:0|h],this.stride[h],this.offset)},d.pick=function(h){var a=[],_=[],c=this.offset;return"number"==typeof h&&h>=0?c=c+this.stride[0]*h|0:(a.push(this.shape[0]),_.push(this.stride[0])),(0,f[a.length+1])(this.data,a,_,c)},function(h,a,_,c){return new s(h,a[0],_[0],c)}},2:function(i,f,u){function s(h,a,_,c,T,x){this.data=h,this.shape=[a,_],this.stride=[c,T],this.offset=0|x}var d=s.prototype;return d.dtype=i,d.dimension=2,Object.defineProperty(d,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(d,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),d.set=function(h,a,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*a,_):this.data[this.offset+this.stride[0]*h+this.stride[1]*a]=_},d.get=function(h,a){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*a):this.data[this.offset+this.stride[0]*h+this.stride[1]*a]},d.index=function(h,a){return this.offset+this.stride[0]*h+this.stride[1]*a},d.hi=function(h,a){return new s(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof a||a<0?this.shape[1]:0|a,this.stride[0],this.stride[1],this.offset)},d.lo=function(h,a){var _=this.offset,c=0,T=this.shape[0],x=this.shape[1],w=this.stride[0],M=this.stride[1];return"number"==typeof h&&h>=0&&(_+=w*(c=0|h),T-=c),"number"==typeof a&&a>=0&&(_+=M*(c=0|a),x-=c),new s(this.data,T,x,w,M,_)},d.step=function(h,a){var _=this.shape[0],c=this.shape[1],T=this.stride[0],x=this.stride[1],w=this.offset,M=0,D=Math.ceil;return"number"==typeof h&&((M=0|h)<0?(w+=T*(_-1),_=D(-_/M)):_=D(_/M),T*=M),"number"==typeof a&&((M=0|a)<0?(w+=x*(c-1),c=D(-c/M)):c=D(c/M),x*=M),new s(this.data,_,c,T,x,w)},d.transpose=function(h,a){var _=this.shape,c=this.stride;return new s(this.data,_[h=void 0===h?0:0|h],_[a=void 0===a?1:0|a],c[h],c[a],this.offset)},d.pick=function(h,a){var _=[],c=[],T=this.offset;return"number"==typeof h&&h>=0?T=T+this.stride[0]*h|0:(_.push(this.shape[0]),c.push(this.stride[0])),"number"==typeof a&&a>=0?T=T+this.stride[1]*a|0:(_.push(this.shape[1]),c.push(this.stride[1])),(0,f[_.length+1])(this.data,_,c,T)},function(h,a,_,c){return new s(h,a[0],a[1],_[0],_[1],c)}},3:function(i,f,u){function s(h,a,_,c,T,x,w,M){this.data=h,this.shape=[a,_,c],this.stride=[T,x,w],this.offset=0|M}var d=s.prototype;return d.dtype=i,d.dimension=3,Object.defineProperty(d,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(d,"order",{get:function(){var h=Math.abs(this.stride[0]),a=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return h>a?a>_?[2,1,0]:h>_?[1,2,0]:[1,0,2]:h>_?[2,0,1]:_>a?[0,1,2]:[0,2,1]}}),d.set=function(h,a,_,c){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_,c):this.data[this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_]=c},d.get=function(h,a,_){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_):this.data[this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_]},d.index=function(h,a,_){return this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_},d.hi=function(h,a,_){return new s(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof a||a<0?this.shape[1]:0|a,"number"!=typeof _||_<0?this.shape[2]:0|_,this.stride[0],this.stride[1],this.stride[2],this.offset)},d.lo=function(h,a,_){var c=this.offset,T=0,x=this.shape[0],w=this.shape[1],M=this.shape[2],D=this.stride[0],C=this.stride[1],P=this.stride[2];return"number"==typeof h&&h>=0&&(c+=D*(T=0|h),x-=T),"number"==typeof a&&a>=0&&(c+=C*(T=0|a),w-=T),"number"==typeof _&&_>=0&&(c+=P*(T=0|_),M-=T),new s(this.data,x,w,M,D,C,P,c)},d.step=function(h,a,_){var c=this.shape[0],T=this.shape[1],x=this.shape[2],w=this.stride[0],M=this.stride[1],D=this.stride[2],C=this.offset,P=0,L=Math.ceil;return"number"==typeof h&&((P=0|h)<0?(C+=w*(c-1),c=L(-c/P)):c=L(c/P),w*=P),"number"==typeof a&&((P=0|a)<0?(C+=M*(T-1),T=L(-T/P)):T=L(T/P),M*=P),"number"==typeof _&&((P=0|_)<0?(C+=D*(x-1),x=L(-x/P)):x=L(x/P),D*=P),new s(this.data,c,T,x,w,M,D,C)},d.transpose=function(h,a,_){var c=this.shape,T=this.stride;return new s(this.data,c[h=void 0===h?0:0|h],c[a=void 0===a?1:0|a],c[_=void 0===_?2:0|_],T[h],T[a],T[_],this.offset)},d.pick=function(h,a,_){var c=[],T=[],x=this.offset;return"number"==typeof h&&h>=0?x=x+this.stride[0]*h|0:(c.push(this.shape[0]),T.push(this.stride[0])),"number"==typeof a&&a>=0?x=x+this.stride[1]*a|0:(c.push(this.shape[1]),T.push(this.stride[1])),"number"==typeof _&&_>=0?x=x+this.stride[2]*_|0:(c.push(this.shape[2]),T.push(this.stride[2])),(0,f[c.length+1])(this.data,c,T,x)},function(h,a,_,c){return new s(h,a[0],a[1],a[2],_[0],_[1],_[2],c)}},4:function(i,f,u){function s(h,a,_,c,T,x,w,M,D,C){this.data=h,this.shape=[a,_,c,T],this.stride=[x,w,M,D],this.offset=0|C}var d=s.prototype;return d.dtype=i,d.dimension=4,Object.defineProperty(d,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(d,"order",{get:u}),d.set=function(h,a,_,c,T){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c,T):this.data[this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c]=T},d.get=function(h,a,_,c){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c):this.data[this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c]},d.index=function(h,a,_,c){return this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c},d.hi=function(h,a,_,c){return new s(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof a||a<0?this.shape[1]:0|a,"number"!=typeof _||_<0?this.shape[2]:0|_,"number"!=typeof c||c<0?this.shape[3]:0|c,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},d.lo=function(h,a,_,c){var T=this.offset,x=0,w=this.shape[0],M=this.shape[1],D=this.shape[2],C=this.shape[3],P=this.stride[0],L=this.stride[1],S=this.stride[2],E=this.stride[3];return"number"==typeof h&&h>=0&&(T+=P*(x=0|h),w-=x),"number"==typeof a&&a>=0&&(T+=L*(x=0|a),M-=x),"number"==typeof _&&_>=0&&(T+=S*(x=0|_),D-=x),"number"==typeof c&&c>=0&&(T+=E*(x=0|c),C-=x),new s(this.data,w,M,D,C,P,L,S,E,T)},d.step=function(h,a,_,c){var T=this.shape[0],x=this.shape[1],w=this.shape[2],M=this.shape[3],D=this.stride[0],C=this.stride[1],P=this.stride[2],L=this.stride[3],S=this.offset,E=0,N=Math.ceil;return"number"==typeof h&&((E=0|h)<0?(S+=D*(T-1),T=N(-T/E)):T=N(T/E),D*=E),"number"==typeof a&&((E=0|a)<0?(S+=C*(x-1),x=N(-x/E)):x=N(x/E),C*=E),"number"==typeof _&&((E=0|_)<0?(S+=P*(w-1),w=N(-w/E)):w=N(w/E),P*=E),"number"==typeof c&&((E=0|c)<0?(S+=L*(M-1),M=N(-M/E)):M=N(M/E),L*=E),new s(this.data,T,x,w,M,D,C,P,L,S)},d.transpose=function(h,a,_,c){var T=this.shape,x=this.stride;return new s(this.data,T[h=void 0===h?0:0|h],T[a=void 0===a?1:0|a],T[_=void 0===_?2:0|_],T[c=void 0===c?3:0|c],x[h],x[a],x[_],x[c],this.offset)},d.pick=function(h,a,_,c){var T=[],x=[],w=this.offset;return"number"==typeof h&&h>=0?w=w+this.stride[0]*h|0:(T.push(this.shape[0]),x.push(this.stride[0])),"number"==typeof a&&a>=0?w=w+this.stride[1]*a|0:(T.push(this.shape[1]),x.push(this.stride[1])),"number"==typeof _&&_>=0?w=w+this.stride[2]*_|0:(T.push(this.shape[2]),x.push(this.stride[2])),"number"==typeof c&&c>=0?w=w+this.stride[3]*c|0:(T.push(this.shape[3]),x.push(this.stride[3])),(0,f[T.length+1])(this.data,T,x,w)},function(h,a,_,c){return new s(h,a[0],a[1],a[2],a[3],_[0],_[1],_[2],_[3],c)}},5:function(i,f,u){function s(h,a,_,c,T,x,w,M,D,C,P,L){this.data=h,this.shape=[a,_,c,T,x],this.stride=[w,M,D,C,P],this.offset=0|L}var d=s.prototype;return d.dtype=i,d.dimension=5,Object.defineProperty(d,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(d,"order",{get:u}),d.set=function(h,a,_,c,T,x){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c+this.stride[4]*T,x):this.data[this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c+this.stride[4]*T]=x},d.get=function(h,a,_,c,T){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c+this.stride[4]*T):this.data[this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c+this.stride[4]*T]},d.index=function(h,a,_,c,T){return this.offset+this.stride[0]*h+this.stride[1]*a+this.stride[2]*_+this.stride[3]*c+this.stride[4]*T},d.hi=function(h,a,_,c,T){return new s(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof a||a<0?this.shape[1]:0|a,"number"!=typeof _||_<0?this.shape[2]:0|_,"number"!=typeof c||c<0?this.shape[3]:0|c,"number"!=typeof T||T<0?this.shape[4]:0|T,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},d.lo=function(h,a,_,c,T){var x=this.offset,w=0,M=this.shape[0],D=this.shape[1],C=this.shape[2],P=this.shape[3],L=this.shape[4],S=this.stride[0],E=this.stride[1],N=this.stride[2],z=this.stride[3],q=this.stride[4];return"number"==typeof h&&h>=0&&(x+=S*(w=0|h),M-=w),"number"==typeof a&&a>=0&&(x+=E*(w=0|a),D-=w),"number"==typeof _&&_>=0&&(x+=N*(w=0|_),C-=w),"number"==typeof c&&c>=0&&(x+=z*(w=0|c),P-=w),"number"==typeof T&&T>=0&&(x+=q*(w=0|T),L-=w),new s(this.data,M,D,C,P,L,S,E,N,z,q,x)},d.step=function(h,a,_,c,T){var x=this.shape[0],w=this.shape[1],M=this.shape[2],D=this.shape[3],C=this.shape[4],P=this.stride[0],L=this.stride[1],S=this.stride[2],E=this.stride[3],N=this.stride[4],z=this.offset,q=0,G=Math.ceil;return"number"==typeof h&&((q=0|h)<0?(z+=P*(x-1),x=G(-x/q)):x=G(x/q),P*=q),"number"==typeof a&&((q=0|a)<0?(z+=L*(w-1),w=G(-w/q)):w=G(w/q),L*=q),"number"==typeof _&&((q=0|_)<0?(z+=S*(M-1),M=G(-M/q)):M=G(M/q),S*=q),"number"==typeof c&&((q=0|c)<0?(z+=E*(D-1),D=G(-D/q)):D=G(D/q),E*=q),"number"==typeof T&&((q=0|T)<0?(z+=N*(C-1),C=G(-C/q)):C=G(C/q),N*=q),new s(this.data,x,w,M,D,C,P,L,S,E,N,z)},d.transpose=function(h,a,_,c,T){var x=this.shape,w=this.stride;return new s(this.data,x[h=void 0===h?0:0|h],x[a=void 0===a?1:0|a],x[_=void 0===_?2:0|_],x[c=void 0===c?3:0|c],x[T=void 0===T?4:0|T],w[h],w[a],w[_],w[c],w[T],this.offset)},d.pick=function(h,a,_,c,T){var x=[],w=[],M=this.offset;return"number"==typeof h&&h>=0?M=M+this.stride[0]*h|0:(x.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof a&&a>=0?M=M+this.stride[1]*a|0:(x.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof _&&_>=0?M=M+this.stride[2]*_|0:(x.push(this.shape[2]),w.push(this.stride[2])),"number"==typeof c&&c>=0?M=M+this.stride[3]*c|0:(x.push(this.shape[3]),w.push(this.stride[3])),"number"==typeof T&&T>=0?M=M+this.stride[4]*T|0:(x.push(this.shape[4]),w.push(this.stride[4])),(0,f[x.length+1])(this.data,x,w,M)},function(h,a,_,c){return new s(h,a[0],a[1],a[2],a[3],a[4],_[0],_[1],_[2],_[3],_[4],c)}}};function m(i,f){var u=-1===f?"T":String(f),s=n[u];return-1===f?s(i):0===f?s(i,l[i][0]):s(i,l[i],o)}var l={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};b.exports=function(i,f,u,s){if(void 0===i)return(0,l.array[0])([]);"number"==typeof i&&(i=[i]),void 0===f&&(f=[i.length]);var d=f.length;if(void 0===u){u=new Array(d);for(var h=d-1,a=1;h>=0;--h)u[h]=a,a*=f[h]}if(void 0===s)for(s=0,h=0;h<d;++h)u[h]<0&&(s-=(f[h]-1)*u[h]);for(var _=function(T){if(e(T))return"buffer";if(r)switch(Object.prototype.toString.call(T)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(T)?"array":"generic"}(i),c=l[_];c.length<=d+1;)c.push(m(_,c.length-1));return(0,c[d+1])(i,f,u,s)}},{"is-buffer":237}],260:[function(g,b,y){"use strict";var e=g("double-bits"),r=Math.pow(2,-1074);b.exports=function(t,o){if(isNaN(t)||isNaN(o))return NaN;if(t===o)return t;if(0===t)return o<0?-r:r;var n=e.hi(t),m=e.lo(t);return o>t==t>0?m===-1>>>0?(n+=1,m=0):m+=1:0===m?(m=-1>>>0,n-=1):m-=1,e.pack(m,n)}},{"double-bits":64}],261:[function(g,b,y){y.vertexNormals=function(e,r,t){for(var o=r.length,n=new Array(o),m=void 0===t?1e-6:t,l=0;l<o;++l)n[l]=[0,0,0];for(l=0;l<e.length;++l)for(var i=e[l],u=i[i.length-1],s=i[0],d=0;d<i.length;++d){for(var h=r[u],a=r[u=s],_=r[s=i[(d+1)%i.length]],c=new Array(3),T=0,x=new Array(3),w=0,M=0;M<3;++M)c[M]=h[M]-a[M],T+=c[M]*c[M],x[M]=_[M]-a[M],w+=x[M]*x[M];if(T*w>m){var D=n[u],C=1/Math.sqrt(T*w);for(M=0;M<3;++M){var P=(M+1)%3,L=(M+2)%3;D[M]+=C*(x[P]*c[L]-x[L]*c[P])}}}for(l=0;l<o;++l){D=n[l];var S=0;for(M=0;M<3;++M)S+=D[M]*D[M];if(S>m)for(C=1/Math.sqrt(S),M=0;M<3;++M)D[M]*=C;else for(M=0;M<3;++M)D[M]=0}return n},y.faceNormals=function(e,r,t){for(var o=e.length,n=new Array(o),m=void 0===t?1e-6:t,l=0;l<o;++l){for(var i=e[l],f=new Array(3),u=0;u<3;++u)f[u]=r[i[u]];var s=new Array(3),d=new Array(3);for(u=0;u<3;++u)s[u]=f[1][u]-f[0][u],d[u]=f[2][u]-f[0][u];var h=new Array(3),a=0;for(u=0;u<3;++u){var _=(u+1)%3,c=(u+2)%3;h[u]=s[_]*d[c]-s[c]*d[_],a+=h[u]*h[u]}for(a=a>m?1/Math.sqrt(a):0,u=0;u<3;++u)h[u]*=a;n[l]=h}return n}},{}],262:[function(g,b,y){"use strict";b.exports=function(e,r,t,o,n,m,l,i,f,u){var s=r+m+u;if(d>0){var d=Math.sqrt(s+1);e[0]=.5*(l-f)/d,e[1]=.5*(i-o)/d,e[2]=.5*(t-m)/d,e[3]=.5*d}else{var h=Math.max(r,m,u);d=Math.sqrt(2*h-s+1),r>=h?(e[0]=.5*d,e[1]=.5*(n+t)/d,e[2]=.5*(i+o)/d,e[3]=.5*(l-f)/d):m>=h?(e[0]=.5*(t+n)/d,e[1]=.5*d,e[2]=.5*(f+l)/d,e[3]=.5*(i-o)/d):(e[0]=.5*(o+i)/d,e[1]=.5*(l+f)/d,e[2]=.5*d,e[3]=.5*(t-n)/d)}return e}},{}],263:[function(g,b,y){"use strict";b.exports=function(s){var d=(s=s||{}).center||[0,0,0],h=s.rotation||[0,0,0,1],a=s.radius||1;d=[].slice.call(d,0,3),i(h=[].slice.call(h,0,4),h);var _=new f(h,d,Math.log(a));return _.setDistanceLimits(s.zoomMin,s.zoomMax),("eye"in s||"up"in s)&&_.lookAt(0,s.eye,s.center,s.up),_};var e=g("filtered-vector"),r=g("gl-mat4/lookAt"),t=g("gl-mat4/fromQuat"),o=g("gl-mat4/invert"),n=g("./lib/quatFromFrame");function m(s,d,h){return Math.sqrt(Math.pow(s,2)+Math.pow(d,2)+Math.pow(h,2))}function l(s,d,h,a){return Math.sqrt(Math.pow(s,2)+Math.pow(d,2)+Math.pow(h,2)+Math.pow(a,2))}function i(s,d){var h=d[0],a=d[1],_=d[2],c=d[3],T=l(h,a,_,c);T>1e-6?(s[0]=h/T,s[1]=a/T,s[2]=_/T,s[3]=c/T):(s[0]=s[1]=s[2]=0,s[3]=1)}function f(s,d,h){this.radius=e([h]),this.center=e(d),this.rotation=e(s),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var u=f.prototype;u.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},u.recalcMatrix=function(s){this.radius.curve(s),this.center.curve(s),this.rotation.curve(s);var d=this.computedRotation;i(d,d);var h=this.computedMatrix;t(h,d);var a=this.computedCenter,_=this.computedEye,c=this.computedUp,T=Math.exp(this.computedRadius[0]);_[0]=a[0]+T*h[2],_[1]=a[1]+T*h[6],_[2]=a[2]+T*h[10],c[0]=h[1],c[1]=h[5],c[2]=h[9];for(var x=0;x<3;++x){for(var w=0,M=0;M<3;++M)w+=h[x+4*M]*_[M];h[12+x]=-w}},u.getMatrix=function(s,d){this.recalcMatrix(s);var h=this.computedMatrix;if(d){for(var a=0;a<16;++a)d[a]=h[a];return d}return h},u.idle=function(s){this.center.idle(s),this.radius.idle(s),this.rotation.idle(s)},u.flush=function(s){this.center.flush(s),this.radius.flush(s),this.rotation.flush(s)},u.pan=function(s,d,h,a){d=d||0,h=h||0,a=a||0,this.recalcMatrix(s);var _=this.computedMatrix,c=_[1],T=_[5],x=_[9],w=m(c,T,x),M=_[0],D=_[4],C=_[8],P=M*(c/=w)+D*(T/=w)+C*(x/=w),L=m(M-=c*P,D-=T*P,C-=x*P),S=_[2],E=_[6],N=_[10],z=S*c+E*T+N*x,q=S*(M/=L)+E*(D/=L)+N*(C/=L),G=m(S-=z*c+q*M,E-=z*T+q*D,N-=z*x+q*C);S/=G,E/=G,N/=G,this.center.move(s,M*d+c*h,D*d+T*h,C*d+x*h);var J=Math.exp(this.computedRadius[0]);J=Math.max(1e-4,J+a),this.radius.set(s,Math.log(J))},u.rotate=function(s,d,h,a){this.recalcMatrix(s);var _=this.computedMatrix,C=_[2],P=_[6],L=_[10],S=(d=d||0)*_[0]+(h=h||0)*_[1],E=d*_[4]+h*_[5],N=d*_[8]+h*_[9],z=-(P*N-L*E),q=-(L*S-C*N),G=-(C*E-P*S),K=Math.sqrt(Math.max(0,1-Math.pow(z,2)-Math.pow(q,2)-Math.pow(G,2))),ne=l(z,q,G,K);ne>1e-6?(z/=ne,q/=ne,G/=ne,K/=ne):(z=q=G=0,K=1);var X=this.computedRotation,J=X[0],se=X[1],V=X[2],j=X[3],H=J*K+j*z+se*G-V*q,oe=se*K+j*q+V*z-J*G,U=V*K+j*G+J*q-se*z,te=j*K-J*z-se*q-V*G;if(a){z=C,q=P,G=L;var ee=Math.sin(a)/m(z,q,G);z*=ee,q*=ee,G*=ee,te=te*(K=Math.cos(d))-(H=H*K+te*z+oe*G-U*q)*z-(oe=oe*K+te*q+U*z-H*G)*q-(U=U*K+te*G+H*q-oe*z)*G}var le=l(H,oe,U,te);le>1e-6?(H/=le,oe/=le,U/=le,te/=le):(H=oe=U=0,te=1),this.rotation.set(s,H,oe,U,te)},u.lookAt=function(s,d,h,a){this.recalcMatrix(s);var _=this.computedMatrix;r(_,d=d||this.computedEye,h=h||this.computedCenter,a=a||this.computedUp);var c=this.computedRotation;n(c,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),i(c,c),this.rotation.set(s,c[0],c[1],c[2],c[3]);for(var T=0,x=0;x<3;++x)T+=Math.pow(h[x]-d[x],2);this.radius.set(s,.5*Math.log(Math.max(T,1e-6))),this.center.set(s,h[0],h[1],h[2])},u.translate=function(s,d,h,a){this.center.move(s,d||0,h||0,a||0)},u.setMatrix=function(s,d){var h=this.computedRotation;n(h,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]),i(h,h),this.rotation.set(s,h[0],h[1],h[2],h[3]);var a=this.computedMatrix;o(a,d);var _=a[15];if(Math.abs(_)>1e-6){var c=a[12]/_,T=a[13]/_,x=a[14]/_;this.recalcMatrix(s);var w=Math.exp(this.computedRadius[0]);this.center.set(s,c-a[2]*w,T-a[6]*w,x-a[10]*w),this.radius.idle(s)}else this.center.idle(s),this.radius.idle(s)},u.setDistance=function(s,d){d>0&&this.radius.set(s,Math.log(d))},u.setDistanceLimits=function(s,d){s=s>0?Math.log(s):-1/0,d=d>0?Math.log(d):1/0,d=Math.max(d,s),this.radius.bounds[0][0]=s,this.radius.bounds[1][0]=d},u.getDistanceLimits=function(s){var d=this.radius.bounds;return s?(s[0]=Math.exp(d[0][0]),s[1]=Math.exp(d[1][0]),s):[Math.exp(d[0][0]),Math.exp(d[1][0])]},u.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},u.fromJSON=function(s){var d=this.lastT(),h=s.center;h&&this.center.set(d,h[0],h[1],h[2]);var a=s.rotation;a&&this.rotation.set(d,a[0],a[1],a[2],a[3]);var _=s.distance;_&&_>0&&this.radius.set(d,Math.log(_)),this.setDistanceLimits(s.zoomMin,s.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(g,b,y){"use strict";var e=g("repeat-string");b.exports=function(r,t,o){return e(o=void 0!==o?o+"":" ",t)+r}},{"repeat-string":277}],265:[function(g,b,y){b.exports=function(e,r){r||(r=[0,""]),e=String(e);var t=parseFloat(e,10);return r[0]=t,r[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},{}],266:[function(g,b,y){"use strict";b.exports=function(r,t){for(var o=0|t.length,n=r.length,m=[new Array(o),new Array(o)],l=0;l<o;++l)m[0][l]=[],m[1][l]=[];for(l=0;l<n;++l){var i=r[l];m[0][i[0]].push(i),m[1][i[1]].push(i)}var x,f=[];for(l=0;l<o;++l)m[0][l].length+m[1][l].length===0&&f.push([l]);function u(T,x){var w=m[x][T[x]];w.splice(w.indexOf(T),1)}function s(T,x,w){for(var M,D,C,P=0;P<2;++P)if(m[P][x].length>0){M=m[P][x][0],C=P;break}D=M[1^C];for(var L=0;L<2;++L)for(var S=m[L][x],E=0;E<S.length;++E){var N=S[E],z=N[1^L];e(t[T],t[x],t[D],t[z])>0&&(M=N,D=z,C=L)}return w||M&&u(M,C),D}function d(T,x){var w=m[x][T][0],M=[T];u(w,x);for(var D=w[1^x];;){for(;D!==T;)M.push(D),D=s(M[M.length-2],D,!1);if(m[0][T].length+m[1][T].length===0)break;var C=M[M.length-1],P=T,L=M[1],S=s(C,P,!0);if(e(t[C],t[P],t[L],t[S])<0)break;M.push(T),D=s(C,P)}return M}for(l=0;l<o;++l)for(var a=0;a<2;++a){for(var _=[];m[a][l].length>0;){var c=d(l,a);(x=c)[1]===x[x.length-1]?_.push.apply(_,c):(_.length>0&&f.push(_),_=c)}_.length>0&&f.push(_)}return f};var e=g("compare-angle")},{"compare-angle":54}],267:[function(g,b,y){"use strict";b.exports=function(r,t){for(var o=e(r,t.length),n=new Array(t.length),m=new Array(t.length),l=[],i=0;i<t.length;++i){var f=o[i].length;m[i]=f,n[i]=!0,f<=1&&l.push(i)}for(;l.length>0;){var u=l.pop();n[u]=!1;var s=o[u];for(i=0;i<s.length;++i){var d=s[i];0==--m[d]&&l.push(d)}}var h=new Array(t.length),a=[];for(i=0;i<t.length;++i)n[i]?(h[i]=u=a.length,a.push(t[i])):h[i]=-1;var _=[];for(i=0;i<r.length;++i){var c=r[i];n[c[0]]&&n[c[1]]&&_.push([h[c[0]],h[c[1]]])}return[_,a]};var e=g("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(g,b,y){"use strict";b.exports=function(f,u){for(var s=l(f,u),d=(u=s[1]).length,h=e(f=s[0],u.length),a=0;a<d;++a)if(h[a].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var _=r(f,u),c=(_=_.filter(function(de){for(var be=de.length,he=[0],xe=0;xe<be;++xe){var De=u[de[xe]],Se=u[de[(xe+1)%be]],ke=o(-De[0],De[1]),Fe=o(-De[0],Se[1]),ve=o(Se[0],De[1]),Te=o(Se[0],Se[1]);he=n(he,n(n(ke,Fe),n(ve,Te)))}return he[he.length-1]>0})).length,T=new Array(c),x=new Array(c);for(a=0;a<c;++a){T[a]=a;var w=new Array(c),M=_[a].map(function(de){return u[de]}),D=t([M]),C=0;e:for(var P=0;P<c;++P)if(w[P]=0,a!==P){for(var L=(ce=_[P]).length,S=0;S<L;++S){var E=D(u[ce[S]]);if(0!==E){E<0&&(w[P]=1,C+=1);continue e}}w[P]=1,C+=1}x[a]=[C,a,w]}for(x.sort(function(de,be){return be[0]-de[0]}),a=0;a<c;++a){var N=(w=x[a])[1],z=w[2];for(P=0;P<c;++P)z[P]&&(T[P]=N)}var q=function(de){for(var be=new Array(de),he=0;he<de;++he)be[he]=[];return be}(c);for(a=0;a<c;++a)q[a].push(T[a]),q[T[a]].push(a);var G={},K=i(d,!1);for(a=0;a<c;++a)for(L=(ce=_[a]).length,P=0;P<L;++P){var ne=ce[P],X=ce[(P+1)%L],J=Math.min(ne,X)+":"+Math.max(ne,X);if(J in G){var se=G[J];q[se].push(a),q[a].push(se),K[ne]=K[X]=!0}else G[J]=a}function V(de){for(var be=de.length,he=0;he<be;++he)if(!K[de[he]])return!1;return!0}var j=[],H=i(c,-1);for(a=0;a<c;++a)T[a]!==a||V(_[a])?H[a]=-1:(j.push(a),H[a]=0);for(s=[];j.length>0;){var oe=j.pop(),U=q[oe];m(U,function(de,be){return de-be});var te,ee=U.length,le=H[oe];if(0===le){var ce=_[oe];te=[ce]}for(a=0;a<ee;++a){var pe=U[a];H[pe]>=0||(H[pe]=1^le,j.push(pe),0===le&&(V(ce=_[pe])||(ce.reverse(),te.push(ce))))}0===le&&s.push(te)}return s};var e=g("edges-to-adjacency-list"),r=g("planar-dual"),t=g("point-in-big-polygon"),o=g("two-product"),n=g("robust-sum"),m=g("uniq"),l=g("./lib/trim-leaves");function i(f,u){for(var s=new Array(f),d=0;d<f;++d)s[d]=u;return s}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(g,b,y){b.exports=function(i){for(var f=i.length,u=[],s=[],d=0;d<f;++d)for(var h=i[d],a=h.length,_=a-1,c=0;c<a;_=c++){var T=h[_],x=h[c];T[0]===x[0]?s.push([T,x]):u.push([T,x])}if(0===u.length)return 0===s.length?l:(w=m(s),function(C){return w(C[0],C[1])?0:1});var w,C,P,M=r(u),D=(C=M.slabs,P=M.coordinates,function(L){var S=o.le(P,L[0]);if(S<0)return 1;var E=C[S];if(!E){if(!(S>0&&P[S]===L[0]))return 1;E=C[S-1]}for(var N=1;E;){var z=E.key,q=e(L,z[0],z[1]);if(z[0][0]<z[1][0])if(q<0)E=E.left;else{if(!(q>0))return 0;N=-1,E=E.right}else if(q>0)E=E.left;else{if(!(q<0))return 0;N=1,E=E.right}}return N});return 0===s.length?D:function(C,P){return function(L){return C(L[0],L[1])?0:P(L)}}(m(s),D)};var e=g("robust-orientation")[3],r=g("slab-decomposition"),t=g("interval-tree-1d"),o=g("binary-search-bounds");function n(){return!0}function m(i){for(var f={},u=0;u<i.length;++u){var s=i[u],d=s[0][0],h=s[0][1],a=s[1][1],_=[Math.min(h,a),Math.max(h,a)];d in f?f[d].push(_):f[d]=[_]}var w,c={},T=Object.keys(f);for(u=0;u<T.length;++u)c[T[u]]=t(f[T[u]]);return w=c,function(M,D){var C=w[M];return!!C&&!!C.queryPoint(D,n)}}function l(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(g,b,y){"use strict";var e=new Float64Array(4),r=new Float64Array(4),t=new Float64Array(4);b.exports=function(o,n,m,l,i){e.length<l.length&&(e=new Float64Array(l.length),r=new Float64Array(l.length),t=new Float64Array(l.length));for(var f=0;f<l.length;++f)e[f]=o[f]-l[f],r[f]=n[f]-o[f],t[f]=m[f]-o[f];var u=0,s=0,d=0,h=0,a=0,_=0;for(f=0;f<l.length;++f){var c=r[f],T=t[f],x=e[f];u+=c*c,s+=c*T,d+=T*T,h+=x*c,a+=x*T,_+=x*x}var w,M,D,C,P,L=Math.abs(u*d-s*s),S=s*a-d*h,E=s*h-u*a;if(S+E<=L)if(S<0)E<0&&h<0?(E=0,-h>=u?(S=1,w=u+2*h+_):w=h*(S=-h/u)+_):(S=0,a>=0?(E=0,w=_):-a>=d?(E=1,w=d+2*a+_):w=a*(E=-a/d)+_);else if(E<0)E=0,h>=0?(S=0,w=_):-h>=u?(S=1,w=u+2*h+_):w=h*(S=-h/u)+_;else{var N=1/L;w=(S*=N)*(u*S+s*(E*=N)+2*h)+E*(s*S+d*E+2*a)+_}else S<0?(D=d+a)>(M=s+h)?(C=D-M)>=(P=u-2*s+d)?(S=1,E=0,w=u+2*h+_):w=(S=C/P)*(u*S+s*(E=1-S)+2*h)+E*(s*S+d*E+2*a)+_:(S=0,D<=0?(E=1,w=d+2*a+_):a>=0?(E=0,w=_):w=a*(E=-a/d)+_):E<0?(D=u+h)>(M=s+a)?(C=D-M)>=(P=u-2*s+d)?(E=1,S=0,w=d+2*a+_):w=(S=1-(E=C/P))*(u*S+s*E+2*h)+E*(s*S+d*E+2*a)+_:(E=0,D<=0?(S=1,w=u+2*h+_):h>=0?(S=0,w=_):w=h*(S=-h/u)+_):(C=d+a-s-h)<=0?(S=0,E=1,w=d+2*a+_):C>=(P=u-2*s+d)?(S=1,E=0,w=u+2*h+_):w=(S=C/P)*(u*S+s*(E=1-S)+2*h)+E*(s*S+d*E+2*a)+_;var z=1-S-E;for(f=0;f<l.length;++f)i[f]=z*o[f]+S*n[f]+E*m[f];return w<0?0:w}},{}],271:[function(g,b,y){b.exports=g("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(g,b,y){"use strict";var e=g("big-rat/add");b.exports=function(r,t){for(var o=r.length,n=new Array(o),m=0;m<o;++m)n[m]=e(r[m],t[m]);return n}},{"big-rat/add":15}],273:[function(g,b,y){"use strict";b.exports=function(r){for(var t=new Array(r.length),o=0;o<r.length;++o)t[o]=e(r[o]);return t};var e=g("big-rat")},{"big-rat":18}],274:[function(g,b,y){"use strict";var e=g("big-rat"),r=g("big-rat/mul");b.exports=function(t,o){for(var n=e(o),m=t.length,l=new Array(m),i=0;i<m;++i)l[i]=r(t[i],n);return l}},{"big-rat":18,"big-rat/mul":27}],275:[function(g,b,y){"use strict";var e=g("big-rat/sub");b.exports=function(r,t){for(var o=r.length,n=new Array(o),m=0;m<o;++m)n[m]=e(r[m],t[m]);return n}},{"big-rat/sub":29}],276:[function(g,b,y){"use strict";var e=g("compare-cell"),r=g("compare-oriented-cell"),t=g("cell-orientation");b.exports=function(o){o.sort(r);for(var n=o.length,m=0,l=0;l<n;++l){var i=o[l],f=t(i);if(0!==f){if(m>0){var u=o[m-1];if(0===e(i,u)&&t(u)!==f){m-=1;continue}}o[m++]=i}}return o.length=m,o}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(g,b,y){"use strict";var e,r="";b.exports=function(t,o){if("string"!=typeof t)throw new TypeError("expected a string");if(1===o)return t;if(2===o)return t+t;var n=t.length*o;if(e!==t||void 0===e)e=t,r="";else if(r.length>=n)return r.substr(0,n);for(;n>r.length&&o>1;)1&o&&(r+=t),o>>=1,t+=t;return r=(r+=t).substr(0,n)}},{}],278:[function(g,b,y){(function(e){(function(){b.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==p?p:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(g,b,y){"use strict";b.exports=function(e){for(var r=e.length,t=e[e.length-1],o=r,n=r-2;n>=0;--n){var m=t,l=e[n];(f=l-((t=m+l)-m))&&(e[--o]=t,t=f)}var i=0;for(n=o;n<r;++n){var f;(f=(l=t)-((t=(m=e[n])+l)-m))&&(e[i++]=f)}return e[i++]=t,e.length=i,e}},{}],280:[function(g,b,y){"use strict";var e=g("two-product"),r=g("robust-sum"),t=g("robust-scale"),o=g("robust-compress");function n(d,h,a,_){return function(c){return _(d(a(c[0][0],c[1][1]),a(-c[0][1],c[1][0])))}}function m(d,h,a,_){return function(c){return _(d(h(d(a(c[1][1],c[2][2]),a(-c[1][2],c[2][1])),c[0][0]),d(h(d(a(c[1][0],c[2][2]),a(-c[1][2],c[2][0])),-c[0][1]),h(d(a(c[1][0],c[2][1]),a(-c[1][1],c[2][0])),c[0][2]))))}}function l(d,h,a,_){return function(c){return _(d(d(h(d(h(d(a(c[2][2],c[3][3]),a(-c[2][3],c[3][2])),c[1][1]),d(h(d(a(c[2][1],c[3][3]),a(-c[2][3],c[3][1])),-c[1][2]),h(d(a(c[2][1],c[3][2]),a(-c[2][2],c[3][1])),c[1][3]))),c[0][0]),h(d(h(d(a(c[2][2],c[3][3]),a(-c[2][3],c[3][2])),c[1][0]),d(h(d(a(c[2][0],c[3][3]),a(-c[2][3],c[3][0])),-c[1][2]),h(d(a(c[2][0],c[3][2]),a(-c[2][2],c[3][0])),c[1][3]))),-c[0][1])),d(h(d(h(d(a(c[2][1],c[3][3]),a(-c[2][3],c[3][1])),c[1][0]),d(h(d(a(c[2][0],c[3][3]),a(-c[2][3],c[3][0])),-c[1][1]),h(d(a(c[2][0],c[3][1]),a(-c[2][1],c[3][0])),c[1][3]))),c[0][2]),h(d(h(d(a(c[2][1],c[3][2]),a(-c[2][2],c[3][1])),c[1][0]),d(h(d(a(c[2][0],c[3][2]),a(-c[2][2],c[3][0])),-c[1][1]),h(d(a(c[2][0],c[3][1]),a(-c[2][1],c[3][0])),c[1][2]))),-c[0][3]))))}}function i(d,h,a,_){return function(c){return _(d(d(h(d(d(h(d(h(d(a(c[3][3],c[4][4]),a(-c[3][4],c[4][3])),c[2][2]),d(h(d(a(c[3][2],c[4][4]),a(-c[3][4],c[4][2])),-c[2][3]),h(d(a(c[3][2],c[4][3]),a(-c[3][3],c[4][2])),c[2][4]))),c[1][1]),h(d(h(d(a(c[3][3],c[4][4]),a(-c[3][4],c[4][3])),c[2][1]),d(h(d(a(c[3][1],c[4][4]),a(-c[3][4],c[4][1])),-c[2][3]),h(d(a(c[3][1],c[4][3]),a(-c[3][3],c[4][1])),c[2][4]))),-c[1][2])),d(h(d(h(d(a(c[3][2],c[4][4]),a(-c[3][4],c[4][2])),c[2][1]),d(h(d(a(c[3][1],c[4][4]),a(-c[3][4],c[4][1])),-c[2][2]),h(d(a(c[3][1],c[4][2]),a(-c[3][2],c[4][1])),c[2][4]))),c[1][3]),h(d(h(d(a(c[3][2],c[4][3]),a(-c[3][3],c[4][2])),c[2][1]),d(h(d(a(c[3][1],c[4][3]),a(-c[3][3],c[4][1])),-c[2][2]),h(d(a(c[3][1],c[4][2]),a(-c[3][2],c[4][1])),c[2][3]))),-c[1][4]))),c[0][0]),h(d(d(h(d(h(d(a(c[3][3],c[4][4]),a(-c[3][4],c[4][3])),c[2][2]),d(h(d(a(c[3][2],c[4][4]),a(-c[3][4],c[4][2])),-c[2][3]),h(d(a(c[3][2],c[4][3]),a(-c[3][3],c[4][2])),c[2][4]))),c[1][0]),h(d(h(d(a(c[3][3],c[4][4]),a(-c[3][4],c[4][3])),c[2][0]),d(h(d(a(c[3][0],c[4][4]),a(-c[3][4],c[4][0])),-c[2][3]),h(d(a(c[3][0],c[4][3]),a(-c[3][3],c[4][0])),c[2][4]))),-c[1][2])),d(h(d(h(d(a(c[3][2],c[4][4]),a(-c[3][4],c[4][2])),c[2][0]),d(h(d(a(c[3][0],c[4][4]),a(-c[3][4],c[4][0])),-c[2][2]),h(d(a(c[3][0],c[4][2]),a(-c[3][2],c[4][0])),c[2][4]))),c[1][3]),h(d(h(d(a(c[3][2],c[4][3]),a(-c[3][3],c[4][2])),c[2][0]),d(h(d(a(c[3][0],c[4][3]),a(-c[3][3],c[4][0])),-c[2][2]),h(d(a(c[3][0],c[4][2]),a(-c[3][2],c[4][0])),c[2][3]))),-c[1][4]))),-c[0][1])),d(h(d(d(h(d(h(d(a(c[3][3],c[4][4]),a(-c[3][4],c[4][3])),c[2][1]),d(h(d(a(c[3][1],c[4][4]),a(-c[3][4],c[4][1])),-c[2][3]),h(d(a(c[3][1],c[4][3]),a(-c[3][3],c[4][1])),c[2][4]))),c[1][0]),h(d(h(d(a(c[3][3],c[4][4]),a(-c[3][4],c[4][3])),c[2][0]),d(h(d(a(c[3][0],c[4][4]),a(-c[3][4],c[4][0])),-c[2][3]),h(d(a(c[3][0],c[4][3]),a(-c[3][3],c[4][0])),c[2][4]))),-c[1][1])),d(h(d(h(d(a(c[3][1],c[4][4]),a(-c[3][4],c[4][1])),c[2][0]),d(h(d(a(c[3][0],c[4][4]),a(-c[3][4],c[4][0])),-c[2][1]),h(d(a(c[3][0],c[4][1]),a(-c[3][1],c[4][0])),c[2][4]))),c[1][3]),h(d(h(d(a(c[3][1],c[4][3]),a(-c[3][3],c[4][1])),c[2][0]),d(h(d(a(c[3][0],c[4][3]),a(-c[3][3],c[4][0])),-c[2][1]),h(d(a(c[3][0],c[4][1]),a(-c[3][1],c[4][0])),c[2][3]))),-c[1][4]))),c[0][2]),d(h(d(d(h(d(h(d(a(c[3][2],c[4][4]),a(-c[3][4],c[4][2])),c[2][1]),d(h(d(a(c[3][1],c[4][4]),a(-c[3][4],c[4][1])),-c[2][2]),h(d(a(c[3][1],c[4][2]),a(-c[3][2],c[4][1])),c[2][4]))),c[1][0]),h(d(h(d(a(c[3][2],c[4][4]),a(-c[3][4],c[4][2])),c[2][0]),d(h(d(a(c[3][0],c[4][4]),a(-c[3][4],c[4][0])),-c[2][2]),h(d(a(c[3][0],c[4][2]),a(-c[3][2],c[4][0])),c[2][4]))),-c[1][1])),d(h(d(h(d(a(c[3][1],c[4][4]),a(-c[3][4],c[4][1])),c[2][0]),d(h(d(a(c[3][0],c[4][4]),a(-c[3][4],c[4][0])),-c[2][1]),h(d(a(c[3][0],c[4][1]),a(-c[3][1],c[4][0])),c[2][4]))),c[1][2]),h(d(h(d(a(c[3][1],c[4][2]),a(-c[3][2],c[4][1])),c[2][0]),d(h(d(a(c[3][0],c[4][2]),a(-c[3][2],c[4][0])),-c[2][1]),h(d(a(c[3][0],c[4][1]),a(-c[3][1],c[4][0])),c[2][2]))),-c[1][4]))),-c[0][3]),h(d(d(h(d(h(d(a(c[3][2],c[4][3]),a(-c[3][3],c[4][2])),c[2][1]),d(h(d(a(c[3][1],c[4][3]),a(-c[3][3],c[4][1])),-c[2][2]),h(d(a(c[3][1],c[4][2]),a(-c[3][2],c[4][1])),c[2][3]))),c[1][0]),h(d(h(d(a(c[3][2],c[4][3]),a(-c[3][3],c[4][2])),c[2][0]),d(h(d(a(c[3][0],c[4][3]),a(-c[3][3],c[4][0])),-c[2][2]),h(d(a(c[3][0],c[4][2]),a(-c[3][2],c[4][0])),c[2][3]))),-c[1][1])),d(h(d(h(d(a(c[3][1],c[4][3]),a(-c[3][3],c[4][1])),c[2][0]),d(h(d(a(c[3][0],c[4][3]),a(-c[3][3],c[4][0])),-c[2][1]),h(d(a(c[3][0],c[4][1]),a(-c[3][1],c[4][0])),c[2][3]))),c[1][2]),h(d(h(d(a(c[3][1],c[4][2]),a(-c[3][2],c[4][1])),c[2][0]),d(h(d(a(c[3][0],c[4][2]),a(-c[3][2],c[4][0])),-c[2][1]),h(d(a(c[3][0],c[4][1]),a(-c[3][1],c[4][0])),c[2][2]))),-c[1][3]))),c[0][4])))))}}function f(d){return(2===d?n:3===d?m:4===d?l:5===d?i:void 0)(r,t,e,o)}var u=[function(){return[0]},function(d){return[d[0][0]]}];function s(d,h,a,_,c,T,x,w){return function(M){switch(M.length){case 0:return d(M);case 1:return h(M);case 2:return a(M);case 3:return _(M);case 4:return c(M);case 5:return T(M)}var D=x[M.length];return D||(D=x[M.length]=w(M.length)),D(M)}}!function(){for(;u.length<6;)u.push(f(u.length));b.exports=s.apply(void 0,u.concat([u,f]));for(var d=0;d<u.length;++d)b.exports[d]=u[d]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(g,b,y){"use strict";var e=g("two-product"),r=g("robust-sum");b.exports=function(t,o){for(var n=e(t[0],o[0]),m=1;m<t.length;++m)n=r(n,e(t[m],o[m]));return n}},{"robust-sum":289,"two-product":306}],282:[function(g,b,y){"use strict";var e=g("two-product"),r=g("robust-sum"),t=g("robust-subtract"),o=g("robust-scale");function n(h){return(3===h?m:4===h?l:5===h?i:f)(r,t,e,o)}function m(h,a,_,c){return function(T,x,w){var M=_(T[0],T[0]),D=c(M,x[0]),C=c(M,w[0]),P=_(x[0],x[0]),L=c(P,T[0]),S=c(P,w[0]),E=_(w[0],w[0]),N=c(E,T[0]),z=c(E,x[0]),q=h(a(z,S),a(L,D)),G=a(N,C),K=a(q,G);return K[K.length-1]}}function l(h,a,_,c){return function(T,x,w,M){var D=h(_(T[0],T[0]),_(T[1],T[1])),C=c(D,x[0]),P=c(D,w[0]),L=c(D,M[0]),S=h(_(x[0],x[0]),_(x[1],x[1])),E=c(S,T[0]),N=c(S,w[0]),z=c(S,M[0]),q=h(_(w[0],w[0]),_(w[1],w[1])),G=c(q,T[0]),K=c(q,x[0]),ne=c(q,M[0]),X=h(_(M[0],M[0]),_(M[1],M[1])),J=c(X,T[0]),se=c(X,x[0]),V=c(X,w[0]),j=h(h(c(a(V,ne),x[1]),h(c(a(se,z),-w[1]),c(a(K,N),M[1]))),h(c(a(se,z),T[1]),h(c(a(J,L),-x[1]),c(a(E,C),M[1])))),H=h(h(c(a(V,ne),T[1]),h(c(a(J,L),-w[1]),c(a(G,P),M[1]))),h(c(a(K,N),T[1]),h(c(a(G,P),-x[1]),c(a(E,C),w[1])))),oe=a(j,H);return oe[oe.length-1]}}function i(h,a,_,c){return function(T,x,w,M,D){var C=h(_(T[0],T[0]),h(_(T[1],T[1]),_(T[2],T[2]))),P=c(C,x[0]),L=c(C,w[0]),S=c(C,M[0]),E=c(C,D[0]),N=h(_(x[0],x[0]),h(_(x[1],x[1]),_(x[2],x[2]))),z=c(N,T[0]),q=c(N,w[0]),G=c(N,M[0]),K=c(N,D[0]),ne=h(_(w[0],w[0]),h(_(w[1],w[1]),_(w[2],w[2]))),X=c(ne,T[0]),J=c(ne,x[0]),se=c(ne,M[0]),V=c(ne,D[0]),j=h(_(M[0],M[0]),h(_(M[1],M[1]),_(M[2],M[2]))),H=c(j,T[0]),oe=c(j,x[0]),U=c(j,w[0]),te=c(j,D[0]),ee=h(_(D[0],D[0]),h(_(D[1],D[1]),_(D[2],D[2]))),le=c(ee,T[0]),ce=c(ee,x[0]),pe=c(ee,w[0]),de=c(ee,M[0]),be=h(h(h(c(h(c(a(de,te),w[1]),h(c(a(pe,V),-M[1]),c(a(U,se),D[1]))),x[2]),h(c(h(c(a(de,te),x[1]),h(c(a(ce,K),-M[1]),c(a(oe,G),D[1]))),-w[2]),c(h(c(a(pe,V),x[1]),h(c(a(ce,K),-w[1]),c(a(J,q),D[1]))),M[2]))),h(c(h(c(a(U,se),x[1]),h(c(a(oe,G),-w[1]),c(a(J,q),M[1]))),-D[2]),h(c(h(c(a(de,te),x[1]),h(c(a(ce,K),-M[1]),c(a(oe,G),D[1]))),T[2]),c(h(c(a(de,te),T[1]),h(c(a(le,E),-M[1]),c(a(H,S),D[1]))),-x[2])))),h(h(c(h(c(a(ce,K),T[1]),h(c(a(le,E),-x[1]),c(a(z,P),D[1]))),M[2]),h(c(h(c(a(oe,G),T[1]),h(c(a(H,S),-x[1]),c(a(z,P),M[1]))),-D[2]),c(h(c(a(U,se),x[1]),h(c(a(oe,G),-w[1]),c(a(J,q),M[1]))),T[2]))),h(c(h(c(a(U,se),T[1]),h(c(a(H,S),-w[1]),c(a(X,L),M[1]))),-x[2]),h(c(h(c(a(oe,G),T[1]),h(c(a(H,S),-x[1]),c(a(z,P),M[1]))),w[2]),c(h(c(a(J,q),T[1]),h(c(a(X,L),-x[1]),c(a(z,P),w[1]))),-M[2]))))),he=h(h(h(c(h(c(a(de,te),w[1]),h(c(a(pe,V),-M[1]),c(a(U,se),D[1]))),T[2]),c(h(c(a(de,te),T[1]),h(c(a(le,E),-M[1]),c(a(H,S),D[1]))),-w[2])),h(c(h(c(a(pe,V),T[1]),h(c(a(le,E),-w[1]),c(a(X,L),D[1]))),M[2]),c(h(c(a(U,se),T[1]),h(c(a(H,S),-w[1]),c(a(X,L),M[1]))),-D[2]))),h(h(c(h(c(a(pe,V),x[1]),h(c(a(ce,K),-w[1]),c(a(J,q),D[1]))),T[2]),c(h(c(a(pe,V),T[1]),h(c(a(le,E),-w[1]),c(a(X,L),D[1]))),-x[2])),h(c(h(c(a(ce,K),T[1]),h(c(a(le,E),-x[1]),c(a(z,P),D[1]))),w[2]),c(h(c(a(J,q),T[1]),h(c(a(X,L),-x[1]),c(a(z,P),w[1]))),-D[2])))),xe=a(be,he);return xe[xe.length-1]}}function f(h,a,_,c){return function(T,x,w,M,D,C){var P=h(h(_(T[0],T[0]),_(T[1],T[1])),h(_(T[2],T[2]),_(T[3],T[3]))),L=c(P,x[0]),S=c(P,w[0]),E=c(P,M[0]),N=c(P,D[0]),z=c(P,C[0]),q=h(h(_(x[0],x[0]),_(x[1],x[1])),h(_(x[2],x[2]),_(x[3],x[3]))),G=c(q,T[0]),K=c(q,w[0]),ne=c(q,M[0]),X=c(q,D[0]),J=c(q,C[0]),se=h(h(_(w[0],w[0]),_(w[1],w[1])),h(_(w[2],w[2]),_(w[3],w[3]))),V=c(se,T[0]),j=c(se,x[0]),H=c(se,M[0]),oe=c(se,D[0]),U=c(se,C[0]),te=h(h(_(M[0],M[0]),_(M[1],M[1])),h(_(M[2],M[2]),_(M[3],M[3]))),ee=c(te,T[0]),le=c(te,x[0]),ce=c(te,w[0]),pe=c(te,D[0]),de=c(te,C[0]),be=h(h(_(D[0],D[0]),_(D[1],D[1])),h(_(D[2],D[2]),_(D[3],D[3]))),he=c(be,T[0]),xe=c(be,x[0]),De=c(be,w[0]),Se=c(be,M[0]),ke=c(be,C[0]),Fe=h(h(_(C[0],C[0]),_(C[1],C[1])),h(_(C[2],C[2]),_(C[3],C[3]))),ve=c(Fe,T[0]),Te=c(Fe,x[0]),Le=c(Fe,w[0]),Oe=c(Fe,M[0]),Ne=c(Fe,D[0]),Be=h(h(h(c(h(h(c(h(c(a(Ne,ke),M[1]),h(c(a(Oe,de),-D[1]),c(a(Se,pe),C[1]))),w[2]),c(h(c(a(Ne,ke),w[1]),h(c(a(Le,U),-D[1]),c(a(De,oe),C[1]))),-M[2])),h(c(h(c(a(Oe,de),w[1]),h(c(a(Le,U),-M[1]),c(a(ce,H),C[1]))),D[2]),c(h(c(a(Se,pe),w[1]),h(c(a(De,oe),-M[1]),c(a(ce,H),D[1]))),-C[2]))),x[3]),h(c(h(h(c(h(c(a(Ne,ke),M[1]),h(c(a(Oe,de),-D[1]),c(a(Se,pe),C[1]))),x[2]),c(h(c(a(Ne,ke),x[1]),h(c(a(Te,J),-D[1]),c(a(xe,X),C[1]))),-M[2])),h(c(h(c(a(Oe,de),x[1]),h(c(a(Te,J),-M[1]),c(a(le,ne),C[1]))),D[2]),c(h(c(a(Se,pe),x[1]),h(c(a(xe,X),-M[1]),c(a(le,ne),D[1]))),-C[2]))),-w[3]),c(h(h(c(h(c(a(Ne,ke),w[1]),h(c(a(Le,U),-D[1]),c(a(De,oe),C[1]))),x[2]),c(h(c(a(Ne,ke),x[1]),h(c(a(Te,J),-D[1]),c(a(xe,X),C[1]))),-w[2])),h(c(h(c(a(Le,U),x[1]),h(c(a(Te,J),-w[1]),c(a(j,K),C[1]))),D[2]),c(h(c(a(De,oe),x[1]),h(c(a(xe,X),-w[1]),c(a(j,K),D[1]))),-C[2]))),M[3]))),h(h(c(h(h(c(h(c(a(Oe,de),w[1]),h(c(a(Le,U),-M[1]),c(a(ce,H),C[1]))),x[2]),c(h(c(a(Oe,de),x[1]),h(c(a(Te,J),-M[1]),c(a(le,ne),C[1]))),-w[2])),h(c(h(c(a(Le,U),x[1]),h(c(a(Te,J),-w[1]),c(a(j,K),C[1]))),M[2]),c(h(c(a(ce,H),x[1]),h(c(a(le,ne),-w[1]),c(a(j,K),M[1]))),-C[2]))),-D[3]),c(h(h(c(h(c(a(Se,pe),w[1]),h(c(a(De,oe),-M[1]),c(a(ce,H),D[1]))),x[2]),c(h(c(a(Se,pe),x[1]),h(c(a(xe,X),-M[1]),c(a(le,ne),D[1]))),-w[2])),h(c(h(c(a(De,oe),x[1]),h(c(a(xe,X),-w[1]),c(a(j,K),D[1]))),M[2]),c(h(c(a(ce,H),x[1]),h(c(a(le,ne),-w[1]),c(a(j,K),M[1]))),-D[2]))),C[3])),h(c(h(h(c(h(c(a(Ne,ke),M[1]),h(c(a(Oe,de),-D[1]),c(a(Se,pe),C[1]))),x[2]),c(h(c(a(Ne,ke),x[1]),h(c(a(Te,J),-D[1]),c(a(xe,X),C[1]))),-M[2])),h(c(h(c(a(Oe,de),x[1]),h(c(a(Te,J),-M[1]),c(a(le,ne),C[1]))),D[2]),c(h(c(a(Se,pe),x[1]),h(c(a(xe,X),-M[1]),c(a(le,ne),D[1]))),-C[2]))),T[3]),c(h(h(c(h(c(a(Ne,ke),M[1]),h(c(a(Oe,de),-D[1]),c(a(Se,pe),C[1]))),T[2]),c(h(c(a(Ne,ke),T[1]),h(c(a(ve,z),-D[1]),c(a(he,N),C[1]))),-M[2])),h(c(h(c(a(Oe,de),T[1]),h(c(a(ve,z),-M[1]),c(a(ee,E),C[1]))),D[2]),c(h(c(a(Se,pe),T[1]),h(c(a(he,N),-M[1]),c(a(ee,E),D[1]))),-C[2]))),-x[3])))),h(h(h(c(h(h(c(h(c(a(Ne,ke),x[1]),h(c(a(Te,J),-D[1]),c(a(xe,X),C[1]))),T[2]),c(h(c(a(Ne,ke),T[1]),h(c(a(ve,z),-D[1]),c(a(he,N),C[1]))),-x[2])),h(c(h(c(a(Te,J),T[1]),h(c(a(ve,z),-x[1]),c(a(G,L),C[1]))),D[2]),c(h(c(a(xe,X),T[1]),h(c(a(he,N),-x[1]),c(a(G,L),D[1]))),-C[2]))),M[3]),c(h(h(c(h(c(a(Oe,de),x[1]),h(c(a(Te,J),-M[1]),c(a(le,ne),C[1]))),T[2]),c(h(c(a(Oe,de),T[1]),h(c(a(ve,z),-M[1]),c(a(ee,E),C[1]))),-x[2])),h(c(h(c(a(Te,J),T[1]),h(c(a(ve,z),-x[1]),c(a(G,L),C[1]))),M[2]),c(h(c(a(le,ne),T[1]),h(c(a(ee,E),-x[1]),c(a(G,L),M[1]))),-C[2]))),-D[3])),h(c(h(h(c(h(c(a(Se,pe),x[1]),h(c(a(xe,X),-M[1]),c(a(le,ne),D[1]))),T[2]),c(h(c(a(Se,pe),T[1]),h(c(a(he,N),-M[1]),c(a(ee,E),D[1]))),-x[2])),h(c(h(c(a(xe,X),T[1]),h(c(a(he,N),-x[1]),c(a(G,L),D[1]))),M[2]),c(h(c(a(le,ne),T[1]),h(c(a(ee,E),-x[1]),c(a(G,L),M[1]))),-D[2]))),C[3]),c(h(h(c(h(c(a(Oe,de),w[1]),h(c(a(Le,U),-M[1]),c(a(ce,H),C[1]))),x[2]),c(h(c(a(Oe,de),x[1]),h(c(a(Te,J),-M[1]),c(a(le,ne),C[1]))),-w[2])),h(c(h(c(a(Le,U),x[1]),h(c(a(Te,J),-w[1]),c(a(j,K),C[1]))),M[2]),c(h(c(a(ce,H),x[1]),h(c(a(le,ne),-w[1]),c(a(j,K),M[1]))),-C[2]))),T[3]))),h(h(c(h(h(c(h(c(a(Oe,de),w[1]),h(c(a(Le,U),-M[1]),c(a(ce,H),C[1]))),T[2]),c(h(c(a(Oe,de),T[1]),h(c(a(ve,z),-M[1]),c(a(ee,E),C[1]))),-w[2])),h(c(h(c(a(Le,U),T[1]),h(c(a(ve,z),-w[1]),c(a(V,S),C[1]))),M[2]),c(h(c(a(ce,H),T[1]),h(c(a(ee,E),-w[1]),c(a(V,S),M[1]))),-C[2]))),-x[3]),c(h(h(c(h(c(a(Oe,de),x[1]),h(c(a(Te,J),-M[1]),c(a(le,ne),C[1]))),T[2]),c(h(c(a(Oe,de),T[1]),h(c(a(ve,z),-M[1]),c(a(ee,E),C[1]))),-x[2])),h(c(h(c(a(Te,J),T[1]),h(c(a(ve,z),-x[1]),c(a(G,L),C[1]))),M[2]),c(h(c(a(le,ne),T[1]),h(c(a(ee,E),-x[1]),c(a(G,L),M[1]))),-C[2]))),w[3])),h(c(h(h(c(h(c(a(Le,U),x[1]),h(c(a(Te,J),-w[1]),c(a(j,K),C[1]))),T[2]),c(h(c(a(Le,U),T[1]),h(c(a(ve,z),-w[1]),c(a(V,S),C[1]))),-x[2])),h(c(h(c(a(Te,J),T[1]),h(c(a(ve,z),-x[1]),c(a(G,L),C[1]))),w[2]),c(h(c(a(j,K),T[1]),h(c(a(V,S),-x[1]),c(a(G,L),w[1]))),-C[2]))),-M[3]),c(h(h(c(h(c(a(ce,H),x[1]),h(c(a(le,ne),-w[1]),c(a(j,K),M[1]))),T[2]),c(h(c(a(ce,H),T[1]),h(c(a(ee,E),-w[1]),c(a(V,S),M[1]))),-x[2])),h(c(h(c(a(le,ne),T[1]),h(c(a(ee,E),-x[1]),c(a(G,L),M[1]))),w[2]),c(h(c(a(j,K),T[1]),h(c(a(V,S),-x[1]),c(a(G,L),w[1]))),-M[2]))),C[3]))))),He=h(h(h(c(h(h(c(h(c(a(Ne,ke),M[1]),h(c(a(Oe,de),-D[1]),c(a(Se,pe),C[1]))),w[2]),c(h(c(a(Ne,ke),w[1]),h(c(a(Le,U),-D[1]),c(a(De,oe),C[1]))),-M[2])),h(c(h(c(a(Oe,de),w[1]),h(c(a(Le,U),-M[1]),c(a(ce,H),C[1]))),D[2]),c(h(c(a(Se,pe),w[1]),h(c(a(De,oe),-M[1]),c(a(ce,H),D[1]))),-C[2]))),T[3]),h(c(h(h(c(h(c(a(Ne,ke),M[1]),h(c(a(Oe,de),-D[1]),c(a(Se,pe),C[1]))),T[2]),c(h(c(a(Ne,ke),T[1]),h(c(a(ve,z),-D[1]),c(a(he,N),C[1]))),-M[2])),h(c(h(c(a(Oe,de),T[1]),h(c(a(ve,z),-M[1]),c(a(ee,E),C[1]))),D[2]),c(h(c(a(Se,pe),T[1]),h(c(a(he,N),-M[1]),c(a(ee,E),D[1]))),-C[2]))),-w[3]),c(h(h(c(h(c(a(Ne,ke),w[1]),h(c(a(Le,U),-D[1]),c(a(De,oe),C[1]))),T[2]),c(h(c(a(Ne,ke),T[1]),h(c(a(ve,z),-D[1]),c(a(he,N),C[1]))),-w[2])),h(c(h(c(a(Le,U),T[1]),h(c(a(ve,z),-w[1]),c(a(V,S),C[1]))),D[2]),c(h(c(a(De,oe),T[1]),h(c(a(he,N),-w[1]),c(a(V,S),D[1]))),-C[2]))),M[3]))),h(h(c(h(h(c(h(c(a(Oe,de),w[1]),h(c(a(Le,U),-M[1]),c(a(ce,H),C[1]))),T[2]),c(h(c(a(Oe,de),T[1]),h(c(a(ve,z),-M[1]),c(a(ee,E),C[1]))),-w[2])),h(c(h(c(a(Le,U),T[1]),h(c(a(ve,z),-w[1]),c(a(V,S),C[1]))),M[2]),c(h(c(a(ce,H),T[1]),h(c(a(ee,E),-w[1]),c(a(V,S),M[1]))),-C[2]))),-D[3]),c(h(h(c(h(c(a(Se,pe),w[1]),h(c(a(De,oe),-M[1]),c(a(ce,H),D[1]))),T[2]),c(h(c(a(Se,pe),T[1]),h(c(a(he,N),-M[1]),c(a(ee,E),D[1]))),-w[2])),h(c(h(c(a(De,oe),T[1]),h(c(a(he,N),-w[1]),c(a(V,S),D[1]))),M[2]),c(h(c(a(ce,H),T[1]),h(c(a(ee,E),-w[1]),c(a(V,S),M[1]))),-D[2]))),C[3])),h(c(h(h(c(h(c(a(Ne,ke),w[1]),h(c(a(Le,U),-D[1]),c(a(De,oe),C[1]))),x[2]),c(h(c(a(Ne,ke),x[1]),h(c(a(Te,J),-D[1]),c(a(xe,X),C[1]))),-w[2])),h(c(h(c(a(Le,U),x[1]),h(c(a(Te,J),-w[1]),c(a(j,K),C[1]))),D[2]),c(h(c(a(De,oe),x[1]),h(c(a(xe,X),-w[1]),c(a(j,K),D[1]))),-C[2]))),T[3]),c(h(h(c(h(c(a(Ne,ke),w[1]),h(c(a(Le,U),-D[1]),c(a(De,oe),C[1]))),T[2]),c(h(c(a(Ne,ke),T[1]),h(c(a(ve,z),-D[1]),c(a(he,N),C[1]))),-w[2])),h(c(h(c(a(Le,U),T[1]),h(c(a(ve,z),-w[1]),c(a(V,S),C[1]))),D[2]),c(h(c(a(De,oe),T[1]),h(c(a(he,N),-w[1]),c(a(V,S),D[1]))),-C[2]))),-x[3])))),h(h(h(c(h(h(c(h(c(a(Ne,ke),x[1]),h(c(a(Te,J),-D[1]),c(a(xe,X),C[1]))),T[2]),c(h(c(a(Ne,ke),T[1]),h(c(a(ve,z),-D[1]),c(a(he,N),C[1]))),-x[2])),h(c(h(c(a(Te,J),T[1]),h(c(a(ve,z),-x[1]),c(a(G,L),C[1]))),D[2]),c(h(c(a(xe,X),T[1]),h(c(a(he,N),-x[1]),c(a(G,L),D[1]))),-C[2]))),w[3]),c(h(h(c(h(c(a(Le,U),x[1]),h(c(a(Te,J),-w[1]),c(a(j,K),C[1]))),T[2]),c(h(c(a(Le,U),T[1]),h(c(a(ve,z),-w[1]),c(a(V,S),C[1]))),-x[2])),h(c(h(c(a(Te,J),T[1]),h(c(a(ve,z),-x[1]),c(a(G,L),C[1]))),w[2]),c(h(c(a(j,K),T[1]),h(c(a(V,S),-x[1]),c(a(G,L),w[1]))),-C[2]))),-D[3])),h(c(h(h(c(h(c(a(De,oe),x[1]),h(c(a(xe,X),-w[1]),c(a(j,K),D[1]))),T[2]),c(h(c(a(De,oe),T[1]),h(c(a(he,N),-w[1]),c(a(V,S),D[1]))),-x[2])),h(c(h(c(a(xe,X),T[1]),h(c(a(he,N),-x[1]),c(a(G,L),D[1]))),w[2]),c(h(c(a(j,K),T[1]),h(c(a(V,S),-x[1]),c(a(G,L),w[1]))),-D[2]))),C[3]),c(h(h(c(h(c(a(Se,pe),w[1]),h(c(a(De,oe),-M[1]),c(a(ce,H),D[1]))),x[2]),c(h(c(a(Se,pe),x[1]),h(c(a(xe,X),-M[1]),c(a(le,ne),D[1]))),-w[2])),h(c(h(c(a(De,oe),x[1]),h(c(a(xe,X),-w[1]),c(a(j,K),D[1]))),M[2]),c(h(c(a(ce,H),x[1]),h(c(a(le,ne),-w[1]),c(a(j,K),M[1]))),-D[2]))),T[3]))),h(h(c(h(h(c(h(c(a(Se,pe),w[1]),h(c(a(De,oe),-M[1]),c(a(ce,H),D[1]))),T[2]),c(h(c(a(Se,pe),T[1]),h(c(a(he,N),-M[1]),c(a(ee,E),D[1]))),-w[2])),h(c(h(c(a(De,oe),T[1]),h(c(a(he,N),-w[1]),c(a(V,S),D[1]))),M[2]),c(h(c(a(ce,H),T[1]),h(c(a(ee,E),-w[1]),c(a(V,S),M[1]))),-D[2]))),-x[3]),c(h(h(c(h(c(a(Se,pe),x[1]),h(c(a(xe,X),-M[1]),c(a(le,ne),D[1]))),T[2]),c(h(c(a(Se,pe),T[1]),h(c(a(he,N),-M[1]),c(a(ee,E),D[1]))),-x[2])),h(c(h(c(a(xe,X),T[1]),h(c(a(he,N),-x[1]),c(a(G,L),D[1]))),M[2]),c(h(c(a(le,ne),T[1]),h(c(a(ee,E),-x[1]),c(a(G,L),M[1]))),-D[2]))),w[3])),h(c(h(h(c(h(c(a(De,oe),x[1]),h(c(a(xe,X),-w[1]),c(a(j,K),D[1]))),T[2]),c(h(c(a(De,oe),T[1]),h(c(a(he,N),-w[1]),c(a(V,S),D[1]))),-x[2])),h(c(h(c(a(xe,X),T[1]),h(c(a(he,N),-x[1]),c(a(G,L),D[1]))),w[2]),c(h(c(a(j,K),T[1]),h(c(a(V,S),-x[1]),c(a(G,L),w[1]))),-D[2]))),-M[3]),c(h(h(c(h(c(a(ce,H),x[1]),h(c(a(le,ne),-w[1]),c(a(j,K),M[1]))),T[2]),c(h(c(a(ce,H),T[1]),h(c(a(ee,E),-w[1]),c(a(V,S),M[1]))),-x[2])),h(c(h(c(a(le,ne),T[1]),h(c(a(ee,E),-x[1]),c(a(G,L),M[1]))),w[2]),c(h(c(a(j,K),T[1]),h(c(a(V,S),-x[1]),c(a(G,L),w[1]))),-M[2]))),D[3]))))),Ve=a(Be,He);return Ve[Ve.length-1]}}var u=[function(){return 0},function(){return 0},function(){return 0}];function s(h){var a=u[h.length];return a||(a=u[h.length]=n(h.length)),a.apply(void 0,h)}function d(h,a,_,c,T,x,w,M){return function(D,C,P,L,S,E){switch(arguments.length){case 0:case 1:return 0;case 2:return c(D,C);case 3:return T(D,C,P);case 4:return x(D,C,P,L);case 5:return w(D,C,P,L,S);case 6:return M(D,C,P,L,S,E)}for(var N=new Array(arguments.length),z=0;z<arguments.length;++z)N[z]=arguments[z];return h(N)}}!function(){for(;u.length<=6;)u.push(n(u.length));b.exports=d.apply(void 0,[s].concat(u));for(var h=0;h<=6;++h)b.exports[h]=u[h]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(g,b,y){"use strict";var e=g("robust-determinant");function r(u){return(2===u?t:3===u?o:4===u?n:5===u?m:l)(u<6?e[u]:e)}function t(u){return function(s,d){return[u([[+d[0],+s[0][1]],[+d[1],+s[1][1]]]),u([[+s[0][0],+d[0]],[+s[1][0],+d[1]]]),u(s)]}}function o(u){return function(s,d){return[u([[+d[0],+s[0][1],+s[0][2]],[+d[1],+s[1][1],+s[1][2]],[+d[2],+s[2][1],+s[2][2]]]),u([[+s[0][0],+d[0],+s[0][2]],[+s[1][0],+d[1],+s[1][2]],[+s[2][0],+d[2],+s[2][2]]]),u([[+s[0][0],+s[0][1],+d[0]],[+s[1][0],+s[1][1],+d[1]],[+s[2][0],+s[2][1],+d[2]]]),u(s)]}}function n(u){return function(s,d){return[u([[+d[0],+s[0][1],+s[0][2],+s[0][3]],[+d[1],+s[1][1],+s[1][2],+s[1][3]],[+d[2],+s[2][1],+s[2][2],+s[2][3]],[+d[3],+s[3][1],+s[3][2],+s[3][3]]]),u([[+s[0][0],+d[0],+s[0][2],+s[0][3]],[+s[1][0],+d[1],+s[1][2],+s[1][3]],[+s[2][0],+d[2],+s[2][2],+s[2][3]],[+s[3][0],+d[3],+s[3][2],+s[3][3]]]),u([[+s[0][0],+s[0][1],+d[0],+s[0][3]],[+s[1][0],+s[1][1],+d[1],+s[1][3]],[+s[2][0],+s[2][1],+d[2],+s[2][3]],[+s[3][0],+s[3][1],+d[3],+s[3][3]]]),u([[+s[0][0],+s[0][1],+s[0][2],+d[0]],[+s[1][0],+s[1][1],+s[1][2],+d[1]],[+s[2][0],+s[2][1],+s[2][2],+d[2]],[+s[3][0],+s[3][1],+s[3][2],+d[3]]]),u(s)]}}function m(u){return function(s,d){return[u([[+d[0],+s[0][1],+s[0][2],+s[0][3],+s[0][4]],[+d[1],+s[1][1],+s[1][2],+s[1][3],+s[1][4]],[+d[2],+s[2][1],+s[2][2],+s[2][3],+s[2][4]],[+d[3],+s[3][1],+s[3][2],+s[3][3],+s[3][4]],[+d[4],+s[4][1],+s[4][2],+s[4][3],+s[4][4]]]),u([[+s[0][0],+d[0],+s[0][2],+s[0][3],+s[0][4]],[+s[1][0],+d[1],+s[1][2],+s[1][3],+s[1][4]],[+s[2][0],+d[2],+s[2][2],+s[2][3],+s[2][4]],[+s[3][0],+d[3],+s[3][2],+s[3][3],+s[3][4]],[+s[4][0],+d[4],+s[4][2],+s[4][3],+s[4][4]]]),u([[+s[0][0],+s[0][1],+d[0],+s[0][3],+s[0][4]],[+s[1][0],+s[1][1],+d[1],+s[1][3],+s[1][4]],[+s[2][0],+s[2][1],+d[2],+s[2][3],+s[2][4]],[+s[3][0],+s[3][1],+d[3],+s[3][3],+s[3][4]],[+s[4][0],+s[4][1],+d[4],+s[4][3],+s[4][4]]]),u([[+s[0][0],+s[0][1],+s[0][2],+d[0],+s[0][4]],[+s[1][0],+s[1][1],+s[1][2],+d[1],+s[1][4]],[+s[2][0],+s[2][1],+s[2][2],+d[2],+s[2][4]],[+s[3][0],+s[3][1],+s[3][2],+d[3],+s[3][4]],[+s[4][0],+s[4][1],+s[4][2],+d[4],+s[4][4]]]),u([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+d[0]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+d[1]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+d[2]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+d[3]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+d[4]]]),u(s)]}}function l(u){return function(s,d){return[u([[+d[0],+s[0][1],+s[0][2],+s[0][3],+s[0][4],+s[0][5]],[+d[1],+s[1][1],+s[1][2],+s[1][3],+s[1][4],+s[1][5]],[+d[2],+s[2][1],+s[2][2],+s[2][3],+s[2][4],+s[2][5]],[+d[3],+s[3][1],+s[3][2],+s[3][3],+s[3][4],+s[3][5]],[+d[4],+s[4][1],+s[4][2],+s[4][3],+s[4][4],+s[4][5]],[+d[5],+s[5][1],+s[5][2],+s[5][3],+s[5][4],+s[5][5]]]),u([[+s[0][0],+d[0],+s[0][2],+s[0][3],+s[0][4],+s[0][5]],[+s[1][0],+d[1],+s[1][2],+s[1][3],+s[1][4],+s[1][5]],[+s[2][0],+d[2],+s[2][2],+s[2][3],+s[2][4],+s[2][5]],[+s[3][0],+d[3],+s[3][2],+s[3][3],+s[3][4],+s[3][5]],[+s[4][0],+d[4],+s[4][2],+s[4][3],+s[4][4],+s[4][5]],[+s[5][0],+d[5],+s[5][2],+s[5][3],+s[5][4],+s[5][5]]]),u([[+s[0][0],+s[0][1],+d[0],+s[0][3],+s[0][4],+s[0][5]],[+s[1][0],+s[1][1],+d[1],+s[1][3],+s[1][4],+s[1][5]],[+s[2][0],+s[2][1],+d[2],+s[2][3],+s[2][4],+s[2][5]],[+s[3][0],+s[3][1],+d[3],+s[3][3],+s[3][4],+s[3][5]],[+s[4][0],+s[4][1],+d[4],+s[4][3],+s[4][4],+s[4][5]],[+s[5][0],+s[5][1],+d[5],+s[5][3],+s[5][4],+s[5][5]]]),u([[+s[0][0],+s[0][1],+s[0][2],+d[0],+s[0][4],+s[0][5]],[+s[1][0],+s[1][1],+s[1][2],+d[1],+s[1][4],+s[1][5]],[+s[2][0],+s[2][1],+s[2][2],+d[2],+s[2][4],+s[2][5]],[+s[3][0],+s[3][1],+s[3][2],+d[3],+s[3][4],+s[3][5]],[+s[4][0],+s[4][1],+s[4][2],+d[4],+s[4][4],+s[4][5]],[+s[5][0],+s[5][1],+s[5][2],+d[5],+s[5][4],+s[5][5]]]),u([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+d[0],+s[0][5]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+d[1],+s[1][5]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+d[2],+s[2][5]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+d[3],+s[3][5]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+d[4],+s[4][5]],[+s[5][0],+s[5][1],+s[5][2],+s[5][3],+d[5],+s[5][5]]]),u([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+s[0][4],+d[0]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+s[1][4],+d[1]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+s[2][4],+d[2]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+s[3][4],+d[3]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+s[4][4],+d[4]],[+s[5][0],+s[5][1],+s[5][2],+s[5][3],+s[5][4],+d[5]]]),u(s)]}}var i=[function(){return[[0]]},function(u,s){return[[s[0]],[u[0][0]]]}];function f(u,s,d,h,a,_,c,T){return function(x,w){switch(x.length){case 0:return u(x,w);case 1:return s(x,w);case 2:return d(x,w);case 3:return h(x,w);case 4:return a(x,w);case 5:return _(x,w)}var M=c[x.length];return M||(M=c[x.length]=T(x.length)),M(x,w)}}!function(){for(;i.length<6;)i.push(r(i.length));b.exports=f.apply(void 0,i.concat([i,r]));for(var u=0;u<6;++u)b.exports[u]=i[u]}()},{"robust-determinant":280}],284:[function(g,b,y){"use strict";var e=g("two-product"),r=g("robust-sum"),t=g("robust-scale"),o=g("robust-subtract");function n(a,_,c,T){return function(x,w,M){var D=a(a(_(w[1],M[0]),_(-M[1],w[0])),a(_(x[1],w[0]),_(-w[1],x[0]))),C=a(_(x[1],M[0]),_(-M[1],x[0])),P=T(D,C);return P[P.length-1]}}function m(a,_,c,T){return function(x,w,M,D){var C=a(a(c(a(_(M[1],D[0]),_(-D[1],M[0])),w[2]),a(c(a(_(w[1],D[0]),_(-D[1],w[0])),-M[2]),c(a(_(w[1],M[0]),_(-M[1],w[0])),D[2]))),a(c(a(_(w[1],D[0]),_(-D[1],w[0])),x[2]),a(c(a(_(x[1],D[0]),_(-D[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),D[2])))),P=a(a(c(a(_(M[1],D[0]),_(-D[1],M[0])),x[2]),a(c(a(_(x[1],D[0]),_(-D[1],x[0])),-M[2]),c(a(_(x[1],M[0]),_(-M[1],x[0])),D[2]))),a(c(a(_(w[1],M[0]),_(-M[1],w[0])),x[2]),a(c(a(_(x[1],M[0]),_(-M[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),M[2])))),L=T(C,P);return L[L.length-1]}}function l(a,_,c,T){return function(x,w,M,D,C){var P=a(a(a(c(a(c(a(_(D[1],C[0]),_(-C[1],D[0])),M[2]),a(c(a(_(M[1],C[0]),_(-C[1],M[0])),-D[2]),c(a(_(M[1],D[0]),_(-D[1],M[0])),C[2]))),w[3]),a(c(a(c(a(_(D[1],C[0]),_(-C[1],D[0])),w[2]),a(c(a(_(w[1],C[0]),_(-C[1],w[0])),-D[2]),c(a(_(w[1],D[0]),_(-D[1],w[0])),C[2]))),-M[3]),c(a(c(a(_(M[1],C[0]),_(-C[1],M[0])),w[2]),a(c(a(_(w[1],C[0]),_(-C[1],w[0])),-M[2]),c(a(_(w[1],M[0]),_(-M[1],w[0])),C[2]))),D[3]))),a(c(a(c(a(_(M[1],D[0]),_(-D[1],M[0])),w[2]),a(c(a(_(w[1],D[0]),_(-D[1],w[0])),-M[2]),c(a(_(w[1],M[0]),_(-M[1],w[0])),D[2]))),-C[3]),a(c(a(c(a(_(D[1],C[0]),_(-C[1],D[0])),w[2]),a(c(a(_(w[1],C[0]),_(-C[1],w[0])),-D[2]),c(a(_(w[1],D[0]),_(-D[1],w[0])),C[2]))),x[3]),c(a(c(a(_(D[1],C[0]),_(-C[1],D[0])),x[2]),a(c(a(_(x[1],C[0]),_(-C[1],x[0])),-D[2]),c(a(_(x[1],D[0]),_(-D[1],x[0])),C[2]))),-w[3])))),a(a(c(a(c(a(_(w[1],C[0]),_(-C[1],w[0])),x[2]),a(c(a(_(x[1],C[0]),_(-C[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),C[2]))),D[3]),a(c(a(c(a(_(w[1],D[0]),_(-D[1],w[0])),x[2]),a(c(a(_(x[1],D[0]),_(-D[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),D[2]))),-C[3]),c(a(c(a(_(M[1],D[0]),_(-D[1],M[0])),w[2]),a(c(a(_(w[1],D[0]),_(-D[1],w[0])),-M[2]),c(a(_(w[1],M[0]),_(-M[1],w[0])),D[2]))),x[3]))),a(c(a(c(a(_(M[1],D[0]),_(-D[1],M[0])),x[2]),a(c(a(_(x[1],D[0]),_(-D[1],x[0])),-M[2]),c(a(_(x[1],M[0]),_(-M[1],x[0])),D[2]))),-w[3]),a(c(a(c(a(_(w[1],D[0]),_(-D[1],w[0])),x[2]),a(c(a(_(x[1],D[0]),_(-D[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),D[2]))),M[3]),c(a(c(a(_(w[1],M[0]),_(-M[1],w[0])),x[2]),a(c(a(_(x[1],M[0]),_(-M[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),M[2]))),-D[3]))))),L=a(a(a(c(a(c(a(_(D[1],C[0]),_(-C[1],D[0])),M[2]),a(c(a(_(M[1],C[0]),_(-C[1],M[0])),-D[2]),c(a(_(M[1],D[0]),_(-D[1],M[0])),C[2]))),x[3]),c(a(c(a(_(D[1],C[0]),_(-C[1],D[0])),x[2]),a(c(a(_(x[1],C[0]),_(-C[1],x[0])),-D[2]),c(a(_(x[1],D[0]),_(-D[1],x[0])),C[2]))),-M[3])),a(c(a(c(a(_(M[1],C[0]),_(-C[1],M[0])),x[2]),a(c(a(_(x[1],C[0]),_(-C[1],x[0])),-M[2]),c(a(_(x[1],M[0]),_(-M[1],x[0])),C[2]))),D[3]),c(a(c(a(_(M[1],D[0]),_(-D[1],M[0])),x[2]),a(c(a(_(x[1],D[0]),_(-D[1],x[0])),-M[2]),c(a(_(x[1],M[0]),_(-M[1],x[0])),D[2]))),-C[3]))),a(a(c(a(c(a(_(M[1],C[0]),_(-C[1],M[0])),w[2]),a(c(a(_(w[1],C[0]),_(-C[1],w[0])),-M[2]),c(a(_(w[1],M[0]),_(-M[1],w[0])),C[2]))),x[3]),c(a(c(a(_(M[1],C[0]),_(-C[1],M[0])),x[2]),a(c(a(_(x[1],C[0]),_(-C[1],x[0])),-M[2]),c(a(_(x[1],M[0]),_(-M[1],x[0])),C[2]))),-w[3])),a(c(a(c(a(_(w[1],C[0]),_(-C[1],w[0])),x[2]),a(c(a(_(x[1],C[0]),_(-C[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),C[2]))),M[3]),c(a(c(a(_(w[1],M[0]),_(-M[1],w[0])),x[2]),a(c(a(_(x[1],M[0]),_(-M[1],x[0])),-w[2]),c(a(_(x[1],w[0]),_(-w[1],x[0])),M[2]))),-C[3])))),S=T(P,L);return S[S.length-1]}}function i(a){return(3===a?n:4===a?m:l)(r,e,t,o)}var f=i(3),u=i(4),s=[function(){return 0},function(){return 0},function(a,_){return _[0]-a[0]},function(a,_,c){var T,x=(a[1]-c[1])*(_[0]-c[0]),w=(a[0]-c[0])*(_[1]-c[1]),M=x-w;if(x>0){if(w<=0)return M;T=x+w}else{if(!(x<0)||w>=0)return M;T=-(x+w)}var D=33306690738754716e-32*T;return M>=D||M<=-D?M:f(a,_,c)},function(a,_,c,T){var x=a[0]-T[0],w=_[0]-T[0],M=c[0]-T[0],D=a[1]-T[1],C=_[1]-T[1],P=c[1]-T[1],L=a[2]-T[2],S=_[2]-T[2],E=c[2]-T[2],N=w*P,z=M*C,q=M*D,G=x*P,K=x*C,ne=w*D,X=L*(N-z)+S*(q-G)+E*(K-ne),J=7771561172376103e-31*((Math.abs(N)+Math.abs(z))*Math.abs(L)+(Math.abs(q)+Math.abs(G))*Math.abs(S)+(Math.abs(K)+Math.abs(ne))*Math.abs(E));return X>J||-X>J?X:u(a,_,c,T)}];function d(a){var _=s[a.length];return _||(_=s[a.length]=i(a.length)),_.apply(void 0,a)}function h(a,_,c,T,x,w,M){return function(D,C,P,L,S){switch(arguments.length){case 0:case 1:return 0;case 2:return T(D,C);case 3:return x(D,C,P);case 4:return w(D,C,P,L);case 5:return M(D,C,P,L,S)}for(var E=new Array(arguments.length),N=0;N<arguments.length;++N)E[N]=arguments[N];return a(E)}}!function(){for(;s.length<=5;)s.push(i(s.length));b.exports=h.apply(void 0,[d].concat(s));for(var a=0;a<=5;++a)b.exports[a]=s[a]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(g,b,y){"use strict";var e=g("robust-sum"),r=g("robust-scale");b.exports=function(t,o){if(1===t.length)return r(o,t[0]);if(1===o.length)return r(t,o[0]);if(0===t.length||0===o.length)return[0];var n=[0];if(t.length<o.length)for(var m=0;m<t.length;++m)n=e(n,r(o,t[m]));else for(m=0;m<o.length;++m)n=e(n,r(t,o[m]));return n}},{"robust-scale":286,"robust-sum":289}],286:[function(g,b,y){"use strict";var e=g("two-product"),r=g("two-sum");b.exports=function(t,o){var n=t.length;if(1===n){var m=e(t[0],o);return m[0]?m:[m[1]]}var l=new Array(2*n),i=[.1,.1],f=[.1,.1],u=0;e(t[0],o,i),i[0]&&(l[u++]=i[0]);for(var s=1;s<n;++s){e(t[s],o,f),r(i[1],f[0],i),i[0]&&(l[u++]=i[0]);var h=f[1],a=i[1],_=h+a,c=a-(_-h);i[1]=_,c&&(l[u++]=c)}return i[1]&&(l[u++]=i[1]),0===u&&(l[u++]=0),l.length=u,l}},{"two-product":306,"two-sum":307}],287:[function(g,b,y){"use strict";b.exports=function(r,t,o,n){var m=e(r,o,n),l=e(t,o,n);if(m>0&&l>0||m<0&&l<0)return!1;var i=e(o,r,t),f=e(n,r,t);return!(i>0&&f>0||i<0&&f<0)&&(0!==m||0!==l||0!==i||0!==f||function(u,s,d,h){for(var a=0;a<2;++a){var _=u[a],c=s[a],T=Math.min(_,c),x=Math.max(_,c),w=d[a],M=h[a],D=Math.min(w,M);if(Math.max(w,M)<T||x<D)return!1}return!0}(r,t,o,n))};var e=g("robust-orientation")[3]},{"robust-orientation":284}],288:[function(g,b,y){"use strict";b.exports=function(e,r){var P,L,S,E,N,t=0|e.length,o=0|r.length;if(1===t&&1===o)return(N=(P=e[0])-((S=P+(L=-r[0]))-(E=S-P))+(L-E))?[N,S]:[S];var n,m,l=new Array(t+o),i=0,f=0,u=0,s=Math.abs,d=e[f],h=s(d),a=-r[u],_=s(a);h<_?(m=d,(f+=1)<t&&(h=s(d=e[f]))):(m=a,(u+=1)<o&&(_=s(a=-r[u]))),f<t&&h<_||u>=o?(n=d,(f+=1)<t&&(h=s(d=e[f]))):(n=a,(u+=1)<o&&(_=s(a=-r[u])));for(var c,T,x=n+m,w=x-n,M=m-w,D=M,C=x;f<t&&u<o;)h<_?(n=d,(f+=1)<t&&(h=s(d=e[f]))):(n=a,(u+=1)<o&&(_=s(a=-r[u]))),(M=(m=D)-(w=(x=n+m)-n))&&(l[i++]=M),D=C-((c=C+x)-(T=c-C))+(x-T),C=c;for(;f<t;)(M=(m=D)-(w=(x=(n=d)+m)-n))&&(l[i++]=M),D=C-((c=C+x)-(T=c-C))+(x-T),C=c,(f+=1)<t&&(d=e[f]);for(;u<o;)(M=(m=D)-(w=(x=(n=a)+m)-n))&&(l[i++]=M),D=C-((c=C+x)-(T=c-C))+(x-T),C=c,(u+=1)<o&&(a=-r[u]);return D&&(l[i++]=D),C&&(l[i++]=C),i||(l[i++]=0),l.length=i,l}},{}],289:[function(g,b,y){"use strict";b.exports=function(e,r){var P,L,S,E,N,t=0|e.length,o=0|r.length;if(1===t&&1===o)return(N=(P=e[0])-((S=P+(L=r[0]))-(E=S-P))+(L-E))?[N,S]:[S];var n,m,l=new Array(t+o),i=0,f=0,u=0,s=Math.abs,d=e[f],h=s(d),a=r[u],_=s(a);h<_?(m=d,(f+=1)<t&&(h=s(d=e[f]))):(m=a,(u+=1)<o&&(_=s(a=r[u]))),f<t&&h<_||u>=o?(n=d,(f+=1)<t&&(h=s(d=e[f]))):(n=a,(u+=1)<o&&(_=s(a=r[u])));for(var c,T,x=n+m,w=x-n,M=m-w,D=M,C=x;f<t&&u<o;)h<_?(n=d,(f+=1)<t&&(h=s(d=e[f]))):(n=a,(u+=1)<o&&(_=s(a=r[u]))),(M=(m=D)-(w=(x=n+m)-n))&&(l[i++]=M),D=C-((c=C+x)-(T=c-C))+(x-T),C=c;for(;f<t;)(M=(m=D)-(w=(x=(n=d)+m)-n))&&(l[i++]=M),D=C-((c=C+x)-(T=c-C))+(x-T),C=c,(f+=1)<t&&(d=e[f]);for(;u<o;)(M=(m=D)-(w=(x=(n=a)+m)-n))&&(l[i++]=M),D=C-((c=C+x)-(T=c-C))+(x-T),C=c,(u+=1)<o&&(a=r[u]);return D&&(l[i++]=D),C&&(l[i++]=C),i||(l[i++]=0),l.length=i,l}},{}],290:[function(g,b,y){"use strict";b.exports=function(t){return r(e(t))};var e=g("boundary-cells"),r=g("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(g,b,y){"use strict";b.exports=function(n,m,l,i){if(l=l||0,void 0===i&&(i=function(c){for(var T=c.length,x=0,w=0;w<T;++w)x=0|Math.max(x,c[w].length);return x-1}(n)),0===n.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var f=function(c,T){for(var x=c.length,w=r.mallocUint8(x),M=0;M<x;++M)w[M]=c[M]<T|0;return w}(m,+l),u=function(c,T){for(var x=c.length,M=r.mallocUint32(2*(T*(T+1)/2*x|0)),D=0,C=0;C<x;++C)for(var P=c[C],L=(T=P.length,0);L<T;++L)for(var S=0;S<L;++S){var E=P[S],N=P[L];M[D++]=0|Math.min(E,N),M[D++]=0|Math.max(E,N)}t(e(M,[D/2|0,2]));var z=2;for(C=2;C<D;C+=2)M[C-2]===M[C]&&M[C-1]===M[C+1]||(M[z++]=M[C],M[z++]=M[C+1]);return e(M,[z/2|0,2])}(n,i),s=function(c,T,x,w){for(var M=c.data,D=c.shape[0],C=r.mallocDouble(D),P=0,L=0;L<D;++L){var S=M[2*L],E=M[2*L+1];if(x[S]!==x[E]){var N=T[S],z=T[E];M[2*P]=S,M[2*P+1]=E,C[P++]=(z-w)/(z-N)}}return c.shape[0]=P,e(C,[P])}(u,m,f,+l),d=function(c,T){var x=r.mallocInt32(2*T),w=c.shape[0],M=c.data;x[0]=0;for(var D=0,C=0;C<w;++C){var P=M[2*C];if(P!==D){for(x[2*D+1]=C;++D<P;)x[2*D]=C,x[2*D+1]=C;x[2*D]=C}}for(x[2*D+1]=w;++D<T;)x[2*D]=x[2*D+1]=w;return x}(u,0|m.length),h=o(i)(n,u.data,d,f),a=function(c){for(var T=0|c.shape[0],x=c.data,w=new Array(T),M=0;M<T;++M)w[M]=[x[2*M],x[2*M+1]];return w}(u),_=[].slice.call(s.data,0,s.shape[0]);return r.free(f),r.free(u.data),r.free(s.data),r.free(d),{cells:h,vertexIds:a,vertexWeights:_}};var e=g("ndarray"),r=g("typedarray-pool"),t=g("ndarray-sort"),o=g("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(g,b,y){"use strict";b.exports=function(r){return e[r]()};var e=[function(){return function(r,t,o,n){for(var m=r.length,l=0;l<m;++l);return[]}},function(){function r(t,o,n,m){for(var l=0|Math.min(n,m),i=0|Math.max(n,m),f=t[2*l],u=t[2*l+1];f<u;){var s=f+u>>1,d=o[2*s+1];if(d===i)return s;i<d?u=s:f=s+1}return f}return function(t,o,n,m){for(var l=t.length,i=[],f=0;f<l;++f){var u=t[f];if(2===u.length){var s=(m[u[0]]<<0)+(m[u[1]]<<1);if(0===s||3===s)continue;switch(s){case 0:break;case 1:i.push([r(n,o,u[0],u[1])]);break;case 2:i.push([r(n,o,u[1],u[0])])}}}return i}},function(){function r(t,o,n,m){for(var l=0|Math.min(n,m),i=0|Math.max(n,m),f=t[2*l],u=t[2*l+1];f<u;){var s=f+u>>1,d=o[2*s+1];if(d===i)return s;i<d?u=s:f=s+1}return f}return function(t,o,n,m){for(var l=t.length,i=[],f=0;f<l;++f){var u=t[f],s=u.length;if(3===s){if(0==(d=(m[u[0]]<<0)+(m[u[1]]<<1)+(m[u[2]]<<2))||7===d)continue;switch(d){case 0:break;case 1:i.push([r(n,o,u[0],u[2]),r(n,o,u[0],u[1])]);break;case 2:i.push([r(n,o,u[1],u[0]),r(n,o,u[1],u[2])]);break;case 3:i.push([r(n,o,u[0],u[2]),r(n,o,u[1],u[2])]);break;case 4:i.push([r(n,o,u[2],u[1]),r(n,o,u[2],u[0])]);break;case 5:i.push([r(n,o,u[2],u[1]),r(n,o,u[0],u[1])]);break;case 6:i.push([r(n,o,u[1],u[0]),r(n,o,u[2],u[0])])}}else if(2===s){var d;if(0==(d=(m[u[0]]<<0)+(m[u[1]]<<1))||3===d)continue;switch(d){case 0:break;case 1:i.push([r(n,o,u[0],u[1])]);break;case 2:i.push([r(n,o,u[1],u[0])])}}}return i}},function(){function r(t,o,n,m){for(var l=0|Math.min(n,m),i=0|Math.max(n,m),f=t[2*l],u=t[2*l+1];f<u;){var s=f+u>>1,d=o[2*s+1];if(d===i)return s;i<d?u=s:f=s+1}return f}return function(t,o,n,m){for(var l=t.length,i=[],f=0;f<l;++f){var u=t[f],s=u.length;if(4===s){if(0==(d=(m[u[0]]<<0)+(m[u[1]]<<1)+(m[u[2]]<<2)+(m[u[3]]<<3))||15===d)continue;switch(d){case 0:break;case 1:i.push([r(n,o,u[0],u[1]),r(n,o,u[0],u[2]),r(n,o,u[0],u[3])]);break;case 2:i.push([r(n,o,u[1],u[2]),r(n,o,u[1],u[0]),r(n,o,u[1],u[3])]);break;case 3:i.push([r(n,o,u[1],u[2]),r(n,o,u[0],u[2]),r(n,o,u[0],u[3])],[r(n,o,u[1],u[3]),r(n,o,u[1],u[2]),r(n,o,u[0],u[3])]);break;case 4:i.push([r(n,o,u[2],u[0]),r(n,o,u[2],u[1]),r(n,o,u[2],u[3])]);break;case 5:i.push([r(n,o,u[0],u[1]),r(n,o,u[2],u[1]),r(n,o,u[0],u[3])],[r(n,o,u[2],u[1]),r(n,o,u[2],u[3]),r(n,o,u[0],u[3])]);break;case 6:i.push([r(n,o,u[2],u[0]),r(n,o,u[1],u[0]),r(n,o,u[1],u[3])],[r(n,o,u[2],u[3]),r(n,o,u[2],u[0]),r(n,o,u[1],u[3])]);break;case 7:i.push([r(n,o,u[0],u[3]),r(n,o,u[1],u[3]),r(n,o,u[2],u[3])]);break;case 8:i.push([r(n,o,u[3],u[1]),r(n,o,u[3],u[0]),r(n,o,u[3],u[2])]);break;case 9:i.push([r(n,o,u[3],u[1]),r(n,o,u[0],u[1]),r(n,o,u[0],u[2])],[r(n,o,u[3],u[2]),r(n,o,u[3],u[1]),r(n,o,u[0],u[2])]);break;case 10:i.push([r(n,o,u[1],u[0]),r(n,o,u[3],u[0]),r(n,o,u[1],u[2])],[r(n,o,u[3],u[0]),r(n,o,u[3],u[2]),r(n,o,u[1],u[2])]);break;case 11:i.push([r(n,o,u[1],u[2]),r(n,o,u[0],u[2]),r(n,o,u[3],u[2])]);break;case 12:i.push([r(n,o,u[3],u[0]),r(n,o,u[2],u[0]),r(n,o,u[2],u[1])],[r(n,o,u[3],u[1]),r(n,o,u[3],u[0]),r(n,o,u[2],u[1])]);break;case 13:i.push([r(n,o,u[0],u[1]),r(n,o,u[2],u[1]),r(n,o,u[3],u[1])]);break;case 14:i.push([r(n,o,u[2],u[0]),r(n,o,u[1],u[0]),r(n,o,u[3],u[0])])}}else if(3===s){if(0==(d=(m[u[0]]<<0)+(m[u[1]]<<1)+(m[u[2]]<<2))||7===d)continue;switch(d){case 0:break;case 1:i.push([r(n,o,u[0],u[2]),r(n,o,u[0],u[1])]);break;case 2:i.push([r(n,o,u[1],u[0]),r(n,o,u[1],u[2])]);break;case 3:i.push([r(n,o,u[0],u[2]),r(n,o,u[1],u[2])]);break;case 4:i.push([r(n,o,u[2],u[1]),r(n,o,u[2],u[0])]);break;case 5:i.push([r(n,o,u[2],u[1]),r(n,o,u[0],u[1])]);break;case 6:i.push([r(n,o,u[1],u[0]),r(n,o,u[2],u[0])])}}else if(2===s){var d;if(0==(d=(m[u[0]]<<0)+(m[u[1]]<<1))||3===d)continue;switch(d){case 0:break;case 1:i.push([r(n,o,u[0],u[1])]);break;case 2:i.push([r(n,o,u[1],u[0])])}}}return i}}]},{}],293:[function(g,b,y){"use strict";var e=g("bit-twiddle"),r=g("union-find");function t(u,s){var d=u.length,h=u.length-s.length,a=Math.min;if(h)return h;switch(d){case 0:return 0;case 1:return u[0]-s[0];case 2:return(T=u[0]+u[1]-s[0]-s[1])||a(u[0],u[1])-a(s[0],s[1]);case 3:var _=u[0]+u[1],c=s[0]+s[1];if(T=_+u[2]-(c+s[2]))return T;var T,x=a(u[0],u[1]),w=a(s[0],s[1]);return(T=a(x,u[2])-a(w,s[2]))||a(x+u[2],_)-a(w+s[2],c);default:var M=u.slice(0);M.sort();var D=s.slice(0);D.sort();for(var C=0;C<d;++C)if(h=M[C]-D[C])return h;return 0}}function o(u,s){return t(u[0],s[0])}function n(u,s){if(s){for(var d=u.length,h=new Array(d),a=0;a<d;++a)h[a]=[u[a],s[a]];for(h.sort(o),a=0;a<d;++a)u[a]=h[a][0],s[a]=h[a][1];return u}return u.sort(t),u}function m(u){if(0===u.length)return[];for(var s=1,d=u.length,h=1;h<d;++h){var a=u[h];if(t(a,u[h-1])){if(h===s){s++;continue}u[s++]=a}}return u.length=s,u}function l(u,s){for(var d=0,h=u.length-1,a=-1;d<=h;){var _=d+h>>1,c=t(u[_],s);c<=0?(0===c&&(a=_),d=_+1):c>0&&(h=_-1)}return a}function i(u,s){for(var d=new Array(u.length),h=0,a=d.length;h<a;++h)d[h]=[];for(var _=[],c=(h=0,s.length);h<c;++h)for(var T=s[h],x=T.length,w=1,M=1<<x;w<M;++w){_.length=e.popCount(w);for(var D=0,C=0;C<x;++C)w&1<<C&&(_[D++]=T[C]);var P=l(u,_);if(!(P<0))for(;d[P++].push(h),!(P>=u.length||0!==t(u[P],_)););}return d}function f(u,s){if(s<0)return[];for(var d=[],h=(1<<s+1)-1,a=0;a<u.length;++a)for(var _=u[a],c=h;c<1<<_.length;c=e.nextCombination(c)){for(var T=new Array(s+1),x=0,w=0;w<_.length;++w)c&1<<w&&(T[x++]=_[w]);d.push(T)}return n(d)}y.dimension=function(u){for(var s=0,d=Math.max,h=0,a=u.length;h<a;++h)s=d(s,u[h].length);return s-1},y.countVertices=function(u){for(var s=-1,d=Math.max,h=0,a=u.length;h<a;++h)for(var _=u[h],c=0,T=_.length;c<T;++c)s=d(s,_[c]);return s+1},y.cloneCells=function(u){for(var s=new Array(u.length),d=0,h=u.length;d<h;++d)s[d]=u[d].slice(0);return s},y.compareCells=t,y.normalize=n,y.unique=m,y.findCell=l,y.incidence=i,y.dual=function(u,s){if(!s)return i(m(f(u,0)),u);for(var d=new Array(s),h=0;h<s;++h)d[h]=[];h=0;for(var a=u.length;h<a;++h)for(var _=u[h],c=0,T=_.length;c<T;++c)d[_[c]].push(h);return d},y.explode=function(u){for(var s=[],d=0,h=u.length;d<h;++d)for(var a=u[d],_=0|a.length,c=1,T=1<<_;c<T;++c){for(var x=[],w=0;w<_;++w)c>>>w&1&&x.push(a[w]);s.push(x)}return n(s)},y.skeleton=f,y.boundary=function(u){for(var s=[],d=0,h=u.length;d<h;++d)for(var a=u[d],_=0,c=a.length;_<c;++_){for(var T=new Array(a.length-1),x=0,w=0;x<c;++x)x!==_&&(T[w++]=a[x]);s.push(T)}return n(s)},y.connectedComponents=function(u,s){return s?function(d,h){for(var a=new r(h),_=0;_<d.length;++_)for(var c=d[_],T=0;T<c.length;++T)for(var x=T+1;x<c.length;++x)a.link(c[T],c[x]);var w=[],M=a.ranks;for(_=0;_<M.length;++_)M[_]=-1;for(_=0;_<d.length;++_){var D=a.find(d[_][0]);M[D]<0?(M[D]=w.length,w.push([d[_].slice(0)])):w[M[D]].push(d[_].slice(0))}return w}(u,s):function(d){for(var h=m(n(f(d,0))),a=new r(h.length),_=0;_<d.length;++_)for(var c=d[_],T=0;T<c.length;++T)for(var x=l(h,[c[T]]),w=T+1;w<c.length;++w)a.link(x,l(h,[c[w]]));var M=[],D=a.ranks;for(_=0;_<D.length;++_)D[_]=-1;for(_=0;_<d.length;++_){var C=a.find(l(h,[d[_][0]]));D[C]<0?(D[C]=M.length,M.push([d[_].slice(0)])):M[D[C]].push(d[_].slice(0))}return M}(u)}},{"bit-twiddle":32,"union-find":309}],294:[function(g,b,y){arguments[4][32][0].apply(y,arguments)},{dup:32}],295:[function(g,b,y){arguments[4][293][0].apply(y,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(g,b,y){"use strict";function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var t=0;t<r;++t)this.roots[t]=t,this.ranks[t]=0}b.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.prototype.find=function(r){for(var t=this.roots;t[r]!==r;){var o=t[r];t[r]=t[o],r=o}return r},e.prototype.link=function(r,t){var o=this.find(r),n=this.find(t);if(o!==n){var m=this.ranks,l=this.roots,i=m[o],f=m[n];i<f?l[o]=n:f<i?l[n]=o:(l[n]=o,++m[o])}}},{}],297:[function(g,b,y){"use strict";b.exports=function(t,o,n){for(var m=o.length,l=t.length,i=new Array(m),f=new Array(m),u=new Array(m),s=new Array(m),d=0;d<m;++d)i[d]=f[d]=-1,u[d]=1/0,s[d]=!1;for(d=0;d<l;++d){var h=t[d];if(2!==h.length)throw new Error("Input must be a graph");var a=h[1],_=h[0];f[_]=-1!==f[_]?-2:a,i[a]=-1!==i[a]?-2:_}function c(ne){if(s[ne])return 1/0;var J,se,H=i[ne],oe=f[ne];return H<0||oe<0?1/0:(J=o[H],se=o[oe],Math.abs(e(o[ne],J,se))/Math.sqrt(Math.pow(J[0]-se[0],2)+Math.pow(J[1]-se[1],2)))}function T(ne,X){var J=S[ne],se=S[X];S[ne]=se,S[X]=J,E[J]=X,E[se]=ne}function x(ne){return u[S[ne]]}function w(ne){return 1&ne?ne-1>>1:(ne>>1)-1}function M(ne){for(var X=x(ne);;){var J=X,se=2*ne+1,V=2*(ne+1),j=ne;if(se<N){var H=x(se);H<J&&(j=se,J=H)}if(V<N&&x(V)<J&&(j=V),j===ne)return ne;T(ne,j),ne=j}}function D(ne){for(var X=x(ne);ne>0;){var J=w(ne);if(!(J>=0&&X<x(J)))return ne;T(ne,J),ne=J}}function C(){if(N>0){var ne=S[0];return T(0,N-1),N-=1,M(0),ne}return-1}function P(ne,X){var J=S[ne];return u[J]===X?ne:(u[J]=-1/0,D(ne),C(),u[J]=X,D((N+=1)-1))}function L(ne){if(!s[ne]){s[ne]=!0;var X=i[ne],J=f[ne];i[J]>=0&&(i[J]=X),f[X]>=0&&(f[X]=J),E[X]>=0&&P(E[X],c(X)),E[J]>=0&&P(E[J],c(J))}}var S=[],E=new Array(m);for(d=0;d<m;++d)(u[d]=c(d))<1/0?(E[d]=S.length,S.push(d)):E[d]=-1;var N=S.length;for(d=N>>1;d>=0;--d)M(d);for(;;){var z=C();if(z<0||u[z]>n)break;L(z)}var q=[];for(d=0;d<m;++d)s[d]||(E[d]=q.length,q.push(o[d].slice()));function G(ne,X){if(ne[X]<0)return X;var J=X,se=X;do{var V=ne[se];if(!s[se]||V<0||V===se||(V=ne[se=V],!s[se]||V<0||V===se))break;se=V,J=ne[J]}while(J!==se);for(var j=X;j!==se;j=ne[j])ne[j]=se;return se}var K=[];return t.forEach(function(ne){var X=G(i,ne[0]),J=G(f,ne[1]);if(X>=0&&J>=0&&X!==J){var se=E[X],V=E[J];se!==V&&K.push([se,V])}}),r.unique(r.normalize(K)),{positions:q,edges:K}};var e=g("robust-orientation"),r=g("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(g,b,y){"use strict";b.exports=function(t,o){var n,m,l,i;if(o[0][0]<o[1][0])n=o[0],m=o[1];else{if(!(o[0][0]>o[1][0]))return r(o,t);n=o[1],m=o[0]}if(t[0][0]<t[1][0])l=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return-r(t,o);l=t[1],i=t[0]}var f=e(n,m,i),u=e(n,m,l);if(f<0){if(u<=0)return f}else if(f>0){if(u>=0)return f}else if(u)return u;if(f=e(i,l,m),u=e(i,l,n),f<0){if(u<=0)return f}else if(f>0){if(u>=0)return f}else if(u)return u;return m[0]-i[0]};var e=g("robust-orientation");function r(t,o){var n,m,l,i;if(o[0][0]<o[1][0])n=o[0],m=o[1];else{if(!(o[0][0]>o[1][0])){var f=Math.min(t[0][1],t[1][1]),u=Math.max(t[0][1],t[1][1]),s=Math.min(o[0][1],o[1][1]),d=Math.max(o[0][1],o[1][1]);return u<s?u-s:f>d?f-d:u-d}n=o[1],m=o[0]}t[0][1]<t[1][1]?(l=t[0],i=t[1]):(l=t[1],i=t[0]);var h=e(m,n,l);return h||(h=e(m,n,i))||i-m}},{"robust-orientation":284}],299:[function(g,b,y){"use strict";b.exports=function(u){for(var s=u.length,d=2*s,h=new Array(d),a=0;a<s;++a){var _=u[a],c=_[0][0]<_[1][0];h[2*a]=new f(_[0][0],_,c,a),h[2*a+1]=new f(_[1][0],_,!c,a)}h.sort(function(L,S){var E=L.x-S.x;return E||(E=L.create-S.create)||Math.min(L.segment[0][1],L.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var T=r(o),x=[],w=[],M=[];for(a=0;a<d;){for(var D=h[a].x,C=[];a<d;){var P=h[a];if(P.x!==D)break;a+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(C.push(new i(P.segment[0][1],P.index,!0,!0)),C.push(new i(P.segment[1][1],P.index,!1,!1))):(C.push(new i(P.segment[1][1],P.index,!0,!1)),C.push(new i(P.segment[0][1],P.index,!1,!0)))):T=P.create?T.insert(P.segment,P.index):T.remove(P.segment)}x.push(T.root),w.push(D),M.push(C)}return new n(x,w,M)};var e=g("binary-search-bounds"),r=g("functional-red-black-tree"),t=g("robust-orientation"),o=g("./lib/order-segments");function n(u,s,d){this.slabs=u,this.coordinates=s,this.horizontal=d}function m(u,s){return u.y-s}function l(u,s){for(var d=null;u;){var h,a,_=u.key;_[0][0]<_[1][0]?(h=_[0],a=_[1]):(h=_[1],a=_[0]);var c=t(h,a,s);if(c<0)u=u.left;else if(c>0)if(s[0]!==_[1][0])d=u,u=u.right;else{if(T=l(u.right,s))return T;u=u.left}else{if(s[0]!==_[1][0])return u;var T;if(T=l(u.right,s))return T;u=u.left}}return d}function i(u,s,d,h){this.y=u,this.index=s,this.start=d,this.closed=h}function f(u,s,d,h){this.x=u,this.segment=s,this.create=d,this.index=h}n.prototype.castUp=function(u){var s=e.le(this.coordinates,u[0]);if(s<0)return-1;var d=l(this.slabs[s],u),h=-1;if(d&&(h=d.value),this.coordinates[s]===u[0]){var a=null;if(d&&(a=d.key),s>0){var _=l(this.slabs[s-1],u);_&&(a?o(_.key,a)>0&&(a=_.key,h=_.value):(h=_.value,a=_.key))}var c=this.horizontal[s];if(c.length>0){var T=e.ge(c,u[1],m);if(T<c.length){var x=c[T];if(u[1]===x.y){if(x.closed)return x.index;for(;T<c.length-1&&c[T+1].y===u[1];)if((x=c[T+=1]).closed)return x.index;if(x.y===u[1]&&!x.start){if((T+=1)>=c.length)return h;x=c[T]}}if(x.start)if(a){var w=t(a[0],a[1],[u[0],x.y]);a[0][0]>a[1][0]&&(w=-w),w>0&&(h=x.index)}else h=x.index;else x.y!==u[1]&&(h=x.index)}}}return h}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(g,b,y){"use strict";var e=g("robust-dot-product"),r=g("robust-sum");function t(n,m){var l=r(e(n,m),[m[m.length-1]]);return l[l.length-1]}function o(n,m,l,i){var f=-m/(i-m);f<0?f=0:f>1&&(f=1);for(var u=1-f,s=n.length,d=new Array(s),h=0;h<s;++h)d[h]=f*n[h]+u*l[h];return d}b.exports=function(n,m){for(var l=[],i=[],f=t(n[n.length-1],m),u=n[n.length-1],s=n[0],d=0;d<n.length;++d,u=s){var h=t(s=n[d],m);if(f<0&&h>0||f>0&&h<0){var a=o(u,h,s,f);l.push(a),i.push(a.slice())}h<0?i.push(s.slice()):h>0?l.push(s.slice()):(l.push(s.slice()),i.push(s.slice())),f=h}return{positive:l,negative:i}},b.exports.positive=function(n,m){for(var l=[],i=t(n[n.length-1],m),f=n[n.length-1],u=n[0],s=0;s<n.length;++s,f=u){var d=t(u=n[s],m);(i<0&&d>0||i>0&&d<0)&&l.push(o(f,d,u,i)),d>=0&&l.push(u.slice()),i=d}return l},b.exports.negative=function(n,m){for(var l=[],i=t(n[n.length-1],m),f=n[n.length-1],u=n[0],s=0;s<n.length;++s,f=u){var d=t(u=n[s],m);(i<0&&d>0||i>0&&d<0)&&l.push(o(f,d,u,i)),d<=0&&l.push(u.slice()),i=d}return l}},{"robust-dot-product":281,"robust-sum":289}],301:[function(g,b,y){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(l){return o(m(l),arguments)}function t(l,i){return r.apply(null,[l].concat(i||[]))}function o(l,i){var f,u,s,d,h,a,_,c,T,x=1,w=l.length,M="";for(u=0;u<w;u++)if("string"==typeof l[u])M+=l[u];else if("object"==typeof l[u]){if((d=l[u]).keys)for(f=i[x],s=0;s<d.keys.length;s++){if(null==f)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',d.keys[s],d.keys[s-1]));f=f[d.keys[s]]}else f=d.param_no?i[d.param_no]:i[x++];if(e.not_type.test(d.type)&&e.not_primitive.test(d.type)&&f instanceof Function&&(f=f()),e.numeric_arg.test(d.type)&&"number"!=typeof f&&isNaN(f))throw new TypeError(r("[sprintf] expecting number but found %T",f));switch(e.number.test(d.type)&&(c=f>=0),d.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,d.width?parseInt(d.width):0);break;case"e":f=d.precision?parseFloat(f).toExponential(d.precision):parseFloat(f).toExponential();break;case"f":f=d.precision?parseFloat(f).toFixed(d.precision):parseFloat(f);break;case"g":f=d.precision?String(Number(f.toPrecision(d.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=d.precision?f.substring(0,d.precision):f;break;case"t":f=String(!!f),f=d.precision?f.substring(0,d.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=d.precision?f.substring(0,d.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=d.precision?f.substring(0,d.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase()}e.json.test(d.type)?M+=f:(!e.number.test(d.type)||c&&!d.sign?T="":(T=c?"+":"-",f=f.toString().replace(e.sign,"")),a=d.pad_char?"0"===d.pad_char?"0":d.pad_char.charAt(1):" ",_=d.width-(T+f).length,h=d.width&&_>0?a.repeat(_):"",M+=d.align?T+f+h:"0"===a?T+h+f:h+T+f)}return M}var n=Object.create(null);function m(l){if(n[l])return n[l];for(var i,f=l,u=[],s=0;f;){if(null!==(i=e.text.exec(f)))u.push(i[0]);else if(null!==(i=e.modulo.exec(f)))u.push("%");else{if(null===(i=e.placeholder.exec(f)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){s|=1;var d=[],h=i[2],a=[];if(null===(a=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(d.push(a[1]);""!==(h=h.substring(a[0].length));)if(null!==(a=e.key_access.exec(h)))d.push(a[1]);else{if(null===(a=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");d.push(a[1])}i[2]=d}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}f=f.substring(i[0].length)}return n[l]=u}void 0!==y&&(y.sprintf=r,y.vsprintf=t),typeof window<"u"&&(window.sprintf=r,window.vsprintf=t)}()},{}],302:[function(g,b,y){"use strict";b.exports=function(n,m){if(n.dimension<=0)return{positions:[],cells:[]};if(1===n.dimension)return function(f,u){for(var s=r(f,u),d=s.length,h=new Array(d),a=new Array(d),_=0;_<d;++_)h[_]=[s[_]],a[_]=[_];return{positions:h,cells:a}}(n,m);var l=n.order.join()+"-"+n.dtype,i=o[l];return m=+m||0,i||(i=o[l]=function(f,u){var d=t[f.length+"d"];if(d)return d(e,f,u)}(n.order,n.dtype)),i(n,m)};var e=g("ndarray-extract-contour"),r=g("zero-crossings"),t={"2d":function(n,m,l){var i=n({order:m,scalarArguments:3,getters:"generic"===l?[0]:void 0,phase:function(f,u,s,d){return f>d|0},vertex:function(f,u,s,d,h,a,_,c,T,x,w,M,D){var C=(_<<0)+(c<<1)+(T<<2)+(x<<3)|0;if(0!==C&&15!==C)switch(C){case 0:case 15:w.push([f-.5,u-.5]);break;case 1:w.push([f-.25-.25*(d+s-2*D)/(s-d),u-.25-.25*(h+s-2*D)/(s-h)]);break;case 2:w.push([f-.75-.25*(-d-s+2*D)/(d-s),u-.25-.25*(a+d-2*D)/(d-a)]);break;case 3:w.push([f-.5,u-.5-.5*(h+s+a+d-4*D)/(s-h+d-a)]);break;case 4:w.push([f-.25-.25*(a+h-2*D)/(h-a),u-.75-.25*(-h-s+2*D)/(h-s)]);break;case 5:w.push([f-.5-.5*(d+s+a+h-4*D)/(s-d+h-a),u-.5]);break;case 6:w.push([f-.5-.25*(-d-s+a+h)/(d-s+h-a),u-.5-.25*(-h-s+a+d)/(h-s+d-a)]);break;case 7:w.push([f-.75-.25*(a+h-2*D)/(h-a),u-.75-.25*(a+d-2*D)/(d-a)]);break;case 8:w.push([f-.75-.25*(-a-h+2*D)/(a-h),u-.75-.25*(-a-d+2*D)/(a-d)]);break;case 9:w.push([f-.5-.25*(d+s+-a-h)/(s-d+a-h),u-.5-.25*(h+s+-a-d)/(s-h+a-d)]);break;case 10:w.push([f-.5-.5*(-d-s-a-h+4*D)/(d-s+a-h),u-.5]);break;case 11:w.push([f-.25-.25*(-a-h+2*D)/(a-h),u-.75-.25*(h+s-2*D)/(s-h)]);break;case 12:w.push([f-.5,u-.5-.5*(-h-s-a-d+4*D)/(h-s+a-d)]);break;case 13:w.push([f-.75-.25*(d+s-2*D)/(s-d),u-.25-.25*(-a-d+2*D)/(a-d)]);break;case 14:w.push([f-.25-.25*(-d-s+2*D)/(d-s),u-.25-.25*(-h-s+2*D)/(h-s)])}},cell:function(f,u,s,d,h,a,_,c,T){c.push(h?[f,u]:[u,f])}});return function(f,u){var s=[],d=[];return i(f,s,d,u),{positions:s,cells:d}}}},o={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(g,b,y){(function(e){(function(){"use strict";b.exports=function n(m,l,i){i=i||{};var f=o[m];f||(f=o[m]={" ":{data:new Float32Array(0),shape:.2}});var u=f[l];if(!u)if(l.length<=1||!/\d/.test(l))u=f[l]=function(D){for(var C=D.cells,P=D.positions,L=new Float32Array(6*C.length),S=0,E=0,N=0;N<C.length;++N)for(var z=C[N],q=0;q<3;++q){var G=P[z[q]];L[S++]=G[0],L[S++]=G[1]+1.4,E=Math.max(G[0],E)}return{data:L,shape:E}}(r(l,{triangles:!0,font:m,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var s=l.split(/(\d|\s)/),d=new Array(s.length),h=0,a=0,_=0;_<s.length;++_)d[_]=n(m,s[_]),h+=d[_].data.length,a+=d[_].shape,_>0&&(a+=.02);var c=new Float32Array(h),T=0,x=-.5*a;for(_=0;_<d.length;++_){for(var w=d[_].data,M=0;M<w.length;M+=2)c[T++]=w[M]+x,c[T++]=w[M+1];x+=d[_].shape+.02}u=f[l]={data:c,shape:a}}return u};var r=g("vectorize-text"),t=window||e.global||{},o=t.__TEXT_CACHE||{};t.__TEXT_CACHE={}}).call(this)}).call(this,g("_process"))},{_process:5,"vectorize-text":311}],304:[function(g,b,y){"use strict";var e=g("parse-unit");function r(o,n){var m=e(getComputedStyle(o).getPropertyValue(n));return m[0]*t(m[1],o)}function t(o,n){switch(n=n||document.body,o=(o||"px").trim().toLowerCase(),n!==window&&n!==document||(n=document.body),o){case"%":return n.clientHeight/100;case"ch":case"ex":return function(m,l){var i=document.createElement("div");i.style["font-size"]="128"+m,l.appendChild(i);var f=r(i,"font-size")/128;return l.removeChild(i),f}(o,n);case"em":return r(n,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}b.exports=t},{"parse-unit":265}],305:[function(g,b,y){"use strict";b.exports=function(h){var a=(h=h||{}).center||[0,0,0],_=h.up||[0,1,0],c=h.right||f(_),T=h.radius||1,x=h.theta||0,w=h.phi||0;if(a=[].slice.call(a,0,3),_=[].slice.call(_,0,3),n(_,_),c=[].slice.call(c,0,3),n(c,c),"eye"in h){var M=h.eye,D=[M[0]-a[0],M[1]-a[1],M[2]-a[2]];o(c,D,_),l(c[0],c[1],c[2])<1e-6?c=f(_):n(c,c),T=l(D[0],D[1],D[2]);var C=m(_,D)/T,P=m(c,D)/T;w=Math.acos(C),x=Math.acos(P)}return T=Math.log(T),new u(h.zoomMin,h.zoomMax,a,_,c,T,x,w)};var e=g("filtered-vector"),r=g("gl-mat4/invert"),t=g("gl-mat4/rotate"),o=g("gl-vec3/cross"),n=g("gl-vec3/normalize"),m=g("gl-vec3/dot");function l(h,a,_){return Math.sqrt(Math.pow(h,2)+Math.pow(a,2)+Math.pow(_,2))}function i(h){return Math.min(1,Math.max(-1,h))}function f(h){var a=Math.abs(h[0]),_=Math.abs(h[1]),c=Math.abs(h[2]),T=[0,0,0];a>Math.max(_,c)?T[2]=1:_>Math.max(a,c)?T[0]=1:T[1]=1;for(var x=0,w=0,M=0;M<3;++M)x+=h[M]*h[M],w+=T[M]*h[M];for(M=0;M<3;++M)T[M]-=w/x*h[M];return n(T,T),T}function u(h,a,_,c,T,x,w,M){this.center=e(_),this.up=e(c),this.right=e(T),this.radius=e([x]),this.angle=e([w,M]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(h,a),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var D=0;D<16;++D)this.computedMatrix[D]=.5;this.recalcMatrix(0)}var s=u.prototype;s.setDistanceLimits=function(h,a){h=h>0?Math.log(h):-1/0,a=a>0?Math.log(a):1/0,a=Math.max(a,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=a},s.getDistanceLimits=function(h){var a=this.radius.bounds[0];return h?(h[0]=Math.exp(a[0][0]),h[1]=Math.exp(a[1][0]),h):[Math.exp(a[0][0]),Math.exp(a[1][0])]},s.recalcMatrix=function(h){this.center.curve(h),this.up.curve(h),this.right.curve(h),this.radius.curve(h),this.angle.curve(h);for(var a=this.computedUp,_=this.computedRight,c=0,T=0,x=0;x<3;++x)T+=a[x]*_[x],c+=a[x]*a[x];var w=Math.sqrt(c),M=0;for(x=0;x<3;++x)_[x]-=a[x]*T/c,M+=_[x]*_[x],a[x]/=w;var D=Math.sqrt(M);for(x=0;x<3;++x)_[x]/=D;var C=this.computedToward;o(C,a,_),n(C,C);var P=Math.exp(this.computedRadius[0]),L=this.computedAngle[0],S=this.computedAngle[1],E=Math.cos(L),N=Math.sin(L),z=Math.cos(S),q=Math.sin(S),G=this.computedCenter,K=E*z,ne=N*z,X=q,J=-E*q,se=-N*q,V=z,j=this.computedEye,H=this.computedMatrix;for(x=0;x<3;++x){var oe=K*_[x]+ne*C[x]+X*a[x];H[4*x+1]=J*_[x]+se*C[x]+V*a[x],H[4*x+2]=oe,H[4*x+3]=0}var U=H[1],te=H[5],ee=H[9],le=H[2],ce=H[6],pe=H[10],de=te*pe-ee*ce,be=ee*le-U*pe,he=U*ce-te*le,xe=l(de,be,he);for(be/=xe,he/=xe,H[0]=de/=xe,H[4]=be,H[8]=he,x=0;x<3;++x)j[x]=G[x]+H[2+4*x]*P;for(x=0;x<3;++x){M=0;for(var De=0;De<3;++De)M+=H[x+4*De]*j[De];H[12+x]=-M}H[15]=1},s.getMatrix=function(h,a){this.recalcMatrix(h);var _=this.computedMatrix;if(a){for(var c=0;c<16;++c)a[c]=_[c];return a}return _};var d=[0,0,0];s.rotate=function(h,a,_,c){if(this.angle.move(h,a,_),c){this.recalcMatrix(h);var T=this.computedMatrix;d[0]=T[2],d[1]=T[6],d[2]=T[10];for(var x=this.computedUp,w=this.computedRight,M=this.computedToward,D=0;D<3;++D)T[4*D]=x[D],T[4*D+1]=w[D],T[4*D+2]=M[D];for(t(T,T,c,d),D=0;D<3;++D)x[D]=T[4*D],w[D]=T[4*D+1];this.up.set(h,x[0],x[1],x[2]),this.right.set(h,w[0],w[1],w[2])}},s.pan=function(h,a,_,c){a=a||0,_=_||0,c=c||0,this.recalcMatrix(h);var T=this.computedMatrix,x=(Math.exp(this.computedRadius[0]),T[1]),w=T[5],M=T[9],D=l(x,w,M),C=T[0],P=T[4],L=T[8],S=C*(x/=D)+P*(w/=D)+L*(M/=D),E=l(C-=x*S,P-=w*S,L-=M*S),N=(C/=E)*a+x*_,z=(P/=E)*a+w*_,q=(L/=E)*a+M*_;this.center.move(h,N,z,q);var G=Math.exp(this.computedRadius[0]);G=Math.max(1e-4,G+c),this.radius.set(h,Math.log(G))},s.translate=function(h,a,_,c){this.center.move(h,a||0,_||0,c||0)},s.setMatrix=function(h,a,_,c){var T=1;"number"==typeof _&&(T=0|_),(T<0||T>3)&&(T=1);var x=(T+2)%3;a||(this.recalcMatrix(h),a=this.computedMatrix);var w=a[T],M=a[T+4],D=a[T+8];if(c){var C=Math.abs(w),P=Math.abs(M),L=Math.abs(D),S=Math.max(C,P,L);C===S?(w=w<0?-1:1,M=D=0):L===S?(D=D<0?-1:1,w=M=0):(M=M<0?-1:1,w=D=0)}else{var E=l(w,M,D);w/=E,M/=E,D/=E}var N,z,q=a[x],G=a[x+4],K=a[x+8],ne=q*w+G*M+K*D,X=l(q-=w*ne,G-=M*ne,K-=D*ne),J=M*(K/=X)-D*(G/=X),se=D*(q/=X)-w*K,V=w*G-M*q,j=l(J,se,V);if(J/=j,se/=j,V/=j,this.center.jump(h,ve,Te,Le),this.radius.idle(h),this.up.jump(h,w,M,D),this.right.jump(h,q,G,K),2===T){var H=a[1],oe=a[5],U=a[9];N=de<0?-Math.PI/2:Math.PI/2,z=Math.atan2(H*J+oe*se+U*V,H*q+oe*G+U*K)}else{var le=a[2],ce=a[6],pe=a[10],de=le*w+ce*M+pe*D,be=le*q+ce*G+pe*K,he=le*J+ce*se+pe*V;N=Math.asin(i(de)),z=Math.atan2(he,be)}this.angle.jump(h,z,N),this.recalcMatrix(h);var xe=a[2],De=a[6],Se=a[10],ke=this.computedMatrix;r(ke,a);var Fe=ke[15],ve=ke[12]/Fe,Te=ke[13]/Fe,Le=ke[14]/Fe,Oe=Math.exp(this.computedRadius[0]);this.center.jump(h,ve-xe*Oe,Te-De*Oe,Le-Se*Oe)},s.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},s.idle=function(h){this.center.idle(h),this.up.idle(h),this.right.idle(h),this.radius.idle(h),this.angle.idle(h)},s.flush=function(h){this.center.flush(h),this.up.flush(h),this.right.flush(h),this.radius.flush(h),this.angle.flush(h)},s.setDistance=function(h,a){a>0&&this.radius.set(h,Math.log(a))},s.lookAt=function(h,a,_,c){this.recalcMatrix(h),a=a||this.computedEye,_=_||this.computedCenter;var T=(c=c||this.computedUp)[0],x=c[1],w=c[2],M=l(T,x,w);if(!(M<1e-6)){T/=M,x/=M,w/=M;var D=a[0]-_[0],C=a[1]-_[1],P=a[2]-_[2],L=l(D,C,P);if(!(L<1e-6)){D/=L,C/=L,P/=L;var S=this.computedRight,E=S[0],N=S[1],z=S[2],q=T*E+x*N+w*z,G=l(E-=q*T,N-=q*x,z-=q*w);if(!(G<.01&&(G=l(E=x*P-w*C,N=w*D-T*P,z=T*C-x*D))<1e-6)){E/=G,N/=G,z/=G,this.up.set(h,T,x,w),this.right.set(h,E,N,z),this.center.set(h,_[0],_[1],_[2]),this.radius.set(h,Math.log(L));var K=x*z-w*N,ne=w*E-T*z,X=T*N-x*E,J=l(K,ne,X),V=E*D+N*C+z*P,j=(K/=J)*D+(ne/=J)*C+(X/=J)*P,H=Math.asin(i(T*D+x*C+w*P)),oe=Math.atan2(j,V),U=this.angle._state,te=U[U.length-1],ee=U[U.length-2];te%=2*Math.PI;var le=Math.abs(te+2*Math.PI-oe),ce=Math.abs(te-oe),pe=Math.abs(te-2*Math.PI-oe);le<ce&&(te+=2*Math.PI),pe<ce&&(te-=2*Math.PI),this.angle.jump(this.angle.lastT(),te,ee),this.angle.set(h,oe,H)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(g,b,y){"use strict";b.exports=function(r,t,o){var n=r*t,m=e*r,l=m-(m-r),i=r-l,f=e*t,u=f-(f-t),s=t-u,d=i*s-(n-l*u-i*u-l*s);return o?(o[0]=d,o[1]=n,o):[d,n]};var e=+(Math.pow(2,27)+1)},{}],307:[function(g,b,y){"use strict";b.exports=function(e,r,t){var o=e+r,n=o-e,m=r-n,l=e-(o-n);return t?(t[0]=l+m,t[1]=o,t):[l+m,o]}},{}],308:[function(g,b,y){(function(e){(function(){"use strict";var r=g("bit-twiddle"),t=g("dup"),o=g("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),BIGUINT64:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),BIGINT64:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var n=typeof Uint8ClampedArray<"u",m=typeof BigUint64Array<"u",l=typeof BigInt64Array<"u",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=t([32,0])),i.BIGUINT64||(i.BIGUINT64=t([32,0])),i.BIGINT64||(i.BIGINT64=t([32,0])),i.BUFFER||(i.BUFFER=t([32,0]));var f=i.DATA,u=i.BUFFER;function s(E){if(E){var z=r.log2(E.length||E.byteLength);f[z].push(E)}}function d(E){E=r.nextPow2(E);var N=r.log2(E),z=f[N];return z.length>0?z.pop():new ArrayBuffer(E)}function h(E){return new Uint8Array(d(E),0,E)}function a(E){return new Uint16Array(d(2*E),0,E)}function _(E){return new Uint32Array(d(4*E),0,E)}function c(E){return new Int8Array(d(E),0,E)}function T(E){return new Int16Array(d(2*E),0,E)}function x(E){return new Int32Array(d(4*E),0,E)}function w(E){return new Float32Array(d(4*E),0,E)}function M(E){return new Float64Array(d(8*E),0,E)}function D(E){return n?new Uint8ClampedArray(d(E),0,E):h(E)}function C(E){return m?new BigUint64Array(d(8*E),0,E):null}function P(E){return l?new BigInt64Array(d(8*E),0,E):null}function L(E){return new DataView(d(E),0,E)}function S(E){E=r.nextPow2(E);var N=r.log2(E),z=u[N];return z.length>0?z.pop():new o(E)}y.free=function(E){if(o.isBuffer(E))u[r.log2(E.length)].push(E);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(E)&&(E=E.buffer),!E)return;var z=0|r.log2(E.length||E.byteLength);f[z].push(E)}},y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=function(E){s(E.buffer)},y.freeArrayBuffer=s,y.freeBuffer=function(E){u[r.log2(E.length)].push(E)},y.malloc=function(E,N){if(void 0===N||"arraybuffer"===N)return d(E);switch(N){case"uint8":return h(E);case"uint16":return a(E);case"uint32":return _(E);case"int8":return c(E);case"int16":return T(E);case"int32":return x(E);case"float":case"float32":return w(E);case"double":case"float64":return M(E);case"uint8_clamped":return D(E);case"bigint64":return P(E);case"biguint64":return C(E);case"buffer":return S(E);case"data":case"dataview":return L(E);default:return null}return null},y.mallocArrayBuffer=d,y.mallocUint8=h,y.mallocUint16=a,y.mallocUint32=_,y.mallocInt8=c,y.mallocInt16=T,y.mallocInt32=x,y.mallocFloat32=y.mallocFloat=w,y.mallocFloat64=y.mallocDouble=M,y.mallocUint8Clamped=D,y.mallocBigUint64=C,y.mallocBigInt64=P,y.mallocDataView=L,y.mallocBuffer=S,y.clearCache=function(){for(var E=0;E<32;++E)i.UINT8[E].length=0,i.UINT16[E].length=0,i.UINT32[E].length=0,i.INT8[E].length=0,i.INT16[E].length=0,i.INT32[E].length=0,i.FLOAT[E].length=0,i.DOUBLE[E].length=0,i.BIGUINT64[E].length=0,i.BIGINT64[E].length=0,i.UINT8C[E].length=0,f[E].length=0,u[E].length=0}}).call(this)}).call(this,void 0!==p?p:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(g,b,y){"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var o=0;o<t;++o)this.roots[o]=o,this.ranks[o]=0}b.exports=e;var r=e.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var o=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[o]!==t;){var m=n[o];n[o]=t,o=m}return t},r.link=function(t,o){var n=this.find(t),m=this.find(o);if(n!==m){var l=this.ranks,i=this.roots,f=l[n],u=l[m];f<u?i[n]=m:u<f?i[m]=n:(i[m]=n,++l[n])}}},{}],310:[function(g,b,y){"use strict";b.exports=function(e,r,t){return 0===e.length?e:r?(t||e.sort(r),function(o,n){for(var m=1,l=o.length,i=o[0],f=o[0],u=1;u<l;++u)if(f=i,n(i=o[u],f)){if(u===m){m++;continue}o[m++]=i}return o.length=m,o}(e,r)):(t||e.sort(),function(o){for(var n=1,m=o.length,l=o[0],i=o[0],f=1;f<m;++f,i=l)if(i=l,(l=o[f])!==i){if(f===n){n++;continue}o[n++]=l}return o.length=n,o}(e))}},{}],311:[function(g,b,y){"use strict";b.exports=function(o,n){return"object"==typeof n&&null!==n||(n={}),e(o,n.canvas||r,n.context||t,n)};var e=g("./lib/vtext"),r=null,t=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,t=r.getContext("2d"))},{"./lib/vtext":312}],312:[function(g,b,y){b.exports=function(s,d,h,a){var _=64,c=1.25,T={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return a&&(a.size&&a.size>0&&(_=a.size),a.lineSpacing&&a.lineSpacing>0&&(c=a.lineSpacing),a.styletags&&a.styletags.breaklines&&(T.breaklines=!!a.styletags.breaklines),a.styletags&&a.styletags.bolds&&(T.bolds=!!a.styletags.bolds),a.styletags&&a.styletags.italics&&(T.italics=!!a.styletags.italics),a.styletags&&a.styletags.subscripts&&(T.subscripts=!!a.styletags.subscripts),a.styletags&&a.styletags.superscripts&&(T.superscripts=!!a.styletags.superscripts)),h.font=[a.fontStyle,a.fontVariant,a.fontWeight,_+"px",a.font].filter(function(x){return x}).join(" "),h.textAlign="start",h.textBaseline="alphabetic",h.direction="ltr",u(function(x,w,M,D,C,P){M=(M=M.replace(/\n/g,"")).replace(/\<br\>/g,!0===P.breaklines?"\n":" ");var L="",S=[];for(q=0;q<M.length;++q)S[q]=L;!0===P.bolds&&(S=l("b","b|",M,S)),!0===P.italics&&(S=l("i","i|",M,S)),!0===P.superscripts&&(S=l("sup","+1",M,S)),!0===P.subscripts&&(S=l("sub","-1",M,S));var E=[],N="";for(q=0;q<M.length;++q)null!==S[q]&&(N+=M[q],E.push(S[q]));var z,q,G,K,ne,X=N.split("\n"),J=X.length,se=Math.round(C*D),V=D,j=2*D,H=0,oe=J*se+j;x.height<oe&&(x.height=oe),w.fillStyle="#000",w.fillRect(0,0,x.width,x.height),w.fillStyle="#fff";var U=0,te="";function ee(){if(""!==te){var De=w.measureText(te).width;w.fillText(te,V+G,j+K),G+=De}}function le(){return Math.round(ne)+"px "}function ce(De,Se){var ke=""+w.font;if(!0===P.subscripts){var Fe=De.indexOf("-"),ve=Se.indexOf("-"),Te=Fe>-1?parseInt(De[1+Fe]):0,Le=ve>-1?parseInt(Se[1+ve]):0;Te!==Le&&(ke=ke.replace(le(),"?px "),ne*=Math.pow(.75,Le-Te),ke=ke.replace("?px ",le())),K+=.25*se*(Le-Te)}if(!0===P.superscripts){var Oe=De.indexOf("+"),Ne=Se.indexOf("+"),Be=Oe>-1?parseInt(De[1+Oe]):0,He=Ne>-1?parseInt(Se[1+Ne]):0;Be!==He&&(ke=ke.replace(le(),"?px "),ne*=Math.pow(.75,He-Be),ke=ke.replace("?px ",le())),K-=.25*se*(He-Be)}if(!0===P.bolds){var Ve=De.indexOf("b|")>-1,it=Se.indexOf("b|")>-1;!Ve&&it&&(ke=ze?ke.replace("italic ","italic bold "):"bold "+ke),Ve&&!it&&(ke=ke.replace("bold ",""))}if(!0===P.italics){var ze=De.indexOf("i|")>-1,je=Se.indexOf("i|")>-1;!ze&&je&&(ke="italic "+ke),ze&&!je&&(ke=ke.replace("italic ",""))}w.font=ke}for(z=0;z<J;++z){var pe=X[z]+"\n";for(G=0,K=z*se,ne=D,te="",q=0;q<pe.length;++q){var de=q+U<E.length?E[q+U]:E[E.length-1];L===de?te+=pe[q]:(ee(),te=pe[q],void 0!==de&&(ce(L,de),L=de))}ee(),U+=pe.length;var be=0|Math.round(G+2*V);H<be&&(H=be)}var he=H,xe=j+se*J;return r(w.getImageData(0,0,he,xe).data,[xe,he,4]).pick(-1,-1,0).transpose(1,0)}(d,h,s,_,c,T),a,_)},b.exports.processPixels=u;var e=g("surface-nets"),r=g("ndarray"),t=g("simplify-planar-graph"),o=g("clean-pslg"),n=g("cdt2d"),m=g("planar-graph-to-polyline");function l(s,d,h,a){for(var _="<"+s+">",c="</"+s+">",T=_.length,x=c.length,w="+"===d[0]||"-"===d[0],M=0,D=-x;M>-1&&-1!==(M=h.indexOf(_,M))&&-1!==(D=h.indexOf(c,M+T))&&!(D<=M);){for(var C=M;C<D+x;++C)if(C<M+T||C>=D)a[C]=null,h=h.substr(0,C)+" "+h.substr(C+1);else if(null!==a[C]){var P=a[C].indexOf(d[0]);-1===P?a[C]+=d:w&&(a[C]=a[C].substr(0,P+1)+(1+parseInt(a[C][P+1]))+a[C].substr(P+2))}var L=M+T,S=h.substr(L,D-L).indexOf(_);M=-1!==S?S:D+x}return a}function f(s,d,h,a){var _=function i(s,d){var h=e(s,128);return d?t(h.cells,h.positions,.25):{edges:h.cells,positions:h.positions}}(s,a),c=function(z,q,G){for(var K=q.textAlign||"start",ne=q.textBaseline||"alphabetic",X=[1<<30,1<<30],J=[0,0],se=z.length,V=0;V<se;++V)for(var j=z[V],H=0;H<2;++H)X[H]=0|Math.min(X[H],j[H]),J[H]=0|Math.max(J[H],j[H]);var oe=0;switch(K){case"center":oe=-.5*(X[0]+J[0]);break;case"right":case"end":oe=-J[0];break;case"left":case"start":oe=-X[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+K+"'")}var U=0;switch(ne){case"hanging":case"top":U=-X[1];break;case"middle":U=-.5*(X[1]+J[1]);break;case"alphabetic":case"ideographic":U=-3*G;break;case"bottom":U=-J[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+ne+"'")}var te=1/G;return"lineHeight"in q?te*=+q.lineHeight:"width"in q?te=q.width/(J[0]-X[0]):"height"in q&&(te=q.height/(J[1]-X[1])),z.map(function(ee){return[te*(ee[0]+oe),te*(ee[1]+U)]})}(_.positions,d,h),T=_.edges,x="ccw"===d.orientation;if(o(c,T),d.polygons||d.polygon||d.polyline){for(var w=m(T,c),M=new Array(w.length),D=0;D<w.length;++D){for(var C=w[D],P=new Array(C.length),L=0;L<C.length;++L){for(var S=C[L],E=new Array(S.length),N=0;N<S.length;++N)E[N]=c[S[N]].slice();x&&E.reverse(),P[L]=E}M[D]=P}return M}return d.triangles||d.triangulate||d.triangle?{cells:n(c,T,{delaunay:!1,exterior:!1,interior:!0}),positions:c}:{edges:T,positions:c}}function u(s,d,h){try{return f(s,d,h,!0)}catch{}try{return f(s,d,h,!1)}catch{}return d.polygons||d.polyline||d.polygon?[]:d.triangles||d.triangulate||d.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(g,b,y){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=_);var e=!1;if("function"==typeof WeakMap){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new r,o=Object.freeze({});if(t.set(o,1),1===t.get(o))return void(b.exports=WeakMap);e=!0}}var n=Object.getOwnPropertyNames,m=Object.defineProperty,l=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var f=new ArrayBuffer(25),u=new Uint8Array(f);crypto.getRandomValues(u),i="weakmap:rand:"+Array.prototype.map.call(u,function(M){return(M%36).toString(36)}).join("")+"___"}if(m(Object,"getOwnPropertyNames",{value:function(M){return n(M).filter(c)}}),"getPropertyNames"in Object){var s=Object.getPropertyNames;m(Object,"getPropertyNames",{value:function(M){return s(M).filter(c)}})}!function(){var M=Object.freeze;m(Object,"freeze",{value:function(P){return T(P),M(P)}});var D=Object.seal;m(Object,"seal",{value:function(P){return T(P),D(P)}});var C=Object.preventExtensions;m(Object,"preventExtensions",{value:function(P){return T(P),C(P)}})}();var d=!1,h=0,a=function(){this instanceof a||w();var M=[],D=[],C=h++;return Object.create(a.prototype,{get___:{value:x(function(P,L){var S,E=T(P);return E?C in E?E[C]:L:(S=M.indexOf(P))>=0?D[S]:L})},has___:{value:x(function(P){var L=T(P);return L?C in L:M.indexOf(P)>=0})},set___:{value:x(function(P,L){var S,E=T(P);return E?E[C]=L:(S=M.indexOf(P))>=0?D[S]=L:(D[S=M.length]=L,M[S]=P),this})},delete___:{value:x(function(P){var L,S,E=T(P);return E?C in E&&delete E[C]:!((L=M.indexOf(P))<0||(S=M.length-1,M[L]=void 0,D[L]=D[S],M[L]=M[S],M.length=S,D.length=S,0))})}})};a.prototype=Object.create(Object.prototype,{get:{value:function(M,D){return this.get___(M,D)},writable:!0,configurable:!0},has:{value:function(M){return this.has___(M)},writable:!0,configurable:!0},set:{value:function(M,D){return this.set___(M,D)},writable:!0,configurable:!0},delete:{value:function(M){return this.delete___(M)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function M(){this instanceof a||w();var D,C=new r,P=void 0,L=!1;return D=e?function(S,E){return C.set(S,E),C.has(S)||(P||(P=new a),P.set(S,E)),this}:function(S,E){if(L)try{C.set(S,E)}catch{P||(P=new a),P.set___(S,E)}else C.set(S,E);return this},Object.create(a.prototype,{get___:{value:x(function(S,E){return P?C.has(S)?C.get(S):P.get___(S,E):C.get(S,E)})},has___:{value:x(function(S){return C.has(S)||!!P&&P.has___(S)})},set___:{value:x(D)},delete___:{value:x(function(S){var E=!!C.delete(S);return P&&P.delete___(S)||E})},permitHostObjects___:{value:x(function(S){if(S!==_)throw new Error("bogus call to permitHostObjects___");L=!0})}})}e&&typeof Proxy<"u"&&(Proxy=void 0),M.prototype=a.prototype,b.exports=M,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),b.exports=a)}function _(M){M.permitHostObjects___&&M.permitHostObjects___(_)}function c(M){return!("weakmap:"==M.substr(0,8)&&"___"===M.substr(M.length-3))}function T(M){if(M!==Object(M))throw new TypeError("Not an object: "+M);var D=M[i];if(D&&D.key===M)return D;if(l(M)){D={key:M};try{return m(M,i,{value:D,writable:!1,enumerable:!1,configurable:!1}),D}catch{return}}}function x(M){return M.prototype=null,Object.freeze(M)}function w(){d||typeof console>"u"||(d=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(g,b,y){var e=g("./hidden-store.js");b.exports=function(){var r={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var o=t.valueOf(r);return o&&o.identity===r?o:e(t,r)}}},{"./hidden-store.js":315}],315:[function(g,b,y){b.exports=function(e,r){var t={identity:r},o=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(n){return n!==r?o.apply(this,arguments):t},writable:!0}),t}},{}],316:[function(g,b,y){var e=g("./create-store.js");b.exports=function(){var r=e();return{get:function(t,o){var n=r(t);return n.hasOwnProperty("value")?n.value:o},set:function(t,o){return r(t).value=o,this},has:function(t){return"value"in r(t)},delete:function(t){return delete r(t).value}}}},{"./create-store.js":314}],317:[function(g,b,y){"use strict";var t,o;b.exports=(t=function(){return function(t,o,n,m,l,i){var f=t[0],u=n[0],s=[0],d=u;m|=0;var h=0,a=u;for(h=0;h<f;++h){var _=o[m]-i,c=o[m+d]-i;_>=0!=c>=0&&l.push(s[0]+.5+.5*(_+c)/(_-c)),m+=a,++s[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),o={},function(n,m,l){var i=n.dtype,f=n.order,u=[i,f.join()].join(),s=o[u];return s||(o[u]=s=t([i,f])),s(n.shape.slice(0),n.data,n.stride,0|n.offset,m,l)})},{}],318:[function(g,b,y){"use strict";b.exports=function(r,t){var o=[];return t=+t||0,e(r.hi(r.shape[0]-1),o,t),o};var e=g("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)},2228:function(vd){vd.exports=function(){"use strict";var v={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const ie=Je=>{const at={};for(const Bt in Je)at[Je[Bt]]="swal2-"+Je[Bt];return at},p=ie(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),g=ie(["success","warning","info","question","error"]),b="SweetAlert2:",e=Je=>Je.charAt(0).toUpperCase()+Je.slice(1),r=Je=>{console.warn(`${b} ${"object"==typeof Je?Je.join(" "):Je}`)},t=Je=>{console.error(`${b} ${Je}`)},o=[],m=(Je,at)=>{(Je=>{o.includes(Je)||(o.push(Je),r(Je))})(`"${Je}" is deprecated and will be removed in the next major release. Please use "${at}" instead.`)},l=Je=>"function"==typeof Je?Je():Je,i=Je=>Je&&"function"==typeof Je.toPromise,f=Je=>i(Je)?Je.toPromise():Promise.resolve(Je),u=Je=>Je&&Promise.resolve(Je)===Je,s=()=>document.body.querySelector(`.${p.container}`),d=Je=>{const at=s();return at?at.querySelector(Je):null},h=Je=>d(`.${Je}`),a=()=>h(p.popup),_=()=>h(p.icon),T=()=>h(p.title),x=()=>h(p["html-container"]),w=()=>h(p.image),M=()=>h(p["progress-steps"]),D=()=>h(p["validation-message"]),C=()=>d(`.${p.actions} .${p.confirm}`),P=()=>d(`.${p.actions} .${p.cancel}`),L=()=>d(`.${p.actions} .${p.deny}`),E=()=>d(`.${p.loader}`),N=()=>h(p.actions),z=()=>h(p.footer),q=()=>h(p["timer-progress-bar"]),G=()=>h(p.close),ne=()=>{const Je=Array.from(a().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((Bt,Cn)=>{const dr=parseInt(Bt.getAttribute("tabindex")),cr=parseInt(Cn.getAttribute("tabindex"));return dr>cr?1:dr<cr?-1:0}),at=Array.from(a().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(Bt=>"-1"!==Bt.getAttribute("tabindex"));return(Je=>{const at=[];for(let Bt=0;Bt<Je.length;Bt++)-1===at.indexOf(Je[Bt])&&at.push(Je[Bt]);return at})(Je.concat(at)).filter(Bt=>ke(Bt))},X=()=>H(document.body,p.shown)&&!H(document.body,p["toast-shown"])&&!H(document.body,p["no-backdrop"]),J=()=>a()&&H(a(),p.toast),V={previousBodyPadding:null},j=(Je,at)=>{if(Je.textContent="",at){const Cn=(new DOMParser).parseFromString(at,"text/html");Array.from(Cn.querySelector("head").childNodes).forEach(dr=>{Je.appendChild(dr)}),Array.from(Cn.querySelector("body").childNodes).forEach(dr=>{dr instanceof HTMLVideoElement||dr instanceof HTMLAudioElement?Je.appendChild(dr.cloneNode(!0)):Je.appendChild(dr)})}},H=(Je,at)=>{if(!at)return!1;const Bt=at.split(/\s+/);for(let Cn=0;Cn<Bt.length;Cn++)if(!Je.classList.contains(Bt[Cn]))return!1;return!0},U=(Je,at,Bt)=>{if(((Je,at)=>{Array.from(Je.classList).forEach(Bt=>{!Object.values(p).includes(Bt)&&!Object.values(g).includes(Bt)&&!Object.values(at.showClass).includes(Bt)&&Je.classList.remove(Bt)})})(Je,at),at.customClass&&at.customClass[Bt]){if("string"!=typeof at.customClass[Bt]&&!at.customClass[Bt].forEach)return void r(`Invalid type of customClass.${Bt}! Expected string or iterable object, got "${typeof at.customClass[Bt]}"`);ce(Je,at.customClass[Bt])}},te=(Je,at)=>{if(!at)return null;switch(at){case"select":case"textarea":case"file":return Je.querySelector(`.${p.popup} > .${p[at]}`);case"checkbox":return Je.querySelector(`.${p.popup} > .${p.checkbox} input`);case"radio":return Je.querySelector(`.${p.popup} > .${p.radio} input:checked`)||Je.querySelector(`.${p.popup} > .${p.radio} input:first-child`);case"range":return Je.querySelector(`.${p.popup} > .${p.range} input`);default:return Je.querySelector(`.${p.popup} > .${p.input}`)}},ee=Je=>{if(Je.focus(),"file"!==Je.type){const at=Je.value;Je.value="",Je.value=at}},le=(Je,at,Bt)=>{!Je||!at||("string"==typeof at&&(at=at.split(/\s+/).filter(Boolean)),at.forEach(Cn=>{Array.isArray(Je)?Je.forEach(dr=>{Bt?dr.classList.add(Cn):dr.classList.remove(Cn)}):Bt?Je.classList.add(Cn):Je.classList.remove(Cn)}))},ce=(Je,at)=>{le(Je,at,!0)},pe=(Je,at)=>{le(Je,at,!1)},de=(Je,at)=>{const Bt=Array.from(Je.children);for(let Cn=0;Cn<Bt.length;Cn++){const dr=Bt[Cn];if(dr instanceof HTMLElement&&H(dr,at))return dr}},be=(Je,at,Bt)=>{Bt===`${parseInt(Bt)}`&&(Bt=parseInt(Bt)),Bt||0===parseInt(Bt)?Je.style[at]="number"==typeof Bt?`${Bt}px`:Bt:Je.style.removeProperty(at)},he=function(Je){Je.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},xe=Je=>{Je.style.display="none"},De=(Je,at,Bt,Cn)=>{const dr=Je.querySelector(at);dr&&(dr.style[Bt]=Cn)},Se=function(Je,at){at?he(Je,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):xe(Je)},ke=Je=>!(!Je||!(Je.offsetWidth||Je.offsetHeight||Je.getClientRects().length)),ve=Je=>Je.scrollHeight>Je.clientHeight,Te=Je=>{const at=window.getComputedStyle(Je),Bt=parseFloat(at.getPropertyValue("animation-duration")||"0"),Cn=parseFloat(at.getPropertyValue("transition-duration")||"0");return Bt>0||Cn>0},Le=function(Je){let at=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Bt=q();ke(Bt)&&(at&&(Bt.style.transition="none",Bt.style.width="100%"),setTimeout(()=>{Bt.style.transition=`width ${Je/1e3}s linear`,Bt.style.width="0%"},10))},Be={},Ve=Je=>new Promise(at=>{if(!Je)return at();const Bt=window.scrollX,Cn=window.scrollY;Be.restoreFocusTimeout=setTimeout(()=>{Be.previousActiveElement instanceof HTMLElement?(Be.previousActiveElement.focus(),Be.previousActiveElement=null):document.body&&document.body.focus(),at()},100),window.scrollTo(Bt,Cn)}),it=()=>typeof window>"u"||typeof document>"u",ze=`\n <div aria-labelledby="${p.title}" aria-describedby="${p["html-container"]}" class="${p.popup}" tabindex="-1">\n   <button type="button" class="${p.close}"></button>\n   <ul class="${p["progress-steps"]}"></ul>\n   <div class="${p.icon}"></div>\n   <img class="${p.image}" />\n   <h2 class="${p.title}" id="${p.title}"></h2>\n   <div class="${p["html-container"]}" id="${p["html-container"]}"></div>\n   <input class="${p.input}" />\n   <input type="file" class="${p.file}" />\n   <div class="${p.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${p.select}"></select>\n   <div class="${p.radio}"></div>\n   <label for="${p.checkbox}" class="${p.checkbox}">\n     <input type="checkbox" />\n     <span class="${p.label}"></span>\n   </label>\n   <textarea class="${p.textarea}"></textarea>\n   <div class="${p["validation-message"]}" id="${p["validation-message"]}"></div>\n   <div class="${p.actions}">\n     <div class="${p.loader}"></div>\n     <button type="button" class="${p.confirm}"></button>\n     <button type="button" class="${p.deny}"></button>\n     <button type="button" class="${p.cancel}"></button>\n   </div>\n   <div class="${p.footer}"></div>\n   <div class="${p["timer-progress-bar-container"]}">\n     <div class="${p["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),qe=()=>{Be.currentInstance.resetValidationMessage()},Ot=Je=>{const at=(()=>{const Je=s();return!!Je&&(Je.remove(),pe([document.documentElement,document.body],[p["no-backdrop"],p["toast-shown"],p["has-column"]]),!0)})();if(it())return void t("SweetAlert2 requires document to initialize");const Bt=document.createElement("div");Bt.className=p.container,at&&ce(Bt,p["no-transition"]),j(Bt,ze);const Cn=(Je=>"string"==typeof Je?document.querySelector(Je):Je)(Je.target);Cn.appendChild(Bt),(Je=>{const at=a();at.setAttribute("role",Je.toast?"alert":"dialog"),at.setAttribute("aria-live",Je.toast?"polite":"assertive"),Je.toast||at.setAttribute("aria-modal","true")})(Je),(Je=>{"rtl"===window.getComputedStyle(Je).direction&&ce(s(),p.rtl)})(Cn),(()=>{const Je=a(),at=de(Je,p.input),Bt=de(Je,p.file),Cn=Je.querySelector(`.${p.range} input`),dr=Je.querySelector(`.${p.range} output`),cr=de(Je,p.select),ki=Je.querySelector(`.${p.checkbox} input`),Di=de(Je,p.textarea);at.oninput=qe,Bt.onchange=qe,cr.onchange=qe,ki.onchange=qe,Di.oninput=qe,Cn.oninput=()=>{qe(),dr.value=Cn.value},Cn.onchange=()=>{qe(),dr.value=Cn.value}})()},St=(Je,at)=>{Je instanceof HTMLElement?at.appendChild(Je):"object"==typeof Je?ft(Je,at):Je&&j(at,Je)},ft=(Je,at)=>{Je.jquery?st(at,Je):j(at,Je.toString())},st=(Je,at)=>{if(Je.textContent="",0 in at)for(let Bt=0;Bt in at;Bt++)Je.appendChild(at[Bt].cloneNode(!0));else Je.appendChild(at.cloneNode(!0))},Ct=(()=>{if(it())return!1;const Je=document.createElement("div"),at={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const Bt in at)if(Object.prototype.hasOwnProperty.call(at,Bt)&&typeof Je.style[Bt]<"u")return at[Bt];return!1})(),rn=(Je,at)=>{const Bt=N(),Cn=E();at.showConfirmButton||at.showDenyButton||at.showCancelButton?he(Bt):xe(Bt),U(Bt,at,"actions"),function hn(Je,at,Bt){const Cn=C(),dr=L(),cr=P();mn(Cn,"confirm",Bt),mn(dr,"deny",Bt),mn(cr,"cancel",Bt),function cn(Je,at,Bt,Cn){Cn.buttonsStyling?(ce([Je,at,Bt],p.styled),Cn.confirmButtonColor&&(Je.style.backgroundColor=Cn.confirmButtonColor,ce(Je,p["default-outline"])),Cn.denyButtonColor&&(at.style.backgroundColor=Cn.denyButtonColor,ce(at,p["default-outline"])),Cn.cancelButtonColor&&(Bt.style.backgroundColor=Cn.cancelButtonColor,ce(Bt,p["default-outline"]))):pe([Je,at,Bt],p.styled)}(Cn,dr,cr,Bt),Bt.reverseButtons&&(Bt.toast?(Je.insertBefore(cr,Cn),Je.insertBefore(dr,Cn)):(Je.insertBefore(cr,at),Je.insertBefore(dr,at),Je.insertBefore(Cn,at)))}(Bt,Cn,at),j(Cn,at.loaderHtml),U(Cn,at,"loader")};function mn(Je,at,Bt){Se(Je,Bt[`show${e(at)}Button`],"inline-block"),j(Je,Bt[`${at}ButtonText`]),Je.setAttribute("aria-label",Bt[`${at}ButtonAriaLabel`]),Je.className=p[at],U(Je,Bt,`${at}Button`),ce(Je,Bt[`${at}ButtonClass`])}const Xe=(Je,at)=>{const Bt=s();!Bt||(function nt(Je,at){"string"==typeof at?Je.style.background=at:at||ce([document.documentElement,document.body],p["no-backdrop"])}(Bt,at.backdrop),function ye(Je,at){at in p?ce(Je,p[at]):(r('The "position" parameter is not valid, defaulting to "center"'),ce(Je,p.center))}(Bt,at.position),function Ce(Je,at){if(at&&"string"==typeof at){const Bt=`grow-${at}`;Bt in p&&ce(Je,p[Bt])}}(Bt,at.grow),U(Bt,at,"container"))};const Ue=["input","file","range","select","radio","checkbox","textarea"],rt=Je=>{if(!Yt[Je.input])return void t(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${Je.input}"`);const at=dt(Je.input),Bt=Yt[Je.input](at,Je);he(at),Je.inputAutoFocus&&setTimeout(()=>{ee(Bt)})},gt=(Je,at)=>{const Bt=te(a(),Je);if(Bt){(Je=>{for(let at=0;at<Je.attributes.length;at++){const Bt=Je.attributes[at].name;["type","value","style"].includes(Bt)||Je.removeAttribute(Bt)}})(Bt);for(const Cn in at)Bt.setAttribute(Cn,at[Cn])}},mt=Je=>{const at=dt(Je.input);"object"==typeof Je.customClass&&ce(at,Je.customClass.input)},Lt=(Je,at)=>{(!Je.placeholder||at.inputPlaceholder)&&(Je.placeholder=at.inputPlaceholder)},Vt=(Je,at,Bt)=>{if(Bt.inputLabel){Je.id=p.input;const Cn=document.createElement("label"),dr=p["input-label"];Cn.setAttribute("for",Je.id),Cn.className=dr,"object"==typeof Bt.customClass&&ce(Cn,Bt.customClass.inputLabel),Cn.innerText=Bt.inputLabel,at.insertAdjacentElement("beforebegin",Cn)}},dt=Je=>de(a(),p[Je]||p.input),bt=(Je,at)=>{["string","number"].includes(typeof at)?Je.value=`${at}`:u(at)||r(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof at}"`)},Yt={};Yt.text=Yt.email=Yt.password=Yt.number=Yt.tel=Yt.url=(Je,at)=>(bt(Je,at.inputValue),Vt(Je,Je,at),Lt(Je,at),Je.type=at.input,Je),Yt.file=(Je,at)=>(Vt(Je,Je,at),Lt(Je,at),Je),Yt.range=(Je,at)=>{const Bt=Je.querySelector("input"),Cn=Je.querySelector("output");return bt(Bt,at.inputValue),Bt.type=at.input,bt(Cn,at.inputValue),Vt(Bt,Je,at),Je},Yt.select=(Je,at)=>{if(Je.textContent="",at.inputPlaceholder){const Bt=document.createElement("option");j(Bt,at.inputPlaceholder),Bt.value="",Bt.disabled=!0,Bt.selected=!0,Je.appendChild(Bt)}return Vt(Je,Je,at),Je},Yt.radio=Je=>(Je.textContent="",Je),Yt.checkbox=(Je,at)=>{const Bt=te(a(),"checkbox");Bt.value="1",Bt.id=p.checkbox,Bt.checked=Boolean(at.inputValue);const Cn=Je.querySelector("span");return j(Cn,at.inputPlaceholder),Bt},Yt.textarea=(Je,at)=>{bt(Je,at.inputValue),Lt(Je,at),Vt(Je,Je,at);return setTimeout(()=>{if("MutationObserver"in window){const Cn=parseInt(window.getComputedStyle(a()).width);new MutationObserver(()=>{const cr=Je.offsetWidth+(Cn=>parseInt(window.getComputedStyle(Cn).marginLeft)+parseInt(window.getComputedStyle(Cn).marginRight))(Je);a().style.width=cr>Cn?`${cr}px`:null}).observe(Je,{attributes:!0,attributeFilter:["style"]})}}),Je};const It=(Je,at)=>{const Bt=x();U(Bt,at,"htmlContainer"),at.html?(St(at.html,Bt),he(Bt,"block")):at.text?(Bt.textContent=at.text,he(Bt,"block")):xe(Bt),((Je,at)=>{const Bt=a(),Cn=v.innerParams.get(Je),dr=!Cn||at.input!==Cn.input;Ue.forEach(cr=>{const ki=de(Bt,p[cr]);gt(cr,at.inputAttributes),ki.className=p[cr],dr&&xe(ki)}),at.input&&(dr&&rt(at),mt(at))})(Je,at)},et=(Je,at)=>{for(const Bt in g)at.icon!==Bt&&pe(Je,g[Bt]);ce(Je,g[at.icon]),tn(Je,at),ht(),U(Je,at,"icon")},ht=()=>{const Je=a(),at=window.getComputedStyle(Je).getPropertyValue("background-color"),Bt=Je.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let Cn=0;Cn<Bt.length;Cn++)Bt[Cn].style.backgroundColor=at},Xt=(Je,at)=>{let Cn,Bt=Je.innerHTML;at.iconHtml?Cn=Kt(at.iconHtml):"success"===at.icon?(Cn='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Bt=Bt.replace(/ style=".*?"/g,"")):Cn="error"===at.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Kt({question:"?",warning:"!",info:"i"}[at.icon]),Bt.trim()!==Cn.trim()&&j(Je,Cn)},tn=(Je,at)=>{if(at.iconColor){Je.style.color=at.iconColor,Je.style.borderColor=at.iconColor;for(const Bt of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])De(Je,Bt,"backgroundColor",at.iconColor);De(Je,".swal2-success-ring","borderColor",at.iconColor)}},Kt=Je=>`<div class="${p["icon-content"]}">${Je}</div>`,Tn=(Je,at)=>{Je.className=`${p.popup} ${ke(Je)?at.showClass.popup:""}`,at.toast?(ce([document.documentElement,document.body],p["toast-shown"]),ce(Je,p.toast)):ce(Je,p.modal),U(Je,at,"popup"),"string"==typeof at.customClass&&ce(Je,at.customClass),at.icon&&ce(Je,p[`icon-${at.icon}`])},fn=Je=>{const at=document.createElement("li");return ce(at,p["progress-step"]),j(at,Je),at},dn=Je=>{const at=document.createElement("li");return ce(at,p["progress-step-line"]),Je.progressStepsDistance&&be(at,"width",Je.progressStepsDistance),at},En=(Je,at)=>{((Je,at)=>{const Bt=s(),Cn=a();at.toast?(be(Bt,"width",at.width),Cn.style.width="100%",Cn.insertBefore(E(),_())):be(Cn,"width",at.width),be(Cn,"padding",at.padding),at.color&&(Cn.style.color=at.color),at.background&&(Cn.style.background=at.background),xe(D()),Tn(Cn,at)})(0,at),Xe(0,at),((Je,at)=>{const Bt=M();at.progressSteps&&0!==at.progressSteps.length?(he(Bt),Bt.textContent="",at.currentProgressStep>=at.progressSteps.length&&r("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),at.progressSteps.forEach((Cn,dr)=>{const cr=fn(Cn);if(Bt.appendChild(cr),dr===at.currentProgressStep&&ce(cr,p["active-progress-step"]),dr!==at.progressSteps.length-1){const ki=dn(at);Bt.appendChild(ki)}})):xe(Bt)})(0,at),((Je,at)=>{const Bt=v.innerParams.get(Je),Cn=_();Bt&&at.icon===Bt.icon?(Xt(Cn,at),et(Cn,at)):at.icon||at.iconHtml?at.icon&&-1===Object.keys(g).indexOf(at.icon)?(t(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${at.icon}"`),xe(Cn)):(he(Cn),Xt(Cn,at),et(Cn,at),ce(Cn,at.showClass.icon)):xe(Cn)})(Je,at),((Je,at)=>{const Bt=w();at.imageUrl?(he(Bt,""),Bt.setAttribute("src",at.imageUrl),Bt.setAttribute("alt",at.imageAlt),be(Bt,"width",at.imageWidth),be(Bt,"height",at.imageHeight),Bt.className=p.image,U(Bt,at,"image")):xe(Bt)})(0,at),((Je,at)=>{const Bt=T();Se(Bt,at.title||at.titleText,"block"),at.title&&St(at.title,Bt),at.titleText&&(Bt.innerText=at.titleText),U(Bt,at,"title")})(0,at),((Je,at)=>{const Bt=G();j(Bt,at.closeButtonHtml),U(Bt,at,"closeButton"),Se(Bt,at.showCloseButton),Bt.setAttribute("aria-label",at.closeButtonAriaLabel)})(0,at),It(Je,at),rn(0,at),((Je,at)=>{const Bt=z();Se(Bt,at.footer),at.footer&&St(at.footer,Bt),U(Bt,at,"footer")})(0,at),"function"==typeof at.didRender&&at.didRender(a())};function jn(){const Je=v.innerParams.get(this);if(!Je)return;const at=v.domCache.get(this);xe(at.loader),J()?Je.icon&&he(_()):er(at),pe([at.popup,at.actions],p.loading),at.popup.removeAttribute("aria-busy"),at.popup.removeAttribute("data-loading"),at.confirmButton.disabled=!1,at.denyButton.disabled=!1,at.cancelButton.disabled=!1}const er=Je=>{const at=Je.popup.getElementsByClassName(Je.loader.getAttribute("data-button-to-replace"));at.length?he(at[0],"inline-block"):!ke(C())&&!ke(L())&&!ke(P())&&xe(Je.actions)};const Dr=()=>C()&&C().click(),kr=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Or=Je=>{Je.keydownTarget&&Je.keydownHandlerAdded&&(Je.keydownTarget.removeEventListener("keydown",Je.keydownHandler,{capture:Je.keydownListenerCapture}),Je.keydownHandlerAdded=!1)},oi=(Je,at)=>{const Bt=ne();if(Bt.length)return(Je+=at)===Bt.length?Je=0:-1===Je&&(Je=Bt.length-1),void Bt[Je].focus();a().focus()},Qn=["ArrowRight","ArrowDown"],Ir=["ArrowLeft","ArrowUp"],Tr=(Je,at,Bt)=>{const Cn=v.innerParams.get(Je);!Cn||at.isComposing||229===at.keyCode||(Cn.stopKeydownPropagation&&at.stopPropagation(),"Enter"===at.key?ar(Je,at,Cn):"Tab"===at.key?Jr(at):[...Qn,...Ir].includes(at.key)?ri(at.key):"Escape"===at.key&&Rr(at,Cn,Bt))},ar=(Je,at,Bt)=>{if(l(Bt.allowEnterKey)&&at.target&&Je.getInput()&&at.target instanceof HTMLElement&&at.target.outerHTML===Je.getInput().outerHTML){if(["textarea","file"].includes(Bt.input))return;Dr(),at.preventDefault()}},Jr=Je=>{const at=Je.target,Bt=ne();let Cn=-1;for(let dr=0;dr<Bt.length;dr++)if(at===Bt[dr]){Cn=dr;break}oi(Cn,Je.shiftKey?-1:1),Je.stopPropagation(),Je.preventDefault()},ri=Je=>{const at=C(),Bt=L(),Cn=P();if(document.activeElement instanceof HTMLElement&&![at,Bt,Cn].includes(document.activeElement))return;const cr=Qn.includes(Je)?"nextElementSibling":"previousElementSibling";let ki=document.activeElement;for(let Di=0;Di<N().children.length;Di++){if(ki=ki[cr],!ki)return;if(ki instanceof HTMLButtonElement&&ke(ki))break}ki instanceof HTMLButtonElement&&ki.focus()},Rr=(Je,at,Bt)=>{l(at.allowEscapeKey)&&(Je.preventDefault(),Bt(kr.esc))};var Yr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const pn=()=>{Array.from(document.body.children).forEach(at=>{at.hasAttribute("data-previous-aria-hidden")?(at.setAttribute("aria-hidden",at.getAttribute("data-previous-aria-hidden")),at.removeAttribute("data-previous-aria-hidden")):at.removeAttribute("aria-hidden")})},Ut=()=>{const Je=navigator.userAgent,at=!!Je.match(/iPad/i)||!!Je.match(/iPhone/i),Bt=!!Je.match(/WebKit/i);at&&Bt&&!Je.match(/CriOS/i)&&a().scrollHeight>window.innerHeight-44&&(s().style.paddingBottom="44px")},xn=()=>{const Je=s();let at;Je.ontouchstart=Bt=>{at=Sn(Bt)},Je.ontouchmove=Bt=>{at&&(Bt.preventDefault(),Bt.stopPropagation())}},Sn=Je=>{const at=Je.target,Bt=s();return!Kn(Je)&&!Jn(Je)&&(at===Bt||!ve(Bt)&&at instanceof HTMLElement&&"INPUT"!==at.tagName&&"TEXTAREA"!==at.tagName&&!(ve(x())&&x().contains(at)))},Kn=Je=>Je.touches&&Je.touches.length&&"stylus"===Je.touches[0].touchType,Jn=Je=>Je.touches&&Je.touches.length>1,Un=()=>{null===V.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(V.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${V.previousBodyPadding+(()=>{const Je=document.createElement("div");Je.className=p["scrollbar-measure"],document.body.appendChild(Je);const at=Je.getBoundingClientRect().width-Je.clientWidth;return document.body.removeChild(Je),at})()}px`)};function Pn(Je,at,Bt,Cn){J()?qr(Je,Cn):(Ve(Bt).then(()=>qr(Je,Cn)),Or(Be)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(at.setAttribute("style","display:none !important"),at.removeAttribute("class"),at.innerHTML=""):at.remove(),X()&&(null!==V.previousBodyPadding&&(document.body.style.paddingRight=`${V.previousBodyPadding}px`,V.previousBodyPadding=null),(()=>{if(H(document.body,p.iosfix)){const Je=parseInt(document.body.style.top,10);pe(document.body,p.iosfix),document.body.style.top="",document.body.scrollTop=-1*Je}})(),pn()),function Bn(){pe([document.documentElement,document.body],[p.shown,p["height-auto"],p["no-backdrop"],p["toast-shown"]])}()}function Gn(Je){Je=Nr(Je);const at=Yr.swalPromiseResolve.get(this),Bt=sr(this);this.isAwaitingPromise()?Je.isDismissed||(_r(this),at(Je)):Bt&&at(Je)}const sr=Je=>{const at=a();if(!at)return!1;const Bt=v.innerParams.get(Je);if(!Bt||H(at,Bt.hideClass.popup))return!1;pe(at,Bt.showClass.popup),ce(at,Bt.hideClass.popup);const Cn=s();return pe(Cn,Bt.showClass.backdrop),ce(Cn,Bt.hideClass.backdrop),Fr(Je,at,Bt),!0};const _r=Je=>{Je.isAwaitingPromise()&&(v.awaitingPromise.delete(Je),v.innerParams.get(Je)||Je._destroy())},Nr=Je=>typeof Je>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},Je),Fr=(Je,at,Bt)=>{const Cn=s(),dr=Ct&&Te(at);"function"==typeof Bt.willClose&&Bt.willClose(at),dr?Br(Je,at,Cn,Bt.returnFocus,Bt.didClose):Pn(Je,Cn,Bt.returnFocus,Bt.didClose)},Br=(Je,at,Bt,Cn,dr)=>{Be.swalCloseEventFinishedCallback=Pn.bind(null,Je,Bt,Cn,dr),at.addEventListener(Ct,function(cr){cr.target===at&&(Be.swalCloseEventFinishedCallback(),delete Be.swalCloseEventFinishedCallback)})},qr=(Je,at)=>{setTimeout(()=>{"function"==typeof at&&at.bind(Je.params)(),Je._destroy()})};function Xr(Je,at,Bt){const Cn=v.domCache.get(Je);at.forEach(dr=>{Cn[dr].disabled=Bt})}function ci(Je,at){if(Je)if("radio"===Je.type){const Cn=Je.parentNode.parentNode.querySelectorAll("input");for(let dr=0;dr<Cn.length;dr++)Cn[dr].disabled=at}else Je.disabled=at}const ma={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Za=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Co={},sa=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],la=Je=>Object.prototype.hasOwnProperty.call(ma,Je),lo=Je=>-1!==Za.indexOf(Je),Ki=Je=>Co[Je],po=Je=>{la(Je)||r(`Unknown parameter "${Je}"`)},Po=Je=>{sa.includes(Je)&&r(`The parameter "${Je}" is incompatible with toasts`)},Va=Je=>{Ki(Je)&&m(Je,Ki(Je))};const Wo=Je=>{const at={};return Object.keys(Je).forEach(Bt=>{lo(Bt)?at[Bt]=Je[Bt]:r(`Invalid parameter to update: ${Bt}`)}),at};const Ia=Je=>{no(Je),delete Je.params,delete Be.keydownHandler,delete Be.keydownTarget,delete Be.currentInstance},no=Je=>{Je.isAwaitingPromise()?(xs(v,Je),v.awaitingPromise.set(Je,!0)):(xs(Yr,Je),xs(v,Je))},xs=(Je,at)=>{for(const Bt in Je)Je[Bt].delete(at)};var ns=Object.freeze({__proto__:null,_destroy:function Wa(){const Je=v.domCache.get(this),at=v.innerParams.get(this);at?(Je.popup&&Be.swalCloseEventFinishedCallback&&(Be.swalCloseEventFinishedCallback(),delete Be.swalCloseEventFinishedCallback),"function"==typeof at.didDestroy&&at.didDestroy(),Ia(this)):no(this)},close:Gn,closeModal:Gn,closePopup:Gn,closeToast:Gn,disableButtons:function Hi(){Xr(this,["confirmButton","denyButton","cancelButton"],!0)},disableInput:function pi(){ci(this.getInput(),!0)},disableLoading:jn,enableButtons:function Ui(){Xr(this,["confirmButton","denyButton","cancelButton"],!1)},enableInput:function jr(){ci(this.getInput(),!1)},getInput:function nr(Je){const at=v.innerParams.get(Je||this),Bt=v.domCache.get(Je||this);return Bt?te(Bt.popup,at.input):null},handleAwaitingPromise:_r,hideLoading:jn,isAwaitingPromise:function or(){return!!v.awaitingPromise.get(this)},rejectPromise:function xr(Je){const at=Yr.swalPromiseReject.get(this);_r(this),at&&at(Je)},resetValidationMessage:function Qi(){const Je=v.domCache.get(this);Je.validationMessage&&xe(Je.validationMessage);const at=this.getInput();at&&(at.removeAttribute("aria-invalid"),at.removeAttribute("aria-describedby"),pe(at,p.inputerror))},showValidationMessage:function ui(Je){const at=v.domCache.get(this),Bt=v.innerParams.get(this);j(at.validationMessage,Je),at.validationMessage.className=p["validation-message"],Bt.customClass&&Bt.customClass.validationMessage&&ce(at.validationMessage,Bt.customClass.validationMessage),he(at.validationMessage);const Cn=this.getInput();Cn&&(Cn.setAttribute("aria-invalid",!0),Cn.setAttribute("aria-describedby",p["validation-message"]),ee(Cn),ce(Cn,p.inputerror))},update:function Ro(Je){const at=a(),Bt=v.innerParams.get(this);if(!at||H(at,Bt.hideClass.popup))return void r("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const Cn=Wo(Je),dr=Object.assign({},Bt,Cn);En(this,dr),v.innerParams.set(this,dr),Object.defineProperties(this,{params:{value:Object.assign({},this.params,Je),writable:!1,enumerable:!0}})}});const ra=Je=>{let at=a();at||new gi,at=a();const Bt=E();J()?xe(_()):Ls(at,Je),he(Bt),at.setAttribute("data-loading","true"),at.setAttribute("aria-busy","true"),at.focus()},Ls=(Je,at)=>{const Bt=N(),Cn=E();!at&&ke(C())&&(at=C()),he(Bt),at&&(xe(at),Cn.setAttribute("data-button-to-replace",at.className)),Cn.parentNode.insertBefore(Cn,at),ce([Je,Bt],p.loading)},Qs=Je=>Je.checked?1:0,Zs=Je=>Je.checked?Je.value:null,Us=Je=>Je.files.length?null!==Je.getAttribute("multiple")?Je.files:Je.files[0]:null,Vo=(Je,at)=>{const Bt=a(),Cn=dr=>{rs[at.input](Bt,$o(dr),at)};i(at.inputOptions)||u(at.inputOptions)?(ra(C()),f(at.inputOptions).then(dr=>{Je.hideLoading(),Cn(dr)})):"object"==typeof at.inputOptions?Cn(at.inputOptions):t("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof at.inputOptions)},Xo=(Je,at)=>{const Bt=Je.getInput();xe(Bt),f(at.inputValue).then(Cn=>{Bt.value="number"===at.input?`${parseFloat(Cn)||0}`:`${Cn}`,he(Bt),Bt.focus(),Je.hideLoading()}).catch(Cn=>{t(`Error in inputValue promise: ${Cn}`),Bt.value="",he(Bt),Bt.focus(),Je.hideLoading()})},rs={select:(Je,at,Bt)=>{const Cn=de(Je,p.select),dr=(cr,ki,Di)=>{const _i=document.createElement("option");_i.value=Di,j(_i,ki),_i.selected=Jo(Di,Bt.inputValue),cr.appendChild(_i)};at.forEach(cr=>{const ki=cr[0],Di=cr[1];if(Array.isArray(Di)){const _i=document.createElement("optgroup");_i.label=ki,_i.disabled=!1,Cn.appendChild(_i),Di.forEach($i=>dr(_i,$i[1],$i[0]))}else dr(Cn,Di,ki)}),Cn.focus()},radio:(Je,at,Bt)=>{const Cn=de(Je,p.radio);at.forEach(cr=>{const ki=cr[0],Di=cr[1],_i=document.createElement("input"),$i=document.createElement("label");_i.type="radio",_i.name=p.radio,_i.value=ki,Jo(ki,Bt.inputValue)&&(_i.checked=!0);const Bi=document.createElement("span");j(Bi,Di),Bi.className=p.label,$i.appendChild(_i),$i.appendChild(Bi),Cn.appendChild($i)});const dr=Cn.querySelectorAll("input");dr.length&&dr[0].focus()}},$o=Je=>{const at=[];return typeof Map<"u"&&Je instanceof Map?Je.forEach((Bt,Cn)=>{let dr=Bt;"object"==typeof dr&&(dr=$o(dr)),at.push([Cn,dr])}):Object.keys(Je).forEach(Bt=>{let Cn=Je[Bt];"object"==typeof Cn&&(Cn=$o(Cn)),at.push([Bt,Cn])}),at},Jo=(Je,at)=>at&&at.toString()===Je.toString(),go=(Je,at)=>{const Bt=v.innerParams.get(Je);if(!Bt.input)return void t(`The "input" parameter is needed to be set when using returnInputValueOn${e(at)}`);const Cn=((Je,at)=>{const Bt=Je.getInput();if(!Bt)return null;switch(at.input){case"checkbox":return Qs(Bt);case"radio":return Zs(Bt);case"file":return Us(Bt);default:return at.inputAutoTrim?Bt.value.trim():Bt.value}})(Je,Bt);Bt.inputValidator?ds(Je,Cn,at):Je.getInput().checkValidity()?"deny"===at?Is(Je,Cn):We(Je,Cn):(Je.enableButtons(),Je.showValidationMessage(Bt.validationMessage))},ds=(Je,at,Bt)=>{const Cn=v.innerParams.get(Je);Je.disableInput(),Promise.resolve().then(()=>f(Cn.inputValidator(at,Cn.validationMessage))).then(cr=>{Je.enableButtons(),Je.enableInput(),cr?Je.showValidationMessage(cr):"deny"===Bt?Is(Je,at):We(Je,at)})},Is=(Je,at)=>{const Bt=v.innerParams.get(Je||void 0);Bt.showLoaderOnDeny&&ra(L()),Bt.preDeny?(v.awaitingPromise.set(Je||void 0,!0),Promise.resolve().then(()=>f(Bt.preDeny(at,Bt.validationMessage))).then(dr=>{!1===dr?(Je.hideLoading(),_r(Je)):Je.close({isDenied:!0,value:typeof dr>"u"?at:dr})}).catch(dr=>oa(Je||void 0,dr))):Je.close({isDenied:!0,value:at})},Ko=(Je,at)=>{Je.close({isConfirmed:!0,value:at})},oa=(Je,at)=>{Je.rejectPromise(at)},We=(Je,at)=>{const Bt=v.innerParams.get(Je||void 0);Bt.showLoaderOnConfirm&&ra(),Bt.preConfirm?(Je.resetValidationMessage(),v.awaitingPromise.set(Je||void 0,!0),Promise.resolve().then(()=>f(Bt.preConfirm(at,Bt.validationMessage))).then(dr=>{ke(D())||!1===dr?(Je.hideLoading(),_r(Je)):Ko(Je,typeof dr>"u"?at:dr)}).catch(dr=>oa(Je||void 0,dr))):Ko(Je,at)},ut=(Je,at,Bt)=>{at.popup.onclick=()=>{const Cn=v.innerParams.get(Je);Cn&&(yt(Cn)||Cn.timer||Cn.input)||Bt(kr.close)}},yt=Je=>Je.showConfirmButton||Je.showDenyButton||Je.showCancelButton||Je.showCloseButton;let kt=!1;const Mt=Je=>{Je.popup.onmousedown=()=>{Je.container.onmouseup=function(at){Je.container.onmouseup=void 0,at.target===Je.container&&(kt=!0)}}},Ft=Je=>{Je.container.onmousedown=()=>{Je.popup.onmouseup=function(at){Je.popup.onmouseup=void 0,(at.target===Je.popup||Je.popup.contains(at.target))&&(kt=!0)}}},ln=(Je,at,Bt)=>{at.container.onclick=Cn=>{const dr=v.innerParams.get(Je);kt?kt=!1:Cn.target===at.container&&l(dr.allowOutsideClick)&&Bt(kr.backdrop)}},an=Je=>Je instanceof Element||(Je=>"object"==typeof Je&&Je.jquery)(Je);const $n=()=>{if(Be.timeout)return(()=>{const Je=q(),at=parseInt(window.getComputedStyle(Je).width);Je.style.removeProperty("transition"),Je.style.width="100%";const Bt=parseInt(window.getComputedStyle(Je).width);Je.style.width=at/Bt*100+"%"})(),Be.timeout.stop()},wr=()=>{if(Be.timeout){const Je=Be.timeout.start();return Le(Je),Je}};let Kr=!1;const $r={};const Gi=Je=>{for(let at=Je.target;at&&at!==document;at=at.parentNode)for(const Bt in $r){const Cn=at.getAttribute(Bt);if(Cn)return void $r[Bt].fire({template:Cn})}};var ia=Object.freeze({__proto__:null,argsToParams:Je=>{const at={};return"object"!=typeof Je[0]||an(Je[0])?["title","html","icon"].forEach((Bt,Cn)=>{const dr=Je[Cn];"string"==typeof dr||an(dr)?at[Bt]=dr:void 0!==dr&&t(`Unexpected type of ${Bt}! Expected "string" or "Element", got ${typeof dr}`)}):Object.assign(at,Je[0]),at},bindClickHandler:function Li(){$r[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,Kr||(document.body.addEventListener("click",Gi),Kr=!0)},clickCancel:()=>P()&&P().click(),clickConfirm:Dr,clickDeny:()=>L()&&L().click(),enableLoading:ra,fire:function Dn(){const Je=this;for(var at=arguments.length,Bt=new Array(at),Cn=0;Cn<at;Cn++)Bt[Cn]=arguments[Cn];return new Je(...Bt)},getActions:N,getCancelButton:P,getCloseButton:G,getConfirmButton:C,getContainer:s,getDenyButton:L,getFocusableElements:ne,getFooter:z,getHtmlContainer:x,getIcon:_,getIconContent:()=>h(p["icon-content"]),getImage:w,getInputLabel:()=>h(p["input-label"]),getLoader:E,getPopup:a,getProgressSteps:M,getTimerLeft:()=>Be.timeout&&Be.timeout.getTimerLeft(),getTimerProgressBar:q,getTitle:T,getValidationMessage:D,increaseTimer:Je=>{if(Be.timeout){const at=Be.timeout.increase(Je);return Le(at,!0),at}},isDeprecatedParameter:Ki,isLoading:()=>a().hasAttribute("data-loading"),isTimerRunning:()=>Be.timeout&&Be.timeout.isRunning(),isUpdatableParameter:lo,isValidParameter:la,isVisible:()=>ke(a()),mixin:function Nn(Je){return class at extends(this){_main(Cn,dr){return super._main(Cn,Object.assign({},Je,dr))}}},resumeTimer:wr,showLoading:ra,stopTimer:$n,toggleTimer:()=>{const Je=Be.timeout;return Je&&(Je.running?$n():wr())}});class Wi{constructor(at,Bt){this.callback=at,this.remaining=Bt,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(at){const Bt=this.running;return Bt&&this.stop(),this.remaining+=at,Bt&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const aa=["swal-title","swal-html","swal-footer"],Ua=Je=>{const at={};return Array.from(Je.querySelectorAll("swal-param")).forEach(Cn=>{Xa(Cn,["name","value"]);const dr=Cn.getAttribute("name"),cr=Cn.getAttribute("value");at[dr]="boolean"==typeof ma[dr]?"false"!==cr:"object"==typeof ma[dr]?JSON.parse(cr):cr}),at},ya=Je=>{const at={};return Array.from(Je.querySelectorAll("swal-function-param")).forEach(Cn=>{const dr=Cn.getAttribute("name"),cr=Cn.getAttribute("value");at[dr]=new Function(`return ${cr}`)()}),at},Aa=Je=>{const at={};return Array.from(Je.querySelectorAll("swal-button")).forEach(Cn=>{Xa(Cn,["type","color","aria-label"]);const dr=Cn.getAttribute("type");at[`${dr}ButtonText`]=Cn.innerHTML,at[`show${e(dr)}Button`]=!0,Cn.hasAttribute("color")&&(at[`${dr}ButtonColor`]=Cn.getAttribute("color")),Cn.hasAttribute("aria-label")&&(at[`${dr}ButtonAriaLabel`]=Cn.getAttribute("aria-label"))}),at},Na=Je=>{const at={},Bt=Je.querySelector("swal-image");return Bt&&(Xa(Bt,["src","width","height","alt"]),Bt.hasAttribute("src")&&(at.imageUrl=Bt.getAttribute("src")),Bt.hasAttribute("width")&&(at.imageWidth=Bt.getAttribute("width")),Bt.hasAttribute("height")&&(at.imageHeight=Bt.getAttribute("height")),Bt.hasAttribute("alt")&&(at.imageAlt=Bt.getAttribute("alt"))),at},ro=Je=>{const at={},Bt=Je.querySelector("swal-icon");return Bt&&(Xa(Bt,["type","color"]),Bt.hasAttribute("type")&&(at.icon=Bt.getAttribute("type")),Bt.hasAttribute("color")&&(at.iconColor=Bt.getAttribute("color")),at.iconHtml=Bt.innerHTML),at},wo=Je=>{const at={},Bt=Je.querySelector("swal-input");Bt&&(Xa(Bt,["type","label","placeholder","value"]),at.input=Bt.getAttribute("type")||"text",Bt.hasAttribute("label")&&(at.inputLabel=Bt.getAttribute("label")),Bt.hasAttribute("placeholder")&&(at.inputPlaceholder=Bt.getAttribute("placeholder")),Bt.hasAttribute("value")&&(at.inputValue=Bt.getAttribute("value")));const Cn=Array.from(Je.querySelectorAll("swal-input-option"));return Cn.length&&(at.inputOptions={},Cn.forEach(dr=>{Xa(dr,["value"]);const cr=dr.getAttribute("value");at.inputOptions[cr]=dr.innerHTML})),at},Eo=(Je,at)=>{const Bt={};for(const Cn in at){const dr=at[Cn],cr=Je.querySelector(dr);cr&&(Xa(cr,[]),Bt[dr.replace(/^swal-/,"")]=cr.innerHTML.trim())}return Bt},Do=Je=>{const at=aa.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(Je.children).forEach(Bt=>{const Cn=Bt.tagName.toLowerCase();at.includes(Cn)||r(`Unrecognized element <${Cn}>`)})},Xa=(Je,at)=>{Array.from(Je.attributes).forEach(Bt=>{-1===at.indexOf(Bt.name)&&r([`Unrecognized attribute "${Bt.name}" on <${Je.tagName.toLowerCase()}>.`,at.length?`Allowed attributes are: ${at.join(", ")}`:"To set the value, use HTML within the element."])})},Tt=Je=>{const at=s(),Bt=a();"function"==typeof Je.willOpen&&Je.willOpen(Bt);const dr=window.getComputedStyle(document.body).overflowY;wn(at,Bt,Je),setTimeout(()=>{bn(at,Bt)},10),X()&&(Qt(at,Je.scrollbarPadding,dr),Array.from(document.body.children).forEach(at=>{at===s()||at.contains(s())||(at.hasAttribute("aria-hidden")&&at.setAttribute("data-previous-aria-hidden",at.getAttribute("aria-hidden")),at.setAttribute("aria-hidden","true"))})),!J()&&!Be.previousActiveElement&&(Be.previousActiveElement=document.activeElement),"function"==typeof Je.didOpen&&setTimeout(()=>Je.didOpen(Bt)),pe(at,p["no-transition"])},Gt=Je=>{const at=a();if(Je.target!==at)return;const Bt=s();at.removeEventListener(Ct,Gt),Bt.style.overflowY="auto"},bn=(Je,at)=>{Ct&&Te(at)?(Je.style.overflowY="hidden",at.addEventListener(Ct,Gt)):Je.style.overflowY="auto"},Qt=(Je,at,Bt)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!H(document.body,p.iosfix)){const at=document.body.scrollTop;document.body.style.top=-1*at+"px",ce(document.body,p.iosfix),xn(),Ut()}})(),at&&"hidden"!==Bt&&Un(),setTimeout(()=>{Je.scrollTop=0})},wn=(Je,at,Bt)=>{ce(Je,Bt.showClass.backdrop),at.style.setProperty("opacity","0","important"),he(at,"grid"),setTimeout(()=>{ce(at,Bt.showClass.popup),at.style.removeProperty("opacity")},10),ce([document.documentElement,document.body],p.shown),Bt.heightAuto&&Bt.backdrop&&!Bt.toast&&ce([document.documentElement,document.body],p["height-auto"])};var qn={email:(Je,at)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(Je)?Promise.resolve():Promise.resolve(at||"Invalid email address"),url:(Je,at)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(Je)?Promise.resolve():Promise.resolve(at||"Invalid URL")};function Ar(Je){(function tr(Je){Je.inputValidator||Object.keys(qn).forEach(at=>{Je.input===at&&(Je.inputValidator=qn[at])})})(Je),Je.showLoaderOnConfirm&&!Je.preConfirm&&r("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function pr(Je){(!Je.target||"string"==typeof Je.target&&!document.querySelector(Je.target)||"string"!=typeof Je.target&&!Je.target.appendChild)&&(r('Target parameter is not valid, defaulting to "body"'),Je.target="body")}(Je),"string"==typeof Je.title&&(Je.title=Je.title.split("\n").join("<br />")),Ot(Je)}let br;class Sr{constructor(){if(typeof window>"u")return;br=this;for(var at=arguments.length,Bt=new Array(at),Cn=0;Cn<at;Cn++)Bt[Cn]=arguments[Cn];const dr=Object.freeze(this.constructor.argsToParams(Bt));Object.defineProperties(this,{params:{value:dr,writable:!1,enumerable:!0,configurable:!0}});const cr=br._main(br.params);v.promise.set(this,cr)}_main(at){let Bt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(Je=>{!1===Je.backdrop&&Je.allowOutsideClick&&r('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const at in Je)po(at),Je.toast&&Po(at),Va(at)})(Object.assign({},Bt,at)),Be.currentInstance&&(Be.currentInstance._destroy(),X()&&pn()),Be.currentInstance=br;const Cn=Mr(at,Bt);Ar(Cn),Object.freeze(Cn),Be.timeout&&(Be.timeout.stop(),delete Be.timeout),clearTimeout(Be.restoreFocusTimeout);const dr=Ur(br);return En(br,Cn),v.innerParams.set(br,Cn),Vr(br,dr,Cn)}then(at){return v.promise.get(this).then(at)}finally(at){return v.promise.get(this).finally(at)}}const Vr=(Je,at,Bt)=>new Promise((Cn,dr)=>{const cr=ki=>{Je.close({isDismissed:!0,dismiss:ki})};Yr.swalPromiseResolve.set(Je,Cn),Yr.swalPromiseReject.set(Je,dr),at.confirmButton.onclick=()=>{(Je=>{const at=v.innerParams.get(Je);Je.disableButtons(),at.input?go(Je,"confirm"):We(Je,!0)})(Je)},at.denyButton.onclick=()=>{(Je=>{const at=v.innerParams.get(Je);Je.disableButtons(),at.returnInputValueOnDeny?go(Je,"deny"):Is(Je,!1)})(Je)},at.cancelButton.onclick=()=>{((Je,at)=>{Je.disableButtons(),at(kr.cancel)})(Je,cr)},at.closeButton.onclick=()=>{cr(kr.close)},((Je,at,Bt)=>{v.innerParams.get(Je).toast?ut(Je,at,Bt):(Mt(at),Ft(at),ln(Je,at,Bt))})(Je,at,cr),((Je,at,Bt,Cn)=>{Or(at),Bt.toast||(at.keydownHandler=dr=>Tr(Je,dr,Cn),at.keydownTarget=Bt.keydownListenerCapture?window:a(),at.keydownListenerCapture=Bt.keydownListenerCapture,at.keydownTarget.addEventListener("keydown",at.keydownHandler,{capture:at.keydownListenerCapture}),at.keydownHandlerAdded=!0)})(Je,Be,Bt,cr),((Je,at)=>{"select"===at.input||"radio"===at.input?Vo(Je,at):["text","email","number","tel","textarea"].includes(at.input)&&(i(at.inputValue)||u(at.inputValue))&&(ra(C()),Xo(Je,at))})(Je,Bt),Tt(Bt),ei(Be,Bt,cr),ai(at,Bt),setTimeout(()=>{at.container.scrollTop=0})}),Mr=(Je,at)=>{const Bt=(Je=>{const at="string"==typeof Je.template?document.querySelector(Je.template):Je.template;if(!at)return{};const Bt=at.content;return Do(Bt),Object.assign(Ua(Bt),ya(Bt),Aa(Bt),Na(Bt),ro(Bt),wo(Bt),Eo(Bt,aa))})(Je),Cn=Object.assign({},ma,at,Bt,Je);return Cn.showClass=Object.assign({},ma.showClass,Cn.showClass),Cn.hideClass=Object.assign({},ma.hideClass,Cn.hideClass),Cn},Ur=Je=>{const at={popup:a(),container:s(),actions:N(),confirmButton:C(),denyButton:L(),cancelButton:P(),loader:E(),closeButton:G(),validationMessage:D(),progressSteps:M()};return v.domCache.set(Je,at),at},ei=(Je,at,Bt)=>{const Cn=q();xe(Cn),at.timer&&(Je.timeout=new Wi(()=>{Bt("timer"),delete Je.timeout},at.timer),at.timerProgressBar&&(he(Cn),U(Cn,at,"timerProgressBar"),setTimeout(()=>{Je.timeout&&Je.timeout.running&&Le(at.timer)})))},ai=(Je,at)=>{if(!at.toast){if(!l(at.allowEnterKey))return void fr();yi(Je,at)||oi(-1,1)}},yi=(Je,at)=>at.focusDeny&&ke(Je.denyButton)?(Je.denyButton.focus(),!0):at.focusCancel&&ke(Je.cancelButton)?(Je.cancelButton.focus(),!0):!(!at.focusConfirm||!ke(Je.confirmButton)||(Je.confirmButton.focus(),0)),fr=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)){const Je=new Date,at=localStorage.getItem("swal-initiation");at?(Je.getTime()-Date.parse(at))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const Bt=document.createElement("audio");Bt.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",Bt.loop=!0,document.body.appendChild(Bt),setTimeout(()=>{Bt.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${Je}`)}Object.assign(Sr.prototype,ns),Object.assign(Sr,ia),Object.keys(ns).forEach(Je=>{Sr[Je]=function(){if(br)return br[Je](...arguments)}}),Sr.DismissReason=kr,Sr.version="11.7.3";const gi=Sr;return gi.default=gi,gi}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(v,ae){var ie=v.createElement("style");if(v.getElementsByTagName("head")[0].appendChild(ie),ie.styleSheet)ie.styleSheet.disabled||(ie.styleSheet.cssText=ae);else try{ie.innerHTML=ae}catch{ie.innerText=ae}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')}}]);